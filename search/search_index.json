{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"\u5b9f\u8df5\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\uff1a\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u7de8","text":""},{"location":"#_2","title":"\u6982\u8981","text":"<p>\u672c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306f\u3001\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\uff08\u8ca9\u58f2\u7ba1\u7406\u30fb\u8ca1\u52d9\u4f1a\u8a08\u30fb\u751f\u7523\u7ba1\u7406\uff09\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\u3092\u4f53\u7cfb\u7684\u306b\u89e3\u8aac\u3059\u308b\u6280\u8853\u66f8\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u3059\u3002</p> <ul> <li>\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u30c7\u30e2</li> </ul>"},{"location":"#_3","title":"\u8a18\u4e8b","text":"<ul> <li>\u5b9f\u8df5\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\uff1a\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u7de8 - \u672c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30e1\u30a4\u30f3\u30b3\u30f3\u30c6\u30f3\u30c4\u3002\u516840\u7ae0\u3067\u69cb\u6210\u3002</li> <li>\u30a2\u30a6\u30c8\u30e9\u30a4\u30f3 - \u8a18\u4e8b\u5168\u4f53\u306e\u69cb\u6210\u3068\u6982\u8981\u3002</li> <li>\u57f7\u7b46\u30ef\u30fc\u30af\u30d5\u30ed\u30fc - \u8a18\u4e8b\u57f7\u7b46\u306e\u9032\u3081\u65b9\u3002</li> </ul>"},{"location":"#_4","title":"\u7814\u7a76\uff1a\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u5b9f\u88c5\u7de8","text":"<ul> <li>\u7814\u7a76 1\uff1a\u30e2\u30ce\u30ea\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5 - Spring Boot + Thymeleaf + htmx \u306b\u3088\u308b\u30e2\u30ce\u30ea\u30b9\u5b9f\u88c5</li> <li>\u7814\u7a76 2\uff1aJavaFX \u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5b9f\u88c5 - JavaFX + MVVM \u30d1\u30bf\u30fc\u30f3\u306b\u3088\u308b\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30a2\u30d7\u30ea</li> <li>\u7814\u7a76 3\uff1agRPC \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5 - Protocol Buffers + gRPC \u306b\u3088\u308b\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9</li> <li>\u7814\u7a76 4\uff1aGraphQL \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5 - Spring for GraphQL \u306b\u3088\u308b\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u5411\u3051 API</li> </ul>"},{"location":"#_5","title":"\u7814\u7a76\uff1a\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u5b9f\u88c5\u7de8","text":"<ul> <li>\u7814\u7a76 1\uff1a\u30e2\u30ce\u30ea\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5 - Spring Boot + Thymeleaf + htmx \u306b\u3088\u308b\u30e2\u30ce\u30ea\u30b9\u5b9f\u88c5</li> <li>\u7814\u7a76 2\uff1aJavaFX \u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5b9f\u88c5 - JavaFX + MVVM \u30d1\u30bf\u30fc\u30f3\u306b\u3088\u308b\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30a2\u30d7\u30ea</li> <li>\u7814\u7a76 3\uff1agRPC \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5 - Protocol Buffers + gRPC \u306b\u3088\u308b\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9</li> <li>\u7814\u7a76 4\uff1aGraphQL \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5 - Spring for GraphQL \u306b\u3088\u308b\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u5411\u3051 API</li> </ul>"},{"location":"#_6","title":"\u7814\u7a76\uff1a\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u5b9f\u88c5\u7de8","text":"<ul> <li>\u7814\u7a76 1\uff1a\u30e2\u30ce\u30ea\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5 - Spring Boot + Thymeleaf + htmx \u306b\u3088\u308b\u30e2\u30ce\u30ea\u30b9\u5b9f\u88c5</li> <li>\u7814\u7a76 2\uff1aJavaFX \u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5b9f\u88c5 - JavaFX + MVVM \u30d1\u30bf\u30fc\u30f3\u306b\u3088\u308b\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30a2\u30d7\u30ea</li> <li>\u7814\u7a76 3\uff1agRPC \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5 - Protocol Buffers + gRPC \u306b\u3088\u308b\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9</li> <li>\u7814\u7a76 4\uff1aGraphQL \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5 - Spring for GraphQL \u306b\u3088\u308b\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u5411\u3051 API</li> </ul>"},{"location":"#orm","title":"\u7814\u7a76\uff1a\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0 ORM \u5b9f\u88c5\u7de8","text":"<ul> <li>\u7b2c 14 \u7ae0\uff1a\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u5168\u4f53\u50cf\u3010ORM \u7248\u3011</li> <li>\u7b2c 15 \u7ae0\uff1a\u52d8\u5b9a\u79d1\u76ee\u306e\u8a2d\u8a08\u3010ORM \u7248\u3011</li> <li>\u7b2c 16 \u7ae0\uff1a\u4ed5\u8a33\u306e\u8a2d\u8a08\u3010ORM \u7248\u3011</li> <li>\u7b2c 17 \u7ae0\uff1a\u81ea\u52d5\u4ed5\u8a33\u306e\u8a2d\u8a08\u3010ORM \u7248\u3011</li> <li>\u7b2c 18 \u7ae0\uff1a\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u306e\u8a2d\u8a08\u3010ORM \u7248\u3011</li> <li>\u7b2c 19 \u7ae0\uff1a\u8d64\u9ed2\u3068\u30ed\u30b0\u306e\u8a2d\u8a08\u3010ORM \u7248\u3011</li> <li>\u7b2c 20 \u7ae0\uff1a\u8ca1\u52d9\u4f1a\u8a08\u30c7\u30fc\u30bf\u8a2d\u8a08\uff08D \u793e\u4e8b\u4f8b\uff09\u3010ORM \u7248\u3011</li> <li>\u7b2c 21 \u7ae0\uff1aAPI \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5\u3010ORM \u7248\u3011</li> </ul>"},{"location":"#_7","title":"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9","text":"<ul> <li>SchemaSpy ER \u56f3\uff08SMS\uff09 - \u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9 ER \u56f3\u3002\u30c6\u30fc\u30d6\u30eb\u69cb\u9020\u3084\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u53ef\u8996\u5316\u3002</li> </ul>"},{"location":"article/","title":"\u5b9f\u8df5\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\uff1a\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u7de8","text":""},{"location":"article/#_2","title":"\u6982\u8981","text":"<p>\u672c\u8a18\u4e8b\u3067\u306f\u3001\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\uff08\u8ca9\u58f2\u7ba1\u7406\u30fb\u8ca1\u52d9\u4f1a\u8a08\u30fb\u751f\u7523\u7ba1\u7406\uff09\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\u3092\u3001\u696d\u52d9\u30d5\u30ed\u30fc\u3068\u30c7\u30fc\u30bf\u30e2\u30c7\u30eb\u306e\u89b3\u70b9\u304b\u3089\u4f53\u7cfb\u7684\u306b\u89e3\u8aac\u3057\u307e\u3059\u3002</p>"},{"location":"article/#_3","title":"\u5bfe\u8c61\u8aad\u8005","text":"<ul> <li>\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\u306e\u57fa\u790e\u3092\u5b66\u3073\u305f\u3044\u30a8\u30f3\u30b8\u30cb\u30a2</li> <li>\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u306e\u5168\u4f53\u50cf\u3092\u7406\u89e3\u3057\u305f\u3044\u958b\u767a\u8005</li> <li>\u8ca9\u58f2\u7ba1\u7406\u30fb\u8ca1\u52d9\u4f1a\u8a08\u30fb\u751f\u7523\u7ba1\u7406\u306e\u696d\u52d9\u77e5\u8b58\u3092\u7fd2\u5f97\u3057\u305f\u3044\u65b9</li> </ul>"},{"location":"article/#_4","title":"\u8a18\u4e8b\u69cb\u6210","text":""},{"location":"article/#1","title":"\u7b2c1\u90e8\uff1a\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u306e\u5168\u4f53\u50cf","text":"<p>\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u3092\u69cb\u6210\u3059\u308b\u30b5\u30d6\u30b7\u30b9\u30c6\u30e0\u3068\u3001\u305d\u308c\u305e\u308c\u306e\u696d\u52d9\u9818\u57df\u306b\u3064\u3044\u3066\u6982\u89b3\u3057\u307e\u3059\u3002</p> <ul> <li>\u7b2c1\u7ae0\uff1a\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u3068\u306f</li> <li>\u7b2c2\u7ae0\uff1a\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u306e\u696d\u52d9\u9818\u57df</li> <li>\u7b2c3\u7ae0\uff1a\u696d\u52d9\u30d5\u30ed\u30fc\u306e\u5168\u4f53\u50cf</li> </ul>"},{"location":"article/#2","title":"\u7b2c2\u90e8\uff1a\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0","text":"<p>\u53d7\u6ce8\u304b\u3089\u58f2\u4e0a\u3001\u50b5\u6a29\u7ba1\u7406\u307e\u3067\u306e\u8ca9\u58f2\u696d\u52d9\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002</p> <ul> <li>\u7b2c4\u7ae0\uff1a\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u5168\u4f53\u50cf</li> <li>\u7b2c5\u7ae0\uff1a\u30de\u30b9\u30bf\u60c5\u5831\u306e\u8a2d\u8a08</li> <li>\u7b2c6\u7ae0\uff1a\u53d7\u6ce8\u30fb\u51fa\u8377\u30fb\u58f2\u4e0a\u306e\u8a2d\u8a08</li> <li>\u7b2c7\u7ae0\uff1a\u50b5\u6a29\u7ba1\u7406\u306e\u8a2d\u8a08</li> <li>\u7b2c8\u7ae0\uff1a\u8abf\u9054\u7ba1\u7406\u306e\u8a2d\u8a08</li> <li>\u7b2c9\u7ae0\uff1a\u5728\u5eab\u7ba1\u7406\u306e\u8a2d\u8a08</li> <li>\u7b2c10\u7ae0\uff1a\u50b5\u52d9\u7ba1\u7406\u306e\u8a2d\u8a08</li> <li>\u7b2c11\u7ae0\uff1a\u5171\u901a\u51e6\u7406\u306e\u8a2d\u8a08</li> <li>\u7b2c12\u7ae0\uff1a\u8ca9\u58f2\u7ba1\u7406\u30c7\u30fc\u30bf\u8a2d\u8a08\uff08B \u793e\u4e8b\u4f8b\uff09</li> <li>\u7b2c13\u7ae0\uff1aAPI \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5</li> </ul>"},{"location":"article/#3","title":"\u7b2c3\u90e8\uff1a\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0","text":"<p>\u52d8\u5b9a\u79d1\u76ee\u3001\u4ed5\u8a33\u3001\u81ea\u52d5\u4ed5\u8a33\u306a\u3069\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u6838\u5fc3\u90e8\u5206\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002</p> <ul> <li>\u7b2c14\u7ae0\uff1a\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u5168\u4f53\u50cf</li> <li>\u7b2c15\u7ae0\uff1a\u52d8\u5b9a\u79d1\u76ee\u306e\u8a2d\u8a08</li> <li>\u7b2c16\u7ae0\uff1a\u4ed5\u8a33\u306e\u8a2d\u8a08</li> <li>\u7b2c17\u7ae0\uff1a\u81ea\u52d5\u4ed5\u8a33\u306e\u8a2d\u8a08</li> <li>\u7b2c18\u7ae0\uff1a\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u306e\u8a2d\u8a08</li> <li>\u7b2c19\u7ae0\uff1a\u8d64\u9ed2\u3068\u30ed\u30b0\u306e\u8a2d\u8a08</li> <li>\u7b2c20\u7ae0\uff1a\u8ca1\u52d9\u4f1a\u8a08\u30c7\u30fc\u30bf\u8a2d\u8a08\uff08D \u793e\u4e8b\u4f8b\uff09</li> <li>\u7b2c21\u7ae0\uff1aAPI \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5</li> </ul>"},{"location":"article/#4","title":"\u7b2c4\u90e8\uff1a\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0","text":"<p>BOM\u3001MRP\u3001\u5de5\u7a0b\u7ba1\u7406\u306a\u3069\u88fd\u9020\u696d\u306e\u57fa\u5e79\u3068\u306a\u308b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002</p> <ul> <li>\u7b2c22\u7ae0\uff1a\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u5168\u4f53\u50cf</li> <li>\u7b2c23\u7ae0\uff1a\u30de\u30b9\u30bf\u60c5\u5831\u306e\u8a2d\u8a08</li> <li>\u7b2c24\u7ae0\uff1a\u751f\u7523\u8a08\u753b\u306e\u8a2d\u8a08</li> <li>\u7b2c25\u7ae0\uff1a\u8cfc\u8cb7\u7ba1\u7406\u306e\u8a2d\u8a08</li> <li>\u7b2c26\u7ae0\uff1a\u5916\u6ce8\u59d4\u8a17\u7ba1\u7406\u306e\u8a2d\u8a08</li> <li>\u7b2c27\u7ae0\uff1a\u5de5\u7a0b\u7ba1\u7406\u306e\u8a2d\u8a08</li> <li>\u7b2c28\u7ae0\uff1a\u5728\u5eab\u7ba1\u7406\u306e\u8a2d\u8a08</li> <li>\u7b2c29\u7ae0\uff1a\u54c1\u8cea\u7ba1\u7406\u306e\u8a2d\u8a08</li> <li>\u7b2c30\u7ae0\uff1a\u88fd\u9020\u539f\u4fa1\u7ba1\u7406\u306e\u8a2d\u8a08</li> <li>\u7b2c31\u7ae0\uff1a\u751f\u7523\u7ba1\u7406\u30c7\u30fc\u30bf\u8a2d\u8a08\uff08E \u793e\u4e8b\u4f8b\uff09</li> <li>\u7b2c32\u7ae0\uff1aAPI \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5</li> </ul>"},{"location":"article/#5","title":"\u7b2c5\u90e8\uff1a\u30a8\u30f3\u30bf\u30fc\u30d7\u30e9\u30a4\u30ba\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3","text":"<p>\u5404\u30b7\u30b9\u30c6\u30e0\u3092\u7d71\u5408\u3059\u308b\u305f\u3081\u306e\u30d1\u30bf\u30fc\u30f3\u3068\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002</p> <ul> <li>\u7b2c33\u7ae0\uff1a\u30b7\u30b9\u30c6\u30e0\u7d71\u5408\u306e\u6982\u8981</li> <li>\u7b2c34\u7ae0\uff1a\u30e1\u30c3\u30bb\u30fc\u30b8\u30f3\u30b0\u30d1\u30bf\u30fc\u30f3</li> <li>\u7b2c35\u7ae0\uff1a\u30b7\u30b9\u30c6\u30e0\u9593\u9023\u643a\u30d1\u30bf\u30fc\u30f3</li> <li>\u7b2c36\u7ae0\uff1a\u30de\u30b9\u30bf\u30c7\u30fc\u30bf\u7ba1\u7406\uff08MDM\uff09</li> <li>\u7b2c37\u7ae0\uff1a\u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3</li> <li>\u7b2c38\u7ae0\uff1aAPI \u8a2d\u8a08\u3068\u30b5\u30fc\u30d3\u30b9\u9023\u643a</li> <li>\u7b2c39\u7ae0\uff1a\u30c7\u30fc\u30bf\u9023\u643a\u306e\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3</li> </ul>"},{"location":"article/#_5","title":"\u7814\u7a76\uff1a\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u5b9f\u88c5\u7de8","text":"<p>\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u5404\u7a2e\u30d7\u30ec\u30bc\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u5c64\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3\u3092\u7814\u7a76\u3057\u307e\u3059\u3002</p> <ul> <li>\u7814\u7a76 1\uff1a\u30e2\u30ce\u30ea\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5</li> <li>\u7814\u7a76 2\uff1aJavaFX \u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5b9f\u88c5</li> <li>\u7814\u7a76 3\uff1agRPC \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5</li> <li>\u7814\u7a76 4\uff1aGraphQL \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5</li> </ul>"},{"location":"article/#_6","title":"\u7814\u7a76\uff1a\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u5b9f\u88c5\u7de8","text":"<p>\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u5404\u7a2e\u30d7\u30ec\u30bc\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u5c64\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3\u3092\u7814\u7a76\u3057\u307e\u3059\u3002</p> <ul> <li>\u7814\u7a76 1\uff1a\u30e2\u30ce\u30ea\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5</li> <li>\u7814\u7a76 2\uff1aJavaFX \u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5b9f\u88c5</li> <li>\u7814\u7a76 3\uff1agRPC \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5</li> <li>\u7814\u7a76 4\uff1aGraphQL \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5</li> </ul>"},{"location":"article/#_7","title":"\u7814\u7a76\uff1a\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u5b9f\u88c5\u7de8","text":"<p>\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u5404\u7a2e\u30d7\u30ec\u30bc\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u5c64\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3\u3092\u7814\u7a76\u3057\u307e\u3059\u3002</p> <ul> <li>\u7814\u7a76 1\uff1a\u30e2\u30ce\u30ea\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5</li> <li>\u7814\u7a76 2\uff1aJavaFX \u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5b9f\u88c5</li> <li>\u7814\u7a76 3\uff1agRPC \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5</li> <li>\u7814\u7a76 4\uff1aGraphQL \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5</li> </ul>"},{"location":"article/#orm","title":"\u7814\u7a76\uff1a\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0 ORM \u5b9f\u88c5\u7de8","text":"<p>\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e ORM\uff08JPA/Spring Data JPA\uff09\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3\u3092\u7814\u7a76\u3057\u307e\u3059\u3002</p> <ul> <li>\u7b2c 14 \u7ae0\uff1a\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u5168\u4f53\u50cf\u3010ORM \u7248\u3011</li> <li>\u7b2c 15 \u7ae0\uff1a\u52d8\u5b9a\u79d1\u76ee\u306e\u8a2d\u8a08\u3010ORM \u7248\u3011</li> <li>\u7b2c 16 \u7ae0\uff1a\u4ed5\u8a33\u306e\u8a2d\u8a08\u3010ORM \u7248\u3011</li> <li>\u7b2c 17 \u7ae0\uff1a\u81ea\u52d5\u4ed5\u8a33\u306e\u8a2d\u8a08\u3010ORM \u7248\u3011</li> <li>\u7b2c 18 \u7ae0\uff1a\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u306e\u8a2d\u8a08\u3010ORM \u7248\u3011</li> <li>\u7b2c 19 \u7ae0\uff1a\u8d64\u9ed2\u3068\u30ed\u30b0\u306e\u8a2d\u8a08\u3010ORM \u7248\u3011</li> <li>\u7b2c 20 \u7ae0\uff1a\u8ca1\u52d9\u4f1a\u8a08\u30c7\u30fc\u30bf\u8a2d\u8a08\uff08D \u793e\u4e8b\u4f8b\uff09\u3010ORM \u7248\u3011</li> <li>\u7b2c 21 \u7ae0\uff1aAPI \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5\u3010ORM \u7248\u3011</li> </ul>"},{"location":"article/#_8","title":"\u4ed8\u9332","text":"<ul> <li>A\uff1a\u5168\u4f53 ER \u56f3</li> <li>B\uff1a\u30c6\u30fc\u30d6\u30eb\u5b9a\u7fa9\u4e00\u89a7</li> <li>C\uff1a\u7528\u8a9e\u96c6</li> </ul>"},{"location":"article/#_9","title":"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9","text":"<ul> <li>SchemaSpy ER \u56f3\uff08SMS\uff09 - \u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9 ER \u56f3\u3002\u30c6\u30fc\u30d6\u30eb\u69cb\u9020\u3084\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u53ef\u8996\u5316\u3002</li> </ul>"},{"location":"article/#_10","title":"\u57f7\u7b46\u65b9\u91dd","text":"<ul> <li>\u30c0\u30a4\u30a2\u30b0\u30e9\u30e0\u306b\u306f PlantUML \u3092\u4f7f\u7528</li> <li>\u696d\u52d9\u30d5\u30ed\u30fc\u3068 ER \u56f3\u3092\u4e2d\u5fc3\u306b\u89e3\u8aac</li> <li>\u65e5\u672c\u8a9e\u30c6\u30fc\u30d6\u30eb\u30fb\u65e5\u672c\u8a9e\u30ab\u30e9\u30e0\u3067\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u5b9a\u7fa9</li> <li>\u5b9f\u88c5\u30b3\u30fc\u30c9\u306f <code>&lt;details&gt;</code> \u30bf\u30b0\u3067\u8868\u793a\u5207\u66ff\u53ef\u80fd</li> </ul>"},{"location":"article/#_11","title":"\u95a2\u9023\u30ea\u30bd\u30fc\u30b9","text":"<ul> <li>\u6280\u8853\u30b9\u30bf\u30c3\u30af</li> <li>\u57f7\u7b46\u30ef\u30fc\u30af\u30d5\u30ed\u30fc</li> <li>\u30a2\u30a6\u30c8\u30e9\u30a4\u30f3</li> </ul>"},{"location":"article/deploy-sms/","title":"\u30c7\u30e2\u30c7\u30d7\u30ed\u30a4\u624b\u9806\u66f8","text":""},{"location":"article/deploy-sms/#_2","title":"\u6982\u8981","text":"<p>\u672c\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u3001\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\uff08SMS\uff09\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u306e\u30c7\u30e2\u74b0\u5883\u69cb\u7bc9\u3068\u30c7\u30d7\u30ed\u30a4\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002 \u30c7\u30e2\u74b0\u5883\u306f H2 \u30a4\u30f3\u30e1\u30e2\u30ea\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4f7f\u7528\u3057\u3001\u5916\u90e8\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306a\u3057\u3067\u52d5\u4f5c\u3059\u308b\u81ea\u5df1\u5b8c\u7d50\u578b\u306e\u69cb\u6210\u3067\u3059\u3002</p>"},{"location":"article/deploy-sms/#_3","title":"\u30c7\u30e2\u74b0\u5883\u306e\u7279\u5fb4","text":"\u9805\u76ee \u5185\u5bb9 \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9 H2 \u30a4\u30f3\u30e1\u30e2\u30ea \u30c7\u30fc\u30bf\u6c38\u7d9a\u6027 \u306a\u3057\uff08\u518d\u8d77\u52d5\u3067\u30ea\u30bb\u30c3\u30c8\uff09 \u521d\u671f\u30c7\u30fc\u30bf \u8d77\u52d5\u6642\u306b\u81ea\u52d5\u6295\u5165 \u7528\u9014 \u30c7\u30e2\u3001\u30d7\u30ec\u30bc\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u3001\u6a5f\u80fd\u78ba\u8a8d \u5916\u90e8\u4f9d\u5b58 \u306a\u3057\uff08PostgreSQL \u4e0d\u8981\uff09 API \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 Swagger UI\uff08<code>/swagger-ui.html</code>\uff09"},{"location":"article/deploy-sms/#_4","title":"\u6280\u8853\u30b9\u30bf\u30c3\u30af","text":"<ul> <li>Java: 25</li> <li>Spring Boot: 4.0.0</li> <li>\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9: H2 Database\uff08\u30a4\u30f3\u30e1\u30e2\u30ea\u30e2\u30fc\u30c9\uff09/ PostgreSQL\uff08\u672c\u756a\uff09</li> <li>ORM: MyBatis</li> <li>\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3: Flyway</li> <li>\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3: Thymeleaf</li> <li>\u30d3\u30eb\u30c9\u30c4\u30fc\u30eb: Gradle (Kotlin DSL)</li> </ul>"},{"location":"article/deploy-sms/#_5","title":"\u30ed\u30fc\u30ab\u30eb\u5b9f\u884c","text":""},{"location":"article/deploy-sms/#_6","title":"\u524d\u63d0\u6761\u4ef6","text":"<ul> <li>JDK 25 \u4ee5\u4e0a</li> <li>Gradle 9.x\uff08\u307e\u305f\u306f Gradle Wrapper \u4f7f\u7528\uff09</li> </ul>"},{"location":"article/deploy-sms/#_7","title":"\u8d77\u52d5\u65b9\u6cd5","text":""},{"location":"article/deploy-sms/#postgresql","title":"\u958b\u767a\u74b0\u5883\uff08PostgreSQL\uff09","text":"<pre><code>cd apps/sms/backend\n./gradlew bootRun\n</code></pre>"},{"location":"article/deploy-sms/#h2","title":"\u30c7\u30e2\u74b0\u5883\uff08H2 \u30a4\u30f3\u30e1\u30e2\u30ea\uff09","text":"<pre><code>cd apps/sms/backend\n./gradlew bootRun --args='--spring.profiles.active=demo'\n</code></pre>"},{"location":"article/deploy-sms/#intellij-idea","title":"IntelliJ IDEA \u304b\u3089\u8d77\u52d5","text":"<ol> <li><code>Application.java</code> \u3092\u53f3\u30af\u30ea\u30c3\u30af</li> <li><code>Run 'Application'</code> \u307e\u305f\u306f <code>Debug 'Application'</code> \u3092\u9078\u629e</li> <li>\u5b9f\u884c\u69cb\u6210\u3067 VM \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0:    <pre><code>-Dspring.profiles.active=demo\n</code></pre></li> </ol> <p>\u307e\u305f\u306f\u74b0\u5883\u5909\u6570\u3067\u8a2d\u5b9a: <pre><code>SPRING_PROFILES_ACTIVE=demo\n</code></pre></p>"},{"location":"article/deploy-sms/#_8","title":"\u52d5\u4f5c\u78ba\u8a8d","text":"<p>\u8d77\u52d5\u5f8c\u3001\u4ee5\u4e0b\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3067\u52d5\u4f5c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"article/deploy-sms/#web","title":"Web \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3","text":"<p>\u30d6\u30e9\u30a6\u30b6\u3067\u4ee5\u4e0b\u306b\u30a2\u30af\u30bb\u30b9: <pre><code>http://localhost:8080\n</code></pre></p>"},{"location":"article/deploy-sms/#swagger-ui","title":"Swagger UI","text":"<pre><code>http://localhost:8080/swagger-ui.html\n</code></pre> <p>Swagger UI \u306e\u6a5f\u80fd: - \u5168 API \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u4e00\u89a7\u3068\u8a73\u7d30 - \u30ea\u30af\u30a8\u30b9\u30c8/\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u30b9\u30ad\u30fc\u30de\u78ba\u8a8d - \u30d6\u30e9\u30a6\u30b6\u304b\u3089\u76f4\u63a5 API \u3092\u5b9f\u884c\u30fb\u30c6\u30b9\u30c8</p>"},{"location":"article/deploy-sms/#h2_1","title":"H2 \u30b3\u30f3\u30bd\u30fc\u30eb\uff08\u30c7\u30e2\u74b0\u5883\u306e\u307f\uff09","text":"<p>\u30d6\u30e9\u30a6\u30b6\u3067\u4ee5\u4e0b\u306b\u30a2\u30af\u30bb\u30b9: <pre><code>http://localhost:8080/h2-console\n</code></pre></p> <p>\u63a5\u7d9a\u60c5\u5831:</p> \u9805\u76ee \u5024 JDBC URL <code>jdbc:h2:mem:sms_demo</code> User Name <code>sa</code> Password (\u7a7a)"},{"location":"article/deploy-sms/#_9","title":"\u30c7\u30e2\u74b0\u5883\u8a2d\u5b9a","text":""},{"location":"article/deploy-sms/#application-demoyml","title":"application-demo.yml","text":"<p>\u30c7\u30e2\u74b0\u5883\u5c02\u7528\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> <pre><code>spring:\n  application:\n    name: sms-backend\n\n  # Flyway \u81ea\u52d5\u69cb\u6210\u3092\u9664\u5916\uff08H2 \u3067\u306f\u4e0d\u8981\uff09\n  autoconfigure:\n    exclude:\n      - org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration\n\n  # H2 \u30a4\u30f3\u30e1\u30e2\u30ea\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n  datasource:\n    url: jdbc:h2:mem:sms_demo;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE;MODE=PostgreSQL\n    driver-class-name: org.h2.Driver\n    username: sa\n    password:\n\n  # H2 \u30b3\u30f3\u30bd\u30fc\u30eb\n  h2:\n    console:\n      enabled: true\n      path: /h2-console\n      settings:\n        web-allow-others: true\n\n  # SQL \u521d\u671f\u5316\n  sql:\n    init:\n      mode: always\n      schema-locations: classpath:db/demo/schema.sql\n      data-locations: classpath:db/demo/data.sql\n\n  thymeleaf:\n    cache: true\n\nserver:\n  port: ${PORT:8080}\n\nmybatis:\n  mapper-locations: classpath:mapper/**/*.xml\n  configuration:\n    map-underscore-to-camel-case: false\n\nlogging:\n  level:\n    root: INFO\n    com.example.sms: INFO\n</code></pre>"},{"location":"article/deploy-sms/#h2_2","title":"H2 \u4f9d\u5b58\u95a2\u4fc2\u306e\u8ffd\u52a0","text":"<p><code>build.gradle.kts</code> \u306b H2 \u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u8ffd\u52a0:</p> <pre><code>// H2 Database\uff08\u30c7\u30e2\u74b0\u5883\u7528\uff09\nruntimeOnly(\"com.h2database:h2\")\n</code></pre>"},{"location":"article/deploy-sms/#heroku","title":"Heroku \u30c7\u30d7\u30ed\u30a4","text":""},{"location":"article/deploy-sms/#_10","title":"\u524d\u63d0\u6761\u4ef6","text":"<ul> <li>Heroku CLI \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f</li> <li>Heroku \u30a2\u30ab\u30a6\u30f3\u30c8\u4f5c\u6210\u6e08\u307f</li> <li>Docker Desktop \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f</li> </ul>"},{"location":"article/deploy-sms/#dockerfile","title":"Dockerfile","text":"<p><code>apps/sms/backend/Dockerfile</code> \u3092\u4f5c\u6210:</p> <pre><code># \u30d3\u30eb\u30c9\u30b9\u30c6\u30fc\u30b8\nFROM gradle:jdk25 AS builder\nWORKDIR /app\nCOPY ./ ./\nRUN gradle build -x test --no-daemon\n\n# \u5b9f\u884c\u30b9\u30c6\u30fc\u30b8\nFROM eclipse-temurin:25-jre-alpine\nWORKDIR /app\nCOPY --from=builder /app/build/libs/*.jar app.jar\nEXPOSE 8080\nCMD [\"java\", \"-Dserver.port=${PORT:-8080}\", \"-Dspring.profiles.active=demo\", \"-jar\", \"app.jar\"]\n</code></pre> <p>\u30d3\u30eb\u30c9\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u306b\u3064\u3044\u3066:</p> <p>\u3053\u306e Dockerfile \u306f <code>apps/sms/backend/</code> \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u30d3\u30eb\u30c9\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3068\u3057\u3066\u4f7f\u7528\u3057\u307e\u3059\u3002</p>"},{"location":"article/deploy-sms/#docker","title":"\u30c7\u30d7\u30ed\u30a4\u624b\u9806\uff08Docker \u30b3\u30de\u30f3\u30c9\u4f7f\u7528\uff09","text":""},{"location":"article/deploy-sms/#1-heroku","title":"1. Heroku \u30a2\u30d7\u30ea\u4f5c\u6210","text":"<pre><code>heroku create deploy-demo-sms\n</code></pre>"},{"location":"article/deploy-sms/#2-container","title":"2. \u30b9\u30bf\u30c3\u30af\u3092 container \u306b\u8a2d\u5b9a","text":"<pre><code>heroku stack:set container -a deploy-demo-sms\n</code></pre>"},{"location":"article/deploy-sms/#3","title":"3. \u74b0\u5883\u5909\u6570\u8a2d\u5b9a","text":"<pre><code>heroku config:set SPRING_PROFILES_ACTIVE=demo -a deploy-demo-sms\n</code></pre>"},{"location":"article/deploy-sms/#4-heroku-container-registry","title":"4. Heroku Container Registry \u306b\u30ed\u30b0\u30a4\u30f3","text":"<pre><code>heroku container:login\n</code></pre> <p><code>Login Succeeded</code> \u3068\u8868\u793a\u3055\u308c\u308c\u3070\u6210\u529f\u3067\u3059\u3002</p>"},{"location":"article/deploy-sms/#5-docker","title":"5. Docker \u30d3\u30eb\u30c9","text":"<p><code>apps/sms/backend/</code> \u3092\u30d3\u30eb\u30c9\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3068\u3057\u3066\u30d3\u30eb\u30c9\u3057\u307e\u3059:</p> <pre><code>docker build -t registry.heroku.com/deploy-demo-sms/web apps/sms/backend\n</code></pre>"},{"location":"article/deploy-sms/#6","title":"6. \u30d7\u30c3\u30b7\u30e5","text":"<pre><code>docker push registry.heroku.com/deploy-demo-sms/web\n</code></pre>"},{"location":"article/deploy-sms/#7","title":"7. \u30ea\u30ea\u30fc\u30b9","text":"<pre><code>heroku container:release web -a deploy-demo-sms\n</code></pre>"},{"location":"article/deploy-sms/#8","title":"8. \u52d5\u4f5c\u78ba\u8a8d","text":"<pre><code># \u30ed\u30b0\u78ba\u8a8d\nheroku logs --tail -a deploy-demo-sms\n\n# \u30a2\u30d7\u30ea\u3092\u958b\u304f\nheroku open -a deploy-demo-sms\n</code></pre> <p>Heroku \u30c7\u30e2\u74b0\u5883 URL:</p> \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 URL Web \u30a2\u30d7\u30ea https://deploy-demo-sms.herokuapp.com/ Swagger UI https://deploy-demo-sms.herokuapp.com/swagger-ui.html"},{"location":"article/deploy-sms/#_11","title":"\u30c7\u30fc\u30bf\u30ea\u30bb\u30c3\u30c8","text":"<p>Dyno \u3092\u518d\u8d77\u52d5\u3059\u308b\u3068\u30c7\u30fc\u30bf\u304c\u30ea\u30bb\u30c3\u30c8\u3055\u308c\u3001\u521d\u671f\u30c7\u30fc\u30bf\u304c\u518d\u6295\u5165\u3055\u308c\u307e\u3059\u3002</p> <pre><code>heroku restart -a deploy-demo-sms\n</code></pre>"},{"location":"article/deploy-sms/#github-actions","title":"GitHub Actions \u306b\u3088\u308b\u81ea\u52d5\u30c7\u30d7\u30ed\u30a4","text":""},{"location":"article/deploy-sms/#_12","title":"\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u30d5\u30a1\u30a4\u30eb","text":"<p><code>.github/workflows/deploy-demo-sms.yml</code> \u3092\u4f5c\u6210:</p> <pre><code>name: Deploy Demo to Heroku\n\non:\n  push:\n    branches: [ main ]\n    paths:\n      - 'apps/sms/backend/**'\n      - '.github/workflows/deploy-demo-sms.yml'\n  workflow_dispatch:\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n\n      - name: Install Heroku CLI\n        run: curl https://cli-assets.heroku.com/install.sh | sh\n\n      - name: Login to Heroku Container Registry\n        env:\n          HEROKU_API_KEY: ${{ secrets.HEROKU_API_KEY }}\n        run: heroku container:login\n\n      - name: Build and push\n        env:\n          HEROKU_API_KEY: ${{ secrets.HEROKU_API_KEY }}\n        run: |\n          docker build -t registry.heroku.com/deploy-demo-sms/web apps/sms/backend\n          docker push registry.heroku.com/deploy-demo-sms/web\n\n      - name: Release\n        env:\n          HEROKU_API_KEY: ${{ secrets.HEROKU_API_KEY }}\n        run: heroku container:release web -a deploy-demo-sms\n</code></pre>"},{"location":"article/deploy-sms/#github-secrets","title":"GitHub Secrets \u306e\u8a2d\u5b9a","text":"<p>\u30ea\u30dd\u30b8\u30c8\u30ea\u306e Settings \u2192 Secrets and variables \u2192 Actions \u3067\u4ee5\u4e0b\u3092\u767b\u9332\uff1a</p> \u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u540d \u5185\u5bb9 <code>HEROKU_API_KEY_SMS</code> Heroku API \u30ad\u30fc"},{"location":"article/deploy-sms/#heroku-api","title":"Heroku API \u30ad\u30fc\u306e\u53d6\u5f97","text":"<pre><code>heroku auth:token\n</code></pre> <p>\u307e\u305f\u306f Heroku \u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9 \u2192 Account Settings \u2192 API Key \u304b\u3089\u53d6\u5f97\u3002</p>"},{"location":"article/deploy-sms/#_13","title":"\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u6bd4\u8f03","text":"\u9805\u76ee default\uff08\u958b\u767a\uff09 demo\uff08\u30c7\u30e2\uff09 \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9 PostgreSQL H2 \u30a4\u30f3\u30e1\u30e2\u30ea \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3 Flyway SQL init \u30c7\u30fc\u30bf\u6c38\u7d9a\u6027 \u3042\u308a \u306a\u3057 \u5916\u90e8\u4f9d\u5b58 Docker/PostgreSQL \u5fc5\u8981 \u4e0d\u8981 H2 \u30b3\u30f3\u30bd\u30fc\u30eb \u7121\u52b9 \u6709\u52b9 \u7528\u9014 \u958b\u767a\u30fb\u30c6\u30b9\u30c8 \u30c7\u30e2\u30fb\u691c\u8a3c"},{"location":"article/deploy-sms/#_14","title":"\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0","text":""},{"location":"article/deploy-sms/#h2_3","title":"H2 \u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u3044","text":"<ol> <li><code>spring.h2.console.enabled=true</code> \u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d</li> <li>\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u304c <code>demo</code> \u306b\u306a\u3063\u3066\u3044\u308b\u304b\u78ba\u8a8d</li> <li>H2 \u4f9d\u5b58\u95a2\u4fc2\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d</li> </ol>"},{"location":"article/deploy-sms/#_15","title":"\u30c7\u30fc\u30bf\u304c\u521d\u671f\u5316\u3055\u308c\u306a\u3044","text":"<ol> <li><code>spring.sql.init.mode=always</code> \u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d</li> <li><code>db/demo/schema.sql</code> \u3068 <code>db/demo/data.sql</code> \u304c\u5b58\u5728\u3059\u308b\u304b\u78ba\u8a8d</li> <li>SQL \u69cb\u6587\u304c H2 \u4e92\u63db\u304b\u78ba\u8a8d</li> </ol>"},{"location":"article/deploy-sms/#heroku-no-basic-auth-credentials","title":"Heroku: no basic auth credentials \u30a8\u30e9\u30fc","text":"<p>Docker \u304c Heroku Container Registry \u306b\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u3066\u3044\u307e\u305b\u3093\u3002</p> <pre><code># Heroku CLI \u7d4c\u7531\u3067\u8a8d\u8a3c\nheroku container:login\n</code></pre> <p>\u305d\u308c\u3067\u3082\u89e3\u6c7a\u3057\u306a\u3044\u5834\u5408\u306f\u3001\u624b\u52d5\u3067\u8a8d\u8a3c:</p> <pre><code># API \u30ad\u30fc\u3092\u4f7f\u7528\u3057\u3066\u624b\u52d5\u30ed\u30b0\u30a4\u30f3\ndocker login registry.heroku.com -u _ -p $(heroku auth:token)\n</code></pre>"},{"location":"article/deploy-sms/#heroku-app-crashed-h10","title":"Heroku: App crashed (H10 \u30a8\u30e9\u30fc)","text":"<p>\u8d77\u52d5\u306b\u5931\u6557\u3057\u3066\u3044\u307e\u3059\u3002\u30ed\u30b0\u3092\u78ba\u8a8d:</p> <pre><code>heroku logs --tail -a deploy-demo-sms\n</code></pre> <p>\u3088\u304f\u3042\u308b\u539f\u56e0: 1. <code>SPRING_PROFILES_ACTIVE=demo</code> \u304c\u672a\u8a2d\u5b9a 2. Dockerfile \u306e CMD \u304c\u6b63\u3057\u304f\u306a\u3044\uff08<code>$PORT</code> \u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u304b\u78ba\u8a8d\uff09 3. Java \u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u4e0d\u4e00\u81f4</p>"},{"location":"article/deploy-sms/#heroku-dockerfile","title":"Heroku: \u30b5\u30d6\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e Dockerfile \u3092\u4f7f\u7528\u3057\u305f\u3044","text":"<p><code>heroku container:push</code> \u306f <code>--dockerfile</code> \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u305b\u3093\u3002</p> <p>\u89e3\u6c7a\u7b56: 1. <code>docker build apps/sms/backend</code> \u3067\u30b5\u30d6\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3068\u3057\u3066\u30d3\u30eb\u30c9\uff08\u63a8\u5968\uff09 2. <code>heroku.yml</code> \u3067 Dockerfile \u30d1\u30b9\u3092\u6307\u5b9a\u3057\u3066 Git push \u3067\u30c7\u30d7\u30ed\u30a4</p>"},{"location":"article/deploy-sms/#_16","title":"\u5236\u7d04\u4e8b\u9805","text":"\u5236\u7d04 \u8aac\u660e \u30c7\u30fc\u30bf\u975e\u6c38\u7d9a \u30a2\u30d7\u30ea\u518d\u8d77\u52d5\u3067\u30c7\u30fc\u30bf\u306f\u30ea\u30bb\u30c3\u30c8 \u30b7\u30f3\u30b0\u30eb\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9 \u8907\u6570\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u306e\u30c7\u30fc\u30bf\u5171\u6709\u4e0d\u53ef \u672c\u756a\u5229\u7528\u4e0d\u53ef \u3042\u304f\u307e\u3067\u30c7\u30e2\u30fb\u691c\u8a3c\u7528\u9014 \u5927\u91cf\u30c7\u30fc\u30bf\u975e\u5bfe\u5fdc \u30a4\u30f3\u30e1\u30e2\u30ea\u306e\u305f\u3081\u5927\u91cf\u30c7\u30fc\u30bf\u306b\u306f\u4e0d\u5411\u304d"},{"location":"article/deploy-sms/#_17","title":"\u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8","text":"<ul> <li>\u6280\u8853\u30b9\u30bf\u30c3\u30af - \u4f7f\u7528\u6280\u8853\u306e\u8a73\u7d30</li> <li>\u30ef\u30fc\u30af\u30d5\u30ed\u30fc - \u958b\u767a\u30ef\u30fc\u30af\u30d5\u30ed\u30fc</li> </ul>"},{"location":"article/outline/","title":"\u5b9f\u8df5\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\uff1a\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u7de8","text":""},{"location":"article/outline/#_2","title":"\u8a18\u4e8b\u306e\u76ee\u7684","text":"<p>\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\uff08\u8ca9\u58f2\u7ba1\u7406\u30fb\u8ca1\u52d9\u4f1a\u8a08\u30fb\u751f\u7523\u7ba1\u7406\uff09\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\u3092\u3001\u696d\u52d9\u30d5\u30ed\u30fc\u3068\u30c7\u30fc\u30bf\u30e2\u30c7\u30eb\u306e\u89b3\u70b9\u304b\u3089\u4f53\u7cfb\u7684\u306b\u89e3\u8aac\u3059\u308b\u3002</p>"},{"location":"article/outline/#_3","title":"\u5bfe\u8c61\u8aad\u8005","text":"<ul> <li>\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\u306e\u57fa\u790e\u3092\u5b66\u3073\u305f\u3044\u30a8\u30f3\u30b8\u30cb\u30a2</li> <li>\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u306e\u5168\u4f53\u50cf\u3092\u7406\u89e3\u3057\u305f\u3044\u958b\u767a\u8005</li> <li>\u8ca9\u58f2\u7ba1\u7406\u30fb\u8ca1\u52d9\u4f1a\u8a08\u30fb\u751f\u7523\u7ba1\u7406\u306e\u696d\u52d9\u77e5\u8b58\u3092\u7fd2\u5f97\u3057\u305f\u3044\u65b9</li> </ul>"},{"location":"article/outline/#_4","title":"\u57f7\u7b46\u65b9\u91dd","text":"<ul> <li>\u30c0\u30a4\u30a2\u30b0\u30e9\u30e0\u306b\u306f PlantUML \u3092\u4f7f\u7528</li> <li>\u696d\u52d9\u30d5\u30ed\u30fc\u3068 ER \u56f3\u3092\u4e2d\u5fc3\u306b\u89e3\u8aac</li> <li>\u65e5\u672c\u8a9e\u30c6\u30fc\u30d6\u30eb\u30fb\u65e5\u672c\u8a9e\u30ab\u30e9\u30e0\u3067\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u5b9a\u7fa9</li> <li>\u5b9f\u88c5\u306f\u30b3\u30fc\u30c9\u90e8\u5206\u306f<code>&lt;details&gt;</code>\u30bf\u30b0\u3092\u4f7f\u3063\u3066\u8868\u793a\u3092\u5207\u308a\u66ff\u3048\u3089\u308c\u308b\u3088\u3046\u306b\u3059\u308b</li> <li>\u30bf\u30b9\u30af\u9805\u76ee\u306a\u3069\u306f\u4e00\u884c\u958b\u3051\u3066\u8a18\u8ff0\u3059\u308b</li> <li>NG   <pre><code>  **\u53d7\u5165\u6761\u4ef6**:\n  - [ ] \u30ed\u30b0\u30a2\u30a6\u30c8\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u30ed\u30b0\u30a2\u30a6\u30c8\u3067\u304d\u308b\n  - [ ] \u30ed\u30b0\u30a2\u30a6\u30c8\u5f8c\u3001\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u306b\u9077\u79fb\u3059\u308b\n  - [ ] JWT \u30c8\u30fc\u30af\u30f3\u304c\u7121\u52b9\u5316\u3055\u308c\u308b\n</code></pre></li> <li>OK   <pre><code>  **\u53d7\u5165\u6761\u4ef6**:\n\n  - [ ] \u30ed\u30b0\u30a2\u30a6\u30c8\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u30ed\u30b0\u30a2\u30a6\u30c8\u3067\u304d\u308b\n  - [ ] \u30ed\u30b0\u30a2\u30a6\u30c8\u5f8c\u3001\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u306b\u9077\u79fb\u3059\u308b\n  - [ ] JWT \u30c8\u30fc\u30af\u30f3\u304c\u7121\u52b9\u5316\u3055\u308c\u308b\n</code></pre></li> </ul>"},{"location":"article/outline/#1","title":"\u7b2c1\u90e8\uff1a\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u306e\u5168\u4f53\u50cf","text":""},{"location":"article/outline/#1_1","title":"\u7b2c1\u7ae0\uff1a\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u3068\u306f","text":""},{"location":"article/outline/#11","title":"1.1 \u30c9\u30e1\u30a4\u30f3\u99c6\u52d5\u8a2d\u8a08\u3068\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0","text":"<ul> <li>\u6226\u7565\u7684\u8a2d\u8a08\u3068\u6226\u8853\u7684\u8a2d\u8a08</li> <li>\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u3078\u306e\u9069\u7528</li> </ul>"},{"location":"article/outline/#12","title":"1.2 \u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u3092\u69cb\u6210\u3059\u308b\u30b5\u30d6\u30b7\u30b9\u30c6\u30e0","text":"<ul> <li>\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0</li> <li>\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0</li> <li>\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0</li> <li>\u4eba\u4e8b\u30b7\u30b9\u30c6\u30e0</li> </ul>"},{"location":"article/outline/#2","title":"\u7b2c2\u7ae0\uff1a\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u306e\u696d\u52d9\u9818\u57df","text":""},{"location":"article/outline/#21","title":"2.1 \u8ca9\u58f2\u7ba1\u7406\u9818\u57df","text":"<ul> <li>\u53d7\u6ce8\u30fb\u51fa\u8377\u30fb\u58f2\u4e0a</li> <li>\u5f97\u610f\u5148\u3068\u306e\u95a2\u4fc2</li> </ul>"},{"location":"article/outline/#22","title":"2.2 \u8cfc\u8cb7\u7ba1\u7406\u9818\u57df","text":"<ul> <li>\u767a\u6ce8\u30fb\u5165\u8377/\u53d7\u5165\u30fb\u4ed5\u5165\uff08\u691c\u53ce\uff09</li> <li>\u4ed5\u5165\u5148\u30fb\u59d4\u8a17\u5148\u3068\u306e\u95a2\u4fc2</li> </ul>"},{"location":"article/outline/#23","title":"2.3 \u5728\u5eab\u7ba1\u7406\u9818\u57df","text":"<ul> <li>\u5728\u5eab\u306e\u53d7\u6255</li> <li>\u8ca9\u58f2\u7ba1\u7406\u30fb\u8cfc\u8cb7\u7ba1\u7406\u30fb\u751f\u7523\u7ba1\u7406\u3068\u306e\u9023\u643a</li> </ul>"},{"location":"article/outline/#24","title":"2.4 \u751f\u7523\u7ba1\u7406\u9818\u57df","text":"<ul> <li>\u751f\u7523\u8a08\u753b\u30fb\u54c1\u8cea\u7ba1\u7406\u30fb\u5de5\u7a0b\u7ba1\u7406\u30fb\u88fd\u9020\u539f\u4fa1\u7ba1\u7406</li> <li>\u8cfc\u8cb7\u7ba1\u7406\u30fb\u5728\u5eab\u7ba1\u7406\u3068\u306e\u9023\u643a</li> </ul>"},{"location":"article/outline/#25","title":"2.5 \u50b5\u6a29\u7ba1\u7406\u9818\u57df","text":"<ul> <li>\u8acb\u6c42\u30fb\u5165\u91d1</li> <li>\u8ca9\u58f2\u7ba1\u7406\u3068\u306e\u9023\u643a</li> </ul>"},{"location":"article/outline/#26","title":"2.6 \u50b5\u52d9\u7ba1\u7406\u9818\u57df","text":"<ul> <li>\u652f\u6255\u30fb\u51fa\u91d1</li> <li>\u8cfc\u8cb7\u7ba1\u7406\u3068\u306e\u9023\u643a</li> </ul>"},{"location":"article/outline/#27","title":"2.7 \u4f1a\u8a08\u9818\u57df","text":"<ul> <li>\u4ed5\u8a33\u30fb\u6c7a\u7b97</li> <li>\u50b5\u6a29\u30fb\u50b5\u52d9\u30fb\u751f\u7523\u7ba1\u7406\u304b\u3089\u306e\u4ed5\u8a33\u9023\u643a</li> </ul>"},{"location":"article/outline/#28","title":"2.8 \u4eba\u4e8b\u9818\u57df","text":"<ul> <li>\u7d66\u4e0e\u8a08\u7b97\u30fb\u4eba\u4e8b\u7ba1\u7406</li> <li>\u4f1a\u8a08\u3068\u306e\u9023\u643a</li> </ul>"},{"location":"article/outline/#3","title":"\u7b2c3\u7ae0\uff1a\u696d\u52d9\u30d5\u30ed\u30fc\u306e\u5168\u4f53\u50cf","text":""},{"location":"article/outline/#31","title":"3.1 \u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u696d\u52d9\u30d5\u30ed\u30fc","text":"<ul> <li>\u5f97\u610f\u5148 \u2192 \u55b6\u696d\u90e8\u9580 \u2192 \u8ca9\u58f2\u7ba1\u7406</li> <li>\u8ca9\u58f2\u7ba1\u7406 \u2192 \u8abf\u9054\u7ba1\u7406 / \u5728\u5eab\u7ba1\u7406 / \u50b5\u6a29\u7ba1\u7406</li> <li>\u8abf\u9054\u7ba1\u7406 \u2192 \u4ed5\u5165\u5148 / \u5728\u5eab\u7ba1\u7406 / \u50b5\u52d9\u7ba1\u7406</li> </ul>"},{"location":"article/outline/#32","title":"3.2 \u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u696d\u52d9\u30d5\u30ed\u30fc","text":"<ul> <li>\u4f1a\u8a08\u90e8\u9580 \u2192 \u8ca1\u52d9\u4f1a\u8a08 / \u7ba1\u7406\u4f1a\u8a08</li> <li>\u8ca1\u52d9\u4f1a\u8a08\uff1a\u50b5\u6a29\u30fb\u50b5\u52d9\u30fb\u624b\u5f62\u30fb\u8cc7\u7523\u30fb\u7d4c\u7406</li> <li>\u7ba1\u7406\u4f1a\u8a08\uff1a\u7d4c\u55b6\u5206\u6790\u30fb\u640d\u76ca\u5206\u5c90\u70b9\u5206\u6790\u30fb\u6295\u8cc7\u306e\u7d4c\u6e08\u6027\u8a08\u7b97\u30fb\u30ad\u30e3\u30c3\u30b7\u30e5\u30d5\u30ed\u30fc\u8a08\u7b97</li> </ul>"},{"location":"article/outline/#33","title":"3.3 \u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u696d\u52d9\u30d5\u30ed\u30fc","text":"<ul> <li>\u5f97\u610f\u5148 \u2192 \u55b6\u696d\u90e8\u9580 \u2192 \u751f\u7523\u8a08\u753b</li> <li>\u751f\u7523\u8a08\u753b \u2192 \u8cfc\u8cb7\u7ba1\u7406 / \u5de5\u7a0b\u7ba1\u7406</li> <li>\u8cfc\u8cb7\u7ba1\u7406 \u2192 \u4ed5\u5165\u5148 / \u59d4\u8a17\u5148 / \u5728\u5eab\u7ba1\u7406</li> <li>\u5de5\u7a0b\u7ba1\u7406 \u2192 \u5728\u5eab\u7ba1\u7406 / \u88fd\u9020\u539f\u4fa1\u7ba1\u7406 / \u54c1\u8cea\u7ba1\u7406</li> <li>\u57fa\u6e96\u60c5\u5831\u3068\u306e\u9023\u643a</li> </ul>"},{"location":"article/outline/#2_1","title":"\u7b2c2\u90e8\uff1a\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0","text":""},{"location":"article/outline/#4","title":"\u7b2c4\u7ae0\uff1a\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u5168\u4f53\u50cf","text":""},{"location":"article/outline/#41","title":"4.1 \u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u30b9\u30b3\u30fc\u30d7","text":"<ul> <li>\u898b\u7a4d</li> <li>\u53d7\u6ce8</li> <li>\u51fa\u8377</li> <li>\u58f2\u4e0a</li> </ul>"},{"location":"article/outline/#42","title":"4.2 \u8ca9\u58f2\u7d44\u7e54\u306e\u5f79\u5272\u5206\u62c5","text":"<ul> <li>\u55b6\u696d\u90e8\u9580\u30fb\u8abf\u9054\u90e8\u9580\u30fb\u5009\u5eab\u90e8\u9580\u30fb\u7d4c\u7406\u90e8\u9580\u30fb\u8ca1\u52d9\u90e8\u9580</li> <li>\u696d\u52d9\u30d5\u30ed\u30fc\u3068\u5404\u90e8\u9580\u306e\u8cac\u52d9</li> </ul>"},{"location":"article/outline/#43","title":"4.3 \u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":"<ul> <li>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u6210</li> <li>Domain\u5c64\uff08\u30c9\u30e1\u30a4\u30f3\u5c64\uff09<ul> <li>model\uff08\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\uff09</li> <li>type\uff08\u57fa\u672c\u578b\uff1a\u901a\u8ca8\u3001\u5358\u4f4d\u3001\u6570\u91cf\u7b49\uff09</li> <li>exception\uff08\u30c9\u30e1\u30a4\u30f3\u4f8b\u5916\uff09</li> </ul> </li> <li>Application\u5c64\uff08\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff09<ul> <li>port/in\uff08Input Port\uff09</li> <li>port/out\uff08Output Port\uff09</li> <li>service\uff08Application Service\uff09</li> </ul> </li> <li>Infrastructure\u5c64\uff08\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u5c64\uff09<ul> <li>in/rest\uff08Input Adapter - REST API\uff09</li> <li>out/persistence\uff08Output Adapter - \u6c38\u7d9a\u5316\uff09</li> <li>config\uff08\u8a2d\u5b9a\uff09</li> </ul> </li> <li>\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u30dd\u30fc\u30c8&amp;\u30a2\u30c0\u30d7\u30bf\u30fc\uff09</li> <li>\u30c9\u30e1\u30a4\u30f3\uff08\u4e2d\u5fc3\uff09</li> <li>\u30dd\u30fc\u30c8\uff08\u5165\u529b\u30dd\u30fc\u30c8\u30fb\u51fa\u529b\u30dd\u30fc\u30c8\uff09</li> <li>\u30a2\u30c0\u30d7\u30bf\u30fc\uff08\u30d7\u30e9\u30a4\u30de\u30ea\u30fb\u30bb\u30ab\u30f3\u30c0\u30ea\uff09</li> <li>\u4f9d\u5b58\u6027\u306e\u65b9\u5411\u3068\u4f9d\u5b58\u6027\u9006\u8ee2\u306e\u539f\u5247</li> <li>\u30c9\u30e1\u30a4\u30f3\u99c6\u52d5\u8a2d\u8a08\u306e\u9069\u7528</li> <li>\u96c6\u7d04\u3068\u30ea\u30dd\u30b8\u30c8\u30ea</li> <li>\u30c9\u30e1\u30a4\u30f3\u30b5\u30fc\u30d3\u30b9</li> <li>\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9</li> <li>API \u8a2d\u8a08</li> <li>RESTful API \u306e\u57fa\u672c\u65b9\u91dd</li> <li>\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u8a2d\u8a08</li> </ul>"},{"location":"article/outline/#5","title":"\u7b2c5\u7ae0\uff1a\u30de\u30b9\u30bf\u60c5\u5831\u306e\u8a2d\u8a08","text":""},{"location":"article/outline/#51","title":"5.1 \u90e8\u9580\u30de\u30b9\u30bf\u306e\u8a2d\u8a08","text":"<ul> <li>\u7d44\u7e54\u968e\u5c64\u3068\u90e8\u9580\u30d1\u30b9</li> <li>\u6700\u4e0b\u5c64\u533a\u5206\u306e\u7ba1\u7406</li> <li>\u7d44\u7e54\u6539\u6b63\u306b\u5f37\u3044\u30de\u30b9\u30bf\u8a2d\u8a08\uff08\u5c65\u6b74\u7ba1\u7406\uff09</li> <li>\u8907\u6570\u7d44\u7e54\u56f3\u3068\u6240\u5728\u5730\u306e\u5bfe\u5fdc</li> </ul>"},{"location":"article/outline/#52","title":"5.2 \u793e\u54e1\u30de\u30b9\u30bf\u306e\u8a2d\u8a08","text":"<ul> <li>\u90e8\u9580\u3068\u306e\u95a2\u9023\u4ed8\u3051</li> <li>\u9069\u7528\u671f\u9593\u3092\u6301\u3064\u5c65\u6b74\u7ba1\u7406</li> </ul>"},{"location":"article/outline/#53","title":"5.3 \u5546\u54c1\u30de\u30b9\u30bf\u306e\u8a2d\u8a08","text":"<ul> <li>\u5546\u54c1\u30b3\u30fc\u30c9\u30fb\u5546\u54c1\u540d\u30fb\u5358\u4fa1</li> <li>\u5546\u54c1\u533a\u5206\u3068\u7a0e\u533a\u5206</li> <li>\u5546\u54c1\u5206\u985e\u306e\u968e\u5c64\u69cb\u9020\uff08\u5546\u54c1\u5206\u985e\u30d1\u30b9\uff09</li> <li>\u9867\u5ba2\u5225\u8ca9\u58f2\u5358\u4fa1\u306e\u7ba1\u7406</li> </ul>"},{"location":"article/outline/#54","title":"5.4 \u539f\u4fa1\u7ba1\u7406\u306e\u8a2d\u8a08","text":"<ul> <li>8\u7a2e\u985e\u306e\u539f\u4fa1\u6cd5\u306e\u7406\u89e3</li> <li>\u500b\u5225\u539f\u4fa1\u6cd5</li> <li>\u5148\u5165\u5148\u51fa\u6cd5</li> <li>\u5f8c\u5165\u5148\u51fa\u6cd5</li> <li>\u7dcf\u5e73\u5747\u6cd5</li> <li>\u79fb\u52d5\u5e73\u5747\u6cd5</li> <li>\u5358\u7d14\u5e73\u5747\u6cd5</li> <li>\u6700\u7d42\u4ed5\u5165\u539f\u4fa1\u6cd5</li> <li>\u58f2\u4fa1\u9084\u5143\u6cd5</li> </ul>"},{"location":"article/outline/#55","title":"5.5 \u6d88\u8cbb\u7a0e\u306e\u8a2d\u8a08","text":"<ul> <li>\u5916\u7a0e\u30fb\u5185\u7a0e\u30fb\u975e\u8ab2\u7a0e\u306e\u533a\u5206</li> <li>\u6d88\u8cbb\u7a0e\u8a08\u7b97\u306e\u8003\u3048\u65b9</li> </ul>"},{"location":"article/outline/#56","title":"5.6 \u9867\u5ba2\u30de\u30b9\u30bf\u306e\u8a2d\u8a08","text":"<ul> <li>\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\u3068\u9867\u5ba2\u679d\u756a</li> <li>\u8acb\u6c42\u5148\u30fb\u56de\u53ce\u5148\u306e\u6982\u5ff5</li> <li>\u51fa\u8377\u5148\u30de\u30b9\u30bf\u3068\u306e\u9023\u643a</li> <li>\u5730\u57df\u30de\u30b9\u30bf\u306b\u3088\u308b\u5206\u985e</li> </ul>"},{"location":"article/outline/#57","title":"5.7 \u53d6\u5f15\u6761\u4ef6\u306e\u8a2d\u8a08","text":"<ul> <li>\u7de0\u65e5\u30fb\u652f\u6255\u6708\u30fb\u652f\u6255\u65e5\u306e\u7ba1\u7406</li> <li>\u90fd\u5ea6\u8acb\u6c42\u3068\u7de0\u3081\u8acb\u6c42\u306e\u9055\u3044</li> <li>\u4e0e\u4fe1\u7ba1\u7406\uff08\u4e0e\u4fe1\u9650\u5ea6\u984d\u30fb\u4e00\u6642\u5897\u52a0\u67a0\uff09</li> </ul>"},{"location":"article/outline/#6","title":"\u7b2c6\u7ae0\uff1a\u53d7\u6ce8\u30fb\u51fa\u8377\u30fb\u58f2\u4e0a\u306e\u8a2d\u8a08","text":""},{"location":"article/outline/#61-db","title":"6.1 \u53d7\u6ce8\u696d\u52d9\u306e DB \u8a2d\u8a08","text":"<ul> <li>\u53d7\u6ce8\u696d\u52d9\u30d5\u30ed\u30fc\u306e\u7406\u89e3</li> <li>\u53d7\u6ce8\u30c7\u30fc\u30bf\u30fb\u53d7\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\u306e\u69cb\u9020</li> <li>\u9867\u5ba2\u30de\u30b9\u30bf\u30fb\u5546\u54c1\u30de\u30b9\u30bf\u3068\u306e\u9023\u643a</li> </ul>"},{"location":"article/outline/#62-db","title":"6.2 \u51fa\u8377\u696d\u52d9\u306e DB \u8a2d\u8a08","text":"<ul> <li>\u51fa\u8377\u696d\u52d9\u306e\u6d41\u308c</li> <li>\u51fa\u8377\u6307\u793a\u30c7\u30fc\u30bf\u30fb\u51fa\u8377\u660e\u7d30\u30c7\u30fc\u30bf</li> <li>\u5728\u5eab\u3068\u306e\u9023\u643a</li> </ul>"},{"location":"article/outline/#63-db","title":"6.3 \u58f2\u4e0a\u696d\u52d9\u306e DB \u8a2d\u8a08","text":"<ul> <li>\u58f2\u4e0a\u30c7\u30fc\u30bf\u30fb\u58f2\u4e0a\u660e\u7d30\u30c7\u30fc\u30bf\u306e\u69cb\u9020</li> <li>\u51fa\u8377\u5b8c\u4e86\u304b\u3089\u58f2\u4e0a\u8a08\u4e0a\u3078\u306e\u6d41\u308c</li> <li>\u8fd4\u54c1\u51e6\u7406\u306e\u8a2d\u8a08</li> <li>\u8d64\u9ed2\u51e6\u7406\u306e\u8003\u3048\u65b9</li> </ul>"},{"location":"article/outline/#64","title":"6.4 \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3068\u697d\u89b3\u30ed\u30c3\u30af\u306e\u8a2d\u8a08","text":"<ul> <li>MyBatis \u30cd\u30b9\u30c8\u3057\u305f ResultMap \u306b\u3088\u308b\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a</li> <li>\u30d8\u30c3\u30c0\u30fb\u660e\u7d30\u306e\u4e00\u62ec\u53d6\u5f97\uff08JOIN \u30af\u30a8\u30ea\uff09</li> <li>\u697d\u89b3\u30ed\u30c3\u30af\uff08Optimistic Locking\uff09\u306e\u5b9f\u88c5</li> <li>\u30d0\u30fc\u30b8\u30e7\u30f3\u30ab\u30e9\u30e0\u306b\u3088\u308b\u540c\u6642\u66f4\u65b0\u5236\u5fa1</li> </ul>"},{"location":"article/outline/#7","title":"\u7b2c7\u7ae0\uff1a\u50b5\u6a29\u7ba1\u7406\u306e\u8a2d\u8a08","text":""},{"location":"article/outline/#71-db","title":"7.1 \u8acb\u6c42\u696d\u52d9\u306e DB \u8a2d\u8a08","text":"<ul> <li>\u90fd\u5ea6\u8acb\u6c42\u3068\u7de0\u3081\u8acb\u6c42</li> <li>\u8acb\u6c42\u30c7\u30fc\u30bf\u30fb\u8acb\u6c42\u660e\u7d30\u306e\u69cb\u9020</li> <li>\u7de0\u51e6\u7406\u306e\u8a2d\u8a08</li> </ul>"},{"location":"article/outline/#72-db","title":"7.2 \u56de\u53ce\u696d\u52d9\u306e DB \u8a2d\u8a08","text":"<ul> <li>\u5165\u91d1\u65b9\u6cd5\u306e\u7a2e\u985e\uff08\u73fe\u91d1\u30fb\u632f\u8fbc\u30fb\u624b\u5f62\u7b49\uff09</li> <li>\u5165\u91d1\u30c7\u30fc\u30bf\u30fb\u5165\u91d1\u660e\u7d30\u306e\u69cb\u9020</li> <li>\u5165\u91d1\u6d88\u8fbc\u306e\u51e6\u7406</li> <li>\u50b5\u6a29\u6b8b\u9ad8\u7ba1\u7406</li> </ul>"},{"location":"article/outline/#73","title":"7.3 \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3068\u697d\u89b3\u30ed\u30c3\u30af\u306e\u8a2d\u8a08","text":"<ul> <li>MyBatis \u30cd\u30b9\u30c8\u3057\u305f ResultMap \u306b\u3088\u308b\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a</li> <li>\u30d8\u30c3\u30c0\u30fb\u660e\u7d30\u306e\u4e00\u62ec\u53d6\u5f97\uff08JOIN \u30af\u30a8\u30ea\uff09</li> <li>\u697d\u89b3\u30ed\u30c3\u30af\uff08Optimistic Locking\uff09\u306e\u5b9f\u88c5</li> <li>\u30d0\u30fc\u30b8\u30e7\u30f3\u30ab\u30e9\u30e0\u306b\u3088\u308b\u540c\u6642\u66f4\u65b0\u5236\u5fa1</li> </ul>"},{"location":"article/outline/#8","title":"\u7b2c8\u7ae0\uff1a\u8abf\u9054\u7ba1\u7406\u306e\u8a2d\u8a08","text":""},{"location":"article/outline/#81-db","title":"8.1 \u767a\u6ce8\u696d\u52d9\u306e DB \u8a2d\u8a08","text":"<ul> <li>\u8abf\u9054\u306e4\u3064\u306e\u30d1\u30bf\u30fc\u30f3</li> <li>\u767a\u6ce8\u30c7\u30fc\u30bf\u30fb\u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\u306e\u69cb\u9020</li> <li>\u4ed5\u5165\u5148\u30de\u30b9\u30bf\u3068\u306e\u9023\u643a</li> </ul>"},{"location":"article/outline/#82-db","title":"8.2 \u5165\u8377\u30fb\u691c\u53ce\u696d\u52d9\u306e DB \u8a2d\u8a08","text":"<ul> <li>\u5165\u8377\u30c7\u30fc\u30bf\u306e\u69cb\u9020</li> <li>\u691c\u53ce\uff08\u4ed5\u5165\u8a08\u4e0a\uff09\u51e6\u7406</li> <li>\u8af8\u53e3\u54c1\u76ee\u306e\u6271\u3044</li> </ul>"},{"location":"article/outline/#83","title":"8.3 \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3068\u697d\u89b3\u30ed\u30c3\u30af\u306e\u8a2d\u8a08","text":"<ul> <li>MyBatis \u30cd\u30b9\u30c8\u3057\u305f ResultMap \u306b\u3088\u308b\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a</li> <li>\u30d8\u30c3\u30c0\u30fb\u660e\u7d30\u306e\u4e00\u62ec\u53d6\u5f97\uff08JOIN \u30af\u30a8\u30ea\uff09</li> <li>\u697d\u89b3\u30ed\u30c3\u30af\uff08Optimistic Locking\uff09\u306e\u5b9f\u88c5</li> <li>\u30d0\u30fc\u30b8\u30e7\u30f3\u30ab\u30e9\u30e0\u306b\u3088\u308b\u540c\u6642\u66f4\u65b0\u5236\u5fa1</li> </ul>"},{"location":"article/outline/#9","title":"\u7b2c9\u7ae0\uff1a\u5728\u5eab\u7ba1\u7406\u306e\u8a2d\u8a08","text":""},{"location":"article/outline/#91-db","title":"9.1 \u5728\u5eab\u60c5\u5831\u306e DB \u8a2d\u8a08","text":"<ul> <li>\u5009\u5eab\u30b3\u30fc\u30c9 \u00d7 \u5546\u54c1\u30b3\u30fc\u30c9\u306e\u5728\u5eab\u7ba1\u7406</li> <li>\u5728\u5eab\u6570\u91cf\u30fb\u5f15\u5f53\u6570\u91cf\u306e\u7ba1\u7406</li> <li>\u5009\u5eab\u30de\u30b9\u30bf\u306e\u8a2d\u8a08</li> </ul>"},{"location":"article/outline/#92-db","title":"9.2 \u5728\u5eab\u79fb\u52d5\u30fb\u68da\u5378\u306e DB \u8a2d\u8a08","text":"<ul> <li>\u5165\u51fa\u5eab\u5c65\u6b74\u306e\u7ba1\u7406</li> <li>\u68da\u5378\u696d\u52d9\u306e\u8a2d\u8a08</li> <li>\u5728\u5eab\u8abf\u6574\u51e6\u7406</li> </ul>"},{"location":"article/outline/#93","title":"9.3 \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3068\u697d\u89b3\u30ed\u30c3\u30af\u306e\u8a2d\u8a08","text":"<ul> <li>MyBatis \u30cd\u30b9\u30c8\u3057\u305f ResultMap \u306b\u3088\u308b\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a</li> <li>\u30d8\u30c3\u30c0\u30fb\u660e\u7d30\u306e\u4e00\u62ec\u53d6\u5f97\uff08JOIN \u30af\u30a8\u30ea\uff09</li> <li>\u697d\u89b3\u30ed\u30c3\u30af\uff08Optimistic Locking\uff09\u306e\u5b9f\u88c5</li> <li>\u30d0\u30fc\u30b8\u30e7\u30f3\u30ab\u30e9\u30e0\u306b\u3088\u308b\u540c\u6642\u66f4\u65b0\u5236\u5fa1</li> </ul>"},{"location":"article/outline/#10","title":"\u7b2c10\u7ae0\uff1a\u50b5\u52d9\u7ba1\u7406\u306e\u8a2d\u8a08","text":""},{"location":"article/outline/#101-db","title":"10.1 \u652f\u6255\u696d\u52d9\u306e DB \u8a2d\u8a08","text":"<ul> <li>\u652f\u6255\u7de0\u51e6\u7406</li> <li>\u652f\u6255\u65b9\u6cd5\u306e\u7a2e\u985e</li> <li>\u652f\u6255\u30c7\u30fc\u30bf\u30fb\u652f\u6255\u660e\u7d30\u306e\u69cb\u9020</li> <li>\u8cb7\u639b\u91d1\u6b8b\u9ad8\u7ba1\u7406</li> </ul>"},{"location":"article/outline/#102","title":"10.2 \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3068\u697d\u89b3\u30ed\u30c3\u30af\u306e\u8a2d\u8a08","text":"<ul> <li>MyBatis \u30cd\u30b9\u30c8\u3057\u305f ResultMap \u306b\u3088\u308b\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a</li> <li>\u30d8\u30c3\u30c0\u30fb\u660e\u7d30\u306e\u4e00\u62ec\u53d6\u5f97\uff08JOIN \u30af\u30a8\u30ea\uff09</li> <li>\u697d\u89b3\u30ed\u30c3\u30af\uff08Optimistic Locking\uff09\u306e\u5b9f\u88c5</li> <li>\u30d0\u30fc\u30b8\u30e7\u30f3\u30ab\u30e9\u30e0\u306b\u3088\u308b\u540c\u6642\u66f4\u65b0\u5236\u5fa1</li> </ul>"},{"location":"article/outline/#11_1","title":"\u7b2c11\u7ae0\uff1a\u5171\u901a\u51e6\u7406\u306e\u8a2d\u8a08","text":""},{"location":"article/outline/#111","title":"11.1 \u8d64\u9ed2\u51e6\u7406\u306e\u8a2d\u8a08","text":"<ul> <li>\u8d64\u9ed2\u51e6\u7406\u3068\u306f\uff08\u78ba\u5b9a\u6e08\u307f\u4f1d\u7968\u306e\u8a02\u6b63\u65b9\u6cd5\uff09</li> <li>\u8d64\u4f1d\u7968\uff08\u30de\u30a4\u30ca\u30b9\u8a08\u4e0a\uff09\u3068\u9ed2\u4f1d\u7968\uff08\u30d7\u30e9\u30b9\u8a08\u4e0a\uff09</li> <li>\u8d64\u9ed2\u51e6\u7406\u5c65\u6b74\u30c6\u30fc\u30d6\u30eb\u306e\u30b9\u30ad\u30fc\u30de\u8a2d\u8a08</li> <li>\u8d64\u9ed2\u51e6\u7406\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5</li> </ul>"},{"location":"article/outline/#112","title":"11.2 \u81ea\u52d5\u63a1\u756a\u306e\u8a2d\u8a08","text":"<ul> <li>\u63a1\u756a\u306e\u8981\u4ef6\uff08\u4e00\u610f\u6027\u30fb\u9023\u756a\u6027\u30fb\u53ef\u8aad\u6027\u30fb\u62e1\u5f35\u6027\uff09</li> <li>\u63a1\u756a\u30d1\u30bf\u30fc\u30f3\uff08\u5e74\u6b21\u30fb\u6708\u6b21\u30fb\u65e5\u6b21\u30fb\u9023\u756a\uff09</li> <li>\u63a1\u756a\u30de\u30b9\u30bf\u3068\u63a1\u756a\u5c65\u6b74\u30c6\u30fc\u30d6\u30eb\u306e\u8a2d\u8a08</li> <li>\u63a1\u756a\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5</li> </ul>"},{"location":"article/outline/#113","title":"11.3 \u76e3\u67fb\u30ab\u30e9\u30e0\u306e\u8a2d\u8a08","text":"<ul> <li>\u76e3\u67fb\u30ab\u30e9\u30e0\u3068\u306f\uff08\u4f5c\u6210\u65e5\u6642\u30fb\u4f5c\u6210\u8005\u30fb\u66f4\u65b0\u65e5\u6642\u30fb\u66f4\u65b0\u8005\uff09</li> <li>\u8ad6\u7406\u524a\u9664\uff08\u524a\u9664\u30d5\u30e9\u30b0\u30fb\u524a\u9664\u65e5\u6642\u30fb\u524a\u9664\u8005\uff09</li> <li>\u76e3\u67fb\u30ab\u30e9\u30e0\u7528\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u57fa\u5e95\u30af\u30e9\u30b9</li> <li>MyBatis \u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u306b\u3088\u308b\u81ea\u52d5\u8a2d\u5b9a</li> </ul>"},{"location":"article/outline/#114","title":"11.4 \u5c65\u6b74\u30c6\u30fc\u30d6\u30eb\u306e\u8a2d\u8a08","text":"<ul> <li>\u5c65\u6b74\u7ba1\u7406\u306e\u7a2e\u985e\uff08\u5909\u66f4\u5c65\u6b74\u30fb\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u30fb\u30a4\u30d9\u30f3\u30c8\u30bd\u30fc\u30b7\u30f3\u30b0\uff09</li> <li>\u5909\u66f4\u5c65\u6b74\u30c6\u30fc\u30d6\u30eb\uff08JSONB \u306b\u3088\u308b\u5909\u66f4\u524d\u5f8c\u4fdd\u5b58\uff09</li> <li>\u30de\u30b9\u30bf\u5c65\u6b74\u30c6\u30fc\u30d6\u30eb\uff08\u9069\u7528\u671f\u9593\u306b\u3088\u308b\u5c65\u6b74\u7ba1\u7406\uff09</li> <li>\u5c65\u6b74\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5</li> </ul>"},{"location":"article/outline/#12b","title":"\u7b2c12\u7ae0\uff1a\u8ca9\u58f2\u7ba1\u7406\u30c7\u30fc\u30bf\u8a2d\u8a08\uff08B \u793e\u4e8b\u4f8b\uff09","text":""},{"location":"article/outline/#121-b","title":"12.1 B \u793e\u306e\u6982\u8981","text":"<ul> <li>\u4f1a\u793e\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\uff08\u98df\u8089\u30fb\u98df\u8089\u52a0\u5de5\u54c1\u306e\u88fd\u9020\u30fb\u8ca9\u58f2\u696d\uff09</li> <li>\u6cbf\u9769\u3068\u4e8b\u696d\u74b0\u5883</li> <li>\u4e8b\u696d\u306e\u7279\u5fb4\uff08\u9ad8\u54c1\u8cea\u5546\u54c1\u30fb\u5bfe\u9762\u8ca9\u58f2\u30fb\u591a\u69d8\u306a\u8ca9\u8def\u30fb\u81ea\u793e\u88fd\u9020\u30fbOEM \u5bfe\u5fdc\uff09</li> </ul>"},{"location":"article/outline/#122","title":"12.2 \u7d44\u7e54\u69cb\u6210","text":"<ul> <li>\u7d44\u7e54\u56f3\uff08\u98df\u8089\u88fd\u9020\u30fb\u8ca9\u58f2\u4e8b\u696d\u3001\u98df\u8089\u52a0\u5de5\u54c1\u4e8b\u696d\u3001\u30b3\u30f3\u30b5\u30eb\u30c6\u30a3\u30f3\u30b0\u4e8b\u696d\uff09</li> <li>\u90e8\u9580\u30de\u30b9\u30bf\u306e\u968e\u5c64\u69cb\u9020</li> <li>\u793e\u54e1\u306e\u914d\u7f6e\uff08\u6b63\u793e\u54e1 24 \u540d\u3001\u30d1\u30fc\u30c8 21 \u540d\uff09</li> </ul>"},{"location":"article/outline/#123","title":"12.3 \u30d3\u30b8\u30cd\u30b9\u30e2\u30c7\u30eb","text":"<ul> <li>\u30d3\u30b8\u30cd\u30b9\u30e2\u30c7\u30eb\u30ad\u30e3\u30f3\u30d0\u30b9</li> <li>\u5f97\u610f\u5148\u306e\u5206\u985e\uff08\u767e\u8ca8\u5e97\u30fb\u30b9\u30fc\u30d1\u30fc\u30fb\u30db\u30c6\u30eb\u30fb\u98f2\u98df\u5e97\u30fb\u89b3\u5149\u65bd\u8a2d\uff09</li> <li>\u4ed5\u5165\u5148\u306e\u5206\u985e\uff08\u98df\u8089\u5378\u30fb\u755c\u7523\u696d\u8005\uff09</li> <li>\u5546\u54c1\u69cb\u6210\uff08\u725b\u8089\u30fb\u8c5a\u8089\u30fb\u9d8f\u8089\u30fb\u52a0\u5de5\u54c1\uff09</li> </ul>"},{"location":"article/outline/#124","title":"12.4 \u30c7\u30fc\u30bf\u69cb\u9020\u306e\u8a2d\u8a08","text":"<ul> <li>\u30de\u30b9\u30bf\u30c7\u30fc\u30bf\u306e\u69cb\u6210</li> <li>\u5546\u54c1\u30b3\u30fc\u30c9\u4f53\u7cfb\uff08BEEF-/PORK-/CHKN-/PROC-\uff09</li> <li>\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\u4f53\u7cfb\uff08CUS-/SUP-\uff09</li> <li>Enum \u306e\u65e5\u672c\u8a9e\u30fb\u82f1\u8a9e\u30de\u30c3\u30d4\u30f3\u30b0</li> </ul>"},{"location":"article/outline/#125-seed","title":"12.5 Seed \u30c7\u30fc\u30bf\u306e\u5b9f\u88c5","text":"<ul> <li>\u5b9f\u88c5\u65b9\u91dd\uff08\u5916\u90e8\u30ad\u30fc\u5236\u7d04\u30fb\u8907\u5408\u30ad\u30fc\u30fb\u65e5\u672c\u8a9e\u30c6\u30fc\u30d6\u30eb\u540d\uff09</li> <li>MasterDataSeeder \u306e\u5b9f\u88c5</li> <li>TransactionDataSeeder \u306e\u5b9f\u88c5</li> <li>\u30c7\u30fc\u30bf\u306e\u691c\u8a3c\u3068\u6d3b\u7528</li> </ul>"},{"location":"article/outline/#13api","title":"\u7b2c13\u7ae0\uff1aAPI \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":""},{"location":"article/outline/#131","title":"13.1 \u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u5fa9\u7fd2","text":"<ul> <li>Ports and Adapters \u30d1\u30bf\u30fc\u30f3\u306e\u6982\u8981</li> <li>\u30c9\u30e1\u30a4\u30f3\u4e2d\u5fc3\u8a2d\u8a08</li> <li>\u4f9d\u5b58\u6027\u306e\u9006\u8ee2</li> <li>\u30c6\u30b9\u30c8\u5bb9\u6613\u6027</li> </ul>"},{"location":"article/outline/#132","title":"13.2 \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u69cb\u9020","text":"<ul> <li>Domain \u5c64\uff08\u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u3068\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\uff09</li> <li>Application \u5c64\uff08\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306e\u5b9f\u88c5\uff09</li> <li>Infrastructure \u5c64\uff08\u5916\u90e8\u6280\u8853\u3068\u306e\u63a5\u7d9a\uff09</li> <li>Input Port / Output Port \u306e\u5206\u96e2</li> <li>\u5404\u30ec\u30a4\u30e4\u30fc\u306e\u8cac\u52d9</li> </ul>"},{"location":"article/outline/#133-api","title":"13.3 \u30de\u30b9\u30bf API \u306e\u5b9f\u88c5","text":"<ul> <li>\u5546\u54c1\u30de\u30b9\u30bf API\uff08CRUD \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\uff09</li> <li>TDD \u306b\u3088\u308b\u5b9f\u88c5\uff08Red-Green-Refactor\uff09</li> <li>Controller\u30fbService\u30fbRepository \u306e\u5b9f\u88c5</li> <li>\u9867\u5ba2\u30de\u30b9\u30bf API\uff08\u8acb\u6c42\u5148\u30fb\u56de\u53ce\u5148\u306e\u7ba1\u7406\uff09</li> </ul>"},{"location":"article/outline/#134-api","title":"13.4 \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3 API \u306e\u5b9f\u88c5","text":"<ul> <li>\u53d7\u6ce8 API\uff08\u53d7\u6ce8\u767b\u9332\u30fb\u53d7\u6ce8\u7167\u4f1a\u30fb\u53d7\u6ce8\u660e\u7d30\u7167\u4f1a\uff09</li> <li>\u51fa\u8377 API\uff08\u51fa\u8377\u6307\u793a\u30fb\u51fa\u8377\u78ba\u5b9a\uff09</li> <li>\u58f2\u4e0a API\uff08\u58f2\u4e0a\u8a08\u4e0a\u30fb\u58f2\u4e0a\u7167\u4f1a\uff09</li> <li>\u8acb\u6c42\u30fb\u5165\u91d1 API\uff08\u8acb\u6c42\u7de0\u3081\u30fb\u5165\u91d1\u6d88\u8fbc\uff09</li> </ul>"},{"location":"article/outline/#135","title":"13.5 \u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0","text":"<ul> <li>\u30b0\u30ed\u30fc\u30d0\u30eb\u4f8b\u5916\u30cf\u30f3\u30c9\u30e9\u30fc\uff08@RestControllerAdvice\uff09</li> <li>\u30c9\u30e1\u30a4\u30f3\u4f8b\u5916\u306e\u5b9a\u7fa9\u3068\u5909\u63db</li> <li>ProblemDetail \u306b\u3088\u308b\u30a8\u30e9\u30fc\u30ec\u30b9\u30dd\u30f3\u30b9</li> <li>\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\u306e\u51e6\u7406</li> </ul>"},{"location":"article/outline/#136-api","title":"13.6 API \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8","text":"<ul> <li>OpenAPI / Swagger \u306e\u8a2d\u5b9a</li> <li>\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u6587\u66f8\u5316</li> <li>\u30ea\u30af\u30a8\u30b9\u30c8\u30fb\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u30b9\u30ad\u30fc\u30de\u5b9a\u7fa9</li> </ul>"},{"location":"article/outline/#137-api","title":"13.7 API \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30c6\u30b9\u30c8","text":"<ul> <li>\u30c6\u30b9\u30c8\u30b3\u30f3\u30c6\u30ca\u306b\u3088\u308b\u7d71\u5408\u30c6\u30b9\u30c8\u74b0\u5883</li> <li>REST API \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u30c6\u30b9\u30c8</li> <li>\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u72b6\u614b\u306e\u691c\u8a3c</li> <li>\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3068\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7</li> </ul>"},{"location":"article/outline/#3_1","title":"\u7b2c3\u90e8\uff1a\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0","text":""},{"location":"article/outline/#14","title":"\u7b2c14\u7ae0\uff1a\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u5168\u4f53\u50cf","text":""},{"location":"article/outline/#141","title":"14.1 \u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u30b9\u30b3\u30fc\u30d7","text":"<ul> <li>\u50b5\u6a29\u7ba1\u7406\uff08\u8acb\u6c42\u30fb\u5165\u91d1\uff09</li> <li>\u50b5\u52d9\u7ba1\u7406\uff08\u652f\u6255\u30fb\u51fa\u91d1\uff09</li> <li>\u7d4c\u7406\uff08\u4ed5\u8a33\u30fb\u6c7a\u7b97\uff09</li> </ul>"},{"location":"article/outline/#142","title":"14.2 \u8ca1\u52d9\u4f1a\u8a08\u3068\u7ba1\u7406\u4f1a\u8a08\u306e\u9055\u3044","text":"<ul> <li>\u8ca1\u52d9\u4f1a\u8a08\uff1a\u5916\u90e8\u5831\u544a\u76ee\u7684</li> <li>\u7ba1\u7406\u4f1a\u8a08\uff1a\u5185\u90e8\u610f\u601d\u6c7a\u5b9a\u76ee\u7684</li> </ul>"},{"location":"article/outline/#143","title":"14.3 \u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":"<ul> <li>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u6210</li> <li>Domain\u5c64\uff08\u30c9\u30e1\u30a4\u30f3\u5c64\uff09<ul> <li>model\uff08\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\uff09</li> <li>type\uff08\u57fa\u672c\u578b\uff1a\u901a\u8ca8\u3001\u5358\u4f4d\u3001\u6570\u91cf\u7b49\uff09</li> <li>exception\uff08\u30c9\u30e1\u30a4\u30f3\u4f8b\u5916\uff09</li> </ul> </li> <li>Application\u5c64\uff08\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff09<ul> <li>port/in\uff08Input Port\uff09</li> <li>port/out\uff08Output Port\uff09</li> <li>service\uff08Application Service\uff09</li> </ul> </li> <li>Infrastructure\u5c64\uff08\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u5c64\uff09<ul> <li>in/rest\uff08Input Adapter - REST API\uff09</li> <li>out/persistence\uff08Output Adapter - \u6c38\u7d9a\u5316\uff09</li> <li>config\uff08\u8a2d\u5b9a\uff09</li> </ul> </li> <li>\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u30dd\u30fc\u30c8&amp;\u30a2\u30c0\u30d7\u30bf\u30fc\uff09</li> <li>\u30c9\u30e1\u30a4\u30f3\uff08\u4e2d\u5fc3\uff09</li> <li>\u30dd\u30fc\u30c8\uff08\u5165\u529b\u30dd\u30fc\u30c8\u30fb\u51fa\u529b\u30dd\u30fc\u30c8\uff09</li> <li>\u30a2\u30c0\u30d7\u30bf\u30fc\uff08\u30d7\u30e9\u30a4\u30de\u30ea\u30fb\u30bb\u30ab\u30f3\u30c0\u30ea\uff09</li> <li>\u4f9d\u5b58\u6027\u306e\u65b9\u5411\u3068\u4f9d\u5b58\u6027\u9006\u8ee2\u306e\u539f\u5247</li> <li>\u30c9\u30e1\u30a4\u30f3\u99c6\u52d5\u8a2d\u8a08\u306e\u9069\u7528</li> <li>\u96c6\u7d04\u3068\u30ea\u30dd\u30b8\u30c8\u30ea</li> <li>\u30c9\u30e1\u30a4\u30f3\u30b5\u30fc\u30d3\u30b9</li> <li>\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9</li> <li>API \u8a2d\u8a08</li> <li>RESTful API \u306e\u57fa\u672c\u65b9\u91dd</li> <li>\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u8a2d\u8a08</li> </ul>"},{"location":"article/outline/#15","title":"\u7b2c15\u7ae0\uff1a\u52d8\u5b9a\u79d1\u76ee\u306e\u8a2d\u8a08","text":""},{"location":"article/outline/#151","title":"15.1 \u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u306e\u8a2d\u8a08","text":"<ul> <li>\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\u30fb\u52d8\u5b9a\u79d1\u76ee\u540d</li> <li>BSPL \u533a\u5206\uff08\u8cb8\u501f\u5bfe\u7167\u8868 / \u640d\u76ca\u8a08\u7b97\u66f8\uff09</li> <li>\u8cb8\u501f\u533a\u5206\uff08\u501f\u65b9 / \u8cb8\u65b9\uff09</li> <li>\u53d6\u5f15\u8981\u7d20\u533a\u5206\uff08\u8cc7\u7523\u30fb\u8ca0\u50b5\u30fb\u8cc7\u672c\u30fb\u53ce\u76ca\u30fb\u8cbb\u7528\uff09</li> <li>\u96c6\u8a08\u533a\u5206\uff08\u898b\u51fa\u79d1\u76ee\u30fb\u96c6\u8a08\u79d1\u76ee\u30fb\u660e\u7d30\u79d1\u76ee\uff09</li> <li>\u7ba1\u7406\u4f1a\u8a08\u533a\u5206\u30fb\u8cbb\u7528\u533a\u5206</li> <li>\u88dc\u52a9\u79d1\u76ee\u7a2e\u5225</li> <li>\u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206\u30fb\u8ab2\u7a0e\u53d6\u5f15\u30b3\u30fc\u30c9</li> <li>\u671f\u65e5\u7ba1\u7406\u533a\u5206</li> </ul>"},{"location":"article/outline/#152","title":"15.2 \u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf\u306e\u8a2d\u8a08","text":"<ul> <li>\u30c1\u30eb\u30c0\u9023\u7d50\u65b9\u5f0f\u306b\u3088\u308b\u968e\u5c64\u69cb\u9020</li> <li>\u8cb8\u501f\u5bfe\u7167\u8868\u306e\u79d1\u76ee\u30c4\u30ea\u30fc\u69cb\u9020</li> <li>\u79d1\u76ee\u6b8b\u9ad8\u96c6\u8a08\u306e\u8003\u3048\u65b9</li> </ul>"},{"location":"article/outline/#153","title":"15.3 \u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\u306e\u8a2d\u8a08","text":"<ul> <li>\u8ab2\u7a0e\u53d6\u5f15\u30b3\u30fc\u30c9\u30fb\u7a0e\u7387\u306e\u7ba1\u7406</li> </ul>"},{"location":"article/outline/#16","title":"\u7b2c16\u7ae0\uff1a\u4ed5\u8a33\u306e\u8a2d\u8a08","text":""},{"location":"article/outline/#161","title":"16.1 \u4ed5\u8a33\u30c6\u30fc\u30d6\u30eb\u306e\u8a2d\u8a08","text":"<ul> <li>\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\u30fb\u8d77\u7968\u65e5\u30fb\u5165\u529b\u65e5</li> <li>\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\u30fb\u5358\u8907\u30d5\u30e9\u30b0</li> <li>\u4ed5\u8a33\u4f1d\u7968\u533a\u5206</li> <li>\u90e8\u9580\u30b3\u30fc\u30c9\u30fb\u793e\u54e1\u30b3\u30fc\u30c9</li> <li>\u8d64\u4f1d\u30d5\u30e9\u30b0\u30fb\u8d64\u9ed2\u4f1d\u7968\u756a\u53f7</li> </ul>"},{"location":"article/outline/#162","title":"16.2 \u4ed5\u8a33\u660e\u7d30\u306e\u8a2d\u8a08","text":"<ul> <li>\u4ed5\u8a33\u884c\u756a\u53f7\u30fb\u884c\u6458\u8981</li> </ul>"},{"location":"article/outline/#163","title":"16.3 \u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\u306e\u8a2d\u8a08","text":"<ul> <li>\u8cb8\u501f\u533a\u5206\uff08\u501f\u65b9 / \u8cb8\u65b9\uff09</li> <li>\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\u30fb\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9</li> <li>\u4ed5\u8a33\u91d1\u984d\u30fb\u57fa\u8ef8\u63db\u7b97\u4ed5\u8a33\u91d1\u984d</li> <li>\u901a\u8ca8\u30b3\u30fc\u30c9\u30fb\u70ba\u66ff\u30ec\u30fc\u30c8</li> <li>\u90e8\u9580\u30b3\u30fc\u30c9\u30fb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9\u30fb\u30bb\u30b0\u30e1\u30f3\u30c8\u30b3\u30fc\u30c9</li> <li>\u6d88\u8cbb\u7a0e\u533a\u5206\u30fb\u6d88\u8cbb\u7a0e\u7387\u30fb\u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206</li> <li>\u671f\u65e5\u30fb\u8cc7\u91d1\u7e70\u30d5\u30e9\u30b0</li> <li>\u76f8\u624b\u52d8\u5b9a\u79d1\u76ee\u30fb\u76f8\u624b\u88dc\u52a9\u79d1\u76ee</li> <li>\u4ed8\u7b8b\u30b3\u30fc\u30c9\u30fb\u4ed8\u7b8b\u5185\u5bb9</li> </ul>"},{"location":"article/outline/#17","title":"\u7b2c17\u7ae0\uff1a\u81ea\u52d5\u4ed5\u8a33\u306e\u8a2d\u8a08","text":""},{"location":"article/outline/#171","title":"17.1 \u81ea\u52d5\u4ed5\u8a33\u306e\u6982\u8981","text":"<ul> <li>\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3068\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u9023\u643a</li> <li>\u624b\u5165\u529b\u306b\u3088\u308b\u975e\u9023\u643a\uff08\u30a2\u30ca\u30ed\u30b0\u9023\u643a\uff09\u306e\u8ab2\u984c</li> <li>\u81ea\u52d5\u4ed5\u8a33\u51e6\u7406\u306e\u30c7\u30fc\u30bf\u30d5\u30ed\u30fc</li> </ul>"},{"location":"article/outline/#172","title":"17.2 \u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf\u306e\u8a2d\u8a08","text":"<ul> <li>\u5546\u54c1\u30b0\u30eb\u30fc\u30d7 \u00d7 \u9867\u5ba2\u30b0\u30eb\u30fc\u30d7\u306b\u3088\u308b\u6761\u4ef6\u5206\u5c90</li> <li>\u501f\u65b9\u79d1\u76ee\u30fb\u8cb8\u65b9\u79d1\u76ee\u306e\u81ea\u52d5\u5224\u5b9a</li> <li>\u58f2\u4e0a\u8fd4\u54c1\u6642\u306e\u79d1\u76ee\u8a2d\u5b9a</li> </ul>"},{"location":"article/outline/#173","title":"17.3 \u81ea\u52d5\u4ed5\u8a33\u51e6\u7406\u306e\u8a2d\u8a08","text":"<ul> <li>\u30d5\u30e9\u30b0\u7ba1\u7406\u65b9\u5f0f\u3068\u65e5\u4ed8\u7ba1\u7406\u65b9\u5f0f</li> <li>\u30bb\u30c3\u30c8\u4e2d\u5fc3\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8a2d\u8a08</li> <li>\u30eb\u30fc\u30d7\u51e6\u7406\u3068\u306e\u6bd4\u8f03</li> </ul>"},{"location":"article/outline/#174","title":"17.4 \u58f2\u4e0a\u4f1d\u7968\u304b\u3089\u4ed5\u8a33\u4f1d\u7968\u3078\u306e\u8ee2\u8a18\u30ed\u30b8\u30c3\u30af","text":"<ul> <li>\u660e\u7d30\u884c\u306e\u5206\u89e3\u3068\u96c6\u7d04</li> <li>\u501f\u65b9\uff08\u58f2\u639b\u91d1\uff09\u3068\u8cb8\u65b9\uff08\u58f2\u4e0a\uff09\u306e\u5c55\u958b</li> <li>\u6d88\u8cbb\u7a0e\u306e\u6309\u5206\u8a08\u7b97</li> <li>\u8cb8\u501f\u4e00\u81f4\u306e\u539f\u5247</li> </ul>"},{"location":"article/outline/#18","title":"\u7b2c18\u7ae0\uff1a\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u306e\u8a2d\u8a08","text":""},{"location":"article/outline/#181","title":"18.1 \u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u306e\u8a2d\u8a08","text":"<ul> <li>\u8d77\u7968\u65e5 \u00d7 \u52d8\u5b9a\u79d1\u76ee \u00d7 \u88dc\u52a9\u79d1\u76ee \u00d7 \u90e8\u9580 \u00d7 \u30d7\u30ed\u30b8\u30a7\u30af\u30c8</li> <li>\u501f\u65b9\u91d1\u984d\u30fb\u8cb8\u65b9\u91d1\u984d</li> <li>\u65e5\u8a08\u8868\u306e\u51fa\u529b</li> </ul>"},{"location":"article/outline/#182","title":"18.2 \u6708\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u306e\u8a2d\u8a08","text":"<ul> <li>\u6c7a\u7b97\u671f \u00d7 \u6708\u5ea6\u306b\u3088\u308b\u7ba1\u7406</li> <li>\u6708\u521d\u6b8b\u9ad8\u30fb\u6708\u672b\u6b8b\u9ad8</li> <li>\u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868\u306e\u51fa\u529b</li> </ul>"},{"location":"article/outline/#183","title":"18.3 \u6b8b\u9ad8\u66f4\u65b0\u306e\u30bf\u30a4\u30df\u30f3\u30b0","text":"<ul> <li>\u4ed5\u8a33\u5165\u529b\u6642\u306e\u5373\u6642\u66f4\u65b0</li> <li>\u30d0\u30c3\u30c1\u51e6\u7406\u306b\u3088\u308b\u96c6\u8a08</li> </ul>"},{"location":"article/outline/#19","title":"\u7b2c19\u7ae0\uff1a\u8d64\u9ed2\u3068\u30ed\u30b0\u306e\u8a2d\u8a08","text":""},{"location":"article/outline/#191-3","title":"19.1 3\u3064\u306e\u30a2\u30d7\u30ed\u30fc\u30c1","text":"<ul> <li>\u30c7\u30fc\u30bf\u81ea\u4f53\u306b\u30ed\u30b0\u60c5\u5831\u3092\u6301\u3064\u65b9\u5f0f</li> <li>\u8d64\u9ed2\u51e6\u7406\u30fb\u8ad6\u7406\u524a\u9664\u65b9\u5f0f</li> <li>\u30ed\u30b0\u30c6\u30fc\u30d6\u30eb\u306b\u30ed\u30b0\u60c5\u5831\u3092\u4fdd\u5b58\u3059\u308b\u65b9\u5f0f</li> </ul>"},{"location":"article/outline/#192","title":"19.2 \u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u3067\u306e\u4f7f\u3044\u5206\u3051","text":"<ul> <li>\u4f1a\u8a08\u7d61\u307f\u306f\u8d64\u9ed2\u51e6\u7406</li> <li>\u30de\u30b9\u30bf\u95a2\u9023\u306f\u30ed\u30b0\u30c6\u30fc\u30d6\u30eb</li> <li>\u305d\u308c\u4ee5\u5916\u306f\u30c7\u30fc\u30bf\u81ea\u4f53\u306b\u30ed\u30b0</li> </ul>"},{"location":"article/outline/#20d","title":"\u7b2c20\u7ae0\uff1a\u8ca1\u52d9\u4f1a\u8a08\u30c7\u30fc\u30bf\u8a2d\u8a08\uff08D \u793e\u4e8b\u4f8b\uff09","text":""},{"location":"article/outline/#201-d","title":"20.1 D \u793e\u306e\u6982\u8981","text":"<ul> <li>\u4f1a\u793e\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\uff08\u5316\u7ca7\u54c1\u88fd\u9020\u8ca9\u58f2\uff09</li> <li>\u4f01\u696d\u6982\u8981\uff08\u8cc7\u672c\u91d1 5 \u5104\u5186\u3001\u5f93\u696d\u54e1 300 \u540d\u3001\u5e74\u9593\u58f2\u4e0a\u9ad8 80 \u5104\u5186\uff09</li> <li>\u6c7a\u7b97\u671f\uff083 \u6708\u671f\uff09</li> <li>\u7d4c\u7406\u4f53\u5236\uff08\u7d4c\u7406\u90e8 10 \u540d\u3001\u8ca1\u52d9\u8ab2 3 \u540d\uff09</li> </ul>"},{"location":"article/outline/#202","title":"20.2 \u7d44\u7e54\u69cb\u6210","text":"<ul> <li>\u7d44\u7e54\u56f3\uff08\u55b6\u696d\u672c\u90e8\u30fb\u88fd\u9020\u672c\u90e8\u30fb\u7ba1\u7406\u672c\u90e8\u30fb\u7814\u7a76\u958b\u767a\u672c\u90e8\uff09</li> <li>\u90e8\u9580\u30de\u30b9\u30bf\u306e\u968e\u5c64\u69cb\u9020</li> <li>\u90e8\u9580\u30b3\u30fc\u30c9\u4f53\u7cfb</li> </ul>"},{"location":"article/outline/#203","title":"20.3 \u52d8\u5b9a\u79d1\u76ee\u4f53\u7cfb","text":"<ul> <li>\u52d8\u5b9a\u79d1\u76ee\u306e\u69cb\u6210\uff08\u8cc7\u7523\u30fb\u8ca0\u50b5\u30fb\u7d14\u8cc7\u7523\u30fb\u53ce\u76ca\u30fb\u8cbb\u7528\uff09</li> <li>\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\u4f53\u7cfb</li> <li>\u88dc\u52a9\u79d1\u76ee\u306e\u8a2d\u8a08</li> </ul>"},{"location":"article/outline/#204-seed","title":"20.4 Seed \u30c7\u30fc\u30bf\u306e\u5b9f\u88c5","text":"<ul> <li>\u30de\u30b9\u30bf\u30c7\u30fc\u30bf\u306e\u69cb\u6210\uff08\u52d8\u5b9a\u79d1\u76ee\u30fb\u90e8\u9580\u30fb\u793e\u54e1\uff09</li> <li>\u4ed5\u8a33\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u306e\u4f5c\u6210</li> <li>\u30c7\u30fc\u30bf\u306e\u691c\u8a3c\u3068\u6d3b\u7528</li> </ul>"},{"location":"article/outline/#21api","title":"\u7b2c21\u7ae0\uff1aAPI \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":""},{"location":"article/outline/#211","title":"21.1 \u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u5fa9\u7fd2","text":"<ul> <li>Ports and Adapters \u30d1\u30bf\u30fc\u30f3\u306e\u6982\u8981</li> <li>\u30c9\u30e1\u30a4\u30f3\u4e2d\u5fc3\u8a2d\u8a08</li> <li>\u4f9d\u5b58\u6027\u306e\u9006\u8ee2</li> <li>\u30c6\u30b9\u30c8\u5bb9\u6613\u6027</li> </ul>"},{"location":"article/outline/#212","title":"21.2 \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u69cb\u9020","text":"<ul> <li>Domain \u5c64\uff08\u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u3068\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\uff09</li> <li>Application \u5c64\uff08\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306e\u5b9f\u88c5\uff09</li> <li>Infrastructure \u5c64\uff08\u5916\u90e8\u6280\u8853\u3068\u306e\u63a5\u7d9a\uff09</li> <li>Input Port / Output Port \u306e\u5206\u96e2</li> <li>\u5404\u30ec\u30a4\u30e4\u30fc\u306e\u8cac\u52d9</li> </ul>"},{"location":"article/outline/#213-api","title":"21.3 \u30de\u30b9\u30bf API \u306e\u5b9f\u88c5","text":"<ul> <li>\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf API\uff08CRUD \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\uff09</li> <li>TDD \u306b\u3088\u308b\u5b9f\u88c5\uff08Red-Green-Refactor\uff09</li> <li>Controller\u30fbService\u30fbRepository \u306e\u5b9f\u88c5</li> <li>\u88dc\u52a9\u79d1\u76ee\u30de\u30b9\u30bf API\uff08\u52d8\u5b9a\u79d1\u76ee\u3068\u306e\u95a2\u9023\uff09</li> </ul>"},{"location":"article/outline/#214-api","title":"21.4 \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3 API \u306e\u5b9f\u88c5","text":"<ul> <li>\u4ed5\u8a33 API\uff08\u4ed5\u8a33\u767b\u9332\u30fb\u7167\u4f1a\u30fb\u8cb8\u501f\u4e00\u81f4\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\uff09</li> <li>\u6b8b\u9ad8\u7167\u4f1a API\uff08\u65e5\u6b21\u6b8b\u9ad8\u30fb\u6708\u6b21\u6b8b\u9ad8\uff09</li> <li>\u8a66\u7b97\u8868 API\uff08\u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868\u306e\u51fa\u529b\uff09</li> <li>\u90e8\u9580\u5225\u30fb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5225\u306e\u6b8b\u9ad8\u7167\u4f1a</li> </ul>"},{"location":"article/outline/#215","title":"21.5 \u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0","text":"<ul> <li>\u30b0\u30ed\u30fc\u30d0\u30eb\u4f8b\u5916\u30cf\u30f3\u30c9\u30e9\u30fc\uff08@RestControllerAdvice\uff09</li> <li>\u30c9\u30e1\u30a4\u30f3\u4f8b\u5916\u306e\u5b9a\u7fa9\u3068\u5909\u63db</li> <li>ProblemDetail \u306b\u3088\u308b\u30a8\u30e9\u30fc\u30ec\u30b9\u30dd\u30f3\u30b9</li> <li>\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\u306e\u51e6\u7406</li> </ul>"},{"location":"article/outline/#216-api","title":"21.6 API \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8","text":"<ul> <li>OpenAPI / Swagger \u306e\u8a2d\u5b9a</li> <li>\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u6587\u66f8\u5316</li> <li>\u30ea\u30af\u30a8\u30b9\u30c8\u30fb\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u30b9\u30ad\u30fc\u30de\u5b9a\u7fa9</li> </ul>"},{"location":"article/outline/#217-api","title":"21.7 API \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30c6\u30b9\u30c8","text":"<ul> <li>\u30c6\u30b9\u30c8\u30b3\u30f3\u30c6\u30ca\u306b\u3088\u308b\u7d71\u5408\u30c6\u30b9\u30c8\u74b0\u5883</li> <li>REST API \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u30c6\u30b9\u30c8</li> <li>\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u72b6\u614b\u306e\u691c\u8a3c</li> <li>\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3068\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7</li> </ul>"},{"location":"article/outline/#4_1","title":"\u7b2c4\u90e8\uff1a\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0","text":""},{"location":"article/outline/#22_1","title":"\u7b2c22\u7ae0\uff1a\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u5168\u4f53\u50cf","text":""},{"location":"article/outline/#221","title":"22.1 \u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u30b9\u30b3\u30fc\u30d7","text":"<ul> <li>\u751f\u7523\u8a08\u753b\uff08MPS\u30fbMRP\uff09</li> <li>\u8cfc\u8cb7\u7ba1\u7406\uff08\u767a\u6ce8\u30fb\u5165\u8377\u30fb\u691c\u53ce\uff09</li> <li>\u5de5\u7a0b\u7ba1\u7406\uff08\u88fd\u9020\u6307\u793a\u30fb\u88fd\u9020\u5b9f\u7e3e\uff09</li> <li>\u5728\u5eab\u7ba1\u7406\uff08\u53d7\u6255\u30fb\u5728\u5eab\u72b6\u614b\uff09</li> <li>\u54c1\u8cea\u7ba1\u7406\uff08\u53d7\u5165\u691c\u67fb\u30fb\u51fa\u8377\u691c\u67fb\u30fb\u30c8\u30ec\u30fc\u30b5\u30d3\u30ea\u30c6\u30a3\uff09</li> <li>\u88fd\u9020\u539f\u4fa1\u7ba1\u7406\uff08\u6a19\u6e96\u539f\u4fa1\u30fb\u5b9f\u969b\u539f\u4fa1\u30fb\u914d\u8ce6\uff09</li> </ul>"},{"location":"article/outline/#222","title":"22.2 \u751f\u7523\u7d44\u7e54\u306e\u5f79\u5272\u5206\u62c5","text":"<ul> <li>\u55b6\u696d\u90e8\u30fb\u751f\u7523\u7ba1\u7406\u90e8\u30fb\u88fd\u9020\u90e8\u30fb\u8cfc\u8cb7\u90e8\u30fb\u5916\u6ce8\u90e8</li> <li>\u8cc7\u6750\u5009\u5eab\u30fb\u88fd\u54c1\u5009\u5eab</li> <li>\u696d\u52d9\u30d5\u30ed\u30fc\u3068\u5404\u90e8\u9580\u306e\u8cac\u52d9</li> </ul>"},{"location":"article/outline/#223","title":"22.3 \u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":"<ul> <li>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u6210</li> <li>Domain\u5c64\uff08\u30c9\u30e1\u30a4\u30f3\u5c64\uff09<ul> <li>model\uff08\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\uff09</li> <li>type\uff08\u57fa\u672c\u578b\uff1a\u901a\u8ca8\u3001\u5358\u4f4d\u3001\u6570\u91cf\u7b49\uff09</li> <li>exception\uff08\u30c9\u30e1\u30a4\u30f3\u4f8b\u5916\uff09</li> </ul> </li> <li>Application\u5c64\uff08\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff09<ul> <li>port/in\uff08Input Port\uff09</li> <li>port/out\uff08Output Port\uff09</li> <li>service\uff08Application Service\uff09</li> </ul> </li> <li>Infrastructure\u5c64\uff08\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u5c64\uff09<ul> <li>in/rest\uff08Input Adapter - REST API\uff09</li> <li>out/persistence\uff08Output Adapter - \u6c38\u7d9a\u5316\uff09</li> <li>config\uff08\u8a2d\u5b9a\uff09</li> </ul> </li> <li>\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u30dd\u30fc\u30c8&amp;\u30a2\u30c0\u30d7\u30bf\u30fc\uff09</li> <li>\u30c9\u30e1\u30a4\u30f3\uff08\u4e2d\u5fc3\uff09</li> <li>\u30dd\u30fc\u30c8\uff08\u5165\u529b\u30dd\u30fc\u30c8\u30fb\u51fa\u529b\u30dd\u30fc\u30c8\uff09</li> <li>\u30a2\u30c0\u30d7\u30bf\u30fc\uff08\u30d7\u30e9\u30a4\u30de\u30ea\u30fb\u30bb\u30ab\u30f3\u30c0\u30ea\uff09</li> <li>\u4f9d\u5b58\u6027\u306e\u65b9\u5411\u3068\u4f9d\u5b58\u6027\u9006\u8ee2\u306e\u539f\u5247</li> <li>\u30c9\u30e1\u30a4\u30f3\u99c6\u52d5\u8a2d\u8a08\u306e\u9069\u7528</li> <li>\u96c6\u7d04\u3068\u30ea\u30dd\u30b8\u30c8\u30ea</li> <li>\u30c9\u30e1\u30a4\u30f3\u30b5\u30fc\u30d3\u30b9</li> <li>\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9</li> <li>API \u8a2d\u8a08</li> <li>RESTful API \u306e\u57fa\u672c\u65b9\u91dd</li> <li>\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u8a2d\u8a08</li> </ul>"},{"location":"article/outline/#23_1","title":"\u7b2c23\u7ae0\uff1a\u30de\u30b9\u30bf\u60c5\u5831\u306e\u8a2d\u8a08","text":""},{"location":"article/outline/#231","title":"23.1 \u54c1\u76ee\u30de\u30b9\u30bf\u306e\u8a2d\u8a08","text":"<ul> <li>\u54c1\u76ee\u30b3\u30fc\u30c9\u30fb\u54c1\u540d</li> <li>\u54c1\u76ee\u533a\u5206\uff08\u88fd\u54c1\u30fb\u534a\u88fd\u54c1\u30fb\u4e2d\u9593\u54c1\u30fb\u90e8\u54c1\u30fb\u6750\u6599\u30fb\u539f\u6599\u30fb\u8cc7\u6750\uff09</li> <li>\u54c1\u76ee\u30b0\u30eb\u30fc\u30d7\u30b3\u30fc\u30c9</li> <li>\u5358\u4f4d\u30b3\u30fc\u30c9\u30fb\u5834\u6240\u30b3\u30fc\u30c9</li> <li>\u30ea\u30fc\u30c9\u30bf\u30a4\u30e0\u30fb\u5b89\u5168\u30ea\u30fc\u30c9\u30bf\u30a4\u30e0\u30fb\u5b89\u5168\u5728\u5eab\u6570</li> <li>\u6b69\u7559\u7387\u30fb\u6700\u5c0f\u30ed\u30c3\u30c8\u6570\u30fb\u523b\u307f\u30ed\u30c3\u30c8\u6570\u30fb\u6700\u5927\u30ed\u30c3\u30c8\u6570</li> <li>\u6709\u52b9\u671f\u9593\uff08\u4e16\u4ee3\u7ba1\u7406\uff09</li> </ul>"},{"location":"article/outline/#232-bom","title":"23.2 BOM\uff08\u90e8\u54c1\u69cb\u6210\u8868\uff09\u306e\u8a2d\u8a08","text":"<ul> <li>\u89aa\u54c1\u76ee\u30b3\u30fc\u30c9 \u00d7 \u5b50\u54c1\u76ee\u30b3\u30fc\u30c9</li> <li>\u57fa\u6e96\u91cf\u30fb\u5fc5\u8981\u91cf\u30fb\u4e0d\u826f\u7387</li> <li>\u5de5\u9806</li> <li>\u9069\u7528\u671f\u9593\uff08\u958b\u59cb\u65e5\u30fb\u505c\u6b62\u65e5\uff09</li> <li>\u518d\u5e30 CTE \u306b\u3088\u308b BOM \u5c55\u958b</li> </ul>"},{"location":"article/outline/#233","title":"23.3 \u88dc\u52a9\u30de\u30b9\u30bf\u306e\u8a2d\u8a08","text":"<ul> <li>\u30ab\u30ec\u30f3\u30c0\u30de\u30b9\u30bf\uff08\u5c31\u696d\u65e5\u30fb\u5c31\u696d\u6642\u9593\u30fb\u30b7\u30d5\u30c8\uff09</li> <li>\u5834\u6240\u30de\u30b9\u30bf\uff08\u5834\u6240\u30b3\u30fc\u30c9\u30fb\u5834\u6240\u7a2e\u985e\uff09</li> <li>\u5009\u5eab\u30de\u30b9\u30bf\uff08\u5009\u5eab\u30b3\u30fc\u30c9\u30fb\u5009\u5eab\u533a\u5206\uff09</li> <li>\u90e8\u9580\u30de\u30b9\u30bf\uff08\u90e8\u9580\u30b3\u30fc\u30c9\u30fb\u90e8\u9580\u968e\u5c64\uff09</li> <li>\u62c5\u5f53\u8005\u30de\u30b9\u30bf\uff08\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\u30fb\u90e8\u9580\u30fb\u9069\u7528\u671f\u9593\uff09</li> <li>\u8cc7\u6e90\u30de\u30b9\u30bf\uff08\u8cc7\u6e90\u30b3\u30fc\u30c9\u30fb\u8cc7\u6e90\u540d\u30fb\u90e8\u9580\u3068\u306e\u95a2\u9023\uff09</li> <li>\u53d6\u5f15\u5148\u30de\u30b9\u30bf\uff08\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\u30fb\u9023\u7d61\u5148\u30fb\u5c31\u696d\u65e5\u30d1\u30bf\u30fc\u30f3\uff09</li> <li>\u5de5\u7a0b\u30de\u30b9\u30bf\uff08\u5de5\u7a0b\u30b3\u30fc\u30c9\u30fb\u5de5\u7a0b\u540d\uff09</li> <li>\u5de5\u7a0b\u8868\uff08\u54c1\u76ee\u30b3\u30fc\u30c9 \u00d7 \u5de5\u9806 \u00d7 \u5de5\u7a0b\u30b3\u30fc\u30c9\uff09</li> <li>\u5358\u4fa1\u30de\u30b9\u30bf\uff08\u54c1\u76ee \u00d7 \u53d6\u5f15\u5148 \u00d7 \u30ed\u30c3\u30c8\u5358\u4f4d\u6570 \u00d7 \u9069\u7528\u671f\u9593\uff09</li> </ul>"},{"location":"article/outline/#24_1","title":"\u7b2c24\u7ae0\uff1a\u751f\u7523\u8a08\u753b\u306e\u8a2d\u8a08","text":""},{"location":"article/outline/#241","title":"24.1 \u751f\u7523\u8a08\u753b\u306e\u7279\u5fb4","text":"<ul> <li>\u8a08\u753b\u7cfb\u3068\u5b9f\u7e3e\u7cfb\u306e\u5206\u96e2</li> <li>\u30d0\u30ea\u30a8\u30fc\u30b7\u30e7\u30f3\u306e\u8c4a\u5bcc\u3055</li> <li>\u8a08\u753b\u7cfb\u306e\u6d41\u308c\uff08\u30d3\u30b8\u30cd\u30b9\u30d7\u30e9\u30f3 \u2192 \u8ca9\u58f2\u8a08\u753b \u2192 \u751f\u7523\u8a08\u753b \u2192 MPS \u2192 MRP\uff09</li> </ul>"},{"location":"article/outline/#242-mrp","title":"24.2 MRP\uff08\u6240\u8981\u91cf\u5c55\u958b\uff09","text":"<ul> <li>\u7dcf\u6240\u8981\u91cf\u30fb\u6b63\u5473\u6240\u8981\u91cf\u306e\u8a08\u7b97</li> <li>\u30ed\u30c3\u30c8\u307e\u3068\u3081\uff08\u6700\u5c0f\u30ed\u30c3\u30c8\u30fb\u523b\u307f\u30ed\u30c3\u30c8\u30fb\u6700\u5927\u30ed\u30c3\u30c8\uff09</li> <li>\u30aa\u30fc\u30c0\u60c5\u5831\u306e\u69cb\u9020</li> <li>\u6240\u8981\u60c5\u5831\u306e\u69cb\u9020</li> <li>\u5f15\u5f53\u60c5\u5831\u306e\u69cb\u9020</li> <li>\u5728\u5eab\u63a8\u79fb\u30fb\u767a\u6ce8\u6b8b\u30fb\u88fd\u9020\u6b8b\u3068\u306e\u9023\u643a</li> </ul>"},{"location":"article/outline/#25_1","title":"\u7b2c25\u7ae0\uff1a\u8cfc\u8cb7\u7ba1\u7406\u306e\u8a2d\u8a08","text":""},{"location":"article/outline/#251-db","title":"25.1 \u767a\u6ce8\u696d\u52d9\u306e DB \u8a2d\u8a08","text":"<ul> <li>\u767a\u6ce8\u30c7\u30fc\u30bf\u30fb\u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\u306e\u69cb\u9020</li> <li>\u30aa\u30fc\u30c0\u60c5\u5831\u30fb\u5834\u6240\u30de\u30b9\u30bf\u30fb\u5358\u4fa1\u30de\u30b9\u30bf\u3068\u306e\u9023\u643a</li> <li>\u8af8\u53e3\u54c1\u76ee\u306e\u6271\u3044</li> <li>\u7d0d\u671f\u7ba1\u7406\u30fb\u5206\u7d0d\u5bfe\u5fdc</li> </ul>"},{"location":"article/outline/#252-db","title":"25.2 \u5165\u8377\u30fb\u691c\u53ce\u696d\u52d9\u306e DB \u8a2d\u8a08","text":"<ul> <li>\u5165\u8377\u53d7\u5165\u30c7\u30fc\u30bf\u306e\u69cb\u9020</li> <li>\u767a\u6ce8\u660e\u7d30\u3068\u306e\u7d10\u4ed8\u3051</li> <li>\u5165\u8377\u53d7\u5165\u533a\u5206\uff08\u5165\u8377 / \u53d7\u5165\u8fd4\u54c1\uff09</li> <li>\u53d7\u5165\u691c\u67fb\u30c7\u30fc\u30bf\u306e\u69cb\u9020</li> <li>\u53d7\u5165\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf\uff08\u6b20\u70b9\u30b3\u30fc\u30c9\u30fb\u6570\u91cf\uff09</li> <li>\u6b20\u70b9\u30de\u30b9\u30bf\u306e\u8a2d\u8a08</li> <li>\u691c\u53ce\u30c7\u30fc\u30bf\u306e\u69cb\u9020</li> <li>\u691c\u53ce\u5358\u4fa1\u30fb\u691c\u53ce\u91d1\u984d\u30fb\u6d88\u8cbb\u7a0e</li> <li>\u691c\u53ce\u8fd4\u54c1\u30c7\u30fc\u30bf\u306e\u69cb\u9020</li> <li>\u5728\u5eab\u8a08\u4e0a\u51e6\u7406</li> </ul>"},{"location":"article/outline/#26_1","title":"\u7b2c26\u7ae0\uff1a\u5916\u6ce8\u59d4\u8a17\u7ba1\u7406\u306e\u8a2d\u8a08","text":""},{"location":"article/outline/#261","title":"26.1 \u5916\u6ce8\u59d4\u8a17\u696d\u52d9\u306e\u7406\u89e3","text":"<ul> <li>\u5916\u6ce8\u59d4\u8a17\u3068\u306f\uff08\u5c02\u9580\u52a0\u5de5\u30fb\u751f\u7523\u80fd\u529b\u88dc\u5b8c\u30fb\u30b3\u30b9\u30c8\u6700\u9069\u5316\uff09</li> <li>\u6709\u511f\u652f\u7d66\u3068\u7121\u511f\u652f\u7d66</li> <li>\u5916\u6ce8\u59d4\u8a17\u306e\u696d\u52d9\u30d5\u30ed\u30fc</li> </ul>"},{"location":"article/outline/#262-db","title":"26.2 \u5916\u6ce8\u59d4\u8a17\u306e DB \u8a2d\u8a08","text":"<ul> <li>\u5916\u6ce8\u30aa\u30fc\u30c0\u306e\u69cb\u9020</li> <li>\u652f\u7d66\u30c7\u30fc\u30bf\u30fb\u652f\u7d66\u660e\u7d30\u30c7\u30fc\u30bf\u306e\u69cb\u9020</li> <li>\u767a\u6ce8\u30c7\u30fc\u30bf\u3068\u306e\u7d10\u4ed8\u3051</li> <li>\u652f\u7d66\u91d1\u984d\u306e\u8a08\u7b97\uff08\u6709\u511f\u652f\u7d66\u306e\u5834\u5408\uff09</li> </ul>"},{"location":"article/outline/#263","title":"26.3 \u6d88\u8cbb\u696d\u52d9\u306e\u8a2d\u8a08","text":"<ul> <li>\u6d88\u8cbb\u30c7\u30fc\u30bf\u30fb\u6d88\u8cbb\u660e\u7d30\u30c7\u30fc\u30bf\u306e\u69cb\u9020</li> <li>\u5165\u8377\u53d7\u5165\u30c7\u30fc\u30bf\u3068\u306e\u7d10\u4ed8\u3051</li> <li>\u6d88\u8cbb\u7387\u306e\u8a08\u7b97</li> </ul>"},{"location":"article/outline/#264","title":"26.4 \u5916\u6ce8\u59d4\u8a17\u30ef\u30fc\u30af\u30d5\u30ed\u30fc","text":"<ul> <li>\u767a\u6ce8\u4f5c\u6210 \u2192 \u652f\u7d66\u54c1\u51fa\u8377 \u2192 \u52a0\u5de5 \u2192 \u5165\u8377 \u2192 \u691c\u53ce \u2192 \u6d88\u8cbb\u8a18\u9332</li> <li>\u6709\u511f\u652f\u7d66\u3068\u7121\u511f\u652f\u7d66\u306e\u4f1a\u8a08\u51e6\u7406\u306e\u9055\u3044</li> </ul>"},{"location":"article/outline/#27_1","title":"\u7b2c27\u7ae0\uff1a\u5de5\u7a0b\u7ba1\u7406\u306e\u8a2d\u8a08","text":""},{"location":"article/outline/#271-db","title":"27.1 \u88fd\u9020\u6307\u793a\u306e DB \u8a2d\u8a08","text":"<ul> <li>\u5de5\u7a0b\u7ba1\u7406\u696d\u52d9\u306e\u6d41\u308c</li> <li>\u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf\u306e\u69cb\u9020</li> <li>\u4f5c\u696d\u6307\u793a\u660e\u7d30\u30c7\u30fc\u30bf\uff08\u5de5\u9806\u30fb\u5de5\u7a0b\u30b3\u30fc\u30c9\uff09</li> <li>\u30aa\u30fc\u30c0\u60c5\u5831\u30fb\u5de5\u7a0b\u8868\u3068\u306e\u9023\u643a</li> <li>\u4f5c\u696d\u6307\u793a\u66f8\u3068\u30d4\u30c3\u30ad\u30f3\u30b0\u30ea\u30b9\u30c8</li> </ul>"},{"location":"article/outline/#272-db","title":"27.2 \u88fd\u9020\u5b9f\u7e3e\u306e DB \u8a2d\u8a08","text":"<ul> <li>\u5b8c\u6210\u5b9f\u7e3e\u30c7\u30fc\u30bf\u306e\u69cb\u9020</li> <li>\u5b8c\u6210\u6570\u91cf\u30fb\u826f\u54c1\u6570\u30fb\u4e0d\u826f\u54c1\u6570</li> <li>\u5b8c\u6210\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf\uff08\u6b20\u70b9\u30b3\u30fc\u30c9\uff09</li> <li>\u6d88\u8cbb\u5b9f\u7e3e\u30c7\u30fc\u30bf\u30fb\u6d88\u8cbb\u660e\u7d30\u30c7\u30fc\u30bf</li> <li>\u5834\u6240\u30b3\u30fc\u30c9\u3068\u306e\u7d10\u4ed8\u3051</li> <li>\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\u306e\u69cb\u9020</li> <li>\u4f5c\u696d\u6307\u793a\u660e\u7d30\u3068\u306e\u7d10\u4ed8\u3051</li> <li>\u62c5\u5f53\u8005\u30fb\u90e8\u9580\u30fb\u5de5\u6570\u306e\u8a18\u9332</li> </ul>"},{"location":"article/outline/#273","title":"27.3 \u9032\u6357\u7ba1\u7406","text":"<ul> <li>\u5de5\u7a0b\u5225\u9032\u6357\u306e\u7ba1\u7406</li> <li>\u9045\u5ef6\u30a2\u30e9\u30fc\u30c8\u306e\u8a2d\u8a08</li> <li>\u9032\u6357\u72b6\u6cc1\u306e\u53ef\u8996\u5316</li> </ul>"},{"location":"article/outline/#28_1","title":"\u7b2c28\u7ae0\uff1a\u5728\u5eab\u7ba1\u7406\u306e\u8a2d\u8a08","text":""},{"location":"article/outline/#281-db","title":"28.1 \u5728\u5eab\u60c5\u5831\u306e DB \u8a2d\u8a08","text":"<ul> <li>\u5834\u6240\u30b3\u30fc\u30c9 \u00d7 \u54c1\u76ee\u30b3\u30fc\u30c9</li> <li>\u5728\u5eab\u6570\u30fb\u5408\u683c\u6570\u30fb\u4e0d\u826f\u6570\u30fb\u672a\u691c\u67fb\u6570</li> <li>\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u7ba1\u7406</li> </ul>"},{"location":"article/outline/#282-db","title":"28.2 \u6255\u51fa\u696d\u52d9\u306e DB \u8a2d\u8a08","text":"<ul> <li>\u6255\u51fa\u6307\u793a\u30c7\u30fc\u30bf\u30fb\u6255\u51fa\u6307\u793a\u660e\u7d30\u30c7\u30fc\u30bf</li> <li>\u30aa\u30fc\u30c0\u60c5\u5831\u30fbBOM \u3068\u306e\u9023\u643a</li> <li>\u6255\u51fa\u30c7\u30fc\u30bf\u30fb\u6255\u51fa\u660e\u7d30\u30c7\u30fc\u30bf\u306e\u69cb\u9020</li> <li>\u652f\u7d66\u30c7\u30fc\u30bf\u3068\u306e\u7d71\u5408</li> <li>\u6255\u51fa\u533a\u5206\uff08\u81ea\u793e / \u5916\u6ce8\uff09</li> <li>\u8a08\u753b\u533a\u5206\uff08\u8a08\u753b / \u8a08\u753b\u5916\uff09</li> </ul>"},{"location":"article/outline/#283-db","title":"28.3 \u68da\u5378\u696d\u52d9\u306e DB \u8a2d\u8a08","text":"<ul> <li>\u68da\u5378\u8868\u767a\u884c\u30fb\u5b9f\u68da\u5165\u529b</li> <li>\u5e33\u7c3f\u5728\u5eab\u3068\u5b9f\u68da\u5728\u5eab\u306e\u5dee\u7570\u5206\u6790</li> <li>\u5728\u5eab\u8abf\u6574\u30c7\u30fc\u30bf\u306e\u69cb\u9020</li> </ul>"},{"location":"article/outline/#29","title":"\u7b2c29\u7ae0\uff1a\u54c1\u8cea\u7ba1\u7406\u306e\u8a2d\u8a08","text":""},{"location":"article/outline/#291","title":"29.1 \u54c1\u8cea\u7ba1\u7406\u306e\u6982\u8981","text":"<ul> <li>\u54c1\u8cea\u7ba1\u7406\u306e\u76ee\u7684\u3068\u91cd\u8981\u6027</li> <li>\u691c\u67fb\u306e\u7a2e\u985e\u3068\u4f4d\u7f6e\u3065\u3051</li> </ul>"},{"location":"article/outline/#292","title":"29.2 \u53d7\u5165\u691c\u67fb\u30fb\u5de5\u7a0b\u691c\u67fb\u30fb\u51fa\u8377\u691c\u67fb","text":"<ul> <li>\u53d7\u5165\u691c\u67fb\u306e\u8a2d\u8a08\uff08\u8cfc\u8cb7\u54c1\u306e\u54c1\u8cea\u78ba\u8a8d\uff09</li> <li>\u5de5\u7a0b\u691c\u67fb\u306e\u8a2d\u8a08\uff08\u88fd\u9020\u4e2d\u306e\u54c1\u8cea\u78ba\u8a8d\uff09</li> <li>\u51fa\u8377\u691c\u67fb\u306e\u8a2d\u8a08\uff08\u51fa\u8377\u524d\u306e\u54c1\u8cea\u78ba\u8a8d\uff09</li> <li>\u30c8\u30ec\u30fc\u30b5\u30d3\u30ea\u30c6\u30a3\uff08\u30ed\u30c3\u30c8\u8ffd\u8de1\u30fb\u5c65\u6b74\u7ba1\u7406\uff09</li> </ul>"},{"location":"article/outline/#30","title":"\u7b2c30\u7ae0\uff1a\u88fd\u9020\u539f\u4fa1\u7ba1\u7406\u306e\u8a2d\u8a08","text":""},{"location":"article/outline/#301","title":"30.1 \u539f\u4fa1\u8a08\u7b97\u306e\u6982\u8981","text":"<ul> <li>\u6a19\u6e96\u539f\u4fa1\u3068\u5b9f\u969b\u539f\u4fa1</li> <li>\u539f\u4fa1\u5dee\u7570\u5206\u6790</li> </ul>"},{"location":"article/outline/#302","title":"30.2 \u6750\u6599\u8cbb\u30fb\u52b4\u52d9\u8cbb\u30fb\u88fd\u9020\u9593\u63a5\u8cbb","text":"<ul> <li>\u6750\u6599\u8cbb\u306e\u8a08\u7b97\uff08\u76f4\u63a5\u6750\u6599\u8cbb\u30fb\u9593\u63a5\u6750\u6599\u8cbb\uff09</li> <li>\u52b4\u52d9\u8cbb\u306e\u8a08\u7b97\uff08\u76f4\u63a5\u52b4\u52d9\u8cbb\u30fb\u9593\u63a5\u52b4\u52d9\u8cbb\uff09</li> <li>\u88fd\u9020\u9593\u63a5\u8cbb\u306e\u914d\u8ce6</li> <li>\u88fd\u54c1\u539f\u4fa1\u306e\u96c6\u8a08</li> </ul>"},{"location":"article/outline/#31e","title":"\u7b2c31\u7ae0\uff1a\u751f\u7523\u7ba1\u7406\u30c7\u30fc\u30bf\u8a2d\u8a08\uff08E \u793e\u4e8b\u4f8b\uff09","text":""},{"location":"article/outline/#311-e","title":"31.1 E \u793e\u306e\u6982\u8981","text":"<ul> <li>\u4f1a\u793e\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\uff08\u7cbe\u5bc6\u6a5f\u68b0\u90e8\u54c1\u88fd\u9020\u696d\uff09</li> <li>\u4f01\u696d\u6982\u8981\uff08\u5f93\u696d\u54e1\u7d04 50 \u540d\uff09</li> <li>\u751f\u7523\u306e\u7279\u5fb4\uff08\u591a\u54c1\u7a2e\u5c11\u91cf\u30fb\u53d7\u6ce8\u751f\u7523\u578b\uff09</li> <li>\u5916\u6ce8\u6d3b\u7528\uff08\u30e1\u30c3\u30ad\u51e6\u7406\u30fb\u71b1\u51e6\u7406\uff09</li> </ul>"},{"location":"article/outline/#312","title":"31.2 \u7d44\u7e54\u69cb\u6210","text":"<ul> <li>\u7d44\u7e54\u56f3\uff08\u55b6\u696d\u90e8\u30fb\u751f\u7523\u7ba1\u7406\u90e8\u30fb\u88fd\u9020\u90e8\u30fb\u54c1\u8cea\u7ba1\u7406\u90e8\u30fb\u8cfc\u8cb7\u90e8\u30fb\u5009\u5eab\u90e8\u30fb\u5916\u6ce8\u7ba1\u7406\u90e8\uff09</li> <li>\u90e8\u9580\u30de\u30b9\u30bf\u306e\u968e\u5c64\u69cb\u9020</li> <li>\u62c5\u5f53\u8005\u306e\u914d\u7f6e</li> </ul>"},{"location":"article/outline/#313","title":"31.3 \u30c7\u30fc\u30bf\u69cb\u9020\u306e\u8a2d\u8a08","text":"<ul> <li>\u54c1\u76ee\u30b3\u30fc\u30c9\u4f53\u7cfb\uff08PROD-/SEMI-/PART-/MAT-\uff09</li> <li>\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\u4f53\u7cfb\uff08SUP-/OUT-/CUS-\uff09</li> <li>\u5de5\u7a0b\u30b3\u30fc\u30c9\u4f53\u7cfb\uff08LATHE/MILL/GRIND/DRILL/HEAT/PLAT/ASSY/INSP\uff09</li> <li>BOM \u968e\u5c64\uff08\u88fd\u54c1\u2192\u534a\u88fd\u54c1\u2192\u90e8\u54c1\u2192\u6750\u6599\uff09</li> <li>Enum \u306e\u65e5\u672c\u8a9e\u30fb\u82f1\u8a9e\u30de\u30c3\u30d4\u30f3\u30b0</li> </ul>"},{"location":"article/outline/#314-seed","title":"31.4 Seed \u30c7\u30fc\u30bf\u306e\u5b9f\u88c5","text":"<ul> <li>\u5b9f\u88c5\u65b9\u91dd\uff08\u5916\u90e8\u30ad\u30fc\u5236\u7d04\u30fb\u8907\u5408\u30ad\u30fc\u30fb\u65e5\u672c\u8a9e\u30c6\u30fc\u30d6\u30eb\u540d\uff09</li> <li>SeedDataService \u306e\u8a2d\u8a08</li> <li>MasterDataSeeder \u306e\u5b9f\u88c5\uff08\u90e8\u9580\u30fb\u62c5\u5f53\u8005\u30fb\u54c1\u76ee\u30fbBOM\u30fb\u5de5\u7a0b\u30fb\u53d6\u5f15\u5148\u30fb\u5358\u4fa1\uff09</li> <li>TransactionDataSeeder \u306e\u5b9f\u88c5\uff08\u767a\u6ce8\u30fb\u5165\u8377\u30fb\u4f5c\u696d\u6307\u793a\u30fb\u5b8c\u6210\u5b9f\u7e3e\u30fb\u5728\u5eab\uff09</li> </ul>"},{"location":"article/outline/#315","title":"31.5 \u30c7\u30fc\u30bf\u306e\u691c\u8a3c\u3068\u6d3b\u7528","text":"<ul> <li>\u30c7\u30fc\u30bf\u306e\u6574\u5408\u6027\u78ba\u8a8d\uff08BOM \u5c55\u958b\u30fb\u5728\u5eab\u6b8b\u9ad8\u30fb\u767a\u6ce8\u6b8b\uff09</li> <li>\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u306e\u6d3b\u7528\u65b9\u6cd5</li> <li>\u30c6\u30b9\u30c8\u30b7\u30ca\u30ea\u30aa\u3078\u306e\u5fdc\u7528</li> </ul>"},{"location":"article/outline/#32api","title":"\u7b2c32\u7ae0\uff1aAPI \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":""},{"location":"article/outline/#321","title":"32.1 \u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u5fa9\u7fd2","text":"<ul> <li>Ports and Adapters \u30d1\u30bf\u30fc\u30f3\u306e\u6982\u8981</li> <li>\u30c9\u30e1\u30a4\u30f3\u4e2d\u5fc3\u8a2d\u8a08</li> <li>\u4f9d\u5b58\u6027\u306e\u9006\u8ee2</li> <li>\u30c6\u30b9\u30c8\u5bb9\u6613\u6027</li> </ul>"},{"location":"article/outline/#322","title":"32.2 \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u69cb\u9020","text":"<ul> <li>Domain \u5c64\uff08\u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u3068\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\uff09</li> <li>Application \u5c64\uff08\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306e\u5b9f\u88c5\uff09</li> <li>Infrastructure \u5c64\uff08\u5916\u90e8\u6280\u8853\u3068\u306e\u63a5\u7d9a\uff09</li> <li>Input Port / Output Port \u306e\u5206\u96e2</li> <li>\u5404\u30ec\u30a4\u30e4\u30fc\u306e\u8cac\u52d9</li> </ul>"},{"location":"article/outline/#323-api","title":"32.3 \u30de\u30b9\u30bf API \u306e\u5b9f\u88c5","text":"<ul> <li>\u54c1\u76ee\u30de\u30b9\u30bf API\uff08CRUD \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\uff09</li> <li>TDD \u306b\u3088\u308b\u5b9f\u88c5\uff08Red-Green-Refactor\uff09</li> <li>Controller\u30fbService\u30fbRepository \u306e\u5b9f\u88c5</li> <li>BOM \u30de\u30b9\u30bf API\uff08\u90e8\u54c1\u5c55\u958b\u30fb\u4f7f\u7528\u5148\u7167\u4f1a\uff09</li> </ul>"},{"location":"article/outline/#324-api","title":"32.4 \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3 API \u306e\u5b9f\u88c5","text":"<ul> <li>\u767a\u6ce8 API\uff08\u767a\u6ce8\u767b\u9332\u30fb\u767a\u6ce8\u7167\u4f1a\u30fb\u767a\u6ce8\u660e\u7d30\u7167\u4f1a\uff09</li> <li>\u5728\u5eab\u7167\u4f1a API\uff08\u5728\u5eab\u6b8b\u9ad8\u7167\u4f1a\u30fb\u5728\u5eab\u63a8\u79fb\u7167\u4f1a\uff09</li> <li>\u4f5c\u696d\u6307\u793a API\uff08\u4f5c\u696d\u6307\u793a\u767b\u9332\u30fb\u9032\u6357\u66f4\u65b0\uff09</li> <li>MRP \u5b9f\u884c API\uff08\u6240\u8981\u91cf\u8a08\u7b97\u30fb\u767a\u6ce8\u63d0\u6848\u751f\u6210\uff09</li> </ul>"},{"location":"article/outline/#325","title":"32.5 \u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0","text":"<ul> <li>\u30b0\u30ed\u30fc\u30d0\u30eb\u4f8b\u5916\u30cf\u30f3\u30c9\u30e9\u30fc\uff08@RestControllerAdvice\uff09</li> <li>\u30c9\u30e1\u30a4\u30f3\u4f8b\u5916\u306e\u5b9a\u7fa9\u3068\u5909\u63db</li> <li>ProblemDetail \u306b\u3088\u308b\u30a8\u30e9\u30fc\u30ec\u30b9\u30dd\u30f3\u30b9</li> <li>\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\u306e\u51e6\u7406</li> </ul>"},{"location":"article/outline/#326-api","title":"32.6 API \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8","text":"<ul> <li>OpenAPI / Swagger \u306e\u8a2d\u5b9a</li> <li>\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u6587\u66f8\u5316</li> <li>\u30ea\u30af\u30a8\u30b9\u30c8\u30fb\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u30b9\u30ad\u30fc\u30de\u5b9a\u7fa9</li> </ul>"},{"location":"article/outline/#327-api","title":"32.7 API \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30c6\u30b9\u30c8","text":"<ul> <li>\u30c6\u30b9\u30c8\u30b3\u30f3\u30c6\u30ca\u306b\u3088\u308b\u7d71\u5408\u30c6\u30b9\u30c8\u74b0\u5883</li> <li>REST API \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u30c6\u30b9\u30c8</li> <li>\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u72b6\u614b\u306e\u691c\u8a3c</li> <li>\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3068\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7</li> </ul>"},{"location":"article/outline/#5_1","title":"\u7b2c5\u90e8\uff1a\u30a8\u30f3\u30bf\u30fc\u30d7\u30e9\u30a4\u30ba\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3","text":""},{"location":"article/outline/#33_1","title":"\u7b2c33\u7ae0\uff1a\u30b7\u30b9\u30c6\u30e0\u7d71\u5408\u306e\u6982\u8981","text":""},{"location":"article/outline/#331","title":"33.1 \u306a\u305c\u30b7\u30b9\u30c6\u30e0\u7d71\u5408\u304c\u5fc5\u8981\u304b","text":"<ul> <li>\u30b5\u30a4\u30ed\u5316\u3057\u305f\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u306e\u8ab2\u984c</li> <li>\u30c7\u30fc\u30bf\u306e\u4e00\u8cab\u6027\u3068\u6574\u5408\u6027\u306e\u78ba\u4fdd</li> <li>\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u9023\u643a\u3068\u30d0\u30c3\u30c1\u9023\u643a</li> </ul>"},{"location":"article/outline/#332","title":"33.2 \u5883\u754c\u4ed8\u3051\u3089\u308c\u305f\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8","text":"<ul> <li>\u5883\u754c\u4ed8\u3051\u3089\u308c\u305f\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\uff08Bounded Context\uff09\u3068\u306f</li> <li>\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u306b\u304a\u3051\u308b\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u306e\u8b58\u5225</li> <li>\u8ca9\u58f2\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8</li> <li>\u4f1a\u8a08\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8</li> <li>\u751f\u7523\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8</li> <li>\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30de\u30c3\u30d7\u306e\u4f5c\u6210</li> <li>\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u9593\u306e\u95a2\u4fc2\u30d1\u30bf\u30fc\u30f3</li> <li>\u5171\u6709\u30ab\u30fc\u30cd\u30eb\uff08Shared Kernel\uff09</li> <li>\u9867\u5ba2/\u4f9b\u7d66\u8005\uff08Customer/Supplier\uff09</li> <li>\u9069\u5408\u8005\uff08Conformist\uff09</li> <li>\u8150\u6557\u9632\u6b62\u5c64\uff08Anti-Corruption Layer\uff09</li> <li>\u516c\u958b\u30db\u30b9\u30c8\u30b5\u30fc\u30d3\u30b9\uff08Open Host Service\uff09</li> <li>\u516c\u8868\u3055\u308c\u305f\u8a00\u8a9e\uff08Published Language\uff09</li> </ul>"},{"location":"article/outline/#333","title":"33.3 \u7d71\u5408\u30d1\u30bf\u30fc\u30f3\u306e\u9078\u629e\u57fa\u6e96","text":"<ul> <li>\u540c\u671f vs \u975e\u540c\u671f</li> <li>\u30dd\u30a4\u30f3\u30c8\u30c4\u30fc\u30dd\u30a4\u30f3\u30c8 vs \u30cf\u30d6&amp;\u30b9\u30dd\u30fc\u30af</li> <li>\u30c7\u30fc\u30bf\u7d71\u5408 vs \u30d7\u30ed\u30bb\u30b9\u7d71\u5408</li> </ul>"},{"location":"article/outline/#34","title":"\u7b2c34\u7ae0\uff1a\u30e1\u30c3\u30bb\u30fc\u30b8\u30f3\u30b0\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"article/outline/#341","title":"34.1 \u30e1\u30c3\u30bb\u30fc\u30b8\u30f3\u30b0\u306e\u57fa\u790e","text":"<ul> <li>\u30e1\u30c3\u30bb\u30fc\u30b8\u30c1\u30e3\u30cd\u30eb\uff08Message Channel\uff09</li> <li>\u30e1\u30c3\u30bb\u30fc\u30b8\uff08Message\uff09\u306e\u69cb\u9020</li> <li>\u30d1\u30a4\u30d7\u3068\u30d5\u30a3\u30eb\u30bf\u30fc\uff08Pipes and Filters\uff09</li> </ul>"},{"location":"article/outline/#342","title":"34.2 \u30e1\u30c3\u30bb\u30fc\u30b8\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0","text":"<ul> <li>Content-Based Router\uff08\u5185\u5bb9\u30d9\u30fc\u30b9\u30eb\u30fc\u30bf\u30fc\uff09</li> <li>Message Filter\uff08\u30e1\u30c3\u30bb\u30fc\u30b8\u30d5\u30a3\u30eb\u30bf\u30fc\uff09</li> <li>Splitter / Aggregator\uff08\u5206\u5272 / \u96c6\u7d04\uff09</li> <li>Resequencer\uff08\u518d\u9806\u5e8f\u4ed8\u3051\uff09</li> </ul>"},{"location":"article/outline/#343","title":"34.3 \u30e1\u30c3\u30bb\u30fc\u30b8\u5909\u63db","text":"<ul> <li>Message Translator\uff08\u30e1\u30c3\u30bb\u30fc\u30b8\u5909\u63db\uff09</li> <li>Envelope Wrapper\uff08\u30a8\u30f3\u30d9\u30ed\u30fc\u30d7\u30e9\u30c3\u30d1\u30fc\uff09</li> <li>Content Enricher\uff08\u30b3\u30f3\u30c6\u30f3\u30c4\u30a8\u30f3\u30ea\u30c3\u30c1\u30e3\u30fc\uff09</li> <li>Canonical Data Model\uff08\u6a19\u6e96\u30c7\u30fc\u30bf\u30e2\u30c7\u30eb\uff09</li> </ul>"},{"location":"article/outline/#35","title":"\u7b2c35\u7ae0\uff1a\u30b7\u30b9\u30c6\u30e0\u9593\u9023\u643a\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"article/outline/#351","title":"35.1 \u8ca9\u58f2\u7ba1\u7406\u3068\u8ca1\u52d9\u4f1a\u8a08\u306e\u9023\u643a","text":"<ul> <li>\u58f2\u4e0a\u30c7\u30fc\u30bf\u304b\u3089\u4ed5\u8a33\u30c7\u30fc\u30bf\u3078\u306e\u5909\u63db</li> <li>\u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3\u306e\u9069\u7528</li> <li>\u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u306b\u3088\u308b\u4ed5\u8a33\u751f\u6210</li> </ul>"},{"location":"article/outline/#352","title":"35.2 \u8ca9\u58f2\u7ba1\u7406\u3068\u751f\u7523\u7ba1\u7406\u306e\u9023\u643a","text":"<ul> <li>\u53d7\u6ce8\u60c5\u5831\u304b\u3089\u751f\u7523\u8a08\u753b\u3078\u306e\u9023\u643a</li> <li>\u9700\u8981\u4e88\u6e2c\u30c7\u30fc\u30bf\u306e\u5171\u6709</li> <li>\u5728\u5eab\u60c5\u5831\u306e\u540c\u671f</li> </ul>"},{"location":"article/outline/#353","title":"35.3 \u751f\u7523\u7ba1\u7406\u3068\u8ca1\u52d9\u4f1a\u8a08\u306e\u9023\u643a","text":"<ul> <li>\u88fd\u9020\u539f\u4fa1\u304b\u3089\u4ed5\u8a33\u3078\u306e\u5909\u63db</li> <li>\u691c\u53ce\u30c7\u30fc\u30bf\u306e\u4f1a\u8a08\u9023\u643a</li> <li>\u68da\u5378\u5dee\u7570\u306e\u4f1a\u8a08\u51e6\u7406</li> </ul>"},{"location":"article/outline/#36mdm","title":"\u7b2c36\u7ae0\uff1a\u30de\u30b9\u30bf\u30c7\u30fc\u30bf\u7ba1\u7406\uff08MDM\uff09","text":""},{"location":"article/outline/#361","title":"36.1 \u30de\u30b9\u30bf\u30c7\u30fc\u30bf\u7d71\u5408\u306e\u8ab2\u984c","text":"<ul> <li>\u5404\u30b7\u30b9\u30c6\u30e0\u3067\u306e\u30de\u30b9\u30bf\u91cd\u8907</li> <li>\u30b3\u30fc\u30c9\u4f53\u7cfb\u306e\u4e0d\u4e00\u81f4</li> <li>\u66f4\u65b0\u30bf\u30a4\u30df\u30f3\u30b0\u306e\u540c\u671f</li> </ul>"},{"location":"article/outline/#362-mdm","title":"36.2 MDM \u30d1\u30bf\u30fc\u30f3","text":"<ul> <li>Registry Style\uff08\u53c2\u7167\u578b\uff09</li> <li>Consolidation Style\uff08\u7d71\u5408\u578b\uff09</li> <li>Coexistence Style\uff08\u5171\u5b58\u578b\uff09</li> <li>Transaction Hub Style\uff08\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30cf\u30d6\u578b\uff09</li> </ul>"},{"location":"article/outline/#363","title":"36.3 \u5171\u901a\u30de\u30b9\u30bf\u306e\u8a2d\u8a08","text":"<ul> <li>\u53d6\u5f15\u5148\u30de\u30b9\u30bf\u306e\u7d71\u5408</li> <li>\u5546\u54c1/\u54c1\u76ee\u30de\u30b9\u30bf\u306e\u7d71\u5408</li> <li>\u90e8\u9580\u30fb\u7d44\u7e54\u30de\u30b9\u30bf\u306e\u7d71\u5408</li> </ul>"},{"location":"article/outline/#37","title":"\u7b2c37\u7ae0\uff1a\u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":""},{"location":"article/outline/#371","title":"37.1 \u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u306e\u57fa\u790e","text":"<ul> <li>\u30c9\u30e1\u30a4\u30f3\u30a4\u30d9\u30f3\u30c8\u3068\u306f</li> <li>\u30a4\u30d9\u30f3\u30c8\u30bd\u30fc\u30b7\u30f3\u30b0</li> <li>CQRS\uff08\u30b3\u30de\u30f3\u30c9\u30af\u30a8\u30ea\u8cac\u52d9\u5206\u96e2\uff09</li> </ul>"},{"location":"article/outline/#372","title":"37.2 \u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u306e\u30a4\u30d9\u30f3\u30c8\u8a2d\u8a08","text":"<ul> <li>\u8ca9\u58f2\u7ba1\u7406\u30a4\u30d9\u30f3\u30c8\uff08\u53d7\u6ce8\u78ba\u5b9a\u30fb\u51fa\u8377\u5b8c\u4e86\u30fb\u58f2\u4e0a\u8a08\u4e0a\uff09</li> <li>\u8ca1\u52d9\u4f1a\u8a08\u30a4\u30d9\u30f3\u30c8\uff08\u4ed5\u8a33\u767b\u9332\u30fb\u6708\u6b21\u7de0\u3081\u30fb\u6c7a\u7b97\u78ba\u5b9a\uff09</li> <li>\u751f\u7523\u7ba1\u7406\u30a4\u30d9\u30f3\u30c8\uff08\u88fd\u9020\u6307\u793a\u30fb\u5b8c\u6210\u5831\u544a\u30fb\u691c\u53ce\u5b8c\u4e86\uff09</li> </ul>"},{"location":"article/outline/#373","title":"37.3 \u30a4\u30d9\u30f3\u30c8\u30b9\u30c8\u30a2\u306e\u8a2d\u8a08","text":"<ul> <li>\u30a4\u30d9\u30f3\u30c8\u30c6\u30fc\u30d6\u30eb\u306e\u69cb\u9020</li> <li>\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u306e\u7ba1\u7406</li> <li>\u30a4\u30d9\u30f3\u30c8\u306e\u518d\u751f\u3068\u30ea\u30d7\u30ec\u30a4</li> </ul>"},{"location":"article/outline/#38api","title":"\u7b2c38\u7ae0\uff1aAPI \u8a2d\u8a08\u3068\u30b5\u30fc\u30d3\u30b9\u9023\u643a","text":""},{"location":"article/outline/#381-api","title":"38.1 API \u8a2d\u8a08\u306e\u539f\u5247","text":"<ul> <li>RESTful API \u306e\u8a2d\u8a08</li> <li>\u30ea\u30bd\u30fc\u30b9\u6307\u5411\u8a2d\u8a08</li> <li>\u30d0\u30fc\u30b8\u30e7\u30cb\u30f3\u30b0\u6226\u7565</li> </ul>"},{"location":"article/outline/#382","title":"38.2 \u30b5\u30fc\u30d3\u30b9\u9593\u901a\u4fe1","text":"<ul> <li>\u540c\u671f\u901a\u4fe1\uff08REST / gRPC\uff09</li> <li>\u975e\u540c\u671f\u901a\u4fe1\uff08\u30e1\u30c3\u30bb\u30fc\u30b8\u30ad\u30e5\u30fc\uff09</li> <li>\u30b5\u30fc\u30ad\u30c3\u30c8\u30d6\u30ec\u30fc\u30ab\u30fc\u30d1\u30bf\u30fc\u30f3</li> </ul>"},{"location":"article/outline/#383-api","title":"38.3 API \u30b2\u30fc\u30c8\u30a6\u30a7\u30a4","text":"<ul> <li>\u8a8d\u8a3c\u30fb\u8a8d\u53ef\u306e\u4e00\u5143\u5316</li> <li>\u30ec\u30fc\u30c8\u5236\u9650\u3068\u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0</li> <li>\u30ed\u30b0\u96c6\u7d04\u3068\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0</li> </ul>"},{"location":"article/outline/#384-api","title":"38.4 API \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30c6\u30b9\u30c8","text":"<ul> <li>\u30c6\u30b9\u30c8\u30b3\u30f3\u30c6\u30ca\u306b\u3088\u308b\u7d71\u5408\u30c6\u30b9\u30c8\u74b0\u5883</li> <li>REST API \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u30c6\u30b9\u30c8</li> <li>\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u72b6\u614b\u306e\u691c\u8a3c</li> <li>\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3068\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7</li> <li>\u30b5\u30fc\u30d3\u30b9\u9593\u9023\u643a\u30c6\u30b9\u30c8</li> </ul>"},{"location":"article/outline/#39","title":"\u7b2c39\u7ae0\uff1a\u30c7\u30fc\u30bf\u9023\u643a\u306e\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"article/outline/#391","title":"39.1 \u30d0\u30c3\u30c1\u9023\u643a","text":"<ul> <li>\u30d5\u30a1\u30a4\u30eb\u9023\u643a\uff08CSV / XML / JSON\uff09</li> <li>ETL \u51e6\u7406\u306e\u8a2d\u8a08</li> <li>\u5dee\u5206\u62bd\u51fa\u3068\u5168\u4ef6\u62bd\u51fa</li> </ul>"},{"location":"article/outline/#392","title":"39.2 \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u9023\u643a","text":"<ul> <li>Change Data Capture\uff08CDC\uff09</li> <li>\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30c8\u30ea\u30ac\u30fc\u306e\u6d3b\u7528</li> <li>\u30e1\u30c3\u30bb\u30fc\u30b8\u30ad\u30e5\u30fc\u306b\u3088\u308b\u975e\u540c\u671f\u9023\u643a</li> </ul>"},{"location":"article/outline/#393","title":"39.3 \u9023\u643a\u30c6\u30fc\u30d6\u30eb\u306e\u8a2d\u8a08","text":"<ul> <li>\u9023\u643a\u30b9\u30c6\u30fc\u30bf\u30b9\u7ba1\u7406</li> <li>\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3068\u30ea\u30c8\u30e9\u30a4</li> <li>\u51aa\u7b49\u6027\u306e\u78ba\u4fdd</li> </ul>"},{"location":"article/outline/#_5","title":"\u4ed8\u9332","text":""},{"location":"article/outline/#a-er","title":"A\uff1a\u5168\u4f53 ER \u56f3","text":""},{"location":"article/outline/#a1","title":"A.1 \u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u5168\u4f53\u56f3","text":"<ul> <li>\u5404\u30b5\u30d6\u30b7\u30b9\u30c6\u30e0\u9593\u306e\u9023\u643a</li> </ul>"},{"location":"article/outline/#a2-er","title":"A.2 \u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 ER \u56f3","text":"<ul> <li>\u30de\u30b9\u30bf\u7cfb\u30c6\u30fc\u30d6\u30eb\u306e\u95a2\u9023</li> <li>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u7cfb\u30c6\u30fc\u30d6\u30eb\u306e\u95a2\u9023</li> </ul>"},{"location":"article/outline/#a3-er","title":"A.3 \u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0 ER \u56f3","text":"<ul> <li>\u52d8\u5b9a\u79d1\u76ee\u7cfb\u30c6\u30fc\u30d6\u30eb\u306e\u95a2\u9023</li> <li>\u4ed5\u8a33\u7cfb\u30c6\u30fc\u30d6\u30eb\u306e\u95a2\u9023</li> </ul>"},{"location":"article/outline/#a4-er","title":"A.4 \u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 ER \u56f3","text":"<ul> <li>\u54c1\u76ee\u30fbBOM\u30fb\u5de5\u7a0b\u7cfb\u30c6\u30fc\u30d6\u30eb\u306e\u95a2\u9023</li> <li>\u8cfc\u8cb7\u30fb\u5de5\u7a0b\u7ba1\u7406\u30fb\u5728\u5eab\u7cfb\u30c6\u30fc\u30d6\u30eb\u306e\u95a2\u9023</li> </ul>"},{"location":"article/outline/#b","title":"B\uff1a\u30c6\u30fc\u30d6\u30eb\u5b9a\u7fa9\u4e00\u89a7","text":"<ul> <li>\u5404\u30c6\u30fc\u30d6\u30eb\u306e\u30ab\u30e9\u30e0\u5b9a\u7fa9</li> <li>\u4e3b\u30ad\u30fc\u30fb\u5916\u90e8\u30ad\u30fc\u4e00\u89a7</li> </ul>"},{"location":"article/outline/#c","title":"C\uff1a\u7528\u8a9e\u96c6","text":"<ul> <li>\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u7528\u8a9e</li> <li>\u8ca9\u58f2\u7ba1\u7406\u7528\u8a9e</li> <li>\u8ca1\u52d9\u4f1a\u8a08\u7528\u8a9e</li> <li>\u751f\u7523\u7ba1\u7406\u7528\u8a9e</li> </ul>"},{"location":"article/techstack/","title":"\u6280\u8853\u30b9\u30bf\u30c3\u30af","text":"<p>\u672c\u8a18\u4e8b\u30b7\u30ea\u30fc\u30ba\u3067\u4f7f\u7528\u3059\u308b\u6280\u8853\u30b9\u30bf\u30c3\u30af\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002</p>"},{"location":"article/techstack/#_2","title":"\u30d0\u30c3\u30af\u30a8\u30f3\u30c9","text":"\u30ab\u30c6\u30b4\u30ea \u6280\u8853 \u30d0\u30fc\u30b8\u30e7\u30f3 \u8a00\u8a9e Java 25 \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af Spring Boot 4.0.0 ORM MyBatis 4.0.0 \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9 PostgreSQL 16 \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3 Flyway - \u30c6\u30b9\u30c8 JUnit 5 + TestContainers - \u54c1\u8cea\u7ba1\u7406 JaCoCo, Checkstyle, PMD, SpotBugs -"},{"location":"article/techstack/#_3","title":"\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9","text":"\u30ab\u30c6\u30b4\u30ea \u6280\u8853 \u30d0\u30fc\u30b8\u30e7\u30f3 \u8a00\u8a9e TypeScript 5.x \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af React 19.x \u30d3\u30eb\u30c9\u30c4\u30fc\u30eb Vite 6.x \u30b9\u30bf\u30a4\u30ea\u30f3\u30b0 Tailwind CSS 4.x \u72b6\u614b\u7ba1\u7406 TanStack Query 5.x HTTP \u30af\u30e9\u30a4\u30a2\u30f3\u30c8 Axios - \u30c6\u30b9\u30c8 Vitest + Testing Library -"},{"location":"article/techstack/#_4","title":"\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3","text":"\u30ab\u30c6\u30b4\u30ea \u6280\u8853 \u30b3\u30f3\u30c6\u30ca Docker / Docker Compose CI/CD GitHub Actions"},{"location":"article/techstack/#_5","title":"\u547d\u540d\u898f\u5247","text":"\u8981\u7d20 \u8a00\u8a9e \u4f8b \u30c6\u30fc\u30d6\u30eb\u540d \u65e5\u672c\u8a9e <code>\"\u5546\u54c1\u30de\u30b9\u30bf\"</code>, <code>\"\u53d7\u6ce8\u30c7\u30fc\u30bf\"</code> \u30ab\u30e9\u30e0\u540d \u65e5\u672c\u8a9e <code>\"\u5546\u54c1\u30b3\u30fc\u30c9\"</code>, <code>\"\u5546\u54c1\u540d\"</code> ENUM \u578b \u65e5\u672c\u8a9e <code>\u5546\u54c1\u533a\u5206</code>, <code>\u53d6\u5f15\u5148\u533a\u5206</code> ENUM \u5024 \u65e5\u672c\u8a9e <code>'\u5546\u54c1'</code>, <code>'\u9867\u5ba2'</code> Java \u30af\u30e9\u30b9\u540d \u82f1\u8a9e <code>Product</code>, <code>Order</code>, <code>Customer</code> Java \u30d5\u30a3\u30fc\u30eb\u30c9\u540d \u82f1\u8a9e <code>productCode</code>, <code>productName</code> MyBatis resultMap \u65e5\u672c\u8a9e \u2194 \u82f1\u8a9e <code>column=\"\u5546\u54c1\u30b3\u30fc\u30c9\" property=\"productCode\"</code> TypeScript \u578b\u540d \u82f1\u8a9e <code>Product</code>, <code>Order</code>, <code>Customer</code> TypeScript \u30d7\u30ed\u30d1\u30c6\u30a3\u540d \u82f1\u8a9e <code>productCode</code>, <code>productName</code>"},{"location":"article/techstack/#_6","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u6210","text":"<p>\u5404\u30b5\u30d6\u30b7\u30b9\u30c6\u30e0\u306f\u4ee5\u4e0b\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\u306b\u5f93\u3044\u307e\u3059\u3002</p> <pre><code>apps/{system}/\n\u251c\u2500\u2500 backend/\n\u2502   \u251c\u2500\u2500 build.gradle.kts               # Gradle \u30d3\u30eb\u30c9\u8a2d\u5b9a\uff08Kotlin DSL\uff09\n\u2502   \u251c\u2500\u2500 settings.gradle.kts            # Gradle \u8a2d\u5b9a\n\u2502   \u251c\u2500\u2500 config/                        # \u54c1\u8cea\u7ba1\u7406\u30c4\u30fc\u30eb\u8a2d\u5b9a\n\u2502   \u2502   \u251c\u2500\u2500 checkstyle/\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 checkstyle.xml\n\u2502   \u2502   \u251c\u2500\u2500 pmd/\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 ruleset.xml\n\u2502   \u2502   \u2514\u2500\u2500 spotbugs/\n\u2502   \u2502       \u2514\u2500\u2500 exclude.xml\n\u2502   \u2502\n\u2502   \u2514\u2500\u2500 src/\n\u2502       \u251c\u2500\u2500 main/\n\u2502       \u2502   \u251c\u2500\u2500 java/com/example/sms/\n\u2502       \u2502   \u2502   \u2502\n\u2502       \u2502   \u2502   \u251c\u2500\u2500 domain/            # \u30c9\u30e1\u30a4\u30f3\u5c64\n\u2502       \u2502   \u2502   \u2502   \u251c\u2500\u2500 model/         # \u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\n\u2502       \u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 master/    # \u30de\u30b9\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\u2502       \u2502   \u2502   \u2502   \u2502   \u2514\u2500\u2500 transaction/ # \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\u2502       \u2502   \u2502   \u2502   \u251c\u2500\u2500 type/          # \u57fa\u672c\u578b\uff08\u901a\u8ca8\u3001\u5358\u4f4d\u3001\u6570\u91cf\u7b49\uff09\n\u2502       \u2502   \u2502   \u2502   \u2514\u2500\u2500 exception/     # \u30c9\u30e1\u30a4\u30f3\u4f8b\u5916\n\u2502       \u2502   \u2502   \u2502\n\u2502       \u2502   \u2502   \u251c\u2500\u2500 application/       # \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\n\u2502       \u2502   \u2502   \u2502   \u251c\u2500\u2500 port/\n\u2502       \u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 in/        # Input Port\uff08UseCase\uff09\n\u2502       \u2502   \u2502   \u2502   \u2502   \u2514\u2500\u2500 out/       # Output Port\uff08Repository\uff09\n\u2502       \u2502   \u2502   \u2502   \u2514\u2500\u2500 service/       # Application Service\n\u2502       \u2502   \u2502   \u2502\n\u2502       \u2502   \u2502   \u251c\u2500\u2500 infrastructure/    # \u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u5c64\n\u2502       \u2502   \u2502   \u2502   \u251c\u2500\u2500 in/            # Input Adapter\n\u2502       \u2502   \u2502   \u2502   \u2502   \u2514\u2500\u2500 rest/      # REST API Controller\n\u2502       \u2502   \u2502   \u2502   \u251c\u2500\u2500 out/           # Output Adapter\n\u2502       \u2502   \u2502   \u2502   \u2502   \u2514\u2500\u2500 persistence/ # \u6c38\u7d9a\u5316\uff08MyBatis Mapper\uff09\n\u2502       \u2502   \u2502   \u2502   \u2514\u2500\u2500 config/        # \u8a2d\u5b9a\u30af\u30e9\u30b9\n\u2502       \u2502   \u2502   \u2502\n\u2502       \u2502   \u2502   \u2514\u2500\u2500 Application.java   # \u30e1\u30a4\u30f3\u30af\u30e9\u30b9\n\u2502       \u2502   \u2502\n\u2502       \u2502   \u2514\u2500\u2500 resources/\n\u2502       \u2502       \u251c\u2500\u2500 application.yml    # \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\n\u2502       \u2502       \u251c\u2500\u2500 db/migration/      # Flyway \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\n\u2502       \u2502       \u2514\u2500\u2500 mapper/            # MyBatis XML \u30de\u30c3\u30d1\u30fc\n\u2502       \u2502\n\u2502       \u2514\u2500\u2500 test/\n\u2502           \u251c\u2500\u2500 java/com/example/sms/\n\u2502           \u2502   \u251c\u2500\u2500 testsetup/         # \u30c6\u30b9\u30c8\u57fa\u76e4\u30af\u30e9\u30b9\n\u2502           \u2502   \u2502   \u2514\u2500\u2500 BaseIntegrationTest.java\n\u2502           \u2502   \u251c\u2500\u2500 domain/            # \u30c9\u30e1\u30a4\u30f3\u5c64\u30c6\u30b9\u30c8\n\u2502           \u2502   \u251c\u2500\u2500 application/       # \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\u30c6\u30b9\u30c8\n\u2502           \u2502   \u2514\u2500\u2500 infrastructure/    # \u30a4\u30f3\u30d5\u30e9\u5c64\u30c6\u30b9\u30c8\n\u2502           \u2502\n\u2502           \u2514\u2500\u2500 resources/\n\u2502               \u2514\u2500\u2500 application-test.yml\n\u2502\n\u251c\u2500\u2500 frontend/                          # \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\n\u2502   \u2514\u2500\u2500 src/\n\u2502       \u251c\u2500\u2500 components/                # UI \u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\n\u2502       \u251c\u2500\u2500 pages/                     # \u30da\u30fc\u30b8\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\n\u2502       \u251c\u2500\u2500 hooks/                     # \u30ab\u30b9\u30bf\u30e0\u30d5\u30c3\u30af\n\u2502       \u251c\u2500\u2500 services/                  # API \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\n\u2502       \u2514\u2500\u2500 types/                     # \u578b\u5b9a\u7fa9\n\u2502\n\u2514\u2500\u2500 docker-compose.yml                 # Docker \u69cb\u6210\n</code></pre>"},{"location":"article/techstack/#_7","title":"\u30b5\u30d6\u30b7\u30b9\u30c6\u30e0\u4e00\u89a7","text":"\u30b7\u30b9\u30c6\u30e0 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea \u8aac\u660e \u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 <code>apps/sms</code> Sales Management System \u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0 <code>apps/fas</code> Financial Accounting System \u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 <code>apps/pms</code> Production Management System"},{"location":"article/techstack/#_8","title":"\u74b0\u5883\u69cb\u7bc9","text":"<p>TDD \u3067\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\u3092\u9032\u3081\u308b\u305f\u3081\u306e\u958b\u767a\u74b0\u5883\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002\u30c6\u30b9\u30c8\u99c6\u52d5\u958b\u767a\u306e\u30b4\u30fc\u30eb\u306f \u52d5\u4f5c\u3059\u308b\u304d\u308c\u3044\u306a\u30b3\u30fc\u30c9 \u3067\u3059\u304c\u3001\u305d\u308c\u3092\u5b9f\u73fe\u3059\u308b\u305f\u3081\u306b\u306f \u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u306e\u4e09\u7a2e\u306e\u795e\u5668 \u304c\u5fc5\u8981\u3067\u3059\u3002</p> <p>\u4eca\u65e5\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u306e\u4e16\u754c\u306b\u304a\u3044\u3066\u7d76\u5bfe\u306b\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u30443\u3064\u306e\u6280\u8853\u7684\u306a\u67f1\u304c\u3042\u308a\u307e\u3059\u3002 \u4e09\u672c\u67f1\u3068\u8a00\u3063\u305f\u308a\u3001\u4e09\u7a2e\u306e\u795e\u5668\u3068\u8a00\u3063\u305f\u308a\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u305d\u308c\u3089\u306f</p> <ul> <li>\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406</li> <li>\u30c6\u30b9\u30c6\u30a3\u30f3\u30b0</li> <li>\u81ea\u52d5\u5316</li> </ul> <p>\u306e3\u3064\u3067\u3059\u3002</p>"},{"location":"article/techstack/#_9","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u4ee5\u4e0b\u306e\u30c4\u30fc\u30eb\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <ul> <li>Java 21 \u4ee5\u4e0a\uff08\u63a8\u5968\uff1aJava 25\uff09</li> <li>Gradle 8.x \u4ee5\u4e0a\uff08\u63a8\u5968\uff1aGradle Wrapper \u4f7f\u7528\uff09</li> <li>Docker &amp; Docker Compose</li> <li>Git</li> <li>Node.js 22.x \u4ee5\u4e0a</li> </ul>"},{"location":"article/techstack/#_10","title":"\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":""},{"location":"article/techstack/#1-gradle","title":"1. Gradle \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u521d\u671f\u5316","text":"<pre><code>cd apps/sms/backend\nmkdir -p src/main/java/com/example/sms\nmkdir -p src/main/resources/db/migration\nmkdir -p src/test/java/com/example/sms/testsetup\nmkdir -p src/test/resources\nmkdir -p config/checkstyle config/pmd config/spotbugs\n</code></pre>"},{"location":"article/techstack/#2-buildgradlekts","title":"2. build.gradle.kts \u306e\u8a2d\u5b9a","text":"<p><code>build.gradle.kts</code>\uff08Kotlin DSL\uff09\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f5c\u6210\u3057\u307e\u3059\u3002</p> <pre><code>plugins {\n    java\n    jacoco\n    checkstyle\n    pmd\n    id(\"org.springframework.boot\") version \"4.0.0\"\n    id(\"io.spring.dependency-management\") version \"1.1.7\"\n    id(\"com.github.spotbugs\") version \"6.0.27\"\n}\n\ngroup = \"com.example.sms\"\nversion = \"0.0.1-SNAPSHOT\"\n\njava {\n    toolchain {\n        languageVersion = JavaLanguageVersion.of(25)\n    }\n}\n\nrepositories {\n    mavenCentral()\n}\n\n// \u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\nval mybatisVersion = \"4.0.0\"\nval testcontainersVersion = \"1.20.4\"\n\ndependencies {\n    // === implementation ===\n    // Spring Boot Starters\n    implementation(\"org.springframework.boot:spring-boot-starter-web\")\n    implementation(\"org.springframework.boot:spring-boot-starter-validation\")\n    implementation(\"org.springframework.boot:spring-boot-starter-jdbc\")\n\n    // Database\n    implementation(\"org.mybatis.spring.boot:mybatis-spring-boot-starter:$mybatisVersion\")\n    implementation(\"org.springframework.boot:spring-boot-starter-flyway\")\n    implementation(\"org.flywaydb:flyway-database-postgresql\")\n\n    // === runtimeOnly ===\n    runtimeOnly(\"org.postgresql:postgresql\")\n\n    // === compileOnly ===\n    compileOnly(\"org.projectlombok:lombok\")\n\n    // === annotationProcessor ===\n    annotationProcessor(\"org.projectlombok:lombok\")\n\n    // === testImplementation ===\n    testImplementation(\"org.springframework.boot:spring-boot-starter-test\")\n    testImplementation(\"org.springframework.boot:spring-boot-testcontainers\")\n    testImplementation(\"org.mybatis.spring.boot:mybatis-spring-boot-starter-test:$mybatisVersion\")\n    testImplementation(platform(\"org.testcontainers:testcontainers-bom:$testcontainersVersion\"))\n    testImplementation(\"org.testcontainers:junit-jupiter\")\n    testImplementation(\"org.testcontainers:postgresql\")\n\n    // === testCompileOnly ===\n    testCompileOnly(\"org.projectlombok:lombok\")\n\n    // === testAnnotationProcessor ===\n    testAnnotationProcessor(\"org.projectlombok:lombok\")\n\n    // === testRuntimeOnly ===\n    testRuntimeOnly(\"org.junit.platform:junit-platform-launcher\")\n}\n\ntasks.withType&lt;Test&gt; {\n    useJUnitPlatform()\n    finalizedBy(tasks.jacocoTestReport)\n    // TestContainers \u306e\u5171\u6709\u3092\u6709\u52b9\u5316\n    jvmArgs(\"-Dtestcontainers.reuse.enable=true\")\n    // \u30c6\u30b9\u30c8\u3092\u9806\u6b21\u5b9f\u884c\uff08\u4e26\u5217\u5b9f\u884c\u3057\u306a\u3044\uff09\n    maxParallelForks = 1\n}\n\n// JaCoCo\njacoco {\n    toolVersion = \"0.8.14\" // Java 25 support\n}\n\ntasks.jacocoTestReport {\n    dependsOn(tasks.test)\n    reports {\n        xml.required = true\n        html.required = true\n    }\n    classDirectories.setFrom(\n        files(classDirectories.files.map {\n            fileTree(it) {\n                exclude(\n                    \"**/Application.class\",\n                    \"**/Application$*.class\"\n                )\n            }\n        })\n    )\n}\n\n// Checkstyle\ncheckstyle {\n    toolVersion = \"10.20.2\"\n    configFile = file(\"${rootDir}/config/checkstyle/checkstyle.xml\")\n    isIgnoreFailures = false\n}\n\n// SpotBugs (Java 25 \u5bfe\u5fdc: 4.9.7+)\nspotbugs {\n    ignoreFailures = false\n    excludeFilter = file(\"${rootDir}/config/spotbugs/exclude.xml\")\n    toolVersion = \"4.9.8\"\n}\n\ntasks.withType&lt;com.github.spotbugs.snom.SpotBugsTask&gt; {\n    reports.create(\"html\") {\n        required = true\n    }\n    reports.create(\"xml\") {\n        required = true\n    }\n}\n\n// PMD (Java 25 \u5bfe\u5fdc: 7.16.0+)\npmd {\n    toolVersion = \"7.16.0\"\n    isConsoleOutput = true\n    ruleSetFiles = files(\"${rootDir}/config/pmd/ruleset.xml\")\n    ruleSets = listOf()\n    isIgnoreFailures = false\n}\n\n// \u30ab\u30b9\u30bf\u30e0\u30bf\u30b9\u30af: TDD\u7528\u306e\u7d99\u7d9a\u7684\u30c6\u30b9\u30c8\u5b9f\u884c\ntasks.register&lt;Test&gt;(\"tdd\") {\n    description = \"Run tests in TDD mode (always executes)\"\n    group = \"verification\"\n    useJUnitPlatform()\n    testLogging {\n        events(\"passed\", \"skipped\", \"failed\")\n        exceptionFormat = org.gradle.api.tasks.testing.logging.TestExceptionFormat.FULL\n    }\n    outputs.upToDateWhen { false }\n}\n\n// \u30ab\u30b9\u30bf\u30e0\u30bf\u30b9\u30af: \u54c1\u8cea\u30c1\u30a7\u30c3\u30af\u5168\u5b9f\u884c\ntasks.register(\"qualityCheck\") {\n    description = \"Run all quality checks (Checkstyle, PMD, SpotBugs)\"\n    group = \"verification\"\n    dependsOn(\"checkstyleMain\", \"checkstyleTest\", \"pmdMain\", \"pmdTest\", \"spotbugsMain\", \"spotbugsTest\")\n}\n\n// \u30ab\u30b9\u30bf\u30e0\u30bf\u30b9\u30af: \u3059\u3079\u3066\u306e\u30c6\u30b9\u30c8\u3068\u54c1\u8cea\u30c1\u30a7\u30c3\u30af\u3092\u5b9f\u884c\ntasks.register(\"fullCheck\") {\n    description = \"Run all tests and quality checks\"\n    group = \"verification\"\n    dependsOn(\"test\", \"qualityCheck\", \"jacocoTestReport\")\n}\n</code></pre>"},{"location":"article/techstack/#3-settingsgradlekts","title":"3. settings.gradle.kts \u306e\u8a2d\u5b9a","text":"<pre><code>rootProject.name = \"sms-backend\"\n</code></pre>"},{"location":"article/techstack/#4-gradle-wrapperproperties","title":"4. gradle-wrapper.properties \u306e\u8a2d\u5b9a","text":"<pre><code>distributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-9.2.1-bin.zip\nnetworkTimeout=10000\nvalidateDistributionUrl=true\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\n</code></pre>"},{"location":"article/techstack/#5-docker-compose","title":"5. Docker Compose \u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"<p><code>docker-compose.yml</code> \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> <pre><code>services:\n  postgres:\n    image: postgres:16-alpine\n    container_name: sms-postgres\n    restart: unless-stopped\n    environment:\n      POSTGRES_USER: ${POSTGRES_USER:-postgres}\n      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD:-postgres}\n      POSTGRES_DB: ${POSTGRES_DB:-sms}\n      TZ: 'Asia/Tokyo'\n    ports:\n      - \"${POSTGRES_PORT:-5432}:5432\"\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U ${POSTGRES_USER:-postgres}\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n\nvolumes:\n  postgres_data:\n</code></pre>"},{"location":"article/techstack/#6-flyway","title":"6. Flyway \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"<p><code>src/main/resources/db/migration/V001__create_enum_types.sql</code> \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> <pre><code>-- \u5546\u54c1\u533a\u5206\nCREATE TYPE \u5546\u54c1\u533a\u5206 AS ENUM ('\u5546\u54c1', '\u88fd\u54c1', '\u30b5\u30fc\u30d3\u30b9', '\u8af8\u53e3');\n\n-- \u53d6\u5f15\u5148\u533a\u5206\nCREATE TYPE \u53d6\u5f15\u5148\u533a\u5206 AS ENUM ('\u9867\u5ba2', '\u4ed5\u5165\u5148', '\u4e21\u65b9');\n\n-- \u7a0e\u533a\u5206\nCREATE TYPE \u7a0e\u533a\u5206 AS ENUM ('\u5916\u7a0e', '\u5185\u7a0e', '\u975e\u8ab2\u7a0e');\n\n-- \u8acb\u6c42\u533a\u5206\nCREATE TYPE \u8acb\u6c42\u533a\u5206 AS ENUM ('\u90fd\u5ea6', '\u7de0\u3081');\n\n-- \u652f\u6255\u65b9\u6cd5\nCREATE TYPE \u652f\u6255\u65b9\u6cd5 AS ENUM ('\u73fe\u91d1', '\u632f\u8fbc', '\u624b\u5f62', '\u5c0f\u5207\u624b', '\u305d\u306e\u4ed6');\n</code></pre>"},{"location":"article/techstack/#7-testcontainers","title":"7. TestContainers \u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"<p>\u30c6\u30b9\u30c8\u7528\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30b3\u30f3\u30c6\u30ca\u3092\u7ba1\u7406\u3059\u308b\u57fa\u76e4\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> <p>\u307e\u305a\u3001TestContainers \u306e\u8a2d\u5b9a\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> <p><code>src/test/java/com/example/sms/TestcontainersConfiguration.java</code>:</p> <pre><code>package com.example.sms;\n\nimport org.springframework.boot.test.context.TestConfiguration;\nimport org.springframework.boot.testcontainers.service.connection.ServiceConnection;\nimport org.springframework.context.annotation.Bean;\nimport org.testcontainers.containers.PostgreSQLContainer;\nimport org.testcontainers.utility.DockerImageName;\n\n/**\n * TestContainers \u8a2d\u5b9a\u30af\u30e9\u30b9.\n * PostgreSQL \u30b3\u30f3\u30c6\u30ca\u3092 Spring Bean \u3068\u3057\u3066\u5b9a\u7fa9\u3057\u3001\n * ServiceConnection \u3067\u81ea\u52d5\u7684\u306b\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n */\n@TestConfiguration(proxyBeanMethods = false)\npublic class TestcontainersConfiguration {\n\n    @Bean\n    @ServiceConnection\n    PostgreSQLContainer&lt;?&gt; postgresContainer() {\n        return new PostgreSQLContainer&lt;&gt;(DockerImageName.parse(\"postgres:16-alpine\"));\n    }\n}\n</code></pre> <p>\u6b21\u306b\u3001\u7d71\u5408\u30c6\u30b9\u30c8\u306e\u57fa\u5e95\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> <p><code>src/test/java/com/example/sms/testsetup/BaseIntegrationTest.java</code>:</p> <pre><code>package com.example.sms.testsetup;\n\nimport com.example.sms.TestcontainersConfiguration;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.context.annotation.Import;\n\n/**\n * \u7d71\u5408\u30c6\u30b9\u30c8\u306e\u57fa\u5e95\u30af\u30e9\u30b9\u3002\n * TestContainers \u3092\u4f7f\u7528\u3057\u3066 PostgreSQL \u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3057\u3001\n * Spring Boot \u306e @ServiceConnection \u3067\u81ea\u52d5\u7684\u306b\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n * Flyway \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u81ea\u52d5\u5b9f\u884c\u3055\u308c\u308b\u3002\n */\n@SpringBootTest\n@Import(TestcontainersConfiguration.class)\n@org.springframework.test.context.ActiveProfiles(\"test\")\n@SuppressWarnings({\"PMD.AbstractClassWithoutAbstractMethod\"})\npublic abstract class BaseIntegrationTest {\n\n    /**\n     * \u7d99\u627f\u306e\u307f\u3092\u8a31\u53ef\u3059\u308b\u305f\u3081\u306e protected \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3002\n     */\n    protected BaseIntegrationTest() {\n        // TestContainers \u306e\u57fa\u5e95\u30af\u30e9\u30b9\u306e\u305f\u3081\u7a7a\u5b9f\u88c5\n    }\n}\n</code></pre> <p><code>src/test/resources/application-test.yml</code>:</p> <pre><code>spring:\n  flyway:\n    enabled: true\n    locations: classpath:db/migration\n    baseline-on-migrate: true\n\nlogging:\n  level:\n    org.flywaydb: DEBUG\n</code></pre>"},{"location":"article/techstack/#8","title":"8. \u6700\u521d\u306e\u30c6\u30b9\u30c8\uff1a\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u63a5\u7d9a\u78ba\u8a8d","text":"<p><code>src/test/java/com/example/sms/DatabaseConnectionTest.java</code>:</p> <pre><code>package com.example.sms;\n\nimport com.example.sms.testsetup.BaseIntegrationTest;\nimport org.junit.jupiter.api.DisplayName;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\n\nimport javax.sql.DataSource;\nimport java.sql.Connection;\nimport java.sql.ResultSet;\nimport java.sql.Statement;\n\nimport static org.assertj.core.api.Assertions.assertThat;\n\n@DisplayName(\"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u63a5\u7d9a\")\nclass DatabaseConnectionTest extends BaseIntegrationTest {\n\n    @Autowired\n    private DataSource dataSource;\n\n    @Test\n    @DisplayName(\"PostgreSQL\u306b\u63a5\u7d9a\u3067\u304d\u308b\")\n    void canConnectToPostgres() throws Exception {\n        try (Connection conn = dataSource.getConnection();\n             Statement stmt = conn.createStatement();\n             ResultSet rs = stmt.executeQuery(\"SELECT 1\")) {\n            assertThat(rs.next()).isTrue();\n            assertThat(rs.getInt(1)).isEqualTo(1);\n        }\n    }\n\n    @Test\n    @DisplayName(\"\u5546\u54c1\u533a\u5206ENUM\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\")\n    void productTypeEnumExists() throws Exception {\n        try (Connection conn = dataSource.getConnection();\n             Statement stmt = conn.createStatement();\n             ResultSet rs = stmt.executeQuery(\n                 \"SELECT unnest(enum_range(NULL::\u5546\u54c1\u533a\u5206))::text\")) {\n            assertThat(rs.next()).isTrue();\n            assertThat(rs.getString(1)).isEqualTo(\"\u5546\u54c1\");\n        }\n    }\n\n    @Test\n    @DisplayName(\"\u53d6\u5f15\u5148\u533a\u5206ENUM\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\")\n    void partnerTypeEnumExists() throws Exception {\n        try (Connection conn = dataSource.getConnection();\n             Statement stmt = conn.createStatement();\n             ResultSet rs = stmt.executeQuery(\n                 \"SELECT unnest(enum_range(NULL::\u53d6\u5f15\u5148\u533a\u5206))::text\")) {\n            assertThat(rs.next()).isTrue();\n            assertThat(rs.getString(1)).isEqualTo(\"\u9867\u5ba2\");\n        }\n    }\n\n    @Test\n    @DisplayName(\"\u7a0e\u533a\u5206ENUM\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\")\n    void taxTypeEnumExists() throws Exception {\n        try (Connection conn = dataSource.getConnection();\n             Statement stmt = conn.createStatement();\n             ResultSet rs = stmt.executeQuery(\n                 \"SELECT unnest(enum_range(NULL::\u7a0e\u533a\u5206))::text\")) {\n            assertThat(rs.next()).isTrue();\n            assertThat(rs.getString(1)).isEqualTo(\"\u5916\u7a0e\");\n        }\n    }\n}\n</code></pre> <p>\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> <pre><code>./gradlew test\n\nBUILD SUCCESSFUL\n</code></pre>"},{"location":"article/techstack/#_11","title":"\u30b3\u30fc\u30c9\u54c1\u8cea\u7ba1\u7406\u30c4\u30fc\u30eb\u306e\u8a2d\u5b9a","text":"<p>\u826f\u3044\u30b3\u30fc\u30c9\u3092\u66f8\u304d\u7d9a\u3051\u308b\u305f\u3081\u306b\u306f\u30b3\u30fc\u30c9\u306e\u54c1\u8cea\u3092\u7dad\u6301\u3057\u3066\u3044\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"article/techstack/#checkstyle","title":"Checkstyle \u306e\u8a2d\u5b9a","text":"<p>Checkstyle \u306f\u3001Java \u306e\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u898f\u7d04\u3092\u691c\u8a3c\u3059\u308b\u30c4\u30fc\u30eb\u3067\u3059\u3002</p> <p><code>config/checkstyle/checkstyle.xml</code> \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> <pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;!DOCTYPE module PUBLIC\n        \"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN\"\n        \"https://checkstyle.org/dtds/configuration_1_3.dtd\"&gt;\n\n&lt;module name=\"Checker\"&gt;\n    &lt;property name=\"charset\" value=\"UTF-8\"/&gt;\n    &lt;property name=\"severity\" value=\"warning\"/&gt;\n    &lt;property name=\"fileExtensions\" value=\"java, properties, xml\"/&gt;\n\n    &lt;!-- \u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba\u306e\u30c1\u30a7\u30c3\u30af --&gt;\n    &lt;module name=\"FileLength\"&gt;\n        &lt;property name=\"max\" value=\"500\"/&gt;\n    &lt;/module&gt;\n\n    &lt;!-- TreeWalker --&gt;\n    &lt;module name=\"TreeWalker\"&gt;\n        &lt;!-- \u547d\u540d\u898f\u7d04 --&gt;\n        &lt;module name=\"ConstantName\"/&gt;\n        &lt;module name=\"LocalFinalVariableName\"/&gt;\n        &lt;module name=\"LocalVariableName\"/&gt;\n        &lt;module name=\"MemberName\"/&gt;\n        &lt;module name=\"MethodName\"/&gt;\n        &lt;module name=\"PackageName\"/&gt;\n        &lt;module name=\"ParameterName\"/&gt;\n        &lt;module name=\"StaticVariableName\"/&gt;\n        &lt;module name=\"TypeName\"/&gt;\n\n        &lt;!-- \u30a4\u30f3\u30dd\u30fc\u30c8 --&gt;\n        &lt;module name=\"AvoidStarImport\"/&gt;\n        &lt;module name=\"IllegalImport\"/&gt;\n        &lt;module name=\"RedundantImport\"/&gt;\n        &lt;module name=\"UnusedImports\"/&gt;\n\n        &lt;!-- \u30b5\u30a4\u30ba\u5236\u9650 --&gt;\n        &lt;module name=\"MethodLength\"&gt;\n            &lt;property name=\"max\" value=\"150\"/&gt;\n        &lt;/module&gt;\n        &lt;module name=\"ParameterNumber\"&gt;\n            &lt;property name=\"max\" value=\"7\"/&gt;\n        &lt;/module&gt;\n\n        &lt;!-- \u7a7a\u767d --&gt;\n        &lt;module name=\"EmptyForIteratorPad\"/&gt;\n        &lt;module name=\"GenericWhitespace\"/&gt;\n        &lt;module name=\"MethodParamPad\"/&gt;\n        &lt;module name=\"NoWhitespaceAfter\"/&gt;\n        &lt;module name=\"NoWhitespaceBefore\"/&gt;\n        &lt;module name=\"OperatorWrap\"/&gt;\n        &lt;module name=\"ParenPad\"/&gt;\n        &lt;module name=\"TypecastParenPad\"/&gt;\n        &lt;module name=\"WhitespaceAfter\"/&gt;\n        &lt;module name=\"WhitespaceAround\"/&gt;\n\n        &lt;!-- \u8907\u96d1\u5ea6 --&gt;\n        &lt;module name=\"CyclomaticComplexity\"&gt;\n            &lt;property name=\"max\" value=\"10\"/&gt;\n        &lt;/module&gt;\n    &lt;/module&gt;\n&lt;/module&gt;\n</code></pre>"},{"location":"article/techstack/#pmd","title":"PMD \u306e\u8a2d\u5b9a","text":"<p>PMD \u306f\u3001Java \u306e\u30b3\u30fc\u30c9\u54c1\u8cea\u3092\u5206\u6790\u3059\u308b\u30c4\u30fc\u30eb\u3067\u3059\u3002</p> <p><code>config/pmd/ruleset.xml</code> \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> <pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;ruleset name=\"Custom Rules\"\n         xmlns=\"http://pmd.sourceforge.net/ruleset/2.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://pmd.sourceforge.net/ruleset/2.0.0\n         https://pmd.sourceforge.io/ruleset_2_0_0.xsd\"&gt;\n\n    &lt;description&gt;PMD Custom Ruleset&lt;/description&gt;\n\n    &lt;!-- \u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9 --&gt;\n    &lt;rule ref=\"category/java/bestpractices.xml\"&gt;\n        &lt;!-- \u30c6\u30b9\u30c8\u3067\u306f\u8907\u6570\u30a2\u30b5\u30fc\u30c8\u3092\u8a31\u53ef --&gt;\n        &lt;exclude name=\"UnitTestContainsTooManyAsserts\"/&gt;\n        &lt;!-- ResultSet \u306e\u30c1\u30a7\u30c3\u30af\u306f\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3067\u306f\u5fc5\u9808\u3067\u306f\u306a\u3044 --&gt;\n        &lt;exclude name=\"CheckResultSet\"/&gt;\n    &lt;/rule&gt;\n\n    &lt;!-- \u30b3\u30fc\u30c9\u30b9\u30bf\u30a4\u30eb --&gt;\n    &lt;rule ref=\"category/java/codestyle.xml\"&gt;\n        &lt;exclude name=\"AtLeastOneConstructor\"/&gt;\n        &lt;exclude name=\"OnlyOneReturn\"/&gt;\n        &lt;exclude name=\"LongVariable\"/&gt;\n        &lt;exclude name=\"ShortVariable\"/&gt;\n        &lt;!-- final \u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u5f37\u5236\u3057\u306a\u3044 --&gt;\n        &lt;exclude name=\"MethodArgumentCouldBeFinal\"/&gt;\n        &lt;!-- \u30ed\u30fc\u30ab\u30eb\u5909\u6570\u306e final \u306f\u5f37\u5236\u3057\u306a\u3044 --&gt;\n        &lt;exclude name=\"LocalVariableCouldBeFinal\"/&gt;\n        &lt;!-- \u30c7\u30d5\u30a9\u30eb\u30c8\u30a2\u30af\u30bb\u30b9\u4fee\u98fe\u5b50\u306e\u30b3\u30e1\u30f3\u30c8\u306f\u5f37\u5236\u3057\u306a\u3044 --&gt;\n        &lt;exclude name=\"CommentDefaultAccessModifier\"/&gt;\n        &lt;!-- var \u306e\u4f7f\u7528\u3092\u8a31\u53ef --&gt;\n        &lt;exclude name=\"UseExplicitTypes\"/&gt;\n    &lt;/rule&gt;\n\n    &lt;!-- \u8a2d\u8a08 --&gt;\n    &lt;rule ref=\"category/java/design.xml\"&gt;\n        &lt;exclude name=\"LawOfDemeter\"/&gt;\n        &lt;exclude name=\"LoosePackageCoupling\"/&gt;\n        &lt;!-- Spring Boot Application \u30af\u30e9\u30b9\u306f\u4f8b\u5916 --&gt;\n        &lt;exclude name=\"UseUtilityClass\"/&gt;\n        &lt;!-- \u30c7\u30fc\u30bf\u30e2\u30c7\u30eb\u306f\u30d5\u30a3\u30fc\u30eb\u30c9\u6570\u304c\u591a\u304f\u306a\u308b\u3053\u3068\u304c\u3042\u308b --&gt;\n        &lt;exclude name=\"TooManyFields\"/&gt;\n    &lt;/rule&gt;\n\n    &lt;!-- \u30de\u30eb\u30c1\u30b9\u30ec\u30c3\u30c9 --&gt;\n    &lt;rule ref=\"category/java/multithreading.xml\"/&gt;\n\n    &lt;!-- \u30a8\u30e9\u30fc\u30d7\u30ed\u30fc\u30f3 --&gt;\n    &lt;rule ref=\"category/java/errorprone.xml\"&gt;\n        &lt;!-- \u30c6\u30b9\u30c8\u3067\u6587\u5b57\u5217\u30ea\u30c6\u30e9\u30eb\u306e\u91cd\u8907\u306f\u8a31\u53ef --&gt;\n        &lt;exclude name=\"AvoidDuplicateLiterals\"/&gt;\n        &lt;!-- @TestConfiguration \u30af\u30e9\u30b9\u306f\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u3092\u6301\u305f\u306a\u3044 --&gt;\n        &lt;exclude name=\"TestClassWithoutTestCases\"/&gt;\n    &lt;/rule&gt;\n\n    &lt;!-- \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9 --&gt;\n    &lt;rule ref=\"category/java/performance.xml\"/&gt;\n&lt;/ruleset&gt;\n</code></pre>"},{"location":"article/techstack/#spotbugs","title":"SpotBugs \u306e\u8a2d\u5b9a","text":"<p><code>config/spotbugs/exclude.xml</code> \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;FindBugsFilter&gt;\n    &lt;!-- Application \u30af\u30e9\u30b9\u306e\u9664\u5916 --&gt;\n    &lt;Match&gt;\n        &lt;Class name=\"com.example.sms.Application\"/&gt;\n    &lt;/Match&gt;\n\n    &lt;!-- Lombok \u751f\u6210\u30b3\u30fc\u30c9\u306e\u9664\u5916 --&gt;\n    &lt;Match&gt;\n        &lt;Bug pattern=\"EI_EXPOSE_REP\"/&gt;\n    &lt;/Match&gt;\n    &lt;Match&gt;\n        &lt;Bug pattern=\"EI_EXPOSE_REP2\"/&gt;\n    &lt;/Match&gt;\n\n    &lt;!-- \u30c6\u30b9\u30c8\u30af\u30e9\u30b9\u306e\u9664\u5916 --&gt;\n    &lt;Match&gt;\n        &lt;Source name=\"~.*Test\\.java\"/&gt;\n    &lt;/Match&gt;\n&lt;/FindBugsFilter&gt;\n</code></pre>"},{"location":"article/techstack/#_12","title":"\u30b3\u30fc\u30c9\u54c1\u8cea\u30c1\u30a7\u30c3\u30af\u306e\u5b9f\u884c","text":"<pre><code># Checkstyle \u5b9f\u884c\n./gradlew checkstyleMain checkstyleTest\n\n# PMD \u5b9f\u884c\n./gradlew pmdMain pmdTest\n\n# SpotBugs \u5b9f\u884c\n./gradlew spotbugsMain spotbugsTest\n\n# \u3059\u3079\u3066\u306e\u54c1\u8cea\u30c1\u30a7\u30c3\u30af\u3092\u5b9f\u884c\n./gradlew check\n</code></pre>"},{"location":"article/techstack/#_13","title":"\u30c6\u30b9\u30c8\u30ab\u30d0\u30ec\u30c3\u30b8\u306e\u78ba\u8a8d","text":"<pre><code># \u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u3066\u30ab\u30d0\u30ec\u30c3\u30b8\u30ec\u30dd\u30fc\u30c8\u3092\u751f\u6210\n./gradlew test jacocoTestReport\n\n# \u30ec\u30dd\u30fc\u30c8\u306e\u8868\u793a\nopen build/reports/jacoco/test/html/index.html\n</code></pre>"},{"location":"article/techstack/#_14","title":"\u30b3\u30df\u30c3\u30c8\u524d\u306e\u54c1\u8cea\u30c1\u30a7\u30c3\u30af","text":"<p>husky + lint-staged \u306b\u3088\u308a\u3001\u30b3\u30df\u30c3\u30c8\u6642\u306b\u81ea\u52d5\u3067\u54c1\u8cea\u30c1\u30a7\u30c3\u30af\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"article/techstack/#_15","title":"\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"<p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30eb\u30fc\u30c8\u3067\u4ee5\u4e0b\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> <pre><code># \u4f9d\u5b58\u95a2\u4fc2\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nnpm install\n\n# husky \u306e\u521d\u671f\u5316\uff08\u521d\u56de\u306e\u307f\uff09\nnpx husky init\n</code></pre>"},{"location":"article/techstack/#_16","title":"\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb","text":""},{"location":"article/techstack/#packagejson","title":"package.json","text":"<p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30eb\u30fc\u30c8\u306e <code>package.json</code> \u306b\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> <pre><code>{\n  \"name\": \"practical-database-design\",\n  \"private\": true,\n  \"scripts\": {\n    \"prepare\": \"husky\"\n  },\n  \"devDependencies\": {\n    \"husky\": \"^9.1.7\",\n    \"lint-staged\": \"^15.2.11\"\n  }\n}\n</code></pre>"},{"location":"article/techstack/#lintstagedrcsmsjson","title":".lintstagedrc.sms.json","text":"<p>SMS \u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u7528\u306e lint-staged \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> <pre><code>{\n  \"apps/sms/backend/src/**/*.java\": [\n    \"bash -c 'cd apps/sms/backend &amp;&amp; ./gradlew checkstyleMain checkstyleTest pmdMain spotbugsMain --no-daemon'\"\n  ]\n}\n</code></pre>"},{"location":"article/techstack/#huskypre-commit","title":".husky/pre-commit","text":"<p><code>.husky/pre-commit</code> \u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> <pre><code>npx lint-staged --config .lintstagedrc.sms.json\n</code></pre>"},{"location":"article/techstack/#_17","title":"\u81ea\u52d5\u5b9f\u884c\u3055\u308c\u308b\u54c1\u8cea\u30c1\u30a7\u30c3\u30af","text":"<p>\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\uff08Java \u30d5\u30a1\u30a4\u30eb\u306b\u5909\u66f4\u304c\u3042\u308b\u5834\u5408\uff09:</p> \u30c4\u30fc\u30eb \u76ee\u7684 Checkstyle \u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u898f\u7d04\u306e\u691c\u8a3c PMD \u30d0\u30b0\u30d1\u30bf\u30fc\u30f3\u691c\u51fa SpotBugs \u6f5c\u5728\u30d0\u30b0\u691c\u51fa"},{"location":"article/techstack/#_18","title":"\u624b\u52d5\u3067\u306e\u54c1\u8cea\u30c1\u30a7\u30c3\u30af","text":"<pre><code>cd apps/sms/backend\n\n# \u5168\u54c1\u8cea\u30c1\u30a7\u30c3\u30af\n./gradlew qualityCheck\n\n# \u30c6\u30b9\u30c8\u306e\u307f\n./gradlew test\n\n# \u30ab\u30d0\u30ec\u30c3\u30b8\u30ec\u30dd\u30fc\u30c8\n./gradlew jacocoTestReport\n# \u7d50\u679c: build/reports/jacoco/test/html/index.html\n\n# \u3059\u3079\u3066\u306e\u30c6\u30b9\u30c8\u3068\u54c1\u8cea\u30c1\u30a7\u30c3\u30af\u3092\u5b9f\u884c\n./gradlew fullCheck\n</code></pre>"},{"location":"article/techstack/#pre-commit","title":"pre-commit \u30d5\u30c3\u30af\u304c\u5931\u6557\u3059\u308b\u5834\u5408","text":"<pre><code># \u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u306e\u30c1\u30a7\u30c3\u30af\ncd apps/sms/backend\n./gradlew qualityCheck\n\n# \u30a8\u30e9\u30fc\u3092\u78ba\u8a8d\u3057\u3066\u30b3\u30fc\u30c9\u3092\u4fee\u6b63\n# \u518d\u5ea6\u30b3\u30df\u30c3\u30c8\n</code></pre>"},{"location":"article/techstack/#_19","title":"\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0","text":""},{"location":"article/techstack/#java-25-gradle","title":"Java 25 \u3068 Gradle \u306e\u4e92\u63db\u6027","text":"<p>\u554f\u984c: Gradle Kotlin DSL \u304c Java 25 \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u306a\u3044</p> <pre><code>java.lang.IllegalArgumentException: 25.0.1\n  at org.jetbrains.kotlin.com.intellij.util.lang.JavaVersion.parse\n</code></pre> <p>\u89e3\u6c7a\u7b56: Gradle 9.2.1 \u4ee5\u4e0a\u3092\u4f7f\u7528\u3059\u308b</p> <pre><code># gradle-wrapper.properties\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-9.2.1-bin.zip\n</code></pre>"},{"location":"article/techstack/#spring-boot-400-flyway","title":"Spring Boot 4.0.0 \u306e Flyway \u81ea\u52d5\u8a2d\u5b9a","text":"<p>\u554f\u984c: Flyway \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u5b9f\u884c\u3055\u308c\u306a\u3044</p> <p>Spring Boot 4.0.0 \u3067\u306f auto-configuration \u304c\u30e2\u30b8\u30e5\u30fc\u30eb\u5316\u3055\u308c\u3001<code>flyway-core</code> \u3060\u3051\u3067\u306f\u81ea\u52d5\u8a2d\u5b9a\u3055\u308c\u307e\u305b\u3093\u3002</p> <p>\u89e3\u6c7a\u7b56: <code>spring-boot-starter-flyway</code> \u3092\u4f7f\u7528\u3059\u308b</p> <pre><code>// build.gradle.kts\ndependencies {\n    implementation(\"org.springframework.boot:spring-boot-starter-flyway\")\n    implementation(\"org.flywaydb:flyway-database-postgresql\")\n}\n</code></pre> <p>\u53c2\u8003: Spring Boot 4 Modularization</p>"},{"location":"article/techstack/#testcontainers-spring-boot-400","title":"TestContainers \u3068 Spring Boot 4.0.0","text":"<p>\u554f\u984c: <code>AutoConfigureTestDatabase</code> \u304c\u898b\u3064\u304b\u3089\u306a\u3044</p> <p>Spring Boot 4.0.0 \u3067\u306f <code>@ServiceConnection</code> \u3092\u4f7f\u7528\u3057\u305f\u81ea\u52d5\u8a2d\u5b9a\u304c\u63a8\u5968\u3055\u308c\u307e\u3059\u3002</p> <p>\u89e3\u6c7a\u7b56: <code>@TestConfiguration</code> + <code>@Import</code> \u30d1\u30bf\u30fc\u30f3\u3092\u4f7f\u7528\u3059\u308b</p> <pre><code>// TestcontainersConfiguration.java\n@TestConfiguration(proxyBeanMethods = false)\npublic class TestcontainersConfiguration {\n    @Bean\n    @ServiceConnection\n    PostgreSQLContainer&lt;?&gt; postgresContainer() {\n        return new PostgreSQLContainer&lt;&gt;(DockerImageName.parse(\"postgres:16-alpine\"));\n    }\n}\n\n// BaseIntegrationTest.java\n@SpringBootTest\n@Import(TestcontainersConfiguration.class)\npublic abstract class BaseIntegrationTest {\n    // ...\n}\n</code></pre> <p>\u3053\u306e\u30d1\u30bf\u30fc\u30f3\u3092\u4f7f\u7528\u3059\u308b\u3068\u3001\u8907\u6570\u306e\u30c6\u30b9\u30c8\u30af\u30e9\u30b9\u9593\u3067\u30b3\u30f3\u30c6\u30ca\u3092\u5171\u6709\u3067\u304d\u3001\u63a5\u7d9a\u306e\u554f\u984c\u3092\u56de\u907f\u3067\u304d\u307e\u3059\u3002</p> <p>\u6ce8\u610f: <code>~/.testcontainers.properties</code> \u306b\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3059\u308b\u3068\u3001\u30b3\u30f3\u30c6\u30ca\u306e\u518d\u5229\u7528\u304c\u6709\u52b9\u306b\u306a\u308a\u307e\u3059\u3002</p> <pre><code>testcontainers.reuse.enable=true\n</code></pre>"},{"location":"article/techstack/#pmd-7x","title":"PMD 7.x \u306e\u30eb\u30fc\u30eb\u5909\u66f4","text":"<p>\u554f\u984c: PMD 7.x \u3067\u9664\u5916\u30eb\u30fc\u30eb\u540d\u304c\u898b\u3064\u304b\u3089\u306a\u3044</p> <p>PMD 7.x \u3067\u306f\u4e00\u90e8\u306e\u30eb\u30fc\u30eb\u304c\u30ab\u30c6\u30b4\u30ea\u9593\u3067\u79fb\u52d5\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <p>\u89e3\u6c7a\u7b561: ruleset.xml \u3067\u6b63\u3057\u3044\u30ab\u30c6\u30b4\u30ea\u304b\u3089\u9664\u5916\u3059\u308b</p> <pre><code>&lt;!-- \u30b3\u30fc\u30c9\u30b9\u30bf\u30a4\u30eb --&gt;\n&lt;rule ref=\"category/java/codestyle.xml\"&gt;\n    &lt;exclude name=\"LocalVariableCouldBeFinal\"/&gt;\n    &lt;exclude name=\"UseExplicitTypes\"/&gt;\n&lt;/rule&gt;\n\n&lt;!-- \u8a2d\u8a08 --&gt;\n&lt;rule ref=\"category/java/design.xml\"&gt;\n    &lt;exclude name=\"TooManyFields\"/&gt;\n&lt;/rule&gt;\n\n&lt;!-- \u30a8\u30e9\u30fc\u30d7\u30ed\u30fc\u30f3 --&gt;\n&lt;rule ref=\"category/java/errorprone.xml\"&gt;\n    &lt;exclude name=\"AvoidDuplicateLiterals\"/&gt;\n    &lt;exclude name=\"TestClassWithoutTestCases\"/&gt;\n&lt;/rule&gt;\n</code></pre> <p>\u89e3\u6c7a\u7b562: <code>@SuppressWarnings</code> \u3067\u500b\u5225\u306b\u6291\u5236\u3059\u308b</p> <pre><code>// Lombok @Builder.Default \u3092\u4f7f\u3046\u5834\u5408\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3092\u660e\u793a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u305f\u3081\n@SuppressWarnings(\"PMD.RedundantFieldInitializer\")\npublic class Partner {\n    @Builder.Default\n    private boolean isCustomer = false;\n}\n</code></pre>"},{"location":"article/techstack/#gitignore-out","title":".gitignore \u3067\u306e <code>out</code> \u30c7\u30a3\u30ec\u30af\u30c8\u30ea","text":"<p>\u554f\u984c: <code>application/port/out</code> \u304c git \u306b\u8ffd\u8de1\u3055\u308c\u306a\u3044</p> <p>Next.js \u306e\u51fa\u529b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea <code>out</code> \u304c\u7121\u8996\u3055\u308c\u308b\u8a2d\u5b9a\u304c\u3042\u308b\u5834\u5408\u3001Java \u306e <code>port/out</code> \u3082\u7121\u8996\u3055\u308c\u307e\u3059\u3002</p> <p>\u89e3\u6c7a\u7b56: .gitignore \u3067 Java \u30bd\u30fc\u30b9\u3092\u4f8b\u5916\u306b\u3059\u308b</p> <pre><code>/out\n\n# Java source out directories should not be ignored\n!**/src/**/out/\n</code></pre>"},{"location":"article/techstack/#tdd","title":"TDD \u30a2\u30d7\u30ed\u30fc\u30c1\u306e\u5c0e\u5165","text":""},{"location":"article/techstack/#red-green-refactor","title":"Red-Green-Refactor \u30b5\u30a4\u30af\u30eb","text":"<p>TDD \u306e\u57fa\u672c\u30b5\u30a4\u30af\u30eb\u3092\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\u306b\u9069\u7528\u3057\u307e\u3059\u3002</p> <p></p> <ol> <li>Red\uff08\u5931\u6557\uff09: \u307e\u305a\u3001\u6b32\u3057\u3044\u6a5f\u80fd\u306e\u30c6\u30b9\u30c8\u3092\u66f8\u304d\u307e\u3059\u3002\u3053\u306e\u6642\u70b9\u3067\u306f\u30c6\u30fc\u30d6\u30eb\u3082\u5b9f\u88c5\u3082\u306a\u3044\u305f\u3081\u3001\u30c6\u30b9\u30c8\u306f\u5931\u6557\u3057\u307e\u3059\u3002</li> <li>Green\uff08\u6210\u529f\uff09: \u30c6\u30b9\u30c8\u3092\u901a\u3059\u305f\u3081\u306e\u6700\u5c0f\u9650\u306e\u5b9f\u88c5\uff08\u30c6\u30fc\u30d6\u30eb\u5b9a\u7fa9\u3001\u30ea\u30dd\u30b8\u30c8\u30ea\u306a\u3069\uff09\u3092\u884c\u3044\u307e\u3059\u3002</li> <li>Refactor\uff08\u6539\u5584\uff09: \u30c6\u30b9\u30c8\u304c\u901a\u3063\u305f\u72b6\u614b\u3092\u7dad\u6301\u3057\u306a\u304c\u3089\u3001\u30b3\u30fc\u30c9\u3092\u6539\u5584\u3057\u307e\u3059\u3002</li> </ol>"},{"location":"article/techstack/#tdd_1","title":"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\u3078\u306e TDD \u9069\u7528","text":"<p>\u5f93\u6765\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\u3067\u306f\u3001\u6700\u521d\u306b\u5b8c\u74a7\u306a ER \u56f3\u3092\u63cf\u3053\u3046\u3068\u3057\u307e\u3059\u3002\u3057\u304b\u3057\u3001TDD \u30a2\u30d7\u30ed\u30fc\u30c1\u3067\u306f\uff1a</p> <ol> <li>\u6700\u5c0f\u9650\u306e\u30c6\u30b9\u30c8\u304b\u3089\u59cb\u3081\u308b: \u300c\u5546\u54c1\u3092\u767b\u9332\u3067\u304d\u308b\u300d\u3068\u3044\u3046\u5358\u7d14\u306a\u30c6\u30b9\u30c8\u304b\u3089\u958b\u59cb</li> <li>\u6bb5\u968e\u7684\u306b\u62e1\u5f35: \u30c6\u30b9\u30c8\u3092\u8ffd\u52a0\u3057\u306a\u304c\u3089\u3001\u30c6\u30fc\u30d6\u30eb\u69cb\u9020\u3092\u9032\u5316\u3055\u305b\u308b</li> <li>\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u3092\u6050\u308c\u306a\u3044: \u30c6\u30b9\u30c8\u304c\u3042\u308b\u306e\u3067\u3001\u5b89\u5fc3\u3057\u3066\u69cb\u9020\u3092\u5909\u66f4\u3067\u304d\u308b</li> </ol>"},{"location":"article/techstack/#mybatis","title":"MyBatis \u3067\u306e\u65e5\u672c\u8a9e\u30ab\u30e9\u30e0\u5bfe\u5fdc","text":"<p>MyBatis \u3067\u306f\u3001\u65e5\u672c\u8a9e\u30ab\u30e9\u30e0\u540d\u3092\u305d\u306e\u307e\u307e\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002</p> <pre><code>// \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u30af\u30e9\u30b9\n@Data\npublic class \u5546\u54c1\u30de\u30b9\u30bf {\n    private Integer id;\n    private String \u5546\u54c1\u30b3\u30fc\u30c9;\n    private String \u5546\u54c1\u6b63\u5f0f\u540d;\n    private String \u5546\u54c1\u540d;\n    private String \u5546\u54c1\u540d\u30ab\u30ca;\n    private String \u5546\u54c1\u533a\u5206;\n    private String \u88fd\u54c1\u578b\u756a;\n    private BigDecimal \u8ca9\u58f2\u5358\u4fa1;\n    private BigDecimal \u4ed5\u5165\u5358\u4fa1;\n    private String \u7a0e\u533a\u5206;\n    private String \u5546\u54c1\u5206\u985e\u30b3\u30fc\u30c9;\n    private Boolean \u96d1\u533a\u5206;\n    private Boolean \u5728\u5eab\u7ba1\u7406\u5bfe\u8c61\u533a\u5206;\n    private Boolean \u5728\u5eab\u5f15\u5f53\u533a\u5206;\n    private String \u4ed5\u5165\u5148\u30b3\u30fc\u30c9;\n    private LocalDateTime \u4f5c\u6210\u65e5\u6642;\n    private String \u4f5c\u6210\u8005\u540d;\n    private LocalDateTime \u66f4\u65b0\u65e5\u6642;\n    private String \u66f4\u65b0\u8005\u540d;\n}\n</code></pre> <pre><code>// Mapper \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\n@Mapper\npublic interface \u5546\u54c1\u30de\u30b9\u30bfMapper {\n\n    @Insert(\"\"\"\n        INSERT INTO \u5546\u54c1\u30de\u30b9\u30bf (\n            \u5546\u54c1\u30b3\u30fc\u30c9, \u5546\u54c1\u6b63\u5f0f\u540d, \u5546\u54c1\u540d, \u5546\u54c1\u540d\u30ab\u30ca, \u5546\u54c1\u533a\u5206,\n            \u88fd\u54c1\u578b\u756a, \u8ca9\u58f2\u5358\u4fa1, \u4ed5\u5165\u5358\u4fa1, \u7a0e\u533a\u5206, \u5546\u54c1\u5206\u985e\u30b3\u30fc\u30c9,\n            \u96d1\u533a\u5206, \u5728\u5eab\u7ba1\u7406\u5bfe\u8c61\u533a\u5206, \u5728\u5eab\u5f15\u5f53\u533a\u5206, \u4ed5\u5165\u5148\u30b3\u30fc\u30c9,\n            \u4f5c\u6210\u8005\u540d, \u66f4\u65b0\u8005\u540d\n        ) VALUES (\n            #{\u5546\u54c1\u30b3\u30fc\u30c9}, #{\u5546\u54c1\u6b63\u5f0f\u540d}, #{\u5546\u54c1\u540d}, #{\u5546\u54c1\u540d\u30ab\u30ca}, #{\u5546\u54c1\u533a\u5206}::\u5546\u54c1\u533a\u5206,\n            #{\u88fd\u54c1\u578b\u756a}, #{\u8ca9\u58f2\u5358\u4fa1}, #{\u4ed5\u5165\u5358\u4fa1}, #{\u7a0e\u533a\u5206}::\u7a0e\u533a\u5206, #{\u5546\u54c1\u5206\u985e\u30b3\u30fc\u30c9},\n            #{\u96d1\u533a\u5206}, #{\u5728\u5eab\u7ba1\u7406\u5bfe\u8c61\u533a\u5206}, #{\u5728\u5eab\u5f15\u5f53\u533a\u5206}, #{\u4ed5\u5165\u5148\u30b3\u30fc\u30c9},\n            #{\u4f5c\u6210\u8005\u540d}, #{\u66f4\u65b0\u8005\u540d}\n        )\n        \"\"\")\n    @Options(useGeneratedKeys = true, keyProperty = \"id\")\n    void insert(\u5546\u54c1\u30de\u30b9\u30bf product);\n\n    @Select(\"SELECT * FROM \u5546\u54c1\u30de\u30b9\u30bf WHERE \u5546\u54c1\u30b3\u30fc\u30c9 = #{\u5546\u54c1\u30b3\u30fc\u30c9}\")\n    Optional&lt;\u5546\u54c1\u30de\u30b9\u30bf&gt; findBy\u5546\u54c1\u30b3\u30fc\u30c9(String \u5546\u54c1\u30b3\u30fc\u30c9);\n\n    @Delete(\"TRUNCATE TABLE \u5546\u54c1\u30de\u30b9\u30bf CASCADE\")\n    void deleteAll();\n}\n</code></pre>"},{"location":"article/techstack/#_20","title":"\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":""},{"location":"article/techstack/#1-vite","title":"1. Vite \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u521d\u671f\u5316","text":"<pre><code>cd apps/sms/frontend\nnpm create vite@latest . -- --template react-ts\nnpm install\n</code></pre>"},{"location":"article/techstack/#2","title":"2. \u8ffd\u52a0\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<pre><code>npm install axios @tanstack/react-query\nnpm install -D tailwindcss postcss autoprefixer\nnpm install -D vitest @testing-library/react @testing-library/jest-dom\nnpx tailwindcss init -p\n</code></pre>"},{"location":"article/techstack/#_21","title":"\u8d77\u52d5\u624b\u9806","text":"<pre><code># 1. Docker \u30b3\u30f3\u30c6\u30ca\u8d77\u52d5\ncd apps/sms\ndocker compose up -d\n\n# 2. \u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u8d77\u52d5\ncd backend\n./gradlew bootRun\n\n# 3. \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u8d77\u52d5\ncd frontend\nnpm run dev\n</code></pre>"},{"location":"article/workflow/","title":"\u57f7\u7b46\u30ef\u30fc\u30af\u30d5\u30ed\u30fc","text":""},{"location":"article/workflow/#_2","title":"\u6982\u8981","text":"<p>\u672c\u8a18\u4e8b\u306f <code>outline.md</code> \u306b\u5b9a\u7fa9\u3055\u308c\u305f\u69cb\u6210\u306b\u5f93\u3044\u3001\u7ae0\u3054\u3068\u306b\u57f7\u7b46\u3068\u5b9f\u88c5\u3092\u540c\u671f\u3057\u306a\u304c\u3089\u9032\u3081\u308b\u3002</p>"},{"location":"article/workflow/#_3","title":"\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u56f3","text":""},{"location":"article/workflow/#_4","title":"\u8a73\u7d30\u30d5\u30ed\u30fc","text":""},{"location":"article/workflow/#mkdocs","title":"MkDocs \u53cd\u6620\u30ef\u30fc\u30af\u30d5\u30ed\u30fc","text":""},{"location":"article/workflow/#mkdocs_1","title":"MkDocs \u66f4\u65b0\u624b\u9806","text":""},{"location":"article/workflow/#1-mkdocsyml","title":"1. mkdocs.yml \u3078\u306e\u7ae0\u8ffd\u52a0","text":"<pre><code>nav:\n  - \u5b9f\u8df5\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08:\n      - \u7b2cN\u90e8 \u30bb\u30af\u30b7\u30e7\u30f3\u540d:\n          - \u7b2cN\u7ae0 \u7ae0\u30bf\u30a4\u30c8\u30eb: article/partN/chapterNN.md\n</code></pre>"},{"location":"article/workflow/#2","title":"2. \u30ed\u30fc\u30ab\u30eb\u30d7\u30ec\u30d3\u30e5\u30fc","text":"<pre><code># \u30b5\u30fc\u30d0\u30fc\u8d77\u52d5\nmkdocs serve\n\n# \u30d6\u30e9\u30a6\u30b6\u3067\u78ba\u8a8d\n# http://localhost:8000\n</code></pre>"},{"location":"article/workflow/#3","title":"3. \u30d3\u30eb\u30c9\u30fb\u30c7\u30d7\u30ed\u30a4","text":"<pre><code># \u9759\u7684\u30b5\u30a4\u30c8\u751f\u6210\nmkdocs build\n\n# GitHub Pages \u3078\u30c7\u30d7\u30ed\u30a4\uff08\u8a2d\u5b9a\u6e08\u307f\u306e\u5834\u5408\uff09\nmkdocs gh-deploy\n</code></pre>"},{"location":"article/workflow/#mkdocs_2","title":"MkDocs \u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8","text":"<ul> <li> \u7ae0\u30d5\u30a1\u30a4\u30eb\u304c\u6b63\u3057\u3044\u30d1\u30b9\u306b\u914d\u7f6e\u3055\u308c\u3066\u3044\u308b</li> <li> mkdocs.yml \u306e nav \u306b\u7ae0\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b</li> <li> index.md \u306e\u30ea\u30f3\u30af\u304c\u6b63\u3057\u3044</li> <li> \u30ed\u30fc\u30ab\u30eb\u30d7\u30ec\u30d3\u30e5\u30fc\u3067\u8868\u793a\u78ba\u8a8d\u6e08\u307f</li> <li> PlantUML \u30c0\u30a4\u30a2\u30b0\u30e9\u30e0\u304c\u6b63\u3057\u304f\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3055\u308c\u308b</li> <li> \u5185\u90e8\u30ea\u30f3\u30af\u304c\u6b63\u5e38\u306b\u52d5\u4f5c\u3059\u308b</li> </ul>"},{"location":"article/workflow/#_5","title":"\u57f7\u7b46\u30eb\u30fc\u30eb","text":""},{"location":"article/workflow/#1","title":"1. \u7ae0\u306e\u9078\u629e","text":"<ul> <li><code>outline.md</code> \u306e\u9806\u5e8f\u306b\u5f93\u3063\u3066\u9032\u3081\u308b</li> <li>\u4f9d\u5b58\u95a2\u4fc2\u304c\u3042\u308b\u5834\u5408\u306f\u5148\u884c\u7ae0\u3092\u512a\u5148</li> </ul>"},{"location":"article/workflow/#2_1","title":"2. \u53c2\u7167\u8a18\u4e8b","text":"\u90e8 \u53c2\u7167\u5148 \u7b2c1\u90e8\uff1a\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u306e\u5168\u4f53\u50cf <code>\u6982\u8981.md</code> \u7b2c2\u90e8\uff1a\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 <code>\u8ca9\u58f2\u7ba1\u7406_2/</code> \u7b2c3\u90e8\uff1a\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0 <code>\u8ca1\u52d9\u4f1a\u8a08_2/</code> \u7b2c4\u90e8\uff1a\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 <code>\u751f\u7523\u7ba1\u7406/</code> \u7b2c5\u90e8\uff1a\u30a8\u30f3\u30bf\u30fc\u30d7\u30e9\u30a4\u30ba\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3 \u5404\u90e8\u306e\u9023\u643a\u4ed5\u69d8"},{"location":"article/workflow/#3_1","title":"3. \u57f7\u7b46\u30d5\u30a9\u30fc\u30de\u30c3\u30c8","text":"<p><pre><code># \u7b2cN\u7ae0\uff1a\u7ae0\u30bf\u30a4\u30c8\u30eb\n\n## N.1 \u30bb\u30af\u30b7\u30e7\u30f3\u30bf\u30a4\u30c8\u30eb\n\n\u672c\u6587...\n\n### \u30c0\u30a4\u30a2\u30b0\u30e9\u30e0\n\n\\&lt;img src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgaGVpZ2h0PSIxMzZweCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSIgc3R5bGU9IndpZHRoOjQwOXB4O2hlaWdodDoxMzZweDtiYWNrZ3JvdW5kOiMwMDAwMDA7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCA0MDkgMTM2IiB3aWR0aD0iNDA5cHgiIHpvb21BbmRQYW49Im1hZ25pZnkiPjxkZWZzLz48Zz48cmVjdCBmaWxsPSIjMjUxRjIxIiBoZWlnaHQ9IjEiIHN0eWxlPSJzdHJva2U6IzI1MUYyMTtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxIiB4PSIwIiB5PSIwIi8+PHRleHQgZmlsbD0iIzMzRkYwMiIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtc3R5bGU9Iml0YWxpYyIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM2LjM1OTQiIHg9IjUiIHk9IjE3Ij5QbGFudFVNTCAxLjIwMjUuMTA8L3RleHQ+PHJlY3QgZmlsbD0iIzMzRkYwMiIgaGVpZ2h0PSIyMS4yOTY5IiBzdHlsZT0ic3Ryb2tlOiMzM0ZGMDI7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTczLjI4MTMiIHg9IjUiIHk9IjI2Ljk2ODgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTcxLjI4MTMiIHg9IjYiIHk9IjQxLjk2ODgiPltGcm9tIHN0cmluZyAobGluZSAzKSBdPC90ZXh0Pjx0ZXh0IGZpbGw9IiMzM0ZGMDIiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0Ljg3NCIgeD0iNSIgeT0iNjIuMjY1NiI+JiMxNjA7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMzM0ZGMDIiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4MS40MjI5IiB4PSI1IiB5PSI3OC41NjI1Ij5Ac3RhcnR1bWw8L3RleHQ+PHRleHQgZmlsbD0iIzMzRkYwMiIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1Ljk1NTEiIHg9IjUiIHk9Ijk0Ljg1OTQiPi4uLjwvdGV4dD48dGV4dCBmaWxsPSIjMzNGRjAyIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dC1kZWNvcmF0aW9uPSJ3YXZ5IHVuZGVybGluZSIgdGV4dExlbmd0aD0iMjYuMTEzMyIgeD0iNSIgeT0iMTExLjE1NjMiPlxgYGA8L3RleHQ+PHRleHQgZmlsbD0iI0ZGMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjM5Mi4zMzUiIHg9IjkuODc0IiB5PSIxMjcuNDUzMSI+U3ludGF4IEVycm9yPyAoQXNzdW1lZCBkaWFncmFtIHR5cGU6IHNlcXVlbmNlKTwvdGV4dD48IS0tU1JDPVtxekZKdXVmOUk0Wld1YjlNTGJQbTNMOXVFZGlwNXJZYTgyU25od0dxRHVTaERReWFpd0hJR1ViblN6bFp2WnNGY3dTelJieHpUNEFsYWE4cmJudkdUb3NJX2dWaHZoek90Q2g1UFBFSU1mQU9jTERpbnNMSk45Z1JjclhLUUhTU3cwRUxqajY3WUs0aUFZeEN1TjhFU2RLQ1NMSzhTTkpvU0xOR1d4bDlIWHpjNDAwMF0tLT48L2c+PC9zdmc+\" class=\"uml\" alt=\"uml diagram\" title=\"\" /&gt;\n- \u30bf\u30b9\u30af\u9805\u76ee\u306a\u3069\u306f\u4e00\u884c\u958b\u3051\u3066\u8a18\u8ff0\u3059\u308b\n- NG\n  ```markdown\n    **\u53d7\u5165\u6761\u4ef6**:\n    - [ ] \u30ed\u30b0\u30a2\u30a6\u30c8\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u30ed\u30b0\u30a2\u30a6\u30c8\u3067\u304d\u308b\n    - [ ] \u30ed\u30b0\u30a2\u30a6\u30c8\u5f8c\u3001\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u306b\u9077\u79fb\u3059\u308b\n    - [ ] JWT \u30c8\u30fc\u30af\u30f3\u304c\u7121\u52b9\u5316\u3055\u308c\u308b\n  ```\n    - OK\n  ```markdown\n    **\u53d7\u5165\u6761\u4ef6**:\n\n    - [ ] \u30ed\u30b0\u30a2\u30a6\u30c8\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u30ed\u30b0\u30a2\u30a6\u30c8\u3067\u304d\u308b\n    - [ ] \u30ed\u30b0\u30a2\u30a6\u30c8\u5f8c\u3001\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u306b\u9077\u79fb\u3059\u308b\n    - [ ] JWT \u30c8\u30fc\u30af\u30f3\u304c\u7121\u52b9\u5316\u3055\u308c\u308b\n  ```\n\n### 4. \u5b9f\u88c5\u540c\u671f\u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8\n\n- [ ] \u30c6\u30fc\u30d6\u30eb\u5b9a\u7fa9\u304c\u57f7\u7b46\u5185\u5bb9\u3068\u4e00\u81f4\n- [ ] \u30ab\u30e9\u30e0\u540d\u30fb\u578b\u304c\u4e00\u81f4\n- [ ] \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u4e00\u81f4\n- [ ] \u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u3067\u52d5\u4f5c\u78ba\u8a8d\u6e08\u307f\n\n## \u30d5\u30a1\u30a4\u30eb\u69cb\u6210\n</code></pre> docs/article/ \u251c\u2500\u2500 index.md            # \u8a18\u4e8b\u30c8\u30c3\u30d7\u30da\u30fc\u30b8\uff08\u76ee\u6b21\uff09 \u251c\u2500\u2500 outline.md          # \u5168\u4f53\u69cb\u6210 \u251c\u2500\u2500 workflow.md         # \u672c\u30d5\u30a1\u30a4\u30eb\uff08\u57f7\u7b46\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\uff09 \u251c\u2500\u2500 part1/              # \u7b2c1\u90e8 \u2502   \u251c\u2500\u2500 chapter01.md \u2502   \u251c\u2500\u2500 chapter02.md \u2502   \u2514\u2500\u2500 chapter03.md \u251c\u2500\u2500 part2/              # \u7b2c2\u90e8 \u2502   \u251c\u2500\u2500 chapter04.md \u2502   \u2514\u2500\u2500 ... \u251c\u2500\u2500 part3/              # \u7b2c3\u90e8 \u251c\u2500\u2500 part4/              # \u7b2c4\u90e8 \u251c\u2500\u2500 part5/              # \u7b2c5\u90e8 \u2514\u2500\u2500 appendix/           # \u4ed8\u9332     \u251c\u2500\u2500 er-diagrams.md     \u251c\u2500\u2500 table-definitions.md     \u2514\u2500\u2500 glossary.md ```</p>"},{"location":"article/workflow/#_6","title":"\u9032\u6357\u7ba1\u7406","text":"\u7ae0 \u30b9\u30c6\u30fc\u30bf\u30b9 \u57f7\u7b46\u65e5 \u5b9f\u88c5\u65e5 \u540c\u671f\u78ba\u8a8d\u65e5 \u7b2c1\u7ae0 \u672a\u7740\u624b - - - \u7b2c2\u7ae0 \u672a\u7740\u624b - - - ... ... ... ... ..."},{"location":"article/part1/chapter01/","title":"\u7b2c1\u7ae0\uff1a\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u3068\u306f","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u306e\u6982\u8981\u3068\u3001\u30c9\u30e1\u30a4\u30f3\u99c6\u52d5\u8a2d\u8a08\uff08DDD\uff09\u3068\u306e\u95a2\u4fc2\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u307e\u3059\u3002</p>"},{"location":"article/part1/chapter01/#11","title":"1.1 \u30c9\u30e1\u30a4\u30f3\u99c6\u52d5\u8a2d\u8a08\u3068\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0","text":"<p>\u30c9\u30e1\u30a4\u30f3\u99c6\u52d5\u8a2d\u8a08\uff08Domain-Driven Design\u3001\u4ee5\u4e0b DDD\uff09\u306f\u3001\u8907\u96d1\u306a\u30d3\u30b8\u30cd\u30b9\u30c9\u30e1\u30a4\u30f3\u3092\u6271\u3046\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u306b\u304a\u3044\u3066\u6709\u52b9\u306a\u30a2\u30d7\u30ed\u30fc\u30c1\u3067\u3059\u3002\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u306f\u3001\u307e\u3055\u306b\u3053\u306e\u8907\u96d1\u306a\u30d3\u30b8\u30cd\u30b9\u30c9\u30e1\u30a4\u30f3\u306e\u5178\u578b\u4f8b\u3068\u3044\u3048\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part1/chapter01/#_1","title":"\u6226\u7565\u7684\u8a2d\u8a08\u3068\u6226\u8853\u7684\u8a2d\u8a08","text":"<p>DDD \u306f\u5927\u304d\u304f\u300c\u6226\u7565\u7684\u8a2d\u8a08\u300d\u3068\u300c\u6226\u8853\u7684\u8a2d\u8a08\u300d\u306e2\u3064\u306e\u30ec\u30d9\u30eb\u306b\u5206\u3051\u3089\u308c\u307e\u3059\u3002</p>"},{"location":"article/part1/chapter01/#_2","title":"\u6226\u7565\u7684\u8a2d\u8a08","text":"<p>\u6226\u7565\u7684\u8a2d\u8a08\u306f\u3001\u30d3\u30b8\u30cd\u30b9\u30c9\u30e1\u30a4\u30f3\u5168\u4f53\u3092\u4fef\u77b0\u3057\u3001\u30b7\u30b9\u30c6\u30e0\u306e\u5883\u754c\u3092\u5b9a\u7fa9\u3059\u308b\u305f\u3081\u306e\u624b\u6cd5\u3067\u3059\u3002</p> \u6982\u5ff5 \u8aac\u660e \u30c9\u30e1\u30a4\u30f3 \u30d3\u30b8\u30cd\u30b9\u306e\u554f\u984c\u9818\u57df\u5168\u4f53 \u30b5\u30d6\u30c9\u30e1\u30a4\u30f3 \u30c9\u30e1\u30a4\u30f3\u3092\u5206\u5272\u3057\u305f\u500b\u3005\u306e\u9818\u57df\uff08\u30b3\u30a2\u30fb\u30b5\u30dd\u30fc\u30c8\u30fb\u6c4e\u7528\uff09 \u5883\u754c\u4ed8\u3051\u3089\u308c\u305f\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8 \u7279\u5b9a\u306e\u30e2\u30c7\u30eb\u304c\u9069\u7528\u3055\u308c\u308b\u660e\u78ba\u306a\u5883\u754c \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30de\u30c3\u30d7 \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u9593\u306e\u95a2\u4fc2\u3092\u53ef\u8996\u5316\u3057\u305f\u3082\u306e \u30e6\u30d3\u30ad\u30bf\u30b9\u8a00\u8a9e \u30c1\u30fc\u30e0\u5168\u4f53\u3067\u5171\u6709\u3059\u308b\u5171\u901a\u8a00\u8a9e"},{"location":"article/part1/chapter01/#_3","title":"\u6226\u8853\u7684\u8a2d\u8a08","text":"<p>\u6226\u8853\u7684\u8a2d\u8a08\u306f\u3001\u5883\u754c\u4ed8\u3051\u3089\u308c\u305f\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u5185\u90e8\u306e\u30e2\u30c7\u30eb\u3092\u5b9f\u88c5\u3059\u308b\u305f\u3081\u306e\u30d1\u30bf\u30fc\u30f3\u7fa4\u3067\u3059\u3002</p> \u30d1\u30bf\u30fc\u30f3 \u8aac\u660e \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 \u8b58\u5225\u5b50\u3092\u6301\u3064\u30aa\u30d6\u30b8\u30a7\u30af\u30c8 \u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8 \u8b58\u5225\u5b50\u3092\u6301\u305f\u306a\u3044\u4e0d\u5909\u30aa\u30d6\u30b8\u30a7\u30af\u30c8 \u96c6\u7d04 \u6574\u5408\u6027\u3092\u4fdd\u3064\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u96c6\u307e\u308a \u30ea\u30dd\u30b8\u30c8\u30ea \u96c6\u7d04\u306e\u6c38\u7d9a\u5316\u3092\u62c5\u5f53 \u30c9\u30e1\u30a4\u30f3\u30b5\u30fc\u30d3\u30b9 \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306b\u5c5e\u3055\u306a\u3044\u696d\u52d9\u30ed\u30b8\u30c3\u30af"},{"location":"article/part1/chapter01/#_4","title":"\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u3078\u306e\u9069\u7528","text":"<p>\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u3092 DDD \u306e\u89b3\u70b9\u304b\u3089\u5206\u6790\u3059\u308b\u3068\u3001\u5404\u30b5\u30d6\u30b7\u30b9\u30c6\u30e0\u306f\u300c\u5883\u754c\u4ed8\u3051\u3089\u308c\u305f\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u300d\u3068\u3057\u3066\u6349\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p></p> <p>\u5404\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5206\u985e\u3067\u304d\u307e\u3059\u3002</p> \u5206\u985e \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8 \u8aac\u660e \u30b3\u30a2\u30c9\u30e1\u30a4\u30f3 \u8ca9\u58f2\u7ba1\u7406\u3001\u8ca1\u52d9\u4f1a\u8a08\u3001\u751f\u7523\u7ba1\u7406 \u4e8b\u696d\u306e\u7af6\u4e89\u512a\u4f4d\u6027\u3092\u751f\u3080\u4e2d\u6838\u9818\u57df \u30b5\u30dd\u30fc\u30c8\u30c9\u30e1\u30a4\u30f3 \u4eba\u4e8b\u3001\u5728\u5eab\u7ba1\u7406 \u30b3\u30a2\u30c9\u30e1\u30a4\u30f3\u3092\u652f\u63f4\u3059\u308b\u9818\u57df \u6c4e\u7528\u30c9\u30e1\u30a4\u30f3 \u8a8d\u8a3c\u30fb\u8a8d\u53ef \u6c4e\u7528\u7684\u306b\u5229\u7528\u53ef\u80fd\u306a\u9818\u57df"},{"location":"article/part1/chapter01/#12","title":"1.2 \u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u3092\u69cb\u6210\u3059\u308b\u30b5\u30d6\u30b7\u30b9\u30c6\u30e0","text":"<p>\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u306f\u3001\u4f01\u696d\u306e\u57fa\u5e79\u3068\u306a\u308b\u696d\u52d9\u3092\u652f\u3048\u308b\u30b7\u30b9\u30c6\u30e0\u306e\u7dcf\u79f0\u3067\u3059\u3002\u4e00\u822c\u7684\u306b\u4ee5\u4e0b\u306e4\u3064\u306e\u30b5\u30d6\u30b7\u30b9\u30c6\u30e0\u3067\u69cb\u6210\u3055\u308c\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part1/chapter01/#_5","title":"\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0","text":"<p>\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306f\u3001\u4f01\u696d\u306e\u8ca9\u58f2\u6d3b\u52d5\u3092\u7ba1\u7406\u3059\u308b\u30b7\u30b9\u30c6\u30e0\u3067\u3059\u3002\u5f97\u610f\u5148\u304b\u3089\u306e\u53d7\u6ce8\u3092\u8d77\u70b9\u306b\u3001\u51fa\u8377\u30fb\u58f2\u4e0a\u30fb\u8acb\u6c42\u30fb\u5165\u91d1\u307e\u3067\u306e\u4e00\u9023\u306e\u696d\u52d9\u30d5\u30ed\u30fc\u3092\u7ba1\u7406\u3057\u307e\u3059\u3002</p> <p>\u4e3b\u8981\u6a5f\u80fd</p> <ul> <li>\u898b\u7a4d\u7ba1\u7406\uff1a\u5f97\u610f\u5148\u3078\u306e\u898b\u7a4d\u66f8\u4f5c\u6210\u30fb\u7ba1\u7406</li> <li>\u53d7\u6ce8\u7ba1\u7406\uff1a\u53d7\u6ce8\u60c5\u5831\u306e\u767b\u9332\u30fb\u7ba1\u7406</li> <li>\u51fa\u8377\u7ba1\u7406\uff1a\u51fa\u8377\u6307\u793a\u30fb\u51fa\u8377\u5b9f\u7e3e\u306e\u7ba1\u7406</li> <li>\u58f2\u4e0a\u7ba1\u7406\uff1a\u58f2\u4e0a\u8a08\u4e0a\u30fb\u58f2\u4e0a\u5206\u6790</li> <li>\u50b5\u6a29\u7ba1\u7406\uff1a\u8acb\u6c42\u66f8\u767a\u884c\u30fb\u5165\u91d1\u6d88\u8fbc\u30fb\u6b8b\u9ad8\u7ba1\u7406</li> </ul> <p></p>"},{"location":"article/part1/chapter01/#_6","title":"\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0","text":"<p>\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306f\u3001\u4f01\u696d\u306e\u8ca1\u52d9\u72b6\u6cc1\u3092\u7ba1\u7406\u30fb\u5831\u544a\u3059\u308b\u30b7\u30b9\u30c6\u30e0\u3067\u3059\u3002\u65e5\u3005\u306e\u53d6\u5f15\u3092\u4ed5\u8a33\u3068\u3057\u3066\u8a18\u9332\u3057\u3001\u6c7a\u7b97\u51e6\u7406\u3092\u901a\u3058\u3066\u8ca1\u52d9\u8af8\u8868\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> <p>\u4e3b\u8981\u6a5f\u80fd</p> <ul> <li>\u4ed5\u8a33\u7ba1\u7406\uff1a\u65e5\u3005\u306e\u53d6\u5f15\u3092\u4ed5\u8a33\u3068\u3057\u3066\u8a18\u9332</li> <li>\u6c7a\u7b97\u51e6\u7406\uff1a\u6708\u6b21\u30fb\u5e74\u6b21\u6c7a\u7b97\u3001\u8ca1\u52d9\u8af8\u8868\u4f5c\u6210</li> <li>\u50b5\u6a29\u7ba1\u7406\uff1a\u58f2\u639b\u91d1\u30fb\u53d7\u53d6\u624b\u5f62\u306e\u7ba1\u7406</li> <li>\u50b5\u52d9\u7ba1\u7406\uff1a\u8cb7\u639b\u91d1\u30fb\u652f\u6255\u624b\u5f62\u306e\u7ba1\u7406</li> <li>\u8cc7\u7523\u7ba1\u7406\uff1a\u56fa\u5b9a\u8cc7\u7523\u306e\u7ba1\u7406\u30fb\u6e1b\u4fa1\u511f\u5374</li> </ul> <p></p>"},{"location":"article/part1/chapter01/#_7","title":"\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0","text":"<p>\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306f\u3001\u88fd\u9020\u696d\u306b\u304a\u3051\u308b\u751f\u7523\u6d3b\u52d5\u3092\u7ba1\u7406\u3059\u308b\u30b7\u30b9\u30c6\u30e0\u3067\u3059\u3002\u9700\u8981\u4e88\u6e2c\u306b\u57fa\u3065\u304f\u751f\u7523\u8a08\u753b\u306e\u7acb\u6848\u304b\u3089\u3001\u8cc7\u6750\u8abf\u9054\u3001\u88fd\u9020\u5b9f\u884c\u3001\u54c1\u8cea\u7ba1\u7406\u307e\u3067\u3092\u4e00\u8cab\u3057\u3066\u7ba1\u7406\u3057\u307e\u3059\u3002</p> <p>\u4e3b\u8981\u6a5f\u80fd</p> <ul> <li>\u751f\u7523\u8a08\u753b\uff1aMPS\uff08\u57fa\u6e96\u751f\u7523\u8a08\u753b\uff09\u30fbMRP\uff08\u8cc7\u6750\u6240\u8981\u91cf\u8a08\u753b\uff09</li> <li>\u8cfc\u8cb7\u7ba1\u7406\uff1a\u767a\u6ce8\u30fb\u5165\u8377\u30fb\u691c\u53ce</li> <li>\u5de5\u7a0b\u7ba1\u7406\uff1a\u88fd\u9020\u6307\u793a\u30fb\u88fd\u9020\u5b9f\u7e3e\u30fb\u5de5\u6570\u7ba1\u7406</li> <li>\u5728\u5eab\u7ba1\u7406\uff1a\u8cc7\u6750\u5728\u5eab\u30fb\u88fd\u54c1\u5728\u5eab\u30fb\u53d7\u6255\u7ba1\u7406</li> <li>\u54c1\u8cea\u7ba1\u7406\uff1a\u53d7\u5165\u691c\u67fb\u30fb\u51fa\u8377\u691c\u67fb\u30fb\u30c8\u30ec\u30fc\u30b5\u30d3\u30ea\u30c6\u30a3</li> <li>\u88fd\u9020\u539f\u4fa1\u7ba1\u7406\uff1a\u6a19\u6e96\u539f\u4fa1\u30fb\u5b9f\u969b\u539f\u4fa1\u30fb\u539f\u4fa1\u5dee\u7570\u5206\u6790</li> </ul> <p></p>"},{"location":"article/part1/chapter01/#_8","title":"\u4eba\u4e8b\u30b7\u30b9\u30c6\u30e0","text":"<p>\u4eba\u4e8b\u30b7\u30b9\u30c6\u30e0\u306f\u3001\u4f01\u696d\u306e\u4eba\u4e8b\u30fb\u52b4\u52d9\u7ba1\u7406\u3092\u884c\u3046\u30b7\u30b9\u30c6\u30e0\u3067\u3059\u3002\u5f93\u696d\u54e1\u60c5\u5831\u306e\u7ba1\u7406\u304b\u3089\u7d66\u4e0e\u8a08\u7b97\u3001\u52e4\u6020\u7ba1\u7406\u307e\u3067\u3092\u62c5\u5f53\u3057\u307e\u3059\u3002</p> <p>\u4e3b\u8981\u6a5f\u80fd</p> <ul> <li>\u4eba\u4e8b\u7ba1\u7406\uff1a\u5f93\u696d\u54e1\u60c5\u5831\u30fb\u7d44\u7e54\u60c5\u5831\u306e\u7ba1\u7406</li> <li>\u7d66\u4e0e\u8a08\u7b97\uff1a\u7d66\u4e0e\u30fb\u8cde\u4e0e\u8a08\u7b97\u3001\u5e74\u672b\u8abf\u6574</li> <li>\u52e4\u6020\u7ba1\u7406\uff1a\u51fa\u9000\u52e4\u30fb\u4f11\u6687\u306e\u7ba1\u7406</li> <li>\u63a1\u7528\u7ba1\u7406\uff1a\u63a1\u7528\u30d7\u30ed\u30bb\u30b9\u306e\u7ba1\u7406</li> </ul>"},{"location":"article/part1/chapter01/#_9","title":"\u307e\u3068\u3081","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u306e\u5168\u4f53\u50cf\u3068 DDD \u3068\u306e\u95a2\u4fc2\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u307e\u3057\u305f\u3002</p> <ul> <li>DDD \u306e\u6226\u7565\u7684\u8a2d\u8a08\u3092\u9069\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u3092\u8907\u6570\u306e\u5883\u754c\u4ed8\u3051\u3089\u308c\u305f\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3068\u3057\u3066\u6574\u7406\u3067\u304d\u308b</li> <li>\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u306f\u4e3b\u306b\u8ca9\u58f2\u7ba1\u7406\u30fb\u8ca1\u52d9\u4f1a\u8a08\u30fb\u751f\u7523\u7ba1\u7406\u30fb\u4eba\u4e8b\u306e4\u3064\u306e\u30b5\u30d6\u30b7\u30b9\u30c6\u30e0\u3067\u69cb\u6210\u3055\u308c\u308b</li> <li>\u5404\u30b5\u30d6\u30b7\u30b9\u30c6\u30e0\u306f\u76f8\u4e92\u306b\u9023\u643a\u3057\u3001\u4f01\u696d\u306e\u57fa\u5e79\u696d\u52d9\u3092\u652f\u3048\u308b</li> </ul> <p>\u6b21\u7ae0\u3067\u306f\u3001\u3053\u308c\u3089\u306e\u30b5\u30d6\u30b7\u30b9\u30c6\u30e0\u304c\u62c5\u3046\u696d\u52d9\u9818\u57df\u306b\u3064\u3044\u3066\u3001\u3088\u308a\u8a73\u7d30\u306b\u89e3\u8aac\u3057\u307e\u3059\u3002</p>"},{"location":"article/part1/chapter02/","title":"\u7b2c2\u7ae0\uff1a\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u306e\u696d\u52d9\u9818\u57df","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u3092\u69cb\u6210\u3059\u308b\u5404\u696d\u52d9\u9818\u57df\u306b\u3064\u3044\u3066\u8a73\u3057\u304f\u89e3\u8aac\u3057\u307e\u3059\u3002\u5404\u9818\u57df\u304c\u3069\u306e\u3088\u3046\u306a\u696d\u52d9\u3092\u62c5\u5f53\u3057\u3001\u4ed6\u306e\u9818\u57df\u3068\u3069\u306e\u3088\u3046\u306b\u9023\u643a\u3059\u308b\u304b\u3092\u7406\u89e3\u3059\u308b\u3053\u3068\u3067\u3001\u30b7\u30b9\u30c6\u30e0\u5168\u4f53\u306e\u8a2d\u8a08\u306b\u5f79\u7acb\u3066\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part1/chapter02/#21","title":"2.1 \u8ca9\u58f2\u7ba1\u7406\u9818\u57df","text":"<p>\u8ca9\u58f2\u7ba1\u7406\u9818\u57df\u306f\u3001\u4f01\u696d\u306e\u53ce\u76ca\u3092\u751f\u307f\u51fa\u3059\u4e2d\u6838\u7684\u306a\u696d\u52d9\u9818\u57df\u3067\u3059\u3002\u5f97\u610f\u5148\u304b\u3089\u306e\u6ce8\u6587\u3092\u53d7\u3051\u3001\u5546\u54c1\u3092\u51fa\u8377\u3057\u3001\u58f2\u4e0a\u3092\u8a08\u4e0a\u3059\u308b\u307e\u3067\u306e\u4e00\u9023\u306e\u30d7\u30ed\u30bb\u30b9\u3092\u7ba1\u7406\u3057\u307e\u3059\u3002</p>"},{"location":"article/part1/chapter02/#_1","title":"\u53d7\u6ce8\u30fb\u51fa\u8377\u30fb\u58f2\u4e0a","text":"<p>\u8ca9\u58f2\u7ba1\u7406\u306e\u57fa\u672c\u7684\u306a\u696d\u52d9\u30d5\u30ed\u30fc\u306f\u300c\u53d7\u6ce8\u2192\u51fa\u8377\u2192\u58f2\u4e0a\u300d\u306e\u6d41\u308c\u3067\u9032\u307f\u307e\u3059\u3002</p> <p></p> \u696d\u52d9 \u8aac\u660e \u4e3b\u306a\u30c7\u30fc\u30bf \u53d7\u6ce8 \u5f97\u610f\u5148\u304b\u3089\u306e\u6ce8\u6587\u3092\u53d7\u3051\u4ed8\u3051\u3001\u767b\u9332\u3059\u308b \u53d7\u6ce8\u30c7\u30fc\u30bf\u3001\u53d7\u6ce8\u660e\u7d30 \u51fa\u8377 \u53d7\u6ce8\u306b\u57fa\u3065\u304d\u5546\u54c1\u3092\u51fa\u8377\u3059\u308b \u51fa\u8377\u6307\u793a\u3001\u51fa\u8377\u5b9f\u7e3e \u58f2\u4e0a \u51fa\u8377\u5b8c\u4e86\u5f8c\u306b\u58f2\u4e0a\u3092\u8a08\u4e0a\u3059\u308b \u58f2\u4e0a\u30c7\u30fc\u30bf\u3001\u58f2\u4e0a\u660e\u7d30"},{"location":"article/part1/chapter02/#_2","title":"\u5f97\u610f\u5148\u3068\u306e\u95a2\u4fc2","text":"<p>\u8ca9\u58f2\u7ba1\u7406\u3067\u306f\u3001\u5f97\u610f\u5148\uff08\u9867\u5ba2\uff09\u3068\u306e\u95a2\u4fc2\u3092\u9069\u5207\u306b\u7ba1\u7406\u3059\u308b\u3053\u3068\u304c\u91cd\u8981\u3067\u3059\u3002</p> <ul> <li>\u5f97\u610f\u5148\u30de\u30b9\u30bf\uff1a\u5f97\u610f\u5148\u306e\u57fa\u672c\u60c5\u5831\uff08\u540d\u79f0\u3001\u4f4f\u6240\u3001\u9023\u7d61\u5148\u7b49\uff09</li> <li>\u53d6\u5f15\u6761\u4ef6\uff1a\u7de0\u65e5\u3001\u652f\u6255\u6761\u4ef6\u3001\u4e0e\u4fe1\u9650\u5ea6\u984d</li> <li>\u51fa\u8377\u5148\uff1a\u5546\u54c1\u306e\u5c4a\u3051\u5148\uff08\u5f97\u610f\u5148\u3068\u7570\u306a\u308b\u5834\u5408\u304c\u3042\u308b\uff09</li> <li>\u8acb\u6c42\u5148\uff1a\u8acb\u6c42\u66f8\u306e\u9001\u4ed8\u5148</li> </ul>"},{"location":"article/part1/chapter02/#22","title":"2.2 \u8cfc\u8cb7\u7ba1\u7406\u9818\u57df","text":"<p>\u8cfc\u8cb7\u7ba1\u7406\u9818\u57df\u306f\u3001\u4f01\u696d\u304c\u5fc5\u8981\u3068\u3059\u308b\u5546\u54c1\u3084\u8cc7\u6750\u3092\u4ed5\u5165\u5148\u304b\u3089\u8abf\u9054\u3059\u308b\u696d\u52d9\u3092\u7ba1\u7406\u3057\u307e\u3059\u3002</p>"},{"location":"article/part1/chapter02/#_3","title":"\u767a\u6ce8\u30fb\u5165\u8377/\u53d7\u5165\u30fb\u4ed5\u5165\uff08\u691c\u53ce\uff09","text":"<p>\u8cfc\u8cb7\u7ba1\u7406\u306e\u57fa\u672c\u7684\u306a\u696d\u52d9\u30d5\u30ed\u30fc\u306f\u300c\u767a\u6ce8\u2192\u5165\u8377\u2192\u691c\u53ce\u300d\u306e\u6d41\u308c\u3067\u9032\u307f\u307e\u3059\u3002</p> <p></p> \u696d\u52d9 \u8aac\u660e \u4e3b\u306a\u30c7\u30fc\u30bf \u767a\u6ce8 \u4ed5\u5165\u5148\u306b\u5546\u54c1\u30fb\u8cc7\u6750\u3092\u767a\u6ce8\u3059\u308b \u767a\u6ce8\u30c7\u30fc\u30bf\u3001\u767a\u6ce8\u660e\u7d30 \u5165\u8377/\u53d7\u5165 \u4ed5\u5165\u5148\u304b\u3089\u5c4a\u3044\u305f\u5546\u54c1\u3092\u53d7\u3051\u5165\u308c\u308b \u5165\u8377\u30c7\u30fc\u30bf\u3001\u5165\u8377\u660e\u7d30 \u4ed5\u5165\uff08\u691c\u53ce\uff09 \u53d7\u5165\u5f8c\u306b\u691c\u53ce\u3092\u884c\u3044\u3001\u4ed5\u5165\u3092\u8a08\u4e0a\u3059\u308b \u691c\u53ce\u30c7\u30fc\u30bf\u3001\u4ed5\u5165\u660e\u7d30"},{"location":"article/part1/chapter02/#_4","title":"\u4ed5\u5165\u5148\u30fb\u59d4\u8a17\u5148\u3068\u306e\u95a2\u4fc2","text":"<ul> <li>\u4ed5\u5165\u5148\u30de\u30b9\u30bf\uff1a\u4ed5\u5165\u5148\u306e\u57fa\u672c\u60c5\u5831\u3001\u53d6\u5f15\u6761\u4ef6</li> <li>\u59d4\u8a17\u5148\u30de\u30b9\u30bf\uff1a\u5916\u6ce8\u59d4\u8a17\u5148\u306e\u60c5\u5831\uff08\u6709\u511f\u652f\u7d66/\u7121\u511f\u652f\u7d66\u306e\u533a\u5206\uff09</li> <li>\u5358\u4fa1\u30de\u30b9\u30bf\uff1a\u54c1\u76ee\u3054\u3068\u306e\u4ed5\u5165\u5358\u4fa1\u3001\u9069\u7528\u671f\u9593</li> </ul>"},{"location":"article/part1/chapter02/#23","title":"2.3 \u5728\u5eab\u7ba1\u7406\u9818\u57df","text":"<p>\u5728\u5eab\u7ba1\u7406\u9818\u57df\u306f\u3001\u4f01\u696d\u304c\u4fdd\u6709\u3059\u308b\u5546\u54c1\u30fb\u8cc7\u6750\u306e\u5728\u5eab\u3092\u7ba1\u7406\u3059\u308b\u696d\u52d9\u9818\u57df\u3067\u3059\u3002</p>"},{"location":"article/part1/chapter02/#_5","title":"\u5728\u5eab\u306e\u53d7\u6255","text":"<p>\u5728\u5eab\u7ba1\u7406\u3067\u306f\u3001\u5165\u5eab\uff08\u53d7\uff09\u3068\u51fa\u5eab\uff08\u6255\uff09\u3092\u8a18\u9332\u3057\u3001\u73fe\u5728\u306e\u5728\u5eab\u6570\u91cf\u3092\u628a\u63e1\u3057\u307e\u3059\u3002</p> <p></p> \u53d6\u5f15\u7a2e\u5225 \u5165\u5eab\uff08\u53d7\uff09 \u51fa\u5eab\uff08\u6255\uff09 \u8ca9\u58f2\u7ba1\u7406 \u8fd4\u54c1\u53d7\u5165 \u51fa\u8377 \u8cfc\u8cb7\u7ba1\u7406 \u4ed5\u5165\u5165\u5eab \u8fd4\u54c1\u51fa\u5eab \u751f\u7523\u7ba1\u7406 \u88fd\u9020\u5b8c\u6210 \u88fd\u9020\u6255\u51fa \u5728\u5eab\u8abf\u6574 \u68da\u5378\u5897 \u68da\u5378\u6e1b"},{"location":"article/part1/chapter02/#_6","title":"\u8ca9\u58f2\u7ba1\u7406\u30fb\u8cfc\u8cb7\u7ba1\u7406\u30fb\u751f\u7523\u7ba1\u7406\u3068\u306e\u9023\u643a","text":"<p>\u5728\u5eab\u7ba1\u7406\u306f\u3001\u4ed6\u306e3\u3064\u306e\u696d\u52d9\u9818\u57df\u3068\u5bc6\u63a5\u306b\u9023\u643a\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part1/chapter02/#24","title":"2.4 \u751f\u7523\u7ba1\u7406\u9818\u57df","text":"<p>\u751f\u7523\u7ba1\u7406\u9818\u57df\u306f\u3001\u88fd\u9020\u696d\u306b\u304a\u3051\u308b\u751f\u7523\u6d3b\u52d5\u5168\u4f53\u3092\u7ba1\u7406\u3059\u308b\u696d\u52d9\u9818\u57df\u3067\u3059\u3002</p>"},{"location":"article/part1/chapter02/#_7","title":"\u751f\u7523\u8a08\u753b\u30fb\u54c1\u8cea\u7ba1\u7406\u30fb\u5de5\u7a0b\u7ba1\u7406\u30fb\u88fd\u9020\u539f\u4fa1\u7ba1\u7406","text":"\u696d\u52d9 \u8aac\u660e \u751f\u7523\u8a08\u753b \u9700\u8981\u4e88\u6e2c\u306b\u57fa\u3065\u304d\u3001\u4f55\u3092\u30fb\u3044\u3064\u30fb\u3069\u308c\u3060\u3051\u751f\u7523\u3059\u308b\u304b\u3092\u8a08\u753b \u5de5\u7a0b\u7ba1\u7406 \u88fd\u9020\u6307\u793a\u306e\u767a\u884c\u3001\u88fd\u9020\u5b9f\u7e3e\u306e\u53ce\u96c6\u3001\u5de5\u6570\u306e\u7ba1\u7406 \u54c1\u8cea\u7ba1\u7406 \u53d7\u5165\u30fb\u5de5\u7a0b\u5185\u30fb\u51fa\u8377\u306e\u5404\u6bb5\u968e\u3067\u306e\u54c1\u8cea\u691c\u67fb \u88fd\u9020\u539f\u4fa1\u7ba1\u7406 \u88fd\u54c1\u306e\u88fd\u9020\u539f\u4fa1\u3092\u8a08\u7b97\u3057\u3001\u6a19\u6e96\u539f\u4fa1\u3068\u306e\u5dee\u7570\u3092\u5206\u6790"},{"location":"article/part1/chapter02/#_8","title":"\u8cfc\u8cb7\u7ba1\u7406\u30fb\u5728\u5eab\u7ba1\u7406\u3068\u306e\u9023\u643a","text":"<p>\u751f\u7523\u7ba1\u7406\u306f\u3001\u8cc7\u6750\u306e\u8abf\u9054\uff08\u8cfc\u8cb7\u7ba1\u7406\uff09\u3068\u5728\u5eab\u7ba1\u7406\u3068\u9023\u643a\u3057\u3066\u52d5\u4f5c\u3057\u307e\u3059\u3002</p> <ul> <li>\u8cfc\u8cb7\u7ba1\u7406\u3068\u306e\u9023\u643a\uff1aMRP \u304b\u3089\u767a\u6ce8\u4f9d\u983c\u3092\u751f\u6210\u3001\u5916\u6ce8\u59d4\u8a17\u306e\u7ba1\u7406</li> <li>\u5728\u5eab\u7ba1\u7406\u3068\u306e\u9023\u643a\uff1a\u8cc7\u6750\u306e\u6255\u51fa\u3001\u88fd\u54c1\u306e\u5165\u5eab\u3001\u5728\u5eab\u72b6\u614b\u7ba1\u7406</li> </ul>"},{"location":"article/part1/chapter02/#25","title":"2.5 \u50b5\u6a29\u7ba1\u7406\u9818\u57df","text":"<p>\u50b5\u6a29\u7ba1\u7406\u9818\u57df\u306f\u3001\u8ca9\u58f2\u6d3b\u52d5\u306b\u3088\u3063\u3066\u767a\u751f\u3057\u305f\u58f2\u639b\u91d1\uff08\u50b5\u6a29\uff09\u3092\u7ba1\u7406\u3059\u308b\u696d\u52d9\u9818\u57df\u3067\u3059\u3002</p>"},{"location":"article/part1/chapter02/#_9","title":"\u8acb\u6c42\u30fb\u5165\u91d1","text":"\u696d\u52d9 \u8aac\u660e \u4e3b\u306a\u30c7\u30fc\u30bf \u8acb\u6c42 \u58f2\u4e0a\u30c7\u30fc\u30bf\u3092\u96c6\u8a08\u3057\u3001\u5f97\u610f\u5148\u306b\u8acb\u6c42\u3059\u308b \u8acb\u6c42\u30c7\u30fc\u30bf\u3001\u8acb\u6c42\u660e\u7d30 \u5165\u91d1 \u5f97\u610f\u5148\u304b\u3089\u306e\u5165\u91d1\u3092\u767b\u9332\u3057\u3001\u8acb\u6c42\u3068\u6d88\u8fbc\u3059\u308b \u5165\u91d1\u30c7\u30fc\u30bf\u3001\u6d88\u8fbc\u660e\u7d30"},{"location":"article/part1/chapter02/#_10","title":"\u8ca9\u58f2\u7ba1\u7406\u3068\u306e\u9023\u643a","text":"<ul> <li>\u58f2\u4e0a\u30c7\u30fc\u30bf\u304b\u3089\u8acb\u6c42\u30c7\u30fc\u30bf\u3092\u751f\u6210</li> <li>\u90fd\u5ea6\u8acb\u6c42\u3068\u7de0\u3081\u8acb\u6c42\u306e\u4f7f\u3044\u5206\u3051</li> <li>\u4e0e\u4fe1\u7ba1\u7406\uff08\u4e0e\u4fe1\u9650\u5ea6\u984d\u306e\u30c1\u30a7\u30c3\u30af\uff09</li> </ul>"},{"location":"article/part1/chapter02/#26","title":"2.6 \u50b5\u52d9\u7ba1\u7406\u9818\u57df","text":"<p>\u50b5\u52d9\u7ba1\u7406\u9818\u57df\u306f\u3001\u8cfc\u8cb7\u6d3b\u52d5\u306b\u3088\u3063\u3066\u767a\u751f\u3057\u305f\u8cb7\u639b\u91d1\uff08\u50b5\u52d9\uff09\u3092\u7ba1\u7406\u3059\u308b\u696d\u52d9\u9818\u57df\u3067\u3059\u3002</p>"},{"location":"article/part1/chapter02/#_11","title":"\u652f\u6255\u30fb\u51fa\u91d1","text":"\u696d\u52d9 \u8aac\u660e \u4e3b\u306a\u30c7\u30fc\u30bf \u652f\u6255\u7de0 \u4ed5\u5165\u30c7\u30fc\u30bf\u3092\u96c6\u8a08\u3057\u3001\u652f\u6255\u4e88\u5b9a\u3092\u4f5c\u6210\u3059\u308b \u652f\u6255\u4e88\u5b9a\u30c7\u30fc\u30bf \u652f\u6255 \u4ed5\u5165\u5148\u3078\u306e\u652f\u6255\u3092\u5b9f\u884c\u3059\u308b \u652f\u6255\u30c7\u30fc\u30bf\u3001\u632f\u8fbc\u30c7\u30fc\u30bf"},{"location":"article/part1/chapter02/#_12","title":"\u8cfc\u8cb7\u7ba1\u7406\u3068\u306e\u9023\u643a","text":"<ul> <li>\u691c\u53ce\u30c7\u30fc\u30bf\u304b\u3089\u8cb7\u639b\u91d1\u3092\u8a08\u4e0a</li> <li>\u652f\u6255\u6761\u4ef6\u306b\u57fa\u3065\u304f\u652f\u6255\u4e88\u5b9a\u306e\u4f5c\u6210</li> <li>\u632f\u8fbc\u30c7\u30fc\u30bf\u306e\u4f5c\u6210\u3068\u9280\u884c\u9023\u643a</li> </ul>"},{"location":"article/part1/chapter02/#27","title":"2.7 \u4f1a\u8a08\u9818\u57df","text":"<p>\u4f1a\u8a08\u9818\u57df\u306f\u3001\u4f01\u696d\u306e\u3059\u3079\u3066\u306e\u7d4c\u6e08\u6d3b\u52d5\u3092\u4ed5\u8a33\u3068\u3057\u3066\u8a18\u9332\u3057\u3001\u8ca1\u52d9\u8af8\u8868\u3092\u4f5c\u6210\u3059\u308b\u696d\u52d9\u9818\u57df\u3067\u3059\u3002</p>"},{"location":"article/part1/chapter02/#_13","title":"\u4ed5\u8a33\u30fb\u6c7a\u7b97","text":"\u696d\u52d9 \u8aac\u660e \u4ed5\u8a33 \u65e5\u3005\u306e\u53d6\u5f15\u3092\u501f\u65b9\u30fb\u8cb8\u65b9\u306b\u5206\u3051\u3066\u8a18\u9332 \u6c7a\u7b97 \u671f\u9593\u640d\u76ca\u3092\u78ba\u5b9a\u3057\u3001\u8ca1\u52d9\u8af8\u8868\u3092\u4f5c\u6210"},{"location":"article/part1/chapter02/#_14","title":"\u50b5\u6a29\u30fb\u50b5\u52d9\u30fb\u751f\u7523\u7ba1\u7406\u304b\u3089\u306e\u4ed5\u8a33\u9023\u643a","text":"<p>\u4f1a\u8a08\u9818\u57df\u306f\u3001\u4ed6\u306e\u696d\u52d9\u9818\u57df\u304b\u3089\u4ed5\u8a33\u30c7\u30fc\u30bf\u3092\u53d7\u3051\u53d6\u308a\u307e\u3059\u3002</p> <p></p> \u9023\u643a\u5143 \u4ed5\u8a33\u5185\u5bb9 \u8ca9\u58f2\u7ba1\u7406 \u58f2\u4e0a\u8a08\u4e0a\uff08\u58f2\u639b\u91d1/\u58f2\u4e0a\uff09 \u50b5\u6a29\u7ba1\u7406 \u5165\u91d1\u6d88\u8fbc\uff08\u73fe\u91d1\u9810\u91d1/\u58f2\u639b\u91d1\uff09 \u8cfc\u8cb7\u7ba1\u7406 \u4ed5\u5165\u8a08\u4e0a\uff08\u4ed5\u5165/\u8cb7\u639b\u91d1\uff09 \u50b5\u52d9\u7ba1\u7406 \u652f\u6255\u6d88\u8fbc\uff08\u8cb7\u639b\u91d1/\u73fe\u91d1\u9810\u91d1\uff09 \u751f\u7523\u7ba1\u7406 \u88fd\u9020\u539f\u4fa1\u8a08\u4e0a \u4eba\u4e8b \u7d66\u4e0e\u8a08\u4e0a\uff08\u7d66\u4e0e/\u672a\u6255\u91d1\uff09"},{"location":"article/part1/chapter02/#28","title":"2.8 \u4eba\u4e8b\u9818\u57df","text":"<p>\u4eba\u4e8b\u9818\u57df\u306f\u3001\u4f01\u696d\u306e\u5f93\u696d\u54e1\u306b\u95a2\u3059\u308b\u60c5\u5831\u3092\u7ba1\u7406\u3057\u3001\u7d66\u4e0e\u8a08\u7b97\u3092\u884c\u3046\u696d\u52d9\u9818\u57df\u3067\u3059\u3002</p>"},{"location":"article/part1/chapter02/#_15","title":"\u7d66\u4e0e\u8a08\u7b97\u30fb\u4eba\u4e8b\u7ba1\u7406","text":"\u696d\u52d9 \u8aac\u660e \u4eba\u4e8b\u7ba1\u7406 \u5f93\u696d\u54e1\u306e\u5165\u793e\u30fb\u9000\u793e\u3001\u7570\u52d5\u3001\u6607\u683c\u7b49\u3092\u7ba1\u7406 \u7d66\u4e0e\u8a08\u7b97 \u52e4\u6020\u30c7\u30fc\u30bf\u306b\u57fa\u3065\u304d\u7d66\u4e0e\u30fb\u8cde\u4e0e\u3092\u8a08\u7b97"},{"location":"article/part1/chapter02/#_16","title":"\u4f1a\u8a08\u3068\u306e\u9023\u643a","text":"<ul> <li>\u7d66\u4e0e\u30c7\u30fc\u30bf\u304b\u3089\u7d66\u4e0e\u4ed5\u8a33\u3092\u751f\u6210</li> <li>\u793e\u4f1a\u4fdd\u967a\u6599\u30fb\u7a0e\u91d1\u306e\u8a08\u4e0a</li> <li>\u672a\u6255\u7d66\u4e0e\u30fb\u9810\u308a\u91d1\u306e\u7ba1\u7406</li> </ul>"},{"location":"article/part1/chapter02/#_17","title":"\u307e\u3068\u3081","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u3092\u69cb\u6210\u3059\u308b8\u3064\u306e\u696d\u52d9\u9818\u57df\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u307e\u3057\u305f\u3002</p> \u9818\u57df \u4e3b\u306a\u696d\u52d9 \u9023\u643a\u5148 \u8ca9\u58f2\u7ba1\u7406 \u53d7\u6ce8\u30fb\u51fa\u8377\u30fb\u58f2\u4e0a \u5728\u5eab\u7ba1\u7406\u3001\u50b5\u6a29\u7ba1\u7406\u3001\u4f1a\u8a08 \u8cfc\u8cb7\u7ba1\u7406 \u767a\u6ce8\u30fb\u5165\u8377\u30fb\u691c\u53ce \u5728\u5eab\u7ba1\u7406\u3001\u50b5\u52d9\u7ba1\u7406\u3001\u4f1a\u8a08 \u5728\u5eab\u7ba1\u7406 \u5165\u51fa\u5eab\u30fb\u68da\u5378 \u8ca9\u58f2\u7ba1\u7406\u3001\u8cfc\u8cb7\u7ba1\u7406\u3001\u751f\u7523\u7ba1\u7406 \u751f\u7523\u7ba1\u7406 \u751f\u7523\u8a08\u753b\u30fb\u5de5\u7a0b\u7ba1\u7406 \u8cfc\u8cb7\u7ba1\u7406\u3001\u5728\u5eab\u7ba1\u7406\u3001\u4f1a\u8a08 \u50b5\u6a29\u7ba1\u7406 \u8acb\u6c42\u30fb\u5165\u91d1 \u8ca9\u58f2\u7ba1\u7406\u3001\u4f1a\u8a08 \u50b5\u52d9\u7ba1\u7406 \u652f\u6255\u7de0\u30fb\u652f\u6255 \u8cfc\u8cb7\u7ba1\u7406\u3001\u4f1a\u8a08 \u4f1a\u8a08 \u4ed5\u8a33\u30fb\u6c7a\u7b97 \u5168\u9818\u57df \u4eba\u4e8b \u7d66\u4e0e\u8a08\u7b97\u30fb\u4eba\u4e8b\u7ba1\u7406 \u4f1a\u8a08 <p>\u6b21\u7ae0\u3067\u306f\u3001\u3053\u308c\u3089\u306e\u696d\u52d9\u9818\u57df\u3092\u6a2a\u65ad\u3059\u308b\u696d\u52d9\u30d5\u30ed\u30fc\u306e\u5168\u4f53\u50cf\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u307e\u3059\u3002</p>"},{"location":"article/part1/chapter03/","title":"\u7b2c3\u7ae0\uff1a\u696d\u52d9\u30d5\u30ed\u30fc\u306e\u5168\u4f53\u50cf","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u3092\u69cb\u6210\u3059\u308b3\u3064\u306e\u4e3b\u8981\u30b7\u30b9\u30c6\u30e0\uff08\u8ca9\u58f2\u7ba1\u7406\u30fb\u8ca1\u52d9\u4f1a\u8a08\u30fb\u751f\u7523\u7ba1\u7406\uff09\u306e\u696d\u52d9\u30d5\u30ed\u30fc\u3092\u8a73\u3057\u304f\u89e3\u8aac\u3057\u307e\u3059\u3002\u5404\u30b7\u30b9\u30c6\u30e0\u304c\u3069\u306e\u3088\u3046\u306a\u6d41\u308c\u3067\u696d\u52d9\u3092\u51e6\u7406\u3057\u3001\u4ed6\u306e\u30b7\u30b9\u30c6\u30e0\u3068\u3069\u306e\u3088\u3046\u306b\u9023\u643a\u3059\u308b\u304b\u3092\u7406\u89e3\u3059\u308b\u3053\u3068\u3067\u3001\u30b7\u30b9\u30c6\u30e0\u8a2d\u8a08\u306e\u5168\u4f53\u50cf\u3092\u628a\u63e1\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"article/part1/chapter03/#31","title":"3.1 \u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u696d\u52d9\u30d5\u30ed\u30fc","text":"<p>\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306f\u3001\u5f97\u610f\u5148\u304b\u3089\u306e\u6ce8\u6587\u3092\u8d77\u70b9\u3068\u3057\u3066\u3001\u5546\u54c1\u306e\u51fa\u8377\u30fb\u58f2\u4e0a\u8a08\u4e0a\u30fb\u4ee3\u91d1\u56de\u53ce\u307e\u3067\u306e\u4e00\u9023\u306e\u696d\u52d9\u30d5\u30ed\u30fc\u3092\u7ba1\u7406\u3057\u307e\u3059\u3002</p>"},{"location":"article/part1/chapter03/#_1","title":"\u5168\u4f53\u30d5\u30ed\u30fc","text":""},{"location":"article/part1/chapter03/#_2","title":"\u5f97\u610f\u5148 \u2192 \u55b6\u696d\u90e8\u9580 \u2192 \u8ca9\u58f2\u7ba1\u7406","text":"<p>\u8ca9\u58f2\u7ba1\u7406\u306e\u8d77\u70b9\u306f\u3001\u5f97\u610f\u5148\u304b\u3089\u306e\u5f15\u304d\u5408\u3044\u30fb\u6ce8\u6587\u3067\u3059\u3002\u55b6\u696d\u90e8\u9580\u304c\u7a93\u53e3\u3068\u306a\u308a\u3001\u898b\u7a4d\u30fb\u53d7\u6ce8\u30fb\u51fa\u8377\u30fb\u58f2\u4e0a\u306e\u696d\u52d9\u3092\u9042\u884c\u3057\u307e\u3059\u3002</p> <p></p> \u30b9\u30c6\u30c3\u30d7 \u62c5\u5f53 \u696d\u52d9\u5185\u5bb9 \u751f\u6210\u30c7\u30fc\u30bf 1 \u5f97\u610f\u5148 \u5f15\u304d\u5408\u3044\u30fb\u898b\u7a4d\u4f9d\u983c - 2 \u55b6\u696d\u90e8\u9580 \u898b\u7a4d\u4f5c\u6210\u30fb\u63d0\u51fa \u898b\u7a4d\u30c7\u30fc\u30bf 3 \u5f97\u610f\u5148 \u6ce8\u6587 - 4 \u55b6\u696d\u90e8\u9580 \u53d7\u6ce8\u767b\u9332 \u53d7\u6ce8\u30c7\u30fc\u30bf 5 \u8ca9\u58f2\u7ba1\u7406 \u5728\u5eab\u5f15\u5f53\u30fb\u51fa\u8377\u6307\u793a \u51fa\u8377\u6307\u793a\u30c7\u30fc\u30bf 6 \u8ca9\u58f2\u7ba1\u7406 \u51fa\u8377\u51e6\u7406 \u51fa\u8377\u30c7\u30fc\u30bf 7 \u8ca9\u58f2\u7ba1\u7406 \u58f2\u4e0a\u8a08\u4e0a \u58f2\u4e0a\u30c7\u30fc\u30bf"},{"location":"article/part1/chapter03/#_3","title":"\u8ca9\u58f2\u7ba1\u7406 \u2192 \u8abf\u9054\u7ba1\u7406 / \u5728\u5eab\u7ba1\u7406 / \u50b5\u6a29\u7ba1\u7406","text":"<p>\u8ca9\u58f2\u7ba1\u7406\u306f\u3001\u53d7\u6ce8\u5f8c\u306b\u8907\u6570\u306e\u696d\u52d9\u9818\u57df\u3068\u9023\u643a\u3057\u307e\u3059\u3002</p> <p></p> \u9023\u643a\u5148 \u30c8\u30ea\u30ac\u30fc \u9023\u643a\u5185\u5bb9 \u8abf\u9054\u7ba1\u7406 \u5728\u5eab\u4e0d\u8db3 \u767a\u6ce8\u4f9d\u983c\uff08\u5546\u54c1\u306e\u88dc\u5145\uff09 \u5728\u5eab\u7ba1\u7406 \u53d7\u6ce8\u6642 \u5728\u5eab\u5f15\u5f53\uff08\u4e88\u7d04\uff09 \u5728\u5eab\u7ba1\u7406 \u51fa\u8377\u6642 \u51fa\u5eab\u51e6\u7406\uff08\u5728\u5eab\u6e1b\u5c11\uff09 \u50b5\u6a29\u7ba1\u7406 \u58f2\u4e0a\u8a08\u4e0a\u6642 \u8acb\u6c42\u30c7\u30fc\u30bf\u751f\u6210"},{"location":"article/part1/chapter03/#_4","title":"\u8abf\u9054\u7ba1\u7406 \u2192 \u4ed5\u5165\u5148 / \u5728\u5eab\u7ba1\u7406 / \u50b5\u52d9\u7ba1\u7406","text":"<p>\u8abf\u9054\u7ba1\u7406\u306f\u3001\u8ca9\u58f2\u7ba1\u7406\u304b\u3089\u306e\u767a\u6ce8\u4f9d\u983c\u3092\u53d7\u3051\u3066\u3001\u4ed5\u5165\u5148\u3078\u306e\u767a\u6ce8\u30fb\u5165\u8377\u30fb\u691c\u53ce\u3092\u884c\u3044\u307e\u3059\u3002</p> <p></p> \u9023\u643a\u5148 \u9023\u643a\u5185\u5bb9 \u4ed5\u5165\u5148 \u767a\u6ce8\u66f8\u9001\u4ed8\u3001\u7d0d\u54c1\u53d7\u9818 \u5728\u5eab\u7ba1\u7406 \u691c\u53ce\u5f8c\u306e\u5165\u5eab\u51e6\u7406 \u50b5\u52d9\u7ba1\u7406 \u4ed5\u5165\u8a08\u4e0a\u3001\u8cb7\u639b\u91d1\u7ba1\u7406"},{"location":"article/part1/chapter03/#32","title":"3.2 \u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u696d\u52d9\u30d5\u30ed\u30fc","text":"<p>\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306f\u3001\u4f01\u696d\u306e\u3059\u3079\u3066\u306e\u7d4c\u6e08\u6d3b\u52d5\u3092\u4ed5\u8a33\u3068\u3057\u3066\u8a18\u9332\u3057\u3001\u8ca1\u52d9\u8af8\u8868\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p>"},{"location":"article/part1/chapter03/#_5","title":"\u5168\u4f53\u30d5\u30ed\u30fc","text":""},{"location":"article/part1/chapter03/#_6","title":"\u4f1a\u8a08\u90e8\u9580 \u2192 \u8ca1\u52d9\u4f1a\u8a08 / \u7ba1\u7406\u4f1a\u8a08","text":"<p>\u4f1a\u8a08\u90e8\u9580\u306f\u3001\u300c\u8ca1\u52d9\u4f1a\u8a08\u300d\u3068\u300c\u7ba1\u7406\u4f1a\u8a08\u300d\u306e2\u3064\u306e\u9818\u57df\u3092\u62c5\u5f53\u3057\u307e\u3059\u3002</p> <p></p> \u533a\u5206 \u76ee\u7684 \u4e3b\u306a\u696d\u52d9 \u8ca1\u52d9\u4f1a\u8a08 \u5916\u90e8\u5831\u544a\uff08\u682a\u4e3b\u30fb\u7a0e\u52d9\u7f72\u7b49\uff09 \u4ed5\u8a33\u3001\u6c7a\u7b97\u3001\u8ca1\u52d9\u8af8\u8868\u4f5c\u6210 \u7ba1\u7406\u4f1a\u8a08 \u5185\u90e8\u610f\u601d\u6c7a\u5b9a \u7d4c\u55b6\u5206\u6790\u3001\u4e88\u7b97\u7ba1\u7406\u3001\u539f\u4fa1\u7ba1\u7406"},{"location":"article/part1/chapter03/#_7","title":"\u8ca1\u52d9\u4f1a\u8a08\uff1a\u50b5\u6a29\u30fb\u50b5\u52d9\u30fb\u624b\u5f62\u30fb\u8cc7\u7523\u30fb\u7d4c\u7406","text":"<p>\u8ca1\u52d9\u4f1a\u8a08\u306e\u5404\u696d\u52d9\u306f\u76f8\u4e92\u306b\u9023\u643a\u3057\u3001\u6700\u7d42\u7684\u306b\u7d4c\u7406\uff08\u4ed5\u8a33\u30fb\u6c7a\u7b97\uff09\u306b\u96c6\u7d04\u3055\u308c\u307e\u3059\u3002</p> <p></p> \u696d\u52d9 \u5185\u5bb9 \u751f\u6210\u3055\u308c\u308b\u4ed5\u8a33\u4f8b \u50b5\u6a29\u7ba1\u7406 \u58f2\u639b\u91d1\u306e\u8acb\u6c42\u30fb\u5165\u91d1\u7ba1\u7406 \u58f2\u639b\u91d1/\u58f2\u4e0a\u3001\u73fe\u91d1/\u58f2\u639b\u91d1 \u50b5\u52d9\u7ba1\u7406 \u8cb7\u639b\u91d1\u306e\u652f\u6255\u7ba1\u7406 \u4ed5\u5165/\u8cb7\u639b\u91d1\u3001\u8cb7\u639b\u91d1/\u73fe\u91d1 \u624b\u5f62\u7ba1\u7406 \u53d7\u53d6\u624b\u5f62\u30fb\u652f\u6255\u624b\u5f62\u306e\u7ba1\u7406 \u53d7\u53d6\u624b\u5f62/\u58f2\u639b\u91d1 \u8cc7\u7523\u7ba1\u7406 \u56fa\u5b9a\u8cc7\u7523\u306e\u7ba1\u7406\u30fb\u6e1b\u4fa1\u511f\u5374 \u6e1b\u4fa1\u511f\u5374\u8cbb/\u6e1b\u4fa1\u511f\u5374\u7d2f\u8a08\u984d \u7d4c\u7406 \u4ed5\u8a33\u5165\u529b\u30fb\u6c7a\u7b97\u51e6\u7406 \u5404\u7a2e\u6c7a\u7b97\u6574\u7406\u4ed5\u8a33"},{"location":"article/part1/chapter03/#_8","title":"\u7ba1\u7406\u4f1a\u8a08\uff1a\u7d4c\u55b6\u5206\u6790\u30fb\u640d\u76ca\u5206\u5c90\u70b9\u5206\u6790\u30fb\u6295\u8cc7\u306e\u7d4c\u6e08\u6027\u8a08\u7b97\u30fb\u30ad\u30e3\u30c3\u30b7\u30e5\u30d5\u30ed\u30fc\u8a08\u7b97","text":"<p>\u7ba1\u7406\u4f1a\u8a08\u306f\u3001\u7d4c\u55b6\u5224\u65ad\u306b\u5fc5\u8981\u306a\u60c5\u5831\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002</p> <p></p> \u5206\u6790\u624b\u6cd5 \u76ee\u7684 \u6d3b\u7528\u5834\u9762 \u7d4c\u55b6\u5206\u6790 \u4f01\u696d\u306e\u8ca1\u52d9\u72b6\u614b\u3092\u8a55\u4fa1 \u6c7a\u7b97\u5831\u544a\u3001\u7d4c\u55b6\u4f1a\u8b70 \u640d\u76ca\u5206\u5c90\u70b9\u5206\u6790 \u5229\u76ca\u304c\u51fa\u308b\u58f2\u4e0a\u9ad8\u3092\u628a\u63e1 \u8ca9\u58f2\u76ee\u6a19\u8a2d\u5b9a \u9650\u754c\u5229\u76ca\u5206\u6790 \u88fd\u54c1\u30fb\u90e8\u9580\u5225\u306e\u53ce\u76ca\u6027\u8a55\u4fa1 \u88fd\u54c1\u69cb\u6210\u306e\u6700\u9069\u5316 \u6295\u8cc7\u306e\u7d4c\u6e08\u6027\u8a08\u7b97 \u6295\u8cc7\u6848\u4ef6\u306e\u8a55\u4fa1 \u8a2d\u5099\u6295\u8cc7\u5224\u65ad \u30ad\u30e3\u30c3\u30b7\u30e5\u30d5\u30ed\u30fc\u8a08\u7b97 \u8cc7\u91d1\u7e70\u308a\u306e\u628a\u63e1 \u8cc7\u91d1\u8a08\u753b\u7b56\u5b9a"},{"location":"article/part1/chapter03/#33","title":"3.3 \u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u696d\u52d9\u30d5\u30ed\u30fc","text":"<p>\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306f\u3001\u88fd\u9020\u696d\u306b\u304a\u3051\u308b\u751f\u7523\u6d3b\u52d5\u5168\u4f53\u3092\u7ba1\u7406\u3057\u307e\u3059\u3002\u9700\u8981\u4e88\u6e2c\u306b\u57fa\u3065\u304f\u751f\u7523\u8a08\u753b\u304b\u3089\u3001\u8cc7\u6750\u8abf\u9054\u3001\u88fd\u9020\u5b9f\u884c\u3001\u54c1\u8cea\u7ba1\u7406\u307e\u3067\u3092\u4e00\u8cab\u3057\u3066\u7ba1\u7406\u3057\u307e\u3059\u3002</p>"},{"location":"article/part1/chapter03/#_9","title":"\u5168\u4f53\u30d5\u30ed\u30fc","text":""},{"location":"article/part1/chapter03/#_10","title":"\u5f97\u610f\u5148 \u2192 \u55b6\u696d\u90e8\u9580 \u2192 \u751f\u7523\u8a08\u753b","text":"<p>\u751f\u7523\u7ba1\u7406\u306e\u8d77\u70b9\u306f\u3001\u5f97\u610f\u5148\u304b\u3089\u306e\u9700\u8981\u60c5\u5831\u3067\u3059\u3002\u55b6\u696d\u90e8\u9580\u304c\u53d7\u6ce8\u60c5\u5831\u3084\u9700\u8981\u4e88\u6e2c\u3092\u751f\u7523\u8a08\u753b\u306b\u9023\u643a\u3057\u307e\u3059\u3002</p> <p></p> \u30b9\u30c6\u30c3\u30d7 \u62c5\u5f53 \u696d\u52d9\u5185\u5bb9 \u751f\u6210\u30c7\u30fc\u30bf 1 \u5f97\u610f\u5148 \u9700\u8981\u60c5\u5831\u63d0\u4f9b \u53d7\u6ce8\u30c7\u30fc\u30bf\u3001\u5185\u793a\u30c7\u30fc\u30bf 2 \u55b6\u696d\u90e8\u9580 \u8ca9\u58f2\u8a08\u753b\u4f5c\u6210 \u8ca9\u58f2\u8a08\u753b 3 \u751f\u7523\u8a08\u753b MPS \u4f5c\u6210 \u57fa\u6e96\u751f\u7523\u8a08\u753b 4 \u751f\u7523\u8a08\u753b MRP \u5b9f\u884c \u6240\u8981\u91cf\u30c7\u30fc\u30bf 5 \u751f\u7523\u8a08\u753b \u30aa\u30fc\u30c0\u30fc\u4f5c\u6210 \u8cfc\u8cb7\u30aa\u30fc\u30c0\u30fc\u3001\u88fd\u9020\u30aa\u30fc\u30c0\u30fc"},{"location":"article/part1/chapter03/#_11","title":"\u751f\u7523\u8a08\u753b \u2192 \u8cfc\u8cb7\u7ba1\u7406 / \u5de5\u7a0b\u7ba1\u7406","text":"<p>\u751f\u7523\u8a08\u753b\u304b\u3089\u751f\u6210\u3055\u308c\u305f\u30aa\u30fc\u30c0\u30fc\u306f\u3001\u8cfc\u8cb7\u7ba1\u7406\u3068\u5de5\u7a0b\u7ba1\u7406\u306b\u5c55\u958b\u3055\u308c\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part1/chapter03/#_12","title":"\u8cfc\u8cb7\u7ba1\u7406 \u2192 \u4ed5\u5165\u5148 / \u59d4\u8a17\u5148 / \u5728\u5eab\u7ba1\u7406","text":"<p>\u8cfc\u8cb7\u7ba1\u7406\u306f\u3001\u8cc7\u6750\u306e\u8abf\u9054\u3068\u5916\u6ce8\u59d4\u8a17\u3092\u62c5\u5f53\u3057\u307e\u3059\u3002</p> <p></p> \u8abf\u9054\u30d1\u30bf\u30fc\u30f3 \u8aac\u660e \u4ed5\u5165\u5148/\u59d4\u8a17\u5148 \u901a\u5e38\u767a\u6ce8 \u8cc7\u6750\u30fb\u90e8\u54c1\u3092\u4ed5\u5165\u5148\u304b\u3089\u8cfc\u5165 \u4ed5\u5165\u5148 \u6709\u511f\u652f\u7d66 \u8cc7\u6750\u3092\u6709\u511f\u3067\u59d4\u8a17\u5148\u306b\u652f\u7d66\u3057\u3001\u52a0\u5de5\u5f8c\u306b\u8cb7\u3044\u623b\u3059 \u59d4\u8a17\u5148 \u7121\u511f\u652f\u7d66 \u8cc7\u6750\u3092\u7121\u511f\u3067\u59d4\u8a17\u5148\u306b\u652f\u7d66\u3057\u3001\u52a0\u5de5\u8cc3\u306e\u307f\u652f\u6255\u3046 \u59d4\u8a17\u5148"},{"location":"article/part1/chapter03/#_13","title":"\u5de5\u7a0b\u7ba1\u7406 \u2192 \u5728\u5eab\u7ba1\u7406 / \u88fd\u9020\u539f\u4fa1\u7ba1\u7406 / \u54c1\u8cea\u7ba1\u7406","text":"<p>\u5de5\u7a0b\u7ba1\u7406\u306f\u3001\u88fd\u9020\u6307\u793a\u306e\u767a\u884c\u304b\u3089\u88fd\u9020\u5b9f\u7e3e\u306e\u53ce\u96c6\u307e\u3067\u3092\u7ba1\u7406\u3057\u3001\u8907\u6570\u306e\u9818\u57df\u3068\u9023\u643a\u3057\u307e\u3059\u3002</p> <p></p> \u9023\u643a\u5148 \u9023\u643a\u5185\u5bb9 \u5728\u5eab\u7ba1\u7406 \u8cc7\u6750\u306e\u6255\u51fa\u3001\u5b8c\u6210\u54c1\u306e\u5165\u5eab \u88fd\u9020\u539f\u4fa1\u7ba1\u7406 \u88fd\u9020\u5b9f\u7e3e\u30fb\u5de5\u6570\u5b9f\u7e3e\u304b\u3089\u306e\u539f\u4fa1\u8a08\u7b97 \u54c1\u8cea\u7ba1\u7406 \u5de5\u7a0b\u5185\u691c\u67fb\u3001\u5b8c\u6210\u691c\u67fb"},{"location":"article/part1/chapter03/#_14","title":"\u57fa\u6e96\u60c5\u5831\u3068\u306e\u9023\u643a","text":"<p>\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306f\u3001\u5404\u7a2e\u30de\u30b9\u30bf\uff08\u57fa\u6e96\u60c5\u5831\uff09\u3092\u53c2\u7167\u3057\u3066\u52d5\u4f5c\u3057\u307e\u3059\u3002</p> <p></p> \u57fa\u6e96\u60c5\u5831 \u7528\u9014 BOM\uff08\u90e8\u54c1\u8868\uff09 \u88fd\u54c1\u306e\u69cb\u6210\u90e8\u54c1\u3068\u6240\u8981\u91cf\u3092\u5b9a\u7fa9 \u54c1\u76ee\u30de\u30b9\u30bf \u54c1\u76ee\u306e\u57fa\u672c\u60c5\u5831\uff08\u30ea\u30fc\u30c9\u30bf\u30a4\u30e0\u3001\u30ed\u30c3\u30c8\u30b5\u30a4\u30ba\u7b49\uff09 \u5de5\u7a0b\u30de\u30b9\u30bf \u88fd\u9020\u5de5\u7a0b\u306e\u5b9a\u7fa9 \u53d6\u5f15\u5148\u30de\u30b9\u30bf \u4ed5\u5165\u5148\u30fb\u59d4\u8a17\u5148\u306e\u60c5\u5831 \u90e8\u9580\u30de\u30b9\u30bf \u88fd\u9020\u90e8\u9580\u306e\u60c5\u5831 \u62c5\u5f53\u8005\u30de\u30b9\u30bf \u4f5c\u696d\u62c5\u5f53\u8005\u306e\u60c5\u5831 \u30ab\u30ec\u30f3\u30c0\u30fc \u7a3c\u50cd\u65e5\u30fb\u7a3c\u50cd\u6642\u9593\u306e\u5b9a\u7fa9 \u5834\u6240\u30de\u30b9\u30bf \u5009\u5eab\u30fb\u5de5\u7a0b\u306e\u5834\u6240\u60c5\u5831"},{"location":"article/part1/chapter03/#_15","title":"\u307e\u3068\u3081","text":"<p>\u672c\u7ae0\u3067\u306f\u30013\u3064\u306e\u4e3b\u8981\u30b7\u30b9\u30c6\u30e0\u306e\u696d\u52d9\u30d5\u30ed\u30fc\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u307e\u3057\u305f\u3002</p> \u30b7\u30b9\u30c6\u30e0 \u8d77\u70b9 \u4e3b\u8981\u30d5\u30ed\u30fc \u9023\u643a\u5148 \u8ca9\u58f2\u7ba1\u7406 \u5f97\u610f\u5148\u306e\u6ce8\u6587 \u53d7\u6ce8\u2192\u51fa\u8377\u2192\u58f2\u4e0a\u2192\u8acb\u6c42\u2192\u5165\u91d1 \u8abf\u9054\u7ba1\u7406\u3001\u5728\u5eab\u7ba1\u7406\u3001\u50b5\u6a29\u7ba1\u7406 \u8ca1\u52d9\u4f1a\u8a08 \u5404\u30b7\u30b9\u30c6\u30e0\u306e\u53d6\u5f15\u30c7\u30fc\u30bf \u4ed5\u8a33\u2192\u6c7a\u7b97\u2192\u8ca1\u52d9\u8af8\u8868 \u5168\u30b7\u30b9\u30c6\u30e0 \u751f\u7523\u7ba1\u7406 \u9700\u8981\u60c5\u5831 \u751f\u7523\u8a08\u753b\u2192\u8abf\u9054/\u88fd\u9020\u2192\u5b8c\u6210 \u8cfc\u8cb7\u7ba1\u7406\u3001\u5728\u5eab\u7ba1\u7406\u3001\u54c1\u8cea\u7ba1\u7406 <p>\u3053\u308c\u3067\u7b2c1\u90e8\u300c\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u306e\u5168\u4f53\u50cf\u300d\u306e\u89e3\u8aac\u306f\u7d42\u4e86\u3067\u3059\u3002\u6b21\u306e\u7b2c2\u90e8\u304b\u3089\u306f\u3001\u5404\u30b7\u30b9\u30c6\u30e0\u306e\u8a73\u7d30\u306a\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u3066\u3044\u304d\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter04/","title":"\u7b2c4\u7ae0\uff1a\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u5168\u4f53\u50cf","text":"<p>\u672c\u7ae0\u304b\u3089\u7b2c2\u90e8\u300c\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u300d\u306e\u89e3\u8aac\u306b\u5165\u308a\u307e\u3059\u3002\u307e\u305a\u3001\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u30b9\u30b3\u30fc\u30d7\u3068\u3001\u95a2\u9023\u3059\u308b\u7d44\u7e54\u306e\u5f79\u5272\u5206\u62c5\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter04/#41","title":"4.1 \u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u30b9\u30b3\u30fc\u30d7","text":"<p>\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306f\u3001\u4f01\u696d\u306e\u8ca9\u58f2\u6d3b\u52d5\u3092\u652f\u63f4\u3059\u308b\u30b7\u30b9\u30c6\u30e0\u3067\u3059\u3002\u5f97\u610f\u5148\u304b\u3089\u306e\u5f15\u304d\u5408\u3044\u3092\u8d77\u70b9\u3068\u3057\u3066\u3001\u898b\u7a4d\u30fb\u53d7\u6ce8\u30fb\u51fa\u8377\u30fb\u58f2\u4e0a\u307e\u3067\u306e\u4e00\u9023\u306e\u696d\u52d9\u30d7\u30ed\u30bb\u30b9\u3092\u7ba1\u7406\u3057\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter04/#_1","title":"\u30b7\u30b9\u30c6\u30e0\u5168\u4f53\u50cf","text":""},{"location":"article/part2/chapter04/#_2","title":"\u898b\u7a4d","text":"<p>\u898b\u7a4d\u306f\u3001\u5f97\u610f\u5148\u304b\u3089\u306e\u5f15\u304d\u5408\u3044\u306b\u5bfe\u3057\u3066\u3001\u5546\u54c1\u306e\u4fa1\u683c\u30fb\u7d0d\u671f\u30fb\u6570\u91cf\u7b49\u306e\u6761\u4ef6\u3092\u63d0\u793a\u3059\u308b\u696d\u52d9\u3067\u3059\u3002</p> <p></p> \u9805\u76ee \u8aac\u660e \u76ee\u7684 \u5f97\u610f\u5148\u306b\u8ca9\u58f2\u6761\u4ef6\u3092\u63d0\u793a\u3057\u3001\u53d7\u6ce8\u306b\u3064\u306a\u3052\u308b \u5165\u529b \u5f15\u304d\u5408\u3044\u60c5\u5831\uff08\u5546\u54c1\u3001\u6570\u91cf\u3001\u5e0c\u671b\u7d0d\u671f\u7b49\uff09 \u51fa\u529b \u898b\u7a4d\u66f8 \u4e3b\u306a\u30c7\u30fc\u30bf \u898b\u7a4d\u30c7\u30fc\u30bf\u3001\u898b\u7a4d\u660e\u7d30\u30c7\u30fc\u30bf <p>\u898b\u7a4d\u30c7\u30fc\u30bf\u306e\u4e3b\u8981\u9805\u76ee</p> <ul> <li>\u898b\u7a4d\u756a\u53f7\u3001\u898b\u7a4d\u65e5\u3001\u6709\u52b9\u671f\u9650</li> <li>\u5f97\u610f\u5148\u30b3\u30fc\u30c9\u3001\u5f97\u610f\u5148\u540d</li> <li>\u62c5\u5f53\u8005\u3001\u62c5\u5f53\u90e8\u9580</li> <li>\u898b\u7a4d\u91d1\u984d\uff08\u7a0e\u629c\uff09\u3001\u6d88\u8cbb\u7a0e\u984d\u3001\u898b\u7a4d\u91d1\u984d\uff08\u7a0e\u8fbc\uff09</li> </ul>"},{"location":"article/part2/chapter04/#_3","title":"\u53d7\u6ce8","text":"<p>\u53d7\u6ce8\u306f\u3001\u5f97\u610f\u5148\u304b\u3089\u306e\u6ce8\u6587\u3092\u53d7\u3051\u4ed8\u3051\u3001\u793e\u5185\u3067\u51e6\u7406\u3059\u308b\u696d\u52d9\u3067\u3059\u3002</p> <p></p> \u9805\u76ee \u8aac\u660e \u76ee\u7684 \u5f97\u610f\u5148\u306e\u6ce8\u6587\u3092\u6b63\u78ba\u306b\u8a18\u9332\u3057\u3001\u51fa\u8377\u30fb\u58f2\u4e0a\u306e\u8d77\u70b9\u3068\u3059\u308b \u5165\u529b \u6ce8\u6587\u60c5\u5831\uff08\u5546\u54c1\u3001\u6570\u91cf\u3001\u5e0c\u671b\u7d0d\u671f\u3001\u7d0d\u54c1\u5148\u7b49\uff09 \u51fa\u529b \u6ce8\u6587\u8acb\u66f8\u3001\u53d7\u6ce8\u78ba\u8a8d\u66f8 \u4e3b\u306a\u30c7\u30fc\u30bf \u53d7\u6ce8\u30c7\u30fc\u30bf\u3001\u53d7\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf <p>\u53d7\u6ce8\u30c7\u30fc\u30bf\u306e\u4e3b\u8981\u9805\u76ee</p> <ul> <li>\u53d7\u6ce8\u756a\u53f7\u3001\u53d7\u6ce8\u65e5\u3001\u5e0c\u671b\u7d0d\u671f</li> <li>\u5f97\u610f\u5148\u30b3\u30fc\u30c9\u3001\u7d0d\u54c1\u5148\u30b3\u30fc\u30c9</li> <li>\u62c5\u5f53\u8005\u3001\u62c5\u5f53\u90e8\u9580</li> <li>\u53d7\u6ce8\u91d1\u984d\uff08\u7a0e\u629c\uff09\u3001\u6d88\u8cbb\u7a0e\u984d\u3001\u53d7\u6ce8\u91d1\u984d\uff08\u7a0e\u8fbc\uff09</li> <li>\u53d7\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\uff08\u53d7\u4ed8\u3001\u78ba\u5b9a\u3001\u51fa\u8377\u4e2d\u3001\u5b8c\u4e86\u3001\u30ad\u30e3\u30f3\u30bb\u30eb\uff09</li> </ul>"},{"location":"article/part2/chapter04/#_4","title":"\u51fa\u8377","text":"<p>\u51fa\u8377\u306f\u3001\u53d7\u6ce8\u306b\u57fa\u3065\u3044\u3066\u5546\u54c1\u3092\u5f97\u610f\u5148\u306b\u5c4a\u3051\u308b\u696d\u52d9\u3067\u3059\u3002</p> <p></p> \u9805\u76ee \u8aac\u660e \u76ee\u7684 \u53d7\u6ce8\u3057\u305f\u5546\u54c1\u3092\u6b63\u78ba\u30fb\u8fc5\u901f\u306b\u5f97\u610f\u5148\u306b\u5c4a\u3051\u308b \u5165\u529b \u53d7\u6ce8\u30c7\u30fc\u30bf\u3001\u51fa\u8377\u6307\u793a \u51fa\u529b \u51fa\u8377\u6307\u793a\u66f8\u3001\u30d4\u30c3\u30ad\u30f3\u30b0\u30ea\u30b9\u30c8\u3001\u7d0d\u54c1\u66f8 \u4e3b\u306a\u30c7\u30fc\u30bf \u51fa\u8377\u6307\u793a\u30c7\u30fc\u30bf\u3001\u51fa\u8377\u30c7\u30fc\u30bf\u3001\u51fa\u8377\u660e\u7d30\u30c7\u30fc\u30bf <p>\u51fa\u8377\u30c7\u30fc\u30bf\u306e\u4e3b\u8981\u9805\u76ee</p> <ul> <li>\u51fa\u8377\u756a\u53f7\u3001\u51fa\u8377\u65e5\u3001\u51fa\u8377\u4e88\u5b9a\u65e5</li> <li>\u53d7\u6ce8\u756a\u53f7\uff08\u7d10\u4ed8\u3051\uff09</li> <li>\u7d0d\u54c1\u5148\u30b3\u30fc\u30c9\u3001\u914d\u9001\u5148\u4f4f\u6240</li> <li>\u51fa\u8377\u30b9\u30c6\u30fc\u30bf\u30b9\uff08\u6307\u793a\u6e08\u3001\u30d4\u30c3\u30ad\u30f3\u30b0\u4e2d\u3001\u51fa\u8377\u6e08\u3001\u914d\u9001\u4e2d\u3001\u914d\u9001\u5b8c\u4e86\uff09</li> </ul>"},{"location":"article/part2/chapter04/#_5","title":"\u58f2\u4e0a","text":"<p>\u58f2\u4e0a\u306f\u3001\u5546\u54c1\u306e\u5f15\u6e21\u3057\u304c\u5b8c\u4e86\u3057\u305f\u6642\u70b9\u3067\u53ce\u76ca\u3092\u8a08\u4e0a\u3059\u308b\u696d\u52d9\u3067\u3059\u3002</p> <p></p> \u9805\u76ee \u8aac\u660e \u76ee\u7684 \u53ce\u76ca\u3092\u6b63\u78ba\u306b\u8a08\u4e0a\u3057\u3001\u8acb\u6c42\u30fb\u56de\u53ce\u306e\u8d77\u70b9\u3068\u3059\u308b \u5165\u529b \u51fa\u8377\u30c7\u30fc\u30bf\u3001\u7d0d\u54c1\u78ba\u8a8d \u51fa\u529b \u58f2\u4e0a\u4f1d\u7968\u3001\u8acb\u6c42\u30c7\u30fc\u30bf \u4e3b\u306a\u30c7\u30fc\u30bf \u58f2\u4e0a\u30c7\u30fc\u30bf\u3001\u58f2\u4e0a\u660e\u7d30\u30c7\u30fc\u30bf <p>\u58f2\u4e0a\u30c7\u30fc\u30bf\u306e\u4e3b\u8981\u9805\u76ee</p> <ul> <li>\u58f2\u4e0a\u756a\u53f7\u3001\u58f2\u4e0a\u65e5\u3001\u8a08\u4e0a\u6708</li> <li>\u53d7\u6ce8\u756a\u53f7\u3001\u51fa\u8377\u756a\u53f7\uff08\u7d10\u4ed8\u3051\uff09</li> <li>\u5f97\u610f\u5148\u30b3\u30fc\u30c9\u3001\u8acb\u6c42\u5148\u30b3\u30fc\u30c9</li> <li>\u58f2\u4e0a\u91d1\u984d\uff08\u7a0e\u629c\uff09\u3001\u6d88\u8cbb\u7a0e\u984d\u3001\u58f2\u4e0a\u91d1\u984d\uff08\u7a0e\u8fbc\uff09</li> </ul>"},{"location":"article/part2/chapter04/#_6","title":"\u696d\u52d9\u9593\u306e\u95a2\u9023","text":"<p>\u898b\u7a4d\u30fb\u53d7\u6ce8\u30fb\u51fa\u8377\u30fb\u58f2\u4e0a\u306e\u5404\u696d\u52d9\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u95a2\u9023\u3057\u3066\u3044\u307e\u3059\u3002</p> <p></p> \u95a2\u9023 \u30ab\u30fc\u30c7\u30a3\u30ca\u30ea\u30c6\u30a3 \u8aac\u660e \u898b\u7a4d \u2192 \u53d7\u6ce8 0..1 : 0..N \u898b\u7a4d\u306a\u3057\u3067\u53d7\u6ce8\u53ef\u80fd\u30011\u898b\u7a4d\u304b\u3089\u8907\u6570\u53d7\u6ce8\u3082\u53ef\u80fd \u53d7\u6ce8 \u2192 \u51fa\u8377 1 : 1..N \u5206\u7d0d\u306b\u3088\u308a1\u53d7\u6ce8\u304b\u3089\u8907\u6570\u51fa\u8377 \u51fa\u8377 \u2192 \u58f2\u4e0a 1..N : 1 \u51fa\u8377\u5358\u4f4d\u307e\u305f\u306f\u8907\u6570\u51fa\u8377\u307e\u3068\u3081\u3066\u58f2\u4e0a\u8a08\u4e0a"},{"location":"article/part2/chapter04/#42","title":"4.2 \u8ca9\u58f2\u7d44\u7e54\u306e\u5f79\u5272\u5206\u62c5","text":"<p>\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306b\u95a2\u308f\u308b\u7d44\u7e54\u306f\u8907\u6570\u3042\u308a\u3001\u305d\u308c\u305e\u308c\u304c\u7570\u306a\u308b\u5f79\u5272\u3092\u62c5\u3063\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter04/#_7","title":"\u7d44\u7e54\u69cb\u6210","text":""},{"location":"article/part2/chapter04/#_8","title":"\u55b6\u696d\u90e8\u9580","text":"<p>\u55b6\u696d\u90e8\u9580\u306f\u3001\u5f97\u610f\u5148\u3068\u306e\u63a5\u70b9\u3092\u6301\u3061\u3001\u8ca9\u58f2\u6d3b\u52d5\u306e\u4e2d\u5fc3\u7684\u306a\u5f79\u5272\u3092\u62c5\u3044\u307e\u3059\u3002</p> \u696d\u52d9 \u8cac\u52d9 \u4e3b\u306a\u64cd\u4f5c \u898b\u7a4d \u5f97\u610f\u5148\u3078\u306e\u4fa1\u683c\u30fb\u7d0d\u671f\u306e\u63d0\u793a \u898b\u7a4d\u4f5c\u6210\u3001\u898b\u7a4d\u66f8\u767a\u884c \u53d7\u6ce8 \u5f97\u610f\u5148\u304b\u3089\u306e\u6ce8\u6587\u53d7\u4ed8 \u53d7\u6ce8\u767b\u9332\u3001\u7d0d\u671f\u56de\u7b54 \u51fa\u8377\u6307\u793a \u5009\u5eab\u3078\u306e\u51fa\u8377\u4f9d\u983c \u51fa\u8377\u6307\u793a\u767b\u9332 \u58f2\u4e0a \u53ce\u76ca\u306e\u8a08\u4e0a \u58f2\u4e0a\u5165\u529b\u3001\u58f2\u4e0a\u78ba\u5b9a"},{"location":"article/part2/chapter04/#_9","title":"\u8abf\u9054\u90e8\u9580","text":"<p>\u8abf\u9054\u90e8\u9580\u306f\u3001\u5546\u54c1\u30fb\u8cc7\u6750\u306e\u4ed5\u5165\u308c\u3092\u62c5\u5f53\u3057\u307e\u3059\u3002</p> \u696d\u52d9 \u8cac\u52d9 \u4e3b\u306a\u64cd\u4f5c \u767a\u6ce8 \u4ed5\u5165\u5148\u3078\u306e\u6ce8\u6587 \u767a\u6ce8\u767b\u9332\u3001\u6ce8\u6587\u66f8\u767a\u884c \u4ed5\u5165 \u691c\u53ce\u30fb\u4ed5\u5165\u8a08\u4e0a \u4ed5\u5165\u5165\u529b\u3001\u4ed5\u5165\u4f1d\u7968\u767a\u884c"},{"location":"article/part2/chapter04/#_10","title":"\u5009\u5eab\u90e8\u9580","text":"<p>\u5009\u5eab\u90e8\u9580\u306f\u3001\u5546\u54c1\u30fb\u8cc7\u6750\u306e\u7269\u7406\u7684\u306a\u7ba1\u7406\u3092\u62c5\u5f53\u3057\u307e\u3059\u3002</p> \u696d\u52d9 \u8cac\u52d9 \u4e3b\u306a\u64cd\u4f5c \u5165\u8377 \u4ed5\u5165\u5148\u304b\u3089\u306e\u5546\u54c1\u53d7\u5165 \u5165\u8377\u5165\u529b\u3001\u691c\u54c1 \u30d4\u30c3\u30ad\u30f3\u30b0 \u51fa\u8377\u5546\u54c1\u306e\u53d6\u308a\u51fa\u3057 \u30d4\u30c3\u30ad\u30f3\u30b0\u4f5c\u696d \u51fa\u8377 \u5546\u54c1\u306e\u767a\u9001 \u51fa\u8377\u5165\u529b\u3001\u914d\u9001\u624b\u914d \u5728\u5eab\u7ba1\u7406 \u5728\u5eab\u6570\u91cf\u306e\u7ba1\u7406 \u68da\u5378\u3001\u5728\u5eab\u8abf\u6574"},{"location":"article/part2/chapter04/#_11","title":"\u7d4c\u7406\u90e8\u9580","text":"<p>\u7d4c\u7406\u90e8\u9580\u306f\u3001\u53d6\u5f15\u306e\u8a18\u5e33\u30fb\u8acb\u6c42\u30fb\u652f\u6255\u306e\u7ba1\u7406\u3092\u62c5\u5f53\u3057\u307e\u3059\u3002</p> \u696d\u52d9 \u8cac\u52d9 \u4e3b\u306a\u64cd\u4f5c \u7de0\u8acb\u6c42 \u58f2\u4e0a\u306e\u8acb\u6c42\u51e6\u7406 \u7de0\u51e6\u7406\u3001\u8acb\u6c42\u66f8\u767a\u884c \u652f\u6255\u7de0 \u4ed5\u5165\u306e\u652f\u6255\u51e6\u7406 \u7de0\u51e6\u7406\u3001\u652f\u6255\u4e88\u5b9a\u4f5c\u6210 \u4ed5\u8a33 \u4f1a\u8a08\u51e6\u7406 \u4ed5\u8a33\u5165\u529b\u3001\u81ea\u52d5\u4ed5\u8a33"},{"location":"article/part2/chapter04/#_12","title":"\u8ca1\u52d9\u90e8\u9580","text":"<p>\u8ca1\u52d9\u90e8\u9580\u306f\u3001\u8cc7\u91d1\u306e\u5165\u51fa\u91d1\u7ba1\u7406\u3092\u62c5\u5f53\u3057\u307e\u3059\u3002</p> \u696d\u52d9 \u8cac\u52d9 \u4e3b\u306a\u64cd\u4f5c \u5165\u91d1 \u5f97\u610f\u5148\u304b\u3089\u306e\u5165\u91d1\u51e6\u7406 \u5165\u91d1\u5165\u529b\u3001\u6d88\u8fbc\u51e6\u7406 \u652f\u6255 \u4ed5\u5165\u5148\u3078\u306e\u652f\u6255\u51e6\u7406 \u652f\u6255\u5165\u529b\u3001\u632f\u8fbc\u51e6\u7406 \u8cc7\u91d1\u7ba1\u7406 \u8cc7\u91d1\u7e70\u308a\u306e\u7ba1\u7406 \u8cc7\u91d1\u8a08\u753b\u3001\u6b8b\u9ad8\u7ba1\u7406"},{"location":"article/part2/chapter04/#_13","title":"\u696d\u52d9\u30d5\u30ed\u30fc\u3068\u5404\u90e8\u9580\u306e\u8cac\u52d9","text":"<p>\u5404\u90e8\u9580\u304c\u3069\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u696d\u52d9\u306b\u95a2\u4e0e\u3059\u308b\u304b\u3092\u3001\u5168\u4f53\u30d5\u30ed\u30fc\u3067\u793a\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter04/#_14","title":"\u90e8\u9580\u9593\u306e\u9023\u643a\u30dd\u30a4\u30f3\u30c8","text":"\u9023\u643a\u5143 \u9023\u643a\u5148 \u9023\u643a\u5185\u5bb9 \u55b6\u696d\u90e8\u9580 \u8abf\u9054\u90e8\u9580 \u5728\u5eab\u4e0d\u8db3\u6642\u306e\u767a\u6ce8\u4f9d\u983c \u55b6\u696d\u90e8\u9580 \u5009\u5eab\u90e8\u9580 \u51fa\u8377\u6307\u793a \u55b6\u696d\u90e8\u9580 \u7d4c\u7406\u90e8\u9580 \u58f2\u4e0a\u30c7\u30fc\u30bf \u8abf\u9054\u90e8\u9580 \u5009\u5eab\u90e8\u9580 \u5165\u8377\u4e88\u5b9a\u60c5\u5831 \u8abf\u9054\u90e8\u9580 \u7d4c\u7406\u90e8\u9580 \u4ed5\u5165\u30c7\u30fc\u30bf \u5009\u5eab\u90e8\u9580 \u55b6\u696d\u90e8\u9580 \u51fa\u8377\u5b8c\u4e86\u5831\u544a \u7d4c\u7406\u90e8\u9580 \u8ca1\u52d9\u90e8\u9580 \u8acb\u6c42\u30fb\u652f\u6255\u30c7\u30fc\u30bf \u8ca1\u52d9\u90e8\u9580 \u7d4c\u7406\u90e8\u9580 \u5165\u91d1\u30fb\u51fa\u91d1\u30c7\u30fc\u30bf"},{"location":"article/part2/chapter04/#43","title":"4.3 \u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":"<p>\u672c\u7bc0\u3067\u306f\u3001\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\uff08SMS: Sales Management System\uff09\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u6210\u3068\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter04/#_15","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u6210","text":"<p>\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306f <code>apps/sms</code> \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b\u306b\u69cb\u7bc9\u3057\u307e\u3059\u3002</p> <pre><code>apps/sms/\n\u251c\u2500\u2500 backend/\n\u2502   \u251c\u2500\u2500 build.gradle.kts               # Gradle \u30d3\u30eb\u30c9\u8a2d\u5b9a\uff08Kotlin DSL\uff09\n\u2502   \u251c\u2500\u2500 settings.gradle.kts            # Gradle \u8a2d\u5b9a\n\u2502   \u251c\u2500\u2500 config/                        # \u54c1\u8cea\u7ba1\u7406\u30c4\u30fc\u30eb\u8a2d\u5b9a\n\u2502   \u2502   \u251c\u2500\u2500 checkstyle/\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 checkstyle.xml\n\u2502   \u2502   \u251c\u2500\u2500 pmd/\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 ruleset.xml\n\u2502   \u2502   \u2514\u2500\u2500 spotbugs/\n\u2502   \u2502       \u2514\u2500\u2500 exclude.xml\n\u2502   \u2502\n\u2502   \u2514\u2500\u2500 src/\n\u2502       \u251c\u2500\u2500 main/\n\u2502       \u2502   \u251c\u2500\u2500 java/com/example/sms/\n\u2502       \u2502   \u2502   \u2502\n\u2502       \u2502   \u2502   \u251c\u2500\u2500 domain/            # \u30c9\u30e1\u30a4\u30f3\u5c64\uff08\u7d14\u7c8b\u306a\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\uff09\n\u2502       \u2502   \u2502   \u2502   \u251c\u2500\u2500 model/         # \u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\uff08\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3001\u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\uff09\n\u2502       \u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 master/    # \u30de\u30b9\u30bf\u95a2\u9023\n\u2502       \u2502   \u2502   \u2502   \u2502   \u2514\u2500\u2500 transaction/ # \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u95a2\u9023\n\u2502       \u2502   \u2502   \u2502   \u251c\u2500\u2500 type/          # \u57fa\u672c\u578b\uff08\u901a\u8ca8\u3001\u5358\u4f4d\u3001\u6570\u91cf\u7b49\uff09\n\u2502       \u2502   \u2502   \u2502   \u2514\u2500\u2500 exception/     # \u30c9\u30e1\u30a4\u30f3\u4f8b\u5916\n\u2502       \u2502   \u2502   \u2502\n\u2502       \u2502   \u2502   \u251c\u2500\u2500 application/       # \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\n\u2502       \u2502   \u2502   \u2502   \u251c\u2500\u2500 port/\n\u2502       \u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 in/        # Input Port\uff08\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9IF\uff09\n\u2502       \u2502   \u2502   \u2502   \u2502   \u2514\u2500\u2500 out/       # Output Port\uff08\u30ea\u30dd\u30b8\u30c8\u30eaIF\uff09\n\u2502       \u2502   \u2502   \u2502   \u2514\u2500\u2500 service/       # Application Service\uff08\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u5b9f\u88c5\uff09\n\u2502       \u2502   \u2502   \u2502\n\u2502       \u2502   \u2502   \u251c\u2500\u2500 infrastructure/    # \u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u5c64\n\u2502       \u2502   \u2502   \u2502   \u251c\u2500\u2500 in/            # Input Adapter\n\u2502       \u2502   \u2502   \u2502   \u2502   \u2514\u2500\u2500 rest/      # REST API Controller\n\u2502       \u2502   \u2502   \u2502   \u251c\u2500\u2500 out/           # Output Adapter\n\u2502       \u2502   \u2502   \u2502   \u2502   \u2514\u2500\u2500 persistence/ # \u6c38\u7d9a\u5316\uff08MyBatis Mapper\uff09\n\u2502       \u2502   \u2502   \u2502   \u2514\u2500\u2500 config/        # \u8a2d\u5b9a\u30af\u30e9\u30b9\n\u2502       \u2502   \u2502   \u2502\n\u2502       \u2502   \u2502   \u2514\u2500\u2500 Application.java   # \u30e1\u30a4\u30f3\u30af\u30e9\u30b9\n\u2502       \u2502   \u2502\n\u2502       \u2502   \u2514\u2500\u2500 resources/\n\u2502       \u2502       \u251c\u2500\u2500 application.yml    # \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\n\u2502       \u2502       \u251c\u2500\u2500 db/migration/      # Flyway \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\n\u2502       \u2502       \u2514\u2500\u2500 mapper/            # MyBatis XML \u30de\u30c3\u30d1\u30fc\n\u2502       \u2502\n\u2502       \u2514\u2500\u2500 test/\n\u2502           \u251c\u2500\u2500 java/com/example/sms/\n\u2502           \u2502   \u251c\u2500\u2500 testsetup/         # \u30c6\u30b9\u30c8\u57fa\u76e4\u30af\u30e9\u30b9\n\u2502           \u2502   \u2502   \u2514\u2500\u2500 BaseIntegrationTest.java\n\u2502           \u2502   \u251c\u2500\u2500 domain/            # \u30c9\u30e1\u30a4\u30f3\u5c64\u30c6\u30b9\u30c8\n\u2502           \u2502   \u251c\u2500\u2500 application/       # \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\u30c6\u30b9\u30c8\n\u2502           \u2502   \u2514\u2500\u2500 infrastructure/    # \u30a4\u30f3\u30d5\u30e9\u5c64\u30c6\u30b9\u30c8\n\u2502           \u2502\n\u2502           \u2514\u2500\u2500 resources/\n\u2502               \u2514\u2500\u2500 application-test.yml\n\u2502\n\u251c\u2500\u2500 frontend/                          # \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\n\u2502   \u2514\u2500\u2500 src/\n\u2502       \u251c\u2500\u2500 components/                # UI \u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\n\u2502       \u251c\u2500\u2500 pages/                     # \u30da\u30fc\u30b8\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\n\u2502       \u251c\u2500\u2500 hooks/                     # \u30ab\u30b9\u30bf\u30e0\u30d5\u30c3\u30af\n\u2502       \u251c\u2500\u2500 services/                  # API \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\n\u2502       \u2514\u2500\u2500 types/                     # \u578b\u5b9a\u7fa9\n\u2502\n\u2514\u2500\u2500 docker-compose.yml                 # Docker \u69cb\u6210\n</code></pre> <p>\u5404\u30ec\u30a4\u30e4\u30fc\u306e\u8cac\u52d9\uff1a</p> \u30ec\u30a4\u30e4\u30fc \u8cac\u52d9 Domain \u5c64 \u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u3068\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\uff08\u5916\u90e8\u6280\u8853\u306b\u975e\u4f9d\u5b58\uff09 Application \u5c64 \u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306e\u5b9f\u88c5\u3068\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3 Infrastructure \u5c64 \u5916\u90e8\u6280\u8853\u3068\u306e\u63a5\u7d9a\uff08DB\u3001Web \u7b49\uff09"},{"location":"article/part2/chapter04/#_16","title":"\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u30dd\u30fc\u30c8&amp;\u30a2\u30c0\u30d7\u30bf\u30fc\uff09","text":"<p>\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306f\u3001\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08Ports and Adapters\uff09\u3092\u63a1\u7528\u3057\u307e\u3059\u3002\u3053\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u3088\u308a\u3001\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3092\u5916\u90e8\u306e\u6280\u8853\u7684\u95a2\u5fc3\u4e8b\u304b\u3089\u5206\u96e2\u3057\u3001\u30c6\u30b9\u30c8\u5bb9\u6613\u6027\u3068\u4fdd\u5b88\u6027\u3092\u9ad8\u3081\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter04/#_17","title":"\u30c9\u30e1\u30a4\u30f3\uff08\u4e2d\u5fc3\uff09","text":"<p>\u30c9\u30e1\u30a4\u30f3\u306f\u30b7\u30b9\u30c6\u30e0\u306e\u4e2d\u5fc3\u306b\u4f4d\u7f6e\u3057\u3001\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002</p> <pre><code>backend/src/domain/\n\u251c\u2500\u2500 model/                       # \u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\n\u2502   \u251c\u2500\u2500 master/                  # \u30de\u30b9\u30bf\u95a2\u9023\n\u2502   \u2502   \u251c\u2500\u2500 Product.ts           # \u5546\u54c1\n\u2502   \u2502   \u251c\u2500\u2500 Customer.ts          # \u9867\u5ba2\n\u2502   \u2502   \u2514\u2500\u2500 Supplier.ts          # \u4ed5\u5165\u5148\n\u2502   \u251c\u2500\u2500 sales/                   # \u8ca9\u58f2\u95a2\u9023\n\u2502   \u2502   \u251c\u2500\u2500 Order.ts             # \u53d7\u6ce8\n\u2502   \u2502   \u251c\u2500\u2500 OrderItem.ts         # \u53d7\u6ce8\u660e\u7d30\n\u2502   \u2502   \u251c\u2500\u2500 Shipment.ts          # \u51fa\u8377\n\u2502   \u2502   \u2514\u2500\u2500 Sales.ts             # \u58f2\u4e0a\n\u2502   \u251c\u2500\u2500 purchase/                # \u4ed5\u5165\u95a2\u9023\n\u2502   \u2502   \u251c\u2500\u2500 Purchase.ts          # \u767a\u6ce8\n\u2502   \u2502   \u2514\u2500\u2500 PurchaseReceipt.ts   # \u4ed5\u5165\n\u2502   \u251c\u2500\u2500 inventory/               # \u5728\u5eab\u95a2\u9023\n\u2502   \u2502   \u2514\u2500\u2500 Inventory.ts         # \u5728\u5eab\n\u2502   \u2514\u2500\u2500 billing/                 # \u8acb\u6c42\u95a2\u9023\n\u2502       \u251c\u2500\u2500 Invoice.ts           # \u8acb\u6c42\n\u2502       \u2514\u2500\u2500 Receipt.ts           # \u5165\u91d1\n\u251c\u2500\u2500 type/                        # \u57fa\u672c\u578b\n\u2502   \u251c\u2500\u2500 Money.ts                 # \u901a\u8ca8\n\u2502   \u251c\u2500\u2500 Quantity.ts              # \u6570\u91cf\n\u2502   \u2514\u2500\u2500 Unit.ts                  # \u5358\u4f4d\n\u2514\u2500\u2500 exception/                   # \u30c9\u30e1\u30a4\u30f3\u4f8b\u5916\n    \u2514\u2500\u2500 DomainException.ts\n</code></pre>"},{"location":"article/part2/chapter04/#_18","title":"\u30dd\u30fc\u30c8\uff08\u5165\u529b\u30dd\u30fc\u30c8\u30fb\u51fa\u529b\u30dd\u30fc\u30c8\uff09","text":"<p>\u30dd\u30fc\u30c8\u306f\u3001\u30c9\u30e1\u30a4\u30f3\u3068\u5916\u90e8\u4e16\u754c\u3068\u306e\u5883\u754c\u3092\u5b9a\u7fa9\u3059\u308b\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3067\u3059\u3002</p> \u30dd\u30fc\u30c8\u7a2e\u5225 \u5f79\u5272 \u4f8b \u5165\u529b\u30dd\u30fc\u30c8 \u5916\u90e8\u304b\u3089\u306e\u8981\u6c42\u3092\u53d7\u3051\u4ed8\u3051\u308b \u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9 \u51fa\u529b\u30dd\u30fc\u30c8 \u5916\u90e8\u30ea\u30bd\u30fc\u30b9\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u62bd\u8c61\u5316 \u30ea\u30dd\u30b8\u30c8\u30ea\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9 <pre><code>// \u5165\u529b\u30dd\u30fc\u30c8\uff08\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff09\ninterface CreateOrderUseCase {\n  execute(command: CreateOrderCommand): Promise&lt;OrderId&gt;;\n}\n\n// \u51fa\u529b\u30dd\u30fc\u30c8\uff08\u30ea\u30dd\u30b8\u30c8\u30ea\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff09\ninterface OrderRepository {\n  save(order: Order): Promise&lt;void&gt;;\n  findById(id: OrderId): Promise&lt;Order | null&gt;;\n  findByCustomerId(customerId: CustomerId): Promise&lt;Order[]&gt;;\n}\n</code></pre>"},{"location":"article/part2/chapter04/#_19","title":"\u30a2\u30c0\u30d7\u30bf\u30fc\uff08\u30d7\u30e9\u30a4\u30de\u30ea\u30fb\u30bb\u30ab\u30f3\u30c0\u30ea\uff09","text":"<p>\u30a2\u30c0\u30d7\u30bf\u30fc\u306f\u3001\u30dd\u30fc\u30c8\u306e\u5b9f\u88c5\u3092\u63d0\u4f9b\u3057\u3001\u5916\u90e8\u6280\u8853\u3068\u30c9\u30e1\u30a4\u30f3\u3092\u63a5\u7d9a\u3057\u307e\u3059\u3002</p> \u30a2\u30c0\u30d7\u30bf\u30fc\u7a2e\u5225 \u5f79\u5272 \u4f8b \u30d7\u30e9\u30a4\u30de\u30ea\u30a2\u30c0\u30d7\u30bf\u30fc \u5916\u90e8\u304b\u3089\u306e\u5165\u529b\u3092\u51e6\u7406 REST \u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u3001CLI \u30bb\u30ab\u30f3\u30c0\u30ea\u30a2\u30c0\u30d7\u30bf\u30fc \u5916\u90e8\u30ea\u30bd\u30fc\u30b9\u3078\u306e\u51fa\u529b\u3092\u51e6\u7406 DB \u30ea\u30dd\u30b8\u30c8\u30ea\u5b9f\u88c5\u3001\u5916\u90e8 API \u30af\u30e9\u30a4\u30a2\u30f3\u30c8 <pre><code>backend/src/infrastructure/\n\u251c\u2500\u2500 in/                          # Input Adapter\uff08\u30d7\u30e9\u30a4\u30de\u30ea\u30a2\u30c0\u30d7\u30bf\u30fc\uff09\n\u2502   \u2514\u2500\u2500 rest/                    # REST API\n\u2502       \u251c\u2500\u2500 controller/\n\u2502       \u2502   \u251c\u2500\u2500 OrderController.ts\n\u2502       \u2502   \u251c\u2500\u2500 ShipmentController.ts\n\u2502       \u2502   \u2514\u2500\u2500 SalesController.ts\n\u2502       \u251c\u2500\u2500 dto/\n\u2502       \u2502   \u251c\u2500\u2500 OrderRequest.ts\n\u2502       \u2502   \u2514\u2500\u2500 OrderResponse.ts\n\u2502       \u2514\u2500\u2500 exception/\n\u2502           \u2514\u2500\u2500 RestExceptionHandler.ts\n\u251c\u2500\u2500 out/                         # Output Adapter\uff08\u30bb\u30ab\u30f3\u30c0\u30ea\u30a2\u30c0\u30d7\u30bf\u30fc\uff09\n\u2502   \u2514\u2500\u2500 persistence/             # \u6c38\u7d9a\u5316\n\u2502       \u251c\u2500\u2500 database/            # \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5b9a\u7fa9\n\u2502       \u2502   \u251c\u2500\u2500 migrations/      # \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\n\u2502       \u2502   \u2514\u2500\u2500 seeds/           # \u30b7\u30fc\u30c9\u30c7\u30fc\u30bf\n\u2502       \u251c\u2500\u2500 mapper/              # O/R Mapper\n\u2502       \u2502   \u2514\u2500\u2500 OrderMapper.ts\n\u2502       \u251c\u2500\u2500 repository/          # Repository\u5b9f\u88c5\n\u2502       \u2502   \u251c\u2500\u2500 OrderRepositoryImpl.ts\n\u2502       \u2502   \u2514\u2500\u2500 CustomerRepositoryImpl.ts\n\u2502       \u2514\u2500\u2500 typehandler/         # \u578b\u30cf\u30f3\u30c9\u30e9\n\u2514\u2500\u2500 config/                      # \u8a2d\u5b9a\u30af\u30e9\u30b9\n    \u251c\u2500\u2500 DatabaseConfig.ts\n    \u2514\u2500\u2500 WebConfig.ts\n</code></pre>"},{"location":"article/part2/chapter04/#_20","title":"\u4f9d\u5b58\u6027\u306e\u65b9\u5411\u3068\u4f9d\u5b58\u6027\u9006\u8ee2\u306e\u539f\u5247","text":"<p>\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3067\u306f\u3001\u3059\u3079\u3066\u306e\u4f9d\u5b58\u6027\u304c\u30c9\u30e1\u30a4\u30f3\u306b\u5411\u304b\u3044\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter04/#_21","title":"\u30c9\u30e1\u30a4\u30f3\u99c6\u52d5\u8a2d\u8a08\u306e\u9069\u7528","text":""},{"location":"article/part2/chapter04/#_22","title":"\u96c6\u7d04\u3068\u30ea\u30dd\u30b8\u30c8\u30ea","text":"<p>\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u4e3b\u8981\u306a\u96c6\u7d04\u3092\u4ee5\u4e0b\u306b\u793a\u3057\u307e\u3059\u3002</p> <p></p> \u96c6\u7d04 \u30eb\u30fc\u30c8\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 \u4e3b\u306a\u8cac\u52d9 \u898b\u7a4d\u96c6\u7d04 Estimate \u898b\u7a4d\u306e\u4f5c\u6210\u30fb\u66f4\u65b0\u30fb\u627f\u8a8d \u53d7\u6ce8\u96c6\u7d04 Order \u53d7\u6ce8\u306e\u767b\u9332\u30fb\u5728\u5eab\u5f15\u5f53\u30fb\u30b9\u30c6\u30fc\u30bf\u30b9\u7ba1\u7406 \u51fa\u8377\u96c6\u7d04 Shipment \u51fa\u8377\u6307\u793a\u30fb\u51fa\u8377\u5b9f\u7e3e\u306e\u7ba1\u7406 \u58f2\u4e0a\u96c6\u7d04 Sales \u58f2\u4e0a\u8a08\u4e0a\u30fb\u8acb\u6c42\u30c7\u30fc\u30bf\u751f\u6210"},{"location":"article/part2/chapter04/#_23","title":"\u30c9\u30e1\u30a4\u30f3\u30b5\u30fc\u30d3\u30b9","text":"<p>\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306b\u5c5e\u3055\u306a\u3044\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u306f\u30c9\u30e1\u30a4\u30f3\u30b5\u30fc\u30d3\u30b9\u3068\u3057\u3066\u5b9f\u88c5\u3057\u307e\u3059\u3002</p> <pre><code>// \u4fa1\u683c\u8a08\u7b97\u30b5\u30fc\u30d3\u30b9\nclass PricingService {\n  calculateOrderTotal(\n    items: OrderItem[],\n    customer: Customer,\n    discountPolicy: DiscountPolicy\n  ): Money {\n    // \u9867\u5ba2\u5225\u5358\u4fa1\u306e\u9069\u7528\n    // \u6570\u91cf\u5272\u5f15\u306e\u8a08\u7b97\n    // \u6d88\u8cbb\u7a0e\u306e\u8a08\u7b97\n  }\n}\n\n// \u5728\u5eab\u5f15\u5f53\u30b5\u30fc\u30d3\u30b9\nclass InventoryAllocationService {\n  allocate(order: Order): AllocationResult {\n    // \u5728\u5eab\u306e\u78ba\u8a8d\n    // \u5f15\u5f53\u51e6\u7406\n    // \u4e0d\u8db3\u6642\u306e\u8abf\u9054\u4f9d\u983c\n  }\n}\n</code></pre>"},{"location":"article/part2/chapter04/#_24","title":"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9","text":"<p>\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u306f\u3001\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u3092\u5b9f\u88c5\u3057\u3001\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u5883\u754c\u3092\u7ba1\u7406\u3057\u307e\u3059\u3002</p> <pre><code>// \u53d7\u6ce8\u767b\u9332\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\nclass CreateOrderService implements CreateOrderUseCase {\n  constructor(\n    private orderRepository: OrderRepository,\n    private customerRepository: CustomerRepository,\n    private pricingService: PricingService,\n    private inventoryService: InventoryAllocationService\n  ) {}\n\n  async execute(command: CreateOrderCommand): Promise&lt;OrderId&gt; {\n    // 1. \u9867\u5ba2\u306e\u53d6\u5f97\n    const customer = await this.customerRepository.findById(command.customerId);\n\n    // 2. \u53d7\u6ce8\u306e\u4f5c\u6210\n    const order = Order.create(customer, command.items);\n\n    // 3. \u4fa1\u683c\u8a08\u7b97\n    order.calculateTotal(this.pricingService);\n\n    // 4. \u5728\u5eab\u5f15\u5f53\n    await this.inventoryService.allocate(order);\n\n    // 5. \u4fdd\u5b58\n    await this.orderRepository.save(order);\n\n    return order.id;\n  }\n}\n</code></pre>"},{"location":"article/part2/chapter04/#api","title":"API \u8a2d\u8a08","text":""},{"location":"article/part2/chapter04/#restful-api","title":"RESTful API \u306e\u57fa\u672c\u65b9\u91dd","text":"\u539f\u5247 \u8aac\u660e \u30ea\u30bd\u30fc\u30b9\u6307\u5411 URL \u306f\u30ea\u30bd\u30fc\u30b9\uff08\u540d\u8a5e\uff09\u3092\u8868\u3059 HTTP \u30e1\u30bd\u30c3\u30c9 GET/POST/PUT/DELETE \u3067\u64cd\u4f5c\u3092\u8868\u73fe \u30b9\u30c6\u30fc\u30c8\u30ec\u30b9 \u30b5\u30fc\u30d0\u30fc\u306f\u30bb\u30c3\u30b7\u30e7\u30f3\u72b6\u614b\u3092\u4fdd\u6301\u3057\u306a\u3044 HATEOAS \u30ec\u30b9\u30dd\u30f3\u30b9\u306b\u95a2\u9023\u30ea\u30bd\u30fc\u30b9\u3078\u306e\u30ea\u30f3\u30af\u3092\u542b\u3081\u308b"},{"location":"article/part2/chapter04/#_25","title":"\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u8a2d\u8a08","text":"<pre><code># \u898b\u7a4d\nGET    /api/v1/estimates              # \u898b\u7a4d\u4e00\u89a7\nPOST   /api/v1/estimates              # \u898b\u7a4d\u4f5c\u6210\nGET    /api/v1/estimates/{id}         # \u898b\u7a4d\u8a73\u7d30\nPUT    /api/v1/estimates/{id}         # \u898b\u7a4d\u66f4\u65b0\nDELETE /api/v1/estimates/{id}         # \u898b\u7a4d\u524a\u9664\nPOST   /api/v1/estimates/{id}/approve # \u898b\u7a4d\u627f\u8a8d\n\n# \u53d7\u6ce8\nGET    /api/v1/orders                 # \u53d7\u6ce8\u4e00\u89a7\nPOST   /api/v1/orders                 # \u53d7\u6ce8\u767b\u9332\nGET    /api/v1/orders/{id}            # \u53d7\u6ce8\u8a73\u7d30\nPUT    /api/v1/orders/{id}            # \u53d7\u6ce8\u66f4\u65b0\nPOST   /api/v1/orders/{id}/confirm    # \u53d7\u6ce8\u78ba\u5b9a\nPOST   /api/v1/orders/{id}/cancel     # \u53d7\u6ce8\u30ad\u30e3\u30f3\u30bb\u30eb\n\n# \u51fa\u8377\nGET    /api/v1/shipments              # \u51fa\u8377\u4e00\u89a7\nPOST   /api/v1/shipments              # \u51fa\u8377\u767b\u9332\nGET    /api/v1/shipments/{id}         # \u51fa\u8377\u8a73\u7d30\nPOST   /api/v1/shipments/{id}/ship    # \u51fa\u8377\u5b9f\u884c\nPOST   /api/v1/shipments/{id}/deliver # \u914d\u9001\u5b8c\u4e86\n\n# \u58f2\u4e0a\nGET    /api/v1/sales                  # \u58f2\u4e0a\u4e00\u89a7\nPOST   /api/v1/sales                  # \u58f2\u4e0a\u8a08\u4e0a\nGET    /api/v1/sales/{id}             # \u58f2\u4e0a\u8a73\u7d30\n</code></pre>"},{"location":"article/part2/chapter04/#_26","title":"\u307e\u3068\u3081","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u5168\u4f53\u50cf\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u307e\u3057\u305f\u3002</p> <ul> <li>\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u30b9\u30b3\u30fc\u30d7\u306f\u300c\u898b\u7a4d\u2192\u53d7\u6ce8\u2192\u51fa\u8377\u2192\u58f2\u4e0a\u300d\u306e4\u3064\u306e\u4e3b\u8981\u696d\u52d9</li> <li>5\u3064\u306e\u90e8\u9580\uff08\u55b6\u696d\u30fb\u8abf\u9054\u30fb\u5009\u5eab\u30fb\u7d4c\u7406\u30fb\u8ca1\u52d9\uff09\u304c\u305d\u308c\u305e\u308c\u306e\u8cac\u52d9\u3092\u62c5\u3046</li> <li>\u90e8\u9580\u9593\u306e\u9023\u643a\u306b\u3088\u308a\u3001\u4e00\u9023\u306e\u696d\u52d9\u30d5\u30ed\u30fc\u304c\u6210\u7acb\u3059\u308b</li> <li>\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u3088\u308a\u3001\u30c9\u30e1\u30a4\u30f3\u3092\u4e2d\u5fc3\u3068\u3057\u305f\u758e\u7d50\u5408\u306a\u8a2d\u8a08\u3092\u5b9f\u73fe</li> <li>\u30c9\u30e1\u30a4\u30f3\u99c6\u52d5\u8a2d\u8a08\u306e\u96c6\u7d04\u30fb\u30ea\u30dd\u30b8\u30c8\u30ea\u30d1\u30bf\u30fc\u30f3\u3092\u9069\u7528</li> </ul> <p>\u6b21\u7ae0\u3067\u306f\u3001\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u57fa\u76e4\u3068\u306a\u308b\u30de\u30b9\u30bf\u60c5\u5831\u306e\u8a2d\u8a08\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter05/","title":"\u7b2c5\u7ae0\uff1a\u30de\u30b9\u30bf\u60c5\u5831\u306e\u8a2d\u8a08","text":"<p>\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u57fa\u76e4\u3068\u306a\u308b\u30de\u30b9\u30bf\u60c5\u5831\u3092 TDD \u3067\u8a2d\u8a08\u3057\u3066\u3044\u304d\u307e\u3059\u3002\u672c\u7ae0\u3067\u306f\u3001\u7d44\u7e54\u30fb\u793e\u54e1\u30fb\u5546\u54c1\u30fb\u53d6\u5f15\u5148\u3068\u3044\u3063\u305f\u57fa\u672c\u7684\u306a\u30de\u30b9\u30bf\u30c6\u30fc\u30d6\u30eb\u306e\u8a2d\u8a08\u3068\u5b9f\u88c5\u3092\u884c\u3044\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter05/#51","title":"5.1 \u90e8\u9580\u30de\u30b9\u30bf\u306e\u8a2d\u8a08","text":"<p>\u4f01\u696d\u306e\u7d44\u7e54\u69cb\u9020\u3092\u7ba1\u7406\u3059\u308b\u90e8\u9580\u30de\u30b9\u30bf\u3092\u8a2d\u8a08\u3057\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter05/#_1","title":"\u7d44\u7e54\u968e\u5c64\u306e\u6982\u5ff5","text":"<p>\u4f01\u696d\u306e\u7d44\u7e54\u306f\u968e\u5c64\u69cb\u9020\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u3002\u90e8\u9580\u30de\u30b9\u30bf\u3067\u306f\u3001\u3053\u306e\u968e\u5c64\u69cb\u9020\u3092\u300c\u90e8\u9580\u30d1\u30b9\u300d\u3067\u8868\u73fe\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter05/#er","title":"\u90e8\u9580\u30de\u30b9\u30bf\u306e ER \u56f3","text":""},{"location":"article/part2/chapter05/#_2","title":"\u90e8\u9580\u30de\u30b9\u30bf\u306e\u9805\u76ee\u8aac\u660e","text":"\u9805\u76ee \u8aac\u660e \u4f8b \u90e8\u9580\u30b3\u30fc\u30c9 \u90e8\u9580\u3092\u4e00\u610f\u306b\u8b58\u5225\u3059\u308b\u30b3\u30fc\u30c9 <code>11101</code> \u958b\u59cb\u65e5 \u90e8\u9580\u306e\u6709\u52b9\u671f\u9593\u958b\u59cb\u65e5 <code>2025-01-01</code> \u7d42\u4e86\u65e5 \u90e8\u9580\u306e\u6709\u52b9\u671f\u9593\u7d42\u4e86\u65e5 <code>null</code>\uff08\u6709\u52b9\uff09 \u90e8\u9580\u540d \u90e8\u9580\u306e\u540d\u79f0 <code>\u55b6\u696d1\u8ab2</code> \u7d44\u7e54\u968e\u5c64 \u968e\u5c64\u306e\u6df1\u3055\uff080\u304b\u3089\u958b\u59cb\uff09 <code>3</code> \u90e8\u9580\u30d1\u30b9 \u30eb\u30fc\u30c8\u304b\u3089\u306e\u30d1\u30b9\uff08\u30c1\u30eb\u30c0\u9023\u7d50\uff09 <code>10000~11000~11100~11101</code> \u6700\u4e0b\u5c64\u533a\u5206 \u6700\u4e0b\u5c64\uff08\u672b\u7aef\uff09\u304b\u3069\u3046\u304b <code>true</code>"},{"location":"article/part2/chapter05/#_3","title":"\u7d44\u7e54\u6539\u6b63\u3078\u306e\u5bfe\u5fdc\uff08\u5c65\u6b74\u7ba1\u7406\uff09","text":"<p>\u7d44\u7e54\u6539\u6b63\u304c\u767a\u751f\u3057\u305f\u5834\u5408\u3001\u540c\u3058\u90e8\u9580\u30b3\u30fc\u30c9\u3067\u3082\u958b\u59cb\u65e5\u304c\u7570\u306a\u308b\u30ec\u30b3\u30fc\u30c9\u3092\u767b\u9332\u3059\u308b\u3053\u3068\u3067\u3001\u7d44\u7e54\u306e\u5909\u9077\u3092\u7ba1\u7406\u3067\u304d\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter05/#_4","title":"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff1a\u90e8\u9580\u30de\u30b9\u30bf\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210","text":"SQL \u5b9f\u88c5 <pre><code>-- src/main/resources/db/migration/V002__create_department_master.sql\n\n-- \u90e8\u9580\u30de\u30b9\u30bf\uff08\u65e5\u672c\u8a9e\u30c6\u30fc\u30d6\u30eb\u540d\u30fb\u30ab\u30e9\u30e0\u540d\uff09\nCREATE TABLE \"\u90e8\u9580\u30de\u30b9\u30bf\" (\n    \"\u90e8\u9580\u30b3\u30fc\u30c9\" VARCHAR(10) NOT NULL,\n    \"\u958b\u59cb\u65e5\" DATE NOT NULL,\n    \"\u7d42\u4e86\u65e5\" DATE,\n    \"\u90e8\u9580\u540d\" VARCHAR(40) NOT NULL,\n    \"\u7d44\u7e54\u968e\u5c64\" INTEGER NOT NULL DEFAULT 0,\n    \"\u90e8\u9580\u30d1\u30b9\" VARCHAR(100),\n    \"\u6700\u4e0b\u5c64\u533a\u5206\" BOOLEAN NOT NULL DEFAULT FALSE,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u4f5c\u6210\u8005\u540d\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u66f4\u65b0\u8005\u540d\" VARCHAR(50),\n    PRIMARY KEY (\"\u90e8\u9580\u30b3\u30fc\u30c9\", \"\u958b\u59cb\u65e5\")\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX idx_\u90e8\u9580\u30de\u30b9\u30bf_\u90e8\u9580\u30d1\u30b9 ON \"\u90e8\u9580\u30de\u30b9\u30bf\"(\"\u90e8\u9580\u30d1\u30b9\");\nCREATE INDEX idx_\u90e8\u9580\u30de\u30b9\u30bf_\u7d44\u7e54\u968e\u5c64 ON \"\u90e8\u9580\u30de\u30b9\u30bf\"(\"\u7d44\u7e54\u968e\u5c64\");\n</code></pre>"},{"location":"article/part2/chapter05/#tdd","title":"TDD\uff1a\u90e8\u9580\u306e\u767b\u9332\u3068\u53d6\u5f97","text":""},{"location":"article/part2/chapter05/#red","title":"Red: \u5931\u6557\u3059\u308b\u30c6\u30b9\u30c8\u3092\u66f8\u304f","text":"DepartmentRepositoryTest.java <pre><code>// src/test/java/com/example/sms/infrastructure/persistence/repository/DepartmentRepositoryTest.java\npackage com.example.sms.infrastructure.persistence.repository;\n\nimport com.example.sms.application.port.out.DepartmentRepository;\nimport com.example.sms.domain.model.department.Department;\nimport com.example.sms.testsetup.BaseIntegrationTest;\nimport org.junit.jupiter.api.*;\nimport org.springframework.beans.factory.annotation.Autowired;\n\nimport java.time.LocalDate;\n\nimport static org.assertj.core.api.Assertions.*;\n\n@DisplayName(\"\u90e8\u9580\u30ea\u30dd\u30b8\u30c8\u30ea\")\nclass DepartmentRepositoryTest extends BaseIntegrationTest {\n\n    @Autowired\n    private DepartmentRepository departmentRepository;\n\n    @BeforeEach\n    void setUp() {\n        departmentRepository.deleteAll();\n    }\n\n    @Nested\n    @DisplayName(\"\u767b\u9332\")\n    class Registration {\n\n        @Test\n        @DisplayName(\"\u90e8\u9580\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterDepartment() {\n            // Arrange\n            var department = Department.builder()\n                    .departmentCode(\"10000\")\n                    .startDate(LocalDate.of(2025, 1, 1))\n                    .departmentName(\"\u672c\u793e\")\n                    .hierarchyLevel(0)\n                    .departmentPath(\"10000\")\n                    .isLeaf(false)\n                    .build();\n\n            // Act\n            departmentRepository.save(department);\n\n            // Assert\n            var result = departmentRepository.findByCode(\"10000\");\n            assertThat(result).isPresent();\n            assertThat(result.get().getDepartmentName()).isEqualTo(\"\u672c\u793e\");\n            assertThat(result.get().getHierarchyLevel()).isEqualTo(0);\n        }\n\n        @Test\n        @DisplayName(\"\u968e\u5c64\u69cb\u9020\u3092\u6301\u3064\u90e8\u9580\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterHierarchicalDepartments() {\n            // Arrange: \u89aa\u90e8\u9580\n            var parent = Department.builder()\n                    .departmentCode(\"10000\")\n                    .startDate(LocalDate.of(2025, 1, 1))\n                    .departmentName(\"\u672c\u793e\")\n                    .hierarchyLevel(0)\n                    .departmentPath(\"10000\")\n                    .isLeaf(false)\n                    .build();\n            departmentRepository.save(parent);\n\n            // Arrange: \u5b50\u90e8\u9580\n            var child = Department.builder()\n                    .departmentCode(\"11000\")\n                    .startDate(LocalDate.of(2025, 1, 1))\n                    .departmentName(\"\u55b6\u696d\u672c\u90e8\")\n                    .hierarchyLevel(1)\n                    .departmentPath(\"10000~11000\")\n                    .isLeaf(false)\n                    .build();\n            departmentRepository.save(child);\n\n            // Arrange: \u5b6b\u90e8\u9580\uff08\u6700\u4e0b\u5c64\uff09\n            var grandChild = Department.builder()\n                    .departmentCode(\"11101\")\n                    .startDate(LocalDate.of(2025, 1, 1))\n                    .departmentName(\"\u55b6\u696d1\u8ab2\")\n                    .hierarchyLevel(3)\n                    .departmentPath(\"10000~11000~11100~11101\")\n                    .isLeaf(true)\n                    .build();\n            departmentRepository.save(grandChild);\n\n            // Act\n            var result = departmentRepository.findByCode(\"11101\");\n\n            // Assert\n            assertThat(result).isPresent();\n            assertThat(result.get().getDepartmentPath()).isEqualTo(\"10000~11000~11100~11101\");\n            assertThat(result.get().isLeaf()).isTrue();\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u5c65\u6b74\u7ba1\u7406\")\n    class HistoryManagement {\n\n        @Test\n        @DisplayName(\"\u540c\u3058\u90e8\u9580\u30b3\u30fc\u30c9\u3067\u3082\u958b\u59cb\u65e5\u304c\u7570\u306a\u308c\u3070\u767b\u9332\u3067\u304d\u308b\uff08\u7d44\u7e54\u6539\u6b63\u5bfe\u5fdc\uff09\")\n        void canRegisterSameCodeWithDifferentStartDate() {\n            // Arrange: \u65e7\u7d44\u7e54\n            var oldDept = Department.builder()\n                    .departmentCode(\"11000\")\n                    .startDate(LocalDate.of(2024, 1, 1))\n                    .endDate(LocalDate.of(2024, 12, 31))\n                    .departmentName(\"\u55b6\u696d\u90e8\")\n                    .hierarchyLevel(1)\n                    .departmentPath(\"10000~11000\")\n                    .isLeaf(false)\n                    .build();\n            departmentRepository.save(oldDept);\n\n            // Arrange: \u65b0\u7d44\u7e54\n            var newDept = Department.builder()\n                    .departmentCode(\"11000\")\n                    .startDate(LocalDate.of(2025, 1, 1))\n                    .departmentName(\"\u55b6\u696d\u672c\u90e8\")\n                    .hierarchyLevel(1)\n                    .departmentPath(\"10000~11000\")\n                    .isLeaf(false)\n                    .build();\n            departmentRepository.save(newDept);\n\n            // Act: \u73fe\u5728\u6709\u52b9\u306a\u90e8\u9580\u3092\u53d6\u5f97\n            var result = departmentRepository.findByCodeAndDate(\"11000\", LocalDate.of(2025, 4, 1));\n\n            // Assert\n            assertThat(result).isPresent();\n            assertThat(result.get().getDepartmentName()).isEqualTo(\"\u55b6\u696d\u672c\u90e8\");\n        }\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter05/#green","title":"Green: \u30c6\u30b9\u30c8\u3092\u901a\u3059\u5b9f\u88c5","text":"Department.java\uff08\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\uff09 <pre><code>// src/main/java/com/example/sms/domain/model/department/Department.java\npackage com.example.sms.domain.model.department;\n\nimport lombok.*;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Department {\n    private String departmentCode;\n    private LocalDate startDate;\n    private LocalDate endDate;\n    private String departmentName;\n    @Builder.Default\n    private Integer hierarchyLevel = 0;\n    private String departmentPath;\n    @Builder.Default\n    private boolean isLeaf = false;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n}\n</code></pre> DepartmentRepository.java\uff08Output Port\uff09 <pre><code>// src/main/java/com/example/sms/application/port/out/DepartmentRepository.java\npackage com.example.sms.application.port.out;\n\nimport com.example.sms.domain.model.department.Department;\n\nimport java.time.LocalDate;\nimport java.util.List;\nimport java.util.Optional;\n\n/**\n * \u90e8\u9580\u30ea\u30dd\u30b8\u30c8\u30ea\uff08Output Port\uff09\n */\npublic interface DepartmentRepository {\n\n    void save(Department department);\n\n    Optional&lt;Department&gt; findByCode(String departmentCode);\n\n    Optional&lt;Department&gt; findByCodeAndDate(String departmentCode, LocalDate baseDate);\n\n    List&lt;Department&gt; findAll();\n\n    List&lt;Department&gt; findByHierarchyLevel(int level);\n\n    List&lt;Department&gt; findChildren(String parentPath);\n\n    void update(Department department);\n\n    void deleteAll();\n}\n</code></pre> DepartmentMapper.xml <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.sms.infrastructure.persistence.mapper.DepartmentMapper\"&gt;\n\n    &lt;resultMap id=\"DepartmentResultMap\" type=\"com.example.sms.domain.model.department.Department\"&gt;\n        &lt;result property=\"departmentCode\" column=\"\u90e8\u9580\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"startDate\" column=\"\u958b\u59cb\u65e5\"/&gt;\n        &lt;result property=\"endDate\" column=\"\u7d42\u4e86\u65e5\"/&gt;\n        &lt;result property=\"departmentName\" column=\"\u90e8\u9580\u540d\"/&gt;\n        &lt;result property=\"hierarchyLevel\" column=\"\u7d44\u7e54\u968e\u5c64\"/&gt;\n        &lt;result property=\"departmentPath\" column=\"\u90e8\u9580\u30d1\u30b9\"/&gt;\n        &lt;result property=\"isLeaf\" column=\"\u6700\u4e0b\u5c64\u533a\u5206\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"createdBy\" column=\"\u4f5c\u6210\u8005\u540d\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedBy\" column=\"\u66f4\u65b0\u8005\u540d\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;insert id=\"insert\" parameterType=\"com.example.sms.domain.model.department.Department\"&gt;\n        INSERT INTO \"\u90e8\u9580\u30de\u30b9\u30bf\" (\n            \"\u90e8\u9580\u30b3\u30fc\u30c9\", \"\u958b\u59cb\u65e5\", \"\u7d42\u4e86\u65e5\", \"\u90e8\u9580\u540d\",\n            \"\u7d44\u7e54\u968e\u5c64\", \"\u90e8\u9580\u30d1\u30b9\", \"\u6700\u4e0b\u5c64\u533a\u5206\",\n            \"\u4f5c\u6210\u65e5\u6642\", \"\u4f5c\u6210\u8005\u540d\", \"\u66f4\u65b0\u65e5\u6642\", \"\u66f4\u65b0\u8005\u540d\"\n        ) VALUES (\n            #{departmentCode}, #{startDate}, #{endDate}, #{departmentName},\n            #{hierarchyLevel}, #{departmentPath}, #{isLeaf},\n            CURRENT_TIMESTAMP, #{createdBy}, CURRENT_TIMESTAMP, #{updatedBy}\n        )\n    &lt;/insert&gt;\n\n    &lt;select id=\"findByCode\" resultMap=\"DepartmentResultMap\"&gt;\n        SELECT * FROM \"\u90e8\u9580\u30de\u30b9\u30bf\"\n        WHERE \"\u90e8\u9580\u30b3\u30fc\u30c9\" = #{departmentCode}\n          AND (\"\u7d42\u4e86\u65e5\" IS NULL OR \"\u7d42\u4e86\u65e5\" &gt; CURRENT_DATE)\n        ORDER BY \"\u958b\u59cb\u65e5\" DESC\n        LIMIT 1\n    &lt;/select&gt;\n\n    &lt;select id=\"findByCodeAndDate\" resultMap=\"DepartmentResultMap\"&gt;\n        SELECT * FROM \"\u90e8\u9580\u30de\u30b9\u30bf\"\n        WHERE \"\u90e8\u9580\u30b3\u30fc\u30c9\" = #{departmentCode}\n          AND \"\u958b\u59cb\u65e5\" &amp;lt;= #{baseDate}\n          AND (\"\u7d42\u4e86\u65e5\" IS NULL OR \"\u7d42\u4e86\u65e5\" &gt; #{baseDate})\n        ORDER BY \"\u958b\u59cb\u65e5\" DESC\n        LIMIT 1\n    &lt;/select&gt;\n\n    &lt;delete id=\"deleteAll\"&gt;\n        TRUNCATE TABLE \"\u90e8\u9580\u30de\u30b9\u30bf\" CASCADE\n    &lt;/delete&gt;\n&lt;/mapper&gt;\n</code></pre>"},{"location":"article/part2/chapter05/#52","title":"5.2 \u793e\u54e1\u30de\u30b9\u30bf\u306e\u8a2d\u8a08","text":"<p>\u90e8\u9580\u306b\u6240\u5c5e\u3059\u308b\u793e\u54e1\u3092\u7ba1\u7406\u3059\u308b\u30de\u30b9\u30bf\u3092\u8a2d\u8a08\u3057\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter05/#er_1","title":"\u793e\u54e1\u30de\u30b9\u30bf\u306e ER \u56f3","text":""},{"location":"article/part2/chapter05/#_5","title":"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff1a\u793e\u54e1\u30de\u30b9\u30bf\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210","text":"SQL \u5b9f\u88c5 <pre><code>-- src/main/resources/db/migration/V003__create_employee_master.sql\n\n-- \u793e\u54e1\u30de\u30b9\u30bf\nCREATE TABLE \"\u793e\u54e1\u30de\u30b9\u30bf\" (\n    \"\u793e\u54e1\u30b3\u30fc\u30c9\" VARCHAR(10) PRIMARY KEY,\n    \"\u793e\u54e1\u540d\" VARCHAR(20) NOT NULL,\n    \"\u793e\u54e1\u540d\u30ab\u30ca\" VARCHAR(40),\n    \"\u90e8\u9580\u30b3\u30fc\u30c9\" VARCHAR(10),\n    \"\u958b\u59cb\u65e5\" DATE,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u4f5c\u6210\u8005\u540d\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u66f4\u65b0\u8005\u540d\" VARCHAR(50),\n    FOREIGN KEY (\"\u90e8\u9580\u30b3\u30fc\u30c9\", \"\u958b\u59cb\u65e5\") REFERENCES \"\u90e8\u9580\u30de\u30b9\u30bf\"(\"\u90e8\u9580\u30b3\u30fc\u30c9\", \"\u958b\u59cb\u65e5\")\n);\n\nCREATE INDEX idx_\u793e\u54e1\u30de\u30b9\u30bf_\u90e8\u9580\u30b3\u30fc\u30c9 ON \"\u793e\u54e1\u30de\u30b9\u30bf\"(\"\u90e8\u9580\u30b3\u30fc\u30c9\");\n</code></pre>"},{"location":"article/part2/chapter05/#_6","title":"\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\uff08\u30c9\u30e1\u30a4\u30f3\u5c64\uff09","text":"Employee.java <pre><code>// src/main/java/com/example/sms/domain/model/employee/Employee.java\npackage com.example.sms.domain.model.employee;\n\nimport lombok.*;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Employee {\n    private String employeeCode;\n    private String employeeName;\n    private String employeeNameKana;\n    private String departmentCode;\n    private LocalDate departmentStartDate;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n}\n</code></pre>"},{"location":"article/part2/chapter05/#53","title":"5.3 \u5546\u54c1\u30de\u30b9\u30bf\u306e\u8a2d\u8a08","text":"<p>\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3067\u6271\u3046\u300c\u5546\u54c1\u300d\u306e\u60c5\u5831\u3092\u7ba1\u7406\u3059\u308b\u30de\u30b9\u30bf\u3092\u8a2d\u8a08\u3057\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter05/#_7","title":"\u5546\u54c1\u30de\u30b9\u30bf\u306e\u69cb\u9020","text":""},{"location":"article/part2/chapter05/#_8","title":"\u5546\u54c1\u533a\u5206\u3068\u7a0e\u533a\u5206","text":"<p>\u5546\u54c1\u306b\u306f\u300c\u5546\u54c1\u533a\u5206\u300d\u3068\u300c\u7a0e\u533a\u5206\u300d\u3068\u3044\u30462\u3064\u306e\u533a\u5206\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter05/#_9","title":"\u5546\u54c1\u533a\u5206","text":"\u533a\u5206\u5024 \u8aac\u660e \u5546\u54c1 \u4ed5\u5165\u308c\u3066\u8ca9\u58f2\u3059\u308b\u5546\u54c1 \u88fd\u54c1 \u81ea\u793e\u3067\u88fd\u9020\u3057\u305f\u88fd\u54c1 \u30b5\u30fc\u30d3\u30b9 \u7121\u5f62\u306e\u30b5\u30fc\u30d3\u30b9 \u8af8\u53e3 \u305d\u306e\u4ed6\u306e\u4e00\u6642\u7684\u306a\u5546\u54c1"},{"location":"article/part2/chapter05/#_10","title":"\u7a0e\u533a\u5206","text":"\u533a\u5206\u5024 \u8aac\u660e \u5916\u7a0e \u7a0e\u629c\u4fa1\u683c\u3067\u7ba1\u7406\u3057\u3001\u5225\u9014\u6d88\u8cbb\u7a0e\u3092\u8a08\u7b97 \u5185\u7a0e \u7a0e\u8fbc\u4fa1\u683c\u3067\u7ba1\u7406 \u975e\u8ab2\u7a0e \u6d88\u8cbb\u7a0e\u5bfe\u8c61\u5916"},{"location":"article/part2/chapter05/#_11","title":"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff1a\u5546\u54c1\u30de\u30b9\u30bf\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210","text":"SQL \u5b9f\u88c5 <pre><code>-- src/main/resources/db/migration/V004__create_product_master.sql\n\n-- \u5546\u54c1\u533a\u5206 ENUM\nCREATE TYPE \u5546\u54c1\u533a\u5206 AS ENUM ('\u5546\u54c1', '\u88fd\u54c1', '\u30b5\u30fc\u30d3\u30b9', '\u8af8\u53e3');\n\n-- \u7a0e\u533a\u5206 ENUM\nCREATE TYPE \u7a0e\u533a\u5206 AS ENUM ('\u5916\u7a0e', '\u5185\u7a0e', '\u975e\u8ab2\u7a0e');\n\n-- \u5546\u54c1\u5206\u985e\u30de\u30b9\u30bf\nCREATE TABLE \"\u5546\u54c1\u5206\u985e\u30de\u30b9\u30bf\" (\n    \"\u5546\u54c1\u5206\u985e\u30b3\u30fc\u30c9\" VARCHAR(10) PRIMARY KEY,\n    \"\u5546\u54c1\u5206\u985e\u540d\" VARCHAR(50) NOT NULL,\n    \"\u5546\u54c1\u5206\u985e\u968e\u5c64\" INTEGER NOT NULL DEFAULT 0,\n    \"\u5546\u54c1\u5206\u985e\u30d1\u30b9\" VARCHAR(100),\n    \"\u6700\u4e0b\u5c64\u533a\u5206\" BOOLEAN NOT NULL DEFAULT FALSE,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u4f5c\u6210\u8005\u540d\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u66f4\u65b0\u8005\u540d\" VARCHAR(50)\n);\n\n-- \u5546\u54c1\u30de\u30b9\u30bf\nCREATE TABLE \"\u5546\u54c1\u30de\u30b9\u30bf\" (\n    \"\u5546\u54c1\u30b3\u30fc\u30c9\" VARCHAR(20) PRIMARY KEY,\n    \"\u5546\u54c1\u6b63\u5f0f\u540d\" VARCHAR(200),\n    \"\u5546\u54c1\u540d\" VARCHAR(100) NOT NULL,\n    \"\u5546\u54c1\u540d\u30ab\u30ca\" VARCHAR(200),\n    \"\u5546\u54c1\u533a\u5206\" \u5546\u54c1\u533a\u5206 NOT NULL DEFAULT '\u5546\u54c1',\n    \"\u88fd\u54c1\u578b\u756a\" VARCHAR(50),\n    \"\u8ca9\u58f2\u5358\u4fa1\" DECIMAL(15, 2) DEFAULT 0,\n    \"\u4ed5\u5165\u5358\u4fa1\" DECIMAL(15, 2) DEFAULT 0,\n    \"\u7a0e\u533a\u5206\" \u7a0e\u533a\u5206 NOT NULL DEFAULT '\u5916\u7a0e',\n    \"\u5546\u54c1\u5206\u985e\u30b3\u30fc\u30c9\" VARCHAR(10) REFERENCES \"\u5546\u54c1\u5206\u985e\u30de\u30b9\u30bf\"(\"\u5546\u54c1\u5206\u985e\u30b3\u30fc\u30c9\"),\n    \"\u96d1\u533a\u5206\" BOOLEAN DEFAULT FALSE,\n    \"\u5728\u5eab\u7ba1\u7406\u5bfe\u8c61\u533a\u5206\" BOOLEAN DEFAULT TRUE,\n    \"\u5728\u5eab\u5f15\u5f53\u533a\u5206\" BOOLEAN DEFAULT TRUE,\n    \"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\" VARCHAR(20),\n    \"\u4ed5\u5165\u5148\u679d\u756a\" VARCHAR(10),\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u4f5c\u6210\u8005\u540d\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u66f4\u65b0\u8005\u540d\" VARCHAR(50)\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX idx_\u5546\u54c1\u30de\u30b9\u30bf_\u5546\u54c1\u533a\u5206 ON \"\u5546\u54c1\u30de\u30b9\u30bf\"(\"\u5546\u54c1\u533a\u5206\");\nCREATE INDEX idx_\u5546\u54c1\u30de\u30b9\u30bf_\u5546\u54c1\u5206\u985e\u30b3\u30fc\u30c9 ON \"\u5546\u54c1\u30de\u30b9\u30bf\"(\"\u5546\u54c1\u5206\u985e\u30b3\u30fc\u30c9\");\nCREATE INDEX idx_\u5546\u54c1\u5206\u985e\u30de\u30b9\u30bf_\u5546\u54c1\u5206\u985e\u30d1\u30b9 ON \"\u5546\u54c1\u5206\u985e\u30de\u30b9\u30bf\"(\"\u5546\u54c1\u5206\u985e\u30d1\u30b9\");\n</code></pre>"},{"location":"article/part2/chapter05/#tdd_1","title":"TDD\uff1a\u5546\u54c1\u306e\u767b\u9332\u3068\u53d6\u5f97","text":""},{"location":"article/part2/chapter05/#red_1","title":"Red: \u5931\u6557\u3059\u308b\u30c6\u30b9\u30c8\u3092\u66f8\u304f","text":"ProductRepositoryTest.java <pre><code>// src/test/java/com/example/sms/infrastructure/persistence/repository/ProductRepositoryTest.java\npackage com.example.sms.infrastructure.persistence.repository;\n\nimport com.example.sms.application.port.out.ProductRepository;\nimport com.example.sms.domain.model.product.Product;\nimport com.example.sms.domain.model.product.ProductCategory;\nimport com.example.sms.domain.model.product.TaxCategory;\nimport com.example.sms.testsetup.BaseIntegrationTest;\nimport org.junit.jupiter.api.*;\nimport org.springframework.beans.factory.annotation.Autowired;\n\nimport java.math.BigDecimal;\n\nimport static org.assertj.core.api.Assertions.*;\n\n@DisplayName(\"\u5546\u54c1\u30ea\u30dd\u30b8\u30c8\u30ea\")\nclass ProductRepositoryTest extends BaseIntegrationTest {\n\n    @Autowired\n    private ProductRepository productRepository;\n\n    @BeforeEach\n    void setUp() {\n        productRepository.deleteAll();\n    }\n\n    @Nested\n    @DisplayName(\"\u767b\u9332\")\n    class Registration {\n\n        @Test\n        @DisplayName(\"\u5546\u54c1\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterProduct() {\n            // Arrange\n            var product = Product.builder()\n                    .productCode(\"PROD001\")\n                    .productName(\"\u30c6\u30b9\u30c8\u5546\u54c1\")\n                    .productCategory(ProductCategory.PRODUCT)\n                    .sellingPrice(new BigDecimal(\"1000\"))\n                    .purchasePrice(new BigDecimal(\"700\"))\n                    .taxCategory(TaxCategory.EXCLUSIVE)\n                    .build();\n\n            // Act\n            productRepository.save(product);\n\n            // Assert\n            var result = productRepository.findByCode(\"PROD001\");\n            assertThat(result).isPresent();\n            assertThat(result.get().getProductName()).isEqualTo(\"\u30c6\u30b9\u30c8\u5546\u54c1\");\n            assertThat(result.get().getSellingPrice()).isEqualByComparingTo(new BigDecimal(\"1000\"));\n        }\n\n        @Test\n        @DisplayName(\"\u5168\u3066\u306e\u5546\u54c1\u533a\u5206\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterAllCategories() {\n            var categories = ProductCategory.values();\n\n            for (int i = 0; i &lt; categories.length; i++) {\n                var product = Product.builder()\n                        .productCode(\"CAT-\" + String.format(\"%03d\", i))\n                        .productName(\"\u5546\u54c1\" + categories[i].getDisplayName())\n                        .productCategory(categories[i])\n                        .taxCategory(TaxCategory.EXCLUSIVE)\n                        .build();\n\n                productRepository.save(product);\n\n                var result = productRepository.findByCode(product.getProductCode());\n                assertThat(result).isPresent();\n                assertThat(result.get().getProductCategory()).isEqualTo(categories[i]);\n            }\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u7a0e\u533a\u5206\")\n    class TaxCategories {\n\n        @Test\n        @DisplayName(\"\u5916\u7a0e\u5546\u54c1\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterExclusiveTax() {\n            var product = createProduct(\"TAX001\", \"\u5916\u7a0e\u5546\u54c1\", TaxCategory.EXCLUSIVE);\n            productRepository.save(product);\n\n            var result = productRepository.findByCode(\"TAX001\");\n            assertThat(result.get().getTaxCategory()).isEqualTo(TaxCategory.EXCLUSIVE);\n        }\n\n        @Test\n        @DisplayName(\"\u5185\u7a0e\u5546\u54c1\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterInclusiveTax() {\n            var product = createProduct(\"TAX002\", \"\u5185\u7a0e\u5546\u54c1\", TaxCategory.INCLUSIVE);\n            productRepository.save(product);\n\n            var result = productRepository.findByCode(\"TAX002\");\n            assertThat(result.get().getTaxCategory()).isEqualTo(TaxCategory.INCLUSIVE);\n        }\n\n        @Test\n        @DisplayName(\"\u975e\u8ab2\u7a0e\u5546\u54c1\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterTaxFree() {\n            var product = createProduct(\"TAX003\", \"\u975e\u8ab2\u7a0e\u5546\u54c1\", TaxCategory.TAX_FREE);\n            productRepository.save(product);\n\n            var result = productRepository.findByCode(\"TAX003\");\n            assertThat(result.get().getTaxCategory()).isEqualTo(TaxCategory.TAX_FREE);\n        }\n    }\n\n    private Product createProduct(String code, String name, TaxCategory taxCategory) {\n        return Product.builder()\n                .productCode(code)\n                .productName(name)\n                .productCategory(ProductCategory.PRODUCT)\n                .taxCategory(taxCategory)\n                .build();\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter05/#green_1","title":"Green: \u30c6\u30b9\u30c8\u3092\u901a\u3059\u5b9f\u88c5","text":"Product.java\uff08\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\uff09 <pre><code>// src/main/java/com/example/sms/domain/model/product/Product.java\npackage com.example.sms.domain.model.product;\n\nimport lombok.*;\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Product {\n    private String productCode;\n    private String productFullName;\n    private String productName;\n    private String productNameKana;\n    private ProductCategory productCategory;\n    private String modelNumber;\n    @Builder.Default\n    private BigDecimal sellingPrice = BigDecimal.ZERO;\n    @Builder.Default\n    private BigDecimal purchasePrice = BigDecimal.ZERO;\n    private TaxCategory taxCategory;\n    private String classificationCode;\n    @Builder.Default\n    private boolean isMiscellaneous = false;\n    @Builder.Default\n    private boolean isInventoryManaged = true;\n    @Builder.Default\n    private boolean isInventoryAllocated = true;\n    private String supplierCode;\n    private String supplierBranchNumber;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n}\n</code></pre> ProductCategory.java\uff08\u5546\u54c1\u533a\u5206 Enum\uff09 <pre><code>// src/main/java/com/example/sms/domain/model/product/ProductCategory.java\npackage com.example.sms.domain.model.product;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum ProductCategory {\n    PRODUCT(\"\u5546\u54c1\"),\n    MANUFACTURED(\"\u88fd\u54c1\"),\n    SERVICE(\"\u30b5\u30fc\u30d3\u30b9\"),\n    MISCELLANEOUS(\"\u8af8\u53e3\");\n\n    private final String displayName;\n\n    public static ProductCategory fromDisplayName(String displayName) {\n        for (ProductCategory category : values()) {\n            if (category.displayName.equals(displayName)) {\n                return category;\n            }\n        }\n        throw new IllegalArgumentException(\"\u4e0d\u6b63\u306a\u5546\u54c1\u533a\u5206: \" + displayName);\n    }\n}\n</code></pre> TaxCategory.java\uff08\u7a0e\u533a\u5206 Enum\uff09 <pre><code>// src/main/java/com/example/sms/domain/model/product/TaxCategory.java\npackage com.example.sms.domain.model.product;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum TaxCategory {\n    EXCLUSIVE(\"\u5916\u7a0e\"),\n    INCLUSIVE(\"\u5185\u7a0e\"),\n    TAX_FREE(\"\u975e\u8ab2\u7a0e\");\n\n    private final String displayName;\n\n    public static TaxCategory fromDisplayName(String displayName) {\n        for (TaxCategory category : values()) {\n            if (category.displayName.equals(displayName)) {\n                return category;\n            }\n        }\n        throw new IllegalArgumentException(\"\u4e0d\u6b63\u306a\u7a0e\u533a\u5206: \" + displayName);\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter05/#_12","title":"\u9867\u5ba2\u5225\u8ca9\u58f2\u5358\u4fa1\u306e\u8a2d\u8a08","text":"<p>\u7279\u5b9a\u306e\u9867\u5ba2\u306b\u5bfe\u3057\u3066\u3001\u6a19\u6e96\u5358\u4fa1\u3068\u306f\u7570\u306a\u308b\u8ca9\u58f2\u5358\u4fa1\u3092\u8a2d\u5b9a\u3067\u304d\u308b\u4ed5\u7d44\u307f\u3067\u3059\u3002</p> SQL \u5b9f\u88c5 <pre><code>-- src/main/resources/db/migration/V005__create_customer_price.sql\n\n-- \u9867\u5ba2\u5225\u8ca9\u58f2\u5358\u4fa1\nCREATE TABLE \"\u9867\u5ba2\u5225\u8ca9\u58f2\u5358\u4fa1\" (\n    \"\u5546\u54c1\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL REFERENCES \"\u5546\u54c1\u30de\u30b9\u30bf\"(\"\u5546\u54c1\u30b3\u30fc\u30c9\"),\n    \"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u9069\u7528\u958b\u59cb\u65e5\" DATE NOT NULL,\n    \"\u9069\u7528\u7d42\u4e86\u65e5\" DATE,\n    \"\u8ca9\u58f2\u5358\u4fa1\" DECIMAL(15, 2) NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u4f5c\u6210\u8005\u540d\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u66f4\u65b0\u8005\u540d\" VARCHAR(50),\n    PRIMARY KEY (\"\u5546\u54c1\u30b3\u30fc\u30c9\", \"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\", \"\u9069\u7528\u958b\u59cb\u65e5\")\n);\n</code></pre>"},{"location":"article/part2/chapter05/#54","title":"5.4 \u539f\u4fa1\u7ba1\u7406\u306e\u8a2d\u8a08","text":"<p>\u5546\u54c1\u306e\u539f\u4fa1\u3092\u8a08\u7b97\u3059\u308b\u65b9\u6cd5\u306b\u306f8\u7a2e\u985e\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter05/#8","title":"8\u7a2e\u985e\u306e\u539f\u4fa1\u6cd5","text":"\u539f\u4fa1\u6cd5 \u8aac\u660e \u500b\u5225\u539f\u4fa1\u6cd5 \u500b\u3005\u306e\u5546\u54c1\u3054\u3068\u306b\u539f\u4fa1\u3092\u7ba1\u7406 \u5148\u5165\u5148\u51fa\u6cd5 \u6700\u3082\u53e4\u3044\u5728\u5eab\u304b\u3089\u9806\u306b\u6255\u3044\u51fa\u3059 \u5f8c\u5165\u5148\u51fa\u6cd5 \u6700\u3082\u65b0\u3057\u3044\u5728\u5eab\u304b\u3089\u9806\u306b\u6255\u3044\u51fa\u3059 \u7dcf\u5e73\u5747\u6cd5 \u671f\u9593\u5168\u4f53\u306e\u5e73\u5747\u539f\u4fa1\u3092\u4f7f\u7528 \u79fb\u52d5\u5e73\u5747\u6cd5 \u4ed5\u5165\u308c\u306e\u305f\u3073\u306b\u5e73\u5747\u539f\u4fa1\u3092\u518d\u8a08\u7b97 \u5358\u7d14\u5e73\u5747\u6cd5 \u5358\u7d14\u306b\u5e73\u5747\u5024\u3092\u4f7f\u7528 \u6700\u7d42\u4ed5\u5165\u539f\u4fa1\u6cd5 \u6700\u5f8c\u306b\u4ed5\u5165\u308c\u305f\u539f\u4fa1\u3092\u4f7f\u7528 \u58f2\u4fa1\u9084\u5143\u6cd5 \u58f2\u4fa1\u304b\u3089\u9006\u7b97\u3057\u3066\u539f\u4fa1\u3092\u7b97\u51fa"},{"location":"article/part2/chapter05/#_13","title":"\u539f\u4fa1\u6cd5\u306e\u9078\u629e\u57fa\u6e96","text":"<p>\u672c\u30b7\u30b9\u30c6\u30e0\u3067\u306f\u79fb\u52d5\u5e73\u5747\u6cd5\u3092\u63a1\u7528\u3057\u3001\u4ed5\u5165\u308c\u306e\u305f\u3073\u306b\u5e73\u5747\u539f\u4fa1\u3092\u518d\u8a08\u7b97\u3057\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter05/#55","title":"5.5 \u6d88\u8cbb\u7a0e\u306e\u8a2d\u8a08","text":""},{"location":"article/part2/chapter05/#_14","title":"\u7a0e\u533a\u5206\u306e\u8003\u3048\u65b9","text":"\u7a0e\u533a\u5206 \u8aac\u660e \u8a08\u7b97\u65b9\u6cd5 \u5916\u7a0e \u7a0e\u629c\u4fa1\u683c\u3067\u7ba1\u7406 \u4fa1\u683c \u00d7 \u7a0e\u7387 = \u6d88\u8cbb\u7a0e\u984d \u5185\u7a0e \u7a0e\u8fbc\u4fa1\u683c\u3067\u7ba1\u7406 \u4fa1\u683c \u00d7 \u7a0e\u7387 \u00f7 (1 + \u7a0e\u7387) = \u6d88\u8cbb\u7a0e\u984d \u975e\u8ab2\u7a0e \u6d88\u8cbb\u7a0e\u5bfe\u8c61\u5916 \u6d88\u8cbb\u7a0e\u984d = 0"},{"location":"article/part2/chapter05/#_15","title":"\u6d88\u8cbb\u7a0e\u8a08\u7b97\u306e\u5b9f\u88c5","text":"TaxCalculator.java <pre><code>// src/main/java/com/example/sms/domain/type/TaxCalculator.java\npackage com.example.sms.domain.type;\n\nimport com.example.sms.domain.model.product.TaxCategory;\nimport lombok.RequiredArgsConstructor;\nimport java.math.BigDecimal;\nimport java.math.RoundingMode;\n\n@RequiredArgsConstructor\npublic class TaxCalculator {\n\n    private final BigDecimal taxRate;\n\n    /**\n     * \u6d88\u8cbb\u7a0e\u984d\u3092\u8a08\u7b97\u3059\u308b\n     */\n    public BigDecimal calculateTax(BigDecimal price, TaxCategory taxCategory) {\n        return switch (taxCategory) {\n            case EXCLUSIVE -&gt; price.multiply(taxRate)\n                    .setScale(0, RoundingMode.DOWN);\n            case INCLUSIVE -&gt; price.multiply(taxRate)\n                    .divide(BigDecimal.ONE.add(taxRate), 0, RoundingMode.DOWN);\n            case TAX_FREE -&gt; BigDecimal.ZERO;\n        };\n    }\n\n    /**\n     * \u7a0e\u8fbc\u91d1\u984d\u3092\u8a08\u7b97\u3059\u308b\n     */\n    public BigDecimal calculateTaxIncludedPrice(BigDecimal price, TaxCategory taxCategory) {\n        return switch (taxCategory) {\n            case EXCLUSIVE -&gt; price.add(calculateTax(price, taxCategory));\n            case INCLUSIVE -&gt; price;\n            case TAX_FREE -&gt; price;\n        };\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter05/#56","title":"5.6 \u9867\u5ba2\u30de\u30b9\u30bf\u306e\u8a2d\u8a08","text":"<p>\u9867\u5ba2\u3068\u4ed5\u5165\u5148\u3092\u7d71\u5408\u7ba1\u7406\u3059\u308b\u53d6\u5f15\u5148\u30de\u30b9\u30bf\u3092\u8a2d\u8a08\u3057\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter05/#_16","title":"\u53d6\u5f15\u5148\u30de\u30b9\u30bf\u306e\u69cb\u9020","text":""},{"location":"article/part2/chapter05/#_17","title":"\u8acb\u6c42\u5148\u30fb\u56de\u53ce\u5148\u306e\u6982\u5ff5","text":"<p>\u9867\u5ba2\u30de\u30b9\u30bf\u3067\u306f\u3001\u5b9f\u969b\u306b\u5546\u54c1\u3092\u8cfc\u5165\u3059\u308b\u9867\u5ba2\u3068\u3001\u8acb\u6c42\u66f8\u3092\u9001\u4ed8\u3059\u308b\u5148\uff08\u8acb\u6c42\u5148\uff09\u3001\u4ee3\u91d1\u3092\u56de\u53ce\u3059\u308b\u5148\uff08\u56de\u53ce\u5148\uff09\u3092\u5206\u3051\u3066\u7ba1\u7406\u3067\u304d\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter05/#_18","title":"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff1a\u53d6\u5f15\u5148\u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210","text":"SQL \u5b9f\u88c5 <pre><code>-- src/main/resources/db/migration/V006__create_partner_master.sql\n\n-- \u8acb\u6c42\u533a\u5206 ENUM\nCREATE TYPE \u8acb\u6c42\u533a\u5206 AS ENUM ('\u90fd\u5ea6', '\u7de0\u3081');\n\n-- \u652f\u6255\u65b9\u6cd5 ENUM\nCREATE TYPE \u652f\u6255\u65b9\u6cd5 AS ENUM ('\u73fe\u91d1', '\u632f\u8fbc', '\u624b\u5f62', '\u5c0f\u5207\u624b', '\u305d\u306e\u4ed6');\n\n-- \u53d6\u5f15\u5148\u30b0\u30eb\u30fc\u30d7\u30de\u30b9\u30bf\nCREATE TABLE \"\u53d6\u5f15\u5148\u30b0\u30eb\u30fc\u30d7\u30de\u30b9\u30bf\" (\n    \"\u53d6\u5f15\u5148\u30b0\u30eb\u30fc\u30d7\u30b3\u30fc\u30c9\" VARCHAR(10) PRIMARY KEY,\n    \"\u53d6\u5f15\u5148\u30b0\u30eb\u30fc\u30d7\u540d\" VARCHAR(50) NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u4f5c\u6210\u8005\u540d\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u66f4\u65b0\u8005\u540d\" VARCHAR(50)\n);\n\n-- \u53d6\u5f15\u5148\u30de\u30b9\u30bf\nCREATE TABLE \"\u53d6\u5f15\u5148\u30de\u30b9\u30bf\" (\n    \"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\" VARCHAR(20) PRIMARY KEY,\n    \"\u53d6\u5f15\u5148\u540d\" VARCHAR(100) NOT NULL,\n    \"\u53d6\u5f15\u5148\u30ab\u30ca\" VARCHAR(200),\n    \"\u9867\u5ba2\u533a\u5206\" BOOLEAN DEFAULT FALSE,\n    \"\u4ed5\u5165\u5148\u533a\u5206\" BOOLEAN DEFAULT FALSE,\n    \"\u90f5\u4fbf\u756a\u53f7\" VARCHAR(10),\n    \"\u4f4f\u62401\" VARCHAR(100),\n    \"\u4f4f\u62402\" VARCHAR(100),\n    \"\u53d6\u5f15\u5148\u5206\u985e\u30b3\u30fc\u30c9\" VARCHAR(10),\n    \"\u53d6\u5f15\u7981\u6b62\u30d5\u30e9\u30b0\" BOOLEAN DEFAULT FALSE,\n    \"\u96d1\u533a\u5206\" BOOLEAN DEFAULT FALSE,\n    \"\u53d6\u5f15\u5148\u30b0\u30eb\u30fc\u30d7\u30b3\u30fc\u30c9\" VARCHAR(10) REFERENCES \"\u53d6\u5f15\u5148\u30b0\u30eb\u30fc\u30d7\u30de\u30b9\u30bf\"(\"\u53d6\u5f15\u5148\u30b0\u30eb\u30fc\u30d7\u30b3\u30fc\u30c9\"),\n    \"\u4e0e\u4fe1\u9650\u5ea6\u984d\" DECIMAL(15, 2) DEFAULT 0,\n    \"\u4e0e\u4fe1\u4e00\u6642\u5897\u52a0\u67a0\" DECIMAL(15, 2) DEFAULT 0,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u4f5c\u6210\u8005\u540d\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u66f4\u65b0\u8005\u540d\" VARCHAR(50)\n);\n\n-- \u9867\u5ba2\u30de\u30b9\u30bf\nCREATE TABLE \"\u9867\u5ba2\u30de\u30b9\u30bf\" (\n    \"\u9867\u5ba2\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL REFERENCES \"\u53d6\u5f15\u5148\u30de\u30b9\u30bf\"(\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\"),\n    \"\u9867\u5ba2\u679d\u756a\" VARCHAR(10) NOT NULL DEFAULT '00',\n    \"\u9867\u5ba2\u533a\u5206\" VARCHAR(10),\n    \"\u8acb\u6c42\u5148\u30b3\u30fc\u30c9\" VARCHAR(20),\n    \"\u8acb\u6c42\u5148\u679d\u756a\" VARCHAR(10),\n    \"\u56de\u53ce\u5148\u30b3\u30fc\u30c9\" VARCHAR(20),\n    \"\u56de\u53ce\u5148\u679d\u756a\" VARCHAR(10),\n    \"\u9867\u5ba2\u540d\" VARCHAR(100),\n    \"\u9867\u5ba2\u540d\u30ab\u30ca\" VARCHAR(200),\n    \"\u81ea\u793e\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\" VARCHAR(10),\n    \"\u9867\u5ba2\u62c5\u5f53\u8005\u540d\" VARCHAR(50),\n    \"\u9867\u5ba2\u90e8\u9580\u540d\" VARCHAR(50),\n    \"\u9867\u5ba2\u90f5\u4fbf\u756a\u53f7\" VARCHAR(10),\n    \"\u9867\u5ba2\u90fd\u9053\u5e9c\u770c\" VARCHAR(10),\n    \"\u9867\u5ba2\u4f4f\u62401\" VARCHAR(100),\n    \"\u9867\u5ba2\u4f4f\u62402\" VARCHAR(100),\n    \"\u9867\u5ba2\u96fb\u8a71\u756a\u53f7\" VARCHAR(20),\n    \"\u9867\u5ba2FAX\u756a\u53f7\" VARCHAR(20),\n    \"\u9867\u5ba2\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\" VARCHAR(100),\n    \"\u9867\u5ba2\u8acb\u6c42\u533a\u5206\" \u8acb\u6c42\u533a\u5206 DEFAULT '\u7de0\u3081',\n    \"\u9867\u5ba2\u7de0\u65e51\" INTEGER,\n    \"\u9867\u5ba2\u652f\u6255\u67081\" INTEGER,\n    \"\u9867\u5ba2\u652f\u6255\u65e51\" INTEGER,\n    \"\u9867\u5ba2\u652f\u6255\u65b9\u6cd51\" \u652f\u6255\u65b9\u6cd5,\n    \"\u9867\u5ba2\u7de0\u65e52\" INTEGER,\n    \"\u9867\u5ba2\u652f\u6255\u67082\" INTEGER,\n    \"\u9867\u5ba2\u652f\u6255\u65e52\" INTEGER,\n    \"\u9867\u5ba2\u652f\u6255\u65b9\u6cd52\" \u652f\u6255\u65b9\u6cd5,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u4f5c\u6210\u8005\u540d\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u66f4\u65b0\u8005\u540d\" VARCHAR(50),\n    PRIMARY KEY (\"\u9867\u5ba2\u30b3\u30fc\u30c9\", \"\u9867\u5ba2\u679d\u756a\")\n);\n\n-- \u4ed5\u5165\u5148\u30de\u30b9\u30bf\nCREATE TABLE \"\u4ed5\u5165\u5148\u30de\u30b9\u30bf\" (\n    \"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL REFERENCES \"\u53d6\u5f15\u5148\u30de\u30b9\u30bf\"(\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\"),\n    \"\u4ed5\u5165\u5148\u679d\u756a\" VARCHAR(10) NOT NULL DEFAULT '00',\n    \"\u4ed5\u5165\u5148\u62c5\u5f53\u8005\u540d\" VARCHAR(50),\n    \"\u90e8\u9580\u540d\" VARCHAR(50),\n    \"\u96fb\u8a71\u756a\u53f7\" VARCHAR(20),\n    \"FAX\u756a\u53f7\" VARCHAR(20),\n    \"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\" VARCHAR(100),\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u4f5c\u6210\u8005\u540d\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u66f4\u65b0\u8005\u540d\" VARCHAR(50),\n    PRIMARY KEY (\"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\", \"\u4ed5\u5165\u5148\u679d\u756a\")\n);\n\n-- \u5730\u57df\u30de\u30b9\u30bf\nCREATE TABLE \"\u5730\u57df\u30de\u30b9\u30bf\" (\n    \"\u5730\u57df\u30b3\u30fc\u30c9\" VARCHAR(10) PRIMARY KEY,\n    \"\u5730\u57df\u540d\" VARCHAR(50) NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u4f5c\u6210\u8005\u540d\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u66f4\u65b0\u8005\u540d\" VARCHAR(50)\n);\n\n-- \u51fa\u8377\u5148\u30de\u30b9\u30bf\nCREATE TABLE \"\u51fa\u8377\u5148\u30de\u30b9\u30bf\" (\n    \"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u9867\u5ba2\u679d\u756a\" VARCHAR(10) NOT NULL,\n    \"\u51fa\u8377\u5148\u756a\u53f7\" VARCHAR(10) NOT NULL,\n    \"\u51fa\u8377\u5148\u540d\" VARCHAR(100) NOT NULL,\n    \"\u5730\u57df\u30b3\u30fc\u30c9\" VARCHAR(10) REFERENCES \"\u5730\u57df\u30de\u30b9\u30bf\"(\"\u5730\u57df\u30b3\u30fc\u30c9\"),\n    \"\u51fa\u8377\u5148\u90f5\u4fbf\u756a\u53f7\" VARCHAR(10),\n    \"\u51fa\u8377\u5148\u4f4f\u62401\" VARCHAR(100),\n    \"\u51fa\u8377\u5148\u4f4f\u62402\" VARCHAR(100),\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u4f5c\u6210\u8005\u540d\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u66f4\u65b0\u8005\u540d\" VARCHAR(50),\n    PRIMARY KEY (\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\", \"\u9867\u5ba2\u679d\u756a\", \"\u51fa\u8377\u5148\u756a\u53f7\"),\n    FOREIGN KEY (\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\", \"\u9867\u5ba2\u679d\u756a\") REFERENCES \"\u9867\u5ba2\u30de\u30b9\u30bf\"(\"\u9867\u5ba2\u30b3\u30fc\u30c9\", \"\u9867\u5ba2\u679d\u756a\")\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX idx_\u53d6\u5f15\u5148\u30de\u30b9\u30bf_\u53d6\u5f15\u5148\u30b0\u30eb\u30fc\u30d7 ON \"\u53d6\u5f15\u5148\u30de\u30b9\u30bf\"(\"\u53d6\u5f15\u5148\u30b0\u30eb\u30fc\u30d7\u30b3\u30fc\u30c9\");\nCREATE INDEX idx_\u9867\u5ba2\u30de\u30b9\u30bf_\u8acb\u6c42\u5148 ON \"\u9867\u5ba2\u30de\u30b9\u30bf\"(\"\u8acb\u6c42\u5148\u30b3\u30fc\u30c9\", \"\u8acb\u6c42\u5148\u679d\u756a\");\n</code></pre>"},{"location":"article/part2/chapter05/#_19","title":"\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\uff08\u30c9\u30e1\u30a4\u30f3\u5c64\uff09","text":"Partner.java <pre><code>// src/main/java/com/example/sms/domain/model/partner/Partner.java\npackage com.example.sms.domain.model.partner;\n\nimport lombok.*;\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Partner {\n    private String partnerCode;\n    private String partnerName;\n    private String partnerNameKana;\n    @Builder.Default\n    private boolean isCustomer = false;\n    @Builder.Default\n    private boolean isSupplier = false;\n    private String postalCode;\n    private String address1;\n    private String address2;\n    private String classificationCode;\n    @Builder.Default\n    private boolean isTradingProhibited = false;\n    @Builder.Default\n    private boolean isMiscellaneous = false;\n    private String groupCode;\n    @Builder.Default\n    private BigDecimal creditLimit = BigDecimal.ZERO;\n    @Builder.Default\n    private BigDecimal temporaryCreditIncrease = BigDecimal.ZERO;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n}\n</code></pre>"},{"location":"article/part2/chapter05/#57","title":"5.7 \u53d6\u5f15\u6761\u4ef6\u306e\u8a2d\u8a08","text":"<p>\u9867\u5ba2\u3068\u306e\u53d6\u5f15\u6761\u4ef6\uff08\u7de0\u65e5\u30fb\u652f\u6255\u65e5\u306a\u3069\uff09\u3092\u7ba1\u7406\u3057\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter05/#_20","title":"\u7de0\u65e5\u30fb\u652f\u6255\u6708\u30fb\u652f\u6255\u65e5\u306e\u7ba1\u7406","text":"\u9805\u76ee \u8aac\u660e \u4f8b \u7de0\u65e5 \u8acb\u6c42\u306e\u7de0\u3081\u65e5 20\u65e5\u3001\u672b\u65e5 \u652f\u6255\u6708 \u7de0\u3081\u6708\u304b\u3089\u4f55\u30f6\u6708\u5f8c\u304b 0\uff08\u5f53\u6708\uff09\u30011\uff08\u7fcc\u6708\uff09 \u652f\u6255\u65e5 \u652f\u6255\u65e5 10\u65e5\u300125\u65e5\u3001\u672b\u65e5"},{"location":"article/part2/chapter05/#_21","title":"\u90fd\u5ea6\u8acb\u6c42\u3068\u7de0\u3081\u8acb\u6c42","text":"\u8acb\u6c42\u533a\u5206 \u8aac\u660e \u90fd\u5ea6\u8acb\u6c42 \u53d6\u5f15\u306e\u305f\u3073\u306b\u8acb\u6c42\u66f8\u3092\u767a\u884c \u7de0\u3081\u8acb\u6c42 \u7de0\u65e5\u3067\u307e\u3068\u3081\u3066\u8acb\u6c42\u66f8\u3092\u767a\u884c"},{"location":"article/part2/chapter05/#_22","title":"\u4e0e\u4fe1\u7ba1\u7406","text":""},{"location":"article/part2/chapter05/#enum","title":"\u8acb\u6c42\u533a\u5206\u30fb\u652f\u6255\u65b9\u6cd5\u306e Enum","text":"BillingType.java <pre><code>// src/main/java/com/example/sms/domain/model/partner/BillingType.java\npackage com.example.sms.domain.model.partner;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum BillingType {\n    ON_DEMAND(\"\u90fd\u5ea6\"),\n    PERIODIC(\"\u7de0\u3081\");\n\n    private final String displayName;\n\n    public static BillingType fromDisplayName(String displayName) {\n        for (BillingType type : values()) {\n            if (type.displayName.equals(displayName)) {\n                return type;\n            }\n        }\n        throw new IllegalArgumentException(\"\u4e0d\u6b63\u306a\u8acb\u6c42\u533a\u5206: \" + displayName);\n    }\n}\n</code></pre> PaymentMethod.java <pre><code>// src/main/java/com/example/sms/domain/model/partner/PaymentMethod.java\npackage com.example.sms.domain.model.partner;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum PaymentMethod {\n    CASH(\"\u73fe\u91d1\"),\n    TRANSFER(\"\u632f\u8fbc\"),\n    BILL(\"\u624b\u5f62\"),\n    CHECK(\"\u5c0f\u5207\u624b\"),\n    OTHER(\"\u305d\u306e\u4ed6\");\n\n    private final String displayName;\n\n    public static PaymentMethod fromDisplayName(String displayName) {\n        for (PaymentMethod method : values()) {\n            if (method.displayName.equals(displayName)) {\n                return method;\n            }\n        }\n        throw new IllegalArgumentException(\"\u4e0d\u6b63\u306a\u652f\u6255\u65b9\u6cd5: \" + displayName);\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter05/#5_1","title":"\u7b2c5\u7ae0\u306e\u307e\u3068\u3081","text":""},{"location":"article/part2/chapter05/#_23","title":"\u4f5c\u6210\u3057\u305f\u30c6\u30fc\u30d6\u30eb","text":"\u30c6\u30fc\u30d6\u30eb\u540d \u8aac\u660e <code>\u90e8\u9580\u30de\u30b9\u30bf</code> \u7d44\u7e54\u968e\u5c64\u3092\u7ba1\u7406\u3059\u308b\u90e8\u9580\u60c5\u5831 <code>\u793e\u54e1\u30de\u30b9\u30bf</code> \u90e8\u9580\u306b\u6240\u5c5e\u3059\u308b\u793e\u54e1\u60c5\u5831 <code>\u5546\u54c1\u5206\u985e\u30de\u30b9\u30bf</code> \u5546\u54c1\u306e\u5206\u985e\u968e\u5c64 <code>\u5546\u54c1\u30de\u30b9\u30bf</code> \u8ca9\u58f2\u5546\u54c1\u306e\u60c5\u5831 <code>\u9867\u5ba2\u5225\u8ca9\u58f2\u5358\u4fa1</code> \u9867\u5ba2\u3054\u3068\u306e\u7279\u5225\u5358\u4fa1 <code>\u53d6\u5f15\u5148\u30b0\u30eb\u30fc\u30d7\u30de\u30b9\u30bf</code> \u53d6\u5f15\u5148\u306e\u30b0\u30eb\u30fc\u30d7 <code>\u53d6\u5f15\u5148\u30de\u30b9\u30bf</code> \u9867\u5ba2\u30fb\u4ed5\u5165\u5148\u306e\u7d71\u5408\u60c5\u5831 <code>\u9867\u5ba2\u30de\u30b9\u30bf</code> \u9867\u5ba2\u56fa\u6709\u60c5\u5831 <code>\u4ed5\u5165\u5148\u30de\u30b9\u30bf</code> \u4ed5\u5165\u5148\u56fa\u6709\u60c5\u5831 <code>\u5730\u57df\u30de\u30b9\u30bf</code> \u5730\u57df\u60c5\u5831 <code>\u51fa\u8377\u5148\u30de\u30b9\u30bf</code> \u9867\u5ba2\u306e\u51fa\u8377\u5148\u60c5\u5831"},{"location":"article/part2/chapter05/#er-5","title":"ER \u56f3\uff08\u7b2c5\u7ae0\u5b8c\u4e86\u6642\u70b9\uff09","text":""},{"location":"article/part2/chapter05/#_24","title":"\u8a2d\u8a08\u306e\u30dd\u30a4\u30f3\u30c8","text":"<ol> <li>\u7d44\u7e54\u968e\u5c64\u7ba1\u7406: \u90e8\u9580\u30de\u30b9\u30bf\u306f <code>\u90e8\u9580\u30d1\u30b9</code> \u3067\u968e\u5c64\u69cb\u9020\u3092\u8868\u73fe</li> <li>\u5c65\u6b74\u7ba1\u7406: \u90e8\u9580\u30de\u30b9\u30bf\u306f <code>\u958b\u59cb\u65e5</code> \u306b\u3088\u308b\u4e16\u4ee3\u7ba1\u7406\u3092\u63a1\u7528</li> <li>\u7d71\u5408\u30de\u30b9\u30bf: \u53d6\u5f15\u5148\u30de\u30b9\u30bf\u3067\u9867\u5ba2\u30fb\u4ed5\u5165\u5148\u3092\u7d71\u5408\u7ba1\u7406</li> <li>\u65e5\u672c\u8a9e DB / \u82f1\u8a9e Java: \u30c6\u30fc\u30d6\u30eb\u30fb\u30ab\u30e9\u30e0\u306f\u65e5\u672c\u8a9e\u3001Java \u30b3\u30fc\u30c9\u306f\u82f1\u8a9e\u3067\u7d71\u4e00</li> <li>PostgreSQL ENUM: \u533a\u5206\u5024\u306f\u65e5\u672c\u8a9e ENUM \u578b\u3067\u578b\u5b89\u5168\u6027\u3092\u78ba\u4fdd</li> <li>\u4e0e\u4fe1\u7ba1\u7406: \u4e0e\u4fe1\u9650\u5ea6\u984d\u3068\u4e00\u6642\u5897\u52a0\u67a0\u3067\u67d4\u8edf\u306a\u4e0e\u4fe1\u7ba1\u7406\u3092\u5b9f\u73fe</li> </ol>"},{"location":"article/part2/chapter05/#_25","title":"\u6b21\u7ae0\u306e\u4e88\u544a","text":"<p>\u7b2c6\u7ae0\u3067\u306f\u3001\u53d7\u6ce8\u30fb\u51fa\u8377\u30fb\u58f2\u4e0a\u306e\u8a2d\u8a08\u306b\u9032\u307f\u307e\u3059\u3002\u8ca9\u58f2\u7ba1\u7406\u306e\u4e2d\u6838\u3068\u306a\u308b\u696d\u52d9\u30d5\u30ed\u30fc\u3092 TDD \u3067\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\u3002</p> <p>\u2190 \u7b2c4\u7ae0\uff1a\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3 | \u7b2c6\u7ae0\uff1a\u53d7\u6ce8\u30fb\u51fa\u8377\u30fb\u58f2\u4e0a\u306e\u8a2d\u8a08 \u2192</p>"},{"location":"article/part2/chapter06/","title":"\u7b2c6\u7ae0\uff1a\u53d7\u6ce8\u30fb\u51fa\u8377\u30fb\u58f2\u4e0a\u306e\u8a2d\u8a08","text":"<p>\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u4e2d\u6838\u3068\u306a\u308b\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u3092\u8a2d\u8a08\u3057\u3066\u3044\u304d\u307e\u3059\u3002\u672c\u7ae0\u3067\u306f\u3001\u53d7\u6ce8\u304b\u3089\u51fa\u8377\u3001\u58f2\u4e0a\u8a08\u4e0a\u307e\u3067\u306e\u4e00\u9023\u306e\u696d\u52d9\u30d5\u30ed\u30fc\u306b\u5bfe\u5fdc\u3057\u305f\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\u3068\u5b9f\u88c5\u3092\u884c\u3044\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter06/#_1","title":"\u8ca9\u58f2\u696d\u52d9\u306e\u5168\u4f53\u30d5\u30ed\u30fc","text":"<p>\u8ca9\u58f2\u696d\u52d9\u306f\u300c\u898b\u7a4d \u2192 \u53d7\u6ce8 \u2192 \u51fa\u8377 \u2192 \u58f2\u4e0a\u300d\u3068\u3044\u3046\u4e00\u9023\u306e\u30d5\u30ed\u30fc\u3067\u69cb\u6210\u3055\u308c\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter06/#_2","title":"\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u306e\u7279\u5fb4","text":"<p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u306b\u306f\u4ee5\u4e0b\u306e\u5171\u901a\u3057\u305f\u7279\u5fb4\u304c\u3042\u308a\u307e\u3059\u3002</p> \u7279\u5fb4 \u8aac\u660e \u30d8\u30c3\u30c0\u30fb\u660e\u7d30\u69cb\u9020 1\u3064\u306e\u53d6\u5f15\u306b\u8907\u6570\u306e\u5546\u54c1\u304c\u542b\u307e\u308c\u308b\u305f\u3081\u3001\u30d8\u30c3\u30c0\uff08\u89aa\uff09\u3068\u660e\u7d30\uff08\u5b50\uff09\u306e\u69cb\u9020\u3092\u6301\u3064 \u30b9\u30c6\u30fc\u30bf\u30b9\u7ba1\u7406 \u696d\u52d9\u306e\u9032\u6357\u72b6\u614b\u3092\u7ba1\u7406\u3059\u308b\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u6301\u3064 \u9023\u756a\u7ba1\u7406 \u4f1d\u7968\u756a\u53f7\u306a\u3069\u306e\u9023\u756a\u3092\u81ea\u52d5\u63a1\u756a\u3059\u308b \u65e5\u6642\u7ba1\u7406 \u4f5c\u6210\u65e5\u6642\u3001\u66f4\u65b0\u65e5\u6642\u306a\u3069\u76e3\u67fb\u8a3c\u8de1\u3092\u6b8b\u3059 \u30de\u30b9\u30bf\u53c2\u7167 \u9867\u5ba2\u30fb\u5546\u54c1\u30fb\u793e\u54e1\u306a\u3069\u306e\u30de\u30b9\u30bf\u3092\u53c2\u7167\u3059\u308b"},{"location":"article/part2/chapter06/#61-db","title":"6.1 \u53d7\u6ce8\u696d\u52d9\u306e DB \u8a2d\u8a08","text":""},{"location":"article/part2/chapter06/#_3","title":"\u53d7\u6ce8\u696d\u52d9\u30d5\u30ed\u30fc\u306e\u7406\u89e3","text":"<p>\u53d7\u6ce8\u696d\u52d9\u306f\u3001\u9867\u5ba2\u304b\u3089\u306e\u6ce8\u6587\u3092\u53d7\u3051\u4ed8\u3051\u3001\u30b7\u30b9\u30c6\u30e0\u306b\u767b\u9332\u3059\u308b\u696d\u52d9\u3067\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter06/#_4","title":"\u53d7\u6ce8\u30c7\u30fc\u30bf\u30fb\u53d7\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\u306e\u69cb\u9020","text":""},{"location":"article/part2/chapter06/#er","title":"\u53d7\u6ce8\u30c7\u30fc\u30bf\u306e ER \u56f3","text":""},{"location":"article/part2/chapter06/#_5","title":"\u53d7\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\u306e\u5b9a\u7fa9","text":"\u30b9\u30c6\u30fc\u30bf\u30b9 \u8aac\u660e \u53d7\u4ed8\u6e08 \u53d7\u6ce8\u767b\u9332\u304c\u5b8c\u4e86\u3057\u305f\u72b6\u614b \u5f15\u5f53\u6e08 \u5728\u5eab\u5f15\u5f53\u304c\u5b8c\u4e86\u3057\u305f\u72b6\u614b \u51fa\u8377\u6307\u793a\u6e08 \u51fa\u8377\u6307\u793a\u304c\u4f5c\u6210\u3055\u308c\u305f\u72b6\u614b \u51fa\u8377\u6e08 \u51fa\u8377\u304c\u5b8c\u4e86\u3057\u305f\u72b6\u614b \u30ad\u30e3\u30f3\u30bb\u30eb \u53d7\u6ce8\u304c\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u305f\u72b6\u614b"},{"location":"article/part2/chapter06/#_6","title":"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff1a\u53d7\u6ce8\u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210","text":"V007__create_quotation_order_tables.sql <pre><code>-- src/main/resources/db/migration/V007__create_quotation_order_tables.sql\n\n-- \u898b\u7a4d\u30b9\u30c6\u30fc\u30bf\u30b9\nCREATE TYPE \u898b\u7a4d\u30b9\u30c6\u30fc\u30bf\u30b9 AS ENUM ('\u5546\u8ac7\u4e2d', '\u53d7\u6ce8\u78ba\u5b9a', '\u5931\u6ce8', '\u671f\u9650\u5207\u308c');\n\n-- \u53d7\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\nCREATE TYPE \u53d7\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9 AS ENUM ('\u53d7\u4ed8\u6e08', '\u5f15\u5f53\u6e08', '\u51fa\u8377\u6307\u793a\u6e08', '\u51fa\u8377\u6e08', '\u30ad\u30e3\u30f3\u30bb\u30eb');\n\n-- \u898b\u7a4d\u30c7\u30fc\u30bf\uff08\u30d8\u30c3\u30c0\uff09\nCREATE TABLE \"\u898b\u7a4d\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u898b\u7a4d\u756a\u53f7\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u898b\u7a4d\u65e5\" DATE NOT NULL,\n    \"\u898b\u7a4d\u6709\u52b9\u671f\u9650\" DATE,\n    \"\u9867\u5ba2\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u9867\u5ba2\u679d\u756a\" VARCHAR(10) DEFAULT '00',\n    \"\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\" VARCHAR(20),\n    \"\u4ef6\u540d\" VARCHAR(200),\n    \"\u898b\u7a4d\u91d1\u984d\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u6d88\u8cbb\u7a0e\u984d\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u898b\u7a4d\u5408\u8a08\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u30b9\u30c6\u30fc\u30bf\u30b9\" \u898b\u7a4d\u30b9\u30c6\u30fc\u30bf\u30b9 DEFAULT '\u5546\u8ac7\u4e2d' NOT NULL,\n    \"\u5099\u8003\" TEXT,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u8005\" VARCHAR(50),\n    CONSTRAINT \"fk_\u898b\u7a4d\u30c7\u30fc\u30bf_\u9867\u5ba2\"\n        FOREIGN KEY (\"\u9867\u5ba2\u30b3\u30fc\u30c9\", \"\u9867\u5ba2\u679d\u756a\") REFERENCES \"\u9867\u5ba2\u30de\u30b9\u30bf\"(\"\u9867\u5ba2\u30b3\u30fc\u30c9\", \"\u9867\u5ba2\u679d\u756a\")\n);\n\n-- \u898b\u7a4d\u660e\u7d30\nCREATE TABLE \"\u898b\u7a4d\u660e\u7d30\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u898b\u7a4dID\" INTEGER NOT NULL,\n    \"\u884c\u756a\u53f7\" INTEGER NOT NULL,\n    \"\u5546\u54c1\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u5546\u54c1\u540d\" VARCHAR(100) NOT NULL,\n    \"\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u5358\u4f4d\" VARCHAR(10),\n    \"\u5358\u4fa1\" DECIMAL(15, 2) NOT NULL,\n    \"\u91d1\u984d\" DECIMAL(15, 2) NOT NULL,\n    \"\u7a0e\u533a\u5206\" \u7a0e\u533a\u5206 DEFAULT '\u5916\u7a0e' NOT NULL,\n    \"\u6d88\u8cbb\u7a0e\u7387\" DECIMAL(5, 2) DEFAULT 10.00 NOT NULL,\n    \"\u6d88\u8cbb\u7a0e\u984d\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u5099\u8003\" TEXT,\n    CONSTRAINT \"fk_\u898b\u7a4d\u660e\u7d30_\u898b\u7a4d\"\n        FOREIGN KEY (\"\u898b\u7a4dID\") REFERENCES \"\u898b\u7a4d\u30c7\u30fc\u30bf\"(\"ID\") ON DELETE CASCADE,\n    CONSTRAINT \"fk_\u898b\u7a4d\u660e\u7d30_\u5546\u54c1\"\n        FOREIGN KEY (\"\u5546\u54c1\u30b3\u30fc\u30c9\") REFERENCES \"\u5546\u54c1\u30de\u30b9\u30bf\"(\"\u5546\u54c1\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"uq_\u898b\u7a4d\u660e\u7d30_\u884c\u756a\u53f7\" UNIQUE (\"\u898b\u7a4dID\", \"\u884c\u756a\u53f7\")\n);\n\n-- \u53d7\u6ce8\u30c7\u30fc\u30bf\uff08\u30d8\u30c3\u30c0\uff09\nCREATE TABLE \"\u53d7\u6ce8\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u53d7\u6ce8\u756a\u53f7\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u53d7\u6ce8\u65e5\" DATE NOT NULL,\n    \"\u9867\u5ba2\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u9867\u5ba2\u679d\u756a\" VARCHAR(10) DEFAULT '00',\n    \"\u51fa\u8377\u5148\u756a\u53f7\" VARCHAR(10),\n    \"\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\" VARCHAR(20),\n    \"\u5e0c\u671b\u7d0d\u671f\" DATE,\n    \"\u51fa\u8377\u4e88\u5b9a\u65e5\" DATE,\n    \"\u53d7\u6ce8\u91d1\u984d\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u6d88\u8cbb\u7a0e\u984d\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u53d7\u6ce8\u5408\u8a08\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u30b9\u30c6\u30fc\u30bf\u30b9\" \u53d7\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9 DEFAULT '\u53d7\u4ed8\u6e08' NOT NULL,\n    \"\u898b\u7a4dID\" INTEGER,\n    \"\u9867\u5ba2\u6ce8\u6587\u756a\u53f7\" VARCHAR(50),\n    \"\u5099\u8003\" TEXT,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u8005\" VARCHAR(50),\n    CONSTRAINT \"fk_\u53d7\u6ce8\u30c7\u30fc\u30bf_\u9867\u5ba2\"\n        FOREIGN KEY (\"\u9867\u5ba2\u30b3\u30fc\u30c9\", \"\u9867\u5ba2\u679d\u756a\") REFERENCES \"\u9867\u5ba2\u30de\u30b9\u30bf\"(\"\u9867\u5ba2\u30b3\u30fc\u30c9\", \"\u9867\u5ba2\u679d\u756a\"),\n    CONSTRAINT \"fk_\u53d7\u6ce8\u30c7\u30fc\u30bf_\u51fa\u8377\u5148\"\n        FOREIGN KEY (\"\u9867\u5ba2\u30b3\u30fc\u30c9\", \"\u9867\u5ba2\u679d\u756a\", \"\u51fa\u8377\u5148\u756a\u53f7\") REFERENCES \"\u51fa\u8377\u5148\u30de\u30b9\u30bf\"(\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\", \"\u9867\u5ba2\u679d\u756a\", \"\u51fa\u8377\u5148\u756a\u53f7\"),\n    CONSTRAINT \"fk_\u53d7\u6ce8\u30c7\u30fc\u30bf_\u898b\u7a4d\"\n        FOREIGN KEY (\"\u898b\u7a4dID\") REFERENCES \"\u898b\u7a4d\u30c7\u30fc\u30bf\"(\"ID\")\n);\n\n-- \u53d7\u6ce8\u660e\u7d30\nCREATE TABLE \"\u53d7\u6ce8\u660e\u7d30\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u53d7\u6ce8ID\" INTEGER NOT NULL,\n    \"\u884c\u756a\u53f7\" INTEGER NOT NULL,\n    \"\u5546\u54c1\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u5546\u54c1\u540d\" VARCHAR(100) NOT NULL,\n    \"\u53d7\u6ce8\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u5f15\u5f53\u6570\u91cf\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u51fa\u8377\u6570\u91cf\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u6b8b\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u5358\u4f4d\" VARCHAR(10),\n    \"\u5358\u4fa1\" DECIMAL(15, 2) NOT NULL,\n    \"\u91d1\u984d\" DECIMAL(15, 2) NOT NULL,\n    \"\u7a0e\u533a\u5206\" \u7a0e\u533a\u5206 DEFAULT '\u5916\u7a0e' NOT NULL,\n    \"\u6d88\u8cbb\u7a0e\u7387\" DECIMAL(5, 2) DEFAULT 10.00 NOT NULL,\n    \"\u6d88\u8cbb\u7a0e\u984d\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u5009\u5eab\u30b3\u30fc\u30c9\" VARCHAR(20),\n    \"\u5e0c\u671b\u7d0d\u671f\" DATE,\n    \"\u5099\u8003\" TEXT,\n    CONSTRAINT \"fk_\u53d7\u6ce8\u660e\u7d30_\u53d7\u6ce8\"\n        FOREIGN KEY (\"\u53d7\u6ce8ID\") REFERENCES \"\u53d7\u6ce8\u30c7\u30fc\u30bf\"(\"ID\") ON DELETE CASCADE,\n    CONSTRAINT \"fk_\u53d7\u6ce8\u660e\u7d30_\u5546\u54c1\"\n        FOREIGN KEY (\"\u5546\u54c1\u30b3\u30fc\u30c9\") REFERENCES \"\u5546\u54c1\u30de\u30b9\u30bf\"(\"\u5546\u54c1\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"uq_\u53d7\u6ce8\u660e\u7d30_\u884c\u756a\u53f7\" UNIQUE (\"\u53d7\u6ce8ID\", \"\u884c\u756a\u53f7\")\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"idx_\u898b\u7a4d\u30c7\u30fc\u30bf_\u9867\u5ba2\u30b3\u30fc\u30c9\" ON \"\u898b\u7a4d\u30c7\u30fc\u30bf\"(\"\u9867\u5ba2\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u898b\u7a4d\u30c7\u30fc\u30bf_\u898b\u7a4d\u65e5\" ON \"\u898b\u7a4d\u30c7\u30fc\u30bf\"(\"\u898b\u7a4d\u65e5\");\nCREATE INDEX \"idx_\u898b\u7a4d\u30c7\u30fc\u30bf_\u30b9\u30c6\u30fc\u30bf\u30b9\" ON \"\u898b\u7a4d\u30c7\u30fc\u30bf\"(\"\u30b9\u30c6\u30fc\u30bf\u30b9\");\nCREATE INDEX \"idx_\u53d7\u6ce8\u30c7\u30fc\u30bf_\u9867\u5ba2\u30b3\u30fc\u30c9\" ON \"\u53d7\u6ce8\u30c7\u30fc\u30bf\"(\"\u9867\u5ba2\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u53d7\u6ce8\u30c7\u30fc\u30bf_\u53d7\u6ce8\u65e5\" ON \"\u53d7\u6ce8\u30c7\u30fc\u30bf\"(\"\u53d7\u6ce8\u65e5\");\nCREATE INDEX \"idx_\u53d7\u6ce8\u30c7\u30fc\u30bf_\u30b9\u30c6\u30fc\u30bf\u30b9\" ON \"\u53d7\u6ce8\u30c7\u30fc\u30bf\"(\"\u30b9\u30c6\u30fc\u30bf\u30b9\");\nCREATE INDEX \"idx_\u53d7\u6ce8\u30c7\u30fc\u30bf_\u5e0c\u671b\u7d0d\u671f\" ON \"\u53d7\u6ce8\u30c7\u30fc\u30bf\"(\"\u5e0c\u671b\u7d0d\u671f\");\n</code></pre>"},{"location":"article/part2/chapter06/#enum","title":"\u53d7\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9 Enum","text":"OrderStatus.java <pre><code>// src/main/java/com/example/sms/domain/model/sales/OrderStatus.java\npackage com.example.sms.domain.model.sales;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum OrderStatus {\n    RECEIVED(\"\u53d7\u4ed8\u6e08\"),\n    ALLOCATED(\"\u5f15\u5f53\u6e08\"),\n    SHIPMENT_INSTRUCTED(\"\u51fa\u8377\u6307\u793a\u6e08\"),\n    SHIPPED(\"\u51fa\u8377\u6e08\"),\n    CANCELLED(\"\u30ad\u30e3\u30f3\u30bb\u30eb\");\n\n    private final String displayName;\n\n    public static OrderStatus fromDisplayName(String displayName) {\n        for (OrderStatus status : values()) {\n            if (status.displayName.equals(displayName)) {\n                return status;\n            }\n        }\n        throw new IllegalArgumentException(\"Unknown order status: \" + displayName);\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter06/#_7","title":"\u53d7\u6ce8\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3","text":"SalesOrder.java <pre><code>// src/main/java/com/example/sms/domain/model/sales/SalesOrder.java\npackage com.example.sms.domain.model.sales;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\n@SuppressWarnings(\"PMD.RedundantFieldInitializer\")\npublic class SalesOrder {\n    private Integer id;\n    private String orderNumber;\n    private LocalDate orderDate;\n    private String customerCode;\n    private String customerBranchNumber;\n    private String shippingDestinationNumber;\n    private String representativeCode;\n    private LocalDate requestedDeliveryDate;\n    private LocalDate scheduledShippingDate;\n    @Builder.Default\n    private BigDecimal orderAmount = BigDecimal.ZERO;\n    @Builder.Default\n    private BigDecimal taxAmount = BigDecimal.ZERO;\n    @Builder.Default\n    private BigDecimal totalAmount = BigDecimal.ZERO;\n    @Builder.Default\n    private OrderStatus status = OrderStatus.RECEIVED;\n    private Integer quotationId;\n    private String customerOrderNumber;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n\n    @Builder.Default\n    private List&lt;SalesOrderDetail&gt; details = new ArrayList&lt;&gt;();\n}\n</code></pre> SalesOrderDetail.java <pre><code>// src/main/java/com/example/sms/domain/model/sales/SalesOrderDetail.java\npackage com.example.sms.domain.model.sales;\n\nimport com.example.sms.domain.model.product.TaxCategory;\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class SalesOrderDetail {\n    private Integer id;\n    private Integer orderId;\n    private Integer lineNumber;\n    private String productCode;\n    private String productName;\n    private BigDecimal orderQuantity;\n    private BigDecimal allocatedQuantity;\n    private BigDecimal shippedQuantity;\n    private BigDecimal remainingQuantity;\n    private String unit;\n    private BigDecimal unitPrice;\n    private BigDecimal amount;\n    private TaxCategory taxCategory;\n    private BigDecimal taxRate;\n    private BigDecimal taxAmount;\n    private String warehouseCode;\n    private LocalDate requestedDeliveryDate;\n    private String remarks;\n}\n</code></pre>"},{"location":"article/part2/chapter06/#typehandler","title":"TypeHandler \u306e\u5b9f\u88c5","text":"<p>\u65e5\u672c\u8a9e\u306e ENUM \u5024\u3092 Java \u306e Enum \u306b\u5909\u63db\u3059\u308b\u305f\u3081\u306e TypeHandler \u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002</p> OrderStatusTypeHandler.java <pre><code>// src/main/java/com/example/sms/infrastructure/out/persistence/typehandler/OrderStatusTypeHandler.java\npackage com.example.sms.infrastructure.out.persistence.typehandler;\n\nimport com.example.sms.domain.model.sales.OrderStatus;\nimport org.apache.ibatis.type.BaseTypeHandler;\nimport org.apache.ibatis.type.JdbcType;\nimport org.apache.ibatis.type.MappedTypes;\n\nimport java.sql.*;\n\n@MappedTypes(OrderStatus.class)\npublic class OrderStatusTypeHandler extends BaseTypeHandler&lt;OrderStatus&gt; {\n\n    @Override\n    public void setNonNullParameter(PreparedStatement ps, int i,\n                                     OrderStatus parameter, JdbcType jdbcType) throws SQLException {\n        ps.setObject(i, parameter.getDisplayName(), Types.OTHER);\n    }\n\n    @Override\n    public OrderStatus getNullableResult(ResultSet rs, String columnName) throws SQLException {\n        String value = rs.getString(columnName);\n        return value == null ? null : OrderStatus.fromDisplayName(value);\n    }\n\n    @Override\n    public OrderStatus getNullableResult(ResultSet rs, int columnIndex) throws SQLException {\n        String value = rs.getString(columnIndex);\n        return value == null ? null : OrderStatus.fromDisplayName(value);\n    }\n\n    @Override\n    public OrderStatus getNullableResult(CallableStatement cs, int columnIndex) throws SQLException {\n        String value = cs.getString(columnIndex);\n        return value == null ? null : OrderStatus.fromDisplayName(value);\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter06/#tdd","title":"TDD\uff1a\u53d7\u6ce8\u306e\u767b\u9332\u3068\u53d6\u5f97","text":""},{"location":"article/part2/chapter06/#red","title":"Red: \u5931\u6557\u3059\u308b\u30c6\u30b9\u30c8\u3092\u66f8\u304f","text":"SalesOrderRepositoryTest.java <pre><code>// src/test/java/com/example/sms/infrastructure/persistence/repository/SalesOrderRepositoryTest.java\npackage com.example.sms.infrastructure.persistence.repository;\n\nimport com.example.sms.application.port.out.SalesOrderRepository;\nimport com.example.sms.domain.model.product.TaxCategory;\nimport com.example.sms.domain.model.sales.*;\nimport com.example.sms.testsetup.BaseIntegrationTest;\nimport org.junit.jupiter.api.*;\nimport org.springframework.beans.factory.annotation.Autowired;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\n\nimport static org.assertj.core.api.Assertions.*;\n\n@DisplayName(\"\u53d7\u6ce8\u30ea\u30dd\u30b8\u30c8\u30ea\")\nclass SalesOrderRepositoryTest extends BaseIntegrationTest {\n\n    @Autowired\n    private SalesOrderRepository salesOrderRepository;\n\n    @BeforeEach\n    void setUp() {\n        salesOrderRepository.deleteAll();\n    }\n\n    @Nested\n    @DisplayName(\"\u53d7\u6ce8\u306e\u767b\u9332\")\n    class OrderRegistration {\n\n        @Test\n        @DisplayName(\"\u53d7\u6ce8\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterOrder() {\n            // Arrange\n            var order = SalesOrder.builder()\n                    .orderNumber(\"SO-2025-0001\")\n                    .orderDate(LocalDate.of(2025, 1, 20))\n                    .customerCode(\"CUST-001\")\n                    .requestedDeliveryDate(LocalDate.of(2025, 1, 30))\n                    .subtotal(new BigDecimal(\"50000\"))\n                    .taxAmount(new BigDecimal(\"5000\"))\n                    .totalAmount(new BigDecimal(\"55000\"))\n                    .status(OrderStatus.RECEIVED)\n                    .build();\n\n            // Act\n            salesOrderRepository.save(order);\n\n            // Assert\n            var result = salesOrderRepository.findByOrderNumber(\"SO-2025-0001\");\n            assertThat(result).isPresent();\n            assertThat(result.get().getOrderNumber()).isEqualTo(\"SO-2025-0001\");\n            assertThat(result.get().getCustomerCode()).isEqualTo(\"CUST-001\");\n            assertThat(result.get().getTotalAmount()).isEqualByComparingTo(new BigDecimal(\"55000\"));\n            assertThat(result.get().getStatus()).isEqualTo(OrderStatus.RECEIVED);\n        }\n\n        @Test\n        @DisplayName(\"\u53d7\u6ce8\u660e\u7d30\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterOrderWithDetails() {\n            // Arrange\n            var order = SalesOrder.builder()\n                    .orderNumber(\"SO-2025-0002\")\n                    .orderDate(LocalDate.of(2025, 1, 20))\n                    .customerCode(\"CUST-001\")\n                    .subtotal(new BigDecimal(\"10000\"))\n                    .taxAmount(new BigDecimal(\"1000\"))\n                    .totalAmount(new BigDecimal(\"11000\"))\n                    .status(OrderStatus.RECEIVED)\n                    .build();\n            salesOrderRepository.save(order);\n\n            var detail = SalesOrderDetail.builder()\n                    .orderId(order.getId())\n                    .lineNumber(1)\n                    .productCode(\"PROD-001\")\n                    .productName(\"\u30c6\u30b9\u30c8\u5546\u54c1A\")\n                    .orderQuantity(new BigDecimal(\"10\"))\n                    .allocatedQuantity(BigDecimal.ZERO)\n                    .shippedQuantity(BigDecimal.ZERO)\n                    .remainingQuantity(new BigDecimal(\"10\"))\n                    .unit(\"\u500b\")\n                    .unitPrice(new BigDecimal(\"1000\"))\n                    .amount(new BigDecimal(\"10000\"))\n                    .taxCategory(TaxCategory.EXCLUSIVE)\n                    .taxRate(new BigDecimal(\"10.00\"))\n                    .taxAmount(new BigDecimal(\"1000\"))\n                    .warehouseCode(\"WH-001\")\n                    .build();\n\n            // Act\n            salesOrderRepository.saveDetail(detail);\n\n            // Assert\n            var result = salesOrderRepository.findByIdWithDetails(order.getId());\n            assertThat(result).isPresent();\n            assertThat(result.get().getDetails()).hasSize(1);\n            assertThat(result.get().getDetails().get(0).getProductCode()).isEqualTo(\"PROD-001\");\n            assertThat(result.get().getDetails().get(0).getOrderQuantity())\n                    .isEqualByComparingTo(new BigDecimal(\"10\"));\n        }\n\n        @Test\n        @DisplayName(\"\u53d7\u6ce8\u660e\u7d30\u306e\u6570\u91cf\u3092\u66f4\u65b0\u3067\u304d\u308b\")\n        void canUpdateDetailQuantities() {\n            // Arrange\n            var order = SalesOrder.builder()\n                    .orderNumber(\"SO-2025-0003\")\n                    .orderDate(LocalDate.of(2025, 1, 20))\n                    .customerCode(\"CUST-001\")\n                    .subtotal(new BigDecimal(\"10000\"))\n                    .taxAmount(new BigDecimal(\"1000\"))\n                    .totalAmount(new BigDecimal(\"11000\"))\n                    .status(OrderStatus.RECEIVED)\n                    .build();\n            salesOrderRepository.save(order);\n\n            var detail = SalesOrderDetail.builder()\n                    .orderId(order.getId())\n                    .lineNumber(1)\n                    .productCode(\"PROD-001\")\n                    .productName(\"\u30c6\u30b9\u30c8\u5546\u54c1A\")\n                    .orderQuantity(new BigDecimal(\"10\"))\n                    .allocatedQuantity(BigDecimal.ZERO)\n                    .shippedQuantity(BigDecimal.ZERO)\n                    .remainingQuantity(new BigDecimal(\"10\"))\n                    .unit(\"\u500b\")\n                    .unitPrice(new BigDecimal(\"1000\"))\n                    .amount(new BigDecimal(\"10000\"))\n                    .taxCategory(TaxCategory.EXCLUSIVE)\n                    .taxRate(new BigDecimal(\"10.00\"))\n                    .taxAmount(new BigDecimal(\"1000\"))\n                    .build();\n            salesOrderRepository.saveDetail(detail);\n\n            // Act: 5\u500b\u5f15\u5f53\n            salesOrderRepository.updateDetailQuantities(\n                    detail.getId(),\n                    new BigDecimal(\"5\"),   // \u5f15\u5f53\u6570\u91cf\n                    BigDecimal.ZERO,       // \u51fa\u8377\u6570\u91cf\n                    new BigDecimal(\"5\")    // \u6b8b\u6570\u91cf\n            );\n\n            // Assert\n            var result = salesOrderRepository.findByIdWithDetails(order.getId());\n            assertThat(result).isPresent();\n            var updatedDetail = result.get().getDetails().get(0);\n            assertThat(updatedDetail.getAllocatedQuantity()).isEqualByComparingTo(new BigDecimal(\"5\"));\n            assertThat(updatedDetail.getRemainingQuantity()).isEqualByComparingTo(new BigDecimal(\"5\"));\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u53d7\u6ce8\u306e\u691c\u7d22\")\n    class OrderSearch {\n\n        @Test\n        @DisplayName(\"\u7d0d\u671f\u7bc4\u56f2\u3067\u53d7\u6ce8\u3092\u691c\u7d22\u3067\u304d\u308b\")\n        void canSearchByDeliveryDateRange() {\n            // Arrange\n            var order1 = SalesOrder.builder()\n                    .orderNumber(\"SO-2025-0004\")\n                    .orderDate(LocalDate.of(2025, 1, 15))\n                    .customerCode(\"CUST-001\")\n                    .requestedDeliveryDate(LocalDate.of(2025, 1, 25))\n                    .subtotal(BigDecimal.ZERO)\n                    .taxAmount(BigDecimal.ZERO)\n                    .totalAmount(BigDecimal.ZERO)\n                    .status(OrderStatus.RECEIVED)\n                    .build();\n            salesOrderRepository.save(order1);\n\n            var order2 = SalesOrder.builder()\n                    .orderNumber(\"SO-2025-0005\")\n                    .orderDate(LocalDate.of(2025, 1, 20))\n                    .customerCode(\"CUST-001\")\n                    .requestedDeliveryDate(LocalDate.of(2025, 2, 15))\n                    .subtotal(BigDecimal.ZERO)\n                    .taxAmount(BigDecimal.ZERO)\n                    .totalAmount(BigDecimal.ZERO)\n                    .status(OrderStatus.RECEIVED)\n                    .build();\n            salesOrderRepository.save(order2);\n\n            // Act: 1\u6708\u4e2d\u306e\u7d0d\u671f\u3067\u691c\u7d22\n            var januaryOrders = salesOrderRepository.findByDeliveryDateRange(\n                    LocalDate.of(2025, 1, 1),\n                    LocalDate.of(2025, 1, 31)\n            );\n\n            // Assert\n            assertThat(januaryOrders).hasSize(1);\n            assertThat(januaryOrders.get(0).getOrderNumber()).isEqualTo(\"SO-2025-0004\");\n        }\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter06/#green","title":"Green: \u30c6\u30b9\u30c8\u3092\u901a\u3059\u5b9f\u88c5","text":"SalesOrderRepository.java <pre><code>// src/main/java/com/example/sms/application/port/out/SalesOrderRepository.java\npackage com.example.sms.application.port.out;\n\nimport com.example.sms.domain.model.sales.OrderStatus;\nimport com.example.sms.domain.model.sales.SalesOrder;\nimport com.example.sms.domain.model.sales.SalesOrderDetail;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.util.List;\nimport java.util.Optional;\n\npublic interface SalesOrderRepository {\n\n    void save(SalesOrder order);\n\n    void saveDetail(SalesOrderDetail detail);\n\n    Optional&lt;SalesOrder&gt; findById(Integer id);\n\n    Optional&lt;SalesOrder&gt; findByOrderNumber(String orderNumber);\n\n    Optional&lt;SalesOrder&gt; findByIdWithDetails(Integer id);\n\n    List&lt;SalesOrder&gt; findByDeliveryDateRange(LocalDate from, LocalDate to);\n\n    void updateStatus(Integer id, OrderStatus status);\n\n    void updateDetailQuantities(Integer detailId,\n                                 BigDecimal allocatedQuantity,\n                                 BigDecimal shippedQuantity,\n                                 BigDecimal remainingQuantity);\n\n    void deleteAll();\n}\n</code></pre> SalesOrderMapper.xml <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n\n&lt;!-- src/main/resources/mapper/SalesOrderMapper.xml --&gt;\n&lt;mapper namespace=\"com.example.sms.infrastructure.persistence.mapper.SalesOrderMapper\"&gt;\n\n    &lt;resultMap id=\"SalesOrderResultMap\" type=\"com.example.sms.domain.model.sales.SalesOrder\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"orderNumber\" column=\"\u53d7\u6ce8\u756a\u53f7\"/&gt;\n        &lt;result property=\"orderDate\" column=\"\u53d7\u6ce8\u65e5\"/&gt;\n        &lt;result property=\"customerCode\" column=\"\u9867\u5ba2\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"customerBranchNumber\" column=\"\u9867\u5ba2\u679d\u756a\"/&gt;\n        &lt;result property=\"shippingDestinationNumber\" column=\"\u51fa\u8377\u5148\u756a\u53f7\"/&gt;\n        &lt;result property=\"representativeCode\" column=\"\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"requestedDeliveryDate\" column=\"\u5e0c\u671b\u7d0d\u671f\"/&gt;\n        &lt;result property=\"scheduledShippingDate\" column=\"\u51fa\u8377\u4e88\u5b9a\u65e5\"/&gt;\n        &lt;result property=\"orderAmount\" column=\"\u53d7\u6ce8\u91d1\u984d\"/&gt;\n        &lt;result property=\"taxAmount\" column=\"\u6d88\u8cbb\u7a0e\u984d\"/&gt;\n        &lt;result property=\"totalAmount\" column=\"\u53d7\u6ce8\u5408\u8a08\"/&gt;\n        &lt;result property=\"status\" column=\"\u30b9\u30c6\u30fc\u30bf\u30b9\"\n                typeHandler=\"com.example.sms.infrastructure.out.persistence.typehandler.OrderStatusTypeHandler\"/&gt;\n        &lt;result property=\"quotationId\" column=\"\u898b\u7a4dID\"/&gt;\n        &lt;result property=\"customerOrderNumber\" column=\"\u9867\u5ba2\u6ce8\u6587\u756a\u53f7\"/&gt;\n        &lt;result property=\"remarks\" column=\"\u5099\u8003\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"createdBy\" column=\"\u4f5c\u6210\u8005\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedBy\" column=\"\u66f4\u65b0\u8005\"/&gt;\n        &lt;collection property=\"details\" ofType=\"com.example.sms.domain.model.sales.SalesOrderDetail\"&gt;\n            &lt;id property=\"id\" column=\"\u660e\u7d30ID\"/&gt;\n            &lt;result property=\"orderId\" column=\"\u53d7\u6ce8ID\"/&gt;\n            &lt;result property=\"lineNumber\" column=\"\u884c\u756a\u53f7\"/&gt;\n            &lt;result property=\"productCode\" column=\"\u5546\u54c1\u30b3\u30fc\u30c9\"/&gt;\n            &lt;result property=\"productName\" column=\"\u5546\u54c1\u540d\"/&gt;\n            &lt;result property=\"orderQuantity\" column=\"\u53d7\u6ce8\u6570\u91cf\"/&gt;\n            &lt;result property=\"allocatedQuantity\" column=\"\u5f15\u5f53\u6570\u91cf\"/&gt;\n            &lt;result property=\"shippedQuantity\" column=\"\u51fa\u8377\u6570\u91cf\"/&gt;\n            &lt;result property=\"remainingQuantity\" column=\"\u6b8b\u6570\u91cf\"/&gt;\n            &lt;result property=\"unit\" column=\"\u5358\u4f4d\"/&gt;\n            &lt;result property=\"unitPrice\" column=\"\u5358\u4fa1\"/&gt;\n            &lt;result property=\"amount\" column=\"\u91d1\u984d\"/&gt;\n            &lt;result property=\"taxCategory\" column=\"\u7a0e\u533a\u5206\"\n                    typeHandler=\"com.example.sms.infrastructure.out.persistence.typehandler.TaxCategoryTypeHandler\"/&gt;\n            &lt;result property=\"taxRate\" column=\"\u6d88\u8cbb\u7a0e\u7387\"/&gt;\n            &lt;result property=\"taxAmount\" column=\"\u660e\u7d30\u6d88\u8cbb\u7a0e\u984d\"/&gt;\n            &lt;result property=\"warehouseCode\" column=\"\u5009\u5eab\u30b3\u30fc\u30c9\"/&gt;\n            &lt;result property=\"requestedDeliveryDate\" column=\"\u660e\u7d30\u5e0c\u671b\u7d0d\u671f\"/&gt;\n        &lt;/collection&gt;\n    &lt;/resultMap&gt;\n\n    &lt;insert id=\"insertHeader\" parameterType=\"com.example.sms.domain.model.sales.SalesOrder\"\n            useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u53d7\u6ce8\u30c7\u30fc\u30bf\" (\n            \"\u53d7\u6ce8\u756a\u53f7\", \"\u53d7\u6ce8\u65e5\", \"\u9867\u5ba2\u30b3\u30fc\u30c9\", \"\u9867\u5ba2\u679d\u756a\", \"\u51fa\u8377\u5148\u756a\u53f7\",\n            \"\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\", \"\u5e0c\u671b\u7d0d\u671f\", \"\u51fa\u8377\u4e88\u5b9a\u65e5\", \"\u53d7\u6ce8\u91d1\u984d\", \"\u6d88\u8cbb\u7a0e\u984d\",\n            \"\u53d7\u6ce8\u5408\u8a08\", \"\u30b9\u30c6\u30fc\u30bf\u30b9\", \"\u898b\u7a4dID\", \"\u9867\u5ba2\u6ce8\u6587\u756a\u53f7\", \"\u5099\u8003\",\n            \"\u4f5c\u6210\u65e5\u6642\", \"\u4f5c\u6210\u8005\", \"\u66f4\u65b0\u65e5\u6642\", \"\u66f4\u65b0\u8005\"\n        ) VALUES (\n            #{orderNumber}, #{orderDate}, #{customerCode}, #{customerBranchNumber}, #{shippingDestinationNumber},\n            #{representativeCode}, #{requestedDeliveryDate}, #{scheduledShippingDate}, #{orderAmount}, #{taxAmount},\n            #{totalAmount},\n            #{status, typeHandler=com.example.sms.infrastructure.out.persistence.typehandler.OrderStatusTypeHandler}::\u53d7\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9,\n            #{quotationId}, #{customerOrderNumber}, #{remarks},\n            CURRENT_TIMESTAMP, #{createdBy}, CURRENT_TIMESTAMP, #{updatedBy}\n        )\n    &lt;/insert&gt;\n\n    &lt;insert id=\"insertDetail\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u53d7\u6ce8\u660e\u7d30\" (\n            \"\u53d7\u6ce8ID\", \"\u884c\u756a\u53f7\", \"\u5546\u54c1\u30b3\u30fc\u30c9\", \"\u5546\u54c1\u540d\", \"\u53d7\u6ce8\u6570\u91cf\",\n            \"\u5f15\u5f53\u6570\u91cf\", \"\u51fa\u8377\u6570\u91cf\", \"\u6b8b\u6570\u91cf\", \"\u5358\u4f4d\", \"\u5358\u4fa1\", \"\u91d1\u984d\",\n            \"\u7a0e\u533a\u5206\", \"\u6d88\u8cbb\u7a0e\u7387\", \"\u6d88\u8cbb\u7a0e\u984d\", \"\u5009\u5eab\u30b3\u30fc\u30c9\", \"\u5e0c\u671b\u7d0d\u671f\"\n        ) VALUES (\n            #{orderId}, #{lineNumber}, #{productCode}, #{productName}, #{orderQuantity},\n            #{allocatedQuantity}, #{shippedQuantity}, #{remainingQuantity}, #{unit},\n            #{unitPrice}, #{amount},\n            #{taxCategory, typeHandler=com.example.sms.infrastructure.out.persistence.typehandler.TaxCategoryTypeHandler},\n            #{taxRate}, #{taxAmount}, #{warehouseCode}, #{requestedDeliveryDate}\n        )\n    &lt;/insert&gt;\n\n    &lt;select id=\"findByOrderNumber\" resultMap=\"SalesOrderResultMap\"&gt;\n        SELECT * FROM \"\u53d7\u6ce8\u30c7\u30fc\u30bf\" WHERE \"\u53d7\u6ce8\u756a\u53f7\" = #{orderNumber}\n    &lt;/select&gt;\n\n    &lt;select id=\"findDetailsByOrderId\" resultMap=\"SalesOrderDetailResultMap\"&gt;\n        SELECT * FROM \"\u53d7\u6ce8\u660e\u7d30\"\n        WHERE \"\u53d7\u6ce8ID\" = #{orderId}\n        ORDER BY \"\u884c\u756a\u53f7\"\n    &lt;/select&gt;\n\n    &lt;select id=\"findByDeliveryDateRange\" resultMap=\"SalesOrderResultMap\"&gt;\n        SELECT * FROM \"\u53d7\u6ce8\u30c7\u30fc\u30bf\"\n        WHERE \"\u5e0c\u671b\u7d0d\u671f\" BETWEEN #{from} AND #{to}\n        ORDER BY \"\u5e0c\u671b\u7d0d\u671f\"\n    &lt;/select&gt;\n\n    &lt;update id=\"updateStatus\"&gt;\n        UPDATE \"\u53d7\u6ce8\u30c7\u30fc\u30bf\"\n        SET \"\u30b9\u30c6\u30fc\u30bf\u30b9\" = #{status, typeHandler=com.example.sms.infrastructure.out.persistence.typehandler.OrderStatusTypeHandler},\n            \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP\n        WHERE \"ID\" = #{id}\n    &lt;/update&gt;\n\n    &lt;update id=\"updateDetailQuantities\"&gt;\n        UPDATE \"\u53d7\u6ce8\u660e\u7d30\"\n        SET \"\u5f15\u5f53\u6570\u91cf\" = #{allocatedQuantity},\n            \"\u51fa\u8377\u6570\u91cf\" = #{shippedQuantity},\n            \"\u6b8b\u6570\u91cf\" = #{remainingQuantity}\n        WHERE \"ID\" = #{detailId}\n    &lt;/update&gt;\n\n    &lt;delete id=\"deleteAll\"&gt;\n        DELETE FROM \"\u53d7\u6ce8\u660e\u7d30\";\n        DELETE FROM \"\u53d7\u6ce8\u30c7\u30fc\u30bf\";\n    &lt;/delete&gt;\n\n&lt;/mapper&gt;\n</code></pre>"},{"location":"article/part2/chapter06/#62-db","title":"6.2 \u51fa\u8377\u696d\u52d9\u306e DB \u8a2d\u8a08","text":""},{"location":"article/part2/chapter06/#_8","title":"\u51fa\u8377\u696d\u52d9\u306e\u6d41\u308c","text":"<p>\u51fa\u8377\u696d\u52d9\u306f\u3001\u53d7\u6ce8\u30c7\u30fc\u30bf\u3092\u8d77\u70b9\u3068\u3057\u3066\u5546\u54c1\u3092\u9867\u5ba2\u306b\u5c4a\u3051\u308b\u307e\u3067\u306e\u30d7\u30ed\u30bb\u30b9\u3067\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter06/#_9","title":"\u51fa\u8377\u6307\u793a\u30c7\u30fc\u30bf\u30fb\u51fa\u8377\u660e\u7d30\u30c7\u30fc\u30bf","text":""},{"location":"article/part2/chapter06/#er_1","title":"\u51fa\u8377\u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u306e ER \u56f3","text":""},{"location":"article/part2/chapter06/#_10","title":"\u51fa\u8377\u30b9\u30c6\u30fc\u30bf\u30b9\u306e\u5b9a\u7fa9","text":"\u30b9\u30c6\u30fc\u30bf\u30b9 \u8aac\u660e \u51fa\u8377\u6307\u793a\u6e08 \u51fa\u8377\u6307\u793a\u304c\u4f5c\u6210\u3055\u308c\u305f\u72b6\u614b \u51fa\u8377\u6e96\u5099\u4e2d \u51fa\u8377\u6e96\u5099\u4f5c\u696d\u4e2d\u306e\u72b6\u614b \u51fa\u8377\u6e08 \u914d\u9001\u696d\u8005\u306b\u5f15\u304d\u6e21\u3057\u305f\u72b6\u614b \u30ad\u30e3\u30f3\u30bb\u30eb \u51fa\u8377\u6307\u793a\u304c\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u305f\u72b6\u614b"},{"location":"article/part2/chapter06/#_11","title":"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff1a\u51fa\u8377\u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210","text":"V008__create_shipment_tables.sql <pre><code>-- src/main/resources/db/migration/V008__create_shipment_tables.sql\n\n-- \u51fa\u8377\u30b9\u30c6\u30fc\u30bf\u30b9\nCREATE TYPE \u51fa\u8377\u30b9\u30c6\u30fc\u30bf\u30b9 AS ENUM ('\u51fa\u8377\u6307\u793a\u6e08', '\u51fa\u8377\u6e96\u5099\u4e2d', '\u51fa\u8377\u6e08', '\u30ad\u30e3\u30f3\u30bb\u30eb');\n\n-- \u51fa\u8377\u30c7\u30fc\u30bf\uff08\u30d8\u30c3\u30c0\uff09\nCREATE TABLE \"\u51fa\u8377\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u51fa\u8377\u756a\u53f7\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u51fa\u8377\u65e5\" DATE NOT NULL,\n    \"\u53d7\u6ce8ID\" INTEGER NOT NULL,\n    \"\u9867\u5ba2\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u9867\u5ba2\u679d\u756a\" VARCHAR(10) DEFAULT '00',\n    \"\u51fa\u8377\u5148\u756a\u53f7\" VARCHAR(10),\n    \"\u51fa\u8377\u5148\u540d\" VARCHAR(100),\n    \"\u51fa\u8377\u5148\u90f5\u4fbf\u756a\u53f7\" VARCHAR(10),\n    \"\u51fa\u8377\u5148\u4f4f\u62401\" VARCHAR(100),\n    \"\u51fa\u8377\u5148\u4f4f\u62402\" VARCHAR(100),\n    \"\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\" VARCHAR(20),\n    \"\u5009\u5eab\u30b3\u30fc\u30c9\" VARCHAR(20),\n    \"\u30b9\u30c6\u30fc\u30bf\u30b9\" \u51fa\u8377\u30b9\u30c6\u30fc\u30bf\u30b9 DEFAULT '\u51fa\u8377\u6307\u793a\u6e08' NOT NULL,\n    \"\u5099\u8003\" TEXT,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u8005\" VARCHAR(50),\n    CONSTRAINT \"fk_\u51fa\u8377\u30c7\u30fc\u30bf_\u53d7\u6ce8\"\n        FOREIGN KEY (\"\u53d7\u6ce8ID\") REFERENCES \"\u53d7\u6ce8\u30c7\u30fc\u30bf\"(\"ID\"),\n    CONSTRAINT \"fk_\u51fa\u8377\u30c7\u30fc\u30bf_\u9867\u5ba2\"\n        FOREIGN KEY (\"\u9867\u5ba2\u30b3\u30fc\u30c9\", \"\u9867\u5ba2\u679d\u756a\") REFERENCES \"\u9867\u5ba2\u30de\u30b9\u30bf\"(\"\u9867\u5ba2\u30b3\u30fc\u30c9\", \"\u9867\u5ba2\u679d\u756a\"),\n    CONSTRAINT \"fk_\u51fa\u8377\u30c7\u30fc\u30bf_\u51fa\u8377\u5148\"\n        FOREIGN KEY (\"\u9867\u5ba2\u30b3\u30fc\u30c9\", \"\u9867\u5ba2\u679d\u756a\", \"\u51fa\u8377\u5148\u756a\u53f7\") REFERENCES \"\u51fa\u8377\u5148\u30de\u30b9\u30bf\"(\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\", \"\u9867\u5ba2\u679d\u756a\", \"\u51fa\u8377\u5148\u756a\u53f7\")\n);\n\n-- \u51fa\u8377\u660e\u7d30\nCREATE TABLE \"\u51fa\u8377\u660e\u7d30\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u51fa\u8377ID\" INTEGER NOT NULL,\n    \"\u884c\u756a\u53f7\" INTEGER NOT NULL,\n    \"\u53d7\u6ce8\u660e\u7d30ID\" INTEGER NOT NULL,\n    \"\u5546\u54c1\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u5546\u54c1\u540d\" VARCHAR(100) NOT NULL,\n    \"\u51fa\u8377\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u5358\u4f4d\" VARCHAR(10),\n    \"\u5358\u4fa1\" DECIMAL(15, 2) NOT NULL,\n    \"\u91d1\u984d\" DECIMAL(15, 2) NOT NULL,\n    \"\u7a0e\u533a\u5206\" \u7a0e\u533a\u5206 DEFAULT '\u5916\u7a0e' NOT NULL,\n    \"\u6d88\u8cbb\u7a0e\u7387\" DECIMAL(5, 2) DEFAULT 10.00 NOT NULL,\n    \"\u6d88\u8cbb\u7a0e\u984d\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u5009\u5eab\u30b3\u30fc\u30c9\" VARCHAR(20),\n    \"\u5099\u8003\" TEXT,\n    CONSTRAINT \"fk_\u51fa\u8377\u660e\u7d30_\u51fa\u8377\"\n        FOREIGN KEY (\"\u51fa\u8377ID\") REFERENCES \"\u51fa\u8377\u30c7\u30fc\u30bf\"(\"ID\") ON DELETE CASCADE,\n    CONSTRAINT \"fk_\u51fa\u8377\u660e\u7d30_\u53d7\u6ce8\u660e\u7d30\"\n        FOREIGN KEY (\"\u53d7\u6ce8\u660e\u7d30ID\") REFERENCES \"\u53d7\u6ce8\u660e\u7d30\"(\"ID\"),\n    CONSTRAINT \"fk_\u51fa\u8377\u660e\u7d30_\u5546\u54c1\"\n        FOREIGN KEY (\"\u5546\u54c1\u30b3\u30fc\u30c9\") REFERENCES \"\u5546\u54c1\u30de\u30b9\u30bf\"(\"\u5546\u54c1\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"uq_\u51fa\u8377\u660e\u7d30_\u884c\u756a\u53f7\" UNIQUE (\"\u51fa\u8377ID\", \"\u884c\u756a\u53f7\")\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"idx_\u51fa\u8377\u30c7\u30fc\u30bf_\u53d7\u6ce8ID\" ON \"\u51fa\u8377\u30c7\u30fc\u30bf\"(\"\u53d7\u6ce8ID\");\nCREATE INDEX \"idx_\u51fa\u8377\u30c7\u30fc\u30bf_\u9867\u5ba2\u30b3\u30fc\u30c9\" ON \"\u51fa\u8377\u30c7\u30fc\u30bf\"(\"\u9867\u5ba2\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u51fa\u8377\u30c7\u30fc\u30bf_\u51fa\u8377\u65e5\" ON \"\u51fa\u8377\u30c7\u30fc\u30bf\"(\"\u51fa\u8377\u65e5\");\nCREATE INDEX \"idx_\u51fa\u8377\u30c7\u30fc\u30bf_\u30b9\u30c6\u30fc\u30bf\u30b9\" ON \"\u51fa\u8377\u30c7\u30fc\u30bf\"(\"\u30b9\u30c6\u30fc\u30bf\u30b9\");\n</code></pre>"},{"location":"article/part2/chapter06/#enum_1","title":"\u51fa\u8377\u30b9\u30c6\u30fc\u30bf\u30b9 Enum","text":"ShipmentStatus.java <pre><code>// src/main/java/com/example/sms/domain/model/shipping/ShipmentStatus.java\npackage com.example.sms.domain.model.shipping;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum ShipmentStatus {\n    INSTRUCTED(\"\u51fa\u8377\u6307\u793a\u6e08\"),\n    PREPARING(\"\u51fa\u8377\u6e96\u5099\u4e2d\"),\n    SHIPPED(\"\u51fa\u8377\u6e08\"),\n    CANCELLED(\"\u30ad\u30e3\u30f3\u30bb\u30eb\");\n\n    private final String displayName;\n\n    public static ShipmentStatus fromDisplayName(String displayName) {\n        for (ShipmentStatus status : values()) {\n            if (status.displayName.equals(displayName)) {\n                return status;\n            }\n        }\n        throw new IllegalArgumentException(\"Unknown shipment status: \" + displayName);\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter06/#_12","title":"\u51fa\u8377\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3","text":"Shipment.java <pre><code>// src/main/java/com/example/sms/domain/model/shipping/Shipment.java\npackage com.example.sms.domain.model.shipping;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.List;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\n@SuppressWarnings(\"PMD.RedundantFieldInitializer\")\npublic class Shipment {\n    private Integer id;\n    private String shipmentNumber;\n    private LocalDate shipmentDate;\n    private Integer orderId;\n    private String customerCode;\n    private String customerBranchNumber;\n    private String shippingDestinationNumber;\n    private String shippingDestinationName;\n    private String shippingDestinationPostalCode;\n    private String shippingDestinationAddress1;\n    private String shippingDestinationAddress2;\n    private String representativeCode;\n    private String warehouseCode;\n    @Builder.Default\n    private ShipmentStatus status = ShipmentStatus.INSTRUCTED;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n    private List&lt;ShipmentDetail&gt; details;\n}\n</code></pre> ShipmentDetail.java <pre><code>// src/main/java/com/example/sms/domain/model/shipping/ShipmentDetail.java\npackage com.example.sms.domain.model.shipping;\n\nimport com.example.sms.domain.model.product.TaxCategory;\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.math.BigDecimal;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class ShipmentDetail {\n    private Integer id;\n    private Integer shipmentId;\n    private Integer lineNumber;\n    private Integer orderDetailId;\n    private String productCode;\n    private String productName;\n    private BigDecimal shippedQuantity;\n    private String unit;\n    private BigDecimal unitPrice;\n    private BigDecimal amount;\n    private TaxCategory taxCategory;\n    private BigDecimal taxRate;\n    private BigDecimal taxAmount;\n    private String warehouseCode;\n    private String remarks;\n}\n</code></pre>"},{"location":"article/part2/chapter06/#tdd_1","title":"TDD\uff1a\u51fa\u8377\u6307\u793a\u306e\u767b\u9332\u3068\u53d6\u5f97","text":"ShipmentInstructionRepositoryTest.java <pre><code>// src/test/java/com/example/sms/infrastructure/persistence/repository/ShipmentInstructionRepositoryTest.java\npackage com.example.sms.infrastructure.persistence.repository;\n\nimport com.example.sms.application.port.out.SalesOrderRepository;\nimport com.example.sms.application.port.out.ShipmentInstructionRepository;\nimport com.example.sms.domain.model.sales.*;\nimport com.example.sms.testsetup.BaseIntegrationTest;\nimport org.junit.jupiter.api.*;\nimport org.springframework.beans.factory.annotation.Autowired;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\n\nimport static org.assertj.core.api.Assertions.*;\n\n@DisplayName(\"\u51fa\u8377\u6307\u793a\u30ea\u30dd\u30b8\u30c8\u30ea\")\nclass ShipmentInstructionRepositoryTest extends BaseIntegrationTest {\n\n    @Autowired\n    private ShipmentInstructionRepository shipmentInstructionRepository;\n\n    @Autowired\n    private SalesOrderRepository salesOrderRepository;\n\n    @BeforeEach\n    void setUp() {\n        shipmentInstructionRepository.deleteAll();\n        salesOrderRepository.deleteAll();\n        setupOrderData();\n    }\n\n    private void setupOrderData() {\n        // \u53d7\u6ce8\u30c7\u30fc\u30bf\u6e96\u5099\n        var order = SalesOrder.builder()\n                .orderNumber(\"SO-2025-0001\")\n                .orderDate(LocalDate.of(2025, 1, 20))\n                .customerCode(\"CUST-001\")\n                .requestedDeliveryDate(LocalDate.of(2025, 1, 30))\n                .subtotal(new BigDecimal(\"50000\"))\n                .taxAmount(new BigDecimal(\"5000\"))\n                .totalAmount(new BigDecimal(\"55000\"))\n                .status(OrderStatus.RECEIVED)\n                .build();\n        salesOrderRepository.save(order);\n    }\n\n    @Nested\n    @DisplayName(\"\u51fa\u8377\u6307\u793a\u306e\u767b\u9332\")\n    class ShipmentInstructionRegistration {\n\n        @Test\n        @DisplayName(\"\u51fa\u8377\u6307\u793a\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterShipmentInstruction() {\n            // Arrange\n            var order = salesOrderRepository.findByOrderNumber(\"SO-2025-0001\").get();\n            var instruction = ShipmentInstruction.builder()\n                    .instructionNumber(\"SI-2025-0001\")\n                    .instructionDate(LocalDate.of(2025, 1, 25))\n                    .orderId(order.getId())\n                    .customerCode(\"CUST-001\")\n                    .scheduledShipDate(LocalDate.of(2025, 1, 28))\n                    .warehouseCode(\"WH-001\")\n                    .status(ShipmentStatus.INSTRUCTED)\n                    .build();\n\n            // Act\n            shipmentInstructionRepository.save(instruction);\n\n            // Assert\n            var result = shipmentInstructionRepository.findByInstructionNumber(\"SI-2025-0001\");\n            assertThat(result).isPresent();\n            assertThat(result.get().getOrderId()).isEqualTo(order.getId());\n            assertThat(result.get().getStatus()).isEqualTo(ShipmentStatus.INSTRUCTED);\n        }\n\n        @Test\n        @DisplayName(\"\u51fa\u8377\u6307\u793a\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u66f4\u65b0\u3067\u304d\u308b\")\n        void canUpdateShipmentStatus() {\n            // Arrange\n            var order = salesOrderRepository.findByOrderNumber(\"SO-2025-0001\").get();\n            var instruction = ShipmentInstruction.builder()\n                    .instructionNumber(\"SI-2025-0002\")\n                    .instructionDate(LocalDate.of(2025, 1, 25))\n                    .orderId(order.getId())\n                    .customerCode(\"CUST-001\")\n                    .scheduledShipDate(LocalDate.of(2025, 1, 28))\n                    .warehouseCode(\"WH-001\")\n                    .status(ShipmentStatus.INSTRUCTED)\n                    .build();\n            shipmentInstructionRepository.save(instruction);\n\n            // Act: \u30d4\u30c3\u30ad\u30f3\u30b0\u958b\u59cb\n            shipmentInstructionRepository.updateStatus(instruction.getId(), ShipmentStatus.PICKING);\n\n            // Assert\n            var result = shipmentInstructionRepository.findById(instruction.getId());\n            assertThat(result).isPresent();\n            assertThat(result.get().getStatus()).isEqualTo(ShipmentStatus.PICKING);\n        }\n\n        @Test\n        @DisplayName(\"\u8ffd\u8de1\u756a\u53f7\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterTrackingNumber() {\n            // Arrange\n            var order = salesOrderRepository.findByOrderNumber(\"SO-2025-0001\").get();\n            var instruction = ShipmentInstruction.builder()\n                    .instructionNumber(\"SI-2025-0003\")\n                    .instructionDate(LocalDate.of(2025, 1, 25))\n                    .orderId(order.getId())\n                    .customerCode(\"CUST-001\")\n                    .scheduledShipDate(LocalDate.of(2025, 1, 28))\n                    .warehouseCode(\"WH-001\")\n                    .status(ShipmentStatus.SHIPPED)\n                    .carrierCode(\"YAMATO\")\n                    .trackingNumber(\"1234-5678-9012\")\n                    .build();\n\n            // Act\n            shipmentInstructionRepository.save(instruction);\n\n            // Assert\n            var result = shipmentInstructionRepository.findByInstructionNumber(\"SI-2025-0003\");\n            assertThat(result).isPresent();\n            assertThat(result.get().getCarrierCode()).isEqualTo(\"YAMATO\");\n            assertThat(result.get().getTrackingNumber()).isEqualTo(\"1234-5678-9012\");\n        }\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter06/#_13","title":"\u53d7\u6ce8\u304b\u3089\u51fa\u8377\u6307\u793a\u3092\u4f5c\u6210\u3059\u308b\u30b5\u30fc\u30d3\u30b9","text":"ShipmentService.java <pre><code>// src/main/java/com/example/sms/application/service/ShipmentService.java\npackage com.example.sms.application.service;\n\nimport com.example.sms.application.port.out.*;\nimport com.example.sms.domain.model.sales.*;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\n\n@Service\n@RequiredArgsConstructor\npublic class ShipmentService {\n\n    private final SalesOrderRepository salesOrderRepository;\n    private final ShipmentInstructionRepository shipmentInstructionRepository;\n\n    /**\n     * \u53d7\u6ce8\u304b\u3089\u51fa\u8377\u6307\u793a\u3092\u4f5c\u6210\u3059\u308b\n     */\n    @Transactional\n    public ShipmentInstruction createShipmentInstruction(Integer orderId,\n                                                          LocalDate scheduledShipDate,\n                                                          String warehouseCode) {\n        var order = salesOrderRepository.findByIdWithDetails(orderId)\n                .orElseThrow(() -&gt; new IllegalArgumentException(\"Order not found: \" + orderId));\n\n        if (order.getStatus() != OrderStatus.RECEIVED &amp;&amp; order.getStatus() != OrderStatus.ALLOCATED) {\n            throw new IllegalStateException(\"Cannot create shipment instruction for order with status: \"\n                    + order.getStatus());\n        }\n\n        // \u51fa\u8377\u6307\u793a\u30d8\u30c3\u30c0\u4f5c\u6210\n        var instruction = ShipmentInstruction.builder()\n                .instructionNumber(generateInstructionNumber(LocalDate.now()))\n                .instructionDate(LocalDate.now())\n                .orderId(orderId)\n                .customerCode(order.getCustomerCode())\n                .shipToCode(order.getShipToCode())\n                .scheduledShipDate(scheduledShipDate)\n                .warehouseCode(warehouseCode)\n                .status(ShipmentStatus.INSTRUCTED)\n                .build();\n        shipmentInstructionRepository.save(instruction);\n\n        // \u51fa\u8377\u6307\u793a\u660e\u7d30\u4f5c\u6210\n        int lineNumber = 1;\n        for (var orderDetail : order.getDetails()) {\n            if (orderDetail.getRemainingQuantity().compareTo(BigDecimal.ZERO) &gt; 0) {\n                var instructionDetail = ShipmentInstructionDetail.builder()\n                        .shipmentInstructionId(instruction.getId())\n                        .lineNumber(lineNumber++)\n                        .orderDetailId(orderDetail.getId())\n                        .productCode(orderDetail.getProductCode())\n                        .productName(orderDetail.getProductName())\n                        .instructedQuantity(orderDetail.getRemainingQuantity())\n                        .shippedQuantity(BigDecimal.ZERO)\n                        .unit(orderDetail.getUnit())\n                        .build();\n                shipmentInstructionRepository.saveDetail(instructionDetail);\n            }\n        }\n\n        // \u53d7\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u66f4\u65b0\n        salesOrderRepository.updateStatus(orderId, OrderStatus.SHIPMENT_INSTRUCTED);\n\n        return instruction;\n    }\n\n    private String generateInstructionNumber(LocalDate date) {\n        return String.format(\"SI-%d-%04d\", date.getYear(), System.currentTimeMillis() % 10000);\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter06/#63-db","title":"6.3 \u58f2\u4e0a\u696d\u52d9\u306e DB \u8a2d\u8a08","text":""},{"location":"article/part2/chapter06/#_14","title":"\u58f2\u4e0a\u30c7\u30fc\u30bf\u30fb\u58f2\u4e0a\u660e\u7d30\u30c7\u30fc\u30bf\u306e\u69cb\u9020","text":""},{"location":"article/part2/chapter06/#er_2","title":"\u58f2\u4e0a\u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u306e ER \u56f3","text":""},{"location":"article/part2/chapter06/#_15","title":"\u51fa\u8377\u5b8c\u4e86\u304b\u3089\u58f2\u4e0a\u8a08\u4e0a\u3078\u306e\u6d41\u308c","text":""},{"location":"article/part2/chapter06/#_16","title":"\u58f2\u4e0a\u30b9\u30c6\u30fc\u30bf\u30b9\u306e\u5b9a\u7fa9","text":"\u30b9\u30c6\u30fc\u30bf\u30b9 \u8aac\u660e \u8a08\u4e0a\u6e08 \u58f2\u4e0a\u304c\u8a08\u4e0a\u3055\u308c\u305f\u72b6\u614b \u8acb\u6c42\u6e08 \u8acb\u6c42\u66f8\u304c\u767a\u884c\u3055\u308c\u305f\u72b6\u614b \u5165\u91d1\u6e08 \u5165\u91d1\u304c\u78ba\u8a8d\u3055\u308c\u305f\u72b6\u614b \u53d6\u6d88 \u58f2\u4e0a\u304c\u53d6\u308a\u6d88\u3055\u308c\u305f\u72b6\u614b"},{"location":"article/part2/chapter06/#_17","title":"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff1a\u58f2\u4e0a\u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210","text":"V009__create_sales_tables.sql <pre><code>-- src/main/resources/db/migration/V009__create_sales_tables.sql\n\n-- \u58f2\u4e0a\u30b9\u30c6\u30fc\u30bf\u30b9\nCREATE TYPE \u58f2\u4e0a\u30b9\u30c6\u30fc\u30bf\u30b9 AS ENUM ('\u8a08\u4e0a\u6e08', '\u8acb\u6c42\u6e08', '\u5165\u91d1\u6e08', '\u30ad\u30e3\u30f3\u30bb\u30eb');\n\n-- \u58f2\u4e0a\u30c7\u30fc\u30bf\uff08\u30d8\u30c3\u30c0\uff09\nCREATE TABLE \"\u58f2\u4e0a\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u58f2\u4e0a\u756a\u53f7\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u58f2\u4e0a\u65e5\" DATE NOT NULL,\n    \"\u53d7\u6ce8ID\" INTEGER NOT NULL,\n    \"\u51fa\u8377ID\" INTEGER,\n    \"\u9867\u5ba2\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u9867\u5ba2\u679d\u756a\" VARCHAR(10) DEFAULT '00',\n    \"\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\" VARCHAR(20),\n    \"\u58f2\u4e0a\u91d1\u984d\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u6d88\u8cbb\u7a0e\u984d\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u58f2\u4e0a\u5408\u8a08\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u30b9\u30c6\u30fc\u30bf\u30b9\" \u58f2\u4e0a\u30b9\u30c6\u30fc\u30bf\u30b9 DEFAULT '\u8a08\u4e0a\u6e08' NOT NULL,\n    \"\u8acb\u6c42ID\" INTEGER,\n    \"\u5099\u8003\" TEXT,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u8005\" VARCHAR(50),\n    CONSTRAINT \"fk_\u58f2\u4e0a\u30c7\u30fc\u30bf_\u53d7\u6ce8\"\n        FOREIGN KEY (\"\u53d7\u6ce8ID\") REFERENCES \"\u53d7\u6ce8\u30c7\u30fc\u30bf\"(\"ID\"),\n    CONSTRAINT \"fk_\u58f2\u4e0a\u30c7\u30fc\u30bf_\u51fa\u8377\"\n        FOREIGN KEY (\"\u51fa\u8377ID\") REFERENCES \"\u51fa\u8377\u30c7\u30fc\u30bf\"(\"ID\"),\n    CONSTRAINT \"fk_\u58f2\u4e0a\u30c7\u30fc\u30bf_\u9867\u5ba2\"\n        FOREIGN KEY (\"\u9867\u5ba2\u30b3\u30fc\u30c9\", \"\u9867\u5ba2\u679d\u756a\") REFERENCES \"\u9867\u5ba2\u30de\u30b9\u30bf\"(\"\u9867\u5ba2\u30b3\u30fc\u30c9\", \"\u9867\u5ba2\u679d\u756a\")\n);\n\n-- \u58f2\u4e0a\u660e\u7d30\nCREATE TABLE \"\u58f2\u4e0a\u660e\u7d30\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u58f2\u4e0aID\" INTEGER NOT NULL,\n    \"\u884c\u756a\u53f7\" INTEGER NOT NULL,\n    \"\u53d7\u6ce8\u660e\u7d30ID\" INTEGER NOT NULL,\n    \"\u51fa\u8377\u660e\u7d30ID\" INTEGER,\n    \"\u5546\u54c1\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u5546\u54c1\u540d\" VARCHAR(100) NOT NULL,\n    \"\u58f2\u4e0a\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u5358\u4f4d\" VARCHAR(10),\n    \"\u5358\u4fa1\" DECIMAL(15, 2) NOT NULL,\n    \"\u91d1\u984d\" DECIMAL(15, 2) NOT NULL,\n    \"\u7a0e\u533a\u5206\" \u7a0e\u533a\u5206 DEFAULT '\u5916\u7a0e' NOT NULL,\n    \"\u6d88\u8cbb\u7a0e\u7387\" DECIMAL(5, 2) DEFAULT 10.00 NOT NULL,\n    \"\u6d88\u8cbb\u7a0e\u984d\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u5099\u8003\" TEXT,\n    CONSTRAINT \"fk_\u58f2\u4e0a\u660e\u7d30_\u58f2\u4e0a\"\n        FOREIGN KEY (\"\u58f2\u4e0aID\") REFERENCES \"\u58f2\u4e0a\u30c7\u30fc\u30bf\"(\"ID\") ON DELETE CASCADE,\n    CONSTRAINT \"fk_\u58f2\u4e0a\u660e\u7d30_\u53d7\u6ce8\u660e\u7d30\"\n        FOREIGN KEY (\"\u53d7\u6ce8\u660e\u7d30ID\") REFERENCES \"\u53d7\u6ce8\u660e\u7d30\"(\"ID\"),\n    CONSTRAINT \"fk_\u58f2\u4e0a\u660e\u7d30_\u51fa\u8377\u660e\u7d30\"\n        FOREIGN KEY (\"\u51fa\u8377\u660e\u7d30ID\") REFERENCES \"\u51fa\u8377\u660e\u7d30\"(\"ID\"),\n    CONSTRAINT \"fk_\u58f2\u4e0a\u660e\u7d30_\u5546\u54c1\"\n        FOREIGN KEY (\"\u5546\u54c1\u30b3\u30fc\u30c9\") REFERENCES \"\u5546\u54c1\u30de\u30b9\u30bf\"(\"\u5546\u54c1\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"uq_\u58f2\u4e0a\u660e\u7d30_\u884c\u756a\u53f7\" UNIQUE (\"\u58f2\u4e0aID\", \"\u884c\u756a\u53f7\")\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"idx_\u58f2\u4e0a\u30c7\u30fc\u30bf_\u53d7\u6ce8ID\" ON \"\u58f2\u4e0a\u30c7\u30fc\u30bf\"(\"\u53d7\u6ce8ID\");\nCREATE INDEX \"idx_\u58f2\u4e0a\u30c7\u30fc\u30bf_\u51fa\u8377ID\" ON \"\u58f2\u4e0a\u30c7\u30fc\u30bf\"(\"\u51fa\u8377ID\");\nCREATE INDEX \"idx_\u58f2\u4e0a\u30c7\u30fc\u30bf_\u9867\u5ba2\u30b3\u30fc\u30c9\" ON \"\u58f2\u4e0a\u30c7\u30fc\u30bf\"(\"\u9867\u5ba2\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u58f2\u4e0a\u30c7\u30fc\u30bf_\u58f2\u4e0a\u65e5\" ON \"\u58f2\u4e0a\u30c7\u30fc\u30bf\"(\"\u58f2\u4e0a\u65e5\");\nCREATE INDEX \"idx_\u58f2\u4e0a\u30c7\u30fc\u30bf_\u30b9\u30c6\u30fc\u30bf\u30b9\" ON \"\u58f2\u4e0a\u30c7\u30fc\u30bf\"(\"\u30b9\u30c6\u30fc\u30bf\u30b9\");\n</code></pre>"},{"location":"article/part2/chapter06/#enum_2","title":"\u58f2\u4e0a\u30b9\u30c6\u30fc\u30bf\u30b9 Enum","text":"SalesStatus.java <pre><code>// src/main/java/com/example/sms/domain/model/sales/SalesStatus.java\npackage com.example.sms.domain.model.sales;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum SalesStatus {\n    RECORDED(\"\u8a08\u4e0a\u6e08\"),\n    INVOICED(\"\u8acb\u6c42\u6e08\"),\n    COLLECTED(\"\u5165\u91d1\u6e08\"),\n    CANCELLED(\"\u30ad\u30e3\u30f3\u30bb\u30eb\");\n\n    private final String displayName;\n\n    public static SalesStatus fromDisplayName(String displayName) {\n        for (SalesStatus status : values()) {\n            if (status.displayName.equals(displayName)) {\n                return status;\n            }\n        }\n        throw new IllegalArgumentException(\"Unknown sales status: \" + displayName);\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter06/#_18","title":"\u58f2\u4e0a\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3","text":"Sales.java <pre><code>// src/main/java/com/example/sms/domain/model/sales/Sales.java\npackage com.example.sms.domain.model.sales;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\n@SuppressWarnings(\"PMD.RedundantFieldInitializer\")\npublic class Sales {\n    private Integer id;\n    private String salesNumber;\n    private LocalDate salesDate;\n    private Integer orderId;\n    private Integer shipmentId;\n    private String customerCode;\n    private String customerBranchNumber;\n    private String representativeCode;\n    @Builder.Default\n    private BigDecimal salesAmount = BigDecimal.ZERO;\n    @Builder.Default\n    private BigDecimal taxAmount = BigDecimal.ZERO;\n    @Builder.Default\n    private BigDecimal totalAmount = BigDecimal.ZERO;\n    @Builder.Default\n    private SalesStatus status = SalesStatus.RECORDED;\n    private Integer invoiceId;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n\n    @Builder.Default\n    private List&lt;SalesDetail&gt; details = new ArrayList&lt;&gt;();\n}\n</code></pre> SalesDetail.java <pre><code>// src/main/java/com/example/sms/domain/model/sales/SalesDetail.java\npackage com.example.sms.domain.model.sales;\n\nimport com.example.sms.domain.model.product.TaxCategory;\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.math.BigDecimal;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class SalesDetail {\n    private Integer id;\n    private Integer salesId;\n    private Integer lineNumber;\n    private Integer orderDetailId;\n    private Integer shipmentDetailId;\n    private String productCode;\n    private String productName;\n    private BigDecimal salesQuantity;\n    private String unit;\n    private BigDecimal unitPrice;\n    private BigDecimal amount;\n    private TaxCategory taxCategory;\n    private BigDecimal taxRate;\n    private BigDecimal taxAmount;\n    private String remarks;\n}\n</code></pre>"},{"location":"article/part2/chapter06/#_19","title":"\u8fd4\u54c1\u51e6\u7406\u306e\u8a2d\u8a08","text":"<p>\u8fd4\u54c1\u51e6\u7406\u306f\u3001\u58f2\u4e0a\u30c7\u30fc\u30bf\u306b\u5bfe\u3057\u3066\u30de\u30a4\u30ca\u30b9\u306e\u53d6\u5f15\u3092\u8a18\u9332\u3059\u308b\u51e6\u7406\u3067\u3059\u3002</p>"},{"location":"article/part2/chapter06/#_20","title":"\u8fd4\u54c1\u696d\u52d9\u306e\u6d41\u308c","text":""},{"location":"article/part2/chapter06/#_21","title":"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff1a\u8fd4\u54c1\u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210","text":"V009__create_return_tables.sql <pre><code>-- src/main/resources/db/migration/V009__create_return_tables.sql\n\n-- \u8fd4\u54c1\u30c7\u30fc\u30bf\nCREATE TABLE \"\u8fd4\u54c1\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u8fd4\u54c1\u756a\u53f7\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u8fd4\u54c1\u65e5\" DATE NOT NULL,\n    \"\u58f2\u4e0aID\" INTEGER NOT NULL,\n    \"\u9867\u5ba2\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u8fd4\u54c1\u7406\u7531\" VARCHAR(200),\n    \"\u8fd4\u54c1\u91d1\u984d\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u6d88\u8cbb\u7a0e\u984d\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u8fd4\u54c1\u5408\u8a08\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u5009\u5eab\u30b3\u30fc\u30c9\" VARCHAR(20),\n    \"\u5099\u8003\" TEXT,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u8005\" VARCHAR(50),\n    CONSTRAINT \"fk_\u8fd4\u54c1\u30c7\u30fc\u30bf_\u58f2\u4e0a\"\n        FOREIGN KEY (\"\u58f2\u4e0aID\") REFERENCES \"\u58f2\u4e0a\u30c7\u30fc\u30bf\"(\"ID\"),\n    CONSTRAINT \"fk_\u8fd4\u54c1\u30c7\u30fc\u30bf_\u9867\u5ba2\"\n        FOREIGN KEY (\"\u9867\u5ba2\u30b3\u30fc\u30c9\") REFERENCES \"\u9867\u5ba2\u30de\u30b9\u30bf\"(\"\u9867\u5ba2\u30b3\u30fc\u30c9\")\n);\n\n-- \u8fd4\u54c1\u660e\u7d30\nCREATE TABLE \"\u8fd4\u54c1\u660e\u7d30\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u8fd4\u54c1ID\" INTEGER NOT NULL,\n    \"\u884c\u756a\u53f7\" INTEGER NOT NULL,\n    \"\u58f2\u4e0a\u660e\u7d30ID\" INTEGER NOT NULL,\n    \"\u5546\u54c1\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u5546\u54c1\u540d\" VARCHAR(100) NOT NULL,\n    \"\u8fd4\u54c1\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u5358\u4f4d\" VARCHAR(10),\n    \"\u5358\u4fa1\" DECIMAL(15, 2) NOT NULL,\n    \"\u91d1\u984d\" DECIMAL(15, 2) NOT NULL,\n    \"\u7a0e\u533a\u5206\" \u7a0e\u533a\u5206 DEFAULT '\u5916\u7a0e' NOT NULL,\n    \"\u6d88\u8cbb\u7a0e\u7387\" DECIMAL(5, 2) DEFAULT 10.00 NOT NULL,\n    \"\u6d88\u8cbb\u7a0e\u984d\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u5099\u8003\" TEXT,\n    CONSTRAINT \"fk_\u8fd4\u54c1\u660e\u7d30_\u8fd4\u54c1\"\n        FOREIGN KEY (\"\u8fd4\u54c1ID\") REFERENCES \"\u8fd4\u54c1\u30c7\u30fc\u30bf\"(\"ID\") ON DELETE CASCADE,\n    CONSTRAINT \"fk_\u8fd4\u54c1\u660e\u7d30_\u58f2\u4e0a\u660e\u7d30\"\n        FOREIGN KEY (\"\u58f2\u4e0a\u660e\u7d30ID\") REFERENCES \"\u58f2\u4e0a\u660e\u7d30\"(\"ID\"),\n    CONSTRAINT \"fk_\u8fd4\u54c1\u660e\u7d30_\u5546\u54c1\"\n        FOREIGN KEY (\"\u5546\u54c1\u30b3\u30fc\u30c9\") REFERENCES \"\u5546\u54c1\u30de\u30b9\u30bf\"(\"\u5546\u54c1\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"uq_\u8fd4\u54c1\u660e\u7d30_\u884c\u756a\u53f7\" UNIQUE (\"\u8fd4\u54c1ID\", \"\u884c\u756a\u53f7\")\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"idx_\u8fd4\u54c1\u30c7\u30fc\u30bf_\u58f2\u4e0aID\" ON \"\u8fd4\u54c1\u30c7\u30fc\u30bf\"(\"\u58f2\u4e0aID\");\nCREATE INDEX \"idx_\u8fd4\u54c1\u30c7\u30fc\u30bf_\u8fd4\u54c1\u65e5\" ON \"\u8fd4\u54c1\u30c7\u30fc\u30bf\"(\"\u8fd4\u54c1\u65e5\");\n</code></pre>"},{"location":"article/part2/chapter06/#_22","title":"\u8d64\u9ed2\u51e6\u7406\u306e\u8003\u3048\u65b9","text":"<p>\u8d64\u9ed2\u51e6\u7406\u3068\u306f\u3001\u8aa4\u3063\u305f\u4f1d\u7968\u3092\u8a02\u6b63\u3059\u308b\u305f\u3081\u306e\u4f1a\u8a08\u51e6\u7406\u624b\u6cd5\u3067\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter06/#_23","title":"\u8d64\u9ed2\u51e6\u7406\u306e\u7279\u5fb4","text":"\u9805\u76ee \u8aac\u660e \u5143\u4f1d\u7968 \u8a02\u6b63\u5bfe\u8c61\u3068\u306a\u308b\u8aa4\u3063\u305f\u4f1d\u7968 \u8d64\u4f1d\u7968 \u5143\u4f1d\u7968\u3092\u30de\u30a4\u30ca\u30b9\u3067\u6253\u3061\u6d88\u3059\u4f1d\u7968 \u9ed2\u4f1d\u7968 \u6b63\u3057\u3044\u5185\u5bb9\u3092\u8a18\u8f09\u3057\u305f\u65b0\u3057\u3044\u4f1d\u7968"},{"location":"article/part2/chapter06/#_24","title":"\u8d64\u9ed2\u51e6\u7406\u306e\u30e1\u30ea\u30c3\u30c8","text":"<ul> <li>\u76e3\u67fb\u8a3c\u8de1\u306e\u4fdd\u6301: \u5143\u306e\u4f1d\u7968\u3092\u524a\u9664\u305b\u305a\u3001\u8a02\u6b63\u306e\u5c65\u6b74\u304c\u6b8b\u308b</li> <li>\u4f1a\u8a08\u57fa\u6e96\u3078\u306e\u6e96\u62e0: \u4f1d\u7968\u306e\u4fee\u6b63\u3067\u306f\u306a\u304f\u3001\u65b0\u898f\u4f1d\u7968\u3067\u8a02\u6b63</li> <li>\u30c8\u30ec\u30fc\u30b5\u30d3\u30ea\u30c6\u30a3: \u3044\u3064\u3001\u8ab0\u304c\u3001\u306a\u305c\u8a02\u6b63\u3057\u305f\u304b\u3092\u8ffd\u8de1\u53ef\u80fd</li> </ul>"},{"location":"article/part2/chapter06/#64-er","title":"6.4 \u5168\u4f53\u306e ER \u56f3","text":"<p>\u53d7\u6ce8\u304b\u3089\u58f2\u4e0a\u307e\u3067\u306e\u5168\u4f53\u7684\u306a\u95a2\u9023\u3092\u793a\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter06/#65","title":"6.5 \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3068\u697d\u89b3\u30ed\u30c3\u30af\u306e\u8a2d\u8a08","text":""},{"location":"article/part2/chapter06/#mybatis-resultmap","title":"MyBatis \u30cd\u30b9\u30c8\u3057\u305f ResultMap \u306b\u3088\u308b\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a","text":"<p>\u53d7\u6ce8\u30c7\u30fc\u30bf\u306f\u3001\u53d7\u6ce8\uff08\u30d8\u30c3\u30c0\uff09\u2192 \u53d7\u6ce8\u660e\u7d30\u306e2\u5c64\u69cb\u9020\u3092\u6301\u3061\u307e\u3059\u3002MyBatis \u3067\u3053\u306e\u89aa\u5b50\u95a2\u4fc2\u3092\u52b9\u7387\u7684\u306b\u53d6\u5f97\u3059\u308b\u305f\u3081\u306e\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter06/#resultmap","title":"\u30cd\u30b9\u30c8\u3057\u305f ResultMap \u306e\u5b9a\u7fa9","text":"SalesOrderMapper.xml\uff08\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\uff09 <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n\n&lt;!-- src/main/resources/mapper/SalesOrderMapper.xml --&gt;\n&lt;mapper namespace=\"com.example.sms.infrastructure.persistence.mapper.SalesOrderMapper\"&gt;\n\n    &lt;!-- \u53d7\u6ce8\uff08\u30d8\u30c3\u30c0\uff09\u306e ResultMap --&gt;\n    &lt;resultMap id=\"salesOrderWithDetailsResultMap\" type=\"com.example.sms.domain.model.sales.SalesOrder\"&gt;\n        &lt;id property=\"id\" column=\"o_id\"/&gt;\n        &lt;result property=\"orderNumber\" column=\"o_\u53d7\u6ce8\u756a\u53f7\"/&gt;\n        &lt;result property=\"orderDate\" column=\"o_\u53d7\u6ce8\u65e5\"/&gt;\n        &lt;result property=\"customerCode\" column=\"o_\u9867\u5ba2\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"shipToCode\" column=\"o_\u51fa\u8377\u5148\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"salesRepCode\" column=\"o_\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"requestedDeliveryDate\" column=\"o_\u5e0c\u671b\u7d0d\u671f\"/&gt;\n        &lt;result property=\"scheduledShipDate\" column=\"o_\u51fa\u8377\u4e88\u5b9a\u65e5\"/&gt;\n        &lt;result property=\"subtotal\" column=\"o_\u53d7\u6ce8\u91d1\u984d\"/&gt;\n        &lt;result property=\"taxAmount\" column=\"o_\u6d88\u8cbb\u7a0e\u984d\"/&gt;\n        &lt;result property=\"totalAmount\" column=\"o_\u53d7\u6ce8\u5408\u8a08\"/&gt;\n        &lt;result property=\"status\" column=\"o_\u30b9\u30c6\u30fc\u30bf\u30b9\"\n                typeHandler=\"com.example.sms.infrastructure.out.persistence.typehandler.OrderStatusTypeHandler\"/&gt;\n        &lt;result property=\"version\" column=\"o_\u30d0\u30fc\u30b8\u30e7\u30f3\"/&gt;\n        &lt;result property=\"createdAt\" column=\"o_\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"o_\u66f4\u65b0\u65e5\u6642\"/&gt;\n        &lt;!-- \u53d7\u6ce8\u660e\u7d30\u3068\u306e1:N\u95a2\u9023 --&gt;\n        &lt;collection property=\"details\" ofType=\"com.example.sms.domain.model.sales.SalesOrderDetail\"\n                    resultMap=\"salesOrderDetailNestedResultMap\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;!-- \u53d7\u6ce8\u660e\u7d30\u306e\u30cd\u30b9\u30c8 ResultMap --&gt;\n    &lt;resultMap id=\"salesOrderDetailNestedResultMap\" type=\"com.example.sms.domain.model.sales.SalesOrderDetail\"&gt;\n        &lt;id property=\"id\" column=\"d_id\"/&gt;\n        &lt;result property=\"orderId\" column=\"d_\u53d7\u6ce8ID\"/&gt;\n        &lt;result property=\"lineNumber\" column=\"d_\u884c\u756a\u53f7\"/&gt;\n        &lt;result property=\"productCode\" column=\"d_\u5546\u54c1\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"productName\" column=\"d_\u5546\u54c1\u540d\"/&gt;\n        &lt;result property=\"orderQuantity\" column=\"d_\u53d7\u6ce8\u6570\u91cf\"/&gt;\n        &lt;result property=\"allocatedQuantity\" column=\"d_\u5f15\u5f53\u6570\u91cf\"/&gt;\n        &lt;result property=\"shippedQuantity\" column=\"d_\u51fa\u8377\u6570\u91cf\"/&gt;\n        &lt;result property=\"remainingQuantity\" column=\"d_\u6b8b\u6570\u91cf\"/&gt;\n        &lt;result property=\"unit\" column=\"d_\u5358\u4f4d\"/&gt;\n        &lt;result property=\"unitPrice\" column=\"d_\u5358\u4fa1\"/&gt;\n        &lt;result property=\"amount\" column=\"d_\u91d1\u984d\"/&gt;\n        &lt;result property=\"taxCategory\" column=\"d_\u7a0e\u533a\u5206\"\n                typeHandler=\"com.example.sms.infrastructure.out.persistence.typehandler.TaxCategoryTypeHandler\"/&gt;\n        &lt;result property=\"taxRate\" column=\"d_\u6d88\u8cbb\u7a0e\u7387\"/&gt;\n        &lt;result property=\"taxAmount\" column=\"d_\u6d88\u8cbb\u7a0e\u984d\"/&gt;\n        &lt;result property=\"version\" column=\"d_\u30d0\u30fc\u30b8\u30e7\u30f3\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;!-- JOIN \u306b\u3088\u308b\u4e00\u62ec\u53d6\u5f97\u30af\u30a8\u30ea --&gt;\n    &lt;select id=\"findWithDetailsByOrderNumber\" resultMap=\"salesOrderWithDetailsResultMap\"&gt;\n        SELECT\n            o.\"ID\" AS o_id,\n            o.\"\u53d7\u6ce8\u756a\u53f7\" AS o_\u53d7\u6ce8\u756a\u53f7,\n            o.\"\u53d7\u6ce8\u65e5\" AS o_\u53d7\u6ce8\u65e5,\n            o.\"\u9867\u5ba2\u30b3\u30fc\u30c9\" AS o_\u9867\u5ba2\u30b3\u30fc\u30c9,\n            o.\"\u51fa\u8377\u5148\u30b3\u30fc\u30c9\" AS o_\u51fa\u8377\u5148\u30b3\u30fc\u30c9,\n            o.\"\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\" AS o_\u62c5\u5f53\u8005\u30b3\u30fc\u30c9,\n            o.\"\u5e0c\u671b\u7d0d\u671f\" AS o_\u5e0c\u671b\u7d0d\u671f,\n            o.\"\u51fa\u8377\u4e88\u5b9a\u65e5\" AS o_\u51fa\u8377\u4e88\u5b9a\u65e5,\n            o.\"\u53d7\u6ce8\u91d1\u984d\" AS o_\u53d7\u6ce8\u91d1\u984d,\n            o.\"\u6d88\u8cbb\u7a0e\u984d\" AS o_\u6d88\u8cbb\u7a0e\u984d,\n            o.\"\u53d7\u6ce8\u5408\u8a08\" AS o_\u53d7\u6ce8\u5408\u8a08,\n            o.\"\u30b9\u30c6\u30fc\u30bf\u30b9\" AS o_\u30b9\u30c6\u30fc\u30bf\u30b9,\n            o.\"\u30d0\u30fc\u30b8\u30e7\u30f3\" AS o_\u30d0\u30fc\u30b8\u30e7\u30f3,\n            o.\"\u4f5c\u6210\u65e5\u6642\" AS o_\u4f5c\u6210\u65e5\u6642,\n            o.\"\u66f4\u65b0\u65e5\u6642\" AS o_\u66f4\u65b0\u65e5\u6642,\n            d.\"ID\" AS d_id,\n            d.\"\u53d7\u6ce8ID\" AS d_\u53d7\u6ce8ID,\n            d.\"\u884c\u756a\u53f7\" AS d_\u884c\u756a\u53f7,\n            d.\"\u5546\u54c1\u30b3\u30fc\u30c9\" AS d_\u5546\u54c1\u30b3\u30fc\u30c9,\n            d.\"\u5546\u54c1\u540d\" AS d_\u5546\u54c1\u540d,\n            d.\"\u53d7\u6ce8\u6570\u91cf\" AS d_\u53d7\u6ce8\u6570\u91cf,\n            d.\"\u5f15\u5f53\u6570\u91cf\" AS d_\u5f15\u5f53\u6570\u91cf,\n            d.\"\u51fa\u8377\u6570\u91cf\" AS d_\u51fa\u8377\u6570\u91cf,\n            d.\"\u6b8b\u6570\u91cf\" AS d_\u6b8b\u6570\u91cf,\n            d.\"\u5358\u4f4d\" AS d_\u5358\u4f4d,\n            d.\"\u5358\u4fa1\" AS d_\u5358\u4fa1,\n            d.\"\u91d1\u984d\" AS d_\u91d1\u984d,\n            d.\"\u7a0e\u533a\u5206\" AS d_\u7a0e\u533a\u5206,\n            d.\"\u6d88\u8cbb\u7a0e\u7387\" AS d_\u6d88\u8cbb\u7a0e\u7387,\n            d.\"\u6d88\u8cbb\u7a0e\u984d\" AS d_\u6d88\u8cbb\u7a0e\u984d,\n            d.\"\u30d0\u30fc\u30b8\u30e7\u30f3\" AS d_\u30d0\u30fc\u30b8\u30e7\u30f3\n        FROM \"\u53d7\u6ce8\u30c7\u30fc\u30bf\" o\n        LEFT JOIN \"\u53d7\u6ce8\u660e\u7d30\" d\n            ON o.\"ID\" = d.\"\u53d7\u6ce8ID\"\n        WHERE o.\"\u53d7\u6ce8\u756a\u53f7\" = #{orderNumber}\n        ORDER BY d.\"\u884c\u756a\u53f7\"\n    &lt;/select&gt;\n\n&lt;/mapper&gt;\n</code></pre>"},{"location":"article/part2/chapter06/#_25","title":"\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\u306e\u30dd\u30a4\u30f3\u30c8","text":"\u8a2d\u5b9a\u9805\u76ee \u8aac\u660e <code>&lt;collection&gt;</code> 1:N \u95a2\u9023\u306e\u30de\u30c3\u30d4\u30f3\u30b0 <code>&lt;id&gt;</code> \u4e3b\u30ad\u30fc\u306e\u8b58\u5225\uff08MyBatis \u304c\u91cd\u8907\u6392\u9664\u306b\u4f7f\u7528\uff09 <code>resultMap</code> \u30cd\u30b9\u30c8\u3057\u305f ResultMap \u306e\u53c2\u7167 \u30a8\u30a4\u30ea\u30a2\u30b9\uff08AS\uff09 \u30ab\u30e9\u30e0\u540d\u306e\u91cd\u8907\u3092\u907f\u3051\u308b\u305f\u3081\u306e\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9 <code>ORDER BY</code> \u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306e\u9806\u5e8f\u3092\u4fdd\u8a3c"},{"location":"article/part2/chapter06/#_26","title":"\u697d\u89b3\u30ed\u30c3\u30af\u306e\u5b9f\u88c5","text":"<p>\u8907\u6570\u30e6\u30fc\u30b6\u30fc\u304c\u540c\u6642\u306b\u53d7\u6ce8\u30c7\u30fc\u30bf\u3092\u7de8\u96c6\u3059\u308b\u5834\u5408\u3001\u30c7\u30fc\u30bf\u306e\u6574\u5408\u6027\u3092\u4fdd\u3064\u305f\u3081\u306b\u697d\u89b3\u30ed\u30c3\u30af\uff08Optimistic Locking\uff09\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter06/#flyway","title":"Flyway \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3: \u30d0\u30fc\u30b8\u30e7\u30f3\u30ab\u30e9\u30e0\u8ffd\u52a0","text":"V010__add_version_columns.sql <pre><code>-- src/main/resources/db/migration/V010__add_version_columns.sql\n\n-- \u53d7\u6ce8\u30c7\u30fc\u30bf\u30c6\u30fc\u30d6\u30eb\u306b\u30d0\u30fc\u30b8\u30e7\u30f3\u30ab\u30e9\u30e0\u3092\u8ffd\u52a0\nALTER TABLE \"\u53d7\u6ce8\u30c7\u30fc\u30bf\" ADD COLUMN \"\u30d0\u30fc\u30b8\u30e7\u30f3\" INTEGER DEFAULT 1 NOT NULL;\n\n-- \u53d7\u6ce8\u660e\u7d30\u30c6\u30fc\u30d6\u30eb\u306b\u30d0\u30fc\u30b8\u30e7\u30f3\u30ab\u30e9\u30e0\u3092\u8ffd\u52a0\nALTER TABLE \"\u53d7\u6ce8\u660e\u7d30\" ADD COLUMN \"\u30d0\u30fc\u30b8\u30e7\u30f3\" INTEGER DEFAULT 1 NOT NULL;\n\n-- \u51fa\u8377\u6307\u793a\u30c7\u30fc\u30bf\u30c6\u30fc\u30d6\u30eb\u306b\u30d0\u30fc\u30b8\u30e7\u30f3\u30ab\u30e9\u30e0\u3092\u8ffd\u52a0\nALTER TABLE \"\u51fa\u8377\u6307\u793a\u30c7\u30fc\u30bf\" ADD COLUMN \"\u30d0\u30fc\u30b8\u30e7\u30f3\" INTEGER DEFAULT 1 NOT NULL;\n\n-- \u51fa\u8377\u6307\u793a\u660e\u7d30\u30c6\u30fc\u30d6\u30eb\u306b\u30d0\u30fc\u30b8\u30e7\u30f3\u30ab\u30e9\u30e0\u3092\u8ffd\u52a0\nALTER TABLE \"\u51fa\u8377\u6307\u793a\u660e\u7d30\" ADD COLUMN \"\u30d0\u30fc\u30b8\u30e7\u30f3\" INTEGER DEFAULT 1 NOT NULL;\n\n-- \u58f2\u4e0a\u30c7\u30fc\u30bf\u30c6\u30fc\u30d6\u30eb\u306b\u30d0\u30fc\u30b8\u30e7\u30f3\u30ab\u30e9\u30e0\u3092\u8ffd\u52a0\nALTER TABLE \"\u58f2\u4e0a\u30c7\u30fc\u30bf\" ADD COLUMN \"\u30d0\u30fc\u30b8\u30e7\u30f3\" INTEGER DEFAULT 1 NOT NULL;\n\n-- \u58f2\u4e0a\u660e\u7d30\u30c6\u30fc\u30d6\u30eb\u306b\u30d0\u30fc\u30b8\u30e7\u30f3\u30ab\u30e9\u30e0\u3092\u8ffd\u52a0\nALTER TABLE \"\u58f2\u4e0a\u660e\u7d30\" ADD COLUMN \"\u30d0\u30fc\u30b8\u30e7\u30f3\" INTEGER DEFAULT 1 NOT NULL;\n\n-- \u8fd4\u54c1\u30c7\u30fc\u30bf\u30c6\u30fc\u30d6\u30eb\u306b\u30d0\u30fc\u30b8\u30e7\u30f3\u30ab\u30e9\u30e0\u3092\u8ffd\u52a0\nALTER TABLE \"\u8fd4\u54c1\u30c7\u30fc\u30bf\" ADD COLUMN \"\u30d0\u30fc\u30b8\u30e7\u30f3\" INTEGER DEFAULT 1 NOT NULL;\n\n-- \u8fd4\u54c1\u660e\u7d30\u30c6\u30fc\u30d6\u30eb\u306b\u30d0\u30fc\u30b8\u30e7\u30f3\u30ab\u30e9\u30e0\u3092\u8ffd\u52a0\nALTER TABLE \"\u8fd4\u54c1\u660e\u7d30\" ADD COLUMN \"\u30d0\u30fc\u30b8\u30e7\u30f3\" INTEGER DEFAULT 1 NOT NULL;\n\n-- \u30b3\u30e1\u30f3\u30c8\u8ffd\u52a0\nCOMMENT ON COLUMN \"\u53d7\u6ce8\u30c7\u30fc\u30bf\".\"\u30d0\u30fc\u30b8\u30e7\u30f3\" IS '\u697d\u89b3\u30ed\u30c3\u30af\u7528\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7';\nCOMMENT ON COLUMN \"\u53d7\u6ce8\u660e\u7d30\".\"\u30d0\u30fc\u30b8\u30e7\u30f3\" IS '\u697d\u89b3\u30ed\u30c3\u30af\u7528\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7';\nCOMMENT ON COLUMN \"\u51fa\u8377\u6307\u793a\u30c7\u30fc\u30bf\".\"\u30d0\u30fc\u30b8\u30e7\u30f3\" IS '\u697d\u89b3\u30ed\u30c3\u30af\u7528\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7';\nCOMMENT ON COLUMN \"\u51fa\u8377\u6307\u793a\u660e\u7d30\".\"\u30d0\u30fc\u30b8\u30e7\u30f3\" IS '\u697d\u89b3\u30ed\u30c3\u30af\u7528\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7';\nCOMMENT ON COLUMN \"\u58f2\u4e0a\u30c7\u30fc\u30bf\".\"\u30d0\u30fc\u30b8\u30e7\u30f3\" IS '\u697d\u89b3\u30ed\u30c3\u30af\u7528\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7';\nCOMMENT ON COLUMN \"\u58f2\u4e0a\u660e\u7d30\".\"\u30d0\u30fc\u30b8\u30e7\u30f3\" IS '\u697d\u89b3\u30ed\u30c3\u30af\u7528\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7';\nCOMMENT ON COLUMN \"\u8fd4\u54c1\u30c7\u30fc\u30bf\".\"\u30d0\u30fc\u30b8\u30e7\u30f3\" IS '\u697d\u89b3\u30ed\u30c3\u30af\u7528\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7';\nCOMMENT ON COLUMN \"\u8fd4\u54c1\u660e\u7d30\".\"\u30d0\u30fc\u30b8\u30e7\u30f3\" IS '\u697d\u89b3\u30ed\u30c3\u30af\u7528\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7';\n</code></pre>"},{"location":"article/part2/chapter06/#_27","title":"\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3078\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u30d5\u30a3\u30fc\u30eb\u30c9\u8ffd\u52a0","text":"SalesOrder.java\uff08\u30d0\u30fc\u30b8\u30e7\u30f3\u30d5\u30a3\u30fc\u30eb\u30c9\u8ffd\u52a0\uff09 <pre><code>// src/main/java/com/example/sms/domain/model/sales/SalesOrder.java\npackage com.example.sms.domain.model.sales;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class SalesOrder {\n    private Integer id;\n    private String orderNumber;\n    private LocalDate orderDate;\n    private String customerCode;\n    private String shipToCode;\n    private String salesRepCode;\n    private LocalDate requestedDeliveryDate;\n    private LocalDate scheduledShipDate;\n    private BigDecimal subtotal;\n    private BigDecimal taxAmount;\n    private BigDecimal totalAmount;\n    private OrderStatus status;\n    private Integer quotationId;\n    private String customerOrderNumber;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n\n    // \u697d\u89b3\u30ed\u30c3\u30af\u7528\u30d0\u30fc\u30b8\u30e7\u30f3\n    @Builder.Default\n    private Integer version = 1;\n\n    // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n    @Builder.Default\n    private List&lt;SalesOrderDetail&gt; details = new ArrayList&lt;&gt;();\n}\n</code></pre>"},{"location":"article/part2/chapter06/#mybatis-mapper","title":"MyBatis Mapper: \u697d\u89b3\u30ed\u30c3\u30af\u5bfe\u5fdc\u306e\u66f4\u65b0","text":"SalesOrderMapper.xml\uff08\u697d\u89b3\u30ed\u30c3\u30af\u5bfe\u5fdc UPDATE\uff09 <pre><code>&lt;!-- \u697d\u89b3\u30ed\u30c3\u30af\u5bfe\u5fdc\u306e\u66f4\u65b0\uff08\u30d0\u30fc\u30b8\u30e7\u30f3\u30c1\u30a7\u30c3\u30af\u4ed8\u304d\uff09 --&gt;\n&lt;update id=\"updateWithOptimisticLock\" parameterType=\"com.example.sms.domain.model.sales.SalesOrder\"&gt;\n    UPDATE \"\u53d7\u6ce8\u30c7\u30fc\u30bf\"\n    SET\n        \"\u53d7\u6ce8\u65e5\" = #{orderDate},\n        \"\u9867\u5ba2\u30b3\u30fc\u30c9\" = #{customerCode},\n        \"\u51fa\u8377\u5148\u30b3\u30fc\u30c9\" = #{shipToCode},\n        \"\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\" = #{salesRepCode},\n        \"\u5e0c\u671b\u7d0d\u671f\" = #{requestedDeliveryDate},\n        \"\u51fa\u8377\u4e88\u5b9a\u65e5\" = #{scheduledShipDate},\n        \"\u53d7\u6ce8\u91d1\u984d\" = #{subtotal},\n        \"\u6d88\u8cbb\u7a0e\u984d\" = #{taxAmount},\n        \"\u53d7\u6ce8\u5408\u8a08\" = #{totalAmount},\n        \"\u30b9\u30c6\u30fc\u30bf\u30b9\" = #{status, typeHandler=com.example.sms.infrastructure.out.persistence.typehandler.OrderStatusTypeHandler},\n        \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP,\n        \"\u30d0\u30fc\u30b8\u30e7\u30f3\" = \"\u30d0\u30fc\u30b8\u30e7\u30f3\" + 1\n    WHERE \"ID\" = #{id}\n    AND \"\u30d0\u30fc\u30b8\u30e7\u30f3\" = #{version}\n&lt;/update&gt;\n</code></pre>"},{"location":"article/part2/chapter06/#_28","title":"\u697d\u89b3\u30ed\u30c3\u30af\u4f8b\u5916\u30af\u30e9\u30b9","text":"OptimisticLockException.java <pre><code>// src/main/java/com/example/sms/domain/exception/OptimisticLockException.java\npackage com.example.sms.domain.exception;\n\npublic class OptimisticLockException extends RuntimeException {\n\n    private final String entityName;\n    private final Integer entityId;\n    private final Integer expectedVersion;\n    private final Integer actualVersion;\n\n    public OptimisticLockException(String entityName, Integer entityId) {\n        super(String.format(\"%s (ID: %d) \u306f\u65e2\u306b\u524a\u9664\u3055\u308c\u3066\u3044\u307e\u3059\", entityName, entityId));\n        this.entityName = entityName;\n        this.entityId = entityId;\n        this.expectedVersion = null;\n        this.actualVersion = null;\n    }\n\n    public OptimisticLockException(String entityName, Integer entityId,\n                                    Integer expectedVersion, Integer actualVersion) {\n        super(String.format(\"%s (ID: %d) \u306f\u4ed6\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u3088\u3063\u3066\u66f4\u65b0\u3055\u308c\u3066\u3044\u307e\u3059\u3002\" +\n                \"\u671f\u5f85\u30d0\u30fc\u30b8\u30e7\u30f3: %d, \u5b9f\u969b\u306e\u30d0\u30fc\u30b8\u30e7\u30f3: %d\",\n                entityName, entityId, expectedVersion, actualVersion));\n        this.entityName = entityName;\n        this.entityId = entityId;\n        this.expectedVersion = expectedVersion;\n        this.actualVersion = actualVersion;\n    }\n\n    public String getEntityName() {\n        return entityName;\n    }\n\n    public Integer getEntityId() {\n        return entityId;\n    }\n\n    public Integer getExpectedVersion() {\n        return expectedVersion;\n    }\n\n    public Integer getActualVersion() {\n        return actualVersion;\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter06/#repository","title":"Repository \u5b9f\u88c5: \u697d\u89b3\u30ed\u30c3\u30af\u5bfe\u5fdc","text":"SalesOrderRepositoryImpl.java\uff08\u697d\u89b3\u30ed\u30c3\u30af\u5bfe\u5fdc\uff09 <pre><code>// src/main/java/com/example/sms/infrastructure/persistence/repository/SalesOrderRepositoryImpl.java\npackage com.example.sms.infrastructure.persistence.repository;\n\nimport com.example.sms.application.port.out.SalesOrderRepository;\nimport com.example.sms.domain.exception.OptimisticLockException;\nimport com.example.sms.domain.model.sales.OrderStatus;\nimport com.example.sms.domain.model.sales.SalesOrder;\nimport com.example.sms.domain.model.sales.SalesOrderDetail;\nimport com.example.sms.infrastructure.persistence.mapper.SalesOrderMapper;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Repository;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.util.List;\nimport java.util.Optional;\n\n@Repository\n@RequiredArgsConstructor\npublic class SalesOrderRepositoryImpl implements SalesOrderRepository {\n\n    private final SalesOrderMapper mapper;\n\n    @Override\n    @Transactional\n    public void update(SalesOrder order) {\n        int updatedCount = mapper.updateWithOptimisticLock(order);\n\n        if (updatedCount == 0) {\n            // \u30d0\u30fc\u30b8\u30e7\u30f3\u4e0d\u4e00\u81f4\u307e\u305f\u306f\u524a\u9664\u6e08\u307f\n            Integer currentVersion = mapper.findVersionById(order.getId());\n            if (currentVersion == null) {\n                throw new OptimisticLockException(\"\u53d7\u6ce8\", order.getId());\n            } else {\n                throw new OptimisticLockException(\"\u53d7\u6ce8\", order.getId(),\n                        order.getVersion(), currentVersion);\n            }\n        }\n    }\n\n    @Override\n    public Optional&lt;SalesOrder&gt; findByIdWithDetails(Integer id) {\n        return Optional.ofNullable(mapper.findByIdWithDetails(id));\n    }\n\n    @Override\n    public Optional&lt;SalesOrder&gt; findByOrderNumber(String orderNumber) {\n        return Optional.ofNullable(mapper.findByOrderNumber(orderNumber));\n    }\n\n    // \u305d\u306e\u4ed6\u306e\u30e1\u30bd\u30c3\u30c9...\n}\n</code></pre>"},{"location":"article/part2/chapter06/#tdd_2","title":"TDD: \u697d\u89b3\u30ed\u30c3\u30af\u306e\u30c6\u30b9\u30c8","text":"SalesOrderRepositoryOptimisticLockTest.java <pre><code>// src/test/java/com/example/sms/infrastructure/persistence/repository/SalesOrderRepositoryOptimisticLockTest.java\npackage com.example.sms.infrastructure.persistence.repository;\n\nimport com.example.sms.application.port.out.SalesOrderRepository;\nimport com.example.sms.domain.exception.OptimisticLockException;\nimport com.example.sms.domain.model.sales.OrderStatus;\nimport com.example.sms.domain.model.sales.SalesOrder;\nimport com.example.sms.testsetup.BaseIntegrationTest;\nimport org.junit.jupiter.api.*;\nimport org.springframework.beans.factory.annotation.Autowired;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\n\nimport static org.assertj.core.api.Assertions.*;\n\n@DisplayName(\"\u53d7\u6ce8\u30ea\u30dd\u30b8\u30c8\u30ea - \u697d\u89b3\u30ed\u30c3\u30af\")\nclass SalesOrderRepositoryOptimisticLockTest extends BaseIntegrationTest {\n\n    @Autowired\n    private SalesOrderRepository salesOrderRepository;\n\n    @BeforeEach\n    void setUp() {\n        salesOrderRepository.deleteAll();\n    }\n\n    @Nested\n    @DisplayName(\"\u697d\u89b3\u30ed\u30c3\u30af\")\n    class OptimisticLocking {\n\n        @Test\n        @DisplayName(\"\u540c\u3058\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u66f4\u65b0\u3067\u304d\u308b\")\n        void canUpdateWithSameVersion() {\n            // Arrange\n            var order = SalesOrder.builder()\n                    .orderNumber(\"SO-2025-0001\")\n                    .orderDate(LocalDate.of(2025, 1, 20))\n                    .customerCode(\"CUST-001\")\n                    .subtotal(new BigDecimal(\"50000\"))\n                    .taxAmount(new BigDecimal(\"5000\"))\n                    .totalAmount(new BigDecimal(\"55000\"))\n                    .status(OrderStatus.RECEIVED)\n                    .build();\n            salesOrderRepository.save(order);\n\n            // Act\n            var fetched = salesOrderRepository.findByOrderNumber(\"SO-2025-0001\").get();\n            fetched.setSubtotal(new BigDecimal(\"60000\"));\n            salesOrderRepository.update(fetched);\n\n            // Assert\n            var updated = salesOrderRepository.findByOrderNumber(\"SO-2025-0001\").get();\n            assertThat(updated.getSubtotal()).isEqualByComparingTo(new BigDecimal(\"60000\"));\n            assertThat(updated.getVersion()).isEqualTo(2); // \u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8\n        }\n\n        @Test\n        @DisplayName(\"\u7570\u306a\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u66f4\u65b0\u3059\u308b\u3068\u697d\u89b3\u30ed\u30c3\u30af\u4f8b\u5916\u304c\u767a\u751f\u3059\u308b\")\n        void throwsExceptionWhenVersionMismatch() {\n            // Arrange\n            var order = SalesOrder.builder()\n                    .orderNumber(\"SO-2025-0002\")\n                    .orderDate(LocalDate.of(2025, 1, 20))\n                    .customerCode(\"CUST-001\")\n                    .subtotal(new BigDecimal(\"50000\"))\n                    .taxAmount(new BigDecimal(\"5000\"))\n                    .totalAmount(new BigDecimal(\"55000\"))\n                    .status(OrderStatus.RECEIVED)\n                    .build();\n            salesOrderRepository.save(order);\n\n            // \u30e6\u30fc\u30b6\u30fcA\u304c\u53d6\u5f97\n            var orderA = salesOrderRepository.findByOrderNumber(\"SO-2025-0002\").get();\n            // \u30e6\u30fc\u30b6\u30fcB\u304c\u53d6\u5f97\n            var orderB = salesOrderRepository.findByOrderNumber(\"SO-2025-0002\").get();\n\n            // \u30e6\u30fc\u30b6\u30fcA\u304c\u66f4\u65b0\uff08\u6210\u529f\uff09\n            orderA.setSubtotal(new BigDecimal(\"60000\"));\n            salesOrderRepository.update(orderA);\n\n            // Act &amp; Assert: \u30e6\u30fc\u30b6\u30fcB\u304c\u53e4\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u66f4\u65b0\uff08\u5931\u6557\uff09\n            orderB.setSubtotal(new BigDecimal(\"70000\"));\n            assertThatThrownBy(() -&gt; salesOrderRepository.update(orderB))\n                    .isInstanceOf(OptimisticLockException.class)\n                    .hasMessageContaining(\"\u4ed6\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u3088\u3063\u3066\u66f4\u65b0\u3055\u308c\u3066\u3044\u307e\u3059\");\n        }\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter06/#_29","title":"\u697d\u89b3\u30ed\u30c3\u30af\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","text":"\u30dd\u30a4\u30f3\u30c8 \u8aac\u660e \u30d0\u30fc\u30b8\u30e7\u30f3\u30ab\u30e9\u30e0 INTEGER \u578b\u3067\u5341\u5206\uff08\u30aa\u30fc\u30d0\u30fc\u30d5\u30ed\u30fc\u306f\u5b9f\u7528\u4e0a\u554f\u984c\u306a\u3057\uff09 WHERE \u6761\u4ef6 \u5fc5\u305a <code>AND \"\u30d0\u30fc\u30b8\u30e7\u30f3\" = #{version}</code> \u3092\u542b\u3081\u308b \u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8 <code>\"\u30d0\u30fc\u30b8\u30e7\u30f3\" = \"\u30d0\u30fc\u30b8\u30e7\u30f3\" + 1</code> \u3067\u30a2\u30c8\u30df\u30c3\u30af\u306b\u66f4\u65b0 \u4f8b\u5916\u51e6\u7406 \u66f4\u65b0\u4ef6\u6570\u304c0\u306e\u5834\u5408\u306f\u697d\u89b3\u30ed\u30c3\u30af\u4f8b\u5916\u3092\u30b9\u30ed\u30fc \u30ea\u30c8\u30e9\u30a4 \u5fc5\u8981\u306b\u5fdc\u3058\u3066\u518d\u53d6\u5f97\u30fb\u518d\u66f4\u65b0\u306e\u30ea\u30c8\u30e9\u30a4\u30ed\u30b8\u30c3\u30af\u3092\u5b9f\u88c5"},{"location":"article/part2/chapter06/#_30","title":"\u307e\u3068\u3081","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u4e2d\u6838\u3068\u306a\u308b\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u306e\u8a2d\u8a08\u3092\u884c\u3044\u307e\u3057\u305f\u3002</p>"},{"location":"article/part2/chapter06/#_31","title":"\u8a2d\u8a08\u306e\u30dd\u30a4\u30f3\u30c8","text":"<ol> <li> <p>\u30d8\u30c3\u30c0\u30fb\u660e\u7d30\u69cb\u9020: \u3059\u3079\u3066\u306e\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u306f\u3001\u30d8\u30c3\u30c0\uff08\u89aa\uff09\u3068\u660e\u7d30\uff08\u5b50\uff09\u306e1\u5bfe\u591a\u69cb\u9020\u3092\u6301\u3064</p> </li> <li> <p>\u30b9\u30c6\u30fc\u30bf\u30b9\u7ba1\u7406: \u5404\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306f\u72b6\u614b\u9077\u79fb\u3092\u6301\u3061\u3001PostgreSQL \u306e ENUM \u578b\u3067\u7ba1\u7406</p> </li> <li> <p>\u30c8\u30ec\u30fc\u30b5\u30d3\u30ea\u30c6\u30a3: \u898b\u7a4d\u2192\u53d7\u6ce8\u2192\u51fa\u8377\u2192\u58f2\u4e0a\u306e\u6d41\u308c\u3092\u8ffd\u8de1\u53ef\u80fd\u306a\u5916\u90e8\u30ad\u30fc\u8a2d\u8a08</p> </li> <li> <p>\u6570\u91cf\u7ba1\u7406: \u53d7\u6ce8\u660e\u7d30\u3067\u306f\u53d7\u6ce8\u6570\u91cf\u30fb\u5f15\u5f53\u6570\u91cf\u30fb\u51fa\u8377\u6570\u91cf\u30fb\u6b8b\u6570\u91cf\u3092\u5206\u96e2\u7ba1\u7406</p> </li> <li> <p>\u8fd4\u54c1\u30fb\u8d64\u9ed2\u51e6\u7406: \u58f2\u4e0a\u306e\u8a02\u6b63\u306f\u524a\u9664\u3067\u306f\u306a\u304f\u3001\u8fd4\u54c1\u30c7\u30fc\u30bf\u306b\u3088\u308b\u8ffd\u8a18\u3067\u5bfe\u5fdc</p> </li> <li> <p>\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a: MyBatis \u306e\u30cd\u30b9\u30c8 ResultMap \u3067\u89aa\u5b50\u95a2\u4fc2\u3092\u52b9\u7387\u7684\u306b\u53d6\u5f97</p> </li> <li> <p>\u697d\u89b3\u30ed\u30c3\u30af: \u30d0\u30fc\u30b8\u30e7\u30f3\u30ab\u30e9\u30e0\u306b\u3088\u308b\u540c\u6642\u66f4\u65b0\u5236\u5fa1\u3067\u6574\u5408\u6027\u3092\u4fdd\u8a3c</p> </li> </ol>"},{"location":"article/part2/chapter06/#_32","title":"\u6b21\u7ae0\u306e\u4e88\u544a","text":"<p>\u7b2c7\u7ae0\u3067\u306f\u3001\u58f2\u4e0a\u30c7\u30fc\u30bf\u3092\u8d77\u70b9\u3068\u3057\u305f\u50b5\u6a29\u7ba1\u7406\uff08\u8acb\u6c42\u30fb\u5165\u91d1\uff09\u306e\u8a2d\u8a08\u3092\u884c\u3044\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter07/","title":"\u7b2c7\u7ae0\uff1a\u50b5\u6a29\u7ba1\u7406\u306e\u8a2d\u8a08","text":"<p>\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306b\u304a\u3044\u3066\u3001\u58f2\u4e0a\u304c\u767a\u751f\u3057\u305f\u5f8c\u306e\u8acb\u6c42\u30fb\u5165\u91d1\u7ba1\u7406\u306f\u7d4c\u55b6\u306e\u6839\u5e79\u3092\u652f\u3048\u308b\u91cd\u8981\u306a\u696d\u52d9\u3067\u3059\u3002\u672c\u7ae0\u3067\u306f\u3001\u8acb\u6c42\u696d\u52d9\u3068\u56de\u53ce\u696d\u52d9\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\u3068\u5b9f\u88c5\u3092\u884c\u3044\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter07/#_1","title":"\u50b5\u6a29\u7ba1\u7406\u306e\u5168\u4f53\u50cf","text":"<p>\u50b5\u6a29\u7ba1\u7406\u306f\u300c\u58f2\u4e0a \u2192 \u8acb\u6c42 \u2192 \u5165\u91d1 \u2192 \u6d88\u8fbc\u300d\u3068\u3044\u3046\u4e00\u9023\u306e\u30d5\u30ed\u30fc\u3067\u69cb\u6210\u3055\u308c\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter07/#_2","title":"\u50b5\u6a29\u7ba1\u7406\u3067\u6271\u3046\u30c7\u30fc\u30bf","text":"\u30c7\u30fc\u30bf \u8aac\u660e \u8acb\u6c42\u30c7\u30fc\u30bf \u9867\u5ba2\u3078\u306e\u8acb\u6c42\u60c5\u5831\uff08\u8acb\u6c42\u91d1\u984d\u3001\u8acb\u6c42\u65e5\u3001\u56de\u53ce\u4e88\u5b9a\u65e5\uff09 \u8acb\u6c42\u660e\u7d30 \u8acb\u6c42\u306b\u542b\u307e\u308c\u308b\u58f2\u4e0a\u30c7\u30fc\u30bf\u306e\u660e\u7d30 \u5165\u91d1\u30c7\u30fc\u30bf \u9867\u5ba2\u304b\u3089\u306e\u5165\u91d1\u60c5\u5831\uff08\u5165\u91d1\u91d1\u984d\u3001\u5165\u91d1\u65b9\u6cd5\uff09 \u5165\u91d1\u6d88\u8fbc\u660e\u7d30 \u5165\u91d1\u3068\u8acb\u6c42\u306e\u7a81\u5408\u60c5\u5831 \u58f2\u639b\u91d1\u6b8b\u9ad8 \u9867\u5ba2\u5225\u306e\u50b5\u6a29\u6b8b\u9ad8"},{"location":"article/part2/chapter07/#71-db","title":"7.1 \u8acb\u6c42\u696d\u52d9\u306e DB \u8a2d\u8a08","text":""},{"location":"article/part2/chapter07/#_3","title":"\u8acb\u6c42\u696d\u52d9\u30d5\u30ed\u30fc\u306e\u7406\u89e3","text":"<p>\u8acb\u6c42\u696d\u52d9\u306b\u306f\u300c\u90fd\u5ea6\u8acb\u6c42\u300d\u3068\u300c\u7de0\u3081\u8acb\u6c42\u300d\u306e2\u3064\u306e\u30d1\u30bf\u30fc\u30f3\u304c\u3042\u308a\u307e\u3059\u3002</p> <p></p> \u8acb\u6c42\u30d1\u30bf\u30fc\u30f3 \u7279\u5fb4 \u7528\u9014 \u90fd\u5ea6\u8acb\u6c42 \u58f2\u4e0a\u767a\u751f\u6642\u306b\u5373\u5ea7\u306b\u8acb\u6c42 \u5358\u767a\u53d6\u5f15\u3001\u73fe\u91d1\u53d6\u5f15 \u7de0\u3081\u8acb\u6c42 \u6708\u672b\u306a\u3069\u7de0\u65e5\u306b\u307e\u3068\u3081\u3066\u8acb\u6c42 \u7d99\u7d9a\u53d6\u5f15\u3001\u639b\u58f2\u308a"},{"location":"article/part2/chapter07/#_4","title":"\u7de0\u51e6\u7406\u306e\u6982\u5ff5","text":"<p>\u7de0\u3081\u8acb\u6c42\u3067\u306f\u3001\u9867\u5ba2\u3054\u3068\u306b\u8a2d\u5b9a\u3055\u308c\u305f\u7de0\u65e5\u306b\u57fa\u3065\u3044\u3066\u58f2\u4e0a\u3092\u96c6\u7d04\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter07/#_5","title":"\u8acb\u6c42\u30c7\u30fc\u30bf\u30fb\u8acb\u6c42\u660e\u7d30\u306e\u69cb\u9020","text":""},{"location":"article/part2/chapter07/#er","title":"\u8acb\u6c42\u30c7\u30fc\u30bf\u306e ER \u56f3","text":""},{"location":"article/part2/chapter07/#_6","title":"\u8acb\u6c42\u30b9\u30c6\u30fc\u30bf\u30b9\u306e\u5b9a\u7fa9","text":"\u30b9\u30c6\u30fc\u30bf\u30b9 \u8aac\u660e \u672a\u767a\u884c \u8acb\u6c42\u30c7\u30fc\u30bf\u4f5c\u6210\u6e08\u307f\u3001\u8acb\u6c42\u66f8\u672a\u767a\u884c \u767a\u884c\u6e08 \u8acb\u6c42\u66f8\u3092\u767a\u884c\u3057\u305f\u72b6\u614b \u4e00\u90e8\u5165\u91d1 \u4e00\u90e8\u5165\u91d1\u304c\u3042\u308a\u3001\u6b8b\u9ad8\u304c\u3042\u308b\u72b6\u614b \u5165\u91d1\u6e08 \u5168\u984d\u5165\u91d1\u304c\u5b8c\u4e86\u3057\u305f\u72b6\u614b \u56de\u53ce\u9045\u5ef6 \u56de\u53ce\u4e88\u5b9a\u65e5\u3092\u904e\u304e\u3066\u3082\u672a\u56de\u53ce\u306e\u72b6\u614b"},{"location":"article/part2/chapter07/#_7","title":"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff1a\u8acb\u6c42\u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210","text":"V011__create_invoice_tables.sql <pre><code>-- src/main/resources/db/migration/V011__create_invoice_tables.sql\n\n-- \u8acb\u6c42\u30b9\u30c6\u30fc\u30bf\u30b9\nCREATE TYPE \u8acb\u6c42\u30b9\u30c6\u30fc\u30bf\u30b9 AS ENUM ('\u672a\u767a\u884c', '\u767a\u884c\u6e08', '\u4e00\u90e8\u5165\u91d1', '\u5165\u91d1\u6e08', '\u56de\u53ce\u9045\u5ef6');\n\n-- \u8acb\u6c42\u533a\u5206\u306f V001 \u3067\u65e2\u306b\u5b9a\u7fa9\u6e08\u307f\uff08'\u90fd\u5ea6', '\u7de0\u3081'\uff09\n\n-- \u8acb\u6c42\u30c7\u30fc\u30bf\uff08\u30d8\u30c3\u30c0\uff09\nCREATE TABLE \"\u8acb\u6c42\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u8acb\u6c42\u756a\u53f7\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u8acb\u6c42\u65e5\" DATE NOT NULL,\n    \"\u8acb\u6c42\u5148\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u9867\u5ba2\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u9867\u5ba2\u679d\u756a\" VARCHAR(10) DEFAULT '00',\n    \"\u7de0\u65e5\" DATE,\n    \"\u8acb\u6c42\u533a\u5206\" \u8acb\u6c42\u533a\u5206 NOT NULL,\n    \"\u524d\u56de\u8acb\u6c42\u6b8b\u9ad8\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u5165\u91d1\u984d\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u7e70\u8d8a\u6b8b\u9ad8\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u4eca\u56de\u58f2\u4e0a\u984d\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u4eca\u56de\u6d88\u8cbb\u7a0e\u984d\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u4eca\u56de\u8acb\u6c42\u984d\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u8acb\u6c42\u6b8b\u9ad8\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u56de\u53ce\u4e88\u5b9a\u65e5\" DATE,\n    \"\u30b9\u30c6\u30fc\u30bf\u30b9\" \u8acb\u6c42\u30b9\u30c6\u30fc\u30bf\u30b9 DEFAULT '\u672a\u767a\u884c' NOT NULL,\n    \"\u5099\u8003\" TEXT,\n    \"\u30d0\u30fc\u30b8\u30e7\u30f3\" INTEGER DEFAULT 1 NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u8005\" VARCHAR(50),\n    CONSTRAINT \"fk_\u8acb\u6c42\u30c7\u30fc\u30bf_\u9867\u5ba2\"\n        FOREIGN KEY (\"\u9867\u5ba2\u30b3\u30fc\u30c9\", \"\u9867\u5ba2\u679d\u756a\") REFERENCES \"\u9867\u5ba2\u30de\u30b9\u30bf\"(\"\u9867\u5ba2\u30b3\u30fc\u30c9\", \"\u9867\u5ba2\u679d\u756a\")\n);\n\n-- \u8acb\u6c42\u660e\u7d30\nCREATE TABLE \"\u8acb\u6c42\u660e\u7d30\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u8acb\u6c42ID\" INTEGER NOT NULL,\n    \"\u884c\u756a\u53f7\" INTEGER NOT NULL,\n    \"\u58f2\u4e0aID\" INTEGER,\n    \"\u58f2\u4e0a\u756a\u53f7\" VARCHAR(20),\n    \"\u58f2\u4e0a\u65e5\" DATE,\n    \"\u58f2\u4e0a\u91d1\u984d\" DECIMAL(15, 2) NOT NULL,\n    \"\u6d88\u8cbb\u7a0e\u984d\" DECIMAL(15, 2) NOT NULL,\n    \"\u5408\u8a08\u91d1\u984d\" DECIMAL(15, 2) NOT NULL,\n    CONSTRAINT \"fk_\u8acb\u6c42\u660e\u7d30_\u8acb\u6c42\"\n        FOREIGN KEY (\"\u8acb\u6c42ID\") REFERENCES \"\u8acb\u6c42\u30c7\u30fc\u30bf\"(\"ID\") ON DELETE CASCADE,\n    CONSTRAINT \"fk_\u8acb\u6c42\u660e\u7d30_\u58f2\u4e0a\"\n        FOREIGN KEY (\"\u58f2\u4e0aID\") REFERENCES \"\u58f2\u4e0a\u30c7\u30fc\u30bf\"(\"ID\"),\n    CONSTRAINT \"uk_\u8acb\u6c42\u660e\u7d30_\u8acb\u6c42_\u884c\" UNIQUE (\"\u8acb\u6c42ID\", \"\u884c\u756a\u53f7\")\n);\n\n-- \u8acb\u6c42\u7de0\u5c65\u6b74\nCREATE TABLE \"\u8acb\u6c42\u7de0\u5c65\u6b74\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u9867\u5ba2\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u9867\u5ba2\u679d\u756a\" VARCHAR(10) DEFAULT '00',\n    \"\u7de0\u5e74\u6708\" VARCHAR(7) NOT NULL,\n    \"\u7de0\u65e5\" DATE NOT NULL,\n    \"\u58f2\u4e0a\u4ef6\u6570\" INTEGER NOT NULL,\n    \"\u58f2\u4e0a\u5408\u8a08\" DECIMAL(15, 2) NOT NULL,\n    \"\u6d88\u8cbb\u7a0e\u5408\u8a08\" DECIMAL(15, 2) NOT NULL,\n    \"\u8acb\u6c42ID\" INTEGER,\n    \"\u51e6\u7406\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"fk_\u8acb\u6c42\u7de0\u5c65\u6b74_\u9867\u5ba2\"\n        FOREIGN KEY (\"\u9867\u5ba2\u30b3\u30fc\u30c9\", \"\u9867\u5ba2\u679d\u756a\") REFERENCES \"\u9867\u5ba2\u30de\u30b9\u30bf\"(\"\u9867\u5ba2\u30b3\u30fc\u30c9\", \"\u9867\u5ba2\u679d\u756a\"),\n    CONSTRAINT \"fk_\u8acb\u6c42\u7de0\u5c65\u6b74_\u8acb\u6c42\"\n        FOREIGN KEY (\"\u8acb\u6c42ID\") REFERENCES \"\u8acb\u6c42\u30c7\u30fc\u30bf\"(\"ID\"),\n    CONSTRAINT \"uk_\u8acb\u6c42\u7de0\u5c65\u6b74_\u9867\u5ba2_\u5e74\u6708\" UNIQUE (\"\u9867\u5ba2\u30b3\u30fc\u30c9\", \"\u9867\u5ba2\u679d\u756a\", \"\u7de0\u5e74\u6708\")\n);\n\n-- \u58f2\u639b\u91d1\u6b8b\u9ad8\nCREATE TABLE \"\u58f2\u639b\u91d1\u6b8b\u9ad8\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u9867\u5ba2\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u9867\u5ba2\u679d\u756a\" VARCHAR(10) DEFAULT '00',\n    \"\u57fa\u6e96\u65e5\" DATE NOT NULL,\n    \"\u524d\u6708\u6b8b\u9ad8\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u5f53\u6708\u58f2\u4e0a\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u5f53\u6708\u5165\u91d1\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u5f53\u6708\u6b8b\u9ad8\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"fk_\u58f2\u639b\u91d1\u6b8b\u9ad8_\u9867\u5ba2\"\n        FOREIGN KEY (\"\u9867\u5ba2\u30b3\u30fc\u30c9\", \"\u9867\u5ba2\u679d\u756a\") REFERENCES \"\u9867\u5ba2\u30de\u30b9\u30bf\"(\"\u9867\u5ba2\u30b3\u30fc\u30c9\", \"\u9867\u5ba2\u679d\u756a\"),\n    CONSTRAINT \"uk_\u58f2\u639b\u91d1\u6b8b\u9ad8_\u9867\u5ba2_\u57fa\u6e96\u65e5\" UNIQUE (\"\u9867\u5ba2\u30b3\u30fc\u30c9\", \"\u9867\u5ba2\u679d\u756a\", \"\u57fa\u6e96\u65e5\")\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"idx_\u8acb\u6c42\u30c7\u30fc\u30bf_\u9867\u5ba2\u30b3\u30fc\u30c9\" ON \"\u8acb\u6c42\u30c7\u30fc\u30bf\"(\"\u9867\u5ba2\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u8acb\u6c42\u30c7\u30fc\u30bf_\u8acb\u6c42\u65e5\" ON \"\u8acb\u6c42\u30c7\u30fc\u30bf\"(\"\u8acb\u6c42\u65e5\");\nCREATE INDEX \"idx_\u8acb\u6c42\u30c7\u30fc\u30bf_\u30b9\u30c6\u30fc\u30bf\u30b9\" ON \"\u8acb\u6c42\u30c7\u30fc\u30bf\"(\"\u30b9\u30c6\u30fc\u30bf\u30b9\");\nCREATE INDEX \"idx_\u8acb\u6c42\u660e\u7d30_\u8acb\u6c42ID\" ON \"\u8acb\u6c42\u660e\u7d30\"(\"\u8acb\u6c42ID\");\nCREATE INDEX \"idx_\u58f2\u639b\u91d1\u6b8b\u9ad8_\u57fa\u6e96\u65e5\" ON \"\u58f2\u639b\u91d1\u6b8b\u9ad8\"(\"\u57fa\u6e96\u65e5\");\n\n-- \u30c6\u30fc\u30d6\u30eb\u30b3\u30e1\u30f3\u30c8\nCOMMENT ON TABLE \"\u8acb\u6c42\u30c7\u30fc\u30bf\" IS '\u8acb\u6c42\u30d8\u30c3\u30c0\u60c5\u5831\u3092\u7ba1\u7406\u3059\u308b\u30c6\u30fc\u30d6\u30eb';\nCOMMENT ON TABLE \"\u8acb\u6c42\u660e\u7d30\" IS '\u8acb\u6c42\u306b\u542b\u307e\u308c\u308b\u58f2\u4e0a\u660e\u7d30\u3092\u7ba1\u7406\u3059\u308b\u30c6\u30fc\u30d6\u30eb';\nCOMMENT ON TABLE \"\u8acb\u6c42\u7de0\u5c65\u6b74\" IS '\u6708\u6b21\u7de0\u51e6\u7406\u306e\u5c65\u6b74\u3092\u7ba1\u7406\u3059\u308b\u30c6\u30fc\u30d6\u30eb';\nCOMMENT ON TABLE \"\u58f2\u639b\u91d1\u6b8b\u9ad8\" IS '\u9867\u5ba2\u5225\u6708\u6b21\u58f2\u639b\u91d1\u6b8b\u9ad8\u3092\u7ba1\u7406\u3059\u308b\u30c6\u30fc\u30d6\u30eb';\n\n-- \u30ab\u30e9\u30e0\u30b3\u30e1\u30f3\u30c8\nCOMMENT ON COLUMN \"\u8acb\u6c42\u30c7\u30fc\u30bf\".\"\u30d0\u30fc\u30b8\u30e7\u30f3\" IS '\u697d\u89b3\u30ed\u30c3\u30af\u7528\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7';\n</code></pre>"},{"location":"article/part2/chapter07/#_8","title":"\u8acb\u6c42\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u5b9f\u88c5","text":"\u8acb\u6c42\u30b9\u30c6\u30fc\u30bf\u30b9 ENUM <pre><code>// src/main/java/com/example/sms/domain/model/invoice/InvoiceStatus.java\npackage com.example.sms.domain.model.invoice;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n/**\n * \u8acb\u6c42\u30b9\u30c6\u30fc\u30bf\u30b9.\n */\n@Getter\n@RequiredArgsConstructor\npublic enum InvoiceStatus {\n    DRAFT(\"\u672a\u767a\u884c\"),\n    ISSUED(\"\u767a\u884c\u6e08\"),\n    PARTIALLY_PAID(\"\u4e00\u90e8\u5165\u91d1\"),\n    PAID(\"\u5165\u91d1\u6e08\"),\n    OVERDUE(\"\u56de\u53ce\u9045\u5ef6\");\n\n    private final String displayName;\n\n    /**\n     * \u8868\u793a\u540d\u304b\u3089\u8acb\u6c42\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u53d6\u5f97\u3059\u308b.\n     *\n     * @param displayName \u8868\u793a\u540d\n     * @return \u8acb\u6c42\u30b9\u30c6\u30fc\u30bf\u30b9\n     */\n    public static InvoiceStatus fromDisplayName(String displayName) {\n        for (InvoiceStatus status : values()) {\n            if (status.displayName.equals(displayName)) {\n                return status;\n            }\n        }\n        throw new IllegalArgumentException(\"\u4e0d\u6b63\u306a\u8acb\u6c42\u30b9\u30c6\u30fc\u30bf\u30b9: \" + displayName);\n    }\n}\n</code></pre> \u8acb\u6c42\u533a\u5206 ENUM <pre><code>// src/main/java/com/example/sms/domain/model/invoice/InvoiceType.java\npackage com.example.sms.domain.model.invoice;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n/**\n * \u8acb\u6c42\u533a\u5206.\n */\n@Getter\n@RequiredArgsConstructor\npublic enum InvoiceType {\n    IMMEDIATE(\"\u90fd\u5ea6\"),\n    CLOSING(\"\u7de0\u3081\");\n\n    private final String displayName;\n\n    /**\n     * \u8868\u793a\u540d\u304b\u3089\u8acb\u6c42\u533a\u5206\u3092\u53d6\u5f97\u3059\u308b.\n     *\n     * @param displayName \u8868\u793a\u540d\n     * @return \u8acb\u6c42\u533a\u5206\n     */\n    public static InvoiceType fromDisplayName(String displayName) {\n        for (InvoiceType type : values()) {\n            if (type.displayName.equals(displayName)) {\n                return type;\n            }\n        }\n        throw new IllegalArgumentException(\"\u4e0d\u6b63\u306a\u8acb\u6c42\u533a\u5206: \" + displayName);\n    }\n}\n</code></pre> \u8acb\u6c42\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/sms/domain/model/invoice/Invoice.java\npackage com.example.sms.domain.model.invoice;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.ArrayList;\nimport java.util.List;\n\n/**\n * \u8acb\u6c42\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3.\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\n@SuppressWarnings(\"PMD.RedundantFieldInitializer\")\npublic class Invoice {\n    private Integer id;\n    private String invoiceNumber;\n    private LocalDate invoiceDate;\n    private String billingCode;\n    private String customerCode;\n    private String customerBranchNumber;\n    private LocalDate closingDate;\n    @Builder.Default\n    private InvoiceType invoiceType = InvoiceType.CLOSING;\n    @Builder.Default\n    private BigDecimal previousBalance = BigDecimal.ZERO;\n    @Builder.Default\n    private BigDecimal receiptAmount = BigDecimal.ZERO;\n    @Builder.Default\n    private BigDecimal carriedBalance = BigDecimal.ZERO;\n    @Builder.Default\n    private BigDecimal currentSalesAmount = BigDecimal.ZERO;\n    @Builder.Default\n    private BigDecimal currentTaxAmount = BigDecimal.ZERO;\n    @Builder.Default\n    private BigDecimal currentInvoiceAmount = BigDecimal.ZERO;\n    @Builder.Default\n    private BigDecimal invoiceBalance = BigDecimal.ZERO;\n    private LocalDate dueDate;\n    @Builder.Default\n    private InvoiceStatus status = InvoiceStatus.DRAFT;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n\n    /** \u697d\u89b3\u30ed\u30c3\u30af\u7528\u30d0\u30fc\u30b8\u30e7\u30f3. */\n    @Builder.Default\n    private Integer version = 1;\n\n    @Builder.Default\n    private List&lt;InvoiceDetail&gt; details = new ArrayList&lt;&gt;();\n\n    /**\n     * \u8acb\u6c42\u6b8b\u9ad8\u3092\u8a08\u7b97\u3059\u308b.\n     *\n     * @return \u8acb\u6c42\u6b8b\u9ad8\n     */\n    public BigDecimal calculateInvoiceBalance() {\n        return carriedBalance.add(currentInvoiceAmount).subtract(receiptAmount);\n    }\n\n    /**\n     * \u7e70\u8d8a\u6b8b\u9ad8\u3092\u8a08\u7b97\u3059\u308b.\n     *\n     * @return \u7e70\u8d8a\u6b8b\u9ad8\n     */\n    public BigDecimal calculateCarriedBalance() {\n        return previousBalance.subtract(receiptAmount);\n    }\n}\n</code></pre> \u8acb\u6c42\u660e\u7d30\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/sms/domain/model/invoice/InvoiceDetail.java\npackage com.example.sms.domain.model.invoice;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\n\n/**\n * \u8acb\u6c42\u660e\u7d30\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3.\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class InvoiceDetail {\n    private Integer id;\n    private Integer invoiceId;\n    private Integer lineNumber;\n    private Integer salesId;\n    private String salesNumber;\n    private LocalDate salesDate;\n    private BigDecimal salesAmount;\n    private BigDecimal taxAmount;\n    private BigDecimal totalAmount;\n}\n</code></pre>"},{"location":"article/part2/chapter07/#_9","title":"\u7de0\u51e6\u7406\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":"\u7de0\u51e6\u7406\u30b5\u30fc\u30d3\u30b9 <pre><code>// src/main/java/com/example/sms/application/service/ClosingService.java\npackage com.example.sms.application.service;\n\nimport com.example.sms.application.port.out.*;\nimport com.example.sms.domain.model.invoice.*;\nimport com.example.sms.domain.model.sales.Sales;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.YearMonth;\nimport java.util.List;\n\n@Service\n@RequiredArgsConstructor\npublic class ClosingService {\n\n    private final InvoiceRepository invoiceRepository;\n    private final SalesRepository salesRepository;\n    private final CustomerRepository customerRepository;\n    private final ClosingHistoryRepository closingHistoryRepository;\n\n    /**\n     * \u6708\u6b21\u7de0\u51e6\u7406\u3092\u5b9f\u884c\u3059\u308b\n     */\n    @Transactional\n    public Invoice executeMonthlyClosing(String customerCode, YearMonth yearMonth) {\n        LocalDate closingDate = yearMonth.atEndOfMonth();\n\n        // \u65e2\u306b\u7de0\u51e6\u7406\u6e08\u307f\u304b\u30c1\u30a7\u30c3\u30af\n        if (closingHistoryRepository.existsByCustomerAndYearMonth(customerCode, yearMonth)) {\n            throw new IllegalStateException(\"\u65e2\u306b\u7de0\u51e6\u7406\u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u307e\u3059: \" + yearMonth);\n        }\n\n        // \u5bfe\u8c61\u671f\u9593\u306e\u58f2\u4e0a\u3092\u53d6\u5f97\n        LocalDate fromDate = yearMonth.atDay(1);\n        LocalDate toDate = yearMonth.atEndOfMonth();\n        List&lt;Sales&gt; salesList = salesRepository.findByCustomerCodeAndDateRange(\n                customerCode, fromDate, toDate);\n\n        if (salesList.isEmpty()) {\n            throw new IllegalStateException(\"\u5bfe\u8c61\u671f\u9593\u306e\u58f2\u4e0a\u304c\u3042\u308a\u307e\u305b\u3093\");\n        }\n\n        // \u58f2\u4e0a\u5408\u8a08\u30fb\u6d88\u8cbb\u7a0e\u3092\u96c6\u8a08\n        BigDecimal totalSales = salesList.stream()\n                .map(Sales::getSalesAmount)\n                .reduce(BigDecimal.ZERO, BigDecimal::add);\n        BigDecimal totalTax = salesList.stream()\n                .map(Sales::getTaxAmount)\n                .reduce(BigDecimal.ZERO, BigDecimal::add);\n\n        // \u524d\u56de\u8acb\u6c42\u6b8b\u9ad8\u3092\u53d6\u5f97\n        BigDecimal previousBalance = invoiceRepository\n                .findLatestByCustomerCode(customerCode)\n                .map(Invoice::getInvoiceBalance)\n                .orElse(BigDecimal.ZERO);\n\n        // \u9867\u5ba2\u306e\u56de\u53ce\u30b5\u30a4\u30c8\u304b\u3089\u56de\u53ce\u4e88\u5b9a\u65e5\u3092\u8a08\u7b97\n        var customer = customerRepository.findByCustomerCode(customerCode)\n                .orElseThrow(() -&gt; new IllegalArgumentException(\"\u9867\u5ba2\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\"));\n        LocalDate dueDate = calculateDueDate(closingDate, customer.getCollectionSite());\n\n        // \u8acb\u6c42\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\n        var invoice = Invoice.builder()\n                .invoiceNumber(generateInvoiceNumber())\n                .invoiceDate(closingDate)\n                .billingCode(customerCode)\n                .customerCode(customerCode)\n                .closingDate(closingDate)\n                .invoiceType(InvoiceType.CLOSING)\n                .previousBalance(previousBalance)\n                .receiptAmount(BigDecimal.ZERO)\n                .carriedBalance(previousBalance)\n                .currentSalesAmount(totalSales)\n                .currentTaxAmount(totalTax)\n                .currentInvoiceAmount(totalSales.add(totalTax))\n                .invoiceBalance(previousBalance.add(totalSales).add(totalTax))\n                .dueDate(dueDate)\n                .status(InvoiceStatus.DRAFT)\n                .build();\n\n        invoiceRepository.save(invoice);\n\n        // \u8acb\u6c42\u660e\u7d30\u3092\u4f5c\u6210\n        int lineNumber = 1;\n        for (Sales sales : salesList) {\n            var detail = InvoiceDetail.builder()\n                    .invoiceId(invoice.getId())\n                    .lineNumber(lineNumber++)\n                    .salesId(sales.getId())\n                    .salesNumber(sales.getSalesNumber())\n                    .salesDate(sales.getSalesDate())\n                    .salesAmount(sales.getSalesAmount())\n                    .taxAmount(sales.getTaxAmount())\n                    .totalAmount(sales.getSalesTotal())\n                    .build();\n            invoiceRepository.saveDetail(detail);\n        }\n\n        // \u7de0\u5c65\u6b74\u3092\u4fdd\u5b58\n        var history = ClosingHistory.builder()\n                .customerCode(customerCode)\n                .closingYearMonth(yearMonth.toString())\n                .closingDate(closingDate)\n                .salesCount(salesList.size())\n                .salesTotal(totalSales)\n                .taxTotal(totalTax)\n                .invoiceId(invoice.getId())\n                .build();\n        closingHistoryRepository.save(history);\n\n        return invoice;\n    }\n\n    private LocalDate calculateDueDate(LocalDate closingDate, Integer collectionSite) {\n        if (collectionSite == null) {\n            collectionSite = 30; // \u30c7\u30d5\u30a9\u30eb\u30c830\u65e5\n        }\n        return closingDate.plusDays(collectionSite);\n    }\n\n    private String generateInvoiceNumber() {\n        return String.format(\"INV-%d-%04d\",\n                LocalDate.now().getYear(), System.currentTimeMillis() % 10000);\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter07/#72-db","title":"7.2 \u56de\u53ce\u696d\u52d9\u306e DB \u8a2d\u8a08","text":""},{"location":"article/part2/chapter07/#_10","title":"\u5165\u91d1\u696d\u52d9\u30d5\u30ed\u30fc\u306e\u7406\u89e3","text":"<p>\u5165\u91d1\u696d\u52d9\u306f\u3001\u9867\u5ba2\u304b\u3089\u306e\u5165\u91d1\u3092\u8a18\u9332\u3057\u3001\u8acb\u6c42\u3068\u7a81\u5408\uff08\u6d88\u8fbc\uff09\u3059\u308b\u696d\u52d9\u3067\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter07/#_11","title":"\u5165\u91d1\u65b9\u6cd5\u306e\u7a2e\u985e","text":"\u5165\u91d1\u65b9\u6cd5 \u7279\u5fb4 \u624b\u6570\u6599 \u73fe\u91d1 \u5373\u6642\u5165\u91d1\u3001\u5e97\u982d\u53d6\u5f15 \u306a\u3057 \u9280\u884c\u632f\u8fbc \u6700\u3082\u4e00\u822c\u7684\u3001\u632f\u8fbc\u624b\u6570\u6599\u304c\u767a\u751f \u632f\u8fbc\u624b\u6570\u6599\uff08\u9867\u5ba2\u8ca0\u62c5 or \u5f53\u793e\u8ca0\u62c5\uff09 \u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9 \u30ab\u30fc\u30c9\u4f1a\u793e\u7d4c\u7531\u3067\u5165\u91d1 \u30ab\u30fc\u30c9\u624b\u6570\u6599 \u624b\u5f62 \u671f\u65e5\u306b\u63db\u91d1\u3001\u4e0d\u6e21\u308a\u30ea\u30b9\u30af \u306a\u3057 \u96fb\u5b50\u8a18\u9332\u50b5\u6a29 \u96fb\u5b50\u7684\u306a\u50b5\u6a29\u7ba1\u7406 \u5229\u7528\u6599"},{"location":"article/part2/chapter07/#_12","title":"\u5165\u91d1\u6d88\u8fbc\u306e\u30d1\u30bf\u30fc\u30f3","text":"<p>\u5165\u91d1\u3068\u8acb\u6c42\u306e\u6d88\u8fbc\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u30d1\u30bf\u30fc\u30f3\u304c\u3042\u308a\u307e\u3059\u3002</p> <p></p> \u30d1\u30bf\u30fc\u30f3 \u8aac\u660e \u51e6\u7406 1:1 1\u4ef6\u306e\u5165\u91d1\u30671\u4ef6\u306e\u8acb\u6c42\u3092\u6d88\u8fbc \u901a\u5e38\u306e\u6d88\u8fbc 1:N 1\u4ef6\u306e\u5165\u91d1\u3067\u8907\u6570\u306e\u8acb\u6c42\u3092\u6d88\u8fbc \u53e4\u3044\u8acb\u6c42\u304b\u3089\u9806\u306b\u6d88\u8fbc\u3001\u4f59\u5270\u306f\u524d\u53d7\u91d1 N:1 \u8907\u6570\u306e\u5165\u91d1\u30671\u4ef6\u306e\u8acb\u6c42\u3092\u6d88\u8fbc \u5206\u5272\u5165\u91d1\u3001\u4e00\u90e8\u5165\u91d1\u72b6\u614b\u306e\u7ba1\u7406"},{"location":"article/part2/chapter07/#_13","title":"\u5165\u91d1\u30c7\u30fc\u30bf\u30fb\u5165\u91d1\u6d88\u8fbc\u660e\u7d30\u306e\u69cb\u9020","text":""},{"location":"article/part2/chapter07/#er_1","title":"\u5165\u91d1\u30c7\u30fc\u30bf\u306e ER \u56f3","text":""},{"location":"article/part2/chapter07/#_14","title":"\u5165\u91d1\u30b9\u30c6\u30fc\u30bf\u30b9\u306e\u5b9a\u7fa9","text":"\u30b9\u30c6\u30fc\u30bf\u30b9 \u8aac\u660e \u5165\u91d1\u6e08 \u5165\u91d1\u767b\u9332\u5b8c\u4e86\u3001\u672a\u6d88\u8fbc\u72b6\u614b \u4e00\u90e8\u6d88\u8fbc \u4e00\u90e8\u304c\u6d88\u8fbc\u6e08\u307f \u6d88\u8fbc\u6e08 \u5168\u984d\u304c\u6d88\u8fbc\u5b8c\u4e86 \u904e\u5165\u91d1 \u5165\u91d1\u984d\u304c\u8acb\u6c42\u984d\u3092\u8d85\u904e"},{"location":"article/part2/chapter07/#_15","title":"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff1a\u5165\u91d1\u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210","text":"V012__create_receipt_tables.sql <pre><code>-- src/main/resources/db/migration/V012__create_receipt_tables.sql\n\n-- \u5165\u91d1\u30b9\u30c6\u30fc\u30bf\u30b9\nCREATE TYPE \u5165\u91d1\u30b9\u30c6\u30fc\u30bf\u30b9 AS ENUM ('\u5165\u91d1\u6e08', '\u4e00\u90e8\u6d88\u8fbc', '\u6d88\u8fbc\u6e08', '\u904e\u5165\u91d1');\n\n-- \u5165\u91d1\u65b9\u6cd5\uff08\u53d6\u5f15\u5148\u306e\u652f\u6255\u65b9\u6cd5\u3068\u306f\u5225\uff09\nCREATE TYPE \u5165\u91d1\u65b9\u6cd5 AS ENUM ('\u73fe\u91d1', '\u9280\u884c\u632f\u8fbc', '\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9', '\u624b\u5f62', '\u96fb\u5b50\u8a18\u9332\u50b5\u6a29');\n\n-- \u5165\u91d1\u30c7\u30fc\u30bf\nCREATE TABLE \"\u5165\u91d1\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u5165\u91d1\u756a\u53f7\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u5165\u91d1\u65e5\" DATE NOT NULL,\n    \"\u9867\u5ba2\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u9867\u5ba2\u679d\u756a\" VARCHAR(10) DEFAULT '00',\n    \"\u5165\u91d1\u65b9\u6cd5\" \u5165\u91d1\u65b9\u6cd5 NOT NULL,\n    \"\u5165\u91d1\u91d1\u984d\" DECIMAL(15, 2) NOT NULL,\n    \"\u6d88\u8fbc\u6e08\u91d1\u984d\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u672a\u6d88\u8fbc\u91d1\u984d\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u624b\u6570\u6599\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u632f\u8fbc\u540d\u7fa9\" VARCHAR(100),\n    \"\u9280\u884c\u540d\" VARCHAR(50),\n    \"\u53e3\u5ea7\u756a\u53f7\" VARCHAR(20),\n    \"\u30b9\u30c6\u30fc\u30bf\u30b9\" \u5165\u91d1\u30b9\u30c6\u30fc\u30bf\u30b9 DEFAULT '\u5165\u91d1\u6e08' NOT NULL,\n    \"\u5099\u8003\" TEXT,\n    \"\u30d0\u30fc\u30b8\u30e7\u30f3\" INTEGER DEFAULT 1 NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u8005\" VARCHAR(50),\n    CONSTRAINT \"fk_\u5165\u91d1\u30c7\u30fc\u30bf_\u9867\u5ba2\"\n        FOREIGN KEY (\"\u9867\u5ba2\u30b3\u30fc\u30c9\", \"\u9867\u5ba2\u679d\u756a\") REFERENCES \"\u9867\u5ba2\u30de\u30b9\u30bf\"(\"\u9867\u5ba2\u30b3\u30fc\u30c9\", \"\u9867\u5ba2\u679d\u756a\")\n);\n\n-- \u5165\u91d1\u6d88\u8fbc\u660e\u7d30\nCREATE TABLE \"\u5165\u91d1\u6d88\u8fbc\u660e\u7d30\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u5165\u91d1ID\" INTEGER NOT NULL,\n    \"\u884c\u756a\u53f7\" INTEGER NOT NULL,\n    \"\u8acb\u6c42ID\" INTEGER,\n    \"\u6d88\u8fbc\u65e5\" DATE NOT NULL,\n    \"\u6d88\u8fbc\u91d1\u984d\" DECIMAL(15, 2) NOT NULL,\n    \"\u5099\u8003\" TEXT,\n    \"\u30d0\u30fc\u30b8\u30e7\u30f3\" INTEGER DEFAULT 1 NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"fk_\u5165\u91d1\u6d88\u8fbc\u660e\u7d30_\u5165\u91d1\"\n        FOREIGN KEY (\"\u5165\u91d1ID\") REFERENCES \"\u5165\u91d1\u30c7\u30fc\u30bf\"(\"ID\") ON DELETE CASCADE,\n    CONSTRAINT \"fk_\u5165\u91d1\u6d88\u8fbc\u660e\u7d30_\u8acb\u6c42\"\n        FOREIGN KEY (\"\u8acb\u6c42ID\") REFERENCES \"\u8acb\u6c42\u30c7\u30fc\u30bf\"(\"ID\"),\n    CONSTRAINT \"uk_\u5165\u91d1\u6d88\u8fbc\u660e\u7d30_\u5165\u91d1_\u884c\" UNIQUE (\"\u5165\u91d1ID\", \"\u884c\u756a\u53f7\")\n);\n\n-- \u524d\u53d7\u91d1\u30c7\u30fc\u30bf\nCREATE TABLE \"\u524d\u53d7\u91d1\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u524d\u53d7\u91d1\u756a\u53f7\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u767a\u751f\u65e5\" DATE NOT NULL,\n    \"\u9867\u5ba2\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u9867\u5ba2\u679d\u756a\" VARCHAR(10) DEFAULT '00',\n    \"\u5165\u91d1ID\" INTEGER,\n    \"\u524d\u53d7\u91d1\u984d\" DECIMAL(15, 2) NOT NULL,\n    \"\u4f7f\u7528\u6e08\u91d1\u984d\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u6b8b\u9ad8\" DECIMAL(15, 2) NOT NULL,\n    \"\u5099\u8003\" TEXT,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"fk_\u524d\u53d7\u91d1\u30c7\u30fc\u30bf_\u9867\u5ba2\"\n        FOREIGN KEY (\"\u9867\u5ba2\u30b3\u30fc\u30c9\", \"\u9867\u5ba2\u679d\u756a\") REFERENCES \"\u9867\u5ba2\u30de\u30b9\u30bf\"(\"\u9867\u5ba2\u30b3\u30fc\u30c9\", \"\u9867\u5ba2\u679d\u756a\"),\n    CONSTRAINT \"fk_\u524d\u53d7\u91d1\u30c7\u30fc\u30bf_\u5165\u91d1\"\n        FOREIGN KEY (\"\u5165\u91d1ID\") REFERENCES \"\u5165\u91d1\u30c7\u30fc\u30bf\"(\"ID\")\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"idx_\u5165\u91d1\u30c7\u30fc\u30bf_\u9867\u5ba2\u30b3\u30fc\u30c9\" ON \"\u5165\u91d1\u30c7\u30fc\u30bf\"(\"\u9867\u5ba2\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u5165\u91d1\u30c7\u30fc\u30bf_\u5165\u91d1\u65e5\" ON \"\u5165\u91d1\u30c7\u30fc\u30bf\"(\"\u5165\u91d1\u65e5\");\nCREATE INDEX \"idx_\u5165\u91d1\u30c7\u30fc\u30bf_\u30b9\u30c6\u30fc\u30bf\u30b9\" ON \"\u5165\u91d1\u30c7\u30fc\u30bf\"(\"\u30b9\u30c6\u30fc\u30bf\u30b9\");\nCREATE INDEX \"idx_\u5165\u91d1\u6d88\u8fbc\u660e\u7d30_\u5165\u91d1ID\" ON \"\u5165\u91d1\u6d88\u8fbc\u660e\u7d30\"(\"\u5165\u91d1ID\");\nCREATE INDEX \"idx_\u5165\u91d1\u6d88\u8fbc\u660e\u7d30_\u8acb\u6c42ID\" ON \"\u5165\u91d1\u6d88\u8fbc\u660e\u7d30\"(\"\u8acb\u6c42ID\");\nCREATE INDEX \"idx_\u524d\u53d7\u91d1\u30c7\u30fc\u30bf_\u9867\u5ba2\u30b3\u30fc\u30c9\" ON \"\u524d\u53d7\u91d1\u30c7\u30fc\u30bf\"(\"\u9867\u5ba2\u30b3\u30fc\u30c9\");\n\n-- \u30c6\u30fc\u30d6\u30eb\u30b3\u30e1\u30f3\u30c8\nCOMMENT ON TABLE \"\u5165\u91d1\u30c7\u30fc\u30bf\" IS '\u5165\u91d1\u60c5\u5831\u3092\u7ba1\u7406\u3059\u308b\u30c6\u30fc\u30d6\u30eb';\nCOMMENT ON TABLE \"\u5165\u91d1\u6d88\u8fbc\u660e\u7d30\" IS '\u5165\u91d1\u3068\u8acb\u6c42\u306e\u6d88\u8fbc\u660e\u7d30\u3092\u7ba1\u7406\u3059\u308b\u30c6\u30fc\u30d6\u30eb';\nCOMMENT ON TABLE \"\u524d\u53d7\u91d1\u30c7\u30fc\u30bf\" IS '\u904e\u5165\u91d1\u306b\u3088\u308b\u524d\u53d7\u91d1\u3092\u7ba1\u7406\u3059\u308b\u30c6\u30fc\u30d6\u30eb';\n\n-- \u30ab\u30e9\u30e0\u30b3\u30e1\u30f3\u30c8\nCOMMENT ON COLUMN \"\u5165\u91d1\u30c7\u30fc\u30bf\".\"\u30d0\u30fc\u30b8\u30e7\u30f3\" IS '\u697d\u89b3\u30ed\u30c3\u30af\u7528\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7';\nCOMMENT ON COLUMN \"\u5165\u91d1\u6d88\u8fbc\u660e\u7d30\".\"\u30d0\u30fc\u30b8\u30e7\u30f3\" IS '\u697d\u89b3\u30ed\u30c3\u30af\u7528\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7';\n</code></pre>"},{"location":"article/part2/chapter07/#_16","title":"\u5165\u91d1\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u5b9f\u88c5","text":"\u5165\u91d1\u30b9\u30c6\u30fc\u30bf\u30b9 ENUM <pre><code>// src/main/java/com/example/sms/domain/model/receipt/ReceiptStatus.java\npackage com.example.sms.domain.model.receipt;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n/**\n * \u5165\u91d1\u30b9\u30c6\u30fc\u30bf\u30b9.\n */\n@Getter\n@RequiredArgsConstructor\npublic enum ReceiptStatus {\n    RECEIVED(\"\u5165\u91d1\u6e08\"),\n    PARTIALLY_APPLIED(\"\u4e00\u90e8\u6d88\u8fbc\"),\n    APPLIED(\"\u6d88\u8fbc\u6e08\"),\n    OVERPAID(\"\u904e\u5165\u91d1\");\n\n    private final String displayName;\n\n    /**\n     * \u8868\u793a\u540d\u304b\u3089\u5165\u91d1\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u53d6\u5f97\u3059\u308b.\n     *\n     * @param displayName \u8868\u793a\u540d\n     * @return \u5165\u91d1\u30b9\u30c6\u30fc\u30bf\u30b9\n     */\n    public static ReceiptStatus fromDisplayName(String displayName) {\n        for (ReceiptStatus status : values()) {\n            if (status.displayName.equals(displayName)) {\n                return status;\n            }\n        }\n        throw new IllegalArgumentException(\"\u4e0d\u6b63\u306a\u5165\u91d1\u30b9\u30c6\u30fc\u30bf\u30b9: \" + displayName);\n    }\n}\n</code></pre> \u5165\u91d1\u65b9\u6cd5 ENUM <pre><code>// src/main/java/com/example/sms/domain/model/receipt/ReceiptMethod.java\npackage com.example.sms.domain.model.receipt;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n/**\n * \u5165\u91d1\u65b9\u6cd5.\n */\n@Getter\n@RequiredArgsConstructor\npublic enum ReceiptMethod {\n    CASH(\"\u73fe\u91d1\"),\n    BANK_TRANSFER(\"\u9280\u884c\u632f\u8fbc\"),\n    CREDIT_CARD(\"\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\"),\n    BILL(\"\u624b\u5f62\"),\n    ELECTRONIC_BOND(\"\u96fb\u5b50\u8a18\u9332\u50b5\u6a29\");\n\n    private final String displayName;\n\n    /**\n     * \u8868\u793a\u540d\u304b\u3089\u5165\u91d1\u65b9\u6cd5\u3092\u53d6\u5f97\u3059\u308b.\n     *\n     * @param displayName \u8868\u793a\u540d\n     * @return \u5165\u91d1\u65b9\u6cd5\n     */\n    public static ReceiptMethod fromDisplayName(String displayName) {\n        for (ReceiptMethod method : values()) {\n            if (method.displayName.equals(displayName)) {\n                return method;\n            }\n        }\n        throw new IllegalArgumentException(\"\u4e0d\u6b63\u306a\u5165\u91d1\u65b9\u6cd5: \" + displayName);\n    }\n}\n</code></pre> \u5165\u91d1\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/sms/domain/model/receipt/Receipt.java\npackage com.example.sms.domain.model.receipt;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.ArrayList;\nimport java.util.List;\n\n/**\n * \u5165\u91d1\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3.\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\n@SuppressWarnings(\"PMD.RedundantFieldInitializer\")\npublic class Receipt {\n    private Integer id;\n    private String receiptNumber;\n    private LocalDate receiptDate;\n    private String customerCode;\n    private String customerBranchNumber;\n    private ReceiptMethod receiptMethod;\n    private BigDecimal receiptAmount;\n    @Builder.Default\n    private BigDecimal appliedAmount = BigDecimal.ZERO;\n    @Builder.Default\n    private BigDecimal unappliedAmount = BigDecimal.ZERO;\n    @Builder.Default\n    private BigDecimal bankFee = BigDecimal.ZERO;\n    private String payerName;\n    private String bankName;\n    private String accountNumber;\n    @Builder.Default\n    private ReceiptStatus status = ReceiptStatus.RECEIVED;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n\n    /** \u697d\u89b3\u30ed\u30c3\u30af\u7528\u30d0\u30fc\u30b8\u30e7\u30f3. */\n    @Builder.Default\n    private Integer version = 1;\n\n    @Builder.Default\n    private List&lt;ReceiptApplication&gt; applications = new ArrayList&lt;&gt;();\n\n    /**\n     * \u672a\u6d88\u8fbc\u91d1\u984d\u3092\u8a08\u7b97\u3059\u308b.\n     *\n     * @return \u672a\u6d88\u8fbc\u91d1\u984d\n     */\n    public BigDecimal calculateUnappliedAmount() {\n        return receiptAmount.subtract(appliedAmount).subtract(bankFee);\n    }\n\n    /**\n     * \u6d88\u8fbc\u53ef\u80fd\u304b\u3069\u3046\u304b\u3092\u5224\u5b9a\u3059\u308b.\n     *\n     * @param amount \u6d88\u8fbc\u91d1\u984d\n     * @return \u6d88\u8fbc\u53ef\u80fd\u306a\u5834\u5408\u306f true\n     */\n    public boolean canApply(BigDecimal amount) {\n        return unappliedAmount.compareTo(amount) &gt;= 0;\n    }\n}\n</code></pre> \u5165\u91d1\u6d88\u8fbc\u660e\u7d30\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/sms/domain/model/receipt/ReceiptApplication.java\npackage com.example.sms.domain.model.receipt;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n/**\n * \u5165\u91d1\u6d88\u8fbc\u660e\u7d30\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3.\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\n@SuppressWarnings(\"PMD.RedundantFieldInitializer\")\npublic class ReceiptApplication {\n    private Integer id;\n    private Integer receiptId;\n    private Integer lineNumber;\n    private Integer invoiceId;\n    private LocalDate applicationDate;\n    private BigDecimal appliedAmount;\n    private String remarks;\n    @Builder.Default\n    private Integer version = 1;\n    private LocalDateTime createdAt;\n}\n</code></pre>"},{"location":"article/part2/chapter07/#_17","title":"\u5165\u91d1\u6d88\u8fbc\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":"\u5165\u91d1\u6d88\u8fbc\u30b5\u30fc\u30d3\u30b9 <pre><code>// src/main/java/com/example/sms/application/service/ReceiptService.java\npackage com.example.sms.application.service;\n\nimport com.example.sms.application.port.out.*;\nimport com.example.sms.domain.model.invoice.Invoice;\nimport com.example.sms.domain.model.invoice.InvoiceStatus;\nimport com.example.sms.domain.model.receipt.*;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Service\n@RequiredArgsConstructor\npublic class ReceiptService {\n\n    private final ReceiptRepository receiptRepository;\n    private final InvoiceRepository invoiceRepository;\n    private final AdvanceReceiptRepository advanceReceiptRepository;\n\n    /**\n     * \u5165\u91d1\u3092\u767b\u9332\u3059\u308b\n     */\n    @Transactional\n    public Receipt registerReceipt(Receipt receipt) {\n        receipt.setUnappliedAmount(\n                receipt.getReceiptAmount().subtract(receipt.getBankFee()));\n        receipt.setAppliedAmount(BigDecimal.ZERO);\n        receipt.setStatus(ReceiptStatus.RECEIVED);\n        receiptRepository.save(receipt);\n        return receipt;\n    }\n\n    /**\n     * \u5165\u91d1\u3092\u8acb\u6c42\u306b\u6d88\u8fbc\u3059\u308b\n     */\n    @Transactional\n    public ReceiptApplication applyReceipt(\n            Integer receiptId, Integer invoiceId, BigDecimal amount) {\n\n        var receipt = receiptRepository.findById(receiptId)\n                .orElseThrow(() -&gt; new IllegalArgumentException(\n                        \"\u5165\u91d1\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + receiptId));\n\n        var invoice = invoiceRepository.findById(invoiceId)\n                .orElseThrow(() -&gt; new IllegalArgumentException(\n                        \"\u8acb\u6c42\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + invoiceId));\n\n        // \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\n        if (!receipt.canApply(amount)) {\n            throw new IllegalStateException(\"\u6d88\u8fbc\u53ef\u80fd\u91d1\u984d\u304c\u4e0d\u8db3\u3057\u3066\u3044\u307e\u3059\");\n        }\n        if (amount.compareTo(invoice.getInvoiceBalance()) &gt; 0) {\n            throw new IllegalStateException(\"\u6d88\u8fbc\u91d1\u984d\u304c\u8acb\u6c42\u6b8b\u9ad8\u3092\u8d85\u3048\u3066\u3044\u307e\u3059\");\n        }\n\n        // \u6d88\u8fbc\u660e\u7d30\u3092\u4f5c\u6210\n        int lineNumber = getNextLineNumber(receiptId);\n        var application = ReceiptApplication.builder()\n                .receiptId(receiptId)\n                .lineNumber(lineNumber)\n                .invoiceId(invoiceId)\n                .applicationDate(LocalDate.now())\n                .appliedAmount(amount)\n                .build();\n        receiptRepository.saveApplication(application);\n\n        // \u5165\u91d1\u306e\u91d1\u984d\u3092\u66f4\u65b0\n        BigDecimal newAppliedAmount = receipt.getAppliedAmount().add(amount);\n        BigDecimal newUnappliedAmount = receipt.getUnappliedAmount().subtract(amount);\n        receiptRepository.updateAmounts(receiptId, newAppliedAmount, newUnappliedAmount);\n\n        // \u5165\u91d1\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u66f4\u65b0\n        if (newUnappliedAmount.compareTo(BigDecimal.ZERO) &lt;= 0) {\n            receiptRepository.updateStatus(receiptId, ReceiptStatus.APPLIED);\n        }\n\n        // \u8acb\u6c42\u306e\u5165\u91d1\u984d\u3092\u66f4\u65b0\n        invoiceRepository.updateReceiptAmount(invoiceId, amount);\n\n        // \u8acb\u6c42\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u66f4\u65b0\n        var updatedInvoice = invoiceRepository.findById(invoiceId).get();\n        if (updatedInvoice.getInvoiceBalance().compareTo(BigDecimal.ZERO) &lt;= 0) {\n            invoiceRepository.updateStatus(invoiceId, InvoiceStatus.PAID);\n        } else {\n            invoiceRepository.updateStatus(invoiceId, InvoiceStatus.PARTIALLY_PAID);\n        }\n\n        return application;\n    }\n\n    /**\n     * \u81ea\u52d5\u6d88\u8fbc\u3092\u5b9f\u884c\u3059\u308b\uff08\u53e4\u3044\u8acb\u6c42\u304b\u3089\u9806\u306b\u6d88\u8fbc\uff09\n     */\n    @Transactional\n    public List&lt;ReceiptApplication&gt; autoApply(Integer receiptId) {\n        var receipt = receiptRepository.findById(receiptId)\n                .orElseThrow(() -&gt; new IllegalArgumentException(\n                        \"\u5165\u91d1\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + receiptId));\n\n        List&lt;Invoice&gt; unpaidInvoices = invoiceRepository\n                .findUnpaidByCustomerCode(receipt.getCustomerCode());\n\n        BigDecimal remainingAmount = receipt.getUnappliedAmount();\n        List&lt;ReceiptApplication&gt; applications = new ArrayList&lt;&gt;();\n\n        for (Invoice invoice : unpaidInvoices) {\n            if (remainingAmount.compareTo(BigDecimal.ZERO) &lt;= 0) {\n                break;\n            }\n\n            BigDecimal applyAmount = remainingAmount.min(invoice.getInvoiceBalance());\n            var application = applyReceipt(receiptId, invoice.getId(), applyAmount);\n            applications.add(application);\n\n            remainingAmount = remainingAmount.subtract(applyAmount);\n        }\n\n        // \u904e\u5165\u91d1\u306e\u5834\u5408\u306f\u524d\u53d7\u91d1\u3068\u3057\u3066\u767b\u9332\n        if (remainingAmount.compareTo(BigDecimal.ZERO) &gt; 0) {\n            createAdvanceReceipt(receipt.getCustomerCode(), receiptId, remainingAmount);\n            receiptRepository.updateStatus(receiptId, ReceiptStatus.OVERPAID);\n        }\n\n        return applications;\n    }\n\n    private void createAdvanceReceipt(\n            String customerCode, Integer receiptId, BigDecimal amount) {\n        var advanceReceipt = AdvanceReceipt.builder()\n                .advanceReceiptNumber(generateAdvanceReceiptNumber())\n                .occurredDate(LocalDate.now())\n                .customerCode(customerCode)\n                .receiptId(receiptId)\n                .advanceAmount(amount)\n                .usedAmount(BigDecimal.ZERO)\n                .balance(amount)\n                .build();\n        advanceReceiptRepository.save(advanceReceipt);\n    }\n\n    private int getNextLineNumber(Integer receiptId) {\n        var applications = receiptRepository.findApplicationsByReceiptId(receiptId);\n        return applications.size() + 1;\n    }\n\n    private String generateAdvanceReceiptNumber() {\n        return String.format(\"ADV-%d-%04d\",\n                LocalDate.now().getYear(), System.currentTimeMillis() % 10000);\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter07/#_18","title":"\u50b5\u6a29\u6b8b\u9ad8\u7ba1\u7406\u30b5\u30fc\u30d3\u30b9","text":"\u58f2\u639b\u91d1\u6b8b\u9ad8\u30b5\u30fc\u30d3\u30b9 <pre><code>// src/main/java/com/example/sms/application/service/AccountsReceivableService.java\npackage com.example.sms.application.service;\n\nimport com.example.sms.application.port.out.*;\nimport com.example.sms.domain.model.invoice.AccountsReceivable;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.YearMonth;\nimport java.util.List;\n\n@Service\n@RequiredArgsConstructor\npublic class AccountsReceivableService {\n\n    private final AccountsReceivableRepository arRepository;\n    private final SalesRepository salesRepository;\n    private final ReceiptRepository receiptRepository;\n    private final CustomerRepository customerRepository;\n\n    /**\n     * \u6708\u6b21\u58f2\u639b\u91d1\u6b8b\u9ad8\u3092\u66f4\u65b0\u3059\u308b\n     */\n    @Transactional\n    public void updateMonthlyBalance(YearMonth yearMonth) {\n        LocalDate baseDate = yearMonth.atEndOfMonth();\n        LocalDate fromDate = yearMonth.atDay(1);\n        LocalDate toDate = yearMonth.atEndOfMonth();\n\n        var customers = customerRepository.findAll();\n\n        for (var customer : customers) {\n            // \u524d\u6708\u6b8b\u9ad8\u3092\u53d6\u5f97\n            BigDecimal previousBalance = getPreviousMonthBalance(\n                    customer.getCustomerCode(), yearMonth);\n\n            // \u5f53\u6708\u58f2\u4e0a\u3092\u96c6\u8a08\n            BigDecimal currentSales = salesRepository\n                    .sumSalesByCustomerAndDateRange(\n                            customer.getCustomerCode(), fromDate, toDate);\n\n            // \u5f53\u6708\u5165\u91d1\u3092\u96c6\u8a08\n            BigDecimal currentReceipts = receiptRepository\n                    .sumReceiptsByCustomerAndDateRange(\n                            customer.getCustomerCode(), fromDate, toDate);\n\n            // \u5f53\u6708\u6b8b\u9ad8\u3092\u8a08\u7b97\n            BigDecimal currentBalance = previousBalance\n                    .add(currentSales)\n                    .subtract(currentReceipts);\n\n            // \u58f2\u639b\u91d1\u6b8b\u9ad8\u3092\u66f4\u65b0\n            var ar = AccountsReceivable.builder()\n                    .customerCode(customer.getCustomerCode())\n                    .baseDate(baseDate)\n                    .previousMonthBalance(previousBalance)\n                    .currentMonthSales(currentSales)\n                    .currentMonthReceipts(currentReceipts)\n                    .currentMonthBalance(currentBalance)\n                    .build();\n            arRepository.upsert(ar);\n        }\n    }\n\n    /**\n     * \u9867\u5ba2\u5225\u58f2\u639b\u91d1\u6b8b\u9ad8\u3092\u53d6\u5f97\u3059\u308b\n     */\n    public List&lt;AccountsReceivable&gt; getCustomerBalances(LocalDate baseDate) {\n        return arRepository.findByBaseDate(baseDate);\n    }\n\n    /**\n     * \u6ede\u7559\u50b5\u6a29\u4e00\u89a7\u3092\u53d6\u5f97\u3059\u308b\n     */\n    public List&lt;AccountsReceivable&gt; getOverdueBalances(\n            LocalDate currentDate, int overdueDays) {\n        LocalDate cutoffDate = currentDate.minusDays(overdueDays);\n        return arRepository.findOverdue(cutoffDate);\n    }\n\n    private BigDecimal getPreviousMonthBalance(\n            String customerCode, YearMonth yearMonth) {\n        LocalDate previousMonthEnd = yearMonth.minusMonths(1).atEndOfMonth();\n        return arRepository.findByCustomerCodeAndBaseDate(\n                        customerCode, previousMonthEnd)\n                .map(AccountsReceivable::getCurrentMonthBalance)\n                .orElse(BigDecimal.ZERO);\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter07/#73","title":"7.3 \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3068\u697d\u89b3\u30ed\u30c3\u30af\u306e\u8a2d\u8a08","text":""},{"location":"article/part2/chapter07/#n1","title":"N+1 \u554f\u984c\u3068\u305d\u306e\u89e3\u6c7a","text":"<p>\u8acb\u6c42\u30c7\u30fc\u30bf\u306f\u3001\u8acb\u6c42\uff08\u30d8\u30c3\u30c0\uff09\u2192 \u8acb\u6c42\u660e\u7d30\u306e2\u5c64\u69cb\u9020\u3092\u6301\u3061\u307e\u3059\u3002\u5165\u91d1\u30c7\u30fc\u30bf\u3082\u5165\u91d1 \u2192 \u5165\u91d1\u6d88\u8fbc\u660e\u7d30\u306e\u89aa\u5b50\u95a2\u4fc2\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u30c7\u30fc\u30bf\u3092\u52b9\u7387\u7684\u306b\u53d6\u5f97\u3059\u308b\u305f\u3081\u306e\u8a2d\u8a08\u3092\u884c\u3044\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter07/#mybatis-resultmap","title":"MyBatis \u30cd\u30b9\u30c8\u3057\u305f ResultMap \u306b\u3088\u308b\u95a2\u9023\u4ed8\u3051","text":"\u8acb\u6c42\u30c7\u30fc\u30bf\u306e\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\uff08InvoiceMapper.xml\uff09 <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.sms.infrastructure.persistence.mapper.InvoiceMapper\"&gt;\n\n    &lt;!-- \u8acb\u6c42\uff08\u30d8\u30c3\u30c0\uff09\u306e ResultMap --&gt;\n    &lt;resultMap id=\"InvoiceWithDetailsResultMap\"\n               type=\"com.example.sms.domain.model.invoice.Invoice\"&gt;\n        &lt;id property=\"id\" column=\"i_id\"/&gt;\n        &lt;result property=\"invoiceNumber\" column=\"i_\u8acb\u6c42\u756a\u53f7\"/&gt;\n        &lt;result property=\"invoiceDate\" column=\"i_\u8acb\u6c42\u65e5\"/&gt;\n        &lt;result property=\"billingCode\" column=\"i_\u8acb\u6c42\u5148\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"customerCode\" column=\"i_\u9867\u5ba2\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"closingDate\" column=\"i_\u7de0\u65e5\"/&gt;\n        &lt;result property=\"invoiceType\" column=\"i_\u8acb\u6c42\u533a\u5206\"\n                typeHandler=\"com.example.sms.infrastructure.persistence.typehandler.InvoiceTypeTypeHandler\"/&gt;\n        &lt;result property=\"previousBalance\" column=\"i_\u524d\u56de\u8acb\u6c42\u6b8b\u9ad8\"/&gt;\n        &lt;result property=\"receiptAmount\" column=\"i_\u5165\u91d1\u984d\"/&gt;\n        &lt;result property=\"carriedBalance\" column=\"i_\u7e70\u8d8a\u6b8b\u9ad8\"/&gt;\n        &lt;result property=\"currentSalesAmount\" column=\"i_\u4eca\u56de\u58f2\u4e0a\u984d\"/&gt;\n        &lt;result property=\"currentTaxAmount\" column=\"i_\u4eca\u56de\u6d88\u8cbb\u7a0e\u984d\"/&gt;\n        &lt;result property=\"currentInvoiceAmount\" column=\"i_\u4eca\u56de\u8acb\u6c42\u984d\"/&gt;\n        &lt;result property=\"invoiceBalance\" column=\"i_\u8acb\u6c42\u6b8b\u9ad8\"/&gt;\n        &lt;result property=\"dueDate\" column=\"i_\u56de\u53ce\u4e88\u5b9a\u65e5\"/&gt;\n        &lt;result property=\"status\" column=\"i_\u30b9\u30c6\u30fc\u30bf\u30b9\"\n                typeHandler=\"com.example.sms.infrastructure.persistence.typehandler.InvoiceStatusTypeHandler\"/&gt;\n        &lt;result property=\"version\" column=\"i_\u30d0\u30fc\u30b8\u30e7\u30f3\"/&gt;\n        &lt;result property=\"createdAt\" column=\"i_\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"i_\u66f4\u65b0\u65e5\u6642\"/&gt;\n        &lt;!-- \u8acb\u6c42\u660e\u7d30\u3068\u306e1:N\u95a2\u9023 --&gt;\n        &lt;collection property=\"details\"\n                    ofType=\"com.example.sms.domain.model.invoice.InvoiceDetail\"\n                    resultMap=\"InvoiceDetailNestedResultMap\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;!-- \u8acb\u6c42\u660e\u7d30\u306e\u30cd\u30b9\u30c8 ResultMap --&gt;\n    &lt;resultMap id=\"InvoiceDetailNestedResultMap\"\n               type=\"com.example.sms.domain.model.invoice.InvoiceDetail\"&gt;\n        &lt;id property=\"id\" column=\"id_id\"/&gt;\n        &lt;result property=\"invoiceId\" column=\"id_\u8acb\u6c42ID\"/&gt;\n        &lt;result property=\"lineNumber\" column=\"id_\u884c\u756a\u53f7\"/&gt;\n        &lt;result property=\"salesId\" column=\"id_\u58f2\u4e0aID\"/&gt;\n        &lt;result property=\"salesNumber\" column=\"id_\u58f2\u4e0a\u756a\u53f7\"/&gt;\n        &lt;result property=\"salesDate\" column=\"id_\u58f2\u4e0a\u65e5\"/&gt;\n        &lt;result property=\"salesAmount\" column=\"id_\u58f2\u4e0a\u91d1\u984d\"/&gt;\n        &lt;result property=\"taxAmount\" column=\"id_\u6d88\u8cbb\u7a0e\u984d\"/&gt;\n        &lt;result property=\"totalAmount\" column=\"id_\u5408\u8a08\u91d1\u984d\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;!-- JOIN \u306b\u3088\u308b\u4e00\u62ec\u53d6\u5f97\u30af\u30a8\u30ea --&gt;\n    &lt;select id=\"findWithDetailsByInvoiceNumber\"\n            resultMap=\"InvoiceWithDetailsResultMap\"&gt;\n        SELECT\n            i.\"ID\" AS i_id,\n            i.\"\u8acb\u6c42\u756a\u53f7\" AS i_\u8acb\u6c42\u756a\u53f7,\n            i.\"\u8acb\u6c42\u65e5\" AS i_\u8acb\u6c42\u65e5,\n            i.\"\u8acb\u6c42\u5148\u30b3\u30fc\u30c9\" AS i_\u8acb\u6c42\u5148\u30b3\u30fc\u30c9,\n            i.\"\u9867\u5ba2\u30b3\u30fc\u30c9\" AS i_\u9867\u5ba2\u30b3\u30fc\u30c9,\n            i.\"\u7de0\u65e5\" AS i_\u7de0\u65e5,\n            i.\"\u8acb\u6c42\u533a\u5206\" AS i_\u8acb\u6c42\u533a\u5206,\n            i.\"\u524d\u56de\u8acb\u6c42\u6b8b\u9ad8\" AS i_\u524d\u56de\u8acb\u6c42\u6b8b\u9ad8,\n            i.\"\u5165\u91d1\u984d\" AS i_\u5165\u91d1\u984d,\n            i.\"\u7e70\u8d8a\u6b8b\u9ad8\" AS i_\u7e70\u8d8a\u6b8b\u9ad8,\n            i.\"\u4eca\u56de\u58f2\u4e0a\u984d\" AS i_\u4eca\u56de\u58f2\u4e0a\u984d,\n            i.\"\u4eca\u56de\u6d88\u8cbb\u7a0e\u984d\" AS i_\u4eca\u56de\u6d88\u8cbb\u7a0e\u984d,\n            i.\"\u4eca\u56de\u8acb\u6c42\u984d\" AS i_\u4eca\u56de\u8acb\u6c42\u984d,\n            i.\"\u8acb\u6c42\u6b8b\u9ad8\" AS i_\u8acb\u6c42\u6b8b\u9ad8,\n            i.\"\u56de\u53ce\u4e88\u5b9a\u65e5\" AS i_\u56de\u53ce\u4e88\u5b9a\u65e5,\n            i.\"\u30b9\u30c6\u30fc\u30bf\u30b9\" AS i_\u30b9\u30c6\u30fc\u30bf\u30b9,\n            i.\"\u30d0\u30fc\u30b8\u30e7\u30f3\" AS i_\u30d0\u30fc\u30b8\u30e7\u30f3,\n            i.\"\u4f5c\u6210\u65e5\u6642\" AS i_\u4f5c\u6210\u65e5\u6642,\n            i.\"\u66f4\u65b0\u65e5\u6642\" AS i_\u66f4\u65b0\u65e5\u6642,\n            id.\"ID\" AS id_id,\n            id.\"\u8acb\u6c42ID\" AS id_\u8acb\u6c42ID,\n            id.\"\u884c\u756a\u53f7\" AS id_\u884c\u756a\u53f7,\n            id.\"\u58f2\u4e0aID\" AS id_\u58f2\u4e0aID,\n            id.\"\u58f2\u4e0a\u756a\u53f7\" AS id_\u58f2\u4e0a\u756a\u53f7,\n            id.\"\u58f2\u4e0a\u65e5\" AS id_\u58f2\u4e0a\u65e5,\n            id.\"\u58f2\u4e0a\u91d1\u984d\" AS id_\u58f2\u4e0a\u91d1\u984d,\n            id.\"\u6d88\u8cbb\u7a0e\u984d\" AS id_\u6d88\u8cbb\u7a0e\u984d,\n            id.\"\u5408\u8a08\u91d1\u984d\" AS id_\u5408\u8a08\u91d1\u984d\n        FROM \"\u8acb\u6c42\u30c7\u30fc\u30bf\" i\n        LEFT JOIN \"\u8acb\u6c42\u660e\u7d30\" id\n            ON i.\"ID\" = id.\"\u8acb\u6c42ID\"\n        WHERE i.\"\u8acb\u6c42\u756a\u53f7\" = #{invoiceNumber}\n        ORDER BY id.\"\u884c\u756a\u53f7\"\n    &lt;/select&gt;\n\n&lt;/mapper&gt;\n</code></pre>"},{"location":"article/part2/chapter07/#_19","title":"\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\u306e\u30dd\u30a4\u30f3\u30c8","text":"\u8a2d\u5b9a\u9805\u76ee \u8aac\u660e <code>&lt;collection&gt;</code> 1:N \u95a2\u9023\u306e\u30de\u30c3\u30d4\u30f3\u30b0 <code>&lt;id&gt;</code> \u4e3b\u30ad\u30fc\u306e\u8b58\u5225\uff08MyBatis \u304c\u91cd\u8907\u6392\u9664\u306b\u4f7f\u7528\uff09 <code>resultMap</code> \u30cd\u30b9\u30c8\u3057\u305f ResultMap \u306e\u53c2\u7167 \u30a8\u30a4\u30ea\u30a2\u30b9\uff08AS\uff09 \u30ab\u30e9\u30e0\u540d\u306e\u91cd\u8907\u3092\u907f\u3051\u308b\u305f\u3081\u306e\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9 <code>ORDER BY</code> \u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306e\u9806\u5e8f\u3092\u4fdd\u8a3c"},{"location":"article/part2/chapter07/#optimistic-locking","title":"\u697d\u89b3\u30ed\u30c3\u30af\uff08Optimistic Locking\uff09\u306e\u5b9f\u88c5","text":"<p>\u8907\u6570\u30e6\u30fc\u30b6\u30fc\u304c\u540c\u6642\u306b\u8acb\u6c42\u30c7\u30fc\u30bf\u3084\u5165\u91d1\u30c7\u30fc\u30bf\u3092\u7de8\u96c6\u3059\u308b\u5834\u5408\u3001\u30c7\u30fc\u30bf\u306e\u6574\u5408\u6027\u3092\u4fdd\u3064\u305f\u3081\u306b\u697d\u89b3\u30ed\u30c3\u30af\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter07/#_20","title":"\u30d0\u30fc\u30b8\u30e7\u30f3\u30ab\u30e9\u30e0\u306b\u3088\u308b\u540c\u6642\u66f4\u65b0\u5236\u5fa1","text":"\u697d\u89b3\u30ed\u30c3\u30af\u5bfe\u5fdc\u306e MyBatis Mapper <pre><code>&lt;!-- \u697d\u89b3\u30ed\u30c3\u30af\u5bfe\u5fdc\u306e\u66f4\u65b0\uff08\u30d0\u30fc\u30b8\u30e7\u30f3\u30c1\u30a7\u30c3\u30af\u4ed8\u304d\uff09 --&gt;\n&lt;update id=\"updateWithOptimisticLock\"\n        parameterType=\"com.example.sms.domain.model.invoice.Invoice\"&gt;\n    UPDATE \"\u8acb\u6c42\u30c7\u30fc\u30bf\"\n    SET\n        \"\u8acb\u6c42\u65e5\" = #{invoiceDate},\n        \"\u8acb\u6c42\u5148\u30b3\u30fc\u30c9\" = #{billingCode},\n        \"\u9867\u5ba2\u30b3\u30fc\u30c9\" = #{customerCode},\n        \"\u7de0\u65e5\" = #{closingDate},\n        \"\u8acb\u6c42\u533a\u5206\" = #{invoiceType,\n            typeHandler=com.example.sms.infrastructure.persistence.typehandler.InvoiceTypeTypeHandler}::\u8acb\u6c42\u533a\u5206,\n        \"\u524d\u56de\u8acb\u6c42\u6b8b\u9ad8\" = #{previousBalance},\n        \"\u5165\u91d1\u984d\" = #{receiptAmount},\n        \"\u7e70\u8d8a\u6b8b\u9ad8\" = #{carriedBalance},\n        \"\u4eca\u56de\u58f2\u4e0a\u984d\" = #{currentSalesAmount},\n        \"\u4eca\u56de\u6d88\u8cbb\u7a0e\u984d\" = #{currentTaxAmount},\n        \"\u4eca\u56de\u8acb\u6c42\u984d\" = #{currentInvoiceAmount},\n        \"\u8acb\u6c42\u6b8b\u9ad8\" = #{invoiceBalance},\n        \"\u56de\u53ce\u4e88\u5b9a\u65e5\" = #{dueDate},\n        \"\u30b9\u30c6\u30fc\u30bf\u30b9\" = #{status,\n            typeHandler=com.example.sms.infrastructure.persistence.typehandler.InvoiceStatusTypeHandler}::\u8acb\u6c42\u30b9\u30c6\u30fc\u30bf\u30b9,\n        \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP,\n        \"\u30d0\u30fc\u30b8\u30e7\u30f3\" = \"\u30d0\u30fc\u30b8\u30e7\u30f3\" + 1\n    WHERE \"ID\" = #{id}\n    AND \"\u30d0\u30fc\u30b8\u30e7\u30f3\" = #{version}\n&lt;/update&gt;\n\n&lt;!-- \u697d\u89b3\u30ed\u30c3\u30af\u5bfe\u5fdc\u306e\u524a\u9664 --&gt;\n&lt;delete id=\"deleteWithOptimisticLock\"&gt;\n    DELETE FROM \"\u8acb\u6c42\u30c7\u30fc\u30bf\"\n    WHERE \"ID\" = #{id}\n    AND \"\u30d0\u30fc\u30b8\u30e7\u30f3\" = #{version}\n&lt;/delete&gt;\n</code></pre> \u697d\u89b3\u30ed\u30c3\u30af\u4f8b\u5916\u30af\u30e9\u30b9 <pre><code>// src/main/java/com/example/sms/domain/exception/OptimisticLockException.java\npackage com.example.sms.domain.exception;\n\npublic class OptimisticLockException extends RuntimeException {\n\n    public OptimisticLockException(String entityName, Integer id) {\n        super(String.format(\n                \"%s\uff08ID: %d\uff09\u306f\u4ed6\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u3088\u3063\u3066\u66f4\u65b0\u307e\u305f\u306f\u524a\u9664\u3055\u308c\u307e\u3057\u305f\u3002\" +\n                \"\u753b\u9762\u3092\u518d\u8aad\u307f\u8fbc\u307f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\",\n                entityName, id));\n    }\n\n    public OptimisticLockException(\n            String entityName, Integer id,\n            Integer expectedVersion, Integer actualVersion) {\n        super(String.format(\n                \"%s\uff08ID: %d\uff09\u306f\u4ed6\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u3088\u3063\u3066\u66f4\u65b0\u3055\u308c\u307e\u3057\u305f\u3002\" +\n                \"\uff08\u671f\u5f85\u30d0\u30fc\u30b8\u30e7\u30f3: %d, \u5b9f\u969b\u306e\u30d0\u30fc\u30b8\u30e7\u30f3: %d\uff09\" +\n                \"\u753b\u9762\u3092\u518d\u8aad\u307f\u8fbc\u307f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\",\n                entityName, id, expectedVersion, actualVersion));\n    }\n}\n</code></pre> Repository \u5b9f\u88c5\uff1a\u697d\u89b3\u30ed\u30c3\u30af\u5bfe\u5fdc <pre><code>// src/main/java/com/example/sms/infrastructure/persistence/repository/InvoiceRepositoryImpl.java\npackage com.example.sms.infrastructure.persistence.repository;\n\nimport com.example.sms.application.port.out.InvoiceRepository;\nimport com.example.sms.domain.exception.OptimisticLockException;\nimport com.example.sms.domain.model.invoice.*;\nimport com.example.sms.infrastructure.persistence.mapper.InvoiceMapper;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Repository;\nimport org.springframework.transaction.annotation.Transactional;\n\n@Repository\n@RequiredArgsConstructor\npublic class InvoiceRepositoryImpl implements InvoiceRepository {\n\n    private final InvoiceMapper invoiceMapper;\n\n    /**\n     * \u697d\u89b3\u30ed\u30c3\u30af\u5bfe\u5fdc\u306e\u66f4\u65b0\n     * @throws OptimisticLockException \u4ed6\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u3088\u3063\u3066\u66f4\u65b0\u3055\u308c\u305f\u5834\u5408\n     */\n    @Override\n    @Transactional\n    public void update(Invoice invoice) {\n        int updatedCount = invoiceMapper.updateWithOptimisticLock(invoice);\n\n        if (updatedCount == 0) {\n            Integer currentVersion = invoiceMapper.findVersionById(invoice.getId());\n\n            if (currentVersion == null) {\n                throw new OptimisticLockException(\"\u8acb\u6c42\", invoice.getId());\n            } else {\n                throw new OptimisticLockException(\n                    \"\u8acb\u6c42\",\n                    invoice.getId(),\n                    invoice.getVersion(),\n                    currentVersion\n                );\n            }\n        }\n    }\n\n    /**\n     * \u697d\u89b3\u30ed\u30c3\u30af\u5bfe\u5fdc\u306e\u524a\u9664\n     * @throws OptimisticLockException \u4ed6\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u3088\u3063\u3066\u66f4\u65b0\u3055\u308c\u305f\u5834\u5408\n     */\n    @Override\n    @Transactional\n    public void delete(Integer id, Integer version) {\n        int deletedCount = invoiceMapper.deleteWithOptimisticLock(id, version);\n\n        if (deletedCount == 0) {\n            throw new OptimisticLockException(\"\u8acb\u6c42\", id);\n        }\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter07/#_21","title":"\u697d\u89b3\u30ed\u30c3\u30af\u306e\u30c6\u30b9\u30c8","text":"\u697d\u89b3\u30ed\u30c3\u30af\u306e\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9 <pre><code>@Nested\n@DisplayName(\"\u697d\u89b3\u30ed\u30c3\u30af\u306e\u66f4\u65b0\u30c6\u30b9\u30c8\")\nclass OptimisticLockUpdateTest {\n\n    @Test\n    @DisplayName(\"\u6b63\u3057\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u66f4\u65b0\u3067\u304d\u308b\")\n    void shouldUpdateWithCorrectVersion() {\n        // Given: \u8acb\u6c42\u3092\u767b\u9332\n        var invoice = createTestInvoice(\"INV-0001\");\n        invoiceRepository.save(invoice);\n\n        // When: \u30d0\u30fc\u30b8\u30e7\u30f31\u3067\u66f4\u65b0\n        var saved = invoiceRepository.findByInvoiceNumber(\"INV-0001\").orElseThrow();\n        assertThat(saved.getVersion()).isEqualTo(1);\n        saved.setInvoiceBalance(new BigDecimal(\"200000\"));\n        invoiceRepository.update(saved);\n\n        // Then: \u30d0\u30fc\u30b8\u30e7\u30f3\u304c2\u306b\u5897\u52a0\n        var updated = invoiceRepository.findByInvoiceNumber(\"INV-0001\").orElseThrow();\n        assertThat(updated.getVersion()).isEqualTo(2);\n    }\n\n    @Test\n    @DisplayName(\"\u53e4\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u66f4\u65b0\u3059\u308b\u3068\u697d\u89b3\u30ed\u30c3\u30af\u4f8b\u5916\u304c\u30b9\u30ed\u30fc\u3055\u308c\u308b\")\n    void shouldThrowOptimisticLockExceptionWithOldVersion() {\n        // Given: \u8acb\u6c42\u3092\u767b\u9332\u3057\u3066\u3001\u5225\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u3067\u66f4\u65b0\n        var invoice = createTestInvoice(\"INV-0002\");\n        invoiceRepository.save(invoice);\n\n        var sessionA = invoiceRepository.findByInvoiceNumber(\"INV-0002\").orElseThrow();\n        var sessionB = invoiceRepository.findByInvoiceNumber(\"INV-0002\").orElseThrow();\n\n        // \u30bb\u30c3\u30b7\u30e7\u30f3A\u3067\u66f4\u65b0\n        sessionA.setInvoiceBalance(new BigDecimal(\"300000\"));\n        invoiceRepository.update(sessionA);\n\n        // When/Then: \u30bb\u30c3\u30b7\u30e7\u30f3B\u3067\u66f4\u65b0\u3059\u308b\u3068\u4f8b\u5916\n        sessionB.setInvoiceBalance(new BigDecimal(\"400000\"));\n        assertThatThrownBy(() -&gt; invoiceRepository.update(sessionB))\n                .isInstanceOf(OptimisticLockException.class)\n                .hasMessageContaining(\"\u4ed6\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u3088\u3063\u3066\u66f4\u65b0\u3055\u308c\u307e\u3057\u305f\");\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter07/#_22","title":"\u697d\u89b3\u30ed\u30c3\u30af\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","text":"\u30dd\u30a4\u30f3\u30c8 \u8aac\u660e \u30d0\u30fc\u30b8\u30e7\u30f3\u30ab\u30e9\u30e0 INTEGER \u578b\u3067\u5341\u5206\uff08\u30aa\u30fc\u30d0\u30fc\u30d5\u30ed\u30fc\u306f\u73fe\u5b9f\u7684\u306b\u767a\u751f\u3057\u306a\u3044\uff09 WHERE \u6761\u4ef6 \u5fc5\u305a <code>AND \"\u30d0\u30fc\u30b8\u30e7\u30f3\" = #{version}</code> \u3092\u542b\u3081\u308b \u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8 <code>\"\u30d0\u30fc\u30b8\u30e7\u30f3\" = \"\u30d0\u30fc\u30b8\u30e7\u30f3\" + 1</code> \u3067\u30a2\u30c8\u30df\u30c3\u30af\u306b\u66f4\u65b0 \u4f8b\u5916\u51e6\u7406 \u66f4\u65b0\u4ef6\u6570\u304c0\u306e\u5834\u5408\u306f\u697d\u89b3\u30ed\u30c3\u30af\u4f8b\u5916\u3092\u30b9\u30ed\u30fc \u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8 \u30e6\u30fc\u30b6\u30fc\u306b\u308f\u304b\u308a\u3084\u3059\u3044\u30e1\u30c3\u30bb\u30fc\u30b8\u3067\u518d\u8aad\u307f\u8fbc\u307f\u3092\u4fc3\u3059"},{"location":"article/part2/chapter07/#7_1","title":"\u7b2c7\u7ae0\u306e\u307e\u3068\u3081","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u50b5\u6a29\u7ba1\u7406\u306e\u6838\u5fc3\u90e8\u5206\u3067\u3042\u308b\u8acb\u6c42\u30fb\u5165\u91d1\u30fb\u58f2\u639b\u91d1\u7ba1\u7406\u306b\u3064\u3044\u3066\u5b66\u3073\u307e\u3057\u305f\u3002</p>"},{"location":"article/part2/chapter07/#_23","title":"\u5b66\u3093\u3060\u3053\u3068","text":"<ol> <li>\u8acb\u6c42\u30d1\u30bf\u30fc\u30f3\u306e\u7406\u89e3</li> <li>\u90fd\u5ea6\u8acb\u6c42\u3068\u7de0\u3081\u8acb\u6c42\u306e\u9055\u3044</li> <li> <p>\u7de0\u51e6\u7406\u306b\u3088\u308b\u58f2\u4e0a\u306e\u96c6\u7d04</p> </li> <li> <p>\u8acb\u6c42\u30c7\u30fc\u30bf\u306e\u69cb\u9020</p> </li> <li>\u524d\u56de\u7e70\u8d8a\u30fb\u4eca\u56de\u58f2\u4e0a\u30fb\u8acb\u6c42\u6b8b\u9ad8\u306e\u8a08\u7b97</li> <li> <p>\u56de\u53ce\u4e88\u5b9a\u65e5\u306e\u8a2d\u5b9a</p> </li> <li> <p>\u5165\u91d1\u6d88\u8fbc\u306e\u5b9f\u88c5</p> </li> <li>1:1\u30011:N\u3001N:1 \u306e\u6d88\u8fbc\u30d1\u30bf\u30fc\u30f3</li> <li> <p>\u81ea\u52d5\u6d88\u8fbc\u6a5f\u80fd</p> </li> <li> <p>\u50b5\u6a29\u6b8b\u9ad8\u7ba1\u7406</p> </li> <li>\u6708\u6b21\u58f2\u639b\u91d1\u6b8b\u9ad8\u306e\u66f4\u65b0</li> <li> <p>\u6ede\u7559\u50b5\u6a29\u306e\u7ba1\u7406</p> </li> <li> <p>\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3068\u697d\u89b3\u30ed\u30c3\u30af</p> </li> <li>N+1 \u554f\u984c\u306e\u56de\u907f</li> <li>\u540c\u6642\u66f4\u65b0\u306e\u7af6\u5408\u5236\u5fa1</li> </ol>"},{"location":"article/part2/chapter07/#er_2","title":"\u50b5\u6a29\u7ba1\u7406\u306e ER \u56f3\uff08\u5168\u4f53\u50cf\uff09","text":""},{"location":"article/part2/chapter07/#_24","title":"\u6b21\u7ae0\u306e\u4e88\u544a","text":"<p>\u7b2c8\u7ae0\u3067\u306f\u3001\u8abf\u9054\u7ba1\u7406\u306e\u8a2d\u8a08\u306b\u9032\u307f\u307e\u3059\u3002\u767a\u6ce8\u30fb\u5165\u8377\u30fb\u4ed5\u5165\u306e\u4e00\u9023\u306e\u8cfc\u8cb7\u696d\u52d9\u30d7\u30ed\u30bb\u30b9\u3092\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\u3068 TDD \u3067\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\u3002</p> <p>\u2190 \u7b2c6\u7ae0\uff1a\u53d7\u6ce8\u30fb\u51fa\u8377\u30fb\u58f2\u4e0a\u306e\u8a2d\u8a08 | \u7b2c8\u7ae0\uff1a\u8abf\u9054\u7ba1\u7406\u306e\u8a2d\u8a08 \u2192</p>"},{"location":"article/part2/chapter08/","title":"\u7b2c8\u7ae0\uff1a\u8abf\u9054\u7ba1\u7406\u306e\u8a2d\u8a08","text":"<p>\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306b\u304a\u3044\u3066\u3001\u5546\u54c1\u306e\u4ed5\u5165\u308c\u3092\u7ba1\u7406\u3059\u308b\u8abf\u9054\u696d\u52d9\u306f\u4e8b\u696d\u7d99\u7d9a\u306e\u57fa\u76e4\u3068\u306a\u308a\u307e\u3059\u3002\u672c\u7ae0\u3067\u306f\u3001\u767a\u6ce8\u304b\u3089\u5165\u8377\u30fb\u691c\u53ce\u3001\u4ed5\u5165\u8a08\u4e0a\u307e\u3067\u306e\u4e00\u9023\u306e\u8abf\u9054\u696d\u52d9\u30d5\u30ed\u30fc\u306b\u5bfe\u5fdc\u3057\u305f\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\u3068\u5b9f\u88c5\u3092\u884c\u3044\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter08/#_1","title":"\u8abf\u9054\u7ba1\u7406\u306e\u5168\u4f53\u50cf","text":"<p>\u8abf\u9054\u7ba1\u7406\u306f\u300c\u767a\u6ce8 \u2192 \u5165\u8377 \u2192 \u691c\u53ce \u2192 \u4ed5\u5165\u8a08\u4e0a\u300d\u3068\u3044\u3046\u4e00\u9023\u306e\u30d5\u30ed\u30fc\u3067\u69cb\u6210\u3055\u308c\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter08/#_2","title":"\u8abf\u9054\u7ba1\u7406\u3067\u6271\u3046\u30c7\u30fc\u30bf","text":"\u30c7\u30fc\u30bf \u8aac\u660e \u767a\u6ce8\u30c7\u30fc\u30bf \u4ed5\u5165\u5148\u3078\u306e\u767a\u6ce8\u60c5\u5831\uff08\u767a\u6ce8\u6570\u91cf\u3001\u5e0c\u671b\u7d0d\u671f\uff09 \u767a\u6ce8\u660e\u7d30 \u767a\u6ce8\u306b\u542b\u307e\u308c\u308b\u5546\u54c1\u660e\u7d30 \u5165\u8377\u30c7\u30fc\u30bf \u4ed5\u5165\u5148\u304b\u3089\u306e\u5165\u8377\u60c5\u5831 \u5165\u8377\u660e\u7d30 \u5165\u8377\u306b\u542b\u307e\u308c\u308b\u691c\u54c1\u60c5\u5831 \u4ed5\u5165\u30c7\u30fc\u30bf \u691c\u53ce\u78ba\u5b9a\u5f8c\u306e\u4ed5\u5165\u60c5\u5831\uff08\u8cb7\u639b\u91d1\u767a\u751f\uff09"},{"location":"article/part2/chapter08/#81-db","title":"8.1 \u767a\u6ce8\u696d\u52d9\u306e DB \u8a2d\u8a08","text":""},{"location":"article/part2/chapter08/#4","title":"\u8abf\u9054\u306e4\u3064\u306e\u30d1\u30bf\u30fc\u30f3","text":"<p>\u767a\u6ce8\u696d\u52d9\u306b\u306f\u3001\u76ee\u7684\u306b\u5fdc\u3058\u30664\u3064\u306e\u30d1\u30bf\u30fc\u30f3\u304c\u3042\u308a\u307e\u3059\u3002</p> <p></p> \u30d1\u30bf\u30fc\u30f3 \u8aac\u660e \u30c8\u30ea\u30ac\u30fc \u5728\u5eab\u88dc\u5145\u767a\u6ce8 \u5b89\u5168\u5728\u5eab\u3092\u4e0b\u56de\u3063\u305f\u5834\u5408\u306e\u81ea\u52d5\u767a\u6ce8 \u5728\u5eab\u6570\u91cf &lt; \u767a\u6ce8\u70b9 \u53d7\u6ce8\u9023\u52d5\u767a\u6ce8 \u53d7\u6ce8\u306b\u57fa\u3065\u304f\u7d10\u4ed8\u3051\u767a\u6ce8 \u53d7\u6ce8\u767b\u9332\u6642 \u8a08\u753b\u767a\u6ce8 \u8ca9\u58f2\u8a08\u753b\u306b\u57fa\u3065\u304f\u5b9a\u671f\u767a\u6ce8 \u6708\u6b21\u30fb\u9031\u6b21\u8a08\u753b \u30b9\u30dd\u30c3\u30c8\u767a\u6ce8 \u81e8\u6642\u306e\u8ffd\u52a0\u767a\u6ce8 \u624b\u52d5"},{"location":"article/part2/chapter08/#_3","title":"\u767a\u6ce8\u30c7\u30fc\u30bf\u30fb\u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\u306e\u69cb\u9020","text":""},{"location":"article/part2/chapter08/#er","title":"\u767a\u6ce8\u30c7\u30fc\u30bf\u306e ER \u56f3","text":""},{"location":"article/part2/chapter08/#_4","title":"\u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\u306e\u5b9a\u7fa9","text":"\u30b9\u30c6\u30fc\u30bf\u30b9 \u8aac\u660e \u4f5c\u6210\u4e2d \u767a\u6ce8\u30c7\u30fc\u30bf\u4f5c\u6210\u4e2d\u3001\u7de8\u96c6\u53ef\u80fd \u78ba\u5b9a \u767a\u6ce8\u78ba\u5b9a\u3001\u6ce8\u6587\u66f8\u767a\u884c\u6e08\u307f \u4e00\u90e8\u5165\u8377 \u4e00\u90e8\u306e\u5546\u54c1\u304c\u5165\u8377\u6e08\u307f \u5165\u8377\u5b8c\u4e86 \u5168\u5546\u54c1\u304c\u5165\u8377\u6e08\u307f \u53d6\u6d88 \u767a\u6ce8\u304c\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u305f\u72b6\u614b"},{"location":"article/part2/chapter08/#_5","title":"\u4ed5\u5165\u5148\u30de\u30b9\u30bf\u3068\u306e\u9023\u643a","text":"<p>\u4ed5\u5165\u5148\u30de\u30b9\u30bf\u306f\u3001\u767a\u6ce8\u5148\u306e\u60c5\u5831\u3092\u7ba1\u7406\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter08/#_6","title":"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff1a\u767a\u6ce8\u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210","text":"V013__create_purchase_order_tables.sql <pre><code>-- src/main/resources/db/migration/V013__create_purchase_order_tables.sql\n\n-- \u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\nCREATE TYPE \u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9 AS ENUM ('\u4f5c\u6210\u4e2d', '\u78ba\u5b9a', '\u4e00\u90e8\u5165\u8377', '\u5165\u8377\u5b8c\u4e86', '\u53d6\u6d88');\n\n-- \u5009\u5eab\u30de\u30b9\u30bf\nCREATE TABLE \"\u5009\u5eab\u30de\u30b9\u30bf\" (\n    \"\u5009\u5eab\u30b3\u30fc\u30c9\" VARCHAR(20) PRIMARY KEY,\n    \"\u5009\u5eab\u540d\" VARCHAR(100) NOT NULL,\n    \"\u5009\u5eab\u540d\u30ab\u30ca\" VARCHAR(200),\n    \"\u90f5\u4fbf\u756a\u53f7\" VARCHAR(10),\n    \"\u4f4f\u6240\" VARCHAR(200),\n    \"\u96fb\u8a71\u756a\u53f7\" VARCHAR(20),\n    \"\u6709\u52b9\u30d5\u30e9\u30b0\" BOOLEAN DEFAULT TRUE,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\u540d\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u8005\u540d\" VARCHAR(50)\n);\n\n-- \u767a\u6ce8\u30c7\u30fc\u30bf\nCREATE TABLE \"\u767a\u6ce8\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u767a\u6ce8\u756a\u53f7\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u4ed5\u5165\u5148\u679d\u756a\" VARCHAR(10) DEFAULT '00',\n    \"\u767a\u6ce8\u65e5\" DATE NOT NULL,\n    \"\u5e0c\u671b\u7d0d\u671f\" DATE,\n    \"\u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\" \u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9 DEFAULT '\u4f5c\u6210\u4e2d' NOT NULL,\n    \"\u767a\u6ce8\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\" VARCHAR(20),\n    \"\u767a\u6ce8\u5408\u8a08\u91d1\u984d\" DECIMAL(15, 2) DEFAULT 0,\n    \"\u7a0e\u984d\" DECIMAL(15, 2) DEFAULT 0,\n    \"\u5099\u8003\" TEXT,\n    \"\u30d0\u30fc\u30b8\u30e7\u30f3\" INTEGER DEFAULT 1 NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u8005\" VARCHAR(50),\n    CONSTRAINT \"fk_\u767a\u6ce8_\u4ed5\u5165\u5148\"\n        FOREIGN KEY (\"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\", \"\u4ed5\u5165\u5148\u679d\u756a\") REFERENCES \"\u4ed5\u5165\u5148\u30de\u30b9\u30bf\"(\"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\", \"\u4ed5\u5165\u5148\u679d\u756a\")\n);\n\n-- \u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\nCREATE TABLE \"\u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u767a\u6ce8ID\" INTEGER NOT NULL,\n    \"\u767a\u6ce8\u884c\u756a\u53f7\" INTEGER NOT NULL,\n    \"\u5546\u54c1\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u767a\u6ce8\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u767a\u6ce8\u5358\u4fa1\" DECIMAL(15, 2) NOT NULL,\n    \"\u767a\u6ce8\u91d1\u984d\" DECIMAL(15, 2) NOT NULL,\n    \"\u5165\u8377\u4e88\u5b9a\u65e5\" DATE,\n    \"\u5165\u8377\u6e08\u6570\u91cf\" DECIMAL(15, 2) DEFAULT 0,\n    \"\u6b8b\u6570\u91cf\" DECIMAL(15, 2),\n    \"\u5099\u8003\" TEXT,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"fk_\u767a\u6ce8\u660e\u7d30_\u767a\u6ce8\"\n        FOREIGN KEY (\"\u767a\u6ce8ID\") REFERENCES \"\u767a\u6ce8\u30c7\u30fc\u30bf\"(\"ID\") ON DELETE CASCADE,\n    CONSTRAINT \"fk_\u767a\u6ce8\u660e\u7d30_\u5546\u54c1\"\n        FOREIGN KEY (\"\u5546\u54c1\u30b3\u30fc\u30c9\") REFERENCES \"\u5546\u54c1\u30de\u30b9\u30bf\"(\"\u5546\u54c1\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"uk_\u767a\u6ce8\u660e\u7d30_\u767a\u6ce8_\u884c\" UNIQUE (\"\u767a\u6ce8ID\", \"\u767a\u6ce8\u884c\u756a\u53f7\")\n);\n\n-- \u6b8b\u6570\u91cf\u306e\u81ea\u52d5\u8a08\u7b97\u30c8\u30ea\u30ac\u30fc\nCREATE OR REPLACE FUNCTION update_purchase_order_remaining()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.\"\u6b8b\u6570\u91cf\" := NEW.\"\u767a\u6ce8\u6570\u91cf\" - COALESCE(NEW.\"\u5165\u8377\u6e08\u6570\u91cf\", 0);\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\nCREATE TRIGGER trg_\u767a\u6ce8\u660e\u7d30_\u6b8b\u6570\u91cf\u66f4\u65b0\n    BEFORE INSERT OR UPDATE ON \"\u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\"\n    FOR EACH ROW\n    EXECUTE FUNCTION update_purchase_order_remaining();\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"idx_\u767a\u6ce8\u30c7\u30fc\u30bf_\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\" ON \"\u767a\u6ce8\u30c7\u30fc\u30bf\"(\"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u767a\u6ce8\u30c7\u30fc\u30bf_\u767a\u6ce8\u65e5\" ON \"\u767a\u6ce8\u30c7\u30fc\u30bf\"(\"\u767a\u6ce8\u65e5\");\nCREATE INDEX \"idx_\u767a\u6ce8\u30c7\u30fc\u30bf_\u30b9\u30c6\u30fc\u30bf\u30b9\" ON \"\u767a\u6ce8\u30c7\u30fc\u30bf\"(\"\u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\");\nCREATE INDEX \"idx_\u767a\u6ce8\u660e\u7d30_\u5546\u54c1\u30b3\u30fc\u30c9\" ON \"\u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\"(\"\u5546\u54c1\u30b3\u30fc\u30c9\");\n\n-- \u30c6\u30fc\u30d6\u30eb\u30b3\u30e1\u30f3\u30c8\nCOMMENT ON TABLE \"\u5009\u5eab\u30de\u30b9\u30bf\" IS '\u5009\u5eab\u60c5\u5831\u3092\u7ba1\u7406\u3059\u308b\u30c6\u30fc\u30d6\u30eb';\nCOMMENT ON TABLE \"\u767a\u6ce8\u30c7\u30fc\u30bf\" IS '\u767a\u6ce8\u30d8\u30c3\u30c0\u60c5\u5831\u3092\u7ba1\u7406\u3059\u308b\u30c6\u30fc\u30d6\u30eb';\nCOMMENT ON TABLE \"\u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\" IS '\u767a\u6ce8\u660e\u7d30\u60c5\u5831\u3092\u7ba1\u7406\u3059\u308b\u30c6\u30fc\u30d6\u30eb';\nCOMMENT ON COLUMN \"\u767a\u6ce8\u30c7\u30fc\u30bf\".\"\u30d0\u30fc\u30b8\u30e7\u30f3\" IS '\u697d\u89b3\u30ed\u30c3\u30af\u7528\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7';\n</code></pre>"},{"location":"article/part2/chapter08/#_7","title":"\u767a\u6ce8\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u5b9f\u88c5","text":"\u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9 ENUM <pre><code>// src/main/java/com/example/sms/domain/model/purchase/PurchaseOrderStatus.java\npackage com.example.sms.domain.model.purchase;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum PurchaseOrderStatus {\n    DRAFT(\"\u4f5c\u6210\u4e2d\"),\n    CONFIRMED(\"\u78ba\u5b9a\"),\n    PARTIALLY_RECEIVED(\"\u4e00\u90e8\u5165\u8377\"),\n    COMPLETED(\"\u5165\u8377\u5b8c\u4e86\"),\n    CANCELLED(\"\u53d6\u6d88\");\n\n    private final String displayName;\n\n    /**\n     * \u8868\u793a\u540d\u304b\u3089\u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u53d6\u5f97\u3059\u308b.\n     *\n     * @param displayName \u8868\u793a\u540d\n     * @return \u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\n     */\n    public static PurchaseOrderStatus fromDisplayName(String displayName) {\n        for (PurchaseOrderStatus status : values()) {\n            if (status.displayName.equals(displayName)) {\n                return status;\n            }\n        }\n        throw new IllegalArgumentException(\"\u4e0d\u6b63\u306a\u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9: \" + displayName);\n    }\n\n    /**\n     * \u78ba\u5b9a\u53ef\u80fd\u304b\u3069\u3046\u304b.\n     *\n     * @return \u78ba\u5b9a\u53ef\u80fd\u306a\u5834\u5408true\n     */\n    public boolean canConfirm() {\n        return this == DRAFT;\n    }\n\n    /**\n     * \u5165\u8377\u767b\u9332\u53ef\u80fd\u304b\u3069\u3046\u304b.\n     *\n     * @return \u5165\u8377\u767b\u9332\u53ef\u80fd\u306a\u5834\u5408true\n     */\n    public boolean canReceive() {\n        return this == CONFIRMED || this == PARTIALLY_RECEIVED;\n    }\n\n    /**\n     * \u53d6\u6d88\u53ef\u80fd\u304b\u3069\u3046\u304b.\n     *\n     * @return \u53d6\u6d88\u53ef\u80fd\u306a\u5834\u5408true\n     */\n    public boolean canCancel() {\n        return this == DRAFT || this == CONFIRMED;\n    }\n}\n</code></pre> \u767a\u6ce8\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/sms/domain/model/purchase/PurchaseOrder.java\npackage com.example.sms.domain.model.purchase;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\n@SuppressWarnings(\"PMD.RedundantFieldInitializer\")\npublic class PurchaseOrder {\n    private Integer id;\n    private String purchaseOrderNumber;\n    private String supplierCode;\n    @Builder.Default\n    private String supplierBranchNumber = \"00\";\n    private LocalDate orderDate;\n    private LocalDate desiredDeliveryDate;\n    @Builder.Default\n    private PurchaseOrderStatus status = PurchaseOrderStatus.DRAFT;\n    private String purchaserCode;\n    @Builder.Default\n    private BigDecimal totalAmount = BigDecimal.ZERO;\n    @Builder.Default\n    private BigDecimal taxAmount = BigDecimal.ZERO;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n\n    /** \u697d\u89b3\u30ed\u30c3\u30af\u7528\u30d0\u30fc\u30b8\u30e7\u30f3. */\n    @Builder.Default\n    private Integer version = 1;\n\n    @Builder.Default\n    private List&lt;PurchaseOrderDetail&gt; details = new ArrayList&lt;&gt;();\n\n    /**\n     * \u767a\u6ce8\u5408\u8a08\u91d1\u984d\u3092\u518d\u8a08\u7b97\u3059\u308b\n     */\n    public void recalculateTotalAmount() {\n        if (details != null &amp;&amp; !details.isEmpty()) {\n            this.totalAmount = details.stream()\n                    .map(PurchaseOrderDetail::getOrderAmount)\n                    .reduce(BigDecimal.ZERO, BigDecimal::add);\n            // \u6d88\u8cbb\u7a0e10%\n            this.taxAmount = this.totalAmount.multiply(new BigDecimal(\"0.10\"));\n        }\n    }\n\n    /**\n     * \u5168\u660e\u7d30\u304c\u5165\u8377\u5b8c\u4e86\u304b\u3069\u3046\u304b\n     */\n    public boolean isAllReceived() {\n        if (details == null || details.isEmpty()) {\n            return false;\n        }\n        return details.stream()\n                .allMatch(d -&gt; d.getRemainingQuantity().compareTo(BigDecimal.ZERO) == 0);\n    }\n\n    /**\n     * \u4e00\u90e8\u5165\u8377\u304c\u3042\u308b\u304b\u3069\u3046\u304b\n     */\n    public boolean hasPartialReceipt() {\n        if (details == null || details.isEmpty()) {\n            return false;\n        }\n        return details.stream()\n                .anyMatch(d -&gt; d.getReceivedQuantity().compareTo(BigDecimal.ZERO) &gt; 0\n                        &amp;&amp; d.getRemainingQuantity().compareTo(BigDecimal.ZERO) &gt; 0);\n    }\n}\n</code></pre> \u767a\u6ce8\u660e\u7d30\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/sales/domain/model/purchase/PurchaseOrderDetail.java\npackage com.example.sms.domain.model.purchase;\n\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\npublic class PurchaseOrderDetail {\n    private Integer id;\n    private String purchaseOrderNumber;\n    private Integer lineNumber;\n    private String productCode;\n    private BigDecimal orderQuantity;\n    private BigDecimal unitPrice;\n    private BigDecimal orderAmount;\n    private LocalDate expectedDeliveryDate;\n    private BigDecimal receivedQuantity;\n    private BigDecimal remainingQuantity;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n\n    /**\n     * \u767a\u6ce8\u91d1\u984d\u3092\u8a08\u7b97\u3059\u308b\n     */\n    public void calculateOrderAmount() {\n        this.orderAmount = this.orderQuantity.multiply(this.unitPrice);\n    }\n\n    /**\n     * \u6b8b\u6570\u91cf\u3092\u8a08\u7b97\u3059\u308b\n     */\n    public void calculateRemainingQuantity() {\n        this.remainingQuantity = this.orderQuantity\n                .subtract(this.receivedQuantity != null ? this.receivedQuantity : BigDecimal.ZERO);\n    }\n\n    /**\n     * \u5165\u8377\u53ef\u80fd\u6570\u91cf\u304b\u3069\u3046\u304b\n     */\n    public boolean canReceive(BigDecimal quantity) {\n        return quantity.compareTo(BigDecimal.ZERO) &gt; 0\n                &amp;&amp; quantity.compareTo(this.remainingQuantity) &lt;= 0;\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter08/#_8","title":"\u767a\u6ce8\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":"\u767a\u6ce8\u30b5\u30fc\u30d3\u30b9 <pre><code>// src/main/java/com/example/sales/application/service/PurchaseOrderService.java\npackage com.example.sms.application.service;\n\nimport com.example.sms.application.port.out.*;\nimport com.example.sms.domain.model.purchase.*;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.format.DateTimeFormatter;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Optional;\n\n@Service\n@RequiredArgsConstructor\npublic class PurchaseOrderService {\n\n    private final PurchaseOrderRepository purchaseOrderRepository;\n\n    /**\n     * \u767a\u6ce8\u756a\u53f7\u3092\u751f\u6210\u3059\u308b\n     */\n    private String generatePurchaseOrderNumber(LocalDate orderDate) {\n        String prefix = \"PO-\" + orderDate.format(\n                DateTimeFormatter.ofPattern(\"yyyyMM\")) + \"-\";\n        Optional&lt;String&gt; latestNumber = purchaseOrderRepository\n                .findLatestPurchaseOrderNumber(prefix + \"%\");\n\n        int sequence = 1;\n        if (latestNumber.isPresent()) {\n            String latest = latestNumber.get();\n            int currentSequence = Integer.parseInt(\n                    latest.substring(latest.length() - 4));\n            sequence = currentSequence + 1;\n        }\n\n        return prefix + String.format(\"%04d\", sequence);\n    }\n\n    /**\n     * \u767a\u6ce8\u3092\u4f5c\u6210\u3059\u308b\n     */\n    @Transactional\n    public PurchaseOrder createPurchaseOrder(PurchaseOrderCreateCommand command) {\n        String purchaseOrderNumber = generatePurchaseOrderNumber(command.getOrderDate());\n\n        // \u767a\u6ce8\u30d8\u30c3\u30c0\u3092\u4f5c\u6210\n        PurchaseOrder purchaseOrder = PurchaseOrder.builder()\n                .purchaseOrderNumber(purchaseOrderNumber)\n                .supplierCode(command.getSupplierCode())\n                .orderDate(command.getOrderDate())\n                .desiredDeliveryDate(command.getDesiredDeliveryDate())\n                .status(PurchaseOrderStatus.DRAFT)\n                .purchaserCode(command.getPurchaserCode())\n                .remarks(command.getRemarks())\n                .totalAmount(BigDecimal.ZERO)\n                .taxAmount(BigDecimal.ZERO)\n                .build();\n\n        // \u767a\u6ce8\u660e\u7d30\u3092\u4f5c\u6210\n        List&lt;PurchaseOrderDetail&gt; details = new ArrayList&lt;&gt;();\n        int lineNumber = 0;\n\n        for (var detailCommand : command.getDetails()) {\n            lineNumber++;\n            BigDecimal orderAmount = detailCommand.getOrderQuantity()\n                    .multiply(detailCommand.getUnitPrice());\n\n            PurchaseOrderDetail detail = PurchaseOrderDetail.builder()\n                    .purchaseOrderNumber(purchaseOrderNumber)\n                    .lineNumber(lineNumber)\n                    .productCode(detailCommand.getProductCode())\n                    .orderQuantity(detailCommand.getOrderQuantity())\n                    .unitPrice(detailCommand.getUnitPrice())\n                    .orderAmount(orderAmount)\n                    .expectedDeliveryDate(detailCommand.getExpectedDeliveryDate())\n                    .receivedQuantity(BigDecimal.ZERO)\n                    .remainingQuantity(detailCommand.getOrderQuantity())\n                    .remarks(detailCommand.getRemarks())\n                    .build();\n\n            details.add(detail);\n        }\n\n        purchaseOrder.setDetails(details);\n        purchaseOrder.recalculateTotalAmount();\n\n        // \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u4fdd\u5b58\n        purchaseOrderRepository.save(purchaseOrder);\n\n        return purchaseOrder;\n    }\n\n    /**\n     * \u767a\u6ce8\u3092\u78ba\u5b9a\u3059\u308b\n     */\n    @Transactional\n    public void confirmPurchaseOrder(String purchaseOrderNumber) {\n        PurchaseOrder purchaseOrder = findByPurchaseOrderNumber(purchaseOrderNumber)\n                .orElseThrow(() -&gt; new IllegalArgumentException(\n                        \"\u767a\u6ce8\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + purchaseOrderNumber));\n\n        if (!purchaseOrder.getStatus().canConfirm()) {\n            throw new IllegalStateException(\n                    \"\u3053\u306e\u767a\u6ce8\u306f\u78ba\u5b9a\u3067\u304d\u307e\u305b\u3093\u3002\u73fe\u5728\u306e\u30b9\u30c6\u30fc\u30bf\u30b9: \" +\n                    purchaseOrder.getStatus().getDisplayName());\n        }\n\n        purchaseOrderRepository.updateStatus(\n                purchaseOrderNumber, PurchaseOrderStatus.CONFIRMED);\n    }\n\n    /**\n     * \u767a\u6ce8\u3092\u53d6\u6d88\u3059\u308b\n     */\n    @Transactional\n    public void cancelPurchaseOrder(String purchaseOrderNumber) {\n        PurchaseOrder purchaseOrder = findByPurchaseOrderNumber(purchaseOrderNumber)\n                .orElseThrow(() -&gt; new IllegalArgumentException(\n                        \"\u767a\u6ce8\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + purchaseOrderNumber));\n\n        if (!purchaseOrder.getStatus().canCancel()) {\n            throw new IllegalStateException(\n                    \"\u3053\u306e\u767a\u6ce8\u306f\u53d6\u6d88\u3067\u304d\u307e\u305b\u3093\u3002\u73fe\u5728\u306e\u30b9\u30c6\u30fc\u30bf\u30b9: \" +\n                    purchaseOrder.getStatus().getDisplayName());\n        }\n\n        purchaseOrderRepository.updateStatus(\n                purchaseOrderNumber, PurchaseOrderStatus.CANCELLED);\n    }\n\n    /**\n     * \u767a\u6ce8\u756a\u53f7\u3067\u691c\u7d22\u3059\u308b\n     */\n    public Optional&lt;PurchaseOrder&gt; findByPurchaseOrderNumber(String purchaseOrderNumber) {\n        return purchaseOrderRepository.findByPurchaseOrderNumber(purchaseOrderNumber);\n    }\n\n    /**\n     * \u672a\u5b8c\u4e86\u306e\u767a\u6ce8\u3092\u691c\u7d22\u3059\u308b\n     */\n    public List&lt;PurchaseOrder&gt; findPendingOrders() {\n        return purchaseOrderRepository.findPendingOrders();\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter08/#82-db","title":"8.2 \u5165\u8377\u30fb\u691c\u53ce\u696d\u52d9\u306e DB \u8a2d\u8a08","text":""},{"location":"article/part2/chapter08/#_9","title":"\u5165\u8377\u696d\u52d9\u30d5\u30ed\u30fc\u306e\u7406\u89e3","text":"<p>\u5165\u8377\u696d\u52d9\u306f\u3001\u767a\u6ce8\u3057\u305f\u5546\u54c1\u3092\u53d7\u3051\u53d6\u308a\u3001\u691c\u54c1\u3057\u3066\u4ed5\u5165\u8a08\u4e0a\u3059\u308b\u696d\u52d9\u3067\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter08/#_10","title":"\u5165\u8377\u30c7\u30fc\u30bf\u306e\u69cb\u9020","text":""},{"location":"article/part2/chapter08/#er_1","title":"\u5165\u8377\u30fb\u4ed5\u5165\u30c7\u30fc\u30bf\u306e ER \u56f3","text":""},{"location":"article/part2/chapter08/#_11","title":"\u5165\u8377\u30b9\u30c6\u30fc\u30bf\u30b9\u306e\u5b9a\u7fa9","text":"\u30b9\u30c6\u30fc\u30bf\u30b9 \u8aac\u660e \u5165\u8377\u5f85\u3061 \u5165\u8377\u30c7\u30fc\u30bf\u767b\u9332\u6e08\u307f\u3001\u691c\u54c1\u524d \u691c\u54c1\u4e2d \u691c\u54c1\u4f5c\u696d\u4e2d \u691c\u54c1\u5b8c\u4e86 \u691c\u54c1\u5b8c\u4e86\u3001\u4ed5\u5165\u8a08\u4e0a\u5f85\u3061 \u4ed5\u5165\u8a08\u4e0a\u6e08 \u4ed5\u5165\u30c7\u30fc\u30bf\u4f5c\u6210\u6e08\u307f \u8fd4\u54c1 \u5168\u91cf\u8fd4\u54c1\u51e6\u7406"},{"location":"article/part2/chapter08/#_12","title":"\u691c\u53ce\uff08\u4ed5\u5165\u8a08\u4e0a\uff09\u51e6\u7406","text":"<p>\u691c\u53ce\u51e6\u7406\u3067\u306f\u3001\u691c\u54c1\u5b8c\u4e86\u5f8c\u306b\u5408\u683c\u6570\u91cf\u5206\u3092\u4ed5\u5165\u3068\u3057\u3066\u8a08\u4e0a\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter08/#_13","title":"\u8af8\u53e3\u54c1\u76ee\u306e\u6271\u3044","text":"<p>\u8af8\u53e3\u54c1\u76ee\uff08\u96d1\u54c1\u3001\u6d88\u8017\u54c1\u306a\u3069\uff09\u306f\u3001\u5546\u54c1\u30de\u30b9\u30bf\u306b\u767b\u9332\u305b\u305a\u306b\u76f4\u63a5\u5165\u529b\u3059\u308b\u54c1\u76ee\u3067\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter08/#_14","title":"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff1a\u5165\u8377\u30fb\u4ed5\u5165\u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210","text":"V014__create_receiving_tables.sql <pre><code>-- src/main/resources/db/migration/V014__create_receiving_tables.sql\n\n-- \u5165\u8377\u30b9\u30c6\u30fc\u30bf\u30b9\nCREATE TYPE \u5165\u8377\u30b9\u30c6\u30fc\u30bf\u30b9 AS ENUM ('\u5165\u8377\u5f85\u3061', '\u691c\u54c1\u4e2d', '\u691c\u54c1\u5b8c\u4e86', '\u4ed5\u5165\u8a08\u4e0a\u6e08', '\u8fd4\u54c1');\n\n-- \u5165\u8377\u30c7\u30fc\u30bf\nCREATE TABLE \"\u5165\u8377\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u5165\u8377\u756a\u53f7\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u767a\u6ce8ID\" INTEGER NOT NULL,\n    \"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u4ed5\u5165\u5148\u679d\u756a\" VARCHAR(10) DEFAULT '00',\n    \"\u5165\u8377\u65e5\" DATE NOT NULL,\n    \"\u5165\u8377\u30b9\u30c6\u30fc\u30bf\u30b9\" \u5165\u8377\u30b9\u30c6\u30fc\u30bf\u30b9 DEFAULT '\u5165\u8377\u5f85\u3061' NOT NULL,\n    \"\u5165\u8377\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\" VARCHAR(20),\n    \"\u5009\u5eab\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u5099\u8003\" TEXT,\n    \"\u30d0\u30fc\u30b8\u30e7\u30f3\" INTEGER DEFAULT 1 NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u8005\" VARCHAR(50),\n    CONSTRAINT \"fk_\u5165\u8377_\u767a\u6ce8\"\n        FOREIGN KEY (\"\u767a\u6ce8ID\") REFERENCES \"\u767a\u6ce8\u30c7\u30fc\u30bf\"(\"ID\"),\n    CONSTRAINT \"fk_\u5165\u8377_\u4ed5\u5165\u5148\"\n        FOREIGN KEY (\"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\", \"\u4ed5\u5165\u5148\u679d\u756a\") REFERENCES \"\u4ed5\u5165\u5148\u30de\u30b9\u30bf\"(\"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\", \"\u4ed5\u5165\u5148\u679d\u756a\"),\n    CONSTRAINT \"fk_\u5165\u8377_\u5009\u5eab\"\n        FOREIGN KEY (\"\u5009\u5eab\u30b3\u30fc\u30c9\") REFERENCES \"\u5009\u5eab\u30de\u30b9\u30bf\"(\"\u5009\u5eab\u30b3\u30fc\u30c9\")\n);\n\n-- \u5165\u8377\u660e\u7d30\u30c7\u30fc\u30bf\nCREATE TABLE \"\u5165\u8377\u660e\u7d30\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u5165\u8377ID\" INTEGER NOT NULL,\n    \"\u5165\u8377\u884c\u756a\u53f7\" INTEGER NOT NULL,\n    \"\u767a\u6ce8\u660e\u7d30ID\" INTEGER NOT NULL,\n    \"\u5546\u54c1\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u5165\u8377\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u691c\u54c1\u6570\u91cf\" DECIMAL(15, 2) DEFAULT 0,\n    \"\u5408\u683c\u6570\u91cf\" DECIMAL(15, 2) DEFAULT 0,\n    \"\u4e0d\u5408\u683c\u6570\u91cf\" DECIMAL(15, 2) DEFAULT 0,\n    \"\u5165\u8377\u5358\u4fa1\" DECIMAL(15, 2) NOT NULL,\n    \"\u5165\u8377\u91d1\u984d\" DECIMAL(15, 2) NOT NULL,\n    \"\u5099\u8003\" TEXT,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"fk_\u5165\u8377\u660e\u7d30_\u5165\u8377\"\n        FOREIGN KEY (\"\u5165\u8377ID\") REFERENCES \"\u5165\u8377\u30c7\u30fc\u30bf\"(\"ID\") ON DELETE CASCADE,\n    CONSTRAINT \"fk_\u5165\u8377\u660e\u7d30_\u767a\u6ce8\u660e\u7d30\"\n        FOREIGN KEY (\"\u767a\u6ce8\u660e\u7d30ID\") REFERENCES \"\u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\"(\"ID\"),\n    CONSTRAINT \"fk_\u5165\u8377\u660e\u7d30_\u5546\u54c1\"\n        FOREIGN KEY (\"\u5546\u54c1\u30b3\u30fc\u30c9\") REFERENCES \"\u5546\u54c1\u30de\u30b9\u30bf\"(\"\u5546\u54c1\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"uk_\u5165\u8377\u660e\u7d30_\u5165\u8377_\u884c\" UNIQUE (\"\u5165\u8377ID\", \"\u5165\u8377\u884c\u756a\u53f7\")\n);\n\n-- \u4ed5\u5165\u30c7\u30fc\u30bf\uff08\u691c\u53ce\u78ba\u5b9a\u5f8c\u306b\u4f5c\u6210\uff09\nCREATE TABLE \"\u4ed5\u5165\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u4ed5\u5165\u756a\u53f7\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u5165\u8377ID\" INTEGER NOT NULL,\n    \"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u4ed5\u5165\u5148\u679d\u756a\" VARCHAR(10) DEFAULT '00',\n    \"\u4ed5\u5165\u65e5\" DATE NOT NULL,\n    \"\u4ed5\u5165\u5408\u8a08\u91d1\u984d\" DECIMAL(15, 2) NOT NULL,\n    \"\u7a0e\u984d\" DECIMAL(15, 2) NOT NULL,\n    \"\u5099\u8003\" TEXT,\n    \"\u30d0\u30fc\u30b8\u30e7\u30f3\" INTEGER DEFAULT 1 NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u8005\" VARCHAR(50),\n    CONSTRAINT \"fk_\u4ed5\u5165_\u5165\u8377\"\n        FOREIGN KEY (\"\u5165\u8377ID\") REFERENCES \"\u5165\u8377\u30c7\u30fc\u30bf\"(\"ID\"),\n    CONSTRAINT \"fk_\u4ed5\u5165_\u4ed5\u5165\u5148\"\n        FOREIGN KEY (\"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\", \"\u4ed5\u5165\u5148\u679d\u756a\") REFERENCES \"\u4ed5\u5165\u5148\u30de\u30b9\u30bf\"(\"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\", \"\u4ed5\u5165\u5148\u679d\u756a\")\n);\n\n-- \u4ed5\u5165\u660e\u7d30\u30c7\u30fc\u30bf\nCREATE TABLE \"\u4ed5\u5165\u660e\u7d30\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u4ed5\u5165ID\" INTEGER NOT NULL,\n    \"\u4ed5\u5165\u884c\u756a\u53f7\" INTEGER NOT NULL,\n    \"\u5546\u54c1\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u4ed5\u5165\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u4ed5\u5165\u5358\u4fa1\" DECIMAL(15, 2) NOT NULL,\n    \"\u4ed5\u5165\u91d1\u984d\" DECIMAL(15, 2) NOT NULL,\n    \"\u5099\u8003\" TEXT,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"fk_\u4ed5\u5165\u660e\u7d30_\u4ed5\u5165\"\n        FOREIGN KEY (\"\u4ed5\u5165ID\") REFERENCES \"\u4ed5\u5165\u30c7\u30fc\u30bf\"(\"ID\") ON DELETE CASCADE,\n    CONSTRAINT \"fk_\u4ed5\u5165\u660e\u7d30_\u5546\u54c1\"\n        FOREIGN KEY (\"\u5546\u54c1\u30b3\u30fc\u30c9\") REFERENCES \"\u5546\u54c1\u30de\u30b9\u30bf\"(\"\u5546\u54c1\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"uk_\u4ed5\u5165\u660e\u7d30_\u4ed5\u5165_\u884c\" UNIQUE (\"\u4ed5\u5165ID\", \"\u4ed5\u5165\u884c\u756a\u53f7\")\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"idx_\u5165\u8377\u30c7\u30fc\u30bf_\u767a\u6ce8ID\" ON \"\u5165\u8377\u30c7\u30fc\u30bf\"(\"\u767a\u6ce8ID\");\nCREATE INDEX \"idx_\u5165\u8377\u30c7\u30fc\u30bf_\u5165\u8377\u65e5\" ON \"\u5165\u8377\u30c7\u30fc\u30bf\"(\"\u5165\u8377\u65e5\");\nCREATE INDEX \"idx_\u5165\u8377\u30c7\u30fc\u30bf_\u30b9\u30c6\u30fc\u30bf\u30b9\" ON \"\u5165\u8377\u30c7\u30fc\u30bf\"(\"\u5165\u8377\u30b9\u30c6\u30fc\u30bf\u30b9\");\nCREATE INDEX \"idx_\u5165\u8377\u660e\u7d30_\u767a\u6ce8\u660e\u7d30ID\" ON \"\u5165\u8377\u660e\u7d30\u30c7\u30fc\u30bf\"(\"\u767a\u6ce8\u660e\u7d30ID\");\nCREATE INDEX \"idx_\u4ed5\u5165\u30c7\u30fc\u30bf_\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\" ON \"\u4ed5\u5165\u30c7\u30fc\u30bf\"(\"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u4ed5\u5165\u30c7\u30fc\u30bf_\u4ed5\u5165\u65e5\" ON \"\u4ed5\u5165\u30c7\u30fc\u30bf\"(\"\u4ed5\u5165\u65e5\");\n\n-- \u30c6\u30fc\u30d6\u30eb\u30b3\u30e1\u30f3\u30c8\nCOMMENT ON TABLE \"\u5165\u8377\u30c7\u30fc\u30bf\" IS '\u5165\u8377\u30d8\u30c3\u30c0\u60c5\u5831\u3092\u7ba1\u7406\u3059\u308b\u30c6\u30fc\u30d6\u30eb';\nCOMMENT ON TABLE \"\u5165\u8377\u660e\u7d30\u30c7\u30fc\u30bf\" IS '\u5165\u8377\u660e\u7d30\u30fb\u691c\u54c1\u60c5\u5831\u3092\u7ba1\u7406\u3059\u308b\u30c6\u30fc\u30d6\u30eb';\nCOMMENT ON TABLE \"\u4ed5\u5165\u30c7\u30fc\u30bf\" IS '\u4ed5\u5165\u30d8\u30c3\u30c0\u60c5\u5831\u3092\u7ba1\u7406\u3059\u308b\u30c6\u30fc\u30d6\u30eb';\nCOMMENT ON TABLE \"\u4ed5\u5165\u660e\u7d30\u30c7\u30fc\u30bf\" IS '\u4ed5\u5165\u660e\u7d30\u60c5\u5831\u3092\u7ba1\u7406\u3059\u308b\u30c6\u30fc\u30d6\u30eb';\nCOMMENT ON COLUMN \"\u5165\u8377\u30c7\u30fc\u30bf\".\"\u30d0\u30fc\u30b8\u30e7\u30f3\" IS '\u697d\u89b3\u30ed\u30c3\u30af\u7528\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7';\nCOMMENT ON COLUMN \"\u4ed5\u5165\u30c7\u30fc\u30bf\".\"\u30d0\u30fc\u30b8\u30e7\u30f3\" IS '\u697d\u89b3\u30ed\u30c3\u30af\u7528\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7';\n</code></pre>"},{"location":"article/part2/chapter08/#_15","title":"\u5165\u8377\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u5b9f\u88c5","text":"\u5165\u8377\u30b9\u30c6\u30fc\u30bf\u30b9 ENUM <pre><code>// src/main/java/com/example/sales/domain/model/purchase/ReceivingStatus.java\npackage com.example.sms.domain.model.purchase;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum ReceivingStatus {\n    WAITING(\"\u5165\u8377\u5f85\u3061\"),\n    INSPECTING(\"\u691c\u54c1\u4e2d\"),\n    INSPECTION_COMPLETED(\"\u691c\u54c1\u5b8c\u4e86\"),\n    PURCHASE_RECORDED(\"\u4ed5\u5165\u8a08\u4e0a\u6e08\"),\n    RETURNED(\"\u8fd4\u54c1\");\n\n    private final String displayName;\n\n    /**\n     * \u8868\u793a\u540d\u304b\u3089\u5165\u8377\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u53d6\u5f97\u3059\u308b.\n     *\n     * @param displayName \u8868\u793a\u540d\n     * @return \u5165\u8377\u30b9\u30c6\u30fc\u30bf\u30b9\n     */\n    public static ReceivingStatus fromDisplayName(String displayName) {\n        for (ReceivingStatus status : values()) {\n            if (status.displayName.equals(displayName)) {\n                return status;\n            }\n        }\n        throw new IllegalArgumentException(\"\u4e0d\u6b63\u306a\u5165\u8377\u30b9\u30c6\u30fc\u30bf\u30b9: \" + displayName);\n    }\n\n    /**\n     * \u691c\u54c1\u958b\u59cb\u53ef\u80fd\u304b\u3069\u3046\u304b.\n     *\n     * @return \u691c\u54c1\u958b\u59cb\u53ef\u80fd\u306a\u5834\u5408true\n     */\n    public boolean canStartInspection() {\n        return this == WAITING;\n    }\n\n    /**\n     * \u4ed5\u5165\u8a08\u4e0a\u53ef\u80fd\u304b\u3069\u3046\u304b.\n     *\n     * @return \u4ed5\u5165\u8a08\u4e0a\u53ef\u80fd\u306a\u5834\u5408true\n     */\n    public boolean canRecordPurchase() {\n        return this == INSPECTION_COMPLETED;\n    }\n}\n</code></pre> \u5165\u8377\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/sales/domain/model/purchase/Receiving.java\npackage com.example.sms.domain.model.purchase;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Receiving {\n    private Integer id;\n    private String receivingNumber;\n    private String purchaseOrderNumber;\n    private String supplierCode;\n    private LocalDate receivingDate;\n    private ReceivingStatus status;\n    private String receiverCode;\n    private String warehouseCode;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n\n    // \u697d\u89b3\u30ed\u30c3\u30af\u7528\u30d0\u30fc\u30b8\u30e7\u30f3\n    @Builder.Default\n    private Integer version = 1;\n\n    // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n    @Builder.Default\n    private List&lt;ReceivingDetail&gt; details = new ArrayList&lt;&gt;();\n}\n</code></pre> \u5165\u8377\u660e\u7d30\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/sales/domain/model/purchase/ReceivingDetail.java\npackage com.example.sms.domain.model.purchase;\n\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\npublic class ReceivingDetail {\n    private Integer id;\n    private String receivingNumber;\n    private Integer lineNumber;\n    private Integer purchaseOrderLineNumber;\n    private String productCode;\n    private BigDecimal receivingQuantity;\n    private BigDecimal inspectedQuantity;\n    private BigDecimal acceptedQuantity;\n    private BigDecimal rejectedQuantity;\n    private BigDecimal unitPrice;\n    private BigDecimal amount;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n\n    /**\n     * \u691c\u54c1\u3092\u5b8c\u4e86\u3059\u308b\n     */\n    public void completeInspection(BigDecimal acceptedQty, BigDecimal rejectedQty) {\n        this.inspectedQuantity = acceptedQty.add(rejectedQty);\n        this.acceptedQuantity = acceptedQty;\n        this.rejectedQuantity = rejectedQty;\n    }\n}\n</code></pre> \u4ed5\u5165\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/sales/domain/model/purchase/Purchase.java\npackage com.example.sms.domain.model.purchase;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Purchase {\n    private Integer id;\n    private String purchaseNumber;\n    private String receivingNumber;\n    private String supplierCode;\n    private LocalDate purchaseDate;\n    private BigDecimal totalAmount;\n    private BigDecimal taxAmount;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n\n    // \u697d\u89b3\u30ed\u30c3\u30af\u7528\u30d0\u30fc\u30b8\u30e7\u30f3\n    @Builder.Default\n    private Integer version = 1;\n\n    // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n    @Builder.Default\n    private List&lt;PurchaseDetail&gt; details = new ArrayList&lt;&gt;();\n\n    /**\n     * \u4ed5\u5165\u5408\u8a08\u91d1\u984d\u3092\u518d\u8a08\u7b97\n     */\n    public void recalculateTotalAmount() {\n        if (details != null &amp;&amp; !details.isEmpty()) {\n            this.totalAmount = details.stream()\n                    .map(PurchaseDetail::getPurchaseAmount)\n                    .reduce(BigDecimal.ZERO, BigDecimal::add);\n            this.taxAmount = this.totalAmount.multiply(new BigDecimal(\"0.10\"));\n        }\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter08/#_16","title":"\u5165\u8377\u30fb\u4ed5\u5165\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":"\u5165\u8377\u30b5\u30fc\u30d3\u30b9 <pre><code>// src/main/java/com/example/sales/application/service/ReceivingService.java\npackage com.example.sms.application.service;\n\nimport com.example.sms.application.port.out.*;\nimport com.example.sms.domain.model.purchase.*;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.format.DateTimeFormatter;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Optional;\n\n@Service\n@RequiredArgsConstructor\npublic class ReceivingService {\n\n    private final ReceivingRepository receivingRepository;\n    private final PurchaseOrderRepository purchaseOrderRepository;\n    private final PurchaseRepository purchaseRepository;\n    private final InventoryRepository inventoryRepository;\n    private final AccountsPayableRepository accountsPayableRepository;\n\n    /**\n     * \u5165\u8377\u3092\u767b\u9332\u3059\u308b\n     */\n    @Transactional\n    public Receiving createReceiving(ReceivingCreateCommand command) {\n        // \u767a\u6ce8\u306e\u5b58\u5728\u78ba\u8a8d\n        PurchaseOrder purchaseOrder = purchaseOrderRepository\n                .findByPurchaseOrderNumber(command.getPurchaseOrderNumber())\n                .orElseThrow(() -&gt; new IllegalArgumentException(\n                        \"\u767a\u6ce8\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + command.getPurchaseOrderNumber()));\n\n        if (!purchaseOrder.getStatus().canReceive()) {\n            throw new IllegalStateException(\n                    \"\u3053\u306e\u767a\u6ce8\u306f\u5165\u8377\u767b\u9332\u3067\u304d\u307e\u305b\u3093\u3002\u73fe\u5728\u306e\u30b9\u30c6\u30fc\u30bf\u30b9: \" +\n                    purchaseOrder.getStatus().getDisplayName());\n        }\n\n        String receivingNumber = generateReceivingNumber(command.getReceivingDate());\n\n        Receiving receiving = Receiving.builder()\n                .receivingNumber(receivingNumber)\n                .purchaseOrderNumber(command.getPurchaseOrderNumber())\n                .supplierCode(purchaseOrder.getSupplierCode())\n                .receivingDate(command.getReceivingDate())\n                .status(ReceivingStatus.WAITING)\n                .receiverCode(command.getReceiverCode())\n                .warehouseCode(command.getWarehouseCode())\n                .remarks(command.getRemarks())\n                .build();\n\n        List&lt;ReceivingDetail&gt; details = new ArrayList&lt;&gt;();\n        int lineNumber = 0;\n\n        for (var detailCommand : command.getDetails()) {\n            lineNumber++;\n            BigDecimal amount = detailCommand.getReceivingQuantity()\n                    .multiply(detailCommand.getUnitPrice());\n\n            ReceivingDetail detail = ReceivingDetail.builder()\n                    .receivingNumber(receivingNumber)\n                    .lineNumber(lineNumber)\n                    .purchaseOrderLineNumber(detailCommand.getPurchaseOrderLineNumber())\n                    .productCode(detailCommand.getProductCode())\n                    .receivingQuantity(detailCommand.getReceivingQuantity())\n                    .inspectedQuantity(BigDecimal.ZERO)\n                    .acceptedQuantity(BigDecimal.ZERO)\n                    .rejectedQuantity(BigDecimal.ZERO)\n                    .unitPrice(detailCommand.getUnitPrice())\n                    .amount(amount)\n                    .remarks(detailCommand.getRemarks())\n                    .build();\n\n            details.add(detail);\n        }\n\n        receiving.setDetails(details);\n        receivingRepository.save(receiving);\n\n        return receiving;\n    }\n\n    /**\n     * \u691c\u54c1\u3092\u5b8c\u4e86\u3059\u308b\n     */\n    @Transactional\n    public void completeInspection(String receivingNumber,\n                                    List&lt;InspectionResult&gt; results) {\n        Receiving receiving = findByReceivingNumber(receivingNumber)\n                .orElseThrow(() -&gt; new IllegalArgumentException(\n                        \"\u5165\u8377\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + receivingNumber));\n\n        for (InspectionResult result : results) {\n            receivingRepository.updateInspectionResult(\n                    receivingNumber,\n                    result.getLineNumber(),\n                    result.getAcceptedQuantity(),\n                    result.getRejectedQuantity()\n            );\n        }\n\n        receivingRepository.updateStatus(\n                receivingNumber, ReceivingStatus.INSPECTION_COMPLETED);\n    }\n\n    /**\n     * \u4ed5\u5165\u8a08\u4e0a\u3059\u308b\n     */\n    @Transactional\n    public Purchase recordPurchase(String receivingNumber) {\n        Receiving receiving = findByReceivingNumber(receivingNumber)\n                .orElseThrow(() -&gt; new IllegalArgumentException(\n                        \"\u5165\u8377\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + receivingNumber));\n\n        if (!receiving.getStatus().canRecordPurchase()) {\n            throw new IllegalStateException(\n                    \"\u3053\u306e\u5165\u8377\u306f\u4ed5\u5165\u8a08\u4e0a\u3067\u304d\u307e\u305b\u3093\u3002\u73fe\u5728\u306e\u30b9\u30c6\u30fc\u30bf\u30b9: \" +\n                    receiving.getStatus().getDisplayName());\n        }\n\n        String purchaseNumber = generatePurchaseNumber(LocalDate.now());\n\n        // \u4ed5\u5165\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\n        Purchase purchase = Purchase.builder()\n                .purchaseNumber(purchaseNumber)\n                .receivingNumber(receivingNumber)\n                .supplierCode(receiving.getSupplierCode())\n                .purchaseDate(LocalDate.now())\n                .build();\n\n        List&lt;PurchaseDetail&gt; purchaseDetails = new ArrayList&lt;&gt;();\n        int lineNumber = 0;\n\n        for (ReceivingDetail receivingDetail : receiving.getDetails()) {\n            if (receivingDetail.getAcceptedQuantity().compareTo(BigDecimal.ZERO) &gt; 0) {\n                lineNumber++;\n                BigDecimal purchaseAmount = receivingDetail.getAcceptedQuantity()\n                        .multiply(receivingDetail.getUnitPrice());\n\n                PurchaseDetail purchaseDetail = PurchaseDetail.builder()\n                        .purchaseNumber(purchaseNumber)\n                        .lineNumber(lineNumber)\n                        .productCode(receivingDetail.getProductCode())\n                        .purchaseQuantity(receivingDetail.getAcceptedQuantity())\n                        .unitPrice(receivingDetail.getUnitPrice())\n                        .purchaseAmount(purchaseAmount)\n                        .build();\n\n                purchaseDetails.add(purchaseDetail);\n\n                // \u5728\u5eab\u3092\u5897\u52a0\n                inventoryRepository.increaseQuantity(\n                        receiving.getWarehouseCode(),\n                        receivingDetail.getProductCode(),\n                        receivingDetail.getAcceptedQuantity()\n                );\n            }\n        }\n\n        purchase.setDetails(purchaseDetails);\n        purchase.recalculateTotalAmount();\n        purchaseRepository.save(purchase);\n\n        // \u767a\u6ce8\u6b8b\u3092\u66f4\u65b0\n        updatePurchaseOrderReceivedQuantity(receiving);\n\n        // \u5165\u8377\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u66f4\u65b0\n        receivingRepository.updateStatus(\n                receivingNumber, ReceivingStatus.PURCHASE_RECORDED);\n\n        // \u8cb7\u639b\u91d1\u3092\u8a08\u4e0a\n        accountsPayableRepository.increaseBalance(\n                receiving.getSupplierCode(),\n                purchase.getTotalAmount().add(purchase.getTaxAmount())\n        );\n\n        return purchase;\n    }\n\n    private void updatePurchaseOrderReceivedQuantity(Receiving receiving) {\n        for (ReceivingDetail detail : receiving.getDetails()) {\n            purchaseOrderRepository.updateReceivedQuantity(\n                    receiving.getPurchaseOrderNumber(),\n                    detail.getPurchaseOrderLineNumber(),\n                    detail.getAcceptedQuantity()\n            );\n        }\n\n        // \u767a\u6ce8\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u66f4\u65b0\n        PurchaseOrder purchaseOrder = purchaseOrderRepository\n                .findByPurchaseOrderNumber(receiving.getPurchaseOrderNumber())\n                .orElseThrow();\n\n        if (purchaseOrder.isAllReceived()) {\n            purchaseOrderRepository.updateStatus(\n                    receiving.getPurchaseOrderNumber(),\n                    PurchaseOrderStatus.COMPLETED\n            );\n        } else if (purchaseOrder.hasPartialReceipt()) {\n            purchaseOrderRepository.updateStatus(\n                    receiving.getPurchaseOrderNumber(),\n                    PurchaseOrderStatus.PARTIALLY_RECEIVED\n            );\n        }\n    }\n\n    public Optional&lt;Receiving&gt; findByReceivingNumber(String receivingNumber) {\n        return receivingRepository.findByReceivingNumber(receivingNumber);\n    }\n\n    private String generateReceivingNumber(LocalDate receivingDate) {\n        String prefix = \"RCV-\" + receivingDate.format(\n                DateTimeFormatter.ofPattern(\"yyyyMM\")) + \"-\";\n        Optional&lt;String&gt; latestNumber = receivingRepository\n                .findLatestReceivingNumber(prefix + \"%\");\n\n        int sequence = 1;\n        if (latestNumber.isPresent()) {\n            String latest = latestNumber.get();\n            int currentSequence = Integer.parseInt(\n                    latest.substring(latest.length() - 4));\n            sequence = currentSequence + 1;\n        }\n\n        return prefix + String.format(\"%04d\", sequence);\n    }\n\n    private String generatePurchaseNumber(LocalDate purchaseDate) {\n        String prefix = \"PUR-\" + purchaseDate.format(\n                DateTimeFormatter.ofPattern(\"yyyyMM\")) + \"-\";\n        Optional&lt;String&gt; latestNumber = purchaseRepository\n                .findLatestPurchaseNumber(prefix + \"%\");\n\n        int sequence = 1;\n        if (latestNumber.isPresent()) {\n            String latest = latestNumber.get();\n            int currentSequence = Integer.parseInt(\n                    latest.substring(latest.length() - 4));\n            sequence = currentSequence + 1;\n        }\n\n        return prefix + String.format(\"%04d\", sequence);\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter08/#83","title":"8.3 \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3068\u697d\u89b3\u30ed\u30c3\u30af\u306e\u8a2d\u8a08","text":""},{"location":"article/part2/chapter08/#n1","title":"N+1 \u554f\u984c\u3068\u305d\u306e\u89e3\u6c7a","text":"<p>\u767a\u6ce8\u30c7\u30fc\u30bf\u306f\u3001\u767a\u6ce8\uff08\u30d8\u30c3\u30c0\uff09\u2192 \u767a\u6ce8\u660e\u7d30\u306e2\u5c64\u69cb\u9020\u3092\u6301\u3061\u307e\u3059\u3002\u5165\u8377\u30c7\u30fc\u30bf\u3082\u5165\u8377 \u2192 \u5165\u8377\u660e\u7d30\u306e\u89aa\u5b50\u95a2\u4fc2\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u30c7\u30fc\u30bf\u3092\u52b9\u7387\u7684\u306b\u53d6\u5f97\u3059\u308b\u305f\u3081\u306e\u8a2d\u8a08\u3092\u884c\u3044\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter08/#mybatis-resultmap","title":"MyBatis \u30cd\u30b9\u30c8\u3057\u305f ResultMap \u306b\u3088\u308b\u95a2\u9023\u4ed8\u3051","text":"\u767a\u6ce8\u30c7\u30fc\u30bf\u306e\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\uff08PurchaseOrderMapper.xml\uff09 <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.sms.infrastructure.out.persistence.mapper.PurchaseOrderMapper\"&gt;\n\n    &lt;!-- \u767a\u6ce8\uff08\u30d8\u30c3\u30c0\uff09\u306e ResultMap --&gt;\n    &lt;resultMap id=\"PurchaseOrderWithDetailsResultMap\"\n               type=\"com.example.sms.domain.model.purchase.PurchaseOrder\"&gt;\n        &lt;id property=\"id\" column=\"po_id\"/&gt;\n        &lt;result property=\"purchaseOrderNumber\" column=\"po_\u767a\u6ce8\u756a\u53f7\"/&gt;\n        &lt;result property=\"supplierCode\" column=\"po_\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"orderDate\" column=\"po_\u767a\u6ce8\u65e5\"/&gt;\n        &lt;result property=\"desiredDeliveryDate\" column=\"po_\u5e0c\u671b\u7d0d\u671f\"/&gt;\n        &lt;result property=\"status\" column=\"po_\u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\"\n                typeHandler=\"com.example.sms.infrastructure.out.persistence.typehandler.PurchaseOrderStatusTypeHandler\"/&gt;\n        &lt;result property=\"purchaserCode\" column=\"po_\u767a\u6ce8\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"totalAmount\" column=\"po_\u767a\u6ce8\u5408\u8a08\u91d1\u984d\"/&gt;\n        &lt;result property=\"taxAmount\" column=\"po_\u7a0e\u984d\"/&gt;\n        &lt;result property=\"remarks\" column=\"po_\u5099\u8003\"/&gt;\n        &lt;result property=\"version\" column=\"po_\u30d0\u30fc\u30b8\u30e7\u30f3\"/&gt;\n        &lt;result property=\"createdAt\" column=\"po_\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"po_\u66f4\u65b0\u65e5\u6642\"/&gt;\n        &lt;!-- \u767a\u6ce8\u660e\u7d30\u3068\u306e1:N\u95a2\u9023 --&gt;\n        &lt;collection property=\"details\"\n                    ofType=\"com.example.sms.domain.model.purchase.PurchaseOrderDetail\"\n                    resultMap=\"PurchaseOrderDetailNestedResultMap\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;!-- \u767a\u6ce8\u660e\u7d30\u306e\u30cd\u30b9\u30c8 ResultMap --&gt;\n    &lt;resultMap id=\"PurchaseOrderDetailNestedResultMap\"\n               type=\"com.example.sms.domain.model.purchase.PurchaseOrderDetail\"&gt;\n        &lt;id property=\"id\" column=\"pod_id\"/&gt;\n        &lt;result property=\"purchaseOrderNumber\" column=\"pod_\u767a\u6ce8\u756a\u53f7\"/&gt;\n        &lt;result property=\"lineNumber\" column=\"pod_\u767a\u6ce8\u884c\u756a\u53f7\"/&gt;\n        &lt;result property=\"productCode\" column=\"pod_\u5546\u54c1\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"orderQuantity\" column=\"pod_\u767a\u6ce8\u6570\u91cf\"/&gt;\n        &lt;result property=\"unitPrice\" column=\"pod_\u767a\u6ce8\u5358\u4fa1\"/&gt;\n        &lt;result property=\"orderAmount\" column=\"pod_\u767a\u6ce8\u91d1\u984d\"/&gt;\n        &lt;result property=\"expectedDeliveryDate\" column=\"pod_\u5165\u8377\u4e88\u5b9a\u65e5\"/&gt;\n        &lt;result property=\"receivedQuantity\" column=\"pod_\u5165\u8377\u6e08\u6570\u91cf\"/&gt;\n        &lt;result property=\"remainingQuantity\" column=\"pod_\u6b8b\u6570\u91cf\"/&gt;\n        &lt;result property=\"remarks\" column=\"pod_\u5099\u8003\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;!-- JOIN \u306b\u3088\u308b\u4e00\u62ec\u53d6\u5f97\u30af\u30a8\u30ea --&gt;\n    &lt;select id=\"findWithDetailsByPurchaseOrderNumber\"\n            resultMap=\"PurchaseOrderWithDetailsResultMap\"&gt;\n        SELECT\n            po.\"ID\" AS po_id,\n            po.\"\u767a\u6ce8\u756a\u53f7\" AS po_\u767a\u6ce8\u756a\u53f7,\n            po.\"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\" AS po_\u4ed5\u5165\u5148\u30b3\u30fc\u30c9,\n            po.\"\u767a\u6ce8\u65e5\" AS po_\u767a\u6ce8\u65e5,\n            po.\"\u5e0c\u671b\u7d0d\u671f\" AS po_\u5e0c\u671b\u7d0d\u671f,\n            po.\"\u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\" AS po_\u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9,\n            po.\"\u767a\u6ce8\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\" AS po_\u767a\u6ce8\u62c5\u5f53\u8005\u30b3\u30fc\u30c9,\n            po.\"\u767a\u6ce8\u5408\u8a08\u91d1\u984d\" AS po_\u767a\u6ce8\u5408\u8a08\u91d1\u984d,\n            po.\"\u7a0e\u984d\" AS po_\u7a0e\u984d,\n            po.\"\u5099\u8003\" AS po_\u5099\u8003,\n            po.\"\u30d0\u30fc\u30b8\u30e7\u30f3\" AS po_\u30d0\u30fc\u30b8\u30e7\u30f3,\n            po.\"\u4f5c\u6210\u65e5\u6642\" AS po_\u4f5c\u6210\u65e5\u6642,\n            po.\"\u66f4\u65b0\u65e5\u6642\" AS po_\u66f4\u65b0\u65e5\u6642,\n            pod.\"ID\" AS pod_id,\n            pod.\"\u767a\u6ce8\u756a\u53f7\" AS pod_\u767a\u6ce8\u756a\u53f7,\n            pod.\"\u767a\u6ce8\u884c\u756a\u53f7\" AS pod_\u767a\u6ce8\u884c\u756a\u53f7,\n            pod.\"\u5546\u54c1\u30b3\u30fc\u30c9\" AS pod_\u5546\u54c1\u30b3\u30fc\u30c9,\n            pod.\"\u767a\u6ce8\u6570\u91cf\" AS pod_\u767a\u6ce8\u6570\u91cf,\n            pod.\"\u767a\u6ce8\u5358\u4fa1\" AS pod_\u767a\u6ce8\u5358\u4fa1,\n            pod.\"\u767a\u6ce8\u91d1\u984d\" AS pod_\u767a\u6ce8\u91d1\u984d,\n            pod.\"\u5165\u8377\u4e88\u5b9a\u65e5\" AS pod_\u5165\u8377\u4e88\u5b9a\u65e5,\n            pod.\"\u5165\u8377\u6e08\u6570\u91cf\" AS pod_\u5165\u8377\u6e08\u6570\u91cf,\n            pod.\"\u6b8b\u6570\u91cf\" AS pod_\u6b8b\u6570\u91cf,\n            pod.\"\u5099\u8003\" AS pod_\u5099\u8003\n        FROM \"\u767a\u6ce8\u30c7\u30fc\u30bf\" po\n        LEFT JOIN \"\u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\" pod\n            ON po.\"\u767a\u6ce8\u756a\u53f7\" = pod.\"\u767a\u6ce8\u756a\u53f7\"\n        WHERE po.\"\u767a\u6ce8\u756a\u53f7\" = #{purchaseOrderNumber}\n        ORDER BY pod.\"\u767a\u6ce8\u884c\u756a\u53f7\"\n    &lt;/select&gt;\n\n&lt;/mapper&gt;\n</code></pre>"},{"location":"article/part2/chapter08/#_17","title":"\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\u306e\u30dd\u30a4\u30f3\u30c8","text":"\u8a2d\u5b9a\u9805\u76ee \u8aac\u660e <code>&lt;collection&gt;</code> 1:N \u95a2\u9023\u306e\u30de\u30c3\u30d4\u30f3\u30b0 <code>&lt;id&gt;</code> \u4e3b\u30ad\u30fc\u306e\u8b58\u5225\uff08MyBatis \u304c\u91cd\u8907\u6392\u9664\u306b\u4f7f\u7528\uff09 <code>resultMap</code> \u30cd\u30b9\u30c8\u3057\u305f ResultMap \u306e\u53c2\u7167 \u30a8\u30a4\u30ea\u30a2\u30b9\uff08AS\uff09 \u30ab\u30e9\u30e0\u540d\u306e\u91cd\u8907\u3092\u907f\u3051\u308b\u305f\u3081\u306e\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9 <code>ORDER BY</code> \u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306e\u9806\u5e8f\u3092\u4fdd\u8a3c"},{"location":"article/part2/chapter08/#optimistic-locking","title":"\u697d\u89b3\u30ed\u30c3\u30af\uff08Optimistic Locking\uff09\u306e\u5b9f\u88c5","text":"<p>\u8907\u6570\u30e6\u30fc\u30b6\u30fc\u304c\u540c\u6642\u306b\u767a\u6ce8\u30c7\u30fc\u30bf\u3084\u5165\u8377\u30c7\u30fc\u30bf\u3092\u7de8\u96c6\u3059\u308b\u5834\u5408\u3001\u30c7\u30fc\u30bf\u306e\u6574\u5408\u6027\u3092\u4fdd\u3064\u305f\u3081\u306b\u697d\u89b3\u30ed\u30c3\u30af\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter08/#_18","title":"\u30d0\u30fc\u30b8\u30e7\u30f3\u30ab\u30e9\u30e0\u306b\u3088\u308b\u540c\u6642\u66f4\u65b0\u5236\u5fa1","text":"\u697d\u89b3\u30ed\u30c3\u30af\u5bfe\u5fdc\u306e MyBatis Mapper <pre><code>&lt;!-- \u697d\u89b3\u30ed\u30c3\u30af\u5bfe\u5fdc\u306e\u66f4\u65b0\uff08\u30d0\u30fc\u30b8\u30e7\u30f3\u30c1\u30a7\u30c3\u30af\u4ed8\u304d\uff09 --&gt;\n&lt;update id=\"updateWithOptimisticLock\"\n        parameterType=\"com.example.sms.domain.model.purchase.PurchaseOrder\"&gt;\n    UPDATE \"\u767a\u6ce8\u30c7\u30fc\u30bf\"\n    SET\n        \"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\" = #{supplierCode},\n        \"\u767a\u6ce8\u65e5\" = #{orderDate},\n        \"\u5e0c\u671b\u7d0d\u671f\" = #{desiredDeliveryDate},\n        \"\u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\" = #{status,\n            typeHandler=com.example.sms.infrastructure.out.persistence.typehandler.PurchaseOrderStatusTypeHandler}::\u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9,\n        \"\u767a\u6ce8\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\" = #{purchaserCode},\n        \"\u767a\u6ce8\u5408\u8a08\u91d1\u984d\" = #{totalAmount},\n        \"\u7a0e\u984d\" = #{taxAmount},\n        \"\u5099\u8003\" = #{remarks},\n        \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP,\n        \"\u30d0\u30fc\u30b8\u30e7\u30f3\" = \"\u30d0\u30fc\u30b8\u30e7\u30f3\" + 1\n    WHERE \"\u767a\u6ce8\u756a\u53f7\" = #{purchaseOrderNumber}\n    AND \"\u30d0\u30fc\u30b8\u30e7\u30f3\" = #{version}\n&lt;/update&gt;\n\n&lt;!-- \u697d\u89b3\u30ed\u30c3\u30af\u5bfe\u5fdc\u306e\u524a\u9664 --&gt;\n&lt;delete id=\"deleteWithOptimisticLock\"&gt;\n    DELETE FROM \"\u767a\u6ce8\u30c7\u30fc\u30bf\"\n    WHERE \"\u767a\u6ce8\u756a\u53f7\" = #{purchaseOrderNumber}\n    AND \"\u30d0\u30fc\u30b8\u30e7\u30f3\" = #{version}\n&lt;/delete&gt;\n</code></pre> Repository \u5b9f\u88c5\uff1a\u697d\u89b3\u30ed\u30c3\u30af\u5bfe\u5fdc <pre><code>// src/main/java/com/example/sms/infrastructure/out/persistence/repository/PurchaseOrderRepositoryImpl.java\npackage com.example.sms.infrastructure.out.persistence.repository;\n\nimport com.example.sms.application.port.out.PurchaseOrderRepository;\nimport com.example.sms.domain.exception.OptimisticLockException;\nimport com.example.sms.domain.model.purchase.PurchaseOrder;\nimport com.example.sms.domain.model.purchase.PurchaseOrderDetail;\nimport com.example.sms.infrastructure.out.persistence.mapper.PurchaseOrderMapper;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Repository;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.util.Optional;\n\n/**\n * \u767a\u6ce8\u30ea\u30dd\u30b8\u30c8\u30ea\u5b9f\u88c5.\n */\n@Repository\n@RequiredArgsConstructor\npublic class PurchaseOrderRepositoryImpl implements PurchaseOrderRepository {\n\n    private final PurchaseOrderMapper purchaseOrderMapper;\n\n    @Override\n    public void save(PurchaseOrder purchaseOrder) {\n        purchaseOrderMapper.insertHeader(purchaseOrder);\n        if (purchaseOrder.getDetails() != null) {\n            for (PurchaseOrderDetail detail : purchaseOrder.getDetails()) {\n                detail.setPurchaseOrderId(purchaseOrder.getId());\n                purchaseOrderMapper.insertDetail(detail);\n            }\n        }\n    }\n\n    @Override\n    public Optional&lt;PurchaseOrder&gt; findByPurchaseOrderNumber(String purchaseOrderNumber) {\n        return purchaseOrderMapper.findByPurchaseOrderNumber(purchaseOrderNumber);\n    }\n\n    @Override\n    public Optional&lt;PurchaseOrder&gt; findWithDetailsByPurchaseOrderNumber(String purchaseOrderNumber) {\n        return Optional.ofNullable(purchaseOrderMapper.findWithDetailsByPurchaseOrderNumber(purchaseOrderNumber));\n    }\n\n    /**\n     * \u697d\u89b3\u30ed\u30c3\u30af\u5bfe\u5fdc\u306e\u66f4\u65b0.\n     * @throws OptimisticLockException \u4ed6\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u3088\u3063\u3066\u66f4\u65b0\u3055\u308c\u305f\u5834\u5408\n     */\n    @Override\n    @Transactional\n    public void update(PurchaseOrder purchaseOrder) {\n        int updatedCount = purchaseOrderMapper.updateWithOptimisticLock(purchaseOrder);\n\n        if (updatedCount == 0) {\n            // \u30d0\u30fc\u30b8\u30e7\u30f3\u4e0d\u4e00\u81f4\u307e\u305f\u306f\u524a\u9664\u6e08\u307f\n            Integer currentVersion = purchaseOrderMapper.findVersionById(purchaseOrder.getId());\n            if (currentVersion == null) {\n                throw new OptimisticLockException(\"\u767a\u6ce8\", purchaseOrder.getId());\n            } else {\n                throw new OptimisticLockException(\"\u767a\u6ce8\", purchaseOrder.getId(),\n                        purchaseOrder.getVersion(), currentVersion);\n            }\n        }\n\n        purchaseOrderMapper.deleteDetailsByPurchaseOrderId(purchaseOrder.getId());\n        if (purchaseOrder.getDetails() != null) {\n            for (PurchaseOrderDetail detail : purchaseOrder.getDetails()) {\n                detail.setPurchaseOrderId(purchaseOrder.getId());\n                purchaseOrderMapper.insertDetail(detail);\n            }\n        }\n    }\n\n    @Override\n    public void deleteById(Integer id) {\n        purchaseOrderMapper.deleteById(id);\n    }\n\n    @Override\n    public void deleteAll() {\n        purchaseOrderMapper.deleteAll();\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter08/#_19","title":"\u697d\u89b3\u30ed\u30c3\u30af\u306e\u30c6\u30b9\u30c8","text":"\u697d\u89b3\u30ed\u30c3\u30af\u306e\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9 <pre><code>@Nested\n@DisplayName(\"\u697d\u89b3\u30ed\u30c3\u30af\")\nclass OptimisticLocking {\n\n    @Test\n    @DisplayName(\"\u540c\u3058\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u66f4\u65b0\u3067\u304d\u308b\")\n    void canUpdateWithSameVersion() {\n        var purchaseOrder = createPurchaseOrder(\"PO-2025-0001\", LocalDate.of(2025, 1, 15));\n        purchaseOrderRepository.save(purchaseOrder);\n\n        var fetched = purchaseOrderRepository.findByPurchaseOrderNumber(\"PO-2025-0001\").get();\n        fetched.setStatus(PurchaseOrderStatus.CONFIRMED);\n        purchaseOrderRepository.update(fetched);\n\n        var updated = purchaseOrderRepository.findByPurchaseOrderNumber(\"PO-2025-0001\").get();\n        assertThat(updated.getStatus()).isEqualTo(PurchaseOrderStatus.CONFIRMED);\n        assertThat(updated.getVersion()).isEqualTo(2);\n    }\n\n    @Test\n    @DisplayName(\"\u7570\u306a\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u66f4\u65b0\u3059\u308b\u3068\u697d\u89b3\u30ed\u30c3\u30af\u4f8b\u5916\u304c\u767a\u751f\u3059\u308b\")\n    void throwsExceptionWhenVersionMismatch() {\n        var purchaseOrder = createPurchaseOrder(\"PO-2025-0002\", LocalDate.of(2025, 1, 15));\n        purchaseOrderRepository.save(purchaseOrder);\n\n        var poA = purchaseOrderRepository.findByPurchaseOrderNumber(\"PO-2025-0002\").get();\n        var poB = purchaseOrderRepository.findByPurchaseOrderNumber(\"PO-2025-0002\").get();\n\n        poA.setStatus(PurchaseOrderStatus.CONFIRMED);\n        purchaseOrderRepository.update(poA);\n\n        poB.setStatus(PurchaseOrderStatus.CANCELLED);\n        assertThatThrownBy(() -&gt; purchaseOrderRepository.update(poB))\n                .isInstanceOf(OptimisticLockException.class)\n                .hasMessageContaining(\"\u4ed6\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u3088\u3063\u3066\u66f4\u65b0\u3055\u308c\u3066\u3044\u307e\u3059\");\n    }\n\n    @Test\n    @DisplayName(\"\u524a\u9664\u3055\u308c\u305f\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u66f4\u65b0\u3059\u308b\u3068\u697d\u89b3\u30ed\u30c3\u30af\u4f8b\u5916\u304c\u767a\u751f\u3059\u308b\")\n    void throwsExceptionWhenEntityDeleted() {\n        var purchaseOrder = createPurchaseOrder(\"PO-2025-0003\", LocalDate.of(2025, 1, 15));\n        purchaseOrderRepository.save(purchaseOrder);\n\n        var fetched = purchaseOrderRepository.findByPurchaseOrderNumber(\"PO-2025-0003\").get();\n        purchaseOrderRepository.deleteById(fetched.getId());\n\n        fetched.setStatus(PurchaseOrderStatus.CONFIRMED);\n        assertThatThrownBy(() -&gt; purchaseOrderRepository.update(fetched))\n                .isInstanceOf(OptimisticLockException.class)\n                .hasMessageContaining(\"\u65e2\u306b\u524a\u9664\u3055\u308c\u3066\u3044\u307e\u3059\");\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter08/#_20","title":"\u697d\u89b3\u30ed\u30c3\u30af\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","text":"\u30dd\u30a4\u30f3\u30c8 \u8aac\u660e \u30d0\u30fc\u30b8\u30e7\u30f3\u30ab\u30e9\u30e0 INTEGER \u578b\u3067\u5341\u5206\uff08\u30aa\u30fc\u30d0\u30fc\u30d5\u30ed\u30fc\u306f\u73fe\u5b9f\u7684\u306b\u767a\u751f\u3057\u306a\u3044\uff09 WHERE \u6761\u4ef6 \u5fc5\u305a <code>AND \"\u30d0\u30fc\u30b8\u30e7\u30f3\" = #{version}</code> \u3092\u542b\u3081\u308b \u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8 <code>\"\u30d0\u30fc\u30b8\u30e7\u30f3\" = \"\u30d0\u30fc\u30b8\u30e7\u30f3\" + 1</code> \u3067\u30a2\u30c8\u30df\u30c3\u30af\u306b\u66f4\u65b0 \u4f8b\u5916\u51e6\u7406 \u66f4\u65b0\u4ef6\u6570\u304c0\u306e\u5834\u5408\u306f\u697d\u89b3\u30ed\u30c3\u30af\u4f8b\u5916\u3092\u30b9\u30ed\u30fc \u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8 \u30e6\u30fc\u30b6\u30fc\u306b\u308f\u304b\u308a\u3084\u3059\u3044\u30e1\u30c3\u30bb\u30fc\u30b8\u3067\u518d\u8aad\u307f\u8fbc\u307f\u3092\u4fc3\u3059"},{"location":"article/part2/chapter08/#8_1","title":"\u7b2c8\u7ae0\u306e\u307e\u3068\u3081","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u8abf\u9054\u7ba1\u7406\u306e\u6838\u5fc3\u90e8\u5206\u3067\u3042\u308b\u767a\u6ce8\u30fb\u5165\u8377\u30fb\u4ed5\u5165\u51e6\u7406\u306b\u3064\u3044\u3066\u5b66\u3073\u307e\u3057\u305f\u3002</p>"},{"location":"article/part2/chapter08/#_21","title":"\u5b66\u3093\u3060\u3053\u3068","text":"<ol> <li>\u8abf\u9054\u30d1\u30bf\u30fc\u30f3\u306e\u7406\u89e3</li> <li> <p>\u5728\u5eab\u88dc\u5145\u767a\u6ce8\u3001\u53d7\u6ce8\u9023\u52d5\u767a\u6ce8\u3001\u8a08\u753b\u767a\u6ce8\u3001\u30b9\u30dd\u30c3\u30c8\u767a\u6ce8</p> </li> <li> <p>\u767a\u6ce8\u30c7\u30fc\u30bf\u306e\u69cb\u9020</p> </li> <li>\u30d8\u30c3\u30c0\u30fb\u660e\u7d30\u69cb\u9020</li> <li>\u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\u7ba1\u7406</li> <li> <p>\u4ed5\u5165\u5148\u30de\u30b9\u30bf\u3068\u306e\u9023\u643a</p> </li> <li> <p>\u5165\u8377\u30fb\u691c\u53ce\u51e6\u7406</p> </li> <li>\u5165\u8377\u691c\u54c1\u306e\u30d5\u30ed\u30fc</li> <li>\u5408\u683c/\u4e0d\u5408\u683c\u6570\u91cf\u306e\u7ba1\u7406</li> <li> <p>\u4ed5\u5165\u8a08\u4e0a\u3068\u8cb7\u639b\u91d1\u767a\u751f</p> </li> <li> <p>\u8af8\u53e3\u54c1\u76ee\u306e\u6271\u3044</p> </li> <li> <p>\u5546\u54c1\u30de\u30b9\u30bf\u306b\u767b\u9332\u3057\u306a\u3044\u54c1\u76ee\u306e\u51e6\u7406</p> </li> <li> <p>\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3068\u697d\u89b3\u30ed\u30c3\u30af</p> </li> <li>N+1 \u554f\u984c\u306e\u56de\u907f</li> <li>\u540c\u6642\u66f4\u65b0\u306e\u7af6\u5408\u5236\u5fa1</li> </ol>"},{"location":"article/part2/chapter08/#er_2","title":"\u8abf\u9054\u7ba1\u7406\u306e ER \u56f3\uff08\u5168\u4f53\u50cf\uff09","text":""},{"location":"article/part2/chapter08/#_22","title":"\u6b21\u7ae0\u306e\u4e88\u544a","text":"<p>\u7b2c9\u7ae0\u3067\u306f\u3001\u5728\u5eab\u7ba1\u7406\u306e\u8a2d\u8a08\u306b\u9032\u307f\u307e\u3059\u3002\u5009\u5eab\u5225\u30fb\u5546\u54c1\u5225\u306e\u5728\u5eab\u7ba1\u7406\u3001\u5f15\u5f53\u51e6\u7406\u3001\u68da\u5378\u696d\u52d9\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\u3068\u5b9f\u88c5\u3092\u884c\u3044\u307e\u3059\u3002</p> <p>\u2190 \u7b2c7\u7ae0\uff1a\u50b5\u6a29\u7ba1\u7406\u306e\u8a2d\u8a08 | \u7b2c9\u7ae0\uff1a\u5728\u5eab\u7ba1\u7406\u306e\u8a2d\u8a08 \u2192</p>"},{"location":"article/part2/chapter09/","title":"\u7b2c9\u7ae0\uff1a\u5728\u5eab\u7ba1\u7406\u306e\u8a2d\u8a08","text":"<p>\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306b\u304a\u3044\u3066\u3001\u5728\u5eab\u7ba1\u7406\u306f\u5546\u54c1\u306e\u7269\u7406\u7684\u306a\u72b6\u614b\u3092\u8ffd\u8de1\u3057\u3001\u9069\u6b63\u5728\u5eab\u3092\u7dad\u6301\u3059\u308b\u305f\u3081\u306e\u91cd\u8981\u306a\u6a5f\u80fd\u3067\u3059\u3002\u672c\u7ae0\u3067\u306f\u3001\u5009\u5eab\u5225\u30fb\u5546\u54c1\u5225\u306e\u5728\u5eab\u7ba1\u7406\u3001\u5f15\u5f53\u51e6\u7406\u3001\u5165\u51fa\u5eab\u5c65\u6b74\u3001\u68da\u5378\u696d\u52d9\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\u3068\u5b9f\u88c5\u3092\u884c\u3044\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter09/#_1","title":"\u5728\u5eab\u7ba1\u7406\u306e\u5168\u4f53\u50cf","text":"<p>\u5728\u5eab\u7ba1\u7406\u306f\u300c\u5165\u5eab \u2192 \u5728\u5eab\u4fdd\u7ba1 \u2192 \u5f15\u5f53 \u2192 \u51fa\u5eab\u300d\u3068\u3044\u3046\u4e00\u9023\u306e\u30d5\u30ed\u30fc\u3067\u69cb\u6210\u3055\u308c\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter09/#_2","title":"\u5728\u5eab\u7ba1\u7406\u3067\u6271\u3046\u30c7\u30fc\u30bf","text":"\u30c7\u30fc\u30bf \u8aac\u660e \u5728\u5eab\u30c7\u30fc\u30bf \u5009\u5eab\u00d7\u5546\u54c1\u306e\u73fe\u5728\u306e\u5728\u5eab\u72b6\u614b \u5165\u51fa\u5eab\u5c65\u6b74 \u5728\u5eab\u306e\u5897\u6e1b\u3092\u6642\u7cfb\u5217\u3067\u8a18\u9332 \u68da\u5378\u30c7\u30fc\u30bf \u68da\u5378\u4f5c\u696d\u306e\u7ba1\u7406\u60c5\u5831 \u68da\u5378\u660e\u7d30 \u5546\u54c1\u3054\u3068\u306e\u5e33\u7c3f\u5728\u5eab\u3068\u5b9f\u68da\u6570"},{"location":"article/part2/chapter09/#91-db","title":"9.1 \u5728\u5eab\u60c5\u5831\u306e DB \u8a2d\u8a08","text":""},{"location":"article/part2/chapter09/#_3","title":"\u5728\u5eab\u6570\u91cf\u306e\u7a2e\u985e","text":"<p>\u5728\u5eab\u7ba1\u7406\u3067\u306f\u300c\u5009\u5eab\u30b3\u30fc\u30c9 \u00d7 \u5546\u54c1\u30b3\u30fc\u30c9\u300d\u306e\u7d44\u307f\u5408\u308f\u305b\u3067\u5728\u5eab\u3092\u7ba1\u7406\u3057\u307e\u3059\u3002</p> <p></p> \u6570\u91cf\u7a2e\u5225 \u8aac\u660e \u8a08\u7b97\u5f0f \u73fe\u5728\u5eab\u6570 \u7269\u7406\u7684\u306b\u5009\u5eab\u306b\u3042\u308b\u6570\u91cf \u5165\u5eab\u6570 - \u51fa\u5eab\u6570 \u5f15\u5f53\u6570 \u53d7\u6ce8\u7b49\u3067\u78ba\u4fdd\u6e08\u307f\u306e\u6570\u91cf \u53d7\u6ce8\u5f15\u5f53\u306e\u5408\u8a08 \u6709\u52b9\u5728\u5eab\u6570 \u5b9f\u969b\u306b\u5229\u7528\u53ef\u80fd\u306a\u6570\u91cf \u73fe\u5728\u5eab\u6570 - \u5f15\u5f53\u6570 \u767a\u6ce8\u6b8b\u6570 \u767a\u6ce8\u6e08\u307f\u3067\u672a\u5165\u8377\u306e\u6570\u91cf \u767a\u6ce8\u6570 - \u5165\u8377\u6570 \u4e88\u5b9a\u5728\u5eab\u6570 \u5c06\u6765\u7684\u306b\u5229\u7528\u53ef\u80fd\u306a\u898b\u8fbc\u307f \u6709\u52b9\u5728\u5eab\u6570 + \u767a\u6ce8\u6b8b\u6570"},{"location":"article/part2/chapter09/#_4","title":"\u5009\u5eab\u30de\u30b9\u30bf\u306e\u8a2d\u8a08","text":""},{"location":"article/part2/chapter09/#_5","title":"\u5009\u5eab\u533a\u5206\u306e\u5b9a\u7fa9","text":"\u5009\u5eab\u533a\u5206 \u8aac\u660e \u81ea\u793e \u81ea\u793e\u6240\u6709\u30fb\u7ba1\u7406\u306e\u5009\u5eab \u5916\u90e8 \u5916\u90e8\u59d4\u8a17\uff083PL\uff09\u306e\u5009\u5eab \u4eee\u60f3 \u8f38\u9001\u4e2d\u3001\u9810\u3051\u5728\u5eab\u306a\u3069"},{"location":"article/part2/chapter09/#_6","title":"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff1a\u5009\u5eab\u30fb\u5728\u5eab\u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210","text":"V015__create_inventory_tables.sql <pre><code>-- src/main/resources/db/migration/V015__create_inventory_tables.sql\n\n-- \u5009\u5eab\u533a\u5206\nCREATE TYPE \u5009\u5eab\u533a\u5206 AS ENUM ('\u81ea\u793e', '\u5916\u90e8', '\u4eee\u60f3');\n\n-- \u5009\u5eab\u30de\u30b9\u30bf\u306b\u5009\u5eab\u533a\u5206\u30ab\u30e9\u30e0\u3092\u8ffd\u52a0\n-- \uff08V013\u3067\u4f5c\u6210\u6e08\u307f\u306e\u5009\u5eab\u30de\u30b9\u30bf\u306b\u30ab\u30e9\u30e0\u8ffd\u52a0\uff09\nALTER TABLE \"\u5009\u5eab\u30de\u30b9\u30bf\" ADD COLUMN \"\u5009\u5eab\u533a\u5206\" \u5009\u5eab\u533a\u5206 DEFAULT '\u81ea\u793e' NOT NULL;\n\n-- \u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u30de\u30b9\u30bf\nCREATE TABLE \"\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u30de\u30b9\u30bf\" (\n    \"\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u30b3\u30fc\u30c9\" VARCHAR(20) PRIMARY KEY,\n    \"\u5009\u5eab\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u68da\u756a\" VARCHAR(20) NOT NULL,\n    \"\u30be\u30fc\u30f3\" VARCHAR(10),\n    \"\u901a\u8def\" VARCHAR(10),\n    \"\u30e9\u30c3\u30af\" VARCHAR(10),\n    \"\u6bb5\" VARCHAR(10),\n    \"\u9593\u53e3\" VARCHAR(10),\n    \"\u6709\u52b9\u30d5\u30e9\u30b0\" BOOLEAN DEFAULT true NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u8005\" VARCHAR(50),\n    CONSTRAINT \"fk_\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3_\u5009\u5eab\"\n        FOREIGN KEY (\"\u5009\u5eab\u30b3\u30fc\u30c9\") REFERENCES \"\u5009\u5eab\u30de\u30b9\u30bf\"(\"\u5009\u5eab\u30b3\u30fc\u30c9\"),\n    UNIQUE (\"\u5009\u5eab\u30b3\u30fc\u30c9\", \"\u68da\u756a\")\n);\n\n-- \u5728\u5eab\u30c7\u30fc\u30bf\uff08\u5009\u5eab \u00d7 \u5546\u54c1\uff09\nCREATE TABLE \"\u5728\u5eab\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u5009\u5eab\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u5546\u54c1\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u30b3\u30fc\u30c9\" VARCHAR(20),\n    \"\u73fe\u5728\u5eab\u6570\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u5f15\u5f53\u6570\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u767a\u6ce8\u6b8b\u6570\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u6700\u7d42\u5165\u5eab\u65e5\" DATE,\n    \"\u6700\u7d42\u51fa\u5eab\u65e5\" DATE,\n    \"\u30ed\u30c3\u30c8\u756a\u53f7\" VARCHAR(50),\n    \"\u30b7\u30ea\u30a2\u30eb\u756a\u53f7\" VARCHAR(50),\n    \"\u6709\u52b9\u671f\u9650\" DATE,\n    \"\u30d0\u30fc\u30b8\u30e7\u30f3\" INTEGER DEFAULT 1 NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u8005\" VARCHAR(50),\n    CONSTRAINT \"fk_\u5728\u5eab_\u5009\u5eab\"\n        FOREIGN KEY (\"\u5009\u5eab\u30b3\u30fc\u30c9\") REFERENCES \"\u5009\u5eab\u30de\u30b9\u30bf\"(\"\u5009\u5eab\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"fk_\u5728\u5eab_\u5546\u54c1\"\n        FOREIGN KEY (\"\u5546\u54c1\u30b3\u30fc\u30c9\") REFERENCES \"\u5546\u54c1\u30de\u30b9\u30bf\"(\"\u5546\u54c1\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"fk_\u5728\u5eab_\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\"\n        FOREIGN KEY (\"\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u30b3\u30fc\u30c9\") REFERENCES \"\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u30de\u30b9\u30bf\"(\"\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u30b3\u30fc\u30c9\"),\n    UNIQUE (\"\u5009\u5eab\u30b3\u30fc\u30c9\", \"\u5546\u54c1\u30b3\u30fc\u30c9\", \"\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u30b3\u30fc\u30c9\", \"\u30ed\u30c3\u30c8\u756a\u53f7\")\n);\n\n-- \u6709\u52b9\u5728\u5eab\u6570\u3092\u8a08\u7b97\u3059\u308b\u30d3\u30e5\u30fc\nCREATE VIEW \"\u6709\u52b9\u5728\u5eab\u30d3\u30e5\u30fc\" AS\nSELECT\n    \"\u5009\u5eab\u30b3\u30fc\u30c9\",\n    \"\u5546\u54c1\u30b3\u30fc\u30c9\",\n    \"\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u30b3\u30fc\u30c9\",\n    \"\u73fe\u5728\u5eab\u6570\",\n    \"\u5f15\u5f53\u6570\",\n    \"\u73fe\u5728\u5eab\u6570\" - \"\u5f15\u5f53\u6570\" AS \"\u6709\u52b9\u5728\u5eab\u6570\",\n    \"\u767a\u6ce8\u6b8b\u6570\",\n    \"\u73fe\u5728\u5eab\u6570\" - \"\u5f15\u5f53\u6570\" + \"\u767a\u6ce8\u6b8b\u6570\" AS \"\u4e88\u5b9a\u5728\u5eab\u6570\"\nFROM \"\u5728\u5eab\u30c7\u30fc\u30bf\";\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"idx_\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3_\u5009\u5eab\" ON \"\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u30de\u30b9\u30bf\"(\"\u5009\u5eab\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u5728\u5eab_\u5009\u5eab\u30b3\u30fc\u30c9\" ON \"\u5728\u5eab\u30c7\u30fc\u30bf\"(\"\u5009\u5eab\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u5728\u5eab_\u5546\u54c1\u30b3\u30fc\u30c9\" ON \"\u5728\u5eab\u30c7\u30fc\u30bf\"(\"\u5546\u54c1\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u5728\u5eab_\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\" ON \"\u5728\u5eab\u30c7\u30fc\u30bf\"(\"\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u5728\u5eab_\u30ed\u30c3\u30c8\u756a\u53f7\" ON \"\u5728\u5eab\u30c7\u30fc\u30bf\"(\"\u30ed\u30c3\u30c8\u756a\u53f7\");\nCREATE INDEX \"idx_\u5728\u5eab_\u6709\u52b9\u671f\u9650\" ON \"\u5728\u5eab\u30c7\u30fc\u30bf\"(\"\u6709\u52b9\u671f\u9650\");\n\n-- \u30c6\u30fc\u30d6\u30eb\u30b3\u30e1\u30f3\u30c8\nCOMMENT ON TABLE \"\u5009\u5eab\u30de\u30b9\u30bf\" IS '\u5009\u5eab\u60c5\u5831\u3092\u7ba1\u7406\u3059\u308b\u30de\u30b9\u30bf\u30c6\u30fc\u30d6\u30eb';\nCOMMENT ON TABLE \"\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u30de\u30b9\u30bf\" IS '\u5009\u5eab\u5185\u306e\u68da\u30fb\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u60c5\u5831\u3092\u7ba1\u7406\u3059\u308b\u30c6\u30fc\u30d6\u30eb';\nCOMMENT ON TABLE \"\u5728\u5eab\u30c7\u30fc\u30bf\" IS '\u5009\u5eab\u00d7\u5546\u54c1\u306e\u5728\u5eab\u60c5\u5831\u3092\u7ba1\u7406\u3059\u308b\u30c6\u30fc\u30d6\u30eb';\nCOMMENT ON COLUMN \"\u5728\u5eab\u30c7\u30fc\u30bf\".\"\u30d0\u30fc\u30b8\u30e7\u30f3\" IS '\u697d\u89b3\u30ed\u30c3\u30af\u7528\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7';\n</code></pre>"},{"location":"article/part2/chapter09/#_7","title":"\u5009\u5eab\u30fb\u5728\u5eab\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u5b9f\u88c5","text":"\u5009\u5eab\u533a\u5206 ENUM <pre><code>// src/main/java/com/example/sales/domain/model/inventory/WarehouseType.java\npackage com.example.sms.domain.model.inventory;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum WarehouseType {\n    OWN(\"\u81ea\u793e\"),\n    EXTERNAL(\"\u5916\u90e8\"),\n    VIRTUAL(\"\u4eee\u60f3\");\n\n    private final String displayName;\n\n    public static WarehouseType fromDisplayName(String displayName) {\n        for (WarehouseType type : values()) {\n            if (type.displayName.equals(displayName)) {\n                return type;\n            }\n        }\n        throw new IllegalArgumentException(\"Unknown warehouse type: \" + displayName);\n    }\n}\n</code></pre> \u5009\u5eab\u30de\u30b9\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/sales/domain/model/inventory/Warehouse.java\npackage com.example.sms.domain.model.inventory;\n\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\npublic class Warehouse {\n    private String warehouseCode;\n    private String warehouseName;\n    private WarehouseType warehouseType;\n    private String postalCode;\n    private String address;\n    private String phoneNumber;\n    private Boolean activeFlag;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n\n    /**\n     * \u81ea\u793e\u5009\u5eab\u304b\u3069\u3046\u304b\n     */\n    public boolean isOwnWarehouse() {\n        return this.warehouseType == WarehouseType.OWN;\n    }\n\n    /**\n     * \u4eee\u60f3\u5009\u5eab\u304b\u3069\u3046\u304b\n     */\n    public boolean isVirtualWarehouse() {\n        return this.warehouseType == WarehouseType.VIRTUAL;\n    }\n}\n</code></pre> \u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u30de\u30b9\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/sales/domain/model/inventory/Location.java\npackage com.example.sms.domain.model.inventory;\n\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\npublic class Location {\n    private String locationCode;\n    private String warehouseCode;\n    private String shelfNumber;\n    private String zone;\n    private String aisle;\n    private String rack;\n    private String level;\n    private String bay;\n    private Boolean activeFlag;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n\n    // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n    private Warehouse warehouse;\n\n    /**\n     * \u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5b8c\u5168\u8868\u8a18\u3092\u53d6\u5f97\n     * \u4f8b: A-01-02-03-04\n     */\n    public String getFullAddress() {\n        StringBuilder sb = new StringBuilder();\n        if (zone != null) sb.append(zone).append(\"-\");\n        if (aisle != null) sb.append(aisle).append(\"-\");\n        if (rack != null) sb.append(rack).append(\"-\");\n        if (level != null) sb.append(level).append(\"-\");\n        if (bay != null) sb.append(bay);\n        return sb.toString().replaceAll(\"-$\", \"\");\n    }\n}\n</code></pre> \u5728\u5eab\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/sales/domain/model/inventory/Inventory.java\npackage com.example.sms.domain.model.inventory;\n\nimport com.example.sms.domain.model.product.Product;\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\npublic class Inventory {\n    private Integer id;\n    private String warehouseCode;\n    private String productCode;\n    private String locationCode;\n    private BigDecimal currentQuantity;\n    private BigDecimal allocatedQuantity;\n    private BigDecimal orderedQuantity;\n    private LocalDate lastReceiptDate;\n    private LocalDate lastShipmentDate;\n    private String lotNumber;\n    private String serialNumber;\n    private LocalDate expirationDate;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n\n    // \u697d\u89b3\u30ed\u30c3\u30af\u7528\u30d0\u30fc\u30b8\u30e7\u30f3\n    @Builder.Default\n    private Integer version = 1;\n\n    // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n    private Warehouse warehouse;\n    private Product product;\n    private Location location;\n\n    /**\n     * \u6709\u52b9\u5728\u5eab\u6570\u3092\u8a08\u7b97\n     */\n    public BigDecimal getAvailableQuantity() {\n        return currentQuantity.subtract(allocatedQuantity);\n    }\n\n    /**\n     * \u4e88\u5b9a\u5728\u5eab\u6570\u3092\u8a08\u7b97\n     */\n    public BigDecimal getProjectedQuantity() {\n        return currentQuantity.subtract(allocatedQuantity).add(orderedQuantity);\n    }\n\n    /**\n     * \u5f15\u5f53\u53ef\u80fd\u304b\u3069\u3046\u304b\u3092\u5224\u5b9a\n     */\n    public boolean canAllocate(BigDecimal quantity) {\n        return getAvailableQuantity().compareTo(quantity) &gt;= 0;\n    }\n\n    /**\n     * \u5728\u5eab\u3092\u5f15\u5f53\n     */\n    public void allocate(BigDecimal quantity) {\n        if (!canAllocate(quantity)) {\n            throw new IllegalStateException(\n                \"\u6709\u52b9\u5728\u5eab\u6570\u304c\u4e0d\u8db3\u3057\u3066\u3044\u307e\u3059\u3002\u6709\u52b9\u5728\u5eab: \" + getAvailableQuantity() +\n                \", \u5f15\u5f53\u8981\u6c42: \" + quantity);\n        }\n        this.allocatedQuantity = this.allocatedQuantity.add(quantity);\n    }\n\n    /**\n     * \u5f15\u5f53\u3092\u89e3\u9664\n     */\n    public void deallocate(BigDecimal quantity) {\n        if (this.allocatedQuantity.compareTo(quantity) &lt; 0) {\n            throw new IllegalStateException(\n                \"\u5f15\u5f53\u6570\u3092\u8d85\u3048\u308b\u89e3\u9664\u306f\u3067\u304d\u307e\u305b\u3093\u3002\u5f15\u5f53\u6570: \" + this.allocatedQuantity +\n                \", \u89e3\u9664\u8981\u6c42: \" + quantity);\n        }\n        this.allocatedQuantity = this.allocatedQuantity.subtract(quantity);\n    }\n\n    /**\n     * \u5165\u5eab\u51e6\u7406\n     */\n    public void receive(BigDecimal quantity) {\n        this.currentQuantity = this.currentQuantity.add(quantity);\n        this.lastReceiptDate = LocalDate.now();\n    }\n\n    /**\n     * \u51fa\u5eab\u51e6\u7406\n     */\n    public void ship(BigDecimal quantity) {\n        if (this.currentQuantity.compareTo(quantity) &lt; 0) {\n            throw new IllegalStateException(\n                \"\u73fe\u5728\u5eab\u6570\u304c\u4e0d\u8db3\u3057\u3066\u3044\u307e\u3059\u3002\u73fe\u5728\u5eab: \" + this.currentQuantity +\n                \", \u51fa\u5eab\u8981\u6c42: \" + quantity);\n        }\n        this.currentQuantity = this.currentQuantity.subtract(quantity);\n        this.lastShipmentDate = LocalDate.now();\n    }\n\n    /**\n     * \u6709\u52b9\u671f\u9650\u5207\u308c\u304b\u3069\u3046\u304b\n     */\n    public boolean isExpired() {\n        if (expirationDate == null) {\n            return false;\n        }\n        return expirationDate.isBefore(LocalDate.now());\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter09/#_8","title":"\u5728\u5eab\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":"\u5728\u5eab\u30b5\u30fc\u30d3\u30b9 <pre><code>// src/main/java/com/example/sales/application/service/InventoryService.java\npackage com.example.sms.application.service;\n\nimport com.example.sms.application.port.out.InventoryRepository;\nimport com.example.sms.domain.model.inventory.*;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.util.List;\nimport java.util.Optional;\n\n@Service\n@RequiredArgsConstructor\npublic class InventoryService {\n\n    private final InventoryRepository inventoryRepository;\n\n    /**\n     * \u5546\u54c1\u5225\u306e\u5728\u5eab\u30b5\u30de\u30ea\u3092\u53d6\u5f97\n     */\n    public InventorySummary getProductInventorySummary(String productCode) {\n        List&lt;Inventory&gt; inventories = inventoryRepository.findByProductCode(productCode);\n\n        BigDecimal totalCurrent = BigDecimal.ZERO;\n        BigDecimal totalAllocated = BigDecimal.ZERO;\n        BigDecimal totalOrdered = BigDecimal.ZERO;\n\n        for (Inventory inv : inventories) {\n            totalCurrent = totalCurrent.add(inv.getCurrentQuantity());\n            totalAllocated = totalAllocated.add(inv.getAllocatedQuantity());\n            totalOrdered = totalOrdered.add(inv.getOrderedQuantity());\n        }\n\n        return InventorySummary.builder()\n                .productCode(productCode)\n                .totalCurrentQuantity(totalCurrent)\n                .totalAllocatedQuantity(totalAllocated)\n                .totalAvailableQuantity(totalCurrent.subtract(totalAllocated))\n                .totalOrderedQuantity(totalOrdered)\n                .warehouseDetails(inventories)\n                .build();\n    }\n\n    /**\n     * \u5009\u5eab\u5225\u306e\u5728\u5eab\u4e00\u89a7\u3092\u53d6\u5f97\n     */\n    public List&lt;Inventory&gt; getInventoryByWarehouse(String warehouseCode) {\n        return inventoryRepository.findByWarehouseCode(warehouseCode);\n    }\n\n    /**\n     * \u5728\u5eab\u3092\u5f15\u5f53\n     */\n    @Transactional\n    public AllocationResult allocate(String warehouseCode, String productCode,\n                                      BigDecimal quantity) {\n        Optional&lt;Inventory&gt; inventoryOpt = inventoryRepository\n                .findByWarehouseAndProduct(warehouseCode, productCode);\n\n        if (inventoryOpt.isEmpty()) {\n            return AllocationResult.failure(\"\u5728\u5eab\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\");\n        }\n\n        Inventory inventory = inventoryOpt.get();\n        BigDecimal available = inventory.getAvailableQuantity();\n\n        if (available.compareTo(quantity) &lt; 0) {\n            return AllocationResult.failure(\n                \"\u6709\u52b9\u5728\u5eab\u6570\u304c\u4e0d\u8db3\u3057\u3066\u3044\u307e\u3059\u3002\u6709\u52b9\u5728\u5eab: \" + available);\n        }\n\n        inventoryRepository.allocate(inventory.getId(), quantity);\n\n        return AllocationResult.success(quantity);\n    }\n\n    /**\n     * \u5f15\u5f53\u3092\u89e3\u9664\n     */\n    @Transactional\n    public void deallocate(String warehouseCode, String productCode,\n                           BigDecimal quantity) {\n        Optional&lt;Inventory&gt; inventoryOpt = inventoryRepository\n                .findByWarehouseAndProduct(warehouseCode, productCode);\n\n        if (inventoryOpt.isEmpty()) {\n            throw new IllegalArgumentException(\"\u5728\u5eab\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\");\n        }\n\n        Inventory inventory = inventoryOpt.get();\n        inventoryRepository.deallocate(inventory.getId(), quantity);\n    }\n\n    /**\n     * \u5165\u5eab\u51e6\u7406\n     */\n    @Transactional\n    public void receive(String warehouseCode, String productCode,\n                        BigDecimal quantity) {\n        Optional&lt;Inventory&gt; inventoryOpt = inventoryRepository\n                .findByWarehouseAndProduct(warehouseCode, productCode);\n\n        if (inventoryOpt.isEmpty()) {\n            // \u65b0\u898f\u5728\u5eab\u30ec\u30b3\u30fc\u30c9\u4f5c\u6210\n            Inventory newInventory = Inventory.builder()\n                    .warehouseCode(warehouseCode)\n                    .productCode(productCode)\n                    .currentQuantity(quantity)\n                    .allocatedQuantity(BigDecimal.ZERO)\n                    .orderedQuantity(BigDecimal.ZERO)\n                    .lastReceiptDate(LocalDate.now())\n                    .build();\n            inventoryRepository.save(newInventory);\n        } else {\n            Inventory inventory = inventoryOpt.get();\n            inventoryRepository.receive(inventory.getId(), quantity, LocalDate.now());\n        }\n    }\n\n    /**\n     * \u51fa\u5eab\u51e6\u7406\n     */\n    @Transactional\n    public void ship(String warehouseCode, String productCode,\n                     BigDecimal quantity) {\n        Optional&lt;Inventory&gt; inventoryOpt = inventoryRepository\n                .findByWarehouseAndProduct(warehouseCode, productCode);\n\n        if (inventoryOpt.isEmpty()) {\n            throw new IllegalArgumentException(\"\u5728\u5eab\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\");\n        }\n\n        Inventory inventory = inventoryOpt.get();\n        inventoryRepository.ship(inventory.getId(), quantity, LocalDate.now());\n    }\n\n    /**\n     * \u5728\u5eab\u6570\u91cf\u3092\u76f4\u63a5\u66f4\u65b0\uff08\u68da\u5378\u8abf\u6574\u7528\uff09\n     */\n    @Transactional\n    public void adjustQuantity(String warehouseCode, String productCode,\n                               BigDecimal newQuantity, String reason) {\n        Optional&lt;Inventory&gt; inventoryOpt = inventoryRepository\n                .findByWarehouseAndProduct(warehouseCode, productCode);\n\n        if (inventoryOpt.isEmpty()) {\n            throw new IllegalArgumentException(\"\u5728\u5eab\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\");\n        }\n\n        Inventory inventory = inventoryOpt.get();\n        inventoryRepository.updateCurrentQuantity(\n                inventory.getId(), newQuantity, reason);\n    }\n}\n</code></pre> \u5728\u5eab\u30b5\u30de\u30ea\u30fb\u5f15\u5f53\u7d50\u679c\u30af\u30e9\u30b9 <pre><code>// src/main/java/com/example/sales/application/service/InventorySummary.java\npackage com.example.sms.application.service;\n\nimport com.example.sms.domain.model.inventory.Inventory;\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\nimport java.util.List;\n\n@Data\n@Builder\npublic class InventorySummary {\n    private String productCode;\n    private BigDecimal totalCurrentQuantity;\n    private BigDecimal totalAllocatedQuantity;\n    private BigDecimal totalAvailableQuantity;\n    private BigDecimal totalOrderedQuantity;\n    private List&lt;Inventory&gt; warehouseDetails;\n}\n</code></pre> <pre><code>// src/main/java/com/example/sales/application/service/AllocationResult.java\npackage com.example.sms.application.service;\n\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\n\n@Data\n@Builder\npublic class AllocationResult {\n    private boolean success;\n    private BigDecimal allocatedQuantity;\n    private String reason;\n\n    public static AllocationResult success(BigDecimal quantity) {\n        return AllocationResult.builder()\n                .success(true)\n                .allocatedQuantity(quantity)\n                .build();\n    }\n\n    public static AllocationResult failure(String reason) {\n        return AllocationResult.builder()\n                .success(false)\n                .allocatedQuantity(BigDecimal.ZERO)\n                .reason(reason)\n                .build();\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter09/#92-db","title":"9.2 \u5728\u5eab\u79fb\u52d5\u30fb\u68da\u5378\u306e DB \u8a2d\u8a08","text":""},{"location":"article/part2/chapter09/#_9","title":"\u5165\u51fa\u5eab\u5c65\u6b74\u306e\u7ba1\u7406","text":"<p>\u5165\u51fa\u5eab\u5c65\u6b74\u306f\u5728\u5eab\u306e\u5897\u6e1b\u3092\u6642\u7cfb\u5217\u3067\u8a18\u9332\u3057\u3001\u30c8\u30ec\u30fc\u30b5\u30d3\u30ea\u30c6\u30a3\u3092\u78ba\u4fdd\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter09/#_10","title":"\u79fb\u52d5\u533a\u5206\u306e\u5b9a\u7fa9","text":"\u79fb\u52d5\u533a\u5206 \u5728\u5eab\u5f71\u97ff \u8aac\u660e \u5165\u8377\u5165\u5eab \u5897\u52a0 \u4ed5\u5165\u5148\u304b\u3089\u306e\u5165\u8377 \u51fa\u8377\u51fa\u5eab \u6e1b\u5c11 \u9867\u5ba2\u3078\u306e\u51fa\u8377 \u5009\u5eab\u9593\u79fb\u52d5\uff08\u51fa\uff09 \u6e1b\u5c11 \u4ed6\u5009\u5eab\u3078\u306e\u79fb\u52d5\uff08\u51fa\u5eab\u5074\uff09 \u5009\u5eab\u9593\u79fb\u52d5\uff08\u5165\uff09 \u5897\u52a0 \u4ed6\u5009\u5eab\u304b\u3089\u306e\u79fb\u52d5\uff08\u5165\u5eab\u5074\uff09 \u68da\u5378\u8abf\u6574\uff08\u5897\uff09 \u5897\u52a0 \u68da\u5378\u306b\u3088\u308b\u5897\u52a0\u8abf\u6574 \u68da\u5378\u8abf\u6574\uff08\u6e1b\uff09 \u6e1b\u5c11 \u68da\u5378\u306b\u3088\u308b\u6e1b\u5c11\u8abf\u6574 \u8fd4\u54c1\u5165\u5eab \u5897\u52a0 \u9867\u5ba2\u304b\u3089\u306e\u8fd4\u54c1 \u5ec3\u68c4 \u6e1b\u5c11 \u5ec3\u68c4\u51e6\u7406"},{"location":"article/part2/chapter09/#_11","title":"\u68da\u5378\u696d\u52d9\u306e\u8a2d\u8a08","text":"<p>\u68da\u5378\u696d\u52d9\u306f\u300c\u68da\u5378\u8868\u767a\u884c \u2192 \u5b9f\u68da\u30ab\u30a6\u30f3\u30c8 \u2192 \u5dee\u7570\u78ba\u8a8d \u2192 \u5728\u5eab\u8abf\u6574\u300d\u306e\u6d41\u308c\u3067\u9032\u307f\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter09/#er","title":"\u68da\u5378\u30c7\u30fc\u30bf\u306e ER \u56f3","text":""},{"location":"article/part2/chapter09/#_12","title":"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff1a\u5165\u51fa\u5eab\u5c65\u6b74\u30fb\u68da\u5378\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210","text":"V016__create_stock_movement_tables.sql <pre><code>-- src/main/resources/db/migration/V016__create_stock_movement_tables.sql\n\n-- \u79fb\u52d5\u533a\u5206\nCREATE TYPE \u79fb\u52d5\u533a\u5206 AS ENUM (\n    '\u5165\u8377\u5165\u5eab',\n    '\u51fa\u8377\u51fa\u5eab',\n    '\u5009\u5eab\u9593\u79fb\u52d5\u51fa',\n    '\u5009\u5eab\u9593\u79fb\u52d5\u5165',\n    '\u68da\u5378\u8abf\u6574\u5897',\n    '\u68da\u5378\u8abf\u6574\u6e1b',\n    '\u8fd4\u54c1\u5165\u5eab',\n    '\u5ec3\u68c4'\n);\n\n-- \u68da\u5378\u30b9\u30c6\u30fc\u30bf\u30b9\nCREATE TYPE \u68da\u5378\u30b9\u30c6\u30fc\u30bf\u30b9 AS ENUM ('\u4f5c\u6210\u4e2d', '\u5b9f\u65bd\u4e2d', '\u78ba\u5b9a', '\u53d6\u6d88');\n\n-- \u5165\u51fa\u5eab\u5c65\u6b74\u30c7\u30fc\u30bf\nCREATE TABLE \"\u5165\u51fa\u5eab\u5c65\u6b74\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u5009\u5eab\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u5546\u54c1\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u79fb\u52d5\u65e5\u6642\" TIMESTAMP NOT NULL,\n    \"\u79fb\u52d5\u533a\u5206\" \u79fb\u52d5\u533a\u5206 NOT NULL,\n    \"\u79fb\u52d5\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u79fb\u52d5\u524d\u5728\u5eab\u6570\" DECIMAL(15, 2) NOT NULL,\n    \"\u79fb\u52d5\u5f8c\u5728\u5eab\u6570\" DECIMAL(15, 2) NOT NULL,\n    \"\u4f1d\u7968\u756a\u53f7\" VARCHAR(20),\n    \"\u4f1d\u7968\u7a2e\u5225\" VARCHAR(20),\n    \"\u79fb\u52d5\u7406\u7531\" TEXT,\n    \"\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u30b3\u30fc\u30c9\" VARCHAR(20),\n    \"\u30ed\u30c3\u30c8\u756a\u53f7\" VARCHAR(50),\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\" VARCHAR(50),\n    CONSTRAINT \"fk_\u5165\u51fa\u5eab\u5c65\u6b74_\u5009\u5eab\"\n        FOREIGN KEY (\"\u5009\u5eab\u30b3\u30fc\u30c9\") REFERENCES \"\u5009\u5eab\u30de\u30b9\u30bf\"(\"\u5009\u5eab\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"fk_\u5165\u51fa\u5eab\u5c65\u6b74_\u5546\u54c1\"\n        FOREIGN KEY (\"\u5546\u54c1\u30b3\u30fc\u30c9\") REFERENCES \"\u5546\u54c1\u30de\u30b9\u30bf\"(\"\u5546\u54c1\u30b3\u30fc\u30c9\")\n);\n\n-- \u68da\u5378\u30c7\u30fc\u30bf\uff08\u30d8\u30c3\u30c0\uff09\nCREATE TABLE \"\u68da\u5378\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u68da\u5378\u756a\u53f7\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u5009\u5eab\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u68da\u5378\u65e5\" DATE NOT NULL,\n    \"\u68da\u5378\u958b\u59cb\u65e5\u6642\" TIMESTAMP,\n    \"\u68da\u5378\u7d42\u4e86\u65e5\u6642\" TIMESTAMP,\n    \"\u30b9\u30c6\u30fc\u30bf\u30b9\" \u68da\u5378\u30b9\u30c6\u30fc\u30bf\u30b9 DEFAULT '\u4f5c\u6210\u4e2d' NOT NULL,\n    \"\u5099\u8003\" TEXT,\n    \"\u30d0\u30fc\u30b8\u30e7\u30f3\" INTEGER DEFAULT 1 NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u8005\" VARCHAR(50),\n    CONSTRAINT \"fk_\u68da\u5378_\u5009\u5eab\"\n        FOREIGN KEY (\"\u5009\u5eab\u30b3\u30fc\u30c9\") REFERENCES \"\u5009\u5eab\u30de\u30b9\u30bf\"(\"\u5009\u5eab\u30b3\u30fc\u30c9\")\n);\n\n-- \u68da\u5378\u660e\u7d30\u30c7\u30fc\u30bf\nCREATE TABLE \"\u68da\u5378\u660e\u7d30\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u68da\u5378ID\" INTEGER NOT NULL,\n    \"\u68da\u5378\u884c\u756a\u53f7\" INTEGER NOT NULL,\n    \"\u5546\u54c1\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u30b3\u30fc\u30c9\" VARCHAR(20),\n    \"\u30ed\u30c3\u30c8\u756a\u53f7\" VARCHAR(50),\n    \"\u5e33\u7c3f\u5728\u5eab\u6570\" DECIMAL(15, 2) NOT NULL,\n    \"\u5b9f\u68da\u6570\" DECIMAL(15, 2),\n    \"\u5dee\u7570\u6570\" DECIMAL(15, 2),\n    \"\u5dee\u7570\u7406\u7531\" TEXT,\n    \"\u8abf\u6574\u6e08\u30d5\u30e9\u30b0\" BOOLEAN DEFAULT FALSE NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"fk_\u68da\u5378\u660e\u7d30_\u68da\u5378\"\n        FOREIGN KEY (\"\u68da\u5378ID\") REFERENCES \"\u68da\u5378\u30c7\u30fc\u30bf\"(\"ID\") ON DELETE CASCADE,\n    CONSTRAINT \"fk_\u68da\u5378\u660e\u7d30_\u5546\u54c1\"\n        FOREIGN KEY (\"\u5546\u54c1\u30b3\u30fc\u30c9\") REFERENCES \"\u5546\u54c1\u30de\u30b9\u30bf\"(\"\u5546\u54c1\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"uk_\u68da\u5378\u660e\u7d30_\u68da\u5378_\u884c\" UNIQUE (\"\u68da\u5378ID\", \"\u68da\u5378\u884c\u756a\u53f7\")\n);\n\n-- \u5dee\u7570\u6570\u3092\u81ea\u52d5\u8a08\u7b97\u3059\u308b\u30c8\u30ea\u30ac\u30fc\nCREATE OR REPLACE FUNCTION calculate_stocktaking_difference()\nRETURNS TRIGGER AS $$\nBEGIN\n    IF NEW.\"\u5b9f\u68da\u6570\" IS NOT NULL THEN\n        NEW.\"\u5dee\u7570\u6570\" := NEW.\"\u5b9f\u68da\u6570\" - NEW.\"\u5e33\u7c3f\u5728\u5eab\u6570\";\n    END IF;\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\nCREATE TRIGGER trg_\u68da\u5378\u660e\u7d30_\u5dee\u7570\u8a08\u7b97\n    BEFORE INSERT OR UPDATE ON \"\u68da\u5378\u660e\u7d30\u30c7\u30fc\u30bf\"\n    FOR EACH ROW\n    EXECUTE FUNCTION calculate_stocktaking_difference();\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"idx_\u5165\u51fa\u5eab\u5c65\u6b74_\u5009\u5eab\u30b3\u30fc\u30c9\" ON \"\u5165\u51fa\u5eab\u5c65\u6b74\u30c7\u30fc\u30bf\"(\"\u5009\u5eab\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u5165\u51fa\u5eab\u5c65\u6b74_\u5546\u54c1\u30b3\u30fc\u30c9\" ON \"\u5165\u51fa\u5eab\u5c65\u6b74\u30c7\u30fc\u30bf\"(\"\u5546\u54c1\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u5165\u51fa\u5eab\u5c65\u6b74_\u79fb\u52d5\u65e5\u6642\" ON \"\u5165\u51fa\u5eab\u5c65\u6b74\u30c7\u30fc\u30bf\"(\"\u79fb\u52d5\u65e5\u6642\");\nCREATE INDEX \"idx_\u5165\u51fa\u5eab\u5c65\u6b74_\u4f1d\u7968\u756a\u53f7\" ON \"\u5165\u51fa\u5eab\u5c65\u6b74\u30c7\u30fc\u30bf\"(\"\u4f1d\u7968\u756a\u53f7\");\nCREATE INDEX \"idx_\u68da\u5378_\u5009\u5eab\u30b3\u30fc\u30c9\" ON \"\u68da\u5378\u30c7\u30fc\u30bf\"(\"\u5009\u5eab\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u68da\u5378_\u68da\u5378\u65e5\" ON \"\u68da\u5378\u30c7\u30fc\u30bf\"(\"\u68da\u5378\u65e5\");\nCREATE INDEX \"idx_\u68da\u5378_\u30b9\u30c6\u30fc\u30bf\u30b9\" ON \"\u68da\u5378\u30c7\u30fc\u30bf\"(\"\u30b9\u30c6\u30fc\u30bf\u30b9\");\nCREATE INDEX \"idx_\u68da\u5378\u660e\u7d30_\u5546\u54c1\u30b3\u30fc\u30c9\" ON \"\u68da\u5378\u660e\u7d30\u30c7\u30fc\u30bf\"(\"\u5546\u54c1\u30b3\u30fc\u30c9\");\n\n-- \u30c6\u30fc\u30d6\u30eb\u30b3\u30e1\u30f3\u30c8\nCOMMENT ON TABLE \"\u5165\u51fa\u5eab\u5c65\u6b74\u30c7\u30fc\u30bf\" IS '\u5728\u5eab\u306e\u5165\u51fa\u5eab\u5c65\u6b74\u3092\u8a18\u9332\u3059\u308b\u30c6\u30fc\u30d6\u30eb';\nCOMMENT ON TABLE \"\u68da\u5378\u30c7\u30fc\u30bf\" IS '\u68da\u5378\u4f5c\u696d\u306e\u30d8\u30c3\u30c0\u60c5\u5831\u3092\u7ba1\u7406\u3059\u308b\u30c6\u30fc\u30d6\u30eb';\nCOMMENT ON TABLE \"\u68da\u5378\u660e\u7d30\u30c7\u30fc\u30bf\" IS '\u68da\u5378\u660e\u7d30\u30fb\u5dee\u7570\u60c5\u5831\u3092\u7ba1\u7406\u3059\u308b\u30c6\u30fc\u30d6\u30eb';\nCOMMENT ON COLUMN \"\u68da\u5378\u30c7\u30fc\u30bf\".\"\u30d0\u30fc\u30b8\u30e7\u30f3\" IS '\u697d\u89b3\u30ed\u30c3\u30af\u7528\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7';\n</code></pre>"},{"location":"article/part2/chapter09/#_13","title":"\u5165\u51fa\u5eab\u5c65\u6b74\u30fb\u68da\u5378\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u5b9f\u88c5","text":"\u79fb\u52d5\u533a\u5206 ENUM <pre><code>// src/main/java/com/example/sales/domain/model/inventory/MovementType.java\npackage com.example.sms.domain.model.inventory;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum MovementType {\n    RECEIPT(\"\u5165\u8377\u5165\u5eab\"),\n    SHIPMENT(\"\u51fa\u8377\u51fa\u5eab\"),\n    TRANSFER_OUT(\"\u5009\u5eab\u9593\u79fb\u52d5\u51fa\"),\n    TRANSFER_IN(\"\u5009\u5eab\u9593\u79fb\u52d5\u5165\"),\n    ADJUSTMENT_PLUS(\"\u68da\u5378\u8abf\u6574\u5897\"),\n    ADJUSTMENT_MINUS(\"\u68da\u5378\u8abf\u6574\u6e1b\"),\n    RETURN_RECEIPT(\"\u8fd4\u54c1\u5165\u5eab\"),\n    DISPOSAL(\"\u5ec3\u68c4\");\n\n    private final String displayName;\n\n    public static MovementType fromDisplayName(String displayName) {\n        for (MovementType type : values()) {\n            if (type.displayName.equals(displayName)) {\n                return type;\n            }\n        }\n        throw new IllegalArgumentException(\"Unknown movement type: \" + displayName);\n    }\n\n    /**\n     * \u5165\u5eab\u7cfb\u306e\u79fb\u52d5\u304b\u3069\u3046\u304b\n     */\n    public boolean isInbound() {\n        return this == RECEIPT || this == TRANSFER_IN ||\n               this == ADJUSTMENT_PLUS || this == RETURN_RECEIPT;\n    }\n\n    /**\n     * \u51fa\u5eab\u7cfb\u306e\u79fb\u52d5\u304b\u3069\u3046\u304b\n     */\n    public boolean isOutbound() {\n        return this == SHIPMENT || this == TRANSFER_OUT ||\n               this == ADJUSTMENT_MINUS || this == DISPOSAL;\n    }\n}\n</code></pre> \u68da\u5378\u30b9\u30c6\u30fc\u30bf\u30b9 ENUM <pre><code>// src/main/java/com/example/sales/domain/model/inventory/StocktakingStatus.java\npackage com.example.sms.domain.model.inventory;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum StocktakingStatus {\n    DRAFT(\"\u4f5c\u6210\u4e2d\"),\n    IN_PROGRESS(\"\u5b9f\u65bd\u4e2d\"),\n    CONFIRMED(\"\u78ba\u5b9a\"),\n    CANCELLED(\"\u53d6\u6d88\");\n\n    private final String displayName;\n\n    public static StocktakingStatus fromDisplayName(String displayName) {\n        for (StocktakingStatus status : values()) {\n            if (status.displayName.equals(displayName)) {\n                return status;\n            }\n        }\n        throw new IllegalArgumentException(\"Unknown stocktaking status: \" + displayName);\n    }\n\n    /**\n     * \u5b9f\u65bd\u958b\u59cb\u53ef\u80fd\u304b\u3069\u3046\u304b\n     */\n    public boolean canStart() {\n        return this == DRAFT;\n    }\n\n    /**\n     * \u78ba\u5b9a\u53ef\u80fd\u304b\u3069\u3046\u304b\n     */\n    public boolean canConfirm() {\n        return this == IN_PROGRESS;\n    }\n\n    /**\n     * \u53d6\u6d88\u53ef\u80fd\u304b\u3069\u3046\u304b\n     */\n    public boolean canCancel() {\n        return this == DRAFT || this == IN_PROGRESS;\n    }\n}\n</code></pre> \u5165\u51fa\u5eab\u5c65\u6b74\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/sales/domain/model/inventory/StockMovement.java\npackage com.example.sms.domain.model.inventory;\n\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\npublic class StockMovement {\n    private Integer id;\n    private String warehouseCode;\n    private String productCode;\n    private LocalDateTime movementDateTime;\n    private MovementType movementType;\n    private BigDecimal movementQuantity;\n    private BigDecimal beforeQuantity;\n    private BigDecimal afterQuantity;\n    private String documentNumber;\n    private String documentType;\n    private String movementReason;\n    private String locationCode;\n    private String lotNumber;\n    private LocalDateTime createdAt;\n    private String createdBy;\n\n    // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n    private Warehouse warehouse;\n    private Product product;\n}\n</code></pre> \u68da\u5378\u30c7\u30fc\u30bf\u30fb\u68da\u5378\u660e\u7d30\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/sales/domain/model/inventory/Stocktaking.java\npackage com.example.sms.domain.model.inventory;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Stocktaking {\n    private Integer id;\n    private String stocktakingNumber;\n    private String warehouseCode;\n    private LocalDate stocktakingDate;\n    private LocalDateTime startDateTime;\n    private LocalDateTime endDateTime;\n    private StocktakingStatus status;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n\n    // \u697d\u89b3\u30ed\u30c3\u30af\u7528\u30d0\u30fc\u30b8\u30e7\u30f3\n    @Builder.Default\n    private Integer version = 1;\n\n    // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n    @Builder.Default\n    private List&lt;StocktakingDetail&gt; details = new ArrayList&lt;&gt;();\n\n    /**\n     * \u5dee\u7570\u304c\u3042\u308b\u660e\u7d30\u304c\u3042\u308b\u304b\u3069\u3046\u304b\n     */\n    public boolean hasDifference() {\n        return details.stream()\n                .anyMatch(d -&gt; d.getDifferenceQuantity() != null &amp;&amp;\n                         d.getDifferenceQuantity().signum() != 0);\n    }\n\n    /**\n     * \u5168\u660e\u7d30\u304c\u8abf\u6574\u6e08\u307f\u304b\u3069\u3046\u304b\n     */\n    public boolean isAllAdjusted() {\n        return details.stream()\n                .allMatch(StocktakingDetail::getAdjustedFlag);\n    }\n}\n</code></pre> <pre><code>// src/main/java/com/example/sms/domain/model/inventory/StocktakingDetail.java\npackage com.example.sms.domain.model.inventory;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class StocktakingDetail {\n    private Integer id;\n    private Integer stocktakingId;\n    private Integer lineNumber;\n    private String productCode;\n    private String locationCode;\n    private String lotNumber;\n    private BigDecimal bookQuantity;\n    private BigDecimal actualQuantity;\n    private BigDecimal differenceQuantity;\n    private String differenceReason;\n    @Builder.Default\n    private Boolean adjustedFlag = false;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n\n    /**\n     * \u5b9f\u68da\u6570\u3092\u5165\u529b\n     */\n    public void setActualQuantityAndCalculateDifference(BigDecimal actualQty) {\n        this.actualQuantity = actualQty;\n        this.differenceQuantity = actualQty.subtract(this.bookQuantity);\n    }\n\n    /**\n     * \u5dee\u7570\u304c\u3042\u308b\u304b\u3069\u3046\u304b\n     */\n    public boolean hasDifference() {\n        return differenceQuantity != null &amp;&amp; differenceQuantity.signum() != 0;\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter09/#_14","title":"\u68da\u5378\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":"\u68da\u5378\u30b5\u30fc\u30d3\u30b9 <pre><code>// src/main/java/com/example/sales/application/service/StocktakingService.java\npackage com.example.sms.application.service;\n\nimport com.example.sms.application.port.out.*;\nimport com.example.sms.domain.model.inventory.*;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.time.format.DateTimeFormatter;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Optional;\n\n@Service\n@RequiredArgsConstructor\npublic class StocktakingService {\n\n    private final StocktakingRepository stocktakingRepository;\n    private final InventoryRepository inventoryRepository;\n    private final StockMovementRepository stockMovementRepository;\n\n    /**\n     * \u68da\u5378\u3092\u4f5c\u6210\u3059\u308b\n     */\n    @Transactional\n    public Stocktaking createStocktaking(String warehouseCode, LocalDate stocktakingDate) {\n        String stocktakingNumber = generateStocktakingNumber(stocktakingDate);\n\n        // \u5009\u5eab\u306e\u5728\u5eab\u304b\u3089\u68da\u5378\u660e\u7d30\u3092\u4f5c\u6210\n        List&lt;Inventory&gt; inventories = inventoryRepository.findByWarehouseCode(warehouseCode);\n\n        List&lt;StocktakingDetail&gt; details = new ArrayList&lt;&gt;();\n        for (Inventory inv : inventories) {\n            StocktakingDetail detail = StocktakingDetail.builder()\n                    .stocktakingNumber(stocktakingNumber)\n                    .productCode(inv.getProductCode())\n                    .locationCode(inv.getLocationCode())\n                    .lotNumber(inv.getLotNumber())\n                    .bookQuantity(inv.getCurrentQuantity())\n                    .adjustedFlag(false)\n                    .build();\n            details.add(detail);\n        }\n\n        Stocktaking stocktaking = Stocktaking.builder()\n                .stocktakingNumber(stocktakingNumber)\n                .warehouseCode(warehouseCode)\n                .stocktakingDate(stocktakingDate)\n                .status(StocktakingStatus.DRAFT)\n                .details(details)\n                .build();\n\n        stocktakingRepository.save(stocktaking);\n\n        return stocktaking;\n    }\n\n    /**\n     * \u68da\u5378\u3092\u958b\u59cb\u3059\u308b\n     */\n    @Transactional\n    public void startStocktaking(String stocktakingNumber) {\n        Stocktaking stocktaking = findByStocktakingNumber(stocktakingNumber)\n                .orElseThrow(() -&gt; new IllegalArgumentException(\n                        \"\u68da\u5378\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + stocktakingNumber));\n\n        if (!stocktaking.getStatus().canStart()) {\n            throw new IllegalStateException(\n                    \"\u3053\u306e\u68da\u5378\u306f\u958b\u59cb\u3067\u304d\u307e\u305b\u3093\u3002\u73fe\u5728\u306e\u30b9\u30c6\u30fc\u30bf\u30b9: \" +\n                    stocktaking.getStatus().getDisplayName());\n        }\n\n        stocktakingRepository.updateStatus(\n                stocktakingNumber, StocktakingStatus.IN_PROGRESS);\n        stocktakingRepository.updateStartDateTime(\n                stocktakingNumber, LocalDateTime.now());\n    }\n\n    /**\n     * \u5b9f\u68da\u6570\u3092\u5165\u529b\u3059\u308b\n     */\n    @Transactional\n    public void inputActualQuantity(String stocktakingNumber, String productCode,\n                                     BigDecimal actualQuantity, String differenceReason) {\n        stocktakingRepository.updateActualQuantity(\n                stocktakingNumber, productCode, actualQuantity, differenceReason);\n    }\n\n    /**\n     * \u68da\u5378\u3092\u78ba\u5b9a\u3059\u308b\uff08\u5728\u5eab\u8abf\u6574\u3092\u5b9f\u884c\uff09\n     */\n    @Transactional\n    public void confirmStocktaking(String stocktakingNumber) {\n        Stocktaking stocktaking = findByStocktakingNumber(stocktakingNumber)\n                .orElseThrow(() -&gt; new IllegalArgumentException(\n                        \"\u68da\u5378\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + stocktakingNumber));\n\n        if (!stocktaking.getStatus().canConfirm()) {\n            throw new IllegalStateException(\n                    \"\u3053\u306e\u68da\u5378\u306f\u78ba\u5b9a\u3067\u304d\u307e\u305b\u3093\u3002\u73fe\u5728\u306e\u30b9\u30c6\u30fc\u30bf\u30b9: \" +\n                    stocktaking.getStatus().getDisplayName());\n        }\n\n        // \u5dee\u7570\u304c\u3042\u308b\u660e\u7d30\u306e\u5728\u5eab\u3092\u8abf\u6574\n        for (StocktakingDetail detail : stocktaking.getDetails()) {\n            if (detail.hasDifference()) {\n                adjustInventory(stocktaking.getWarehouseCode(), detail);\n            }\n        }\n\n        stocktakingRepository.updateStatus(\n                stocktakingNumber, StocktakingStatus.CONFIRMED);\n        stocktakingRepository.updateEndDateTime(\n                stocktakingNumber, LocalDateTime.now());\n    }\n\n    /**\n     * \u5728\u5eab\u3092\u8abf\u6574\u3059\u308b\n     */\n    private void adjustInventory(String warehouseCode, StocktakingDetail detail) {\n        Optional&lt;Inventory&gt; inventoryOpt = inventoryRepository\n                .findByWarehouseAndProduct(warehouseCode, detail.getProductCode());\n\n        if (inventoryOpt.isEmpty()) {\n            return;\n        }\n\n        Inventory inventory = inventoryOpt.get();\n        BigDecimal difference = detail.getDifferenceQuantity();\n        BigDecimal beforeQuantity = inventory.getCurrentQuantity();\n        BigDecimal afterQuantity = beforeQuantity.add(difference);\n\n        // \u5728\u5eab\u3092\u66f4\u65b0\n        inventoryRepository.updateCurrentQuantity(\n                inventory.getId(), afterQuantity, detail.getDifferenceReason());\n\n        // \u5165\u51fa\u5eab\u5c65\u6b74\u3092\u8a18\u9332\n        MovementType movementType = difference.signum() &gt; 0\n                ? MovementType.ADJUSTMENT_PLUS\n                : MovementType.ADJUSTMENT_MINUS;\n\n        StockMovement movement = StockMovement.builder()\n                .warehouseCode(warehouseCode)\n                .productCode(detail.getProductCode())\n                .movementDateTime(LocalDateTime.now())\n                .movementType(movementType)\n                .movementQuantity(difference.abs())\n                .beforeQuantity(beforeQuantity)\n                .afterQuantity(afterQuantity)\n                .movementReason(detail.getDifferenceReason())\n                .locationCode(detail.getLocationCode())\n                .lotNumber(detail.getLotNumber())\n                .build();\n\n        stockMovementRepository.save(movement);\n\n        // \u8abf\u6574\u6e08\u307f\u30d5\u30e9\u30b0\u3092\u66f4\u65b0\n        stocktakingRepository.markAsAdjusted(\n                detail.getStocktakingNumber(), detail.getProductCode());\n    }\n\n    public Optional&lt;Stocktaking&gt; findByStocktakingNumber(String stocktakingNumber) {\n        return stocktakingRepository.findByStocktakingNumber(stocktakingNumber);\n    }\n\n    private String generateStocktakingNumber(LocalDate stocktakingDate) {\n        String prefix = \"ST-\" + stocktakingDate.format(\n                DateTimeFormatter.ofPattern(\"yyyyMM\")) + \"-\";\n        Optional&lt;String&gt; latestNumber = stocktakingRepository\n                .findLatestStocktakingNumber(prefix + \"%\");\n\n        int sequence = 1;\n        if (latestNumber.isPresent()) {\n            String latest = latestNumber.get();\n            int currentSequence = Integer.parseInt(\n                    latest.substring(latest.length() - 4));\n            sequence = currentSequence + 1;\n        }\n\n        return prefix + String.format(\"%04d\", sequence);\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter09/#93","title":"9.3 \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3068\u697d\u89b3\u30ed\u30c3\u30af\u306e\u8a2d\u8a08","text":""},{"location":"article/part2/chapter09/#mybatis-resultmap","title":"MyBatis \u30cd\u30b9\u30c8\u3057\u305f ResultMap \u306b\u3088\u308b\u95a2\u9023\u4ed8\u3051","text":"<p>\u68da\u5378\u30c7\u30fc\u30bf\u306f\u3001\u68da\u5378\uff08\u30d8\u30c3\u30c0\uff09\u2192 \u68da\u5378\u660e\u7d30\u306e2\u5c64\u69cb\u9020\u3092\u6301\u3061\u307e\u3059\u3002N+1 \u554f\u984c\u3092\u56de\u907f\u3059\u308b\u305f\u3081\u3001JOIN \u30af\u30a8\u30ea\u3067\u4e00\u62ec\u53d6\u5f97\u3057\u307e\u3059\u3002</p> <p></p> \u68da\u5378\u30c7\u30fc\u30bf\u306e\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\uff08StocktakingMapper.xml\uff09 <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.sms.infrastructure.persistence.mapper.StocktakingMapper\"&gt;\n\n    &lt;!-- \u68da\u5378\uff08\u30d8\u30c3\u30c0\uff09\u306e ResultMap --&gt;\n    &lt;resultMap id=\"StocktakingWithDetailsResultMap\"\n               type=\"com.example.sms.domain.model.inventory.Stocktaking\"&gt;\n        &lt;id property=\"id\" column=\"st_id\"/&gt;\n        &lt;result property=\"stocktakingNumber\" column=\"st_\u68da\u5378\u756a\u53f7\"/&gt;\n        &lt;result property=\"warehouseCode\" column=\"st_\u5009\u5eab\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"stocktakingDate\" column=\"st_\u68da\u5378\u65e5\"/&gt;\n        &lt;result property=\"startDateTime\" column=\"st_\u68da\u5378\u958b\u59cb\u65e5\u6642\"/&gt;\n        &lt;result property=\"endDateTime\" column=\"st_\u68da\u5378\u7d42\u4e86\u65e5\u6642\"/&gt;\n        &lt;result property=\"status\" column=\"st_\u30b9\u30c6\u30fc\u30bf\u30b9\"\n                typeHandler=\"com.example.sms.infrastructure.persistence.typehandler.StocktakingStatusTypeHandler\"/&gt;\n        &lt;result property=\"remarks\" column=\"st_\u5099\u8003\"/&gt;\n        &lt;result property=\"version\" column=\"st_\u30d0\u30fc\u30b8\u30e7\u30f3\"/&gt;\n        &lt;result property=\"createdAt\" column=\"st_\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"st_\u66f4\u65b0\u65e5\u6642\"/&gt;\n        &lt;!-- \u68da\u5378\u660e\u7d30\u3068\u306e1:N\u95a2\u9023 --&gt;\n        &lt;collection property=\"details\"\n                    ofType=\"com.example.sms.domain.model.inventory.StocktakingDetail\"\n                    resultMap=\"StocktakingDetailNestedResultMap\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;!-- \u68da\u5378\u660e\u7d30\u306e\u30cd\u30b9\u30c8 ResultMap --&gt;\n    &lt;resultMap id=\"StocktakingDetailNestedResultMap\"\n               type=\"com.example.sms.domain.model.inventory.StocktakingDetail\"&gt;\n        &lt;id property=\"id\" column=\"std_id\"/&gt;\n        &lt;result property=\"stocktakingId\" column=\"std_\u68da\u5378ID\"/&gt;\n        &lt;result property=\"lineNumber\" column=\"std_\u68da\u5378\u884c\u756a\u53f7\"/&gt;\n        &lt;result property=\"productCode\" column=\"std_\u5546\u54c1\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"locationCode\" column=\"std_\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"lotNumber\" column=\"std_\u30ed\u30c3\u30c8\u756a\u53f7\"/&gt;\n        &lt;result property=\"bookQuantity\" column=\"std_\u5e33\u7c3f\u5728\u5eab\u6570\"/&gt;\n        &lt;result property=\"actualQuantity\" column=\"std_\u5b9f\u68da\u6570\"/&gt;\n        &lt;result property=\"differenceQuantity\" column=\"std_\u5dee\u7570\u6570\"/&gt;\n        &lt;result property=\"differenceReason\" column=\"std_\u5dee\u7570\u7406\u7531\"/&gt;\n        &lt;result property=\"adjustedFlag\" column=\"std_\u8abf\u6574\u6e08\u30d5\u30e9\u30b0\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;!-- JOIN \u306b\u3088\u308b\u4e00\u62ec\u53d6\u5f97\u30af\u30a8\u30ea --&gt;\n    &lt;select id=\"findWithDetailsByStocktakingNumber\"\n            resultMap=\"StocktakingWithDetailsResultMap\"&gt;\n        SELECT\n            st.\"ID\" AS st_id,\n            st.\"\u68da\u5378\u756a\u53f7\" AS st_\u68da\u5378\u756a\u53f7,\n            st.\"\u5009\u5eab\u30b3\u30fc\u30c9\" AS st_\u5009\u5eab\u30b3\u30fc\u30c9,\n            st.\"\u68da\u5378\u65e5\" AS st_\u68da\u5378\u65e5,\n            st.\"\u68da\u5378\u958b\u59cb\u65e5\u6642\" AS st_\u68da\u5378\u958b\u59cb\u65e5\u6642,\n            st.\"\u68da\u5378\u7d42\u4e86\u65e5\u6642\" AS st_\u68da\u5378\u7d42\u4e86\u65e5\u6642,\n            st.\"\u30b9\u30c6\u30fc\u30bf\u30b9\" AS st_\u30b9\u30c6\u30fc\u30bf\u30b9,\n            st.\"\u5099\u8003\" AS st_\u5099\u8003,\n            st.\"\u30d0\u30fc\u30b8\u30e7\u30f3\" AS st_\u30d0\u30fc\u30b8\u30e7\u30f3,\n            st.\"\u4f5c\u6210\u65e5\u6642\" AS st_\u4f5c\u6210\u65e5\u6642,\n            st.\"\u66f4\u65b0\u65e5\u6642\" AS st_\u66f4\u65b0\u65e5\u6642,\n            std.\"ID\" AS std_id,\n            std.\"\u68da\u5378ID\" AS std_\u68da\u5378ID,\n            std.\"\u68da\u5378\u884c\u756a\u53f7\" AS std_\u68da\u5378\u884c\u756a\u53f7,\n            std.\"\u5546\u54c1\u30b3\u30fc\u30c9\" AS std_\u5546\u54c1\u30b3\u30fc\u30c9,\n            std.\"\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u30b3\u30fc\u30c9\" AS std_\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u30b3\u30fc\u30c9,\n            std.\"\u30ed\u30c3\u30c8\u756a\u53f7\" AS std_\u30ed\u30c3\u30c8\u756a\u53f7,\n            std.\"\u5e33\u7c3f\u5728\u5eab\u6570\" AS std_\u5e33\u7c3f\u5728\u5eab\u6570,\n            std.\"\u5b9f\u68da\u6570\" AS std_\u5b9f\u68da\u6570,\n            std.\"\u5dee\u7570\u6570\" AS std_\u5dee\u7570\u6570,\n            std.\"\u5dee\u7570\u7406\u7531\" AS std_\u5dee\u7570\u7406\u7531,\n            std.\"\u8abf\u6574\u6e08\u30d5\u30e9\u30b0\" AS std_\u8abf\u6574\u6e08\u30d5\u30e9\u30b0\n        FROM \"\u68da\u5378\u30c7\u30fc\u30bf\" st\n        LEFT JOIN \"\u68da\u5378\u660e\u7d30\u30c7\u30fc\u30bf\" std\n            ON st.\"ID\" = std.\"\u68da\u5378ID\"\n        WHERE st.\"\u68da\u5378\u756a\u53f7\" = #{stocktakingNumber}\n        ORDER BY std.\"\u68da\u5378\u884c\u756a\u53f7\"\n    &lt;/select&gt;\n\n&lt;/mapper&gt;\n</code></pre>"},{"location":"article/part2/chapter09/#_15","title":"\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\u306e\u30dd\u30a4\u30f3\u30c8","text":"\u8a2d\u5b9a\u9805\u76ee \u8aac\u660e <code>&lt;collection&gt;</code> 1:N \u95a2\u9023\u306e\u30de\u30c3\u30d4\u30f3\u30b0 <code>&lt;id&gt;</code> \u4e3b\u30ad\u30fc\u306e\u8b58\u5225\uff08MyBatis \u304c\u91cd\u8907\u6392\u9664\u306b\u4f7f\u7528\uff09 <code>resultMap</code> \u30cd\u30b9\u30c8\u3057\u305f ResultMap \u306e\u53c2\u7167 \u30a8\u30a4\u30ea\u30a2\u30b9\uff08AS\uff09 \u30ab\u30e9\u30e0\u540d\u306e\u91cd\u8907\u3092\u907f\u3051\u308b\u305f\u3081\u306e\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9 <code>ORDER BY</code> \u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306e\u9806\u5e8f\u3092\u4fdd\u8a3c"},{"location":"article/part2/chapter09/#optimistic-locking","title":"\u697d\u89b3\u30ed\u30c3\u30af\uff08Optimistic Locking\uff09\u306e\u5b9f\u88c5","text":"<p>\u8907\u6570\u30e6\u30fc\u30b6\u30fc\u304c\u540c\u6642\u306b\u5728\u5eab\u30c7\u30fc\u30bf\u3084\u68da\u5378\u30c7\u30fc\u30bf\u3092\u7de8\u96c6\u3059\u308b\u5834\u5408\u3001\u30c7\u30fc\u30bf\u306e\u6574\u5408\u6027\u3092\u4fdd\u3064\u305f\u3081\u306b\u697d\u89b3\u30ed\u30c3\u30af\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter09/#_16","title":"\u30d0\u30fc\u30b8\u30e7\u30f3\u30ab\u30e9\u30e0\u306b\u3088\u308b\u540c\u6642\u66f4\u65b0\u5236\u5fa1","text":"\u697d\u89b3\u30ed\u30c3\u30af\u5bfe\u5fdc\u306e MyBatis Mapper <pre><code>&lt;!-- \u697d\u89b3\u30ed\u30c3\u30af\u5bfe\u5fdc\u306e\u5728\u5eab\u66f4\u65b0 --&gt;\n&lt;update id=\"updateWithOptimisticLock\"\n        parameterType=\"com.example.sms.domain.model.inventory.Inventory\"&gt;\n    UPDATE \"\u5728\u5eab\u30c7\u30fc\u30bf\"\n    SET\n        \"\u73fe\u5728\u5eab\u6570\" = #{currentQuantity},\n        \"\u5f15\u5f53\u6570\" = #{allocatedQuantity},\n        \"\u767a\u6ce8\u6b8b\u6570\" = #{orderedQuantity},\n        \"\u6700\u7d42\u5165\u5eab\u65e5\" = #{lastReceiptDate},\n        \"\u6700\u7d42\u51fa\u5eab\u65e5\" = #{lastShipmentDate},\n        \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP,\n        \"\u30d0\u30fc\u30b8\u30e7\u30f3\" = \"\u30d0\u30fc\u30b8\u30e7\u30f3\" + 1\n    WHERE \"ID\" = #{id}\n    AND \"\u30d0\u30fc\u30b8\u30e7\u30f3\" = #{version}\n&lt;/update&gt;\n\n&lt;!-- \u697d\u89b3\u30ed\u30c3\u30af\u5bfe\u5fdc\u306e\u68da\u5378\u66f4\u65b0 --&gt;\n&lt;update id=\"updateStocktakingWithOptimisticLock\"\n        parameterType=\"com.example.sms.domain.model.inventory.Stocktaking\"&gt;\n    UPDATE \"\u68da\u5378\u30c7\u30fc\u30bf\"\n    SET\n        \"\u30b9\u30c6\u30fc\u30bf\u30b9\" = #{status,\n            typeHandler=com.example.sms.infrastructure.persistence.typehandler.StocktakingStatusTypeHandler}::\u68da\u5378\u30b9\u30c6\u30fc\u30bf\u30b9,\n        \"\u68da\u5378\u7d42\u4e86\u65e5\u6642\" = #{endDateTime},\n        \"\u5099\u8003\" = #{remarks},\n        \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP,\n        \"\u30d0\u30fc\u30b8\u30e7\u30f3\" = \"\u30d0\u30fc\u30b8\u30e7\u30f3\" + 1\n    WHERE \"\u68da\u5378\u756a\u53f7\" = #{stocktakingNumber}\n    AND \"\u30d0\u30fc\u30b8\u30e7\u30f3\" = #{version}\n&lt;/update&gt;\n</code></pre> Repository \u5b9f\u88c5\uff1a\u697d\u89b3\u30ed\u30c3\u30af\u5bfe\u5fdc <pre><code>// src/main/java/com/example/sales/infrastructure/persistence/repository/InventoryRepositoryImpl.java\npackage com.example.sms.infrastructure.persistence.repository;\n\nimport com.example.sms.application.port.out.InventoryRepository;\nimport com.example.sms.domain.exception.OptimisticLockException;\nimport com.example.sms.domain.model.inventory.*;\nimport com.example.sms.infrastructure.persistence.mapper.InventoryMapper;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Repository;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.util.List;\nimport java.util.Optional;\n\n@Repository\n@RequiredArgsConstructor\npublic class InventoryRepositoryImpl implements InventoryRepository {\n\n    private final InventoryMapper inventoryMapper;\n\n    @Override\n    public void save(Inventory inventory) {\n        inventoryMapper.insert(inventory);\n    }\n\n    @Override\n    public Optional&lt;Inventory&gt; findByWarehouseAndProduct(String warehouseCode,\n                                                          String productCode) {\n        List&lt;Inventory&gt; inventories = inventoryMapper\n                .findByWarehouseAndProduct(warehouseCode, productCode);\n        return inventories.isEmpty() ? Optional.empty() : Optional.of(inventories.get(0));\n    }\n\n    @Override\n    public List&lt;Inventory&gt; findByWarehouseCode(String warehouseCode) {\n        return inventoryMapper.findByWarehouseCode(warehouseCode);\n    }\n\n    @Override\n    public List&lt;Inventory&gt; findByProductCode(String productCode) {\n        return inventoryMapper.findByProductCode(productCode);\n    }\n\n    /**\n     * \u697d\u89b3\u30ed\u30c3\u30af\u5bfe\u5fdc\u306e\u66f4\u65b0\n     * @throws OptimisticLockException \u4ed6\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u3088\u3063\u3066\u66f4\u65b0\u3055\u308c\u305f\u5834\u5408\n     */\n    @Override\n    @Transactional\n    public void update(Inventory inventory) {\n        int updatedCount = inventoryMapper.updateWithOptimisticLock(inventory);\n\n        if (updatedCount == 0) {\n            Integer currentVersion = inventoryMapper.findVersionById(inventory.getId());\n\n            if (currentVersion == null) {\n                throw new OptimisticLockException(\"\u5728\u5eab\", inventory.getId().toString());\n            } else {\n                throw new OptimisticLockException(\n                        \"\u5728\u5eab\",\n                        inventory.getId().toString(),\n                        inventory.getVersion(),\n                        currentVersion\n                );\n            }\n        }\n    }\n\n    @Override\n    public void allocate(Integer id, BigDecimal quantity) {\n        int updated = inventoryMapper.allocate(id, quantity);\n        if (updated == 0) {\n            throw new IllegalStateException(\"\u5f15\u5f53\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u6709\u52b9\u5728\u5eab\u4e0d\u8db3\u306e\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\");\n        }\n    }\n\n    @Override\n    public void deallocate(Integer id, BigDecimal quantity) {\n        int updated = inventoryMapper.deallocate(id, quantity);\n        if (updated == 0) {\n            throw new IllegalStateException(\"\u5f15\u5f53\u89e3\u9664\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\");\n        }\n    }\n\n    @Override\n    public void receive(Integer id, BigDecimal quantity, LocalDate receiptDate) {\n        inventoryMapper.receive(id, quantity, receiptDate);\n    }\n\n    @Override\n    public void ship(Integer id, BigDecimal quantity, LocalDate shipmentDate) {\n        int updated = inventoryMapper.ship(id, quantity, shipmentDate);\n        if (updated == 0) {\n            throw new IllegalStateException(\"\u51fa\u5eab\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u5728\u5eab\u4e0d\u8db3\u306e\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\");\n        }\n    }\n\n    @Override\n    public void updateCurrentQuantity(Integer id, BigDecimal newQuantity, String reason) {\n        inventoryMapper.updateCurrentQuantity(id, newQuantity);\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter09/#_17","title":"\u697d\u89b3\u30ed\u30c3\u30af\u306e\u30c6\u30b9\u30c8","text":"\u697d\u89b3\u30ed\u30c3\u30af\u306e\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9 <pre><code>@Nested\n@DisplayName(\"\u697d\u89b3\u30ed\u30c3\u30af\u306e\u5728\u5eab\u66f4\u65b0\u30c6\u30b9\u30c8\")\nclass OptimisticLockInventoryTest {\n\n    @Test\n    @DisplayName(\"\u6b63\u3057\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u66f4\u65b0\u3067\u304d\u308b\")\n    void shouldUpdateWithCorrectVersion() {\n        // Given: \u5728\u5eab\u3092\u767b\u9332\n        var inventory = createTestInventory(\"WH001\", \"PROD-001\");\n        inventoryRepository.save(inventory);\n\n        // When: \u30d0\u30fc\u30b8\u30e7\u30f31\u3067\u66f4\u65b0\n        var saved = inventoryRepository\n                .findByWarehouseAndProduct(\"WH001\", \"PROD-001\").orElseThrow();\n        assertThat(saved.getVersion()).isEqualTo(1);\n        saved.setCurrentQuantity(new BigDecimal(\"150\"));\n        inventoryRepository.update(saved);\n\n        // Then: \u30d0\u30fc\u30b8\u30e7\u30f3\u304c2\u306b\u5897\u52a0\n        var updated = inventoryRepository\n                .findByWarehouseAndProduct(\"WH001\", \"PROD-001\").orElseThrow();\n        assertThat(updated.getVersion()).isEqualTo(2);\n        assertThat(updated.getCurrentQuantity()).isEqualByComparingTo(new BigDecimal(\"150\"));\n    }\n\n    @Test\n    @DisplayName(\"\u53e4\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u66f4\u65b0\u3059\u308b\u3068\u697d\u89b3\u30ed\u30c3\u30af\u4f8b\u5916\u304c\u30b9\u30ed\u30fc\u3055\u308c\u308b\")\n    void shouldThrowOptimisticLockExceptionWithOldVersion() {\n        // Given: \u5728\u5eab\u3092\u767b\u9332\u3057\u3066\u3001\u5225\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u3067\u66f4\u65b0\n        var inventory = createTestInventory(\"WH001\", \"PROD-002\");\n        inventoryRepository.save(inventory);\n\n        var sessionA = inventoryRepository\n                .findByWarehouseAndProduct(\"WH001\", \"PROD-002\").orElseThrow();\n        var sessionB = inventoryRepository\n                .findByWarehouseAndProduct(\"WH001\", \"PROD-002\").orElseThrow();\n\n        // \u30bb\u30c3\u30b7\u30e7\u30f3A\u3067\u66f4\u65b0\n        sessionA.setCurrentQuantity(new BigDecimal(\"200\"));\n        inventoryRepository.update(sessionA);\n\n        // When/Then: \u30bb\u30c3\u30b7\u30e7\u30f3B\u3067\u66f4\u65b0\u3059\u308b\u3068\u4f8b\u5916\n        sessionB.setCurrentQuantity(new BigDecimal(\"300\"));\n        assertThatThrownBy(() -&gt; inventoryRepository.update(sessionB))\n                .isInstanceOf(OptimisticLockException.class)\n                .hasMessageContaining(\"\u4ed6\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u3088\u3063\u3066\u66f4\u65b0\u3055\u308c\u307e\u3057\u305f\");\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter09/#_18","title":"\u697d\u89b3\u30ed\u30c3\u30af\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","text":"\u30dd\u30a4\u30f3\u30c8 \u8aac\u660e \u30d0\u30fc\u30b8\u30e7\u30f3\u30ab\u30e9\u30e0 INTEGER \u578b\u3067\u5341\u5206\uff08\u30aa\u30fc\u30d0\u30fc\u30d5\u30ed\u30fc\u306f\u73fe\u5b9f\u7684\u306b\u767a\u751f\u3057\u306a\u3044\uff09 WHERE \u6761\u4ef6 \u5fc5\u305a <code>AND \"\u30d0\u30fc\u30b8\u30e7\u30f3\" = #{version}</code> \u3092\u542b\u3081\u308b \u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8 <code>\"\u30d0\u30fc\u30b8\u30e7\u30f3\" = \"\u30d0\u30fc\u30b8\u30e7\u30f3\" + 1</code> \u3067\u30a2\u30c8\u30df\u30c3\u30af\u306b\u66f4\u65b0 \u4f8b\u5916\u51e6\u7406 \u66f4\u65b0\u4ef6\u6570\u304c0\u306e\u5834\u5408\u306f\u697d\u89b3\u30ed\u30c3\u30af\u4f8b\u5916\u3092\u30b9\u30ed\u30fc \u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8 \u30e6\u30fc\u30b6\u30fc\u306b\u308f\u304b\u308a\u3084\u3059\u3044\u30e1\u30c3\u30bb\u30fc\u30b8\u3067\u518d\u8aad\u307f\u8fbc\u307f\u3092\u4fc3\u3059"},{"location":"article/part2/chapter09/#9_1","title":"\u7b2c9\u7ae0\u306e\u307e\u3068\u3081","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u5728\u5eab\u7ba1\u7406\u306e\u6838\u5fc3\u90e8\u5206\u3067\u3042\u308b\u5728\u5eab\u60c5\u5831\u7ba1\u7406\u3001\u5165\u51fa\u5eab\u5c65\u6b74\u3001\u68da\u5378\u51e6\u7406\u306b\u3064\u3044\u3066\u5b66\u3073\u307e\u3057\u305f\u3002</p>"},{"location":"article/part2/chapter09/#_19","title":"\u5b66\u3093\u3060\u3053\u3068","text":"<ol> <li>\u5728\u5eab\u6570\u91cf\u306e\u7a2e\u985e</li> <li> <p>\u73fe\u5728\u5eab\u6570\u3001\u5f15\u5f53\u6570\u3001\u6709\u52b9\u5728\u5eab\u6570\u3001\u767a\u6ce8\u6b8b\u6570\u306e\u95a2\u4fc2</p> </li> <li> <p>\u5009\u5eab\u30fb\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u7ba1\u7406</p> </li> <li>\u5009\u5eab\u30de\u30b9\u30bf\u306e\u8a2d\u8a08</li> <li> <p>\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u3088\u308b\u7d30\u304b\u306a\u5728\u5eab\u7ba1\u7406</p> </li> <li> <p>\u5165\u51fa\u5eab\u5c65\u6b74\u306e\u8a2d\u8a08</p> </li> <li>\u79fb\u52d5\u533a\u5206\u306b\u3088\u308b\u5206\u985e</li> <li> <p>\u30c8\u30ec\u30fc\u30b5\u30d3\u30ea\u30c6\u30a3\u306e\u78ba\u4fdd</p> </li> <li> <p>\u68da\u5378\u696d\u52d9\u306e\u8a2d\u8a08</p> </li> <li>\u5e33\u7c3f\u5728\u5eab\u3068\u5b9f\u68da\u306e\u5dee\u7570\u7ba1\u7406</li> <li> <p>\u5728\u5eab\u8abf\u6574\u51e6\u7406</p> </li> <li> <p>\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3068\u697d\u89b3\u30ed\u30c3\u30af</p> </li> <li>N+1 \u554f\u984c\u306e\u56de\u907f</li> <li>\u540c\u6642\u66f4\u65b0\u306e\u7af6\u5408\u5236\u5fa1</li> </ol>"},{"location":"article/part2/chapter09/#er_1","title":"\u5728\u5eab\u7ba1\u7406\u306e ER \u56f3\uff08\u5168\u4f53\u50cf\uff09","text":""},{"location":"article/part2/chapter09/#_20","title":"\u6b21\u7ae0\u306e\u4e88\u544a","text":"<p>\u7b2c10\u7ae0\u3067\u306f\u3001\u50b5\u52d9\u7ba1\u7406\u306e\u8a2d\u8a08\u306b\u9032\u307f\u307e\u3059\u3002\u8cb7\u639b\u91d1\u6b8b\u9ad8\u306e\u7ba1\u7406\u3001\u652f\u6255\u51e6\u7406\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\u3068\u5b9f\u88c5\u3092\u884c\u3044\u307e\u3059\u3002</p> <p>\u2190 \u7b2c8\u7ae0\uff1a\u8abf\u9054\u7ba1\u7406\u306e\u8a2d\u8a08 | \u7b2c10\u7ae0\uff1a\u50b5\u52d9\u7ba1\u7406\u306e\u8a2d\u8a08 \u2192</p>"},{"location":"article/part2/chapter10/","title":"\u7b2c10\u7ae0\uff1a\u50b5\u52d9\u7ba1\u7406\u306e\u8a2d\u8a08","text":"<p>\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306b\u304a\u3044\u3066\u3001\u50b5\u52d9\u7ba1\u7406\u306f\u4ed5\u5165\u5148\u3078\u306e\u652f\u6255\u3092\u9069\u5207\u306b\u7ba1\u7406\u3059\u308b\u305f\u3081\u306e\u91cd\u8981\u306a\u6a5f\u80fd\u3067\u3059\u3002\u672c\u7ae0\u3067\u306f\u3001\u652f\u6255\u7de0\u51e6\u7406\u3001\u652f\u6255\u65b9\u6cd5\u306e\u7ba1\u7406\u3001\u8cb7\u639b\u91d1\u6b8b\u9ad8\u7ba1\u7406\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\u3068\u5b9f\u88c5\u3092\u884c\u3044\u307e\u3059\u3002\u50b5\u6a29\u7ba1\u7406\uff08\u7b2c7\u7ae0\uff09\u3068\u5bfe\u3092\u306a\u3059\u6982\u5ff5\u3068\u3057\u3066\u3001\u4ed5\u5165\u5074\u304b\u3089\u306e\u8996\u70b9\u3067\u30c7\u30fc\u30bf\u69cb\u9020\u3092\u8a2d\u8a08\u3057\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter10/#_1","title":"\u652f\u6255\u696d\u52d9\u306e\u5168\u4f53\u50cf","text":"<p>\u652f\u6255\u696d\u52d9\u306f\u300c\u4ed5\u5165\u8a08\u4e0a \u2192 \u652f\u6255\u7de0\u51e6\u7406 \u2192 \u652f\u6255\u627f\u8a8d \u2192 \u652f\u6255\u5b9f\u884c \u2192 \u8cb7\u639b\u91d1\u6d88\u8fbc\u300d\u3068\u3044\u3046\u4e00\u9023\u306e\u30d5\u30ed\u30fc\u3067\u69cb\u6210\u3055\u308c\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter10/#_2","title":"\u652f\u6255\u7ba1\u7406\u3067\u6271\u3046\u30c7\u30fc\u30bf","text":"\u30c7\u30fc\u30bf \u8aac\u660e \u652f\u6255\u30c7\u30fc\u30bf \u652f\u6255\u7de0\u51e6\u7406\u3067\u4f5c\u6210\u3055\u308c\u308b\u30d8\u30c3\u30c0\u60c5\u5831 \u652f\u6255\u660e\u7d30\u30c7\u30fc\u30bf \u4ed5\u5165\u30c7\u30fc\u30bf\u3068\u306e\u7d10\u4ed8\u3051 \u8cb7\u639b\u91d1\u6b8b\u9ad8\u30c7\u30fc\u30bf \u4ed5\u5165\u5148\u5225\u30fb\u6708\u6b21\u306e\u6b8b\u9ad8\u7ba1\u7406 \u652f\u6255\u4e88\u5b9a\u30c7\u30fc\u30bf \u652f\u6255\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u306e\u7ba1\u7406"},{"location":"article/part2/chapter10/#101-db","title":"10.1 \u652f\u6255\u696d\u52d9\u306e DB \u8a2d\u8a08","text":""},{"location":"article/part2/chapter10/#_3","title":"\u652f\u6255\u7de0\u51e6\u7406\u306e\u4ed5\u7d44\u307f","text":"<p>\u652f\u6255\u7de0\u51e6\u7406\u306f\u3001\u50b5\u6a29\u7ba1\u7406\u306e\u8acb\u6c42\u7de0\u51e6\u7406\u3068\u5bfe\u306b\u306a\u308b\u4ed5\u7d44\u307f\u3067\u3059\u3002\u4ed5\u5165\u5148\u30de\u30b9\u30bf\u306b\u8a2d\u5b9a\u3055\u308c\u305f\u7de0\u65e5\u306b\u57fa\u3065\u3044\u3066\u3001\u4ed5\u5165\u30c7\u30fc\u30bf\u3092\u96c6\u8a08\u3057\u652f\u6255\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter10/#_4","title":"\u652f\u6255\u30b9\u30c6\u30fc\u30bf\u30b9\u306e\u9077\u79fb","text":"<p>\u652f\u6255\u30c7\u30fc\u30bf\u306f\u627f\u8a8d\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u306b\u5f93\u3063\u3066\u30b9\u30c6\u30fc\u30bf\u30b9\u304c\u5909\u5316\u3057\u307e\u3059\u3002</p> <p></p> \u30b9\u30c6\u30fc\u30bf\u30b9 \u8aac\u660e \u6b21\u306e\u30a2\u30af\u30b7\u30e7\u30f3 \u4f5c\u6210\u4e2d \u652f\u6255\u30c7\u30fc\u30bf\u4f5c\u6210\u76f4\u5f8c \u627f\u8a8d\u7533\u8acb\u307e\u305f\u306f\u53d6\u6d88 \u627f\u8a8d\u5f85\u3061 \u627f\u8a8d\u7533\u8acb\u6e08\u307f \u627f\u8a8d\u307e\u305f\u306f\u53d6\u6d88 \u627f\u8a8d\u6e08 \u7ba1\u7406\u8005\u304c\u627f\u8a8d \u652f\u6255\u5b9f\u884c \u652f\u6255\u6e08 \u652f\u6255\u51e6\u7406\u5b8c\u4e86 \u7d42\u4e86\u72b6\u614b \u53d6\u6d88 \u652f\u6255\u3092\u53d6\u308a\u6d88\u3057 \u7d42\u4e86\u72b6\u614b"},{"location":"article/part2/chapter10/#_5","title":"\u652f\u6255\u65b9\u6cd5\u306e\u7a2e\u985e","text":"\u652f\u6255\u65b9\u6cd5 \u8aac\u660e \u7279\u5fb4 \u632f\u8fbc \u9280\u884c\u632f\u8fbc \u6700\u3082\u4e00\u822c\u7684\u3001\u624b\u6570\u6599\u767a\u751f \u624b\u5f62 \u7d04\u675f\u624b\u5f62 \u652f\u6255\u30b5\u30a4\u30c8\u5ef6\u9577\u3001\u4e0d\u6e21\u308a\u30ea\u30b9\u30af \u73fe\u91d1 \u73fe\u91d1\u6255\u3044 \u5373\u6642\u6c7a\u6e08\u3001\u5c11\u984d\u5411\u3051 \u76f8\u6bba \u50b5\u6a29\u50b5\u52d9\u76f8\u6bba \u58f2\u639b\u91d1\u3068\u306e\u76f8\u6bba \u96fb\u5b50\u8a18\u9332\u50b5\u6a29 \u3067\u3093\u3055\u3044 \u624b\u5f62\u306e\u96fb\u5b50\u7248"},{"location":"article/part2/chapter10/#er","title":"\u652f\u6255\u95a2\u9023\u306e ER \u56f3","text":""},{"location":"article/part2/chapter10/#_6","title":"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff1a\u652f\u6255\u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210","text":"V017__create_payment_tables.sql <pre><code>-- src/main/resources/db/migration/V017__create_payment_tables.sql\n\n-- \u652f\u6255\u30b9\u30c6\u30fc\u30bf\u30b9\nCREATE TYPE \u652f\u6255\u30b9\u30c6\u30fc\u30bf\u30b9 AS ENUM ('\u4f5c\u6210\u4e2d', '\u627f\u8a8d\u5f85\u3061', '\u627f\u8a8d\u6e08', '\u652f\u6255\u6e08', '\u53d6\u6d88');\n\n-- \u652f\u6255\u65b9\u6cd5\u306b\u4e0d\u8db3\u3057\u3066\u3044\u308b\u5024\u3092\u8ffd\u52a0\uff08\u65e2\u5b58\u306eENUM\u306fV001\u3067\u5b9a\u7fa9\u6e08\u307f\uff09\nALTER TYPE \u652f\u6255\u65b9\u6cd5 ADD VALUE IF NOT EXISTS '\u76f8\u6bba';\nALTER TYPE \u652f\u6255\u65b9\u6cd5 ADD VALUE IF NOT EXISTS '\u96fb\u5b50\u8a18\u9332\u50b5\u6a29';\n\n-- \u652f\u6255\u30c7\u30fc\u30bf\uff08\u30d8\u30c3\u30c0\uff09\nCREATE TABLE \"\u652f\u6255\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u652f\u6255\u756a\u53f7\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u652f\u6255\u7de0\u65e5\" DATE NOT NULL,\n    \"\u652f\u6255\u4e88\u5b9a\u65e5\" DATE NOT NULL,\n    \"\u652f\u6255\u65b9\u6cd5\" \u652f\u6255\u65b9\u6cd5 NOT NULL,\n    \"\u652f\u6255\u91d1\u984d\" DECIMAL(15, 2) NOT NULL,\n    \"\u6d88\u8cbb\u7a0e\u984d\" DECIMAL(15, 2) NOT NULL,\n    \"\u6e90\u6cc9\u5fb4\u53ce\u984d\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u5dee\u5f15\u652f\u6255\u984d\" DECIMAL(15, 2) NOT NULL,\n    \"\u652f\u6255\u5b9f\u884c\u65e5\" DATE,\n    \"\u30b9\u30c6\u30fc\u30bf\u30b9\" \u652f\u6255\u30b9\u30c6\u30fc\u30bf\u30b9 DEFAULT '\u4f5c\u6210\u4e2d' NOT NULL,\n    \"\u632f\u8fbc\u5148\u9280\u884c\u30b3\u30fc\u30c9\" VARCHAR(10),\n    \"\u632f\u8fbc\u5148\u652f\u5e97\u30b3\u30fc\u30c9\" VARCHAR(10),\n    \"\u632f\u8fbc\u5148\u53e3\u5ea7\u7a2e\u5225\" VARCHAR(10),\n    \"\u632f\u8fbc\u5148\u53e3\u5ea7\u756a\u53f7\" VARCHAR(20),\n    \"\u632f\u8fbc\u5148\u53e3\u5ea7\u540d\u7fa9\" VARCHAR(100),\n    \"\u5099\u8003\" TEXT,\n    \"\u30d0\u30fc\u30b8\u30e7\u30f3\" INTEGER DEFAULT 1 NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u8005\" VARCHAR(50),\n    CONSTRAINT \"fk_\u652f\u6255_\u4ed5\u5165\u5148\"\n        FOREIGN KEY (\"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\") REFERENCES \"\u53d6\u5f15\u5148\u30de\u30b9\u30bf\"(\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\")\n);\n\n-- \u652f\u6255\u660e\u7d30\u30c7\u30fc\u30bf\nCREATE TABLE \"\u652f\u6255\u660e\u7d30\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u652f\u6255ID\" INTEGER NOT NULL,\n    \"\u652f\u6255\u884c\u756a\u53f7\" INTEGER NOT NULL,\n    \"\u4ed5\u5165\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u4ed5\u5165\u65e5\" DATE NOT NULL,\n    \"\u4ed5\u5165\u91d1\u984d\" DECIMAL(15, 2) NOT NULL,\n    \"\u6d88\u8cbb\u7a0e\u984d\" DECIMAL(15, 2) NOT NULL,\n    \"\u652f\u6255\u5bfe\u8c61\u91d1\u984d\" DECIMAL(15, 2) NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"fk_\u652f\u6255\u660e\u7d30_\u652f\u6255\"\n        FOREIGN KEY (\"\u652f\u6255ID\") REFERENCES \"\u652f\u6255\u30c7\u30fc\u30bf\"(\"ID\") ON DELETE CASCADE,\n    CONSTRAINT \"fk_\u652f\u6255\u660e\u7d30_\u4ed5\u5165\"\n        FOREIGN KEY (\"\u4ed5\u5165\u756a\u53f7\") REFERENCES \"\u4ed5\u5165\u30c7\u30fc\u30bf\"(\"\u4ed5\u5165\u756a\u53f7\"),\n    CONSTRAINT \"uk_\u652f\u6255\u660e\u7d30_\u652f\u6255_\u884c\" UNIQUE (\"\u652f\u6255ID\", \"\u652f\u6255\u884c\u756a\u53f7\")\n);\n\n-- \u8cb7\u639b\u91d1\u6b8b\u9ad8\u30c7\u30fc\u30bf\nCREATE TABLE \"\u8cb7\u639b\u91d1\u6b8b\u9ad8\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u5e74\u6708\" DATE NOT NULL,\n    \"\u524d\u6708\u6b8b\u9ad8\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u5f53\u6708\u4ed5\u5165\u9ad8\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u5f53\u6708\u652f\u6255\u9ad8\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u5f53\u6708\u6b8b\u9ad8\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u30d0\u30fc\u30b8\u30e7\u30f3\" INTEGER DEFAULT 1 NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"fk_\u8cb7\u639b\u91d1\u6b8b\u9ad8_\u4ed5\u5165\u5148\"\n        FOREIGN KEY (\"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\") REFERENCES \"\u53d6\u5f15\u5148\u30de\u30b9\u30bf\"(\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\"),\n    UNIQUE (\"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\", \"\u5e74\u6708\")\n);\n\n-- \u652f\u6255\u4e88\u5b9a\u30c7\u30fc\u30bf\nCREATE TABLE \"\u652f\u6255\u4e88\u5b9a\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u652f\u6255\u4e88\u5b9a\u65e5\" DATE NOT NULL,\n    \"\u652f\u6255\u4e88\u5b9a\u984d\" DECIMAL(15, 2) NOT NULL,\n    \"\u652f\u6255\u65b9\u6cd5\" \u652f\u6255\u65b9\u6cd5 NOT NULL,\n    \"\u652f\u6255\u6e08\u30d5\u30e9\u30b0\" BOOLEAN DEFAULT FALSE NOT NULL,\n    \"\u652f\u6255ID\" INTEGER,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"fk_\u652f\u6255\u4e88\u5b9a_\u4ed5\u5165\u5148\"\n        FOREIGN KEY (\"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\") REFERENCES \"\u53d6\u5f15\u5148\u30de\u30b9\u30bf\"(\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"fk_\u652f\u6255\u4e88\u5b9a_\u652f\u6255\"\n        FOREIGN KEY (\"\u652f\u6255ID\") REFERENCES \"\u652f\u6255\u30c7\u30fc\u30bf\"(\"ID\")\n);\n\n-- \u5f53\u6708\u6b8b\u9ad8\u3092\u81ea\u52d5\u8a08\u7b97\u3059\u308b\u30c8\u30ea\u30ac\u30fc\nCREATE OR REPLACE FUNCTION calculate_payable_balance()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.\"\u5f53\u6708\u6b8b\u9ad8\" := NEW.\"\u524d\u6708\u6b8b\u9ad8\" + NEW.\"\u5f53\u6708\u4ed5\u5165\u9ad8\" - NEW.\"\u5f53\u6708\u652f\u6255\u9ad8\";\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\nCREATE TRIGGER trg_\u8cb7\u639b\u91d1\u6b8b\u9ad8_\u6b8b\u9ad8\u8a08\u7b97\n    BEFORE INSERT OR UPDATE ON \"\u8cb7\u639b\u91d1\u6b8b\u9ad8\u30c7\u30fc\u30bf\"\n    FOR EACH ROW\n    EXECUTE FUNCTION calculate_payable_balance();\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"idx_\u652f\u6255_\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\" ON \"\u652f\u6255\u30c7\u30fc\u30bf\"(\"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u652f\u6255_\u652f\u6255\u7de0\u65e5\" ON \"\u652f\u6255\u30c7\u30fc\u30bf\"(\"\u652f\u6255\u7de0\u65e5\");\nCREATE INDEX \"idx_\u652f\u6255_\u652f\u6255\u4e88\u5b9a\u65e5\" ON \"\u652f\u6255\u30c7\u30fc\u30bf\"(\"\u652f\u6255\u4e88\u5b9a\u65e5\");\nCREATE INDEX \"idx_\u652f\u6255_\u30b9\u30c6\u30fc\u30bf\u30b9\" ON \"\u652f\u6255\u30c7\u30fc\u30bf\"(\"\u30b9\u30c6\u30fc\u30bf\u30b9\");\nCREATE INDEX \"idx_\u652f\u6255\u660e\u7d30_\u4ed5\u5165\u756a\u53f7\" ON \"\u652f\u6255\u660e\u7d30\u30c7\u30fc\u30bf\"(\"\u4ed5\u5165\u756a\u53f7\");\nCREATE INDEX \"idx_\u8cb7\u639b\u91d1\u6b8b\u9ad8_\u5e74\u6708\" ON \"\u8cb7\u639b\u91d1\u6b8b\u9ad8\u30c7\u30fc\u30bf\"(\"\u5e74\u6708\");\nCREATE INDEX \"idx_\u652f\u6255\u4e88\u5b9a_\u652f\u6255\u4e88\u5b9a\u65e5\" ON \"\u652f\u6255\u4e88\u5b9a\u30c7\u30fc\u30bf\"(\"\u652f\u6255\u4e88\u5b9a\u65e5\");\nCREATE INDEX \"idx_\u652f\u6255\u4e88\u5b9a_\u652f\u6255\u6e08\" ON \"\u652f\u6255\u4e88\u5b9a\u30c7\u30fc\u30bf\"(\"\u652f\u6255\u6e08\u30d5\u30e9\u30b0\");\n\n-- \u30c6\u30fc\u30d6\u30eb\u30b3\u30e1\u30f3\u30c8\nCOMMENT ON TABLE \"\u652f\u6255\u30c7\u30fc\u30bf\" IS '\u652f\u6255\u7de0\u51e6\u7406\u3067\u4f5c\u6210\u3055\u308c\u308b\u652f\u6255\u30d8\u30c3\u30c0\u60c5\u5831';\nCOMMENT ON TABLE \"\u652f\u6255\u660e\u7d30\u30c7\u30fc\u30bf\" IS '\u652f\u6255\u30c7\u30fc\u30bf\u3068\u4ed5\u5165\u30c7\u30fc\u30bf\u306e\u7d10\u4ed8\u3051';\nCOMMENT ON TABLE \"\u8cb7\u639b\u91d1\u6b8b\u9ad8\u30c7\u30fc\u30bf\" IS '\u4ed5\u5165\u5148\u5225\u30fb\u6708\u6b21\u306e\u8cb7\u639b\u91d1\u6b8b\u9ad8';\nCOMMENT ON TABLE \"\u652f\u6255\u4e88\u5b9a\u30c7\u30fc\u30bf\" IS '\u652f\u6255\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u306e\u7ba1\u7406';\nCOMMENT ON COLUMN \"\u652f\u6255\u30c7\u30fc\u30bf\".\"\u30d0\u30fc\u30b8\u30e7\u30f3\" IS '\u697d\u89b3\u30ed\u30c3\u30af\u7528\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7';\nCOMMENT ON COLUMN \"\u8cb7\u639b\u91d1\u6b8b\u9ad8\u30c7\u30fc\u30bf\".\"\u30d0\u30fc\u30b8\u30e7\u30f3\" IS '\u697d\u89b3\u30ed\u30c3\u30af\u7528\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7';\n</code></pre>"},{"location":"article/part2/chapter10/#_7","title":"\u652f\u6255\u95a2\u9023\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u5b9f\u88c5","text":"\u652f\u6255\u30b9\u30c6\u30fc\u30bf\u30b9 ENUM <pre><code>// src/main/java/com/example/sms/domain/model/payment/PaymentStatus.java\npackage com.example.sms.domain.model.payment;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum PaymentStatus {\n    DRAFT(\"\u4f5c\u6210\u4e2d\"),\n    PENDING_APPROVAL(\"\u627f\u8a8d\u5f85\u3061\"),\n    APPROVED(\"\u627f\u8a8d\u6e08\"),\n    PAID(\"\u652f\u6255\u6e08\"),\n    CANCELLED(\"\u53d6\u6d88\");\n\n    private final String displayName;\n\n    public static PaymentStatus fromDisplayName(String displayName) {\n        for (PaymentStatus status : values()) {\n            if (status.displayName.equals(displayName)) {\n                return status;\n            }\n        }\n        throw new IllegalArgumentException(\"Unknown payment status: \" + displayName);\n    }\n\n    /**\n     * \u627f\u8a8d\u53ef\u80fd\u306a\u30b9\u30c6\u30fc\u30bf\u30b9\u304b\u3069\u3046\u304b.\n     */\n    public boolean canApprove() {\n        return this == PENDING_APPROVAL;\n    }\n\n    /**\n     * \u652f\u6255\u5b9f\u884c\u53ef\u80fd\u306a\u30b9\u30c6\u30fc\u30bf\u30b9\u304b\u3069\u3046\u304b.\n     */\n    public boolean canExecute() {\n        return this == APPROVED;\n    }\n\n    /**\n     * \u53d6\u6d88\u53ef\u80fd\u306a\u30b9\u30c6\u30fc\u30bf\u30b9\u304b\u3069\u3046\u304b.\n     */\n    public boolean canCancel() {\n        return this == DRAFT || this == PENDING_APPROVAL;\n    }\n}\n</code></pre> \u652f\u6255\u65b9\u6cd5 ENUM <pre><code>// src/main/java/com/example/sms/domain/model/payment/PaymentMethod.java\npackage com.example.sms.domain.model.payment;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum PaymentMethod {\n    BANK_TRANSFER(\"\u632f\u8fbc\"),\n    BILL(\"\u624b\u5f62\"),\n    CASH(\"\u73fe\u91d1\"),\n    OFFSET(\"\u76f8\u6bba\"),\n    ELECTRONIC_RECORD(\"\u96fb\u5b50\u8a18\u9332\u50b5\u6a29\");\n\n    private final String displayName;\n\n    public static PaymentMethod fromDisplayName(String displayName) {\n        for (PaymentMethod method : values()) {\n            if (method.displayName.equals(displayName)) {\n                return method;\n            }\n        }\n        throw new IllegalArgumentException(\"Unknown payment method: \" + displayName);\n    }\n\n    /**\n     * \u632f\u8fbc\u5148\u60c5\u5831\u304c\u5fc5\u8981\u304b\u3069\u3046\u304b.\n     */\n    public boolean requiresBankInfo() {\n        return this == BANK_TRANSFER;\n    }\n}\n</code></pre> \u652f\u6255\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/sms/domain/model/payment/Payment.java\npackage com.example.sms.domain.model.payment;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Payment {\n    private Integer id;\n    private String paymentNumber;\n    private String supplierCode;\n    private LocalDate paymentClosingDate;\n    private LocalDate paymentDueDate;\n    private PaymentMethod paymentMethod;\n    private BigDecimal paymentAmount;\n    private BigDecimal taxAmount;\n    private BigDecimal withholdingAmount;\n    private BigDecimal netPaymentAmount;\n    private LocalDate paymentExecutionDate;\n    private PaymentStatus status;\n    private String bankCode;\n    private String branchCode;\n    private String accountType;\n    private String accountNumber;\n    private String accountName;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n\n    @Builder.Default\n    private Integer version = 1;\n\n    @Builder.Default\n    private List&lt;PaymentDetail&gt; details = new ArrayList&lt;&gt;();\n\n    /**\n     * \u660e\u7d30\u306e\u5408\u8a08\u91d1\u984d\u3092\u8a08\u7b97.\n     */\n    public BigDecimal calculateTotalAmount() {\n        if (details == null || details.isEmpty()) {\n            return BigDecimal.ZERO;\n        }\n        return details.stream()\n                .map(PaymentDetail::getPaymentTargetAmount)\n                .reduce(BigDecimal.ZERO, BigDecimal::add);\n    }\n\n    /**\n     * \u5dee\u5f15\u652f\u6255\u984d\u3092\u8a08\u7b97.\n     */\n    public BigDecimal calculateNetAmount() {\n        BigDecimal wh = withholdingAmount != null ? withholdingAmount : BigDecimal.ZERO;\n        return paymentAmount.add(taxAmount).subtract(wh);\n    }\n\n    /**\n     * \u627f\u8a8d\u7533\u8acb.\n     */\n    public void submitForApproval() {\n        if (this.status != PaymentStatus.DRAFT) {\n            throw new IllegalStateException(\"\u4f5c\u6210\u4e2d\u30b9\u30c6\u30fc\u30bf\u30b9\u306e\u307f\u627f\u8a8d\u7533\u8acb\u304c\u53ef\u80fd\u3067\u3059\");\n        }\n        this.status = PaymentStatus.PENDING_APPROVAL;\n    }\n\n    /**\n     * \u627f\u8a8d.\n     */\n    public void approve() {\n        if (!this.status.canApprove()) {\n            throw new IllegalStateException(\n                    \"\u3053\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3067\u306f\u627f\u8a8d\u3067\u304d\u307e\u305b\u3093: \" + this.status.getDisplayName());\n        }\n        this.status = PaymentStatus.APPROVED;\n    }\n\n    /**\n     * \u652f\u6255\u5b9f\u884c.\n     */\n    public void execute(LocalDate executionDate) {\n        if (!this.status.canExecute()) {\n            throw new IllegalStateException(\n                    \"\u3053\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3067\u306f\u652f\u6255\u5b9f\u884c\u3067\u304d\u307e\u305b\u3093: \" + this.status.getDisplayName());\n        }\n        this.paymentExecutionDate = executionDate;\n        this.status = PaymentStatus.PAID;\n    }\n\n    /**\n     * \u53d6\u6d88.\n     */\n    public void cancel() {\n        if (!this.status.canCancel()) {\n            throw new IllegalStateException(\n                    \"\u3053\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3067\u306f\u53d6\u6d88\u3067\u304d\u307e\u305b\u3093: \" + this.status.getDisplayName());\n        }\n        this.status = PaymentStatus.CANCELLED;\n    }\n}\n</code></pre> \u652f\u6255\u660e\u7d30\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/sms/domain/model/payment/PaymentDetail.java\npackage com.example.sms.domain.model.payment;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class PaymentDetail {\n    private Integer id;\n    private Integer paymentId;\n    private Integer lineNumber;\n    private String purchaseNumber;\n    private LocalDate purchaseDate;\n    private BigDecimal purchaseAmount;\n    private BigDecimal taxAmount;\n    private BigDecimal paymentTargetAmount;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n}\n</code></pre> \u8cb7\u639b\u91d1\u6b8b\u9ad8\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/sms/domain/model/payment/PayableBalance.java\npackage com.example.sms.domain.model.payment;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class PayableBalance {\n    private Integer id;\n    private String supplierCode;\n    private LocalDate yearMonth;\n    private BigDecimal previousBalance;\n    private BigDecimal currentPurchaseAmount;\n    private BigDecimal currentPaymentAmount;\n    private BigDecimal currentBalance;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n\n    @Builder.Default\n    private Integer version = 1;\n\n    /**\n     * \u6b8b\u9ad8\u3092\u8a08\u7b97.\n     */\n    public BigDecimal calculateBalance() {\n        BigDecimal prev = previousBalance != null ? previousBalance : BigDecimal.ZERO;\n        BigDecimal purchase = currentPurchaseAmount != null ? currentPurchaseAmount : BigDecimal.ZERO;\n        BigDecimal payment = currentPaymentAmount != null ? currentPaymentAmount : BigDecimal.ZERO;\n        return prev.add(purchase).subtract(payment);\n    }\n\n    /**\n     * \u4ed5\u5165\u3092\u52a0\u7b97.\n     */\n    public void addPurchase(BigDecimal amount) {\n        if (this.currentPurchaseAmount == null) {\n            this.currentPurchaseAmount = BigDecimal.ZERO;\n        }\n        this.currentPurchaseAmount = this.currentPurchaseAmount.add(amount);\n        this.currentBalance = calculateBalance();\n    }\n\n    /**\n     * \u652f\u6255\u3092\u52a0\u7b97.\n     */\n    public void addPayment(BigDecimal amount) {\n        if (this.currentPaymentAmount == null) {\n            this.currentPaymentAmount = BigDecimal.ZERO;\n        }\n        this.currentPaymentAmount = this.currentPaymentAmount.add(amount);\n        this.currentBalance = calculateBalance();\n    }\n}\n</code></pre> \u652f\u6255\u4e88\u5b9a\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/sms/domain/model/payment/PaymentSchedule.java\npackage com.example.sms.domain.model.payment;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class PaymentSchedule {\n    private Integer id;\n    private String supplierCode;\n    private LocalDate paymentDueDate;\n    private BigDecimal scheduledAmount;\n    private PaymentMethod paymentMethod;\n    @Builder.Default\n    private Boolean paidFlag = false;\n    private Integer paymentId;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n\n    /**\n     * \u652f\u6255\u6e08\u307f\u3068\u3057\u3066\u30de\u30fc\u30af.\n     */\n    public void markAsPaid(Integer paymentId) {\n        this.paidFlag = true;\n        this.paymentId = paymentId;\n    }\n\n    /**\n     * \u652f\u6255\u671f\u9650\u304c\u904e\u304e\u3066\u3044\u308b\u304b\u3069\u3046\u304b.\n     */\n    public boolean isOverdue() {\n        return !paidFlag &amp;&amp; LocalDate.now().isAfter(paymentDueDate);\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter10/#_8","title":"\u652f\u6255\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5\uff08\u53c2\u8003\u5b9f\u88c5\u4f8b\uff09","text":"<p>Note: \u4ee5\u4e0b\u306e\u30b5\u30fc\u30d3\u30b9\u5c64\u306e\u30b3\u30fc\u30c9\u306f\u53c2\u8003\u5b9f\u88c5\u4f8b\u3067\u3059\u3002\u73fe\u5728\u306f\u30ea\u30dd\u30b8\u30c8\u30ea\u5c64\uff08\u6c38\u7d9a\u5316\u5c64\uff09\u304c\u5b9f\u88c5\u6e08\u307f\u3067\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u5c64\u306f\u5225\u9014\u5b9f\u88c5\u304c\u5fc5\u8981\u3067\u3059\u3002</p> \u652f\u6255\u30b5\u30fc\u30d3\u30b9 <pre><code>// src/main/java/com/example/sms/application/service/PaymentService.java\npackage com.example.sms.application.service;\n\nimport com.example.sms.domain.model.partner.Partner;\nimport com.example.sms.domain.model.payment.*;\nimport com.example.sms.domain.model.purchase.Purchase;\nimport com.example.sms.infrastructure.out.persistence.mapper.*;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.format.DateTimeFormatter;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Service\n@RequiredArgsConstructor\npublic class PaymentService {\n\n    private final PaymentMapper paymentMapper;\n    private final PaymentDetailMapper paymentDetailMapper;\n    private final PayableBalanceMapper payableBalanceMapper;\n    private final PartnerMapper partnerMapper;\n    private final PurchaseMapper purchaseMapper;\n\n    /**\n     * \u652f\u6255\u756a\u53f7\u3092\u751f\u6210\n     */\n    private String generatePaymentNumber(LocalDate closingDate) {\n        String prefix = \"PAY-\" + closingDate.format(\n                DateTimeFormatter.ofPattern(\"yyyyMM\")) + \"-\";\n        String latestNumber = paymentMapper.findLatestPaymentNumber(prefix + \"%\");\n\n        int sequence = 1;\n        if (latestNumber != null) {\n            int currentSequence = Integer.parseInt(\n                    latestNumber.substring(latestNumber.length() - 4));\n            sequence = currentSequence + 1;\n        }\n\n        return prefix + String.format(\"%04d\", sequence);\n    }\n\n    /**\n     * \u652f\u6255\u4e88\u5b9a\u65e5\u3092\u8a08\u7b97\n     */\n    private LocalDate calculatePaymentDueDate(LocalDate closingDate,\n                                               Partner supplier) {\n        // \u7de0\u65e5\u306e\u7fcc\u6708\u304b\u3089\u652f\u6255\u6708\u6570\u5206\u3092\u52a0\u7b97\n        LocalDate baseDate = closingDate.plusMonths(supplier.getPaymentMonth());\n\n        // \u652f\u6255\u65e5\u3092\u8a2d\u5b9a\n        int paymentDay = supplier.getPaymentDay();\n        int maxDay = baseDate.lengthOfMonth();\n        if (paymentDay &gt; maxDay) {\n            paymentDay = maxDay; // \u6708\u672b\u51e6\u7406\n        }\n\n        return LocalDate.of(baseDate.getYear(), baseDate.getMonth(), paymentDay);\n    }\n\n    /**\n     * \u652f\u6255\u7de0\u51e6\u7406\u3092\u5b9f\u884c\n     */\n    @Transactional\n    public Payment processPaymentClosing(PaymentClosingInput input) {\n        // \u4ed5\u5165\u5148\u60c5\u5831\u3092\u53d6\u5f97\n        Partner supplier = partnerMapper.findByPartnerCode(input.getSupplierCode());\n        if (supplier == null) {\n            throw new IllegalArgumentException(\n                    \"\u4ed5\u5165\u5148\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + input.getSupplierCode());\n        }\n\n        // \u5bfe\u8c61\u4ed5\u5165\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\uff08\u524d\u56de\u7de0\u65e5\u7fcc\u65e5\uff5e\u4eca\u56de\u7de0\u65e5\uff09\n        List&lt;Purchase&gt; purchases = purchaseMapper.findBySupplierAndDateRange(\n                input.getSupplierCode(),\n                input.getFromDate() != null\n                        ? input.getFromDate()\n                        : LocalDate.of(1900, 1, 1),\n                input.getClosingDate()\n        );\n\n        if (purchases.isEmpty()) {\n            throw new IllegalStateException(\n                    \"\u5bfe\u8c61\u3068\u306a\u308b\u4ed5\u5165\u30c7\u30fc\u30bf\u304c\u3042\u308a\u307e\u305b\u3093\");\n        }\n\n        // \u652f\u6255\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\n        String paymentNumber = generatePaymentNumber(input.getClosingDate());\n        LocalDate paymentDueDate = calculatePaymentDueDate(\n                input.getClosingDate(), supplier);\n\n        BigDecimal totalAmount = BigDecimal.ZERO;\n        BigDecimal totalTax = BigDecimal.ZERO;\n\n        List&lt;PaymentDetail&gt; details = new ArrayList&lt;&gt;();\n        int detailNumber = 1;\n\n        for (Purchase purchase : purchases) {\n            totalAmount = totalAmount.add(purchase.getPurchaseAmount());\n            totalTax = totalTax.add(purchase.getTaxAmount());\n\n            PaymentDetail detail = PaymentDetail.builder()\n                    .paymentNumber(paymentNumber)\n                    .detailNumber(detailNumber++)\n                    .purchaseNumber(purchase.getPurchaseNumber())\n                    .purchaseDate(purchase.getPurchaseDate())\n                    .purchaseAmount(purchase.getPurchaseAmount())\n                    .taxAmount(purchase.getTaxAmount())\n                    .paymentTargetAmount(purchase.getTotalAmount())\n                    .build();\n            details.add(detail);\n        }\n\n        BigDecimal withholdingAmount = input.getWithholdingAmount() != null\n                ? input.getWithholdingAmount()\n                : BigDecimal.ZERO;\n        BigDecimal netAmount = totalAmount.add(totalTax)\n                .subtract(withholdingAmount);\n\n        Payment payment = Payment.builder()\n                .paymentNumber(paymentNumber)\n                .supplierCode(input.getSupplierCode())\n                .paymentClosingDate(input.getClosingDate())\n                .paymentDueDate(paymentDueDate)\n                .paymentMethod(input.getPaymentMethod())\n                .paymentAmount(totalAmount)\n                .taxAmount(totalTax)\n                .withholdingAmount(withholdingAmount)\n                .netPaymentAmount(netAmount)\n                .status(PaymentStatus.DRAFT)\n                .bankCode(supplier.getBankCode())\n                .branchCode(supplier.getBranchCode())\n                .accountType(supplier.getAccountType())\n                .accountNumber(supplier.getAccountNumber())\n                .accountName(supplier.getAccountName())\n                .build();\n\n        paymentMapper.insert(payment);\n\n        for (PaymentDetail detail : details) {\n            paymentDetailMapper.insert(detail);\n        }\n\n        payment.setDetails(details);\n        return payment;\n    }\n\n    /**\n     * \u627f\u8a8d\u7533\u8acb\n     */\n    @Transactional\n    public void submitForApproval(String paymentNumber) {\n        Payment payment = paymentMapper.findByPaymentNumber(paymentNumber);\n        if (payment == null) {\n            throw new IllegalArgumentException(\n                    \"\u652f\u6255\u30c7\u30fc\u30bf\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + paymentNumber);\n        }\n\n        payment.submitForApproval();\n        paymentMapper.updateStatus(paymentNumber, PaymentStatus.PENDING_APPROVAL);\n    }\n\n    /**\n     * \u627f\u8a8d\n     */\n    @Transactional\n    public void approve(String paymentNumber) {\n        Payment payment = paymentMapper.findByPaymentNumber(paymentNumber);\n        if (payment == null) {\n            throw new IllegalArgumentException(\n                    \"\u652f\u6255\u30c7\u30fc\u30bf\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + paymentNumber);\n        }\n\n        payment.approve();\n        paymentMapper.updateStatus(paymentNumber, PaymentStatus.APPROVED);\n    }\n\n    /**\n     * \u652f\u6255\u5b9f\u884c\n     */\n    @Transactional\n    public void executePayment(String paymentNumber, LocalDate executionDate) {\n        Payment payment = paymentMapper.findByPaymentNumber(paymentNumber);\n        if (payment == null) {\n            throw new IllegalArgumentException(\n                    \"\u652f\u6255\u30c7\u30fc\u30bf\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + paymentNumber);\n        }\n\n        payment.execute(executionDate);\n        paymentMapper.executePayment(paymentNumber, executionDate);\n\n        // \u8cb7\u639b\u91d1\u6b8b\u9ad8\u3092\u66f4\u65b0\n        LocalDate yearMonth = LocalDate.of(\n                executionDate.getYear(), executionDate.getMonth(), 1);\n        payableBalanceMapper.addPayment(\n                payment.getSupplierCode(), yearMonth, payment.getNetPaymentAmount());\n    }\n\n    /**\n     * \u652f\u6255\u53d6\u6d88\n     */\n    @Transactional\n    public void cancelPayment(String paymentNumber) {\n        Payment payment = paymentMapper.findByPaymentNumber(paymentNumber);\n        if (payment == null) {\n            throw new IllegalArgumentException(\n                    \"\u652f\u6255\u30c7\u30fc\u30bf\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + paymentNumber);\n        }\n\n        payment.cancel();\n        paymentMapper.updateStatus(paymentNumber, PaymentStatus.CANCELLED);\n    }\n\n    /**\n     * \u8cb7\u639b\u91d1\u6b8b\u9ad8\u3092\u53d6\u5f97\n     */\n    public PayableBalance getPayableBalance(String supplierCode,\n                                             LocalDate yearMonth) {\n        return payableBalanceMapper.findBySupplierAndYearMonth(\n                supplierCode, yearMonth);\n    }\n\n    /**\n     * \u6708\u6b21\u306e\u8cb7\u639b\u91d1\u5408\u8a08\u3092\u53d6\u5f97\n     */\n    public BigDecimal getTotalPayableByMonth(LocalDate yearMonth) {\n        return payableBalanceMapper.sumCurrentBalanceByYearMonth(yearMonth);\n    }\n\n    /**\n     * \u8cb7\u639b\u91d1\u6b8b\u9ad8\u3092\u521d\u671f\u5316\uff08\u6708\u6b21\u7e70\u8d8a\uff09\n     */\n    @Transactional\n    public PayableBalance initializePayableBalance(String supplierCode,\n                                                    LocalDate yearMonth) {\n        // \u524d\u6708\u6b8b\u9ad8\u3092\u53d6\u5f97\n        LocalDate previousMonth = yearMonth.minusMonths(1);\n        PayableBalance previousBalance = payableBalanceMapper\n                .findBySupplierAndYearMonth(supplierCode, previousMonth);\n\n        BigDecimal carryOver = BigDecimal.ZERO;\n        if (previousBalance != null) {\n            carryOver = previousBalance.getCurrentBalance();\n        }\n\n        PayableBalance newBalance = PayableBalance.builder()\n                .supplierCode(supplierCode)\n                .yearMonth(yearMonth)\n                .previousBalance(carryOver)\n                .currentPurchaseAmount(BigDecimal.ZERO)\n                .currentPaymentAmount(BigDecimal.ZERO)\n                .build();\n\n        payableBalanceMapper.insert(newBalance);\n        return newBalance;\n    }\n}\n</code></pre> \u652f\u6255\u7de0\u51e6\u7406\u306e\u5165\u529b\u30af\u30e9\u30b9 <pre><code>// src/main/java/com/example/sms/application/service/PaymentClosingInput.java\npackage com.example.sms.application.service;\n\nimport com.example.sms.domain.model.payment.PaymentMethod;\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\n\n@Data\n@Builder\npublic class PaymentClosingInput {\n    private String supplierCode;\n    private LocalDate closingDate;\n    private LocalDate fromDate;\n    private PaymentMethod paymentMethod;\n    private BigDecimal withholdingAmount;\n}\n</code></pre>"},{"location":"article/part2/chapter10/#102","title":"10.2 \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3068\u697d\u89b3\u30ed\u30c3\u30af\u306e\u8a2d\u8a08","text":""},{"location":"article/part2/chapter10/#mybatis-resultmap","title":"MyBatis \u30cd\u30b9\u30c8\u3057\u305f ResultMap \u306b\u3088\u308b\u95a2\u9023\u4ed8\u3051","text":"<p>\u652f\u6255\u30c7\u30fc\u30bf\u306f\u3001\u652f\u6255\uff08\u30d8\u30c3\u30c0\uff09\u2192 \u652f\u6255\u660e\u7d30\u306e2\u5c64\u69cb\u9020\u3092\u6301\u3061\u307e\u3059\u3002N+1 \u554f\u984c\u3092\u56de\u907f\u3059\u308b\u305f\u3081\u3001JOIN \u30af\u30a8\u30ea\u3067\u4e00\u62ec\u53d6\u5f97\u3057\u307e\u3059\u3002</p> <p></p> \u652f\u6255\u30c7\u30fc\u30bf\u306e\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\uff08PaymentMapper.xml\uff09 <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.sms.infrastructure.out.persistence.mapper.PaymentMapper\"&gt;\n\n    &lt;!-- \u652f\u6255\uff08\u30d8\u30c3\u30c0\uff09\u306e ResultMap --&gt;\n    &lt;resultMap id=\"PaymentWithDetailsResultMap\"\n               type=\"com.example.sms.domain.model.payment.Payment\"&gt;\n        &lt;id property=\"id\" column=\"p_id\"/&gt;\n        &lt;result property=\"paymentNumber\" column=\"p_\u652f\u6255\u756a\u53f7\"/&gt;\n        &lt;result property=\"supplierCode\" column=\"p_\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"paymentClosingDate\" column=\"p_\u652f\u6255\u7de0\u65e5\"/&gt;\n        &lt;result property=\"paymentDueDate\" column=\"p_\u652f\u6255\u4e88\u5b9a\u65e5\"/&gt;\n        &lt;result property=\"paymentMethod\" column=\"p_\u652f\u6255\u65b9\u6cd5\"\n                typeHandler=\"com.example.sms.infrastructure.out.persistence.typehandler.PaymentMethodTypeHandler\"/&gt;\n        &lt;result property=\"paymentAmount\" column=\"p_\u652f\u6255\u91d1\u984d\"/&gt;\n        &lt;result property=\"taxAmount\" column=\"p_\u6d88\u8cbb\u7a0e\u984d\"/&gt;\n        &lt;result property=\"withholdingAmount\" column=\"p_\u6e90\u6cc9\u5fb4\u53ce\u984d\"/&gt;\n        &lt;result property=\"netPaymentAmount\" column=\"p_\u5dee\u5f15\u652f\u6255\u984d\"/&gt;\n        &lt;result property=\"paymentExecutionDate\" column=\"p_\u652f\u6255\u5b9f\u884c\u65e5\"/&gt;\n        &lt;result property=\"status\" column=\"p_\u30b9\u30c6\u30fc\u30bf\u30b9\"\n                typeHandler=\"com.example.sms.infrastructure.out.persistence.typehandler.PaymentStatusTypeHandler\"/&gt;\n        &lt;result property=\"version\" column=\"p_\u30d0\u30fc\u30b8\u30e7\u30f3\"/&gt;\n        &lt;result property=\"createdAt\" column=\"p_\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"p_\u66f4\u65b0\u65e5\u6642\"/&gt;\n        &lt;!-- \u652f\u6255\u660e\u7d30\u3068\u306e1:N\u95a2\u9023 --&gt;\n        &lt;collection property=\"details\"\n                    ofType=\"com.example.sms.domain.model.payment.PaymentDetail\"\n                    resultMap=\"PaymentDetailNestedResultMap\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;!-- \u652f\u6255\u660e\u7d30\u306e\u30cd\u30b9\u30c8 ResultMap --&gt;\n    &lt;resultMap id=\"PaymentDetailNestedResultMap\"\n               type=\"com.example.sms.domain.model.payment.PaymentDetail\"&gt;\n        &lt;id property=\"id\" column=\"pd_id\"/&gt;\n        &lt;result property=\"paymentId\" column=\"pd_\u652f\u6255ID\"/&gt;\n        &lt;result property=\"lineNumber\" column=\"pd_\u652f\u6255\u884c\u756a\u53f7\"/&gt;\n        &lt;result property=\"purchaseNumber\" column=\"pd_\u4ed5\u5165\u756a\u53f7\"/&gt;\n        &lt;result property=\"purchaseDate\" column=\"pd_\u4ed5\u5165\u65e5\"/&gt;\n        &lt;result property=\"purchaseAmount\" column=\"pd_\u4ed5\u5165\u91d1\u984d\"/&gt;\n        &lt;result property=\"taxAmount\" column=\"pd_\u6d88\u8cbb\u7a0e\u984d\"/&gt;\n        &lt;result property=\"paymentTargetAmount\" column=\"pd_\u652f\u6255\u5bfe\u8c61\u91d1\u984d\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;!-- JOIN \u306b\u3088\u308b\u4e00\u62ec\u53d6\u5f97\u30af\u30a8\u30ea --&gt;\n    &lt;select id=\"findWithDetailsByPaymentNumber\"\n            resultMap=\"PaymentWithDetailsResultMap\"&gt;\n        SELECT\n            p.\"ID\" AS p_id,\n            p.\"\u652f\u6255\u756a\u53f7\" AS p_\u652f\u6255\u756a\u53f7,\n            p.\"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\" AS p_\u4ed5\u5165\u5148\u30b3\u30fc\u30c9,\n            p.\"\u652f\u6255\u7de0\u65e5\" AS p_\u652f\u6255\u7de0\u65e5,\n            p.\"\u652f\u6255\u4e88\u5b9a\u65e5\" AS p_\u652f\u6255\u4e88\u5b9a\u65e5,\n            p.\"\u652f\u6255\u65b9\u6cd5\" AS p_\u652f\u6255\u65b9\u6cd5,\n            p.\"\u652f\u6255\u91d1\u984d\" AS p_\u652f\u6255\u91d1\u984d,\n            p.\"\u6d88\u8cbb\u7a0e\u984d\" AS p_\u6d88\u8cbb\u7a0e\u984d,\n            p.\"\u6e90\u6cc9\u5fb4\u53ce\u984d\" AS p_\u6e90\u6cc9\u5fb4\u53ce\u984d,\n            p.\"\u5dee\u5f15\u652f\u6255\u984d\" AS p_\u5dee\u5f15\u652f\u6255\u984d,\n            p.\"\u652f\u6255\u5b9f\u884c\u65e5\" AS p_\u652f\u6255\u5b9f\u884c\u65e5,\n            p.\"\u30b9\u30c6\u30fc\u30bf\u30b9\" AS p_\u30b9\u30c6\u30fc\u30bf\u30b9,\n            p.\"\u30d0\u30fc\u30b8\u30e7\u30f3\" AS p_\u30d0\u30fc\u30b8\u30e7\u30f3,\n            p.\"\u4f5c\u6210\u65e5\u6642\" AS p_\u4f5c\u6210\u65e5\u6642,\n            p.\"\u66f4\u65b0\u65e5\u6642\" AS p_\u66f4\u65b0\u65e5\u6642,\n            pd.\"ID\" AS pd_id,\n            pd.\"\u652f\u6255ID\" AS pd_\u652f\u6255ID,\n            pd.\"\u652f\u6255\u884c\u756a\u53f7\" AS pd_\u652f\u6255\u884c\u756a\u53f7,\n            pd.\"\u4ed5\u5165\u756a\u53f7\" AS pd_\u4ed5\u5165\u756a\u53f7,\n            pd.\"\u4ed5\u5165\u65e5\" AS pd_\u4ed5\u5165\u65e5,\n            pd.\"\u4ed5\u5165\u91d1\u984d\" AS pd_\u4ed5\u5165\u91d1\u984d,\n            pd.\"\u6d88\u8cbb\u7a0e\u984d\" AS pd_\u6d88\u8cbb\u7a0e\u984d,\n            pd.\"\u652f\u6255\u5bfe\u8c61\u91d1\u984d\" AS pd_\u652f\u6255\u5bfe\u8c61\u91d1\u984d\n        FROM \"\u652f\u6255\u30c7\u30fc\u30bf\" p\n        LEFT JOIN \"\u652f\u6255\u660e\u7d30\u30c7\u30fc\u30bf\" pd\n            ON p.\"ID\" = pd.\"\u652f\u6255ID\"\n        WHERE p.\"\u652f\u6255\u756a\u53f7\" = #{paymentNumber}\n        ORDER BY pd.\"\u652f\u6255\u884c\u756a\u53f7\"\n    &lt;/select&gt;\n\n&lt;/mapper&gt;\n</code></pre>"},{"location":"article/part2/chapter10/#_9","title":"\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\u306e\u30dd\u30a4\u30f3\u30c8","text":"\u8a2d\u5b9a\u9805\u76ee \u8aac\u660e <code>&lt;collection&gt;</code> 1:N \u95a2\u9023\u306e\u30de\u30c3\u30d4\u30f3\u30b0 <code>&lt;id&gt;</code> \u4e3b\u30ad\u30fc\u306e\u8b58\u5225\uff08MyBatis \u304c\u91cd\u8907\u6392\u9664\u306b\u4f7f\u7528\uff09 <code>resultMap</code> \u30cd\u30b9\u30c8\u3057\u305f ResultMap \u306e\u53c2\u7167 \u30a8\u30a4\u30ea\u30a2\u30b9\uff08AS\uff09 \u30ab\u30e9\u30e0\u540d\u306e\u91cd\u8907\u3092\u907f\u3051\u308b\u305f\u3081\u306e\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9 <code>ORDER BY</code> \u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306e\u9806\u5e8f\u3092\u4fdd\u8a3c"},{"location":"article/part2/chapter10/#optimistic-locking","title":"\u697d\u89b3\u30ed\u30c3\u30af\uff08Optimistic Locking\uff09\u306e\u5b9f\u88c5","text":"<p>\u8907\u6570\u30e6\u30fc\u30b6\u30fc\u304c\u540c\u6642\u306b\u652f\u6255\u30c7\u30fc\u30bf\u3092\u7de8\u96c6\u3059\u308b\u5834\u5408\u3001\u30c7\u30fc\u30bf\u306e\u6574\u5408\u6027\u3092\u4fdd\u3064\u305f\u3081\u306b\u697d\u89b3\u30ed\u30c3\u30af\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter10/#_10","title":"\u30d0\u30fc\u30b8\u30e7\u30f3\u30ab\u30e9\u30e0\u306b\u3088\u308b\u540c\u6642\u66f4\u65b0\u5236\u5fa1","text":"\u697d\u89b3\u30ed\u30c3\u30af\u5bfe\u5fdc\u306e MyBatis Mapper <pre><code>&lt;!-- \u697d\u89b3\u30ed\u30c3\u30af\u5bfe\u5fdc\u306e\u652f\u6255\u66f4\u65b0 --&gt;\n&lt;update id=\"updateWithOptimisticLock\"\n        parameterType=\"com.example.sms.domain.model.payment.Payment\"&gt;\n    UPDATE \"\u652f\u6255\u30c7\u30fc\u30bf\"\n    SET\n        \"\u652f\u6255\u7de0\u65e5\" = #{paymentClosingDate},\n        \"\u652f\u6255\u4e88\u5b9a\u65e5\" = #{paymentDueDate},\n        \"\u652f\u6255\u65b9\u6cd5\" = #{paymentMethod,\n            typeHandler=com.example.sms.infrastructure.out.persistence.typehandler.PaymentMethodTypeHandler}::\u652f\u6255\u65b9\u6cd5,\n        \"\u652f\u6255\u91d1\u984d\" = #{paymentAmount},\n        \"\u6d88\u8cbb\u7a0e\u984d\" = #{taxAmount},\n        \"\u6e90\u6cc9\u5fb4\u53ce\u984d\" = #{withholdingAmount},\n        \"\u5dee\u5f15\u652f\u6255\u984d\" = #{netPaymentAmount},\n        \"\u30b9\u30c6\u30fc\u30bf\u30b9\" = #{status,\n            typeHandler=com.example.sms.infrastructure.out.persistence.typehandler.PaymentStatusTypeHandler}::\u652f\u6255\u30b9\u30c6\u30fc\u30bf\u30b9,\n        \"\u5099\u8003\" = #{remarks},\n        \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP,\n        \"\u30d0\u30fc\u30b8\u30e7\u30f3\" = \"\u30d0\u30fc\u30b8\u30e7\u30f3\" + 1\n    WHERE \"ID\" = #{id}\n    AND \"\u30d0\u30fc\u30b8\u30e7\u30f3\" = #{version}\n&lt;/update&gt;\n</code></pre> Repository \u5b9f\u88c5\uff1a\u697d\u89b3\u30ed\u30c3\u30af\u5bfe\u5fdc <pre><code>// src/main/java/com/example/sms/infrastructure/persistence/repository/PaymentRepositoryImpl.java\npackage com.example.sms.infrastructure.out.persistence.repository;\n\nimport com.example.sms.application.port.out.PaymentRepository;\nimport com.example.sms.domain.exception.OptimisticLockException;\nimport com.example.sms.domain.model.payment.*;\nimport com.example.sms.infrastructure.out.persistence.mapper.PaymentMapper;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Repository;\nimport org.springframework.transaction.annotation.Transactional;\n\n@Repository\n@RequiredArgsConstructor\npublic class PaymentRepositoryImpl implements PaymentRepository {\n\n    private final PaymentMapper paymentMapper;\n\n    /**\n     * \u697d\u89b3\u30ed\u30c3\u30af\u5bfe\u5fdc\u306e\u66f4\u65b0\n     * @throws OptimisticLockException \u4ed6\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u3088\u3063\u3066\u66f4\u65b0\u3055\u308c\u305f\u5834\u5408\n     */\n    @Override\n    @Transactional\n    public void update(Payment payment) {\n        int updatedCount = paymentMapper.updateWithOptimisticLock(payment);\n\n        if (updatedCount == 0) {\n            Integer currentVersion = paymentMapper.findVersionById(payment.getId());\n\n            if (currentVersion == null) {\n                throw new OptimisticLockException(\n                        \"\u652f\u6255\", payment.getId().toString());\n            } else {\n                throw new OptimisticLockException(\n                        \"\u652f\u6255\",\n                        payment.getId().toString(),\n                        payment.getVersion(),\n                        currentVersion\n                );\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter10/#_11","title":"\u697d\u89b3\u30ed\u30c3\u30af\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","text":"\u30dd\u30a4\u30f3\u30c8 \u8aac\u660e \u30d0\u30fc\u30b8\u30e7\u30f3\u30ab\u30e9\u30e0 INTEGER \u578b\u3067\u5341\u5206\uff08\u30aa\u30fc\u30d0\u30fc\u30d5\u30ed\u30fc\u306f\u73fe\u5b9f\u7684\u306b\u767a\u751f\u3057\u306a\u3044\uff09 WHERE \u6761\u4ef6 \u5fc5\u305a <code>AND \"\u30d0\u30fc\u30b8\u30e7\u30f3\" = #{version}</code> \u3092\u542b\u3081\u308b \u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8 <code>\"\u30d0\u30fc\u30b8\u30e7\u30f3\" = \"\u30d0\u30fc\u30b8\u30e7\u30f3\" + 1</code> \u3067\u30a2\u30c8\u30df\u30c3\u30af\u306b\u66f4\u65b0 \u4f8b\u5916\u51e6\u7406 \u66f4\u65b0\u4ef6\u6570\u304c0\u306e\u5834\u5408\u306f\u697d\u89b3\u30ed\u30c3\u30af\u4f8b\u5916\u3092\u30b9\u30ed\u30fc \u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8 \u30e6\u30fc\u30b6\u30fc\u306b\u308f\u304b\u308a\u3084\u3059\u3044\u30e1\u30c3\u30bb\u30fc\u30b8\u3067\u518d\u8aad\u307f\u8fbc\u307f\u3092\u4fc3\u3059"},{"location":"article/part2/chapter10/#_12","title":"\u50b5\u6a29\u7ba1\u7406\u3068\u306e\u5bfe\u6bd4","text":"<p>\u50b5\u6a29\u7ba1\u7406\uff08\u7b2c7\u7ae0\uff09\u3068\u50b5\u52d9\u7ba1\u7406\uff08\u7b2c10\u7ae0\uff09\u306f\u3001\u58f2\u308a\u624b\u3068\u8cb7\u3044\u624b\u306e\u7acb\u5834\u304c\u9006\u8ee2\u3057\u305f\u5bfe\u79f0\u7684\u306a\u95a2\u4fc2\u306b\u3042\u308a\u307e\u3059\u3002</p> \u9805\u76ee \u50b5\u6a29\u7ba1\u7406\uff08\u7b2c7\u7ae0\uff09 \u50b5\u52d9\u7ba1\u7406\uff08\u7b2c10\u7ae0\uff09 \u53d6\u5f15\u5148 \u9867\u5ba2 \u4ed5\u5165\u5148 \u7de0\u51e6\u7406 \u8acb\u6c42\u7de0\u51e6\u7406 \u652f\u6255\u7de0\u51e6\u7406 \u30c7\u30fc\u30bf \u8acb\u6c42\u30c7\u30fc\u30bf \u652f\u6255\u30c7\u30fc\u30bf \u6b8b\u9ad8 \u58f2\u639b\u91d1\u6b8b\u9ad8 \u8cb7\u639b\u91d1\u6b8b\u9ad8 \u6d88\u8fbc \u5165\u91d1\u6d88\u8fbc \u652f\u6255\u6d88\u8fbc \u4e88\u5b9a\u7ba1\u7406 \u56de\u53ce\u4e88\u5b9a \u652f\u6255\u4e88\u5b9a <p></p>"},{"location":"article/part2/chapter10/#10_1","title":"\u7b2c10\u7ae0\u306e\u307e\u3068\u3081","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u50b5\u52d9\u7ba1\u7406\uff08\u652f\u6255\u7de0\u51e6\u7406\u30fb\u8cb7\u639b\u91d1\u6b8b\u9ad8\u7ba1\u7406\uff09\u306e DB \u8a2d\u8a08\u3068\u5b9f\u88c5\u306b\u3064\u3044\u3066\u5b66\u3073\u307e\u3057\u305f\u3002</p>"},{"location":"article/part2/chapter10/#_13","title":"\u5b66\u3093\u3060\u3053\u3068","text":"<ol> <li>\u652f\u6255\u7de0\u51e6\u7406\u306e\u8a2d\u8a08</li> <li>\u4ed5\u5165\u30c7\u30fc\u30bf\u304b\u3089\u652f\u6255\u30c7\u30fc\u30bf\u3078\u306e\u96c6\u8a08</li> <li>\u652f\u6255\u4e88\u5b9a\u65e5\u306e\u81ea\u52d5\u8a08\u7b97\uff08\u652f\u6255\u30b5\u30a4\u30c8\uff09</li> <li> <p>\u627f\u8a8d\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\uff08\u4f5c\u6210\u2192\u627f\u8a8d\u5f85\u3061\u2192\u627f\u8a8d\u6e08\u2192\u652f\u6255\u6e08\uff09</p> </li> <li> <p>\u652f\u6255\u65b9\u6cd5\u306e\u7ba1\u7406</p> </li> <li>\u632f\u8fbc\u3001\u624b\u5f62\u3001\u73fe\u91d1\u3001\u76f8\u6bba\u3001\u96fb\u5b50\u8a18\u9332\u50b5\u6a29</li> <li> <p>\u652f\u6255\u65b9\u6cd5\u306b\u5fdc\u3058\u305f\u5fc5\u8981\u60c5\u5831\u306e\u7ba1\u7406</p> </li> <li> <p>\u8cb7\u639b\u91d1\u6b8b\u9ad8\u7ba1\u7406\u306e\u8a2d\u8a08</p> </li> <li>\u4ed5\u5165\u5148\u5225\u306e\u6b8b\u9ad8\u7ba1\u7406</li> <li>\u6708\u6b21\u7e70\u8d8a\u51e6\u7406</li> <li> <p>\u5f53\u6708\u6b8b\u9ad8\u306e\u81ea\u52d5\u8a08\u7b97\uff08\u30c8\u30ea\u30ac\u30fc\uff09</p> </li> <li> <p>\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3068\u697d\u89b3\u30ed\u30c3\u30af</p> </li> <li>N+1 \u554f\u984c\u306e\u56de\u907f\uff08JOIN \u306b\u3088\u308b\u4e00\u62ec\u53d6\u5f97\uff09</li> <li>\u540c\u6642\u66f4\u65b0\u306e\u7af6\u5408\u5236\u5fa1</li> </ol>"},{"location":"article/part2/chapter10/#_14","title":"\u30c6\u30fc\u30d6\u30eb\u4e00\u89a7","text":"\u30c6\u30fc\u30d6\u30eb\u540d\uff08\u65e5\u672c\u8a9e\uff09 Java \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 \u8aac\u660e \u652f\u6255\u30c7\u30fc\u30bf Payment \u652f\u6255\u30d8\u30c3\u30c0\u60c5\u5831 \u652f\u6255\u660e\u7d30\u30c7\u30fc\u30bf PaymentDetail \u4ed5\u5165\u3068\u306e\u7d10\u4ed8\u3051 \u8cb7\u639b\u91d1\u6b8b\u9ad8\u30c7\u30fc\u30bf PayableBalance \u6708\u6b21\u6b8b\u9ad8\u7ba1\u7406 \u652f\u6255\u4e88\u5b9a\u30c7\u30fc\u30bf PaymentSchedule \u652f\u6255\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb"},{"location":"article/part2/chapter10/#enum","title":"ENUM \u4e00\u89a7","text":"DB ENUM \u578b\uff08\u65e5\u672c\u8a9e\uff09 Java Enum \u5024 \u652f\u6255\u30b9\u30c6\u30fc\u30bf\u30b9 PaymentStatus \u4f5c\u6210\u4e2d\u2192DRAFT, \u627f\u8a8d\u5f85\u3061\u2192PENDING_APPROVAL, \u627f\u8a8d\u6e08\u2192APPROVED, \u652f\u6255\u6e08\u2192PAID, \u53d6\u6d88\u2192CANCELLED \u652f\u6255\u65b9\u6cd5 PaymentMethod \u632f\u8fbc\u2192BANK_TRANSFER, \u624b\u5f62\u2192BILL, \u73fe\u91d1\u2192CASH, \u76f8\u6bba\u2192OFFSET, \u96fb\u5b50\u8a18\u9332\u50b5\u6a29\u2192ELECTRONIC_RECORD"},{"location":"article/part2/chapter10/#_15","title":"\u6b21\u7ae0\u306e\u4e88\u544a","text":"<p>\u7b2c11\u7ae0\u3067\u306f\u3001\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u5168\u4f53\u50cf\u306b\u9032\u307f\u307e\u3059\u3002\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3067\u767a\u751f\u3057\u305f\u53d6\u5f15\u3092\u8ca1\u52d9\u4f1a\u8a08\u306e\u4ed5\u8a33\u3068\u3057\u3066\u3069\u306e\u3088\u3046\u306b\u8a18\u9332\u3059\u308b\u304b\u3092\u5b66\u3073\u307e\u3059\u3002</p> <p>\u2190 \u7b2c9\u7ae0\uff1a\u5728\u5eab\u7ba1\u7406\u306e\u8a2d\u8a08 | \u7b2c11\u7ae0\uff1a\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u5168\u4f53\u50cf \u2192</p>"},{"location":"article/part2/chapter11/","title":"\u7b2c11\u7ae0\uff1a\u5171\u901a\u51e6\u7406\u306e\u8a2d\u8a08","text":"<p>\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3067\u306f\u3001\u8d64\u9ed2\u51e6\u7406\u3001\u81ea\u52d5\u63a1\u756a\u3001\u76e3\u67fb\u30ab\u30e9\u30e0\u3001\u5c65\u6b74\u7ba1\u7406\u3068\u3044\u3063\u305f\u5171\u901a\u7684\u306a\u51e6\u7406\u304c\u591a\u304f\u306e\u696d\u52d9\u3067\u6a2a\u65ad\u7684\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002\u672c\u7ae0\u3067\u306f\u3001\u3053\u308c\u3089\u306e\u5171\u901a\u51e6\u7406\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\u3068\u5b9f\u88c5\u3092\u884c\u3044\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter11/#_1","title":"\u5171\u901a\u51e6\u7406\u306e\u5168\u4f53\u50cf","text":"<p>\u5171\u901a\u51e6\u7406\u306f\u3001\u696d\u52d9\u30c7\u30fc\u30bf\u306e\u6574\u5408\u6027\u3001\u8ffd\u8de1\u53ef\u80fd\u6027\u3001\u904b\u7528\u52b9\u7387\u3092\u9ad8\u3081\u308b\u305f\u3081\u306e\u57fa\u76e4\u6a5f\u80fd\u3067\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter11/#_2","title":"\u5171\u901a\u51e6\u7406\u306e\u5f79\u5272","text":"\u51e6\u7406 \u5f79\u5272 \u4e3b\u306a\u5229\u7528\u5834\u9762 \u8d64\u9ed2\u51e6\u7406 \u78ba\u5b9a\u6e08\u307f\u4f1d\u7968\u306e\u8a02\u6b63 \u58f2\u4e0a\u30fb\u4ed5\u5165\u306e\u91d1\u984d\u8a02\u6b63\u3001\u53d6\u6d88 \u81ea\u52d5\u63a1\u756a \u4e00\u610f\u306a\u756a\u53f7\u306e\u767a\u884c \u4f1d\u7968\u756a\u53f7\u306e\u81ea\u52d5\u751f\u6210 \u76e3\u67fb\u30ab\u30e9\u30e0 \u5909\u66f4\u8005\u30fb\u65e5\u6642\u306e\u8a18\u9332 \u5168\u30c6\u30fc\u30d6\u30eb\u5171\u901a \u5c65\u6b74\u7ba1\u7406 \u5909\u66f4\u524d\u5f8c\u306e\u72b6\u614b\u4fdd\u5b58 \u30de\u30b9\u30bf\u5909\u66f4\u3001\u91cd\u8981\u30c7\u30fc\u30bf"},{"location":"article/part2/chapter11/#111","title":"11.1 \u8d64\u9ed2\u51e6\u7406\u306e\u8a2d\u8a08","text":""},{"location":"article/part2/chapter11/#_3","title":"\u8d64\u9ed2\u51e6\u7406\u3068\u306f","text":"<p>\u8d64\u9ed2\u51e6\u7406\u306f\u3001\u78ba\u5b9a\u6e08\u307f\u306e\u4f1d\u7968\u3092\u8a02\u6b63\u3059\u308b\u969b\u306b\u4f7f\u7528\u3059\u308b\u4f1a\u8a08\u7684\u624b\u6cd5\u3067\u3059\u3002\u5143\u306e\u4f1d\u7968\u3092\u300c\u8d64\u4f1d\u7968\u300d\u3067\u30de\u30a4\u30ca\u30b9\u8a08\u4e0a\u3057\u3001\u6b63\u3057\u3044\u5185\u5bb9\u3092\u300c\u9ed2\u4f1d\u7968\u300d\u3067\u518d\u8a08\u4e0a\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter11/#_4","title":"\u306a\u305c\u8d64\u9ed2\u51e6\u7406\u304c\u5fc5\u8981\u304b","text":"\u65b9\u5f0f \u30e1\u30ea\u30c3\u30c8 \u30c7\u30e1\u30ea\u30c3\u30c8 \u7269\u7406\u524a\u9664 \u30b7\u30f3\u30d7\u30eb \u76e3\u67fb\u8a3c\u8de1\u306a\u3057\u3001\u5fa9\u5143\u4e0d\u53ef \u8ad6\u7406\u524a\u9664 \u8a3c\u8de1\u4fdd\u6301 \u96c6\u8a08\u6642\u306b\u9664\u5916\u51e6\u7406\u5fc5\u8981 \u8d64\u9ed2\u51e6\u7406 \u76e3\u67fb\u8a3c\u8de1\u5b8c\u5168\u3001\u4f1a\u8a08\u7684\u306b\u6b63\u78ba \u4f1d\u7968\u6570\u5897\u52a0 <p>\u4f1a\u8a08\u9818\u57df\u3067\u306f\u3001\u4e00\u5ea6\u78ba\u5b9a\u3057\u305f\u4f1d\u7968\u3092\u76f4\u63a5\u4fee\u6b63\u3059\u308b\u3053\u3068\u306f\u8a8d\u3081\u3089\u308c\u307e\u305b\u3093\u3002\u8d64\u9ed2\u51e6\u7406\u306b\u3088\u308a\u3001\u3059\u3079\u3066\u306e\u5909\u66f4\u5c65\u6b74\u304c\u4f1d\u7968\u3068\u3057\u3066\u6b8b\u308a\u3001\u76e3\u67fb\u5bfe\u5fdc\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter11/#_5","title":"\u4f1d\u7968\u533a\u5206\u306e\u5b9a\u7fa9","text":"\u4f1d\u7968\u533a\u5206 \u8aac\u660e \u91d1\u984d\u306e\u7b26\u53f7 \u901a\u5e38 \u901a\u5e38\u306e\u696d\u52d9\u4f1d\u7968 \u6b63 \u8d64\u4f1d \u5143\u4f1d\u7968\u3092\u6253\u3061\u6d88\u3059\u4f1d\u7968 \u8ca0\uff08\u30de\u30a4\u30ca\u30b9\uff09 \u9ed2\u4f1d \u8a02\u6b63\u5f8c\u306e\u5185\u5bb9\u3092\u8a08\u4e0a\u3059\u308b\u4f1d\u7968 \u6b63"},{"location":"article/part2/chapter11/#er","title":"\u8d64\u9ed2\u51e6\u7406\u306e ER \u56f3","text":""},{"location":"article/part2/chapter11/#_6","title":"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff1a\u8d64\u9ed2\u51e6\u7406\u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210","text":"V018__create_redblack_tables.sql <pre><code>-- src/main/resources/db/migration/V018__create_redblack_tables.sql\n\n-- \u4f1d\u7968\u533a\u5206\nCREATE TYPE \u4f1d\u7968\u533a\u5206 AS ENUM ('\u901a\u5e38', '\u8d64\u4f1d', '\u9ed2\u4f1d');\n\n-- \u8d64\u9ed2\u51e6\u7406\u5c65\u6b74\u30c7\u30fc\u30bf\nCREATE TABLE \"\u8d64\u9ed2\u51e6\u7406\u5c65\u6b74\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u51e6\u7406\u756a\u53f7\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u51e6\u7406\u65e5\u6642\" TIMESTAMP NOT NULL,\n    \"\u4f1d\u7968\u7a2e\u5225\" VARCHAR(20) NOT NULL,\n    \"\u5143\u4f1d\u7968\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u8d64\u4f1d\u7968\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u9ed2\u4f1d\u7968\u756a\u53f7\" VARCHAR(20),\n    \"\u51e6\u7406\u7406\u7531\" TEXT NOT NULL,\n    \"\u51e6\u7406\u8005\" VARCHAR(50) NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL\n);\n\n-- \u58f2\u4e0a\u30c7\u30fc\u30bf\u306b\u4f1d\u7968\u533a\u5206\u3092\u8ffd\u52a0\nALTER TABLE \"\u58f2\u4e0a\u30c7\u30fc\u30bf\" ADD COLUMN IF NOT EXISTS \"\u4f1d\u7968\u533a\u5206\" \u4f1d\u7968\u533a\u5206 DEFAULT '\u901a\u5e38' NOT NULL;\nALTER TABLE \"\u58f2\u4e0a\u30c7\u30fc\u30bf\" ADD COLUMN IF NOT EXISTS \"\u5143\u4f1d\u7968\u756a\u53f7\" VARCHAR(20);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"idx_\u8d64\u9ed2\u51e6\u7406\u5c65\u6b74_\u5143\u4f1d\u7968\u756a\u53f7\" ON \"\u8d64\u9ed2\u51e6\u7406\u5c65\u6b74\u30c7\u30fc\u30bf\"(\"\u5143\u4f1d\u7968\u756a\u53f7\");\nCREATE INDEX \"idx_\u8d64\u9ed2\u51e6\u7406\u5c65\u6b74_\u51e6\u7406\u65e5\u6642\" ON \"\u8d64\u9ed2\u51e6\u7406\u5c65\u6b74\u30c7\u30fc\u30bf\"(\"\u51e6\u7406\u65e5\u6642\");\n\n-- \u30c6\u30fc\u30d6\u30eb\u30b3\u30e1\u30f3\u30c8\nCOMMENT ON TABLE \"\u8d64\u9ed2\u51e6\u7406\u5c65\u6b74\u30c7\u30fc\u30bf\" IS '\u78ba\u5b9a\u6e08\u307f\u4f1d\u7968\u306e\u8a02\u6b63\u5c65\u6b74\u3092\u7ba1\u7406\u3059\u308b\u30c6\u30fc\u30d6\u30eb';\nCOMMENT ON COLUMN \"\u8d64\u9ed2\u51e6\u7406\u5c65\u6b74\u30c7\u30fc\u30bf\".\"\u4f1d\u7968\u7a2e\u5225\" IS '\u5bfe\u8c61\u4f1d\u7968\u306e\u7a2e\u985e\uff08\u58f2\u4e0a\u3001\u4ed5\u5165\u3001\u8acb\u6c42\u3001\u652f\u6255\uff09';\n</code></pre>"},{"location":"article/part2/chapter11/#_7","title":"\u8d64\u9ed2\u51e6\u7406\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u5b9f\u88c5","text":"\u4f1d\u7968\u533a\u5206 ENUM <pre><code>// src/main/java/com/example/sms/domain/model/common/SlipType.java\npackage com.example.sms.domain.model.common;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n/**\n * \u4f1d\u7968\u533a\u5206.\n */\n@Getter\n@RequiredArgsConstructor\npublic enum SlipType {\n    NORMAL(\"\u901a\u5e38\"),\n    RED(\"\u8d64\u4f1d\"),\n    BLACK(\"\u9ed2\u4f1d\");\n\n    private final String displayName;\n\n    /**\n     * \u8868\u793a\u540d\u304b\u3089\u4f1d\u7968\u533a\u5206\u3092\u53d6\u5f97.\n     *\n     * @param displayName \u8868\u793a\u540d\n     * @return \u4f1d\u7968\u533a\u5206\n     */\n    public static SlipType fromDisplayName(String displayName) {\n        for (SlipType type : values()) {\n            if (type.displayName.equals(displayName)) {\n                return type;\n            }\n        }\n        throw new IllegalArgumentException(\"Unknown slip type: \" + displayName);\n    }\n\n    /**\n     * \u8d64\u4f1d\u304b\u3069\u3046\u304b.\n     *\n     * @return \u8d64\u4f1d\u306e\u5834\u5408true\n     */\n    public boolean isRed() {\n        return this == RED;\n    }\n\n    /**\n     * \u7b26\u53f7\u3092\u53d6\u5f97\uff08\u8d64\u4f1d\u306f\u30de\u30a4\u30ca\u30b9\uff09.\n     *\n     * @return \u8d64\u4f1d\u306f-1\u3001\u305d\u308c\u4ee5\u5916\u306f1\n     */\n    public int getSign() {\n        return this == RED ? -1 : 1;\n    }\n}\n</code></pre> \u8d64\u9ed2\u51e6\u7406\u5c65\u6b74\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/sms/domain/model/common/RedBlackHistory.java\npackage com.example.sms.domain.model.common;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.time.LocalDateTime;\n\n/**\n * \u8d64\u9ed2\u51e6\u7406\u5c65\u6b74.\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class RedBlackHistory {\n    /** ID. */\n    private Integer id;\n    /** \u51e6\u7406\u756a\u53f7. */\n    private String processNumber;\n    /** \u51e6\u7406\u65e5\u6642. */\n    private LocalDateTime processDateTime;\n    /** \u4f1d\u7968\u7a2e\u5225. */\n    private String slipCategory;\n    /** \u5143\u4f1d\u7968\u756a\u53f7. */\n    private String originalSlipNumber;\n    /** \u8d64\u4f1d\u7968\u756a\u53f7. */\n    private String redSlipNumber;\n    /** \u9ed2\u4f1d\u7968\u756a\u53f7. */\n    private String blackSlipNumber;\n    /** \u51e6\u7406\u7406\u7531. */\n    private String processReason;\n    /** \u51e6\u7406\u8005. */\n    private String processedBy;\n    /** \u4f5c\u6210\u65e5\u6642. */\n    private LocalDateTime createdAt;\n}\n</code></pre>"},{"location":"article/part2/chapter11/#_8","title":"\u8d64\u9ed2\u51e6\u7406\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":"<p>Note: \u4ee5\u4e0b\u306e\u30b5\u30fc\u30d3\u30b9\u5c64\u30b3\u30fc\u30c9\u306f\u53c2\u8003\u5b9f\u88c5\u4f8b\u3067\u3059\u3002\u5b9f\u969b\u306e\u30b7\u30b9\u30c6\u30e0\u3067\u306f\u8981\u4ef6\u306b\u5fdc\u3058\u3066\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> \u8d64\u9ed2\u51e6\u7406\u30b5\u30fc\u30d3\u30b9 <pre><code>// src/main/java/com/example/sms/application/service/RedBlackService.java\npackage com.example.sms.application.service;\n\nimport com.example.sms.domain.model.common.*;\nimport com.example.sms.domain.model.sales.*;\nimport com.example.sms.infrastructure.persistence.mapper.*;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.time.LocalDateTime;\nimport java.time.format.DateTimeFormatter;\nimport java.util.List;\n\n@Service\n@RequiredArgsConstructor\npublic class RedBlackService {\n\n    private final RedBlackHistoryMapper redBlackHistoryMapper;\n    private final SalesMapper salesMapper;\n    private final SalesDetailMapper salesDetailMapper;\n    private final NumberingService numberingService;\n\n    /**\n     * \u51e6\u7406\u756a\u53f7\u3092\u751f\u6210\n     */\n    private String generateProcessNumber() {\n        String prefix = \"RB-\" + LocalDateTime.now().format(\n                DateTimeFormatter.ofPattern(\"yyyyMMdd\")) + \"-\";\n        String latestNumber = redBlackHistoryMapper.findLatestProcessNumber(prefix + \"%\");\n\n        int sequence = 1;\n        if (latestNumber != null) {\n            int currentSequence = Integer.parseInt(\n                    latestNumber.substring(latestNumber.length() - 4));\n            sequence = currentSequence + 1;\n        }\n\n        return prefix + String.format(\"%04d\", sequence);\n    }\n\n    /**\n     * \u58f2\u4e0a\u306e\u8d64\u9ed2\u51e6\u7406\u3092\u5b9f\u884c\n     */\n    @Transactional\n    public RedBlackResult processSalesRedBlack(RedBlackInput input) {\n        // \u5143\u4f1d\u7968\u3092\u53d6\u5f97\n        Sales originalSales = salesMapper.findBySalesNumber(\n                input.getOriginalSlipNumber());\n        if (originalSales == null) {\n            throw new IllegalArgumentException(\n                    \"\u5143\u4f1d\u7968\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + input.getOriginalSlipNumber());\n        }\n\n        if (originalSales.getSlipType() != SlipType.NORMAL) {\n            throw new IllegalStateException(\n                    \"\u901a\u5e38\u4f1d\u7968\u4ee5\u5916\u306f\u8d64\u9ed2\u51e6\u7406\u3067\u304d\u307e\u305b\u3093\");\n        }\n\n        List&lt;SalesDetail&gt; originalDetails = salesDetailMapper\n                .findBySalesNumber(input.getOriginalSlipNumber());\n\n        // \u8d64\u4f1d\u7968\u3092\u4f5c\u6210\uff08\u5143\u4f1d\u7968\u306e\u30de\u30a4\u30ca\u30b9\uff09\n        String redSlipNumber = numberingService.generateSalesNumber();\n        Sales redSales = createRedSales(originalSales, redSlipNumber);\n        salesMapper.insert(redSales);\n\n        for (SalesDetail detail : originalDetails) {\n            SalesDetail redDetail = createRedDetail(detail, redSlipNumber);\n            salesDetailMapper.insert(redDetail);\n        }\n\n        // \u9ed2\u4f1d\u7968\u3092\u4f5c\u6210\uff08\u8a02\u6b63\u5f8c\u306e\u5185\u5bb9\uff09\n        String blackSlipNumber = null;\n        if (input.getCorrectedData() != null) {\n            blackSlipNumber = numberingService.generateSalesNumber();\n            Sales blackSales = createBlackSales(\n                    originalSales, blackSlipNumber, input.getCorrectedData());\n            salesMapper.insert(blackSales);\n\n            for (CorrectedDetailData correctedDetail :\n                    input.getCorrectedData().getDetails()) {\n                SalesDetail blackDetail = createBlackDetail(\n                        correctedDetail, blackSlipNumber);\n                salesDetailMapper.insert(blackDetail);\n            }\n        }\n\n        // \u8d64\u9ed2\u51e6\u7406\u5c65\u6b74\u3092\u8a18\u9332\n        String processNumber = generateProcessNumber();\n        RedBlackHistory history = RedBlackHistory.builder()\n                .processNumber(processNumber)\n                .processDateTime(LocalDateTime.now())\n                .slipCategory(\"\u58f2\u4e0a\")\n                .originalSlipNumber(input.getOriginalSlipNumber())\n                .redSlipNumber(redSlipNumber)\n                .blackSlipNumber(blackSlipNumber)\n                .processReason(input.getProcessReason())\n                .processedBy(input.getProcessedBy())\n                .build();\n        redBlackHistoryMapper.insert(history);\n\n        return RedBlackResult.builder()\n                .processNumber(processNumber)\n                .originalSlipNumber(input.getOriginalSlipNumber())\n                .redSlipNumber(redSlipNumber)\n                .blackSlipNumber(blackSlipNumber)\n                .build();\n    }\n\n    private Sales createRedSales(Sales original, String redSlipNumber) {\n        return Sales.builder()\n                .salesNumber(redSlipNumber)\n                .customerCode(original.getCustomerCode())\n                .salesDate(original.getSalesDate())\n                .salesAmount(original.getSalesAmount().negate())\n                .taxAmount(original.getTaxAmount().negate())\n                .totalAmount(original.getTotalAmount().negate())\n                .slipType(SlipType.RED)\n                .originalSlipNumber(original.getSalesNumber())\n                .status(SalesStatus.CONFIRMED)\n                .build();\n    }\n\n    private SalesDetail createRedDetail(SalesDetail original,\n                                         String redSlipNumber) {\n        return SalesDetail.builder()\n                .salesNumber(redSlipNumber)\n                .detailNumber(original.getDetailNumber())\n                .productCode(original.getProductCode())\n                .quantity(original.getQuantity().negate())\n                .unitPrice(original.getUnitPrice())\n                .amount(original.getAmount().negate())\n                .build();\n    }\n\n    private Sales createBlackSales(Sales original, String blackSlipNumber,\n                                    CorrectedSalesData correctedData) {\n        return Sales.builder()\n                .salesNumber(blackSlipNumber)\n                .customerCode(correctedData.getCustomerCode() != null\n                        ? correctedData.getCustomerCode()\n                        : original.getCustomerCode())\n                .salesDate(correctedData.getSalesDate() != null\n                        ? correctedData.getSalesDate()\n                        : original.getSalesDate())\n                .salesAmount(correctedData.getSalesAmount())\n                .taxAmount(correctedData.getTaxAmount())\n                .totalAmount(correctedData.getTotalAmount())\n                .slipType(SlipType.BLACK)\n                .originalSlipNumber(original.getSalesNumber())\n                .status(SalesStatus.CONFIRMED)\n                .build();\n    }\n\n    private SalesDetail createBlackDetail(CorrectedDetailData correctedDetail,\n                                           String blackSlipNumber) {\n        return SalesDetail.builder()\n                .salesNumber(blackSlipNumber)\n                .detailNumber(correctedDetail.getDetailNumber())\n                .productCode(correctedDetail.getProductCode())\n                .quantity(correctedDetail.getQuantity())\n                .unitPrice(correctedDetail.getUnitPrice())\n                .amount(correctedDetail.getAmount())\n                .build();\n    }\n\n    /**\n     * \u8d64\u9ed2\u51e6\u7406\u5c65\u6b74\u3092\u53d6\u5f97\n     */\n    public RedBlackHistory findByProcessNumber(String processNumber) {\n        return redBlackHistoryMapper.findByProcessNumber(processNumber);\n    }\n\n    /**\n     * \u5143\u4f1d\u7968\u756a\u53f7\u3067\u8d64\u9ed2\u51e6\u7406\u5c65\u6b74\u3092\u691c\u7d22\n     */\n    public List&lt;RedBlackHistory&gt; findByOriginalSlipNumber(\n            String originalSlipNumber) {\n        return redBlackHistoryMapper.findByOriginalSlipNumber(originalSlipNumber);\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter11/#112","title":"11.2 \u81ea\u52d5\u63a1\u756a\u306e\u8a2d\u8a08","text":""},{"location":"article/part2/chapter11/#_9","title":"\u63a1\u756a\u306e\u8981\u4ef6","text":"\u8981\u4ef6 \u8aac\u660e \u4e00\u610f\u6027 \u540c\u4e00\u7a2e\u5225\u5185\u3067\u91cd\u8907\u3057\u306a\u3044 \u9023\u756a\u6027 \u57fa\u672c\u7684\u306b\u9023\u756a\u3067\u767a\u884c \u53ef\u8aad\u6027 \u5e74\u6708\u3084\u7a2e\u5225\u304c\u8b58\u5225\u53ef\u80fd \u62e1\u5f35\u6027 \u5c06\u6765\u306e\u8981\u4ef6\u5909\u66f4\u306b\u5bfe\u5fdc"},{"location":"article/part2/chapter11/#_10","title":"\u63a1\u756a\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"article/part2/chapter11/#_11","title":"\u63a1\u756a\u5f62\u5f0f\u306e\u7a2e\u985e","text":"\u63a1\u756a\u5f62\u5f0f \u8aac\u660e \u4f8b YEARLY \u5e74\u6b21\u3067\u30ea\u30bb\u30c3\u30c8 ORD-2025-00001 MONTHLY \u6708\u6b21\u3067\u30ea\u30bb\u30c3\u30c8 SL-202501-0001 DAILY \u65e5\u6b21\u3067\u30ea\u30bb\u30c3\u30c8 SL-20250115-0001 SEQUENTIAL \u30ea\u30bb\u30c3\u30c8\u306a\u3057\u9023\u756a SEQ-000001"},{"location":"article/part2/chapter11/#er_1","title":"\u63a1\u756a\u30c6\u30fc\u30d6\u30eb\u306e ER \u56f3","text":""},{"location":"article/part2/chapter11/#_12","title":"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff1a\u63a1\u756a\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210","text":"V019__create_numbering_tables.sql <pre><code>-- src/main/resources/db/migration/V019__create_numbering_tables.sql\n\n-- \u63a1\u756a\u30de\u30b9\u30bf\nCREATE TABLE \"\u63a1\u756a\u30de\u30b9\u30bf\" (\n    \"\u63a1\u756a\u30b3\u30fc\u30c9\" VARCHAR(20) PRIMARY KEY,\n    \"\u63a1\u756a\u540d\" VARCHAR(100) NOT NULL,\n    \"\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\" VARCHAR(10) NOT NULL,\n    \"\u63a1\u756a\u5f62\u5f0f\" VARCHAR(20) NOT NULL,  -- YEARLY, MONTHLY, DAILY, SEQUENTIAL\n    \"\u6841\u6570\" INTEGER NOT NULL,\n    \"\u73fe\u5728\u5024\" BIGINT DEFAULT 0 NOT NULL,\n    \"\u6700\u7d42\u63a1\u756a\u65e5\" DATE,\n    \"\u30ea\u30bb\u30c3\u30c8\u5bfe\u8c61\" BOOLEAN DEFAULT false NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL\n);\n\n-- \u63a1\u756a\u5c65\u6b74\u30c7\u30fc\u30bf\nCREATE TABLE \"\u63a1\u756a\u5c65\u6b74\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u63a1\u756a\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u63a1\u756a\u5e74\u6708\" VARCHAR(8) NOT NULL,\n    \"\u6700\u7d42\u756a\u53f7\" BIGINT NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"fk_\u63a1\u756a\u5c65\u6b74_\u63a1\u756a\u30de\u30b9\u30bf\"\n        FOREIGN KEY (\"\u63a1\u756a\u30b3\u30fc\u30c9\") REFERENCES \"\u63a1\u756a\u30de\u30b9\u30bf\"(\"\u63a1\u756a\u30b3\u30fc\u30c9\"),\n    UNIQUE (\"\u63a1\u756a\u30b3\u30fc\u30c9\", \"\u63a1\u756a\u5e74\u6708\")\n);\n\n-- \u521d\u671f\u30c7\u30fc\u30bf\nINSERT INTO \"\u63a1\u756a\u30de\u30b9\u30bf\" (\"\u63a1\u756a\u30b3\u30fc\u30c9\", \"\u63a1\u756a\u540d\", \"\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\", \"\u63a1\u756a\u5f62\u5f0f\", \"\u6841\u6570\") VALUES\n('SALES', '\u58f2\u4e0a\u756a\u53f7', 'SL', 'MONTHLY', 4),\n('ORDER', '\u53d7\u6ce8\u756a\u53f7', 'ORD', 'YEARLY', 5),\n('SHIPMENT', '\u51fa\u8377\u756a\u53f7', 'SHP', 'MONTHLY', 4),\n('INVOICE', '\u8acb\u6c42\u756a\u53f7', 'INV', 'MONTHLY', 4),\n('RECEIPT', '\u5165\u91d1\u756a\u53f7', 'RC', 'MONTHLY', 4),\n('PURCHASE_ORDER', '\u767a\u6ce8\u756a\u53f7', 'PO', 'MONTHLY', 4),\n('PURCHASE', '\u4ed5\u5165\u756a\u53f7', 'PU', 'MONTHLY', 4),\n('PAYMENT', '\u652f\u6255\u756a\u53f7', 'PAY', 'MONTHLY', 4),\n('STOCKTAKING', '\u68da\u5378\u756a\u53f7', 'ST', 'MONTHLY', 4);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"idx_\u63a1\u756a\u5c65\u6b74_\u63a1\u756a\u5e74\u6708\" ON \"\u63a1\u756a\u5c65\u6b74\u30c7\u30fc\u30bf\"(\"\u63a1\u756a\u5e74\u6708\");\n\n-- \u30c6\u30fc\u30d6\u30eb\u30b3\u30e1\u30f3\u30c8\nCOMMENT ON TABLE \"\u63a1\u756a\u30de\u30b9\u30bf\" IS '\u4f1d\u7968\u756a\u53f7\u306e\u63a1\u756a\u30eb\u30fc\u30eb\u3092\u7ba1\u7406\u3059\u308b\u30de\u30b9\u30bf\u30c6\u30fc\u30d6\u30eb';\nCOMMENT ON TABLE \"\u63a1\u756a\u5c65\u6b74\u30c7\u30fc\u30bf\" IS '\u5e74\u6708\u5225\u306e\u63a1\u756a\u72b6\u6cc1\u3092\u8a18\u9332\u3059\u308b\u30c6\u30fc\u30d6\u30eb';\n</code></pre>"},{"location":"article/part2/chapter11/#_13","title":"\u63a1\u756a\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":"<p>Note: \u4ee5\u4e0b\u306e\u30b5\u30fc\u30d3\u30b9\u5c64\u30b3\u30fc\u30c9\u306f\u53c2\u8003\u5b9f\u88c5\u4f8b\u3067\u3059\u3002\u5b9f\u969b\u306e\u30b7\u30b9\u30c6\u30e0\u3067\u306f\u8981\u4ef6\u306b\u5fdc\u3058\u3066\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> \u63a1\u756a\u5f62\u5f0f ENUM <pre><code>// src/main/java/com/example/sms/domain/model/common/NumberingFormat.java\npackage com.example.sms.domain.model.common;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum NumberingFormat {\n    YEARLY(\"\u5e74\u6b21\"),\n    MONTHLY(\"\u6708\u6b21\"),\n    DAILY(\"\u65e5\u6b21\"),\n    SEQUENTIAL(\"\u9023\u756a\");\n\n    private final String displayName;\n\n    public static NumberingFormat fromDisplayName(String displayName) {\n        for (NumberingFormat format : values()) {\n            if (format.displayName.equals(displayName)) {\n                return format;\n            }\n        }\n        throw new IllegalArgumentException(\n                \"Unknown numbering format: \" + displayName);\n    }\n}\n</code></pre> \u63a1\u756a\u30de\u30b9\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/sms/domain/model/common/NumberingMaster.java\npackage com.example.sms.domain.model.common;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n/**\n * \u63a1\u756a\u30de\u30b9\u30bf.\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class NumberingMaster {\n    /** \u63a1\u756a\u30b3\u30fc\u30c9. */\n    private String numberingCode;\n    /** \u63a1\u756a\u540d. */\n    private String numberingName;\n    /** \u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9. */\n    private String prefix;\n    /** \u63a1\u756a\u5f62\u5f0f. */\n    private String format;\n    /** \u6841\u6570. */\n    private Integer digits;\n    /** \u73fe\u5728\u5024. */\n    private Long currentValue;\n    /** \u6700\u7d42\u63a1\u756a\u65e5. */\n    private LocalDate lastNumberingDate;\n    /** \u30ea\u30bb\u30c3\u30c8\u5bfe\u8c61. */\n    private Boolean resetTarget;\n    /** \u4f5c\u6210\u65e5\u6642. */\n    private LocalDateTime createdAt;\n    /** \u66f4\u65b0\u65e5\u6642. */\n    private LocalDateTime updatedAt;\n}\n</code></pre> \u63a1\u756a\u5c65\u6b74\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/sms/domain/model/common/NumberingHistory.java\npackage com.example.sms.domain.model.common;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.time.LocalDateTime;\n\n/**\n * \u63a1\u756a\u5c65\u6b74.\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class NumberingHistory {\n    /** ID. */\n    private Integer id;\n    /** \u63a1\u756a\u30b3\u30fc\u30c9. */\n    private String numberingCode;\n    /** \u63a1\u756a\u5e74\u6708. */\n    private String yearMonth;\n    /** \u6700\u7d42\u756a\u53f7. */\n    private Long lastNumber;\n    /** \u4f5c\u6210\u65e5\u6642. */\n    private LocalDateTime createdAt;\n    /** \u66f4\u65b0\u65e5\u6642. */\n    private LocalDateTime updatedAt;\n}\n</code></pre> \u63a1\u756a\u30b5\u30fc\u30d3\u30b9 <pre><code>// src/main/java/com/example/sms/application/service/NumberingService.java\npackage com.example.sms.application.service;\n\nimport com.example.sms.domain.model.common.*;\nimport com.example.sms.infrastructure.persistence.mapper.*;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.time.LocalDate;\nimport java.time.format.DateTimeFormatter;\n\n@Service\n@RequiredArgsConstructor\npublic class NumberingService {\n\n    private final NumberingMasterMapper numberingMasterMapper;\n    private final NumberingHistoryMapper numberingHistoryMapper;\n\n    /**\n     * \u6b21\u306e\u756a\u53f7\u3092\u53d6\u5f97\n     */\n    @Transactional\n    public String getNextNumber(String numberingCode) {\n        NumberingMaster master = numberingMasterMapper\n                .findByNumberingCode(numberingCode);\n        if (master == null) {\n            throw new IllegalArgumentException(\n                    \"\u63a1\u756a\u30de\u30b9\u30bf\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + numberingCode);\n        }\n\n        LocalDate today = LocalDate.now();\n        String yearMonth = getYearMonth(today, master.getFormat());\n\n        // \u5c65\u6b74\u3092\u53d6\u5f97\u307e\u305f\u306f\u4f5c\u6210\n        NumberingHistory history = numberingHistoryMapper\n                .findByCodeAndYearMonth(numberingCode, yearMonth);\n\n        long nextNumber;\n        if (history == null) {\n            // \u65b0\u898f\u5e74\u6708\u306e\u5834\u5408\u30011\u304b\u3089\u958b\u59cb\n            nextNumber = 1;\n            history = NumberingHistory.builder()\n                    .numberingCode(numberingCode)\n                    .yearMonth(yearMonth)\n                    .lastNumber(nextNumber)\n                    .build();\n            numberingHistoryMapper.insert(history);\n        } else {\n            // \u65e2\u5b58\u306e\u5834\u5408\u3001\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8\n            nextNumber = history.getLastNumber() + 1;\n            numberingHistoryMapper.incrementLastNumber(history.getId());\n        }\n\n        // \u756a\u53f7\u3092\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\n        return formatNumber(master, yearMonth, nextNumber);\n    }\n\n    private String getYearMonth(LocalDate date, NumberingFormat format) {\n        return switch (format) {\n            case YEARLY -&gt; date.format(DateTimeFormatter.ofPattern(\"yyyy\"));\n            case MONTHLY -&gt; date.format(DateTimeFormatter.ofPattern(\"yyyyMM\"));\n            case DAILY -&gt; date.format(DateTimeFormatter.ofPattern(\"yyyyMMdd\"));\n            case SEQUENTIAL -&gt; \"0000\";\n        };\n    }\n\n    private String formatNumber(NumberingMaster master, String yearMonth,\n                                 long number) {\n        String sequenceFormat = \"%0\" + master.getDigits() + \"d\";\n        String sequence = String.format(sequenceFormat, number);\n\n        if (master.getFormat() == NumberingFormat.SEQUENTIAL) {\n            return master.getPrefix() + \"-\" + sequence;\n        } else {\n            return master.getPrefix() + \"-\" + yearMonth + \"-\" + sequence;\n        }\n    }\n\n    /** \u58f2\u4e0a\u756a\u53f7\u3092\u751f\u6210 */\n    public String generateSalesNumber() {\n        return getNextNumber(\"SALES\");\n    }\n\n    /** \u53d7\u6ce8\u756a\u53f7\u3092\u751f\u6210 */\n    public String generateOrderNumber() {\n        return getNextNumber(\"ORDER\");\n    }\n\n    /** \u51fa\u8377\u756a\u53f7\u3092\u751f\u6210 */\n    public String generateShipmentNumber() {\n        return getNextNumber(\"SHIPMENT\");\n    }\n\n    /** \u8acb\u6c42\u756a\u53f7\u3092\u751f\u6210 */\n    public String generateInvoiceNumber() {\n        return getNextNumber(\"INVOICE\");\n    }\n\n    /** \u5165\u91d1\u756a\u53f7\u3092\u751f\u6210 */\n    public String generateReceiptNumber() {\n        return getNextNumber(\"RECEIPT\");\n    }\n\n    /** \u767a\u6ce8\u756a\u53f7\u3092\u751f\u6210 */\n    public String generatePurchaseOrderNumber() {\n        return getNextNumber(\"PURCHASE_ORDER\");\n    }\n\n    /** \u4ed5\u5165\u756a\u53f7\u3092\u751f\u6210 */\n    public String generatePurchaseNumber() {\n        return getNextNumber(\"PURCHASE\");\n    }\n\n    /** \u652f\u6255\u756a\u53f7\u3092\u751f\u6210 */\n    public String generatePaymentNumber() {\n        return getNextNumber(\"PAYMENT\");\n    }\n\n    /** \u68da\u5378\u756a\u53f7\u3092\u751f\u6210 */\n    public String generateStocktakingNumber() {\n        return getNextNumber(\"STOCKTAKING\");\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter11/#113","title":"11.3 \u76e3\u67fb\u30ab\u30e9\u30e0\u306e\u8a2d\u8a08","text":""},{"location":"article/part2/chapter11/#_14","title":"\u76e3\u67fb\u30ab\u30e9\u30e0\u3068\u306f","text":"<p>\u3059\u3079\u3066\u306e\u30c6\u30fc\u30d6\u30eb\u306b\u5171\u901a\u3057\u3066\u8a2d\u3051\u308b\u3001\u30c7\u30fc\u30bf\u306e\u4f5c\u6210\u30fb\u66f4\u65b0\u306b\u95a2\u3059\u308b\u60c5\u5831\u3092\u8a18\u9332\u3059\u308b\u30ab\u30e9\u30e0\u3067\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter11/#_15","title":"\u76e3\u67fb\u30ab\u30e9\u30e0\u306e\u7a2e\u985e","text":"\u30ab\u30e9\u30e0 \u578b \u8aac\u660e \u4f5c\u6210\u65e5\u6642 TIMESTAMP \u30ec\u30b3\u30fc\u30c9\u4f5c\u6210\u65e5\u6642 \u4f5c\u6210\u8005 VARCHAR \u30ec\u30b3\u30fc\u30c9\u4f5c\u6210\u8005 \u66f4\u65b0\u65e5\u6642 TIMESTAMP \u6700\u7d42\u66f4\u65b0\u65e5\u6642 \u66f4\u65b0\u8005 VARCHAR \u6700\u7d42\u66f4\u65b0\u8005 \u524a\u9664\u30d5\u30e9\u30b0 BOOLEAN \u8ad6\u7406\u524a\u9664\u30d5\u30e9\u30b0 \u524a\u9664\u65e5\u6642 TIMESTAMP \u8ad6\u7406\u524a\u9664\u65e5\u6642 \u524a\u9664\u8005 VARCHAR \u8ad6\u7406\u524a\u9664\u5b9f\u884c\u8005"},{"location":"article/part2/chapter11/#_16","title":"\u8ad6\u7406\u524a\u9664\u306e\u8003\u3048\u65b9","text":""},{"location":"article/part2/chapter11/#_17","title":"\u76e3\u67fb\u30ab\u30e9\u30e0\u7528\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u57fa\u5e95\u30af\u30e9\u30b9","text":"Auditable \u57fa\u5e95\u30af\u30e9\u30b9 <pre><code>// src/main/java/com/example/sms/domain/model/common/Auditable.java\npackage com.example.sms.domain.model.common;\n\nimport lombok.Data;\nimport lombok.experimental.SuperBuilder;\n\nimport java.time.LocalDateTime;\n\n@Data\n@SuperBuilder\npublic abstract class Auditable {\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n    private Boolean deletedFlag;\n    private LocalDateTime deletedAt;\n    private String deletedBy;\n\n    /**\n     * \u8ad6\u7406\u524a\u9664\u3055\u308c\u3066\u3044\u308b\u304b\u3069\u3046\u304b\n     */\n    public boolean isDeleted() {\n        return deletedFlag != null &amp;&amp; deletedFlag;\n    }\n\n    /**\n     * \u8ad6\u7406\u524a\u9664\u3092\u5b9f\u884c\n     */\n    public void softDelete(String deletedBy) {\n        this.deletedFlag = true;\n        this.deletedAt = LocalDateTime.now();\n        this.deletedBy = deletedBy;\n    }\n\n    /**\n     * \u8ad6\u7406\u524a\u9664\u3092\u5fa9\u5143\n     */\n    public void restore() {\n        this.deletedFlag = false;\n        this.deletedAt = null;\n        this.deletedBy = null;\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter11/#mybatis","title":"MyBatis \u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u306b\u3088\u308b\u81ea\u52d5\u8a2d\u5b9a","text":"\u76e3\u67fb\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc <pre><code>// src/main/java/com/example/sms/infrastructure/persistence/AuditInterceptor.java\npackage com.example.sms.infrastructure.persistence;\n\nimport com.example.sms.domain.model.common.Auditable;\nimport org.apache.ibatis.executor.Executor;\nimport org.apache.ibatis.mapping.MappedStatement;\nimport org.apache.ibatis.mapping.SqlCommandType;\nimport org.apache.ibatis.plugin.*;\nimport org.springframework.security.core.Authentication;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.stereotype.Component;\n\nimport java.time.LocalDateTime;\nimport java.util.Properties;\n\n@Intercepts({\n    @Signature(type = Executor.class, method = \"update\",\n               args = {MappedStatement.class, Object.class})\n})\n@Component\npublic class AuditInterceptor implements Interceptor {\n\n    @Override\n    public Object intercept(Invocation invocation) throws Throwable {\n        MappedStatement ms = (MappedStatement) invocation.getArgs()[0];\n        Object parameter = invocation.getArgs()[1];\n\n        if (parameter instanceof Auditable auditable) {\n            String currentUser = getCurrentUser();\n            LocalDateTime now = LocalDateTime.now();\n\n            if (ms.getSqlCommandType() == SqlCommandType.INSERT) {\n                auditable.setCreatedAt(now);\n                auditable.setCreatedBy(currentUser);\n                auditable.setUpdatedAt(now);\n                auditable.setUpdatedBy(currentUser);\n                if (auditable.getDeletedFlag() == null) {\n                    auditable.setDeletedFlag(false);\n                }\n            } else if (ms.getSqlCommandType() == SqlCommandType.UPDATE) {\n                auditable.setUpdatedAt(now);\n                auditable.setUpdatedBy(currentUser);\n            }\n        }\n\n        return invocation.proceed();\n    }\n\n    private String getCurrentUser() {\n        Authentication authentication = SecurityContextHolder\n                .getContext().getAuthentication();\n        if (authentication != null &amp;&amp; authentication.isAuthenticated()) {\n            return authentication.getName();\n        }\n        return \"SYSTEM\";\n    }\n\n    @Override\n    public Object plugin(Object target) {\n        return Plugin.wrap(target, this);\n    }\n\n    @Override\n    public void setProperties(Properties properties) {\n        // \u8a2d\u5b9a\u30d7\u30ed\u30d1\u30c6\u30a3\u304c\u3042\u308c\u3070\u51e6\u7406\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter11/#114","title":"11.4 \u5c65\u6b74\u30c6\u30fc\u30d6\u30eb\u306e\u8a2d\u8a08","text":""},{"location":"article/part2/chapter11/#_18","title":"\u5c65\u6b74\u7ba1\u7406\u306e\u7a2e\u985e","text":"\u7a2e\u985e \u8aac\u660e \u7528\u9014 \u5909\u66f4\u5c65\u6b74 \u5909\u66f4\u524d\u5f8c\u306e\u5024\u3092\u8a18\u9332 \u76e3\u67fb\u3001\u30c7\u30d0\u30c3\u30b0 \u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8 \u7279\u5b9a\u6642\u70b9\u306e\u72b6\u614b\u3092\u4fdd\u5b58 \u5e33\u7968\u518d\u767a\u884c\u3001\u5206\u6790 \u30a4\u30d9\u30f3\u30c8\u30bd\u30fc\u30b7\u30f3\u30b0 \u3059\u3079\u3066\u306e\u30a4\u30d9\u30f3\u30c8\u3092\u8a18\u9332 \u5b8c\u5168\u306a\u8ffd\u8de1\u3001\u518d\u69cb\u7bc9"},{"location":"article/part2/chapter11/#er_2","title":"\u5909\u66f4\u5c65\u6b74\u30c6\u30fc\u30d6\u30eb\u306e ER \u56f3","text":""},{"location":"article/part2/chapter11/#_19","title":"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff1a\u5c65\u6b74\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210","text":"V020__create_history_tables.sql <pre><code>-- src/main/resources/db/migration/V020__create_history_tables.sql\n\n-- \u5909\u66f4\u5c65\u6b74\u30c7\u30fc\u30bf\nCREATE TABLE \"\u5909\u66f4\u5c65\u6b74\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u30c6\u30fc\u30d6\u30eb\u540d\" VARCHAR(100) NOT NULL,\n    \"\u30ec\u30b3\u30fc\u30c9ID\" VARCHAR(100) NOT NULL,\n    \"\u64cd\u4f5c\u7a2e\u5225\" VARCHAR(10) NOT NULL,  -- INSERT, UPDATE, DELETE\n    \"\u5909\u66f4\u65e5\u6642\" TIMESTAMP NOT NULL,\n    \"\u5909\u66f4\u8005\" VARCHAR(50) NOT NULL,\n    \"\u5909\u66f4\u524d\u30c7\u30fc\u30bf\" JSONB,\n    \"\u5909\u66f4\u5f8c\u30c7\u30fc\u30bf\" JSONB,\n    \"\u5909\u66f4\u7406\u7531\" TEXT,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL\n);\n\n-- \u30de\u30b9\u30bf\u5c65\u6b74\u30c7\u30fc\u30bf\uff08\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u65b9\u5f0f\u306e\u4f8b\uff09\nCREATE TABLE \"\u5546\u54c1\u30de\u30b9\u30bf\u5c65\u6b74\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u5546\u54c1\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u6709\u52b9\u958b\u59cb\u65e5\" DATE NOT NULL,\n    \"\u6709\u52b9\u7d42\u4e86\u65e5\" DATE,\n    \"\u5546\u54c1\u540d\" VARCHAR(100) NOT NULL,\n    \"\u5546\u54c1\u533a\u5206\" \u5546\u54c1\u533a\u5206 NOT NULL,\n    \"\u5358\u4fa1\" DECIMAL(15, 2),\n    \"\u7a0e\u533a\u5206\" \u7a0e\u533a\u5206,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\" VARCHAR(50),\n    UNIQUE (\"\u5546\u54c1\u30b3\u30fc\u30c9\", \"\u6709\u52b9\u958b\u59cb\u65e5\")\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"idx_\u5909\u66f4\u5c65\u6b74_\u30c6\u30fc\u30d6\u30eb\u540d\" ON \"\u5909\u66f4\u5c65\u6b74\u30c7\u30fc\u30bf\"(\"\u30c6\u30fc\u30d6\u30eb\u540d\");\nCREATE INDEX \"idx_\u5909\u66f4\u5c65\u6b74_\u30ec\u30b3\u30fc\u30c9ID\" ON \"\u5909\u66f4\u5c65\u6b74\u30c7\u30fc\u30bf\"(\"\u30ec\u30b3\u30fc\u30c9ID\");\nCREATE INDEX \"idx_\u5909\u66f4\u5c65\u6b74_\u5909\u66f4\u65e5\u6642\" ON \"\u5909\u66f4\u5c65\u6b74\u30c7\u30fc\u30bf\"(\"\u5909\u66f4\u65e5\u6642\");\nCREATE INDEX \"idx_\u5546\u54c1\u30de\u30b9\u30bf\u5c65\u6b74_\u5546\u54c1\u30b3\u30fc\u30c9\" ON \"\u5546\u54c1\u30de\u30b9\u30bf\u5c65\u6b74\"(\"\u5546\u54c1\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u5546\u54c1\u30de\u30b9\u30bf\u5c65\u6b74_\u6709\u52b9\u671f\u9593\"\n    ON \"\u5546\u54c1\u30de\u30b9\u30bf\u5c65\u6b74\"(\"\u6709\u52b9\u958b\u59cb\u65e5\", \"\u6709\u52b9\u7d42\u4e86\u65e5\");\n\n-- \u30c6\u30fc\u30d6\u30eb\u30b3\u30e1\u30f3\u30c8\nCOMMENT ON TABLE \"\u5909\u66f4\u5c65\u6b74\u30c7\u30fc\u30bf\" IS '\u30c7\u30fc\u30bf\u5909\u66f4\u306e\u5c65\u6b74\u3092JSONB\u3067\u4fdd\u5b58\u3059\u308b\u30c6\u30fc\u30d6\u30eb';\nCOMMENT ON TABLE \"\u5546\u54c1\u30de\u30b9\u30bf\u5c65\u6b74\" IS '\u5546\u54c1\u30de\u30b9\u30bf\u306e\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u5c65\u6b74';\n</code></pre>"},{"location":"article/part2/chapter11/#_20","title":"\u5c65\u6b74\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":"<p>Note: \u4ee5\u4e0b\u306e\u30b5\u30fc\u30d3\u30b9\u5c64\u30b3\u30fc\u30c9\u306f\u53c2\u8003\u5b9f\u88c5\u4f8b\u3067\u3059\u3002\u5b9f\u969b\u306e\u30b7\u30b9\u30c6\u30e0\u3067\u306f\u8981\u4ef6\u306b\u5fdc\u3058\u3066\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> \u5909\u66f4\u5c65\u6b74\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/sms/domain/model/common/ChangeHistory.java\npackage com.example.sms.domain.model.common;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.time.LocalDateTime;\n\n/**\n * \u5909\u66f4\u5c65\u6b74.\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class ChangeHistory {\n    /** ID. */\n    private Integer id;\n    /** \u30c6\u30fc\u30d6\u30eb\u540d. */\n    private String tableName;\n    /** \u30ec\u30b3\u30fc\u30c9ID. */\n    private String recordId;\n    /** \u64cd\u4f5c\u7a2e\u5225. */\n    private String operationType;\n    /** \u5909\u66f4\u65e5\u6642. */\n    private LocalDateTime changedAt;\n    /** \u5909\u66f4\u8005. */\n    private String changedBy;\n    /** \u5909\u66f4\u524d\u30c7\u30fc\u30bf\uff08JSON\uff09. */\n    private String beforeData;\n    /** \u5909\u66f4\u5f8c\u30c7\u30fc\u30bf\uff08JSON\uff09. */\n    private String afterData;\n    /** \u5909\u66f4\u7406\u7531. */\n    private String changeReason;\n    /** \u4f5c\u6210\u65e5\u6642. */\n    private LocalDateTime createdAt;\n}\n</code></pre> \u5546\u54c1\u30de\u30b9\u30bf\u5c65\u6b74\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/sms/domain/model/common/ProductHistory.java\npackage com.example.sms.domain.model.common;\n\nimport com.example.sms.domain.model.product.ProductCategory;\nimport com.example.sms.domain.model.product.TaxCategory;\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n/**\n * \u5546\u54c1\u30de\u30b9\u30bf\u5c65\u6b74.\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class ProductHistory {\n    /** ID. */\n    private Integer id;\n    /** \u5546\u54c1\u30b3\u30fc\u30c9. */\n    private String productCode;\n    /** \u6709\u52b9\u958b\u59cb\u65e5. */\n    private LocalDate validFromDate;\n    /** \u6709\u52b9\u7d42\u4e86\u65e5. */\n    private LocalDate validToDate;\n    /** \u5546\u54c1\u540d. */\n    private String productName;\n    /** \u5546\u54c1\u533a\u5206. */\n    private ProductCategory productCategory;\n    /** \u5358\u4fa1. */\n    private BigDecimal unitPrice;\n    /** \u7a0e\u533a\u5206. */\n    private TaxCategory taxCategory;\n    /** \u4f5c\u6210\u65e5\u6642. */\n    private LocalDateTime createdAt;\n    /** \u4f5c\u6210\u8005. */\n    private String createdBy;\n\n    /**\n     * \u6307\u5b9a\u65e5\u6642\u70b9\u3067\u6709\u52b9\u304b\u3069\u3046\u304b.\n     *\n     * @param targetDate \u5bfe\u8c61\u65e5\n     * @return \u6709\u52b9\u306a\u5834\u5408true\n     */\n    public boolean isValidOn(LocalDate targetDate) {\n        if (targetDate.isBefore(validFromDate)) {\n            return false;\n        }\n        return validToDate == null || !targetDate.isAfter(validToDate);\n    }\n}\n</code></pre> \u5c65\u6b74\u30b5\u30fc\u30d3\u30b9 <pre><code>// src/main/java/com/example/sms/application/service/HistoryService.java\npackage com.example.sms.application.service;\n\nimport com.example.sms.domain.model.common.ChangeHistory;\nimport com.example.sms.infrastructure.persistence.mapper.ChangeHistoryMapper;\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.time.LocalDateTime;\nimport java.util.List;\n\n@Service\n@RequiredArgsConstructor\npublic class HistoryService {\n\n    private final ChangeHistoryMapper changeHistoryMapper;\n    private final ObjectMapper objectMapper;\n\n    /**\n     * \u5909\u66f4\u5c65\u6b74\u3092\u8a18\u9332\n     */\n    @Transactional\n    public void recordChange(String tableName, String recordId,\n                             String operationType, Object beforeData,\n                             Object afterData, String changedBy,\n                             String changeReason) {\n        try {\n            String beforeJson = beforeData != null\n                    ? objectMapper.writeValueAsString(beforeData) : null;\n            String afterJson = afterData != null\n                    ? objectMapper.writeValueAsString(afterData) : null;\n\n            ChangeHistory history = ChangeHistory.builder()\n                    .tableName(tableName)\n                    .recordId(recordId)\n                    .operationType(operationType)\n                    .changedAt(LocalDateTime.now())\n                    .changedBy(changedBy)\n                    .beforeData(beforeJson)\n                    .afterData(afterJson)\n                    .changeReason(changeReason)\n                    .build();\n\n            changeHistoryMapper.insert(history);\n        } catch (JsonProcessingException e) {\n            throw new RuntimeException(\n                    \"\u5c65\u6b74\u30c7\u30fc\u30bf\u306e\u30b7\u30ea\u30a2\u30e9\u30a4\u30ba\u306b\u5931\u6557\u3057\u307e\u3057\u305f\", e);\n        }\n    }\n\n    /**\n     * INSERT\u5c65\u6b74\u3092\u8a18\u9332\n     */\n    @Transactional\n    public void recordInsert(String tableName, String recordId,\n                             Object data, String changedBy) {\n        recordChange(tableName, recordId, \"INSERT\", null, data, changedBy, null);\n    }\n\n    /**\n     * UPDATE\u5c65\u6b74\u3092\u8a18\u9332\n     */\n    @Transactional\n    public void recordUpdate(String tableName, String recordId,\n                             Object beforeData, Object afterData,\n                             String changedBy, String changeReason) {\n        recordChange(tableName, recordId, \"UPDATE\",\n                beforeData, afterData, changedBy, changeReason);\n    }\n\n    /**\n     * DELETE\u5c65\u6b74\u3092\u8a18\u9332\n     */\n    @Transactional\n    public void recordDelete(String tableName, String recordId,\n                             Object data, String changedBy,\n                             String changeReason) {\n        recordChange(tableName, recordId, \"DELETE\",\n                data, null, changedBy, changeReason);\n    }\n\n    /**\n     * \u30c6\u30fc\u30d6\u30eb\u3068\u30ec\u30b3\u30fc\u30c9ID\u3067\u5c65\u6b74\u3092\u691c\u7d22\n     */\n    public List&lt;ChangeHistory&gt; findByTableAndRecordId(String tableName,\n                                                       String recordId) {\n        return changeHistoryMapper.findByTableAndRecordId(tableName, recordId);\n    }\n\n    /**\n     * \u671f\u9593\u3067\u5c65\u6b74\u3092\u691c\u7d22\n     */\n    public List&lt;ChangeHistory&gt; findByDateRange(LocalDateTime fromDateTime,\n                                                LocalDateTime toDateTime) {\n        return changeHistoryMapper.findByDateRange(fromDateTime, toDateTime);\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter11/#_21","title":"\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u3067\u306e\u4f7f\u3044\u5206\u3051","text":"<p>\u8d64\u9ed2\u51e6\u7406\u3001\u8ad6\u7406\u524a\u9664\u3001\u5909\u66f4\u5c65\u6b74\u306f\u3001\u696d\u52d9\u306e\u6027\u8cea\u306b\u5fdc\u3058\u3066\u4f7f\u3044\u5206\u3051\u307e\u3059\u3002</p> <p></p> \u30c7\u30fc\u30bf\u7a2e\u5225 \u63a8\u5968\u65b9\u5f0f \u7406\u7531 \u4f1a\u8a08\u7cfb \u8d64\u9ed2\u51e6\u7406 \u76e3\u67fb\u5bfe\u5fdc\u3001\u4f1a\u8a08\u539f\u5247 \u30de\u30b9\u30bf \u5909\u66f4\u5c65\u6b74 + \u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8 \u5909\u66f4\u8ffd\u8de1\u3001\u904e\u53bb\u53c2\u7167 \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3 \u8ad6\u7406\u524a\u9664 + \u76e3\u67fb\u30ab\u30e9\u30e0 \u904b\u7528\u52b9\u7387\u3001\u5fa9\u5143\u53ef\u80fd"},{"location":"article/part2/chapter11/#11_1","title":"\u7b2c11\u7ae0\u306e\u307e\u3068\u3081","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u5168\u822c\u3067\u4f7f\u7528\u3055\u308c\u308b\u5171\u901a\u51e6\u7406\u306e DB \u8a2d\u8a08\u3068\u5b9f\u88c5\u306b\u3064\u3044\u3066\u5b66\u3073\u307e\u3057\u305f\u3002</p>"},{"location":"article/part2/chapter11/#_22","title":"\u5b66\u3093\u3060\u3053\u3068","text":"<ol> <li>\u8d64\u9ed2\u51e6\u7406\u306e\u8a2d\u8a08</li> <li>\u78ba\u5b9a\u6e08\u307f\u4f1d\u7968\u306e\u8a02\u6b63\u65b9\u6cd5</li> <li>\u8d64\u4f1d\u7968\uff08\u30de\u30a4\u30ca\u30b9\u8a08\u4e0a\uff09\u3068\u9ed2\u4f1d\u7968\uff08\u30d7\u30e9\u30b9\u8a08\u4e0a\uff09</li> <li> <p>\u76e3\u67fb\u8a3c\u8de1\u306e\u78ba\u4fdd</p> </li> <li> <p>\u81ea\u52d5\u63a1\u756a\u306e\u8a2d\u8a08</p> </li> <li>\u63a1\u756a\u30de\u30b9\u30bf\u306b\u3088\u308b\u67d4\u8edf\u306a\u8a2d\u5b9a</li> <li>\u5e74\u6b21\u30fb\u6708\u6b21\u30fb\u65e5\u6b21\u30fb\u9023\u756a\u306e\u5bfe\u5fdc</li> <li> <p>\u5c65\u6b74\u306b\u3088\u308b\u63a1\u756a\u7ba1\u7406</p> </li> <li> <p>\u76e3\u67fb\u30ab\u30e9\u30e0\u306e\u8a2d\u8a08</p> </li> <li>\u4f5c\u6210\u65e5\u6642\u30fb\u4f5c\u6210\u8005\u30fb\u66f4\u65b0\u65e5\u6642\u30fb\u66f4\u65b0\u8005</li> <li>\u8ad6\u7406\u524a\u9664\uff08\u524a\u9664\u30d5\u30e9\u30b0\u30fb\u524a\u9664\u65e5\u6642\u30fb\u524a\u9664\u8005\uff09</li> <li> <p>\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u306b\u3088\u308b\u81ea\u52d5\u8a2d\u5b9a</p> </li> <li> <p>\u5c65\u6b74\u30c6\u30fc\u30d6\u30eb\u306e\u8a2d\u8a08</p> </li> <li>\u5909\u66f4\u5c65\u6b74\uff08\u5909\u66f4\u524d\u5f8c\u306e JSON \u4fdd\u5b58\uff09</li> <li>\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u65b9\u5f0f\u306e\u5c65\u6b74</li> <li>\u6709\u52b9\u671f\u9593\u306b\u3088\u308b\u5c65\u6b74\u7ba1\u7406</li> </ol>"},{"location":"article/part2/chapter11/#_23","title":"\u30c6\u30fc\u30d6\u30eb\u4e00\u89a7","text":"\u30c6\u30fc\u30d6\u30eb\u540d\uff08\u65e5\u672c\u8a9e\uff09 Java \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 \u8aac\u660e \u8d64\u9ed2\u51e6\u7406\u5c65\u6b74\u30c7\u30fc\u30bf RedBlackHistory \u8d64\u9ed2\u51e6\u7406\u306e\u5c65\u6b74 \u63a1\u756a\u30de\u30b9\u30bf NumberingMaster \u63a1\u756a\u30eb\u30fc\u30eb\u306e\u5b9a\u7fa9 \u63a1\u756a\u5c65\u6b74\u30c7\u30fc\u30bf NumberingHistory \u5e74\u6708\u5225\u306e\u63a1\u756a\u72b6\u6cc1 \u5909\u66f4\u5c65\u6b74\u30c7\u30fc\u30bf ChangeHistory \u30c7\u30fc\u30bf\u5909\u66f4\u306e\u5c65\u6b74 \u5546\u54c1\u30de\u30b9\u30bf\u5c65\u6b74 ProductHistory \u5546\u54c1\u30de\u30b9\u30bf\u306e\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8"},{"location":"article/part2/chapter11/#enum","title":"ENUM \u4e00\u89a7","text":"DB ENUM \u578b\uff08\u65e5\u672c\u8a9e\uff09 Java Enum \u5024 \u4f1d\u7968\u533a\u5206 SlipType \u901a\u5e38\u2192NORMAL, \u8d64\u4f1d\u2192RED, \u9ed2\u4f1d\u2192BLACK"},{"location":"article/part2/chapter11/#er_3","title":"\u5171\u901a\u51e6\u7406 ER \u56f3","text":""},{"location":"article/part2/chapter11/#_24","title":"\u6b21\u7ae0\u306e\u4e88\u544a","text":"<p>\u7b2c12\u7ae0\u3067\u306f\u3001B \u793e\u4e8b\u4f8b\u3092\u7528\u3044\u305f\u8ca1\u52d9\u4f1a\u8a08\u30c7\u30fc\u30bf\u306e\u4f5c\u6210\u306b\u9032\u307f\u307e\u3059\u3002\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3067\u8a2d\u8a08\u3057\u305f\u30de\u30b9\u30bf\u30fb\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u3092\u3001\u5b9f\u969b\u306e\u30d3\u30b8\u30cd\u30b9\u30b7\u30ca\u30ea\u30aa\u306b\u57fa\u3065\u3044\u3066\u69cb\u7bc9\u3057\u307e\u3059\u3002</p> <p>\u2190 \u7b2c10\u7ae0\uff1a\u50b5\u52d9\u7ba1\u7406\u306e\u8a2d\u8a08 | \u7b2c12\u7ae0\uff1a\u8ca1\u52d9\u4f1a\u8a08\u30c7\u30fc\u30bf\u4f5c\u6210\uff08B\u793e\u4e8b\u4f8b\uff09 \u2192</p>"},{"location":"article/part2/chapter12/","title":"\u7b2c12\u7ae0\uff1a\u8ca9\u58f2\u7ba1\u7406\u30c7\u30fc\u30bf\u8a2d\u8a08\uff08B \u793e\u4e8b\u4f8b\uff09","text":"<p>\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\u3092\u3001\u98df\u8089\u30fb\u98df\u8089\u52a0\u5de5\u54c1\u306e\u88fd\u9020\u8ca9\u58f2\u3092\u884c\u3046 B \u793e\u306e\u4e8b\u4f8b\u3092\u901a\u3058\u3066\u5b9f\u8df5\u7684\u306b\u5b66\u3073\u307e\u3059\u3002\u672c\u7ae0\u3067\u306f\u3001\u5b9f\u969b\u306e\u30d3\u30b8\u30cd\u30b9\u306b\u57fa\u3065\u3044\u305f\u30de\u30b9\u30bf\u30c7\u30fc\u30bf\u3068\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u306e\u8a2d\u8a08\u30fb\u5b9f\u88c5\u65b9\u6cd5\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter12/#b","title":"B \u793e\u4e8b\u4f8b\u306e\u5168\u4f53\u50cf","text":"<p>B \u793e\u306e\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306b\u5fc5\u8981\u306a\u30c7\u30fc\u30bf\u69cb\u9020\u3092\u3001\u30d3\u30b8\u30cd\u30b9\u30e2\u30c7\u30eb\u304b\u3089\u6bb5\u968e\u7684\u306b\u8a2d\u8a08\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter12/#_1","title":"\u672c\u7ae0\u306e\u69cb\u6210","text":"\u30bb\u30af\u30b7\u30e7\u30f3 \u5185\u5bb9 12.1 B \u793e\u306e\u6982\u8981 \u4f1a\u793e\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3001\u4e8b\u696d\u74b0\u5883\u3001\u4e8b\u696d\u7279\u5fb4 12.2 \u7d44\u7e54\u69cb\u6210 \u7d44\u7e54\u56f3\u3001\u90e8\u9580\u968e\u5c64\u3001\u793e\u54e1\u914d\u7f6e 12.3 \u30d3\u30b8\u30cd\u30b9\u30e2\u30c7\u30eb \u30d3\u30b8\u30cd\u30b9\u30e2\u30c7\u30eb\u30ad\u30e3\u30f3\u30d0\u30b9\u3001\u53d6\u5f15\u5148\u30fb\u5546\u54c1\u69cb\u6210 12.4 \u30c7\u30fc\u30bf\u69cb\u9020\u306e\u8a2d\u8a08 \u30de\u30b9\u30bf\u69cb\u6210\u3001\u30b3\u30fc\u30c9\u4f53\u7cfb\u3001ENUM \u30de\u30c3\u30d4\u30f3\u30b0 12.5 Seed \u30c7\u30fc\u30bf\u306e\u5b9f\u88c5 \u30de\u30b9\u30bf\u30fb\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306e\u6295\u5165\u5b9f\u88c5"},{"location":"article/part2/chapter12/#121-b","title":"12.1 B \u793e\u306e\u6982\u8981","text":""},{"location":"article/part2/chapter12/#_2","title":"\u4f1a\u793e\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb","text":"\u9805\u76ee \u5185\u5bb9 \u793e\u540d B \u793e\uff08\u67b6\u7a7a\uff09 \u696d\u7a2e \u98df\u8089\u30fb\u98df\u8089\u52a0\u5de5\u54c1\u306e\u88fd\u9020\u30fb\u8ca9\u58f2\u696d \u8cc7\u672c\u91d1 3,000 \u4e07\u5186 \u5f93\u696d\u54e1\u6570 45 \u540d\uff08\u3046\u3061\u30d1\u30fc\u30c8\u5f93\u696d\u54e1 21 \u540d\uff09 \u4e8b\u696d\u6240 \u672c\u793e\u3001\u5de5\u5834\u3001\u76f4\u55b6\u5c0f\u58f2\u5e97 1 \u5e97\u8217 \u5e74\u9593\u8ca9\u58f2\u984d \u7d04 9 \u5104\u5186\uff082021 \u5e74\u5ea6\uff09 \u4e3b\u8981\u53d6\u6271\u5546\u54c1 \u725b\u8089\u3001\u8c5a\u8089\u3001\u9d8f\u8089\u3001\u98df\u8089\u52a0\u5de5\u54c1"},{"location":"article/part2/chapter12/#_3","title":"\u6cbf\u9769\u3068\u4e8b\u696d\u74b0\u5883","text":"<p>B \u793e\u306f X \u770c\u306e\u5927\u90fd\u5e02\u8fd1\u90ca\u306b\u7acb\u5730\u3057\u3001\u9ad8\u901f\u9053\u8def\u306e\u30a4\u30f3\u30bf\u30fc\u30c1\u30a7\u30f3\u30b8\u304b\u3089\u3082\u8fd1\u3044\u8eca\u306e\u5229\u4fbf\u6027\u304c\u826f\u3044\u30a8\u30ea\u30a2\u306b\u4f4d\u7f6e\u3057\u3066\u3044\u307e\u3059\u3002</p> <p>1955 \u5e74\u306b\u98df\u8089\u5c0f\u58f2\u5e97\u3068\u3057\u3066\u958b\u696d\u3057\u3001\u5f53\u6642\u306e\u98df\u8089\u6d88\u8cbb\u62e1\u5927\u306e\u6ce2\u306b\u4e57\u3063\u3066\u9806\u8abf\u306b\u6210\u9577\u30021960 \u5e74\u4ee3\u306b\u306f\u5730\u57df\u306e\u767e\u8ca8\u5e97\u3084\u8fd1\u96a3\u30b9\u30fc\u30d1\u30fc\u3078\u306e\u5378\u58f2\u4e8b\u696d\u3092\u958b\u59cb\u3057\u307e\u3057\u305f\u3002</p> <p>\u767e\u8ca8\u5e97\u3084\u30b9\u30fc\u30d1\u30fc\u3068\u306e\u53d6\u5f15\u5b9f\u7e3e\u304b\u3089\u3001B \u793e\u306e\u5546\u54c1\u306f\u30af\u30aa\u30ea\u30c6\u30a3\u306e\u9ad8\u3055\u306b\u5b9a\u8a55\u304c\u3042\u308a\u3001\u4ed5\u5165\u308c\u5143\u304b\u3089\u306e\u4fe1\u983c\u3082\u539a\u304f\u3001\u826f\u8cea\u306a\u98df\u8089\u3092\u5b89\u5b9a\u7684\u306b\u4ed5\u5165\u308c\u3089\u308c\u308b\u4f53\u5236\u304c\u6574\u3063\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter12/#_4","title":"\u4e8b\u696d\u306e\u7279\u5fb4","text":"\u7279\u5fb4 \u8aac\u660e \u9ad8\u54c1\u8cea\u306a\u5546\u54c1 \u767e\u8ca8\u5e97\u5411\u3051\u306b\u306f\u8d08\u7b54\u7528\u3092\u542b\u3081\u305f\u6700\u9ad8\u7d1a\u54c1\u8cea\u306e\u98df\u8089\u3084\u98df\u8089\u52a0\u5de5\u54c1 \u5bfe\u9762\u8ca9\u58f2 \u76f4\u55b6\u5c0f\u58f2\u5e97\u3067\u306f\u9867\u5ba2\u30cb\u30fc\u30ba\u306b\u5408\u308f\u305b\u305f\u63a5\u5ba2\u8ca9\u58f2 \u591a\u69d8\u306a\u8ca9\u8def \u767e\u8ca8\u5e97\u3001\u30b9\u30fc\u30d1\u30fc\u3001\u30db\u30c6\u30eb\u30fb\u65c5\u9928\u3001\u98f2\u98df\u5e97\u3001\u89b3\u5149\u65bd\u8a2d\u3001EC \u81ea\u793e\u88fd\u9020 \u5de5\u5834\u3067\u30cf\u30e0\u3001\u30bd\u30fc\u30bb\u30fc\u30b8\u3001\u30ed\u30fc\u30b9\u30c8\u30d3\u30fc\u30d5\u7b49\u306e\u52a0\u5de5\u54c1\u3092\u88fd\u9020 OEM \u5bfe\u5fdc \u76f8\u624b\u5148\u30d6\u30e9\u30f3\u30c9\u3067\u306e\u88fd\u9020\u3082\u53d7\u8a17"},{"location":"article/part2/chapter12/#122","title":"12.2 \u7d44\u7e54\u69cb\u6210","text":""},{"location":"article/part2/chapter12/#_5","title":"\u7d44\u7e54\u56f3","text":""},{"location":"article/part2/chapter12/#_6","title":"\u90e8\u9580\u30de\u30b9\u30bf\u306e\u968e\u5c64\u69cb\u9020","text":"<pre><code>\u672c\u793e\uff08000000\uff09\n\u251c\u2500\u2500 \u98df\u8089\u88fd\u9020\u30fb\u8ca9\u58f2\u4e8b\u696d\uff08100000\uff09\n\u2502   \u251c\u2500\u2500 \u98df\u8089\u52a0\u5de5\u90e8\u9580\uff08110000\uff09\n\u2502   \u2502   \u251c\u2500\u2500 \u725b\u8089\u30fb\u8c5a\u8089\u30fb\u9d8f\u8089\u8ab2\uff08111000\uff09\n\u2502   \u2502   \u2514\u2500\u2500 \u98df\u8089\u52a0\u5de5\u54c1\u8ab2\uff08112000\uff09\n\u2502   \u251c\u2500\u2500 \u5c0f\u58f2\u8ca9\u58f2\u90e8\u9580\uff08120000\uff09\n\u2502   \u2502   \u251c\u2500\u2500 \u76f4\u55b6\u5c0f\u58f2\u5e97\u8ab2\uff08121000\uff09\n\u2502   \u2502   \u2514\u2500\u2500 \u767e\u8ca8\u5e97\u30fb\u30b9\u30fc\u30d1\u30fc\u5411\u3051\u8ca9\u58f2\u8ab2\uff08122000\uff09\n\u2502   \u2514\u2500\u2500 \u65b0\u898f\u53d6\u5f15\u5148\u958b\u62d3\u90e8\u9580\uff08130000\uff09\n\u2502       \u251c\u2500\u2500 \u30db\u30c6\u30eb\u30fb\u65c5\u9928\u5411\u3051\u8ab2\uff08131000\uff09\n\u2502       \u2514\u2500\u2500 \u98f2\u98df\u5e97\u5411\u3051\u8ab2\uff08132000\uff09\n\u251c\u2500\u2500 \u98df\u8089\u52a0\u5de5\u54c1\u4e8b\u696d\uff08200000\uff09\n\u2502   \u251c\u2500\u2500 \u81ea\u793e\u30d6\u30e9\u30f3\u30c9\u90e8\u9580\uff08210000\uff09\n\u2502   \u2502   \u251c\u2500\u2500 \u8d08\u7b54\u7528\u88fd\u54c1\u88fd\u9020\u8ab2\uff08211000\uff09\n\u2502   \u2502   \u2514\u2500\u2500 \u9053\u306e\u99c5\u30fb\u571f\u7523\u7269\u88fd\u54c1\u8ca9\u58f2\u8ab2\uff08212000\uff09\n\u2502   \u2514\u2500\u2500 \u76f8\u624b\u5148\u30d6\u30e9\u30f3\u30c9\u88fd\u9020(OEM)\u90e8\u9580\uff08220000\uff09\n\u2502       \u2514\u2500\u2500 \u5ba2\u5148\u8981\u671b\u5bfe\u5fdc\u8ab2\uff08221000\uff09\n\u2514\u2500\u2500 \u30b3\u30f3\u30b5\u30eb\u30c6\u30a3\u30f3\u30b0\u4e8b\u696d\uff08300000\uff09\n    \u2514\u2500\u2500 \u9867\u5ba2\u5bfe\u5fdc\u90e8\u9580\uff08310000\uff09\n        \u251c\u2500\u2500 \u30e1\u30cb\u30e5\u30fc\u63d0\u6848\u8ab2\uff08311000\uff09\n        \u2514\u2500\u2500 \u534a\u52a0\u5de5\u5546\u54c1\u63d0\u4f9b\u8ab2\uff08312000\uff09\n</code></pre>"},{"location":"article/part2/chapter12/#_7","title":"\u793e\u54e1\u306e\u914d\u7f6e","text":"\u90e8\u9580 \u6b63\u793e\u54e1 \u30d1\u30fc\u30c8 \u8a08 \u7d4c\u55b6\u5c64\uff08\u672c\u793e\uff09 2 \u540d - 2 \u540d \u98df\u8089\u88fd\u9020\u30fb\u8ca9\u58f2\u4e8b\u696d 8 \u540d 7 \u540d 15 \u540d \u98df\u8089\u52a0\u5de5\u54c1\u4e8b\u696d 6 \u540d 8 \u540d 14 \u540d \u30b3\u30f3\u30b5\u30eb\u30c6\u30a3\u30f3\u30b0\u4e8b\u696d 6 \u540d 6 \u540d 12 \u540d \u7d4c\u7406\u30fb\u7dcf\u52d9\u7b49 2 \u540d - 2 \u540d \u5408\u8a08 24 \u540d 21 \u540d 45 \u540d"},{"location":"article/part2/chapter12/#123","title":"12.3 \u30d3\u30b8\u30cd\u30b9\u30e2\u30c7\u30eb","text":""},{"location":"article/part2/chapter12/#_8","title":"\u30d3\u30b8\u30cd\u30b9\u30e2\u30c7\u30eb\u30ad\u30e3\u30f3\u30d0\u30b9","text":""},{"location":"article/part2/chapter12/#_9","title":"\u5f97\u610f\u5148\u306e\u5206\u985e","text":"\u30b0\u30eb\u30fc\u30d7 \u53d6\u5f15\u5148\u4f8b \u7279\u5fb4 \u767e\u8ca8\u5e97 \u5730\u57df\u767e\u8ca8\u5e97\u3001X \u770c\u6709\u540d\u767e\u8ca8\u5e97 \u8d08\u7b54\u7528\u9ad8\u7d1a\u54c1\u3001\u30ae\u30d5\u30c8\u9700\u8981 \u30b9\u30fc\u30d1\u30fc \u5730\u57df\u30b9\u30fc\u30d1\u30fc\u30c1\u30a7\u30fc\u30f3\u3001\u5e83\u57df\u30b9\u30fc\u30d1\u30fc\u30c1\u30a7\u30fc\u30f3 \u65e5\u5e38\u4f7f\u3044\u306e\u30ab\u30c3\u30c8\u8089\u30fb\u30b9\u30e9\u30a4\u30b9\u8089 \u30db\u30c6\u30eb\u30fb\u65c5\u9928 \u30b7\u30c6\u30a3\u30db\u30c6\u30eb\u3001\u6e29\u6cc9\u65c5\u9928 \u5bb4\u4f1a\u30fb\u30ec\u30b9\u30c8\u30e9\u30f3\u5411\u3051 \u98f2\u98df\u5e97 \u713c\u8089\u30ec\u30b9\u30c8\u30e9\u30f3\u3001\u30a4\u30bf\u30ea\u30a2\u30f3\u30ec\u30b9\u30c8\u30e9\u30f3 \u30e1\u30cb\u30e5\u30fc\u63d0\u6848\u4ed8\u304d\u8ca9\u58f2 \u89b3\u5149\u65bd\u8a2d \u9053\u306e\u99c5\u3001\u89b3\u5149\u30bb\u30f3\u30bf\u30fc \u571f\u7523\u7269\u30fb\u8d08\u7b54\u54c1"},{"location":"article/part2/chapter12/#_10","title":"\u4ed5\u5165\u5148\u306e\u5206\u985e","text":"\u30b0\u30eb\u30fc\u30d7 \u53d6\u5f15\u5148\u4f8b \u7279\u5fb4 \u98df\u8089\u5378 \u5730\u57df\u98df\u8089\u5378 A \u793e\u3001\u5730\u57df\u98df\u8089\u5378 B \u793e \u725b\u8089\u30fb\u8c5a\u8089\u30fb\u9d8f\u8089\u306e\u5b89\u5b9a\u4f9b\u7d66 \u755c\u7523\u696d\u8005 \u5730\u57df\u755c\u7523\u8fb2\u5bb6\u3001\u770c\u5185\u755c\u7523\u7d44\u5408 \u9ad8\u54c1\u8cea\u306a\u539f\u6750\u6599"},{"location":"article/part2/chapter12/#_11","title":"\u5546\u54c1\u69cb\u6210","text":"\u5206\u985e \u5546\u54c1\u4f8b \u7279\u5fb4 \u725b\u8089 \u9ed2\u6bdb\u548c\u725b\u30b5\u30fc\u30ed\u30a4\u30f3\u3001\u30ed\u30fc\u30b9\u3001\u30ab\u30eb\u30d3\u3001\u30d2\u30ec\u3001\u5207\u308a\u843d\u3068\u3057 \u9ad8\u7d1a\u54c1\u304b\u3089\u65e5\u5e38\u4f7f\u3044\u307e\u3067 \u8c5a\u8089 \u8c5a\u30ed\u30fc\u30b9\u3001\u8c5a\u30d0\u30e9\u3001\u8c5a\u30d2\u30ec\u3001\u8c5a\u30b3\u30de\u3001\u8c5a\u80a9\u30ed\u30fc\u30b9 \u5e45\u5e83\u3044\u7528\u9014 \u9d8f\u8089 \u9d8f\u3082\u3082\u3001\u9d8f\u3080\u306d\u3001\u624b\u7fbd\u5148\u3001\u624b\u7fbd\u5143\u3001\u9d8f\u3055\u3055\u307f \u5065\u5eb7\u5fd7\u5411\u306b\u3082\u5bfe\u5fdc \u52a0\u5de5\u54c1 \u30ed\u30fc\u30b9\u30c8\u30d3\u30fc\u30d5\u3001\u30cf\u30e0\u3001\u30bd\u30fc\u30bb\u30fc\u30b8\u3001\u30d9\u30fc\u30b3\u30f3\u3001\u30b3\u30ed\u30c3\u30b1 \u81ea\u793e\u5de5\u5834\u88fd\u9020"},{"location":"article/part2/chapter12/#124","title":"12.4 \u30c7\u30fc\u30bf\u69cb\u9020\u306e\u8a2d\u8a08","text":""},{"location":"article/part2/chapter12/#_12","title":"\u30de\u30b9\u30bf\u30c7\u30fc\u30bf\u306e\u69cb\u6210","text":"\u30c7\u30fc\u30bf\u7a2e\u5225 \u4ef6\u6570 \u5185\u5bb9 \u90e8\u9580\u30de\u30b9\u30bf 21 \u4ef6 4 \u968e\u5c64\u306e\u7d44\u7e54\u69cb\u9020 \u793e\u54e1\u30de\u30b9\u30bf 24 \u4ef6 \u6b63\u793e\u54e1 24 \u540d \u53d6\u5f15\u5148\u30de\u30b9\u30bf 14 \u4ef6 \u5f97\u610f\u5148 10 \u4ef6\u3001\u4ed5\u5165\u5148 4 \u4ef6 \u5546\u54c1\u5206\u985e\u30de\u30b9\u30bf 4 \u4ef6 \u725b\u8089\u3001\u8c5a\u8089\u3001\u9d8f\u8089\u3001\u52a0\u5de5\u54c1 \u5546\u54c1\u30de\u30b9\u30bf 20 \u4ef6 \u5404\u5206\u985e 5 \u4ef6\u305a\u3064 \u5009\u5eab\u30de\u30b9\u30bf 3 \u4ef6 \u672c\u793e\u5009\u5eab\u3001\u5de5\u5834\u5009\u5eab\u3001\u5916\u90e8\u59d4\u8a17\u5009\u5eab"},{"location":"article/part2/chapter12/#_13","title":"\u30b3\u30fc\u30c9\u4f53\u7cfb","text":""},{"location":"article/part2/chapter12/#_14","title":"\u5546\u54c1\u30b3\u30fc\u30c9\u4f53\u7cfb","text":"\u63a5\u982d\u8f9e \u533a\u5206 \u4f8b BEEF- \u725b\u8089 BEEF-001 \u9ed2\u6bdb\u548c\u725b\u30b5\u30fc\u30ed\u30a4\u30f3 PORK- \u8c5a\u8089 PORK-001 \u8c5a\u30ed\u30fc\u30b9 CHKN- \u9d8f\u8089 CHKN-001 \u9d8f\u3082\u3082 PROC- \u52a0\u5de5\u54c1 PROC-001 \u30ed\u30fc\u30b9\u30c8\u30d3\u30fc\u30d5"},{"location":"article/part2/chapter12/#_15","title":"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\u4f53\u7cfb","text":"\u63a5\u982d\u8f9e \u533a\u5206 \u4f8b CUS- \u5f97\u610f\u5148 CUS-001 \u5730\u57df\u767e\u8ca8\u5e97 SUP- \u4ed5\u5165\u5148 SUP-001 \u5730\u57df\u98df\u8089\u5378 A \u793e"},{"location":"article/part2/chapter12/#_16","title":"\u90e8\u9580\u30b3\u30fc\u30c9\u4f53\u7cfb","text":"\u30b3\u30fc\u30c9 \u90e8\u9580\u540d \u968e\u5c64 000000 \u672c\u793e 1 100000 \u98df\u8089\u88fd\u9020\u30fb\u8ca9\u58f2\u4e8b\u696d 2 110000 \u98df\u8089\u52a0\u5de5\u90e8\u9580 3 111000 \u725b\u8089\u30fb\u8c5a\u8089\u30fb\u9d8f\u8089\u8ab2 4 112000 \u98df\u8089\u52a0\u5de5\u54c1\u8ab2 4 120000 \u5c0f\u58f2\u8ca9\u58f2\u90e8\u9580 3 121000 \u76f4\u55b6\u5c0f\u58f2\u5e97\u8ab2 4 122000 \u767e\u8ca8\u5e97\u30fb\u30b9\u30fc\u30d1\u30fc\u5411\u3051\u8ca9\u58f2\u8ab2 4 200000 \u98df\u8089\u52a0\u5de5\u54c1\u4e8b\u696d 2 300000 \u30b3\u30f3\u30b5\u30eb\u30c6\u30a3\u30f3\u30b0\u4e8b\u696d 2"},{"location":"article/part2/chapter12/#enum","title":"ENUM \u306e\u65e5\u672c\u8a9e\u30fb\u82f1\u8a9e\u30de\u30c3\u30d4\u30f3\u30b0","text":"<p>\u672c\u30b7\u30b9\u30c6\u30e0\u3067\u306f\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e ENUM \u5024\u306f\u65e5\u672c\u8a9e\u3001Java \u306e ENUM \u306f\u82f1\u8a9e\u3067\u5b9a\u7fa9\u3057\u3001MyBatis \u306e TypeHandler \u3067\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u884c\u3044\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter12/#partnertype","title":"\u53d6\u5f15\u5148\u533a\u5206\uff08PartnerType\uff09","text":"\u65e5\u672c\u8a9e DB \u5024 \u82f1\u8a9e Java \u5024 \"\u9867\u5ba2\" CUSTOMER \"\u4ed5\u5165\u5148\" SUPPLIER"},{"location":"article/part2/chapter12/#producttype","title":"\u5546\u54c1\u533a\u5206\uff08ProductType\uff09","text":"\u65e5\u672c\u8a9e DB \u5024 \u82f1\u8a9e Java \u5024 \"\u5546\u54c1\" PRODUCT \"\u88fd\u54c1\" MANUFACTURED \"\u30b5\u30fc\u30d3\u30b9\" SERVICE"},{"location":"article/part2/chapter12/#taxtype","title":"\u7a0e\u533a\u5206\uff08TaxType\uff09","text":"\u65e5\u672c\u8a9e DB \u5024 \u82f1\u8a9e Java \u5024 \"\u6a19\u6e96\u7a0e\u7387\" STANDARD \"\u8efd\u6e1b\u7a0e\u7387\" REDUCED \"\u975e\u8ab2\u7a0e\" EXEMPT"},{"location":"article/part2/chapter12/#orderstatus","title":"\u53d7\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\uff08OrderStatus\uff09","text":"\u65e5\u672c\u8a9e DB \u5024 \u82f1\u8a9e Java \u5024 \"\u53d7\u4ed8\u6e08\" RECEIVED \"\u5f15\u5f53\u6e08\" ALLOCATED \"\u51fa\u8377\u6307\u793a\u6e08\" SHIPMENT_INSTRUCTED \"\u51fa\u8377\u6e08\" SHIPPED \"\u30ad\u30e3\u30f3\u30bb\u30eb\" CANCELLED"},{"location":"article/part2/chapter12/#shipmentstatus","title":"\u51fa\u8377\u30b9\u30c6\u30fc\u30bf\u30b9\uff08ShipmentStatus\uff09","text":"\u65e5\u672c\u8a9e DB \u5024 \u82f1\u8a9e Java \u5024 \"\u672a\u51fa\u8377\" PENDING \"\u51fa\u8377\u6e08\" SHIPPED \"\u914d\u9054\u5b8c\u4e86\" DELIVERED"},{"location":"article/part2/chapter12/#purchasestatus","title":"\u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\uff08PurchaseStatus\uff09","text":"\u65e5\u672c\u8a9e DB \u5024 \u82f1\u8a9e Java \u5024 \"\u767a\u6ce8\u6e08\" ORDERED \"\u5165\u8377\u6e08\" RECEIVED \"\u691c\u53ce\u6e08\" INSPECTED \"\u30ad\u30e3\u30f3\u30bb\u30eb\" CANCELLED"},{"location":"article/part2/chapter12/#warehousetype","title":"\u5009\u5eab\u533a\u5206\uff08WarehouseType\uff09","text":"\u65e5\u672c\u8a9e DB \u5024 \u82f1\u8a9e Java \u5024 \"\u81ea\u793e\" OWN \"\u5916\u90e8\" EXTERNAL \"\u4eee\u60f3\" VIRTUAL"},{"location":"article/part2/chapter12/#er","title":"\u30c7\u30fc\u30bf\u30e2\u30c7\u30eb ER \u56f3","text":""},{"location":"article/part2/chapter12/#125-seed","title":"12.5 Seed \u30c7\u30fc\u30bf\u306e\u5b9f\u88c5","text":""},{"location":"article/part2/chapter12/#_17","title":"\u5b9f\u88c5\u65b9\u91dd","text":"<p>Seed \u30c7\u30fc\u30bf\u306e\u6295\u5165\u306b\u3042\u305f\u308a\u3001\u4ee5\u4e0b\u306e\u30dd\u30a4\u30f3\u30c8\u3092\u8003\u616e\u3057\u307e\u3059\u3002</p> \u30dd\u30a4\u30f3\u30c8 \u8aac\u660e \u5916\u90e8\u30ad\u30fc\u5236\u7d04\u306e\u8003\u616e \u30c7\u30fc\u30bf\u6295\u5165\u9806\u5e8f\u3092\u4f9d\u5b58\u95a2\u4fc2\u306b\u57fa\u3065\u3044\u3066\u8a2d\u8a08 \u8907\u5408\u30ad\u30fc\u306e\u6271\u3044 \u9069\u7528\u958b\u59cb\u65e5\u3092\u542b\u3080\u8907\u5408\u4e3b\u30ad\u30fc\u3078\u306e\u5bfe\u5fdc \u65e5\u672c\u8a9e\u30c6\u30fc\u30d6\u30eb\u540d\u30fb\u30ab\u30e9\u30e0\u540d MyBatis \u306e resultMap \u3067\u30de\u30c3\u30d4\u30f3\u30b0 \u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3 Repository\uff08\u51fa\u529b\u30dd\u30fc\u30c8\uff09\u7d4c\u7531\u3067\u30c7\u30fc\u30bf\u6295\u5165 Spring Profile \u306e\u6d3b\u7528 <code>default</code> \u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3067\u30a2\u30d7\u30ea\u8d77\u52d5\u6642\u306b\u81ea\u52d5\u6295\u5165"},{"location":"article/part2/chapter12/#_18","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u9020","text":"<pre><code>src/\n\u251c\u2500\u2500 main/\n\u2502   \u2514\u2500\u2500 java/\n\u2502       \u2514\u2500\u2500 com/example/sms/\n\u2502           \u251c\u2500\u2500 application/\n\u2502           \u2502   \u2514\u2500\u2500 port/\n\u2502           \u2502       \u2514\u2500\u2500 out/\n\u2502           \u2502           \u2514\u2500\u2500 *Repository.java    # \u51fa\u529b\u30dd\u30fc\u30c8\n\u2502           \u251c\u2500\u2500 domain/\n\u2502           \u2502   \u2514\u2500\u2500 model/\n\u2502           \u2502       \u2514\u2500\u2500 ...                     # \u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\n\u2502           \u2514\u2500\u2500 infrastructure/\n\u2502               \u251c\u2500\u2500 in/\n\u2502               \u2502   \u251c\u2500\u2500 rest/                   # REST API \u30a2\u30c0\u30d7\u30bf\n\u2502               \u2502   \u2514\u2500\u2500 seed/                   # Seed \u30c7\u30fc\u30bf\u6295\u5165\n\u2502               \u2502       \u251c\u2500\u2500 SeedDataService.java\n\u2502               \u2502       \u251c\u2500\u2500 MasterDataSeeder.java\n\u2502               \u2502       \u251c\u2500\u2500 TransactionDataSeeder.java\n\u2502               \u2502       \u2514\u2500\u2500 SeedRunner.java\n\u2502               \u2514\u2500\u2500 out/\n\u2502                   \u2514\u2500\u2500 persistence/\n\u2502                       \u251c\u2500\u2500 mapper/             # MyBatis Mapper\n\u2502                       \u2514\u2500\u2500 repository/         # Repository \u5b9f\u88c5\n\u2514\u2500\u2500 test/\n    \u2514\u2500\u2500 java/\n        \u2514\u2500\u2500 com/example/sms/\n            \u2514\u2500\u2500 infrastructure/\n                \u2514\u2500\u2500 in/\n                    \u2514\u2500\u2500 seed/\n                        \u2514\u2500\u2500 SeedDataServiceTest.java\n</code></pre>"},{"location":"article/part2/chapter12/#seeddataservice","title":"SeedDataService \u306e\u5b9f\u88c5","text":"SeedDataService.java <pre><code>package com.example.sms.infrastructure.in.seed;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.time.LocalDate;\n\n/**\n * Seed \u30c7\u30fc\u30bf\u6295\u5165\u30b5\u30fc\u30d3\u30b9.\n * B\u793e\u4e8b\u4f8b\u306b\u57fa\u3065\u304f\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u521d\u671f\u30c7\u30fc\u30bf\u3092\u6295\u5165\u3059\u308b\u3002\n */\n@Service\npublic class SeedDataService {\n\n    private static final Logger log = LoggerFactory.getLogger(SeedDataService.class);\n\n    private final MasterDataSeeder masterDataSeeder;\n    private final TransactionDataSeeder transactionDataSeeder;\n\n    public SeedDataService(\n            MasterDataSeeder masterDataSeeder,\n            TransactionDataSeeder transactionDataSeeder) {\n        this.masterDataSeeder = masterDataSeeder;\n        this.transactionDataSeeder = transactionDataSeeder;\n    }\n\n    /**\n     * \u3059\u3079\u3066\u306e Seed \u30c7\u30fc\u30bf\u3092\u6295\u5165.\n     */\n    @Transactional\n    public void seedAll() {\n        log.info(\"========================================\");\n        log.info(\"\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 Seed \u30c7\u30fc\u30bf\u6295\u5165\u958b\u59cb\");\n        log.info(\"========================================\");\n\n        LocalDate effectiveDate = LocalDate.of(2025, 1, 1);\n\n        // \u65e2\u5b58\u30c7\u30fc\u30bf\u306e\u524a\u9664\n        cleanAllData();\n\n        // \u30de\u30b9\u30bf\u30c7\u30fc\u30bf\u306e\u6295\u5165\n        masterDataSeeder.seedAll(effectiveDate);\n\n        // \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u306e\u6295\u5165\n        transactionDataSeeder.seedAll(effectiveDate);\n\n        log.info(\"========================================\");\n        log.info(\"\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 Seed \u30c7\u30fc\u30bf\u6295\u5165\u5b8c\u4e86!\");\n        log.info(\"========================================\");\n    }\n\n    private void cleanAllData() {\n        log.info(\"\u65e2\u5b58\u30c7\u30fc\u30bf\u3092\u524a\u9664\u4e2d...\");\n\n        // \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u304b\u3089\u524a\u9664\uff08\u5916\u90e8\u30ad\u30fc\u5236\u7d04\u306e\u305f\u3081\u9006\u9806\uff09\n        transactionDataSeeder.cleanAll();\n\n        // \u30de\u30b9\u30bf\u30c7\u30fc\u30bf\u3092\u524a\u9664\n        masterDataSeeder.cleanAll();\n\n        log.info(\"\u65e2\u5b58\u30c7\u30fc\u30bf\u524a\u9664\u5b8c\u4e86\");\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter12/#masterdataseeder","title":"MasterDataSeeder \u306e\u5b9f\u88c5","text":"MasterDataSeeder.java <pre><code>package com.example.sms.infrastructure.in.seed;\n\nimport com.example.sms.application.port.out.*;\nimport com.example.sms.domain.model.department.Department;\nimport com.example.sms.domain.model.employee.Employee;\nimport com.example.sms.domain.model.inventory.Warehouse;\nimport com.example.sms.domain.model.inventory.WarehouseType;\nimport com.example.sms.domain.model.partner.Partner;\nimport com.example.sms.domain.model.product.*;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.stereotype.Component;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.util.List;\n\n/**\n * \u30de\u30b9\u30bf\u30c7\u30fc\u30bf Seeder.\n * B\u793e\u4e8b\u4f8b\u306b\u57fa\u3065\u304f\u30de\u30b9\u30bf\u30c7\u30fc\u30bf\u3092\u6295\u5165\u3059\u308b\u3002\n */\n@Component\npublic class MasterDataSeeder {\n\n    private static final Logger log = LoggerFactory.getLogger(MasterDataSeeder.class);\n\n    private final DepartmentRepository departmentRepository;\n    private final EmployeeRepository employeeRepository;\n    private final PartnerRepository partnerRepository;\n    private final ProductClassificationRepository productClassificationRepository;\n    private final ProductRepository productRepository;\n    private final WarehouseRepository warehouseRepository;\n\n    // \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u7701\u7565\n\n    /**\n     * \u3059\u3079\u3066\u306e\u30de\u30b9\u30bf\u30c7\u30fc\u30bf\u3092\u6295\u5165.\n     */\n    public void seedAll(LocalDate effectiveDate) {\n        seedDepartments(effectiveDate);\n        seedWarehouses();\n        seedProductClassifications();\n        seedProducts();\n        seedPartners();\n        seedEmployees(effectiveDate);\n    }\n\n    /**\n     * \u3059\u3079\u3066\u306e\u30de\u30b9\u30bf\u30c7\u30fc\u30bf\u3092\u524a\u9664.\n     */\n    public void cleanAll() {\n        employeeRepository.deleteAll();\n        productRepository.deleteAll();\n        productClassificationRepository.deleteAll();\n        partnerRepository.deleteAll();\n        warehouseRepository.deleteAll();\n        departmentRepository.deleteAll();\n    }\n\n    private void seedDepartments(LocalDate effectiveDate) {\n        log.info(\"\u90e8\u9580\u30de\u30b9\u30bf\u3092\u6295\u5165\u4e2d...\");\n\n        List&lt;Department&gt; departments = List.of(\n            // \u672c\u793e\n            Department.builder()\n                .departmentCode(\"000000\").startDate(effectiveDate)\n                .departmentName(\"\u672c\u793e\").departmentPath(\"/000000\").hierarchyLevel(1).build(),\n\n            // \u98df\u8089\u88fd\u9020\u30fb\u8ca9\u58f2\u4e8b\u696d\n            Department.builder()\n                .departmentCode(\"100000\").startDate(effectiveDate)\n                .departmentName(\"\u98df\u8089\u88fd\u9020\u30fb\u8ca9\u58f2\u4e8b\u696d\").departmentPath(\"/000000/100000\").hierarchyLevel(2).build(),\n            // ... \u4ee5\u4e0b\u7701\u7565\n        );\n\n        departments.forEach(departmentRepository::save);\n        log.info(\"\u90e8\u9580\u30de\u30b9\u30bf {}\u4ef6 \u6295\u5165\u5b8c\u4e86\", departments.size());\n    }\n\n    private void seedWarehouses() {\n        log.info(\"\u5009\u5eab\u30de\u30b9\u30bf\u3092\u6295\u5165\u4e2d...\");\n\n        List&lt;Warehouse&gt; warehouses = List.of(\n            Warehouse.builder()\n                .warehouseCode(\"WH-HQ\")\n                .warehouseName(\"\u672c\u793e\u5009\u5eab\")\n                .warehouseType(WarehouseType.OWN)\n                .address(\"\u6771\u4eac\u90fd\u5343\u4ee3\u7530\u533a1-1-1\")\n                .activeFlag(true)\n                .build(),\n            Warehouse.builder()\n                .warehouseCode(\"WH-FAC\")\n                .warehouseName(\"\u5de5\u5834\u5009\u5eab\")\n                .warehouseType(WarehouseType.OWN)\n                .address(\"\u57fc\u7389\u770c\u3055\u3044\u305f\u307e\u5e022-2-2\")\n                .activeFlag(true)\n                .build(),\n            Warehouse.builder()\n                .warehouseCode(\"WH-EXT\")\n                .warehouseName(\"\u5916\u90e8\u59d4\u8a17\u5009\u5eab\")\n                .warehouseType(WarehouseType.EXTERNAL)\n                .address(\"\u795e\u5948\u5ddd\u770c\u6a2a\u6d5c\u5e023-3-3\")\n                .activeFlag(true)\n                .build()\n        );\n\n        warehouses.forEach(warehouseRepository::save);\n        log.info(\"\u5009\u5eab\u30de\u30b9\u30bf {}\u4ef6 \u6295\u5165\u5b8c\u4e86\", warehouses.size());\n    }\n\n    private void seedProductClassifications() {\n        log.info(\"\u5546\u54c1\u5206\u985e\u30de\u30b9\u30bf\u3092\u6295\u5165\u4e2d...\");\n\n        List&lt;ProductClassification&gt; categories = List.of(\n            ProductClassification.builder()\n                .classificationCode(\"CAT-BEEF\").classificationName(\"\u725b\u8089\")\n                .classificationPath(\"/CAT-BEEF\").hierarchyLevel(1).build(),\n            ProductClassification.builder()\n                .classificationCode(\"CAT-PORK\").classificationName(\"\u8c5a\u8089\")\n                .classificationPath(\"/CAT-PORK\").hierarchyLevel(1).build(),\n            ProductClassification.builder()\n                .classificationCode(\"CAT-CHKN\").classificationName(\"\u9d8f\u8089\")\n                .classificationPath(\"/CAT-CHKN\").hierarchyLevel(1).build(),\n            ProductClassification.builder()\n                .classificationCode(\"CAT-PROC\").classificationName(\"\u52a0\u5de5\u54c1\")\n                .classificationPath(\"/CAT-PROC\").hierarchyLevel(1).build()\n        );\n\n        categories.forEach(productClassificationRepository::save);\n        log.info(\"\u5546\u54c1\u5206\u985e\u30de\u30b9\u30bf {}\u4ef6 \u6295\u5165\u5b8c\u4e86\", categories.size());\n    }\n\n    private void seedProducts() {\n        log.info(\"\u5546\u54c1\u30de\u30b9\u30bf\u3092\u6295\u5165\u4e2d...\");\n\n        List&lt;Product&gt; products = List.of(\n            // \u725b\u8089\n            createProduct(\"BEEF-001\", \"\u9ed2\u6bdb\u548c\u725b\u30b5\u30fc\u30ed\u30a4\u30f3\", \"CAT-BEEF\", 8000, 5000),\n            createProduct(\"BEEF-002\", \"\u9ed2\u6bdb\u548c\u725b\u30ed\u30fc\u30b9\", \"CAT-BEEF\", 6000, 3800),\n            // ... \u4ee5\u4e0b\u7701\u7565\uff08\u516820\u4ef6\uff09\n        );\n\n        products.forEach(productRepository::save);\n        log.info(\"\u5546\u54c1\u30de\u30b9\u30bf {}\u4ef6 \u6295\u5165\u5b8c\u4e86\", products.size());\n    }\n\n    private Product createProduct(String code, String name, String classificationCode,\n                                   int sellingPrice, int purchasePrice) {\n        return Product.builder()\n            .productCode(code)\n            .productName(name)\n            .productCategory(ProductCategory.PRODUCT)\n            .taxCategory(TaxCategory.EXCLUSIVE)\n            .classificationCode(classificationCode)\n            .sellingPrice(new BigDecimal(sellingPrice))\n            .purchasePrice(new BigDecimal(purchasePrice))\n            .isInventoryManaged(true)\n            .build();\n    }\n\n    private void seedPartners() {\n        log.info(\"\u53d6\u5f15\u5148\u30de\u30b9\u30bf\u3092\u6295\u5165\u4e2d...\");\n\n        List&lt;Partner&gt; partners = List.of(\n            // \u5f97\u610f\u5148\uff08\u767e\u8ca8\u5e97\uff09\n            createCustomer(\"CUS-001\", \"\u5730\u57df\u767e\u8ca8\u5e97\"),\n            createCustomer(\"CUS-002\", \"X\u770c\u6709\u540d\u767e\u8ca8\u5e97\"),\n            // ... \u4ee5\u4e0b\u7701\u7565\uff08\u516814\u4ef6\uff1a\u5f97\u610f\u514810\u4ef6\u3001\u4ed5\u5165\u51484\u4ef6\uff09\n        );\n\n        partners.forEach(partnerRepository::save);\n        log.info(\"\u53d6\u5f15\u5148\u30de\u30b9\u30bf {}\u4ef6 \u6295\u5165\u5b8c\u4e86\", partners.size());\n    }\n\n    private Partner createCustomer(String code, String name) {\n        return Partner.builder()\n            .partnerCode(code)\n            .partnerName(name)\n            .isCustomer(true)\n            .isSupplier(false)\n            .creditLimit(new BigDecimal(\"10000000\"))\n            .build();\n    }\n\n    private Partner createSupplier(String code, String name) {\n        return Partner.builder()\n            .partnerCode(code)\n            .partnerName(name)\n            .isCustomer(false)\n            .isSupplier(true)\n            .build();\n    }\n\n    private void seedEmployees(LocalDate effectiveDate) {\n        log.info(\"\u793e\u54e1\u30de\u30b9\u30bf\u3092\u6295\u5165\u4e2d...\");\n\n        List&lt;Employee&gt; employees = List.of(\n            // \u7d4c\u55b6\u5c64\n            createEmployee(\"EMP-001\", \"\u5c71\u7530 \u592a\u90ce\", \"000000\", effectiveDate),\n            createEmployee(\"EMP-002\", \"\u4f50\u85e4 \u6b21\u90ce\", \"000000\", effectiveDate),\n            // ... \u4ee5\u4e0b\u7701\u7565\uff08\u516824\u4ef6\uff09\n        );\n\n        employees.forEach(employeeRepository::save);\n        log.info(\"\u793e\u54e1\u30de\u30b9\u30bf {}\u4ef6 \u6295\u5165\u5b8c\u4e86\", employees.size());\n    }\n\n    private Employee createEmployee(String code, String name, String departmentCode,\n                                     LocalDate departmentStartDate) {\n        return Employee.builder()\n            .employeeCode(code)\n            .employeeName(name)\n            .departmentCode(departmentCode)\n            .departmentStartDate(departmentStartDate)\n            .build();\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter12/#transactiondataseeder","title":"TransactionDataSeeder \u306e\u5b9f\u88c5","text":"TransactionDataSeeder.java <pre><code>package com.example.sms.infrastructure.in.seed;\n\nimport com.example.sms.application.port.out.*;\nimport com.example.sms.domain.model.inventory.Inventory;\nimport com.example.sms.domain.model.product.TaxCategory;\nimport com.example.sms.domain.model.sales.OrderStatus;\nimport com.example.sms.domain.model.sales.SalesOrder;\nimport com.example.sms.domain.model.sales.SalesOrderDetail;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.stereotype.Component;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.util.List;\n\n/**\n * \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf Seeder.\n * B\u793e\u4e8b\u4f8b\u306b\u57fa\u3065\u304f\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u3092\u6295\u5165\u3059\u308b\u3002\n */\n@Component\npublic class TransactionDataSeeder {\n\n    private static final Logger log = LoggerFactory.getLogger(TransactionDataSeeder.class);\n\n    private final InventoryRepository inventoryRepository;\n    private final SalesOrderRepository salesOrderRepository;\n    private final ShipmentRepository shipmentRepository;\n    private final SalesRepository salesRepository;\n\n    // \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u7701\u7565\n\n    /**\n     * \u3059\u3079\u3066\u306e\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u3092\u6295\u5165.\n     */\n    public void seedAll(LocalDate effectiveDate) {\n        seedInventories();\n        seedOrders(effectiveDate);\n    }\n\n    /**\n     * \u3059\u3079\u3066\u306e\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u3092\u524a\u9664.\n     */\n    public void cleanAll() {\n        salesRepository.deleteAll();\n        shipmentRepository.deleteAll();\n        salesOrderRepository.deleteAll();\n        inventoryRepository.deleteAll();\n    }\n\n    private void seedInventories() {\n        log.info(\"\u5728\u5eab\u60c5\u5831\u3092\u6295\u5165\u4e2d...\");\n\n        List&lt;Inventory&gt; inventories = List.of(\n            // \u672c\u793e\u5009\u5eab\u306e\u5728\u5eab\uff08\u725b\u8089\uff09\n            createInventory(\"WH-HQ\", \"BEEF-001\", 50, 10),\n            createInventory(\"WH-HQ\", \"BEEF-002\", 80, 15),\n            createInventory(\"WH-HQ\", \"BEEF-003\", 100, 20),\n            createInventory(\"WH-HQ\", \"BEEF-004\", 30, 5),\n            createInventory(\"WH-HQ\", \"BEEF-005\", 150, 30),\n\n            // \u672c\u793e\u5009\u5eab\u306e\u5728\u5eab\uff08\u8c5a\u8089\uff09\n            createInventory(\"WH-HQ\", \"PORK-001\", 200, 30),\n            createInventory(\"WH-HQ\", \"PORK-002\", 250, 40),\n            createInventory(\"WH-HQ\", \"PORK-003\", 100, 15),\n            createInventory(\"WH-HQ\", \"PORK-004\", 300, 50),\n            createInventory(\"WH-HQ\", \"PORK-005\", 180, 25),\n\n            // \u672c\u793e\u5009\u5eab\u306e\u5728\u5eab\uff08\u9d8f\u8089\uff09\n            createInventory(\"WH-HQ\", \"CHKN-001\", 300, 50),\n            createInventory(\"WH-HQ\", \"CHKN-002\", 350, 60),\n            createInventory(\"WH-HQ\", \"CHKN-003\", 200, 30),\n            createInventory(\"WH-HQ\", \"CHKN-004\", 180, 25),\n            createInventory(\"WH-HQ\", \"CHKN-005\", 150, 20),\n\n            // \u5de5\u5834\u5009\u5eab\u306e\u5728\u5eab\uff08\u52a0\u5de5\u54c1\uff09\n            createInventory(\"WH-FAC\", \"PROC-001\", 100, 20),\n            createInventory(\"WH-FAC\", \"PROC-002\", 150, 30),\n            createInventory(\"WH-FAC\", \"PROC-003\", 200, 40),\n            createInventory(\"WH-FAC\", \"PROC-004\", 180, 35),\n            createInventory(\"WH-FAC\", \"PROC-005\", 300, 50)\n        );\n\n        inventories.forEach(inventoryRepository::save);\n        log.info(\"\u5728\u5eab\u60c5\u5831 {}\u4ef6 \u6295\u5165\u5b8c\u4e86\", inventories.size());\n    }\n\n    private Inventory createInventory(String warehouseCode, String productCode,\n                                        int quantity, int allocatedQuantity) {\n        return Inventory.builder()\n            .warehouseCode(warehouseCode)\n            .productCode(productCode)\n            .currentQuantity(new BigDecimal(quantity))\n            .allocatedQuantity(new BigDecimal(allocatedQuantity))\n            .orderedQuantity(BigDecimal.ZERO)\n            .build();\n    }\n\n    private void seedOrders(LocalDate effectiveDate) {\n        log.info(\"\u53d7\u6ce8\u30c7\u30fc\u30bf\u3092\u6295\u5165\u4e2d...\");\n\n        // \u53d7\u6ce81\uff08\u767e\u8ca8\u5e97\u5411\u3051\uff09- \u5f15\u5f53\u6e08\u307f\n        SalesOrder order1 = SalesOrder.builder()\n            .orderNumber(\"ORD-2025-001\")\n            .orderDate(LocalDate.of(2025, 1, 10))\n            .customerCode(\"CUS-001\")\n            .representativeCode(\"EMP-009\")\n            .requestedDeliveryDate(LocalDate.of(2025, 1, 15))\n            .status(OrderStatus.ALLOCATED)\n            .details(List.of(\n                createOrderDetail(1, \"BEEF-001\", \"\u9ed2\u6bdb\u548c\u725b\u30b5\u30fc\u30ed\u30a4\u30f3\", 10, 8000),\n                createOrderDetail(2, \"PROC-001\", \"\u30ed\u30fc\u30b9\u30c8\u30d3\u30fc\u30d5\", 20, 3500)\n            ))\n            .build();\n        salesOrderRepository.save(order1);\n\n        // \u53d7\u6ce82\uff08\u30b9\u30fc\u30d1\u30fc\u5411\u3051\uff09- \u5f15\u5f53\u6e08\u307f\n        SalesOrder order2 = SalesOrder.builder()\n            .orderNumber(\"ORD-2025-002\")\n            .orderDate(LocalDate.of(2025, 1, 12))\n            .customerCode(\"CUS-003\")\n            .representativeCode(\"EMP-009\")\n            .requestedDeliveryDate(LocalDate.of(2025, 1, 18))\n            .status(OrderStatus.ALLOCATED)\n            .details(List.of(\n                createOrderDetail(1, \"PORK-001\", \"\u8c5a\u30ed\u30fc\u30b9\", 50, 1200),\n                createOrderDetail(2, \"CHKN-001\", \"\u9d8f\u3082\u3082\", 100, 480)\n            ))\n            .build();\n        salesOrderRepository.save(order2);\n\n        // \u53d7\u6ce83\uff08\u30db\u30c6\u30eb\u5411\u3051\uff09- \u51fa\u8377\u6e08\u307f\n        SalesOrder order3 = SalesOrder.builder()\n            .orderNumber(\"ORD-2025-003\")\n            .orderDate(LocalDate.of(2025, 1, 15))\n            .customerCode(\"CUS-005\")\n            .representativeCode(\"EMP-010\")\n            .requestedDeliveryDate(LocalDate.of(2025, 1, 17))\n            .status(OrderStatus.SHIPPED)\n            .details(List.of(\n                createOrderDetail(1, \"BEEF-002\", \"\u9ed2\u6bdb\u548c\u725b\u30ed\u30fc\u30b9\", 30, 6000),\n                createOrderDetail(2, \"BEEF-003\", \"\u9ed2\u6bdb\u548c\u725b\u30ab\u30eb\u30d3\", 25, 5500)\n            ))\n            .build();\n        salesOrderRepository.save(order3);\n\n        log.info(\"\u53d7\u6ce8\u30c7\u30fc\u30bf 3\u4ef6 \u6295\u5165\u5b8c\u4e86\");\n    }\n\n    private SalesOrderDetail createOrderDetail(int lineNumber, String productCode,\n                                                 String productName, int quantity, int unitPrice) {\n        BigDecimal qty = new BigDecimal(quantity);\n        BigDecimal price = new BigDecimal(unitPrice);\n        BigDecimal amount = qty.multiply(price);\n        BigDecimal taxRate = new BigDecimal(\"10.00\");\n        BigDecimal taxAmount = amount.multiply(taxRate).divide(new BigDecimal(\"100\"));\n\n        return SalesOrderDetail.builder()\n            .lineNumber(lineNumber)\n            .productCode(productCode)\n            .productName(productName)\n            .orderQuantity(qty)\n            .unitPrice(price)\n            .amount(amount)\n            .taxCategory(TaxCategory.EXCLUSIVE)\n            .taxRate(taxRate)\n            .taxAmount(taxAmount)\n            .warehouseCode(\"WH-HQ\")\n            .build();\n    }\n}\n</code></pre>  **\u6ce8**: \u51fa\u8377\u30fb\u58f2\u4e0a\u30c7\u30fc\u30bf\u306f\u53d7\u6ce8\u660e\u7d30\u3078\u306e\u4f9d\u5b58\u95a2\u4fc2\u304c\u8907\u96d1\u306a\u305f\u3081\u3001\u521d\u671f\u30b7\u30fc\u30c9\u3067\u306f\u6295\u5165\u3057\u307e\u305b\u3093\u3002\u3053\u308c\u3089\u306f\u5225\u9014\u306e\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u3067\u5b9f\u88c5\u3057\u307e\u3059\u3002"},{"location":"article/part2/chapter12/#seed","title":"Seed \u30c7\u30fc\u30bf\u5b9f\u884c\u65b9\u6cd5","text":""},{"location":"article/part2/chapter12/#gradle","title":"Gradle \u30bf\u30b9\u30af\u306e\u8a2d\u5b9a","text":"<pre><code>// build.gradle.kts\uff08default \u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3067\u5b9f\u884c\uff09\ntasks.register&lt;JavaExec&gt;(\"seedData\") {\n    group = \"application\"\n    description = \"Seed \u30c7\u30fc\u30bf\u3092\u6295\u5165\u3059\u308b\uff08default \u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\uff09\"\n    mainClass.set(\"com.example.sms.Application\")\n    classpath = sourceSets[\"main\"].runtimeClasspath\n}\n</code></pre>"},{"location":"article/part2/chapter12/#_19","title":"\u5b9f\u884c\u30b3\u30de\u30f3\u30c9","text":"<pre><code># Gradle \u30bf\u30b9\u30af\u3067\u5b9f\u884c\n./gradlew seedData\n\n# \u307e\u305f\u306f\u76f4\u63a5 Java \u3067\u5b9f\u884c\uff08default \u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\uff09\njava -jar build/libs/sms-backend.jar\n</code></pre>"},{"location":"article/part2/chapter12/#_20","title":"\u5b9f\u884c\u7d50\u679c\u306e\u4f8b","text":"<pre><code>========================================\n\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 Seed \u30c7\u30fc\u30bf\u6295\u5165\u958b\u59cb\n========================================\n\u65e2\u5b58\u30c7\u30fc\u30bf\u3092\u524a\u9664\u4e2d...\n\u65e2\u5b58\u30c7\u30fc\u30bf\u524a\u9664\u5b8c\u4e86\n\u90e8\u9580\u30de\u30b9\u30bf\u3092\u6295\u5165\u4e2d...\n\u90e8\u9580\u30de\u30b9\u30bf 21\u4ef6 \u6295\u5165\u5b8c\u4e86\n\u5009\u5eab\u30de\u30b9\u30bf\u3092\u6295\u5165\u4e2d...\n\u5009\u5eab\u30de\u30b9\u30bf 3\u4ef6 \u6295\u5165\u5b8c\u4e86\n\u5546\u54c1\u5206\u985e\u30de\u30b9\u30bf\u3092\u6295\u5165\u4e2d...\n\u5546\u54c1\u5206\u985e\u30de\u30b9\u30bf 4\u4ef6 \u6295\u5165\u5b8c\u4e86\n\u5546\u54c1\u30de\u30b9\u30bf\u3092\u6295\u5165\u4e2d...\n\u5546\u54c1\u30de\u30b9\u30bf 20\u4ef6 \u6295\u5165\u5b8c\u4e86\n\u53d6\u5f15\u5148\u30de\u30b9\u30bf\u3092\u6295\u5165\u4e2d...\n\u53d6\u5f15\u5148\u30de\u30b9\u30bf 14\u4ef6 \u6295\u5165\u5b8c\u4e86\n\u793e\u54e1\u30de\u30b9\u30bf\u3092\u6295\u5165\u4e2d...\n\u793e\u54e1\u30de\u30b9\u30bf 24\u4ef6 \u6295\u5165\u5b8c\u4e86\n\u5728\u5eab\u60c5\u5831\u3092\u6295\u5165\u4e2d...\n\u5728\u5eab\u60c5\u5831 20\u4ef6 \u6295\u5165\u5b8c\u4e86\n\u53d7\u6ce8\u30c7\u30fc\u30bf\u3092\u6295\u5165\u4e2d...\n\u53d7\u6ce8\u30c7\u30fc\u30bf 3\u4ef6 \u6295\u5165\u5b8c\u4e86\n========================================\n\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 Seed \u30c7\u30fc\u30bf\u6295\u5165\u5b8c\u4e86!\n========================================\n</code></pre>"},{"location":"article/part2/chapter12/#_21","title":"\u30c7\u30fc\u30bf\u306e\u691c\u8a3c\u3068\u6d3b\u7528","text":"SeedDataServiceTest.java <pre><code>package com.example.sms.infrastructure.in.seed;\n\nimport com.example.sms.application.port.out.*;\nimport com.example.sms.domain.model.department.Department;\nimport com.example.sms.domain.model.inventory.Inventory;\nimport com.example.sms.domain.model.partner.Partner;\nimport com.example.sms.domain.model.product.Product;\nimport com.example.sms.domain.model.sales.SalesOrder;\nimport com.example.sms.testsetup.BaseIntegrationTest;\nimport org.junit.jupiter.api.*;\nimport org.springframework.beans.factory.annotation.Autowired;\n\nimport java.math.BigDecimal;\nimport java.util.List;\n\nimport static org.assertj.core.api.Assertions.assertThat;\n\n/**\n * Seed \u30c7\u30fc\u30bf\u6295\u5165\u30b5\u30fc\u30d3\u30b9\u7d71\u5408\u30c6\u30b9\u30c8.\n */\n@DisplayName(\"Seed \u30c7\u30fc\u30bf\u6295\u5165\u30b5\u30fc\u30d3\u30b9\")\nclass SeedDataServiceTest extends BaseIntegrationTest {\n\n    @Autowired\n    private SeedDataService seedDataService;\n\n    @Autowired\n    private DepartmentRepository departmentRepository;\n\n    @Autowired\n    private PartnerRepository partnerRepository;\n\n    @Autowired\n    private ProductRepository productRepository;\n\n    @Autowired\n    private InventoryRepository inventoryRepository;\n\n    @Autowired\n    private SalesOrderRepository salesOrderRepository;\n\n    @BeforeEach\n    void setUp() {\n        seedDataService.seedAll();\n    }\n\n    @Nested\n    @DisplayName(\"\u30de\u30b9\u30bf\u30c7\u30fc\u30bf\u306e\u59a5\u5f53\u6027\u691c\u8a3c\")\n    class MasterDataValidation {\n\n        @Test\n        @DisplayName(\"\u90e8\u9580\u30de\u30b9\u30bf\u304c21\u4ef6\u6295\u5165\u3055\u308c\u308b\")\n        void seedsDepartments() {\n            List&lt;Department&gt; departments = departmentRepository.findAll();\n            assertThat(departments).hasSize(21);\n        }\n\n        @Test\n        @DisplayName(\"\u3059\u3079\u3066\u306e\u90e8\u9580\u304c\u968e\u5c64\u69cb\u9020\u3092\u6301\u3064\")\n        void allDepartmentsHaveHierarchy() {\n            List&lt;Department&gt; departments = departmentRepository.findAll();\n\n            for (Department dept : departments) {\n                assertThat(dept.getDepartmentPath()).isNotBlank();\n                assertThat(dept.getHierarchyLevel()).isPositive();\n            }\n        }\n\n        @Test\n        @DisplayName(\"\u5546\u54c1\u30de\u30b9\u30bf\u304c20\u4ef6\u6295\u5165\u3055\u308c\u308b\")\n        void seedsProducts() {\n            List&lt;Product&gt; products = productRepository.findAll();\n            assertThat(products).hasSize(20);\n        }\n\n        @Test\n        @DisplayName(\"\u53d6\u5f15\u5148\u30de\u30b9\u30bf\u304c14\u4ef6\u6295\u5165\u3055\u308c\u308b\uff08\u5f97\u610f\u514810\u4ef6\u3001\u4ed5\u5165\u51484\u4ef6\uff09\")\n        void seedsPartners() {\n            List&lt;Partner&gt; partners = partnerRepository.findAll();\n            assertThat(partners).hasSize(14);\n\n            List&lt;Partner&gt; customers = partnerRepository.findCustomers();\n            List&lt;Partner&gt; suppliers = partnerRepository.findSuppliers();\n\n            assertThat(customers).hasSize(10);\n            assertThat(suppliers).hasSize(4);\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u5728\u5eab\u30c7\u30fc\u30bf\u306e\u59a5\u5f53\u6027\u691c\u8a3c\")\n    class InventoryValidation {\n\n        @Test\n        @DisplayName(\"\u5728\u5eab\u30c7\u30fc\u30bf\u304c20\u4ef6\u6295\u5165\u3055\u308c\u308b\")\n        void seedsInventories() {\n            List&lt;Inventory&gt; inventories = inventoryRepository.findAll();\n            assertThat(inventories).hasSize(20);\n        }\n\n        @Test\n        @DisplayName(\"\u5728\u5eab\u6570\u91cf\u304c0\u4ee5\u4e0a\u3067\u3042\u308b\")\n        void inventoryQuantityIsNonNegative() {\n            List&lt;Inventory&gt; inventories = inventoryRepository.findAll();\n\n            for (Inventory inventory : inventories) {\n                assertThat(inventory.getCurrentQuantity())\n                    .isGreaterThanOrEqualTo(BigDecimal.ZERO);\n            }\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u53d7\u6ce8\u30c7\u30fc\u30bf\u306e\u59a5\u5f53\u6027\u691c\u8a3c\")\n    class OrderValidation {\n\n        @Test\n        @DisplayName(\"\u53d7\u6ce8\u30c7\u30fc\u30bf\u304c3\u4ef6\u6295\u5165\u3055\u308c\u308b\")\n        void seedsOrders() {\n            List&lt;SalesOrder&gt; orders = salesOrderRepository.findAll();\n            assertThat(orders).hasSize(3);\n        }\n\n        @Test\n        @DisplayName(\"\u53d7\u6ce8\u306b\u5bfe\u5fdc\u3059\u308b\u9867\u5ba2\u304c\u5b58\u5728\u3059\u308b\")\n        void orderHasValidCustomer() {\n            List&lt;SalesOrder&gt; orders = salesOrderRepository.findAll();\n\n            for (SalesOrder order : orders) {\n                var customer = partnerRepository.findByCode(order.getCustomerCode());\n                assertThat(customer).isPresent();\n                assertThat(customer.get().isCustomer()).isTrue();\n            }\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u518d\u6295\u5165\u6642\u306e\u6319\u52d5\")\n    class ReseededBehavior {\n\n        @Test\n        @DisplayName(\"seedAll \u3092\u8907\u6570\u56de\u5b9f\u884c\u3057\u3066\u3082\u30c7\u30fc\u30bf\u4ef6\u6570\u304c\u4e00\u5b9a\")\n        void seedAllIsIdempotent() {\n            // 2\u56de\u76ee\u306e\u6295\u5165\n            seedDataService.seedAll();\n\n            List&lt;Department&gt; departments = departmentRepository.findAll();\n            List&lt;Product&gt; products = productRepository.findAll();\n            List&lt;Partner&gt; partners = partnerRepository.findAll();\n\n            assertThat(departments).hasSize(21);\n            assertThat(products).hasSize(20);\n            assertThat(partners).hasSize(14);\n        }\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter12/#12","title":"\u7b2c12\u7ae0\u306e\u307e\u3068\u3081","text":"<p>B \u793e\u306e\u4e8b\u4f8b\u3092\u901a\u3058\u3066\u3001\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u30c7\u30fc\u30bf\u8a2d\u8a08\u3068 Seed \u30c7\u30fc\u30bf\u5b9f\u88c5\u3092\u884c\u3044\u307e\u3057\u305f\u3002</p>"},{"location":"article/part2/chapter12/#_22","title":"\u5b9f\u88c5\u3057\u305f\u30c7\u30fc\u30bf","text":"\u30ab\u30c6\u30b4\u30ea \u5185\u5bb9 \u30de\u30b9\u30bf\u30c7\u30fc\u30bf \u90e8\u9580 21 \u4ef6\u3001\u53d6\u5f15\u5148 14 \u4ef6\u3001\u5546\u54c1 20 \u4ef6\u3001\u793e\u54e1 24 \u4ef6\u3001\u5009\u5eab 3 \u4ef6\u3001\u5546\u54c1\u5206\u985e 4 \u4ef6 \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3 \u53d7\u6ce8 3 \u4ef6\u3001\u5728\u5eab 20 \u4ef6 \u5099\u8003 \u51fa\u8377\u30fb\u58f2\u4e0a\u30c7\u30fc\u30bf\u306f\u53d7\u6ce8\u660e\u7d30\u3078\u306e\u4f9d\u5b58\u95a2\u4fc2\u304c\u8907\u96d1\u306a\u305f\u3081\u3001\u521d\u671f\u30b7\u30fc\u30c9\u3067\u306f\u6295\u5165\u3057\u306a\u3044"},{"location":"article/part2/chapter12/#b_1","title":"B \u793e\u306e\u4e8b\u696d\u7279\u5fb4\u3068\u30c7\u30fc\u30bf\u8a2d\u8a08\u3078\u306e\u53cd\u6620","text":"\u7279\u5fb4 \u30c7\u30fc\u30bf\u8a2d\u8a08\u3078\u306e\u53cd\u6620 \u591a\u69d8\u306a\u8ca9\u8def \u5f97\u610f\u5148 10 \u4ef6\uff08\u767e\u8ca8\u5e97\u3001\u30b9\u30fc\u30d1\u30fc\u3001\u30db\u30c6\u30eb\u7b49\uff09\u306e\u7ba1\u7406 \u81ea\u793e\u88fd\u9020\u80fd\u529b \u5de5\u5834\u5009\u5eab\uff08WH-FAC\uff09\u3068\u52a0\u5de5\u54c1\u30ab\u30c6\u30b4\u30ea\u306e\u5206\u96e2 \u9ad8\u54c1\u8cea\u3078\u306e\u3053\u3060\u308f\u308a \u5546\u54c1\u30de\u30b9\u30bf\u3067\u306e\u6a19\u6e96\u58f2\u4fa1\u30fb\u4ed5\u5165\u4fa1\u683c\u7ba1\u7406 \u5730\u57df\u5bc6\u7740 \u98df\u8089\u5378\u30fb\u755c\u7523\u696d\u8005\u306e\u4ed5\u5165\u5148 4 \u4ef6"},{"location":"article/part2/chapter12/#_23","title":"\u6280\u8853\u7684\u306a\u30dd\u30a4\u30f3\u30c8","text":"\u30dd\u30a4\u30f3\u30c8 \u5185\u5bb9 \u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3 Repository\uff08\u51fa\u529b\u30dd\u30fc\u30c8\uff09\u7d4c\u7531\u3067\u30c7\u30fc\u30bf\u6295\u5165 \u5916\u90e8\u30ad\u30fc\u5236\u7d04 \u30de\u30b9\u30bf \u2192 \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306e\u9806\u3067\u6295\u5165 \u65e5\u672c\u8a9e\u30c6\u30fc\u30d6\u30eb\u540d MyBatis \u3067\u30c0\u30d6\u30eb\u30af\u30a9\u30fc\u30c8\u3067\u56f2\u3080 ENUM \u30de\u30c3\u30d4\u30f3\u30b0 \u65e5\u672c\u8a9e DB \u5024 \u2194 \u82f1\u8a9e Java \u5024\u306e\u5909\u63db Spring Profile <code>default</code> \u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3067\u30a2\u30d7\u30ea\u8d77\u52d5\u6642\u306b\u81ea\u52d5\u6295\u5165 Builder \u30d1\u30bf\u30fc\u30f3 \u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\u306e\u751f\u6210\u306b Builder \u30d1\u30bf\u30fc\u30f3\u3092\u4f7f\u7528"},{"location":"article/part2/chapter12/#er_1","title":"ER \u56f3\uff08\u672c\u7ae0\u3067\u6271\u3063\u305f\u30c6\u30fc\u30d6\u30eb\uff09","text":"<p>\u6b21\u306e\u7b2c13\u7ae0\u3067\u306f\u3001\u3053\u306e\u30c7\u30fc\u30bf\u30e2\u30c7\u30eb\u3092\u6d3b\u7528\u3057\u305f API \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5\u306b\u9032\u307f\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter13/","title":"\u7b2c13\u7ae0\uff1aAPI \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\u3092\u5916\u90e8\u304b\u3089\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u3001RESTful API \u30b5\u30fc\u30d3\u30b9\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08Ports and Adapters\uff09\u3092\u63a1\u7528\u3057\u3001\u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\u3092\u5916\u90e8\u6280\u8853\u304b\u3089\u5206\u96e2\u3057\u305f\u4fdd\u5b88\u6027\u306e\u9ad8\u3044 API \u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter13/#131","title":"13.1 \u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u5fa9\u7fd2","text":""},{"location":"article/part2/chapter13/#ports-and-adapters","title":"Ports and Adapters \u30d1\u30bf\u30fc\u30f3\u306e\u6982\u8981","text":"<p>\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08Ports and Adapters \u30d1\u30bf\u30fc\u30f3\uff09\u306f\u3001Alistair Cockburn \u306b\u3088\u3063\u3066\u63d0\u5531\u3055\u308c\u305f\u8a2d\u8a08\u624b\u6cd5\u3067\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u4e2d\u6838\u3068\u306a\u308b\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\uff08\u30c9\u30e1\u30a4\u30f3\u5c64\uff09\u3092\u5916\u90e8\u306e\u6280\u8853\u7684\u8a73\u7d30\u304b\u3089\u5b8c\u5168\u306b\u5206\u96e2\u3059\u308b\u3053\u3068\u3092\u76ee\u7684\u3068\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part2/chapter13/#_1","title":"\u30c9\u30e1\u30a4\u30f3\u4e2d\u5fc3\u8a2d\u8a08","text":"<p>\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3092\u4e2d\u5fc3\u306b\u636e\u3048\u3001\u5916\u90e8\u6280\u8853\uff08DB\u3001Web\u3001UI \u306a\u3069\uff09\u3092\u5468\u8fba\u306b\u914d\u7f6e\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u304c\u6280\u8853\u7684\u306a\u95a2\u5fc3\u4e8b\u304b\u3089\u72ec\u7acb\u3057\u3001\u5909\u66f4\u306b\u5f37\u3044\u8a2d\u8a08\u304c\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter13/#_2","title":"\u4f9d\u5b58\u6027\u306e\u9006\u8ee2","text":"<p>\u30c9\u30e1\u30a4\u30f3\u5c64\u306f\u5916\u90e8\u306b\u4f9d\u5b58\u305b\u305a\u3001\u5916\u90e8\u304c\u30c9\u30e1\u30a4\u30f3\u5c64\u306b\u4f9d\u5b58\u3057\u307e\u3059\u3002\u5177\u4f53\u7684\u306b\u306f\u3001\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff08Output Port\uff09\u3092\u30c9\u30e1\u30a4\u30f3\u5c64\u3067\u5b9a\u7fa9\u3057\u3001\u305d\u306e\u5b9f\u88c5\uff08Adapter\uff09\u3092\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u5c64\u306b\u914d\u7f6e\u3057\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter13/#_3","title":"\u30c6\u30b9\u30c8\u5bb9\u6613\u6027","text":"<p>\u30e2\u30c3\u30af\u3084\u30b9\u30bf\u30d6\u3092\u4f7f\u3063\u305f\u5358\u4f53\u30c6\u30b9\u30c8\u304c\u5bb9\u6613\u306b\u306a\u308a\u307e\u3059\u3002\u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\u3092\u72ec\u7acb\u3057\u3066\u30c6\u30b9\u30c8\u3067\u304d\u3001\u5916\u90e8\u4f9d\u5b58\uff08\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306a\u3069\uff09\u306a\u3057\u3067\u9ad8\u901f\u306a\u30c6\u30b9\u30c8\u304c\u53ef\u80fd\u3067\u3059\u3002</p>"},{"location":"article/part2/chapter13/#132","title":"13.2 \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u69cb\u9020","text":""},{"location":"article/part2/chapter13/#_4","title":"\u30ec\u30a4\u30e4\u30fc\u69cb\u6210","text":"<p>\u8ca9\u58f2\u7ba1\u7406 API \u306e\u5b9f\u88c5\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u30ec\u30a4\u30e4\u30fc\u69cb\u9020\u3092\u63a1\u7528\u3057\u307e\u3059\u3002</p> <pre><code>src/main/java/com/example/sms/\n\u251c\u2500\u2500 domain/                     # \u30c9\u30e1\u30a4\u30f3\u5c64\uff08\u7d14\u7c8b\u306a\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\uff09\n\u2502   \u251c\u2500\u2500 model/                 # \u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\uff08\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3001\u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\uff09\n\u2502   \u2502   \u251c\u2500\u2500 department/        # \u90e8\u9580\u95a2\u9023\n\u2502   \u2502   \u251c\u2500\u2500 employee/          # \u793e\u54e1\u95a2\u9023\n\u2502   \u2502   \u251c\u2500\u2500 inventory/         # \u5728\u5eab\u95a2\u9023\n\u2502   \u2502   \u251c\u2500\u2500 partner/           # \u53d6\u5f15\u5148\u95a2\u9023\n\u2502   \u2502   \u251c\u2500\u2500 product/           # \u5546\u54c1\u95a2\u9023\n\u2502   \u2502   \u251c\u2500\u2500 purchase/          # \u4ed5\u5165\u95a2\u9023\n\u2502   \u2502   \u2514\u2500\u2500 sales/             # \u8ca9\u58f2\u95a2\u9023\n\u2502   \u251c\u2500\u2500 exception/             # \u30c9\u30e1\u30a4\u30f3\u4f8b\u5916\n\u2502   \u2514\u2500\u2500 type/                  # \u5024\u578b\u5b9a\u7fa9\n\u2502\n\u251c\u2500\u2500 application/               # \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\n\u2502   \u2514\u2500\u2500 port/\n\u2502       \u2514\u2500\u2500 out/              # Output Port\uff08\u30ea\u30dd\u30b8\u30c8\u30ea\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff09\n\u2502\n\u251c\u2500\u2500 infrastructure/            # \u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u5c64\n\u2502   \u251c\u2500\u2500 in/                   # Input Adapter\uff08\u53d7\u4fe1\u30a2\u30c0\u30d7\u30bf\u30fc\uff09\n\u2502   \u2502   \u251c\u2500\u2500 rest/             # REST API\uff08Web\u5b9f\u88c5\uff09\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 controller/   # REST Controller\uff08Spring MVC\uff09\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 dto/          # Data Transfer Object\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 exception/    # Exception Handler\n\u2502   \u2502   \u2514\u2500\u2500 seed/             # Seed \u30c7\u30fc\u30bf\u6295\u5165\n\u2502   \u2514\u2500\u2500 out/                  # Output Adapter\uff08\u9001\u4fe1\u30a2\u30c0\u30d7\u30bf\u30fc\uff09\n\u2502       \u2514\u2500\u2500 persistence/      # DB\u5b9f\u88c5\n\u2502           \u251c\u2500\u2500 mapper/       # MyBatis Mapper\n\u2502           \u251c\u2500\u2500 repository/   # Repository\u5b9f\u88c5\n\u2502           \u2514\u2500\u2500 typehandler/  # \u578b\u30cf\u30f3\u30c9\u30e9\u30fc\n\u2502\n\u2514\u2500\u2500 config/                   # \u8a2d\u5b9a\u30af\u30e9\u30b9\n</code></pre>"},{"location":"article/part2/chapter13/#domain","title":"Domain \u5c64","text":"<p>\u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u3068\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\u5916\u90e8\u6280\u8853\u306b\u4f9d\u5b58\u3057\u306a\u3044\u7d14\u7c8b\u306a Java \u30b3\u30fc\u30c9\u3067\u69cb\u6210\u3055\u308c\u307e\u3059\u3002</p> Product.java\uff08\u5546\u54c1\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\uff09 <pre><code>package com.example.sms.domain.model.product;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\n\n/**\n * \u5546\u54c1\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3.\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Product {\n    private String productCode;\n    private String productFullName;\n    private String productName;\n    private String productNameKana;\n    private ProductCategory productCategory;\n    private String modelNumber;\n    @Builder.Default\n    private BigDecimal sellingPrice = BigDecimal.ZERO;\n    @Builder.Default\n    private BigDecimal purchasePrice = BigDecimal.ZERO;\n    private TaxCategory taxCategory;\n    private String classificationCode;\n    @Builder.Default\n    private boolean isMiscellaneous = false;\n    @Builder.Default\n    private boolean isInventoryManaged = true;\n    @Builder.Default\n    private boolean isInventoryAllocated = true;\n    private String supplierCode;\n    private String supplierBranchNumber;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n}\n</code></pre>"},{"location":"article/part2/chapter13/#application","title":"Application \u5c64","text":"<p>\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306e\u5b9f\u88c5\u3068\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u62c5\u5f53\u3057\u307e\u3059\u3002</p> ProductRepository.java\uff08Output Port\uff09 <pre><code>package com.example.sms.application.port.out;\n\nimport com.example.sms.domain.model.product.Product;\nimport com.example.sms.domain.model.product.ProductCategory;\n\nimport java.util.List;\nimport java.util.Optional;\n\n/**\n * \u5546\u54c1\u30ea\u30dd\u30b8\u30c8\u30ea\uff08Output Port\uff09.\n */\npublic interface ProductRepository {\n\n    void save(Product product);\n\n    Optional&lt;Product&gt; findByCode(String productCode);\n\n    List&lt;Product&gt; findAll();\n\n    List&lt;Product&gt; findByCategory(ProductCategory category);\n\n    List&lt;Product&gt; findByClassificationCode(String classificationCode);\n\n    void update(Product product);\n\n    void deleteByCode(String productCode);\n\n    void deleteAll();\n}\n</code></pre>"},{"location":"article/part2/chapter13/#infrastructure","title":"Infrastructure \u5c64","text":"<p>\u5916\u90e8\u6280\u8853\u3068\u306e\u63a5\u7d9a\u3092\u62c5\u5f53\u3057\u307e\u3059\u3002DB \u30a2\u30af\u30bb\u30b9\uff08MyBatis\uff09\u3084 Web \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\uff08Spring MVC\uff09\u306e\u5b9f\u88c5\u3092\u542b\u307f\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter13/#input-port-output-port","title":"Input Port / Output Port \u306e\u5206\u96e2","text":"\u30dd\u30fc\u30c8 \u5f79\u5272 \u4f8b Input Port \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3078\u306e\u5165\u529b\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9 <code>ProductUseCase</code>, <code>OrderUseCase</code> Output Port \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089\u306e\u51fa\u529b\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9 <code>ProductRepository</code>, <code>OrderRepository</code>"},{"location":"article/part2/chapter13/#133-api","title":"13.3 \u30de\u30b9\u30bf API \u306e\u5b9f\u88c5","text":""},{"location":"article/part2/chapter13/#apicrud","title":"\u5546\u54c1\u30de\u30b9\u30bf API\uff08CRUD \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\uff09","text":""},{"location":"article/part2/chapter13/#output-port","title":"Output Port\uff08\u30ea\u30dd\u30b8\u30c8\u30ea\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff09","text":"ProductRepository.java <pre><code>package com.example.sms.application.port.out;\n\n/**\n * \u5546\u54c1\u30ea\u30dd\u30b8\u30c8\u30ea\uff08Output Port\uff09\n */\npublic interface ProductRepository {\n    Product save(Product product);\n    List&lt;Product&gt; findAll();\n    Optional&lt;Product&gt; findByCode(String productCode, LocalDate effectiveDate);\n    List&lt;Product&gt; findByType(ProductType type);\n    List&lt;Product&gt; findByCategoryCode(String categoryCode);\n    void deleteByCode(String productCode, LocalDate effectiveDate);\n}\n</code></pre>"},{"location":"article/part2/chapter13/#input-port","title":"Input Port\uff08\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff09","text":"\u30b3\u30de\u30f3\u30c9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8 <pre><code>package com.example.sms.application.port.in;\n\npublic record CreateProductCommand(\n    String productCode,\n    String productName,\n    String categoryCode,\n    ProductType productType,\n    TaxType taxType,\n    BigDecimal sellingPrice,\n    BigDecimal purchasePrice\n) {}\n\npublic record UpdateProductCommand(\n    String productCode,\n    String productName,\n    ProductType productType,\n    TaxType taxType,\n    BigDecimal sellingPrice,\n    BigDecimal purchasePrice\n) {}\n</code></pre>"},{"location":"article/part2/chapter13/#tdd-red-green-refactor","title":"TDD \u306b\u3088\u308b\u5b9f\u88c5\uff08Red-Green-Refactor\uff09","text":""},{"location":"article/part2/chapter13/#red","title":"Red: \u5931\u6557\u3059\u308b\u30c6\u30b9\u30c8\u3092\u66f8\u304f","text":"ProductControllerTest.java <pre><code>package com.example.sms.infrastructure.in.rest;\n\nimport com.example.sms.application.port.out.ProductClassificationRepository;\nimport com.example.sms.application.port.out.ProductRepository;\nimport com.example.sms.domain.model.product.Product;\nimport com.example.sms.domain.model.product.ProductCategory;\nimport com.example.sms.domain.model.product.ProductClassification;\nimport com.example.sms.domain.model.product.TaxCategory;\nimport com.example.sms.testsetup.BaseIntegrationTest;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.DisplayName;\nimport org.junit.jupiter.api.Nested;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.webmvc.test.autoconfigure.AutoConfigureMockMvc;\nimport org.springframework.http.MediaType;\nimport org.springframework.test.web.servlet.MockMvc;\n\nimport java.math.BigDecimal;\n\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;\n\n@AutoConfigureMockMvc\n@DisplayName(\"\u5546\u54c1\u30de\u30b9\u30bf API \u30c6\u30b9\u30c8\")\nclass ProductControllerTest extends BaseIntegrationTest {\n\n    private static final String TEST_CLASSIFICATION_CODE = \"CAT-TEST\";\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @Autowired\n    private ProductRepository productRepository;\n\n    @Autowired\n    private ProductClassificationRepository productClassificationRepository;\n\n    @BeforeEach\n    void setUp() {\n        productRepository.deleteAll();\n        productClassificationRepository.deleteAll();\n        // \u30c6\u30b9\u30c8\u7528\u306e\u5546\u54c1\u5206\u985e\u3092\u4f5c\u6210\n        ProductClassification classification = ProductClassification.builder()\n            .classificationCode(TEST_CLASSIFICATION_CODE)\n            .classificationName(\"\u30c6\u30b9\u30c8\u5206\u985e\")\n            .hierarchyLevel(1)\n            .classificationPath(\"/CAT-TEST\")\n            .isLeaf(true)\n            .build();\n        productClassificationRepository.save(classification);\n    }\n\n    @Nested\n    @DisplayName(\"POST /api/v1/products\")\n    class CreateProduct {\n\n        @Test\n        @DisplayName(\"\u5546\u54c1\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void shouldCreateProduct() throws Exception {\n            var request = \"\"\"\n                {\n                    \"productCode\": \"NEW-001\",\n                    \"productFullName\": \"\u65b0\u898f\u30c6\u30b9\u30c8\u5546\u54c1 \u30d5\u30eb\u30cd\u30fc\u30e0\",\n                    \"productName\": \"\u65b0\u898f\u30c6\u30b9\u30c8\u5546\u54c1\",\n                    \"productNameKana\": \"\u30b7\u30f3\u30ad\u30c6\u30b9\u30c8\u30b7\u30e7\u30a6\u30d2\u30f3\",\n                    \"productCategory\": \"PRODUCT\",\n                    \"modelNumber\": \"MODEL-001\",\n                    \"sellingPrice\": 5000,\n                    \"purchasePrice\": 3000,\n                    \"taxCategory\": \"EXCLUSIVE\",\n                    \"classificationCode\": \"CAT-TEST\"\n                }\n                \"\"\";\n\n            mockMvc.perform(post(\"/api/v1/products\")\n                    .contentType(MediaType.APPLICATION_JSON)\n                    .content(request))\n                .andExpect(status().isCreated())\n                .andExpect(jsonPath(\"$.productCode\").value(\"NEW-001\"))\n                .andExpect(jsonPath(\"$.productName\").value(\"\u65b0\u898f\u30c6\u30b9\u30c8\u5546\u54c1\"));\n        }\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter13/#green","title":"Green: \u30c6\u30b9\u30c8\u3092\u901a\u3059\u5b9f\u88c5","text":"ProductController.java <pre><code>package com.example.sms.infrastructure.in.rest.controller;\n\nimport com.example.sms.application.port.out.ProductRepository;\nimport com.example.sms.domain.exception.DuplicateProductException;\nimport com.example.sms.domain.exception.ProductNotFoundException;\nimport com.example.sms.domain.model.product.Product;\nimport com.example.sms.infrastructure.in.rest.dto.CreateProductRequest;\nimport com.example.sms.infrastructure.in.rest.dto.ProductResponse;\nimport com.example.sms.infrastructure.in.rest.dto.UpdateProductRequest;\nimport io.swagger.v3.oas.annotations.Operation;\nimport io.swagger.v3.oas.annotations.Parameter;\nimport io.swagger.v3.oas.annotations.responses.ApiResponse;\nimport io.swagger.v3.oas.annotations.tags.Tag;\nimport jakarta.validation.Valid;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\n\n@RestController\n@RequestMapping(\"/api/v1/products\")\n@Tag(name = \"products\", description = \"\u5546\u54c1\u30de\u30b9\u30bf API\")\npublic class ProductController {\n\n    private final ProductRepository productRepository;\n\n    public ProductController(ProductRepository productRepository) {\n        this.productRepository = productRepository;\n    }\n\n    @GetMapping\n    @Operation(summary = \"\u5546\u54c1\u4e00\u89a7\u306e\u53d6\u5f97\")\n    @ApiResponse(responseCode = \"200\", description = \"\u5546\u54c1\u4e00\u89a7\u3092\u8fd4\u5374\")\n    public ResponseEntity&lt;List&lt;ProductResponse&gt;&gt; getAllProducts() {\n        List&lt;Product&gt; products = productRepository.findAll();\n        List&lt;ProductResponse&gt; responses = products.stream()\n            .map(ProductResponse::from)\n            .toList();\n        return ResponseEntity.ok(responses);\n    }\n\n    @GetMapping(\"/{productCode}\")\n    @Operation(summary = \"\u5546\u54c1\u306e\u53d6\u5f97\")\n    @ApiResponse(responseCode = \"200\", description = \"\u5546\u54c1\u3092\u8fd4\u5374\")\n    @ApiResponse(responseCode = \"404\", description = \"\u5546\u54c1\u304c\u898b\u3064\u304b\u3089\u306a\u3044\")\n    public ResponseEntity&lt;ProductResponse&gt; getProduct(\n            @Parameter(description = \"\u5546\u54c1\u30b3\u30fc\u30c9\")\n            @PathVariable String productCode) {\n\n        Product product = productRepository.findByCode(productCode)\n            .orElseThrow(() -&gt; new ProductNotFoundException(productCode));\n\n        return ResponseEntity.ok(ProductResponse.from(product));\n    }\n\n    @PostMapping\n    @Operation(summary = \"\u5546\u54c1\u306e\u767b\u9332\")\n    @ApiResponse(responseCode = \"201\", description = \"\u5546\u54c1\u3092\u767b\u9332\")\n    @ApiResponse(responseCode = \"409\", description = \"\u5546\u54c1\u304c\u65e2\u306b\u5b58\u5728\u3059\u308b\")\n    public ResponseEntity&lt;ProductResponse&gt; createProduct(\n            @Valid @RequestBody CreateProductRequest request) {\n\n        // \u91cd\u8907\u30c1\u30a7\u30c3\u30af\n        productRepository.findByCode(request.productCode())\n            .ifPresent(existing -&gt; {\n                throw new DuplicateProductException(request.productCode());\n            });\n\n        Product product = Product.builder()\n            .productCode(request.productCode())\n            .productFullName(request.productFullName())\n            .productName(request.productName())\n            .productNameKana(request.productNameKana())\n            .productCategory(request.productCategory())\n            .modelNumber(request.modelNumber())\n            .sellingPrice(request.sellingPrice())\n            .purchasePrice(request.purchasePrice())\n            .taxCategory(request.taxCategory())\n            .classificationCode(request.classificationCode())\n            .build();\n\n        productRepository.save(product);\n\n        return ResponseEntity.status(HttpStatus.CREATED)\n            .body(ProductResponse.from(product));\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter13/#controllerservicerepository","title":"Controller\u30fbService\u30fbRepository \u306e\u5b9f\u88c5","text":""},{"location":"article/part2/chapter13/#application-service","title":"Application Service","text":"ProductService.java <pre><code>@Service\n@Transactional\npublic class ProductService implements ProductUseCase {\n\n    private final ProductRepository productRepository;\n\n    public ProductService(ProductRepository productRepository) {\n        this.productRepository = productRepository;\n    }\n\n    @Override\n    public Product createProduct(CreateProductCommand command) {\n        LocalDate effectiveDate = LocalDate.now();\n\n        // \u91cd\u8907\u30c1\u30a7\u30c3\u30af\n        productRepository.findByCode(command.productCode(), effectiveDate)\n            .ifPresent(existing -&gt; {\n                throw new DuplicateProductException(command.productCode());\n            });\n\n        Product product = new Product(\n            command.productCode(),\n            effectiveDate,\n            command.productName(),\n            command.categoryCode(),\n            effectiveDate,\n            command.productType(),\n            command.taxType(),\n            command.sellingPrice(),\n            command.purchasePrice()\n        );\n\n        return productRepository.save(product);\n    }\n\n    @Override\n    @Transactional(readOnly = true)\n    public Product getProductByCode(String productCode) {\n        LocalDate effectiveDate = LocalDate.now();\n        return productRepository.findByCode(productCode, effectiveDate)\n            .orElseThrow(() -&gt; new ProductNotFoundException(productCode));\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter13/#api","title":"\u9867\u5ba2\u30de\u30b9\u30bf API\uff08\u8acb\u6c42\u5148\u30fb\u56de\u53ce\u5148\u306e\u7ba1\u7406\uff09","text":"<p>\u9867\u5ba2\u30de\u30b9\u30bf API \u3067\u306f\u3001\u8acb\u6c42\u5148\u3068\u56de\u53ce\u5148\u306e\u6982\u5ff5\u3092\u6b63\u3057\u304f\u7ba1\u7406\u3057\u307e\u3059\u3002</p> CustomerController.java <pre><code>@RestController\n@RequestMapping(\"/api/v1/customers\")\n@Tag(name = \"customers\", description = \"\u9867\u5ba2 API\")\npublic class CustomerController {\n\n    private final CustomerUseCase customerUseCase;\n\n    @GetMapping(\"/{customerCode}\")\n    @Operation(summary = \"\u9867\u5ba2\u306e\u53d6\u5f97\")\n    public ResponseEntity&lt;CustomerResponse&gt; getCustomer(\n            @PathVariable String customerCode) {\n\n        Customer customer = customerUseCase.getCustomerByCode(customerCode);\n        return ResponseEntity.ok(CustomerResponse.from(customer));\n    }\n\n    @GetMapping(\"/{customerCode}/billing-destinations\")\n    @Operation(summary = \"\u8acb\u6c42\u5148\u4e00\u89a7\u306e\u53d6\u5f97\")\n    public ResponseEntity&lt;List&lt;BillingDestinationResponse&gt;&gt; getBillingDestinations(\n            @PathVariable String customerCode) {\n\n        List&lt;BillingDestination&gt; destinations =\n            customerUseCase.getBillingDestinations(customerCode);\n        return ResponseEntity.ok(destinations.stream()\n            .map(BillingDestinationResponse::from)\n            .toList());\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter13/#134-api","title":"13.4 \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3 API \u306e\u5b9f\u88c5","text":""},{"location":"article/part2/chapter13/#api_1","title":"\u53d7\u6ce8 API\uff08\u53d7\u6ce8\u767b\u9332\u30fb\u53d7\u6ce8\u7167\u4f1a\u30fb\u53d7\u6ce8\u660e\u7d30\u7167\u4f1a\uff09","text":"OrderController.java <pre><code>@RestController\n@RequestMapping(\"/api/v1/orders\")\n@Tag(name = \"orders\", description = \"\u53d7\u6ce8 API\")\npublic class OrderController {\n\n    private final OrderUseCase orderUseCase;\n\n    @PostMapping\n    @Operation(summary = \"\u53d7\u6ce8\u306e\u767b\u9332\")\n    public ResponseEntity&lt;OrderResponse&gt; createOrder(\n            @Valid @RequestBody CreateOrderRequest request) {\n\n        Order order = orderUseCase.createOrder(request.toCommand());\n        return ResponseEntity.status(HttpStatus.CREATED)\n            .body(OrderResponse.from(order));\n    }\n\n    @GetMapping(\"/{orderNumber}\")\n    @Operation(summary = \"\u53d7\u6ce8\u306e\u53d6\u5f97\")\n    public ResponseEntity&lt;OrderResponse&gt; getOrder(\n            @PathVariable String orderNumber) {\n\n        Order order = orderUseCase.getOrderByNumber(orderNumber);\n        return ResponseEntity.ok(OrderResponse.from(order));\n    }\n\n    @GetMapping(\"/{orderNumber}/details\")\n    @Operation(summary = \"\u53d7\u6ce8\u660e\u7d30\u306e\u53d6\u5f97\")\n    public ResponseEntity&lt;List&lt;OrderDetailResponse&gt;&gt; getOrderDetails(\n            @PathVariable String orderNumber) {\n\n        List&lt;OrderDetail&gt; details = orderUseCase.getOrderDetails(orderNumber);\n        return ResponseEntity.ok(details.stream()\n            .map(OrderDetailResponse::from)\n            .toList());\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter13/#api_2","title":"\u51fa\u8377 API\uff08\u51fa\u8377\u6307\u793a\u30fb\u51fa\u8377\u78ba\u5b9a\uff09","text":"ShipmentController.java <pre><code>@RestController\n@RequestMapping(\"/api/v1/shipments\")\n@Tag(name = \"shipments\", description = \"\u51fa\u8377 API\")\npublic class ShipmentController {\n\n    private final ShipmentUseCase shipmentUseCase;\n\n    @PostMapping(\"/instructions\")\n    @Operation(summary = \"\u51fa\u8377\u6307\u793a\u306e\u767b\u9332\")\n    public ResponseEntity&lt;ShipmentInstructionResponse&gt; createShipmentInstruction(\n            @Valid @RequestBody CreateShipmentInstructionRequest request) {\n\n        ShipmentInstruction instruction =\n            shipmentUseCase.createInstruction(request.toCommand());\n        return ResponseEntity.status(HttpStatus.CREATED)\n            .body(ShipmentInstructionResponse.from(instruction));\n    }\n\n    @PostMapping(\"/{shipmentNumber}/confirm\")\n    @Operation(summary = \"\u51fa\u8377\u78ba\u5b9a\")\n    public ResponseEntity&lt;ShipmentResponse&gt; confirmShipment(\n            @PathVariable String shipmentNumber) {\n\n        Shipment shipment = shipmentUseCase.confirmShipment(shipmentNumber);\n        return ResponseEntity.ok(ShipmentResponse.from(shipment));\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter13/#api_3","title":"\u58f2\u4e0a API\uff08\u58f2\u4e0a\u8a08\u4e0a\u30fb\u58f2\u4e0a\u7167\u4f1a\uff09","text":"SalesController.java <pre><code>@RestController\n@RequestMapping(\"/api/v1/sales\")\n@Tag(name = \"sales\", description = \"\u58f2\u4e0a API\")\npublic class SalesController {\n\n    private final SalesUseCase salesUseCase;\n\n    @PostMapping\n    @Operation(summary = \"\u58f2\u4e0a\u8a08\u4e0a\")\n    public ResponseEntity&lt;SalesResponse&gt; recordSales(\n            @Valid @RequestBody RecordSalesRequest request) {\n\n        Sales sales = salesUseCase.recordSales(request.toCommand());\n        return ResponseEntity.status(HttpStatus.CREATED)\n            .body(SalesResponse.from(sales));\n    }\n\n    @GetMapping\n    @Operation(summary = \"\u58f2\u4e0a\u4e00\u89a7\u306e\u53d6\u5f97\")\n    public ResponseEntity&lt;List&lt;SalesResponse&gt;&gt; getSalesList(\n            @RequestParam(required = false) LocalDate fromDate,\n            @RequestParam(required = false) LocalDate toDate,\n            @RequestParam(required = false) String customerCode) {\n\n        List&lt;Sales&gt; salesList = salesUseCase.getSalesList(fromDate, toDate, customerCode);\n        return ResponseEntity.ok(salesList.stream()\n            .map(SalesResponse::from)\n            .toList());\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter13/#api_4","title":"\u8acb\u6c42\u30fb\u5165\u91d1 API\uff08\u8acb\u6c42\u7de0\u3081\u30fb\u5165\u91d1\u6d88\u8fbc\uff09","text":"InvoiceController.java / ReceiptController.java <pre><code>@RestController\n@RequestMapping(\"/api/v1/invoices\")\n@Tag(name = \"invoices\", description = \"\u8acb\u6c42 API\")\npublic class InvoiceController {\n\n    private final InvoiceUseCase invoiceUseCase;\n\n    @PostMapping(\"/closing\")\n    @Operation(summary = \"\u8acb\u6c42\u7de0\u3081\u51e6\u7406\")\n    public ResponseEntity&lt;List&lt;InvoiceResponse&gt;&gt; executeClosing(\n            @Valid @RequestBody InvoiceClosingRequest request) {\n\n        List&lt;Invoice&gt; invoices = invoiceUseCase.executeClosing(\n            request.closingDate(),\n            request.customerCode()\n        );\n        return ResponseEntity.ok(invoices.stream()\n            .map(InvoiceResponse::from)\n            .toList());\n    }\n}\n\n@RestController\n@RequestMapping(\"/api/v1/receipts\")\n@Tag(name = \"receipts\", description = \"\u5165\u91d1 API\")\npublic class ReceiptController {\n\n    private final ReceiptUseCase receiptUseCase;\n\n    @PostMapping\n    @Operation(summary = \"\u5165\u91d1\u767b\u9332\")\n    public ResponseEntity&lt;ReceiptResponse&gt; recordReceipt(\n            @Valid @RequestBody RecordReceiptRequest request) {\n\n        Receipt receipt = receiptUseCase.recordReceipt(request.toCommand());\n        return ResponseEntity.status(HttpStatus.CREATED)\n            .body(ReceiptResponse.from(receipt));\n    }\n\n    @PostMapping(\"/{receiptNumber}/apply\")\n    @Operation(summary = \"\u5165\u91d1\u6d88\u8fbc\")\n    public ResponseEntity&lt;ReceiptResponse&gt; applyReceipt(\n            @PathVariable String receiptNumber,\n            @Valid @RequestBody ApplyReceiptRequest request) {\n\n        Receipt receipt = receiptUseCase.applyToInvoices(\n            receiptNumber,\n            request.invoiceNumbers()\n        );\n        return ResponseEntity.ok(ReceiptResponse.from(receipt));\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter13/#135","title":"13.5 \u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0","text":""},{"location":"article/part2/chapter13/#restcontrolleradvice","title":"\u30b0\u30ed\u30fc\u30d0\u30eb\u4f8b\u5916\u30cf\u30f3\u30c9\u30e9\u30fc\uff08@RestControllerAdvice\uff09","text":"GlobalExceptionHandler.java <pre><code>package com.example.sms.infrastructure.in.rest.exception;\n\nimport com.example.sms.domain.exception.BusinessRuleViolationException;\nimport com.example.sms.domain.exception.DuplicateResourceException;\nimport com.example.sms.domain.exception.OptimisticLockException;\nimport com.example.sms.domain.exception.ResourceNotFoundException;\nimport com.example.sms.infrastructure.in.rest.dto.ErrorResponse;\nimport com.example.sms.infrastructure.in.rest.dto.ValidationErrorResponse;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.validation.FieldError;\nimport org.springframework.web.bind.MethodArgumentNotValidException;\nimport org.springframework.web.bind.annotation.ExceptionHandler;\nimport org.springframework.web.bind.annotation.RestControllerAdvice;\n\nimport java.time.Instant;\nimport java.util.Map;\nimport java.util.concurrent.ConcurrentHashMap;\n\n@RestControllerAdvice\npublic class GlobalExceptionHandler {\n\n    private static final Logger LOG = LoggerFactory.getLogger(GlobalExceptionHandler.class);\n\n    @ExceptionHandler(ResourceNotFoundException.class)\n    public ResponseEntity&lt;ErrorResponse&gt; handleResourceNotFound(ResourceNotFoundException e) {\n        LOG.warn(\"Resource not found: {}\", e.getMessage());\n\n        ErrorResponse response = new ErrorResponse(\n            HttpStatus.NOT_FOUND.value(),\n            \"NOT_FOUND\",\n            e.getMessage(),\n            Instant.now()\n        );\n\n        return ResponseEntity.status(HttpStatus.NOT_FOUND).body(response);\n    }\n\n    @ExceptionHandler(DuplicateResourceException.class)\n    public ResponseEntity&lt;ErrorResponse&gt; handleDuplicateResource(DuplicateResourceException e) {\n        LOG.warn(\"Duplicate resource: {}\", e.getMessage());\n\n        ErrorResponse response = new ErrorResponse(\n            HttpStatus.CONFLICT.value(),\n            \"CONFLICT\",\n            e.getMessage(),\n            Instant.now()\n        );\n\n        return ResponseEntity.status(HttpStatus.CONFLICT).body(response);\n    }\n\n    @ExceptionHandler(BusinessRuleViolationException.class)\n    public ResponseEntity&lt;ErrorResponse&gt; handleBusinessRuleViolation(BusinessRuleViolationException e) {\n        LOG.warn(\"Business rule violation: {}\", e.getMessage());\n\n        ErrorResponse response = new ErrorResponse(\n            HttpStatus.UNPROCESSABLE_ENTITY.value(),\n            \"BUSINESS_RULE_VIOLATION\",\n            e.getMessage(),\n            Instant.now()\n        );\n\n        return ResponseEntity.status(HttpStatus.UNPROCESSABLE_ENTITY).body(response);\n    }\n\n    @ExceptionHandler(OptimisticLockException.class)\n    public ResponseEntity&lt;ErrorResponse&gt; handleOptimisticLock(OptimisticLockException e) {\n        LOG.warn(\"Optimistic lock exception: {}\", e.getMessage());\n\n        ErrorResponse response = new ErrorResponse(\n            HttpStatus.CONFLICT.value(),\n            \"OPTIMISTIC_LOCK\",\n            e.getMessage(),\n            Instant.now()\n        );\n\n        return ResponseEntity.status(HttpStatus.CONFLICT).body(response);\n    }\n\n    @ExceptionHandler(MethodArgumentNotValidException.class)\n    public ResponseEntity&lt;ValidationErrorResponse&gt; handleValidationErrors(\n            MethodArgumentNotValidException e) {\n\n        Map&lt;String, String&gt; errors = new ConcurrentHashMap&lt;&gt;();\n        e.getBindingResult().getAllErrors().forEach(error -&gt; {\n            String fieldName = ((FieldError) error).getField();\n            String errorMessage = error.getDefaultMessage();\n            errors.put(fieldName, errorMessage);\n        });\n\n        ValidationErrorResponse response = new ValidationErrorResponse(\n            HttpStatus.BAD_REQUEST.value(),\n            \"VALIDATION_ERROR\",\n            \"\u5165\u529b\u5024\u304c\u4e0d\u6b63\u3067\u3059\",\n            errors,\n            Instant.now()\n        );\n\n        return ResponseEntity.badRequest().body(response);\n    }\n\n    @ExceptionHandler(Exception.class)\n    public ResponseEntity&lt;ErrorResponse&gt; handleGenericException(Exception e) {\n        LOG.error(\"Unexpected error occurred\", e);\n\n        ErrorResponse response = new ErrorResponse(\n            HttpStatus.INTERNAL_SERVER_ERROR.value(),\n            \"INTERNAL_ERROR\",\n            \"\u30b7\u30b9\u30c6\u30e0\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\",\n            Instant.now()\n        );\n\n        return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(response);\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter13/#_5","title":"\u30c9\u30e1\u30a4\u30f3\u4f8b\u5916\u306e\u5b9a\u7fa9\u3068\u5909\u63db","text":"\u30c9\u30e1\u30a4\u30f3\u4f8b\u5916\u30af\u30e9\u30b9 <pre><code>package com.example.sms.domain.exception;\n\npublic abstract class ResourceNotFoundException extends RuntimeException {\n    protected ResourceNotFoundException(String message) {\n        super(message);\n    }\n}\n\npublic class ProductNotFoundException extends ResourceNotFoundException {\n    public ProductNotFoundException(String productCode) {\n        super(\"\u5546\u54c1\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + productCode);\n    }\n}\n\npublic class OrderNotFoundException extends ResourceNotFoundException {\n    public OrderNotFoundException(String orderNumber) {\n        super(\"\u53d7\u6ce8\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + orderNumber);\n    }\n}\n\npublic abstract class BusinessRuleViolationException extends RuntimeException {\n    protected BusinessRuleViolationException(String message) {\n        super(message);\n    }\n}\n\npublic class CreditLimitExceededException extends BusinessRuleViolationException {\n    public CreditLimitExceededException(String customerCode, BigDecimal limit, BigDecimal amount) {\n        super(String.format(\n            \"\u4e0e\u4fe1\u9650\u5ea6\u984d\u3092\u8d85\u904e\u3057\u3066\u3044\u307e\u3059\uff08\u9867\u5ba2: %s, \u9650\u5ea6\u984d: %s, \u7533\u8acb\u984d: %s\uff09\",\n            customerCode, limit, amount\n        ));\n    }\n}\n\npublic class InsufficientInventoryException extends BusinessRuleViolationException {\n    public InsufficientInventoryException(String productCode, BigDecimal available, BigDecimal requested) {\n        super(String.format(\n            \"\u5728\u5eab\u304c\u4e0d\u8db3\u3057\u3066\u3044\u307e\u3059\uff08\u5546\u54c1: %s, \u6709\u52b9\u5728\u5eab: %s, \u8981\u6c42\u6570\u91cf: %s\uff09\",\n            productCode, available, requested\n        ));\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter13/#problemdetail","title":"ProblemDetail \u306b\u3088\u308b\u30a8\u30e9\u30fc\u30ec\u30b9\u30dd\u30f3\u30b9","text":"<p>RFC 7807 \u306b\u6e96\u62e0\u3057\u305f ProblemDetail \u5f62\u5f0f\u3067\u30a8\u30e9\u30fc\u3092\u8fd4\u5374\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002</p> \u30a8\u30e9\u30fc\u30ec\u30b9\u30dd\u30f3\u30b9 DTO <pre><code>public record ErrorResponse(\n    int status,\n    String code,\n    String message,\n    Instant timestamp\n) {}\n\npublic record ValidationErrorResponse(\n    int status,\n    String code,\n    String message,\n    Map&lt;String, String&gt; errors,\n    Instant timestamp\n) {}\n</code></pre>"},{"location":"article/part2/chapter13/#_6","title":"\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\u306e\u51e6\u7406","text":"<p>\u30ea\u30af\u30a8\u30b9\u30c8 DTO \u306b Bean Validation \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4ed8\u4e0e\u3057\u3001\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\u3092\u7d71\u4e00\u7684\u306b\u51e6\u7406\u3057\u307e\u3059\u3002</p> CreateProductRequest.java <pre><code>public record CreateProductRequest(\n    @NotBlank(message = \"\u5546\u54c1\u30b3\u30fc\u30c9\u306f\u5fc5\u9808\u3067\u3059\")\n    String productCode,\n\n    @NotBlank(message = \"\u5546\u54c1\u540d\u306f\u5fc5\u9808\u3067\u3059\")\n    String productName,\n\n    @NotBlank(message = \"\u5546\u54c1\u5206\u985e\u30b3\u30fc\u30c9\u306f\u5fc5\u9808\u3067\u3059\")\n    String categoryCode,\n\n    @NotNull(message = \"\u5546\u54c1\u533a\u5206\u306f\u5fc5\u9808\u3067\u3059\")\n    ProductType productType,\n\n    @NotNull(message = \"\u7a0e\u533a\u5206\u306f\u5fc5\u9808\u3067\u3059\")\n    TaxType taxType,\n\n    @NotNull(message = \"\u8ca9\u58f2\u5358\u4fa1\u306f\u5fc5\u9808\u3067\u3059\")\n    @Positive(message = \"\u8ca9\u58f2\u5358\u4fa1\u306f\u6b63\u306e\u6570\u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\")\n    BigDecimal sellingPrice,\n\n    @NotNull(message = \"\u4ed5\u5165\u5358\u4fa1\u306f\u5fc5\u9808\u3067\u3059\")\n    @Positive(message = \"\u4ed5\u5165\u5358\u4fa1\u306f\u6b63\u306e\u6570\u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\")\n    BigDecimal purchasePrice\n) {}\n</code></pre>"},{"location":"article/part2/chapter13/#136-api","title":"13.6 API \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8","text":""},{"location":"article/part2/chapter13/#openapi-swagger","title":"OpenAPI / Swagger \u306e\u8a2d\u5b9a","text":"OpenApiConfig.java <pre><code>@Configuration\npublic class OpenApiConfig {\n\n    @Bean\n    public OpenAPI openAPI() {\n        return new OpenAPI()\n            .info(new Info()\n                .title(\"\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 API\")\n                .description(\"TDD \u3067\u80b2\u3066\u308b\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e API \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\")\n                .version(\"1.0.0\"))\n            .servers(List.of(\n                new Server()\n                    .url(\"http://localhost:8080\")\n                    .description(\"\u958b\u767a\u30b5\u30fc\u30d0\u30fc\")))\n            .tags(List.of(\n                new Tag().name(\"products\").description(\"\u5546\u54c1\u30de\u30b9\u30bf API\"),\n                new Tag().name(\"partners\").description(\"\u53d6\u5f15\u5148\u30de\u30b9\u30bf API\"),\n                new Tag().name(\"customers\").description(\"\u9867\u5ba2 API\"),\n                new Tag().name(\"orders\").description(\"\u53d7\u6ce8 API\"),\n                new Tag().name(\"shipments\").description(\"\u51fa\u8377 API\"),\n                new Tag().name(\"sales\").description(\"\u58f2\u4e0a API\"),\n                new Tag().name(\"invoices\").description(\"\u8acb\u6c42 API\"),\n                new Tag().name(\"receipts\").description(\"\u5165\u91d1 API\")));\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter13/#_7","title":"\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u6587\u66f8\u5316","text":"\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306b\u3088\u308b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u5316 <pre><code>@GetMapping(\"/{productCode}\")\n@Operation(\n    summary = \"\u5546\u54c1\u306e\u53d6\u5f97\",\n    description = \"\u5546\u54c1\u30b3\u30fc\u30c9\u3092\u6307\u5b9a\u3057\u3066\u5546\u54c1\u60c5\u5831\u3092\u53d6\u5f97\u3057\u307e\u3059\"\n)\n@ApiResponse(responseCode = \"200\", description = \"\u5546\u54c1\u3092\u8fd4\u5374\")\n@ApiResponse(responseCode = \"404\", description = \"\u5546\u54c1\u304c\u898b\u3064\u304b\u3089\u306a\u3044\")\npublic ResponseEntity&lt;ProductResponse&gt; getProduct(\n        @Parameter(description = \"\u5546\u54c1\u30b3\u30fc\u30c9\", example = \"BEEF-001\")\n        @PathVariable String productCode) {\n    // ...\n}\n</code></pre>"},{"location":"article/part2/chapter13/#_8","title":"\u30ea\u30af\u30a8\u30b9\u30c8\u30fb\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u30b9\u30ad\u30fc\u30de\u5b9a\u7fa9","text":"<p>application.yml \u306b Swagger UI \u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> application.yml\uff08Swagger \u8a2d\u5b9a\uff09 <pre><code>springdoc:\n  swagger-ui:\n    path: /swagger-ui.html\n    tags-sorter: alpha\n    operations-sorter: alpha\n  api-docs:\n    path: /api-docs\n</code></pre> <p>Swagger UI \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001API \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u81ea\u52d5\u751f\u6210\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"article/part2/chapter13/#137-api","title":"13.7 API \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30c6\u30b9\u30c8","text":""},{"location":"article/part2/chapter13/#_9","title":"\u30c6\u30b9\u30c8\u30b3\u30f3\u30c6\u30ca\u306b\u3088\u308b\u7d71\u5408\u30c6\u30b9\u30c8\u74b0\u5883","text":"<p>Testcontainers \u3092\u4f7f\u7528\u3057\u3066\u3001\u5b9f\u969b\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u74b0\u5883\u3067 API \u306e\u7d71\u5408\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> \u30c6\u30b9\u30c8\u57fa\u76e4\u30af\u30e9\u30b9 <pre><code>@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n@Testcontainers\n@ActiveProfiles(\"test\")\npublic abstract class IntegrationTestBase {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:16\")\n            .withDatabaseName(\"sales_test\")\n            .withUsername(\"test\")\n            .withPassword(\"test\");\n\n    @DynamicPropertySource\n    static void configureProperties(DynamicPropertyRegistry registry) {\n        registry.add(\"spring.datasource.url\", postgres::getJdbcUrl);\n        registry.add(\"spring.datasource.username\", postgres::getUsername);\n        registry.add(\"spring.datasource.password\", postgres::getPassword);\n    }\n\n    @Autowired\n    protected TestRestTemplate restTemplate;\n\n    @Autowired\n    protected ObjectMapper objectMapper;\n}\n</code></pre>"},{"location":"article/part2/chapter13/#rest-api","title":"REST API \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u30c6\u30b9\u30c8","text":"ProductApiIntegrationTest.java <pre><code>@DisplayName(\"\u5546\u54c1 API \u7d71\u5408\u30c6\u30b9\u30c8\")\nclass ProductApiIntegrationTest extends IntegrationTestBase {\n\n    @Nested\n    @DisplayName(\"\u5546\u54c1\u767b\u9332\u30fb\u53d6\u5f97\u30d5\u30ed\u30fc\")\n    class ProductCrudFlow {\n\n        @Test\n        @DisplayName(\"\u5546\u54c1\u3092\u767b\u9332\u3057\u3066\u53d6\u5f97\u3067\u304d\u308b\")\n        void shouldCreateAndRetrieveProduct() {\n            // Given: \u5546\u54c1\u767b\u9332\u30ea\u30af\u30a8\u30b9\u30c8\n            var createRequest = new CreateProductRequest(\n                \"BEEF-INT-001\",\n                \"\u7d71\u5408\u30c6\u30b9\u30c8\u7528\u5546\u54c1\",\n                \"CAT-BEEF\",\n                ProductType.PRODUCT,\n                TaxType.STANDARD,\n                new BigDecimal(\"5000\"),\n                new BigDecimal(\"3000\")\n            );\n\n            // When: \u5546\u54c1\u3092\u767b\u9332\n            ResponseEntity&lt;ProductResponse&gt; createResponse = restTemplate.postForEntity(\n                \"/api/v1/products\",\n                createRequest,\n                ProductResponse.class\n            );\n\n            // Then: \u767b\u9332\u6210\u529f\n            assertThat(createResponse.getStatusCode()).isEqualTo(HttpStatus.CREATED);\n            assertThat(createResponse.getBody()).isNotNull();\n            assertThat(createResponse.getBody().productCode()).isEqualTo(\"BEEF-INT-001\");\n\n            // When: \u767b\u9332\u3057\u305f\u5546\u54c1\u3092\u53d6\u5f97\n            ResponseEntity&lt;ProductResponse&gt; getResponse = restTemplate.getForEntity(\n                \"/api/v1/products/BEEF-INT-001\",\n                ProductResponse.class\n            );\n\n            // Then: \u53d6\u5f97\u6210\u529f\n            assertThat(getResponse.getStatusCode()).isEqualTo(HttpStatus.OK);\n            assertThat(getResponse.getBody().productName()).isEqualTo(\"\u7d71\u5408\u30c6\u30b9\u30c8\u7528\u5546\u54c1\");\n        }\n\n        @Test\n        @DisplayName(\"\u5b58\u5728\u3057\u306a\u3044\u5546\u54c1\u3092\u53d6\u5f97\u3059\u308b\u3068404\u30a8\u30e9\u30fc\")\n        void shouldReturn404WhenProductNotFound() {\n            // When\n            ResponseEntity&lt;ErrorResponse&gt; response = restTemplate.getForEntity(\n                \"/api/v1/products/NOT-EXIST\",\n                ErrorResponse.class\n            );\n\n            // Then\n            assertThat(response.getStatusCode()).isEqualTo(HttpStatus.NOT_FOUND);\n            assertThat(response.getBody().code()).isEqualTo(\"NOT_FOUND\");\n        }\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter13/#_10","title":"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u72b6\u614b\u306e\u691c\u8a3c","text":"OrderApiIntegrationTest.java <pre><code>@DisplayName(\"\u53d7\u6ce8 API \u7d71\u5408\u30c6\u30b9\u30c8\")\nclass OrderApiIntegrationTest extends IntegrationTestBase {\n\n    @Autowired\n    private JdbcTemplate jdbcTemplate;\n\n    @BeforeEach\n    void setUp() {\n        // \u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n        jdbcTemplate.execute(\"\"\"\n            INSERT INTO \u5546\u54c1 (\u5546\u54c1\u30b3\u30fc\u30c9, \u9069\u7528\u958b\u59cb\u65e5, \u5546\u54c1\u540d, \u8ca9\u58f2\u5358\u4fa1, \u4ed5\u5165\u5358\u4fa1)\n            VALUES ('BEEF-001', CURRENT_DATE, '\u30c6\u30b9\u30c8\u725b\u8089', 5000, 3000)\n            ON CONFLICT DO NOTHING\n        \"\"\");\n    }\n\n    @Test\n    @DisplayName(\"\u53d7\u6ce8\u767b\u9332\u6642\u306b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u6b63\u3057\u304f\u4fdd\u5b58\u3055\u308c\u308b\")\n    void shouldPersistOrderToDatabase() {\n        // Given\n        var createRequest = new CreateOrderRequest(\n            \"CUS-001\",\n            LocalDate.now(),\n            List.of(new OrderDetailRequest(\"BEEF-001\", 10, new BigDecimal(\"5000\")))\n        );\n\n        // When\n        ResponseEntity&lt;OrderResponse&gt; response = restTemplate.postForEntity(\n            \"/api/v1/orders\",\n            createRequest,\n            OrderResponse.class\n        );\n\n        // Then: API \u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u691c\u8a3c\n        assertThat(response.getStatusCode()).isEqualTo(HttpStatus.CREATED);\n        String orderNumber = response.getBody().orderNumber();\n\n        // Then: \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u72b6\u614b\u306e\u691c\u8a3c\n        Integer count = jdbcTemplate.queryForObject(\n            \"SELECT COUNT(*) FROM \u53d7\u6ce8 WHERE \u53d7\u6ce8\u756a\u53f7 = ?\",\n            Integer.class,\n            orderNumber\n        );\n        assertThat(count).isEqualTo(1);\n\n        // Then: \u660e\u7d30\u30c7\u30fc\u30bf\u306e\u691c\u8a3c\n        Integer detailCount = jdbcTemplate.queryForObject(\n            \"SELECT COUNT(*) FROM \u53d7\u6ce8\u660e\u7d30 WHERE \u53d7\u6ce8\u756a\u53f7 = ?\",\n            Integer.class,\n            orderNumber\n        );\n        assertThat(detailCount).isEqualTo(1);\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter13/#_11","title":"\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3068\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7","text":"TestDataManager.java <pre><code>@Component\n@Profile(\"test\")\npublic class TestDataManager {\n\n    private final JdbcTemplate jdbcTemplate;\n\n    public TestDataManager(JdbcTemplate jdbcTemplate) {\n        this.jdbcTemplate = jdbcTemplate;\n    }\n\n    @Transactional\n    public void setupMasterData() {\n        // \u5546\u54c1\u5206\u985e\u30de\u30b9\u30bf\n        jdbcTemplate.execute(\"\"\"\n            INSERT INTO \u5546\u54c1\u5206\u985e (\u5546\u54c1\u5206\u985e\u30b3\u30fc\u30c9, \u9069\u7528\u958b\u59cb\u65e5, \u5546\u54c1\u5206\u985e\u540d)\n            VALUES ('CAT-BEEF', CURRENT_DATE, '\u725b\u8089'),\n                   ('CAT-PORK', CURRENT_DATE, '\u8c5a\u8089')\n            ON CONFLICT DO NOTHING\n        \"\"\");\n\n        // \u53d6\u5f15\u5148\u30de\u30b9\u30bf\n        jdbcTemplate.execute(\"\"\"\n            INSERT INTO \u53d6\u5f15\u5148 (\u53d6\u5f15\u5148\u30b3\u30fc\u30c9, \u53d6\u5f15\u5148\u540d, \u53d6\u5f15\u5148\u533a\u5206\u30b3\u30fc\u30c9)\n            VALUES ('CUS-001', '\u30c6\u30b9\u30c8\u9867\u5ba2', '1'),\n                   ('SUP-001', '\u30c6\u30b9\u30c8\u4ed5\u5165\u5148', '2')\n            ON CONFLICT DO NOTHING\n        \"\"\");\n    }\n\n    @Transactional\n    public void cleanupTransactionData() {\n        // \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u306e\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7\uff08\u5916\u90e8\u30ad\u30fc\u5236\u7d04\u306e\u9806\u5e8f\u306b\u6ce8\u610f\uff09\n        jdbcTemplate.execute(\"DELETE FROM \u5165\u91d1\u660e\u7d30\");\n        jdbcTemplate.execute(\"DELETE FROM \u5165\u91d1\");\n        jdbcTemplate.execute(\"DELETE FROM \u8acb\u6c42\u660e\u7d30\");\n        jdbcTemplate.execute(\"DELETE FROM \u8acb\u6c42\");\n        jdbcTemplate.execute(\"DELETE FROM \u58f2\u4e0a\u660e\u7d30\");\n        jdbcTemplate.execute(\"DELETE FROM \u58f2\u4e0a\");\n        jdbcTemplate.execute(\"DELETE FROM \u51fa\u8377\u660e\u7d30\");\n        jdbcTemplate.execute(\"DELETE FROM \u51fa\u8377\");\n        jdbcTemplate.execute(\"DELETE FROM \u53d7\u6ce8\u660e\u7d30\");\n        jdbcTemplate.execute(\"DELETE FROM \u53d7\u6ce8\");\n    }\n\n    @Transactional\n    public void cleanupAll() {\n        cleanupTransactionData();\n        jdbcTemplate.execute(\"DELETE FROM \u5546\u54c1\");\n        jdbcTemplate.execute(\"DELETE FROM \u5546\u54c1\u5206\u985e\");\n        jdbcTemplate.execute(\"DELETE FROM \u53d6\u5f15\u5148\");\n    }\n}\n</code></pre> \u7d71\u5408\u30c6\u30b9\u30c8\u3067\u306e\u4f7f\u7528\u4f8b <pre><code>@DisplayName(\"\u8ca9\u58f2\u30d5\u30ed\u30fc\u7d71\u5408\u30c6\u30b9\u30c8\")\nclass SalesFlowIntegrationTest extends IntegrationTestBase {\n\n    @Autowired\n    private TestDataManager testDataManager;\n\n    @BeforeEach\n    void setUp() {\n        testDataManager.cleanupTransactionData();\n        testDataManager.setupMasterData();\n    }\n\n    @AfterEach\n    void tearDown() {\n        testDataManager.cleanupTransactionData();\n    }\n\n    @Test\n    @DisplayName(\"\u53d7\u6ce8\u304b\u3089\u58f2\u4e0a\u307e\u3067\u306e\u4e00\u9023\u306e\u30d5\u30ed\u30fc\u304c\u6b63\u5e38\u306b\u52d5\u4f5c\u3059\u308b\")\n    void shouldCompleteSalesFlow() {\n        // 1. \u53d7\u6ce8\u767b\u9332\n        var orderRequest = createOrderRequest();\n        ResponseEntity&lt;OrderResponse&gt; orderResponse = restTemplate.postForEntity(\n            \"/api/v1/orders\",\n            orderRequest,\n            OrderResponse.class\n        );\n        assertThat(orderResponse.getStatusCode()).isEqualTo(HttpStatus.CREATED);\n        String orderNumber = orderResponse.getBody().orderNumber();\n\n        // 2. \u51fa\u8377\u6307\u793a\n        var shipmentRequest = new CreateShipmentInstructionRequest(orderNumber);\n        ResponseEntity&lt;ShipmentInstructionResponse&gt; shipmentResponse = restTemplate.postForEntity(\n            \"/api/v1/shipments/instructions\",\n            shipmentRequest,\n            ShipmentInstructionResponse.class\n        );\n        assertThat(shipmentResponse.getStatusCode()).isEqualTo(HttpStatus.CREATED);\n        String shipmentNumber = shipmentResponse.getBody().shipmentNumber();\n\n        // 3. \u51fa\u8377\u78ba\u5b9a\n        ResponseEntity&lt;ShipmentResponse&gt; confirmResponse = restTemplate.postForEntity(\n            \"/api/v1/shipments/\" + shipmentNumber + \"/confirm\",\n            null,\n            ShipmentResponse.class\n        );\n        assertThat(confirmResponse.getStatusCode()).isEqualTo(HttpStatus.OK);\n\n        // 4. \u58f2\u4e0a\u8a08\u4e0a\u306e\u78ba\u8a8d\n        ResponseEntity&lt;SalesResponse[]&gt; salesResponse = restTemplate.getForEntity(\n            \"/api/v1/sales?orderNumber=\" + orderNumber,\n            SalesResponse[].class\n        );\n        assertThat(salesResponse.getStatusCode()).isEqualTo(HttpStatus.OK);\n        assertThat(salesResponse.getBody()).hasSize(1);\n    }\n}\n</code></pre>"},{"location":"article/part2/chapter13/#_12","title":"\u672c\u7ae0\u306e\u307e\u3068\u3081","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e API \u30b5\u30fc\u30d3\u30b9\u3092\u5b9f\u88c5\u3057\u307e\u3057\u305f\u3002</p>"},{"location":"article/part2/chapter13/#_13","title":"\u5b9f\u88c5\u3057\u305f\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8","text":"\u30ab\u30c6\u30b4\u30ea \u5185\u5bb9 \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3 \u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08Ports &amp; Adapters\uff09 \u30de\u30b9\u30bf API \u5546\u54c1\u30de\u30b9\u30bf\u3001\u9867\u5ba2\u30de\u30b9\u30bf \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3 API \u53d7\u6ce8\u3001\u51fa\u8377\u3001\u58f2\u4e0a\u3001\u8acb\u6c42\u30fb\u5165\u91d1 \u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0 \u30b0\u30ed\u30fc\u30d0\u30eb\u4f8b\u5916\u30cf\u30f3\u30c9\u30e9\u30fc\u3001\u30c9\u30e1\u30a4\u30f3\u4f8b\u5916 API \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 OpenAPI / Swagger UI"},{"location":"article/part2/chapter13/#_14","title":"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u5229\u70b9","text":"<ol> <li>\u30c6\u30b9\u30c8\u5bb9\u6613\u6027: \u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\u3092\u72ec\u7acb\u3057\u3066\u30c6\u30b9\u30c8\u53ef\u80fd</li> <li>\u6280\u8853\u5909\u66f4\u306e\u5bb9\u6613\u3055: \u30a2\u30c0\u30d7\u30bf\u30fc\u3092\u5dee\u3057\u66ff\u3048\u308b\u3060\u3051\u3067\u6280\u8853\u3092\u5909\u66f4\u53ef\u80fd</li> <li>\u4fdd\u5b88\u6027: \u95a2\u5fc3\u4e8b\u306e\u5206\u96e2\u306b\u3088\u308b\u9ad8\u3044\u4fdd\u5b88\u6027</li> <li>\u30c1\u30fc\u30e0\u958b\u767a: \u30ec\u30a4\u30e4\u30fc\u3054\u3068\u306b\u4e26\u884c\u958b\u767a\u304c\u53ef\u80fd</li> </ol>"},{"location":"article/part2/chapter13/#_15","title":"\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u4e00\u89a7","text":"\u30e1\u30bd\u30c3\u30c9 \u30d1\u30b9 \u8aac\u660e GET <code>/api/v1/products</code> \u5546\u54c1\u4e00\u89a7\u306e\u53d6\u5f97 GET <code>/api/v1/products/{code}</code> \u5546\u54c1\u306e\u53d6\u5f97 POST <code>/api/v1/products</code> \u5546\u54c1\u306e\u767b\u9332 PUT <code>/api/v1/products/{code}</code> \u5546\u54c1\u306e\u66f4\u65b0 DELETE <code>/api/v1/products/{code}</code> \u5546\u54c1\u306e\u524a\u9664 GET <code>/api/v1/orders</code> \u53d7\u6ce8\u4e00\u89a7\u306e\u53d6\u5f97 POST <code>/api/v1/orders</code> \u53d7\u6ce8\u306e\u767b\u9332 POST <code>/api/v1/shipments/instructions</code> \u51fa\u8377\u6307\u793a\u306e\u767b\u9332 POST <code>/api/v1/shipments/{number}/confirm</code> \u51fa\u8377\u78ba\u5b9a POST <code>/api/v1/sales</code> \u58f2\u4e0a\u8a08\u4e0a POST <code>/api/v1/invoices/closing</code> \u8acb\u6c42\u7de0\u3081\u51e6\u7406 POST <code>/api/v1/receipts</code> \u5165\u91d1\u767b\u9332 POST <code>/api/v1/receipts/{number}/apply</code> \u5165\u91d1\u6d88\u8fbc"},{"location":"article/part3/chapter14/","title":"\u7b2c14\u7ae0\uff1a\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u5168\u4f53\u50cf","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u5168\u4f53\u50cf\u3092\u628a\u63e1\u3057\u3001\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3068\u306e\u9023\u643a\u3084\u3001\u8ca1\u52d9\u4f1a\u8a08\u3068\u7ba1\u7406\u4f1a\u8a08\u306e\u9055\u3044\u3001\u30b7\u30b9\u30c6\u30e0\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u307e\u3059\u3002</p>"},{"location":"article/part3/chapter14/#141","title":"14.1 \u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u30b9\u30b3\u30fc\u30d7","text":""},{"location":"article/part3/chapter14/#_1","title":"\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u306b\u304a\u3051\u308b\u4f4d\u7f6e\u3065\u3051","text":"<p>\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306f\u3001\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u306e\u4e2d\u3067\u4ed6\u306e\u30b7\u30b9\u30c6\u30e0\u304b\u3089\u4ed5\u8a33\u30c7\u30fc\u30bf\u3092\u53d7\u3051\u53d6\u308a\u3001\u4f01\u696d\u306e\u8ca1\u52d9\u72b6\u614b\u3092\u7ba1\u7406\u3059\u308b\u91cd\u8981\u306a\u30b7\u30b9\u30c6\u30e0\u3067\u3059\u3002</p> <p></p>"},{"location":"article/part3/chapter14/#_2","title":"\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u696d\u52d9\u9818\u57df","text":"<p>\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306f\u3001\u4ee5\u4e0b\u306e\u696d\u52d9\u9818\u57df\u3092\u30ab\u30d0\u30fc\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part3/chapter14/#_3","title":"\u696d\u52d9\u6a5f\u80fd\u306e\u6982\u8981","text":"\u696d\u52d9 \u8aac\u660e \u50b5\u6a29\u7ba1\u7406\uff08\u8acb\u6c42\u30fb\u5165\u91d1\uff09 \u58f2\u4e0a\u306b\u57fa\u3065\u304f\u8acb\u6c42\u66f8\u767a\u884c\u3068\u5165\u91d1\u6d88\u8fbc\u51e6\u7406 \u50b5\u52d9\u7ba1\u7406\uff08\u652f\u6255\u30fb\u51fa\u91d1\uff09 \u4ed5\u5165\u306b\u57fa\u3065\u304f\u652f\u6255\u51e6\u7406\u3068\u51fa\u91d1\u7ba1\u7406 \u7d4c\u7406\uff08\u4ed5\u8a33\u30fb\u6c7a\u7b97\uff09 \u4ed5\u8a33\u5165\u529b\u30fb\u81ea\u52d5\u4ed5\u8a33\u30fb\u6b8b\u9ad8\u7ba1\u7406\u30fb\u6c7a\u7b97\u51e6\u7406"},{"location":"article/part3/chapter14/#_4","title":"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u56f3","text":"<p>\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u5168\u4f53\u306e\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002</p> <p></p>"},{"location":"article/part3/chapter14/#_5","title":"\u4f1a\u8a08\u7d44\u7e54\u306e\u5f79\u5272\u5206\u62c5","text":"\u90e8\u9580 \u5f79\u5272 \u4e3b\u306a\u696d\u52d9 \u7d4c\u7406\u90e8\u9580 \u65e5\u5e38\u306e\u4f1a\u8a08\u51e6\u7406 \u4ed5\u8a33\u5165\u529b\u3001\u6b8b\u9ad8\u7167\u4f1a\u3001\u65e5\u8a08\u8868\u51fa\u529b \u8ca1\u52d9\u90e8\u9580 \u8ca1\u52d9\u8af8\u8868\u306e\u4f5c\u6210 \u8a66\u7b97\u8868\u51fa\u529b\u3001\u8ca1\u52d9\u8af8\u8868\u4f5c\u6210\u3001\u6c7a\u7b97\u51e6\u7406 \u55b6\u696d\u90e8\u9580 \u58f2\u4e0a\u30c7\u30fc\u30bf\u306e\u63d0\u4f9b \u58f2\u4e0a\u4ed5\u8a33\u306e\u5143\u30c7\u30fc\u30bf\u4f5c\u6210 \u8cfc\u8cb7\u90e8\u9580 \u4ed5\u5165\u30c7\u30fc\u30bf\u306e\u63d0\u4f9b \u4ed5\u5165\u4ed5\u8a33\u306e\u5143\u30c7\u30fc\u30bf\u4f5c\u6210 \u7ba1\u7406\u8005 \u30de\u30b9\u30bf\u7ba1\u7406 \u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u306e\u7ba1\u7406"},{"location":"article/part3/chapter14/#142","title":"14.2 \u8ca1\u52d9\u4f1a\u8a08\u3068\u7ba1\u7406\u4f1a\u8a08\u306e\u9055\u3044","text":""},{"location":"article/part3/chapter14/#_6","title":"\u8ca1\u52d9\u4f1a\u8a08\uff1a\u5916\u90e8\u5831\u544a\u76ee\u7684","text":"<p>\u8ca1\u52d9\u4f1a\u8a08\u306f\u3001\u682a\u4e3b\u30fb\u50b5\u6a29\u8005\u30fb\u7a0e\u52d9\u7f72\u306a\u3069\u306e\u5916\u90e8\u5229\u5bb3\u95a2\u4fc2\u8005\u306b\u5bfe\u3057\u3066\u3001\u4f01\u696d\u306e\u8ca1\u653f\u72b6\u614b\u3084\u7d4c\u55b6\u6210\u7e3e\u3092\u5831\u544a\u3059\u308b\u3053\u3068\u3092\u76ee\u7684\u3068\u3057\u307e\u3059\u3002</p> <p></p> <p>\u8ca1\u52d9\u4f1a\u8a08\u306e\u7279\u5fb4</p> \u9805\u76ee \u5185\u5bb9 \u76ee\u7684 \u5916\u90e8\u3078\u306e\u5831\u544a\uff08\u6cd5\u5b9a\u958b\u793a\uff09 \u5bfe\u8c61 \u682a\u4e3b\u3001\u50b5\u6a29\u8005\u3001\u7a0e\u52d9\u7f72 \u898f\u5247 \u4f1a\u8a08\u57fa\u6e96\u3001\u7a0e\u6cd5\u306b\u6e96\u62e0 \u671f\u9593 \u4f1a\u8a08\u671f\u9593\uff08\u901a\u5e381\u5e74\uff09 \u5f62\u5f0f \u8ca1\u52d9\u8af8\u8868\uff08B/S, P/L, C/F\uff09"},{"location":"article/part3/chapter14/#_7","title":"\u7ba1\u7406\u4f1a\u8a08\uff1a\u5185\u90e8\u610f\u601d\u6c7a\u5b9a\u76ee\u7684","text":"<p>\u7ba1\u7406\u4f1a\u8a08\u306f\u3001\u7d4c\u55b6\u8005\u3084\u7ba1\u7406\u8005\u304c\u610f\u601d\u6c7a\u5b9a\u3092\u884c\u3046\u305f\u3081\u306e\u60c5\u5831\u3092\u63d0\u4f9b\u3059\u308b\u3053\u3068\u3092\u76ee\u7684\u3068\u3057\u307e\u3059\u3002</p> <p></p> <p>\u7ba1\u7406\u4f1a\u8a08\u306e\u7279\u5fb4</p> \u9805\u76ee \u5185\u5bb9 \u76ee\u7684 \u5185\u90e8\u306e\u610f\u601d\u6c7a\u5b9a\u652f\u63f4 \u5bfe\u8c61 \u7d4c\u55b6\u8005\u3001\u7ba1\u7406\u8005 \u898f\u5247 \u81ea\u7531\uff08\u793e\u5185\u30eb\u30fc\u30eb\uff09 \u671f\u9593 \u4efb\u610f\uff08\u6708\u6b21\u3001\u9031\u6b21\u3001\u65e5\u6b21\uff09 \u5f62\u5f0f \u81ea\u7531\uff08\u30bb\u30b0\u30e1\u30f3\u30c8\u5225\u3001\u88fd\u54c1\u5225\u306a\u3069\uff09"},{"location":"article/part3/chapter14/#_8","title":"\u8ca1\u52d9\u4f1a\u8a08\u3068\u7ba1\u7406\u4f1a\u8a08\u306e\u6bd4\u8f03","text":"\u6bd4\u8f03\u9805\u76ee \u8ca1\u52d9\u4f1a\u8a08 \u7ba1\u7406\u4f1a\u8a08 \u5229\u7528\u8005 \u5916\u90e8\u5229\u5bb3\u95a2\u4fc2\u8005 \u7d4c\u55b6\u8005\u30fb\u7ba1\u7406\u8005 \u76ee\u7684 \u5831\u544a\u7fa9\u52d9\u306e\u5c65\u884c \u610f\u601d\u6c7a\u5b9a\u306e\u652f\u63f4 \u898f\u5236 \u4f1a\u8a08\u57fa\u6e96\u30fb\u7a0e\u6cd5 \u306a\u3057\uff08\u4efb\u610f\uff09 \u6642\u9593\u8ef8 \u904e\u53bb\uff08\u5b9f\u7e3e\uff09 \u904e\u53bb\u30fb\u73fe\u5728\u30fb\u5c06\u6765 \u8a73\u7d30\u5ea6 \u6cd5\u5b9a\u69d8\u5f0f \u5fc5\u8981\u306b\u5fdc\u3058\u3066\u8a73\u7d30 \u66f4\u65b0\u983b\u5ea6 \u671f\u672b\uff08\u56db\u534a\u671f\u30fb\u5e74\u6b21\uff09 \u968f\u6642\uff08\u65e5\u6b21\u30fb\u9031\u6b21\uff09"},{"location":"article/part3/chapter14/#143","title":"14.3 \u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":""},{"location":"article/part3/chapter14/#_9","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u6210","text":"<p>\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306f\u3001\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u30dd\u30fc\u30c8&amp;\u30a2\u30c0\u30d7\u30bf\u30fc\u30d1\u30bf\u30fc\u30f3\uff09\u3092\u63a1\u7528\u3057\u307e\u3059\u3002</p> <pre><code>src/main/java/com/example/accounting/\n\u251c\u2500\u2500 domain/                     # \u30c9\u30e1\u30a4\u30f3\u5c64\uff08\u7d14\u7c8b\u306a\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\uff09\n\u2502   \u251c\u2500\u2500 model/                 # \u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\uff08\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3001\u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\uff09\n\u2502   \u2502   \u251c\u2500\u2500 account/           # \u52d8\u5b9a\u79d1\u76ee\u95a2\u9023\n\u2502   \u2502   \u251c\u2500\u2500 journal/           # \u4ed5\u8a33\u95a2\u9023\n\u2502   \u2502   \u2514\u2500\u2500 balance/           # \u6b8b\u9ad8\u95a2\u9023\n\u2502   \u251c\u2500\u2500 type/                  # \u57fa\u672c\u578b\uff08\u901a\u8ca8\u3001\u91d1\u984d\u7b49\uff09\n\u2502   \u2514\u2500\u2500 exception/             # \u30c9\u30e1\u30a4\u30f3\u4f8b\u5916\n\u2502\n\u251c\u2500\u2500 application/               # \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\n\u2502   \u2514\u2500\u2500 port/\n\u2502       \u2514\u2500\u2500 out/              # Output Port\uff08\u30ea\u30dd\u30b8\u30c8\u30ea\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff09\n\u2502\n\u251c\u2500\u2500 infrastructure/            # \u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u5c64\n\u2502   \u251c\u2500\u2500 in/                   # Input Adapter\uff08\u53d7\u4fe1\u30a2\u30c0\u30d7\u30bf\u30fc\uff09\n\u2502   \u2502   \u251c\u2500\u2500 rest/             # REST API\uff08Web\u5b9f\u88c5\uff09\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 controller/   # REST Controller\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 dto/          # Data Transfer Object\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 exception/    # Exception Handler\n\u2502   \u2502   \u2514\u2500\u2500 seed/             # Seed \u30c7\u30fc\u30bf\u6295\u5165\n\u2502   \u2514\u2500\u2500 out/                  # Output Adapter\uff08\u9001\u4fe1\u30a2\u30c0\u30d7\u30bf\u30fc\uff09\n\u2502       \u2514\u2500\u2500 persistence/      # DB\u5b9f\u88c5\n\u2502           \u251c\u2500\u2500 mapper/       # MyBatis Mapper\n\u2502           \u251c\u2500\u2500 repository/   # Repository\u5b9f\u88c5\n\u2502           \u2514\u2500\u2500 typehandler/  # \u578b\u30cf\u30f3\u30c9\u30e9\u30fc\n\u2502\n\u2514\u2500\u2500 config/                   # \u8a2d\u5b9a\u30af\u30e9\u30b9\n</code></pre>"},{"location":"article/part3/chapter14/#_10","title":"\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u30dd\u30fc\u30c8&amp;\u30a2\u30c0\u30d7\u30bf\u30fc\uff09","text":""},{"location":"article/part3/chapter14/#_11","title":"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u7279\u5fb4","text":"\u7279\u5fb4 \u8aac\u660e \u30c9\u30e1\u30a4\u30f3\u4e2d\u5fc3 \u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3092\u4e2d\u5fc3\u306b\u636e\u3048\u3001\u5916\u90e8\u6280\u8853\u304b\u3089\u5206\u96e2 \u4f9d\u5b58\u6027\u306e\u9006\u8ee2 \u30c9\u30e1\u30a4\u30f3\u5c64\u306f\u5916\u90e8\u306b\u4f9d\u5b58\u305b\u305a\u3001\u5916\u90e8\u304c\u30c9\u30e1\u30a4\u30f3\u5c64\u306b\u4f9d\u5b58 \u30c6\u30b9\u30c8\u5bb9\u6613\u6027 \u30e2\u30c3\u30af\u3084\u30b9\u30bf\u30d6\u3092\u4f7f\u3063\u305f\u5358\u4f53\u30c6\u30b9\u30c8\u304c\u5bb9\u6613 \u6280\u8853\u5909\u66f4\u306e\u5bb9\u6613\u3055 \u30a2\u30c0\u30d7\u30bf\u30fc\u3092\u5dee\u3057\u66ff\u3048\u308b\u3060\u3051\u3067\u6280\u8853\u3092\u5909\u66f4\u53ef\u80fd"},{"location":"article/part3/chapter14/#_12","title":"\u30c9\u30e1\u30a4\u30f3\u99c6\u52d5\u8a2d\u8a08\u306e\u9069\u7528","text":""},{"location":"article/part3/chapter14/#_13","title":"\u96c6\u7d04\u3068\u30ea\u30dd\u30b8\u30c8\u30ea","text":""},{"location":"article/part3/chapter14/#_14","title":"\u30c9\u30e1\u30a4\u30f3\u30b5\u30fc\u30d3\u30b9","text":"\u30b5\u30fc\u30d3\u30b9 \u8cac\u52d9 JournalValidationService \u4ed5\u8a33\u306e\u8cb8\u501f\u4e00\u81f4\u691c\u8a3c BalanceCalculationService \u6b8b\u9ad8\u8a08\u7b97\u30fb\u96c6\u8a08 AutoJournalService \u81ea\u52d5\u4ed5\u8a33\u751f\u6210 ClosingService \u6708\u6b21\u30fb\u5e74\u6b21\u6c7a\u7b97\u51e6\u7406"},{"location":"article/part3/chapter14/#_15","title":"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9","text":"\u30b5\u30fc\u30d3\u30b9 \u8cac\u52d9 AccountUseCase \u52d8\u5b9a\u79d1\u76ee\u306e\u767b\u9332\u30fb\u7167\u4f1a\u30fb\u66f4\u65b0 JournalUseCase \u4ed5\u8a33\u306e\u767b\u9332\u30fb\u7167\u4f1a\u30fb\u66f4\u65b0 BalanceUseCase \u6b8b\u9ad8\u7167\u4f1a\u30fb\u5e33\u7968\u51fa\u529b ClosingUseCase \u6c7a\u7b97\u51e6\u7406\u306e\u5b9f\u884c"},{"location":"article/part3/chapter14/#api","title":"API \u8a2d\u8a08","text":""},{"location":"article/part3/chapter14/#restful-api","title":"RESTful API \u306e\u57fa\u672c\u65b9\u91dd","text":"\u65b9\u91dd \u8aac\u660e \u30ea\u30bd\u30fc\u30b9\u6307\u5411 \u52d8\u5b9a\u79d1\u76ee\u3001\u4ed5\u8a33\u3001\u6b8b\u9ad8\u3092\u30ea\u30bd\u30fc\u30b9\u3068\u3057\u3066\u8a2d\u8a08 HTTP \u30e1\u30bd\u30c3\u30c9 GET\uff08\u7167\u4f1a\uff09\u3001POST\uff08\u767b\u9332\uff09\u3001PUT\uff08\u66f4\u65b0\uff09\u3001DELETE\uff08\u524a\u9664\uff09 \u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9 200\uff08\u6210\u529f\uff09\u3001201\uff08\u4f5c\u6210\uff09\u3001400\uff08\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\uff09\u3001404\uff08\u672a\u691c\u51fa\uff09\u3001409\uff08\u7af6\u5408\uff09 \u30a8\u30e9\u30fc\u30ec\u30b9\u30dd\u30f3\u30b9 ProblemDetail \u5f62\u5f0f\uff08RFC 7807\uff09"},{"location":"article/part3/chapter14/#_16","title":"\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u8a2d\u8a08","text":"\u30e1\u30bd\u30c3\u30c9 \u30d1\u30b9 \u8aac\u660e GET <code>/api/v1/accounts</code> \u52d8\u5b9a\u79d1\u76ee\u4e00\u89a7\u306e\u53d6\u5f97 GET <code>/api/v1/accounts/{code}</code> \u52d8\u5b9a\u79d1\u76ee\u306e\u53d6\u5f97 POST <code>/api/v1/accounts</code> \u52d8\u5b9a\u79d1\u76ee\u306e\u767b\u9332 PUT <code>/api/v1/accounts/{code}</code> \u52d8\u5b9a\u79d1\u76ee\u306e\u66f4\u65b0 DELETE <code>/api/v1/accounts/{code}</code> \u52d8\u5b9a\u79d1\u76ee\u306e\u524a\u9664 GET <code>/api/v1/journals</code> \u4ed5\u8a33\u4e00\u89a7\u306e\u53d6\u5f97 POST <code>/api/v1/journals</code> \u4ed5\u8a33\u306e\u767b\u9332 GET <code>/api/v1/balances/daily</code> \u65e5\u6b21\u6b8b\u9ad8\u306e\u53d6\u5f97 GET <code>/api/v1/balances/monthly</code> \u6708\u6b21\u6b8b\u9ad8\u306e\u53d6\u5f97 GET <code>/api/v1/reports/trial-balance</code> \u8a66\u7b97\u8868\u306e\u51fa\u529b"},{"location":"article/part3/chapter14/#_17","title":"\u30de\u30b9\u30bf\u60c5\u5831\u3068\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u60c5\u5831","text":"<p>\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u30c7\u30fc\u30bf\u306f\u3001\u5927\u304d\u304f\u300c\u30de\u30b9\u30bf\u60c5\u5831\u300d\u3068\u300c\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u60c5\u5831\u300d\u306b\u5206\u985e\u3055\u308c\u307e\u3059\u3002</p> <p></p> \u5206\u985e \u8aac\u660e \u4f8b \u30de\u30b9\u30bf\u60c5\u5831 \u57fa\u672c\u7684\u306b\u5909\u66f4\u304c\u5c11\u306a\u3044\u3001\u30b7\u30b9\u30c6\u30e0\u306e\u57fa\u76e4\u3068\u306a\u308b\u30c7\u30fc\u30bf \u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u3001\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf\u3001\u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u60c5\u5831 \u65e5\u3005\u306e\u696d\u52d9\u3067\u767a\u751f\u3059\u308b\u30c7\u30fc\u30bf \u4ed5\u8a33\u30c7\u30fc\u30bf\u3001\u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u3001\u6708\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8"},{"location":"article/part3/chapter14/#_18","title":"\u672c\u7ae0\u306e\u307e\u3068\u3081","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u5168\u4f53\u50cf\u3092\u628a\u63e1\u3057\u307e\u3057\u305f\u3002</p>"},{"location":"article/part3/chapter14/#_19","title":"\u5b66\u3093\u3060\u3053\u3068","text":"\u30ab\u30c6\u30b4\u30ea \u5185\u5bb9 \u30b9\u30b3\u30fc\u30d7 \u50b5\u6a29\u7ba1\u7406\u30fb\u50b5\u52d9\u7ba1\u7406\u30fb\u7d4c\u7406\uff08\u4ed5\u8a33\u30fb\u6c7a\u7b97\uff09 \u9023\u643a \u8ca9\u58f2\u7ba1\u7406\u30fb\u8cfc\u8cb7\u7ba1\u7406\u30fb\u751f\u7523\u7ba1\u7406\u304b\u3089\u306e\u4ed5\u8a33\u30c7\u30fc\u30bf\u53d7\u9818 \u8ca1\u52d9\u4f1a\u8a08 \u5916\u90e8\u5831\u544a\u76ee\u7684\uff08\u6cd5\u5b9a\u958b\u793a\uff09 \u7ba1\u7406\u4f1a\u8a08 \u5185\u90e8\u610f\u601d\u6c7a\u5b9a\u76ee\u7684\uff08\u4efb\u610f\uff09 \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3 \u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u30dd\u30fc\u30c8&amp;\u30a2\u30c0\u30d7\u30bf\u30fc\uff09 \u8a2d\u8a08\u624b\u6cd5 \u30c9\u30e1\u30a4\u30f3\u99c6\u52d5\u8a2d\u8a08\uff08\u96c6\u7d04\u30fb\u30ea\u30dd\u30b8\u30c8\u30ea\u30fb\u30c9\u30e1\u30a4\u30f3\u30b5\u30fc\u30d3\u30b9\uff09"},{"location":"article/part3/chapter14/#_20","title":"\u6b21\u7ae0\u306e\u4e88\u544a","text":"<p>\u7b2c15\u7ae0\u3067\u306f\u3001\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u57fa\u76e4\u3068\u306a\u308b\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u306e\u8a2d\u8a08\u3092\u884c\u3044\u307e\u3059\u3002\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\u3001BSPL\u533a\u5206\u3001\u8cb8\u501f\u533a\u5206\u3001\u96c6\u8a08\u533a\u5206\u306a\u3069\u306e\u8a73\u7d30\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002</p>"},{"location":"article/part3/chapter15/","title":"\u7b2c15\u7ae0\uff1a\u52d8\u5b9a\u79d1\u76ee\u306e\u8a2d\u8a08","text":"<p>\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u6839\u5e79\u3068\u306a\u308b\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u3092\u8a2d\u8a08\u3057\u307e\u3059\u3002\u672c\u7ae0\u3067\u306f\u3001TDD\uff08\u30c6\u30b9\u30c8\u99c6\u52d5\u958b\u767a\uff09\u3092\u7528\u3044\u3066\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u3001\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf\u3001\u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\u3092\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\u3002</p>"},{"location":"article/part3/chapter15/#151","title":"15.1 \u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u306e\u8a2d\u8a08","text":""},{"location":"article/part3/chapter15/#_1","title":"\u52d8\u5b9a\u79d1\u76ee\u306e\u533a\u5206\u4f53\u7cfb","text":"<p>\u52d8\u5b9a\u79d1\u76ee\u306f\u8907\u6570\u306e\u533a\u5206\u3067\u5206\u985e\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u533a\u5206\u3092\u6b63\u3057\u304f\u7406\u89e3\u3059\u308b\u3053\u3068\u304c\u3001\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u8a2d\u8a08\u306e\u57fa\u790e\u3068\u306a\u308a\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part3/chapter15/#_2","title":"\u533a\u5206\u306e\u8aac\u660e","text":"\u533a\u5206 \u8aac\u660e \u5024\u306e\u4f8b BSPL\u533a\u5206 \u8cb8\u501f\u5bfe\u7167\u8868(BS)\u304b\u640d\u76ca\u8a08\u7b97\u66f8(PL)\u304b <code>BS</code>, <code>PL</code> \u8cb8\u501f\u533a\u5206 \u501f\u65b9\u79d1\u76ee\u304b\u8cb8\u65b9\u79d1\u76ee\u304b <code>\u501f\u65b9</code>, <code>\u8cb8\u65b9</code> \u53d6\u5f15\u8981\u7d20\u533a\u5206 5\u3064\u306e\u53d6\u5f15\u8981\u7d20\u306e\u3069\u308c\u306b\u8a72\u5f53\u3059\u308b\u304b <code>\u8cc7\u7523</code>, <code>\u8ca0\u50b5</code>, <code>\u8cc7\u672c</code>, <code>\u53ce\u76ca</code>, <code>\u8cbb\u7528</code> \u96c6\u8a08\u533a\u5206 \u79d1\u76ee\u306e\u6027\u8cea\uff08\u898b\u51fa\u3057/\u96c6\u8a08/\u8a08\u4e0a\uff09 <code>\u898b\u51fa\u79d1\u76ee</code>, <code>\u96c6\u8a08\u79d1\u76ee</code>, <code>\u8a08\u4e0a\u79d1\u76ee</code>"},{"location":"article/part3/chapter15/#_3","title":"\u53d6\u5f15\u8981\u7d20\u3068\u8cb8\u501f\u533a\u5206\u306e\u95a2\u4fc2","text":"<p>\u8907\u5f0f\u7c3f\u8a18\u3067\u306f\u3001\u53d6\u5f15\u8981\u7d20\u306b\u3088\u3063\u3066\u501f\u65b9\u30fb\u8cb8\u65b9\u304c\u6c7a\u307e\u308a\u307e\u3059\u3002</p> \u53d6\u5f15\u8981\u7d20 BSPL\u533a\u5206 \u5897\u52a0\u6642\u306e\u8cb8\u501f \u6e1b\u5c11\u6642\u306e\u8cb8\u501f \u8cc7\u7523 BS \u501f\u65b9 \u8cb8\u65b9 \u8ca0\u50b5 BS \u8cb8\u65b9 \u501f\u65b9 \u8cc7\u672c BS \u8cb8\u65b9 \u501f\u65b9 \u53ce\u76ca PL \u8cb8\u65b9 \u501f\u65b9 \u8cbb\u7528 PL \u501f\u65b9 \u8cb8\u65b9"},{"location":"article/part3/chapter15/#_4","title":"\u96c6\u8a08\u533a\u5206\u306e\u4f7f\u3044\u5206\u3051","text":"\u96c6\u8a08\u533a\u5206 \u8aac\u660e \u4f8b \u898b\u51fa\u79d1\u76ee \u5e33\u7968\u306e\u898b\u51fa\u3057\u3068\u3057\u3066\u8868\u793a\u3001\u8a08\u4e0a\u4e0d\u53ef <code>(\u8cc7\u7523\u306e\u90e8\uff09</code>, <code>(\u8ca0\u50b5\u306e\u90e8\uff09</code> \u96c6\u8a08\u79d1\u76ee \u914d\u4e0b\u306e\u79d1\u76ee\u3092\u96c6\u8a08\u3001\u8a08\u4e0a\u4e0d\u53ef <code>\u6d41\u52d5\u8cc7\u7523</code>, <code>\u73fe\u91d1\u53ca\u3073\u9810\u91d1</code> \u8a08\u4e0a\u79d1\u76ee \u5b9f\u969b\u306b\u4ed5\u8a33\u3067\u4f7f\u7528\u3059\u308b\u79d1\u76ee <code>\u73fe\u91d1</code>, <code>\u5f53\u5ea7\u9810\u91d1</code>, <code>\u58f2\u4e0a\u9ad8</code>"},{"location":"article/part3/chapter15/#er","title":"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u306eER\u56f3","text":""},{"location":"article/part3/chapter15/#_5","title":"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u306e\u9805\u76ee\u8aac\u660e","text":"\u9805\u76ee \u8aac\u660e \u4f8b \u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9 \u79d1\u76ee\u3092\u4e00\u610f\u306b\u8b58\u5225\u3059\u308b\u30b3\u30fc\u30c9 <code>11110</code> \u52d8\u5b9a\u79d1\u76ee\u540d \u79d1\u76ee\u306e\u6b63\u5f0f\u540d\u79f0 <code>\u73fe\u91d1</code> \u52d8\u5b9a\u79d1\u76ee\u7565\u540d \u79d1\u76ee\u306e\u7565\u79f0\uff08\u5e33\u7968\u8868\u793a\u7528\uff09 <code>\u73fe\u91d1</code> \u52d8\u5b9a\u79d1\u76ee\u30ab\u30ca \u691c\u7d22\u7528\u30ab\u30ca\u540d <code>\u30b2\u30f3\u30ad\u30f3</code> BSPL\u533a\u5206 \u8cb8\u501f\u5bfe\u7167\u8868(BS)\u304b\u640d\u76ca\u8a08\u7b97\u66f8(PL)\u304b <code>BS</code> \u8cb8\u501f\u533a\u5206 \u501f\u65b9\u79d1\u76ee\u304b\u8cb8\u65b9\u79d1\u76ee\u304b <code>\u501f\u65b9</code> \u53d6\u5f15\u8981\u7d20\u533a\u5206 5\u3064\u306e\u53d6\u5f15\u8981\u7d20\u306e\u3069\u308c\u304b <code>\u8cc7\u7523</code> \u96c6\u8a08\u533a\u5206 \u898b\u51fa\u79d1\u76ee/\u96c6\u8a08\u79d1\u76ee/\u8a08\u4e0a\u79d1\u76ee <code>\u8a08\u4e0a\u79d1\u76ee</code> \u7ba1\u7406\u4f1a\u8a08\u533a\u5206 \u7ba1\u7406\u4f1a\u8a08\u3067\u306e\u5206\u985e <code>1</code> \u8cbb\u7528\u533a\u5206 \u8cbb\u7528\u306e\u5206\u985e\uff08\u88fd\u9020\u539f\u4fa1/\u8ca9\u7ba1\u8cbb\u7b49\uff09 <code>2</code> \u88dc\u52a9\u79d1\u76ee\u7a2e\u5225 \u88dc\u52a9\u79d1\u76ee\u306e\u7a2e\u985e\uff08\u5f97\u610f\u5148/\u4ed5\u5165\u5148\u7b49\uff09 <code>1</code> \u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206 \u6d88\u8cbb\u7a0e\u306e\u8a08\u7b97\u65b9\u6cd5 <code>\u8ab2\u7a0e</code> \u8ab2\u7a0e\u53d6\u5f15\u30b3\u30fc\u30c9 \u95a2\u9023\u3059\u308b\u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\u306e\u53c2\u7167 <code>10</code> \u671f\u65e5\u7ba1\u7406\u533a\u5206 \u671f\u65e5\u7ba1\u7406\u306e\u6709\u7121 <code>1</code>"},{"location":"article/part3/chapter15/#enum","title":"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff1aENUM\u578b\u3068\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210","text":"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3SQL <pre><code>-- src/main/resources/db/migration/V001__create_account_enums.sql\n\n-- ENUM\u578b\u306e\u5b9a\u7fa9\nCREATE TYPE BSPL\u533a\u5206 AS ENUM ('BS', 'PL');\nCREATE TYPE \u8cb8\u501f\u533a\u5206 AS ENUM ('\u501f\u65b9', '\u8cb8\u65b9');\nCREATE TYPE \u53d6\u5f15\u8981\u7d20\u533a\u5206 AS ENUM ('\u8cc7\u7523', '\u8ca0\u50b5', '\u8cc7\u672c', '\u53ce\u76ca', '\u8cbb\u7528');\nCREATE TYPE \u96c6\u8a08\u533a\u5206 AS ENUM ('\u898b\u51fa\u79d1\u76ee', '\u96c6\u8a08\u79d1\u76ee', '\u8a08\u4e0a\u79d1\u76ee');\nCREATE TYPE \u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206 AS ENUM ('\u8ab2\u7a0e', '\u975e\u8ab2\u7a0e', '\u514d\u7a0e', '\u5bfe\u8c61\u5916');\n</code></pre> <pre><code>-- src/main/resources/db/migration/V002__create_account_master.sql\n\n-- \u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\nCREATE TABLE \"\u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\" (\n    \"\u8ab2\u7a0e\u53d6\u5f15\u30b3\u30fc\u30c9\" VARCHAR(2) PRIMARY KEY,\n    \"\u8ab2\u7a0e\u53d6\u5f15\u540d\" VARCHAR(20) NOT NULL,\n    \"\u7a0e\u7387\" DECIMAL(5,3) NOT NULL DEFAULT 0.10,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u66f4\u65b0\u8005\u540d\" VARCHAR(12)\n);\n\n-- \u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\nCREATE TABLE \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\" (\n    \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(5) PRIMARY KEY,\n    \"\u52d8\u5b9a\u79d1\u76ee\u540d\" VARCHAR(40) NOT NULL,\n    \"\u52d8\u5b9a\u79d1\u76ee\u7565\u540d\" VARCHAR(10),\n    \"\u52d8\u5b9a\u79d1\u76ee\u30ab\u30ca\" VARCHAR(40),\n    \"BSPL\u533a\u5206\" BSPL\u533a\u5206 NOT NULL,\n    \"\u8cb8\u501f\u533a\u5206\" \u8cb8\u501f\u533a\u5206 NOT NULL,\n    \"\u53d6\u5f15\u8981\u7d20\u533a\u5206\" \u53d6\u5f15\u8981\u7d20\u533a\u5206 NOT NULL,\n    \"\u96c6\u8a08\u533a\u5206\" \u96c6\u8a08\u533a\u5206 NOT NULL,\n    \"\u7ba1\u7406\u4f1a\u8a08\u533a\u5206\" VARCHAR(1),\n    \"\u8cbb\u7528\u533a\u5206\" VARCHAR(1),\n    \"\u5143\u5e33\u51fa\u529b\u533a\u5206\" VARCHAR(1),\n    \"\u88dc\u52a9\u79d1\u76ee\u7a2e\u5225\" VARCHAR(1),\n    \"\u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206\" \u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206,\n    \"\u8ab2\u7a0e\u53d6\u5f15\u30b3\u30fc\u30c9\" VARCHAR(2) REFERENCES \"\u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\"(\"\u8ab2\u7a0e\u53d6\u5f15\u30b3\u30fc\u30c9\"),\n    \"\u671f\u65e5\u7ba1\u7406\u533a\u5206\" VARCHAR(1),\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u66f4\u65b0\u8005\u540d\" VARCHAR(12)\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX idx_\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf_BSPL\u533a\u5206 ON \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\"(\"BSPL\u533a\u5206\");\nCREATE INDEX idx_\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf_\u53d6\u5f15\u8981\u7d20\u533a\u5206 ON \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\"(\"\u53d6\u5f15\u8981\u7d20\u533a\u5206\");\nCREATE INDEX idx_\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf_\u96c6\u8a08\u533a\u5206 ON \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\"(\"\u96c6\u8a08\u533a\u5206\");\n</code></pre>"},{"location":"article/part3/chapter15/#tdd","title":"TDD \u306b\u3088\u308b\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u306e\u5b9f\u88c5","text":""},{"location":"article/part3/chapter15/#red","title":"Red: \u5931\u6557\u3059\u308b\u30c6\u30b9\u30c8\u3092\u66f8\u304f","text":"\u52d8\u5b9a\u79d1\u76ee\u30ea\u30dd\u30b8\u30c8\u30ea\u30c6\u30b9\u30c8 <pre><code>// src/test/java/com/example/accounting/infrastructure/persistence/repository/AccountRepositoryTest.java\npackage com.example.accounting.infrastructure.persistence.repository;\n\nimport com.example.accounting.application.port.out.AccountRepository;\nimport com.example.accounting.domain.model.account.*;\nimport com.example.accounting.testsetup.BaseIntegrationTest;\nimport org.junit.jupiter.api.*;\nimport org.springframework.beans.factory.annotation.Autowired;\n\nimport static org.assertj.core.api.Assertions.*;\n\n@DisplayName(\"\u52d8\u5b9a\u79d1\u76ee\u30ea\u30dd\u30b8\u30c8\u30ea\")\nclass AccountRepositoryTest extends BaseIntegrationTest {\n\n    @Autowired\n    private AccountRepository accountRepository;\n\n    @BeforeEach\n    void setUp() {\n        accountRepository.deleteAll();\n    }\n\n    @Nested\n    @DisplayName(\"\u767b\u9332\")\n    class Registration {\n\n        @Test\n        @DisplayName(\"\u52d8\u5b9a\u79d1\u76ee\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterAccount() {\n            // Arrange\n            var account = Account.builder()\n                    .accountCode(\"11110\")\n                    .accountName(\"\u73fe\u91d1\")\n                    .accountShortName(\"\u73fe\u91d1\")\n                    .bsplType(BSPLType.BS)\n                    .debitCreditType(DebitCreditType.DEBIT)\n                    .transactionElementType(TransactionElementType.ASSET)\n                    .aggregationType(AggregationType.POSTING)\n                    .build();\n\n            // Act\n            accountRepository.save(account);\n\n            // Assert\n            var result = accountRepository.findByCode(\"11110\");\n            assertThat(result).isPresent();\n            assertThat(result.get().getAccountName()).isEqualTo(\"\u73fe\u91d1\");\n            assertThat(result.get().getBsplType()).isEqualTo(BSPLType.BS);\n            assertThat(result.get().getDebitCreditType()).isEqualTo(DebitCreditType.DEBIT);\n        }\n\n        @Test\n        @DisplayName(\"\u8cb8\u501f\u5bfe\u7167\u8868\u306e\u8cc7\u7523\u79d1\u76ee\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterBSAssetAccount() {\n            var account = createAccount(\"11000\", \"\u6d41\u52d5\u8cc7\u7523\", BSPLType.BS,\n                    DebitCreditType.DEBIT, TransactionElementType.ASSET, AggregationType.SUMMARY);\n            accountRepository.save(account);\n\n            var result = accountRepository.findByCode(\"11000\");\n            assertThat(result).isPresent();\n            assertThat(result.get().getBsplType()).isEqualTo(BSPLType.BS);\n            assertThat(result.get().getTransactionElementType()).isEqualTo(TransactionElementType.ASSET);\n        }\n\n        @Test\n        @DisplayName(\"\u8cb8\u501f\u5bfe\u7167\u8868\u306e\u8ca0\u50b5\u79d1\u76ee\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterBSLiabilityAccount() {\n            var account = createAccount(\"21000\", \"\u6d41\u52d5\u8ca0\u50b5\", BSPLType.BS,\n                    DebitCreditType.CREDIT, TransactionElementType.LIABILITY, AggregationType.SUMMARY);\n            accountRepository.save(account);\n\n            var result = accountRepository.findByCode(\"21000\");\n            assertThat(result).isPresent();\n            assertThat(result.get().getTransactionElementType()).isEqualTo(TransactionElementType.LIABILITY);\n        }\n\n        @Test\n        @DisplayName(\"\u640d\u76ca\u8a08\u7b97\u66f8\u306e\u53ce\u76ca\u79d1\u76ee\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterPLRevenueAccount() {\n            var account = createAccount(\"41000\", \"\u58f2\u4e0a\u9ad8\", BSPLType.PL,\n                    DebitCreditType.CREDIT, TransactionElementType.REVENUE, AggregationType.SUMMARY);\n            accountRepository.save(account);\n\n            var result = accountRepository.findByCode(\"41000\");\n            assertThat(result).isPresent();\n            assertThat(result.get().getBsplType()).isEqualTo(BSPLType.PL);\n            assertThat(result.get().getTransactionElementType()).isEqualTo(TransactionElementType.REVENUE);\n        }\n\n        @Test\n        @DisplayName(\"\u640d\u76ca\u8a08\u7b97\u66f8\u306e\u8cbb\u7528\u79d1\u76ee\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterPLExpenseAccount() {\n            var account = createAccount(\"51000\", \"\u58f2\u4e0a\u539f\u4fa1\", BSPLType.PL,\n                    DebitCreditType.DEBIT, TransactionElementType.EXPENSE, AggregationType.SUMMARY);\n            accountRepository.save(account);\n\n            var result = accountRepository.findByCode(\"51000\");\n            assertThat(result).isPresent();\n            assertThat(result.get().getTransactionElementType()).isEqualTo(TransactionElementType.EXPENSE);\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u96c6\u8a08\u533a\u5206\")\n    class AggregationTypes {\n\n        @Test\n        @DisplayName(\"\u898b\u51fa\u79d1\u76ee\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterHeaderAccount() {\n            var account = createAccount(\"11\", \"(\u8cc7\u7523\u306e\u90e8\uff09\", BSPLType.BS,\n                    DebitCreditType.DEBIT, TransactionElementType.ASSET, AggregationType.HEADER);\n            accountRepository.save(account);\n\n            var result = accountRepository.findByCode(\"11\");\n            assertThat(result.get().getAggregationType()).isEqualTo(AggregationType.HEADER);\n        }\n\n        @Test\n        @DisplayName(\"\u96c6\u8a08\u79d1\u76ee\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterSummaryAccount() {\n            var account = createAccount(\"11190\", \"\u73fe\u91d1\u53ca\u3073\u9810\u91d1\", BSPLType.BS,\n                    DebitCreditType.DEBIT, TransactionElementType.ASSET, AggregationType.SUMMARY);\n            accountRepository.save(account);\n\n            var result = accountRepository.findByCode(\"11190\");\n            assertThat(result.get().getAggregationType()).isEqualTo(AggregationType.SUMMARY);\n        }\n\n        @Test\n        @DisplayName(\"\u8a08\u4e0a\u79d1\u76ee\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterPostingAccount() {\n            var account = createAccount(\"11110\", \"\u73fe\u91d1\", BSPLType.BS,\n                    DebitCreditType.DEBIT, TransactionElementType.ASSET, AggregationType.POSTING);\n            accountRepository.save(account);\n\n            var result = accountRepository.findByCode(\"11110\");\n            assertThat(result.get().getAggregationType()).isEqualTo(AggregationType.POSTING);\n        }\n    }\n\n    private Account createAccount(String code, String name, BSPLType bsplType,\n            DebitCreditType debitCreditType, TransactionElementType transactionElementType,\n            AggregationType aggregationType) {\n        return Account.builder()\n                .accountCode(code)\n                .accountName(name)\n                .bsplType(bsplType)\n                .debitCreditType(debitCreditType)\n                .transactionElementType(transactionElementType)\n                .aggregationType(aggregationType)\n                .build();\n    }\n}\n</code></pre>"},{"location":"article/part3/chapter15/#green","title":"Green: \u30c6\u30b9\u30c8\u3092\u901a\u3059\u5b9f\u88c5","text":""},{"location":"article/part3/chapter15/#_6","title":"\u30c9\u30e1\u30a4\u30f3\u5c64","text":"\u52d8\u5b9a\u79d1\u76ee\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/accounting/domain/model/account/Account.java\npackage com.example.accounting.domain.model.account;\n\nimport lombok.*;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Account {\n    private String accountCode;\n    private String accountName;\n    private String accountShortName;\n    private String accountNameKana;\n    private BSPLType bsplType;\n    private DebitCreditType debitCreditType;\n    private TransactionElementType transactionElementType;\n    private AggregationType aggregationType;\n    private String managementAccountingType;\n    private String expenseType;\n    private String ledgerOutputType;\n    private String subAccountType;\n    private String consumptionTaxType;\n    private String taxTransactionCode;\n    private String dueDateManagementType;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n}\n</code></pre> BSPL\u533a\u5206 Enum <pre><code>// src/main/java/com/example/accounting/domain/model/account/BSPLType.java\npackage com.example.accounting.domain.model.account;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum BSPLType {\n    BS(\"BS\"),\n    PL(\"PL\");\n\n    private final String displayName;\n\n    public static BSPLType fromDisplayName(String displayName) {\n        for (BSPLType type : values()) {\n            if (type.displayName.equals(displayName)) {\n                return type;\n            }\n        }\n        throw new IllegalArgumentException(\"\u4e0d\u6b63\u306aBSPL\u533a\u5206: \" + displayName);\n    }\n}\n</code></pre> \u8cb8\u501f\u533a\u5206 Enum <pre><code>// src/main/java/com/example/accounting/domain/model/account/DebitCreditType.java\npackage com.example.accounting.domain.model.account;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum DebitCreditType {\n    DEBIT(\"\u501f\u65b9\"),\n    CREDIT(\"\u8cb8\u65b9\");\n\n    private final String displayName;\n\n    public static DebitCreditType fromDisplayName(String displayName) {\n        for (DebitCreditType type : values()) {\n            if (type.displayName.equals(displayName)) {\n                return type;\n            }\n        }\n        throw new IllegalArgumentException(\"\u4e0d\u6b63\u306a\u8cb8\u501f\u533a\u5206: \" + displayName);\n    }\n}\n</code></pre> \u53d6\u5f15\u8981\u7d20\u533a\u5206 Enum <pre><code>// src/main/java/com/example/accounting/domain/model/account/TransactionElementType.java\npackage com.example.accounting.domain.model.account;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum TransactionElementType {\n    ASSET(\"\u8cc7\u7523\"),\n    LIABILITY(\"\u8ca0\u50b5\"),\n    EQUITY(\"\u8cc7\u672c\"),\n    REVENUE(\"\u53ce\u76ca\"),\n    EXPENSE(\"\u8cbb\u7528\");\n\n    private final String displayName;\n\n    public static TransactionElementType fromDisplayName(String displayName) {\n        for (TransactionElementType type : values()) {\n            if (type.displayName.equals(displayName)) {\n                return type;\n            }\n        }\n        throw new IllegalArgumentException(\"\u4e0d\u6b63\u306a\u53d6\u5f15\u8981\u7d20\u533a\u5206: \" + displayName);\n    }\n}\n</code></pre> \u96c6\u8a08\u533a\u5206 Enum <pre><code>// src/main/java/com/example/accounting/domain/model/account/AggregationType.java\npackage com.example.accounting.domain.model.account;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum AggregationType {\n    HEADER(\"\u898b\u51fa\u79d1\u76ee\"),\n    SUMMARY(\"\u96c6\u8a08\u79d1\u76ee\"),\n    POSTING(\"\u8a08\u4e0a\u79d1\u76ee\");\n\n    private final String displayName;\n\n    public static AggregationType fromDisplayName(String displayName) {\n        for (AggregationType type : values()) {\n            if (type.displayName.equals(displayName)) {\n                return type;\n            }\n        }\n        throw new IllegalArgumentException(\"\u4e0d\u6b63\u306a\u96c6\u8a08\u533a\u5206: \" + displayName);\n    }\n}\n</code></pre>"},{"location":"article/part3/chapter15/#output-port","title":"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff08Output Port\uff09","text":"\u52d8\u5b9a\u79d1\u76ee\u30ea\u30dd\u30b8\u30c8\u30ea\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9 <pre><code>// src/main/java/com/example/accounting/application/port/out/AccountRepository.java\npackage com.example.accounting.application.port.out;\n\nimport com.example.accounting.domain.model.account.Account;\nimport com.example.accounting.domain.model.account.BSPLType;\nimport com.example.accounting.domain.model.account.TransactionElementType;\n\nimport java.util.List;\nimport java.util.Optional;\n\n/**\n * \u52d8\u5b9a\u79d1\u76ee\u30ea\u30dd\u30b8\u30c8\u30ea\uff08Output Port\uff09\n */\npublic interface AccountRepository {\n\n    void save(Account account);\n\n    Optional&lt;Account&gt; findByCode(String accountCode);\n\n    List&lt;Account&gt; findAll();\n\n    List&lt;Account&gt; findByBSPLType(BSPLType bsplType);\n\n    List&lt;Account&gt; findByTransactionElementType(TransactionElementType type);\n\n    void update(Account account);\n\n    void deleteAll();\n}\n</code></pre>"},{"location":"article/part3/chapter15/#_7","title":"\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u5c64","text":"TypeHandler\u5b9f\u88c5\uff08BSPLTypeHandler\uff09 <pre><code>// src/main/java/com/example/accounting/infrastructure/persistence/typehandler/BSPLTypeHandler.java\npackage com.example.accounting.infrastructure.persistence.typehandler;\n\nimport com.example.accounting.domain.model.account.BSPLType;\nimport org.apache.ibatis.type.BaseTypeHandler;\nimport org.apache.ibatis.type.JdbcType;\n\nimport java.sql.*;\n\npublic class BSPLTypeHandler extends BaseTypeHandler&lt;BSPLType&gt; {\n\n    @Override\n    public void setNonNullParameter(PreparedStatement ps, int i, BSPLType parameter, JdbcType jdbcType)\n            throws SQLException {\n        ps.setString(i, parameter.getDisplayName());\n    }\n\n    @Override\n    public BSPLType getNullableResult(ResultSet rs, String columnName) throws SQLException {\n        String value = rs.getString(columnName);\n        return value == null ? null : BSPLType.fromDisplayName(value);\n    }\n\n    @Override\n    public BSPLType getNullableResult(ResultSet rs, int columnIndex) throws SQLException {\n        String value = rs.getString(columnIndex);\n        return value == null ? null : BSPLType.fromDisplayName(value);\n    }\n\n    @Override\n    public BSPLType getNullableResult(CallableStatement cs, int columnIndex) throws SQLException {\n        String value = cs.getString(columnIndex);\n        return value == null ? null : BSPLType.fromDisplayName(value);\n    }\n}\n</code></pre> TypeHandler\u5b9f\u88c5\uff08DebitCreditTypeHandler\uff09 <pre><code>// src/main/java/com/example/accounting/infrastructure/persistence/typehandler/DebitCreditTypeHandler.java\npackage com.example.accounting.infrastructure.persistence.typehandler;\n\nimport com.example.accounting.domain.model.account.DebitCreditType;\nimport org.apache.ibatis.type.BaseTypeHandler;\nimport org.apache.ibatis.type.JdbcType;\n\nimport java.sql.*;\n\npublic class DebitCreditTypeHandler extends BaseTypeHandler&lt;DebitCreditType&gt; {\n\n    @Override\n    public void setNonNullParameter(PreparedStatement ps, int i, DebitCreditType parameter, JdbcType jdbcType)\n            throws SQLException {\n        ps.setString(i, parameter.getDisplayName());\n    }\n\n    @Override\n    public DebitCreditType getNullableResult(ResultSet rs, String columnName) throws SQLException {\n        String value = rs.getString(columnName);\n        return value == null ? null : DebitCreditType.fromDisplayName(value);\n    }\n\n    @Override\n    public DebitCreditType getNullableResult(ResultSet rs, int columnIndex) throws SQLException {\n        String value = rs.getString(columnIndex);\n        return value == null ? null : DebitCreditType.fromDisplayName(value);\n    }\n\n    @Override\n    public DebitCreditType getNullableResult(CallableStatement cs, int columnIndex) throws SQLException {\n        String value = cs.getString(columnIndex);\n        return value == null ? null : DebitCreditType.fromDisplayName(value);\n    }\n}\n</code></pre> MyBatis XML Mapper <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.accounting.infrastructure.persistence.mapper.AccountMapper\"&gt;\n\n    &lt;resultMap id=\"AccountResultMap\" type=\"com.example.accounting.domain.model.account.Account\"&gt;\n        &lt;result property=\"accountCode\" column=\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"accountName\" column=\"\u52d8\u5b9a\u79d1\u76ee\u540d\"/&gt;\n        &lt;result property=\"accountShortName\" column=\"\u52d8\u5b9a\u79d1\u76ee\u7565\u540d\"/&gt;\n        &lt;result property=\"accountNameKana\" column=\"\u52d8\u5b9a\u79d1\u76ee\u30ab\u30ca\"/&gt;\n        &lt;result property=\"bsplType\" column=\"BSPL\u533a\u5206\"\n                typeHandler=\"com.example.accounting.infrastructure.persistence.typehandler.BSPLTypeHandler\"/&gt;\n        &lt;result property=\"debitCreditType\" column=\"\u8cb8\u501f\u533a\u5206\"\n                typeHandler=\"com.example.accounting.infrastructure.persistence.typehandler.DebitCreditTypeHandler\"/&gt;\n        &lt;result property=\"transactionElementType\" column=\"\u53d6\u5f15\u8981\u7d20\u533a\u5206\"\n                typeHandler=\"com.example.accounting.infrastructure.persistence.typehandler.TransactionElementTypeHandler\"/&gt;\n        &lt;result property=\"aggregationType\" column=\"\u96c6\u8a08\u533a\u5206\"\n                typeHandler=\"com.example.accounting.infrastructure.persistence.typehandler.AggregationTypeHandler\"/&gt;\n        &lt;result property=\"managementAccountingType\" column=\"\u7ba1\u7406\u4f1a\u8a08\u533a\u5206\"/&gt;\n        &lt;result property=\"expenseType\" column=\"\u8cbb\u7528\u533a\u5206\"/&gt;\n        &lt;result property=\"ledgerOutputType\" column=\"\u5143\u5e33\u51fa\u529b\u533a\u5206\"/&gt;\n        &lt;result property=\"subAccountType\" column=\"\u88dc\u52a9\u79d1\u76ee\u7a2e\u5225\"/&gt;\n        &lt;result property=\"consumptionTaxType\" column=\"\u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206\"/&gt;\n        &lt;result property=\"taxTransactionCode\" column=\"\u8ab2\u7a0e\u53d6\u5f15\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"dueDateManagementType\" column=\"\u671f\u65e5\u7ba1\u7406\u533a\u5206\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedBy\" column=\"\u66f4\u65b0\u8005\u540d\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;insert id=\"insert\" parameterType=\"com.example.accounting.domain.model.account.Account\"&gt;\n        INSERT INTO \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\" (\n            \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u52d8\u5b9a\u79d1\u76ee\u540d\", \"\u52d8\u5b9a\u79d1\u76ee\u7565\u540d\", \"\u52d8\u5b9a\u79d1\u76ee\u30ab\u30ca\",\n            \"BSPL\u533a\u5206\", \"\u8cb8\u501f\u533a\u5206\", \"\u53d6\u5f15\u8981\u7d20\u533a\u5206\", \"\u96c6\u8a08\u533a\u5206\",\n            \"\u7ba1\u7406\u4f1a\u8a08\u533a\u5206\", \"\u8cbb\u7528\u533a\u5206\", \"\u5143\u5e33\u51fa\u529b\u533a\u5206\", \"\u88dc\u52a9\u79d1\u76ee\u7a2e\u5225\",\n            \"\u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206\", \"\u8ab2\u7a0e\u53d6\u5f15\u30b3\u30fc\u30c9\", \"\u671f\u65e5\u7ba1\u7406\u533a\u5206\",\n            \"\u4f5c\u6210\u65e5\u6642\", \"\u66f4\u65b0\u65e5\u6642\", \"\u66f4\u65b0\u8005\u540d\"\n        ) VALUES (\n            #{accountCode}, #{accountName}, #{accountShortName}, #{accountNameKana},\n            #{bsplType, typeHandler=com.example.accounting.infrastructure.persistence.typehandler.BSPLTypeHandler}::BSPL\u533a\u5206,\n            #{debitCreditType, typeHandler=com.example.accounting.infrastructure.persistence.typehandler.DebitCreditTypeHandler}::\u8cb8\u501f\u533a\u5206,\n            #{transactionElementType, typeHandler=com.example.accounting.infrastructure.persistence.typehandler.TransactionElementTypeHandler}::\u53d6\u5f15\u8981\u7d20\u533a\u5206,\n            #{aggregationType, typeHandler=com.example.accounting.infrastructure.persistence.typehandler.AggregationTypeHandler}::\u96c6\u8a08\u533a\u5206,\n            #{managementAccountingType}, #{expenseType}, #{ledgerOutputType}, #{subAccountType},\n            #{consumptionTaxType}::\u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206, #{taxTransactionCode}, #{dueDateManagementType},\n            CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, #{updatedBy}\n        )\n    &lt;/insert&gt;\n\n    &lt;select id=\"findByCode\" resultMap=\"AccountResultMap\"&gt;\n        SELECT * FROM \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\"\n        WHERE \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\" = #{accountCode}\n    &lt;/select&gt;\n\n    &lt;select id=\"findAll\" resultMap=\"AccountResultMap\"&gt;\n        SELECT * FROM \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\"\n        ORDER BY \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\"\n    &lt;/select&gt;\n\n    &lt;select id=\"findByBSPLType\" resultMap=\"AccountResultMap\"&gt;\n        SELECT * FROM \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\"\n        WHERE \"BSPL\u533a\u5206\" = #{bsplType}::BSPL\u533a\u5206\n        ORDER BY \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\"\n    &lt;/select&gt;\n\n    &lt;delete id=\"deleteAll\"&gt;\n        TRUNCATE TABLE \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\" CASCADE\n    &lt;/delete&gt;\n&lt;/mapper&gt;\n</code></pre> \u52d8\u5b9a\u79d1\u76ee\u30ea\u30dd\u30b8\u30c8\u30ea\u5b9f\u88c5 <pre><code>// src/main/java/com/example/accounting/infrastructure/persistence/repository/AccountRepositoryImpl.java\npackage com.example.accounting.infrastructure.persistence.repository;\n\nimport com.example.accounting.application.port.out.AccountRepository;\nimport com.example.accounting.domain.model.account.Account;\nimport com.example.accounting.domain.model.account.BSPLType;\nimport com.example.accounting.domain.model.account.TransactionElementType;\nimport com.example.accounting.infrastructure.persistence.mapper.AccountMapper;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Repository;\n\nimport java.util.List;\nimport java.util.Optional;\n\n@Repository\n@RequiredArgsConstructor\npublic class AccountRepositoryImpl implements AccountRepository {\n\n    private final AccountMapper accountMapper;\n\n    @Override\n    public void save(Account account) {\n        accountMapper.insert(account);\n    }\n\n    @Override\n    public Optional&lt;Account&gt; findByCode(String accountCode) {\n        return accountMapper.findByCode(accountCode);\n    }\n\n    @Override\n    public List&lt;Account&gt; findAll() {\n        return accountMapper.findAll();\n    }\n\n    @Override\n    public List&lt;Account&gt; findByBSPLType(BSPLType bsplType) {\n        return accountMapper.findByBSPLType(bsplType.getDisplayName());\n    }\n\n    @Override\n    public List&lt;Account&gt; findByTransactionElementType(TransactionElementType type) {\n        throw new UnsupportedOperationException(\"Not implemented yet\");\n    }\n\n    @Override\n    public void update(Account account) {\n        accountMapper.update(account);\n    }\n\n    @Override\n    public void deleteAll() {\n        accountMapper.deleteAll();\n    }\n}\n</code></pre>"},{"location":"article/part3/chapter15/#152","title":"15.2 \u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf\u306e\u8a2d\u8a08","text":""},{"location":"article/part3/chapter15/#_8","title":"\u30c1\u30eb\u30c0\u9023\u7d50\u65b9\u5f0f\u306b\u3088\u308b\u968e\u5c64\u69cb\u9020","text":"<p>\u52d8\u5b9a\u79d1\u76ee\u306e\u968e\u5c64\u69cb\u9020\u3092\u300c\u30c1\u30eb\u30c0\uff08^\uff09\u9023\u7d50\u300d\u3067\u8868\u73fe\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001SQL \u306e LIKE \u691c\u7d22\u3067\u52b9\u7387\u7684\u306b\u968e\u5c64\u691c\u7d22\u304c\u3067\u304d\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part3/chapter15/#_9","title":"\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf\u306e\u30c7\u30fc\u30bf\u4f8b","text":"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9 \u52d8\u5b9a\u79d1\u76ee\u30d1\u30b9 11 11 11000 11^11000 11190 11^11000^11190 11110 11^11000^11190^11110 11120 11^11000^11190^11120 11130 11^11000^11190^11130"},{"location":"article/part3/chapter15/#_10","title":"\u968e\u5c64\u691c\u7d22\u306e\u30e1\u30ea\u30c3\u30c8","text":"<p>\u30c1\u30eb\u30c0\u9023\u7d50\u65b9\u5f0f\u3092\u4f7f\u3046\u3068\u3001LIKE \u691c\u7d22\u3067\u7279\u5b9a\u79d1\u76ee\u914d\u4e0b\u306e\u3059\u3079\u3066\u306e\u79d1\u76ee\u3092\u52b9\u7387\u7684\u306b\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002</p> <pre><code>-- \u73fe\u91d1\u53ca\u3073\u9810\u91d1\uff0811190\uff09\u914d\u4e0b\u306e\u79d1\u76ee\u6b8b\u9ad8\u3092\u96c6\u8a08\nSELECT SUM(r.\u79d1\u76ee\u6b8b\u9ad8)\nFROM \u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u30c6\u30fc\u30d6\u30eb r\nINNER JOIN \u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf o ON r.\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9 = o.\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\nWHERE o.\u52d8\u5b9a\u79d1\u76ee\u30d1\u30b9 LIKE '%11190%'\n</code></pre>"},{"location":"article/part3/chapter15/#_11","title":"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3","text":"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3SQL <pre><code>-- src/main/resources/db/migration/V003__create_account_structure.sql\n\n-- \u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf\nCREATE TABLE \"\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf\" (\n    \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(5) PRIMARY KEY REFERENCES \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\"(\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\"),\n    \"\u52d8\u5b9a\u79d1\u76ee\u30d1\u30b9\" VARCHAR(100) NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u66f4\u65b0\u8005\u540d\" VARCHAR(12)\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\uff08\u30d1\u30b9\u691c\u7d22\u7528\uff09\nCREATE INDEX idx_\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf_\u30d1\u30b9 ON \"\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf\"(\"\u52d8\u5b9a\u79d1\u76ee\u30d1\u30b9\");\n</code></pre>"},{"location":"article/part3/chapter15/#tdd_1","title":"TDD \u306b\u3088\u308b\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf\u306e\u5b9f\u88c5","text":""},{"location":"article/part3/chapter15/#red_1","title":"Red: \u5931\u6557\u3059\u308b\u30c6\u30b9\u30c8\u3092\u66f8\u304f","text":"\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30ea\u30dd\u30b8\u30c8\u30ea\u30c6\u30b9\u30c8 <pre><code>// src/test/java/com/example/accounting/infrastructure/persistence/repository/AccountStructureRepositoryTest.java\npackage com.example.accounting.infrastructure.persistence.repository;\n\nimport com.example.accounting.application.port.out.AccountRepository;\nimport com.example.accounting.application.port.out.AccountStructureRepository;\nimport com.example.accounting.domain.model.account.*;\nimport com.example.accounting.testsetup.BaseIntegrationTest;\nimport org.junit.jupiter.api.*;\nimport org.springframework.beans.factory.annotation.Autowired;\n\nimport java.util.List;\n\nimport static org.assertj.core.api.Assertions.*;\n\n@DisplayName(\"\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30ea\u30dd\u30b8\u30c8\u30ea\")\nclass AccountStructureRepositoryTest extends BaseIntegrationTest {\n\n    @Autowired\n    private AccountStructureRepository accountStructureRepository;\n\n    @Autowired\n    private AccountRepository accountRepository;\n\n    @BeforeEach\n    void setUp() {\n        accountStructureRepository.deleteAll();\n        accountRepository.deleteAll();\n        setupAccountMaster();\n    }\n\n    private void setupAccountMaster() {\n        // \u8cc7\u7523\u306e\u90e8\uff08\u898b\u51fa\u79d1\u76ee\uff09\n        accountRepository.save(createAccount(\"11\", \"(\u8cc7\u7523\u306e\u90e8\uff09\", AggregationType.HEADER));\n        // \u6d41\u52d5\u8cc7\u7523\uff08\u96c6\u8a08\u79d1\u76ee\uff09\n        accountRepository.save(createAccount(\"11000\", \"\u6d41\u52d5\u8cc7\u7523\", AggregationType.SUMMARY));\n        // \u73fe\u91d1\u53ca\u3073\u9810\u91d1\uff08\u96c6\u8a08\u79d1\u76ee\uff09\n        accountRepository.save(createAccount(\"11190\", \"\u73fe\u91d1\u53ca\u3073\u9810\u91d1\", AggregationType.SUMMARY));\n        // \u73fe\u91d1\uff08\u8a08\u4e0a\u79d1\u76ee\uff09\n        accountRepository.save(createAccount(\"11110\", \"\u73fe\u91d1\", AggregationType.POSTING));\n        // \u5f53\u5ea7\u9810\u91d1\uff08\u8a08\u4e0a\u79d1\u76ee\uff09\n        accountRepository.save(createAccount(\"11120\", \"\u5f53\u5ea7\u9810\u91d1\", AggregationType.POSTING));\n        // \u666e\u901a\u9810\u91d1\uff08\u8a08\u4e0a\u79d1\u76ee\uff09\n        accountRepository.save(createAccount(\"11130\", \"\u666e\u901a\u9810\u91d1\", AggregationType.POSTING));\n    }\n\n    private Account createAccount(String code, String name, AggregationType aggregationType) {\n        return Account.builder()\n                .accountCode(code)\n                .accountName(name)\n                .bsplType(BSPLType.BS)\n                .debitCreditType(DebitCreditType.DEBIT)\n                .transactionElementType(TransactionElementType.ASSET)\n                .aggregationType(aggregationType)\n                .build();\n    }\n\n    @Nested\n    @DisplayName(\"\u767b\u9332\")\n    class Registration {\n\n        @Test\n        @DisplayName(\"\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterAccountStructure() {\n            // Arrange\n            var structure = AccountStructure.builder()\n                    .accountCode(\"11\")\n                    .accountPath(\"11\")\n                    .build();\n\n            // Act\n            accountStructureRepository.save(structure);\n\n            // Assert\n            var result = accountStructureRepository.findByCode(\"11\");\n            assertThat(result).isPresent();\n            assertThat(result.get().getAccountPath()).isEqualTo(\"11\");\n        }\n\n        @Test\n        @DisplayName(\"\u968e\u5c64\u69cb\u9020\u3092\u6301\u3064\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterHierarchicalStructure() {\n            // Arrange: \u30eb\u30fc\u30c8\n            accountStructureRepository.save(AccountStructure.builder()\n                    .accountCode(\"11\").accountPath(\"11\").build());\n\n            // Arrange: \u7b2c2\u968e\u5c64\n            accountStructureRepository.save(AccountStructure.builder()\n                    .accountCode(\"11000\").accountPath(\"11^11000\").build());\n\n            // Arrange: \u7b2c3\u968e\u5c64\n            accountStructureRepository.save(AccountStructure.builder()\n                    .accountCode(\"11190\").accountPath(\"11^11000^11190\").build());\n\n            // Arrange: \u7b2c4\u968e\u5c64\uff08\u8a08\u4e0a\u79d1\u76ee\uff09\n            accountStructureRepository.save(AccountStructure.builder()\n                    .accountCode(\"11110\").accountPath(\"11^11000^11190^11110\").build());\n\n            // Act\n            var result = accountStructureRepository.findByCode(\"11110\");\n\n            // Assert\n            assertThat(result).isPresent();\n            assertThat(result.get().getAccountPath()).isEqualTo(\"11^11000^11190^11110\");\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u968e\u5c64\u691c\u7d22\")\n    class HierarchySearch {\n\n        @BeforeEach\n        void setUpStructures() {\n            accountStructureRepository.save(AccountStructure.builder()\n                    .accountCode(\"11\").accountPath(\"11\").build());\n            accountStructureRepository.save(AccountStructure.builder()\n                    .accountCode(\"11000\").accountPath(\"11^11000\").build());\n            accountStructureRepository.save(AccountStructure.builder()\n                    .accountCode(\"11190\").accountPath(\"11^11000^11190\").build());\n            accountStructureRepository.save(AccountStructure.builder()\n                    .accountCode(\"11110\").accountPath(\"11^11000^11190^11110\").build());\n            accountStructureRepository.save(AccountStructure.builder()\n                    .accountCode(\"11120\").accountPath(\"11^11000^11190^11120\").build());\n            accountStructureRepository.save(AccountStructure.builder()\n                    .accountCode(\"11130\").accountPath(\"11^11000^11190^11130\").build());\n        }\n\n        @Test\n        @DisplayName(\"\u73fe\u91d1\u53ca\u3073\u9810\u91d1\u914d\u4e0b\u306e\u79d1\u76ee\u3092\u691c\u7d22\u3067\u304d\u308b\")\n        void canFindChildrenOfCashAndDeposits() {\n            // Act\n            var results = accountStructureRepository.findByPathContaining(\"11190\");\n\n            // Assert\n            assertThat(results).hasSize(4); // 11190, 11110, 11120, 11130\n            assertThat(results).extracting(AccountStructure::getAccountCode)\n                    .containsExactlyInAnyOrder(\"11190\", \"11110\", \"11120\", \"11130\");\n        }\n\n        @Test\n        @DisplayName(\"\u6d41\u52d5\u8cc7\u7523\u914d\u4e0b\u306e\u5168\u79d1\u76ee\u3092\u691c\u7d22\u3067\u304d\u308b\")\n        void canFindAllChildrenOfCurrentAssets() {\n            // Act\n            var results = accountStructureRepository.findByPathContaining(\"11000\");\n\n            // Assert\n            assertThat(results).hasSize(5); // 11000, 11190, 11110, 11120, 11130\n        }\n    }\n}\n</code></pre>"},{"location":"article/part3/chapter15/#green_1","title":"Green: \u30c6\u30b9\u30c8\u3092\u901a\u3059\u5b9f\u88c5","text":""},{"location":"article/part3/chapter15/#_12","title":"\u30c9\u30e1\u30a4\u30f3\u5c64","text":"\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/accounting/domain/model/account/AccountStructure.java\npackage com.example.accounting.domain.model.account;\n\nimport lombok.*;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class AccountStructure {\n    private String accountCode;\n    private String accountPath;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n\n    /**\n     * \u30d1\u30b9\u306e\u6df1\u3055\uff08\u968e\u5c64\u30ec\u30d9\u30eb\uff09\u3092\u53d6\u5f97\n     */\n    public int getDepth() {\n        if (accountPath == null || accountPath.isEmpty()) {\n            return 0;\n        }\n        return accountPath.split(\"\\\\^\").length - 1;\n    }\n\n    /**\n     * \u89aa\u79d1\u76ee\u30b3\u30fc\u30c9\u3092\u53d6\u5f97\n     */\n    public String getParentCode() {\n        if (accountPath == null || !accountPath.contains(\"^\")) {\n            return null;\n        }\n        String[] parts = accountPath.split(\"\\\\^\");\n        if (parts.length &lt; 2) {\n            return null;\n        }\n        return parts[parts.length - 2];\n    }\n}\n</code></pre>"},{"location":"article/part3/chapter15/#output-port_1","title":"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff08Output Port\uff09","text":"\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30ea\u30dd\u30b8\u30c8\u30ea\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9 <pre><code>// src/main/java/com/example/accounting/application/port/out/AccountStructureRepository.java\npackage com.example.accounting.application.port.out;\n\nimport com.example.accounting.domain.model.account.AccountStructure;\n\nimport java.util.List;\nimport java.util.Optional;\n\n/**\n * \u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30ea\u30dd\u30b8\u30c8\u30ea\uff08Output Port\uff09\n */\npublic interface AccountStructureRepository {\n\n    void save(AccountStructure structure);\n\n    Optional&lt;AccountStructure&gt; findByCode(String accountCode);\n\n    List&lt;AccountStructure&gt; findAll();\n\n    List&lt;AccountStructure&gt; findByPathContaining(String pathSegment);\n\n    List&lt;AccountStructure&gt; findChildren(String parentCode);\n\n    void update(AccountStructure structure);\n\n    void deleteAll();\n}\n</code></pre>"},{"location":"article/part3/chapter15/#_13","title":"\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u5c64","text":"MyBatis XML Mapper <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.accounting.infrastructure.persistence.mapper.AccountStructureMapper\"&gt;\n\n    &lt;resultMap id=\"AccountStructureResultMap\" type=\"com.example.accounting.domain.model.account.AccountStructure\"&gt;\n        &lt;result property=\"accountCode\" column=\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"accountPath\" column=\"\u52d8\u5b9a\u79d1\u76ee\u30d1\u30b9\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedBy\" column=\"\u66f4\u65b0\u8005\u540d\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;insert id=\"insert\" parameterType=\"com.example.accounting.domain.model.account.AccountStructure\"&gt;\n        INSERT INTO \"\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf\" (\n            \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u52d8\u5b9a\u79d1\u76ee\u30d1\u30b9\", \"\u66f4\u65b0\u65e5\u6642\", \"\u66f4\u65b0\u8005\u540d\"\n        ) VALUES (\n            #{accountCode}, #{accountPath}, CURRENT_TIMESTAMP, #{updatedBy}\n        )\n    &lt;/insert&gt;\n\n    &lt;select id=\"findByCode\" resultMap=\"AccountStructureResultMap\"&gt;\n        SELECT * FROM \"\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf\"\n        WHERE \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\" = #{accountCode}\n    &lt;/select&gt;\n\n    &lt;select id=\"findAll\" resultMap=\"AccountStructureResultMap\"&gt;\n        SELECT * FROM \"\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf\"\n        ORDER BY \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\"\n    &lt;/select&gt;\n\n    &lt;select id=\"findByPathContaining\" resultMap=\"AccountStructureResultMap\"&gt;\n        SELECT * FROM \"\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf\"\n        WHERE \"\u52d8\u5b9a\u79d1\u76ee\u30d1\u30b9\" LIKE '%' || #{pathSegment} || '%'\n        ORDER BY \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\"\n    &lt;/select&gt;\n\n    &lt;select id=\"findChildren\" resultMap=\"AccountStructureResultMap\"&gt;\n        SELECT * FROM \"\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf\"\n        WHERE \"\u52d8\u5b9a\u79d1\u76ee\u30d1\u30b9\" LIKE #{parentCode} || '^%'\n        ORDER BY \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\"\n    &lt;/select&gt;\n\n    &lt;delete id=\"deleteAll\"&gt;\n        TRUNCATE TABLE \"\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf\" CASCADE\n    &lt;/delete&gt;\n&lt;/mapper&gt;\n</code></pre> \u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30ea\u30dd\u30b8\u30c8\u30ea\u5b9f\u88c5 <pre><code>// src/main/java/com/example/accounting/infrastructure/persistence/repository/AccountStructureRepositoryImpl.java\npackage com.example.accounting.infrastructure.persistence.repository;\n\nimport com.example.accounting.application.port.out.AccountStructureRepository;\nimport com.example.accounting.domain.model.account.AccountStructure;\nimport com.example.accounting.infrastructure.persistence.mapper.AccountStructureMapper;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Repository;\n\nimport java.util.List;\nimport java.util.Optional;\n\n@Repository\n@RequiredArgsConstructor\npublic class AccountStructureRepositoryImpl implements AccountStructureRepository {\n\n    private final AccountStructureMapper accountStructureMapper;\n\n    @Override\n    public void save(AccountStructure structure) {\n        accountStructureMapper.insert(structure);\n    }\n\n    @Override\n    public Optional&lt;AccountStructure&gt; findByCode(String accountCode) {\n        return accountStructureMapper.findByCode(accountCode);\n    }\n\n    @Override\n    public List&lt;AccountStructure&gt; findAll() {\n        return accountStructureMapper.findAll();\n    }\n\n    @Override\n    public List&lt;AccountStructure&gt; findByPathContaining(String pathSegment) {\n        return accountStructureMapper.findByPathContaining(pathSegment);\n    }\n\n    @Override\n    public List&lt;AccountStructure&gt; findChildren(String parentCode) {\n        return accountStructureMapper.findChildren(parentCode);\n    }\n\n    @Override\n    public void update(AccountStructure structure) {\n        accountStructureMapper.update(structure);\n    }\n\n    @Override\n    public void deleteAll() {\n        accountStructureMapper.deleteAll();\n    }\n}\n</code></pre>"},{"location":"article/part3/chapter15/#153","title":"15.3 \u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\u306e\u8a2d\u8a08","text":""},{"location":"article/part3/chapter15/#_14","title":"\u8ab2\u7a0e\u53d6\u5f15\u30b3\u30fc\u30c9\u30fb\u7a0e\u7387\u306e\u7ba1\u7406","text":"<p>\u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\u306f\u3001\u6d88\u8cbb\u7a0e\u306e\u7a0e\u7387\u60c5\u5831\u3092\u7ba1\u7406\u3059\u308b\u30de\u30b9\u30bf\u30c6\u30fc\u30d6\u30eb\u3067\u3059\u3002</p> \u8ab2\u7a0e\u53d6\u5f15\u30b3\u30fc\u30c9 \u8ab2\u7a0e\u53d6\u5f15\u540d \u7a0e\u7387 00 \u975e\u8ab2\u7a0e 0.000 08 \u8efd\u6e1b\u7a0e\u7387 0.080 10 \u6a19\u6e96\u7a0e\u7387 0.100"},{"location":"article/part3/chapter15/#tdd_2","title":"TDD \u306b\u3088\u308b\u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\u306e\u5b9f\u88c5","text":"\u8ab2\u7a0e\u53d6\u5f15\u30ea\u30dd\u30b8\u30c8\u30ea\u30c6\u30b9\u30c8 <pre><code>// src/test/java/com/example/accounting/infrastructure/persistence/repository/TaxTransactionRepositoryTest.java\npackage com.example.accounting.infrastructure.persistence.repository;\n\nimport com.example.accounting.application.port.out.TaxTransactionRepository;\nimport com.example.accounting.domain.model.tax.TaxTransaction;\nimport com.example.accounting.testsetup.BaseIntegrationTest;\nimport org.junit.jupiter.api.*;\nimport org.springframework.beans.factory.annotation.Autowired;\n\nimport java.math.BigDecimal;\n\nimport static org.assertj.core.api.Assertions.*;\n\n@DisplayName(\"\u8ab2\u7a0e\u53d6\u5f15\u30ea\u30dd\u30b8\u30c8\u30ea\")\nclass TaxTransactionRepositoryTest extends BaseIntegrationTest {\n\n    @Autowired\n    private TaxTransactionRepository taxTransactionRepository;\n\n    @BeforeEach\n    void setUp() {\n        taxTransactionRepository.deleteAll();\n    }\n\n    @Nested\n    @DisplayName(\"\u767b\u9332\")\n    class Registration {\n\n        @Test\n        @DisplayName(\"\u8ab2\u7a0e\u53d6\u5f15\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterTaxTransaction() {\n            // Arrange\n            var taxTransaction = TaxTransaction.builder()\n                    .taxCode(\"10\")\n                    .taxName(\"\u6a19\u6e96\u7a0e\u7387\")\n                    .taxRate(new BigDecimal(\"0.10\"))\n                    .build();\n\n            // Act\n            taxTransactionRepository.save(taxTransaction);\n\n            // Assert\n            var result = taxTransactionRepository.findByCode(\"10\");\n            assertThat(result).isPresent();\n            assertThat(result.get().getTaxName()).isEqualTo(\"\u6a19\u6e96\u7a0e\u7387\");\n            assertThat(result.get().getTaxRate()).isEqualByComparingTo(new BigDecimal(\"0.10\"));\n        }\n\n        @Test\n        @DisplayName(\"\u8efd\u6e1b\u7a0e\u7387\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterReducedTaxRate() {\n            // Arrange\n            var taxTransaction = TaxTransaction.builder()\n                    .taxCode(\"08\")\n                    .taxName(\"\u8efd\u6e1b\u7a0e\u7387\")\n                    .taxRate(new BigDecimal(\"0.08\"))\n                    .build();\n\n            // Act\n            taxTransactionRepository.save(taxTransaction);\n\n            // Assert\n            var result = taxTransactionRepository.findByCode(\"08\");\n            assertThat(result).isPresent();\n            assertThat(result.get().getTaxRate()).isEqualByComparingTo(new BigDecimal(\"0.08\"));\n        }\n\n        @Test\n        @DisplayName(\"\u975e\u8ab2\u7a0e\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterTaxExempt() {\n            // Arrange\n            var taxTransaction = TaxTransaction.builder()\n                    .taxCode(\"00\")\n                    .taxName(\"\u975e\u8ab2\u7a0e\")\n                    .taxRate(BigDecimal.ZERO)\n                    .build();\n\n            // Act\n            taxTransactionRepository.save(taxTransaction);\n\n            // Assert\n            var result = taxTransactionRepository.findByCode(\"00\");\n            assertThat(result).isPresent();\n            assertThat(result.get().getTaxRate()).isEqualByComparingTo(BigDecimal.ZERO);\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u6d88\u8cbb\u7a0e\u8a08\u7b97\")\n    class TaxCalculation {\n\n        @Test\n        @DisplayName(\"\u7a0e\u8fbc\u91d1\u984d\u3092\u8a08\u7b97\u3067\u304d\u308b\")\n        void canCalculateTaxIncludedAmount() {\n            // Arrange\n            var taxTransaction = TaxTransaction.builder()\n                    .taxCode(\"10\")\n                    .taxName(\"\u6a19\u6e96\u7a0e\u7387\")\n                    .taxRate(new BigDecimal(\"0.10\"))\n                    .build();\n\n            // Act\n            var amount = new BigDecimal(\"10000\");\n            var taxIncludedAmount = taxTransaction.calculateTaxIncludedAmount(amount);\n\n            // Assert\n            assertThat(taxIncludedAmount).isEqualByComparingTo(new BigDecimal(\"11000\"));\n        }\n\n        @Test\n        @DisplayName(\"\u6d88\u8cbb\u7a0e\u984d\u3092\u8a08\u7b97\u3067\u304d\u308b\")\n        void canCalculateTaxAmount() {\n            // Arrange\n            var taxTransaction = TaxTransaction.builder()\n                    .taxCode(\"10\")\n                    .taxName(\"\u6a19\u6e96\u7a0e\u7387\")\n                    .taxRate(new BigDecimal(\"0.10\"))\n                    .build();\n\n            // Act\n            var amount = new BigDecimal(\"10000\");\n            var taxAmount = taxTransaction.calculateTaxAmount(amount);\n\n            // Assert\n            assertThat(taxAmount).isEqualByComparingTo(new BigDecimal(\"1000\"));\n        }\n    }\n}\n</code></pre> \u8ab2\u7a0e\u53d6\u5f15\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/accounting/domain/model/tax/TaxTransaction.java\npackage com.example.accounting.domain.model.tax;\n\nimport lombok.*;\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class TaxTransaction {\n    private String taxCode;\n    private String taxName;\n    @Builder.Default\n    private BigDecimal taxRate = new BigDecimal(\"0.10\");\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n\n    /**\n     * \u7a0e\u8fbc\u91d1\u984d\u3092\u8a08\u7b97\n     */\n    public BigDecimal calculateTaxIncludedAmount(BigDecimal amount) {\n        return amount.add(amount.multiply(taxRate));\n    }\n\n    /**\n     * \u6d88\u8cbb\u7a0e\u984d\u3092\u8a08\u7b97\n     */\n    public BigDecimal calculateTaxAmount(BigDecimal amount) {\n        return amount.multiply(taxRate);\n    }\n}\n</code></pre> \u8ab2\u7a0e\u53d6\u5f15\u30ea\u30dd\u30b8\u30c8\u30ea\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9 <pre><code>// src/main/java/com/example/accounting/application/port/out/TaxTransactionRepository.java\npackage com.example.accounting.application.port.out;\n\nimport com.example.accounting.domain.model.tax.TaxTransaction;\n\nimport java.util.List;\nimport java.util.Optional;\n\n/**\n * \u8ab2\u7a0e\u53d6\u5f15\u30ea\u30dd\u30b8\u30c8\u30ea\uff08Output Port\uff09\n */\npublic interface TaxTransactionRepository {\n\n    void save(TaxTransaction taxTransaction);\n\n    Optional&lt;TaxTransaction&gt; findByCode(String taxCode);\n\n    List&lt;TaxTransaction&gt; findAll();\n\n    void update(TaxTransaction taxTransaction);\n\n    void deleteAll();\n}\n</code></pre> MyBatis XML Mapper <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.accounting.infrastructure.persistence.mapper.TaxTransactionMapper\"&gt;\n\n    &lt;resultMap id=\"TaxTransactionResultMap\" type=\"com.example.accounting.domain.model.tax.TaxTransaction\"&gt;\n        &lt;result property=\"taxCode\" column=\"\u8ab2\u7a0e\u53d6\u5f15\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"taxName\" column=\"\u8ab2\u7a0e\u53d6\u5f15\u540d\"/&gt;\n        &lt;result property=\"taxRate\" column=\"\u7a0e\u7387\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedBy\" column=\"\u66f4\u65b0\u8005\u540d\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;insert id=\"insert\" parameterType=\"com.example.accounting.domain.model.tax.TaxTransaction\"&gt;\n        INSERT INTO \"\u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\" (\n            \"\u8ab2\u7a0e\u53d6\u5f15\u30b3\u30fc\u30c9\", \"\u8ab2\u7a0e\u53d6\u5f15\u540d\", \"\u7a0e\u7387\", \"\u66f4\u65b0\u65e5\u6642\", \"\u66f4\u65b0\u8005\u540d\"\n        ) VALUES (\n            #{taxCode}, #{taxName}, #{taxRate}, CURRENT_TIMESTAMP, #{updatedBy}\n        )\n    &lt;/insert&gt;\n\n    &lt;select id=\"findByCode\" resultMap=\"TaxTransactionResultMap\"&gt;\n        SELECT * FROM \"\u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\"\n        WHERE \"\u8ab2\u7a0e\u53d6\u5f15\u30b3\u30fc\u30c9\" = #{taxCode}\n    &lt;/select&gt;\n\n    &lt;select id=\"findAll\" resultMap=\"TaxTransactionResultMap\"&gt;\n        SELECT * FROM \"\u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\"\n        ORDER BY \"\u8ab2\u7a0e\u53d6\u5f15\u30b3\u30fc\u30c9\"\n    &lt;/select&gt;\n\n    &lt;update id=\"update\" parameterType=\"com.example.accounting.domain.model.tax.TaxTransaction\"&gt;\n        UPDATE \"\u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\"\n        SET \"\u8ab2\u7a0e\u53d6\u5f15\u540d\" = #{taxName},\n            \"\u7a0e\u7387\" = #{taxRate},\n            \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP,\n            \"\u66f4\u65b0\u8005\u540d\" = #{updatedBy}\n        WHERE \"\u8ab2\u7a0e\u53d6\u5f15\u30b3\u30fc\u30c9\" = #{taxCode}\n    &lt;/update&gt;\n\n    &lt;delete id=\"deleteAll\"&gt;\n        TRUNCATE TABLE \"\u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\" CASCADE\n    &lt;/delete&gt;\n&lt;/mapper&gt;\n</code></pre>"},{"location":"article/part3/chapter15/#15_1","title":"\u7b2c15\u7ae0\u306e\u307e\u3068\u3081","text":""},{"location":"article/part3/chapter15/#_15","title":"\u4f5c\u6210\u3057\u305f\u30c6\u30fc\u30d6\u30eb","text":"\u30c6\u30fc\u30d6\u30eb\u540d \u8aac\u660e <code>\u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf</code> \u6d88\u8cbb\u7a0e\u306e\u7a0e\u7387\u60c5\u5831\u3092\u7ba1\u7406 <code>\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf</code> \u52d8\u5b9a\u79d1\u76ee\u306e\u57fa\u672c\u60c5\u5831\u3092\u7ba1\u7406 <code>\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf</code> \u52d8\u5b9a\u79d1\u76ee\u306e\u968e\u5c64\u69cb\u9020\u3092\u30c1\u30eb\u30c0\u9023\u7d50\u3067\u7ba1\u7406"},{"location":"article/part3/chapter15/#er_1","title":"ER\u56f3","text":""},{"location":"article/part3/chapter15/#_16","title":"\u8a2d\u8a08\u306e\u30dd\u30a4\u30f3\u30c8","text":"<ol> <li>ENUM \u578b\u306e\u6d3b\u7528: BSPL\u533a\u5206\u3001\u8cb8\u501f\u533a\u5206\u3001\u53d6\u5f15\u8981\u7d20\u533a\u5206\u3001\u96c6\u8a08\u533a\u5206\u3067\u578b\u5b89\u5168\u6027\u3092\u78ba\u4fdd</li> <li>\u65e5\u672c\u8a9e DB / \u82f1\u8a9e Java: \u30c6\u30fc\u30d6\u30eb\u30fb\u30ab\u30e9\u30e0\u306f\u65e5\u672c\u8a9e\u3001Java \u30b3\u30fc\u30c9\u306f\u82f1\u8a9e\u3067\u7d71\u4e00</li> <li>TypeHandler: Java Enum \u3068\u65e5\u672c\u8a9e ENUM \u5024\u306e\u5909\u63db\u3092 MyBatis TypeHandler \u3067\u5b9f\u88c5</li> <li>\u30c1\u30eb\u30c0\u9023\u7d50\u65b9\u5f0f: \u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf\u3067\u968e\u5c64\u69cb\u9020\u3092\u8868\u73fe\u3057\u3001LIKE \u691c\u7d22\u3067\u52b9\u7387\u7684\u306b\u968e\u5c64\u691c\u7d22</li> <li>\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3: \u30c9\u30e1\u30a4\u30f3\u5c64\u304c\u30a4\u30f3\u30d5\u30e9\u306b\u4f9d\u5b58\u3057\u306a\u3044\u8a2d\u8a08</li> </ol>"},{"location":"article/part3/chapter15/#_17","title":"\u547d\u540d\u898f\u5247","text":"\u8981\u7d20 \u8a00\u8a9e \u4f8b \u30c6\u30fc\u30d6\u30eb\u540d \u65e5\u672c\u8a9e <code>\"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\"</code>, <code>\"\u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\"</code> \u30ab\u30e9\u30e0\u540d \u65e5\u672c\u8a9e <code>\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\"</code>, <code>\"\u52d8\u5b9a\u79d1\u76ee\u540d\"</code> ENUM \u578b \u65e5\u672c\u8a9e <code>BSPL\u533a\u5206</code>, <code>\u8cb8\u501f\u533a\u5206</code> ENUM \u5024 \u65e5\u672c\u8a9e <code>'BS'</code>, <code>'\u501f\u65b9'</code> Java \u30af\u30e9\u30b9\u540d \u82f1\u8a9e <code>Account</code>, <code>AccountStructure</code> Java \u30d5\u30a3\u30fc\u30eb\u30c9\u540d \u82f1\u8a9e <code>accountCode</code>, <code>accountName</code> MyBatis resultMap \u65e5\u672c\u8a9e \u2194 \u82f1\u8a9e <code>column=\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\" property=\"accountCode\"</code>"},{"location":"article/part3/chapter15/#_18","title":"\u6b21\u7ae0\u306e\u4e88\u544a","text":"<p>\u7b2c16\u7ae0\u3067\u306f\u3001\u4ed5\u8a33\u30c6\u30fc\u30d6\u30eb\u306e\u8a2d\u8a08\u306b\u9032\u307f\u307e\u3059\u3002\u8907\u5f0f\u7c3f\u8a18\u306e\u57fa\u672c\u69cb\u9020\u3067\u3042\u308b\u300c\u501f\u65b9\u30fb\u8cb8\u65b9\u300d\u306e\u4ed5\u8a33\u30c7\u30fc\u30bf\u3092 TDD \u3067\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\u3002</p>"},{"location":"article/part3/chapter16/","title":"\u7b2c16\u7ae0\uff1a\u4ed5\u8a33\u306e\u8a2d\u8a08","text":"<p>\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u6838\u5fc3\u90e8\u5206\u3067\u3042\u308b\u300c\u4ed5\u8a33\u51e6\u7406\u300d\u3092 TDD \u3067\u8a2d\u8a08\u3057\u3066\u3044\u304d\u307e\u3059\u3002\u8907\u5f0f\u7c3f\u8a18\u306e\u539f\u5247\u306b\u57fa\u3065\u304d\u3001\u4ed5\u8a33\u30c7\u30fc\u30bf\u306e\u767b\u9332\u30fb\u7ba1\u7406\u3092\u5b9f\u73fe\u3059\u308b\u30c6\u30fc\u30d6\u30eb\u69cb\u9020\u3092\u8a2d\u8a08\u3057\u307e\u3059\u3002</p>"},{"location":"article/part3/chapter16/#161","title":"16.1 \u4ed5\u8a33\u30c6\u30fc\u30d6\u30eb\u306e\u8a2d\u8a08","text":""},{"location":"article/part3/chapter16/#_1","title":"\u8907\u5f0f\u7c3f\u8a18\u3068\u4ed5\u8a33\u306e\u6982\u5ff5","text":"<p>\u8907\u5f0f\u7c3f\u8a18\u306f\u3001\u3059\u3079\u3066\u306e\u53d6\u5f15\u3092\u300c\u501f\u65b9\uff08\u304b\u308a\u304b\u305f\uff09\u300d\u3068\u300c\u8cb8\u65b9\uff08\u304b\u3057\u304b\u305f\uff09\u300d\u306e2\u3064\u306e\u5074\u9762\u304b\u3089\u8a18\u9332\u3059\u308b\u65b9\u5f0f\u3067\u3059\u3002</p> <p></p>"},{"location":"article/part3/chapter16/#_2","title":"\u4ed5\u8a33\u306e\u5177\u4f53\u4f8b","text":"<p>\u5546\u54c1\u3092\u73fe\u91d1\u3067\u8ca9\u58f2\u3057\u305f\u5834\u5408\u306e\u4ed5\u8a33\uff1a</p> \u501f\u65b9\uff08Debit\uff09 \u8cb8\u65b9\uff08Credit\uff09 \u73fe\u91d1 100,000\u5186 \u58f2\u4e0a 100,000\u5186 <p>\u58f2\u639b\u91d1\u3092\u73fe\u91d1\u3068\u53d7\u53d6\u624b\u5f62\u3067\u56de\u53ce\u3057\u305f\u5834\u5408\u306e\u4ed5\u8a33\uff08\u8907\u5408\u4ed5\u8a33\uff09\uff1a</p> \u501f\u65b9\uff08Debit\uff09 \u8cb8\u65b9\uff08Credit\uff09 \u73fe\u91d1 80,000\u5186 \u58f2\u639b\u91d1 100,000\u5186 \u53d7\u53d6\u624b\u5f62 20,000\u5186"},{"location":"article/part3/chapter16/#_3","title":"\u4ed5\u8a33\u51e6\u7406\u306e\u6d41\u308c","text":""},{"location":"article/part3/chapter16/#_4","title":"\u4ed5\u8a33\u30c6\u30fc\u30d6\u30eb\u306e\u9805\u76ee\u8a2d\u8a08","text":"\u9805\u76ee \u8aac\u660e \u4ed5\u8a33\u4f1d\u7968\u756a\u53f7 \u4ed5\u8a33\u3092\u4e00\u610f\u306b\u8b58\u5225\u3059\u308b\u30ad\u30fc \u8d77\u7968\u65e5 \u4f1a\u8a08\u4e0a\u306e\u53d6\u5f15\u767a\u751f\u65e5 \u5165\u529b\u65e5 \u30b7\u30b9\u30c6\u30e0\u3078\u306e\u767b\u9332\u65e5 \u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0 \u6c7a\u7b97\u6574\u7406\u4ed5\u8a33\u304b\u3069\u3046\u304b\uff080:\u901a\u5e38\u30011:\u6c7a\u7b97\uff09 \u5358\u632f\u30d5\u30e9\u30b0 \u5358\u4e00\u4ed5\u8a33\u304b\u8907\u5408\u4ed5\u8a33\u304b\uff080:\u8907\u5408\u30011:\u5358\u4e00\uff09 \u4ed5\u8a33\u4f1d\u7968\u533a\u5206 \u4ed5\u8a33\u306e\u7a2e\u985e\uff08\u901a\u5e38/\u6c7a\u7b97/\u81ea\u52d5/\u632f\u66ff\uff09 \u5b9a\u671f\u8a08\u4e0a\u30d5\u30e9\u30b0 \u5b9a\u671f\u7684\u306a\u8a08\u4e0a\u304b\u5426\u304b \u793e\u54e1\u30b3\u30fc\u30c9 \u8d77\u7968\u62c5\u5f53\u8005 \u90e8\u9580\u30b3\u30fc\u30c9 \u6240\u5c5e\u90e8\u9580 \u8d64\u4f1d\u30d5\u30e9\u30b0 \u8d64\u4f1d\uff08\u53d6\u6d88\uff09\u304b\u3069\u3046\u304b\uff080:\u9ed2\u4f1d\u30011:\u8d64\u4f1d\uff09 \u8d64\u9ed2\u4f1d\u7968\u756a\u53f7 \u95a2\u9023\u3059\u308b\u8d64\u9ed2\u4f1d\u7968\u306e\u756a\u53f7"},{"location":"article/part3/chapter16/#er","title":"\u4ed5\u8a33\u30c6\u30fc\u30d6\u30eb\u306eER\u56f3","text":""},{"location":"article/part3/chapter16/#_5","title":"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff1a\u4ed5\u8a33\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210","text":"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3SQL <pre><code>-- src/main/resources/db/migration/V006__create_journal_tables.sql\n\n-- \u4ed5\u8a33\u4f1d\u7968\u533a\u5206\nCREATE TYPE \u4ed5\u8a33\u4f1d\u7968\u533a\u5206 AS ENUM ('\u901a\u5e38', '\u6c7a\u7b97', '\u81ea\u52d5', '\u632f\u66ff');\n\n-- \u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206\nCREATE TYPE \u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206 AS ENUM ('\u501f\u65b9', '\u8cb8\u65b9');\n\n-- \u6d88\u8cbb\u7a0e\u533a\u5206\uff08\u4ed5\u8a33\u7528\uff09\nCREATE TYPE \u6d88\u8cbb\u7a0e\u533a\u5206 AS ENUM ('\u8ab2\u7a0e', '\u975e\u8ab2\u7a0e', '\u514d\u7a0e', '\u4e0d\u8ab2\u7a0e', '\u5bfe\u8c61\u5916');\n\n-- \u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206\uff08\u4ed5\u8a33\u7528\uff09\nCREATE TYPE \u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206 AS ENUM ('\u5916\u7a0e', '\u5185\u7a0e', '\u7a0e\u306a\u3057');\n\n-- \u4ed5\u8a33\u30d8\u30c3\u30c0\nCREATE TABLE \"\u4ed5\u8a33\" (\n    \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\" VARCHAR(10) PRIMARY KEY,\n    \"\u8d77\u7968\u65e5\" DATE NOT NULL,\n    \"\u5165\u529b\u65e5\" DATE NOT NULL DEFAULT CURRENT_DATE,\n    \"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\" SMALLINT DEFAULT 0 NOT NULL,\n    \"\u5358\u632f\u30d5\u30e9\u30b0\" SMALLINT DEFAULT 0 NOT NULL,\n    \"\u4ed5\u8a33\u4f1d\u7968\u533a\u5206\" \u4ed5\u8a33\u4f1d\u7968\u533a\u5206 DEFAULT '\u901a\u5e38' NOT NULL,\n    \"\u5b9a\u671f\u8a08\u4e0a\u30d5\u30e9\u30b0\" SMALLINT DEFAULT 0 NOT NULL,\n    \"\u793e\u54e1\u30b3\u30fc\u30c9\" VARCHAR(10),\n    \"\u90e8\u9580\u30b3\u30fc\u30c9\" VARCHAR(5),\n    \"\u8d64\u4f1d\u30d5\u30e9\u30b0\" SMALLINT DEFAULT 0 NOT NULL,\n    \"\u8d64\u9ed2\u4f1d\u7968\u756a\u53f7\" INTEGER,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"fk_\u4ed5\u8a33_\u90e8\u9580\"\n        FOREIGN KEY (\"\u90e8\u9580\u30b3\u30fc\u30c9\") REFERENCES \"\u90e8\u9580\u30de\u30b9\u30bf\"(\"\u90e8\u9580\u30b3\u30fc\u30c9\")\n);\n\n-- \u4ed5\u8a33\u660e\u7d30\nCREATE TABLE \"\u4ed5\u8a33\u660e\u7d30\" (\n    \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\" VARCHAR(10) NOT NULL,\n    \"\u4ed5\u8a33\u884c\u756a\u53f7\" SMALLINT NOT NULL,\n    \"\u884c\u6458\u8981\" VARCHAR(1000),\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    PRIMARY KEY (\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u756a\u53f7\"),\n    CONSTRAINT \"fk_\u4ed5\u8a33\u660e\u7d30_\u4ed5\u8a33\"\n        FOREIGN KEY (\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\") REFERENCES \"\u4ed5\u8a33\"(\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\") ON DELETE CASCADE\n);\n\n-- \u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\nCREATE TABLE \"\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\" (\n    \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\" VARCHAR(10) NOT NULL,\n    \"\u4ed5\u8a33\u884c\u756a\u53f7\" SMALLINT NOT NULL,\n    \"\u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206\" \u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206 NOT NULL,\n    \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(5) NOT NULL,\n    \"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(10),\n    \"\u90e8\u9580\u30b3\u30fc\u30c9\" VARCHAR(5),\n    \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9\" VARCHAR(10),\n    \"\u4ed5\u8a33\u91d1\u984d\" DECIMAL(14,2) NOT NULL,\n    \"\u901a\u8ca8\u30b3\u30fc\u30c9\" VARCHAR(3) DEFAULT 'JPY',\n    \"\u70ba\u66ff\u30ec\u30fc\u30c8\" DECIMAL(8,2) DEFAULT 1.00,\n    \"\u57fa\u8ef8\u63db\u7b97\u4ed5\u8a33\u91d1\u984d\" DECIMAL(14,2),\n    \"\u6d88\u8cbb\u7a0e\u533a\u5206\" \u6d88\u8cbb\u7a0e\u533a\u5206 DEFAULT '\u8ab2\u7a0e',\n    \"\u6d88\u8cbb\u7a0e\u7387\" SMALLINT DEFAULT 10,\n    \"\u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206\" \u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206 DEFAULT '\u5916\u7a0e',\n    \"\u671f\u65e5\" DATE,\n    \"\u8cc7\u91d1\u7e70\u30d5\u30e9\u30b0\" SMALLINT DEFAULT 0,\n    \"\u30bb\u30b0\u30e1\u30f3\u30c8\u30b3\u30fc\u30c9\" VARCHAR(10),\n    \"\u76f8\u624b\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(5),\n    \"\u76f8\u624b\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(10),\n    \"\u4ed8\u7b8b\u30b3\u30fc\u30c9\" VARCHAR(1),\n    \"\u4ed8\u7b8b\u5185\u5bb9\" VARCHAR(60),\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    PRIMARY KEY (\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206\"),\n    CONSTRAINT \"fk_\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30_\u4ed5\u8a33\u660e\u7d30\"\n        FOREIGN KEY (\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u756a\u53f7\")\n        REFERENCES \"\u4ed5\u8a33\u660e\u7d30\"(\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u756a\u53f7\") ON DELETE CASCADE,\n    CONSTRAINT \"fk_\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30_\u52d8\u5b9a\u79d1\u76ee\"\n        FOREIGN KEY (\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\") REFERENCES \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\"(\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"fk_\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30_\u90e8\u9580\"\n        FOREIGN KEY (\"\u90e8\u9580\u30b3\u30fc\u30c9\") REFERENCES \"\u90e8\u9580\u30de\u30b9\u30bf\"(\"\u90e8\u9580\u30b3\u30fc\u30c9\")\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"idx_\u4ed5\u8a33_\u8d77\u7968\u65e5\" ON \"\u4ed5\u8a33\"(\"\u8d77\u7968\u65e5\");\nCREATE INDEX \"idx_\u4ed5\u8a33_\u90e8\u9580\u30b3\u30fc\u30c9\" ON \"\u4ed5\u8a33\"(\"\u90e8\u9580\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u4ed5\u8a33_\u4ed5\u8a33\u4f1d\u7968\u533a\u5206\" ON \"\u4ed5\u8a33\"(\"\u4ed5\u8a33\u4f1d\u7968\u533a\u5206\");\nCREATE INDEX \"idx_\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30_\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\" ON \"\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\"(\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30_\u90e8\u9580\u30b3\u30fc\u30c9\" ON \"\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\"(\"\u90e8\u9580\u30b3\u30fc\u30c9\");\n</code></pre> \u8cb8\u501f\u30d0\u30e9\u30f3\u30b9\u30c1\u30a7\u30c3\u30af\u95a2\u6570 <pre><code>-- \u8cb8\u501f\u30d0\u30e9\u30f3\u30b9\u30c1\u30a7\u30c3\u30af\u95a2\u6570\nCREATE OR REPLACE FUNCTION check_journal_balance()\nRETURNS TRIGGER AS $$\nDECLARE\n    debit_total DECIMAL(14,2);\n    credit_total DECIMAL(14,2);\nBEGIN\n    -- \u501f\u65b9\u5408\u8a08\u3092\u8a08\u7b97\n    SELECT COALESCE(SUM(\"\u4ed5\u8a33\u91d1\u984d\"), 0) INTO debit_total\n    FROM \"\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\"\n    WHERE \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\" = NEW.\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\"\n    AND \"\u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206\" = '\u501f\u65b9';\n\n    -- \u8cb8\u65b9\u5408\u8a08\u3092\u8a08\u7b97\n    SELECT COALESCE(SUM(\"\u4ed5\u8a33\u91d1\u984d\"), 0) INTO credit_total\n    FROM \"\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\"\n    WHERE \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\" = NEW.\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\"\n    AND \"\u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206\" = '\u8cb8\u65b9';\n\n    -- \u8cb8\u501f\u4e00\u81f4\u30c1\u30a7\u30c3\u30af\uff08\u30c8\u30ea\u30ac\u30fc\u5185\u3067\u306f\u8b66\u544a\u306e\u307f\u3001\u30a2\u30d7\u30ea\u5074\u3067\u5236\u5fa1\uff09\n    IF debit_total &lt;&gt; credit_total THEN\n        RAISE WARNING '\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7 % \u306e\u8cb8\u501f\u304c\u4e00\u81f4\u3057\u3066\u3044\u307e\u305b\u3093: \u501f\u65b9=%, \u8cb8\u65b9=%',\n            NEW.\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", debit_total, credit_total;\n    END IF;\n\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- \u8cb8\u501f\u30d0\u30e9\u30f3\u30b9\u30c1\u30a7\u30c3\u30af\u30c8\u30ea\u30ac\u30fc\uff08\u633f\u5165\u30fb\u66f4\u65b0\u6642\uff09\nCREATE TRIGGER \"trg_check_journal_balance\"\nAFTER INSERT OR UPDATE ON \"\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\"\nFOR EACH ROW\nEXECUTE FUNCTION check_journal_balance();\n</code></pre>"},{"location":"article/part3/chapter16/#162","title":"16.2 \u4ed5\u8a33\u660e\u7d30\u306e\u8a2d\u8a08","text":""},{"location":"article/part3/chapter16/#_6","title":"\u4ed5\u8a33\u660e\u7d30\u306e\u5f79\u5272","text":"<p>\u4ed5\u8a33\u660e\u7d30\u306f\u3001\u4ed5\u8a33\u4f1d\u7968\u306e\u884c\u5358\u4f4d\u306e\u60c5\u5831\u3092\u7ba1\u7406\u3057\u307e\u3059\u30021\u3064\u306e\u4ed5\u8a33\u4f1d\u7968\u306b\u8907\u6570\u306e\u660e\u7d30\u884c\u3092\u6301\u3064\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> \u9805\u76ee \u8aac\u660e \u4ed5\u8a33\u4f1d\u7968\u756a\u53f7 \u89aa\u3068\u306a\u308b\u4ed5\u8a33\u4f1d\u7968\u306e\u756a\u53f7\uff08\u5916\u90e8\u30ad\u30fc\uff09 \u4ed5\u8a33\u884c\u756a\u53f7 \u660e\u7d30\u884c\u306e\u9023\u756a\uff081\u304b\u3089\u59cb\u307e\u308b\uff09 \u884c\u6458\u8981 \u305d\u306e\u884c\u306e\u53d6\u5f15\u5185\u5bb9\u306e\u8aac\u660e\uff08\u6700\u59271000\u6587\u5b57\uff09"},{"location":"article/part3/chapter16/#_7","title":"\u5358\u4e00\u4ed5\u8a33\u3068\u8907\u5408\u4ed5\u8a33","text":""},{"location":"article/part3/chapter16/#163","title":"16.3 \u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\u306e\u8a2d\u8a08","text":""},{"location":"article/part3/chapter16/#_8","title":"\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\u306e\u9805\u76ee","text":"<p>\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\u306f\u3001\u501f\u65b9\u30fb\u8cb8\u65b9\u305d\u308c\u305e\u308c\u306e\u8a73\u7d30\u60c5\u5831\u3092\u7ba1\u7406\u3059\u308b\u6700\u3082\u7c92\u5ea6\u306e\u7d30\u304b\u3044\u30c6\u30fc\u30d6\u30eb\u3067\u3059\u3002</p>"},{"location":"article/part3/chapter16/#_9","title":"\u57fa\u672c\u60c5\u5831","text":"\u9805\u76ee \u8aac\u660e \u4ed5\u8a33\u4f1d\u7968\u756a\u53f7 \u89aa\u3068\u306a\u308b\u4ed5\u8a33\u4f1d\u7968\u306e\u756a\u53f7 \u4ed5\u8a33\u884c\u756a\u53f7 \u89aa\u3068\u306a\u308b\u4ed5\u8a33\u660e\u7d30\u306e\u884c\u756a\u53f7 \u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206 \u501f\u65b9/\u8cb8\u65b9\u306e\u533a\u5206 \u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9 \u4f7f\u7528\u3059\u308b\u52d8\u5b9a\u79d1\u76ee \u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9 \u88dc\u52a9\u79d1\u76ee\uff08\u5f97\u610f\u5148\u3001\u4ed5\u5165\u5148\u306a\u3069\uff09 \u4ed5\u8a33\u91d1\u984d \u53d6\u5f15\u91d1\u984d"},{"location":"article/part3/chapter16/#_10","title":"\u591a\u901a\u8ca8\u5bfe\u5fdc","text":"\u9805\u76ee \u8aac\u660e \u901a\u8ca8\u30b3\u30fc\u30c9 \u53d6\u5f15\u901a\u8ca8\uff08\u30c7\u30d5\u30a9\u30eb\u30c8: JPY\uff09 \u70ba\u66ff\u30ec\u30fc\u30c8 \u9069\u7528\u70ba\u66ff\u30ec\u30fc\u30c8 \u57fa\u8ef8\u63db\u7b97\u4ed5\u8a33\u91d1\u984d \u57fa\u8ef8\u901a\u8ca8\uff08\u5186\uff09\u63db\u7b97\u5f8c\u306e\u91d1\u984d"},{"location":"article/part3/chapter16/#_11","title":"\u7ba1\u7406\u4f1a\u8a08\u60c5\u5831","text":"\u9805\u76ee \u8aac\u660e \u90e8\u9580\u30b3\u30fc\u30c9 \u914d\u8ce6\u5148\u90e8\u9580 \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9 \u95a2\u9023\u30d7\u30ed\u30b8\u30a7\u30af\u30c8 \u30bb\u30b0\u30e1\u30f3\u30c8\u30b3\u30fc\u30c9 \u30bb\u30b0\u30e1\u30f3\u30c8\u60c5\u5831"},{"location":"article/part3/chapter16/#_12","title":"\u6d88\u8cbb\u7a0e\u60c5\u5831","text":"\u9805\u76ee \u8aac\u660e \u6d88\u8cbb\u7a0e\u533a\u5206 \u8ab2\u7a0e/\u975e\u8ab2\u7a0e/\u514d\u7a0e/\u4e0d\u8ab2\u7a0e/\u5bfe\u8c61\u5916 \u6d88\u8cbb\u7a0e\u7387 \u9069\u7528\u7a0e\u7387\uff0810, 8 \u306a\u3069\uff09 \u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206 \u5916\u7a0e/\u5185\u7a0e/\u7a0e\u306a\u3057"},{"location":"article/part3/chapter16/#_13","title":"\u305d\u306e\u4ed6","text":"\u9805\u76ee \u8aac\u660e \u671f\u65e5 \u652f\u6255\u671f\u65e5\u30fb\u5165\u91d1\u671f\u65e5 \u8cc7\u91d1\u7e70\u30d5\u30e9\u30b0 \u8cc7\u91d1\u7e70\u8868\u3078\u306e\u8a08\u4e0a\u5bfe\u8c61\u304b \u76f8\u624b\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9 \u76f8\u624b\u52d8\u5b9a\u79d1\u76ee\uff08\u5143\u5e33\u8868\u793a\u7528\uff09 \u76f8\u624b\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9 \u76f8\u624b\u88dc\u52a9\u79d1\u76ee \u4ed8\u7b8b\u30b3\u30fc\u30c9 \u4ed8\u7b8b\u306e\u7a2e\u985e \u4ed8\u7b8b\u5185\u5bb9 \u4ed8\u7b8b\u306e\u5185\u5bb9\uff08\u30e1\u30e2\uff09"},{"location":"article/part3/chapter16/#tdd","title":"TDD \u306b\u3088\u308b\u4ed5\u8a33\u30c6\u30fc\u30d6\u30eb\u306e\u5b9f\u88c5","text":""},{"location":"article/part3/chapter16/#enum","title":"\u30c9\u30e1\u30a4\u30f3\u5c64\uff1aEnum\u5b9a\u7fa9","text":"\u4ed5\u8a33\u4f1d\u7968\u533a\u5206 Enum <pre><code>// src/main/java/com/example/accounting/domain/model/journal/JournalVoucherType.java\npackage com.example.accounting.domain.model.journal;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum JournalVoucherType {\n    NORMAL(\"\u901a\u5e38\"),\n    CLOSING(\"\u6c7a\u7b97\"),\n    AUTO(\"\u81ea\u52d5\"),\n    TRANSFER(\"\u632f\u66ff\");\n\n    private final String displayName;\n\n    public static JournalVoucherType fromDisplayName(String displayName) {\n        for (JournalVoucherType type : values()) {\n            if (type.displayName.equals(displayName)) {\n                return type;\n            }\n        }\n        throw new IllegalArgumentException(\"\u4e0d\u6b63\u306a\u4ed5\u8a33\u4f1d\u7968\u533a\u5206: \" + displayName);\n    }\n}\n</code></pre> \u6d88\u8cbb\u7a0e\u533a\u5206 Enum <pre><code>// src/main/java/com/example/accounting/domain/model/journal/TaxType.java\npackage com.example.accounting.domain.model.journal;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum TaxType {\n    TAXABLE(\"\u8ab2\u7a0e\"),\n    NON_TAXABLE(\"\u975e\u8ab2\u7a0e\"),\n    TAX_EXEMPT(\"\u514d\u7a0e\"),\n    NOT_TAXABLE(\"\u4e0d\u8ab2\u7a0e\"),\n    OUT_OF_SCOPE(\"\u5bfe\u8c61\u5916\");\n\n    private final String displayName;\n\n    public static TaxType fromDisplayName(String displayName) {\n        for (TaxType type : values()) {\n            if (type.displayName.equals(displayName)) {\n                return type;\n            }\n        }\n        throw new IllegalArgumentException(\"\u4e0d\u6b63\u306a\u6d88\u8cbb\u7a0e\u533a\u5206: \" + displayName);\n    }\n}\n</code></pre> \u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206 Enum <pre><code>// src/main/java/com/example/accounting/domain/model/journal/TaxCalculationType.java\npackage com.example.accounting.domain.model.journal;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum TaxCalculationType {\n    EXCLUSIVE(\"\u5916\u7a0e\"),\n    INCLUSIVE(\"\u5185\u7a0e\"),\n    NO_TAX(\"\u7a0e\u306a\u3057\");\n\n    private final String displayName;\n\n    public static TaxCalculationType fromDisplayName(String displayName) {\n        for (TaxCalculationType type : values()) {\n            if (type.displayName.equals(displayName)) {\n                return type;\n            }\n        }\n        throw new IllegalArgumentException(\"\u4e0d\u6b63\u306a\u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206: \" + displayName);\n    }\n}\n</code></pre>"},{"location":"article/part3/chapter16/#_14","title":"\u30c9\u30e1\u30a4\u30f3\u5c64\uff1a\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3","text":"\u4ed5\u8a33\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/accounting/domain/model/journal/Journal.java\npackage com.example.accounting.domain.model.journal;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Journal {\n    private String journalVoucherNumber;      // \u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\n    private LocalDate postingDate;            // \u8d77\u7968\u65e5\n    private LocalDate entryDate;              // \u5165\u529b\u65e5\n    private Boolean closingJournalFlag;       // \u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\n    private Boolean singleEntryFlag;          // \u5358\u632f\u30d5\u30e9\u30b0\n    private JournalVoucherType voucherType;   // \u4ed5\u8a33\u4f1d\u7968\u533a\u5206\n    private Boolean periodicPostingFlag;      // \u5b9a\u671f\u8a08\u4e0a\u30d5\u30e9\u30b0\n    private String employeeCode;              // \u793e\u54e1\u30b3\u30fc\u30c9\n    private String departmentCode;            // \u90e8\u9580\u30b3\u30fc\u30c9\n    private Boolean redSlipFlag;              // \u8d64\u4f1d\u30d5\u30e9\u30b0\n    private Integer redBlackVoucherNumber;    // \u8d64\u9ed2\u4f1d\u7968\u756a\u53f7\n    private LocalDateTime createdAt;          // \u4f5c\u6210\u65e5\u6642\n    private LocalDateTime updatedAt;          // \u66f4\u65b0\u65e5\u6642\n\n    // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n    @Builder.Default\n    private List&lt;JournalDetail&gt; details = new ArrayList&lt;&gt;();\n\n    /**\n     * \u8cb8\u501f\u30d0\u30e9\u30f3\u30b9\u30c1\u30a7\u30c3\u30af\n     * @return \u501f\u65b9\u5408\u8a08\u3068\u8cb8\u65b9\u5408\u8a08\u304c\u4e00\u81f4\u3059\u308b\u5834\u5408 true\n     */\n    public boolean isBalanced() {\n        BigDecimal debitTotal = details.stream()\n            .flatMap(d -&gt; d.getDebitCreditDetails().stream())\n            .filter(dc -&gt; dc.getDebitCreditType() == DebitCreditType.DEBIT)\n            .map(JournalDebitCreditDetail::getAmount)\n            .reduce(BigDecimal.ZERO, BigDecimal::add);\n\n        BigDecimal creditTotal = details.stream()\n            .flatMap(d -&gt; d.getDebitCreditDetails().stream())\n            .filter(dc -&gt; dc.getDebitCreditType() == DebitCreditType.CREDIT)\n            .map(JournalDebitCreditDetail::getAmount)\n            .reduce(BigDecimal.ZERO, BigDecimal::add);\n\n        return debitTotal.compareTo(creditTotal) == 0;\n    }\n\n    /**\n     * \u501f\u65b9\u5408\u8a08\u3092\u53d6\u5f97\n     */\n    public BigDecimal getDebitTotal() {\n        return details.stream()\n            .flatMap(d -&gt; d.getDebitCreditDetails().stream())\n            .filter(dc -&gt; dc.getDebitCreditType() == DebitCreditType.DEBIT)\n            .map(JournalDebitCreditDetail::getAmount)\n            .reduce(BigDecimal.ZERO, BigDecimal::add);\n    }\n\n    /**\n     * \u8cb8\u65b9\u5408\u8a08\u3092\u53d6\u5f97\n     */\n    public BigDecimal getCreditTotal() {\n        return details.stream()\n            .flatMap(d -&gt; d.getDebitCreditDetails().stream())\n            .filter(dc -&gt; dc.getDebitCreditType() == DebitCreditType.CREDIT)\n            .map(JournalDebitCreditDetail::getAmount)\n            .reduce(BigDecimal.ZERO, BigDecimal::add);\n    }\n}\n</code></pre> \u4ed5\u8a33\u660e\u7d30\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/accounting/domain/model/journal/JournalDetail.java\npackage com.example.accounting.domain.model.journal;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.time.LocalDateTime;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class JournalDetail {\n    private String journalVoucherNumber;  // \u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\n    private Integer lineNumber;           // \u4ed5\u8a33\u884c\u756a\u53f7\n    private String lineSummary;           // \u884c\u6458\u8981\n    private LocalDateTime createdAt;      // \u4f5c\u6210\u65e5\u6642\n    private LocalDateTime updatedAt;      // \u66f4\u65b0\u65e5\u6642\n\n    // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n    @Builder.Default\n    private List&lt;JournalDebitCreditDetail&gt; debitCreditDetails = new ArrayList&lt;&gt;();\n}\n</code></pre> \u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/accounting/domain/model/journal/JournalDebitCreditDetail.java\npackage com.example.accounting.domain.model.journal;\n\nimport com.example.accounting.domain.model.account.DebitCreditType;\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class JournalDebitCreditDetail {\n    private String journalVoucherNumber;      // \u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\n    private Integer lineNumber;               // \u4ed5\u8a33\u884c\u756a\u53f7\n    private DebitCreditType debitCreditType;  // \u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206\n    private String accountCode;               // \u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\n    private String subAccountCode;            // \u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\n    private String departmentCode;            // \u90e8\u9580\u30b3\u30fc\u30c9\n    private String projectCode;               // \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9\n    private BigDecimal amount;                // \u4ed5\u8a33\u91d1\u984d\n    private String currencyCode;              // \u901a\u8ca8\u30b3\u30fc\u30c9\n    private BigDecimal exchangeRate;          // \u70ba\u66ff\u30ec\u30fc\u30c8\n    private BigDecimal baseCurrencyAmount;    // \u57fa\u8ef8\u63db\u7b97\u4ed5\u8a33\u91d1\u984d\n    private TaxType taxType;                  // \u6d88\u8cbb\u7a0e\u533a\u5206\n    private Integer taxRate;                  // \u6d88\u8cbb\u7a0e\u7387\n    private TaxCalculationType taxCalcType;   // \u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206\n    private LocalDate dueDate;                // \u671f\u65e5\n    private Boolean cashFlowFlag;             // \u8cc7\u91d1\u7e70\u30d5\u30e9\u30b0\n    private String segmentCode;               // \u30bb\u30b0\u30e1\u30f3\u30c8\u30b3\u30fc\u30c9\n    private String counterAccountCode;        // \u76f8\u624b\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\n    private String counterSubAccountCode;     // \u76f8\u624b\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\n    private String tagCode;                   // \u4ed8\u7b8b\u30b3\u30fc\u30c9\n    private String tagContent;                // \u4ed8\u7b8b\u5185\u5bb9\n    private LocalDateTime createdAt;          // \u4f5c\u6210\u65e5\u6642\n    private LocalDateTime updatedAt;          // \u66f4\u65b0\u65e5\u6642\n}\n</code></pre>"},{"location":"article/part3/chapter16/#_15","title":"\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9","text":"\u4ed5\u8a33\u30ea\u30dd\u30b8\u30c8\u30ea\u30c6\u30b9\u30c8 <pre><code>// src/test/java/com/example/accounting/infrastructure/persistence/repository/JournalRepositoryTest.java\npackage com.example.accounting.infrastructure.persistence.repository;\n\nimport com.example.accounting.application.port.out.JournalRepository;\nimport com.example.accounting.domain.model.account.DebitCreditType;\nimport com.example.accounting.domain.model.journal.*;\nimport com.example.accounting.testsetup.BaseIntegrationTest;\nimport org.junit.jupiter.api.*;\nimport org.springframework.beans.factory.annotation.Autowired;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.util.List;\n\nimport static org.assertj.core.api.Assertions.*;\n\n@DisplayName(\"\u4ed5\u8a33\u30ea\u30dd\u30b8\u30c8\u30ea\")\nclass JournalRepositoryTest extends BaseIntegrationTest {\n\n    @Autowired\n    private JournalRepository journalRepository;\n\n    @BeforeEach\n    void setUp() {\n        journalRepository.deleteAll();\n    }\n\n    @Nested\n    @DisplayName(\"\u4ed5\u8a33\u306e\u767b\u9332\")\n    class Registration {\n\n        @Test\n        @DisplayName(\"\u5358\u7d14\u4ed5\u8a33\uff081\u884c\u501f\u65b9\u30fb1\u884c\u8cb8\u65b9\uff09\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterSimpleJournal() {\n            // Arrange: \u73fe\u91d1\u58f2\u4e0a\u306e\u4ed5\u8a33\u30c7\u30fc\u30bf\n            var journal = createSimpleSalesJournal(\"J0001\");\n\n            // Act: \u4ed5\u8a33\u3092\u767b\u9332\n            journalRepository.save(journal);\n\n            // Assert: \u767b\u9332\u3055\u308c\u305f\u30c7\u30fc\u30bf\u3092\u78ba\u8a8d\n            var savedJournal = journalRepository.findByVoucherNumber(\"J0001\");\n            assertThat(savedJournal).isPresent();\n            assertThat(savedJournal.get().getPostingDate()).isEqualTo(LocalDate.of(2024, 4, 1));\n            assertThat(savedJournal.get().isBalanced()).isTrue();\n        }\n\n        @Test\n        @DisplayName(\"\u8907\u5408\u4ed5\u8a33\uff08\u8907\u6570\u884c\uff09\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterCompoundJournal() {\n            // Arrange: \u58f2\u639b\u91d1\u56de\u53ce\u306e\u8907\u5408\u4ed5\u8a33\n            var journal = createCompoundJournal(\"J0002\");\n\n            // Act: \u4ed5\u8a33\u3092\u767b\u9332\n            journalRepository.save(journal);\n\n            // Assert: \u767b\u9332\u3055\u308c\u305f\u30c7\u30fc\u30bf\u3092\u78ba\u8a8d\n            var savedJournal = journalRepository.findByVoucherNumber(\"J0002\");\n            assertThat(savedJournal).isPresent();\n            assertThat(savedJournal.get().getDetails()).hasSize(2);\n            assertThat(savedJournal.get().isBalanced()).isTrue();\n        }\n\n        @Test\n        @DisplayName(\"\u8cb8\u501f\u304c\u4e00\u81f4\u3057\u306a\u3044\u4ed5\u8a33\u306f\u30d0\u30e9\u30f3\u30b9\u30c1\u30a7\u30c3\u30af\u3067false\u3092\u8fd4\u3059\")\n        void shouldReturnFalseForUnbalancedJournal() {\n            // Arrange: \u8cb8\u501f\u4e0d\u4e00\u81f4\u306e\u4ed5\u8a33\u30c7\u30fc\u30bf\n            var journal = createUnbalancedJournal(\"J0003\");\n\n            // Assert: \u30d0\u30e9\u30f3\u30b9\u30c1\u30a7\u30c3\u30af\n            assertThat(journal.isBalanced()).isFalse();\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u4ed5\u8a33\u306e\u691c\u7d22\")\n    class Search {\n\n        @BeforeEach\n        void setUpTestData() {\n            journalRepository.save(createSimpleSalesJournal(\"J0001\"));\n            journalRepository.save(createCompoundJournal(\"J0002\"));\n        }\n\n        @Test\n        @DisplayName(\"\u8d77\u7968\u65e5\u7bc4\u56f2\u3067\u4ed5\u8a33\u3092\u691c\u7d22\u3067\u304d\u308b\")\n        void canFindByDateRange() {\n            // Act\n            var journals = journalRepository.findByPostingDateBetween(\n                LocalDate.of(2024, 4, 1),\n                LocalDate.of(2024, 4, 30)\n            );\n\n            // Assert\n            assertThat(journals).hasSize(2);\n        }\n\n        @Test\n        @DisplayName(\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\u3067\u4ed5\u8a33\u3092\u691c\u7d22\u3067\u304d\u308b\")\n        void canFindByAccountCode() {\n            // Act\n            var journals = journalRepository.findByAccountCode(\"11110\");\n\n            // Assert\n            assertThat(journals).isNotEmpty();\n        }\n    }\n\n    private Journal createSimpleSalesJournal(String voucherNumber) {\n        var debitDetail = JournalDebitCreditDetail.builder()\n            .journalVoucherNumber(voucherNumber)\n            .lineNumber(1)\n            .debitCreditType(DebitCreditType.DEBIT)\n            .accountCode(\"11110\")  // \u73fe\u91d1\n            .amount(new BigDecimal(\"100000\"))\n            .currencyCode(\"JPY\")\n            .exchangeRate(BigDecimal.ONE)\n            .build();\n\n        var creditDetail = JournalDebitCreditDetail.builder()\n            .journalVoucherNumber(voucherNumber)\n            .lineNumber(1)\n            .debitCreditType(DebitCreditType.CREDIT)\n            .accountCode(\"41100\")  // \u58f2\u4e0a\n            .amount(new BigDecimal(\"100000\"))\n            .currencyCode(\"JPY\")\n            .exchangeRate(BigDecimal.ONE)\n            .build();\n\n        var journalDetail = JournalDetail.builder()\n            .journalVoucherNumber(voucherNumber)\n            .lineNumber(1)\n            .lineSummary(\"\u73fe\u91d1\u58f2\u4e0a\")\n            .debitCreditDetails(List.of(debitDetail, creditDetail))\n            .build();\n\n        return Journal.builder()\n            .journalVoucherNumber(voucherNumber)\n            .postingDate(LocalDate.of(2024, 4, 1))\n            .entryDate(LocalDate.now())\n            .closingJournalFlag(false)\n            .singleEntryFlag(true)\n            .voucherType(JournalVoucherType.NORMAL)\n            .periodicPostingFlag(false)\n            .redSlipFlag(false)\n            .details(List.of(journalDetail))\n            .build();\n    }\n\n    private Journal createCompoundJournal(String voucherNumber) {\n        // \u58f2\u639b\u91d1100,000\u5186\u3092\u73fe\u91d180,000\u5186\u3068\u53d7\u53d6\u624b\u5f6220,000\u5186\u3067\u56de\u53ce\n        var debit1 = JournalDebitCreditDetail.builder()\n            .journalVoucherNumber(voucherNumber)\n            .lineNumber(1)\n            .debitCreditType(DebitCreditType.DEBIT)\n            .accountCode(\"11110\")  // \u73fe\u91d1\n            .amount(new BigDecimal(\"80000\"))\n            .build();\n\n        var credit1 = JournalDebitCreditDetail.builder()\n            .journalVoucherNumber(voucherNumber)\n            .lineNumber(1)\n            .debitCreditType(DebitCreditType.CREDIT)\n            .accountCode(\"11300\")  // \u58f2\u639b\u91d1\n            .amount(new BigDecimal(\"100000\"))\n            .build();\n\n        var debit2 = JournalDebitCreditDetail.builder()\n            .journalVoucherNumber(voucherNumber)\n            .lineNumber(2)\n            .debitCreditType(DebitCreditType.DEBIT)\n            .accountCode(\"11200\")  // \u53d7\u53d6\u624b\u5f62\n            .amount(new BigDecimal(\"20000\"))\n            .build();\n\n        var detail1 = JournalDetail.builder()\n            .journalVoucherNumber(voucherNumber)\n            .lineNumber(1)\n            .lineSummary(\"\u73fe\u91d1\u5165\u91d1\")\n            .debitCreditDetails(List.of(debit1, credit1))\n            .build();\n\n        var detail2 = JournalDetail.builder()\n            .journalVoucherNumber(voucherNumber)\n            .lineNumber(2)\n            .lineSummary(\"\u624b\u5f62\u5165\u91d1\")\n            .debitCreditDetails(List.of(debit2))\n            .build();\n\n        return Journal.builder()\n            .journalVoucherNumber(voucherNumber)\n            .postingDate(LocalDate.of(2024, 4, 5))\n            .entryDate(LocalDate.now())\n            .closingJournalFlag(false)\n            .singleEntryFlag(false)  // \u8907\u5408\u4ed5\u8a33\n            .voucherType(JournalVoucherType.NORMAL)\n            .details(List.of(detail1, detail2))\n            .build();\n    }\n\n    private Journal createUnbalancedJournal(String voucherNumber) {\n        var debitDetail = JournalDebitCreditDetail.builder()\n            .journalVoucherNumber(voucherNumber)\n            .lineNumber(1)\n            .debitCreditType(DebitCreditType.DEBIT)\n            .accountCode(\"11110\")\n            .amount(new BigDecimal(\"100000\"))\n            .build();\n\n        var creditDetail = JournalDebitCreditDetail.builder()\n            .journalVoucherNumber(voucherNumber)\n            .lineNumber(1)\n            .debitCreditType(DebitCreditType.CREDIT)\n            .accountCode(\"41100\")\n            .amount(new BigDecimal(\"90000\"))  // \u4e0d\u4e00\u81f4\n            .build();\n\n        var journalDetail = JournalDetail.builder()\n            .journalVoucherNumber(voucherNumber)\n            .lineNumber(1)\n            .debitCreditDetails(List.of(debitDetail, creditDetail))\n            .build();\n\n        return Journal.builder()\n            .journalVoucherNumber(voucherNumber)\n            .postingDate(LocalDate.of(2024, 4, 1))\n            .details(List.of(journalDetail))\n            .build();\n    }\n}\n</code></pre>"},{"location":"article/part3/chapter16/#output-port","title":"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff08Output Port\uff09","text":"\u4ed5\u8a33\u30ea\u30dd\u30b8\u30c8\u30ea\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9 <pre><code>// src/main/java/com/example/accounting/application/port/out/JournalRepository.java\npackage com.example.accounting.application.port.out;\n\nimport com.example.accounting.domain.model.journal.Journal;\n\nimport java.time.LocalDate;\nimport java.util.List;\nimport java.util.Optional;\n\n/**\n * \u4ed5\u8a33\u30ea\u30dd\u30b8\u30c8\u30ea\uff08Output Port\uff09\n */\npublic interface JournalRepository {\n\n    void save(Journal journal);\n\n    Optional&lt;Journal&gt; findByVoucherNumber(String voucherNumber);\n\n    List&lt;Journal&gt; findByPostingDateBetween(LocalDate fromDate, LocalDate toDate);\n\n    List&lt;Journal&gt; findByAccountCode(String accountCode);\n\n    List&lt;Journal&gt; findByDepartmentCode(String departmentCode);\n\n    void delete(String voucherNumber);\n\n    void deleteAll();\n}\n</code></pre>"},{"location":"article/part3/chapter16/#_16","title":"\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u5c64","text":"MyBatis XML Mapper <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.accounting.infrastructure.persistence.mapper.JournalMapper\"&gt;\n\n    &lt;!-- \u4ed5\u8a33 ResultMap --&gt;\n    &lt;resultMap id=\"JournalResultMap\" type=\"com.example.accounting.domain.model.journal.Journal\"&gt;\n        &lt;result property=\"journalVoucherNumber\" column=\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\"/&gt;\n        &lt;result property=\"postingDate\" column=\"\u8d77\u7968\u65e5\"/&gt;\n        &lt;result property=\"entryDate\" column=\"\u5165\u529b\u65e5\"/&gt;\n        &lt;result property=\"closingJournalFlag\" column=\"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\"/&gt;\n        &lt;result property=\"singleEntryFlag\" column=\"\u5358\u632f\u30d5\u30e9\u30b0\"/&gt;\n        &lt;result property=\"voucherType\" column=\"\u4ed5\u8a33\u4f1d\u7968\u533a\u5206\"\n                typeHandler=\"com.example.accounting.infrastructure.persistence.typehandler.JournalVoucherTypeHandler\"/&gt;\n        &lt;result property=\"periodicPostingFlag\" column=\"\u5b9a\u671f\u8a08\u4e0a\u30d5\u30e9\u30b0\"/&gt;\n        &lt;result property=\"employeeCode\" column=\"\u793e\u54e1\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"departmentCode\" column=\"\u90e8\u9580\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"redSlipFlag\" column=\"\u8d64\u4f1d\u30d5\u30e9\u30b0\"/&gt;\n        &lt;result property=\"redBlackVoucherNumber\" column=\"\u8d64\u9ed2\u4f1d\u7968\u756a\u53f7\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;!-- \u4ed5\u8a33\u660e\u7d30 ResultMap --&gt;\n    &lt;resultMap id=\"JournalDetailResultMap\" type=\"com.example.accounting.domain.model.journal.JournalDetail\"&gt;\n        &lt;result property=\"journalVoucherNumber\" column=\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\"/&gt;\n        &lt;result property=\"lineNumber\" column=\"\u4ed5\u8a33\u884c\u756a\u53f7\"/&gt;\n        &lt;result property=\"lineSummary\" column=\"\u884c\u6458\u8981\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;!-- \u4ed5\u8a33\u8cb8\u501f\u660e\u7d30 ResultMap --&gt;\n    &lt;resultMap id=\"JournalDebitCreditDetailResultMap\" type=\"com.example.accounting.domain.model.journal.JournalDebitCreditDetail\"&gt;\n        &lt;result property=\"journalVoucherNumber\" column=\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\"/&gt;\n        &lt;result property=\"lineNumber\" column=\"\u4ed5\u8a33\u884c\u756a\u53f7\"/&gt;\n        &lt;result property=\"debitCreditType\" column=\"\u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206\"\n                typeHandler=\"com.example.accounting.infrastructure.persistence.typehandler.DebitCreditTypeHandler\"/&gt;\n        &lt;result property=\"accountCode\" column=\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"subAccountCode\" column=\"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"departmentCode\" column=\"\u90e8\u9580\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"projectCode\" column=\"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"amount\" column=\"\u4ed5\u8a33\u91d1\u984d\"/&gt;\n        &lt;result property=\"currencyCode\" column=\"\u901a\u8ca8\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"exchangeRate\" column=\"\u70ba\u66ff\u30ec\u30fc\u30c8\"/&gt;\n        &lt;result property=\"baseCurrencyAmount\" column=\"\u57fa\u8ef8\u63db\u7b97\u4ed5\u8a33\u91d1\u984d\"/&gt;\n        &lt;result property=\"taxType\" column=\"\u6d88\u8cbb\u7a0e\u533a\u5206\"\n                typeHandler=\"com.example.accounting.infrastructure.persistence.typehandler.TaxTypeHandler\"/&gt;\n        &lt;result property=\"taxRate\" column=\"\u6d88\u8cbb\u7a0e\u7387\"/&gt;\n        &lt;result property=\"taxCalcType\" column=\"\u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206\"\n                typeHandler=\"com.example.accounting.infrastructure.persistence.typehandler.TaxCalculationTypeHandler\"/&gt;\n        &lt;result property=\"dueDate\" column=\"\u671f\u65e5\"/&gt;\n        &lt;result property=\"cashFlowFlag\" column=\"\u8cc7\u91d1\u7e70\u30d5\u30e9\u30b0\"/&gt;\n        &lt;result property=\"segmentCode\" column=\"\u30bb\u30b0\u30e1\u30f3\u30c8\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"counterAccountCode\" column=\"\u76f8\u624b\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"counterSubAccountCode\" column=\"\u76f8\u624b\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"tagCode\" column=\"\u4ed8\u7b8b\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"tagContent\" column=\"\u4ed8\u7b8b\u5185\u5bb9\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;!-- \u4ed5\u8a33\u30d8\u30c3\u30c0\u767b\u9332 --&gt;\n    &lt;insert id=\"insertJournal\" parameterType=\"com.example.accounting.domain.model.journal.Journal\"&gt;\n        INSERT INTO \"\u4ed5\u8a33\" (\n            \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u8d77\u7968\u65e5\", \"\u5165\u529b\u65e5\", \"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\", \"\u5358\u632f\u30d5\u30e9\u30b0\",\n            \"\u4ed5\u8a33\u4f1d\u7968\u533a\u5206\", \"\u5b9a\u671f\u8a08\u4e0a\u30d5\u30e9\u30b0\", \"\u793e\u54e1\u30b3\u30fc\u30c9\", \"\u90e8\u9580\u30b3\u30fc\u30c9\",\n            \"\u8d64\u4f1d\u30d5\u30e9\u30b0\", \"\u8d64\u9ed2\u4f1d\u7968\u756a\u53f7\", \"\u4f5c\u6210\u65e5\u6642\", \"\u66f4\u65b0\u65e5\u6642\"\n        ) VALUES (\n            #{journalVoucherNumber}, #{postingDate}, #{entryDate},\n            #{closingJournalFlag}, #{singleEntryFlag},\n            #{voucherType, typeHandler=com.example.accounting.infrastructure.persistence.typehandler.JournalVoucherTypeHandler}::\u4ed5\u8a33\u4f1d\u7968\u533a\u5206,\n            #{periodicPostingFlag}, #{employeeCode}, #{departmentCode},\n            #{redSlipFlag}, #{redBlackVoucherNumber},\n            CURRENT_TIMESTAMP, CURRENT_TIMESTAMP\n        )\n    &lt;/insert&gt;\n\n    &lt;!-- \u4ed5\u8a33\u660e\u7d30\u767b\u9332 --&gt;\n    &lt;insert id=\"insertJournalDetail\" parameterType=\"com.example.accounting.domain.model.journal.JournalDetail\"&gt;\n        INSERT INTO \"\u4ed5\u8a33\u660e\u7d30\" (\n            \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u756a\u53f7\", \"\u884c\u6458\u8981\", \"\u4f5c\u6210\u65e5\u6642\", \"\u66f4\u65b0\u65e5\u6642\"\n        ) VALUES (\n            #{journalVoucherNumber}, #{lineNumber}, #{lineSummary},\n            CURRENT_TIMESTAMP, CURRENT_TIMESTAMP\n        )\n    &lt;/insert&gt;\n\n    &lt;!-- \u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\u767b\u9332 --&gt;\n    &lt;insert id=\"insertJournalDebitCreditDetail\" parameterType=\"com.example.accounting.domain.model.journal.JournalDebitCreditDetail\"&gt;\n        INSERT INTO \"\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\" (\n            \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206\",\n            \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u90e8\u9580\u30b3\u30fc\u30c9\", \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9\",\n            \"\u4ed5\u8a33\u91d1\u984d\", \"\u901a\u8ca8\u30b3\u30fc\u30c9\", \"\u70ba\u66ff\u30ec\u30fc\u30c8\", \"\u57fa\u8ef8\u63db\u7b97\u4ed5\u8a33\u91d1\u984d\",\n            \"\u6d88\u8cbb\u7a0e\u533a\u5206\", \"\u6d88\u8cbb\u7a0e\u7387\", \"\u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206\",\n            \"\u671f\u65e5\", \"\u8cc7\u91d1\u7e70\u30d5\u30e9\u30b0\", \"\u30bb\u30b0\u30e1\u30f3\u30c8\u30b3\u30fc\u30c9\",\n            \"\u76f8\u624b\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u76f8\u624b\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\",\n            \"\u4ed8\u7b8b\u30b3\u30fc\u30c9\", \"\u4ed8\u7b8b\u5185\u5bb9\", \"\u4f5c\u6210\u65e5\u6642\", \"\u66f4\u65b0\u65e5\u6642\"\n        ) VALUES (\n            #{journalVoucherNumber}, #{lineNumber},\n            #{debitCreditType, typeHandler=com.example.accounting.infrastructure.persistence.typehandler.DebitCreditTypeHandler}::\u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206,\n            #{accountCode}, #{subAccountCode}, #{departmentCode}, #{projectCode},\n            #{amount}, #{currencyCode}, #{exchangeRate}, #{baseCurrencyAmount},\n            #{taxType, typeHandler=com.example.accounting.infrastructure.persistence.typehandler.TaxTypeHandler}::\u6d88\u8cbb\u7a0e\u533a\u5206,\n            #{taxRate},\n            #{taxCalcType, typeHandler=com.example.accounting.infrastructure.persistence.typehandler.TaxCalculationTypeHandler}::\u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206,\n            #{dueDate}, #{cashFlowFlag}, #{segmentCode},\n            #{counterAccountCode}, #{counterSubAccountCode},\n            #{tagCode}, #{tagContent}, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP\n        )\n    &lt;/insert&gt;\n\n    &lt;!-- \u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\u3067\u691c\u7d22 --&gt;\n    &lt;select id=\"findByVoucherNumber\" resultMap=\"JournalResultMap\"&gt;\n        SELECT * FROM \"\u4ed5\u8a33\"\n        WHERE \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\" = #{voucherNumber}\n    &lt;/select&gt;\n\n    &lt;!-- \u4ed5\u8a33\u660e\u7d30\u691c\u7d22 --&gt;\n    &lt;select id=\"findDetailsByVoucherNumber\" resultMap=\"JournalDetailResultMap\"&gt;\n        SELECT * FROM \"\u4ed5\u8a33\u660e\u7d30\"\n        WHERE \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\" = #{voucherNumber}\n        ORDER BY \"\u4ed5\u8a33\u884c\u756a\u53f7\"\n    &lt;/select&gt;\n\n    &lt;!-- \u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\u691c\u7d22 --&gt;\n    &lt;select id=\"findDCDetailsByVoucherAndLine\" resultMap=\"JournalDebitCreditDetailResultMap\"&gt;\n        SELECT * FROM \"\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\"\n        WHERE \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\" = #{voucherNumber}\n        AND \"\u4ed5\u8a33\u884c\u756a\u53f7\" = #{lineNumber}\n    &lt;/select&gt;\n\n    &lt;!-- \u8d77\u7968\u65e5\u7bc4\u56f2\u3067\u691c\u7d22 --&gt;\n    &lt;select id=\"findVoucherNumbersByDateRange\" resultType=\"String\"&gt;\n        SELECT \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\" FROM \"\u4ed5\u8a33\"\n        WHERE \"\u8d77\u7968\u65e5\" BETWEEN #{fromDate} AND #{toDate}\n        ORDER BY \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\"\n    &lt;/select&gt;\n\n    &lt;!-- \u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\u3067\u691c\u7d22 --&gt;\n    &lt;select id=\"findVoucherNumbersByAccountCode\" resultType=\"String\"&gt;\n        SELECT DISTINCT \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\" FROM \"\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\"\n        WHERE \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\" = #{accountCode}\n        ORDER BY \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\"\n    &lt;/select&gt;\n\n    &lt;!-- \u524a\u9664 --&gt;\n    &lt;delete id=\"deleteJournal\"&gt;\n        DELETE FROM \"\u4ed5\u8a33\" WHERE \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\" = #{voucherNumber}\n    &lt;/delete&gt;\n\n    &lt;delete id=\"deleteAll\"&gt;\n        TRUNCATE TABLE \"\u4ed5\u8a33\" CASCADE\n    &lt;/delete&gt;\n&lt;/mapper&gt;\n</code></pre> \u4ed5\u8a33\u30ea\u30dd\u30b8\u30c8\u30ea\u5b9f\u88c5 <pre><code>// src/main/java/com/example/accounting/infrastructure/persistence/repository/JournalRepositoryImpl.java\npackage com.example.accounting.infrastructure.persistence.repository;\n\nimport com.example.accounting.application.port.out.JournalRepository;\nimport com.example.accounting.domain.model.journal.Journal;\nimport com.example.accounting.infrastructure.persistence.mapper.JournalMapper;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Repository;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.time.LocalDate;\nimport java.util.List;\nimport java.util.Optional;\nimport java.util.stream.Collectors;\n\n@Repository\n@RequiredArgsConstructor\npublic class JournalRepositoryImpl implements JournalRepository {\n\n    private final JournalMapper journalMapper;\n\n    @Override\n    @Transactional\n    public void save(Journal journal) {\n        // 1. \u4ed5\u8a33\u30d8\u30c3\u30c0\u3092\u767b\u9332\n        journalMapper.insertJournal(journal);\n\n        // 2. \u4ed5\u8a33\u660e\u7d30\u3092\u767b\u9332\n        journal.getDetails().forEach(detail -&gt; {\n            journalMapper.insertJournalDetail(detail);\n\n            // 3. \u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\u3092\u767b\u9332\n            detail.getDebitCreditDetails().forEach(dcDetail -&gt; {\n                journalMapper.insertJournalDebitCreditDetail(dcDetail);\n            });\n        });\n    }\n\n    @Override\n    public Optional&lt;Journal&gt; findByVoucherNumber(String voucherNumber) {\n        return journalMapper.findByVoucherNumber(voucherNumber)\n            .map(journal -&gt; {\n                var details = journalMapper.findDetailsByVoucherNumber(voucherNumber);\n                details.forEach(detail -&gt; {\n                    var dcDetails = journalMapper.findDCDetailsByVoucherAndLine(\n                        voucherNumber, detail.getLineNumber());\n                    detail.setDebitCreditDetails(dcDetails);\n                });\n                journal.setDetails(details);\n                return journal;\n            });\n    }\n\n    @Override\n    public List&lt;Journal&gt; findByPostingDateBetween(LocalDate fromDate, LocalDate toDate) {\n        return journalMapper.findVoucherNumbersByDateRange(fromDate, toDate).stream()\n            .map(this::findByVoucherNumber)\n            .filter(Optional::isPresent)\n            .map(Optional::get)\n            .collect(Collectors.toList());\n    }\n\n    @Override\n    public List&lt;Journal&gt; findByAccountCode(String accountCode) {\n        return journalMapper.findVoucherNumbersByAccountCode(accountCode).stream()\n            .map(this::findByVoucherNumber)\n            .filter(Optional::isPresent)\n            .map(Optional::get)\n            .collect(Collectors.toList());\n    }\n\n    @Override\n    public List&lt;Journal&gt; findByDepartmentCode(String departmentCode) {\n        return journalMapper.findVoucherNumbersByDepartmentCode(departmentCode).stream()\n            .map(this::findByVoucherNumber)\n            .filter(Optional::isPresent)\n            .map(Optional::get)\n            .collect(Collectors.toList());\n    }\n\n    @Override\n    @Transactional\n    public void delete(String voucherNumber) {\n        journalMapper.deleteJournal(voucherNumber);\n    }\n\n    @Override\n    @Transactional\n    public void deleteAll() {\n        journalMapper.deleteAll();\n    }\n}\n</code></pre>"},{"location":"article/part3/chapter16/#16_1","title":"\u7b2c16\u7ae0\u306e\u307e\u3068\u3081","text":""},{"location":"article/part3/chapter16/#_17","title":"\u4f5c\u6210\u3057\u305f\u30c6\u30fc\u30d6\u30eb","text":"\u30c6\u30fc\u30d6\u30eb\u540d \u8aac\u660e <code>\u4ed5\u8a33</code> \u4ed5\u8a33\u4f1d\u7968\u306e\u30d8\u30c3\u30c0\u60c5\u5831\uff08\u8d77\u7968\u65e5\u3001\u5165\u529b\u65e5\u3001\u5404\u7a2e\u30d5\u30e9\u30b0\uff09 <code>\u4ed5\u8a33\u660e\u7d30</code> \u4ed5\u8a33\u306e\u884c\u5358\u4f4d\u306e\u60c5\u5831\uff08\u884c\u6458\u8981\uff09 <code>\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30</code> \u501f\u65b9\u30fb\u8cb8\u65b9\u306e\u8a73\u7d30\uff08\u52d8\u5b9a\u79d1\u76ee\u3001\u91d1\u984d\u3001\u88dc\u52a9\u60c5\u5831\uff09"},{"location":"article/part3/chapter16/#er_1","title":"ER\u56f3","text":""},{"location":"article/part3/chapter16/#_18","title":"\u8a2d\u8a08\u306e\u30dd\u30a4\u30f3\u30c8","text":"<ol> <li>3\u968e\u5c64\u69cb\u9020: \u4ed5\u8a33 \u2192 \u4ed5\u8a33\u660e\u7d30 \u2192 \u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\u306e\u89aa\u5b50\u95a2\u4fc2</li> <li>\u8907\u5f0f\u7c3f\u8a18\u306e\u539f\u5247: \u501f\u65b9\u5408\u8a08 = \u8cb8\u65b9\u5408\u8a08\u306e\u8cb8\u501f\u4e00\u81f4\u30c1\u30a7\u30c3\u30af</li> <li>\u5358\u4e00\u4ed5\u8a33\u3068\u8907\u5408\u4ed5\u8a33: \u5358\u632f\u30d5\u30e9\u30b0\u3067\u533a\u5225</li> <li>\u8d64\u9ed2\u51e6\u7406\u5bfe\u5fdc: \u8d64\u4f1d\u30d5\u30e9\u30b0\u3068\u8d64\u9ed2\u4f1d\u7968\u756a\u53f7\u3067\u8a02\u6b63\u5c65\u6b74\u3092\u7ba1\u7406</li> <li>\u591a\u901a\u8ca8\u5bfe\u5fdc: \u901a\u8ca8\u30b3\u30fc\u30c9\u3001\u70ba\u66ff\u30ec\u30fc\u30c8\u3001\u57fa\u8ef8\u63db\u7b97\u91d1\u984d</li> <li>\u6d88\u8cbb\u7a0e\u5bfe\u5fdc: \u6d88\u8cbb\u7a0e\u533a\u5206\u3001\u6d88\u8cbb\u7a0e\u7387\u3001\u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206</li> <li>\u7ba1\u7406\u4f1a\u8a08\u5bfe\u5fdc: \u90e8\u9580\u30b3\u30fc\u30c9\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9\u3001\u30bb\u30b0\u30e1\u30f3\u30c8\u30b3\u30fc\u30c9</li> </ol>"},{"location":"article/part3/chapter16/#_19","title":"\u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af","text":"\u30e1\u30bd\u30c3\u30c9 \u8aac\u660e <code>isBalanced()</code> \u501f\u65b9\u5408\u8a08\u3068\u8cb8\u65b9\u5408\u8a08\u304c\u4e00\u81f4\u3059\u308b\u304b\u30c1\u30a7\u30c3\u30af <code>getDebitTotal()</code> \u501f\u65b9\u5408\u8a08\u3092\u53d6\u5f97 <code>getCreditTotal()</code> \u8cb8\u65b9\u5408\u8a08\u3092\u53d6\u5f97"},{"location":"article/part3/chapter16/#_20","title":"\u6b21\u7ae0\u306e\u4e88\u544a","text":"<p>\u7b2c17\u7ae0\u3067\u306f\u3001\u81ea\u52d5\u4ed5\u8a33\u306e\u8a2d\u8a08\u306b\u9032\u307f\u307e\u3059\u3002\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3068\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u9023\u643a\u3001\u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf\u306e\u8a2d\u8a08\u3001\u58f2\u4e0a\u4f1d\u7968\u304b\u3089\u4ed5\u8a33\u4f1d\u7968\u3078\u306e\u8ee2\u8a18\u30ed\u30b8\u30c3\u30af\u3092 TDD \u3067\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\u3002</p>"},{"location":"article/part3/chapter17/","title":"\u7b2c17\u7ae0\uff1a\u81ea\u52d5\u4ed5\u8a33\u306e\u8a2d\u8a08","text":"<p>\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306a\u3069\u306e\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u304b\u3089\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u3078\u306e\u81ea\u52d5\u4ed5\u8a33\u51e6\u7406\u3092 TDD \u3067\u8a2d\u8a08\u3057\u3066\u3044\u304d\u307e\u3059\u3002\u58f2\u4e0a\u30c7\u30fc\u30bf\u304b\u3089\u4ed5\u8a33\u30c7\u30fc\u30bf\u3078\u306e\u81ea\u52d5\u5909\u63db\u30eb\u30fc\u30eb\u3068\u3001\u52b9\u7387\u7684\u306a\u30d0\u30c3\u30c1\u51e6\u7406\u306e\u8a2d\u8a08\u3092\u884c\u3044\u307e\u3059\u3002</p>"},{"location":"article/part3/chapter17/#171","title":"17.1 \u81ea\u52d5\u4ed5\u8a33\u306e\u6982\u8981","text":""},{"location":"article/part3/chapter17/#_1","title":"\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3068\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u9023\u643a","text":"<p>\u81ea\u52d5\u4ed5\u8a33\u306f\u3001\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u306e\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u3092\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u4ed5\u8a33\u30c7\u30fc\u30bf\u3078\u81ea\u52d5\u7684\u306b\u5909\u63db\u3059\u308b\u6a5f\u80fd\u3067\u3059\u3002</p>"},{"location":"article/part3/chapter17/#_2","title":"\u5f93\u6765\u306e\u30a2\u30ca\u30ed\u30b0\u9023\u643a\uff08\u624b\u5165\u529b\u306b\u3088\u308b\u975e\u9023\u643a\uff09","text":"<p>\u5f93\u6765\u306e\u65b9\u5f0f\u3067\u306f\u3001\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3067\u767a\u884c\u3057\u305f\u58f2\u4e0a\u4f1d\u7968\u3092\u7d19\u3067\u7d4c\u7406\u90e8\u9580\u306b\u56de\u9001\u3057\u3001\u7d4c\u7406\u62c5\u5f53\u8005\u304c\u4ed5\u8a33\u5165\u529b\u3092\u884c\u3063\u3066\u3044\u307e\u3057\u305f\u3002</p> <p></p>"},{"location":"article/part3/chapter17/#_3","title":"\u30a2\u30ca\u30ed\u30b0\u9023\u643a\u306e\u554f\u984c\u70b9","text":"\u554f\u984c \u8aac\u660e \u4e8c\u91cd\u5165\u529b \u55b6\u696d\u90e8\u9580\u3068\u7d4c\u7406\u90e8\u9580\u3067\u540c\u3058\u60c5\u5831\u3092\u5165\u529b\u3059\u308b\u4f5c\u696d\u8ca0\u8377 \u5165\u529b\u30df\u30b9 \u624b\u5165\u529b\u306b\u3088\u308b\u30c7\u30fc\u30bf\u4e0d\u6574\u5408 \u30bf\u30a4\u30e0\u30e9\u30b0 \u7d19\u4f1d\u7968\u306e\u56de\u9001\u306b\u3088\u308b\u60c5\u5831\u9045\u5ef6 \u6d88\u8cbb\u7a0e\u8a08\u7b97\u30df\u30b9 \u624b\u8a08\u7b97\u306b\u3088\u308b\u8aa4\u308a \u52d8\u5b9a\u79d1\u76ee\u9078\u629e\u30df\u30b9 \u62c5\u5f53\u8005\u306e\u5224\u65ad\u3070\u3089\u3064\u304d"},{"location":"article/part3/chapter17/#_4","title":"\u81ea\u52d5\u4ed5\u8a33\u51e6\u7406\u306e\u30c7\u30fc\u30bf\u30d5\u30ed\u30fc","text":"<p>\u81ea\u52d5\u4ed5\u8a33\u51e6\u7406\u3092\u5c0e\u5165\u3059\u308b\u3053\u3068\u3067\u3001\u58f2\u4e0a\u30c7\u30fc\u30bf\u304b\u3089\u4ed5\u8a33\u30c7\u30fc\u30bf\u3078\u306e\u5909\u63db\u3092\u81ea\u52d5\u5316\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part3/chapter17/#_5","title":"\u81ea\u52d5\u4ed5\u8a33\u51e6\u7406\u306e\u6d41\u308c","text":""},{"location":"article/part3/chapter17/#172","title":"17.2 \u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf\u306e\u8a2d\u8a08","text":""},{"location":"article/part3/chapter17/#_6","title":"\u5546\u54c1\u30b0\u30eb\u30fc\u30d7 \u00d7 \u9867\u5ba2\u30b0\u30eb\u30fc\u30d7\u306b\u3088\u308b\u6761\u4ef6\u5206\u5c90","text":"<p>\u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf\u306f\u3001\u58f2\u4e0a\u30c7\u30fc\u30bf\u304b\u3089\u4ed5\u8a33\u30c7\u30fc\u30bf\u3078\u306e\u5909\u63db\u30eb\u30fc\u30eb\u3092\u5b9a\u7fa9\u3059\u308b\u30de\u30b9\u30bf\u30c6\u30fc\u30d6\u30eb\u3067\u3059\u3002</p> <p></p>"},{"location":"article/part3/chapter17/#_7","title":"\u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf\u306e\u9805\u76ee\u8aac\u660e","text":"\u9805\u76ee \u8aac\u660e \u4f8b \u30d1\u30bf\u30fc\u30f3\u30b3\u30fc\u30c9 \u30d1\u30bf\u30fc\u30f3\u3092\u4e00\u610f\u306b\u8b58\u5225\u3059\u308b\u30b3\u30fc\u30c9 <code>P001</code> \u30d1\u30bf\u30fc\u30f3\u540d \u30d1\u30bf\u30fc\u30f3\u306e\u540d\u79f0 <code>\u52a0\u5de5\u54c1\u58f2\u4e0a</code> \u5546\u54c1\u30b0\u30eb\u30fc\u30d7 \u5bfe\u8c61\u5546\u54c1\u30b0\u30eb\u30fc\u30d7\uff08<code>ALL</code>\u306f\u5168\u3066\uff09 <code>\u52a0\u5de5\u54c1</code>, <code>\u751f\u9bae\u54c1</code>, <code>ALL</code> \u9867\u5ba2\u30b0\u30eb\u30fc\u30d7 \u5bfe\u8c61\u9867\u5ba2\u30b0\u30eb\u30fc\u30d7\uff08<code>ALL</code>\u306f\u5168\u3066\uff09 <code>\u4e00\u822c</code>, <code>\u7279\u7d04\u5e97</code>, <code>ALL</code> \u58f2\u4e0a\u533a\u5206 \u58f2\u4e0a\u306e\u7a2e\u985e <code>01</code>:\u901a\u5e38\u58f2\u4e0a, <code>02</code>:\u8fd4\u54c1 \u501f\u65b9\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9 \u501f\u65b9\u306b\u8a08\u4e0a\u3059\u308b\u52d8\u5b9a\u79d1\u76ee <code>11300</code>(\u58f2\u639b\u91d1) \u8cb8\u65b9\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9 \u8cb8\u65b9\u306b\u8a08\u4e0a\u3059\u308b\u52d8\u5b9a\u79d1\u76ee <code>41110</code>(\u58f2\u4e0a\u52a0\u5de5\u54c1) \u512a\u5148\u9806\u4f4d \u30d1\u30bf\u30fc\u30f3\u9069\u7528\u306e\u512a\u5148\u5ea6\uff08\u5c0f\u3055\u3044\u65b9\u304c\u512a\u5148\uff09 <code>100</code>"},{"location":"article/part3/chapter17/#_8","title":"\u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf\u306e\u30c7\u30fc\u30bf\u4f8b","text":"\u30d1\u30bf\u30fc\u30f3\u30b3\u30fc\u30c9 \u30d1\u30bf\u30fc\u30f3\u540d \u5546\u54c1\u30b0\u30eb\u30fc\u30d7 \u9867\u5ba2\u30b0\u30eb\u30fc\u30d7 \u501f\u65b9\u79d1\u76ee \u8cb8\u65b9\u79d1\u76ee \u512a\u5148\u9806\u4f4d P001 \u52a0\u5de5\u54c1\u58f2\u4e0a\uff08\u7279\u7d04\u5e97\uff09 \u52a0\u5de5\u54c1 \u7279\u7d04\u5e97 \u58f2\u639b\u91d1 \u58f2\u4e0a\u52a0\u5de5\u54c1 10 P002 \u52a0\u5de5\u54c1\u58f2\u4e0a\uff08\u4e00\u822c\uff09 \u52a0\u5de5\u54c1 ALL \u58f2\u639b\u91d1 \u58f2\u4e0a\u52a0\u5de5\u54c1 20 P003 \u751f\u9bae\u54c1\u58f2\u4e0a \u751f\u9bae\u54c1 ALL \u58f2\u639b\u91d1 \u58f2\u4e0a\u751f\u9bae\u54c1 30 P999 \u305d\u306e\u4ed6\u58f2\u4e0a ALL ALL \u58f2\u639b\u91d1 \u58f2\u4e0a\u305d\u306e\u4ed6 999"},{"location":"article/part3/chapter17/#_9","title":"\u58f2\u4e0a\u8fd4\u54c1\u6642\u306e\u79d1\u76ee\u8a2d\u5b9a","text":"<p>\u8fd4\u54c1\u6642\u306f\u901a\u5e38\u58f2\u4e0a\u3068\u9006\u306e\u4ed5\u8a33\u304c\u5fc5\u8981\u3067\u3059\u3002</p> \u53d6\u5f15 \u501f\u65b9 \u8cb8\u65b9 \u901a\u5e38\u58f2\u4e0a \u58f2\u639b\u91d1 \u58f2\u4e0a \u58f2\u4e0a\u8fd4\u54c1 \u58f2\u4e0a \u58f2\u639b\u91d1"},{"location":"article/part3/chapter17/#173","title":"17.3 \u81ea\u52d5\u4ed5\u8a33\u51e6\u7406\u306e\u8a2d\u8a08","text":""},{"location":"article/part3/chapter17/#_10","title":"\u30d5\u30e9\u30b0\u7ba1\u7406\u65b9\u5f0f\u3068\u65e5\u4ed8\u7ba1\u7406\u65b9\u5f0f","text":"<p>\u58f2\u4e0a\u30c7\u30fc\u30bf\u306e\u51e6\u7406\u72b6\u614b\u3092\u7ba1\u7406\u3059\u308b\u65b9\u5f0f\u306b\u306f\u30012\u3064\u306e\u30a2\u30d7\u30ed\u30fc\u30c1\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"article/part3/chapter17/#_11","title":"\u30d5\u30e9\u30b0\u7ba1\u7406\u65b9\u5f0f","text":"\u30e1\u30ea\u30c3\u30c8 \u30c7\u30e1\u30ea\u30c3\u30c8 \u30b7\u30f3\u30d7\u30eb\u306a\u5b9f\u88c5 \u518d\u51e6\u7406\u6642\u306b\u30d5\u30e9\u30b0\u30ea\u30bb\u30c3\u30c8\u304c\u5fc5\u8981 \u51e6\u7406\u72b6\u614b\u304c\u660e\u78ba \u5927\u91cf\u30c7\u30fc\u30bf\u3067\u306e\u66f4\u65b0\u8ca0\u8377"},{"location":"article/part3/chapter17/#_12","title":"\u65e5\u4ed8\u7ba1\u7406\u65b9\u5f0f","text":"\u30e1\u30ea\u30c3\u30c8 \u30c7\u30e1\u30ea\u30c3\u30c8 \u5dee\u5206\u51e6\u7406\u304c\u5bb9\u6613 \u7ba1\u7406\u30c6\u30fc\u30d6\u30eb\u304c\u5fc5\u8981 \u518d\u51e6\u7406\u6642\u306e\u67d4\u8edf\u6027 \u66f4\u65b0\u65e5\u6642\u306e\u6574\u5408\u6027\u7ba1\u7406\u304c\u5fc5\u8981"},{"location":"article/part3/chapter17/#_13","title":"\u30bb\u30c3\u30c8\u4e2d\u5fc3\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8a2d\u8a08","text":"<p>\u5927\u91cf\u30c7\u30fc\u30bf\u3092\u52b9\u7387\u7684\u306b\u51e6\u7406\u3059\u308b\u306b\u306f\u3001\u30eb\u30fc\u30d7\u51e6\u7406\u3088\u308a\u3082\u30bb\u30c3\u30c8\u4e2d\u5fc3\u51e6\u7406\u304c\u6709\u52b9\u3067\u3059\u3002</p>"},{"location":"article/part3/chapter17/#_14","title":"\u30eb\u30fc\u30d7\u51e6\u7406\uff08\u975e\u52b9\u7387\uff09","text":"<p>\u51e6\u7406\u65b9\u5f0f\uff1a 1. \u58f2\u4e0a\u30c7\u30fc\u30bf\u30921\u4ef6\u305a\u3064\u8aad\u307f\u8fbc\u3080 2. \u5404\u58f2\u4e0a\u306b\u5bfe\u3057\u3066\u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf\u3092\u691c\u7d22 3. 1\u4ef6\u305a\u3064\u4ed5\u8a33\u30c7\u30fc\u30bf\u3092\u633f\u5165</p> <p>\u554f\u984c\u70b9\uff1a N \u00d7 M \u56de\u306eDB\u64cd\u4f5c\u304c\u767a\u751f\uff08N=\u58f2\u4e0a\u4ef6\u6570\u3001M=\u30d1\u30bf\u30fc\u30f3\u6570\uff09</p>"},{"location":"article/part3/chapter17/#_15","title":"\u30bb\u30c3\u30c8\u4e2d\u5fc3\u51e6\u7406\uff08\u52b9\u7387\u7684\uff09","text":"<p>\u51e6\u7406\u65b9\u5f0f\uff1a 1. \u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf\u30921\u4ef6\u8aad\u307f\u8fbc\u3080\uff0810\u4ef6\uff09 2. \u8a72\u5f53\u30d1\u30bf\u30fc\u30f3\u306e\u58f2\u4e0a\u30c7\u30fc\u30bf\u3092\u4e00\u62ec INSERT 3. \u30d1\u30bf\u30fc\u30f3\u6570\u5206\u306eDB\u64cd\u4f5c\u3067\u5b8c\u4e86</p> <p>\u5229\u70b9\uff1a M \u56de\uff08\u30d1\u30bf\u30fc\u30f3\u6570\uff09\u306eDB\u64cd\u4f5c\u3067\u5b8c\u4e86</p>"},{"location":"article/part3/chapter17/#er","title":"\u81ea\u52d5\u4ed5\u8a33\u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u306eER\u56f3","text":""},{"location":"article/part3/chapter17/#_16","title":"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff1a\u81ea\u52d5\u4ed5\u8a33\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210","text":"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3SQL <pre><code>-- src/main/resources/db/migration/V007__create_auto_journal_tables.sql\n\n-- \u81ea\u52d5\u4ed5\u8a33\u51e6\u7406\u30b9\u30c6\u30fc\u30bf\u30b9\nCREATE TYPE \u81ea\u52d5\u4ed5\u8a33\u30b9\u30c6\u30fc\u30bf\u30b9 AS ENUM ('\u51e6\u7406\u5f85\u3061', '\u51e6\u7406\u4e2d', '\u51e6\u7406\u5b8c\u4e86', '\u8ee2\u8a18\u6e08', '\u30a8\u30e9\u30fc');\n\n-- \u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf\nCREATE TABLE \"\u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf\" (\n    \"\u30d1\u30bf\u30fc\u30f3\u30b3\u30fc\u30c9\" VARCHAR(10) PRIMARY KEY,\n    \"\u30d1\u30bf\u30fc\u30f3\u540d\" VARCHAR(50) NOT NULL,\n    \"\u5546\u54c1\u30b0\u30eb\u30fc\u30d7\" VARCHAR(10) DEFAULT 'ALL',\n    \"\u9867\u5ba2\u30b0\u30eb\u30fc\u30d7\" VARCHAR(10) DEFAULT 'ALL',\n    \"\u58f2\u4e0a\u533a\u5206\" VARCHAR(2) DEFAULT '01',\n    \"\u501f\u65b9\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(5) NOT NULL,\n    \"\u501f\u65b9\u88dc\u52a9\u79d1\u76ee\u8a2d\u5b9a\" VARCHAR(20),\n    \"\u8cb8\u65b9\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(5) NOT NULL,\n    \"\u8cb8\u65b9\u88dc\u52a9\u79d1\u76ee\u8a2d\u5b9a\" VARCHAR(20),\n    \"\u8fd4\u54c1\u6642\u501f\u65b9\u79d1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(5),\n    \"\u8fd4\u54c1\u6642\u8cb8\u65b9\u79d1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(5),\n    \"\u6d88\u8cbb\u7a0e\u51e6\u7406\u533a\u5206\" VARCHAR(2) DEFAULT '01',\n    \"\u6709\u52b9\u958b\u59cb\u65e5\" DATE DEFAULT CURRENT_DATE,\n    \"\u6709\u52b9\u7d42\u4e86\u65e5\" DATE DEFAULT '9999-12-31',\n    \"\u512a\u5148\u9806\u4f4d\" INTEGER DEFAULT 100,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"fk_\u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3_\u501f\u65b9\u79d1\u76ee\"\n        FOREIGN KEY (\"\u501f\u65b9\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\") REFERENCES \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\"(\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"fk_\u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3_\u8cb8\u65b9\u79d1\u76ee\"\n        FOREIGN KEY (\"\u8cb8\u65b9\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\") REFERENCES \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\"(\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\")\n);\n\n-- \u81ea\u52d5\u4ed5\u8a33\u30c7\u30fc\u30bf\nCREATE TABLE \"\u81ea\u52d5\u4ed5\u8a33\u30c7\u30fc\u30bf\" (\n    \"\u81ea\u52d5\u4ed5\u8a33\u756a\u53f7\" VARCHAR(15) PRIMARY KEY,\n    \"\u58f2\u4e0a\u756a\u53f7\" VARCHAR(10) NOT NULL,\n    \"\u58f2\u4e0a\u884c\u756a\u53f7\" SMALLINT NOT NULL,\n    \"\u30d1\u30bf\u30fc\u30f3\u30b3\u30fc\u30c9\" VARCHAR(10) NOT NULL,\n    \"\u8d77\u7968\u65e5\" DATE NOT NULL,\n    \"\u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206\" \u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206 NOT NULL,\n    \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(5) NOT NULL,\n    \"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(10),\n    \"\u90e8\u9580\u30b3\u30fc\u30c9\" VARCHAR(5),\n    \"\u4ed5\u8a33\u91d1\u984d\" DECIMAL(14,2) NOT NULL,\n    \"\u6d88\u8cbb\u7a0e\u984d\" DECIMAL(14,2) DEFAULT 0,\n    \"\u51e6\u7406\u30b9\u30c6\u30fc\u30bf\u30b9\" \u81ea\u52d5\u4ed5\u8a33\u30b9\u30c6\u30fc\u30bf\u30b9 DEFAULT '\u51e6\u7406\u5f85\u3061' NOT NULL,\n    \"\u8ee2\u8a18\u6e08\u30d5\u30e9\u30b0\" SMALLINT DEFAULT 0,\n    \"\u8ee2\u8a18\u65e5\" DATE,\n    \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\" VARCHAR(10),\n    \"\u30a8\u30e9\u30fc\u30b3\u30fc\u30c9\" VARCHAR(10),\n    \"\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\" VARCHAR(200),\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"fk_\u81ea\u52d5\u4ed5\u8a33_\u30d1\u30bf\u30fc\u30f3\"\n        FOREIGN KEY (\"\u30d1\u30bf\u30fc\u30f3\u30b3\u30fc\u30c9\") REFERENCES \"\u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf\"(\"\u30d1\u30bf\u30fc\u30f3\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"fk_\u81ea\u52d5\u4ed5\u8a33_\u52d8\u5b9a\u79d1\u76ee\"\n        FOREIGN KEY (\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\") REFERENCES \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\"(\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"fk_\u81ea\u52d5\u4ed5\u8a33_\u90e8\u9580\"\n        FOREIGN KEY (\"\u90e8\u9580\u30b3\u30fc\u30c9\") REFERENCES \"\u90e8\u9580\u30de\u30b9\u30bf\"(\"\u90e8\u9580\u30b3\u30fc\u30c9\")\n);\n\n-- \u81ea\u52d5\u4ed5\u8a33\u51e6\u7406\u5c65\u6b74\nCREATE TABLE \"\u81ea\u52d5\u4ed5\u8a33\u51e6\u7406\u5c65\u6b74\" (\n    \"\u51e6\u7406\u756a\u53f7\" VARCHAR(15) PRIMARY KEY,\n    \"\u51e6\u7406\u65e5\u6642\" TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    \"\u51e6\u7406\u5bfe\u8c61\u958b\u59cb\u65e5\" DATE NOT NULL,\n    \"\u51e6\u7406\u5bfe\u8c61\u7d42\u4e86\u65e5\" DATE NOT NULL,\n    \"\u51e6\u7406\u4ef6\u6570\" INTEGER DEFAULT 0,\n    \"\u6210\u529f\u4ef6\u6570\" INTEGER DEFAULT 0,\n    \"\u30a8\u30e9\u30fc\u4ef6\u6570\" INTEGER DEFAULT 0,\n    \"\u51e6\u7406\u91d1\u984d\u5408\u8a08\" DECIMAL(15,2) DEFAULT 0,\n    \"\u51e6\u7406\u8005\" VARCHAR(50),\n    \"\u5099\u8003\" TEXT,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"idx_\u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3_\u5546\u54c1\u30b0\u30eb\u30fc\u30d7\" ON \"\u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf\"(\"\u5546\u54c1\u30b0\u30eb\u30fc\u30d7\");\nCREATE INDEX \"idx_\u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3_\u9867\u5ba2\u30b0\u30eb\u30fc\u30d7\" ON \"\u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf\"(\"\u9867\u5ba2\u30b0\u30eb\u30fc\u30d7\");\nCREATE INDEX \"idx_\u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3_\u512a\u5148\u9806\u4f4d\" ON \"\u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf\"(\"\u512a\u5148\u9806\u4f4d\");\nCREATE INDEX \"idx_\u81ea\u52d5\u4ed5\u8a33_\u58f2\u4e0a\u756a\u53f7\" ON \"\u81ea\u52d5\u4ed5\u8a33\u30c7\u30fc\u30bf\"(\"\u58f2\u4e0a\u756a\u53f7\");\nCREATE INDEX \"idx_\u81ea\u52d5\u4ed5\u8a33_\u51e6\u7406\u30b9\u30c6\u30fc\u30bf\u30b9\" ON \"\u81ea\u52d5\u4ed5\u8a33\u30c7\u30fc\u30bf\"(\"\u51e6\u7406\u30b9\u30c6\u30fc\u30bf\u30b9\");\nCREATE INDEX \"idx_\u81ea\u52d5\u4ed5\u8a33_\u8ee2\u8a18\u6e08\u30d5\u30e9\u30b0\" ON \"\u81ea\u52d5\u4ed5\u8a33\u30c7\u30fc\u30bf\"(\"\u8ee2\u8a18\u6e08\u30d5\u30e9\u30b0\");\nCREATE INDEX \"idx_\u81ea\u52d5\u4ed5\u8a33_\u8d77\u7968\u65e5\" ON \"\u81ea\u52d5\u4ed5\u8a33\u30c7\u30fc\u30bf\"(\"\u8d77\u7968\u65e5\");\n</code></pre>"},{"location":"article/part3/chapter17/#174","title":"17.4 \u58f2\u4e0a\u4f1d\u7968\u304b\u3089\u4ed5\u8a33\u4f1d\u7968\u3078\u306e\u8ee2\u8a18\u30ed\u30b8\u30c3\u30af","text":""},{"location":"article/part3/chapter17/#_17","title":"\u660e\u7d30\u884c\u306e\u5206\u89e3\u3068\u96c6\u7d04","text":"<p>\u58f2\u4e0a\u4f1d\u7968\u306e\u660e\u7d30\u884c\u3092\u3001\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3\u306b\u57fa\u3065\u3044\u3066\u501f\u65b9\u30fb\u8cb8\u65b9\u306b\u5206\u89e3\u3057\u307e\u3059\u3002</p>"},{"location":"article/part3/chapter17/#_18","title":"\u58f2\u4e0a\u4f1d\u7968\u306e\u4f8b","text":"\u9805\u76ee \u5024 \u4f1d\u7968\u65e5\u4ed8 2024/04/01 \u9867\u5ba2 DBM\u30d5\u30fc\u30c9\u65b0\u5bbf \u660e\u7d301 \u3044\u3061\u3054\u84b8\u7f36\uff08\u52a0\u5de5\u54c1\uff091,000\u500b \u00d7 1,000\u5186 = 1,000,000\u5186 \u660e\u7d302 \u30a2\u30b9\u30d1\u30e9\uff08\u751f\u9bae\u54c1\uff09200\u500b \u00d7 10,000\u5186 = 2,000,000\u5186 \u660e\u7d303 \u3055\u3056\u3048\u306e\u30a8\u30b9\u30ab\u30eb\u30b4\uff08\u52a0\u5de5\u54c1\uff091,500\u500b \u00d7 100\u5186 = 150,000\u5186 \u5408\u8a08 3,150,000\u5186\uff08\u7a0e\u629c\uff09+ \u6d88\u8cbb\u7a0e 315,000\u5186 = 3,465,000\u5186\uff08\u7a0e\u8fbc\uff09"},{"location":"article/part3/chapter17/#_19","title":"\u4ed5\u8a33\u4f1d\u7968\u3078\u306e\u5909\u63db","text":""},{"location":"article/part3/chapter17/#_20","title":"\u501f\u65b9\uff08\u58f2\u639b\u91d1\uff09\u3068\u8cb8\u65b9\uff08\u58f2\u4e0a\uff09\u306e\u5c55\u958b","text":"\u501f\u65b9\u79d1\u76ee \u501f\u65b9\u91d1\u984d \u8cb8\u65b9\u79d1\u76ee \u8cb8\u65b9\u91d1\u984d \u6458\u8981 \u58f2\u639b\u91d1/DBM\u30d5\u30fc\u30c9\u672c\u793e 3,465,000 \u58f2\u4e0a\u8a08\u4e0a \u58f2\u4e0a\u52a0\u5de5\u54c1/DBM\u30d5\u30fc\u30c9\u65b0\u5bbf 1,150,000 \u3044\u3061\u3054\u84b8\u7f36\u30fb\u3055\u3056\u3048 \u58f2\u4e0a\u751f\u9bae\u54c1/DBM\u30d5\u30fc\u30c9\u65b0\u5bbf 2,000,000 \u30a2\u30b9\u30d1\u30e9 \u4eee\u53d7\u6d88\u8cbb\u7a0e 315,000 \u6d88\u8cbb\u7a0e10%"},{"location":"article/part3/chapter17/#_21","title":"\u6d88\u8cbb\u7a0e\u306e\u6309\u5206\u8a08\u7b97","text":"<p>\u6d88\u8cbb\u7a0e\u984d\u306f\u3001\u660e\u7d30\u884c\u3054\u3068\u306e\u7a0e\u629c\u91d1\u984d\u306b\u6bd4\u4f8b\u3057\u3066\u6309\u5206\u3057\u307e\u3059\u3002</p> <pre><code>\u6d88\u8cbb\u7a0e\u6309\u5206\u8a08\u7b97\uff1a\n- \u52a0\u5de5\u54c1\u5408\u8a08: 1,150,000\u5186 \u2192 \u6d88\u8cbb\u7a0e: 115,000\u5186\n- \u751f\u9bae\u54c1\u5408\u8a08: 2,000,000\u5186 \u2192 \u6d88\u8cbb\u7a0e: 200,000\u5186\n- \u5408\u8a08\u6d88\u8cbb\u7a0e: 315,000\u5186\n</code></pre>"},{"location":"article/part3/chapter17/#_22","title":"\u8cb8\u501f\u4e00\u81f4\u306e\u539f\u5247","text":"<p>\u4ed5\u8a33\u30c7\u30fc\u30bf\u306f\u5fc5\u305a\u501f\u65b9\u5408\u8a08\u3068\u8cb8\u65b9\u5408\u8a08\u304c\u4e00\u81f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> <pre><code>\u501f\u65b9\u5408\u8a08: 3,465,000\u5186\n\u8cb8\u65b9\u5408\u8a08: 1,150,000 + 2,000,000 + 315,000 = 3,465,000\u5186\n\u2192 \u8cb8\u501f\u4e00\u81f4 OK\n</code></pre>"},{"location":"article/part3/chapter17/#tdd","title":"TDD \u306b\u3088\u308b\u81ea\u52d5\u4ed5\u8a33\u51e6\u7406\u306e\u5b9f\u88c5","text":""},{"location":"article/part3/chapter17/#_23","title":"\u30c9\u30e1\u30a4\u30f3\u5c64\uff1a\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3","text":"\u81ea\u52d5\u4ed5\u8a33\u30b9\u30c6\u30fc\u30bf\u30b9 Enum <pre><code>// src/main/java/com/example/accounting/domain/model/autojournal/AutoJournalStatus.java\npackage com.example.accounting.domain.model.autojournal;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum AutoJournalStatus {\n    PENDING(\"\u51e6\u7406\u5f85\u3061\"),\n    PROCESSING(\"\u51e6\u7406\u4e2d\"),\n    COMPLETED(\"\u51e6\u7406\u5b8c\u4e86\"),\n    POSTED(\"\u8ee2\u8a18\u6e08\"),\n    ERROR(\"\u30a8\u30e9\u30fc\");\n\n    private final String displayName;\n\n    public static AutoJournalStatus fromDisplayName(String displayName) {\n        for (AutoJournalStatus status : values()) {\n            if (status.displayName.equals(displayName)) {\n                return status;\n            }\n        }\n        throw new IllegalArgumentException(\"\u4e0d\u6b63\u306a\u81ea\u52d5\u4ed5\u8a33\u30b9\u30c6\u30fc\u30bf\u30b9: \" + displayName);\n    }\n}\n</code></pre> \u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/accounting/domain/model/autojournal/AutoJournalPattern.java\npackage com.example.accounting.domain.model.autojournal;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class AutoJournalPattern {\n    private String patternCode;           // \u30d1\u30bf\u30fc\u30f3\u30b3\u30fc\u30c9\n    private String patternName;           // \u30d1\u30bf\u30fc\u30f3\u540d\n    private String productGroup;          // \u5546\u54c1\u30b0\u30eb\u30fc\u30d7\n    private String customerGroup;         // \u9867\u5ba2\u30b0\u30eb\u30fc\u30d7\n    private String salesType;             // \u58f2\u4e0a\u533a\u5206\n    private String debitAccountCode;      // \u501f\u65b9\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\n    private String debitSubAccountSetting; // \u501f\u65b9\u88dc\u52a9\u79d1\u76ee\u8a2d\u5b9a\n    private String creditAccountCode;     // \u8cb8\u65b9\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\n    private String creditSubAccountSetting; // \u8cb8\u65b9\u88dc\u52a9\u79d1\u76ee\u8a2d\u5b9a\n    private String returnDebitAccountCode; // \u8fd4\u54c1\u6642\u501f\u65b9\u79d1\u76ee\u30b3\u30fc\u30c9\n    private String returnCreditAccountCode; // \u8fd4\u54c1\u6642\u8cb8\u65b9\u79d1\u76ee\u30b3\u30fc\u30c9\n    private String taxProcessingType;     // \u6d88\u8cbb\u7a0e\u51e6\u7406\u533a\u5206\n    private LocalDate validFrom;          // \u6709\u52b9\u958b\u59cb\u65e5\n    private LocalDate validTo;            // \u6709\u52b9\u7d42\u4e86\u65e5\n    private Integer priority;             // \u512a\u5148\u9806\u4f4d\n    private LocalDateTime createdAt;      // \u4f5c\u6210\u65e5\u6642\n    private LocalDateTime updatedAt;      // \u66f4\u65b0\u65e5\u6642\n\n    /**\n     * \u6307\u5b9a\u65e5\u4ed8\u306b\u6709\u52b9\u304b\u3069\u3046\u304b\u3092\u5224\u5b9a\n     */\n    public boolean isValidAt(LocalDate date) {\n        return !date.isBefore(validFrom) &amp;&amp; !date.isAfter(validTo);\n    }\n\n    /**\n     * \u5546\u54c1\u30b0\u30eb\u30fc\u30d7\u3068\u9867\u5ba2\u30b0\u30eb\u30fc\u30d7\u306b\u30de\u30c3\u30c1\u3059\u308b\u304b\u5224\u5b9a\n     */\n    public boolean matches(String productGroup, String customerGroup) {\n        boolean productMatch = \"ALL\".equals(this.productGroup) ||\n                               this.productGroup.equals(productGroup);\n        boolean customerMatch = \"ALL\".equals(this.customerGroup) ||\n                                this.customerGroup.equals(customerGroup);\n        return productMatch &amp;&amp; customerMatch;\n    }\n}\n</code></pre> \u81ea\u52d5\u4ed5\u8a33\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/accounting/domain/model/autojournal/AutoJournalEntry.java\npackage com.example.accounting.domain.model.autojournal;\n\nimport com.example.accounting.domain.model.account.DebitCreditType;\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class AutoJournalEntry {\n    private String autoJournalNumber;     // \u81ea\u52d5\u4ed5\u8a33\u756a\u53f7\n    private String salesNumber;           // \u58f2\u4e0a\u756a\u53f7\n    private Integer salesLineNumber;      // \u58f2\u4e0a\u884c\u756a\u53f7\n    private String patternCode;           // \u30d1\u30bf\u30fc\u30f3\u30b3\u30fc\u30c9\n    private LocalDate postingDate;        // \u8d77\u7968\u65e5\n    private DebitCreditType debitCreditType; // \u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206\n    private String accountCode;           // \u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\n    private String subAccountCode;        // \u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\n    private String departmentCode;        // \u90e8\u9580\u30b3\u30fc\u30c9\n    private BigDecimal amount;            // \u4ed5\u8a33\u91d1\u984d\n    private BigDecimal taxAmount;         // \u6d88\u8cbb\u7a0e\u984d\n    private AutoJournalStatus status;     // \u51e6\u7406\u30b9\u30c6\u30fc\u30bf\u30b9\n    private Boolean postedFlag;           // \u8ee2\u8a18\u6e08\u30d5\u30e9\u30b0\n    private LocalDate postedDate;         // \u8ee2\u8a18\u65e5\n    private String journalVoucherNumber;  // \u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\n    private String errorCode;             // \u30a8\u30e9\u30fc\u30b3\u30fc\u30c9\n    private String errorMessage;          // \u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\n    private LocalDateTime createdAt;      // \u4f5c\u6210\u65e5\u6642\n    private LocalDateTime updatedAt;      // \u66f4\u65b0\u65e5\u6642\n}\n</code></pre> \u81ea\u52d5\u4ed5\u8a33\u51e6\u7406\u5c65\u6b74\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/accounting/domain/model/autojournal/AutoJournalHistory.java\npackage com.example.accounting.domain.model.autojournal;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class AutoJournalHistory {\n    private String processNumber;         // \u51e6\u7406\u756a\u53f7\n    private LocalDateTime processDateTime; // \u51e6\u7406\u65e5\u6642\n    private LocalDate targetFromDate;     // \u51e6\u7406\u5bfe\u8c61\u958b\u59cb\u65e5\n    private LocalDate targetToDate;       // \u51e6\u7406\u5bfe\u8c61\u7d42\u4e86\u65e5\n    private Integer totalCount;           // \u51e6\u7406\u4ef6\u6570\n    private Integer successCount;         // \u6210\u529f\u4ef6\u6570\n    private Integer errorCount;           // \u30a8\u30e9\u30fc\u4ef6\u6570\n    private BigDecimal totalAmount;       // \u51e6\u7406\u91d1\u984d\u5408\u8a08\n    private String processedBy;           // \u51e6\u7406\u8005\n    private String remarks;               // \u5099\u8003\n    private LocalDateTime createdAt;      // \u4f5c\u6210\u65e5\u6642\n}\n</code></pre>"},{"location":"article/part3/chapter17/#_24","title":"\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9","text":"\u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3\u306e\u30c6\u30b9\u30c8 <pre><code>// src/test/java/com/example/accounting/domain/model/autojournal/AutoJournalPatternTest.java\npackage com.example.accounting.domain.model.autojournal;\n\nimport org.junit.jupiter.api.DisplayName;\nimport org.junit.jupiter.api.Nested;\nimport org.junit.jupiter.api.Test;\n\nimport java.time.LocalDate;\n\nimport static org.assertj.core.api.Assertions.*;\n\n@DisplayName(\"\u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3\")\nclass AutoJournalPatternTest {\n\n    @Nested\n    @DisplayName(\"\u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1\u30f3\u30b0\")\n    class PatternMatching {\n\n        @Test\n        @DisplayName(\"\u5546\u54c1\u30b0\u30eb\u30fc\u30d7ALL\u306f\u5168\u3066\u306e\u5546\u54c1\u30b0\u30eb\u30fc\u30d7\u306b\u30de\u30c3\u30c1\u3059\u308b\")\n        void shouldMatchAllProductGroups() {\n            // Arrange: \u5546\u54c1\u30b0\u30eb\u30fc\u30d7ALL\u306e\u30d1\u30bf\u30fc\u30f3\n            var pattern = AutoJournalPattern.builder()\n                .patternCode(\"P001\")\n                .productGroup(\"ALL\")\n                .customerGroup(\"ALL\")\n                .build();\n\n            // Act &amp; Assert\n            assertThat(pattern.matches(\"\u52a0\u5de5\u54c1\", \"\u4e00\u822c\")).isTrue();\n            assertThat(pattern.matches(\"\u751f\u9bae\u54c1\", \"\u4e00\u822c\")).isTrue();\n            assertThat(pattern.matches(\"\u96d1\u8ca8\", \"\u7279\u7d04\u5e97\")).isTrue();\n        }\n\n        @Test\n        @DisplayName(\"\u7279\u5b9a\u306e\u5546\u54c1\u30b0\u30eb\u30fc\u30d7\u306e\u307f\u306b\u30de\u30c3\u30c1\u3059\u308b\")\n        void shouldMatchSpecificProductGroup() {\n            // Arrange: \u52a0\u5de5\u54c1\u5c02\u7528\u30d1\u30bf\u30fc\u30f3\n            var pattern = AutoJournalPattern.builder()\n                .patternCode(\"P002\")\n                .productGroup(\"\u52a0\u5de5\u54c1\")\n                .customerGroup(\"ALL\")\n                .build();\n\n            // Act &amp; Assert\n            assertThat(pattern.matches(\"\u52a0\u5de5\u54c1\", \"\u4e00\u822c\")).isTrue();\n            assertThat(pattern.matches(\"\u751f\u9bae\u54c1\", \"\u4e00\u822c\")).isFalse();\n        }\n\n        @Test\n        @DisplayName(\"\u5546\u54c1\u30b0\u30eb\u30fc\u30d7\u3068\u9867\u5ba2\u30b0\u30eb\u30fc\u30d7\u306e\u4e21\u65b9\u3067\u30de\u30c3\u30c1\u30f3\u30b0\u3059\u308b\")\n        void shouldMatchBothProductAndCustomerGroup() {\n            // Arrange: \u7279\u5b9a\u306e\u7d44\u307f\u5408\u308f\u305b\u30d1\u30bf\u30fc\u30f3\n            var pattern = AutoJournalPattern.builder()\n                .patternCode(\"P003\")\n                .productGroup(\"\u52a0\u5de5\u54c1\")\n                .customerGroup(\"\u7279\u7d04\u5e97\")\n                .build();\n\n            // Act &amp; Assert\n            assertThat(pattern.matches(\"\u52a0\u5de5\u54c1\", \"\u7279\u7d04\u5e97\")).isTrue();\n            assertThat(pattern.matches(\"\u52a0\u5de5\u54c1\", \"\u4e00\u822c\")).isFalse();\n            assertThat(pattern.matches(\"\u751f\u9bae\u54c1\", \"\u7279\u7d04\u5e97\")).isFalse();\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u6709\u52b9\u671f\u9593\u30c1\u30a7\u30c3\u30af\")\n    class ValidityCheck {\n\n        @Test\n        @DisplayName(\"\u6709\u52b9\u671f\u9593\u5185\u306e\u65e5\u4ed8\u3067true\u3092\u8fd4\u3059\")\n        void shouldReturnTrueForValidDate() {\n            // Arrange\n            var pattern = AutoJournalPattern.builder()\n                .patternCode(\"P001\")\n                .validFrom(LocalDate.of(2024, 1, 1))\n                .validTo(LocalDate.of(2024, 12, 31))\n                .build();\n\n            // Act &amp; Assert\n            assertThat(pattern.isValidAt(LocalDate.of(2024, 6, 15))).isTrue();\n            assertThat(pattern.isValidAt(LocalDate.of(2024, 1, 1))).isTrue();\n            assertThat(pattern.isValidAt(LocalDate.of(2024, 12, 31))).isTrue();\n        }\n\n        @Test\n        @DisplayName(\"\u6709\u52b9\u671f\u9593\u5916\u306e\u65e5\u4ed8\u3067false\u3092\u8fd4\u3059\")\n        void shouldReturnFalseForInvalidDate() {\n            // Arrange\n            var pattern = AutoJournalPattern.builder()\n                .patternCode(\"P001\")\n                .validFrom(LocalDate.of(2024, 1, 1))\n                .validTo(LocalDate.of(2024, 12, 31))\n                .build();\n\n            // Act &amp; Assert\n            assertThat(pattern.isValidAt(LocalDate.of(2023, 12, 31))).isFalse();\n            assertThat(pattern.isValidAt(LocalDate.of(2025, 1, 1))).isFalse();\n        }\n    }\n}\n</code></pre>"},{"location":"article/part3/chapter17/#output-port","title":"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff08Output Port\uff09","text":"\u81ea\u52d5\u4ed5\u8a33\u30ea\u30dd\u30b8\u30c8\u30ea\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9 <pre><code>// src/main/java/com/example/accounting/application/port/out/AutoJournalRepository.java\npackage com.example.accounting.application.port.out;\n\nimport com.example.accounting.domain.model.autojournal.*;\n\nimport java.time.LocalDate;\nimport java.util.List;\nimport java.util.Optional;\n\n/**\n * \u81ea\u52d5\u4ed5\u8a33\u30ea\u30dd\u30b8\u30c8\u30ea\uff08Output Port\uff09\n */\npublic interface AutoJournalRepository {\n\n    // \u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf\u64cd\u4f5c\n    void savePattern(AutoJournalPattern pattern);\n\n    Optional&lt;AutoJournalPattern&gt; findPatternByCode(String patternCode);\n\n    List&lt;AutoJournalPattern&gt; findAllPatterns();\n\n    List&lt;AutoJournalPattern&gt; findValidPatterns(LocalDate date);\n\n    void updatePattern(AutoJournalPattern pattern);\n\n    void deletePattern(String patternCode);\n\n    // \u81ea\u52d5\u4ed5\u8a33\u30a8\u30f3\u30c8\u30ea\u64cd\u4f5c\n    void saveEntry(AutoJournalEntry entry);\n\n    Optional&lt;AutoJournalEntry&gt; findEntryByNumber(String autoJournalNumber);\n\n    List&lt;AutoJournalEntry&gt; findEntriesBySalesNumber(String salesNumber);\n\n    List&lt;AutoJournalEntry&gt; findUnpostedEntries();\n\n    List&lt;AutoJournalEntry&gt; findUnpostedEntriesByDate(LocalDate date);\n\n    List&lt;AutoJournalEntry&gt; findEntriesByStatus(AutoJournalStatus status);\n\n    void updateEntry(AutoJournalEntry entry);\n\n    // \u51e6\u7406\u5c65\u6b74\u64cd\u4f5c\n    void saveHistory(AutoJournalHistory history);\n\n    Optional&lt;AutoJournalHistory&gt; findHistoryByNumber(String processNumber);\n\n    List&lt;AutoJournalHistory&gt; findHistoriesByDateRange(LocalDate fromDate, LocalDate toDate);\n}\n</code></pre>"},{"location":"article/part3/chapter17/#17_1","title":"\u7b2c17\u7ae0\u306e\u307e\u3068\u3081","text":""},{"location":"article/part3/chapter17/#_25","title":"\u4f5c\u6210\u3057\u305f\u30c6\u30fc\u30d6\u30eb","text":"\u30c6\u30fc\u30d6\u30eb\u540d \u8aac\u660e <code>\u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf</code> \u58f2\u4e0a\u30c7\u30fc\u30bf\u304b\u3089\u4ed5\u8a33\u30c7\u30fc\u30bf\u3078\u306e\u5909\u63db\u30eb\u30fc\u30eb <code>\u81ea\u52d5\u4ed5\u8a33\u30c7\u30fc\u30bf</code> \u5909\u63db\u3055\u308c\u305f\u4ed5\u8a33\u30c7\u30fc\u30bf\uff08\u8ee2\u8a18\u524d\u306e\u4e2d\u9593\u30c7\u30fc\u30bf\uff09 <code>\u81ea\u52d5\u4ed5\u8a33\u51e6\u7406\u5c65\u6b74</code> \u81ea\u52d5\u4ed5\u8a33\u51e6\u7406\u306e\u5b9f\u884c\u5c65\u6b74"},{"location":"article/part3/chapter17/#er_1","title":"ER\u56f3","text":""},{"location":"article/part3/chapter17/#_26","title":"\u8a2d\u8a08\u306e\u30dd\u30a4\u30f3\u30c8","text":"<ol> <li>\u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1\u30f3\u30b0: \u5546\u54c1\u30b0\u30eb\u30fc\u30d7 \u00d7 \u9867\u5ba2\u30b0\u30eb\u30fc\u30d7\u3067\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3\u3092\u81ea\u52d5\u5224\u5b9a</li> <li>\u512a\u5148\u9806\u4f4d: \u8907\u6570\u30d1\u30bf\u30fc\u30f3\u304c\u8a72\u5f53\u3059\u308b\u5834\u5408\u306f\u512a\u5148\u9806\u4f4d\u3067\u6c7a\u5b9a</li> <li>\u6709\u52b9\u671f\u9593\u7ba1\u7406: \u30d1\u30bf\u30fc\u30f3\u306e\u6709\u52b9\u958b\u59cb\u65e5\u30fb\u7d42\u4e86\u65e5\u3067\u671f\u9593\u7ba1\u7406</li> <li>\u30bb\u30c3\u30c8\u4e2d\u5fc3\u51e6\u7406: \u5927\u91cf\u30c7\u30fc\u30bf\u3092\u52b9\u7387\u7684\u306b\u51e6\u7406</li> <li>\u4e2d\u9593\u30c6\u30fc\u30d6\u30eb: \u8ee2\u8a18\u524d\u306e\u81ea\u52d5\u4ed5\u8a33\u30c7\u30fc\u30bf\u3092\u4fdd\u6301\u3057\u3066\u78ba\u8a8d\u53ef\u80fd</li> <li>\u51e6\u7406\u5c65\u6b74: \u81ea\u52d5\u4ed5\u8a33\u51e6\u7406\u306e\u5b9f\u884c\u5c65\u6b74\u3092\u8a18\u9332</li> <li>\u30a8\u30e9\u30fc\u7ba1\u7406: \u30d1\u30bf\u30fc\u30f3\u4e0d\u9069\u5408\u6642\u306e\u30a8\u30e9\u30fc\u60c5\u5831\u3092\u8a18\u9332</li> </ol>"},{"location":"article/part3/chapter17/#_27","title":"\u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af","text":"\u30e1\u30bd\u30c3\u30c9 \u8aac\u660e <code>isValidAt(date)</code> \u6307\u5b9a\u65e5\u4ed8\u306b\u6709\u52b9\u304b\u3069\u3046\u304b\u3092\u5224\u5b9a <code>matches(productGroup, customerGroup)</code> \u5546\u54c1\u30b0\u30eb\u30fc\u30d7\u3068\u9867\u5ba2\u30b0\u30eb\u30fc\u30d7\u306b\u30de\u30c3\u30c1\u3059\u308b\u304b\u5224\u5b9a"},{"location":"article/part3/chapter17/#_28","title":"\u6b21\u7ae0\u306e\u4e88\u544a","text":"<p>\u7b2c18\u7ae0\u3067\u306f\u3001\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u306e\u8a2d\u8a08\u306b\u9032\u307f\u307e\u3059\u3002\u65e5\u6b21\u6b8b\u9ad8\u30fb\u6708\u6b21\u6b8b\u9ad8\u306e\u7ba1\u7406\u3001\u6b8b\u9ad8\u66f4\u65b0\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3001\u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868\u306e\u51fa\u529b\u3092 TDD \u3067\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\u3002</p>"},{"location":"article/part3/chapter18/","title":"\u7b2c18\u7ae0 \u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u306e\u8a2d\u8a08","text":""},{"location":"article/part3/chapter18/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306b\u304a\u3051\u308b\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u306e\u8a2d\u8a08\u3092\u884c\u3044\u307e\u3059\u3002\u6b8b\u9ad8\u7ba1\u7406\u306f\u3001\u4ed5\u8a33\u30c7\u30fc\u30bf\u304b\u3089\u5404\u52d8\u5b9a\u79d1\u76ee\u306e\u73fe\u5728\u6b8b\u9ad8\u3092\u52b9\u7387\u7684\u306b\u628a\u63e1\u3059\u308b\u305f\u3081\u306e\u4ed5\u7d44\u307f\u3067\u3059\u3002\u65e5\u6b21\u6b8b\u9ad8\u3068\u6708\u6b21\u6b8b\u9ad8\u306e2\u968e\u5c64\u3067\u7ba1\u7406\u3057\u3001\u65e5\u8a08\u8868\u3084\u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868\u306e\u51fa\u529b\u306b\u5bfe\u5fdc\u3057\u307e\u3059\u3002</p>"},{"location":"article/part3/chapter18/#181","title":"18.1 \u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u306e\u8a2d\u8a08","text":""},{"location":"article/part3/chapter18/#1811","title":"18.1.1 \u65e5\u6b21\u6b8b\u9ad8\u30c6\u30fc\u30d6\u30eb\u306e\u8a2d\u8a08\u65b9\u91dd","text":"<p>\u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u306f\u3001\u4ed5\u8a33\u30c7\u30fc\u30bf\u3092\u8d77\u7968\u65e5\u5358\u4f4d\u3067\u96c6\u8a08\u3057\u305f\u7d50\u679c\u3092\u4fdd\u6301\u3059\u308b\u30c6\u30fc\u30d6\u30eb\u3067\u3059\u3002\u4ed5\u8a33\u4f1d\u7968\u3092\u767b\u9332\u3059\u308b\u305f\u3073\u306b\u90fd\u5ea6\u96c6\u8a08\u3059\u308b\u306e\u3067\u306f\u306a\u304f\u3001\u4e8b\u524d\u96c6\u8a08\u30c6\u30fc\u30d6\u30eb\u3068\u3057\u3066\u6b8b\u9ad8\u3092\u4fdd\u6301\u3059\u308b\u3053\u3068\u3067\u3001\u65e5\u8a08\u8868\u306e\u51fa\u529b\u3092\u9ad8\u901f\u5316\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part3/chapter18/#1812","title":"18.1.2 \u8907\u5408\u4e3b\u30ad\u30fc\u306b\u3088\u308b\u591a\u6b21\u5143\u7ba1\u7406","text":"<p>\u65e5\u6b21\u6b8b\u9ad8\u30c6\u30fc\u30d6\u30eb\u306f\u3001\u4ee5\u4e0b\u306e6\u3064\u306e\u30ab\u30e9\u30e0\u3067\u8907\u5408\u4e3b\u30ad\u30fc\u3092\u69cb\u6210\u3057\u307e\u3059\u3002</p> \u30ab\u30e9\u30e0 \u8aac\u660e \u4f8b \u8d77\u7968\u65e5 \u4ed5\u8a33\u306e\u8d77\u7968\u65e5 2024-04-01 \u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9 \u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u306e\u30b3\u30fc\u30c9 11110 \u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9 \u88dc\u52a9\u7684\u306a\u5206\u985e\uff08\u7a7a\u6587\u5b57\u53ef\uff09 \u7a7a\u6587\u5b57 \u90e8\u9580\u30b3\u30fc\u30c9 \u90e8\u9580\u30de\u30b9\u30bf\u306e\u30b3\u30fc\u30c9 10100 \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9 \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5358\u4f4d\u7ba1\u7406\uff08\u7a7a\u6587\u5b57\u53ef\uff09 P001 \u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0 \u6c7a\u7b97\u4ed5\u8a33\u304b\u5426\u304b false <p>\u3053\u306e\u8a2d\u8a08\u306b\u3088\u308a\u3001\u540c\u3058\u52d8\u5b9a\u79d1\u76ee\u3067\u3082\u4ee5\u4e0b\u306e\u7c92\u5ea6\u3067\u6b8b\u9ad8\u3092\u5206\u3051\u3066\u7ba1\u7406\u3067\u304d\u307e\u3059\u3002</p> <ul> <li>\u90e8\u9580\u5225\u306e\u58f2\u4e0a\u9ad8</li> <li>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5225\u306e\u539f\u4fa1</li> <li>\u901a\u5e38\u4ed5\u8a33\u3068\u6c7a\u7b97\u4ed5\u8a33\u306e\u5206\u96e2</li> </ul>"},{"location":"article/part3/chapter18/#1813","title":"18.1.3 \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3","text":"V018__create_daily_account_balance_table.sql <pre><code>-- V018__create_daily_account_balance_table.sql\n\n-- \u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u30c6\u30fc\u30d6\u30eb\nCREATE TABLE IF NOT EXISTS \"\u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\" (\n    \"\u8d77\u7968\u65e5\"               DATE NOT NULL,\n    \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\"        VARCHAR(10) NOT NULL,\n    \"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\"        VARCHAR(10) NOT NULL DEFAULT '',\n    \"\u90e8\u9580\u30b3\u30fc\u30c9\"            VARCHAR(10) NOT NULL DEFAULT '00000',\n    \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9\"    VARCHAR(20) NOT NULL DEFAULT '',\n    \"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\"        BOOLEAN NOT NULL DEFAULT FALSE,\n    \"\u501f\u65b9\u91d1\u984d\"             DECIMAL(15, 0) NOT NULL DEFAULT 0,\n    \"\u8cb8\u65b9\u91d1\u984d\"             DECIMAL(15, 0) NOT NULL DEFAULT 0,\n    \"\u4f5c\u6210\u65e5\u6642\"             TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    \"\u66f4\u65b0\u65e5\u6642\"             TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    PRIMARY KEY (\n        \"\u8d77\u7968\u65e5\", \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\",\n        \"\u90e8\u9580\u30b3\u30fc\u30c9\", \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9\", \"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\"\n    ),\n    FOREIGN KEY (\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\") REFERENCES \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\"(\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\"),\n    FOREIGN KEY (\"\u90e8\u9580\u30b3\u30fc\u30c9\") REFERENCES \"\u90e8\u9580\u30de\u30b9\u30bf\"(\"\u90e8\u9580\u30b3\u30fc\u30c9\")\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX idx_daily_balance_date ON \"\u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\"(\"\u8d77\u7968\u65e5\");\nCREATE INDEX idx_daily_balance_account ON \"\u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\"(\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\");\nCREATE INDEX idx_daily_balance_dept ON \"\u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\"(\"\u90e8\u9580\u30b3\u30fc\u30c9\");\n\n-- UPSERT\u7528\u30c8\u30ea\u30ac\u30fc\u95a2\u6570\nCREATE OR REPLACE FUNCTION upsert_daily_account_balance()\nRETURNS TRIGGER AS $$\nBEGIN\n    INSERT INTO \"\u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\" (\n        \"\u8d77\u7968\u65e5\", \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\",\n        \"\u90e8\u9580\u30b3\u30fc\u30c9\", \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9\", \"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\",\n        \"\u501f\u65b9\u91d1\u984d\", \"\u8cb8\u65b9\u91d1\u984d\"\n    ) VALUES (\n        NEW.\"\u8d77\u7968\u65e5\",\n        NEW.\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\",\n        COALESCE(NEW.\"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\", ''),\n        COALESCE(NEW.\"\u90e8\u9580\u30b3\u30fc\u30c9\", '00000'),\n        COALESCE(NEW.\"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9\", ''),\n        COALESCE(NEW.\"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\", FALSE),\n        CASE WHEN NEW.\"\u8cb8\u501f\u533a\u5206\" = '\u501f\u65b9' THEN NEW.\"\u91d1\u984d\" ELSE 0 END,\n        CASE WHEN NEW.\"\u8cb8\u501f\u533a\u5206\" = '\u8cb8\u65b9' THEN NEW.\"\u91d1\u984d\" ELSE 0 END\n    )\n    ON CONFLICT (\n        \"\u8d77\u7968\u65e5\", \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\",\n        \"\u90e8\u9580\u30b3\u30fc\u30c9\", \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9\", \"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\"\n    )\n    DO UPDATE SET\n        \"\u501f\u65b9\u91d1\u984d\" = \"\u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\".\"\u501f\u65b9\u91d1\u984d\" +\n            CASE WHEN NEW.\"\u8cb8\u501f\u533a\u5206\" = '\u501f\u65b9' THEN NEW.\"\u91d1\u984d\" ELSE 0 END,\n        \"\u8cb8\u65b9\u91d1\u984d\" = \"\u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\".\"\u8cb8\u65b9\u91d1\u984d\" +\n            CASE WHEN NEW.\"\u8cb8\u501f\u533a\u5206\" = '\u8cb8\u65b9' THEN NEW.\"\u91d1\u984d\" ELSE 0 END,\n        \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP;\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\nCOMMENT ON TABLE \"\u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\" IS '\u4ed5\u8a33\u30c7\u30fc\u30bf\u3092\u8d77\u7968\u65e5\u5358\u4f4d\u3067\u96c6\u8a08\u3057\u305f\u6b8b\u9ad8\u30c6\u30fc\u30d6\u30eb';\n</code></pre>"},{"location":"article/part3/chapter18/#1814","title":"18.1.4 \u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb","text":"DailyAccountBalance \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/sms/domain/model/accounting/DailyAccountBalance.java\npackage com.example.sms.domain.model.accounting;\n\nimport lombok.*;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n/**\n * \u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class DailyAccountBalance {\n    private LocalDate postingDate;           // \u8d77\u7968\u65e5\n    private String accountCode;              // \u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\n    private String subAccountCode;           // \u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\n    private String departmentCode;           // \u90e8\u9580\u30b3\u30fc\u30c9\n    private String projectCode;              // \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9\n    private Boolean closingJournalFlag;      // \u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\n    private BigDecimal debitAmount;          // \u501f\u65b9\u91d1\u984d\n    private BigDecimal creditAmount;         // \u8cb8\u65b9\u91d1\u984d\n    private LocalDateTime createdAt;         // \u4f5c\u6210\u65e5\u6642\n    private LocalDateTime updatedAt;         // \u66f4\u65b0\u65e5\u6642\n\n    /**\n     * \u8907\u5408\u4e3b\u30ad\u30fc\u30af\u30e9\u30b9\n     */\n    @Data\n    @Builder\n    @NoArgsConstructor\n    @AllArgsConstructor\n    public static class Key {\n        private LocalDate postingDate;\n        private String accountCode;\n        private String subAccountCode;\n        private String departmentCode;\n        private String projectCode;\n        private Boolean closingJournalFlag;\n    }\n\n    /**\n     * \u6b8b\u9ad8\u3092\u8a08\u7b97\u3059\u308b\uff08\u501f\u65b9 - \u8cb8\u65b9\uff09\n     * \u8cc7\u7523\u30fb\u8cbb\u7528\u79d1\u76ee\u306e\u5834\u5408\u306f\u6b63\u306e\u5024\u304c\u6b8b\u9ad8\u5897\u52a0\u3092\u610f\u5473\u3059\u308b\n     */\n    public BigDecimal getBalance() {\n        return debitAmount.subtract(creditAmount);\n    }\n\n    /**\n     * \u6307\u5b9a\u3057\u305f\u8cb8\u501f\u533a\u5206\u3067\u306e\u6b8b\u9ad8\u3092\u53d6\u5f97\n     */\n    public BigDecimal getBalanceByType(DebitCreditType debitCreditType) {\n        if (debitCreditType == DebitCreditType.DEBIT) {\n            return debitAmount.subtract(creditAmount);\n        } else {\n            return creditAmount.subtract(debitAmount);\n        }\n    }\n}\n</code></pre> DailyReportLine\uff08\u65e5\u8a08\u8868\u884c\uff09 <pre><code>// src/main/java/com/example/sms/domain/model/accounting/DailyReportLine.java\npackage com.example.sms.domain.model.accounting;\n\nimport lombok.*;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\n\n/**\n * \u65e5\u8a08\u8868\u306e1\u884c\u3092\u8868\u3059DTO\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class DailyReportLine {\n    private LocalDate postingDate;           // \u8d77\u7968\u65e5\n    private String accountCode;              // \u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\n    private String accountName;              // \u52d8\u5b9a\u79d1\u76ee\u540d\n    private String bsplType;                 // BSPL\u533a\u5206\n    private String debitCreditType;          // \u8cb8\u501f\u533a\u5206\n    private BigDecimal debitTotal;           // \u501f\u65b9\u5408\u8a08\n    private BigDecimal creditTotal;          // \u8cb8\u65b9\u5408\u8a08\n    private BigDecimal balance;              // \u6b8b\u9ad8\n\n    /**\n     * \u52d8\u5b9a\u79d1\u76ee\u306e\u6027\u8cea\u306b\u57fa\u3065\u3044\u305f\u6b8b\u9ad8\u3092\u8a08\u7b97\n     * \u501f\u65b9\u79d1\u76ee\uff08\u8cc7\u7523\u30fb\u8cbb\u7528\uff09: \u501f\u65b9 - \u8cb8\u65b9\n     * \u8cb8\u65b9\u79d1\u76ee\uff08\u8ca0\u50b5\u30fb\u8cc7\u672c\u30fb\u53ce\u76ca\uff09: \u8cb8\u65b9 - \u501f\u65b9\n     */\n    public BigDecimal calculateBalance() {\n        if (\"\u501f\u65b9\".equals(debitCreditType)) {\n            return debitTotal.subtract(creditTotal);\n        } else {\n            return creditTotal.subtract(debitTotal);\n        }\n    }\n}\n</code></pre>"},{"location":"article/part3/chapter18/#1815","title":"18.1.5 \u30ea\u30dd\u30b8\u30c8\u30ea\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9","text":"DailyAccountBalanceRepository\uff08Output Port\uff09 <pre><code>// src/main/java/com/example/sms/application/port/out/DailyAccountBalanceRepository.java\npackage com.example.sms.application.port.out;\n\nimport com.example.sms.domain.model.accounting.DailyAccountBalance;\nimport com.example.sms.domain.model.accounting.DailyReportLine;\n\nimport java.time.LocalDate;\nimport java.util.List;\nimport java.util.Optional;\n\n/**\n * \u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u30ea\u30dd\u30b8\u30c8\u30ea\uff08Output Port\uff09\n */\npublic interface DailyAccountBalanceRepository {\n\n    /**\n     * \u65e5\u6b21\u6b8b\u9ad8\u3092\u4fdd\u5b58\uff08UPSERT\uff09\n     */\n    void upsert(DailyAccountBalance balance);\n\n    /**\n     * \u8907\u5408\u30ad\u30fc\u3067\u691c\u7d22\n     */\n    Optional&lt;DailyAccountBalance&gt; findByKey(DailyAccountBalance.Key key);\n\n    /**\n     * \u8d77\u7968\u65e5\u3067\u691c\u7d22\n     */\n    List&lt;DailyAccountBalance&gt; findByPostingDate(LocalDate postingDate);\n\n    /**\n     * \u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\u3068\u671f\u9593\u3067\u691c\u7d22\n     */\n    List&lt;DailyAccountBalance&gt; findByAccountCodeAndDateRange(\n        String accountCode, LocalDate fromDate, LocalDate toDate);\n\n    /**\n     * \u65e5\u8a08\u8868\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\n     */\n    List&lt;DailyReportLine&gt; getDailyReport(LocalDate postingDate);\n\n    /**\n     * \u5168\u4ef6\u524a\u9664\n     */\n    void deleteAll();\n}\n</code></pre>"},{"location":"article/part3/chapter18/#1816","title":"18.1.6 \u65e5\u8a08\u8868\u306e\u51fa\u529b","text":"<p>\u65e5\u8a08\u8868\u306f\u3001\u7279\u5b9a\u65e5\u306e\u5168\u52d8\u5b9a\u79d1\u76ee\u306b\u3064\u3044\u3066\u501f\u65b9\u5408\u8a08\u30fb\u8cb8\u65b9\u5408\u8a08\u30fb\u6b8b\u9ad8\u3092\u51fa\u529b\u3059\u308b\u5e33\u7968\u3067\u3059\u3002</p> <p></p> MyBatis Mapper XML\uff08\u65e5\u8a08\u8868\u30af\u30a8\u30ea\uff09 <pre><code>&lt;!-- DailyAccountBalanceMapper.xml --&gt;\n&lt;!-- \u65e5\u8a08\u8868\u30c7\u30fc\u30bf\u53d6\u5f97 --&gt;\n&lt;select id=\"getDailyReport\" resultType=\"com.example.sms.domain.model.accounting.DailyReportLine\"&gt;\n    SELECT\n        d.\"\u8d77\u7968\u65e5\" as postingDate,\n        d.\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\" as accountCode,\n        a.\"\u52d8\u5b9a\u79d1\u76ee\u540d\" as accountName,\n        a.\"BSPL\u533a\u5206\" as bsplType,\n        a.\"\u8cb8\u501f\u533a\u5206\" as debitCreditType,\n        SUM(d.\"\u501f\u65b9\u91d1\u984d\") as debitTotal,\n        SUM(d.\"\u8cb8\u65b9\u91d1\u984d\") as creditTotal,\n        CASE\n            WHEN a.\"\u8cb8\u501f\u533a\u5206\" = '\u501f\u65b9' THEN SUM(d.\"\u501f\u65b9\u91d1\u984d\") - SUM(d.\"\u8cb8\u65b9\u91d1\u984d\")\n            ELSE SUM(d.\"\u8cb8\u65b9\u91d1\u984d\") - SUM(d.\"\u501f\u65b9\u91d1\u984d\")\n        END as balance\n    FROM \"\u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\" d\n    JOIN \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\" a ON d.\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\" = a.\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\"\n    WHERE d.\"\u8d77\u7968\u65e5\" = #{postingDate}\n    GROUP BY d.\"\u8d77\u7968\u65e5\", d.\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", a.\"\u52d8\u5b9a\u79d1\u76ee\u540d\", a.\"BSPL\u533a\u5206\", a.\"\u8cb8\u501f\u533a\u5206\"\n    ORDER BY d.\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\"\n&lt;/select&gt;\n</code></pre>"},{"location":"article/part3/chapter18/#182","title":"18.2 \u6708\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u306e\u8a2d\u8a08","text":""},{"location":"article/part3/chapter18/#1821","title":"18.2.1 \u6708\u6b21\u6b8b\u9ad8\u30c6\u30fc\u30d6\u30eb\u306e\u8a2d\u8a08\u65b9\u91dd","text":"<p>\u6708\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u306f\u3001\u65e5\u6b21\u6b8b\u9ad8\u3092\u6708\u5358\u4f4d\u3067\u96c6\u8a08\u3057\u305f\u7d50\u679c\u3092\u4fdd\u6301\u3059\u308b\u30c6\u30fc\u30d6\u30eb\u3067\u3059\u3002\u6c7a\u7b97\u671f\u3068\u6708\u5ea6\u3067\u7ba1\u7406\u3057\u3001\u6708\u521d\u6b8b\u9ad8\u30fb\u5f53\u6708\u501f\u65b9\u30fb\u5f53\u6708\u8cb8\u65b9\u30fb\u6708\u672b\u6b8b\u9ad8\u3092\u4fdd\u6301\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part3/chapter18/#1822","title":"18.2.2 \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3","text":"V019__create_monthly_account_balance_table.sql <pre><code>-- V019__create_monthly_account_balance_table.sql\n\n-- \u6708\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u30c6\u30fc\u30d6\u30eb\nCREATE TABLE IF NOT EXISTS \"\u6708\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\" (\n    \"\u6c7a\u7b97\u671f\"               INTEGER NOT NULL,\n    \"\u6708\u5ea6\"                 SMALLINT NOT NULL,\n    \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\"        VARCHAR(10) NOT NULL,\n    \"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\"        VARCHAR(10) NOT NULL DEFAULT '',\n    \"\u90e8\u9580\u30b3\u30fc\u30c9\"            VARCHAR(10) NOT NULL DEFAULT '00000',\n    \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9\"    VARCHAR(20) NOT NULL DEFAULT '',\n    \"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\"        BOOLEAN NOT NULL DEFAULT FALSE,\n    \"\u6708\u521d\u6b8b\u9ad8\"             DECIMAL(15, 0) NOT NULL DEFAULT 0,\n    \"\u501f\u65b9\u91d1\u984d\"             DECIMAL(15, 0) NOT NULL DEFAULT 0,\n    \"\u8cb8\u65b9\u91d1\u984d\"             DECIMAL(15, 0) NOT NULL DEFAULT 0,\n    \"\u6708\u672b\u6b8b\u9ad8\"             DECIMAL(15, 0) NOT NULL DEFAULT 0,\n    \"\u4f5c\u6210\u65e5\u6642\"             TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    \"\u66f4\u65b0\u65e5\u6642\"             TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    PRIMARY KEY (\n        \"\u6c7a\u7b97\u671f\", \"\u6708\u5ea6\", \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\",\n        \"\u90e8\u9580\u30b3\u30fc\u30c9\", \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9\", \"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\"\n    ),\n    FOREIGN KEY (\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\") REFERENCES \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\"(\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\"),\n    FOREIGN KEY (\"\u90e8\u9580\u30b3\u30fc\u30c9\") REFERENCES \"\u90e8\u9580\u30de\u30b9\u30bf\"(\"\u90e8\u9580\u30b3\u30fc\u30c9\"),\n    CONSTRAINT chk_month CHECK (\"\u6708\u5ea6\" BETWEEN 1 AND 12)\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX idx_monthly_balance_fiscal ON \"\u6708\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\"(\"\u6c7a\u7b97\u671f\", \"\u6708\u5ea6\");\nCREATE INDEX idx_monthly_balance_account ON \"\u6708\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\"(\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\");\n\n-- \u6708\u6b21\u6b8b\u9ad8\u96c6\u8a08\u95a2\u6570\nCREATE OR REPLACE FUNCTION aggregate_monthly_balance(\n    p_fiscal_year INTEGER,\n    p_month SMALLINT,\n    p_from_date DATE,\n    p_to_date DATE\n) RETURNS INTEGER AS $$\nDECLARE\n    v_count INTEGER;\nBEGIN\n    INSERT INTO \"\u6708\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\" (\n        \"\u6c7a\u7b97\u671f\", \"\u6708\u5ea6\", \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\",\n        \"\u90e8\u9580\u30b3\u30fc\u30c9\", \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9\", \"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\",\n        \"\u6708\u521d\u6b8b\u9ad8\", \"\u501f\u65b9\u91d1\u984d\", \"\u8cb8\u65b9\u91d1\u984d\", \"\u6708\u672b\u6b8b\u9ad8\"\n    )\n    SELECT\n        p_fiscal_year,\n        p_month,\n        \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\",\n        \"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\",\n        \"\u90e8\u9580\u30b3\u30fc\u30c9\",\n        \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9\",\n        \"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\",\n        0,  -- \u6708\u521d\u6b8b\u9ad8\u306f\u7e70\u8d8a\u51e6\u7406\u3067\u8a2d\u5b9a\n        SUM(\"\u501f\u65b9\u91d1\u984d\"),\n        SUM(\"\u8cb8\u65b9\u91d1\u984d\"),\n        SUM(\"\u501f\u65b9\u91d1\u984d\") - SUM(\"\u8cb8\u65b9\u91d1\u984d\")  -- \u66ab\u5b9a\u6708\u672b\u6b8b\u9ad8\n    FROM \"\u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\"\n    WHERE \"\u8d77\u7968\u65e5\" BETWEEN p_from_date AND p_to_date\n    GROUP BY \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\",\n             \"\u90e8\u9580\u30b3\u30fc\u30c9\", \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9\", \"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\"\n    ON CONFLICT (\n        \"\u6c7a\u7b97\u671f\", \"\u6708\u5ea6\", \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\",\n        \"\u90e8\u9580\u30b3\u30fc\u30c9\", \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9\", \"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\"\n    )\n    DO UPDATE SET\n        \"\u501f\u65b9\u91d1\u984d\" = EXCLUDED.\"\u501f\u65b9\u91d1\u984d\",\n        \"\u8cb8\u65b9\u91d1\u984d\" = EXCLUDED.\"\u8cb8\u65b9\u91d1\u984d\",\n        \"\u6708\u672b\u6b8b\u9ad8\" = \"\u6708\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\".\"\u6708\u521d\u6b8b\u9ad8\" +\n                    EXCLUDED.\"\u501f\u65b9\u91d1\u984d\" - EXCLUDED.\"\u8cb8\u65b9\u91d1\u984d\",\n        \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP;\n\n    GET DIAGNOSTICS v_count = ROW_COUNT;\n    RETURN v_count;\nEND;\n$$ LANGUAGE plpgsql;\n\nCOMMENT ON TABLE \"\u6708\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\" IS '\u65e5\u6b21\u6b8b\u9ad8\u3092\u6708\u5358\u4f4d\u3067\u96c6\u8a08\u3057\u305f\u6b8b\u9ad8\u30c6\u30fc\u30d6\u30eb';\n</code></pre>"},{"location":"article/part3/chapter18/#1823","title":"18.2.3 \u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb","text":"MonthlyAccountBalance \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/sms/domain/model/accounting/MonthlyAccountBalance.java\npackage com.example.sms.domain.model.accounting;\n\nimport lombok.*;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\n\n/**\n * \u6708\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class MonthlyAccountBalance {\n    private Integer fiscalYear;              // \u6c7a\u7b97\u671f\n    private Integer month;                   // \u6708\u5ea6\n    private String accountCode;              // \u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\n    private String subAccountCode;           // \u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\n    private String departmentCode;           // \u90e8\u9580\u30b3\u30fc\u30c9\n    private String projectCode;              // \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9\n    private Boolean closingJournalFlag;      // \u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\n    private BigDecimal openingBalance;       // \u6708\u521d\u6b8b\u9ad8\n    private BigDecimal debitAmount;          // \u501f\u65b9\u91d1\u984d\n    private BigDecimal creditAmount;         // \u8cb8\u65b9\u91d1\u984d\n    private BigDecimal closingBalance;       // \u6708\u672b\u6b8b\u9ad8\n    private LocalDateTime createdAt;         // \u4f5c\u6210\u65e5\u6642\n    private LocalDateTime updatedAt;         // \u66f4\u65b0\u65e5\u6642\n\n    /**\n     * \u8907\u5408\u4e3b\u30ad\u30fc\u30af\u30e9\u30b9\n     */\n    @Data\n    @Builder\n    @NoArgsConstructor\n    @AllArgsConstructor\n    public static class Key {\n        private Integer fiscalYear;\n        private Integer month;\n        private String accountCode;\n        private String subAccountCode;\n        private String departmentCode;\n        private String projectCode;\n        private Boolean closingJournalFlag;\n    }\n\n    /**\n     * \u6708\u672b\u6b8b\u9ad8\u3092\u518d\u8a08\u7b97\u3059\u308b\n     * \u501f\u65b9\u79d1\u76ee\u306e\u5834\u5408: \u6708\u521d\u6b8b\u9ad8 + \u501f\u65b9\u91d1\u984d - \u8cb8\u65b9\u91d1\u984d\n     * \u8cb8\u65b9\u79d1\u76ee\u306e\u5834\u5408: \u6708\u521d\u6b8b\u9ad8 - \u501f\u65b9\u91d1\u984d + \u8cb8\u65b9\u91d1\u984d\n     */\n    public BigDecimal recalculateClosingBalance(DebitCreditType accountType) {\n        if (accountType == DebitCreditType.DEBIT) {\n            return openingBalance.add(debitAmount).subtract(creditAmount);\n        } else {\n            return openingBalance.subtract(debitAmount).add(creditAmount);\n        }\n    }\n\n    /**\n     * \u5f53\u6708\u306e\u5897\u6e1b\u984d\u3092\u53d6\u5f97\n     */\n    public BigDecimal getNetChange() {\n        return closingBalance.subtract(openingBalance);\n    }\n}\n</code></pre> TrialBalanceLine\uff08\u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868\u884c\uff09 <pre><code>// src/main/java/com/example/sms/domain/model/accounting/TrialBalanceLine.java\npackage com.example.sms.domain.model.accounting;\n\nimport lombok.*;\n\nimport java.math.BigDecimal;\n\n/**\n * \u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868\u306e1\u884c\u3092\u8868\u3059DTO\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class TrialBalanceLine {\n    private Integer fiscalYear;              // \u6c7a\u7b97\u671f\n    private Integer month;                   // \u6708\u5ea6\n    private String accountCode;              // \u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\n    private String accountName;              // \u52d8\u5b9a\u79d1\u76ee\u540d\n    private String bsplType;                 // BSPL\u533a\u5206\n    private String debitCreditType;          // \u8cb8\u501f\u533a\u5206\n    private BigDecimal openingBalance;       // \u6708\u521d\u6b8b\u9ad8\n    private BigDecimal debitTotal;           // \u501f\u65b9\u5408\u8a08\n    private BigDecimal creditTotal;          // \u8cb8\u65b9\u5408\u8a08\n    private BigDecimal closingBalance;       // \u6708\u672b\u6b8b\u9ad8\n\n    /**\n     * \u7d2f\u8a08\u6b8b\u9ad8\u3092\u53d6\u5f97\u3059\u308b\n     */\n    public BigDecimal getCumulativeBalance() {\n        return closingBalance;\n    }\n\n    /**\n     * \u5f53\u6708\u5897\u6e1b\u3092\u53d6\u5f97\u3059\u308b\n     */\n    public BigDecimal getMonthlyChange() {\n        return closingBalance.subtract(openingBalance);\n    }\n}\n</code></pre>"},{"location":"article/part3/chapter18/#1824","title":"18.2.4 \u30ea\u30dd\u30b8\u30c8\u30ea\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9","text":"MonthlyAccountBalanceRepository\uff08Output Port\uff09 <pre><code>// src/main/java/com/example/sms/application/port/out/MonthlyAccountBalanceRepository.java\npackage com.example.sms.application.port.out;\n\nimport com.example.sms.domain.model.accounting.MonthlyAccountBalance;\nimport com.example.sms.domain.model.accounting.TrialBalanceLine;\n\nimport java.time.LocalDate;\nimport java.util.List;\nimport java.util.Optional;\n\n/**\n * \u6708\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u30ea\u30dd\u30b8\u30c8\u30ea\uff08Output Port\uff09\n */\npublic interface MonthlyAccountBalanceRepository {\n\n    void save(MonthlyAccountBalance balance);\n\n    Optional&lt;MonthlyAccountBalance&gt; findByKey(MonthlyAccountBalance.Key key);\n\n    List&lt;MonthlyAccountBalance&gt; findByFiscalYearAndMonth(Integer fiscalYear, Integer month);\n\n    List&lt;MonthlyAccountBalance&gt; findByAccountCode(Integer fiscalYear, String accountCode);\n\n    /**\n     * \u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\n     */\n    List&lt;TrialBalanceLine&gt; getTrialBalance(Integer fiscalYear, Integer month);\n\n    /**\n     * BSPL\u533a\u5206\u5225\u8a66\u7b97\u8868\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\n     */\n    List&lt;TrialBalanceLine&gt; getTrialBalanceByBSPL(Integer fiscalYear, Integer month, String bsplType);\n\n    /**\n     * \u65e5\u6b21\u6b8b\u9ad8\u304b\u3089\u6708\u6b21\u6b8b\u9ad8\u3092\u96c6\u8a08\n     */\n    int aggregateFromDaily(Integer fiscalYear, Integer month, LocalDate fromDate, LocalDate toDate);\n\n    /**\n     * \u6708\u6b21\u6b8b\u9ad8\u306e\u7e70\u8d8a\u51e6\u7406\n     */\n    int carryForward(Integer fiscalYear, Integer fromMonth, Integer toMonth);\n\n    void deleteAll();\n}\n</code></pre>"},{"location":"article/part3/chapter18/#1825","title":"18.2.5 \u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868\u306e\u51fa\u529b","text":"<p>\u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868\u306f\u3001\u6708\u6b21\u6b8b\u9ad8\u3092\u52d8\u5b9a\u79d1\u76ee\u5225\u306b\u96c6\u8a08\u3057\u3001\u6708\u521d\u6b8b\u9ad8\u30fb\u501f\u65b9\u5408\u8a08\u30fb\u8cb8\u65b9\u5408\u8a08\u30fb\u6708\u672b\u6b8b\u9ad8\u3092\u51fa\u529b\u3059\u308b\u5e33\u7968\u3067\u3059\u3002</p> <p></p> MyBatis Mapper XML\uff08\u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868\u30af\u30a8\u30ea\uff09 <pre><code>&lt;!-- MonthlyAccountBalanceMapper.xml --&gt;\n&lt;!-- \u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868\u30c7\u30fc\u30bf\u53d6\u5f97 --&gt;\n&lt;select id=\"getTrialBalance\" resultType=\"com.example.sms.domain.model.accounting.TrialBalanceLine\"&gt;\n    SELECT\n        m.\"\u6c7a\u7b97\u671f\" as fiscalYear,\n        m.\"\u6708\u5ea6\" as month,\n        m.\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\" as accountCode,\n        a.\"\u52d8\u5b9a\u79d1\u76ee\u540d\" as accountName,\n        a.\"BSPL\u533a\u5206\" as bsplType,\n        a.\"\u8cb8\u501f\u533a\u5206\" as debitCreditType,\n        SUM(m.\"\u6708\u521d\u6b8b\u9ad8\") as openingBalance,\n        SUM(m.\"\u501f\u65b9\u91d1\u984d\") as debitTotal,\n        SUM(m.\"\u8cb8\u65b9\u91d1\u984d\") as creditTotal,\n        SUM(m.\"\u6708\u672b\u6b8b\u9ad8\") as closingBalance\n    FROM \"\u6708\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\" m\n    JOIN \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\" a ON m.\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\" = a.\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\"\n    WHERE m.\"\u6c7a\u7b97\u671f\" = #{fiscalYear} AND m.\"\u6708\u5ea6\" = #{month}\n    GROUP BY m.\"\u6c7a\u7b97\u671f\", m.\"\u6708\u5ea6\", m.\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\",\n             a.\"\u52d8\u5b9a\u79d1\u76ee\u540d\", a.\"BSPL\u533a\u5206\", a.\"\u8cb8\u501f\u533a\u5206\"\n    ORDER BY m.\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\"\n&lt;/select&gt;\n\n&lt;!-- BSPL\u533a\u5206\u5225\u8a66\u7b97\u8868\u30c7\u30fc\u30bf\u53d6\u5f97 --&gt;\n&lt;select id=\"getTrialBalanceByBSPL\" resultType=\"com.example.sms.domain.model.accounting.TrialBalanceLine\"&gt;\n    SELECT\n        m.\"\u6c7a\u7b97\u671f\" as fiscalYear,\n        m.\"\u6708\u5ea6\" as month,\n        m.\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\" as accountCode,\n        a.\"\u52d8\u5b9a\u79d1\u76ee\u540d\" as accountName,\n        a.\"BSPL\u533a\u5206\" as bsplType,\n        a.\"\u8cb8\u501f\u533a\u5206\" as debitCreditType,\n        SUM(m.\"\u6708\u521d\u6b8b\u9ad8\") as openingBalance,\n        SUM(m.\"\u501f\u65b9\u91d1\u984d\") as debitTotal,\n        SUM(m.\"\u8cb8\u65b9\u91d1\u984d\") as creditTotal,\n        SUM(m.\"\u6708\u672b\u6b8b\u9ad8\") as closingBalance\n    FROM \"\u6708\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\" m\n    JOIN \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\" a ON m.\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\" = a.\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\"\n    WHERE m.\"\u6c7a\u7b97\u671f\" = #{fiscalYear}\n      AND m.\"\u6708\u5ea6\" = #{month}\n      AND a.\"BSPL\u533a\u5206\" = #{bsplType}\n    GROUP BY m.\"\u6c7a\u7b97\u671f\", m.\"\u6708\u5ea6\", m.\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\",\n             a.\"\u52d8\u5b9a\u79d1\u76ee\u540d\", a.\"BSPL\u533a\u5206\", a.\"\u8cb8\u501f\u533a\u5206\"\n    ORDER BY m.\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\"\n&lt;/select&gt;\n</code></pre>"},{"location":"article/part3/chapter18/#1826","title":"18.2.6 \u6708\u6b21\u6b8b\u9ad8\u306e\u7e70\u8d8a\u51e6\u7406","text":"<p>\u6708\u6b21\u6b8b\u9ad8\u306e\u7e70\u8d8a\u51e6\u7406\u306f\u3001\u524d\u6708\u672b\u6b8b\u9ad8\u3092\u7fcc\u6708\u521d\u6b8b\u9ad8\u3068\u3057\u3066\u8a2d\u5b9a\u3059\u308b\u51e6\u7406\u3067\u3059\u3002</p> <p></p> \u7e70\u8d8a\u51e6\u7406\u306eSQL <pre><code>&lt;!-- \u6708\u6b21\u6b8b\u9ad8\u306e\u7e70\u8d8a\u51e6\u7406 --&gt;\n&lt;insert id=\"carryForward\"&gt;\n    INSERT INTO \"\u6708\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\" (\n        \"\u6c7a\u7b97\u671f\", \"\u6708\u5ea6\", \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\",\n        \"\u90e8\u9580\u30b3\u30fc\u30c9\", \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9\", \"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\",\n        \"\u6708\u521d\u6b8b\u9ad8\", \"\u501f\u65b9\u91d1\u984d\", \"\u8cb8\u65b9\u91d1\u984d\", \"\u6708\u672b\u6b8b\u9ad8\",\n        \"\u4f5c\u6210\u65e5\u6642\", \"\u66f4\u65b0\u65e5\u6642\"\n    )\n    SELECT\n        \"\u6c7a\u7b97\u671f\",\n        #{toMonth},\n        \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\",\n        \"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\",\n        \"\u90e8\u9580\u30b3\u30fc\u30c9\",\n        \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9\",\n        \"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\",\n        \"\u6708\u672b\u6b8b\u9ad8\",  -- \u524d\u6708\u672b\u6b8b\u9ad8\u3092\u6708\u521d\u6b8b\u9ad8\u306b\n        0,\n        0,\n        \"\u6708\u672b\u6b8b\u9ad8\",  -- \u66ab\u5b9a\u3067\u524d\u6708\u672b\u6b8b\u9ad8\n        CURRENT_TIMESTAMP,\n        CURRENT_TIMESTAMP\n    FROM \"\u6708\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\"\n    WHERE \"\u6c7a\u7b97\u671f\" = #{fiscalYear}\n      AND \"\u6708\u5ea6\" = #{fromMonth}\n    ON CONFLICT (\n        \"\u6c7a\u7b97\u671f\", \"\u6708\u5ea6\", \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\",\n        \"\u90e8\u9580\u30b3\u30fc\u30c9\", \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9\", \"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\"\n    )\n    DO UPDATE SET\n        \"\u6708\u521d\u6b8b\u9ad8\" = EXCLUDED.\"\u6708\u521d\u6b8b\u9ad8\",\n        \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP\n&lt;/insert&gt;\n</code></pre>"},{"location":"article/part3/chapter18/#183","title":"18.3 \u6b8b\u9ad8\u66f4\u65b0\u306e\u30bf\u30a4\u30df\u30f3\u30b0","text":""},{"location":"article/part3/chapter18/#1831","title":"18.3.1 \u66f4\u65b0\u65b9\u5f0f\u306e\u9078\u629e","text":"<p>\u6b8b\u9ad8\u66f4\u65b0\u306b\u306f2\u3064\u306e\u65b9\u5f0f\u304c\u3042\u308a\u307e\u3059\u3002</p> \u65b9\u5f0f \u7279\u5fb4 \u9069\u7528\u30b7\u30fc\u30f3 \u5373\u6642\u66f4\u65b0 \u4ed5\u8a33\u5165\u529b\u6642\u306b\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067\u6b8b\u9ad8\u3092\u66f4\u65b0 \u6b8b\u9ad8\u3092\u3059\u3050\u306b\u78ba\u8a8d\u3057\u305f\u3044\u5834\u5408 \u30d0\u30c3\u30c1\u51e6\u7406 \u6708\u672b\u306a\u3069\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u4e00\u62ec\u96c6\u8a08 \u5927\u91cf\u30c7\u30fc\u30bf\u306e\u51e6\u7406\u52b9\u7387\u3092\u91cd\u8996\u3059\u308b\u5834\u5408 <p></p>"},{"location":"article/part3/chapter18/#1832","title":"18.3.2 \u5373\u6642\u66f4\u65b0\u306e\u5b9f\u88c5","text":"<p>\u4ed5\u8a33\u5165\u529b\u6642\u306b\u65e5\u6b21\u6b8b\u9ad8\u3092\u5373\u6642\u66f4\u65b0\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5\u3067\u3059\u3002</p> BalanceUpdateService <pre><code>// src/main/java/com/example/sms/application/service/BalanceUpdateService.java\npackage com.example.sms.application.service;\n\nimport com.example.sms.application.port.out.DailyAccountBalanceRepository;\nimport com.example.sms.application.port.out.MonthlyAccountBalanceRepository;\nimport com.example.sms.domain.model.accounting.DailyAccountBalance;\nimport com.example.sms.domain.model.accounting.DebitCreditType;\nimport com.example.sms.domain.model.accounting.Journal;\nimport com.example.sms.domain.model.accounting.JournalDebitCreditDetail;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\n\n/**\n * \u6b8b\u9ad8\u66f4\u65b0\u30b5\u30fc\u30d3\u30b9\n */\n@Service\n@RequiredArgsConstructor\n@Slf4j\npublic class BalanceUpdateService {\n\n    private final DailyAccountBalanceRepository dailyBalanceRepository;\n    private final MonthlyAccountBalanceRepository monthlyBalanceRepository;\n\n    /**\n     * \u4ed5\u8a33\u767b\u9332\u306b\u4f34\u3046\u6b8b\u9ad8\u66f4\u65b0\n     * @param journal \u767b\u9332\u3055\u308c\u305f\u4ed5\u8a33\n     */\n    @Transactional\n    public void updateBalancesForJournal(Journal journal) {\n        var postingDate = journal.getPostingDate();\n        var closingFlag = journal.getClosingJournalFlag() != null\n            ? journal.getClosingJournalFlag() : false;\n\n        // \u4ed5\u8a33\u306e\u5404\u660e\u7d30\u306b\u3064\u3044\u3066\u6b8b\u9ad8\u3092\u66f4\u65b0\n        for (var detail : journal.getDetails()) {\n            for (var dcDetail : detail.getDebitCreditDetails()) {\n                updateDailyBalance(postingDate, dcDetail, closingFlag);\n            }\n        }\n\n        log.info(\"\u6b8b\u9ad8\u66f4\u65b0\u5b8c\u4e86: \u4ed5\u8a33\u4f1d\u7968\u756a\u53f7={}, \u8d77\u7968\u65e5={}\",\n            journal.getJournalVoucherNumber(), postingDate);\n    }\n\n    /**\n     * \u65e5\u6b21\u6b8b\u9ad8\u306e\u66f4\u65b0\n     */\n    private void updateDailyBalance(LocalDate postingDate,\n            JournalDebitCreditDetail dcDetail, boolean closingFlag) {\n        var debitAmount = dcDetail.getDebitCreditType() == DebitCreditType.DEBIT\n            ? dcDetail.getAmount() : BigDecimal.ZERO;\n        var creditAmount = dcDetail.getDebitCreditType() == DebitCreditType.CREDIT\n            ? dcDetail.getAmount() : BigDecimal.ZERO;\n\n        var dailyBalance = DailyAccountBalance.builder()\n            .postingDate(postingDate)\n            .accountCode(dcDetail.getAccountCode())\n            .subAccountCode(dcDetail.getSubAccountCode() != null\n                ? dcDetail.getSubAccountCode() : \"\")\n            .departmentCode(dcDetail.getDepartmentCode() != null\n                ? dcDetail.getDepartmentCode() : \"00000\")\n            .projectCode(dcDetail.getProjectCode() != null\n                ? dcDetail.getProjectCode() : \"\")\n            .closingJournalFlag(closingFlag)\n            .debitAmount(debitAmount)\n            .creditAmount(creditAmount)\n            .build();\n\n        dailyBalanceRepository.upsert(dailyBalance);\n    }\n\n    /**\n     * \u6708\u6b21\u6b8b\u9ad8\u306e\u96c6\u8a08\n     * @param fiscalYear \u6c7a\u7b97\u671f\n     * @param month \u6708\u5ea6\n     */\n    @Transactional\n    public int aggregateMonthlyBalance(int fiscalYear, int month) {\n        // \u5bfe\u8c61\u671f\u9593\u3092\u8a08\u7b97\n        LocalDate fromDate = LocalDate.of(fiscalYear, month, 1);\n        LocalDate toDate = fromDate.withDayOfMonth(fromDate.lengthOfMonth());\n\n        // \u65e5\u6b21\u6b8b\u9ad8\u304b\u3089\u6708\u6b21\u6b8b\u9ad8\u3092\u96c6\u8a08\n        int count = monthlyBalanceRepository.aggregateFromDaily(\n            fiscalYear, month, fromDate, toDate);\n\n        log.info(\"\u6708\u6b21\u6b8b\u9ad8\u96c6\u8a08\u5b8c\u4e86: \u6c7a\u7b97\u671f={}, \u6708\u5ea6={}, \u4ef6\u6570={}\",\n            fiscalYear, month, count);\n\n        return count;\n    }\n\n    /**\n     * \u6708\u6b21\u6b8b\u9ad8\u306e\u7e70\u8d8a\u51e6\u7406\n     * @param fiscalYear \u6c7a\u7b97\u671f\n     * @param fromMonth \u7e70\u8d8a\u5143\u6708\u5ea6\n     * @param toMonth \u7e70\u8d8a\u5148\u6708\u5ea6\n     */\n    @Transactional\n    public int carryForwardMonthlyBalance(int fiscalYear, int fromMonth, int toMonth) {\n        int count = monthlyBalanceRepository.carryForward(fiscalYear, fromMonth, toMonth);\n\n        log.info(\"\u6708\u6b21\u6b8b\u9ad8\u7e70\u8d8a\u5b8c\u4e86: \u6c7a\u7b97\u671f={}, {}\u6708 \u2192 {}\u6708, \u4ef6\u6570={}\",\n            fiscalYear, fromMonth, toMonth, count);\n\n        return count;\n    }\n}\n</code></pre>"},{"location":"article/part3/chapter18/#1833","title":"18.3.3 \u4ed5\u8a33\u5165\u529b\u6642\u306e\u6b8b\u9ad8\u66f4\u65b0\u30d5\u30ed\u30fc","text":""},{"location":"article/part3/chapter18/#1834-tdd","title":"18.3.4 TDD \u306b\u3088\u308b\u30c6\u30b9\u30c8\u5b9f\u88c5","text":"\u65e5\u6b21\u6b8b\u9ad8\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30c6\u30b9\u30c8 <pre><code>// src/test/java/com/example/sms/infrastructure/persistence/DailyAccountBalanceRepositoryTest.java\npackage com.example.sms.infrastructure.persistence;\n\nimport com.example.sms.domain.model.accounting.DailyAccountBalance;\nimport com.example.sms.infrastructure.persistence.repository.DailyAccountBalanceRepositoryImpl;\nimport org.junit.jupiter.api.DisplayName;\nimport org.junit.jupiter.api.Nested;\nimport org.junit.jupiter.api.Test;\nimport org.mybatis.spring.boot.test.autoconfigure.MybatisTest;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.jdbc.AutoConfigureTestDatabase;\nimport org.springframework.context.annotation.Import;\nimport org.springframework.test.context.DynamicPropertyRegistry;\nimport org.springframework.test.context.DynamicPropertySource;\nimport org.testcontainers.containers.PostgreSQLContainer;\nimport org.testcontainers.junit.jupiter.Container;\nimport org.testcontainers.junit.jupiter.Testcontainers;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\n\nimport static org.assertj.core.api.Assertions.*;\n\n@MybatisTest\n@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\n@Testcontainers\n@Import(DailyAccountBalanceRepositoryImpl.class)\n@DisplayName(\"\u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30c6\u30b9\u30c8\")\nclass DailyAccountBalanceRepositoryTest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:16\")\n            .withDatabaseName(\"testdb\")\n            .withUsername(\"test\")\n            .withPassword(\"test\");\n\n    @DynamicPropertySource\n    static void configureProperties(DynamicPropertyRegistry registry) {\n        registry.add(\"spring.datasource.url\", postgres::getJdbcUrl);\n        registry.add(\"spring.datasource.username\", postgres::getUsername);\n        registry.add(\"spring.datasource.password\", postgres::getPassword);\n    }\n\n    @Autowired\n    private DailyAccountBalanceRepositoryImpl dailyBalanceRepository;\n\n    @Nested\n    @DisplayName(\"\u65e5\u6b21\u6b8b\u9ad8\u306e\u767b\u9332\")\n    class DailyBalanceRegistrationTest {\n\n        @Test\n        @DisplayName(\"\u65b0\u898f\u306e\u65e5\u6b21\u6b8b\u9ad8\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void shouldRegisterNewDailyBalance() {\n            // Given\n            var balance = DailyAccountBalance.builder()\n                .postingDate(LocalDate.of(2024, 4, 1))\n                .accountCode(\"11110\")\n                .subAccountCode(\"\")\n                .departmentCode(\"10100\")\n                .projectCode(\"\")\n                .closingJournalFlag(false)\n                .debitAmount(new BigDecimal(\"100000\"))\n                .creditAmount(BigDecimal.ZERO)\n                .build();\n\n            // When\n            dailyBalanceRepository.upsert(balance);\n\n            // Then\n            var key = DailyAccountBalance.Key.builder()\n                .postingDate(LocalDate.of(2024, 4, 1))\n                .accountCode(\"11110\")\n                .subAccountCode(\"\")\n                .departmentCode(\"10100\")\n                .projectCode(\"\")\n                .closingJournalFlag(false)\n                .build();\n            var found = dailyBalanceRepository.findByKey(key);\n            assertThat(found).isPresent();\n            assertThat(found.get().getDebitAmount()).isEqualByComparingTo(\"100000\");\n        }\n\n        @Test\n        @DisplayName(\"\u65e2\u5b58\u306e\u65e5\u6b21\u6b8b\u9ad8\u306b\u91d1\u984d\u3092\u52a0\u7b97\u3067\u304d\u308b\uff08UPSERT\uff09\")\n        void shouldAddAmountToExistingBalance() {\n            // Given: \u65e2\u5b58\u6b8b\u9ad8\n            var existingBalance = DailyAccountBalance.builder()\n                .postingDate(LocalDate.of(2024, 4, 1))\n                .accountCode(\"11110\")\n                .subAccountCode(\"\")\n                .departmentCode(\"10100\")\n                .projectCode(\"\")\n                .closingJournalFlag(false)\n                .debitAmount(new BigDecimal(\"100000\"))\n                .creditAmount(BigDecimal.ZERO)\n                .build();\n            dailyBalanceRepository.upsert(existingBalance);\n\n            // When: \u540c\u3058\u30ad\u30fc\u3067\u8ffd\u52a0\n            var additionalBalance = DailyAccountBalance.builder()\n                .postingDate(LocalDate.of(2024, 4, 1))\n                .accountCode(\"11110\")\n                .subAccountCode(\"\")\n                .departmentCode(\"10100\")\n                .projectCode(\"\")\n                .closingJournalFlag(false)\n                .debitAmount(new BigDecimal(\"50000\"))\n                .creditAmount(BigDecimal.ZERO)\n                .build();\n            dailyBalanceRepository.upsert(additionalBalance);\n\n            // Then: \u91d1\u984d\u304c\u52a0\u7b97\u3055\u308c\u3066\u3044\u308b\n            var key = DailyAccountBalance.Key.builder()\n                .postingDate(LocalDate.of(2024, 4, 1))\n                .accountCode(\"11110\")\n                .subAccountCode(\"\")\n                .departmentCode(\"10100\")\n                .projectCode(\"\")\n                .closingJournalFlag(false)\n                .build();\n            var found = dailyBalanceRepository.findByKey(key);\n            assertThat(found).isPresent();\n            assertThat(found.get().getDebitAmount()).isEqualByComparingTo(\"150000\");\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u65e5\u8a08\u8868\")\n    class DailyReportTest {\n\n        @Test\n        @DisplayName(\"\u65e5\u8a08\u8868\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3067\u304d\u308b\")\n        void shouldGetDailyReport() {\n            // Given: \u65e5\u6b21\u6b8b\u9ad8\u30c7\u30fc\u30bf\n            var balance = DailyAccountBalance.builder()\n                .postingDate(LocalDate.of(2024, 4, 1))\n                .accountCode(\"11110\")\n                .subAccountCode(\"\")\n                .departmentCode(\"10100\")\n                .projectCode(\"\")\n                .closingJournalFlag(false)\n                .debitAmount(new BigDecimal(\"100000\"))\n                .creditAmount(new BigDecimal(\"30000\"))\n                .build();\n            dailyBalanceRepository.upsert(balance);\n\n            // When\n            var report = dailyBalanceRepository.getDailyReport(LocalDate.of(2024, 4, 1));\n\n            // Then\n            assertThat(report).isNotEmpty();\n            assertThat(report.get(0).getAccountCode()).isEqualTo(\"11110\");\n        }\n    }\n}\n</code></pre> \u6708\u6b21\u6b8b\u9ad8\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30c6\u30b9\u30c8 <pre><code>// src/test/java/com/example/sms/infrastructure/persistence/MonthlyAccountBalanceRepositoryTest.java\npackage com.example.sms.infrastructure.persistence;\n\nimport com.example.sms.domain.model.accounting.MonthlyAccountBalance;\nimport com.example.sms.infrastructure.persistence.repository.MonthlyAccountBalanceRepositoryImpl;\nimport org.junit.jupiter.api.DisplayName;\nimport org.junit.jupiter.api.Nested;\nimport org.junit.jupiter.api.Test;\nimport org.mybatis.spring.boot.test.autoconfigure.MybatisTest;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.jdbc.AutoConfigureTestDatabase;\nimport org.springframework.context.annotation.Import;\nimport org.springframework.test.context.DynamicPropertyRegistry;\nimport org.springframework.test.context.DynamicPropertySource;\nimport org.testcontainers.containers.PostgreSQLContainer;\nimport org.testcontainers.junit.jupiter.Container;\nimport org.testcontainers.junit.jupiter.Testcontainers;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\n\nimport static org.assertj.core.api.Assertions.*;\n\n@MybatisTest\n@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\n@Testcontainers\n@Import(MonthlyAccountBalanceRepositoryImpl.class)\n@DisplayName(\"\u6708\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30c6\u30b9\u30c8\")\nclass MonthlyAccountBalanceRepositoryTest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:16\")\n            .withDatabaseName(\"testdb\")\n            .withUsername(\"test\")\n            .withPassword(\"test\");\n\n    @DynamicPropertySource\n    static void configureProperties(DynamicPropertyRegistry registry) {\n        registry.add(\"spring.datasource.url\", postgres::getJdbcUrl);\n        registry.add(\"spring.datasource.username\", postgres::getUsername);\n        registry.add(\"spring.datasource.password\", postgres::getPassword);\n    }\n\n    @Autowired\n    private MonthlyAccountBalanceRepositoryImpl monthlyBalanceRepository;\n\n    @Nested\n    @DisplayName(\"\u6708\u6b21\u6b8b\u9ad8\u306e\u7e70\u8d8a\u51e6\u7406\")\n    class CarryForwardTest {\n\n        @Test\n        @DisplayName(\"\u524d\u6708\u672b\u6b8b\u9ad8\u3092\u7fcc\u6708\u521d\u6b8b\u9ad8\u3068\u3057\u3066\u7e70\u8d8a\u3067\u304d\u308b\")\n        void shouldCarryForwardToNextMonth() {\n            // Given: 4\u6708\u672b\u6b8b\u9ad8\u304c\u5b58\u5728\n            var aprilBalance = MonthlyAccountBalance.builder()\n                .fiscalYear(2024)\n                .month(4)\n                .accountCode(\"11110\")\n                .subAccountCode(\"\")\n                .departmentCode(\"10100\")\n                .projectCode(\"\")\n                .closingJournalFlag(false)\n                .openingBalance(new BigDecimal(\"100000\"))\n                .debitAmount(new BigDecimal(\"50000\"))\n                .creditAmount(new BigDecimal(\"20000\"))\n                .closingBalance(new BigDecimal(\"130000\"))\n                .build();\n            monthlyBalanceRepository.save(aprilBalance);\n\n            // When: 5\u6708\u306e\u6708\u521d\u6b8b\u9ad8\u3068\u3057\u3066\u7e70\u8d8a\n            monthlyBalanceRepository.carryForward(2024, 4, 5);\n\n            // Then: 5\u6708\u306e\u6708\u521d\u6b8b\u9ad8\u304c4\u6708\u672b\u6b8b\u9ad8\u3068\u4e00\u81f4\n            var mayBalance = monthlyBalanceRepository.findByKey(\n                MonthlyAccountBalance.Key.builder()\n                    .fiscalYear(2024)\n                    .month(5)\n                    .accountCode(\"11110\")\n                    .subAccountCode(\"\")\n                    .departmentCode(\"10100\")\n                    .projectCode(\"\")\n                    .closingJournalFlag(false)\n                    .build()\n            );\n            assertThat(mayBalance).isPresent();\n            assertThat(mayBalance.get().getOpeningBalance())\n                .isEqualByComparingTo(\"130000\");\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868\")\n    class TrialBalanceTest {\n\n        @Test\n        @DisplayName(\"\u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3067\u304d\u308b\")\n        void shouldGetTrialBalance() {\n            // Given: \u6708\u6b21\u6b8b\u9ad8\u30c7\u30fc\u30bf\n            var balance = MonthlyAccountBalance.builder()\n                .fiscalYear(2024)\n                .month(4)\n                .accountCode(\"11110\")\n                .subAccountCode(\"\")\n                .departmentCode(\"10100\")\n                .projectCode(\"\")\n                .closingJournalFlag(false)\n                .openingBalance(new BigDecimal(\"100000\"))\n                .debitAmount(new BigDecimal(\"50000\"))\n                .creditAmount(new BigDecimal(\"20000\"))\n                .closingBalance(new BigDecimal(\"130000\"))\n                .build();\n            monthlyBalanceRepository.save(balance);\n\n            // When\n            var trialBalance = monthlyBalanceRepository.getTrialBalance(2024, 4);\n\n            // Then\n            assertThat(trialBalance).isNotNull();\n        }\n    }\n}\n</code></pre>"},{"location":"article/part3/chapter18/#184-er","title":"18.4 ER\u56f3","text":""},{"location":"article/part3/chapter18/#185","title":"18.5 \u307e\u3068\u3081","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u306e\u8a2d\u8a08\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u307e\u3057\u305f\u3002</p>"},{"location":"article/part3/chapter18/#_2","title":"\u8a2d\u8a08\u306e\u30dd\u30a4\u30f3\u30c8","text":"<ol> <li>\u8907\u5408\u4e3b\u30ad\u30fc\u306b\u3088\u308b\u591a\u6b21\u5143\u7ba1\u7406</li> <li>\u8d77\u7968\u65e5/\u6c7a\u7b97\u671f\u30fb\u6708\u5ea6 + \u52d8\u5b9a\u79d1\u76ee + \u88dc\u52a9\u79d1\u76ee + \u90e8\u9580 + \u30d7\u30ed\u30b8\u30a7\u30af\u30c8</li> <li> <p>\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\u306b\u3088\u308b\u901a\u5e38/\u6c7a\u7b97\u306e\u5206\u96e2</p> </li> <li> <p>\u65e5\u6b21\u6b8b\u9ad8\u306e\u5373\u6642\u66f4\u65b0</p> </li> <li>\u4ed5\u8a33\u767b\u9332\u30c8\u30ea\u30ac\u30fc\u306b\u3088\u308b\u81ea\u52d5\u66f4\u65b0</li> <li> <p>UPSERT\uff08INSERT ON CONFLICT\uff09\u306b\u3088\u308b\u52b9\u7387\u7684\u306a\u51e6\u7406</p> </li> <li> <p>\u6708\u6b21\u6b8b\u9ad8\u306e\u96c6\u8a08\u3068\u7e70\u8d8a</p> </li> <li>\u65e5\u6b21\u6b8b\u9ad8\u304b\u3089\u306e\u6708\u672b\u4e00\u62ec\u96c6\u8a08</li> <li> <p>\u524d\u6708\u672b\u6b8b\u9ad8 \u2192 \u7fcc\u6708\u521d\u6b8b\u9ad8\u306e\u7e70\u8d8a\u51e6\u7406</p> </li> <li> <p>\u5e33\u7968\u51fa\u529b\u5bfe\u5fdc</p> </li> <li>\u65e5\u8a08\u8868\uff1a\u65e5\u6b21\u6b8b\u9ad8\u304b\u3089\u306e\u52d8\u5b9a\u79d1\u76ee\u5225\u96c6\u8a08</li> <li>\u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868\uff1a\u6708\u6b21\u6b8b\u9ad8\u304b\u3089\u306eBS/PL\u5206\u985e</li> </ol>"},{"location":"article/part3/chapter18/#_3","title":"\u6b21\u7ae0\u306e\u4e88\u544a","text":"<p>\u7b2c19\u7ae0\u3067\u306f\u3001\u8ca1\u52d9\u4f1a\u8a08\u30c7\u30fc\u30bf\u30e2\u30c7\u30eb\u306e\u7d71\u5408\u8a2d\u8a08\u3092\u884c\u3044\u307e\u3059\u3002\u3053\u308c\u307e\u3067\u8a2d\u8a08\u3057\u305f\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u3001\u4ed5\u8a33\u3001\u81ea\u52d5\u4ed5\u8a33\u3001\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u3092\u7d71\u5408\u3057\u3001\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u5168\u4f53\u306eER\u56f3\u3092\u5b8c\u6210\u3055\u305b\u307e\u3059\u3002</p>"},{"location":"article/part3/chapter19/","title":"\u7b2c19\u7ae0 \u8d64\u9ed2\u3068\u30ed\u30b0\u306e\u8a2d\u8a08","text":""},{"location":"article/part3/chapter19/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306b\u304a\u3051\u308b\u30c7\u30fc\u30bf\u8a02\u6b63\u65b9\u5f0f\u3068\u30ed\u30b0\u7ba1\u7406\u306e\u8a2d\u8a08\u3092\u884c\u3044\u307e\u3059\u3002\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u3067\u306f\u3001\u4e00\u5ea6\u767b\u9332\u3057\u305f\u30c7\u30fc\u30bf\u306e\u300c\u524a\u9664\u300d\u3084\u300c\u66f4\u65b0\u300d\u3092\u5b89\u6613\u306b\u884c\u3046\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002\u76e3\u67fb\u8a3c\u8de1\u3092\u78ba\u4fdd\u3057\u3064\u3064\u3001\u30c7\u30fc\u30bf\u8a02\u6b63\u3092\u884c\u3046\u65b9\u5f0f\u304c\u5fc5\u8981\u3067\u3059\u3002</p>"},{"location":"article/part3/chapter19/#191-3","title":"19.1 3\u3064\u306e\u30a2\u30d7\u30ed\u30fc\u30c1","text":"<p>\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u306b\u304a\u3051\u308b\u30ed\u30b0\u7ba1\u7406\u30fb\u5909\u66f4\u7ba1\u7406\u306b\u306f\u30013\u3064\u306e\u4ee3\u8868\u7684\u306a\u30a2\u30d7\u30ed\u30fc\u30c1\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"article/part3/chapter19/#1911","title":"19.1.1 \u30c7\u30fc\u30bf\u81ea\u4f53\u306b\u30ed\u30b0\u60c5\u5831\u3092\u6301\u3064\u65b9\u5f0f","text":"<p>\u6700\u3082\u30b7\u30f3\u30d7\u30eb\u306a\u65b9\u5f0f\u3067\u3001\u5404\u30c6\u30fc\u30d6\u30eb\u306b\u4f5c\u6210\u65e5\u6642\u30fb\u66f4\u65b0\u65e5\u6642\u30fb\u66f4\u65b0\u8005\u540d\u306a\u3069\u306e\u30ab\u30e9\u30e0\u3092\u6301\u305f\u305b\u307e\u3059\u3002</p> <p></p> \u30e1\u30ea\u30c3\u30c8 \u30c7\u30e1\u30ea\u30c3\u30c8 \u5b9f\u88c5\u304c\u7c21\u5358 \u5909\u66f4\u5c65\u6b74\u304c\u8ffd\u8de1\u3067\u304d\u306a\u3044 \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3078\u306e\u5f71\u97ff\u304c\u5c11\u306a\u3044 \u8ab0\u304c\u3044\u3064\u4f55\u3092\u5909\u66f4\u3057\u305f\u304b\u4e0d\u660e \u30c6\u30fc\u30d6\u30eb\u8a2d\u8a08\u304c\u30b7\u30f3\u30d7\u30eb \u76e3\u67fb\u5bfe\u5fdc\u304c\u56f0\u96e3"},{"location":"article/part3/chapter19/#1912","title":"19.1.2 \u8d64\u9ed2\u51e6\u7406\u30fb\u8ad6\u7406\u524a\u9664\u65b9\u5f0f","text":"<p>\u4f1a\u8a08\u30c7\u30fc\u30bf\u306b\u9069\u3057\u305f\u65b9\u5f0f\u3067\u3001\u7269\u7406\u524a\u9664\u3092\u884c\u308f\u305a\u3001\u8d64\u4f1d\uff08\u53d6\u6d88\u4f1d\u7968\uff09\u3067\u6253\u3061\u6d88\u3057\u307e\u3059\u3002</p> <p></p> \u30e1\u30ea\u30c3\u30c8 \u30c7\u30e1\u30ea\u30c3\u30c8 \u76e3\u67fb\u8a3c\u8de1\u304c\u78ba\u4fdd\u3055\u308c\u308b \u30c7\u30fc\u30bf\u91cf\u304c\u5897\u52a0\u3059\u308b \u4f1a\u8a08\u57fa\u6e96\u306b\u6e96\u62e0 \u8907\u96d1\u306a\u51e6\u7406\u304c\u5fc5\u8981 \u6b8b\u9ad8\u304c\u81ea\u52d5\u7684\u306b\u8a02\u6b63\u3055\u308c\u308b \u5143\u4f1d\u7968\u3068\u8d64\u4f1d\u306e\u7d10\u4ed8\u3051\u7ba1\u7406\u304c\u5fc5\u8981"},{"location":"article/part3/chapter19/#1913","title":"19.1.3 \u30ed\u30b0\u30c6\u30fc\u30d6\u30eb\u306b\u30ed\u30b0\u60c5\u5831\u3092\u4fdd\u5b58\u3059\u308b\u65b9\u5f0f","text":"<p>\u5909\u66f4\u524d\u5f8c\u306e\u30c7\u30fc\u30bf\u3092\u5225\u30c6\u30fc\u30d6\u30eb\u306b\u4fdd\u5b58\u3059\u308b\u65b9\u5f0f\u3067\u3059\u3002</p> <p></p> \u30e1\u30ea\u30c3\u30c8 \u30c7\u30e1\u30ea\u30c3\u30c8 \u5b8c\u5168\u306a\u5909\u66f4\u5c65\u6b74\u3092\u8ffd\u8de1\u53ef\u80fd \u30ed\u30b0\u30c6\u30fc\u30d6\u30eb\u304c\u80a5\u5927\u5316\u3059\u308b \u4efb\u610f\u306e\u6642\u70b9\u306e\u72b6\u614b\u3092\u5fa9\u5143\u53ef\u80fd \u30c8\u30ea\u30ac\u30fc\u8a2d\u5b9a\u304c\u5fc5\u8981 \u76e3\u67fb\u5bfe\u5fdc\u304c\u5bb9\u6613 \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3078\u306e\u5f71\u97ff"},{"location":"article/part3/chapter19/#1914-3","title":"19.1.4 3\u3064\u306e\u65b9\u5f0f\u306e\u6bd4\u8f03","text":""},{"location":"article/part3/chapter19/#192","title":"19.2 \u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u3067\u306e\u4f7f\u3044\u5206\u3051","text":""},{"location":"article/part3/chapter19/#1921","title":"19.2.1 \u63a8\u5968\u3055\u308c\u308b\u7d44\u307f\u5408\u308f\u305b","text":"<p>\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u3067\u306f\u3001\u30c7\u30fc\u30bf\u306e\u7279\u6027\u306b\u5fdc\u3058\u30663\u3064\u306e\u65b9\u5f0f\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u4f7f\u7528\u3057\u307e\u3059\u3002</p> <p></p> \u30c7\u30fc\u30bf\u7a2e\u5225 \u63a1\u7528\u65b9\u5f0f \u7406\u7531 \u4f1a\u8a08\u30c7\u30fc\u30bf\uff08\u4ed5\u8a33\uff09 \u65b9\u5f0fA + \u65b9\u5f0fB \u4f1a\u8a08\u57fa\u6e96\u306b\u6e96\u62e0\u3057\u305f\u8a02\u6b63\u65b9\u6cd5\u304c\u5fc5\u8981 \u30de\u30b9\u30bf\u30c7\u30fc\u30bf \u65b9\u5f0fA + \u65b9\u5f0fC \u5909\u66f4\u5c65\u6b74\u306e\u8ffd\u8de1\u304c\u5fc5\u8981\u3001\u76e3\u67fb\u5bfe\u5fdc \u30b5\u30de\u30ea\u30c7\u30fc\u30bf \u65b9\u5f0fA \u4ed5\u8a33\u304b\u3089\u518d\u96c6\u8a08\u53ef\u80fd\u306a\u305f\u3081\u3001\u5c65\u6b74\u4e0d\u8981"},{"location":"article/part3/chapter19/#1922","title":"19.2.2 \u8d64\u9ed2\u51e6\u7406\u306e\u5b9f\u88c5","text":"<p>\u4ed5\u8a33\u30c6\u30fc\u30d6\u30eb\u306b\u306f\u3001\u8d64\u9ed2\u51e6\u7406\u306b\u5fc5\u8981\u306a\u9805\u76ee\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002</p> <p></p> JournalCorrectionService\uff08\u8d64\u9ed2\u51e6\u7406\u30b5\u30fc\u30d3\u30b9\uff09 <pre><code>// src/main/java/com/example/sms/application/service/JournalCorrectionService.java\npackage com.example.sms.application.service;\n\nimport com.example.sms.application.port.out.JournalRepository;\nimport com.example.sms.domain.model.accounting.*;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.time.LocalDate;\nimport java.util.ArrayList;\n\n@Service\n@RequiredArgsConstructor\n@Slf4j\npublic class JournalCorrectionService {\n\n    private final JournalRepository journalRepository;\n    private final BalanceUpdateService balanceUpdateService;\n\n    /**\n     * \u4ed5\u8a33\u3092\u8d64\u9ed2\u8a02\u6b63\u3059\u308b\n     * @param originalVoucherNumber \u5143\u4f1d\u7968\u756a\u53f7\n     * @param correctedJournal \u8a02\u6b63\u5f8c\u306e\u4ed5\u8a33\uff08\u9ed2\u4f1d\uff09\n     * @return \u8d64\u4f1d\u3068\u9ed2\u4f1d\u306e\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\n     */\n    @Transactional\n    public CorrectionResult correctJournal(String originalVoucherNumber,\n            Journal correctedJournal) {\n        // \u5143\u4f1d\u7968\u3092\u53d6\u5f97\n        var original = journalRepository.findByVoucherNumber(originalVoucherNumber)\n            .orElseThrow(() -&gt; new IllegalArgumentException(\n                \"\u5143\u4f1d\u7968\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + originalVoucherNumber));\n\n        // \u8d64\u4f1d\u3092\u4f5c\u6210\n        var redSlip = createRedSlip(original);\n        journalRepository.save(redSlip);\n        balanceUpdateService.updateBalancesForJournal(redSlip);\n\n        // \u9ed2\u4f1d\uff08\u8a02\u6b63\u4f1d\u7968\uff09\u3092\u767b\u9332\n        if (!correctedJournal.isBalanced()) {\n            throw new IllegalArgumentException(\"\u8a02\u6b63\u4ed5\u8a33\u306e\u8cb8\u501f\u304c\u4e00\u81f4\u3057\u307e\u305b\u3093\");\n        }\n        journalRepository.save(correctedJournal);\n        balanceUpdateService.updateBalancesForJournal(correctedJournal);\n\n        log.info(\"\u8d64\u9ed2\u8a02\u6b63\u5b8c\u4e86: \u5143\u4f1d\u7968={}, \u8d64\u4f1d={}, \u9ed2\u4f1d={}\",\n            originalVoucherNumber,\n            redSlip.getJournalVoucherNumber(),\n            correctedJournal.getJournalVoucherNumber());\n\n        return new CorrectionResult(\n            redSlip.getJournalVoucherNumber(),\n            correctedJournal.getJournalVoucherNumber()\n        );\n    }\n\n    /**\n     * \u4ed5\u8a33\u3092\u53d6\u6d88\u3059\u308b\uff08\u8d64\u4f1d\u306e\u307f\u767a\u884c\uff09\n     * @param voucherNumber \u53d6\u6d88\u5bfe\u8c61\u306e\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\n     * @return \u8d64\u4f1d\u306e\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\n     */\n    @Transactional\n    public String cancelJournal(String voucherNumber) {\n        var original = journalRepository.findByVoucherNumber(voucherNumber)\n            .orElseThrow(() -&gt; new IllegalArgumentException(\n                \"\u4ed5\u8a33\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + voucherNumber));\n\n        // \u65e2\u306b\u8d64\u4f1d\u304c\u767a\u884c\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\n        if (original.getRedSlipFlag() != null &amp;&amp; original.getRedSlipFlag()) {\n            throw new IllegalStateException(\"\u3053\u306e\u4ed5\u8a33\u306f\u65e2\u306b\u53d6\u6d88\u6e08\u307f\u3067\u3059\");\n        }\n\n        // \u8d64\u4f1d\u3092\u4f5c\u6210\n        var redSlip = createRedSlip(original);\n        journalRepository.save(redSlip);\n        balanceUpdateService.updateBalancesForJournal(redSlip);\n\n        log.info(\"\u4ed5\u8a33\u53d6\u6d88\u5b8c\u4e86: \u5143\u4f1d\u7968={}, \u8d64\u4f1d={}\",\n            voucherNumber, redSlip.getJournalVoucherNumber());\n\n        return redSlip.getJournalVoucherNumber();\n    }\n\n    /**\n     * \u8d64\u4f1d\u3092\u4f5c\u6210\u3059\u308b\n     */\n    private Journal createRedSlip(Journal original) {\n        // \u8d64\u4f1d\u306e\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\u3092\u751f\u6210\uff08\u5143\u4f1d\u7968\u756a\u53f7 + R\uff09\n        var redVoucherNumber = original.getJournalVoucherNumber() + \"R\";\n\n        // \u8cb8\u501f\u3092\u53cd\u8ee2\u3057\u305f\u660e\u7d30\u3092\u4f5c\u6210\n        var redDetails = new ArrayList&lt;JournalDetail&gt;();\n        for (var detail : original.getDetails()) {\n            var reversedDCDetails = new ArrayList&lt;JournalDebitCreditDetail&gt;();\n            for (var dcDetail : detail.getDebitCreditDetails()) {\n                var reversed = JournalDebitCreditDetail.builder()\n                    .journalVoucherNumber(redVoucherNumber)\n                    .lineNumber(dcDetail.getLineNumber())\n                    // \u501f\u65b9\u2192\u8cb8\u65b9\u3001\u8cb8\u65b9\u2192\u501f\u65b9\u306b\u53cd\u8ee2\n                    .debitCreditType(\n                        dcDetail.getDebitCreditType() == DebitCreditType.DEBIT\n                            ? DebitCreditType.CREDIT\n                            : DebitCreditType.DEBIT)\n                    .accountCode(dcDetail.getAccountCode())\n                    .subAccountCode(dcDetail.getSubAccountCode())\n                    .departmentCode(dcDetail.getDepartmentCode())\n                    .projectCode(dcDetail.getProjectCode())\n                    .amount(dcDetail.getAmount())\n                    .currencyCode(dcDetail.getCurrencyCode())\n                    .exchangeRate(dcDetail.getExchangeRate())\n                    .taxType(dcDetail.getTaxType())\n                    .taxRate(dcDetail.getTaxRate())\n                    .taxCalcType(dcDetail.getTaxCalcType())\n                    .build();\n                reversedDCDetails.add(reversed);\n            }\n\n            var redDetail = JournalDetail.builder()\n                .journalVoucherNumber(redVoucherNumber)\n                .lineNumber(detail.getLineNumber())\n                .lineSummary(detail.getLineSummary() + \"\uff08\u53d6\u6d88\uff09\")\n                .debitCreditDetails(reversedDCDetails)\n                .build();\n            redDetails.add(redDetail);\n        }\n\n        return Journal.builder()\n            .journalVoucherNumber(redVoucherNumber)\n            .postingDate(LocalDate.now())\n            .entryDate(LocalDate.now())\n            .closingJournalFlag(original.getClosingJournalFlag())\n            .singleEntryFlag(original.getSingleEntryFlag())\n            .voucherType(original.getVoucherType())\n            .periodicPostingFlag(false)\n            .employeeCode(original.getEmployeeCode())\n            .departmentCode(original.getDepartmentCode())\n            .redSlipFlag(true)\n            .redBlackVoucherNumber(extractNumericPart(original.getJournalVoucherNumber()))\n            .details(redDetails)\n            .build();\n    }\n\n    private Integer extractNumericPart(String voucherNumber) {\n        return Integer.parseInt(voucherNumber.replaceAll(\"[^0-9]\", \"\"));\n    }\n\n    /**\n     * \u8a02\u6b63\u7d50\u679c\n     */\n    public record CorrectionResult(\n        String redSlipNumber,\n        String blackSlipNumber\n    ) {}\n}\n</code></pre>"},{"location":"article/part3/chapter19/#1923","title":"19.2.3 \u30ed\u30b0\u30c6\u30fc\u30d6\u30eb\u306e\u5b9f\u88c5","text":"<p>\u30de\u30b9\u30bf\u30c7\u30fc\u30bf\u306e\u5909\u66f4\u5c65\u6b74\u3092\u4fdd\u5b58\u3059\u308b\u30ed\u30b0\u30c6\u30fc\u30d6\u30eb\u3092\u8a2d\u8a08\u3057\u307e\u3059\u3002</p> V020__create_change_log_table.sql <pre><code>-- V020__create_change_log_table.sql\n\n-- \u64cd\u4f5c\u7a2e\u5225\nCREATE TYPE \u64cd\u4f5c\u7a2e\u5225 AS ENUM ('INSERT', 'UPDATE', 'DELETE');\n\n-- \u5909\u66f4\u30ed\u30b0\u30c6\u30fc\u30d6\u30eb\nCREATE TABLE \"\u5909\u66f4\u30ed\u30b0\" (\n    \"\u30ed\u30b0ID\" SERIAL PRIMARY KEY,\n    \"\u30c6\u30fc\u30d6\u30eb\u540d\" VARCHAR(50) NOT NULL,\n    \"\u30ec\u30b3\u30fc\u30c9\u30ad\u30fc\" VARCHAR(100) NOT NULL,\n    \"\u64cd\u4f5c\u7a2e\u5225\" \u64cd\u4f5c\u7a2e\u5225 NOT NULL,\n    \"\u64cd\u4f5c\u524d\u30c7\u30fc\u30bf\" JSONB,\n    \"\u64cd\u4f5c\u5f8c\u30c7\u30fc\u30bf\" JSONB,\n    \"\u64cd\u4f5c\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u64cd\u4f5c\u8005\" VARCHAR(50),\n    \"\u64cd\u4f5c\u7aef\u672b\" VARCHAR(100),\n    \"\u5099\u8003\" TEXT\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"idx_\u5909\u66f4\u30ed\u30b0_\u30c6\u30fc\u30d6\u30eb\u540d\" ON \"\u5909\u66f4\u30ed\u30b0\"(\"\u30c6\u30fc\u30d6\u30eb\u540d\");\nCREATE INDEX \"idx_\u5909\u66f4\u30ed\u30b0_\u30ec\u30b3\u30fc\u30c9\u30ad\u30fc\" ON \"\u5909\u66f4\u30ed\u30b0\"(\"\u30ec\u30b3\u30fc\u30c9\u30ad\u30fc\");\nCREATE INDEX \"idx_\u5909\u66f4\u30ed\u30b0_\u64cd\u4f5c\u65e5\u6642\" ON \"\u5909\u66f4\u30ed\u30b0\"(\"\u64cd\u4f5c\u65e5\u6642\");\nCREATE INDEX \"idx_\u5909\u66f4\u30ed\u30b0_\u64cd\u4f5c\u7a2e\u5225\" ON \"\u5909\u66f4\u30ed\u30b0\"(\"\u64cd\u4f5c\u7a2e\u5225\");\n\n-- \u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u306e\u5909\u66f4\u30ed\u30b0\u30c8\u30ea\u30ac\u30fc\nCREATE OR REPLACE FUNCTION log_account_changes()\nRETURNS TRIGGER AS $$\nBEGIN\n    IF TG_OP = 'INSERT' THEN\n        INSERT INTO \"\u5909\u66f4\u30ed\u30b0\" (\n            \"\u30c6\u30fc\u30d6\u30eb\u540d\", \"\u30ec\u30b3\u30fc\u30c9\u30ad\u30fc\", \"\u64cd\u4f5c\u7a2e\u5225\",\n            \"\u64cd\u4f5c\u524d\u30c7\u30fc\u30bf\", \"\u64cd\u4f5c\u5f8c\u30c7\u30fc\u30bf\", \"\u64cd\u4f5c\u8005\"\n        ) VALUES (\n            '\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf',\n            NEW.\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\",\n            'INSERT',\n            NULL,\n            row_to_json(NEW),\n            NEW.\"\u66f4\u65b0\u8005\u540d\"\n        );\n        RETURN NEW;\n    ELSIF TG_OP = 'UPDATE' THEN\n        INSERT INTO \"\u5909\u66f4\u30ed\u30b0\" (\n            \"\u30c6\u30fc\u30d6\u30eb\u540d\", \"\u30ec\u30b3\u30fc\u30c9\u30ad\u30fc\", \"\u64cd\u4f5c\u7a2e\u5225\",\n            \"\u64cd\u4f5c\u524d\u30c7\u30fc\u30bf\", \"\u64cd\u4f5c\u5f8c\u30c7\u30fc\u30bf\", \"\u64cd\u4f5c\u8005\"\n        ) VALUES (\n            '\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf',\n            NEW.\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\",\n            'UPDATE',\n            row_to_json(OLD),\n            row_to_json(NEW),\n            NEW.\"\u66f4\u65b0\u8005\u540d\"\n        );\n        RETURN NEW;\n    ELSIF TG_OP = 'DELETE' THEN\n        INSERT INTO \"\u5909\u66f4\u30ed\u30b0\" (\n            \"\u30c6\u30fc\u30d6\u30eb\u540d\", \"\u30ec\u30b3\u30fc\u30c9\u30ad\u30fc\", \"\u64cd\u4f5c\u7a2e\u5225\",\n            \"\u64cd\u4f5c\u524d\u30c7\u30fc\u30bf\", \"\u64cd\u4f5c\u5f8c\u30c7\u30fc\u30bf\", \"\u64cd\u4f5c\u8005\"\n        ) VALUES (\n            '\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf',\n            OLD.\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\",\n            'DELETE',\n            row_to_json(OLD),\n            NULL,\n            OLD.\"\u66f4\u65b0\u8005\u540d\"\n        );\n        RETURN OLD;\n    END IF;\nEND;\n$$ LANGUAGE plpgsql;\n\nCREATE TRIGGER \"trg_\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf_\u5909\u66f4\u30ed\u30b0\"\nAFTER INSERT OR UPDATE OR DELETE ON \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\"\nFOR EACH ROW\nEXECUTE FUNCTION log_account_changes();\n\nCOMMENT ON TABLE \"\u5909\u66f4\u30ed\u30b0\" IS '\u30de\u30b9\u30bf\u30c7\u30fc\u30bf\u306e\u5909\u66f4\u5c65\u6b74\u3092\u4fdd\u5b58\u3059\u308b\u30c6\u30fc\u30d6\u30eb';\n</code></pre>"},{"location":"article/part3/chapter19/#1924","title":"19.2.4 \u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb","text":"ChangeLog \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/sms/domain/model/audit/ChangeLog.java\npackage com.example.sms.domain.model.audit;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.time.LocalDateTime;\n\n/**\n * \u5909\u66f4\u30ed\u30b0\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class ChangeLog {\n    private Long logId;               // \u30ed\u30b0ID\n    private String tableName;         // \u30c6\u30fc\u30d6\u30eb\u540d\n    private String recordKey;         // \u30ec\u30b3\u30fc\u30c9\u30ad\u30fc\n    private OperationType operationType; // \u64cd\u4f5c\u7a2e\u5225\n    private String beforeData;        // \u64cd\u4f5c\u524d\u30c7\u30fc\u30bf\uff08JSON\uff09\n    private String afterData;         // \u64cd\u4f5c\u5f8c\u30c7\u30fc\u30bf\uff08JSON\uff09\n    private LocalDateTime operatedAt; // \u64cd\u4f5c\u65e5\u6642\n    private String operatedBy;        // \u64cd\u4f5c\u8005\n    private String operatedFrom;      // \u64cd\u4f5c\u7aef\u672b\n    private String remarks;           // \u5099\u8003\n\n    /**\n     * \u64cd\u4f5c\u7a2e\u5225\n     */\n    public enum OperationType {\n        INSERT, UPDATE, DELETE\n    }\n}\n</code></pre>"},{"location":"article/part3/chapter19/#1925","title":"19.2.5 \u30ea\u30dd\u30b8\u30c8\u30ea\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9","text":"ChangeLogRepository\uff08Output Port\uff09 <pre><code>// src/main/java/com/example/sms/application/port/out/ChangeLogRepository.java\npackage com.example.sms.application.port.out;\n\nimport com.example.sms.domain.model.audit.ChangeLog;\nimport com.example.sms.domain.model.audit.ChangeLog.OperationType;\n\nimport java.time.LocalDateTime;\nimport java.util.List;\nimport java.util.Optional;\n\n/**\n * \u5909\u66f4\u30ed\u30b0\u30ea\u30dd\u30b8\u30c8\u30ea\uff08Output Port\uff09\n */\npublic interface ChangeLogRepository {\n\n    /**\n     * \u5909\u66f4\u30ed\u30b0\u3092\u4fdd\u5b58\u3059\u308b\n     */\n    void save(ChangeLog changeLog);\n\n    /**\n     * \u30ed\u30b0ID\u3067\u691c\u7d22\u3059\u308b\n     */\n    Optional&lt;ChangeLog&gt; findById(Long logId);\n\n    /**\n     * \u30c6\u30fc\u30d6\u30eb\u540d\u3068\u30ec\u30b3\u30fc\u30c9\u30ad\u30fc\u3067\u691c\u7d22\u3059\u308b\n     */\n    List&lt;ChangeLog&gt; findByTableNameAndRecordKey(String tableName, String recordKey);\n\n    /**\n     * \u30c6\u30fc\u30d6\u30eb\u540d\u3067\u691c\u7d22\u3059\u308b\n     */\n    List&lt;ChangeLog&gt; findByTableName(String tableName);\n\n    /**\n     * \u64cd\u4f5c\u7a2e\u5225\u3067\u691c\u7d22\u3059\u308b\n     */\n    List&lt;ChangeLog&gt; findByOperationType(OperationType operationType);\n\n    /**\n     * \u671f\u9593\u6307\u5b9a\u3067\u691c\u7d22\u3059\u308b\n     */\n    List&lt;ChangeLog&gt; findByDateRange(LocalDateTime from, LocalDateTime to);\n\n    /**\n     * \u64cd\u4f5c\u8005\u3067\u691c\u7d22\u3059\u308b\n     */\n    List&lt;ChangeLog&gt; findByOperatedBy(String operatedBy);\n\n    /**\n     * \u8907\u5408\u6761\u4ef6\u3067\u691c\u7d22\u3059\u308b\n     */\n    List&lt;ChangeLog&gt; findByConditions(\n            String tableName,\n            String recordKey,\n            OperationType operationType,\n            LocalDateTime from,\n            LocalDateTime to,\n            String operatedBy\n    );\n\n    /**\n     * \u5168\u4ef6\u524a\u9664\uff08\u30c6\u30b9\u30c8\u7528\uff09\n     */\n    void deleteAll();\n}\n</code></pre>"},{"location":"article/part3/chapter19/#1926-mybatis-mapper","title":"19.2.6 MyBatis Mapper","text":"ChangeLogMapper.xml <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n\n&lt;mapper namespace=\"com.example.sms.infrastructure.persistence.mapper.ChangeLogMapper\"&gt;\n\n    &lt;!-- ResultMap: \u65e5\u672c\u8a9e\u30ab\u30e9\u30e0\u540d \u2192 \u82f1\u8a9e\u30d7\u30ed\u30d1\u30c6\u30a3\u540d --&gt;\n    &lt;resultMap id=\"ChangeLogResultMap\" type=\"com.example.sms.domain.model.audit.ChangeLog\"&gt;\n        &lt;id property=\"logId\" column=\"\u30ed\u30b0ID\"/&gt;\n        &lt;result property=\"tableName\" column=\"\u30c6\u30fc\u30d6\u30eb\u540d\"/&gt;\n        &lt;result property=\"recordKey\" column=\"\u30ec\u30b3\u30fc\u30c9\u30ad\u30fc\"/&gt;\n        &lt;result property=\"operationType\" column=\"\u64cd\u4f5c\u7a2e\u5225\"\n                typeHandler=\"com.example.sms.infrastructure.persistence.typehandler.OperationTypeHandler\"/&gt;\n        &lt;result property=\"beforeData\" column=\"\u64cd\u4f5c\u524d\u30c7\u30fc\u30bf\"/&gt;\n        &lt;result property=\"afterData\" column=\"\u64cd\u4f5c\u5f8c\u30c7\u30fc\u30bf\"/&gt;\n        &lt;result property=\"operatedAt\" column=\"\u64cd\u4f5c\u65e5\u6642\"/&gt;\n        &lt;result property=\"operatedBy\" column=\"\u64cd\u4f5c\u8005\"/&gt;\n        &lt;result property=\"operatedFrom\" column=\"\u64cd\u4f5c\u7aef\u672b\"/&gt;\n        &lt;result property=\"remarks\" column=\"\u5099\u8003\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;!-- \u767b\u9332 --&gt;\n    &lt;insert id=\"insert\" parameterType=\"com.example.sms.domain.model.audit.ChangeLog\"\n            useGeneratedKeys=\"true\" keyProperty=\"logId\" keyColumn=\"\u30ed\u30b0ID\"&gt;\n        INSERT INTO \"\u5909\u66f4\u30ed\u30b0\" (\n            \"\u30c6\u30fc\u30d6\u30eb\u540d\",\n            \"\u30ec\u30b3\u30fc\u30c9\u30ad\u30fc\",\n            \"\u64cd\u4f5c\u7a2e\u5225\",\n            \"\u64cd\u4f5c\u524d\u30c7\u30fc\u30bf\",\n            \"\u64cd\u4f5c\u5f8c\u30c7\u30fc\u30bf\",\n            \"\u64cd\u4f5c\u65e5\u6642\",\n            \"\u64cd\u4f5c\u8005\",\n            \"\u64cd\u4f5c\u7aef\u672b\",\n            \"\u5099\u8003\"\n        ) VALUES (\n            #{tableName},\n            #{recordKey},\n            #{operationType, typeHandler=com.example.sms.infrastructure.persistence.typehandler.OperationTypeHandler},\n            #{beforeData}::jsonb,\n            #{afterData}::jsonb,\n            COALESCE(#{operatedAt}, CURRENT_TIMESTAMP),\n            #{operatedBy},\n            #{operatedFrom},\n            #{remarks}\n        )\n    &lt;/insert&gt;\n\n    &lt;!-- \u30ed\u30b0ID\u3067\u691c\u7d22 --&gt;\n    &lt;select id=\"findById\" resultMap=\"ChangeLogResultMap\"&gt;\n        SELECT\n            \"\u30ed\u30b0ID\",\n            \"\u30c6\u30fc\u30d6\u30eb\u540d\",\n            \"\u30ec\u30b3\u30fc\u30c9\u30ad\u30fc\",\n            \"\u64cd\u4f5c\u7a2e\u5225\",\n            \"\u64cd\u4f5c\u524d\u30c7\u30fc\u30bf\",\n            \"\u64cd\u4f5c\u5f8c\u30c7\u30fc\u30bf\",\n            \"\u64cd\u4f5c\u65e5\u6642\",\n            \"\u64cd\u4f5c\u8005\",\n            \"\u64cd\u4f5c\u7aef\u672b\",\n            \"\u5099\u8003\"\n        FROM \"\u5909\u66f4\u30ed\u30b0\"\n        WHERE \"\u30ed\u30b0ID\" = #{logId}\n    &lt;/select&gt;\n\n    &lt;!-- \u30c6\u30fc\u30d6\u30eb\u540d\u3068\u30ec\u30b3\u30fc\u30c9\u30ad\u30fc\u3067\u691c\u7d22 --&gt;\n    &lt;select id=\"findByTableNameAndRecordKey\" resultMap=\"ChangeLogResultMap\"&gt;\n        SELECT\n            \"\u30ed\u30b0ID\",\n            \"\u30c6\u30fc\u30d6\u30eb\u540d\",\n            \"\u30ec\u30b3\u30fc\u30c9\u30ad\u30fc\",\n            \"\u64cd\u4f5c\u7a2e\u5225\",\n            \"\u64cd\u4f5c\u524d\u30c7\u30fc\u30bf\",\n            \"\u64cd\u4f5c\u5f8c\u30c7\u30fc\u30bf\",\n            \"\u64cd\u4f5c\u65e5\u6642\",\n            \"\u64cd\u4f5c\u8005\",\n            \"\u64cd\u4f5c\u7aef\u672b\",\n            \"\u5099\u8003\"\n        FROM \"\u5909\u66f4\u30ed\u30b0\"\n        WHERE \"\u30c6\u30fc\u30d6\u30eb\u540d\" = #{tableName}\n          AND \"\u30ec\u30b3\u30fc\u30c9\u30ad\u30fc\" = #{recordKey}\n        ORDER BY \"\u64cd\u4f5c\u65e5\u6642\" DESC\n    &lt;/select&gt;\n\n    &lt;!-- \u30c6\u30fc\u30d6\u30eb\u540d\u3067\u691c\u7d22 --&gt;\n    &lt;select id=\"findByTableName\" resultMap=\"ChangeLogResultMap\"&gt;\n        SELECT\n            \"\u30ed\u30b0ID\",\n            \"\u30c6\u30fc\u30d6\u30eb\u540d\",\n            \"\u30ec\u30b3\u30fc\u30c9\u30ad\u30fc\",\n            \"\u64cd\u4f5c\u7a2e\u5225\",\n            \"\u64cd\u4f5c\u524d\u30c7\u30fc\u30bf\",\n            \"\u64cd\u4f5c\u5f8c\u30c7\u30fc\u30bf\",\n            \"\u64cd\u4f5c\u65e5\u6642\",\n            \"\u64cd\u4f5c\u8005\",\n            \"\u64cd\u4f5c\u7aef\u672b\",\n            \"\u5099\u8003\"\n        FROM \"\u5909\u66f4\u30ed\u30b0\"\n        WHERE \"\u30c6\u30fc\u30d6\u30eb\u540d\" = #{tableName}\n        ORDER BY \"\u64cd\u4f5c\u65e5\u6642\" DESC\n    &lt;/select&gt;\n\n    &lt;!-- \u8907\u5408\u6761\u4ef6\u3067\u691c\u7d22 --&gt;\n    &lt;select id=\"findByConditions\" resultMap=\"ChangeLogResultMap\"&gt;\n        SELECT\n            \"\u30ed\u30b0ID\",\n            \"\u30c6\u30fc\u30d6\u30eb\u540d\",\n            \"\u30ec\u30b3\u30fc\u30c9\u30ad\u30fc\",\n            \"\u64cd\u4f5c\u7a2e\u5225\",\n            \"\u64cd\u4f5c\u524d\u30c7\u30fc\u30bf\",\n            \"\u64cd\u4f5c\u5f8c\u30c7\u30fc\u30bf\",\n            \"\u64cd\u4f5c\u65e5\u6642\",\n            \"\u64cd\u4f5c\u8005\",\n            \"\u64cd\u4f5c\u7aef\u672b\",\n            \"\u5099\u8003\"\n        FROM \"\u5909\u66f4\u30ed\u30b0\"\n        &lt;where&gt;\n            &lt;if test=\"tableName != null\"&gt;\n                AND \"\u30c6\u30fc\u30d6\u30eb\u540d\" = #{tableName}\n            &lt;/if&gt;\n            &lt;if test=\"recordKey != null\"&gt;\n                AND \"\u30ec\u30b3\u30fc\u30c9\u30ad\u30fc\" = #{recordKey}\n            &lt;/if&gt;\n            &lt;if test=\"operationType != null\"&gt;\n                AND \"\u64cd\u4f5c\u7a2e\u5225\" = #{operationType, typeHandler=com.example.sms.infrastructure.persistence.typehandler.OperationTypeHandler}\n            &lt;/if&gt;\n            &lt;if test=\"from != null\"&gt;\n                AND \"\u64cd\u4f5c\u65e5\u6642\" &amp;gt;= #{from}\n            &lt;/if&gt;\n            &lt;if test=\"to != null\"&gt;\n                AND \"\u64cd\u4f5c\u65e5\u6642\" &amp;lt;= #{to}\n            &lt;/if&gt;\n            &lt;if test=\"operatedBy != null\"&gt;\n                AND \"\u64cd\u4f5c\u8005\" = #{operatedBy}\n            &lt;/if&gt;\n        &lt;/where&gt;\n        ORDER BY \"\u64cd\u4f5c\u65e5\u6642\" DESC\n    &lt;/select&gt;\n\n    &lt;!-- \u5168\u4ef6\u524a\u9664\uff08\u30c6\u30b9\u30c8\u7528\uff09 --&gt;\n    &lt;delete id=\"deleteAll\"&gt;\n        DELETE FROM \"\u5909\u66f4\u30ed\u30b0\"\n    &lt;/delete&gt;\n\n&lt;/mapper&gt;\n</code></pre> OperationTypeHandler\uff08TypeHandler\uff09 <pre><code>// src/main/java/com/example/sms/infrastructure/persistence/typehandler/OperationTypeHandler.java\npackage com.example.sms.infrastructure.persistence.typehandler;\n\nimport com.example.sms.domain.model.audit.ChangeLog.OperationType;\nimport org.apache.ibatis.type.BaseTypeHandler;\nimport org.apache.ibatis.type.JdbcType;\nimport org.apache.ibatis.type.MappedTypes;\n\nimport java.sql.CallableStatement;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\n\n/**\n * \u64cd\u4f5c\u7a2e\u5225 TypeHandler\n * PostgreSQL ENUM\uff08\u64cd\u4f5c\u7a2e\u5225\uff09 \u2194 Java Enum\uff08OperationType\uff09\u306e\u5909\u63db\n */\n@MappedTypes(OperationType.class)\npublic class OperationTypeHandler extends BaseTypeHandler&lt;OperationType&gt; {\n\n    @Override\n    public void setNonNullParameter(PreparedStatement ps, int i,\n            OperationType parameter, JdbcType jdbcType) throws SQLException {\n        // Java Enum \u2192 PostgreSQL ENUM\n        ps.setObject(i, parameter.name(), java.sql.Types.OTHER);\n    }\n\n    @Override\n    public OperationType getNullableResult(ResultSet rs, String columnName)\n            throws SQLException {\n        String value = rs.getString(columnName);\n        return value == null ? null : OperationType.valueOf(value);\n    }\n\n    @Override\n    public OperationType getNullableResult(ResultSet rs, int columnIndex)\n            throws SQLException {\n        String value = rs.getString(columnIndex);\n        return value == null ? null : OperationType.valueOf(value);\n    }\n\n    @Override\n    public OperationType getNullableResult(CallableStatement cs, int columnIndex)\n            throws SQLException {\n        String value = cs.getString(columnIndex);\n        return value == null ? null : OperationType.valueOf(value);\n    }\n}\n</code></pre>"},{"location":"article/part3/chapter19/#1927-tdd","title":"19.2.7 TDD \u306b\u3088\u308b\u30c6\u30b9\u30c8\u5b9f\u88c5","text":"\u5909\u66f4\u30ed\u30b0\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30c6\u30b9\u30c8 <pre><code>// src/test/java/com/example/sms/infrastructure/persistence/ChangeLogRepositoryTest.java\npackage com.example.sms.infrastructure.persistence;\n\nimport com.example.sms.application.port.out.ChangeLogRepository;\nimport com.example.sms.domain.model.audit.ChangeLog;\nimport com.example.sms.domain.model.audit.ChangeLog.OperationType;\nimport org.junit.jupiter.api.*;\nimport org.mybatis.spring.boot.test.autoconfigure.MybatisTest;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.jdbc.AutoConfigureTestDatabase;\nimport org.springframework.context.annotation.Import;\nimport org.springframework.test.context.DynamicPropertyRegistry;\nimport org.springframework.test.context.DynamicPropertySource;\nimport org.testcontainers.containers.PostgreSQLContainer;\nimport org.testcontainers.junit.jupiter.Container;\nimport org.testcontainers.junit.jupiter.Testcontainers;\n\nimport java.time.LocalDateTime;\n\nimport static org.assertj.core.api.Assertions.*;\n\n@MybatisTest\n@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\n@Testcontainers\n@Import(ChangeLogRepositoryImpl.class)\n@DisplayName(\"\u5909\u66f4\u30ed\u30b0\u30ea\u30dd\u30b8\u30c8\u30ea\")\nclass ChangeLogRepositoryTest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:16\")\n            .withDatabaseName(\"testdb\")\n            .withUsername(\"test\")\n            .withPassword(\"test\");\n\n    @DynamicPropertySource\n    static void configureProperties(DynamicPropertyRegistry registry) {\n        registry.add(\"spring.datasource.url\", postgres::getJdbcUrl);\n        registry.add(\"spring.datasource.username\", postgres::getUsername);\n        registry.add(\"spring.datasource.password\", postgres::getPassword);\n    }\n\n    @Autowired\n    private ChangeLogRepository changeLogRepository;\n\n    @BeforeEach\n    void setUp() {\n        changeLogRepository.deleteAll();\n    }\n\n    @Nested\n    @DisplayName(\"\u767b\u9332\")\n    class Insert {\n\n        @Test\n        @DisplayName(\"\u5909\u66f4\u30ed\u30b0\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canInsertChangeLog() {\n            // Arrange\n            var changeLog = ChangeLog.builder()\n                    .tableName(\"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\")\n                    .recordKey(\"11100\")\n                    .operationType(OperationType.INSERT)\n                    .afterData(\"{\\\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\\\":\\\"11100\\\",\\\"\u52d8\u5b9a\u79d1\u76ee\u540d\\\":\\\"\u73fe\u91d1\\\"}\")\n                    .operatedBy(\"admin\")\n                    .build();\n\n            // Act\n            changeLogRepository.save(changeLog);\n\n            // Assert\n            assertThat(changeLog.getLogId()).isNotNull();\n            var result = changeLogRepository.findById(changeLog.getLogId());\n            assertThat(result).isPresent();\n            assertThat(result.get().getTableName()).isEqualTo(\"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\");\n            assertThat(result.get().getOperationType()).isEqualTo(OperationType.INSERT);\n        }\n\n        @Test\n        @DisplayName(\"UPDATE\u64cd\u4f5c\u306e\u30ed\u30b0\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canInsertUpdateLog() {\n            // Arrange\n            var changeLog = ChangeLog.builder()\n                    .tableName(\"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\")\n                    .recordKey(\"11100\")\n                    .operationType(OperationType.UPDATE)\n                    .beforeData(\"{\\\"\u52d8\u5b9a\u79d1\u76ee\u540d\\\":\\\"\u73fe\u91d1\\\"}\")\n                    .afterData(\"{\\\"\u52d8\u5b9a\u79d1\u76ee\u540d\\\":\\\"\u73fe\u91d1\u53ca\u3073\u9810\u91d1\\\"}\")\n                    .operatedBy(\"admin\")\n                    .remarks(\"\u79d1\u76ee\u540d\u5909\u66f4\")\n                    .build();\n\n            // Act\n            changeLogRepository.save(changeLog);\n\n            // Assert\n            var result = changeLogRepository.findById(changeLog.getLogId());\n            assertThat(result).isPresent();\n            assertThat(result.get().getOperationType()).isEqualTo(OperationType.UPDATE);\n            assertThat(result.get().getBeforeData()).contains(\"\u73fe\u91d1\");\n            assertThat(result.get().getAfterData()).contains(\"\u73fe\u91d1\u53ca\u3073\u9810\u91d1\");\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u691c\u7d22\")\n    class Search {\n\n        @BeforeEach\n        void setUpTestData() {\n            // \u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u3092\u767b\u9332\n            changeLogRepository.save(ChangeLog.builder()\n                    .tableName(\"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\")\n                    .recordKey(\"11100\")\n                    .operationType(OperationType.INSERT)\n                    .afterData(\"{\\\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\\\":\\\"11100\\\"}\")\n                    .operatedAt(LocalDateTime.of(2025, 1, 1, 10, 0))\n                    .operatedBy(\"user1\")\n                    .build());\n\n            changeLogRepository.save(ChangeLog.builder()\n                    .tableName(\"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\")\n                    .recordKey(\"11100\")\n                    .operationType(OperationType.UPDATE)\n                    .beforeData(\"{\\\"\u52d8\u5b9a\u79d1\u76ee\u540d\\\":\\\"\u73fe\u91d1\\\"}\")\n                    .afterData(\"{\\\"\u52d8\u5b9a\u79d1\u76ee\u540d\\\":\\\"\u73fe\u91d1\u53ca\u3073\u9810\u91d1\\\"}\")\n                    .operatedAt(LocalDateTime.of(2025, 1, 15, 14, 30))\n                    .operatedBy(\"user2\")\n                    .build());\n        }\n\n        @Test\n        @DisplayName(\"\u30c6\u30fc\u30d6\u30eb\u540d\u3068\u30ec\u30b3\u30fc\u30c9\u30ad\u30fc\u3067\u691c\u7d22\u3067\u304d\u308b\")\n        void canFindByTableNameAndRecordKey() {\n            // Act\n            var result = changeLogRepository.findByTableNameAndRecordKey(\n                    \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\", \"11100\");\n\n            // Assert\n            assertThat(result).hasSize(2);\n            assertThat(result).allMatch(log -&gt;\n                    log.getTableName().equals(\"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\") &amp;&amp;\n                    log.getRecordKey().equals(\"11100\"));\n        }\n\n        @Test\n        @DisplayName(\"\u64cd\u4f5c\u7a2e\u5225\u3067\u691c\u7d22\u3067\u304d\u308b\")\n        void canFindByOperationType() {\n            // Act\n            var result = changeLogRepository.findByOperationType(OperationType.INSERT);\n\n            // Assert\n            assertThat(result).hasSize(1);\n            assertThat(result).allMatch(log -&gt;\n                    log.getOperationType() == OperationType.INSERT);\n        }\n    }\n}\n</code></pre>"},{"location":"article/part3/chapter19/#193-er","title":"19.3 ER\u56f3","text":""},{"location":"article/part3/chapter19/#194","title":"19.4 \u307e\u3068\u3081","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306b\u304a\u3051\u308b\u8d64\u9ed2\u51e6\u7406\u3068\u30ed\u30b0\u7ba1\u7406\u306e\u8a2d\u8a08\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u307e\u3057\u305f\u3002</p>"},{"location":"article/part3/chapter19/#_2","title":"\u8a2d\u8a08\u306e\u30dd\u30a4\u30f3\u30c8","text":"<ol> <li>3\u3064\u306e\u30ed\u30b0\u7ba1\u7406\u30a2\u30d7\u30ed\u30fc\u30c1</li> <li>\u65b9\u5f0fA: \u30c7\u30fc\u30bf\u81ea\u4f53\u306b\u30ed\u30b0\u60c5\u5831\uff08\u30b7\u30f3\u30d7\u30eb\u3060\u304c\u5c65\u6b74\u8ffd\u8de1\u4e0d\u53ef\uff09</li> <li>\u65b9\u5f0fB: \u8d64\u9ed2\u51e6\u7406\u30fb\u8ad6\u7406\u524a\u9664\uff08\u4f1a\u8a08\u30c7\u30fc\u30bf\u306b\u6700\u9069\uff09</li> <li> <p>\u65b9\u5f0fC: \u30ed\u30b0\u30c6\u30fc\u30d6\u30eb\uff08\u30de\u30b9\u30bf\u30c7\u30fc\u30bf\u306b\u6700\u9069\uff09</p> </li> <li> <p>\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u3067\u306e\u4f7f\u3044\u5206\u3051</p> </li> <li>\u4f1a\u8a08\u30c7\u30fc\u30bf: \u8d64\u9ed2\u51e6\u7406\u3067\u76e3\u67fb\u8a3c\u8de1\u3092\u78ba\u4fdd</li> <li>\u30de\u30b9\u30bf\u30c7\u30fc\u30bf: \u30ed\u30b0\u30c6\u30fc\u30d6\u30eb\u3067\u5909\u66f4\u5c65\u6b74\u3092\u7ba1\u7406</li> <li> <p>\u30b5\u30de\u30ea\u30c7\u30fc\u30bf: \u66f4\u65b0\u65e5\u6642\u306e\u307f</p> </li> <li> <p>\u8d64\u9ed2\u51e6\u7406\u306e\u30e1\u30ea\u30c3\u30c8</p> </li> <li>\u76e3\u67fb\u8a3c\u8de1\u306e\u78ba\u4fdd</li> <li>\u4f1a\u8a08\u57fa\u6e96\u3078\u306e\u6e96\u62e0</li> <li> <p>\u6b8b\u9ad8\u306e\u81ea\u52d5\u8abf\u6574</p> </li> <li> <p>\u30ed\u30b0\u30c6\u30fc\u30d6\u30eb\u306e\u30e1\u30ea\u30c3\u30c8</p> </li> <li>\u5b8c\u5168\u306a\u5909\u66f4\u5c65\u6b74\u306e\u8ffd\u8de1</li> <li>\u4efb\u610f\u306e\u6642\u70b9\u306e\u72b6\u614b\u3092\u5fa9\u5143\u53ef\u80fd</li> <li>\u30c8\u30ea\u30ac\u30fc\u306b\u3088\u308b\u81ea\u52d5\u8a18\u9332</li> </ol>"},{"location":"article/part3/chapter19/#_3","title":"\u6b21\u7ae0\u306e\u4e88\u544a","text":"<p>\u7b2c20\u7ae0\u3067\u306f\u3001\u5177\u4f53\u7684\u306a\u4f01\u696d\uff08D\u793e\uff1a\u5316\u7ca7\u54c1\u88fd\u9020\u8ca9\u58f2\uff09\u306e\u4e8b\u4f8b\u306b\u57fa\u3065\u3044\u3066\u3001\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u30c7\u30fc\u30bf\u8a2d\u8a08\u3092\u884c\u3044\u307e\u3059\u3002\u52d8\u5b9a\u79d1\u76ee\u4f53\u7cfb\u3001\u7d44\u7e54\u69cb\u6210\u3001Seed\u30c7\u30fc\u30bf\u306e\u5b9f\u88c5\u306a\u3069\u3001\u5b9f\u969b\u306e\u696d\u52d9\u306b\u5373\u3057\u305f\u8a2d\u8a08\u3092\u884c\u3044\u307e\u3059\u3002</p>"},{"location":"article/part3/chapter20/","title":"\u7b2c20\u7ae0\uff1a\u8ca1\u52d9\u4f1a\u8a08\u30c7\u30fc\u30bf\u8a2d\u8a08\uff08D\u793e\u4e8b\u4f8b\uff09","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u5316\u7ca7\u54c1\u88fd\u9020\u8ca9\u58f2\u4f1a\u793eD\u793e\u3092\u984c\u6750\u3068\u3057\u3066\u3001\u5b9f\u969b\u306e\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306b\u304a\u3051\u308b\u30c7\u30fc\u30bf\u8a2d\u8a08\u306e\u5168\u4f53\u50cf\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002\u4f01\u696d\u6982\u8981\u304b\u3089\u7d44\u7e54\u69cb\u6210\u3001\u52d8\u5b9a\u79d1\u76ee\u4f53\u7cfb\u3001\u305d\u3057\u3066Seed\u30c7\u30fc\u30bf\u306e\u5b9f\u88c5\u307e\u3067\u3001\u5305\u62ec\u7684\u306b\u8aac\u660e\u3057\u307e\u3059\u3002</p>"},{"location":"article/part3/chapter20/#201-d","title":"20.1 D\u793e\u306e\u6982\u8981","text":""},{"location":"article/part3/chapter20/#2011","title":"20.1.1 \u4f1a\u793e\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb","text":"<p>D\u793e\u306f\u5316\u7ca7\u54c1\u88fd\u9020\u8ca9\u58f2\u3092\u4e3b\u696d\u3068\u3059\u308b\u4e2d\u5805\u4f01\u696d\u3067\u3059\u3002\u4ee5\u4e0b\u306bD\u793e\u306e\u57fa\u672c\u60c5\u5831\u3092\u793a\u3057\u307e\u3059\u3002</p> \u9805\u76ee \u5185\u5bb9 \u696d\u7a2e \u5316\u7ca7\u54c1\u88fd\u9020\u8ca9\u58f2 \u8cc7\u672c\u91d1 5\u5104\u5186 \u5f93\u696d\u54e1\u6570 300\u540d \u5e74\u9593\u58f2\u4e0a\u9ad8 80\u5104\u5186 \u6c7a\u7b97\u671f 3\u6708"},{"location":"article/part3/chapter20/#2012","title":"20.1.2 \u4f01\u696d\u6982\u8981","text":"<p>D\u793e\u306f\u56fd\u5185\u5e02\u5834\u3092\u4e2d\u5fc3\u306b\u30b9\u30ad\u30f3\u30b1\u30a2\u88fd\u54c1\u3068\u30d8\u30a2\u30b1\u30a2\u88fd\u54c1\u3092\u5c55\u958b\u3057\u3066\u304a\u308a\u3001\u8fd1\u5e74\u306f\u6d77\u5916\u5e02\u5834\u3078\u306e\u9032\u51fa\u3082\u7a4d\u6975\u7684\u306b\u884c\u3063\u3066\u3044\u307e\u3059\u3002\u88fd\u9020\u62e0\u70b9\u306f\u56fd\u5185\u306b2\u5de5\u5834\u3092\u6301\u3061\u3001\u54c1\u8cea\u7ba1\u7406\u306b\u529b\u3092\u5165\u308c\u305f\u88fd\u54c1\u3065\u304f\u308a\u304c\u7279\u5fb4\u3067\u3059\u3002</p> <p></p>"},{"location":"article/part3/chapter20/#2013","title":"20.1.3 \u6c7a\u7b97\u671f\u3068\u7d4c\u7406\u4f53\u5236","text":"<p>D\u793e\u306f3\u6708\u6c7a\u7b97\u3092\u63a1\u7528\u3057\u3066\u304a\u308a\u3001\u7d4c\u7406\u90e8\u9580\u306f\u4ee5\u4e0b\u306e\u4f53\u5236\u3067\u904b\u55b6\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> \u90e8\u9580 \u4eba\u6570 \u4e3b\u306a\u696d\u52d9 \u7d4c\u7406\u90e8 10\u540d \u65e5\u5e38\u7d4c\u7406\u3001\u6708\u6b21\u6c7a\u7b97\u3001\u5e74\u6b21\u6c7a\u7b97 \u8ca1\u52d9\u8ab2 3\u540d \u8cc7\u91d1\u7ba1\u7406\u3001\u8cc7\u91d1\u8abf\u9054\u3001\u70ba\u66ff\u7ba1\u7406 <p></p>"},{"location":"article/part3/chapter20/#202","title":"20.2 \u7d44\u7e54\u69cb\u6210","text":""},{"location":"article/part3/chapter20/#2021","title":"20.2.1 \u7d44\u7e54\u56f3","text":"<p>D\u793e\u306e\u7d44\u7e54\u306f\u672c\u90e8-\u90e8-\u8ab2\u306e3\u968e\u5c64\u3067\u69cb\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part3/chapter20/#2022","title":"20.2.2 \u90e8\u9580\u30de\u30b9\u30bf\u306e\u968e\u5c64\u69cb\u9020","text":"<p>\u90e8\u9580\u30de\u30b9\u30bf\u306f\u30c1\u30eb\u30c0\u9023\u7d50\u306b\u3088\u308b\u30d1\u30b9\u8868\u73fe\u3067\u968e\u5c64\u69cb\u9020\u3092\u7ba1\u7406\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u4efb\u610f\u306e\u968e\u5c64\u3067\u306e\u96c6\u8a08\u304c\u5bb9\u6613\u306b\u306a\u308a\u307e\u3059\u3002</p> \u90e8\u9580\u30b3\u30fc\u30c9 \u90e8\u9580\u540d \u7d44\u7e54\u968e\u5c64 \u90e8\u9580\u30d1\u30b9 \u6700\u4e0b\u5c64\u30d5\u30e9\u30b0 10000 \u5168\u793e 0 10000 0 11000 \u55b6\u696d\u672c\u90e8 1 10000~11000 0 11100 \u6771\u65e5\u672c\u55b6\u696d\u90e8 2 10000~11000~11100 0 11110 \u6771\u65e5\u672c\u55b6\u696d\u8ab2 3 10000~11000~11100~11110 1 12000 \u88fd\u9020\u672c\u90e8 1 10000~12000 0 12100 \u7b2c\u4e00\u88fd\u9020\u90e8 2 10000~12000~12100 0 12110 \u7b2c\u4e00\u88fd\u9020\u8ab2 3 10000~12000~12100~12110 1 13000 \u7ba1\u7406\u672c\u90e8 1 10000~13000 0 13100 \u7d4c\u7406\u90e8 2 10000~13000~13100 0 13110 \u7d4c\u7406\u8ab2 3 10000~13000~13100~13110 1"},{"location":"article/part3/chapter20/#2023","title":"20.2.3 \u90e8\u9580\u30b3\u30fc\u30c9\u4f53\u7cfb","text":"<p>D\u793e\u306e\u90e8\u9580\u30b3\u30fc\u30c9\u306f5\u6841\u3067\u8a2d\u8a08\u3055\u308c\u3066\u304a\u308a\u3001\u5404\u6841\u306b\u610f\u5473\u3092\u6301\u305f\u305b\u3066\u3044\u307e\u3059\u3002</p> <pre><code> 1  2  3  4  5\n \u2193  \u2193  \u2193  \u2193  \u2193\n[1][1][1][1][0]\n \u2502  \u2502  \u2502  \u2514\u2500\u2500\u2500\u2500 \u9023\u756a\uff080-9\uff09\n \u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \u8ab2\u30b3\u30fc\u30c9\uff081-9\uff09\n \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \u90e8\u30b3\u30fc\u30c9\uff081-9\uff09\n \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \u672c\u90e8\u30b3\u30fc\u30c9\uff081-3\uff09\n\n\u672c\u90e8\u30b3\u30fc\u30c9:\n  1: \u55b6\u696d\u672c\u90e8\n  2: \u88fd\u9020\u672c\u90e8\n  3: \u7ba1\u7406\u672c\u90e8\n</code></pre> \u90e8\u9580\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u5b9f\u88c5 <pre><code>// src/main/java/com/example/accounting/domain/model/department/Department.java\npackage com.example.accounting.domain.model.department;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.util.Arrays;\nimport java.util.List;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Department {\n    /** \u90e8\u9580\u30b3\u30fc\u30c9\uff085\u6841\uff09 */\n    private String departmentCode;\n\n    /** \u90e8\u9580\u540d */\n    private String departmentName;\n\n    /** \u90e8\u9580\u7565\u540d */\n    private String departmentShortName;\n\n    /** \u7d44\u7e54\u968e\u5c64\uff080:\u5168\u793e, 1:\u672c\u90e8, 2:\u90e8, 3:\u8ab2\uff09 */\n    private Integer organizationLevel;\n\n    /** \u90e8\u9580\u30d1\u30b9\uff08\u30c1\u30eb\u30c0\u9023\u7d50\uff09 */\n    private String departmentPath;\n\n    /** \u6700\u4e0b\u5c64\u30d5\u30e9\u30b0\uff080:\u4e2d\u9593, 1:\u6700\u4e0b\u5c64\uff09 */\n    private Integer lowestLevelFlag;\n\n    /**\n     * \u4e0a\u4f4d\u90e8\u9580\u30b3\u30fc\u30c9\u306e\u30ea\u30b9\u30c8\u3092\u53d6\u5f97\n     */\n    public List&lt;String&gt; getAncestorCodes() {\n        if (departmentPath == null || departmentPath.isEmpty()) {\n            return List.of();\n        }\n        return Arrays.asList(departmentPath.split(\"~\"));\n    }\n\n    /**\n     * \u76f4\u4e0a\u4f4d\u306e\u90e8\u9580\u30b3\u30fc\u30c9\u3092\u53d6\u5f97\n     */\n    public String getParentCode() {\n        List&lt;String&gt; ancestors = getAncestorCodes();\n        if (ancestors.size() &lt; 2) {\n            return null;\n        }\n        return ancestors.get(ancestors.size() - 2);\n    }\n\n    /**\n     * \u6700\u4e0b\u5c64\u304b\u3069\u3046\u304b\n     */\n    public boolean isLowestLevel() {\n        return lowestLevelFlag != null &amp;&amp; lowestLevelFlag == 1;\n    }\n\n    /**\n     * \u6307\u5b9a\u90e8\u9580\u306e\u4e0b\u4f4d\u304b\u3069\u3046\u304b\n     */\n    public boolean isDescendantOf(String ancestorCode) {\n        return departmentPath != null &amp;&amp; departmentPath.contains(ancestorCode);\n    }\n}\n</code></pre> \u90e8\u9580\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u5b9f\u88c5 <pre><code>// src/main/java/com/example/accounting/domain/model/department/DepartmentRepository.java\npackage com.example.accounting.domain.model.department;\n\nimport java.util.List;\nimport java.util.Optional;\n\npublic interface DepartmentRepository {\n    /**\n     * \u90e8\u9580\u30b3\u30fc\u30c9\u3067\u691c\u7d22\n     */\n    Optional&lt;Department&gt; findByCode(String departmentCode);\n\n    /**\n     * \u5168\u90e8\u9580\u3092\u53d6\u5f97\n     */\n    List&lt;Department&gt; findAll();\n\n    /**\n     * \u968e\u5c64\u3067\u691c\u7d22\n     */\n    List&lt;Department&gt; findByOrganizationLevel(int level);\n\n    /**\n     * \u6700\u4e0b\u5c64\u90e8\u9580\u306e\u307f\u53d6\u5f97\n     */\n    List&lt;Department&gt; findLowestLevel();\n\n    /**\n     * \u4e0a\u4f4d\u90e8\u9580\u914d\u4e0b\u306e\u90e8\u9580\u3092\u53d6\u5f97\uff08\u30d1\u30b9\u691c\u7d22\uff09\n     */\n    List&lt;Department&gt; findByPathPrefix(String pathPrefix);\n\n    /**\n     * \u90e8\u9580\u3092\u4fdd\u5b58\n     */\n    void save(Department department);\n\n    /**\n     * \u90e8\u9580\u3092\u524a\u9664\n     */\n    void deleteByCode(String departmentCode);\n}\n</code></pre> \u90e8\u9580\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3 <pre><code>-- V104__seed_department_master.sql\n-- \u90e8\u9580\u30de\u30b9\u30bf Seed \u30c7\u30fc\u30bf\n\n-- \u5168\u793e\uff08\u30ec\u30d9\u30eb0\uff09\nINSERT INTO \"\u90e8\u9580\u30de\u30b9\u30bf\" (\"\u90e8\u9580\u30b3\u30fc\u30c9\", \"\u90e8\u9580\u540d\", \"\u90e8\u9580\u7565\u540d\", \"\u7d44\u7e54\u968e\u5c64\", \"\u90e8\u9580\u30d1\u30b9\", \"\u6700\u4e0b\u5c64\u30d5\u30e9\u30b0\")\nVALUES ('10000', '\u5168\u793e', '\u5168\u793e', 0, '10000', 0);\n\n-- \u55b6\u696d\u672c\u90e8\u914d\u4e0b\nINSERT INTO \"\u90e8\u9580\u30de\u30b9\u30bf\" (\"\u90e8\u9580\u30b3\u30fc\u30c9\", \"\u90e8\u9580\u540d\", \"\u90e8\u9580\u7565\u540d\", \"\u7d44\u7e54\u968e\u5c64\", \"\u90e8\u9580\u30d1\u30b9\", \"\u6700\u4e0b\u5c64\u30d5\u30e9\u30b0\")\nVALUES\n('11000', '\u55b6\u696d\u672c\u90e8', '\u55b6\u696d', 1, '10000~11000', 0),\n('11100', '\u6771\u65e5\u672c\u55b6\u696d\u90e8', '\u6771\u65e5\u672c', 2, '10000~11000~11100', 0),\n('11110', '\u6771\u65e5\u672c\u55b6\u696d\u8ab2', '\u6771\u65e5\u672c\u55b6\u696d', 3, '10000~11000~11100~11110', 1),\n('11120', '\u6771\u65e5\u672c\u4f01\u753b\u8ab2', '\u6771\u65e5\u672c\u4f01\u753b', 3, '10000~11000~11100~11120', 1),\n('11200', '\u897f\u65e5\u672c\u55b6\u696d\u90e8', '\u897f\u65e5\u672c', 2, '10000~11000~11200', 0),\n('11210', '\u897f\u65e5\u672c\u55b6\u696d\u8ab2', '\u897f\u65e5\u672c\u55b6\u696d', 3, '10000~11000~11200~11210', 1),\n('11220', '\u897f\u65e5\u672c\u4f01\u753b\u8ab2', '\u897f\u65e5\u672c\u4f01\u753b', 3, '10000~11000~11200~11220', 1),\n('11300', '\u6d77\u5916\u55b6\u696d\u90e8', '\u6d77\u5916', 2, '10000~11000~11300', 0),\n('11310', '\u30a2\u30b8\u30a2\u55b6\u696d\u8ab2', '\u30a2\u30b8\u30a2\u55b6\u696d', 3, '10000~11000~11300~11310', 1),\n('11320', '\u6b27\u7c73\u55b6\u696d\u8ab2', '\u6b27\u7c73\u55b6\u696d', 3, '10000~11000~11300~11320', 1);\n\n-- \u88fd\u9020\u672c\u90e8\u914d\u4e0b\nINSERT INTO \"\u90e8\u9580\u30de\u30b9\u30bf\" (\"\u90e8\u9580\u30b3\u30fc\u30c9\", \"\u90e8\u9580\u540d\", \"\u90e8\u9580\u7565\u540d\", \"\u7d44\u7e54\u968e\u5c64\", \"\u90e8\u9580\u30d1\u30b9\", \"\u6700\u4e0b\u5c64\u30d5\u30e9\u30b0\")\nVALUES\n('12000', '\u88fd\u9020\u672c\u90e8', '\u88fd\u9020', 1, '10000~12000', 0),\n('12100', '\u7b2c\u4e00\u88fd\u9020\u90e8', '\u7b2c\u4e00\u88fd\u9020', 2, '10000~12000~12100', 0),\n('12110', '\u7b2c\u4e00\u88fd\u9020\u8ab2', '\u4e00\u88fd\u8ab2', 3, '10000~12000~12100~12110', 1),\n('12120', '\u7b2c\u4e00\u691c\u67fb\u8ab2', '\u4e00\u691c\u8ab2', 3, '10000~12000~12100~12120', 1),\n('12200', '\u7b2c\u4e8c\u88fd\u9020\u90e8', '\u7b2c\u4e8c\u88fd\u9020', 2, '10000~12000~12200', 0),\n('12210', '\u7b2c\u4e8c\u88fd\u9020\u8ab2', '\u4e8c\u88fd\u8ab2', 3, '10000~12000~12200~12210', 1),\n('12220', '\u7b2c\u4e8c\u691c\u67fb\u8ab2', '\u4e8c\u691c\u8ab2', 3, '10000~12000~12200~12220', 1),\n('12300', '\u54c1\u8cea\u7ba1\u7406\u90e8', '\u54c1\u7ba1', 2, '10000~12000~12300', 0),\n('12310', '\u54c1\u8cea\u7ba1\u7406\u8ab2', '\u54c1\u7ba1\u8ab2', 3, '10000~12000~12300~12310', 1);\n\n-- \u7ba1\u7406\u672c\u90e8\u914d\u4e0b\nINSERT INTO \"\u90e8\u9580\u30de\u30b9\u30bf\" (\"\u90e8\u9580\u30b3\u30fc\u30c9\", \"\u90e8\u9580\u540d\", \"\u90e8\u9580\u7565\u540d\", \"\u7d44\u7e54\u968e\u5c64\", \"\u90e8\u9580\u30d1\u30b9\", \"\u6700\u4e0b\u5c64\u30d5\u30e9\u30b0\")\nVALUES\n('13000', '\u7ba1\u7406\u672c\u90e8', '\u7ba1\u7406', 1, '10000~13000', 0),\n('13100', '\u7d4c\u7406\u90e8', '\u7d4c\u7406', 2, '10000~13000~13100', 0),\n('13110', '\u7d4c\u7406\u8ab2', '\u7d4c\u7406\u8ab2', 3, '10000~13000~13100~13110', 1),\n('13120', '\u8ca1\u52d9\u8ab2', '\u8ca1\u52d9\u8ab2', 3, '10000~13000~13100~13120', 1),\n('13200', '\u4eba\u4e8b\u90e8', '\u4eba\u4e8b', 2, '10000~13000~13200', 0),\n('13210', '\u4eba\u4e8b\u8ab2', '\u4eba\u4e8b\u8ab2', 3, '10000~13000~13200~13210', 1),\n('13220', '\u52b4\u52d9\u8ab2', '\u52b4\u52d9\u8ab2', 3, '10000~13000~13200~13220', 1),\n('13300', '\u7dcf\u52d9\u90e8', '\u7dcf\u52d9', 2, '10000~13000~13300', 0),\n('13310', '\u7dcf\u52d9\u8ab2', '\u7dcf\u52d9\u8ab2', 3, '10000~13000~13300~13310', 1),\n('13320', '\u6cd5\u52d9\u8ab2', '\u6cd5\u52d9\u8ab2', 3, '10000~13000~13300~13320', 1);\n</code></pre>"},{"location":"article/part3/chapter20/#203","title":"20.3 \u52d8\u5b9a\u79d1\u76ee\u4f53\u7cfb","text":""},{"location":"article/part3/chapter20/#2031","title":"20.3.1 \u52d8\u5b9a\u79d1\u76ee\u306e\u69cb\u6210","text":"<p>D\u793e\u306e\u52d8\u5b9a\u79d1\u76ee\u306f\u3001\u8cb8\u501f\u5bfe\u7167\u8868\uff08BS\uff09\u79d1\u76ee\u3068\u640d\u76ca\u8a08\u7b97\u66f8\uff08PL\uff09\u79d1\u76ee\u3067\u69cb\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part3/chapter20/#_1","title":"\u4e3b\u8981\u52d8\u5b9a\u79d1\u76ee\u4e00\u89a7","text":"<p>\u8cc7\u7523\uff08BS\u501f\u65b9\uff09</p> \u30b3\u30fc\u30c9 \u79d1\u76ee\u540d \u88dc\u52a9\u79d1\u76ee \u8aac\u660e 11110 \u73fe\u91d1 - \u624b\u5143\u73fe\u91d1 11130 \u666e\u901a\u9810\u91d1 \u5fc5\u9808 \u9280\u884c\u5225\u7ba1\u7406 11210 \u58f2\u639b\u91d1 \u5fc5\u9808 \u5f97\u610f\u5148\u5225\u7ba1\u7406 11330 \u539f\u6750\u6599 \u5fc5\u9808 \u54c1\u76ee\u5225\u7ba1\u7406 11430 \u4eee\u6255\u6d88\u8cbb\u7a0e - \u6d88\u8cbb\u7a0e\u51e6\u7406\u7528 <p>\u8ca0\u50b5\uff08BS\u8cb8\u65b9\uff09</p> \u30b3\u30fc\u30c9 \u79d1\u76ee\u540d \u88dc\u52a9\u79d1\u76ee \u8aac\u660e 21110 \u8cb7\u639b\u91d1 \u5fc5\u9808 \u4ed5\u5165\u5148\u5225\u7ba1\u7406 21240 \u4eee\u53d7\u6d88\u8cbb\u7a0e - \u6d88\u8cbb\u7a0e\u51e6\u7406\u7528 21250 \u9810\u308a\u91d1 - \u6e90\u6cc9\u7a0e\u30fb\u793e\u4fdd\u7b49 <p>\u7d14\u8cc7\u7523\uff08BS\u8cb8\u65b9\uff09</p> \u30b3\u30fc\u30c9 \u79d1\u76ee\u540d \u8aac\u660e 31100 \u8cc7\u672c\u91d1 \u6255\u8fbc\u8cc7\u672c 33200 \u7e70\u8d8a\u5229\u76ca\u5270\u4f59\u91d1 \u7559\u4fdd\u5229\u76ca <p>\u58f2\u4e0a\uff08PL\u8cb8\u65b9\uff09</p> \u30b3\u30fc\u30c9 \u79d1\u76ee\u540d \u6d88\u8cbb\u7a0e \u8aac\u660e 41110 \u56fd\u5185\u58f2\u4e0a\u9ad8 \u8ab2\u7a0e10% \u56fd\u5185\u5411\u3051\u58f2\u4e0a 41120 \u8f38\u51fa\u58f2\u4e0a\u9ad8 \u514d\u7a0e \u6d77\u5916\u5411\u3051\u58f2\u4e0a <p>\u8cbb\u7528\uff08PL\u501f\u65b9\uff09</p> \u30b3\u30fc\u30c9 \u79d1\u76ee\u540d \u6d88\u8cbb\u7a0e \u8aac\u660e 51100 \u6750\u6599\u8cbb \u8ab2\u7a0e10% \u88fd\u9020\u539f\u4fa1 61200 \u7d66\u6599\u624b\u5f53 \u5bfe\u8c61\u5916 \u4eba\u4ef6\u8cbb 62100 \u65c5\u8cbb\u4ea4\u901a\u8cbb \u8ab2\u7a0e10% \u51fa\u5f35\u8cbb\u7b49 63100 \u5e83\u544a\u5ba3\u4f1d\u8cbb \u8ab2\u7a0e10% \u8ca9\u4fc3\u8cbb\u7528"},{"location":"article/part3/chapter20/#2032","title":"20.3.2 \u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\u4f53\u7cfb","text":"<p>D\u793e\u306e\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\u306f5\u6841\u3067\u8a2d\u8a08\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <pre><code> 1  2  3  4  5\n \u2193  \u2193  \u2193  \u2193  \u2193\n[1][1][1][1][0]\n \u2502  \u2502  \u2502  \u2514\u2500\u2500\u2500\u2500 \u9023\u756a\uff080-9\uff09\n \u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \u4e2d\u5206\u985e\uff081-9\uff09\n \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \u5c0f\u5206\u985e\uff081-9\uff09\n \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \u5927\u5206\u985e\uff081-6\uff09\n\n\u5927\u5206\u985e:\n  1: \u8cc7\u7523\n  2: \u8ca0\u50b5\n  3: \u7d14\u8cc7\u7523\n  4: \u53ce\u76ca\n  5: \u539f\u4fa1\n  6: \u8ca9\u7ba1\u8cbb\n  7: \u55b6\u696d\u5916\u53ce\u76ca\n  8: \u55b6\u696d\u5916\u8cbb\u7528\n</code></pre>"},{"location":"article/part3/chapter20/#2033","title":"20.3.3 \u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf","text":"<p>\u52d8\u5b9a\u79d1\u76ee\u306e\u968e\u5c64\u69cb\u9020\u306f\u30c1\u30eb\u30c0\u9023\u7d50\u30d1\u30b9\u3067\u7ba1\u7406\u3057\u307e\u3059\u3002</p> \u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9 \u52d8\u5b9a\u79d1\u76ee\u30d1\u30b9 \u8aac\u660e 10000 10000 \u8cc7\u7523\uff08\u5927\u5206\u985e\uff09 11000 10000~11000 \u6d41\u52d5\u8cc7\u7523\uff08\u4e2d\u5206\u985e\uff09 11100 10000~11000~11100 \u73fe\u91d1\u9810\u91d1\uff08\u5c0f\u5206\u985e\uff09 11110 10000~11000~11100~11110 \u73fe\u91d1\uff08\u79d1\u76ee\uff09 11130 10000~11000~11100~11130 \u666e\u901a\u9810\u91d1\uff08\u79d1\u76ee\uff09 \u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf Seed SQL <pre><code>-- V100__seed_account_master_bs.sql\n-- \u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf Seed\uff08BS\u79d1\u76ee\uff09\n\n-- \u8cc7\u7523\nINSERT INTO \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\" (\n    \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u52d8\u5b9a\u79d1\u76ee\u540d\", \"\u52d8\u5b9a\u79d1\u76ee\u7565\u540d\",\n    \"BSPL\u30d5\u30e9\u30b0\", \"\u8cb8\u501f\u533a\u5206\", \"\u4e94\u8981\u7d20\u533a\u5206\", \"\u96c6\u8a08\u533a\u5206\", \"\u7ba1\u7406\u533a\u5206\"\n)\nVALUES\n-- \u6d41\u52d5\u8cc7\u7523\n('11110', '\u73fe\u91d1', '\u73fe\u91d1', 'BS', '\u501f\u65b9', '\u8cc7\u7523', '\u8a18\u5e33', '\u5171\u901a'),\n('11130', '\u666e\u901a\u9810\u91d1', '\u666e\u901a', 'BS', '\u501f\u65b9', '\u8cc7\u7523', '\u8a18\u5e33', '\u5171\u901a'),\n('11210', '\u58f2\u639b\u91d1', '\u58f2\u639b\u91d1', 'BS', '\u501f\u65b9', '\u8cc7\u7523', '\u8a18\u5e33', '\u5171\u901a'),\n('11330', '\u539f\u6750\u6599', '\u539f\u6750\u6599', 'BS', '\u501f\u65b9', '\u8cc7\u7523', '\u8a18\u5e33', '\u88fd\u9020'),\n('11430', '\u4eee\u6255\u6d88\u8cbb\u7a0e', '\u4eee\u6255\u7a0e', 'BS', '\u501f\u65b9', '\u8cc7\u7523', '\u8a18\u5e33', '\u5171\u901a'),\n-- \u6d41\u52d5\u8ca0\u50b5\n('21110', '\u8cb7\u639b\u91d1', '\u8cb7\u639b\u91d1', 'BS', '\u8cb8\u65b9', '\u8ca0\u50b5', '\u8a18\u5e33', '\u5171\u901a'),\n('21240', '\u4eee\u53d7\u6d88\u8cbb\u7a0e', '\u4eee\u53d7\u7a0e', 'BS', '\u8cb8\u65b9', '\u8ca0\u50b5', '\u8a18\u5e33', '\u5171\u901a'),\n('21250', '\u9810\u308a\u91d1', '\u9810\u308a\u91d1', 'BS', '\u8cb8\u65b9', '\u8ca0\u50b5', '\u8a18\u5e33', '\u5171\u901a'),\n-- \u7d14\u8cc7\u7523\n('31100', '\u8cc7\u672c\u91d1', '\u8cc7\u672c\u91d1', 'BS', '\u8cb8\u65b9', '\u7d14\u8cc7\u7523', '\u8a18\u5e33', '\u5171\u901a'),\n('33200', '\u7e70\u8d8a\u5229\u76ca\u5270\u4f59\u91d1', '\u7e70\u8d8a\u5229\u76ca', 'BS', '\u8cb8\u65b9', '\u7d14\u8cc7\u7523', '\u8a18\u5e33', '\u5171\u901a');\n\n-- V101__seed_account_master_pl.sql\n-- \u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf Seed\uff08PL\u79d1\u76ee\uff09\n\nINSERT INTO \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\" (\n    \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u52d8\u5b9a\u79d1\u76ee\u540d\", \"\u52d8\u5b9a\u79d1\u76ee\u7565\u540d\",\n    \"BSPL\u30d5\u30e9\u30b0\", \"\u8cb8\u501f\u533a\u5206\", \"\u4e94\u8981\u7d20\u533a\u5206\", \"\u96c6\u8a08\u533a\u5206\", \"\u7ba1\u7406\u533a\u5206\",\n    \"\u8ab2\u7a0e\u7b97\u51fa\u533a\u5206\", \"\u6d88\u8cbb\u7a0e\u30b3\u30fc\u30c9\"\n)\nVALUES\n-- \u58f2\u4e0a\n('41110', '\u56fd\u5185\u58f2\u4e0a\u9ad8', '\u56fd\u5185\u58f2\u4e0a', 'PL', '\u8cb8\u65b9', '\u53ce\u76ca', '\u8a18\u5e33', '\u5171\u901a', '\u58f2\u4e0a', '10'),\n('41120', '\u8f38\u51fa\u58f2\u4e0a\u9ad8', '\u8f38\u51fa\u58f2\u4e0a', 'PL', '\u8cb8\u65b9', '\u53ce\u76ca', '\u8a18\u5e33', '\u5171\u901a', '\u58f2\u4e0a', '00'),\n-- \u88fd\u9020\u539f\u4fa1\n('51100', '\u6750\u6599\u8cbb', '\u6750\u6599\u8cbb', 'PL', '\u501f\u65b9', '\u8cbb\u7528', '\u8a18\u5e33', '\u88fd\u9020', '\u4ed5\u5165', '10'),\n-- \u8ca9\u7ba1\u8cbb\n('61200', '\u7d66\u6599\u624b\u5f53', '\u7d66\u6599', 'PL', '\u501f\u65b9', '\u8cbb\u7528', '\u8a18\u5e33', '\u5171\u901a', '\u5bfe\u8c61\u5916', '99'),\n('62100', '\u65c5\u8cbb\u4ea4\u901a\u8cbb', '\u65c5\u8cbb\u4ea4\u901a', 'PL', '\u501f\u65b9', '\u8cbb\u7528', '\u8a18\u5e33', '\u5171\u901a', '\u4ed5\u5165', '10'),\n('63100', '\u5e83\u544a\u5ba3\u4f1d\u8cbb', '\u5e83\u544a\u5ba3\u4f1d', 'PL', '\u501f\u65b9', '\u8cbb\u7528', '\u8a18\u5e33', '\u5171\u901a', '\u4ed5\u5165', '10');\n</code></pre> \u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf Seed SQL <pre><code>-- V102__seed_account_config_master.sql\n-- \u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf Seed\n\nINSERT INTO \"\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf\" (\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u52d8\u5b9a\u79d1\u76ee\u30d1\u30b9\")\nVALUES\n-- \u8cc7\u7523\u968e\u5c64\n('10000', '10000'),\n('11000', '10000~11000'),\n('11100', '10000~11000~11100'),\n('11110', '10000~11000~11100~11110'),\n('11130', '10000~11000~11100~11130'),\n('11200', '10000~11000~11200'),\n('11210', '10000~11000~11200~11210'),\n('11300', '10000~11000~11300'),\n('11330', '10000~11000~11300~11330'),\n('11400', '10000~11000~11400'),\n('11430', '10000~11000~11400~11430'),\n-- \u8ca0\u50b5\u968e\u5c64\n('20000', '20000'),\n('21000', '20000~21000'),\n('21100', '20000~21000~21100'),\n('21110', '20000~21000~21100~21110'),\n('21200', '20000~21000~21200'),\n('21240', '20000~21000~21200~21240'),\n('21250', '20000~21000~21200~21250'),\n-- \u7d14\u8cc7\u7523\u968e\u5c64\n('30000', '30000'),\n('31000', '30000~31000'),\n('31100', '30000~31000~31100'),\n('33000', '30000~33000'),\n('33200', '30000~33000~33200'),\n-- \u53ce\u76ca\u968e\u5c64\n('40000', '40000'),\n('41000', '40000~41000'),\n('41110', '40000~41000~41110'),\n('41120', '40000~41000~41120'),\n-- \u539f\u4fa1\u968e\u5c64\n('50000', '50000'),\n('51000', '50000~51000'),\n('51100', '50000~51000~51100'),\n-- \u8ca9\u7ba1\u8cbb\u968e\u5c64\n('60000', '60000'),\n('61000', '60000~61000'),\n('61200', '60000~61000~61200'),\n('62000', '60000~62000'),\n('62100', '60000~62000~62100'),\n('63000', '60000~63000'),\n('63100', '60000~63000~63100');\n</code></pre>"},{"location":"article/part3/chapter20/#2034","title":"20.3.4 \u88dc\u52a9\u79d1\u76ee\u306e\u8a2d\u8a08","text":"<p>\u88dc\u52a9\u79d1\u76ee\u306f\u5f97\u610f\u5148\u30fb\u4ed5\u5165\u5148\u30fb\u9280\u884c\u53e3\u5ea7\u306a\u3069\u306e\u660e\u7d30\u7ba1\u7406\u306b\u4f7f\u7528\u3057\u307e\u3059\u3002</p> \u52d8\u5b9a\u79d1\u76ee \u88dc\u52a9\u79d1\u76ee\u8a2d\u5b9a \u7528\u9014 \u58f2\u639b\u91d1 \u5fc5\u9808 \u5f97\u610f\u5148\u5225\u50b5\u6a29\u7ba1\u7406 \u8cb7\u639b\u91d1 \u5fc5\u9808 \u4ed5\u5165\u5148\u5225\u50b5\u52d9\u7ba1\u7406 \u666e\u901a\u9810\u91d1 \u5fc5\u9808 \u9280\u884c\u53e3\u5ea7\u5225\u7ba1\u7406 \u539f\u6750\u6599 \u5fc5\u9808 \u54c1\u76ee\u5225\u5728\u5eab\u7ba1\u7406 \u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf Seed SQL <pre><code>-- V103__seed_tax_transaction_master.sql\n-- \u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf Seed\n\nINSERT INTO \"\u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\" (\"\u6d88\u8cbb\u7a0e\u30b3\u30fc\u30c9\", \"\u6d88\u8cbb\u7a0e\u540d\", \"\u6d88\u8cbb\u7a0e\u7387\")\nVALUES\n('00', '\u514d\u7a0e', 0.000),\n('08', '\u8efd\u6e1b\u7a0e\u73878%', 0.080),\n('10', '\u6a19\u6e96\u7a0e\u738710%', 0.100),\n('80', '\u975e\u8ab2\u7a0e', 0.000),\n('99', '\u5bfe\u8c61\u5916', 0.000);\n</code></pre>"},{"location":"article/part3/chapter20/#204-seed","title":"20.4 Seed\u30c7\u30fc\u30bf\u306e\u5b9f\u88c5","text":""},{"location":"article/part3/chapter20/#2041","title":"20.4.1 \u30de\u30b9\u30bf\u30c7\u30fc\u30bf\u306e\u69cb\u6210","text":"<p>Seed\u30c7\u30fc\u30bf\u306f\u5916\u90e8\u30ad\u30fc\u5236\u7d04\u3092\u8003\u616e\u3057\u305f\u9806\u5e8f\u3067\u6295\u5165\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part3/chapter20/#2042","title":"20.4.2 \u4ed5\u8a33\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u306e\u4f5c\u6210","text":"<p>\u5b9f\u969b\u306e\u696d\u52d9\u3092\u60f3\u5b9a\u3057\u305f\u4ed5\u8a33\u30b5\u30f3\u30d7\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p>"},{"location":"article/part3/chapter20/#41","title":"\u671f\u9996\u7e70\u8d8a\u4ed5\u8a33\uff084\u67081\u65e5\uff09","text":"\u501f\u65b9 \u91d1\u984d \u8cb8\u65b9 \u91d1\u984d \u666e\u901a\u9810\u91d1 50,000,000 \u7e70\u8d8a\u5229\u76ca\u5270\u4f59\u91d1 50,000,000"},{"location":"article/part3/chapter20/#45","title":"\u58f2\u4e0a\u8a08\u4e0a\u4ed5\u8a33\uff084\u67085\u65e5\uff09","text":"\u501f\u65b9 \u91d1\u984d \u8cb8\u65b9 \u91d1\u984d \u58f2\u639b\u91d1\uff08ABC\u5546\u4e8b\uff09 330,000 \u56fd\u5185\u58f2\u4e0a\u9ad8 300,000 \u4eee\u53d7\u6d88\u8cbb\u7a0e 30,000"},{"location":"article/part3/chapter20/#410","title":"\u7d4c\u8cbb\u8a08\u4e0a\u4ed5\u8a33\uff084\u670810\u65e5\uff09","text":"\u501f\u65b9 \u91d1\u984d \u8cb8\u65b9 \u91d1\u984d \u65c5\u8cbb\u4ea4\u901a\u8cbb 27,273 \u73fe\u91d1 30,000 \u4eee\u6255\u6d88\u8cbb\u7a0e 2,727 \u4ed5\u8a33\u30b5\u30f3\u30d7\u30eb Seed SQL <pre><code>-- V110__seed_journal_april.sql\n-- 2025\u5e744\u6708\u5ea6 \u4ed5\u8a33\u30c7\u30fc\u30bf\n\n-- 4\u67081\u65e5\uff1a\u671f\u9996\u4ed5\u8a33\uff08\u524d\u671f\u7e70\u8d8a\uff09\nINSERT INTO \"\u4ed5\u8a33\" (\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u8d77\u7968\u65e5\", \"\u5165\u529b\u65e5\", \"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\", \"\u5358\u632f\u30d5\u30e9\u30b0\", \"\u4ed5\u8a33\u4f1d\u7968\u533a\u5206\", \"\u90e8\u9580\u30b3\u30fc\u30c9\")\nVALUES ('J2025040001', '2025-04-01', '2025-04-01', 0, 0, '\u901a\u5e38', '13100');\n\nINSERT INTO \"\u4ed5\u8a33\u660e\u7d30\" (\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u756a\u53f7\", \"\u884c\u6458\u8981\")\nVALUES ('J2025040001', 1, '\u524d\u671f\u7e70\u8d8a');\n\nINSERT INTO \"\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\" (\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206\", \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u4ed5\u8a33\u91d1\u984d\")\nVALUES\n('J2025040001', 1, '\u501f\u65b9', '11130', 50000000),  -- \u666e\u901a\u9810\u91d1\n('J2025040001', 1, '\u8cb8\u65b9', '33200', 50000000);  -- \u7e70\u8d8a\u5229\u76ca\u5270\u4f59\u91d1\n\n-- 4\u67085\u65e5\uff1a\u58f2\u4e0a\u8a08\u4e0a\uff08\u56fd\u5185\u58f2\u4e0a\uff09\nINSERT INTO \"\u4ed5\u8a33\" (\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u8d77\u7968\u65e5\", \"\u5165\u529b\u65e5\", \"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\", \"\u5358\u632f\u30d5\u30e9\u30b0\", \"\u4ed5\u8a33\u4f1d\u7968\u533a\u5206\", \"\u90e8\u9580\u30b3\u30fc\u30c9\")\nVALUES ('J2025040002', '2025-04-05', '2025-04-05', 0, 0, '\u81ea\u52d5', '11110');\n\nINSERT INTO \"\u4ed5\u8a33\u660e\u7d30\" (\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u756a\u53f7\", \"\u884c\u6458\u8981\")\nVALUES ('J2025040002', 1, 'ABC\u5546\u4e8b \u30b9\u30ad\u30f3\u30b1\u30a2\u30bb\u30c3\u30c8 100\u500b');\n\nINSERT INTO \"\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\" (\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206\", \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u4ed5\u8a33\u91d1\u984d\", \"\u6d88\u8cbb\u7a0e\u533a\u5206\", \"\u6d88\u8cbb\u7a0e\u7387\")\nVALUES\n('J2025040002', 1, '\u501f\u65b9', '11210', 'ABC001', 330000, NULL, NULL),    -- \u58f2\u639b\u91d1\n('J2025040002', 1, '\u8cb8\u65b9', '41110', 'ABC001', 300000, '\u8ab2\u7a0e\u58f2\u4e0a', 10),  -- \u56fd\u5185\u58f2\u4e0a\u9ad8\n('J2025040002', 1, '\u8cb8\u65b9', '21240', NULL, 30000, NULL, NULL);          -- \u4eee\u53d7\u6d88\u8cbb\u7a0e\n\n-- 4\u670810\u65e5\uff1a\u7d4c\u8cbb\u8a08\u4e0a\uff08\u65c5\u8cbb\u4ea4\u901a\u8cbb\uff09\nINSERT INTO \"\u4ed5\u8a33\" (\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u8d77\u7968\u65e5\", \"\u5165\u529b\u65e5\", \"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\", \"\u5358\u632f\u30d5\u30e9\u30b0\", \"\u4ed5\u8a33\u4f1d\u7968\u533a\u5206\", \"\u90e8\u9580\u30b3\u30fc\u30c9\")\nVALUES ('J2025040003', '2025-04-10', '2025-04-10', 0, 0, '\u901a\u5e38', '11110');\n\nINSERT INTO \"\u4ed5\u8a33\u660e\u7d30\" (\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u756a\u53f7\", \"\u884c\u6458\u8981\")\nVALUES ('J2025040003', 1, '\u51fa\u5f35\u65c5\u8cbb \u6771\u4eac\u2192\u5927\u962a');\n\nINSERT INTO \"\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\" (\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206\", \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u4ed5\u8a33\u91d1\u984d\", \"\u6d88\u8cbb\u7a0e\u533a\u5206\", \"\u6d88\u8cbb\u7a0e\u7387\")\nVALUES\n('J2025040003', 1, '\u501f\u65b9', '62100', 27273, '\u8ab2\u7a0e\u4ed5\u5165', 10),  -- \u65c5\u8cbb\u4ea4\u901a\u8cbb\n('J2025040003', 1, '\u501f\u65b9', '11430', 2727, NULL, NULL),       -- \u4eee\u6255\u6d88\u8cbb\u7a0e\n('J2025040003', 1, '\u8cb8\u65b9', '11110', 30000, NULL, NULL);      -- \u73fe\u91d1\n\n-- 4\u670815\u65e5\uff1a\u6750\u6599\u4ed5\u5165\nINSERT INTO \"\u4ed5\u8a33\" (\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u8d77\u7968\u65e5\", \"\u5165\u529b\u65e5\", \"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\", \"\u5358\u632f\u30d5\u30e9\u30b0\", \"\u4ed5\u8a33\u4f1d\u7968\u533a\u5206\", \"\u90e8\u9580\u30b3\u30fc\u30c9\")\nVALUES ('J2025040004', '2025-04-15', '2025-04-15', 0, 0, '\u81ea\u52d5', '12110');\n\nINSERT INTO \"\u4ed5\u8a33\u660e\u7d30\" (\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u756a\u53f7\", \"\u884c\u6458\u8981\")\nVALUES ('J2025040004', 1, 'XYZ\u5316\u5b66 \u539f\u6750\u6599\u4ed5\u5165');\n\nINSERT INTO \"\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\" (\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206\", \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u4ed5\u8a33\u91d1\u984d\", \"\u6d88\u8cbb\u7a0e\u533a\u5206\", \"\u6d88\u8cbb\u7a0e\u7387\")\nVALUES\n('J2025040004', 1, '\u501f\u65b9', '11330', 'MAT001', 500000, '\u8ab2\u7a0e\u4ed5\u5165', 10),  -- \u539f\u6750\u6599\n('J2025040004', 1, '\u501f\u65b9', '11430', NULL, 50000, NULL, NULL),           -- \u4eee\u6255\u6d88\u8cbb\u7a0e\n('J2025040004', 1, '\u8cb8\u65b9', '21110', 'XYZ001', 550000, NULL, NULL);      -- \u8cb7\u639b\u91d1\n\n-- 4\u670820\u65e5\uff1a\u7d66\u4e0e\u652f\u6255\nINSERT INTO \"\u4ed5\u8a33\" (\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u8d77\u7968\u65e5\", \"\u5165\u529b\u65e5\", \"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\", \"\u5358\u632f\u30d5\u30e9\u30b0\", \"\u4ed5\u8a33\u4f1d\u7968\u533a\u5206\", \"\u90e8\u9580\u30b3\u30fc\u30c9\")\nVALUES ('J2025040005', '2025-04-20', '2025-04-20', 0, 0, '\u901a\u5e38', '13100');\n\nINSERT INTO \"\u4ed5\u8a33\u660e\u7d30\" (\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u756a\u53f7\", \"\u884c\u6458\u8981\")\nVALUES ('J2025040005', 1, '4\u6708\u5ea6\u7d66\u4e0e');\n\nINSERT INTO \"\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\" (\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206\", \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u4ed5\u8a33\u91d1\u984d\")\nVALUES\n('J2025040005', 1, '\u501f\u65b9', '61200', 10000000),  -- \u7d66\u6599\u624b\u5f53\n('J2025040005', 1, '\u8cb8\u65b9', '11130', 8500000),   -- \u666e\u901a\u9810\u91d1\uff08\u624b\u53d6\u308a\uff09\n('J2025040005', 1, '\u8cb8\u65b9', '21250', 1500000);   -- \u9810\u308a\u91d1\uff08\u6e90\u6cc9\u7a0e\u30fb\u793e\u4fdd\uff09\n\n-- 4\u670825\u65e5\uff1a\u58f2\u639b\u91d1\u5165\u91d1\nINSERT INTO \"\u4ed5\u8a33\" (\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u8d77\u7968\u65e5\", \"\u5165\u529b\u65e5\", \"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\", \"\u5358\u632f\u30d5\u30e9\u30b0\", \"\u4ed5\u8a33\u4f1d\u7968\u533a\u5206\", \"\u90e8\u9580\u30b3\u30fc\u30c9\")\nVALUES ('J2025040006', '2025-04-25', '2025-04-25', 0, 0, '\u901a\u5e38', '13100');\n\nINSERT INTO \"\u4ed5\u8a33\u660e\u7d30\" (\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u756a\u53f7\", \"\u884c\u6458\u8981\")\nVALUES ('J2025040006', 1, 'ABC\u5546\u4e8b \u5165\u91d1');\n\nINSERT INTO \"\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\" (\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206\", \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u4ed5\u8a33\u91d1\u984d\")\nVALUES\n('J2025040006', 1, '\u501f\u65b9', '11130', NULL, 330000),         -- \u666e\u901a\u9810\u91d1\n('J2025040006', 1, '\u8cb8\u65b9', '11210', 'ABC001', 330000);     -- \u58f2\u639b\u91d1\n\n-- 4\u670830\u65e5\uff1a\u8cb7\u639b\u91d1\u652f\u6255\nINSERT INTO \"\u4ed5\u8a33\" (\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u8d77\u7968\u65e5\", \"\u5165\u529b\u65e5\", \"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\", \"\u5358\u632f\u30d5\u30e9\u30b0\", \"\u4ed5\u8a33\u4f1d\u7968\u533a\u5206\", \"\u90e8\u9580\u30b3\u30fc\u30c9\")\nVALUES ('J2025040007', '2025-04-30', '2025-04-30', 0, 0, '\u901a\u5e38', '13100');\n\nINSERT INTO \"\u4ed5\u8a33\u660e\u7d30\" (\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u756a\u53f7\", \"\u884c\u6458\u8981\")\nVALUES ('J2025040007', 1, 'XYZ\u5316\u5b66 \u652f\u6255');\n\nINSERT INTO \"\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\" (\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206\", \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u4ed5\u8a33\u91d1\u984d\")\nVALUES\n('J2025040007', 1, '\u501f\u65b9', '21110', 'XYZ001', 550000),  -- \u8cb7\u639b\u91d1\n('J2025040007', 1, '\u8cb8\u65b9', '11130', NULL, 550000);      -- \u666e\u901a\u9810\u91d1\n</code></pre>"},{"location":"article/part3/chapter20/#2043","title":"20.4.3 \u30c7\u30fc\u30bf\u306e\u691c\u8a3c\u3068\u6d3b\u7528","text":""},{"location":"article/part3/chapter20/#seeddataservice","title":"SeedDataService \u306e\u5b9f\u88c5","text":"<p>Seed\u30c7\u30fc\u30bf\u306e\u6295\u5165\u306f Java \u30b5\u30fc\u30d3\u30b9\u3068\u3057\u3066\u5b9f\u88c5\u3057\u3001\u51aa\u7b49\u6027\u3092\u4fdd\u8a3c\u3057\u307e\u3059\u3002</p> SeedDataService \u306e\u5b9f\u88c5 <pre><code>// src/main/java/com/example/accounting/infrastructure/seed/SeedDataService.java\npackage com.example.accounting.infrastructure.seed;\n\nimport com.example.accounting.domain.model.account.*;\nimport com.example.accounting.domain.model.department.*;\nimport com.example.accounting.domain.model.journal.*;\nimport com.example.accounting.infrastructure.persistence.mapper.*;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.util.List;\n\n@Service\n@RequiredArgsConstructor\n@Slf4j\npublic class SeedDataService {\n\n    private final AccountMasterMapper accountMasterMapper;\n    private final TaxTransactionMapper taxTransactionMapper;\n    private final DepartmentMapper departmentMapper;\n    private final JournalMapper journalMapper;\n    private final JournalDetailMapper journalDetailMapper;\n    private final JournalDcDetailMapper journalDcDetailMapper;\n\n    /**\n     * \u5168Seed\u30c7\u30fc\u30bf\u3092\u6295\u5165\n     */\n    @Transactional\n    public void seedAll() {\n        log.info(\"Starting seed data insertion...\");\n\n        seedTaxTransactions();\n        seedAccountMasters();\n        seedDepartments();\n        seedSampleJournals();\n\n        log.info(\"Seed data insertion completed.\");\n    }\n\n    /**\n     * \u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\u306eSeed\u30c7\u30fc\u30bf\n     */\n    @Transactional\n    public void seedTaxTransactions() {\n        log.info(\"Seeding tax transactions...\");\n\n        List&lt;TaxTransaction&gt; taxes = List.of(\n            TaxTransaction.builder()\n                .taxCode(\"00\").taxName(\"\u514d\u7a0e\").taxRate(BigDecimal.ZERO).build(),\n            TaxTransaction.builder()\n                .taxCode(\"08\").taxName(\"\u8efd\u6e1b\u7a0e\u73878%\").taxRate(new BigDecimal(\"0.080\")).build(),\n            TaxTransaction.builder()\n                .taxCode(\"10\").taxName(\"\u6a19\u6e96\u7a0e\u738710%\").taxRate(new BigDecimal(\"0.100\")).build(),\n            TaxTransaction.builder()\n                .taxCode(\"80\").taxName(\"\u975e\u8ab2\u7a0e\").taxRate(BigDecimal.ZERO).build(),\n            TaxTransaction.builder()\n                .taxCode(\"99\").taxName(\"\u5bfe\u8c61\u5916\").taxRate(BigDecimal.ZERO).build()\n        );\n\n        taxes.forEach(tax -&gt; {\n            if (taxTransactionMapper.findByCode(tax.getTaxCode()) == null) {\n                taxTransactionMapper.insert(tax);\n            }\n        });\n\n        log.info(\"Tax transactions seeded: {} records\", taxes.size());\n    }\n\n    /**\n     * \u90e8\u9580\u30de\u30b9\u30bf\u306eSeed\u30c7\u30fc\u30bf\n     */\n    @Transactional\n    public void seedDepartments() {\n        log.info(\"Seeding departments...\");\n\n        List&lt;Department&gt; departments = List.of(\n            Department.builder()\n                .departmentCode(\"10000\").departmentName(\"\u5168\u793e\")\n                .organizationLevel(0).departmentPath(\"10000\").lowestLevelFlag(0).build(),\n            Department.builder()\n                .departmentCode(\"11000\").departmentName(\"\u55b6\u696d\u672c\u90e8\")\n                .organizationLevel(1).departmentPath(\"10000~11000\").lowestLevelFlag(0).build(),\n            Department.builder()\n                .departmentCode(\"11110\").departmentName(\"\u6771\u65e5\u672c\u55b6\u696d\u8ab2\")\n                .organizationLevel(3).departmentPath(\"10000~11000~11100~11110\").lowestLevelFlag(1).build(),\n            Department.builder()\n                .departmentCode(\"12000\").departmentName(\"\u88fd\u9020\u672c\u90e8\")\n                .organizationLevel(1).departmentPath(\"10000~12000\").lowestLevelFlag(0).build(),\n            Department.builder()\n                .departmentCode(\"12110\").departmentName(\"\u7b2c\u4e00\u88fd\u9020\u8ab2\")\n                .organizationLevel(3).departmentPath(\"10000~12000~12100~12110\").lowestLevelFlag(1).build(),\n            Department.builder()\n                .departmentCode(\"13000\").departmentName(\"\u7ba1\u7406\u672c\u90e8\")\n                .organizationLevel(1).departmentPath(\"10000~13000\").lowestLevelFlag(0).build(),\n            Department.builder()\n                .departmentCode(\"13100\").departmentName(\"\u7d4c\u7406\u90e8\")\n                .organizationLevel(2).departmentPath(\"10000~13000~13100\").lowestLevelFlag(0).build()\n        );\n\n        int insertedCount = 0;\n        for (Department dept : departments) {\n            if (departmentMapper.findByCode(dept.getDepartmentCode()) == null) {\n                departmentMapper.insert(dept);\n                insertedCount++;\n            }\n        }\n\n        log.info(\"Departments seeded: {} records\", insertedCount);\n    }\n\n    // \u7701\u7565: seedAccountMasters, seedSampleJournals\n}\n</code></pre> SeedDataService \u306e\u30c6\u30b9\u30c8 <pre><code>// src/test/java/com/example/accounting/infrastructure/seed/SeedDataServiceTest.java\npackage com.example.accounting.infrastructure.seed;\n\nimport com.example.accounting.domain.model.account.*;\nimport com.example.accounting.domain.model.journal.*;\nimport com.example.accounting.infrastructure.persistence.mapper.*;\nimport org.junit.jupiter.api.*;\nimport org.mybatis.spring.boot.test.autoconfigure.MybatisTest;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.jdbc.AutoConfigureTestDatabase;\nimport org.springframework.context.annotation.Import;\nimport org.springframework.test.context.DynamicPropertyRegistry;\nimport org.springframework.test.context.DynamicPropertySource;\nimport org.testcontainers.containers.PostgreSQLContainer;\nimport org.testcontainers.junit.jupiter.Container;\nimport org.testcontainers.junit.jupiter.Testcontainers;\n\nimport java.math.BigDecimal;\nimport java.util.List;\n\nimport static org.assertj.core.api.Assertions.*;\n\n@MybatisTest\n@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\n@Import(SeedDataService.class)\n@Testcontainers\n@DisplayName(\"Seed\u30c7\u30fc\u30bf\u6295\u5165\")\nclass SeedDataServiceTest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:16\")\n            .withDatabaseName(\"testdb\")\n            .withUsername(\"testuser\")\n            .withPassword(\"testpass\");\n\n    @DynamicPropertySource\n    static void configureProperties(DynamicPropertyRegistry registry) {\n        registry.add(\"spring.datasource.url\", postgres::getJdbcUrl);\n        registry.add(\"spring.datasource.username\", postgres::getUsername);\n        registry.add(\"spring.datasource.password\", postgres::getPassword);\n    }\n\n    @Autowired\n    private SeedDataService seedDataService;\n\n    @Autowired\n    private TaxTransactionMapper taxTransactionMapper;\n\n    @Autowired\n    private DepartmentMapper departmentMapper;\n\n    @Nested\n    @DisplayName(\"\u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\")\n    class TaxTransactionSeed {\n\n        @Test\n        @DisplayName(\"\u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\u306eSeed\u30c7\u30fc\u30bf\u3092\u6295\u5165\u3067\u304d\u308b\")\n        void canSeedTaxTransactions() {\n            // Act\n            seedDataService.seedTaxTransactions();\n\n            // Assert\n            TaxTransaction tax10 = taxTransactionMapper.findByCode(\"10\");\n            assertThat(tax10).isNotNull();\n            assertThat(tax10.getTaxName()).isEqualTo(\"\u6a19\u6e96\u7a0e\u738710%\");\n            assertThat(tax10.getTaxRate()).isEqualByComparingTo(new BigDecimal(\"0.100\"));\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u90e8\u9580\u30de\u30b9\u30bf\")\n    class DepartmentSeed {\n\n        @Test\n        @DisplayName(\"\u90e8\u9580\u30de\u30b9\u30bf\u306eSeed\u30c7\u30fc\u30bf\u3092\u6295\u5165\u3067\u304d\u308b\")\n        void canSeedDepartments() {\n            // Act\n            seedDataService.seedDepartments();\n\n            // Assert\n            var company = departmentMapper.findByCode(\"10000\");\n            assertThat(company).isNotNull();\n            assertThat(company.getDepartmentName()).isEqualTo(\"\u5168\u793e\");\n            assertThat(company.getOrganizationLevel()).isEqualTo(0);\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u5168\u30c7\u30fc\u30bf\u4e00\u62ec\u6295\u5165\")\n    class SeedAll {\n\n        @Test\n        @DisplayName(\"\u5168Seed\u30c7\u30fc\u30bf\u3092\u4e00\u62ec\u6295\u5165\u3067\u304d\u308b\")\n        void canSeedAll() {\n            // Act\n            seedDataService.seedAll();\n\n            // Assert\n            assertThat(taxTransactionMapper.findByCode(\"10\")).isNotNull();\n            assertThat(departmentMapper.findByCode(\"10000\")).isNotNull();\n        }\n\n        @Test\n        @DisplayName(\"\u91cd\u8907\u5b9f\u884c\u3057\u3066\u3082\u65e2\u5b58\u30c7\u30fc\u30bf\u304c\u4e0a\u66f8\u304d\u3055\u308c\u306a\u3044\uff08\u51aa\u7b49\u6027\uff09\")\n        void seedIsIdempotent() {\n            // Act\n            seedDataService.seedAll();\n            seedDataService.seedAll(); // 2\u56de\u76ee\n\n            // Assert - \u30a8\u30e9\u30fc\u306a\u304f\u5b8c\u4e86\u3057\u3001\u30c7\u30fc\u30bf\u306f1\u4ef6\u306e\u307f\n            assertThat(taxTransactionMapper.findByCode(\"10\")).isNotNull();\n        }\n    }\n}\n</code></pre>"},{"location":"article/part3/chapter20/#seed","title":"Seed\u30c7\u30fc\u30bf\u6295\u5165\u9806\u5e8f\u306e\u307e\u3068\u3081","text":"\u9806\u5e8f \u30c6\u30fc\u30d6\u30eb \u4ef6\u6570\u76ee\u5b89 \u8aac\u660e 1 \u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf 5\u4ef6 \u7a0e\u7387\u30de\u30b9\u30bf 2 \u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf 100\u4ef6 \u79d1\u76ee\u30de\u30b9\u30bf 3 \u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf 100\u4ef6 \u79d1\u76ee\u968e\u5c64 4 \u90e8\u9580\u30de\u30b9\u30bf 30\u4ef6 \u7d44\u7e54\u30de\u30b9\u30bf 5 \u4ed5\u8a33 10\u4ef6 \u30b5\u30f3\u30d7\u30eb\u4ed5\u8a33 6 \u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8 50\u4ef6 \u65e5\u6b21\u6b8b\u9ad8 7 \u6708\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8 20\u4ef6 \u6708\u6b21\u6b8b\u9ad8"},{"location":"article/part3/chapter20/#_2","title":"\u307e\u3068\u3081","text":"<p>\u672c\u7ae0\u3067\u306f\u3001D\u793e\uff08\u5316\u7ca7\u54c1\u88fd\u9020\u8ca9\u58f2\u4f1a\u793e\uff09\u3092\u984c\u6750\u3068\u3057\u3066\u3001\u5b9f\u8df5\u7684\u306a\u8ca1\u52d9\u4f1a\u8a08\u30c7\u30fc\u30bf\u8a2d\u8a08\u3092\u89e3\u8aac\u3057\u307e\u3057\u305f\u3002</p>"},{"location":"article/part3/chapter20/#_3","title":"\u8a2d\u8a08\u306e\u30dd\u30a4\u30f3\u30c8","text":"<ol> <li>\u7d44\u7e54\u69cb\u6210\u306e\u968e\u5c64\u7ba1\u7406</li> <li>\u672c\u90e8-\u90e8-\u8ab2\u306e3\u968e\u5c64\u69cb\u9020</li> <li>\u30c1\u30eb\u30c0\u9023\u7d50\u30d1\u30b9\u306b\u3088\u308b\u67d4\u8edf\u306a\u96c6\u8a08</li> <li> <p>\u90e8\u9580\u30b3\u30fc\u30c9\u4f53\u7cfb\u306e\u8a2d\u8a08</p> </li> <li> <p>\u52d8\u5b9a\u79d1\u76ee\u4f53\u7cfb\u306e\u8a2d\u8a08</p> </li> <li>BS/PL\u79d1\u76ee\u306e\u4f53\u7cfb\u7684\u306a\u5206\u985e</li> <li>5\u6841\u30b3\u30fc\u30c9\u306b\u3088\u308b\u968e\u5c64\u8868\u73fe</li> <li> <p>\u88dc\u52a9\u79d1\u76ee\u306b\u3088\u308b\u660e\u7d30\u7ba1\u7406</p> </li> <li> <p>Seed\u30c7\u30fc\u30bf\u306e\u5b9f\u88c5</p> </li> <li>\u5916\u90e8\u30ad\u30fc\u5236\u7d04\u3092\u8003\u616e\u3057\u305f\u6295\u5165\u9806\u5e8f</li> <li>\u51aa\u7b49\u6027\u3092\u4fdd\u8a3c\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u5b9f\u88c5</li> <li>\u5b9f\u52d9\u3092\u60f3\u5b9a\u3057\u305f\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3</li> </ol> <p>\u6b21\u7ae0\u3067\u306f\u3001\u8ca1\u52d9\u4f1a\u8a08\u30b5\u30d6\u30b7\u30b9\u30c6\u30e0\u306e\u7d71\u5408\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u307e\u3059\u3002</p> <p>\u2190 \u7b2c19\u7ae0\uff1a\u8d64\u9ed2\u3068\u30ed\u30b0\u306e\u8a2d\u8a08 | \u7b2c21\u7ae0\uff1a\u8ca1\u52d9\u4f1a\u8a08\u30b5\u30d6\u30b7\u30b9\u30c6\u30e0\u306e\u7d71\u5408 \u2192</p>"},{"location":"article/part3/chapter21/","title":"\u7b2c21\u7ae0\uff1aAPI \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e API \u30b5\u30fc\u30d3\u30b9\u3092 TDD \u3067\u5b9f\u88c5\u3057\u307e\u3059\u3002\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u57fa\u3065\u304d\u3001\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf API\u3001\u4ed5\u8a33 API\u3001\u6b8b\u9ad8\u7167\u4f1a API \u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002</p>"},{"location":"article/part3/chapter21/#211","title":"21.1 \u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u5fa9\u7fd2","text":""},{"location":"article/part3/chapter21/#2111-ports-and-adapters","title":"21.1.1 Ports and Adapters \u30d1\u30bf\u30fc\u30f3\u306e\u6982\u8981","text":"<p>\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u5225\u540d\uff1aPorts and Adapters \u30d1\u30bf\u30fc\u30f3\uff09\u306f\u3001\u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\u3092\u5916\u90e8\u306e\u6280\u8853\u7684\u95a2\u5fc3\u4e8b\u304b\u3089\u5206\u96e2\u3059\u308b\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002</p> <p></p>"},{"location":"article/part3/chapter21/#2112","title":"21.1.2 \u30c9\u30e1\u30a4\u30f3\u4e2d\u5fc3\u8a2d\u8a08","text":"<p>\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3067\u306f\u3001\u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\u304c\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u4e2d\u5fc3\u306b\u4f4d\u7f6e\u3057\u307e\u3059\u3002\u5916\u90e8\u306e\u6280\u8853\uff08Web \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3001\u5916\u90e8 API\uff09\u306f\u5468\u8fba\u306b\u914d\u7f6e\u3055\u308c\u3001\u30c9\u30e1\u30a4\u30f3\u306b\u4f9d\u5b58\u3057\u307e\u3059\u3002</p>"},{"location":"article/part3/chapter21/#2113","title":"21.1.3 \u4f9d\u5b58\u6027\u306e\u9006\u8ee2","text":"<p>\u4f9d\u5b58\u6027\u306e\u65b9\u5411\u306f\u5e38\u306b\u5916\u5074\u304b\u3089\u5185\u5074\uff08\u30c9\u30e1\u30a4\u30f3\uff09\u306b\u5411\u304b\u3044\u307e\u3059\u3002Output Port\uff08\u30ea\u30dd\u30b8\u30c8\u30ea\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff09\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u30c9\u30e1\u30a4\u30f3\u304c\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u306b\u4f9d\u5b58\u3057\u306a\u3044\u8a2d\u8a08\u3092\u5b9f\u73fe\u3057\u307e\u3059\u3002</p>"},{"location":"article/part3/chapter21/#2114","title":"21.1.4 \u30c6\u30b9\u30c8\u5bb9\u6613\u6027","text":"<p>\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u5229\u70b9\u3092\u307e\u3068\u3081\u307e\u3059\u3002</p> \u5229\u70b9 \u8aac\u660e \u30c6\u30b9\u30c8\u5bb9\u6613\u6027 \u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\u3092\u5358\u72ec\u3067\u30c6\u30b9\u30c8\u53ef\u80fd \u6280\u8853\u72ec\u7acb\u6027 DB\u3001\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306e\u5909\u66f4\u304c\u5bb9\u6613 \u53ef\u8aad\u6027 \u8cac\u52d9\u304c\u660e\u78ba\u306b\u5206\u96e2\u3055\u308c\u308b \u4fdd\u5b88\u6027 \u5909\u66f4\u306e\u5f71\u97ff\u7bc4\u56f2\u304c\u9650\u5b9a\u3055\u308c\u308b"},{"location":"article/part3/chapter21/#212","title":"21.2 \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u69cb\u9020","text":""},{"location":"article/part3/chapter21/#2121","title":"21.2.1 \u30d1\u30c3\u30b1\u30fc\u30b8\u69cb\u6210","text":""},{"location":"article/part3/chapter21/#2122","title":"21.2.2 \u5404\u30ec\u30a4\u30e4\u30fc\u306e\u8cac\u52d9","text":""},{"location":"article/part3/chapter21/#213-api","title":"21.3 \u30de\u30b9\u30bf API \u306e\u5b9f\u88c5","text":""},{"location":"article/part3/chapter21/#2131-apicrud","title":"21.3.1 \u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf API\uff08CRUD \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\uff09","text":"<p>\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u306e API \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u8a2d\u8a08\u3057\u307e\u3059\u3002</p> \u30e1\u30bd\u30c3\u30c9 \u30d1\u30b9 \u8aac\u660e GET /api/accounts \u52d8\u5b9a\u79d1\u76ee\u4e00\u89a7\u53d6\u5f97 GET /api/accounts/{accountCode} \u52d8\u5b9a\u79d1\u76ee\u53d6\u5f97 GET /api/accounts/{accountCode}/hierarchy \u79d1\u76ee\u968e\u5c64\u53d6\u5f97 POST /api/accounts \u52d8\u5b9a\u79d1\u76ee\u767b\u9332 PUT /api/accounts/{accountCode} \u52d8\u5b9a\u79d1\u76ee\u66f4\u65b0 DELETE /api/accounts/{accountCode} \u52d8\u5b9a\u79d1\u76ee\u524a\u9664 Output Port\uff08\u30ea\u30dd\u30b8\u30c8\u30ea\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff09 <pre><code>// src/main/java/com/example/accounting/application/port/out/AccountRepository.java\npackage com.example.accounting.application.port.out;\n\nimport com.example.accounting.domain.model.account.AccountMaster;\n\nimport java.util.List;\nimport java.util.Optional;\n\npublic interface AccountRepository {\n\n    /**\n     * \u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\u3067\u691c\u7d22\n     */\n    Optional&lt;AccountMaster&gt; findByCode(String accountCode);\n\n    /**\n     * \u5168\u4ef6\u53d6\u5f97\n     */\n    List&lt;AccountMaster&gt; findAll();\n\n    /**\n     * BSPL\u533a\u5206\u3067\u691c\u7d22\n     */\n    List&lt;AccountMaster&gt; findByBsPlType(String bsPlType);\n\n    /**\n     * \u79d1\u76ee\u30d1\u30b9\u3067\u691c\u7d22\uff08\u30c1\u30eb\u30c0\u9023\u7d50\u65b9\u5f0f\uff09\n     */\n    List&lt;AccountMaster&gt; findByPathLike(String pathPattern);\n\n    /**\n     * \u8a08\u4e0a\u79d1\u76ee\u306e\u307f\u53d6\u5f97\n     */\n    List&lt;AccountMaster&gt; findPostingAccounts();\n\n    /**\n     * \u4fdd\u5b58\uff08\u65b0\u898f\u30fb\u66f4\u65b0\uff09\n     */\n    void save(AccountMaster account);\n\n    /**\n     * \u524a\u9664\n     */\n    void delete(String accountCode);\n\n    /**\n     * \u5b58\u5728\u78ba\u8a8d\n     */\n    boolean exists(String accountCode);\n}\n</code></pre> Input Port\uff08\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff09 <pre><code>// src/main/java/com/example/accounting/application/port/in/AccountUseCase.java\npackage com.example.accounting.application.port.in;\n\nimport com.example.accounting.application.port.in.dto.*;\n\nimport java.util.List;\n\npublic interface AccountUseCase {\n\n    /**\n     * \u52d8\u5b9a\u79d1\u76ee\u3092\u53d6\u5f97\n     */\n    AccountResponse getAccount(String accountCode);\n\n    /**\n     * \u5168\u52d8\u5b9a\u79d1\u76ee\u3092\u53d6\u5f97\n     */\n    List&lt;AccountResponse&gt; getAllAccounts();\n\n    /**\n     * BS/PL\u533a\u5206\u3067\u52d8\u5b9a\u79d1\u76ee\u3092\u53d6\u5f97\n     */\n    List&lt;AccountResponse&gt; getAccountsByBsPlType(String bsPlType);\n\n    /**\n     * \u79d1\u76ee\u968e\u5c64\u3092\u53d6\u5f97\uff08\u89aa\u79d1\u76ee\u4ee5\u4e0b\u306e\u5168\u79d1\u76ee\uff09\n     */\n    List&lt;AccountResponse&gt; getAccountHierarchy(String parentAccountCode);\n\n    /**\n     * \u8a08\u4e0a\u79d1\u76ee\u306e\u307f\u53d6\u5f97\n     */\n    List&lt;AccountResponse&gt; getPostingAccounts();\n\n    /**\n     * \u52d8\u5b9a\u79d1\u76ee\u3092\u767b\u9332\n     */\n    AccountResponse createAccount(CreateAccountCommand command);\n\n    /**\n     * \u52d8\u5b9a\u79d1\u76ee\u3092\u66f4\u65b0\n     */\n    AccountResponse updateAccount(String accountCode, UpdateAccountCommand command);\n\n    /**\n     * \u52d8\u5b9a\u79d1\u76ee\u3092\u524a\u9664\n     */\n    void deleteAccount(String accountCode);\n}\n</code></pre>"},{"location":"article/part3/chapter21/#2132-tdd-red-green-refactor","title":"21.3.2 TDD \u306b\u3088\u308b\u5b9f\u88c5\uff08Red-Green-Refactor\uff09","text":""},{"location":"article/part3/chapter21/#red","title":"Red: \u5931\u6557\u3059\u308b\u30c6\u30b9\u30c8\u3092\u66f8\u304f","text":"Controller \u30c6\u30b9\u30c8 <pre><code>// src/test/java/com/example/accounting/infrastructure/adapter/in/web/AccountControllerTest.java\npackage com.example.accounting.infrastructure.adapter.in.web;\n\nimport com.example.accounting.application.port.in.AccountUseCase;\nimport com.example.accounting.application.port.in.dto.*;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport org.junit.jupiter.api.*;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;\nimport org.springframework.boot.test.mock.mockito.MockBean;\nimport org.springframework.http.MediaType;\nimport org.springframework.test.web.servlet.MockMvc;\n\nimport java.util.List;\n\nimport static org.mockito.ArgumentMatchers.*;\nimport static org.mockito.BDDMockito.*;\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;\n\n@WebMvcTest(AccountController.class)\n@DisplayName(\"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf API\")\nclass AccountControllerTest {\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @Autowired\n    private ObjectMapper objectMapper;\n\n    @MockBean\n    private AccountUseCase accountUseCase;\n\n    @Nested\n    @DisplayName(\"GET /api/accounts/{accountCode}\")\n    class GetAccount {\n\n        @Test\n        @DisplayName(\"\u52d8\u5b9a\u79d1\u76ee\u3092\u53d6\u5f97\u3067\u304d\u308b\")\n        void canGetAccount() throws Exception {\n            // Given\n            AccountResponse response = AccountResponse.builder()\n                    .accountCode(\"11110\")\n                    .accountName(\"\u73fe\u91d1\")\n                    .accountShortName(\"\u73fe\u91d1\")\n                    .bsPlType(\"BS\")\n                    .dcType(\"\u501f\u65b9\")\n                    .elementType(\"\u8cc7\u7523\")\n                    .summaryType(\"\u8a08\u4e0a\u79d1\u76ee\")\n                    .build();\n\n            given(accountUseCase.getAccount(\"11110\")).willReturn(response);\n\n            // When &amp; Then\n            mockMvc.perform(get(\"/api/accounts/{accountCode}\", \"11110\"))\n                    .andExpect(status().isOk())\n                    .andExpect(jsonPath(\"$.accountCode\").value(\"11110\"))\n                    .andExpect(jsonPath(\"$.accountName\").value(\"\u73fe\u91d1\"))\n                    .andExpect(jsonPath(\"$.bsPlType\").value(\"BS\"));\n        }\n\n        @Test\n        @DisplayName(\"\u5b58\u5728\u3057\u306a\u3044\u52d8\u5b9a\u79d1\u76ee\u306f404\u3092\u8fd4\u3059\")\n        void notFoundForNonExistent() throws Exception {\n            // Given\n            given(accountUseCase.getAccount(\"99999\")).willThrow(\n                    new AccountNotFoundException(\"99999\"));\n\n            // When &amp; Then\n            mockMvc.perform(get(\"/api/accounts/{accountCode}\", \"99999\"))\n                    .andExpect(status().isNotFound());\n        }\n    }\n\n    @Nested\n    @DisplayName(\"POST /api/accounts\")\n    class CreateAccount {\n\n        @Test\n        @DisplayName(\"\u52d8\u5b9a\u79d1\u76ee\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canCreateAccount() throws Exception {\n            // Given\n            CreateAccountCommand command = CreateAccountCommand.builder()\n                    .accountCode(\"11150\")\n                    .accountName(\"\u624b\u8a31\u73fe\u91d1\")\n                    .bsPlType(\"BS\")\n                    .dcType(\"\u501f\u65b9\")\n                    .elementType(\"\u8cc7\u7523\")\n                    .summaryType(\"\u8a08\u4e0a\u79d1\u76ee\")\n                    .build();\n\n            AccountResponse response = AccountResponse.builder()\n                    .accountCode(\"11150\")\n                    .accountName(\"\u624b\u8a31\u73fe\u91d1\")\n                    .bsPlType(\"BS\")\n                    .dcType(\"\u501f\u65b9\")\n                    .build();\n\n            given(accountUseCase.createAccount(any())).willReturn(response);\n\n            // When &amp; Then\n            mockMvc.perform(post(\"/api/accounts\")\n                            .contentType(MediaType.APPLICATION_JSON)\n                            .content(objectMapper.writeValueAsString(command)))\n                    .andExpect(status().isCreated())\n                    .andExpect(jsonPath(\"$.accountCode\").value(\"11150\"));\n        }\n\n        @Test\n        @DisplayName(\"\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\u3067400\u3092\u8fd4\u3059\")\n        void badRequestForValidationError() throws Exception {\n            // Given\n            CreateAccountCommand command = CreateAccountCommand.builder()\n                    .accountCode(\"\")  // \u5fc5\u9808\u9805\u76ee\u304c\u7a7a\n                    .build();\n\n            // When &amp; Then\n            mockMvc.perform(post(\"/api/accounts\")\n                            .contentType(MediaType.APPLICATION_JSON)\n                            .content(objectMapper.writeValueAsString(command)))\n                    .andExpect(status().isBadRequest());\n        }\n    }\n}\n</code></pre>"},{"location":"article/part3/chapter21/#green","title":"Green: \u30c6\u30b9\u30c8\u3092\u901a\u3059\u6700\u5c0f\u9650\u306e\u5b9f\u88c5","text":"Controller \u306e\u5b9f\u88c5 <pre><code>// src/main/java/com/example/accounting/infrastructure/adapter/in/web/AccountController.java\npackage com.example.accounting.infrastructure.adapter.in.web;\n\nimport com.example.accounting.application.port.in.AccountUseCase;\nimport com.example.accounting.application.port.in.dto.*;\nimport io.swagger.v3.oas.annotations.Operation;\nimport io.swagger.v3.oas.annotations.Parameter;\nimport io.swagger.v3.oas.annotations.responses.ApiResponse;\nimport io.swagger.v3.oas.annotations.tags.Tag;\nimport jakarta.validation.Valid;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\n\n@RestController\n@RequestMapping(\"/api/accounts\")\n@RequiredArgsConstructor\n@Tag(name = \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\", description = \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u306e\u7ba1\u7406API\")\npublic class AccountController {\n\n    private final AccountUseCase accountUseCase;\n\n    @GetMapping(\"/{accountCode}\")\n    @Operation(summary = \"\u52d8\u5b9a\u79d1\u76ee\u53d6\u5f97\", description = \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\u3067\u52d8\u5b9a\u79d1\u76ee\u3092\u53d6\u5f97\u3057\u307e\u3059\")\n    @ApiResponse(responseCode = \"200\", description = \"\u53d6\u5f97\u6210\u529f\")\n    @ApiResponse(responseCode = \"404\", description = \"\u52d8\u5b9a\u79d1\u76ee\u304c\u5b58\u5728\u3057\u306a\u3044\")\n    public ResponseEntity&lt;AccountResponse&gt; getAccount(\n            @Parameter(description = \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\")\n            @PathVariable String accountCode) {\n        return ResponseEntity.ok(accountUseCase.getAccount(accountCode));\n    }\n\n    @GetMapping\n    @Operation(summary = \"\u52d8\u5b9a\u79d1\u76ee\u4e00\u89a7\u53d6\u5f97\", description = \"\u52d8\u5b9a\u79d1\u76ee\u306e\u4e00\u89a7\u3092\u53d6\u5f97\u3057\u307e\u3059\")\n    public ResponseEntity&lt;List&lt;AccountResponse&gt;&gt; getAccounts(\n            @Parameter(description = \"BSPL\u533a\u5206\uff08BS/PL\uff09\")\n            @RequestParam(required = false) String bsPlType,\n            @Parameter(description = \"\u8a08\u4e0a\u79d1\u76ee\u306e\u307f\")\n            @RequestParam(required = false, defaultValue = \"false\") boolean postingOnly) {\n\n        List&lt;AccountResponse&gt; accounts;\n        if (bsPlType != null) {\n            accounts = accountUseCase.getAccountsByBsPlType(bsPlType);\n        } else if (postingOnly) {\n            accounts = accountUseCase.getPostingAccounts();\n        } else {\n            accounts = accountUseCase.getAllAccounts();\n        }\n        return ResponseEntity.ok(accounts);\n    }\n\n    @PostMapping\n    @Operation(summary = \"\u52d8\u5b9a\u79d1\u76ee\u767b\u9332\", description = \"\u65b0\u898f\u52d8\u5b9a\u79d1\u76ee\u3092\u767b\u9332\u3057\u307e\u3059\")\n    @ApiResponse(responseCode = \"201\", description = \"\u767b\u9332\u6210\u529f\")\n    @ApiResponse(responseCode = \"400\", description = \"\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\")\n    public ResponseEntity&lt;AccountResponse&gt; createAccount(\n            @Valid @RequestBody CreateAccountCommand command) {\n        AccountResponse response = accountUseCase.createAccount(command);\n        return ResponseEntity.status(HttpStatus.CREATED).body(response);\n    }\n\n    @PutMapping(\"/{accountCode}\")\n    @Operation(summary = \"\u52d8\u5b9a\u79d1\u76ee\u66f4\u65b0\", description = \"\u52d8\u5b9a\u79d1\u76ee\u3092\u66f4\u65b0\u3057\u307e\u3059\")\n    public ResponseEntity&lt;AccountResponse&gt; updateAccount(\n            @PathVariable String accountCode,\n            @Valid @RequestBody UpdateAccountCommand command) {\n        return ResponseEntity.ok(accountUseCase.updateAccount(accountCode, command));\n    }\n\n    @DeleteMapping(\"/{accountCode}\")\n    @Operation(summary = \"\u52d8\u5b9a\u79d1\u76ee\u524a\u9664\", description = \"\u52d8\u5b9a\u79d1\u76ee\u3092\u524a\u9664\u3057\u307e\u3059\")\n    @ApiResponse(responseCode = \"204\", description = \"\u524a\u9664\u6210\u529f\")\n    public ResponseEntity&lt;Void&gt; deleteAccount(@PathVariable String accountCode) {\n        accountUseCase.deleteAccount(accountCode);\n        return ResponseEntity.noContent().build();\n    }\n}\n</code></pre>"},{"location":"article/part3/chapter21/#refactor-application-service","title":"Refactor: Application Service \u306e\u5b9f\u88c5","text":"Application Service <pre><code>// src/main/java/com/example/accounting/application/service/AccountApplicationService.java\npackage com.example.accounting.application.service;\n\nimport com.example.accounting.application.port.in.AccountUseCase;\nimport com.example.accounting.application.port.in.dto.*;\nimport com.example.accounting.application.port.out.AccountRepository;\nimport com.example.accounting.application.port.out.AccountConfigRepository;\nimport com.example.accounting.domain.model.account.*;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.util.List;\nimport java.util.stream.Collectors;\n\n@Service\n@RequiredArgsConstructor\n@Transactional(readOnly = true)\npublic class AccountApplicationService implements AccountUseCase {\n\n    private final AccountRepository accountRepository;\n    private final AccountConfigRepository accountConfigRepository;\n\n    @Override\n    public AccountResponse getAccount(String accountCode) {\n        AccountMaster account = accountRepository.findByCode(accountCode)\n                .orElseThrow(() -&gt; new AccountNotFoundException(accountCode));\n        return AccountResponse.from(account);\n    }\n\n    @Override\n    public List&lt;AccountResponse&gt; getAllAccounts() {\n        return accountRepository.findAll().stream()\n                .map(AccountResponse::from)\n                .collect(Collectors.toList());\n    }\n\n    @Override\n    public List&lt;AccountResponse&gt; getAccountsByBsPlType(String bsPlType) {\n        return accountRepository.findByBsPlType(bsPlType).stream()\n                .map(AccountResponse::from)\n                .collect(Collectors.toList());\n    }\n\n    @Override\n    public List&lt;AccountResponse&gt; getAccountHierarchy(String parentAccountCode) {\n        String pathPattern = \"%\" + parentAccountCode + \"%\";\n        return accountRepository.findByPathLike(pathPattern).stream()\n                .map(AccountResponse::from)\n                .collect(Collectors.toList());\n    }\n\n    @Override\n    public List&lt;AccountResponse&gt; getPostingAccounts() {\n        return accountRepository.findPostingAccounts().stream()\n                .map(AccountResponse::from)\n                .collect(Collectors.toList());\n    }\n\n    @Override\n    @Transactional\n    public AccountResponse createAccount(CreateAccountCommand command) {\n        if (accountRepository.exists(command.getAccountCode())) {\n            throw new AccountAlreadyExistsException(command.getAccountCode());\n        }\n\n        AccountMaster account = AccountMaster.builder()\n                .accountCode(command.getAccountCode())\n                .accountName(command.getAccountName())\n                .accountShortName(command.getAccountShortName())\n                .bsPlType(BsPlType.valueOf(command.getBsPlType()))\n                .dcType(AccountDcType.fromDisplayName(command.getDcType()))\n                .elementType(ElementType.fromDisplayName(command.getElementType()))\n                .summaryType(SummaryType.fromDisplayName(command.getSummaryType()))\n                .taxCode(command.getTaxCode())\n                .build();\n\n        accountRepository.save(account);\n\n        String accountPath = generateAccountPath(command.getAccountCode(), command.getParentAccountCode());\n        AccountConfig config = AccountConfig.builder()\n                .accountCode(command.getAccountCode())\n                .accountPath(accountPath)\n                .build();\n        accountConfigRepository.save(config);\n\n        return AccountResponse.from(account);\n    }\n\n    @Override\n    @Transactional\n    public AccountResponse updateAccount(String accountCode, UpdateAccountCommand command) {\n        AccountMaster account = accountRepository.findByCode(accountCode)\n                .orElseThrow(() -&gt; new AccountNotFoundException(accountCode));\n\n        if (command.getAccountName() != null) {\n            account.setAccountName(command.getAccountName());\n        }\n        if (command.getAccountShortName() != null) {\n            account.setAccountShortName(command.getAccountShortName());\n        }\n\n        accountRepository.save(account);\n        return AccountResponse.from(account);\n    }\n\n    @Override\n    @Transactional\n    public void deleteAccount(String accountCode) {\n        if (!accountRepository.exists(accountCode)) {\n            throw new AccountNotFoundException(accountCode);\n        }\n        accountConfigRepository.delete(accountCode);\n        accountRepository.delete(accountCode);\n    }\n\n    private String generateAccountPath(String accountCode, String parentAccountCode) {\n        if (parentAccountCode == null || parentAccountCode.isEmpty()) {\n            return accountCode;\n        }\n        return accountConfigRepository.findByCode(parentAccountCode)\n                .map(parent -&gt; parent.getAccountPath() + \"~\" + accountCode)\n                .orElse(accountCode);\n    }\n}\n</code></pre>"},{"location":"article/part3/chapter21/#2133-api","title":"21.3.3 \u88dc\u52a9\u79d1\u76ee\u30de\u30b9\u30bf API","text":"<p>\u88dc\u52a9\u79d1\u76ee\u306f\u52d8\u5b9a\u79d1\u76ee\u306b\u7d10\u3065\u304f\u8a73\u7d30\u533a\u5206\u3067\u3001\u5f97\u610f\u5148\u30fb\u4ed5\u5165\u5148\u30fb\u9280\u884c\u53e3\u5ea7\u306a\u3069\u3092\u7ba1\u7406\u3057\u307e\u3059\u3002</p> \u30e1\u30bd\u30c3\u30c9 \u30d1\u30b9 \u8aac\u660e GET /api/accounts/{accountCode}/sub-accounts \u88dc\u52a9\u79d1\u76ee\u4e00\u89a7\u53d6\u5f97 POST /api/accounts/{accountCode}/sub-accounts \u88dc\u52a9\u79d1\u76ee\u767b\u9332"},{"location":"article/part3/chapter21/#214-api","title":"21.4 \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3 API \u306e\u5b9f\u88c5","text":""},{"location":"article/part3/chapter21/#2141-api","title":"21.4.1 \u4ed5\u8a33 API","text":"<p>\u4ed5\u8a33\u306e\u767b\u9332\u30fb\u7167\u4f1a\u30fb\u8a02\u6b63\u30fb\u53d6\u6d88\u3092\u884c\u3046 API \u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002</p> \u30e1\u30bd\u30c3\u30c9 \u30d1\u30b9 \u8aac\u660e GET /api/journals \u4ed5\u8a33\u4e00\u89a7\u53d6\u5f97 GET /api/journals/{journalNumber} \u4ed5\u8a33\u53d6\u5f97 POST /api/journals \u4ed5\u8a33\u767b\u9332 POST /api/journals/check-balance \u8cb8\u501f\u30d0\u30e9\u30f3\u30b9\u30c1\u30a7\u30c3\u30af POST /api/journals/{journalNumber}/cancel \u4ed5\u8a33\u53d6\u6d88\uff08\u8d64\u9ed2\u51e6\u7406\uff09 POST /api/journals/{journalNumber}/correct \u4ed5\u8a33\u8a02\u6b63\uff08\u8d64\u9ed2\u51e6\u7406\uff09 \u4ed5\u8a33\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9 <pre><code>// src/main/java/com/example/accounting/application/port/in/JournalUseCase.java\npackage com.example.accounting.application.port.in;\n\nimport com.example.accounting.application.port.in.dto.*;\n\nimport java.time.LocalDate;\nimport java.util.List;\n\npublic interface JournalUseCase {\n\n    /**\n     * \u4ed5\u8a33\u3092\u53d6\u5f97\n     */\n    JournalResponse getJournal(String journalNumber);\n\n    /**\n     * \u65e5\u4ed8\u7bc4\u56f2\u3067\u4ed5\u8a33\u3092\u691c\u7d22\n     */\n    List&lt;JournalResponse&gt; getJournalsByDateRange(LocalDate fromDate, LocalDate toDate);\n\n    /**\n     * \u90e8\u9580\u3067\u4ed5\u8a33\u3092\u691c\u7d22\n     */\n    List&lt;JournalResponse&gt; getJournalsByDepartment(String departmentCode, LocalDate fromDate, LocalDate toDate);\n\n    /**\n     * \u4ed5\u8a33\u3092\u767b\u9332\n     */\n    JournalResponse createJournal(CreateJournalCommand command);\n\n    /**\n     * \u4ed5\u8a33\u3092\u53d6\u6d88\uff08\u8d64\u9ed2\u51e6\u7406\uff09\n     */\n    JournalCancellationResult cancelJournal(String journalNumber, String reason);\n\n    /**\n     * \u4ed5\u8a33\u3092\u8a02\u6b63\uff08\u8d64\u9ed2\u51e6\u7406\uff09\n     */\n    JournalCorrectionResult correctJournal(String journalNumber, CreateJournalCommand correctedData, String reason);\n\n    /**\n     * \u8cb8\u501f\u30d0\u30e9\u30f3\u30b9\u3092\u30c1\u30a7\u30c3\u30af\n     */\n    BalanceCheckResult checkBalance(CreateJournalCommand command);\n}\n</code></pre> \u4ed5\u8a33 Controller <pre><code>// src/main/java/com/example/accounting/infrastructure/adapter/in/web/JournalController.java\npackage com.example.accounting.infrastructure.adapter.in.web;\n\nimport com.example.accounting.application.port.in.JournalUseCase;\nimport com.example.accounting.application.port.in.dto.*;\nimport io.swagger.v3.oas.annotations.Operation;\nimport io.swagger.v3.oas.annotations.Parameter;\nimport io.swagger.v3.oas.annotations.tags.Tag;\nimport jakarta.validation.Valid;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.format.annotation.DateTimeFormat;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.time.LocalDate;\nimport java.util.List;\n\n@RestController\n@RequestMapping(\"/api/journals\")\n@RequiredArgsConstructor\n@Tag(name = \"\u4ed5\u8a33\", description = \"\u4ed5\u8a33\u306e\u7ba1\u7406API\")\npublic class JournalController {\n\n    private final JournalUseCase journalUseCase;\n\n    @GetMapping(\"/{journalNumber}\")\n    @Operation(summary = \"\u4ed5\u8a33\u53d6\u5f97\", description = \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\u3067\u4ed5\u8a33\u3092\u53d6\u5f97\u3057\u307e\u3059\")\n    public ResponseEntity&lt;JournalResponse&gt; getJournal(\n            @Parameter(description = \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\")\n            @PathVariable String journalNumber) {\n        return ResponseEntity.ok(journalUseCase.getJournal(journalNumber));\n    }\n\n    @GetMapping\n    @Operation(summary = \"\u4ed5\u8a33\u4e00\u89a7\u53d6\u5f97\", description = \"\u6761\u4ef6\u3092\u6307\u5b9a\u3057\u3066\u4ed5\u8a33\u3092\u691c\u7d22\u3057\u307e\u3059\")\n    public ResponseEntity&lt;List&lt;JournalResponse&gt;&gt; getJournals(\n            @Parameter(description = \"\u958b\u59cb\u65e5\")\n            @RequestParam @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) LocalDate fromDate,\n            @Parameter(description = \"\u7d42\u4e86\u65e5\")\n            @RequestParam @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) LocalDate toDate,\n            @Parameter(description = \"\u90e8\u9580\u30b3\u30fc\u30c9\")\n            @RequestParam(required = false) String departmentCode) {\n\n        List&lt;JournalResponse&gt; journals;\n        if (departmentCode != null) {\n            journals = journalUseCase.getJournalsByDepartment(departmentCode, fromDate, toDate);\n        } else {\n            journals = journalUseCase.getJournalsByDateRange(fromDate, toDate);\n        }\n        return ResponseEntity.ok(journals);\n    }\n\n    @PostMapping\n    @Operation(summary = \"\u4ed5\u8a33\u767b\u9332\", description = \"\u65b0\u898f\u4ed5\u8a33\u3092\u767b\u9332\u3057\u307e\u3059\")\n    public ResponseEntity&lt;JournalResponse&gt; createJournal(\n            @Valid @RequestBody CreateJournalCommand command) {\n        JournalResponse response = journalUseCase.createJournal(command);\n        return ResponseEntity.status(HttpStatus.CREATED).body(response);\n    }\n\n    @PostMapping(\"/check-balance\")\n    @Operation(summary = \"\u8cb8\u501f\u30d0\u30e9\u30f3\u30b9\u30c1\u30a7\u30c3\u30af\", description = \"\u4ed5\u8a33\u306e\u8cb8\u501f\u30d0\u30e9\u30f3\u30b9\u3092\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\")\n    public ResponseEntity&lt;BalanceCheckResult&gt; checkBalance(\n            @Valid @RequestBody CreateJournalCommand command) {\n        return ResponseEntity.ok(journalUseCase.checkBalance(command));\n    }\n\n    @PostMapping(\"/{journalNumber}/cancel\")\n    @Operation(summary = \"\u4ed5\u8a33\u53d6\u6d88\", description = \"\u4ed5\u8a33\u3092\u8d64\u9ed2\u51e6\u7406\u3067\u53d6\u6d88\u3057\u307e\u3059\")\n    public ResponseEntity&lt;JournalCancellationResult&gt; cancelJournal(\n            @PathVariable String journalNumber,\n            @RequestParam String reason) {\n        return ResponseEntity.ok(journalUseCase.cancelJournal(journalNumber, reason));\n    }\n\n    @PostMapping(\"/{journalNumber}/correct\")\n    @Operation(summary = \"\u4ed5\u8a33\u8a02\u6b63\", description = \"\u4ed5\u8a33\u3092\u8d64\u9ed2\u51e6\u7406\u3067\u8a02\u6b63\u3057\u307e\u3059\")\n    public ResponseEntity&lt;JournalCorrectionResult&gt; correctJournal(\n            @PathVariable String journalNumber,\n            @RequestParam String reason,\n            @Valid @RequestBody CreateJournalCommand correctedData) {\n        return ResponseEntity.ok(journalUseCase.correctJournal(journalNumber, correctedData, reason));\n    }\n}\n</code></pre>"},{"location":"article/part3/chapter21/#2142-api","title":"21.4.2 \u6b8b\u9ad8\u7167\u4f1a API","text":"<p>\u65e5\u6b21\u6b8b\u9ad8\u30fb\u6708\u6b21\u6b8b\u9ad8\u30fb\u90e8\u9580\u5225\u6b8b\u9ad8\u3092\u7167\u4f1a\u3059\u308b API \u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002</p> \u30e1\u30bd\u30c3\u30c9 \u30d1\u30b9 \u8aac\u660e GET /api/balances/daily \u65e5\u6b21\u6b8b\u9ad8\u53d6\u5f97 GET /api/balances/monthly \u6708\u6b21\u6b8b\u9ad8\u53d6\u5f97 GET /api/balances/accounts/{accountCode} \u52d8\u5b9a\u79d1\u76ee\u5225\u6b8b\u9ad8\u53d6\u5f97 GET /api/balances/departments \u90e8\u9580\u5225\u6b8b\u9ad8\u53d6\u5f97 \u6b8b\u9ad8\u7167\u4f1a Controller <pre><code>// src/main/java/com/example/accounting/infrastructure/adapter/in/web/BalanceController.java\npackage com.example.accounting.infrastructure.adapter.in.web;\n\nimport com.example.accounting.application.port.in.BalanceUseCase;\nimport com.example.accounting.application.port.in.dto.*;\nimport io.swagger.v3.oas.annotations.Operation;\nimport io.swagger.v3.oas.annotations.Parameter;\nimport io.swagger.v3.oas.annotations.tags.Tag;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.format.annotation.DateTimeFormat;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.time.LocalDate;\nimport java.util.List;\n\n@RestController\n@RequestMapping(\"/api/balances\")\n@RequiredArgsConstructor\n@Tag(name = \"\u6b8b\u9ad8\u7167\u4f1a\", description = \"\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u306e\u7167\u4f1aAPI\")\npublic class BalanceController {\n\n    private final BalanceUseCase balanceUseCase;\n\n    @GetMapping(\"/daily\")\n    @Operation(summary = \"\u65e5\u6b21\u6b8b\u9ad8\u53d6\u5f97\", description = \"\u6307\u5b9a\u65e5\u306e\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u3092\u53d6\u5f97\u3057\u307e\u3059\")\n    public ResponseEntity&lt;List&lt;DailyBalanceResponse&gt;&gt; getDailyBalances(\n            @Parameter(description = \"\u5bfe\u8c61\u65e5\")\n            @RequestParam @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) LocalDate date,\n            @Parameter(description = \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\uff08\u7701\u7565\u6642\u306f\u5168\u79d1\u76ee\uff09\")\n            @RequestParam(required = false) String accountCode) {\n        return ResponseEntity.ok(balanceUseCase.getDailyBalances(date, accountCode));\n    }\n\n    @GetMapping(\"/monthly\")\n    @Operation(summary = \"\u6708\u6b21\u6b8b\u9ad8\u53d6\u5f97\", description = \"\u6307\u5b9a\u6708\u306e\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u3092\u53d6\u5f97\u3057\u307e\u3059\")\n    public ResponseEntity&lt;List&lt;MonthlyBalanceResponse&gt;&gt; getMonthlyBalances(\n            @Parameter(description = \"\u6c7a\u7b97\u671f\")\n            @RequestParam int fiscalYear,\n            @Parameter(description = \"\u6708\u5ea6\")\n            @RequestParam int month) {\n        return ResponseEntity.ok(balanceUseCase.getMonthlyBalances(fiscalYear, month));\n    }\n\n    @GetMapping(\"/accounts/{accountCode}\")\n    @Operation(summary = \"\u52d8\u5b9a\u79d1\u76ee\u5225\u6b8b\u9ad8\u53d6\u5f97\", description = \"\u52d8\u5b9a\u79d1\u76ee\u306e\u671f\u9593\u5225\u6b8b\u9ad8\u3092\u53d6\u5f97\u3057\u307e\u3059\")\n    public ResponseEntity&lt;AccountBalanceSummary&gt; getAccountBalanceSummary(\n            @PathVariable String accountCode,\n            @RequestParam @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) LocalDate fromDate,\n            @RequestParam @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) LocalDate toDate) {\n        return ResponseEntity.ok(balanceUseCase.getAccountBalanceSummary(accountCode, fromDate, toDate));\n    }\n\n    @GetMapping(\"/departments\")\n    @Operation(summary = \"\u90e8\u9580\u5225\u6b8b\u9ad8\u53d6\u5f97\", description = \"\u90e8\u9580\u5225\u306e\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u3092\u53d6\u5f97\u3057\u307e\u3059\")\n    public ResponseEntity&lt;List&lt;DepartmentBalanceResponse&gt;&gt; getDepartmentBalances(\n            @RequestParam int fiscalYear,\n            @RequestParam int month,\n            @RequestParam(required = false) String accountCode) {\n        return ResponseEntity.ok(balanceUseCase.getDepartmentBalances(fiscalYear, month, accountCode));\n    }\n}\n</code></pre>"},{"location":"article/part3/chapter21/#2143-api","title":"21.4.3 \u8a66\u7b97\u8868 API","text":"<p>\u65e5\u8a08\u8868\u3068\u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868\u3092\u51fa\u529b\u3059\u308b API \u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002</p> \u5e33\u7968\u51fa\u529b Controller <pre><code>// src/main/java/com/example/accounting/infrastructure/adapter/in/web/ReportController.java\npackage com.example.accounting.infrastructure.adapter.in.web;\n\nimport com.example.accounting.application.port.in.BalanceUseCase;\nimport com.example.accounting.application.port.in.dto.*;\nimport io.swagger.v3.oas.annotations.Operation;\nimport io.swagger.v3.oas.annotations.tags.Tag;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.format.annotation.DateTimeFormat;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.time.LocalDate;\n\n@RestController\n@RequestMapping(\"/api/reports\")\n@RequiredArgsConstructor\n@Tag(name = \"\u5e33\u7968\u51fa\u529b\", description = \"\u4f1a\u8a08\u5e33\u7968\u306e\u51fa\u529bAPI\")\npublic class ReportController {\n\n    private final BalanceUseCase balanceUseCase;\n\n    @GetMapping(\"/daily-report\")\n    @Operation(summary = \"\u65e5\u8a08\u8868\u53d6\u5f97\", description = \"\u6307\u5b9a\u65e5\u306e\u65e5\u8a08\u8868\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u307e\u3059\")\n    public ResponseEntity&lt;DailyReportResponse&gt; getDailyReport(\n            @RequestParam @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) LocalDate date) {\n        return ResponseEntity.ok(balanceUseCase.getDailyReport(date));\n    }\n\n    @GetMapping(\"/trial-balance\")\n    @Operation(summary = \"\u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868\u53d6\u5f97\", description = \"\u6307\u5b9a\u6708\u306e\u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868\u3092\u53d6\u5f97\u3057\u307e\u3059\")\n    public ResponseEntity&lt;TrialBalanceResponse&gt; getTrialBalance(\n            @RequestParam int fiscalYear,\n            @RequestParam int month) {\n        return ResponseEntity.ok(balanceUseCase.getTrialBalance(fiscalYear, month));\n    }\n}\n</code></pre> \u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868\u30ec\u30b9\u30dd\u30f3\u30b9 DTO <pre><code>// src/main/java/com/example/accounting/application/port/in/dto/TrialBalanceResponse.java\npackage com.example.accounting.application.port.in.dto;\n\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\nimport java.util.List;\n\n@Data\n@Builder\npublic class TrialBalanceResponse {\n    private int fiscalYear;\n    private int month;\n    private List&lt;TrialBalanceLine&gt; lines;\n    private TrialBalanceTotals totals;\n\n    @Data\n    @Builder\n    public static class TrialBalanceLine {\n        private String accountCode;\n        private String accountName;\n        private String bsPlType;\n        private String dcType;\n        private BigDecimal openingBalance;\n        private BigDecimal debitAmount;\n        private BigDecimal creditAmount;\n        private BigDecimal closingBalance;\n    }\n\n    @Data\n    @Builder\n    public static class TrialBalanceTotals {\n        private BigDecimal totalOpeningDebit;\n        private BigDecimal totalOpeningCredit;\n        private BigDecimal totalDebit;\n        private BigDecimal totalCredit;\n        private BigDecimal totalClosingDebit;\n        private BigDecimal totalClosingCredit;\n    }\n}\n</code></pre>"},{"location":"article/part3/chapter21/#215","title":"21.5 \u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0","text":""},{"location":"article/part3/chapter21/#2151","title":"21.5.1 \u30c9\u30e1\u30a4\u30f3\u4f8b\u5916\u306e\u5b9a\u7fa9","text":"\u30c9\u30e1\u30a4\u30f3\u4f8b\u5916\u30af\u30e9\u30b9 <pre><code>// src/main/java/com/example/accounting/domain/exception/AccountingException.java\npackage com.example.accounting.domain.exception;\n\nimport lombok.Getter;\n\n@Getter\npublic abstract class AccountingException extends RuntimeException {\n    private final String errorCode;\n\n    protected AccountingException(String errorCode, String message) {\n        super(message);\n        this.errorCode = errorCode;\n    }\n}\n\n// AccountNotFoundException.java\npackage com.example.accounting.domain.exception;\n\npublic class AccountNotFoundException extends AccountingException {\n    public AccountNotFoundException(String accountCode) {\n        super(\"ACC001\", \"\u52d8\u5b9a\u79d1\u76ee\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + accountCode);\n    }\n}\n\n// JournalBalanceException.java\npackage com.example.accounting.domain.exception;\n\nimport java.math.BigDecimal;\n\npublic class JournalBalanceException extends AccountingException {\n    public JournalBalanceException(BigDecimal debit, BigDecimal credit) {\n        super(\"JNL001\", String.format(\"\u8cb8\u501f\u304c\u4e00\u81f4\u3057\u307e\u305b\u3093\u3002\u501f\u65b9\u5408\u8a08: %s, \u8cb8\u65b9\u5408\u8a08: %s\", debit, credit));\n    }\n}\n</code></pre>"},{"location":"article/part3/chapter21/#2152","title":"21.5.2 \u30b0\u30ed\u30fc\u30d0\u30eb\u4f8b\u5916\u30cf\u30f3\u30c9\u30e9\u30fc","text":"GlobalExceptionHandler <pre><code>// src/main/java/com/example/accounting/infrastructure/adapter/in/web/GlobalExceptionHandler.java\npackage com.example.accounting.infrastructure.adapter.in.web;\n\nimport com.example.accounting.domain.exception.*;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.validation.FieldError;\nimport org.springframework.web.bind.MethodArgumentNotValidException;\nimport org.springframework.web.bind.annotation.ExceptionHandler;\nimport org.springframework.web.bind.annotation.RestControllerAdvice;\n\nimport java.time.LocalDateTime;\nimport java.util.HashMap;\nimport java.util.Map;\n\n@RestControllerAdvice\n@Slf4j\npublic class GlobalExceptionHandler {\n\n    @ExceptionHandler(AccountNotFoundException.class)\n    public ResponseEntity&lt;ErrorResponse&gt; handleAccountNotFoundException(AccountNotFoundException e) {\n        log.warn(\"Account not found: {}\", e.getMessage());\n        return ResponseEntity.status(HttpStatus.NOT_FOUND)\n                .body(createErrorResponse(e.getErrorCode(), e.getMessage()));\n    }\n\n    @ExceptionHandler(JournalNotFoundException.class)\n    public ResponseEntity&lt;ErrorResponse&gt; handleJournalNotFoundException(JournalNotFoundException e) {\n        log.warn(\"Journal not found: {}\", e.getMessage());\n        return ResponseEntity.status(HttpStatus.NOT_FOUND)\n                .body(createErrorResponse(e.getErrorCode(), e.getMessage()));\n    }\n\n    @ExceptionHandler(JournalBalanceException.class)\n    public ResponseEntity&lt;ErrorResponse&gt; handleJournalBalanceException(JournalBalanceException e) {\n        log.warn(\"Journal balance error: {}\", e.getMessage());\n        return ResponseEntity.status(HttpStatus.BAD_REQUEST)\n                .body(createErrorResponse(e.getErrorCode(), e.getMessage()));\n    }\n\n    @ExceptionHandler(MethodArgumentNotValidException.class)\n    public ResponseEntity&lt;ValidationErrorResponse&gt; handleValidationException(MethodArgumentNotValidException e) {\n        log.warn(\"Validation error: {}\", e.getMessage());\n\n        Map&lt;String, String&gt; errors = new HashMap&lt;&gt;();\n        e.getBindingResult().getAllErrors().forEach(error -&gt; {\n            String fieldName = ((FieldError) error).getField();\n            String errorMessage = error.getDefaultMessage();\n            errors.put(fieldName, errorMessage);\n        });\n\n        return ResponseEntity.status(HttpStatus.BAD_REQUEST)\n                .body(ValidationErrorResponse.builder()\n                        .errorCode(\"VAL001\")\n                        .message(\"\u5165\u529b\u5024\u304c\u4e0d\u6b63\u3067\u3059\")\n                        .timestamp(LocalDateTime.now())\n                        .errors(errors)\n                        .build());\n    }\n\n    @ExceptionHandler(Exception.class)\n    public ResponseEntity&lt;ErrorResponse&gt; handleGenericException(Exception e) {\n        log.error(\"Unexpected error\", e);\n        return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)\n                .body(createErrorResponse(\"SYS001\", \"\u30b7\u30b9\u30c6\u30e0\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\"));\n    }\n\n    private ErrorResponse createErrorResponse(String errorCode, String message) {\n        return ErrorResponse.builder()\n                .errorCode(errorCode)\n                .message(message)\n                .timestamp(LocalDateTime.now())\n                .build();\n    }\n\n    @Data\n    @Builder\n    public static class ErrorResponse {\n        private String errorCode;\n        private String message;\n        private LocalDateTime timestamp;\n    }\n\n    @Data\n    @Builder\n    public static class ValidationErrorResponse {\n        private String errorCode;\n        private String message;\n        private LocalDateTime timestamp;\n        private Map&lt;String, String&gt; errors;\n    }\n}\n</code></pre>"},{"location":"article/part3/chapter21/#216-api","title":"21.6 API \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8","text":""},{"location":"article/part3/chapter21/#2161-openapi-swagger","title":"21.6.1 OpenAPI / Swagger \u306e\u8a2d\u5b9a","text":"OpenAPI \u8a2d\u5b9a <pre><code>// src/main/java/com/example/accounting/infrastructure/config/OpenApiConfig.java\npackage com.example.accounting.infrastructure.config;\n\nimport io.swagger.v3.oas.models.OpenAPI;\nimport io.swagger.v3.oas.models.info.Contact;\nimport io.swagger.v3.oas.models.info.Info;\nimport io.swagger.v3.oas.models.info.License;\nimport io.swagger.v3.oas.models.servers.Server;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\nimport java.util.List;\n\n@Configuration\npublic class OpenApiConfig {\n\n    @Bean\n    public OpenAPI customOpenAPI() {\n        return new OpenAPI()\n                .info(new Info()\n                        .title(\"\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0 API\")\n                        .description(\"\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306eREST API\u4ed5\u69d8\u66f8\")\n                        .version(\"1.0.0\")\n                        .contact(new Contact()\n                                .name(\"\u958b\u767a\u30c1\u30fc\u30e0\")\n                                .email(\"dev@example.com\"))\n                        .license(new License()\n                                .name(\"MIT License\")\n                                .url(\"https://opensource.org/licenses/MIT\")))\n                .servers(List.of(\n                        new Server().url(\"http://localhost:8080\").description(\"\u958b\u767a\u74b0\u5883\"),\n                        new Server().url(\"https://api.example.com\").description(\"\u672c\u756a\u74b0\u5883\")\n                ));\n    }\n}\n</code></pre>"},{"location":"article/part3/chapter21/#2162-api","title":"21.6.2 API \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9","text":"<p>\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8d77\u52d5\u5f8c\u3001\u4ee5\u4e0b\u306e URL \u3067 API \u4ed5\u69d8\u66f8\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\uff1a</p> <ul> <li>Swagger UI: http://localhost:8080/swagger-ui.html</li> <li>OpenAPI JSON: http://localhost:8080/api-docs</li> </ul>"},{"location":"article/part3/chapter21/#217-api","title":"21.7 API \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30c6\u30b9\u30c8","text":""},{"location":"article/part3/chapter21/#2171","title":"21.7.1 \u30c6\u30b9\u30c8\u30b3\u30f3\u30c6\u30ca\u306b\u3088\u308b\u7d71\u5408\u30c6\u30b9\u30c8\u74b0\u5883","text":"<p>Testcontainers \u3092\u4f7f\u7528\u3057\u3066\u3001\u5b9f\u969b\u306e PostgreSQL \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4f7f\u7528\u3057\u305f\u7d71\u5408\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> \u7d71\u5408\u30c6\u30b9\u30c8\u306e\u8a2d\u5b9a <pre><code>// src/test/java/com/example/accounting/infrastructure/adapter/in/web/AccountControllerIntegrationTest.java\npackage com.example.accounting.infrastructure.adapter.in.web;\n\nimport com.example.accounting.application.port.in.dto.CreateAccountCommand;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport org.junit.jupiter.api.*;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.http.MediaType;\nimport org.springframework.test.context.DynamicPropertyRegistry;\nimport org.springframework.test.context.DynamicPropertySource;\nimport org.springframework.test.web.servlet.MockMvc;\nimport org.testcontainers.containers.PostgreSQLContainer;\nimport org.testcontainers.junit.jupiter.Container;\nimport org.testcontainers.junit.jupiter.Testcontainers;\n\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;\n\n@SpringBootTest\n@AutoConfigureMockMvc\n@Testcontainers\n@DisplayName(\"\u52d8\u5b9a\u79d1\u76ee API \u7d71\u5408\u30c6\u30b9\u30c8\")\nclass AccountControllerIntegrationTest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:16\")\n            .withDatabaseName(\"testdb\")\n            .withUsername(\"testuser\")\n            .withPassword(\"testpass\");\n\n    @DynamicPropertySource\n    static void configureProperties(DynamicPropertyRegistry registry) {\n        registry.add(\"spring.datasource.url\", postgres::getJdbcUrl);\n        registry.add(\"spring.datasource.username\", postgres::getUsername);\n        registry.add(\"spring.datasource.password\", postgres::getPassword);\n    }\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @Autowired\n    private ObjectMapper objectMapper;\n\n    @Nested\n    @DisplayName(\"\u52d8\u5b9a\u79d1\u76ee CRUD\")\n    class AccountCrud {\n\n        @Test\n        @DisplayName(\"\u52d8\u5b9a\u79d1\u76ee\u306e\u767b\u9332\u30fb\u53d6\u5f97\u30fb\u66f4\u65b0\u30fb\u524a\u9664\u304c\u6b63\u5e38\u306b\u52d5\u4f5c\u3059\u308b\")\n        void crudOperationsWork() throws Exception {\n            // Create\n            CreateAccountCommand createCommand = CreateAccountCommand.builder()\n                    .accountCode(\"99999\")\n                    .accountName(\"\u30c6\u30b9\u30c8\u79d1\u76ee\")\n                    .accountShortName(\"\u30c6\u30b9\u30c8\")\n                    .bsPlType(\"BS\")\n                    .dcType(\"\u501f\u65b9\")\n                    .elementType(\"\u8cc7\u7523\")\n                    .summaryType(\"\u8a08\u4e0a\u79d1\u76ee\")\n                    .build();\n\n            mockMvc.perform(post(\"/api/accounts\")\n                            .contentType(MediaType.APPLICATION_JSON)\n                            .content(objectMapper.writeValueAsString(createCommand)))\n                    .andExpect(status().isCreated())\n                    .andExpect(jsonPath(\"$.accountCode\").value(\"99999\"))\n                    .andExpect(jsonPath(\"$.accountName\").value(\"\u30c6\u30b9\u30c8\u79d1\u76ee\"));\n\n            // Read\n            mockMvc.perform(get(\"/api/accounts/{accountCode}\", \"99999\"))\n                    .andExpect(status().isOk())\n                    .andExpect(jsonPath(\"$.accountCode\").value(\"99999\"));\n\n            // Delete\n            mockMvc.perform(delete(\"/api/accounts/{accountCode}\", \"99999\"))\n                    .andExpect(status().isNoContent());\n\n            // Verify deleted\n            mockMvc.perform(get(\"/api/accounts/{accountCode}\", \"99999\"))\n                    .andExpect(status().isNotFound());\n        }\n    }\n}\n</code></pre>"},{"location":"article/part3/chapter21/#2172-api","title":"21.7.2 API \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u4e00\u89a7","text":"\u30e1\u30bd\u30c3\u30c9 \u30d1\u30b9 \u8aac\u660e GET /api/accounts \u52d8\u5b9a\u79d1\u76ee\u4e00\u89a7\u53d6\u5f97 GET /api/accounts/{accountCode} \u52d8\u5b9a\u79d1\u76ee\u53d6\u5f97 POST /api/accounts \u52d8\u5b9a\u79d1\u76ee\u767b\u9332 PUT /api/accounts/{accountCode} \u52d8\u5b9a\u79d1\u76ee\u66f4\u65b0 DELETE /api/accounts/{accountCode} \u52d8\u5b9a\u79d1\u76ee\u524a\u9664 GET /api/journals \u4ed5\u8a33\u4e00\u89a7\u53d6\u5f97 GET /api/journals/{journalNumber} \u4ed5\u8a33\u53d6\u5f97 POST /api/journals \u4ed5\u8a33\u767b\u9332 POST /api/journals/{journalNumber}/cancel \u4ed5\u8a33\u53d6\u6d88 POST /api/journals/{journalNumber}/correct \u4ed5\u8a33\u8a02\u6b63 GET /api/balances/daily \u65e5\u6b21\u6b8b\u9ad8\u53d6\u5f97 GET /api/balances/monthly \u6708\u6b21\u6b8b\u9ad8\u53d6\u5f97 GET /api/reports/daily-report \u65e5\u8a08\u8868\u53d6\u5f97 GET /api/reports/trial-balance \u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868\u53d6\u5f97"},{"location":"article/part3/chapter21/#_1","title":"\u307e\u3068\u3081","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e API \u30b5\u30fc\u30d3\u30b9\u3092\u5b9f\u88c5\u3057\u307e\u3057\u305f\u3002</p>"},{"location":"article/part3/chapter21/#_2","title":"\u8a2d\u8a08\u306e\u30dd\u30a4\u30f3\u30c8","text":"<ol> <li>\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3</li> <li>\u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\u306e\u72ec\u7acb\u6027</li> <li>Ports and Adapters \u30d1\u30bf\u30fc\u30f3\u306b\u3088\u308b\u8cac\u52d9\u5206\u96e2</li> <li> <p>\u30c6\u30b9\u30c8\u5bb9\u6613\u6027\u306e\u78ba\u4fdd</p> </li> <li> <p>\u30de\u30b9\u30bf API \u306e\u8a2d\u8a08</p> </li> <li>CRUD \u64cd\u4f5c\u306e\u6a19\u6e96\u5316</li> <li>\u968e\u5c64\u69cb\u9020\uff08\u30c1\u30eb\u30c0\u9023\u7d50\uff09\u3078\u306e\u5bfe\u5fdc</li> <li> <p>\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3068\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0</p> </li> <li> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3 API \u306e\u8a2d\u8a08</p> </li> <li>\u4ed5\u8a33\u306e\u767b\u9332\u30fb\u7167\u4f1a\u30fb\u8a02\u6b63\u30fb\u53d6\u6d88</li> <li>\u8cb8\u501f\u30d0\u30e9\u30f3\u30b9\u30c1\u30a7\u30c3\u30af</li> <li> <p>\u8d64\u9ed2\u51e6\u7406\u3068\u306e\u9023\u643a</p> </li> <li> <p>\u5e33\u7968 API \u306e\u8a2d\u8a08</p> </li> <li>\u65e5\u8a08\u8868\u30fb\u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868</li> <li>\u90e8\u9580\u5225\u30fb\u79d1\u76ee\u5225\u6b8b\u9ad8\u7167\u4f1a</li> </ol> <p>\u3053\u308c\u3067\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u7b2c3\u90e8\u306f\u5b8c\u4e86\u3067\u3059\u3002\u6b21\u306e\u7b2c4\u90e8\u3067\u306f\u3001\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u307e\u3059\u3002</p> <p>\u2190 \u7b2c20\u7ae0\uff1a\u8ca1\u52d9\u4f1a\u8a08\u30c7\u30fc\u30bf\u8a2d\u8a08 D\u793e\u4e8b\u4f8b | \u7b2c22\u7ae0\uff1a\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u5168\u4f53\u50cf \u2192</p>"},{"location":"article/part3-orm/chapter14-orm/","title":"\u7b2c14\u7ae0\uff1a\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u5168\u4f53\u50cf\uff08ORM\u7248\uff09","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u5168\u4f53\u50cf\u3092\u628a\u63e1\u3057\u3001Spring Data JPA \u3092\u4f7f\u7528\u3057\u305f ORM \u5b9f\u88c5\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u307e\u3059\u3002MyBatis \u7248\u3068\u306e\u9055\u3044\u3092\u6bd4\u8f03\u3057\u306a\u304c\u3089\u3001JPA \u306e\u7279\u5fb4\u3092\u6d3b\u304b\u3057\u305f\u8a2d\u8a08\u624b\u6cd5\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"article/part3-orm/chapter14-orm/#141","title":"14.1 \u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u30b9\u30b3\u30fc\u30d7","text":""},{"location":"article/part3-orm/chapter14-orm/#_1","title":"\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u306b\u304a\u3051\u308b\u4f4d\u7f6e\u3065\u3051","text":"<p>\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306f\u3001\u57fa\u5e79\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u306e\u4e2d\u3067\u4ed6\u306e\u30b7\u30b9\u30c6\u30e0\u304b\u3089\u4ed5\u8a33\u30c7\u30fc\u30bf\u3092\u53d7\u3051\u53d6\u308a\u3001\u4f01\u696d\u306e\u8ca1\u52d9\u72b6\u614b\u3092\u7ba1\u7406\u3059\u308b\u91cd\u8981\u306a\u30b7\u30b9\u30c6\u30e0\u3067\u3059\u3002</p> <p></p>"},{"location":"article/part3-orm/chapter14-orm/#_2","title":"\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u696d\u52d9\u9818\u57df","text":"<p>\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306f\u3001\u4ee5\u4e0b\u306e\u696d\u52d9\u9818\u57df\u3092\u30ab\u30d0\u30fc\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part3-orm/chapter14-orm/#_3","title":"\u696d\u52d9\u6a5f\u80fd\u306e\u6982\u8981","text":"\u696d\u52d9 \u8aac\u660e \u52d8\u5b9a\u79d1\u76ee\u7ba1\u7406 \u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u30fb\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf\u306e\u7ba1\u7406 \u4ed5\u8a33\u51e6\u7406 \u4ed5\u8a33\u5165\u529b\u30fb\u81ea\u52d5\u4ed5\u8a33\u30fb\u4ed5\u8a33\u7167\u4f1a \u6b8b\u9ad8\u7ba1\u7406 \u65e5\u6b21\u6b8b\u9ad8\u30fb\u6708\u6b21\u6b8b\u9ad8\u306e\u7ba1\u7406 \u5e33\u7968\u51fa\u529b \u65e5\u8a08\u8868\u30fb\u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868\u30fb\u8ca1\u52d9\u8af8\u8868\u306e\u51fa\u529b \u6c7a\u7b97\u51e6\u7406 \u6708\u6b21\u6c7a\u7b97\u30fb\u5e74\u6b21\u6c7a\u7b97"},{"location":"article/part3-orm/chapter14-orm/#_4","title":"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u56f3","text":"<p>\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u5168\u4f53\u306e\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002</p> <p></p>"},{"location":"article/part3-orm/chapter14-orm/#142-orm","title":"14.2 ORM \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u6982\u8981","text":""},{"location":"article/part3-orm/chapter14-orm/#mybatis-jpa","title":"MyBatis \u7248\u3068 JPA \u7248\u306e\u6bd4\u8f03","text":"<p>\u672c\u7ae0\u3067\u306f\u3001MyBatis \u7248\u3068\u540c\u3058\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3092 Spring Data JPA \u3067\u5b9f\u88c5\u3057\u307e\u3059\u3002ORM \u306e\u9055\u3044\u306b\u3088\u308b\u30a2\u30d7\u30ed\u30fc\u30c1\u306e\u5dee\u7570\u3092\u7406\u89e3\u3059\u308b\u3053\u3068\u304c\u76ee\u7684\u3067\u3059\u3002</p> \u89b3\u70b9 MyBatis \u7248 JPA \u7248 \u30de\u30c3\u30d4\u30f3\u30b0\u65b9\u6cd5 XML Mapper + resultMap @Entity + @Column ENUM \u5909\u63db TypeHandler AttributeConverter Repository Mapper \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9 + XML JpaRepository \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9 SQL XML \u3067\u660e\u793a\u7684\u306b\u8a18\u8ff0 \u30e1\u30bd\u30c3\u30c9\u540d\u898f\u7d04\u3067\u81ea\u52d5\u751f\u6210 \u30c6\u30b9\u30c8\u57fa\u5e95\u30af\u30e9\u30b9 @MybatisTest @DataJpaTest N+1 \u554f\u984c\u5bfe\u7b56 \u660e\u793a\u7684\u306a JOIN @EntityGraph, JPQL JOIN FETCH"},{"location":"article/part3-orm/chapter14-orm/#jpa","title":"JPA \u306e\u7279\u5fb4","text":""},{"location":"article/part3-orm/chapter14-orm/#143","title":"14.3 \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u6210","text":""},{"location":"article/part3-orm/chapter14-orm/#_5","title":"\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":"<p>\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306f\u3001\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u30dd\u30fc\u30c8&amp;\u30a2\u30c0\u30d7\u30bf\u30fc\u30d1\u30bf\u30fc\u30f3\uff09\u3092\u63a1\u7528\u3057\u307e\u3059\u3002</p> <pre><code>src/main/java/com/example/accounting/\n\u251c\u2500\u2500 application/                    # \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\n\u2502   \u2514\u2500\u2500 port/\n\u2502       \u2514\u2500\u2500 out/                   # Output Port\uff08\u30ea\u30dd\u30b8\u30c8\u30ea\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff09\n\u2502           \u2514\u2500\u2500 AccountRepository.java\n\u251c\u2500\u2500 domain/                         # \u30c9\u30e1\u30a4\u30f3\u5c64\uff08\u7d14\u7c8b\u306a\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\uff09\n\u2502   \u2514\u2500\u2500 model/                     # \u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\n\u2502       \u2514\u2500\u2500 account/\n\u2502           \u251c\u2500\u2500 Account.java       # @Entity \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u4ed8\u304d\n\u2502           \u251c\u2500\u2500 BsPlType.java\n\u2502           \u251c\u2500\u2500 DebitCreditType.java\n\u2502           \u251c\u2500\u2500 TransactionElementType.java\n\u2502           \u251c\u2500\u2500 AggregationType.java\n\u2502           \u2514\u2500\u2500 TaxCalculationType.java\n\u251c\u2500\u2500 infrastructure/                 # \u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u5c64\n\u2502   \u2514\u2500\u2500 persistence/\n\u2502       \u251c\u2500\u2500 converter/             # JPA AttributeConverter\n\u2502       \u2502   \u251c\u2500\u2500 BsPlTypeConverter.java\n\u2502       \u2502   \u251c\u2500\u2500 DebitCreditTypeConverter.java\n\u2502       \u2502   \u251c\u2500\u2500 TransactionElementTypeConverter.java\n\u2502       \u2502   \u251c\u2500\u2500 AggregationTypeConverter.java\n\u2502       \u2502   \u2514\u2500\u2500 TaxCalculationTypeConverter.java\n\u2502       \u2514\u2500\u2500 repository/            # Repository\u5b9f\u88c5\n\u2502           \u251c\u2500\u2500 AccountJpaRepository.java  # Spring Data JPA\n\u2502           \u2514\u2500\u2500 AccountRepositoryImpl.java\n\u2514\u2500\u2500 config/\n    \u2514\u2500\u2500 JpaConfig.java\n\nsrc/main/resources/\n\u251c\u2500\u2500 db/migration/\n\u2502   \u2514\u2500\u2500 V001__create_enum_types.sql\n\u2514\u2500\u2500 application.yml\n</code></pre>"},{"location":"article/part3-orm/chapter14-orm/#_6","title":"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u56f3","text":""},{"location":"article/part3-orm/chapter14-orm/#144","title":"14.4 \u74b0\u5883\u69cb\u7bc9","text":""},{"location":"article/part3-orm/chapter14-orm/#_7","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u4ee5\u4e0b\u306e\u30c4\u30fc\u30eb\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <ul> <li>Java 17\u4ee5\u4e0a\uff08\u63a8\u5968\uff1aJava 21 LTS\uff09</li> <li>Gradle 8.x\u4ee5\u4e0a\uff08\u63a8\u5968\uff1aGradle Wrapper\u4f7f\u7528\uff09</li> <li>Docker &amp; Docker Compose\uff08\u63a8\u5968\uff09</li> <li>Git</li> </ul>"},{"location":"article/part3-orm/chapter14-orm/#buildgradle","title":"build.gradle \u306e\u8a2d\u5b9a","text":"build.gradle <pre><code>plugins {\n    id 'java'\n    id 'application'\n    id 'jacoco'\n    id 'org.springframework.boot' version '3.2.0'\n    id 'io.spring.dependency-management' version '1.1.4'\n}\n\ngroup = 'com.example.accounting'\nversion = '0.0.1-SNAPSHOT'\n\njava {\n    sourceCompatibility = '21'\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    // Spring Boot\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'org.springframework.boot:spring-boot-starter-validation'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n\n    // Flyway\n    implementation 'org.flywaydb:flyway-core'\n    implementation 'org.flywaydb:flyway-database-postgresql'\n\n    // Database\n    runtimeOnly 'org.postgresql:postgresql'\n\n    // Lombok (\u30aa\u30d7\u30b7\u30e7\u30f3)\n    compileOnly 'org.projectlombok:lombok'\n    annotationProcessor 'org.projectlombok:lombok'\n\n    // Test\n    testImplementation 'org.junit.jupiter:junit-jupiter-api'\n    testImplementation 'org.junit.jupiter:junit-jupiter-params'\n    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine'\n    testImplementation 'org.assertj:assertj-core:3.24.2'\n    testImplementation 'org.testcontainers:testcontainers:1.19.3'\n    testImplementation 'org.testcontainers:postgresql:1.19.3'\n    testImplementation 'org.testcontainers:junit-jupiter:1.19.3'\n}\n\ntest {\n    useJUnitPlatform()\n}\n\njacoco {\n    toolVersion = \"0.8.11\"\n}\n\njacocoTestReport {\n    dependsOn test\n    reports {\n        xml.required = true\n        html.required = true\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter14-orm/#docker-compose","title":"Docker Compose \u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"docker-compose.yml <pre><code>services:\n  postgres:\n    image: postgres:16-alpine\n    container_name: financial-accounting-postgres-jpa\n    restart: unless-stopped\n    environment:\n      POSTGRES_USER: ${POSTGRES_USER:-postgres}\n      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD:-postgres}\n      POSTGRES_DB: ${POSTGRES_DB:-financial_accounting}\n      TZ: 'Asia/Tokyo'\n    ports:\n      - \"${POSTGRES_PORT:-5432}:5432\"\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U ${POSTGRES_USER:-postgres}\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n\nvolumes:\n  postgres_data:\n</code></pre>"},{"location":"article/part3-orm/chapter14-orm/#applicationyml","title":"application.yml \u306e\u8a2d\u5b9a","text":"application.yml <pre><code>spring:\n  application:\n    name: financial-accounting-jpa\n\n  datasource:\n    url: jdbc:postgresql://localhost:5432/financial_accounting\n    username: postgres\n    password: postgres\n    driver-class-name: org.postgresql.Driver\n\n  jpa:\n    hibernate:\n      ddl-auto: validate  # Flyway \u3067\u30b9\u30ad\u30fc\u30de\u7ba1\u7406\u3059\u308b\u305f\u3081 validate\n    show-sql: true\n    properties:\n      hibernate:\n        format_sql: true\n        dialect: org.hibernate.dialect.PostgreSQLDialect\n\n  flyway:\n    enabled: true\n    locations: classpath:db/migration\n\nlogging:\n  level:\n    org.hibernate.SQL: DEBUG\n    org.hibernate.type.descriptor.sql.BasicBinder: TRACE\n</code></pre>"},{"location":"article/part3-orm/chapter14-orm/#postgresql-enum","title":"PostgreSQL ENUM \u306e\u5b9a\u7fa9","text":"V001__create_enum_types.sql <pre><code>-- BSPL\u533a\u5206\uff08\u8cb8\u501f\u5bfe\u7167\u8868\u30fb\u640d\u76ca\u8a08\u7b97\u66f8\uff09\nCREATE TYPE BSPL\u533a\u5206 AS ENUM ('BS', 'PL');\n\n-- \u8cb8\u501f\u533a\u5206\nCREATE TYPE \u8cb8\u501f\u533a\u5206 AS ENUM ('\u501f\u65b9', '\u8cb8\u65b9');\n\n-- \u53d6\u5f15\u8981\u7d20\u533a\u5206\nCREATE TYPE \u53d6\u5f15\u8981\u7d20\u533a\u5206 AS ENUM ('\u8cc7\u7523', '\u8ca0\u50b5', '\u8cc7\u672c', '\u53ce\u76ca', '\u8cbb\u7528');\n\n-- \u96c6\u8a08\u533a\u5206\nCREATE TYPE \u96c6\u8a08\u533a\u5206 AS ENUM ('\u898b\u51fa\u79d1\u76ee', '\u96c6\u8a08\u79d1\u76ee', '\u8a08\u4e0a\u79d1\u76ee');\n\n-- \u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206\nCREATE TYPE \u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206 AS ENUM ('\u8ab2\u7a0e', '\u975e\u8ab2\u7a0e', '\u4e0d\u8ab2\u7a0e', '\u514d\u7a0e');\n</code></pre>"},{"location":"article/part3-orm/chapter14-orm/#145-jpa","title":"14.5 JPA \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u57fa\u672c","text":""},{"location":"article/part3-orm/chapter14-orm/#_8","title":"\u65e5\u672c\u8a9e\u30c6\u30fc\u30d6\u30eb\u540d\u30fb\u30ab\u30e9\u30e0\u540d\u306e\u30de\u30c3\u30d4\u30f3\u30b0","text":"<p>\u672c\u30b7\u30ea\u30fc\u30ba\u3067\u306f\u3001\u65e5\u672c\u8a9e\u30c6\u30fc\u30d6\u30eb\u540d\u30fb\u65e5\u672c\u8a9e\u30ab\u30e9\u30e0\u540d\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002JPA \u3067\u306f\u3001<code>@Table</code> \u3068 <code>@Column</code> \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u3063\u3066\u30de\u30c3\u30d4\u30f3\u30b0\u3057\u307e\u3059\u3002</p> \u9805\u76ee \u4f8b \u30c6\u30fc\u30d6\u30eb\u540d <code>\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf</code>, <code>\u4ed5\u8a33\u30c7\u30fc\u30bf</code>, <code>\u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8</code> \u30ab\u30e9\u30e0\u540d <code>\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9</code>, <code>\u52d8\u5b9a\u79d1\u76ee\u540d</code>, <code>BSPL\u533a\u5206</code> ENUM\u540d <code>BSPL\u533a\u5206</code>, <code>\u8cb8\u501f\u533a\u5206</code>, <code>\u96c6\u8a08\u533a\u5206</code> ENUM\u5024 <code>BS</code>, <code>PL</code>, <code>\u501f\u65b9</code>, <code>\u8cb8\u65b9</code>"},{"location":"article/part3-orm/chapter14-orm/#_9","title":"\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u30af\u30e9\u30b9\u306e\u4f8b","text":"Account.java\uff08\u52d8\u5b9a\u79d1\u76ee\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\uff09 <pre><code>package com.example.accounting.domain.model.account;\n\nimport jakarta.persistence.*;\nimport lombok.*;\nimport java.time.LocalDateTime;\n\n@Entity\n@Table(name = \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\")\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Account {\n\n    @Id\n    @Column(name = \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", length = 5)\n    private String accountCode;\n\n    @Column(name = \"\u52d8\u5b9a\u79d1\u76ee\u540d\", length = 40, nullable = false)\n    private String accountName;\n\n    @Column(name = \"\u52d8\u5b9a\u79d1\u76ee\u7565\u540d\", length = 10)\n    private String accountShortName;\n\n    @Column(name = \"\u52d8\u5b9a\u79d1\u76ee\u30ab\u30ca\", length = 40)\n    private String accountNameKana;\n\n    @Convert(converter = BsPlTypeConverter.class)\n    @Column(name = \"BSPL\u533a\u5206\", nullable = false, columnDefinition = \"BSPL\u533a\u5206\")\n    private BsPlType bsPlType;\n\n    @Convert(converter = DebitCreditTypeConverter.class)\n    @Column(name = \"\u8cb8\u501f\u533a\u5206\", nullable = false, columnDefinition = \"\u8cb8\u501f\u533a\u5206\")\n    private DebitCreditType debitCreditType;\n\n    @Convert(converter = TransactionElementTypeConverter.class)\n    @Column(name = \"\u53d6\u5f15\u8981\u7d20\u533a\u5206\", nullable = false, columnDefinition = \"\u53d6\u5f15\u8981\u7d20\u533a\u5206\")\n    private TransactionElementType transactionElementType;\n\n    @Convert(converter = AggregationTypeConverter.class)\n    @Column(name = \"\u96c6\u8a08\u533a\u5206\", nullable = false, columnDefinition = \"\u96c6\u8a08\u533a\u5206\")\n    private AggregationType aggregationType;\n\n    @Column(name = \"\u7ba1\u7406\u4f1a\u8a08\u533a\u5206\", length = 1)\n    private String managementAccountingType;\n\n    @Column(name = \"\u8cbb\u7528\u533a\u5206\", length = 1)\n    private String expenseType;\n\n    @Column(name = \"\u5143\u5e33\u51fa\u529b\u533a\u5206\", length = 1)\n    private String ledgerOutputType;\n\n    @Column(name = \"\u88dc\u52a9\u79d1\u76ee\u7a2e\u5225\", length = 1)\n    private String subAccountType;\n\n    @Convert(converter = TaxCalculationTypeConverter.class)\n    @Column(name = \"\u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206\", columnDefinition = \"\u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206\")\n    private TaxCalculationType taxCalculationType;\n\n    @Column(name = \"\u8ab2\u7a0e\u53d6\u5f15\u30b3\u30fc\u30c9\", length = 2)\n    private String taxTransactionCode;\n\n    @Column(name = \"\u671f\u65e5\u7ba1\u7406\u533a\u5206\", length = 1)\n    private String dueDateManagementType;\n\n    @Column(name = \"\u4f5c\u6210\u65e5\u6642\")\n    private LocalDateTime createdAt;\n\n    @Column(name = \"\u66f4\u65b0\u65e5\u6642\")\n    private LocalDateTime updatedAt;\n\n    @Column(name = \"\u66f4\u65b0\u8005\u540d\", length = 12)\n    private String updatedBy;\n\n    @PrePersist\n    protected void onCreate() {\n        createdAt = LocalDateTime.now();\n        updatedAt = LocalDateTime.now();\n    }\n\n    @PreUpdate\n    protected void onUpdate() {\n        updatedAt = LocalDateTime.now();\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter14-orm/#enum","title":"ENUM \u5b9a\u7fa9","text":"BsPlType.java\uff08BSPL\u533a\u5206\uff09 <pre><code>package com.example.accounting.domain.model.account;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum BsPlType {\n    BS(\"BS\"),  // \u8cb8\u501f\u5bfe\u7167\u8868\n    PL(\"PL\");  // \u640d\u76ca\u8a08\u7b97\u66f8\n\n    private final String displayName;\n\n    public static BsPlType fromDisplayName(String displayName) {\n        for (BsPlType type : values()) {\n            if (type.displayName.equals(displayName)) {\n                return type;\n            }\n        }\n        throw new IllegalArgumentException(\"\u4e0d\u6b63\u306aBSPL\u533a\u5206: \" + displayName);\n    }\n}\n</code></pre> DebitCreditType.java\uff08\u8cb8\u501f\u533a\u5206\uff09 <pre><code>package com.example.accounting.domain.model.account;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum DebitCreditType {\n    DEBIT(\"\u501f\u65b9\"),\n    CREDIT(\"\u8cb8\u65b9\");\n\n    private final String displayName;\n\n    public static DebitCreditType fromDisplayName(String displayName) {\n        for (DebitCreditType type : values()) {\n            if (type.displayName.equals(displayName)) {\n                return type;\n            }\n        }\n        throw new IllegalArgumentException(\"\u4e0d\u6b63\u306a\u8cb8\u501f\u533a\u5206: \" + displayName);\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter14-orm/#attributeconverter","title":"AttributeConverter","text":"<p>JPA \u3067\u306f <code>AttributeConverter</code> \u3092\u4f7f\u3063\u3066 PostgreSQL ENUM \u3068 Java Enum \u3092\u5909\u63db\u3057\u307e\u3059\u3002</p> BsPlTypeConverter.java <pre><code>package com.example.accounting.infrastructure.persistence.converter;\n\nimport com.example.accounting.domain.model.account.BsPlType;\nimport jakarta.persistence.AttributeConverter;\nimport jakarta.persistence.Converter;\n\n@Converter(autoApply = true)\npublic class BsPlTypeConverter implements AttributeConverter&lt;BsPlType, String&gt; {\n\n    @Override\n    public String convertToDatabaseColumn(BsPlType attribute) {\n        return attribute != null ? attribute.getDisplayName() : null;\n    }\n\n    @Override\n    public BsPlType convertToEntityAttribute(String dbData) {\n        return dbData != null ? BsPlType.fromDisplayName(dbData) : null;\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter14-orm/#146-spring-data-jpa-repository","title":"14.6 Spring Data JPA Repository","text":""},{"location":"article/part3-orm/chapter14-orm/#jparepository","title":"JpaRepository \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9","text":"<p>Spring Data JPA \u3067\u306f\u3001\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u5b9a\u7fa9\u3059\u308b\u3060\u3051\u3067\u57fa\u672c\u7684\u306a CRUD \u64cd\u4f5c\u304c\u81ea\u52d5\u5b9f\u88c5\u3055\u308c\u307e\u3059\u3002</p> AccountJpaRepository.java <pre><code>package com.example.accounting.infrastructure.persistence.repository;\n\nimport com.example.accounting.domain.model.account.Account;\nimport com.example.accounting.domain.model.account.AggregationType;\nimport com.example.accounting.domain.model.account.BsPlType;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\nimport java.util.List;\n\n@Repository\npublic interface AccountJpaRepository extends JpaRepository&lt;Account, String&gt; {\n\n    List&lt;Account&gt; findByBsPlType(BsPlType bsPlType);\n\n    List&lt;Account&gt; findByAggregationType(AggregationType aggregationType);\n\n    List&lt;Account&gt; findAllByOrderByAccountCodeAsc();\n}\n</code></pre>"},{"location":"article/part3-orm/chapter14-orm/#repository-output-port","title":"Repository \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff08Output Port\uff09","text":"<p>\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3067\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\u306b Output Port \u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002</p> AccountRepository.java <pre><code>package com.example.accounting.application.port.out;\n\nimport com.example.accounting.domain.model.account.Account;\nimport com.example.accounting.domain.model.account.AggregationType;\nimport com.example.accounting.domain.model.account.BsPlType;\n\nimport java.util.List;\nimport java.util.Optional;\n\n/**\n * \u52d8\u5b9a\u79d1\u76ee\u30ea\u30dd\u30b8\u30c8\u30ea\uff08Output Port\uff09\n */\npublic interface AccountRepository {\n\n    void save(Account account);\n\n    Optional&lt;Account&gt; findByCode(String accountCode);\n\n    List&lt;Account&gt; findAll();\n\n    List&lt;Account&gt; findByBsPlType(BsPlType bsPlType);\n\n    List&lt;Account&gt; findByAggregationType(AggregationType aggregationType);\n\n    void delete(String accountCode);\n\n    void deleteAll();\n}\n</code></pre>"},{"location":"article/part3-orm/chapter14-orm/#repository-infrastructure","title":"Repository \u5b9f\u88c5\uff08Infrastructure \u5c64\uff09","text":"AccountRepositoryImpl.java <pre><code>package com.example.accounting.infrastructure.persistence.repository;\n\nimport com.example.accounting.application.port.out.AccountRepository;\nimport com.example.accounting.domain.model.account.Account;\nimport com.example.accounting.domain.model.account.AggregationType;\nimport com.example.accounting.domain.model.account.BsPlType;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Repository;\n\nimport java.util.List;\nimport java.util.Optional;\n\n@Repository\n@RequiredArgsConstructor\npublic class AccountRepositoryImpl implements AccountRepository {\n\n    private final AccountJpaRepository jpaRepository;\n\n    @Override\n    public void save(Account account) {\n        jpaRepository.save(account);\n    }\n\n    @Override\n    public Optional&lt;Account&gt; findByCode(String accountCode) {\n        return jpaRepository.findById(accountCode);\n    }\n\n    @Override\n    public List&lt;Account&gt; findAll() {\n        return jpaRepository.findAllByOrderByAccountCodeAsc();\n    }\n\n    @Override\n    public List&lt;Account&gt; findByBsPlType(BsPlType bsPlType) {\n        return jpaRepository.findByBsPlType(bsPlType);\n    }\n\n    @Override\n    public List&lt;Account&gt; findByAggregationType(AggregationType aggregationType) {\n        return jpaRepository.findByAggregationType(aggregationType);\n    }\n\n    @Override\n    public void delete(String accountCode) {\n        jpaRepository.deleteById(accountCode);\n    }\n\n    @Override\n    public void deleteAll() {\n        jpaRepository.deleteAll();\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter14-orm/#147-testcontainers","title":"14.7 TestContainers \u306b\u3088\u308b\u30c6\u30b9\u30c8","text":""},{"location":"article/part3-orm/chapter14-orm/#_10","title":"\u30c6\u30b9\u30c8\u57fa\u76e4\u30af\u30e9\u30b9","text":"BaseIntegrationTest.java <pre><code>package com.example.accounting.testsetup;\n\nimport org.springframework.boot.test.autoconfigure.jdbc.AutoConfigureTestDatabase;\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\nimport org.springframework.test.context.DynamicPropertyRegistry;\nimport org.springframework.test.context.DynamicPropertySource;\nimport org.testcontainers.containers.PostgreSQLContainer;\nimport org.testcontainers.junit.jupiter.Container;\nimport org.testcontainers.junit.jupiter.Testcontainers;\n\n@Testcontainers\n@DataJpaTest\n@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\npublic abstract class BaseIntegrationTest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:16-alpine\")\n            .withDatabaseName(\"testdb\")\n            .withUsername(\"testuser\")\n            .withPassword(\"testpass\");\n\n    @DynamicPropertySource\n    static void configureProperties(DynamicPropertyRegistry registry) {\n        registry.add(\"spring.datasource.url\", postgres::getJdbcUrl);\n        registry.add(\"spring.datasource.username\", postgres::getUsername);\n        registry.add(\"spring.datasource.password\", postgres::getPassword);\n        registry.add(\"spring.flyway.enabled\", () -&gt; \"true\");\n        registry.add(\"spring.flyway.locations\", () -&gt; \"classpath:db/migration\");\n        registry.add(\"spring.jpa.hibernate.ddl-auto\", () -&gt; \"validate\");\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter14-orm/#_11","title":"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u63a5\u7d9a\u30c6\u30b9\u30c8","text":"DatabaseConnectionTest.java <pre><code>package com.example.accounting;\n\nimport com.example.accounting.testsetup.BaseIntegrationTest;\nimport org.junit.jupiter.api.DisplayName;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\n\nimport javax.sql.DataSource;\nimport java.sql.Connection;\nimport java.sql.ResultSet;\nimport java.sql.Statement;\n\nimport static org.assertj.core.api.Assertions.assertThat;\n\n@DisplayName(\"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u63a5\u7d9a\")\nclass DatabaseConnectionTest extends BaseIntegrationTest {\n\n    @Autowired\n    private DataSource dataSource;\n\n    @Test\n    @DisplayName(\"PostgreSQL\u306b\u63a5\u7d9a\u3067\u304d\u308b\")\n    void canConnectToPostgres() throws Exception {\n        try (Connection conn = dataSource.getConnection();\n             Statement stmt = conn.createStatement();\n             ResultSet rs = stmt.executeQuery(\"SELECT 1\")) {\n            assertThat(rs.next()).isTrue();\n            assertThat(rs.getInt(1)).isEqualTo(1);\n        }\n    }\n\n    @Test\n    @DisplayName(\"BSPL\u533a\u5206ENUM\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\")\n    void bsplTypeEnumExists() throws Exception {\n        try (Connection conn = dataSource.getConnection();\n             Statement stmt = conn.createStatement();\n             ResultSet rs = stmt.executeQuery(\n                 \"SELECT unnest(enum_range(NULL::BSPL\u533a\u5206))::text\")) {\n            assertThat(rs.next()).isTrue();\n            assertThat(rs.getString(1)).isEqualTo(\"BS\");\n        }\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter14-orm/#148","title":"14.8 \u547d\u540d\u898f\u5247\u306e\u307e\u3068\u3081","text":"\u8981\u7d20 \u8a00\u8a9e \u4f8b \u30c6\u30fc\u30d6\u30eb\u540d \u65e5\u672c\u8a9e <code>\"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\"</code>, <code>\"\u4ed5\u8a33\u30c7\u30fc\u30bf\"</code> \u30ab\u30e9\u30e0\u540d \u65e5\u672c\u8a9e <code>\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\"</code>, <code>\"\u52d8\u5b9a\u79d1\u76ee\u540d\"</code> ENUM \u578b \u65e5\u672c\u8a9e <code>BSPL\u533a\u5206</code>, <code>\u8cb8\u501f\u533a\u5206</code> ENUM \u5024 \u65e5\u672c\u8a9e <code>'BS'</code>, <code>'\u501f\u65b9'</code> Java \u30af\u30e9\u30b9\u540d \u82f1\u8a9e <code>Account</code>, <code>BsPlType</code> Java \u30d5\u30a3\u30fc\u30eb\u30c9\u540d \u82f1\u8a9e <code>accountCode</code>, <code>accountName</code> Java \u30e1\u30bd\u30c3\u30c9\u540d \u82f1\u8a9e <code>findByCode()</code>, <code>save()</code> JPA \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3 \u65e5\u672c\u8a9e\u30ab\u30e9\u30e0\u6307\u5b9a <code>@Column(name = \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\")</code>"},{"location":"article/part3-orm/chapter14-orm/#_12","title":"\u672c\u7ae0\u306e\u307e\u3068\u3081","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u5168\u4f53\u50cf\u3068 JPA \u306b\u3088\u308b ORM \u5b9f\u88c5\u306e\u57fa\u672c\u3092\u5b66\u3073\u307e\u3057\u305f\u3002</p>"},{"location":"article/part3-orm/chapter14-orm/#_13","title":"\u5b66\u3093\u3060\u3053\u3068","text":"\u30ab\u30c6\u30b4\u30ea \u5185\u5bb9 \u30b9\u30b3\u30fc\u30d7 \u52d8\u5b9a\u79d1\u76ee\u7ba1\u7406\u30fb\u4ed5\u8a33\u51e6\u7406\u30fb\u6b8b\u9ad8\u7ba1\u7406\u30fb\u5e33\u7968\u51fa\u529b\u30fb\u6c7a\u7b97\u51e6\u7406 \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3 \u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u30dd\u30fc\u30c8&amp;\u30a2\u30c0\u30d7\u30bf\u30fc\uff09 ORM Spring Data JPA / Hibernate \u30de\u30c3\u30d4\u30f3\u30b0 @Entity, @Table, @Column, @Convert ENUM \u5909\u63db AttributeConverter \u30c6\u30b9\u30c8 TestContainers + @DataJpaTest"},{"location":"article/part3-orm/chapter14-orm/#mybatis","title":"MyBatis \u7248\u3068\u306e\u4e3b\u306a\u9055\u3044","text":"\u9805\u76ee MyBatis \u7248 JPA \u7248 SQL \u8a18\u8ff0 XML \u3067\u660e\u793a\u7684\u306b\u8a18\u8ff0 \u81ea\u52d5\u751f\u6210\uff08\u30e1\u30bd\u30c3\u30c9\u540d\u898f\u7d04\uff09 \u30de\u30c3\u30d4\u30f3\u30b0 resultMap @Entity + @Column ENUM \u5909\u63db TypeHandler AttributeConverter \u95a2\u9023\u53d6\u5f97 \u660e\u793a\u7684\u306a JOIN @EntityGraph, FETCH JOIN"},{"location":"article/part3-orm/chapter14-orm/#_14","title":"\u6b21\u7ae0\u306e\u4e88\u544a","text":"<p>\u7b2c15\u7ae0\u3067\u306f\u3001\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u57fa\u76e4\u3068\u306a\u308b\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u306e\u8a2d\u8a08\u3092 JPA \u3067\u5b9f\u88c5\u3057\u307e\u3059\u3002@EmbeddedId \u3092\u4f7f\u3063\u305f\u8907\u5408\u4e3b\u30ad\u30fc\u3084 @ManyToOne \u306b\u3088\u308b\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3082\u89e3\u8aac\u3057\u307e\u3059\u3002</p>"},{"location":"article/part3-orm/chapter15-orm/","title":"\u7b2c15\u7ae0\uff1a\u52d8\u5b9a\u79d1\u76ee\u306e\u8a2d\u8a08\uff08ORM\u7248\uff09","text":"<p>\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u6839\u5e79\u3068\u306a\u308b\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u3092 Spring Data JPA \u3067\u8a2d\u8a08\u3057\u307e\u3059\u3002\u672c\u7ae0\u3067\u306f\u3001TDD\uff08\u30c6\u30b9\u30c8\u99c6\u52d5\u958b\u767a\uff09\u3092\u7528\u3044\u3066\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u3001\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf\u3001\u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\u3092 JPA \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3068\u3057\u3066\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\u3002</p>"},{"location":"article/part3-orm/chapter15-orm/#151","title":"15.1 \u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u306e\u8a2d\u8a08","text":""},{"location":"article/part3-orm/chapter15-orm/#_1","title":"\u52d8\u5b9a\u79d1\u76ee\u306e\u533a\u5206\u4f53\u7cfb","text":"<p>\u52d8\u5b9a\u79d1\u76ee\u306f\u8907\u6570\u306e\u533a\u5206\u3067\u5206\u985e\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u533a\u5206\u3092\u6b63\u3057\u304f\u7406\u89e3\u3059\u308b\u3053\u3068\u304c\u3001\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u8a2d\u8a08\u306e\u57fa\u790e\u3068\u306a\u308a\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part3-orm/chapter15-orm/#_2","title":"\u533a\u5206\u306e\u8aac\u660e","text":"\u533a\u5206 \u8aac\u660e \u5024\u306e\u4f8b BSPL\u533a\u5206 \u8cb8\u501f\u5bfe\u7167\u8868(BS)\u304b\u640d\u76ca\u8a08\u7b97\u66f8(PL)\u304b <code>BS</code>, <code>PL</code> \u8cb8\u501f\u533a\u5206 \u501f\u65b9\u79d1\u76ee\u304b\u8cb8\u65b9\u79d1\u76ee\u304b <code>\u501f\u65b9</code>, <code>\u8cb8\u65b9</code> \u53d6\u5f15\u8981\u7d20\u533a\u5206 5\u3064\u306e\u53d6\u5f15\u8981\u7d20\u306e\u3069\u308c\u306b\u8a72\u5f53\u3059\u308b\u304b <code>\u8cc7\u7523</code>, <code>\u8ca0\u50b5</code>, <code>\u8cc7\u672c</code>, <code>\u53ce\u76ca</code>, <code>\u8cbb\u7528</code> \u96c6\u8a08\u533a\u5206 \u79d1\u76ee\u306e\u6027\u8cea\uff08\u898b\u51fa\u3057/\u96c6\u8a08/\u8a08\u4e0a\uff09 <code>\u898b\u51fa\u79d1\u76ee</code>, <code>\u96c6\u8a08\u79d1\u76ee</code>, <code>\u8a08\u4e0a\u79d1\u76ee</code>"},{"location":"article/part3-orm/chapter15-orm/#_3","title":"\u53d6\u5f15\u8981\u7d20\u3068\u8cb8\u501f\u533a\u5206\u306e\u95a2\u4fc2","text":"<p>\u8907\u5f0f\u7c3f\u8a18\u3067\u306f\u3001\u53d6\u5f15\u8981\u7d20\u306b\u3088\u3063\u3066\u501f\u65b9\u30fb\u8cb8\u65b9\u304c\u6c7a\u307e\u308a\u307e\u3059\u3002</p> \u53d6\u5f15\u8981\u7d20 BSPL\u533a\u5206 \u5897\u52a0\u6642\u306e\u8cb8\u501f \u6e1b\u5c11\u6642\u306e\u8cb8\u501f \u8cc7\u7523 BS \u501f\u65b9 \u8cb8\u65b9 \u8ca0\u50b5 BS \u8cb8\u65b9 \u501f\u65b9 \u8cc7\u672c BS \u8cb8\u65b9 \u501f\u65b9 \u53ce\u76ca PL \u8cb8\u65b9 \u501f\u65b9 \u8cbb\u7528 PL \u501f\u65b9 \u8cb8\u65b9"},{"location":"article/part3-orm/chapter15-orm/#er","title":"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u306eER\u56f3","text":""},{"location":"article/part3-orm/chapter15-orm/#enum","title":"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff1aENUM\u578b\u3068\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210","text":"V001__create_enum_types.sql <pre><code>-- BSPL\u533a\u5206\uff08\u8cb8\u501f\u5bfe\u7167\u8868\u30fb\u640d\u76ca\u8a08\u7b97\u66f8\uff09\nCREATE TYPE BSPL\u533a\u5206 AS ENUM ('BS', 'PL');\n\n-- \u8cb8\u501f\u533a\u5206\nCREATE TYPE \u8cb8\u501f\u533a\u5206 AS ENUM ('\u501f\u65b9', '\u8cb8\u65b9');\n\n-- \u53d6\u5f15\u8981\u7d20\u533a\u5206\nCREATE TYPE \u53d6\u5f15\u8981\u7d20\u533a\u5206 AS ENUM ('\u8cc7\u7523', '\u8ca0\u50b5', '\u8cc7\u672c', '\u53ce\u76ca', '\u8cbb\u7528');\n\n-- \u96c6\u8a08\u533a\u5206\nCREATE TYPE \u96c6\u8a08\u533a\u5206 AS ENUM ('\u898b\u51fa\u79d1\u76ee', '\u96c6\u8a08\u79d1\u76ee', '\u8a08\u4e0a\u79d1\u76ee');\n\n-- \u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206\nCREATE TYPE \u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206 AS ENUM ('\u8ab2\u7a0e', '\u975e\u8ab2\u7a0e', '\u4e0d\u8ab2\u7a0e', '\u514d\u7a0e');\n</code></pre> V002__create_account_master.sql <pre><code>-- \u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\nCREATE TABLE \"\u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\" (\n    \"\u8ab2\u7a0e\u53d6\u5f15\u30b3\u30fc\u30c9\" VARCHAR(2) PRIMARY KEY,\n    \"\u8ab2\u7a0e\u53d6\u5f15\u540d\" VARCHAR(20) NOT NULL,\n    \"\u7a0e\u7387\" DECIMAL(5,3) NOT NULL DEFAULT 0.10,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u66f4\u65b0\u8005\u540d\" VARCHAR(12)\n);\n\n-- \u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\nCREATE TABLE \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\" (\n    \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(5) PRIMARY KEY,\n    \"\u52d8\u5b9a\u79d1\u76ee\u540d\" VARCHAR(40) NOT NULL,\n    \"\u52d8\u5b9a\u79d1\u76ee\u7565\u540d\" VARCHAR(10),\n    \"\u52d8\u5b9a\u79d1\u76ee\u30ab\u30ca\" VARCHAR(40),\n    \"BSPL\u533a\u5206\" BSPL\u533a\u5206 NOT NULL,\n    \"\u8cb8\u501f\u533a\u5206\" \u8cb8\u501f\u533a\u5206 NOT NULL,\n    \"\u53d6\u5f15\u8981\u7d20\u533a\u5206\" \u53d6\u5f15\u8981\u7d20\u533a\u5206 NOT NULL,\n    \"\u96c6\u8a08\u533a\u5206\" \u96c6\u8a08\u533a\u5206 NOT NULL,\n    \"\u7ba1\u7406\u4f1a\u8a08\u533a\u5206\" VARCHAR(1),\n    \"\u8cbb\u7528\u533a\u5206\" VARCHAR(1),\n    \"\u5143\u5e33\u51fa\u529b\u533a\u5206\" VARCHAR(1),\n    \"\u88dc\u52a9\u79d1\u76ee\u7a2e\u5225\" VARCHAR(1),\n    \"\u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206\" \u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206,\n    \"\u8ab2\u7a0e\u53d6\u5f15\u30b3\u30fc\u30c9\" VARCHAR(2) REFERENCES \"\u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\"(\"\u8ab2\u7a0e\u53d6\u5f15\u30b3\u30fc\u30c9\"),\n    \"\u671f\u65e5\u7ba1\u7406\u533a\u5206\" VARCHAR(1),\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u66f4\u65b0\u8005\u540d\" VARCHAR(12)\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX idx_\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf_BSPL\u533a\u5206 ON \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\"(\"BSPL\u533a\u5206\");\nCREATE INDEX idx_\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf_\u53d6\u5f15\u8981\u7d20\u533a\u5206 ON \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\"(\"\u53d6\u5f15\u8981\u7d20\u533a\u5206\");\nCREATE INDEX idx_\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf_\u96c6\u8a08\u533a\u5206 ON \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\"(\"\u96c6\u8a08\u533a\u5206\");\n</code></pre>"},{"location":"article/part3-orm/chapter15-orm/#152-jpa","title":"15.2 JPA \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u5b9f\u88c5","text":""},{"location":"article/part3-orm/chapter15-orm/#tdd","title":"TDD \u306b\u3088\u308b\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u306e\u5b9f\u88c5","text":""},{"location":"article/part3-orm/chapter15-orm/#red","title":"Red: \u5931\u6557\u3059\u308b\u30c6\u30b9\u30c8\u3092\u66f8\u304f","text":"\u52d8\u5b9a\u79d1\u76ee\u30ea\u30dd\u30b8\u30c8\u30ea\u30c6\u30b9\u30c8 <pre><code>package com.example.accounting.infrastructure.persistence.repository;\n\nimport com.example.accounting.application.port.out.AccountRepository;\nimport com.example.accounting.domain.model.account.*;\nimport com.example.accounting.testsetup.BaseIntegrationTest;\nimport org.junit.jupiter.api.*;\nimport org.springframework.beans.factory.annotation.Autowired;\n\nimport static org.assertj.core.api.Assertions.*;\n\n@DisplayName(\"\u52d8\u5b9a\u79d1\u76ee\u30ea\u30dd\u30b8\u30c8\u30ea\")\nclass AccountRepositoryTest extends BaseIntegrationTest {\n\n    @Autowired\n    private AccountRepository accountRepository;\n\n    @BeforeEach\n    void setUp() {\n        accountRepository.deleteAll();\n    }\n\n    @Nested\n    @DisplayName(\"\u767b\u9332\")\n    class Registration {\n\n        @Test\n        @DisplayName(\"\u52d8\u5b9a\u79d1\u76ee\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterAccount() {\n            // Arrange\n            var account = Account.builder()\n                    .accountCode(\"11110\")\n                    .accountName(\"\u73fe\u91d1\")\n                    .accountShortName(\"\u73fe\u91d1\")\n                    .bsPlType(BsPlType.BS)\n                    .debitCreditType(DebitCreditType.DEBIT)\n                    .transactionElementType(TransactionElementType.ASSET)\n                    .aggregationType(AggregationType.POSTING)\n                    .build();\n\n            // Act\n            accountRepository.save(account);\n\n            // Assert\n            var result = accountRepository.findByCode(\"11110\");\n            assertThat(result).isPresent();\n            assertThat(result.get().getAccountName()).isEqualTo(\"\u73fe\u91d1\");\n            assertThat(result.get().getBsPlType()).isEqualTo(BsPlType.BS);\n            assertThat(result.get().getDebitCreditType()).isEqualTo(DebitCreditType.DEBIT);\n        }\n\n        @Test\n        @DisplayName(\"\u8cb8\u501f\u5bfe\u7167\u8868\u306e\u8cc7\u7523\u79d1\u76ee\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterBSAssetAccount() {\n            var account = createAccount(\"11000\", \"\u6d41\u52d5\u8cc7\u7523\", BsPlType.BS,\n                    DebitCreditType.DEBIT, TransactionElementType.ASSET, AggregationType.SUMMARY);\n            accountRepository.save(account);\n\n            var result = accountRepository.findByCode(\"11000\");\n            assertThat(result).isPresent();\n            assertThat(result.get().getBsPlType()).isEqualTo(BsPlType.BS);\n            assertThat(result.get().getTransactionElementType()).isEqualTo(TransactionElementType.ASSET);\n        }\n\n        @Test\n        @DisplayName(\"\u640d\u76ca\u8a08\u7b97\u66f8\u306e\u53ce\u76ca\u79d1\u76ee\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterPLRevenueAccount() {\n            var account = createAccount(\"41000\", \"\u58f2\u4e0a\u9ad8\", BsPlType.PL,\n                    DebitCreditType.CREDIT, TransactionElementType.REVENUE, AggregationType.SUMMARY);\n            accountRepository.save(account);\n\n            var result = accountRepository.findByCode(\"41000\");\n            assertThat(result).isPresent();\n            assertThat(result.get().getBsPlType()).isEqualTo(BsPlType.PL);\n            assertThat(result.get().getTransactionElementType()).isEqualTo(TransactionElementType.REVENUE);\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u96c6\u8a08\u533a\u5206\")\n    class AggregationTypes {\n\n        @Test\n        @DisplayName(\"\u898b\u51fa\u79d1\u76ee\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterHeaderAccount() {\n            var account = createAccount(\"11\", \"(\u8cc7\u7523\u306e\u90e8\uff09\", BsPlType.BS,\n                    DebitCreditType.DEBIT, TransactionElementType.ASSET, AggregationType.HEADING);\n            accountRepository.save(account);\n\n            var result = accountRepository.findByCode(\"11\");\n            assertThat(result.get().getAggregationType()).isEqualTo(AggregationType.HEADING);\n        }\n\n        @Test\n        @DisplayName(\"\u96c6\u8a08\u79d1\u76ee\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterSummaryAccount() {\n            var account = createAccount(\"11190\", \"\u73fe\u91d1\u53ca\u3073\u9810\u91d1\", BsPlType.BS,\n                    DebitCreditType.DEBIT, TransactionElementType.ASSET, AggregationType.SUMMARY);\n            accountRepository.save(account);\n\n            var result = accountRepository.findByCode(\"11190\");\n            assertThat(result.get().getAggregationType()).isEqualTo(AggregationType.SUMMARY);\n        }\n\n        @Test\n        @DisplayName(\"\u8a08\u4e0a\u79d1\u76ee\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterPostingAccount() {\n            var account = createAccount(\"11110\", \"\u73fe\u91d1\", BsPlType.BS,\n                    DebitCreditType.DEBIT, TransactionElementType.ASSET, AggregationType.POSTING);\n            accountRepository.save(account);\n\n            var result = accountRepository.findByCode(\"11110\");\n            assertThat(result.get().getAggregationType()).isEqualTo(AggregationType.POSTING);\n        }\n    }\n\n    private Account createAccount(String code, String name, BsPlType bsPlType,\n            DebitCreditType debitCreditType, TransactionElementType transactionElementType,\n            AggregationType aggregationType) {\n        return Account.builder()\n                .accountCode(code)\n                .accountName(name)\n                .bsPlType(bsPlType)\n                .debitCreditType(debitCreditType)\n                .transactionElementType(transactionElementType)\n                .aggregationType(aggregationType)\n                .build();\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter15-orm/#green","title":"Green: \u30c6\u30b9\u30c8\u3092\u901a\u3059\u5b9f\u88c5","text":""},{"location":"article/part3-orm/chapter15-orm/#jpa","title":"\u30c9\u30e1\u30a4\u30f3\u5c64\uff08JPA \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\uff09","text":"Account.java\uff08\u52d8\u5b9a\u79d1\u76ee\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\uff09 <pre><code>package com.example.accounting.domain.model.account;\n\nimport com.example.accounting.infrastructure.persistence.converter.*;\nimport jakarta.persistence.*;\nimport lombok.*;\nimport java.time.LocalDateTime;\n\n@Entity\n@Table(name = \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\")\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Account {\n\n    @Id\n    @Column(name = \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", length = 5)\n    private String accountCode;\n\n    @Column(name = \"\u52d8\u5b9a\u79d1\u76ee\u540d\", length = 40, nullable = false)\n    private String accountName;\n\n    @Column(name = \"\u52d8\u5b9a\u79d1\u76ee\u7565\u540d\", length = 10)\n    private String accountShortName;\n\n    @Column(name = \"\u52d8\u5b9a\u79d1\u76ee\u30ab\u30ca\", length = 40)\n    private String accountNameKana;\n\n    @Convert(converter = BsPlTypeConverter.class)\n    @Column(name = \"BSPL\u533a\u5206\", nullable = false, columnDefinition = \"BSPL\u533a\u5206\")\n    private BsPlType bsPlType;\n\n    @Convert(converter = DebitCreditTypeConverter.class)\n    @Column(name = \"\u8cb8\u501f\u533a\u5206\", nullable = false, columnDefinition = \"\u8cb8\u501f\u533a\u5206\")\n    private DebitCreditType debitCreditType;\n\n    @Convert(converter = TransactionElementTypeConverter.class)\n    @Column(name = \"\u53d6\u5f15\u8981\u7d20\u533a\u5206\", nullable = false, columnDefinition = \"\u53d6\u5f15\u8981\u7d20\u533a\u5206\")\n    private TransactionElementType transactionElementType;\n\n    @Convert(converter = AggregationTypeConverter.class)\n    @Column(name = \"\u96c6\u8a08\u533a\u5206\", nullable = false, columnDefinition = \"\u96c6\u8a08\u533a\u5206\")\n    private AggregationType aggregationType;\n\n    @Column(name = \"\u7ba1\u7406\u4f1a\u8a08\u533a\u5206\", length = 1)\n    private String managementAccountingType;\n\n    @Column(name = \"\u8cbb\u7528\u533a\u5206\", length = 1)\n    private String expenseType;\n\n    @Column(name = \"\u5143\u5e33\u51fa\u529b\u533a\u5206\", length = 1)\n    private String ledgerOutputType;\n\n    @Column(name = \"\u88dc\u52a9\u79d1\u76ee\u7a2e\u5225\", length = 1)\n    private String subAccountType;\n\n    @Convert(converter = TaxCalculationTypeConverter.class)\n    @Column(name = \"\u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206\", columnDefinition = \"\u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206\")\n    private TaxCalculationType taxCalculationType;\n\n    @Column(name = \"\u8ab2\u7a0e\u53d6\u5f15\u30b3\u30fc\u30c9\", length = 2)\n    private String taxTransactionCode;\n\n    @Column(name = \"\u671f\u65e5\u7ba1\u7406\u533a\u5206\", length = 1)\n    private String dueDateManagementType;\n\n    @Column(name = \"\u4f5c\u6210\u65e5\u6642\")\n    private LocalDateTime createdAt;\n\n    @Column(name = \"\u66f4\u65b0\u65e5\u6642\")\n    private LocalDateTime updatedAt;\n\n    @Column(name = \"\u66f4\u65b0\u8005\u540d\", length = 12)\n    private String updatedBy;\n\n    @PrePersist\n    protected void onCreate() {\n        createdAt = LocalDateTime.now();\n        updatedAt = LocalDateTime.now();\n    }\n\n    @PreUpdate\n    protected void onUpdate() {\n        updatedAt = LocalDateTime.now();\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter15-orm/#enum_1","title":"ENUM \u5b9a\u7fa9\uff08\u30c9\u30e1\u30a4\u30f3\u5c64\uff09","text":"BsPlType.java\uff08BSPL\u533a\u5206\uff09 <pre><code>package com.example.accounting.domain.model.account;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum BsPlType {\n    BS(\"BS\"),\n    PL(\"PL\");\n\n    private final String displayName;\n\n    public static BsPlType fromDisplayName(String displayName) {\n        for (BsPlType type : values()) {\n            if (type.displayName.equals(displayName)) {\n                return type;\n            }\n        }\n        throw new IllegalArgumentException(\"\u4e0d\u6b63\u306aBSPL\u533a\u5206: \" + displayName);\n    }\n}\n</code></pre> DebitCreditType.java\uff08\u8cb8\u501f\u533a\u5206\uff09 <pre><code>package com.example.accounting.domain.model.account;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum DebitCreditType {\n    DEBIT(\"\u501f\u65b9\"),\n    CREDIT(\"\u8cb8\u65b9\");\n\n    private final String displayName;\n\n    public static DebitCreditType fromDisplayName(String displayName) {\n        for (DebitCreditType type : values()) {\n            if (type.displayName.equals(displayName)) {\n                return type;\n            }\n        }\n        throw new IllegalArgumentException(\"\u4e0d\u6b63\u306a\u8cb8\u501f\u533a\u5206: \" + displayName);\n    }\n}\n</code></pre> TransactionElementType.java\uff08\u53d6\u5f15\u8981\u7d20\u533a\u5206\uff09 <pre><code>package com.example.accounting.domain.model.account;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum TransactionElementType {\n    ASSET(\"\u8cc7\u7523\"),\n    LIABILITY(\"\u8ca0\u50b5\"),\n    EQUITY(\"\u8cc7\u672c\"),\n    REVENUE(\"\u53ce\u76ca\"),\n    EXPENSE(\"\u8cbb\u7528\");\n\n    private final String displayName;\n\n    public static TransactionElementType fromDisplayName(String displayName) {\n        for (TransactionElementType type : values()) {\n            if (type.displayName.equals(displayName)) {\n                return type;\n            }\n        }\n        throw new IllegalArgumentException(\"\u4e0d\u6b63\u306a\u53d6\u5f15\u8981\u7d20\u533a\u5206: \" + displayName);\n    }\n}\n</code></pre> AggregationType.java\uff08\u96c6\u8a08\u533a\u5206\uff09 <pre><code>package com.example.accounting.domain.model.account;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum AggregationType {\n    HEADING(\"\u898b\u51fa\u79d1\u76ee\"),\n    SUMMARY(\"\u96c6\u8a08\u79d1\u76ee\"),\n    POSTING(\"\u8a08\u4e0a\u79d1\u76ee\");\n\n    private final String displayName;\n\n    public static AggregationType fromDisplayName(String displayName) {\n        for (AggregationType type : values()) {\n            if (type.displayName.equals(displayName)) {\n                return type;\n            }\n        }\n        throw new IllegalArgumentException(\"\u4e0d\u6b63\u306a\u96c6\u8a08\u533a\u5206: \" + displayName);\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter15-orm/#attributeconverterenum","title":"AttributeConverter\uff08ENUM \u5909\u63db\uff09","text":"<p>JPA \u3067\u306f <code>AttributeConverter</code> \u3092\u4f7f\u3063\u3066 PostgreSQL ENUM \u3068 Java Enum \u3092\u5909\u63db\u3057\u307e\u3059\u3002MyBatis \u306e TypeHandler \u306b\u76f8\u5f53\u3057\u307e\u3059\u3002</p> BsPlTypeConverter.java <pre><code>package com.example.accounting.infrastructure.persistence.converter;\n\nimport com.example.accounting.domain.model.account.BsPlType;\nimport jakarta.persistence.AttributeConverter;\nimport jakarta.persistence.Converter;\n\n@Converter(autoApply = true)\npublic class BsPlTypeConverter implements AttributeConverter&lt;BsPlType, String&gt; {\n\n    @Override\n    public String convertToDatabaseColumn(BsPlType attribute) {\n        return attribute != null ? attribute.getDisplayName() : null;\n    }\n\n    @Override\n    public BsPlType convertToEntityAttribute(String dbData) {\n        return dbData != null ? BsPlType.fromDisplayName(dbData) : null;\n    }\n}\n</code></pre> DebitCreditTypeConverter.java <pre><code>package com.example.accounting.infrastructure.persistence.converter;\n\nimport com.example.accounting.domain.model.account.DebitCreditType;\nimport jakarta.persistence.AttributeConverter;\nimport jakarta.persistence.Converter;\n\n@Converter(autoApply = true)\npublic class DebitCreditTypeConverter implements AttributeConverter&lt;DebitCreditType, String&gt; {\n\n    @Override\n    public String convertToDatabaseColumn(DebitCreditType attribute) {\n        return attribute != null ? attribute.getDisplayName() : null;\n    }\n\n    @Override\n    public DebitCreditType convertToEntityAttribute(String dbData) {\n        return dbData != null ? DebitCreditType.fromDisplayName(dbData) : null;\n    }\n}\n</code></pre> TransactionElementTypeConverter.java <pre><code>package com.example.accounting.infrastructure.persistence.converter;\n\nimport com.example.accounting.domain.model.account.TransactionElementType;\nimport jakarta.persistence.AttributeConverter;\nimport jakarta.persistence.Converter;\n\n@Converter(autoApply = true)\npublic class TransactionElementTypeConverter implements AttributeConverter&lt;TransactionElementType, String&gt; {\n\n    @Override\n    public String convertToDatabaseColumn(TransactionElementType attribute) {\n        return attribute != null ? attribute.getDisplayName() : null;\n    }\n\n    @Override\n    public TransactionElementType convertToEntityAttribute(String dbData) {\n        return dbData != null ? TransactionElementType.fromDisplayName(dbData) : null;\n    }\n}\n</code></pre> AggregationTypeConverter.java <pre><code>package com.example.accounting.infrastructure.persistence.converter;\n\nimport com.example.accounting.domain.model.account.AggregationType;\nimport jakarta.persistence.AttributeConverter;\nimport jakarta.persistence.Converter;\n\n@Converter(autoApply = true)\npublic class AggregationTypeConverter implements AttributeConverter&lt;AggregationType, String&gt; {\n\n    @Override\n    public String convertToDatabaseColumn(AggregationType attribute) {\n        return attribute != null ? attribute.getDisplayName() : null;\n    }\n\n    @Override\n    public AggregationType convertToEntityAttribute(String dbData) {\n        return dbData != null ? AggregationType.fromDisplayName(dbData) : null;\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter15-orm/#repository-output-port","title":"Repository \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff08Output Port\uff09","text":"AccountRepository.java <pre><code>package com.example.accounting.application.port.out;\n\nimport com.example.accounting.domain.model.account.Account;\nimport com.example.accounting.domain.model.account.AggregationType;\nimport com.example.accounting.domain.model.account.BsPlType;\nimport com.example.accounting.domain.model.account.TransactionElementType;\n\nimport java.util.List;\nimport java.util.Optional;\n\n/**\n * \u52d8\u5b9a\u79d1\u76ee\u30ea\u30dd\u30b8\u30c8\u30ea\uff08Output Port\uff09\n */\npublic interface AccountRepository {\n\n    void save(Account account);\n\n    Optional&lt;Account&gt; findByCode(String accountCode);\n\n    List&lt;Account&gt; findAll();\n\n    List&lt;Account&gt; findByBsPlType(BsPlType bsPlType);\n\n    List&lt;Account&gt; findByAggregationType(AggregationType aggregationType);\n\n    List&lt;Account&gt; findByTransactionElementType(TransactionElementType type);\n\n    void update(Account account);\n\n    void deleteAll();\n}\n</code></pre>"},{"location":"article/part3-orm/chapter15-orm/#spring-data-jpa-repository","title":"Spring Data JPA Repository","text":"AccountJpaRepository.java <pre><code>package com.example.accounting.infrastructure.persistence.repository;\n\nimport com.example.accounting.domain.model.account.Account;\nimport com.example.accounting.domain.model.account.AggregationType;\nimport com.example.accounting.domain.model.account.BsPlType;\nimport com.example.accounting.domain.model.account.TransactionElementType;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.jpa.repository.Modifying;\nimport org.springframework.data.jpa.repository.Query;\nimport org.springframework.stereotype.Repository;\n\nimport java.util.List;\n\n@Repository\npublic interface AccountJpaRepository extends JpaRepository&lt;Account, String&gt; {\n\n    List&lt;Account&gt; findByBsPlType(BsPlType bsPlType);\n\n    List&lt;Account&gt; findByAggregationType(AggregationType aggregationType);\n\n    List&lt;Account&gt; findByTransactionElementType(TransactionElementType transactionElementType);\n\n    List&lt;Account&gt; findAllByOrderByAccountCodeAsc();\n\n    @Modifying\n    @Query(value = \"TRUNCATE TABLE \\\"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\\\" CASCADE\", nativeQuery = true)\n    void truncateTable();\n}\n</code></pre>"},{"location":"article/part3-orm/chapter15-orm/#repository","title":"Repository \u5b9f\u88c5\u30af\u30e9\u30b9\uff08\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u5c64\uff09","text":"AccountRepositoryImpl.java <pre><code>package com.example.accounting.infrastructure.persistence.repository;\n\nimport com.example.accounting.application.port.out.AccountRepository;\nimport com.example.accounting.domain.model.account.Account;\nimport com.example.accounting.domain.model.account.AggregationType;\nimport com.example.accounting.domain.model.account.BsPlType;\nimport com.example.accounting.domain.model.account.TransactionElementType;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Repository;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.util.List;\nimport java.util.Optional;\n\n@Repository\n@RequiredArgsConstructor\npublic class AccountRepositoryImpl implements AccountRepository {\n\n    private final AccountJpaRepository jpaRepository;\n\n    @Override\n    public void save(Account account) {\n        jpaRepository.save(account);\n    }\n\n    @Override\n    public Optional&lt;Account&gt; findByCode(String accountCode) {\n        return jpaRepository.findById(accountCode);\n    }\n\n    @Override\n    public List&lt;Account&gt; findAll() {\n        return jpaRepository.findAllByOrderByAccountCodeAsc();\n    }\n\n    @Override\n    public List&lt;Account&gt; findByBsPlType(BsPlType bsPlType) {\n        return jpaRepository.findByBsPlType(bsPlType);\n    }\n\n    @Override\n    public List&lt;Account&gt; findByAggregationType(AggregationType aggregationType) {\n        return jpaRepository.findByAggregationType(aggregationType);\n    }\n\n    @Override\n    public List&lt;Account&gt; findByTransactionElementType(TransactionElementType type) {\n        return jpaRepository.findByTransactionElementType(type);\n    }\n\n    @Override\n    public void update(Account account) {\n        jpaRepository.save(account);\n    }\n\n    @Override\n    @Transactional\n    public void deleteAll() {\n        jpaRepository.truncateTable();\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter15-orm/#153","title":"15.3 \u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf\u306e\u8a2d\u8a08","text":""},{"location":"article/part3-orm/chapter15-orm/#_4","title":"\u30c1\u30eb\u30c0\u9023\u7d50\u65b9\u5f0f\u306b\u3088\u308b\u968e\u5c64\u69cb\u9020","text":"<p>\u52d8\u5b9a\u79d1\u76ee\u306e\u968e\u5c64\u69cb\u9020\u3092\u300c\u30c1\u30eb\u30c0\uff08^\uff09\u9023\u7d50\u300d\u3067\u8868\u73fe\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001SQL \u306e LIKE \u691c\u7d22\u3067\u52b9\u7387\u7684\u306b\u968e\u5c64\u691c\u7d22\u304c\u3067\u304d\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part3-orm/chapter15-orm/#_5","title":"\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf\u306e\u30c7\u30fc\u30bf\u4f8b","text":"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9 \u52d8\u5b9a\u79d1\u76ee\u30d1\u30b9 11 11 11000 11^11000 11190 11^11000^11190 11110 11^11000^11190^11110 11120 11^11000^11190^11120 11130 11^11000^11190^11130"},{"location":"article/part3-orm/chapter15-orm/#_6","title":"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3","text":"V003__create_account_structure.sql <pre><code>-- \u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf\nCREATE TABLE \"\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf\" (\n    \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(5) PRIMARY KEY REFERENCES \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\"(\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\"),\n    \"\u52d8\u5b9a\u79d1\u76ee\u30d1\u30b9\" VARCHAR(100) NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u66f4\u65b0\u8005\u540d\" VARCHAR(12)\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\uff08\u30d1\u30b9\u691c\u7d22\u7528\uff09\nCREATE INDEX idx_\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf_\u30d1\u30b9 ON \"\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf\"(\"\u52d8\u5b9a\u79d1\u76ee\u30d1\u30b9\");\n</code></pre>"},{"location":"article/part3-orm/chapter15-orm/#tdd_1","title":"TDD \u306b\u3088\u308b\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf\u306e\u5b9f\u88c5","text":""},{"location":"article/part3-orm/chapter15-orm/#jpa_1","title":"JPA \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3","text":"AccountStructure.java <pre><code>package com.example.accounting.domain.model.account;\n\nimport jakarta.persistence.*;\nimport lombok.*;\nimport java.time.LocalDateTime;\n\n@Entity\n@Table(name = \"\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf\")\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class AccountStructure {\n\n    @Id\n    @Column(name = \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", length = 5)\n    private String accountCode;\n\n    @Column(name = \"\u52d8\u5b9a\u79d1\u76ee\u30d1\u30b9\", length = 100, nullable = false)\n    private String accountPath;\n\n    @Column(name = \"\u66f4\u65b0\u65e5\u6642\")\n    private LocalDateTime updatedAt;\n\n    @Column(name = \"\u66f4\u65b0\u8005\u540d\", length = 12)\n    private String updatedBy;\n\n    /**\n     * \u30d1\u30b9\u306e\u6df1\u3055\uff08\u968e\u5c64\u30ec\u30d9\u30eb\uff09\u3092\u53d6\u5f97\n     */\n    @Transient\n    public int getDepth() {\n        if (accountPath == null || accountPath.isEmpty()) {\n            return 0;\n        }\n        return accountPath.split(\"\\\\^\").length - 1;\n    }\n\n    /**\n     * \u89aa\u79d1\u76ee\u30b3\u30fc\u30c9\u3092\u53d6\u5f97\n     */\n    @Transient\n    public String getParentCode() {\n        if (accountPath == null || !accountPath.contains(\"^\")) {\n            return null;\n        }\n        String[] parts = accountPath.split(\"\\\\^\");\n        if (parts.length &lt; 2) {\n            return null;\n        }\n        return parts[parts.length - 2];\n    }\n\n    @PrePersist\n    @PreUpdate\n    protected void onUpdate() {\n        updatedAt = LocalDateTime.now();\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter15-orm/#repository-output-port_1","title":"Repository \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff08Output Port\uff09","text":"AccountStructureRepository.java <pre><code>package com.example.accounting.application.port.out;\n\nimport com.example.accounting.domain.model.account.AccountStructure;\n\nimport java.util.List;\nimport java.util.Optional;\n\n/**\n * \u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30ea\u30dd\u30b8\u30c8\u30ea\uff08Output Port\uff09\n */\npublic interface AccountStructureRepository {\n\n    void save(AccountStructure structure);\n\n    Optional&lt;AccountStructure&gt; findByCode(String accountCode);\n\n    List&lt;AccountStructure&gt; findAll();\n\n    List&lt;AccountStructure&gt; findByPathContaining(String pathSegment);\n\n    List&lt;AccountStructure&gt; findChildren(String parentCode);\n\n    void update(AccountStructure structure);\n\n    void deleteAll();\n}\n</code></pre>"},{"location":"article/part3-orm/chapter15-orm/#spring-data-jpa-repository_1","title":"Spring Data JPA Repository","text":"AccountStructureJpaRepository.java <pre><code>package com.example.accounting.infrastructure.persistence.repository;\n\nimport com.example.accounting.domain.model.account.AccountStructure;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.jpa.repository.Modifying;\nimport org.springframework.data.jpa.repository.Query;\nimport org.springframework.data.repository.query.Param;\nimport org.springframework.stereotype.Repository;\n\nimport java.util.List;\n\n@Repository\npublic interface AccountStructureJpaRepository extends JpaRepository&lt;AccountStructure, String&gt; {\n\n    List&lt;AccountStructure&gt; findAllByOrderByAccountCodeAsc();\n\n    @Query(\"SELECT s FROM AccountStructure s WHERE s.accountPath LIKE %:pathSegment% ORDER BY s.accountCode\")\n    List&lt;AccountStructure&gt; findByAccountPathContaining(@Param(\"pathSegment\") String pathSegment);\n\n    @Query(\"SELECT s FROM AccountStructure s WHERE s.accountPath LIKE :parentCode% ORDER BY s.accountCode\")\n    List&lt;AccountStructure&gt; findChildrenByParentCode(@Param(\"parentCode\") String parentCode);\n\n    @Modifying\n    @Query(value = \"TRUNCATE TABLE \\\"\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf\\\" CASCADE\", nativeQuery = true)\n    void truncateTable();\n}\n</code></pre>"},{"location":"article/part3-orm/chapter15-orm/#repository_1","title":"Repository \u5b9f\u88c5\u30af\u30e9\u30b9","text":"AccountStructureRepositoryImpl.java <pre><code>package com.example.accounting.infrastructure.persistence.repository;\n\nimport com.example.accounting.application.port.out.AccountStructureRepository;\nimport com.example.accounting.domain.model.account.AccountStructure;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Repository;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.util.List;\nimport java.util.Optional;\n\n@Repository\n@RequiredArgsConstructor\npublic class AccountStructureRepositoryImpl implements AccountStructureRepository {\n\n    private final AccountStructureJpaRepository jpaRepository;\n\n    @Override\n    public void save(AccountStructure structure) {\n        jpaRepository.save(structure);\n    }\n\n    @Override\n    public Optional&lt;AccountStructure&gt; findByCode(String accountCode) {\n        return jpaRepository.findById(accountCode);\n    }\n\n    @Override\n    public List&lt;AccountStructure&gt; findAll() {\n        return jpaRepository.findAllByOrderByAccountCodeAsc();\n    }\n\n    @Override\n    public List&lt;AccountStructure&gt; findByPathContaining(String pathSegment) {\n        return jpaRepository.findByAccountPathContaining(pathSegment);\n    }\n\n    @Override\n    public List&lt;AccountStructure&gt; findChildren(String parentCode) {\n        return jpaRepository.findChildrenByParentCode(parentCode + \"^\");\n    }\n\n    @Override\n    public void update(AccountStructure structure) {\n        jpaRepository.save(structure);\n    }\n\n    @Override\n    @Transactional\n    public void deleteAll() {\n        jpaRepository.truncateTable();\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter15-orm/#154","title":"15.4 \u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\u306e\u8a2d\u8a08","text":""},{"location":"article/part3-orm/chapter15-orm/#_7","title":"\u8ab2\u7a0e\u53d6\u5f15\u30b3\u30fc\u30c9\u30fb\u7a0e\u7387\u306e\u7ba1\u7406","text":"<p>\u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\u306f\u3001\u6d88\u8cbb\u7a0e\u306e\u7a0e\u7387\u60c5\u5831\u3092\u7ba1\u7406\u3059\u308b\u30de\u30b9\u30bf\u30c6\u30fc\u30d6\u30eb\u3067\u3059\u3002</p> \u8ab2\u7a0e\u53d6\u5f15\u30b3\u30fc\u30c9 \u8ab2\u7a0e\u53d6\u5f15\u540d \u7a0e\u7387 00 \u975e\u8ab2\u7a0e 0.000 08 \u8efd\u6e1b\u7a0e\u7387 0.080 10 \u6a19\u6e96\u7a0e\u7387 0.100"},{"location":"article/part3-orm/chapter15-orm/#tdd_2","title":"TDD \u306b\u3088\u308b\u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\u306e\u5b9f\u88c5","text":""},{"location":"article/part3-orm/chapter15-orm/#jpa_2","title":"JPA \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3","text":"TaxTransaction.java <pre><code>package com.example.accounting.domain.model.tax;\n\nimport jakarta.persistence.*;\nimport lombok.*;\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\n\n@Entity\n@Table(name = \"\u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\")\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class TaxTransaction {\n\n    @Id\n    @Column(name = \"\u8ab2\u7a0e\u53d6\u5f15\u30b3\u30fc\u30c9\", length = 2)\n    private String taxCode;\n\n    @Column(name = \"\u8ab2\u7a0e\u53d6\u5f15\u540d\", length = 20, nullable = false)\n    private String taxName;\n\n    @Builder.Default\n    @Column(name = \"\u7a0e\u7387\", precision = 5, scale = 3, nullable = false)\n    private BigDecimal taxRate = new BigDecimal(\"0.10\");\n\n    @Column(name = \"\u66f4\u65b0\u65e5\u6642\")\n    private LocalDateTime updatedAt;\n\n    @Column(name = \"\u66f4\u65b0\u8005\u540d\", length = 12)\n    private String updatedBy;\n\n    /**\n     * \u7a0e\u8fbc\u91d1\u984d\u3092\u8a08\u7b97\n     */\n    public BigDecimal calculateTaxIncludedAmount(BigDecimal amount) {\n        return amount.add(amount.multiply(taxRate));\n    }\n\n    /**\n     * \u6d88\u8cbb\u7a0e\u984d\u3092\u8a08\u7b97\n     */\n    public BigDecimal calculateTaxAmount(BigDecimal amount) {\n        return amount.multiply(taxRate);\n    }\n\n    @PrePersist\n    @PreUpdate\n    protected void onUpdate() {\n        updatedAt = LocalDateTime.now();\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter15-orm/#spring-data-jpa-repository_2","title":"Spring Data JPA Repository","text":"TaxTransactionJpaRepository.java <pre><code>package com.example.accounting.infrastructure.persistence.repository;\n\nimport com.example.accounting.domain.model.tax.TaxTransaction;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.jpa.repository.Modifying;\nimport org.springframework.data.jpa.repository.Query;\nimport org.springframework.stereotype.Repository;\n\nimport java.util.List;\n\n@Repository\npublic interface TaxTransactionJpaRepository extends JpaRepository&lt;TaxTransaction, String&gt; {\n\n    List&lt;TaxTransaction&gt; findAllByOrderByTaxCodeAsc();\n\n    @Modifying\n    @Query(value = \"TRUNCATE TABLE \\\"\u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\\\" CASCADE\", nativeQuery = true)\n    void truncateTable();\n}\n</code></pre>"},{"location":"article/part3-orm/chapter15-orm/#155-mybatis","title":"15.5 MyBatis \u7248\u3068\u306e\u6bd4\u8f03","text":""},{"location":"article/part3-orm/chapter15-orm/#_8","title":"\u5b9f\u88c5\u306e\u9055\u3044","text":"\u89b3\u70b9 MyBatis \u7248 JPA \u7248 \u30de\u30c3\u30d4\u30f3\u30b0 XML Mapper + resultMap @Entity + @Column ENUM \u5909\u63db TypeHandler AttributeConverter Repository Mapper \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9 + XML JpaRepository \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9 SQL XML \u3067\u660e\u793a\u7684\u306b\u8a18\u8ff0 \u30e1\u30bd\u30c3\u30c9\u540d\u898f\u7d04\u3067\u81ea\u52d5\u751f\u6210 \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u7ba1\u7406 \u660e\u793a\u7684\u306b\u8a18\u8ff0 @Transactional TRUNCATE XML \u3067\u5b9a\u7fa9 @Query(nativeQuery)"},{"location":"article/part3-orm/chapter15-orm/#_9","title":"\u30b3\u30fc\u30c9\u91cf\u306e\u6bd4\u8f03","text":"\u9805\u76ee MyBatis \u7248 JPA \u7248 \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 POJO\uff08\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306a\u3057\uff09 @Entity + @Column ENUM \u5909\u63db TypeHandler\uff08\u54044\u30af\u30e9\u30b9\uff09 AttributeConverter\uff08\u54044\u30af\u30e9\u30b9\uff09 Mapper/Repository Mapper + XML JpaRepository \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306e\u307f SQL XML \u3067\u5168\u3066\u8a18\u8ff0 \u30e1\u30bd\u30c3\u30c9\u540d\u898f\u7d04 + @Query"},{"location":"article/part3-orm/chapter15-orm/#15","title":"\u7b2c15\u7ae0\u306e\u307e\u3068\u3081","text":""},{"location":"article/part3-orm/chapter15-orm/#_10","title":"\u4f5c\u6210\u3057\u305f\u30c6\u30fc\u30d6\u30eb","text":"\u30c6\u30fc\u30d6\u30eb\u540d \u8aac\u660e <code>\u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf</code> \u6d88\u8cbb\u7a0e\u306e\u7a0e\u7387\u60c5\u5831\u3092\u7ba1\u7406 <code>\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf</code> \u52d8\u5b9a\u79d1\u76ee\u306e\u57fa\u672c\u60c5\u5831\u3092\u7ba1\u7406 <code>\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf</code> \u52d8\u5b9a\u79d1\u76ee\u306e\u968e\u5c64\u69cb\u9020\u3092\u30c1\u30eb\u30c0\u9023\u7d50\u3067\u7ba1\u7406"},{"location":"article/part3-orm/chapter15-orm/#er_1","title":"ER\u56f3","text":""},{"location":"article/part3-orm/chapter15-orm/#_11","title":"\u8a2d\u8a08\u306e\u30dd\u30a4\u30f3\u30c8","text":"<ol> <li>ENUM \u578b\u306e\u6d3b\u7528: BSPL\u533a\u5206\u3001\u8cb8\u501f\u533a\u5206\u3001\u53d6\u5f15\u8981\u7d20\u533a\u5206\u3001\u96c6\u8a08\u533a\u5206\u3067\u578b\u5b89\u5168\u6027\u3092\u78ba\u4fdd</li> <li>\u65e5\u672c\u8a9e DB / \u82f1\u8a9e Java: \u30c6\u30fc\u30d6\u30eb\u30fb\u30ab\u30e9\u30e0\u306f\u65e5\u672c\u8a9e\u3001Java \u30b3\u30fc\u30c9\u306f\u82f1\u8a9e\u3067\u7d71\u4e00</li> <li>AttributeConverter: Java Enum \u3068\u65e5\u672c\u8a9e ENUM \u5024\u306e\u5909\u63db\u3092 JPA AttributeConverter \u3067\u5b9f\u88c5</li> <li>\u30c1\u30eb\u30c0\u9023\u7d50\u65b9\u5f0f: \u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf\u3067\u968e\u5c64\u69cb\u9020\u3092\u8868\u73fe\u3057\u3001JPQL \u306e LIKE \u691c\u7d22\u3067\u52b9\u7387\u7684\u306b\u968e\u5c64\u691c\u7d22</li> <li>\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3: \u30c9\u30e1\u30a4\u30f3\u5c64\u304c\u30a4\u30f3\u30d5\u30e9\u306b\u4f9d\u5b58\u3057\u306a\u3044\u8a2d\u8a08</li> <li>JpaRepository: \u30e1\u30bd\u30c3\u30c9\u540d\u898f\u7d04\u306b\u3088\u308b\u81ea\u52d5 SQL \u751f\u6210</li> </ol>"},{"location":"article/part3-orm/chapter15-orm/#_12","title":"\u547d\u540d\u898f\u5247","text":"\u8981\u7d20 \u8a00\u8a9e \u4f8b \u30c6\u30fc\u30d6\u30eb\u540d \u65e5\u672c\u8a9e <code>\"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\"</code>, <code>\"\u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\"</code> \u30ab\u30e9\u30e0\u540d \u65e5\u672c\u8a9e <code>\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\"</code>, <code>\"\u52d8\u5b9a\u79d1\u76ee\u540d\"</code> ENUM \u578b \u65e5\u672c\u8a9e <code>BSPL\u533a\u5206</code>, <code>\u8cb8\u501f\u533a\u5206</code> ENUM \u5024 \u65e5\u672c\u8a9e <code>'BS'</code>, <code>'\u501f\u65b9'</code> Java \u30af\u30e9\u30b9\u540d \u82f1\u8a9e <code>Account</code>, <code>AccountStructure</code> Java \u30d5\u30a3\u30fc\u30eb\u30c9\u540d \u82f1\u8a9e <code>accountCode</code>, <code>accountName</code> JPA @Column \u65e5\u672c\u8a9e\u30ab\u30e9\u30e0\u6307\u5b9a <code>@Column(name = \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\")</code>"},{"location":"article/part3-orm/chapter15-orm/#_13","title":"\u6b21\u7ae0\u306e\u4e88\u544a","text":"<p>\u7b2c16\u7ae0\u3067\u306f\u3001\u4ed5\u8a33\u30c6\u30fc\u30d6\u30eb\u306e\u8a2d\u8a08\u306b\u9032\u307f\u307e\u3059\u3002\u8907\u5f0f\u7c3f\u8a18\u306e\u57fa\u672c\u69cb\u9020\u3067\u3042\u308b\u300c\u501f\u65b9\u30fb\u8cb8\u65b9\u300d\u306e\u4ed5\u8a33\u30c7\u30fc\u30bf\u3092 JPA \u3067\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\u3002@EmbeddedId \u3092\u4f7f\u3063\u305f\u8907\u5408\u4e3b\u30ad\u30fc\u3084 @ManyToOne \u306b\u3088\u308b\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3082\u89e3\u8aac\u3057\u307e\u3059\u3002</p>"},{"location":"article/part3-orm/chapter16-orm/","title":"\u7b2c16\u7ae0\uff1a\u4ed5\u8a33\u306e\u8a2d\u8a08\uff08ORM\u7248\uff09","text":"<p>\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u6838\u5fc3\u90e8\u5206\u3067\u3042\u308b\u300c\u4ed5\u8a33\u51e6\u7406\u300d\u3092 Spring Data JPA \u3067\u8a2d\u8a08\u3057\u307e\u3059\u3002\u672c\u7ae0\u3067\u306f\u3001\u8907\u5f0f\u7c3f\u8a18\u306e\u539f\u5247\u306b\u57fa\u3065\u304d\u3001\u4ed5\u8a33\u30c7\u30fc\u30bf\u306e\u767b\u9332\u30fb\u7ba1\u7406\u3092\u5b9f\u73fe\u3059\u308b\u30c6\u30fc\u30d6\u30eb\u69cb\u9020\u3092 TDD \u3067\u5b9f\u88c5\u3057\u307e\u3059\u3002</p>"},{"location":"article/part3-orm/chapter16-orm/#161","title":"16.1 \u8907\u5f0f\u7c3f\u8a18\u3068\u4ed5\u8a33\u306e\u6982\u5ff5","text":"<p>\u8907\u5f0f\u7c3f\u8a18\u306f\u3001\u3059\u3079\u3066\u306e\u53d6\u5f15\u3092\u300c\u501f\u65b9\uff08\u304b\u308a\u304b\u305f\uff09\u300d\u3068\u300c\u8cb8\u65b9\uff08\u304b\u3057\u304b\u305f\uff09\u300d\u306e2\u3064\u306e\u5074\u9762\u304b\u3089\u8a18\u9332\u3059\u308b\u65b9\u5f0f\u3067\u3059\u3002</p> <p></p>"},{"location":"article/part3-orm/chapter16-orm/#_1","title":"\u4ed5\u8a33\u306e\u5177\u4f53\u4f8b","text":"<p>\u5546\u54c1\u3092\u73fe\u91d1\u3067\u8ca9\u58f2\u3057\u305f\u5834\u5408\u306e\u4ed5\u8a33\uff1a</p> \u501f\u65b9\uff08Debit\uff09 \u8cb8\u65b9\uff08Credit\uff09 \u73fe\u91d1 100,000\u5186 \u58f2\u4e0a 100,000\u5186 <p></p>"},{"location":"article/part3-orm/chapter16-orm/#162","title":"16.2 \u4ed5\u8a33\u30c6\u30fc\u30d6\u30eb\u306e\u30b9\u30ad\u30fc\u30de\u8a2d\u8a08","text":""},{"location":"article/part3-orm/chapter16-orm/#er","title":"ER\u56f3\uff1a\u4ed5\u8a33\u306e\u89aa\u5b50\u95a2\u4fc2","text":""},{"location":"article/part3-orm/chapter16-orm/#flyway","title":"Flyway \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3","text":"V006__create_journal_tables.sql <pre><code>-- \u4ed5\u8a33\u4f1d\u7968\u533a\u5206\nCREATE TYPE \u4ed5\u8a33\u4f1d\u7968\u533a\u5206 AS ENUM ('\u901a\u5e38', '\u6c7a\u7b97', '\u81ea\u52d5', '\u632f\u66ff');\n\n-- \u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206\nCREATE TYPE \u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206 AS ENUM ('\u501f\u65b9', '\u8cb8\u65b9');\n\n-- \u6d88\u8cbb\u7a0e\u533a\u5206\nCREATE TYPE \u6d88\u8cbb\u7a0e\u533a\u5206 AS ENUM ('\u8ab2\u7a0e', '\u975e\u8ab2\u7a0e', '\u514d\u7a0e', '\u4e0d\u8ab2\u7a0e', '\u5bfe\u8c61\u5916');\n\n-- \u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206\uff08\u4ed5\u8a33\u7528\uff09\nCREATE TYPE \u4ed5\u8a33\u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206 AS ENUM ('\u5916\u7a0e', '\u5185\u7a0e', '\u7a0e\u306a\u3057');\n\n-- \u4ed5\u8a33\u30d8\u30c3\u30c0\nCREATE TABLE \"\u4ed5\u8a33\" (\n    \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\" VARCHAR(10) PRIMARY KEY,\n    \"\u8d77\u7968\u65e5\" DATE NOT NULL,\n    \"\u5165\u529b\u65e5\" DATE NOT NULL DEFAULT CURRENT_DATE,\n    \"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\" SMALLINT DEFAULT 0 NOT NULL,\n    \"\u5358\u632f\u30d5\u30e9\u30b0\" SMALLINT DEFAULT 0 NOT NULL,\n    \"\u4ed5\u8a33\u4f1d\u7968\u533a\u5206\" \u4ed5\u8a33\u4f1d\u7968\u533a\u5206 DEFAULT '\u901a\u5e38' NOT NULL,\n    \"\u5b9a\u671f\u8a08\u4e0a\u30d5\u30e9\u30b0\" SMALLINT DEFAULT 0 NOT NULL,\n    \"\u793e\u54e1\u30b3\u30fc\u30c9\" VARCHAR(10),\n    \"\u90e8\u9580\u30b3\u30fc\u30c9\" VARCHAR(5),\n    \"\u8d64\u4f1d\u30d5\u30e9\u30b0\" SMALLINT DEFAULT 0 NOT NULL,\n    \"\u8d64\u9ed2\u4f1d\u7968\u756a\u53f7\" INTEGER,\n    \"\u30d0\u30fc\u30b8\u30e7\u30f3\" INTEGER DEFAULT 0 NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"fk_\u4ed5\u8a33_\u90e8\u9580\"\n        FOREIGN KEY (\"\u90e8\u9580\u30b3\u30fc\u30c9\") REFERENCES \"\u90e8\u9580\u30de\u30b9\u30bf\"(\"\u90e8\u9580\u30b3\u30fc\u30c9\")\n);\n\n-- \u4ed5\u8a33\u660e\u7d30\nCREATE TABLE \"\u4ed5\u8a33\u660e\u7d30\" (\n    \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\" VARCHAR(10) NOT NULL,\n    \"\u4ed5\u8a33\u884c\u756a\u53f7\" SMALLINT NOT NULL,\n    \"\u884c\u6458\u8981\" VARCHAR(1000),\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    PRIMARY KEY (\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u756a\u53f7\"),\n    CONSTRAINT \"fk_\u4ed5\u8a33\u660e\u7d30_\u4ed5\u8a33\"\n        FOREIGN KEY (\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\") REFERENCES \"\u4ed5\u8a33\"(\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\") ON DELETE CASCADE\n);\n\n-- \u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\nCREATE TABLE \"\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\" (\n    \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\" VARCHAR(10) NOT NULL,\n    \"\u4ed5\u8a33\u884c\u756a\u53f7\" SMALLINT NOT NULL,\n    \"\u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206\" \u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206 NOT NULL,\n    \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(5) NOT NULL,\n    \"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(10),\n    \"\u90e8\u9580\u30b3\u30fc\u30c9\" VARCHAR(5),\n    \"\u4ed5\u8a33\u91d1\u984d\" DECIMAL(14,2) NOT NULL,\n    \"\u6d88\u8cbb\u7a0e\u533a\u5206\" \u6d88\u8cbb\u7a0e\u533a\u5206 DEFAULT '\u8ab2\u7a0e',\n    \"\u6d88\u8cbb\u7a0e\u7387\" SMALLINT DEFAULT 10,\n    \"\u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206\" \u4ed5\u8a33\u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206 DEFAULT '\u5916\u7a0e',\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    PRIMARY KEY (\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206\"),\n    CONSTRAINT \"fk_\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30_\u4ed5\u8a33\u660e\u7d30\"\n        FOREIGN KEY (\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u756a\u53f7\")\n        REFERENCES \"\u4ed5\u8a33\u660e\u7d30\"(\"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", \"\u4ed5\u8a33\u884c\u756a\u53f7\") ON DELETE CASCADE,\n    CONSTRAINT \"fk_\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30_\u52d8\u5b9a\u79d1\u76ee\"\n        FOREIGN KEY (\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\") REFERENCES \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\"(\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\")\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"idx_\u4ed5\u8a33_\u8d77\u7968\u65e5\" ON \"\u4ed5\u8a33\"(\"\u8d77\u7968\u65e5\");\nCREATE INDEX \"idx_\u4ed5\u8a33_\u90e8\u9580\u30b3\u30fc\u30c9\" ON \"\u4ed5\u8a33\"(\"\u90e8\u9580\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u4ed5\u8a33_\u4ed5\u8a33\u4f1d\u7968\u533a\u5206\" ON \"\u4ed5\u8a33\"(\"\u4ed5\u8a33\u4f1d\u7968\u533a\u5206\");\nCREATE INDEX \"idx_\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30_\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\" ON \"\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\"(\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\");\n</code></pre>"},{"location":"article/part3-orm/chapter16-orm/#163-jpa","title":"16.3 JPA \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u5b9f\u88c5","text":""},{"location":"article/part3-orm/chapter16-orm/#enum","title":"ENUM \u5b9a\u7fa9","text":"JournalVoucherType.java\uff08\u4ed5\u8a33\u4f1d\u7968\u533a\u5206\uff09 <pre><code>package com.example.accounting.domain.model.journal;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum JournalVoucherType {\n    NORMAL(\"\u901a\u5e38\"),\n    CLOSING(\"\u6c7a\u7b97\"),\n    AUTO(\"\u81ea\u52d5\"),\n    TRANSFER(\"\u632f\u66ff\");\n\n    private final String displayName;\n\n    public static JournalVoucherType fromDisplayName(String displayName) {\n        for (JournalVoucherType type : values()) {\n            if (type.displayName.equals(displayName)) {\n                return type;\n            }\n        }\n        throw new IllegalArgumentException(\"Unknown journal voucher type: \" + displayName);\n    }\n}\n</code></pre> JournalDebitCreditType.java\uff08\u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206\uff09 <pre><code>package com.example.accounting.domain.model.journal;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum JournalDebitCreditType {\n    DEBIT(\"\u501f\u65b9\"),\n    CREDIT(\"\u8cb8\u65b9\");\n\n    private final String displayName;\n\n    public static JournalDebitCreditType fromDisplayName(String displayName) {\n        for (JournalDebitCreditType type : values()) {\n            if (type.displayName.equals(displayName)) {\n                return type;\n            }\n        }\n        throw new IllegalArgumentException(\"Unknown debit/credit type: \" + displayName);\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter16-orm/#_2","title":"\u4ed5\u8a33\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3","text":"Journal.java\uff08\u4ed5\u8a33\u30d8\u30c3\u30c0\uff09 <pre><code>package com.example.accounting.domain.model.journal;\n\nimport com.example.accounting.infrastructure.persistence.converter.JournalVoucherTypeConverter;\nimport jakarta.persistence.*;\nimport lombok.*;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Entity\n@Table(name = \"\u4ed5\u8a33\")\n@NamedEntityGraphs({\n    @NamedEntityGraph(\n        name = \"Journal.withAllDetails\",\n        attributeNodes = {\n            @NamedAttributeNode(value = \"details\", subgraph = \"details-subgraph\")\n        },\n        subgraphs = {\n            @NamedSubgraph(\n                name = \"details-subgraph\",\n                attributeNodes = {\n                    @NamedAttributeNode(\"debitCreditDetails\")\n                }\n            )\n        }\n    )\n})\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Journal {\n\n    @Id\n    @Column(name = \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", length = 10)\n    private String journalVoucherNumber;\n\n    @Column(name = \"\u8d77\u7968\u65e5\", nullable = false)\n    private LocalDate postingDate;\n\n    @Column(name = \"\u5165\u529b\u65e5\", nullable = false)\n    private LocalDate entryDate;\n\n    @Builder.Default\n    @Column(name = \"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\", nullable = false)\n    private Boolean closingJournalFlag = false;\n\n    @Builder.Default\n    @Column(name = \"\u5358\u632f\u30d5\u30e9\u30b0\", nullable = false)\n    private Boolean singleEntryFlag = false;\n\n    @Convert(converter = JournalVoucherTypeConverter.class)\n    @Column(name = \"\u4ed5\u8a33\u4f1d\u7968\u533a\u5206\", nullable = false, columnDefinition = \"\u4ed5\u8a33\u4f1d\u7968\u533a\u5206\")\n    @Builder.Default\n    private JournalVoucherType voucherType = JournalVoucherType.NORMAL;\n\n    @Builder.Default\n    @Column(name = \"\u5b9a\u671f\u8a08\u4e0a\u30d5\u30e9\u30b0\", nullable = false)\n    private Boolean periodicPostingFlag = false;\n\n    @Column(name = \"\u793e\u54e1\u30b3\u30fc\u30c9\", length = 10)\n    private String employeeCode;\n\n    @Column(name = \"\u90e8\u9580\u30b3\u30fc\u30c9\", length = 5)\n    private String departmentCode;\n\n    @Builder.Default\n    @Column(name = \"\u8d64\u4f1d\u30d5\u30e9\u30b0\", nullable = false)\n    private Boolean redSlipFlag = false;\n\n    @Column(name = \"\u8d64\u9ed2\u4f1d\u7968\u756a\u53f7\")\n    private Integer redBlackVoucherNumber;\n\n    @Version\n    @Column(name = \"\u30d0\u30fc\u30b8\u30e7\u30f3\")\n    private Integer version;\n\n    @Column(name = \"\u4f5c\u6210\u65e5\u6642\", nullable = false)\n    private LocalDateTime createdAt;\n\n    @Column(name = \"\u66f4\u65b0\u65e5\u6642\", nullable = false)\n    private LocalDateTime updatedAt;\n\n    @OneToMany(mappedBy = \"journal\", cascade = CascadeType.ALL, orphanRemoval = true)\n    @Builder.Default\n    private List&lt;JournalDetail&gt; details = new ArrayList&lt;&gt;();\n\n    /**\n     * \u8cb8\u501f\u30d0\u30e9\u30f3\u30b9\u30c1\u30a7\u30c3\u30af\n     */\n    @Transient\n    public boolean isBalanced() {\n        var debitTotal = details.stream()\n            .flatMap(d -&gt; d.getDebitCreditDetails().stream())\n            .filter(dc -&gt; dc.getDebitCreditType() == JournalDebitCreditType.DEBIT)\n            .map(JournalDebitCreditDetail::getAmount)\n            .reduce(BigDecimal.ZERO, BigDecimal::add);\n\n        var creditTotal = details.stream()\n            .flatMap(d -&gt; d.getDebitCreditDetails().stream())\n            .filter(dc -&gt; dc.getDebitCreditType() == JournalDebitCreditType.CREDIT)\n            .map(JournalDebitCreditDetail::getAmount)\n            .reduce(BigDecimal.ZERO, BigDecimal::add);\n\n        return debitTotal.compareTo(creditTotal) == 0;\n    }\n\n    public void addDetail(JournalDetail detail) {\n        details.add(detail);\n        detail.setJournal(this);\n    }\n\n    @PrePersist\n    protected void onCreate() {\n        createdAt = LocalDateTime.now();\n        updatedAt = LocalDateTime.now();\n        if (entryDate == null) {\n            entryDate = LocalDate.now();\n        }\n    }\n\n    @PreUpdate\n    protected void onUpdate() {\n        updatedAt = LocalDateTime.now();\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter16-orm/#_3","title":"\u8907\u5408\u4e3b\u30ad\u30fc\u306e\u5b9f\u88c5","text":"<p>JPA \u3067\u306f <code>@EmbeddedId</code> \u3092\u4f7f\u7528\u3057\u3066\u8907\u5408\u4e3b\u30ad\u30fc\u3092\u8868\u73fe\u3057\u307e\u3059\u3002</p> JournalDetailId.java\uff08\u4ed5\u8a33\u660e\u7d30\u306e\u8907\u5408\u4e3b\u30ad\u30fc\uff09 <pre><code>package com.example.accounting.domain.model.journal;\n\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Embeddable;\nimport lombok.*;\n\nimport java.io.Serializable;\n\n@Embeddable\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class JournalDetailId implements Serializable {\n\n    @Column(name = \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", length = 10)\n    private String journalVoucherNumber;\n\n    @Column(name = \"\u4ed5\u8a33\u884c\u756a\u53f7\")\n    private Integer lineNumber;\n}\n</code></pre> JournalDetail.java\uff08\u4ed5\u8a33\u660e\u7d30\uff09 <pre><code>package com.example.accounting.domain.model.journal;\n\nimport jakarta.persistence.*;\nimport lombok.*;\n\nimport java.time.LocalDateTime;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Entity\n@Table(name = \"\u4ed5\u8a33\u660e\u7d30\")\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class JournalDetail {\n\n    @EmbeddedId\n    private JournalDetailId id;\n\n    @Column(name = \"\u884c\u6458\u8981\", length = 1000)\n    private String lineSummary;\n\n    @Column(name = \"\u4f5c\u6210\u65e5\u6642\", nullable = false)\n    private LocalDateTime createdAt;\n\n    @Column(name = \"\u66f4\u65b0\u65e5\u6642\", nullable = false)\n    private LocalDateTime updatedAt;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", insertable = false, updatable = false)\n    private Journal journal;\n\n    @OneToMany(mappedBy = \"journalDetail\", cascade = CascadeType.ALL, orphanRemoval = true)\n    @Builder.Default\n    private List&lt;JournalDebitCreditDetail&gt; debitCreditDetails = new ArrayList&lt;&gt;();\n\n    public void addDebitCreditDetail(JournalDebitCreditDetail dcDetail) {\n        debitCreditDetails.add(dcDetail);\n        dcDetail.setJournalDetail(this);\n    }\n\n    @PrePersist\n    protected void onCreate() {\n        createdAt = LocalDateTime.now();\n        updatedAt = LocalDateTime.now();\n    }\n\n    @PreUpdate\n    protected void onUpdate() {\n        updatedAt = LocalDateTime.now();\n    }\n}\n</code></pre> JournalDebitCreditDetailId.java\uff08\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\u306e\u8907\u5408\u4e3b\u30ad\u30fc\uff09 <pre><code>package com.example.accounting.domain.model.journal;\n\nimport com.example.accounting.infrastructure.persistence.converter.JournalDebitCreditTypeConverter;\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Convert;\nimport jakarta.persistence.Embeddable;\nimport lombok.*;\n\nimport java.io.Serializable;\n\n@Embeddable\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class JournalDebitCreditDetailId implements Serializable {\n\n    @Column(name = \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", length = 10)\n    private String journalVoucherNumber;\n\n    @Column(name = \"\u4ed5\u8a33\u884c\u756a\u53f7\")\n    private Integer lineNumber;\n\n    @Convert(converter = JournalDebitCreditTypeConverter.class)\n    @Column(name = \"\u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206\", columnDefinition = \"\u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206\")\n    private JournalDebitCreditType debitCreditType;\n}\n</code></pre> JournalDebitCreditDetail.java\uff08\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\uff09 <pre><code>package com.example.accounting.domain.model.journal;\n\nimport com.example.accounting.infrastructure.persistence.converter.*;\nimport jakarta.persistence.*;\nimport lombok.*;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\n\n@Entity\n@Table(name = \"\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\")\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class JournalDebitCreditDetail {\n\n    @EmbeddedId\n    private JournalDebitCreditDetailId id;\n\n    @Column(name = \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", length = 5, nullable = false)\n    private String accountCode;\n\n    @Column(name = \"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\", length = 10)\n    private String subAccountCode;\n\n    @Column(name = \"\u90e8\u9580\u30b3\u30fc\u30c9\", length = 5)\n    private String departmentCode;\n\n    @Column(name = \"\u4ed5\u8a33\u91d1\u984d\", precision = 14, scale = 2, nullable = false)\n    private BigDecimal amount;\n\n    @Convert(converter = TaxTypeConverter.class)\n    @Column(name = \"\u6d88\u8cbb\u7a0e\u533a\u5206\", columnDefinition = \"\u6d88\u8cbb\u7a0e\u533a\u5206\")\n    @Builder.Default\n    private TaxType taxType = TaxType.TAXABLE;\n\n    @Builder.Default\n    @Column(name = \"\u6d88\u8cbb\u7a0e\u7387\")\n    private Integer taxRate = 10;\n\n    @Column(name = \"\u4f5c\u6210\u65e5\u6642\", nullable = false)\n    private LocalDateTime createdAt;\n\n    @Column(name = \"\u66f4\u65b0\u65e5\u6642\", nullable = false)\n    private LocalDateTime updatedAt;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumns({\n        @JoinColumn(name = \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", referencedColumnName = \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", insertable = false, updatable = false),\n        @JoinColumn(name = \"\u4ed5\u8a33\u884c\u756a\u53f7\", referencedColumnName = \"\u4ed5\u8a33\u884c\u756a\u53f7\", insertable = false, updatable = false)\n    })\n    private JournalDetail journalDetail;\n\n    @Transient\n    public JournalDebitCreditType getDebitCreditType() {\n        return id != null ? id.getDebitCreditType() : null;\n    }\n\n    @PrePersist\n    protected void onCreate() {\n        createdAt = LocalDateTime.now();\n        updatedAt = LocalDateTime.now();\n    }\n\n    @PreUpdate\n    protected void onUpdate() {\n        updatedAt = LocalDateTime.now();\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter16-orm/#164-attributeconverter","title":"16.4 AttributeConverter \u306e\u5b9f\u88c5","text":"JournalVoucherTypeConverter.java <pre><code>package com.example.accounting.infrastructure.persistence.converter;\n\nimport com.example.accounting.domain.model.journal.JournalVoucherType;\nimport jakarta.persistence.AttributeConverter;\nimport jakarta.persistence.Converter;\n\n@Converter(autoApply = true)\npublic class JournalVoucherTypeConverter implements AttributeConverter&lt;JournalVoucherType, String&gt; {\n\n    @Override\n    public String convertToDatabaseColumn(JournalVoucherType attribute) {\n        return attribute != null ? attribute.getDisplayName() : null;\n    }\n\n    @Override\n    public JournalVoucherType convertToEntityAttribute(String dbData) {\n        return dbData != null ? JournalVoucherType.fromDisplayName(dbData) : null;\n    }\n}\n</code></pre> JournalDebitCreditTypeConverter.java <pre><code>package com.example.accounting.infrastructure.persistence.converter;\n\nimport com.example.accounting.domain.model.journal.JournalDebitCreditType;\nimport jakarta.persistence.AttributeConverter;\nimport jakarta.persistence.Converter;\n\n@Converter(autoApply = true)\npublic class JournalDebitCreditTypeConverter implements AttributeConverter&lt;JournalDebitCreditType, String&gt; {\n\n    @Override\n    public String convertToDatabaseColumn(JournalDebitCreditType attribute) {\n        return attribute != null ? attribute.getDisplayName() : null;\n    }\n\n    @Override\n    public JournalDebitCreditType convertToEntityAttribute(String dbData) {\n        return dbData != null ? JournalDebitCreditType.fromDisplayName(dbData) : null;\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter16-orm/#165-tdd","title":"16.5 TDD \u306b\u3088\u308b\u4ed5\u8a33\u306e\u5b9f\u88c5","text":""},{"location":"article/part3-orm/chapter16-orm/#_4","title":"\u30c6\u30b9\u30c8\u30af\u30e9\u30b9","text":"JournalRepositoryTest.java <pre><code>package com.example.accounting.infrastructure.persistence.repository;\n\nimport com.example.accounting.application.port.out.JournalRepository;\nimport com.example.accounting.domain.model.journal.*;\nimport com.example.accounting.testsetup.BaseIntegrationTest;\nimport org.junit.jupiter.api.*;\nimport org.springframework.beans.factory.annotation.Autowired;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\n\nimport static org.assertj.core.api.Assertions.*;\n\n@DisplayName(\"\u4ed5\u8a33\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30c6\u30b9\u30c8\")\nclass JournalRepositoryTest extends BaseIntegrationTest {\n\n    @Autowired\n    private JournalRepository journalRepository;\n\n    @BeforeEach\n    void setUp() {\n        journalRepository.deleteAll();\n    }\n\n    @Nested\n    @DisplayName(\"\u4ed5\u8a33\u306e\u767b\u9332\")\n    class JournalInsertTest {\n\n        @Test\n        @DisplayName(\"\u5358\u7d14\u4ed5\u8a33\uff081\u884c\u501f\u65b9\u30fb1\u884c\u8cb8\u65b9\uff09\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void shouldInsertSimpleJournal() {\n            // Given: \u73fe\u91d1\u58f2\u4e0a\u306e\u4ed5\u8a33\u30c7\u30fc\u30bf\n            var journal = createSimpleSalesJournal(\"J0001\");\n\n            // When: \u4ed5\u8a33\u3092\u767b\u9332\n            journalRepository.save(journal);\n\n            // Then: \u767b\u9332\u3055\u308c\u305f\u30c7\u30fc\u30bf\u3092\u78ba\u8a8d\n            var savedJournal = journalRepository.findByVoucherNumber(\"J0001\");\n            assertThat(savedJournal).isPresent();\n            assertThat(savedJournal.get().getPostingDate()).isEqualTo(LocalDate.of(2024, 4, 1));\n            assertThat(savedJournal.get().isBalanced()).isTrue();\n        }\n\n        @Test\n        @DisplayName(\"\u8907\u5408\u4ed5\u8a33\uff08\u8907\u6570\u884c\uff09\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void shouldInsertCompoundJournal() {\n            // Given: \u58f2\u639b\u91d1\u56de\u53ce\u306e\u8907\u5408\u4ed5\u8a33\n            var journal = createCompoundJournal(\"J0002\");\n\n            // When: \u4ed5\u8a33\u3092\u767b\u9332\n            journalRepository.save(journal);\n\n            // Then: \u767b\u9332\u3055\u308c\u305f\u30c7\u30fc\u30bf\u3092\u78ba\u8a8d\n            var savedJournal = journalRepository.findByVoucherNumber(\"J0002\");\n            assertThat(savedJournal).isPresent();\n            assertThat(savedJournal.get().getDetails()).hasSize(2);\n            assertThat(savedJournal.get().isBalanced()).isTrue();\n        }\n\n        @Test\n        @DisplayName(\"\u8cb8\u501f\u304c\u4e00\u81f4\u3057\u306a\u3044\u4ed5\u8a33\u306f\u30d0\u30e9\u30f3\u30b9\u30c1\u30a7\u30c3\u30af\u3067false\u3092\u8fd4\u3059\")\n        void shouldReturnFalseForUnbalancedJournal() {\n            // Given: \u8cb8\u501f\u4e0d\u4e00\u81f4\u306e\u4ed5\u8a33\u30c7\u30fc\u30bf\n            var journal = createUnbalancedJournal(\"J0003\");\n\n            // When &amp; Then: \u30d0\u30e9\u30f3\u30b9\u30c1\u30a7\u30c3\u30af\n            assertThat(journal.isBalanced()).isFalse();\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u4ed5\u8a33\u306e\u691c\u7d22\")\n    class JournalSearchTest {\n\n        @BeforeEach\n        void setUpData() {\n            journalRepository.save(createSimpleSalesJournal(\"J0001\"));\n            journalRepository.save(createSimpleSalesJournal(\"J0002\"));\n        }\n\n        @Test\n        @DisplayName(\"\u8d77\u7968\u65e5\u7bc4\u56f2\u3067\u4ed5\u8a33\u3092\u691c\u7d22\u3067\u304d\u308b\")\n        void shouldFindJournalsByDateRange() {\n            // When: \u65e5\u4ed8\u7bc4\u56f2\u3067\u691c\u7d22\n            var journals = journalRepository.findByPostingDateBetween(\n                LocalDate.of(2024, 4, 1),\n                LocalDate.of(2024, 4, 30)\n            );\n\n            // Then: \u8a72\u5f53\u3059\u308b\u4ed5\u8a33\u304c\u8fd4\u3055\u308c\u308b\n            assertThat(journals).hasSize(2);\n        }\n\n        @Test\n        @DisplayName(\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\u3067\u4ed5\u8a33\u3092\u691c\u7d22\u3067\u304d\u308b\")\n        void shouldFindJournalsByAccountCode() {\n            // When: \u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\u3067\u691c\u7d22\n            var journals = journalRepository.findByAccountCode(\"11110\");\n\n            // Then: \u8a72\u5f53\u3059\u308b\u4ed5\u8a33\u304c\u8fd4\u3055\u308c\u308b\n            assertThat(journals).hasSize(2);\n        }\n    }\n\n    // \u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u4f5c\u6210\u30e1\u30bd\u30c3\u30c9\n    private Journal createSimpleSalesJournal(String voucherNumber) {\n        var journal = Journal.builder()\n            .journalVoucherNumber(voucherNumber)\n            .postingDate(LocalDate.of(2024, 4, 1))\n            .entryDate(LocalDate.now())\n            .voucherType(JournalVoucherType.NORMAL)\n            .build();\n\n        var detailId = JournalDetailId.builder()\n            .journalVoucherNumber(voucherNumber)\n            .lineNumber(1)\n            .build();\n\n        var journalDetail = JournalDetail.builder()\n            .id(detailId)\n            .lineSummary(\"\u73fe\u91d1\u58f2\u4e0a\")\n            .build();\n\n        var debitId = JournalDebitCreditDetailId.builder()\n            .journalVoucherNumber(voucherNumber)\n            .lineNumber(1)\n            .debitCreditType(JournalDebitCreditType.DEBIT)\n            .build();\n\n        var debitDetail = JournalDebitCreditDetail.builder()\n            .id(debitId)\n            .accountCode(\"11110\")\n            .amount(new BigDecimal(\"100000\"))\n            .build();\n\n        var creditId = JournalDebitCreditDetailId.builder()\n            .journalVoucherNumber(voucherNumber)\n            .lineNumber(1)\n            .debitCreditType(JournalDebitCreditType.CREDIT)\n            .build();\n\n        var creditDetail = JournalDebitCreditDetail.builder()\n            .id(creditId)\n            .accountCode(\"41100\")\n            .amount(new BigDecimal(\"100000\"))\n            .build();\n\n        journalDetail.addDebitCreditDetail(debitDetail);\n        journalDetail.addDebitCreditDetail(creditDetail);\n        journal.addDetail(journalDetail);\n\n        return journal;\n    }\n\n    private Journal createCompoundJournal(String voucherNumber) {\n        // \u7701\u7565\uff08part-3.md \u3068\u540c\u69d8\u306e\u5b9f\u88c5\uff09\n        return Journal.builder().journalVoucherNumber(voucherNumber).build();\n    }\n\n    private Journal createUnbalancedJournal(String voucherNumber) {\n        // \u7701\u7565\uff08part-3.md \u3068\u540c\u69d8\u306e\u5b9f\u88c5\uff09\n        return Journal.builder().journalVoucherNumber(voucherNumber).build();\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter16-orm/#166-spring-data-jpa-repository","title":"16.6 Spring Data JPA Repository","text":""},{"location":"article/part3-orm/chapter16-orm/#repository-output-port","title":"Repository \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff08Output Port\uff09","text":"JournalRepository.java <pre><code>package com.example.accounting.application.port.out;\n\nimport com.example.accounting.domain.model.journal.Journal;\n\nimport java.time.LocalDate;\nimport java.util.List;\nimport java.util.Optional;\n\npublic interface JournalRepository {\n    void save(Journal journal);\n    Optional&lt;Journal&gt; findByVoucherNumber(String voucherNumber);\n    List&lt;Journal&gt; findByPostingDateBetween(LocalDate fromDate, LocalDate toDate);\n    List&lt;Journal&gt; findByAccountCode(String accountCode);\n    List&lt;Journal&gt; findByDepartmentCode(String departmentCode);\n    void delete(String voucherNumber);\n    void deleteAll();\n}\n</code></pre>"},{"location":"article/part3-orm/chapter16-orm/#jparepository","title":"JpaRepository","text":"JournalJpaRepository.java <pre><code>package com.example.accounting.infrastructure.persistence.repository;\n\nimport com.example.accounting.domain.model.journal.Journal;\nimport org.springframework.data.jpa.repository.EntityGraph;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.jpa.repository.Modifying;\nimport org.springframework.data.jpa.repository.Query;\nimport org.springframework.data.repository.query.Param;\nimport org.springframework.stereotype.Repository;\n\nimport java.time.LocalDate;\nimport java.util.List;\nimport java.util.Optional;\n\n@Repository\npublic interface JournalJpaRepository extends JpaRepository&lt;Journal, String&gt; {\n\n    @EntityGraph(value = \"Journal.withAllDetails\")\n    Optional&lt;Journal&gt; findByJournalVoucherNumber(String voucherNumber);\n\n    @EntityGraph(value = \"Journal.withAllDetails\")\n    List&lt;Journal&gt; findByPostingDateBetween(LocalDate fromDate, LocalDate toDate);\n\n    @Query(\"SELECT DISTINCT j FROM Journal j \" +\n           \"JOIN j.details d \" +\n           \"JOIN d.debitCreditDetails dc \" +\n           \"WHERE dc.accountCode = :accountCode\")\n    @EntityGraph(value = \"Journal.withAllDetails\")\n    List&lt;Journal&gt; findByAccountCode(@Param(\"accountCode\") String accountCode);\n\n    @EntityGraph(value = \"Journal.withAllDetails\")\n    List&lt;Journal&gt; findByDepartmentCode(String departmentCode);\n\n    @Modifying\n    @Query(value = \"TRUNCATE TABLE \\\"\u4ed5\u8a33\\\" CASCADE\", nativeQuery = true)\n    void truncateTable();\n}\n</code></pre>"},{"location":"article/part3-orm/chapter16-orm/#167-n1","title":"16.7 N+1 \u554f\u984c\u3078\u306e\u5bfe\u7b56","text":""},{"location":"article/part3-orm/chapter16-orm/#entitygraph","title":"@EntityGraph \u306b\u3088\u308b\u4e00\u62ec\u53d6\u5f97","text":"<p>JPA \u3067\u306f <code>@EntityGraph</code> \u3092\u4f7f\u3063\u3066\u95a2\u9023\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u4e00\u62ec\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part3-orm/chapter16-orm/#named-entitygraph","title":"Named EntityGraph \u306e\u5b9a\u7fa9","text":"<pre><code>@Entity\n@Table(name = \"\u4ed5\u8a33\")\n@NamedEntityGraphs({\n    @NamedEntityGraph(\n        name = \"Journal.withAllDetails\",\n        attributeNodes = {\n            @NamedAttributeNode(value = \"details\", subgraph = \"details-subgraph\")\n        },\n        subgraphs = {\n            @NamedSubgraph(\n                name = \"details-subgraph\",\n                attributeNodes = {\n                    @NamedAttributeNode(\"debitCreditDetails\")\n                }\n            )\n        }\n    )\n})\npublic class Journal {\n    // ...\n}\n</code></pre>"},{"location":"article/part3-orm/chapter16-orm/#168","title":"16.8 \u697d\u89b3\u30ed\u30c3\u30af\u306e\u5b9f\u88c5","text":"<p>JPA \u3067\u306f <code>@Version</code> \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u697d\u89b3\u30ed\u30c3\u30af\u3092\u7c21\u5358\u306b\u5b9f\u88c5\u3067\u304d\u307e\u3059\u3002</p> <pre><code>@Entity\n@Table(name = \"\u4ed5\u8a33\")\npublic class Journal {\n\n    @Version\n    @Column(name = \"\u30d0\u30fc\u30b8\u30e7\u30f3\")\n    private Integer version;\n\n    // ...\n}\n</code></pre>"},{"location":"article/part3-orm/chapter16-orm/#_5","title":"\u697d\u89b3\u30ed\u30c3\u30af\u306e\u52d5\u4f5c","text":"<ol> <li>\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u53d6\u5f97\u6642\u306b\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7\u3092\u4fdd\u6301</li> <li>UPDATE \u6642\u306b <code>WHERE \u30d0\u30fc\u30b8\u30e7\u30f3 = :currentVersion</code> \u6761\u4ef6\u4ed8\u304d</li> <li>\u30d0\u30fc\u30b8\u30e7\u30f3\u4e0d\u4e00\u81f4\u306a\u3089 <code>ObjectOptimisticLockingFailureException</code> \u3092\u30b9\u30ed\u30fc</li> <li>\u6210\u529f\u6642\u306f\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u81ea\u52d5\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8</li> </ol>"},{"location":"article/part3-orm/chapter16-orm/#169","title":"16.9 \u4ed5\u8a33\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":"JournalService.java <pre><code>package com.example.accounting.application.service;\n\nimport com.example.accounting.application.port.out.JournalRepository;\nimport com.example.accounting.domain.model.journal.*;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.time.LocalDate;\nimport java.util.List;\n\n@Service\n@RequiredArgsConstructor\npublic class JournalService {\n\n    private final JournalRepository journalRepository;\n\n    /**\n     * \u4ed5\u8a33\u3092\u767b\u9332\u3059\u308b\n     */\n    @Transactional\n    public void registerJournal(Journal journal) {\n        if (!journal.isBalanced()) {\n            throw new IllegalArgumentException(\n                \"\u4ed5\u8a33\u306e\u8cb8\u501f\u304c\u4e00\u81f4\u3057\u307e\u305b\u3093: \" + journal.getJournalVoucherNumber()\n            );\n        }\n        journalRepository.save(journal);\n    }\n\n    /**\n     * \u4ed5\u8a33\u3092\u53d6\u5f97\u3059\u308b\n     */\n    @Transactional(readOnly = true)\n    public Journal getJournal(String voucherNumber) {\n        return journalRepository.findByVoucherNumber(voucherNumber)\n            .orElseThrow(() -&gt; new IllegalArgumentException(\n                \"\u4ed5\u8a33\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + voucherNumber\n            ));\n    }\n\n    /**\n     * \u671f\u9593\u6307\u5b9a\u3067\u4ed5\u8a33\u3092\u691c\u7d22\u3059\u308b\n     */\n    @Transactional(readOnly = true)\n    public List&lt;Journal&gt; findJournalsByDateRange(LocalDate fromDate, LocalDate toDate) {\n        return journalRepository.findByPostingDateBetween(fromDate, toDate);\n    }\n\n    /**\n     * \u4ed5\u8a33\u3092\u53d6\u6d88\u3059\u308b\uff08\u8d64\u4f1d\u51e6\u7406\uff09\n     */\n    @Transactional\n    public String cancelJournal(String voucherNumber) {\n        var original = getJournal(voucherNumber);\n        var redSlip = createRedSlip(original);\n        journalRepository.save(redSlip);\n        return redSlip.getJournalVoucherNumber();\n    }\n\n    private Journal createRedSlip(Journal original) {\n        // \u501f\u65b9\u30fb\u8cb8\u65b9\u3092\u53cd\u8ee2\u3057\u305f\u8d64\u4f1d\u3092\u4f5c\u6210\n        // ...\n        return Journal.builder().build();\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter16-orm/#1610-mybatis","title":"16.10 MyBatis \u7248\u3068\u306e\u6bd4\u8f03","text":"\u89b3\u70b9 MyBatis \u7248 JPA \u7248 \u89aa\u5b50\u95a2\u4fc2 \u500b\u5225\u306b INSERT/SELECT <code>@OneToMany</code> \u3067\u81ea\u52d5\u7ba1\u7406 \u8907\u5408\u4e3b\u30ad\u30fc XML \u3067\u500b\u5225\u6307\u5b9a <code>@EmbeddedId</code> N+1 \u5bfe\u7b56 JOIN \u3092\u660e\u793a\u7684\u306b\u8a18\u8ff0 <code>@EntityGraph</code> \u30ab\u30b9\u30b1\u30fc\u30c9 \u624b\u52d5\u5b9f\u88c5 <code>CascadeType.ALL</code> \u697d\u89b3\u30ed\u30c3\u30af \u624b\u52d5\u5b9f\u88c5 <code>@Version</code>"},{"location":"article/part3-orm/chapter16-orm/#16","title":"\u7b2c16\u7ae0\u306e\u307e\u3068\u3081","text":""},{"location":"article/part3-orm/chapter16-orm/#_6","title":"\u4f5c\u6210\u3057\u305f\u30c6\u30fc\u30d6\u30eb","text":"\u30c6\u30fc\u30d6\u30eb\u540d \u8aac\u660e <code>\u4ed5\u8a33</code> \u4ed5\u8a33\u4f1d\u7968\u306e\u30d8\u30c3\u30c0\u60c5\u5831 <code>\u4ed5\u8a33\u660e\u7d30</code> \u4ed5\u8a33\u306e\u884c\u5358\u4f4d\u306e\u60c5\u5831 <code>\u4ed5\u8a33\u8cb8\u501f\u660e\u7d30</code> \u501f\u65b9\u30fb\u8cb8\u65b9\u306e\u8a73\u7d30\u60c5\u5831"},{"location":"article/part3-orm/chapter16-orm/#_7","title":"\u8a2d\u8a08\u306e\u30dd\u30a4\u30f3\u30c8","text":"<ol> <li>3\u5c64\u69cb\u9020\u306e\u4ed5\u8a33\u30c6\u30fc\u30d6\u30eb: \u4ed5\u8a33 \u2192 \u4ed5\u8a33\u660e\u7d30 \u2192 \u4ed5\u8a33\u8cb8\u501f\u660e\u7d30</li> <li>@EmbeddedId: \u8907\u5408\u4e3b\u30ad\u30fc\u306e\u7ba1\u7406</li> <li>@OneToMany / @ManyToOne: JPA \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u6d3b\u7528</li> <li>CascadeType.ALL: \u30ab\u30b9\u30b1\u30fc\u30c9\u64cd\u4f5c</li> <li>@EntityGraph: N+1 \u554f\u984c\u3078\u306e\u5bfe\u7b56</li> <li>@Version: \u697d\u89b3\u30ed\u30c3\u30af\u306e\u5b9f\u88c5</li> <li>isBalanced(): \u8cb8\u501f\u4e00\u81f4\u306e\u539f\u5247\u3092\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3067\u8868\u73fe</li> </ol>"},{"location":"article/part3-orm/chapter16-orm/#_8","title":"\u6b21\u7ae0\u306e\u4e88\u544a","text":"<p>\u7b2c17\u7ae0\u3067\u306f\u3001\u81ea\u52d5\u4ed5\u8a33\u306e\u8a2d\u8a08\u306b\u9032\u307f\u307e\u3059\u3002\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u304b\u3089\u306e\u58f2\u4e0a\u30c7\u30fc\u30bf\u3092\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u4ed5\u8a33\u30c7\u30fc\u30bf\u3078\u81ea\u52d5\u5909\u63db\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf\u306e\u8a2d\u8a08\u3068\u3001\u30d5\u30e9\u30b0\u7ba1\u7406\u65b9\u5f0f\u30fb\u65e5\u4ed8\u7ba1\u7406\u65b9\u5f0f\u306b\u3088\u308b\u30c7\u30fc\u30bf\u9023\u643a\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002</p>"},{"location":"article/part3-orm/chapter17-orm/","title":"\u7b2c17\u7ae0\uff1a\u81ea\u52d5\u4ed5\u8a33\u306e\u8a2d\u8a08\uff08ORM\u7248\uff09","text":"<p>\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306a\u3069\u306e\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u304b\u3089\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u3078\u306e\u81ea\u52d5\u4ed5\u8a33\u51e6\u7406\u3092 TDD \u3067\u8a2d\u8a08\u3057\u3066\u3044\u304d\u307e\u3059\u3002\u58f2\u4e0a\u30c7\u30fc\u30bf\u304b\u3089\u4ed5\u8a33\u30c7\u30fc\u30bf\u3078\u306e\u81ea\u52d5\u5909\u63db\u30eb\u30fc\u30eb\u3068\u3001\u52b9\u7387\u7684\u306a\u30d0\u30c3\u30c1\u51e6\u7406\u306e\u8a2d\u8a08\u3092\u884c\u3044\u307e\u3059\u3002</p> <p>JPA \u7248\u3067\u306f\u3001@Entity \u306b\u3088\u308b\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u5b9a\u7fa9\u3001@EntityGraph \u306b\u3088\u308b N+1 \u554f\u984c\u5bfe\u7b56\u3001Spring Data JPA Specification \u306b\u3088\u308b\u52d5\u7684\u30af\u30a8\u30ea\u3092\u6d3b\u7528\u3057\u307e\u3059\u3002</p>"},{"location":"article/part3-orm/chapter17-orm/#171","title":"17.1 \u81ea\u52d5\u4ed5\u8a33\u306e\u6982\u8981","text":""},{"location":"article/part3-orm/chapter17-orm/#_1","title":"\u81ea\u52d5\u4ed5\u8a33\u3068\u306f","text":"<p>\u81ea\u52d5\u4ed5\u8a33\u306f\u3001\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u306e\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u3092\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u4ed5\u8a33\u30c7\u30fc\u30bf\u3078\u81ea\u52d5\u7684\u306b\u5909\u63db\u3059\u308b\u6a5f\u80fd\u3067\u3059\u3002</p>"},{"location":"article/part3-orm/chapter17-orm/#_2","title":"\u5f93\u6765\u306e\u30a2\u30ca\u30ed\u30b0\u9023\u643a\uff08\u624b\u5165\u529b\u306b\u3088\u308b\u9023\u643a\uff09","text":"<p>\u5f93\u6765\u306e\u65b9\u5f0f\u3067\u306f\u3001\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3067\u767a\u884c\u3057\u305f\u58f2\u4e0a\u4f1d\u7968\u3092\u7d19\u3067\u7d4c\u7406\u90e8\u9580\u306b\u56de\u9001\u3057\u3001\u7d4c\u7406\u62c5\u5f53\u8005\u304c\u4ed5\u8a33\u5165\u529b\u3092\u884c\u3063\u3066\u3044\u307e\u3057\u305f\u3002</p> <p></p> <p>\u30a2\u30ca\u30ed\u30b0\u9023\u643a\u306e\u554f\u984c\u70b9\uff1a</p> \u554f\u984c \u8aac\u660e \u4e8c\u91cd\u5165\u529b \u55b6\u696d\u90e8\u9580\u3068\u7d4c\u7406\u90e8\u9580\u3067\u540c\u3058\u60c5\u5831\u3092\u5165\u529b\u3059\u308b\u4f5c\u696d\u8ca0\u8377 \u5165\u529b\u30df\u30b9 \u624b\u5165\u529b\u306b\u3088\u308b\u30c7\u30fc\u30bf\u4e0d\u6574\u5408 \u30bf\u30a4\u30e0\u30e9\u30b0 \u7d19\u4f1d\u7968\u306e\u56de\u9001\u306b\u3088\u308b\u60c5\u5831\u9045\u5ef6 \u6d88\u8cbb\u7a0e\u8a08\u7b97\u30df\u30b9 \u624b\u8a08\u7b97\u306b\u3088\u308b\u8aa4\u308a \u52d8\u5b9a\u79d1\u76ee\u9078\u629e\u30df\u30b9 \u62c5\u5f53\u8005\u306e\u5224\u65ad\u3070\u3089\u3064\u304d"},{"location":"article/part3-orm/chapter17-orm/#_3","title":"\u81ea\u52d5\u4ed5\u8a33\u306b\u3088\u308b\u30c7\u30b8\u30bf\u30eb\u9023\u643a","text":"<p>\u81ea\u52d5\u4ed5\u8a33\u51e6\u7406\u3092\u5c0e\u5165\u3059\u308b\u3053\u3068\u3067\u3001\u58f2\u4e0a\u30c7\u30fc\u30bf\u304b\u3089\u4ed5\u8a33\u30c7\u30fc\u30bf\u3078\u306e\u5909\u63db\u3092\u81ea\u52d5\u5316\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part3-orm/chapter17-orm/#_4","title":"\u81ea\u52d5\u4ed5\u8a33\u51e6\u7406\u306e\u6d41\u308c","text":""},{"location":"article/part3-orm/chapter17-orm/#_5","title":"\u58f2\u4e0a\u4f1d\u7968\u304b\u3089\u4ed5\u8a33\u4f1d\u7968\u3078\u306e\u5909\u63db\u4f8b","text":""},{"location":"article/part3-orm/chapter17-orm/#_6","title":"\u58f2\u4e0a\u4f1d\u7968\uff08\u30d3\u30b8\u30cd\u30b9\u4e0a\u306e\u4e8b\u5b9f\uff09","text":"\u9805\u76ee \u5024 \u4f1d\u7968\u65e5\u4ed8 2024/04/01 \u9867\u5ba2 DBM\u30d5\u30fc\u30c9\u65b0\u5bbf \u660e\u7d301 \u3044\u3061\u3054\u84b8\u7f36 1,000\u500b \u00d7 1,000\u5186 = 1,000,000\u5186 \u660e\u7d302 \u30a2\u30b9\u30d1\u30e9 200\u500b \u00d7 10,000\u5186 = 2,000,000\u5186 \u660e\u7d303 \u3055\u3056\u3048\u306e\u30a8\u30b9\u30ab\u30eb\u30b4 1,500\u500b \u00d7 100\u5186 = 150,000\u5186 \u5408\u8a08 3,150,000\u5186\uff08\u7a0e\u629c\uff09+ \u6d88\u8cbb\u7a0e 315,000\u5186 = 3,465,000\u5186\uff08\u7a0e\u8fbc\uff09"},{"location":"article/part3-orm/chapter17-orm/#_7","title":"\u4ed5\u8a33\u4f1d\u7968\uff08\u4f1a\u8a08\u4e0a\u306e\u8a18\u9332\uff09","text":"\u501f\u65b9\u79d1\u76ee \u501f\u65b9\u91d1\u984d \u8cb8\u65b9\u79d1\u76ee \u8cb8\u65b9\u91d1\u984d \u6458\u8981 \u58f2\u639b\u91d1/DBM\u30d5\u30fc\u30c9\u672c\u793e 3,465,000 \u58f2\u4e0a\u8a08\u4e0a \u58f2\u4e0a\u52a0\u5de5\u54c1/DBM\u30d5\u30fc\u30c9\u65b0\u5bbf 1,150,000 \u3044\u3061\u3054\u84b8\u7f36\u30fb\u3055\u3056\u3048 \u58f2\u4e0a\u751f\u9bae\u54c1/DBM\u30d5\u30fc\u30c9\u65b0\u5bbf 2,000,000 \u30a2\u30b9\u30d1\u30e9 \u4eee\u53d7\u6d88\u8cbb\u7a0e 315,000 \u6d88\u8cbb\u7a0e10%"},{"location":"article/part3-orm/chapter17-orm/#172","title":"17.2 \u81ea\u52d5\u4ed5\u8a33\u30c6\u30fc\u30d6\u30eb\u306e\u8a2d\u8a08","text":""},{"location":"article/part3-orm/chapter17-orm/#_8","title":"\u30d5\u30e9\u30b0\u7ba1\u7406\u65b9\u5f0f\u3068\u65e5\u4ed8\u7ba1\u7406\u65b9\u5f0f","text":"<p>\u58f2\u4e0a\u30c7\u30fc\u30bf\u306e\u51e6\u7406\u72b6\u614b\u3092\u7ba1\u7406\u3059\u308b\u65b9\u5f0f\u306b\u306f\u30012\u3064\u306e\u30a2\u30d7\u30ed\u30fc\u30c1\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"article/part3-orm/chapter17-orm/#_9","title":"\u30d5\u30e9\u30b0\u7ba1\u7406\u65b9\u5f0f","text":"<ul> <li>\u30e1\u30ea\u30c3\u30c8\uff1a\u30b7\u30f3\u30d7\u30eb\u306a\u5b9f\u88c5\u3001\u51e6\u7406\u72b6\u614b\u304c\u660e\u78ba</li> <li>\u30c7\u30e1\u30ea\u30c3\u30c8\uff1a\u518d\u51e6\u7406\u6642\u306b\u30d5\u30e9\u30b0\u30ea\u30bb\u30c3\u30c8\u304c\u5fc5\u8981\u3001\u5927\u91cf\u30c7\u30fc\u30bf\u3067\u306e\u66f4\u65b0\u8ca0\u8377</li> </ul>"},{"location":"article/part3-orm/chapter17-orm/#_10","title":"\u65e5\u4ed8\u7ba1\u7406\u65b9\u5f0f","text":"<ul> <li>\u30e1\u30ea\u30c3\u30c8\uff1a\u5dee\u5206\u51e6\u7406\u304c\u5bb9\u6613\u3001\u518d\u51e6\u7406\u6642\u306e\u67d4\u8edf\u6027</li> <li>\u30c7\u30e1\u30ea\u30c3\u30c8\uff1a\u7ba1\u7406\u30c6\u30fc\u30d6\u30eb\u304c\u5fc5\u8981\u3001\u66f4\u65b0\u65e5\u6642\u306e\u6574\u5408\u6027\u7ba1\u7406\u304c\u5fc5\u8981</li> </ul>"},{"location":"article/part3-orm/chapter17-orm/#_11","title":"\u30bb\u30c3\u30c8\u4e2d\u5fc3\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8a2d\u8a08","text":"<p>\u5927\u91cf\u30c7\u30fc\u30bf\u3092\u52b9\u7387\u7684\u306b\u51e6\u7406\u3059\u308b\u306b\u306f\u3001\u30eb\u30fc\u30d7\u51e6\u7406\u3088\u308a\u3082\u30bb\u30c3\u30c8\u4e2d\u5fc3\u51e6\u7406\u304c\u6709\u52b9\u3067\u3059\u3002</p> \u65b9\u5f0f \u51e6\u7406\u65b9\u6cd5 DB\u64cd\u4f5c\u56de\u6570 \u30eb\u30fc\u30d7\u51e6\u7406 \u58f2\u4e0a\u30c7\u30fc\u30bf\u30921\u4ef6\u305a\u3064\u8aad\u307f\u8fbc\u307f\u3001\u5404\u58f2\u4e0a\u306b\u5bfe\u3057\u3066\u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf\u3092\u691c\u7d22\u30011\u4ef6\u305a\u3064\u4ed5\u8a33\u30c7\u30fc\u30bf\u3092\u633f\u5165 N\u00d7M\u56de \u30bb\u30c3\u30c8\u4e2d\u5fc3\u51e6\u7406 \u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf\u30921\u4ef6\u8aad\u307f\u8fbc\u307f\u3001\u8a72\u5f53\u30d1\u30bf\u30fc\u30f3\u306e\u58f2\u4e0a\u30c7\u30fc\u30bf\u3092\u4e00\u62ecINSERT M\u56de\uff08\u30d1\u30bf\u30fc\u30f3\u6570\uff09"},{"location":"article/part3-orm/chapter17-orm/#er","title":"\u81ea\u52d5\u4ed5\u8a33\u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u306e ER \u56f3","text":""},{"location":"article/part3-orm/chapter17-orm/#173-mybatis","title":"17.3 MyBatis \u7248\u3068\u306e\u5b9f\u88c5\u6bd4\u8f03","text":""},{"location":"article/part3-orm/chapter17-orm/#_12","title":"\u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u5c64\u306e\u6bd4\u8f03","text":"\u6a5f\u80fd MyBatis \u7248 JPA \u7248 ENUM \u578b\u5909\u63db TypeHandler AttributeConverter \u95a2\u9023\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u53d6\u5f97 resultMap \u306e association @ManyToOne N+1 \u554f\u984c\u5bfe\u7b56 JOIN \u3092\u542b\u3080 SQL @EntityGraph \u52d5\u7684\u30af\u30a8\u30ea XML \u306e <code>&lt;if&gt;</code> \u30bf\u30b0 Specification \u30d1\u30bf\u30fc\u30f3 \u30d0\u30c3\u30c1 INSERT foreach \u53e5 saveAll() \u6709\u52b9\u671f\u9593\u691c\u7d22 WHERE \u53e5\u3067\u6761\u4ef6\u6307\u5b9a JPQL \u3067\u6761\u4ef6\u6307\u5b9a"},{"location":"article/part3-orm/chapter17-orm/#flyway","title":"Flyway \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3","text":"V007__create_auto_journal_tables.sql <pre><code>-- \u81ea\u52d5\u4ed5\u8a33\u51e6\u7406\u30b9\u30c6\u30fc\u30bf\u30b9\nCREATE TYPE \u81ea\u52d5\u4ed5\u8a33\u30b9\u30c6\u30fc\u30bf\u30b9 AS ENUM ('\u51e6\u7406\u5f85\u3061', '\u51e6\u7406\u4e2d', '\u51e6\u7406\u5b8c\u4e86', '\u8ee2\u8a18\u6e08', '\u30a8\u30e9\u30fc');\n\n-- \u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf\nCREATE TABLE \"\u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf\" (\n    \"\u30d1\u30bf\u30fc\u30f3\u30b3\u30fc\u30c9\" VARCHAR(10) PRIMARY KEY,\n    \"\u30d1\u30bf\u30fc\u30f3\u540d\" VARCHAR(50) NOT NULL,\n    \"\u5546\u54c1\u30b0\u30eb\u30fc\u30d7\" VARCHAR(10) DEFAULT 'ALL',\n    \"\u9867\u5ba2\u30b0\u30eb\u30fc\u30d7\" VARCHAR(10) DEFAULT 'ALL',\n    \"\u58f2\u4e0a\u533a\u5206\" VARCHAR(2) DEFAULT '01',\n    \"\u501f\u65b9\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(5) NOT NULL,\n    \"\u501f\u65b9\u88dc\u52a9\u79d1\u76ee\u8a2d\u5b9a\" VARCHAR(20),\n    \"\u8cb8\u65b9\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(5) NOT NULL,\n    \"\u8cb8\u65b9\u88dc\u52a9\u79d1\u76ee\u8a2d\u5b9a\" VARCHAR(20),\n    \"\u8fd4\u54c1\u6642\u501f\u65b9\u79d1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(5),\n    \"\u8fd4\u54c1\u6642\u8cb8\u65b9\u79d1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(5),\n    \"\u6d88\u8cbb\u7a0e\u51e6\u7406\u533a\u5206\" VARCHAR(2) DEFAULT '01',\n    \"\u6709\u52b9\u958b\u59cb\u65e5\" DATE DEFAULT CURRENT_DATE,\n    \"\u6709\u52b9\u7d42\u4e86\u65e5\" DATE DEFAULT '9999-12-31',\n    \"\u512a\u5148\u9806\u4f4d\" INTEGER DEFAULT 100,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"fk_\u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3_\u501f\u65b9\u79d1\u76ee\"\n        FOREIGN KEY (\"\u501f\u65b9\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\") REFERENCES \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\"(\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"fk_\u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3_\u8cb8\u65b9\u79d1\u76ee\"\n        FOREIGN KEY (\"\u8cb8\u65b9\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\") REFERENCES \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\"(\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\")\n);\n\n-- \u81ea\u52d5\u4ed5\u8a33\u30c7\u30fc\u30bf\nCREATE TABLE \"\u81ea\u52d5\u4ed5\u8a33\u30c7\u30fc\u30bf\" (\n    \"\u81ea\u52d5\u4ed5\u8a33\u756a\u53f7\" VARCHAR(15) PRIMARY KEY,\n    \"\u58f2\u4e0a\u756a\u53f7\" VARCHAR(10) NOT NULL,\n    \"\u58f2\u4e0a\u884c\u756a\u53f7\" SMALLINT NOT NULL,\n    \"\u30d1\u30bf\u30fc\u30f3\u30b3\u30fc\u30c9\" VARCHAR(10) NOT NULL,\n    \"\u8d77\u7968\u65e5\" DATE NOT NULL,\n    \"\u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206\" \u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206 NOT NULL,\n    \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(5) NOT NULL,\n    \"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(10),\n    \"\u90e8\u9580\u30b3\u30fc\u30c9\" VARCHAR(5),\n    \"\u4ed5\u8a33\u91d1\u984d\" DECIMAL(14,2) NOT NULL,\n    \"\u6d88\u8cbb\u7a0e\u984d\" DECIMAL(14,2) DEFAULT 0,\n    \"\u51e6\u7406\u30b9\u30c6\u30fc\u30bf\u30b9\" \u81ea\u52d5\u4ed5\u8a33\u30b9\u30c6\u30fc\u30bf\u30b9 DEFAULT '\u51e6\u7406\u5f85\u3061' NOT NULL,\n    \"\u8ee2\u8a18\u6e08\u30d5\u30e9\u30b0\" SMALLINT DEFAULT 0,\n    \"\u8ee2\u8a18\u65e5\" DATE,\n    \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\" VARCHAR(10),\n    \"\u30a8\u30e9\u30fc\u30b3\u30fc\u30c9\" VARCHAR(10),\n    \"\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\" VARCHAR(200),\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL\n);\n\n-- \u81ea\u52d5\u4ed5\u8a33\u51e6\u7406\u5c65\u6b74\nCREATE TABLE \"\u81ea\u52d5\u4ed5\u8a33\u51e6\u7406\u5c65\u6b74\" (\n    \"\u51e6\u7406\u756a\u53f7\" VARCHAR(15) PRIMARY KEY,\n    \"\u51e6\u7406\u65e5\u6642\" TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    \"\u51e6\u7406\u5bfe\u8c61\u958b\u59cb\u65e5\" DATE NOT NULL,\n    \"\u51e6\u7406\u5bfe\u8c61\u7d42\u4e86\u65e5\" DATE NOT NULL,\n    \"\u51e6\u7406\u4ef6\u6570\" INTEGER DEFAULT 0,\n    \"\u6210\u529f\u4ef6\u6570\" INTEGER DEFAULT 0,\n    \"\u30a8\u30e9\u30fc\u4ef6\u6570\" INTEGER DEFAULT 0,\n    \"\u51e6\u7406\u91d1\u984d\u5408\u8a08\" DECIMAL(15,2) DEFAULT 0,\n    \"\u51e6\u7406\u8005\" VARCHAR(50),\n    \"\u5099\u8003\" TEXT,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"idx_\u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3_\u512a\u5148\u9806\u4f4d\" ON \"\u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf\"(\"\u512a\u5148\u9806\u4f4d\");\nCREATE INDEX \"idx_\u81ea\u52d5\u4ed5\u8a33_\u58f2\u4e0a\u756a\u53f7\" ON \"\u81ea\u52d5\u4ed5\u8a33\u30c7\u30fc\u30bf\"(\"\u58f2\u4e0a\u756a\u53f7\");\nCREATE INDEX \"idx_\u81ea\u52d5\u4ed5\u8a33_\u51e6\u7406\u30b9\u30c6\u30fc\u30bf\u30b9\" ON \"\u81ea\u52d5\u4ed5\u8a33\u30c7\u30fc\u30bf\"(\"\u51e6\u7406\u30b9\u30c6\u30fc\u30bf\u30b9\");\nCREATE INDEX \"idx_\u81ea\u52d5\u4ed5\u8a33_\u8ee2\u8a18\u6e08\u30d5\u30e9\u30b0\" ON \"\u81ea\u52d5\u4ed5\u8a33\u30c7\u30fc\u30bf\"(\"\u8ee2\u8a18\u6e08\u30d5\u30e9\u30b0\");\n</code></pre>"},{"location":"article/part3-orm/chapter17-orm/#174-jpa","title":"17.4 JPA \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u5b9f\u88c5","text":""},{"location":"article/part3-orm/chapter17-orm/#enum-attributeconverter","title":"\u81ea\u52d5\u4ed5\u8a33\u30b9\u30c6\u30fc\u30bf\u30b9 Enum \u3068 AttributeConverter","text":"AutoJournalStatus.java <pre><code>package com.example.accounting.domain.model.autojournal;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum AutoJournalStatus {\n    PENDING(\"\u51e6\u7406\u5f85\u3061\"),\n    PROCESSING(\"\u51e6\u7406\u4e2d\"),\n    COMPLETED(\"\u51e6\u7406\u5b8c\u4e86\"),\n    POSTED(\"\u8ee2\u8a18\u6e08\"),\n    ERROR(\"\u30a8\u30e9\u30fc\");\n\n    private final String displayName;\n\n    public static AutoJournalStatus fromDisplayName(String displayName) {\n        for (AutoJournalStatus status : values()) {\n            if (status.displayName.equals(displayName)) {\n                return status;\n            }\n        }\n        throw new IllegalArgumentException(\"Unknown auto journal status: \" + displayName);\n    }\n}\n</code></pre> AutoJournalStatusConverter.java <pre><code>package com.example.accounting.infrastructure.persistence.converter;\n\nimport com.example.accounting.domain.model.autojournal.AutoJournalStatus;\nimport jakarta.persistence.AttributeConverter;\nimport jakarta.persistence.Converter;\n\n/**\n * \u81ea\u52d5\u4ed5\u8a33\u30b9\u30c6\u30fc\u30bf\u30b9 \u2194 PostgreSQL ENUM \u5909\u63db\n * JPA \u3067\u306f AttributeConverter \u3092\u4f7f\u7528\u3057\u3066 ENUM \u578b\u3092\u5909\u63db\u3059\u308b\n */\n@Converter(autoApply = true)\npublic class AutoJournalStatusConverter implements AttributeConverter&lt;AutoJournalStatus, String&gt; {\n\n    @Override\n    public String convertToDatabaseColumn(AutoJournalStatus attribute) {\n        return attribute != null ? attribute.getDisplayName() : null;\n    }\n\n    @Override\n    public AutoJournalStatus convertToEntityAttribute(String dbData) {\n        return dbData != null ? AutoJournalStatus.fromDisplayName(dbData) : null;\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter17-orm/#entity","title":"\u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf Entity","text":"AutoJournalPattern.java <pre><code>package com.example.accounting.domain.model.autojournal;\n\nimport com.example.accounting.domain.model.account.Account;\nimport jakarta.persistence.*;\nimport lombok.*;\n\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n/**\n * \u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf Entity\n *\n * JPA \u7248\u3067\u306f @ManyToOne \u3067\u52d8\u5b9a\u79d1\u76ee\u3068\u306e\u95a2\u9023\u3092\u5b9a\u7fa9\n * MyBatis \u7248\u3067\u306f resultMap \u3067\u624b\u52d5\u30de\u30c3\u30d4\u30f3\u30b0\u3057\u3066\u3044\u305f\u304c\u3001\n * JPA \u3067\u306f @JoinColumn \u3067\u5916\u90e8\u30ad\u30fc\u95a2\u9023\u3092\u81ea\u52d5\u7684\u306b\u89e3\u6c7a\n */\n@Entity\n@Table(name = \"\u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf\")\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class AutoJournalPattern {\n\n    @Id\n    @Column(name = \"\u30d1\u30bf\u30fc\u30f3\u30b3\u30fc\u30c9\", length = 10)\n    private String patternCode;\n\n    @Column(name = \"\u30d1\u30bf\u30fc\u30f3\u540d\", length = 50, nullable = false)\n    private String patternName;\n\n    @Column(name = \"\u5546\u54c1\u30b0\u30eb\u30fc\u30d7\", length = 10)\n    private String productGroup;\n\n    @Column(name = \"\u9867\u5ba2\u30b0\u30eb\u30fc\u30d7\", length = 10)\n    private String customerGroup;\n\n    @Column(name = \"\u58f2\u4e0a\u533a\u5206\", length = 2)\n    private String salesType;\n\n    /**\n     * \u501f\u65b9\u52d8\u5b9a\u79d1\u76ee\u3068\u306e\u95a2\u9023\n     * @ManyToOne \u3067\u9045\u5ef6\u30ed\u30fc\u30c9\uff08LAZY\uff09\u3092\u6307\u5b9a\n     * N+1 \u554f\u984c\u304c\u767a\u751f\u3059\u308b\u5834\u5408\u306f @EntityGraph \u3067\u5bfe\u7b56\n     */\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = \"\u501f\u65b9\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", referencedColumnName = \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\",\n                insertable = false, updatable = false)\n    private Account debitAccount;\n\n    @Column(name = \"\u501f\u65b9\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", length = 5, nullable = false)\n    private String debitAccountCode;\n\n    @Column(name = \"\u501f\u65b9\u88dc\u52a9\u79d1\u76ee\u8a2d\u5b9a\", length = 20)\n    private String debitSubAccountSetting;\n\n    /**\n     * \u8cb8\u65b9\u52d8\u5b9a\u79d1\u76ee\u3068\u306e\u95a2\u9023\n     */\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = \"\u8cb8\u65b9\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", referencedColumnName = \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\",\n                insertable = false, updatable = false)\n    private Account creditAccount;\n\n    @Column(name = \"\u8cb8\u65b9\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", length = 5, nullable = false)\n    private String creditAccountCode;\n\n    @Column(name = \"\u8cb8\u65b9\u88dc\u52a9\u79d1\u76ee\u8a2d\u5b9a\", length = 20)\n    private String creditSubAccountSetting;\n\n    @Column(name = \"\u8fd4\u54c1\u6642\u501f\u65b9\u79d1\u76ee\u30b3\u30fc\u30c9\", length = 5)\n    private String returnDebitAccountCode;\n\n    @Column(name = \"\u8fd4\u54c1\u6642\u8cb8\u65b9\u79d1\u76ee\u30b3\u30fc\u30c9\", length = 5)\n    private String returnCreditAccountCode;\n\n    @Column(name = \"\u6d88\u8cbb\u7a0e\u51e6\u7406\u533a\u5206\", length = 2)\n    private String taxProcessingType;\n\n    @Column(name = \"\u6709\u52b9\u958b\u59cb\u65e5\")\n    private LocalDate validFrom;\n\n    @Column(name = \"\u6709\u52b9\u7d42\u4e86\u65e5\")\n    private LocalDate validTo;\n\n    @Column(name = \"\u512a\u5148\u9806\u4f4d\")\n    private Integer priority;\n\n    @Column(name = \"\u4f5c\u6210\u65e5\u6642\", nullable = false, updatable = false)\n    private LocalDateTime createdAt;\n\n    @Column(name = \"\u66f4\u65b0\u65e5\u6642\", nullable = false)\n    private LocalDateTime updatedAt;\n\n    /**\n     * \u6307\u5b9a\u65e5\u4ed8\u306b\u6709\u52b9\u304b\u3069\u3046\u304b\u3092\u5224\u5b9a\n     */\n    public boolean isValidAt(LocalDate date) {\n        return !date.isBefore(validFrom) &amp;&amp; !date.isAfter(validTo);\n    }\n\n    /**\n     * \u5546\u54c1\u30b0\u30eb\u30fc\u30d7\u3068\u9867\u5ba2\u30b0\u30eb\u30fc\u30d7\u306b\u30de\u30c3\u30c1\u3059\u308b\u304b\u5224\u5b9a\n     */\n    public boolean matches(String productGroup, String customerGroup) {\n        boolean productMatch = \"ALL\".equals(this.productGroup) ||\n                               this.productGroup.equals(productGroup);\n        boolean customerMatch = \"ALL\".equals(this.customerGroup) ||\n                                this.customerGroup.equals(customerGroup);\n        return productMatch &amp;&amp; customerMatch;\n    }\n\n    @PrePersist\n    protected void onCreate() {\n        LocalDateTime now = LocalDateTime.now();\n        this.createdAt = now;\n        this.updatedAt = now;\n        if (this.validFrom == null) {\n            this.validFrom = LocalDate.now();\n        }\n        if (this.validTo == null) {\n            this.validTo = LocalDate.of(9999, 12, 31);\n        }\n        if (this.priority == null) {\n            this.priority = 100;\n        }\n    }\n\n    @PreUpdate\n    protected void onUpdate() {\n        this.updatedAt = LocalDateTime.now();\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter17-orm/#entity_1","title":"\u81ea\u52d5\u4ed5\u8a33\u30c7\u30fc\u30bf Entity","text":"AutoJournalEntry.java <pre><code>package com.example.accounting.domain.model.autojournal;\n\nimport com.example.accounting.domain.model.account.Account;\nimport com.example.accounting.domain.model.department.Department;\nimport com.example.accounting.domain.model.journal.DebitCreditType;\nimport com.example.accounting.infrastructure.persistence.converter.AutoJournalStatusConverter;\nimport com.example.accounting.infrastructure.persistence.converter.DebitCreditTypeConverter;\nimport jakarta.persistence.*;\nimport lombok.*;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n/**\n * \u81ea\u52d5\u4ed5\u8a33\u30c7\u30fc\u30bf Entity\n *\n * JPA \u7248\u3067\u306f @ManyToOne \u3067\u95a2\u9023\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u5b9a\u7fa9\n * \u72b6\u614b\u7ba1\u7406\u306b\u306f Enum + AttributeConverter \u3092\u4f7f\u7528\n */\n@Entity\n@Table(name = \"\u81ea\u52d5\u4ed5\u8a33\u30c7\u30fc\u30bf\")\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class AutoJournalEntry {\n\n    @Id\n    @Column(name = \"\u81ea\u52d5\u4ed5\u8a33\u756a\u53f7\", length = 15)\n    private String autoJournalNumber;\n\n    @Column(name = \"\u58f2\u4e0a\u756a\u53f7\", length = 10, nullable = false)\n    private String salesNumber;\n\n    @Column(name = \"\u58f2\u4e0a\u884c\u756a\u53f7\", nullable = false)\n    private Integer salesLineNumber;\n\n    /**\n     * \u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf\u3068\u306e\u95a2\u9023\n     */\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = \"\u30d1\u30bf\u30fc\u30f3\u30b3\u30fc\u30c9\", referencedColumnName = \"\u30d1\u30bf\u30fc\u30f3\u30b3\u30fc\u30c9\",\n                insertable = false, updatable = false)\n    private AutoJournalPattern pattern;\n\n    @Column(name = \"\u30d1\u30bf\u30fc\u30f3\u30b3\u30fc\u30c9\", length = 10, nullable = false)\n    private String patternCode;\n\n    @Column(name = \"\u8d77\u7968\u65e5\", nullable = false)\n    private LocalDate postingDate;\n\n    /**\n     * \u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206\n     * AttributeConverter \u3067 PostgreSQL ENUM \u3068 Java Enum \u3092\u5909\u63db\n     */\n    @Convert(converter = DebitCreditTypeConverter.class)\n    @Column(name = \"\u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206\", nullable = false, columnDefinition = \"\u4ed5\u8a33\u884c\u8cb8\u501f\u533a\u5206\")\n    private DebitCreditType debitCreditType;\n\n    /**\n     * \u52d8\u5b9a\u79d1\u76ee\u3068\u306e\u95a2\u9023\n     */\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", referencedColumnName = \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\",\n                insertable = false, updatable = false)\n    private Account account;\n\n    @Column(name = \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", length = 5, nullable = false)\n    private String accountCode;\n\n    @Column(name = \"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\", length = 10)\n    private String subAccountCode;\n\n    /**\n     * \u90e8\u9580\u3068\u306e\u95a2\u9023\n     */\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = \"\u90e8\u9580\u30b3\u30fc\u30c9\", referencedColumnName = \"\u90e8\u9580\u30b3\u30fc\u30c9\",\n                insertable = false, updatable = false)\n    private Department department;\n\n    @Column(name = \"\u90e8\u9580\u30b3\u30fc\u30c9\", length = 5)\n    private String departmentCode;\n\n    @Column(name = \"\u4ed5\u8a33\u91d1\u984d\", nullable = false, precision = 14, scale = 2)\n    private BigDecimal amount;\n\n    @Column(name = \"\u6d88\u8cbb\u7a0e\u984d\", precision = 14, scale = 2)\n    private BigDecimal taxAmount;\n\n    /**\n     * \u51e6\u7406\u30b9\u30c6\u30fc\u30bf\u30b9\n     * AttributeConverter \u3067 PostgreSQL ENUM \u3068 Java Enum \u3092\u5909\u63db\n     */\n    @Convert(converter = AutoJournalStatusConverter.class)\n    @Column(name = \"\u51e6\u7406\u30b9\u30c6\u30fc\u30bf\u30b9\", nullable = false, columnDefinition = \"\u81ea\u52d5\u4ed5\u8a33\u30b9\u30c6\u30fc\u30bf\u30b9\")\n    private AutoJournalStatus status;\n\n    @Column(name = \"\u8ee2\u8a18\u6e08\u30d5\u30e9\u30b0\")\n    private Boolean postedFlag;\n\n    @Column(name = \"\u8ee2\u8a18\u65e5\")\n    private LocalDate postedDate;\n\n    @Column(name = \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\", length = 10)\n    private String journalVoucherNumber;\n\n    @Column(name = \"\u30a8\u30e9\u30fc\u30b3\u30fc\u30c9\", length = 10)\n    private String errorCode;\n\n    @Column(name = \"\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\", length = 200)\n    private String errorMessage;\n\n    @Column(name = \"\u4f5c\u6210\u65e5\u6642\", nullable = false, updatable = false)\n    private LocalDateTime createdAt;\n\n    @Column(name = \"\u66f4\u65b0\u65e5\u6642\", nullable = false)\n    private LocalDateTime updatedAt;\n\n    @PrePersist\n    protected void onCreate() {\n        LocalDateTime now = LocalDateTime.now();\n        this.createdAt = now;\n        this.updatedAt = now;\n        if (this.status == null) {\n            this.status = AutoJournalStatus.PENDING;\n        }\n        if (this.postedFlag == null) {\n            this.postedFlag = false;\n        }\n        if (this.taxAmount == null) {\n            this.taxAmount = BigDecimal.ZERO;\n        }\n    }\n\n    @PreUpdate\n    protected void onUpdate() {\n        this.updatedAt = LocalDateTime.now();\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter17-orm/#entity_2","title":"\u81ea\u52d5\u4ed5\u8a33\u51e6\u7406\u5c65\u6b74 Entity","text":"AutoJournalHistory.java <pre><code>package com.example.accounting.domain.model.autojournal;\n\nimport jakarta.persistence.*;\nimport lombok.*;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n/**\n * \u81ea\u52d5\u4ed5\u8a33\u51e6\u7406\u5c65\u6b74 Entity\n */\n@Entity\n@Table(name = \"\u81ea\u52d5\u4ed5\u8a33\u51e6\u7406\u5c65\u6b74\")\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class AutoJournalHistory {\n\n    @Id\n    @Column(name = \"\u51e6\u7406\u756a\u53f7\", length = 15)\n    private String processNumber;\n\n    @Column(name = \"\u51e6\u7406\u65e5\u6642\", nullable = false)\n    private LocalDateTime processDateTime;\n\n    @Column(name = \"\u51e6\u7406\u5bfe\u8c61\u958b\u59cb\u65e5\", nullable = false)\n    private LocalDate targetFromDate;\n\n    @Column(name = \"\u51e6\u7406\u5bfe\u8c61\u7d42\u4e86\u65e5\", nullable = false)\n    private LocalDate targetToDate;\n\n    @Column(name = \"\u51e6\u7406\u4ef6\u6570\")\n    private Integer totalCount;\n\n    @Column(name = \"\u6210\u529f\u4ef6\u6570\")\n    private Integer successCount;\n\n    @Column(name = \"\u30a8\u30e9\u30fc\u4ef6\u6570\")\n    private Integer errorCount;\n\n    @Column(name = \"\u51e6\u7406\u91d1\u984d\u5408\u8a08\", precision = 15, scale = 2)\n    private BigDecimal totalAmount;\n\n    @Column(name = \"\u51e6\u7406\u8005\", length = 50)\n    private String processedBy;\n\n    @Column(name = \"\u5099\u8003\", columnDefinition = \"TEXT\")\n    private String remarks;\n\n    @Column(name = \"\u4f5c\u6210\u65e5\u6642\", nullable = false, updatable = false)\n    private LocalDateTime createdAt;\n\n    @PrePersist\n    protected void onCreate() {\n        this.createdAt = LocalDateTime.now();\n        if (this.totalCount == null) {\n            this.totalCount = 0;\n        }\n        if (this.successCount == null) {\n            this.successCount = 0;\n        }\n        if (this.errorCount == null) {\n            this.errorCount = 0;\n        }\n        if (this.totalAmount == null) {\n            this.totalAmount = BigDecimal.ZERO;\n        }\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter17-orm/#175-tdd","title":"17.5 TDD \u306b\u3088\u308b\u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1\u30f3\u30b0\u306e\u5b9f\u88c5","text":""},{"location":"article/part3-orm/chapter17-orm/#_13","title":"\u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1\u30f3\u30b0\u306e\u30c6\u30b9\u30c8","text":"AutoJournalPatternTest.java <pre><code>package com.example.accounting.domain.model.autojournal;\n\nimport org.junit.jupiter.api.DisplayName;\nimport org.junit.jupiter.api.Nested;\nimport org.junit.jupiter.api.Test;\n\nimport java.time.LocalDate;\n\nimport static org.assertj.core.api.Assertions.*;\n\n@DisplayName(\"\u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3\u306e\u30c6\u30b9\u30c8\")\nclass AutoJournalPatternTest {\n\n    @Nested\n    @DisplayName(\"\u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1\u30f3\u30b0\")\n    class PatternMatchingTest {\n\n        @Test\n        @DisplayName(\"\u5546\u54c1\u30b0\u30eb\u30fc\u30d7ALL\u306f\u5168\u3066\u306e\u5546\u54c1\u30b0\u30eb\u30fc\u30d7\u306b\u30de\u30c3\u30c1\u3059\u308b\")\n        void shouldMatchAllProductGroups() {\n            // Given: \u5546\u54c1\u30b0\u30eb\u30fc\u30d7ALL\u306e\u30d1\u30bf\u30fc\u30f3\n            var pattern = AutoJournalPattern.builder()\n                .patternCode(\"P001\")\n                .productGroup(\"ALL\")\n                .customerGroup(\"ALL\")\n                .build();\n\n            // When &amp; Then\n            assertThat(pattern.matches(\"\u52a0\u5de5\u54c1\", \"\u4e00\u822c\")).isTrue();\n            assertThat(pattern.matches(\"\u751f\u9bae\u54c1\", \"\u4e00\u822c\")).isTrue();\n            assertThat(pattern.matches(\"\u96d1\u8ca8\", \"\u7279\u7d04\u5e97\")).isTrue();\n        }\n\n        @Test\n        @DisplayName(\"\u7279\u5b9a\u306e\u5546\u54c1\u30b0\u30eb\u30fc\u30d7\u306e\u307f\u306b\u30de\u30c3\u30c1\u3059\u308b\")\n        void shouldMatchSpecificProductGroup() {\n            // Given: \u52a0\u5de5\u54c1\u5c02\u7528\u30d1\u30bf\u30fc\u30f3\n            var pattern = AutoJournalPattern.builder()\n                .patternCode(\"P002\")\n                .productGroup(\"\u52a0\u5de5\u54c1\")\n                .customerGroup(\"ALL\")\n                .build();\n\n            // When &amp; Then\n            assertThat(pattern.matches(\"\u52a0\u5de5\u54c1\", \"\u4e00\u822c\")).isTrue();\n            assertThat(pattern.matches(\"\u751f\u9bae\u54c1\", \"\u4e00\u822c\")).isFalse();\n        }\n\n        @Test\n        @DisplayName(\"\u5546\u54c1\u30b0\u30eb\u30fc\u30d7\u3068\u9867\u5ba2\u30b0\u30eb\u30fc\u30d7\u306e\u4e21\u65b9\u3067\u30de\u30c3\u30c1\u30f3\u30b0\u3059\u308b\")\n        void shouldMatchBothProductAndCustomerGroup() {\n            // Given: \u7279\u5b9a\u306e\u7d44\u307f\u5408\u308f\u305b\u30d1\u30bf\u30fc\u30f3\n            var pattern = AutoJournalPattern.builder()\n                .patternCode(\"P003\")\n                .productGroup(\"\u52a0\u5de5\u54c1\")\n                .customerGroup(\"\u7279\u7d04\u5e97\")\n                .build();\n\n            // When &amp; Then\n            assertThat(pattern.matches(\"\u52a0\u5de5\u54c1\", \"\u7279\u7d04\u5e97\")).isTrue();\n            assertThat(pattern.matches(\"\u52a0\u5de5\u54c1\", \"\u4e00\u822c\")).isFalse();\n            assertThat(pattern.matches(\"\u751f\u9bae\u54c1\", \"\u7279\u7d04\u5e97\")).isFalse();\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u6709\u52b9\u671f\u9593\u30c1\u30a7\u30c3\u30af\")\n    class ValidityCheckTest {\n\n        @Test\n        @DisplayName(\"\u6709\u52b9\u671f\u9593\u5185\u306e\u65e5\u4ed8\u3067true\u3092\u8fd4\u3059\")\n        void shouldReturnTrueForValidDate() {\n            // Given\n            var pattern = AutoJournalPattern.builder()\n                .patternCode(\"P001\")\n                .validFrom(LocalDate.of(2024, 1, 1))\n                .validTo(LocalDate.of(2024, 12, 31))\n                .build();\n\n            // When &amp; Then\n            assertThat(pattern.isValidAt(LocalDate.of(2024, 6, 15))).isTrue();\n            assertThat(pattern.isValidAt(LocalDate.of(2024, 1, 1))).isTrue();\n            assertThat(pattern.isValidAt(LocalDate.of(2024, 12, 31))).isTrue();\n        }\n\n        @Test\n        @DisplayName(\"\u6709\u52b9\u671f\u9593\u5916\u306e\u65e5\u4ed8\u3067false\u3092\u8fd4\u3059\")\n        void shouldReturnFalseForInvalidDate() {\n            // Given\n            var pattern = AutoJournalPattern.builder()\n                .patternCode(\"P001\")\n                .validFrom(LocalDate.of(2024, 1, 1))\n                .validTo(LocalDate.of(2024, 12, 31))\n                .build();\n\n            // When &amp; Then\n            assertThat(pattern.isValidAt(LocalDate.of(2023, 12, 31))).isFalse();\n            assertThat(pattern.isValidAt(LocalDate.of(2025, 1, 1))).isFalse();\n        }\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter17-orm/#_14","title":"\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30c6\u30b9\u30c8","text":"AutoJournalPatternRepositoryTest.java <pre><code>package com.example.accounting.infrastructure.persistence;\n\nimport com.example.accounting.domain.model.autojournal.*;\nimport com.example.accounting.infrastructure.persistence.repository.AutoJournalPatternJpaRepository;\nimport org.junit.jupiter.api.DisplayName;\nimport org.junit.jupiter.api.Nested;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.jdbc.AutoConfigureTestDatabase;\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\nimport org.springframework.test.context.DynamicPropertyRegistry;\nimport org.springframework.test.context.DynamicPropertySource;\nimport org.testcontainers.containers.PostgreSQLContainer;\nimport org.testcontainers.junit.jupiter.Container;\nimport org.testcontainers.junit.jupiter.Testcontainers;\n\nimport java.time.LocalDate;\n\nimport static org.assertj.core.api.Assertions.*;\n\n/**\n * \u81ea\u52d5\u4ed5\u8a33\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30c6\u30b9\u30c8\n *\n * JPA \u7248\u3067\u306f @DataJpaTest \u3092\u4f7f\u7528\uff08MyBatis \u7248\u3067\u306f @MybatisTest\uff09\n * TestContainers \u3067 PostgreSQL \u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3057\u3001\u5b9f\u969b\u306eDB\u3067\u30c6\u30b9\u30c8\n */\n@DataJpaTest\n@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\n@Testcontainers\n@DisplayName(\"\u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30c6\u30b9\u30c8\")\nclass AutoJournalPatternRepositoryTest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:16\")\n            .withDatabaseName(\"testdb\")\n            .withUsername(\"test\")\n            .withPassword(\"test\");\n\n    @DynamicPropertySource\n    static void configureProperties(DynamicPropertyRegistry registry) {\n        registry.add(\"spring.datasource.url\", postgres::getJdbcUrl);\n        registry.add(\"spring.datasource.username\", postgres::getUsername);\n        registry.add(\"spring.datasource.password\", postgres::getPassword);\n    }\n\n    @Autowired\n    private AutoJournalPatternJpaRepository patternRepository;\n\n    @Nested\n    @DisplayName(\"\u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf\u306e\u64cd\u4f5c\")\n    class PatternMasterTest {\n\n        @Test\n        @DisplayName(\"\u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf\u3092\u767b\u9332\u30fb\u53d6\u5f97\u3067\u304d\u308b\")\n        void shouldSaveAndFindPattern() {\n            // Given\n            var pattern = AutoJournalPattern.builder()\n                .patternCode(\"P001\")\n                .patternName(\"\u52a0\u5de5\u54c1\u58f2\u4e0a\")\n                .productGroup(\"\u52a0\u5de5\u54c1\")\n                .customerGroup(\"ALL\")\n                .debitAccountCode(\"11300\")  // \u58f2\u639b\u91d1\n                .creditAccountCode(\"41110\") // \u58f2\u4e0a\u52a0\u5de5\u54c1\n                .validFrom(LocalDate.of(2024, 1, 1))\n                .validTo(LocalDate.of(9999, 12, 31))\n                .priority(100)\n                .build();\n\n            // When\n            patternRepository.save(pattern);\n            var saved = patternRepository.findById(\"P001\");\n\n            // Then\n            assertThat(saved).isPresent();\n            assertThat(saved.get().getPatternName()).isEqualTo(\"\u52a0\u5de5\u54c1\u58f2\u4e0a\");\n            assertThat(saved.get().getProductGroup()).isEqualTo(\"\u52a0\u5de5\u54c1\");\n        }\n\n        @Test\n        @DisplayName(\"\u6709\u52b9\u306a\u30d1\u30bf\u30fc\u30f3\u3092\u512a\u5148\u9806\u4f4d\u9806\u3067\u53d6\u5f97\u3067\u304d\u308b\")\n        void shouldFindValidPatternsSortedByPriority() {\n            // Given: \u8907\u6570\u306e\u30d1\u30bf\u30fc\u30f3\u3092\u767b\u9332\n            var pattern1 = AutoJournalPattern.builder()\n                .patternCode(\"P001\")\n                .patternName(\"\u52a0\u5de5\u54c1\u58f2\u4e0a\")\n                .productGroup(\"\u52a0\u5de5\u54c1\")\n                .customerGroup(\"ALL\")\n                .debitAccountCode(\"11300\")\n                .creditAccountCode(\"41110\")\n                .validFrom(LocalDate.of(2024, 1, 1))\n                .validTo(LocalDate.of(9999, 12, 31))\n                .priority(200)\n                .build();\n\n            var pattern2 = AutoJournalPattern.builder()\n                .patternCode(\"P002\")\n                .patternName(\"\u751f\u9bae\u54c1\u58f2\u4e0a\")\n                .productGroup(\"\u751f\u9bae\u54c1\")\n                .customerGroup(\"ALL\")\n                .debitAccountCode(\"11300\")\n                .creditAccountCode(\"41120\")\n                .validFrom(LocalDate.of(2024, 1, 1))\n                .validTo(LocalDate.of(9999, 12, 31))\n                .priority(100)\n                .build();\n\n            patternRepository.save(pattern1);\n            patternRepository.save(pattern2);\n\n            // When\n            var patterns = patternRepository.findValidPatterns(LocalDate.of(2024, 4, 1));\n\n            // Then\n            assertThat(patterns).isSortedAccordingTo(\n                (p1, p2) -&gt; p1.getPriority().compareTo(p2.getPriority())\n            );\n            assertThat(patterns.get(0).getPatternCode()).isEqualTo(\"P002\"); // priority 100\n        }\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter17-orm/#176-jparepository","title":"17.6 JpaRepository \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9","text":""},{"location":"article/part3-orm/chapter17-orm/#repository","title":"\u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf Repository","text":"AutoJournalPatternJpaRepository.java <pre><code>package com.example.accounting.infrastructure.persistence.repository;\n\nimport com.example.accounting.domain.model.autojournal.AutoJournalPattern;\nimport org.springframework.data.jpa.repository.EntityGraph;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.jpa.repository.Query;\nimport org.springframework.data.repository.query.Param;\nimport org.springframework.stereotype.Repository;\n\nimport java.time.LocalDate;\nimport java.util.List;\nimport java.util.Optional;\n\n/**\n * \u81ea\u52d5\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf JpaRepository\n *\n * JPA \u7248\u3067\u306f JpaRepository \u3092\u7d99\u627f\uff08MyBatis \u7248\u3067\u306f Mapper \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff09\n * \u30e1\u30bd\u30c3\u30c9\u540d\u898f\u7d04\u3067\u81ea\u52d5\u7684\u306b\u30af\u30a8\u30ea\u3092\u751f\u6210\n */\n@Repository\npublic interface AutoJournalPatternJpaRepository extends JpaRepository&lt;AutoJournalPattern, String&gt; {\n\n    /**\n     * \u6709\u52b9\u306a\u30d1\u30bf\u30fc\u30f3\u3092\u512a\u5148\u9806\u4f4d\u9806\u3067\u53d6\u5f97\n     * @Query \u3067 JPQL \u3092\u660e\u793a\u7684\u306b\u8a18\u8ff0\n     */\n    @Query(\"SELECT p FROM AutoJournalPattern p \" +\n           \"WHERE p.validFrom &lt;= :date AND p.validTo &gt;= :date \" +\n           \"ORDER BY p.priority, p.patternCode\")\n    List&lt;AutoJournalPattern&gt; findValidPatterns(@Param(\"date\") LocalDate date);\n\n    /**\n     * \u30d1\u30bf\u30fc\u30f3\u30b3\u30fc\u30c9\u3067\u691c\u7d22\uff08\u52d8\u5b9a\u79d1\u76ee\u3082\u4e00\u7dd2\u306b\u53d6\u5f97\uff09\n     * @EntityGraph \u3067 N+1 \u554f\u984c\u3092\u9632\u6b62\n     */\n    @EntityGraph(attributePaths = {\"debitAccount\", \"creditAccount\"})\n    Optional&lt;AutoJournalPattern&gt; findWithAccountsByPatternCode(String patternCode);\n\n    /**\n     * \u5546\u54c1\u30b0\u30eb\u30fc\u30d7\u3067\u691c\u7d22\n     */\n    List&lt;AutoJournalPattern&gt; findByProductGroupOrderByPriority(String productGroup);\n\n    /**\n     * \u9867\u5ba2\u30b0\u30eb\u30fc\u30d7\u3067\u691c\u7d22\n     */\n    List&lt;AutoJournalPattern&gt; findByCustomerGroupOrderByPriority(String customerGroup);\n}\n</code></pre>"},{"location":"article/part3-orm/chapter17-orm/#repository_1","title":"\u81ea\u52d5\u4ed5\u8a33\u30c7\u30fc\u30bf Repository","text":"AutoJournalEntryJpaRepository.java <pre><code>package com.example.accounting.infrastructure.persistence.repository;\n\nimport com.example.accounting.domain.model.autojournal.AutoJournalEntry;\nimport com.example.accounting.domain.model.autojournal.AutoJournalStatus;\nimport org.springframework.data.jpa.repository.EntityGraph;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.jpa.repository.JpaSpecificationExecutor;\nimport org.springframework.data.jpa.repository.Query;\nimport org.springframework.data.repository.query.Param;\nimport org.springframework.stereotype.Repository;\n\nimport java.time.LocalDate;\nimport java.util.List;\nimport java.util.Optional;\n\n/**\n * \u81ea\u52d5\u4ed5\u8a33\u30c7\u30fc\u30bf JpaRepository\n *\n * JpaSpecificationExecutor \u3092\u7d99\u627f\u3057\u3066\u52d5\u7684\u30af\u30a8\u30ea\u306b\u5bfe\u5fdc\n * MyBatis \u7248\u3067\u306f\u52d5\u7684 SQL \u3092 XML \u3067\u8a18\u8ff0\u3057\u3066\u3044\u305f\u304c\u3001\n * JPA \u7248\u3067\u306f Specification \u30d1\u30bf\u30fc\u30f3\u3092\u4f7f\u7528\n */\n@Repository\npublic interface AutoJournalEntryJpaRepository\n        extends JpaRepository&lt;AutoJournalEntry, String&gt;,\n                JpaSpecificationExecutor&lt;AutoJournalEntry&gt; {\n\n    /**\n     * \u58f2\u4e0a\u756a\u53f7\u3067\u691c\u7d22\n     */\n    List&lt;AutoJournalEntry&gt; findBySalesNumberOrderBySalesLineNumberAscDebitCreditTypeAsc(\n            String salesNumber);\n\n    /**\n     * \u672a\u8ee2\u8a18\u306e\u81ea\u52d5\u4ed5\u8a33\u3092\u53d6\u5f97\n     */\n    @Query(\"SELECT e FROM AutoJournalEntry e \" +\n           \"WHERE e.postedFlag = false \" +\n           \"AND e.status = com.example.accounting.domain.model.autojournal.AutoJournalStatus.COMPLETED \" +\n           \"ORDER BY e.postingDate, e.autoJournalNumber\")\n    List&lt;AutoJournalEntry&gt; findUnposted();\n\n    /**\n     * \u672a\u8ee2\u8a18\u306e\u81ea\u52d5\u4ed5\u8a33\u3092\u65e5\u4ed8\u3067\u53d6\u5f97\n     */\n    @Query(\"SELECT e FROM AutoJournalEntry e \" +\n           \"WHERE e.postedFlag = false \" +\n           \"AND e.status = com.example.accounting.domain.model.autojournal.AutoJournalStatus.COMPLETED \" +\n           \"AND e.postingDate = :date \" +\n           \"ORDER BY e.autoJournalNumber\")\n    List&lt;AutoJournalEntry&gt; findUnpostedByDate(@Param(\"date\") LocalDate date);\n\n    /**\n     * \u30b9\u30c6\u30fc\u30bf\u30b9\u3067\u691c\u7d22\n     */\n    List&lt;AutoJournalEntry&gt; findByStatusOrderByPostingDateAscAutoJournalNumberAsc(\n            AutoJournalStatus status);\n\n    /**\n     * \u30d1\u30bf\u30fc\u30f3\u3068\u95a2\u9023\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u4e00\u7dd2\u306b\u53d6\u5f97\n     * @EntityGraph \u3067 N+1 \u554f\u984c\u3092\u9632\u6b62\n     */\n    @EntityGraph(attributePaths = {\"pattern\", \"account\", \"department\"})\n    Optional&lt;AutoJournalEntry&gt; findWithRelationsById(String autoJournalNumber);\n}\n</code></pre>"},{"location":"article/part3-orm/chapter17-orm/#177-spring-data-jpa-specification","title":"17.7 Spring Data JPA Specification \u306b\u3088\u308b\u52d5\u7684\u30af\u30a8\u30ea","text":"<p>JPA \u7248\u3067\u306f\u3001\u8907\u96d1\u306a\u691c\u7d22\u6761\u4ef6\u3092\u7d44\u307f\u5408\u308f\u305b\u308b\u969b\u306b Specification \u30d1\u30bf\u30fc\u30f3\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002MyBatis \u7248\u3067\u306f XML \u306e <code>&lt;if&gt;</code> \u30bf\u30b0\u3067\u52d5\u7684 SQL \u3092\u69cb\u7bc9\u3057\u3066\u3044\u307e\u3057\u305f\u304c\u3001JPA \u7248\u3067\u306f\u578b\u5b89\u5168\u306a Specification \u3067\u5b9f\u73fe\u3057\u307e\u3059\u3002</p> AutoJournalEntrySpecifications.java <pre><code>package com.example.accounting.infrastructure.persistence.specification;\n\nimport com.example.accounting.domain.model.autojournal.AutoJournalEntry;\nimport com.example.accounting.domain.model.autojournal.AutoJournalStatus;\nimport org.springframework.data.jpa.domain.Specification;\n\nimport java.time.LocalDate;\n\n/**\n * \u81ea\u52d5\u4ed5\u8a33\u30a8\u30f3\u30c8\u30ea\u691c\u7d22\u7528 Specification\n *\n * JPA \u7248\u3067\u306f Specification \u30d1\u30bf\u30fc\u30f3\u3067\u52d5\u7684\u30af\u30a8\u30ea\u3092\u69cb\u7bc9\n * MyBatis \u7248\u306e XML \u52d5\u7684 SQL \u3092 Java \u30b3\u30fc\u30c9\u3067\u8868\u73fe\n *\n * \u4f7f\u7528\u4f8b:\n * var spec = AutoJournalEntrySpecifications.unposted()\n *     .and(AutoJournalEntrySpecifications.postingDateBetween(from, to))\n *     .and(AutoJournalEntrySpecifications.hasStatus(AutoJournalStatus.COMPLETED));\n * var entries = repository.findAll(spec);\n */\npublic class AutoJournalEntrySpecifications {\n\n    /**\n     * \u672a\u8ee2\u8a18\u6761\u4ef6\n     */\n    public static Specification&lt;AutoJournalEntry&gt; unposted() {\n        return (root, query, cb) -&gt; cb.equal(root.get(\"postedFlag\"), false);\n    }\n\n    /**\n     * \u30b9\u30c6\u30fc\u30bf\u30b9\u6761\u4ef6\n     */\n    public static Specification&lt;AutoJournalEntry&gt; hasStatus(AutoJournalStatus status) {\n        return (root, query, cb) -&gt; cb.equal(root.get(\"status\"), status);\n    }\n\n    /**\n     * \u8d77\u7968\u65e5\u7bc4\u56f2\u6761\u4ef6\n     */\n    public static Specification&lt;AutoJournalEntry&gt; postingDateBetween(\n            LocalDate from, LocalDate to) {\n        return (root, query, cb) -&gt; cb.between(root.get(\"postingDate\"), from, to);\n    }\n\n    /**\n     * \u8d77\u7968\u65e5\u6761\u4ef6\n     */\n    public static Specification&lt;AutoJournalEntry&gt; postingDateEquals(LocalDate date) {\n        return (root, query, cb) -&gt; cb.equal(root.get(\"postingDate\"), date);\n    }\n\n    /**\n     * \u58f2\u4e0a\u756a\u53f7\u6761\u4ef6\n     */\n    public static Specification&lt;AutoJournalEntry&gt; salesNumberEquals(String salesNumber) {\n        return (root, query, cb) -&gt; cb.equal(root.get(\"salesNumber\"), salesNumber);\n    }\n\n    /**\n     * \u30d1\u30bf\u30fc\u30f3\u30b3\u30fc\u30c9\u6761\u4ef6\n     */\n    public static Specification&lt;AutoJournalEntry&gt; patternCodeEquals(String patternCode) {\n        return (root, query, cb) -&gt; cb.equal(root.get(\"patternCode\"), patternCode);\n    }\n\n    /**\n     * \u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\u6761\u4ef6\n     */\n    public static Specification&lt;AutoJournalEntry&gt; accountCodeEquals(String accountCode) {\n        return (root, query, cb) -&gt; cb.equal(root.get(\"accountCode\"), accountCode);\n    }\n\n    /**\n     * \u90e8\u9580\u30b3\u30fc\u30c9\u6761\u4ef6\n     */\n    public static Specification&lt;AutoJournalEntry&gt; departmentCodeEquals(String departmentCode) {\n        return (root, query, cb) -&gt; cb.equal(root.get(\"departmentCode\"), departmentCode);\n    }\n\n    /**\n     * \u30a8\u30e9\u30fc\u6709\u7121\u6761\u4ef6\n     */\n    public static Specification&lt;AutoJournalEntry&gt; hasError() {\n        return (root, query, cb) -&gt; cb.isNotNull(root.get(\"errorCode\"));\n    }\n\n    /**\n     * \u30a8\u30e9\u30fc\u7121\u3057\u6761\u4ef6\n     */\n    public static Specification&lt;AutoJournalEntry&gt; noError() {\n        return (root, query, cb) -&gt; cb.isNull(root.get(\"errorCode\"));\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter17-orm/#specification","title":"Specification \u306e\u4f7f\u7528\u4f8b","text":"<pre><code>// \u52d5\u7684\u30af\u30a8\u30ea\u306e\u7d44\u307f\u7acb\u3066\nvar spec = AutoJournalEntrySpecifications.unposted()\n    .and(AutoJournalEntrySpecifications.postingDateBetween(\n        LocalDate.of(2024, 4, 1),\n        LocalDate.of(2024, 4, 30)))\n    .and(AutoJournalEntrySpecifications.hasStatus(AutoJournalStatus.COMPLETED))\n    .and(AutoJournalEntrySpecifications.noError());\n\n// \u30af\u30a8\u30ea\u5b9f\u884c\nvar entries = entryJpaRepository.findAll(spec);\n</code></pre>"},{"location":"article/part3-orm/chapter17-orm/#178","title":"17.8 \u81ea\u52d5\u4ed5\u8a33\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":"AutoJournalService.java\uff08\u4e00\u90e8\u629c\u7c8b\uff09 <pre><code>package com.example.accounting.application.service;\n\nimport com.example.accounting.application.dto.AutoJournalResult;\nimport com.example.accounting.application.dto.SalesData;\nimport com.example.accounting.application.port.out.AutoJournalRepository;\nimport com.example.accounting.domain.model.autojournal.*;\nimport com.example.accounting.domain.model.journal.*;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.*;\n\n/**\n * \u81ea\u52d5\u4ed5\u8a33\u30b5\u30fc\u30d3\u30b9\n *\n * JPA \u7248\u3067\u3082\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u306f MyBatis \u7248\u3068\u540c\u3058\n * \u30ea\u30dd\u30b8\u30c8\u30ea\u7d4c\u7531\u3067\u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u3092\u884c\u3046\n */\n@Service\n@RequiredArgsConstructor\n@Slf4j\npublic class AutoJournalService {\n\n    private final AutoJournalRepository autoJournalRepository;\n    private final JournalRepository journalRepository;\n\n    /**\n     * \u58f2\u4e0a\u30c7\u30fc\u30bf\u304b\u3089\u81ea\u52d5\u4ed5\u8a33\u3092\u751f\u6210\u3059\u308b\n     */\n    @Transactional\n    public AutoJournalResult generateAutoJournals(List&lt;SalesData&gt; salesDataList) {\n        var processNumber = generateProcessNumber();\n        var startTime = LocalDateTime.now();\n\n        int successCount = 0;\n        int errorCount = 0;\n        BigDecimal totalAmount = BigDecimal.ZERO;\n\n        // \u6709\u52b9\u306a\u30d1\u30bf\u30fc\u30f3\u3092\u53d6\u5f97\n        var patterns = autoJournalRepository.findValidPatterns(LocalDate.now());\n\n        List&lt;AutoJournalEntry&gt; allEntries = new ArrayList&lt;&gt;();\n\n        for (SalesData sale : salesDataList) {\n            try {\n                // \u30de\u30c3\u30c1\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3092\u691c\u7d22\n                var matchedPattern = findMatchingPattern(patterns, sale);\n\n                if (matchedPattern.isPresent()) {\n                    // \u81ea\u52d5\u4ed5\u8a33\u30c7\u30fc\u30bf\u3092\u751f\u6210\n                    var entries = createAutoJournalEntries(sale, matchedPattern.get());\n                    allEntries.addAll(entries);\n\n                    successCount++;\n                    totalAmount = totalAmount.add(sale.getAmount());\n                } else {\n                    // \u30d1\u30bf\u30fc\u30f3\u4e0d\u4e00\u81f4\u30a8\u30e9\u30fc\n                    allEntries.add(createErrorEntry(sale, \"E001\", \"\u30de\u30c3\u30c1\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\"));\n                    errorCount++;\n                }\n            } catch (Exception e) {\n                log.error(\"\u81ea\u52d5\u4ed5\u8a33\u51e6\u7406\u30a8\u30e9\u30fc: {}\", sale.getSalesNumber(), e);\n                allEntries.add(createErrorEntry(sale, \"E999\", e.getMessage()));\n                errorCount++;\n            }\n        }\n\n        // JPA \u7248\u3067\u306f saveAll \u3067\u30d0\u30c3\u30c1\u4fdd\u5b58\n        autoJournalRepository.saveAllEntries(allEntries);\n\n        // \u51e6\u7406\u5c65\u6b74\u3092\u4fdd\u5b58\n        var history = AutoJournalHistory.builder()\n            .processNumber(processNumber)\n            .processDateTime(startTime)\n            .targetFromDate(salesDataList.stream()\n                .map(SalesData::getSalesDate)\n                .min(LocalDate::compareTo).orElse(LocalDate.now()))\n            .targetToDate(salesDataList.stream()\n                .map(SalesData::getSalesDate)\n                .max(LocalDate::compareTo).orElse(LocalDate.now()))\n            .totalCount(salesDataList.size())\n            .successCount(successCount)\n            .errorCount(errorCount)\n            .totalAmount(totalAmount)\n            .build();\n\n        autoJournalRepository.saveHistory(history);\n\n        return new AutoJournalResult(processNumber, successCount, errorCount, totalAmount);\n    }\n\n    /**\n     * \u30de\u30c3\u30c1\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3092\u691c\u7d22\n     */\n    private Optional&lt;AutoJournalPattern&gt; findMatchingPattern(\n            List&lt;AutoJournalPattern&gt; patterns, SalesData sale) {\n        return patterns.stream()\n            .filter(p -&gt; p.matches(sale.getProductGroup(), sale.getCustomerGroup()))\n            .filter(p -&gt; p.isValidAt(sale.getSalesDate()))\n            .findFirst();\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter17-orm/#179","title":"17.9 \u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3067\u306e\u30dd\u30fc\u30c8\u8a2d\u8a08","text":""},{"location":"article/part3-orm/chapter17-orm/#output-port","title":"Output Port\uff08\u30ea\u30dd\u30b8\u30c8\u30ea\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff09","text":"AutoJournalRepository.java <pre><code>package com.example.accounting.application.port.out;\n\nimport com.example.accounting.domain.model.autojournal.*;\n\nimport java.time.LocalDate;\nimport java.util.List;\nimport java.util.Optional;\n\n/**\n * \u81ea\u52d5\u4ed5\u8a33\u30ea\u30dd\u30b8\u30c8\u30ea\uff08Output Port\uff09\n *\n * \u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u304a\u3051\u308b\u51fa\u529b\u30dd\u30fc\u30c8\n * \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\u306f\u3053\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306b\u4f9d\u5b58\u3057\u3001\n * \u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u5c64\u3067\u5b9f\u88c5\u3059\u308b\n */\npublic interface AutoJournalRepository {\n\n    // \u30d1\u30bf\u30fc\u30f3\u30de\u30b9\u30bf\u64cd\u4f5c\n    void savePattern(AutoJournalPattern pattern);\n\n    Optional&lt;AutoJournalPattern&gt; findPatternByCode(String patternCode);\n\n    Optional&lt;AutoJournalPattern&gt; findPatternWithAccounts(String patternCode);\n\n    List&lt;AutoJournalPattern&gt; findAllPatterns();\n\n    List&lt;AutoJournalPattern&gt; findValidPatterns(LocalDate date);\n\n    void updatePattern(AutoJournalPattern pattern);\n\n    void deletePattern(String patternCode);\n\n    // \u81ea\u52d5\u4ed5\u8a33\u30a8\u30f3\u30c8\u30ea\u64cd\u4f5c\n    void saveEntry(AutoJournalEntry entry);\n\n    void saveAllEntries(List&lt;AutoJournalEntry&gt; entries);\n\n    Optional&lt;AutoJournalEntry&gt; findEntryByNumber(String autoJournalNumber);\n\n    Optional&lt;AutoJournalEntry&gt; findEntryWithRelations(String autoJournalNumber);\n\n    List&lt;AutoJournalEntry&gt; findEntriesBySalesNumber(String salesNumber);\n\n    List&lt;AutoJournalEntry&gt; findUnpostedEntries();\n\n    List&lt;AutoJournalEntry&gt; findUnpostedEntriesByDate(LocalDate date);\n\n    List&lt;AutoJournalEntry&gt; findEntriesByStatus(AutoJournalStatus status);\n\n    void updateEntry(AutoJournalEntry entry);\n\n    // \u51e6\u7406\u5c65\u6b74\u64cd\u4f5c\n    void saveHistory(AutoJournalHistory history);\n\n    Optional&lt;AutoJournalHistory&gt; findHistoryByNumber(String processNumber);\n\n    List&lt;AutoJournalHistory&gt; findHistoriesByDateRange(LocalDate fromDate, LocalDate toDate);\n\n    void deleteAll();\n}\n</code></pre>"},{"location":"article/part3-orm/chapter17-orm/#1710-mybatis-jpa","title":"17.10 \u307e\u3068\u3081\uff1aMyBatis \u7248\u3068 JPA \u7248\u306e\u6bd4\u8f03","text":""},{"location":"article/part3-orm/chapter17-orm/#_15","title":"\u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u5c64\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u6bd4\u8f03","text":""},{"location":"article/part3-orm/chapter17-orm/#jpa","title":"JPA \u7248\u306e\u7279\u5fb4","text":"\u89b3\u70b9 JPA \u7248\u306e\u7279\u5fb4 \u578b\u5b89\u5168\u6027 Specification \u30d1\u30bf\u30fc\u30f3\u306b\u3088\u308b\u578b\u5b89\u5168\u306a\u52d5\u7684\u30af\u30a8\u30ea N+1 \u554f\u984c\u5bfe\u7b56 @EntityGraph \u306b\u3088\u308b\u5ba3\u8a00\u7684\u306a\u89e3\u6c7a \u30d0\u30c3\u30c1\u51e6\u7406 saveAll() \u306b\u3088\u308b\u52b9\u7387\u7684\u306a\u4e00\u62ec\u4fdd\u5b58 \u30dd\u30fc\u30c8\u5206\u96e2 Output Port \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306b\u3088\u308b\u62bd\u8c61\u5316 \u30c6\u30b9\u30c8\u5bb9\u6613\u6027 @DataJpaTest + TestContainers"},{"location":"article/part3-orm/chapter17-orm/#_16","title":"\u6b21\u7ae0\u4e88\u544a","text":"<p>\u7b2c18\u7ae0\u3067\u306f\u3001\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u30c6\u30fc\u30d6\u30eb\u306e\u8a2d\u8a08\u306b\u3064\u3044\u3066\u3001JPA \u7248\u3067\u306e\u5b9f\u88c5\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002</p>"},{"location":"article/part3-orm/chapter18-orm/","title":"\u7b2c18\u7ae0\uff1a\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u306e\u8a2d\u8a08\uff08ORM\u7248\uff09","text":"<p>\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306b\u304a\u3051\u308b\u6b8b\u9ad8\u7ba1\u7406\u306e\u57fa\u76e4\u3068\u306a\u308b\u300c\u52d8\u5b9a\u79d1\u76ee\u5225\u6b8b\u9ad8\u30c6\u30fc\u30d6\u30eb\u300d\u3092 TDD \u3067\u8a2d\u8a08\u3057\u3066\u3044\u304d\u307e\u3059\u3002\u65e5\u6b21\u30fb\u6708\u6b21\u306e\u6b8b\u9ad8\u7ba1\u7406\u3068\u3001\u5e33\u7968\u51fa\u529b\u306b\u5fc5\u8981\u306a\u30c6\u30fc\u30d6\u30eb\u69cb\u9020\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002</p> <p>JPA \u7248\u3067\u306f\u3001@EmbeddedId \u306b\u3088\u308b\u8907\u5408\u4e3b\u30ad\u30fc\u3001@Query \u306b\u3088\u308b\u96c6\u8a08\u30af\u30a8\u30ea\u3001Projection \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u6d3b\u7528\u3057\u307e\u3059\u3002</p>"},{"location":"article/part3-orm/chapter18-orm/#181","title":"18.1 \u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u306e\u8a2d\u8a08","text":""},{"location":"article/part3-orm/chapter18-orm/#_1","title":"\u65e5\u6b21\u6b8b\u9ad8\u7ba1\u7406\u306e\u76ee\u7684","text":"<p>\u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u306f\u3001\u65e5\u3005\u306e\u4ed5\u8a33\u51e6\u7406\u306b\u9023\u52d5\u3057\u3066\u66f4\u65b0\u3055\u308c\u308b\u6b8b\u9ad8\u60c5\u5831\u3092\u7ba1\u7406\u3057\u307e\u3059\u3002\u65e5\u8a08\u8868\u306e\u51fa\u529b\u3084\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u306a\u6b8b\u9ad8\u628a\u63e1\u306b\u4f7f\u7528\u3057\u307e\u3059\u3002</p> <p></p> \u76ee\u7684 \u8aac\u660e \u65e5\u8a08\u8868\u51fa\u529b \u65e5\u5358\u4f4d\u306e\u52d8\u5b9a\u79d1\u76ee\u5225\u501f\u65b9\u30fb\u8cb8\u65b9\u5408\u8a08\u306e\u96c6\u8a08 \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u6b8b\u9ad8 \u4ed5\u8a33\u5165\u529b\u3068\u540c\u6642\u306b\u6b8b\u9ad8\u3092\u66f4\u65b0 \u76e3\u67fb\u8a3c\u8de1 \u65e5\u4ed8\u5225\u306e\u53d6\u5f15\u5c65\u6b74\u306e\u4fdd\u6301 \u6c7a\u7b97\u4ed5\u8a33\u306e\u533a\u5225 \u901a\u5e38\u4ed5\u8a33\u3068\u6c7a\u7b97\u4ed5\u8a33\u306e\u5206\u96e2\u7ba1\u7406"},{"location":"article/part3-orm/chapter18-orm/#_2","title":"\u8907\u5408\u4e3b\u30ad\u30fc\u306b\u3088\u308b\u591a\u6b21\u5143\u7ba1\u7406","text":"<p>\u65e5\u6b21\u6b8b\u9ad8\u30c6\u30fc\u30d6\u30eb\u306f\u3001\u4ee5\u4e0b\u306e6\u3064\u306e\u30ab\u30e9\u30e0\u3067\u8907\u5408\u4e3b\u30ad\u30fc\u3092\u69cb\u6210\u3057\u307e\u3059\u3002</p> \u30ab\u30e9\u30e0 \u8aac\u660e \u4f8b \u8d77\u7968\u65e5 \u4ed5\u8a33\u306e\u8d77\u7968\u65e5 2024-04-01 \u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9 \u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u306e\u30b3\u30fc\u30c9 11110 \u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9 \u88dc\u52a9\u7684\u306a\u5206\u985e\uff08\u7a7a\u6587\u5b57\u53ef\uff09 \u7a7a\u6587\u5b57 \u90e8\u9580\u30b3\u30fc\u30c9 \u90e8\u9580\u30de\u30b9\u30bf\u306e\u30b3\u30fc\u30c9 10100 \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9 \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5358\u4f4d\u7ba1\u7406\uff08\u7a7a\u6587\u5b57\u53ef\uff09 P001 \u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0 \u6c7a\u7b97\u4ed5\u8a33\u304b\u5426\u304b false <p>\u3053\u306e\u8a2d\u8a08\u306b\u3088\u308a\u3001\u540c\u3058\u52d8\u5b9a\u79d1\u76ee\u3067\u3082\u4ee5\u4e0b\u306e\u7c92\u5ea6\u3067\u6b8b\u9ad8\u3092\u5206\u3051\u3066\u7ba1\u7406\u3067\u304d\u307e\u3059\u3002</p> <ul> <li>\u90e8\u9580\u5225\u306e\u58f2\u4e0a\u9ad8</li> <li>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5225\u306e\u539f\u4fa1</li> <li>\u901a\u5e38\u4ed5\u8a33\u3068\u6c7a\u7b97\u4ed5\u8a33\u306e\u5206\u96e2</li> </ul>"},{"location":"article/part3-orm/chapter18-orm/#182-mybatis","title":"18.2 MyBatis \u7248\u3068\u306e\u5b9f\u88c5\u6bd4\u8f03","text":""},{"location":"article/part3-orm/chapter18-orm/#_3","title":"\u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u5c64\u306e\u6bd4\u8f03","text":"\u6a5f\u80fd MyBatis \u7248 JPA \u7248 \u8907\u5408\u4e3b\u30ad\u30fc Key \u5185\u90e8\u30af\u30e9\u30b9 @EmbeddedId + @Embeddable \u691c\u7d22\u7d50\u679c\u30de\u30c3\u30d4\u30f3\u30b0 resultMap + DTO Projection \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9 UPSERT XML \u3067 INSERT ON CONFLICT @Query + nativeQuery \u96c6\u8a08\u30af\u30a8\u30ea XML \u3067 GROUP BY Native Query + Projection \u65e5\u8a08\u8868\u51fa\u529b resultMap \u3067\u30de\u30c3\u30d4\u30f3\u30b0 Projection \u2192 DTO \u5909\u63db"},{"location":"article/part3-orm/chapter18-orm/#flyway","title":"Flyway \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3","text":"V008__create_daily_account_balance_table.sql <pre><code>-- \u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\nCREATE TABLE \"\u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\" (\n    \"\u8d77\u7968\u65e5\" DATE NOT NULL,\n    \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(5) NOT NULL,\n    \"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(10) NOT NULL DEFAULT '',\n    \"\u90e8\u9580\u30b3\u30fc\u30c9\" VARCHAR(5) NOT NULL DEFAULT '00000',\n    \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9\" VARCHAR(10) NOT NULL DEFAULT '',\n    \"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\" SMALLINT NOT NULL DEFAULT 0,\n    \"\u501f\u65b9\u91d1\u984d\" DECIMAL(14,2) NOT NULL DEFAULT 0,\n    \"\u8cb8\u65b9\u91d1\u984d\" DECIMAL(14,2) NOT NULL DEFAULT 0,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    PRIMARY KEY (\n        \"\u8d77\u7968\u65e5\",\n        \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\",\n        \"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\",\n        \"\u90e8\u9580\u30b3\u30fc\u30c9\",\n        \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9\",\n        \"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\"\n    ),\n    CONSTRAINT \"fk_\u65e5\u6b21\u6b8b\u9ad8_\u52d8\u5b9a\u79d1\u76ee\"\n        FOREIGN KEY (\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\") REFERENCES \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\"(\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"fk_\u65e5\u6b21\u6b8b\u9ad8_\u90e8\u9580\"\n        FOREIGN KEY (\"\u90e8\u9580\u30b3\u30fc\u30c9\") REFERENCES \"\u90e8\u9580\u30de\u30b9\u30bf\"(\"\u90e8\u9580\u30b3\u30fc\u30c9\")\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"idx_\u65e5\u6b21\u6b8b\u9ad8_\u8d77\u7968\u65e5\" ON \"\u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\"(\"\u8d77\u7968\u65e5\");\nCREATE INDEX \"idx_\u65e5\u6b21\u6b8b\u9ad8_\u52d8\u5b9a\u79d1\u76ee\" ON \"\u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\"(\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u65e5\u6b21\u6b8b\u9ad8_\u90e8\u9580\" ON \"\u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\"(\"\u90e8\u9580\u30b3\u30fc\u30c9\");\n</code></pre>"},{"location":"article/part3-orm/chapter18-orm/#183-jpa","title":"18.3 JPA \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u5b9f\u88c5","text":""},{"location":"article/part3-orm/chapter18-orm/#embeddable","title":"\u8907\u5408\u4e3b\u30ad\u30fc\u30af\u30e9\u30b9\uff08@Embeddable\uff09","text":"DailyAccountBalanceId.java <pre><code>package com.example.accounting.domain.model.balance;\n\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Embeddable;\nimport lombok.*;\n\nimport java.io.Serializable;\nimport java.time.LocalDate;\nimport java.util.Objects;\n\n/**\n * \u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u306e\u8907\u5408\u4e3b\u30ad\u30fc\n *\n * JPA \u3067\u306f @EmbeddedId \u3067\u8907\u5408\u4e3b\u30ad\u30fc\u3092\u8868\u73fe\n * MyBatis \u7248\u3067\u306f Key \u5185\u90e8\u30af\u30e9\u30b9\u3092\u4f7f\u7528\u3057\u3066\u3044\u305f\u304c\u3001\n * JPA \u7248\u3067\u306f @Embeddable \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u4ed8\u304d\u30af\u30e9\u30b9\u3067\u5b9f\u88c5\n *\n * \u6ce8\u610f: equals() \u3068 hashCode() \u306e\u5b9f\u88c5\u304c\u5fc5\u9808\n */\n@Embeddable\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class DailyAccountBalanceId implements Serializable {\n\n    @Column(name = \"\u8d77\u7968\u65e5\", nullable = false)\n    private LocalDate postingDate;\n\n    @Column(name = \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", length = 5, nullable = false)\n    private String accountCode;\n\n    @Column(name = \"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\", length = 10, nullable = false)\n    private String subAccountCode;\n\n    @Column(name = \"\u90e8\u9580\u30b3\u30fc\u30c9\", length = 5, nullable = false)\n    private String departmentCode;\n\n    @Column(name = \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9\", length = 10, nullable = false)\n    private String projectCode;\n\n    @Column(name = \"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\", nullable = false)\n    private Boolean closingJournalFlag;\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        DailyAccountBalanceId that = (DailyAccountBalanceId) o;\n        return Objects.equals(postingDate, that.postingDate) &amp;&amp;\n               Objects.equals(accountCode, that.accountCode) &amp;&amp;\n               Objects.equals(subAccountCode, that.subAccountCode) &amp;&amp;\n               Objects.equals(departmentCode, that.departmentCode) &amp;&amp;\n               Objects.equals(projectCode, that.projectCode) &amp;&amp;\n               Objects.equals(closingJournalFlag, that.closingJournalFlag);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(postingDate, accountCode, subAccountCode,\n                           departmentCode, projectCode, closingJournalFlag);\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter18-orm/#entity","title":"\u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8 Entity","text":"DailyAccountBalance.java <pre><code>package com.example.accounting.domain.model.balance;\n\nimport com.example.accounting.domain.model.account.Account;\nimport com.example.accounting.domain.model.department.Department;\nimport jakarta.persistence.*;\nimport lombok.*;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\n\n/**\n * \u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8 Entity\n *\n * JPA \u7248\u3067\u306f @EmbeddedId \u3067\u8907\u5408\u4e3b\u30ad\u30fc\u3092\u5b9a\u7fa9\n * MyBatis \u7248\u3067\u306f\u5358\u7d14\u306a POJO + Key \u5185\u90e8\u30af\u30e9\u30b9\u3060\u3063\u305f\u304c\u3001\n * JPA \u7248\u3067\u306f Entity \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3068\u95a2\u9023\u5b9a\u7fa9\u304c\u5fc5\u8981\n */\n@Entity\n@Table(name = \"\u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\")\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class DailyAccountBalance {\n\n    /**\n     * \u8907\u5408\u4e3b\u30ad\u30fc\n     * @EmbeddedId \u3067\u57cb\u3081\u8fbc\u307fID\u3092\u4f7f\u7528\n     */\n    @EmbeddedId\n    private DailyAccountBalanceId id;\n\n    /**\n     * \u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u3068\u306e\u95a2\u9023\n     */\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", referencedColumnName = \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\",\n                insertable = false, updatable = false)\n    private Account account;\n\n    /**\n     * \u90e8\u9580\u30de\u30b9\u30bf\u3068\u306e\u95a2\u9023\n     */\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = \"\u90e8\u9580\u30b3\u30fc\u30c9\", referencedColumnName = \"\u90e8\u9580\u30b3\u30fc\u30c9\",\n                insertable = false, updatable = false)\n    private Department department;\n\n    @Column(name = \"\u501f\u65b9\u91d1\u984d\", nullable = false, precision = 14, scale = 2)\n    private BigDecimal debitAmount;\n\n    @Column(name = \"\u8cb8\u65b9\u91d1\u984d\", nullable = false, precision = 14, scale = 2)\n    private BigDecimal creditAmount;\n\n    @Column(name = \"\u4f5c\u6210\u65e5\u6642\", nullable = false, updatable = false)\n    private LocalDateTime createdAt;\n\n    @Column(name = \"\u66f4\u65b0\u65e5\u6642\", nullable = false)\n    private LocalDateTime updatedAt;\n\n    /**\n     * \u6b8b\u9ad8\u3092\u8a08\u7b97\u3059\u308b\uff08\u8cb8\u501f\u533a\u5206\u306b\u5fdc\u3058\u3066\uff09\n     * @param isDebitAccount \u501f\u65b9\u52d8\u5b9a\u304b\u3069\u3046\u304b\n     * @return \u6b8b\u9ad8\n     */\n    public BigDecimal calculateBalance(boolean isDebitAccount) {\n        if (isDebitAccount) {\n            // \u501f\u65b9\u52d8\u5b9a\uff1a\u501f\u65b9 - \u8cb8\u65b9\n            return debitAmount.subtract(creditAmount);\n        } else {\n            // \u8cb8\u65b9\u52d8\u5b9a\uff1a\u8cb8\u65b9 - \u501f\u65b9\n            return creditAmount.subtract(debitAmount);\n        }\n    }\n\n    /**\n     * \u91d1\u984d\u3092\u52a0\u7b97\u3059\u308b\n     */\n    public void addAmounts(BigDecimal debit, BigDecimal credit) {\n        this.debitAmount = this.debitAmount.add(debit);\n        this.creditAmount = this.creditAmount.add(credit);\n        this.updatedAt = LocalDateTime.now();\n    }\n\n    @PrePersist\n    protected void onCreate() {\n        LocalDateTime now = LocalDateTime.now();\n        this.createdAt = now;\n        this.updatedAt = now;\n        if (this.debitAmount == null) {\n            this.debitAmount = BigDecimal.ZERO;\n        }\n        if (this.creditAmount == null) {\n            this.creditAmount = BigDecimal.ZERO;\n        }\n    }\n\n    @PreUpdate\n    protected void onUpdate() {\n        this.updatedAt = LocalDateTime.now();\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter18-orm/#projection","title":"\u65e5\u8a08\u8868\u884c\u7528 Projection \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9","text":"DailyReportLineProjection.java \u3068 DailyReportLine.java <pre><code>package com.example.accounting.domain.model.balance;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\n\n/**\n * \u65e5\u8a08\u8868\u884c\u306e Projection \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\n *\n * JPA \u7248\u3067\u306f Projection \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u4f7f\u7528\u3057\u3066\n * \u96c6\u8a08\u30af\u30a8\u30ea\u306e\u7d50\u679c\u3092\u30de\u30c3\u30d4\u30f3\u30b0\n * MyBatis \u7248\u3067\u306f resultMap \u3067 DTO \u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3057\u3066\u3044\u305f\n */\npublic interface DailyReportLineProjection {\n    LocalDate getReportDate();\n    String getAccountCode();\n    String getAccountName();\n    String getSubAccountCode();\n    String getSubAccountName();\n    BigDecimal getDebitTotal();\n    BigDecimal getCreditTotal();\n    BigDecimal getBalance();\n}\n</code></pre> <pre><code>package com.example.accounting.domain.model.balance;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\n\n/**\n * \u65e5\u8a08\u8868\u884c DTO\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class DailyReportLine {\n    private LocalDate reportDate;         // \u5bfe\u8c61\u65e5\n    private String accountCode;           // \u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\n    private String accountName;           // \u52d8\u5b9a\u79d1\u76ee\u540d\n    private String subAccountCode;        // \u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\n    private String subAccountName;        // \u88dc\u52a9\u79d1\u76ee\u540d\n    private BigDecimal debitTotal;        // \u501f\u65b9\u5408\u8a08\n    private BigDecimal creditTotal;       // \u8cb8\u65b9\u5408\u8a08\n    private BigDecimal balance;           // \u6b8b\u9ad8\n\n    /**\n     * Projection \u304b\u3089 DTO \u3092\u751f\u6210\n     */\n    public static DailyReportLine fromProjection(DailyReportLineProjection projection) {\n        return DailyReportLine.builder()\n            .reportDate(projection.getReportDate())\n            .accountCode(projection.getAccountCode())\n            .accountName(projection.getAccountName())\n            .subAccountCode(projection.getSubAccountCode())\n            .subAccountName(projection.getSubAccountName())\n            .debitTotal(projection.getDebitTotal())\n            .creditTotal(projection.getCreditTotal())\n            .balance(projection.getBalance())\n            .build();\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter18-orm/#184-tdd","title":"18.4 TDD \u306b\u3088\u308b\u65e5\u6b21\u6b8b\u9ad8\u30c6\u30fc\u30d6\u30eb\u306e\u5b9f\u88c5","text":""},{"location":"article/part3-orm/chapter18-orm/#_4","title":"\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30c6\u30b9\u30c8","text":"DailyAccountBalanceRepositoryTest.java <pre><code>package com.example.accounting.infrastructure.persistence;\n\nimport com.example.accounting.domain.model.balance.DailyAccountBalance;\nimport com.example.accounting.domain.model.balance.DailyAccountBalanceId;\nimport com.example.accounting.infrastructure.persistence.repository.DailyAccountBalanceJpaRepository;\nimport org.junit.jupiter.api.DisplayName;\nimport org.junit.jupiter.api.Nested;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.jdbc.AutoConfigureTestDatabase;\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\nimport org.springframework.test.context.DynamicPropertyRegistry;\nimport org.springframework.test.context.DynamicPropertySource;\nimport org.testcontainers.containers.PostgreSQLContainer;\nimport org.testcontainers.junit.jupiter.Container;\nimport org.testcontainers.junit.jupiter.Testcontainers;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\n\nimport static org.assertj.core.api.Assertions.*;\n\n/**\n * \u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30c6\u30b9\u30c8\n *\n * JPA \u7248\u3067\u306f @DataJpaTest \u3092\u4f7f\u7528\uff08MyBatis \u7248\u3067\u306f @MybatisTest\uff09\n */\n@DataJpaTest\n@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\n@Testcontainers\n@DisplayName(\"\u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30c6\u30b9\u30c8\")\nclass DailyAccountBalanceRepositoryTest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:16\")\n            .withDatabaseName(\"testdb\")\n            .withUsername(\"test\")\n            .withPassword(\"test\");\n\n    @DynamicPropertySource\n    static void configureProperties(DynamicPropertyRegistry registry) {\n        registry.add(\"spring.datasource.url\", postgres::getJdbcUrl);\n        registry.add(\"spring.datasource.username\", postgres::getUsername);\n        registry.add(\"spring.datasource.password\", postgres::getPassword);\n    }\n\n    @Autowired\n    private DailyAccountBalanceJpaRepository dailyBalanceRepository;\n\n    @Nested\n    @DisplayName(\"\u65e5\u6b21\u6b8b\u9ad8\u306e\u767b\u9332\u30fb\u66f4\u65b0\")\n    class DailyBalanceUpsertTest {\n\n        @Test\n        @DisplayName(\"\u65b0\u898f\u306e\u65e5\u6b21\u6b8b\u9ad8\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void shouldInsertNewDailyBalance() {\n            // Given\n            var id = DailyAccountBalanceId.builder()\n                .postingDate(LocalDate.of(2024, 4, 1))\n                .accountCode(\"11110\")  // \u73fe\u91d1\n                .subAccountCode(\"\")\n                .departmentCode(\"10100\")\n                .projectCode(\"\")\n                .closingJournalFlag(false)\n                .build();\n\n            var balance = DailyAccountBalance.builder()\n                .id(id)\n                .debitAmount(new BigDecimal(\"100000\"))\n                .creditAmount(BigDecimal.ZERO)\n                .build();\n\n            // When\n            dailyBalanceRepository.save(balance);\n\n            // Then\n            var saved = dailyBalanceRepository.findById(id);\n            assertThat(saved).isPresent();\n            assertThat(saved.get().getDebitAmount())\n                .isEqualByComparingTo(\"100000\");\n        }\n\n        @Test\n        @DisplayName(\"\u65e2\u5b58\u306e\u65e5\u6b21\u6b8b\u9ad8\u3092\u66f4\u65b0\u3067\u304d\u308b\")\n        void shouldUpdateExistingDailyBalance() {\n            // Given: \u521d\u56de\u767b\u9332\n            var id = DailyAccountBalanceId.builder()\n                .postingDate(LocalDate.of(2024, 4, 1))\n                .accountCode(\"11110\")\n                .subAccountCode(\"\")\n                .departmentCode(\"10100\")\n                .projectCode(\"\")\n                .closingJournalFlag(false)\n                .build();\n\n            var balance1 = DailyAccountBalance.builder()\n                .id(id)\n                .debitAmount(new BigDecimal(\"100000\"))\n                .creditAmount(BigDecimal.ZERO)\n                .build();\n            dailyBalanceRepository.save(balance1);\n\n            // When: \u91d1\u984d\u3092\u8ffd\u52a0\n            var saved = dailyBalanceRepository.findById(id).orElseThrow();\n            saved.addAmounts(new BigDecimal(\"50000\"), BigDecimal.ZERO);\n            dailyBalanceRepository.save(saved);\n\n            // Then: \u5408\u7b97\u3055\u308c\u308b\n            var updated = dailyBalanceRepository.findById(id);\n            assertThat(updated).isPresent();\n            assertThat(updated.get().getDebitAmount())\n                .isEqualByComparingTo(\"150000\");\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u65e5\u6b21\u6b8b\u9ad8\u306e\u691c\u7d22\")\n    class DailyBalanceSearchTest {\n\n        @Test\n        @DisplayName(\"\u65e5\u4ed8\u7bc4\u56f2\u3067\u65e5\u6b21\u6b8b\u9ad8\u3092\u691c\u7d22\u3067\u304d\u308b\")\n        void shouldFindBalancesByDateRange() {\n            // When\n            var balances = dailyBalanceRepository.findByIdPostingDateBetween(\n                LocalDate.of(2024, 4, 1),\n                LocalDate.of(2024, 4, 30)\n            );\n\n            // Then\n            assertThat(balances).allMatch(b -&gt;\n                !b.getId().getPostingDate().isBefore(LocalDate.of(2024, 4, 1)) &amp;&amp;\n                !b.getId().getPostingDate().isAfter(LocalDate.of(2024, 4, 30))\n            );\n        }\n\n        @Test\n        @DisplayName(\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\u3067\u65e5\u6b21\u6b8b\u9ad8\u3092\u691c\u7d22\u3067\u304d\u308b\")\n        void shouldFindBalancesByAccountCode() {\n            // When\n            var balances = dailyBalanceRepository.findByIdAccountCode(\"11110\");\n\n            // Then\n            assertThat(balances).allMatch(b -&gt;\n                b.getId().getAccountCode().equals(\"11110\")\n            );\n        }\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter18-orm/#185-jparepository","title":"18.5 JpaRepository \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9","text":""},{"location":"article/part3-orm/chapter18-orm/#repository","title":"\u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8 Repository","text":"DailyAccountBalanceJpaRepository.java <pre><code>package com.example.accounting.infrastructure.persistence.repository;\n\nimport com.example.accounting.domain.model.balance.DailyAccountBalance;\nimport com.example.accounting.domain.model.balance.DailyAccountBalanceId;\nimport com.example.accounting.domain.model.balance.DailyReportLineProjection;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.jpa.repository.Modifying;\nimport org.springframework.data.jpa.repository.Query;\nimport org.springframework.data.repository.query.Param;\nimport org.springframework.stereotype.Repository;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.util.List;\n\n/**\n * \u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8 JpaRepository\n *\n * JPA \u7248\u3067\u306f JpaRepository \u3092\u7d99\u627f\n * \u8907\u5408\u4e3b\u30ad\u30fc\u306f DailyAccountBalanceId \u3068\u3057\u3066\u5b9a\u7fa9\n * \u96c6\u8a08\u30af\u30a8\u30ea\u306f @Query + Projection \u3067\u5b9f\u88c5\n */\n@Repository\npublic interface DailyAccountBalanceJpaRepository\n        extends JpaRepository&lt;DailyAccountBalance, DailyAccountBalanceId&gt; {\n\n    /**\n     * \u65e5\u4ed8\u7bc4\u56f2\u3067\u691c\u7d22\n     * \u30e1\u30bd\u30c3\u30c9\u540d\u898f\u7d04\u3067\u81ea\u52d5\u751f\u6210\n     */\n    List&lt;DailyAccountBalance&gt; findByIdPostingDateBetween(\n            LocalDate fromDate, LocalDate toDate);\n\n    /**\n     * \u8d77\u7968\u65e5\u3067\u691c\u7d22\n     */\n    List&lt;DailyAccountBalance&gt; findByIdPostingDate(LocalDate postingDate);\n\n    /**\n     * \u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\u3067\u691c\u7d22\n     */\n    List&lt;DailyAccountBalance&gt; findByIdAccountCode(String accountCode);\n\n    /**\n     * \u90e8\u9580\u30b3\u30fc\u30c9\u3067\u691c\u7d22\n     */\n    List&lt;DailyAccountBalance&gt; findByIdDepartmentCode(String departmentCode);\n\n    /**\n     * \u65e5\u8a08\u8868\u30c7\u30fc\u30bf\u53d6\u5f97\n     * Native Query \u3067\u96c6\u8a08\u30af\u30a8\u30ea\u3092\u5b9f\u884c\u3057\u3001Projection \u306b\u30de\u30c3\u30d4\u30f3\u30b0\n     */\n    @Query(value = \"\"\"\n        SELECT\n            d.\"\u8d77\u7968\u65e5\" as reportDate,\n            d.\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\" as accountCode,\n            a.\"\u52d8\u5b9a\u79d1\u76ee\u540d\" as accountName,\n            d.\"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\" as subAccountCode,\n            '' as subAccountName,\n            SUM(d.\"\u501f\u65b9\u91d1\u984d\") as debitTotal,\n            SUM(d.\"\u8cb8\u65b9\u91d1\u984d\") as creditTotal,\n            CASE\n                WHEN a.\"\u8cb8\u501f\u533a\u5206\" = '\u501f\u65b9'\n                THEN SUM(d.\"\u501f\u65b9\u91d1\u984d\") - SUM(d.\"\u8cb8\u65b9\u91d1\u984d\")\n                ELSE SUM(d.\"\u8cb8\u65b9\u91d1\u984d\") - SUM(d.\"\u501f\u65b9\u91d1\u984d\")\n            END as balance\n        FROM \"\u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\" d\n        JOIN \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\" a ON d.\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\" = a.\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\"\n        WHERE d.\"\u8d77\u7968\u65e5\" = :reportDate\n        GROUP BY d.\"\u8d77\u7968\u65e5\", d.\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", a.\"\u52d8\u5b9a\u79d1\u76ee\u540d\",\n                 d.\"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\", a.\"\u8cb8\u501f\u533a\u5206\"\n        ORDER BY d.\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", d.\"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\"\n        \"\"\", nativeQuery = true)\n    List&lt;DailyReportLineProjection&gt; getDailyReport(@Param(\"reportDate\") LocalDate reportDate);\n\n    /**\n     * UPSERT \u7528\u306e\u30ab\u30b9\u30bf\u30e0\u30af\u30a8\u30ea\n     * PostgreSQL \u306e ON CONFLICT \u3092\u4f7f\u7528\n     */\n    @Modifying\n    @Query(value = \"\"\"\n        INSERT INTO \"\u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\" (\n            \"\u8d77\u7968\u65e5\", \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\",\n            \"\u90e8\u9580\u30b3\u30fc\u30c9\", \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9\", \"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\",\n            \"\u501f\u65b9\u91d1\u984d\", \"\u8cb8\u65b9\u91d1\u984d\", \"\u4f5c\u6210\u65e5\u6642\", \"\u66f4\u65b0\u65e5\u6642\"\n        ) VALUES (\n            :postingDate, :accountCode, :subAccountCode,\n            :departmentCode, :projectCode, :closingJournalFlag,\n            :debitAmount, :creditAmount, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP\n        )\n        ON CONFLICT (\n            \"\u8d77\u7968\u65e5\", \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\",\n            \"\u90e8\u9580\u30b3\u30fc\u30c9\", \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9\", \"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\"\n        )\n        DO UPDATE SET\n            \"\u501f\u65b9\u91d1\u984d\" = \"\u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\".\"\u501f\u65b9\u91d1\u984d\" + EXCLUDED.\"\u501f\u65b9\u91d1\u984d\",\n            \"\u8cb8\u65b9\u91d1\u984d\" = \"\u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\".\"\u8cb8\u65b9\u91d1\u984d\" + EXCLUDED.\"\u8cb8\u65b9\u91d1\u984d\",\n            \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP\n        \"\"\", nativeQuery = true)\n    void upsert(\n            @Param(\"postingDate\") LocalDate postingDate,\n            @Param(\"accountCode\") String accountCode,\n            @Param(\"subAccountCode\") String subAccountCode,\n            @Param(\"departmentCode\") String departmentCode,\n            @Param(\"projectCode\") String projectCode,\n            @Param(\"closingJournalFlag\") Boolean closingJournalFlag,\n            @Param(\"debitAmount\") BigDecimal debitAmount,\n            @Param(\"creditAmount\") BigDecimal creditAmount);\n}\n</code></pre>"},{"location":"article/part3-orm/chapter18-orm/#186","title":"18.6 \u6708\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u306e\u8a2d\u8a08","text":""},{"location":"article/part3-orm/chapter18-orm/#_5","title":"\u6708\u6b21\u6b8b\u9ad8\u7ba1\u7406\u306e\u76ee\u7684","text":"<p>\u6708\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u306f\u3001\u6708\u5358\u4f4d\u3067\u306e\u6b8b\u9ad8\u7ba1\u7406\u3092\u884c\u3044\u3001\u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868\u3084\u8ca1\u52d9\u8af8\u8868\u306e\u51fa\u529b\u306b\u4f7f\u7528\u3057\u307e\u3059\u3002</p> <p></p> \u76ee\u7684 \u8aac\u660e \u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868 \u6708\u6b21\u306e\u52d8\u5b9a\u79d1\u76ee\u5225\u501f\u65b9\u30fb\u8cb8\u65b9\u30fb\u6b8b\u9ad8\u306e\u96c6\u8a08 \u8ca1\u52d9\u8af8\u8868\u51fa\u529b \u8cb8\u501f\u5bfe\u7167\u8868\u30fb\u640d\u76ca\u8a08\u7b97\u66f8\u306e\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9 \u6708\u6b21\u6c7a\u7b97 \u6708\u672b\u6b8b\u9ad8\u306e\u78ba\u5b9a\u3068\u7e70\u8d8a\u51e6\u7406 \u6c7a\u7b97\u4ed5\u8a33\u5bfe\u5fdc \u901a\u5e38\u4ed5\u8a33\u3068\u6c7a\u7b97\u4ed5\u8a33\u306e\u5206\u96e2\u7ba1\u7406"},{"location":"article/part3-orm/chapter18-orm/#er","title":"\u6708\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u30c6\u30fc\u30d6\u30eb\u306e ER \u56f3","text":""},{"location":"article/part3-orm/chapter18-orm/#187-jpa","title":"18.7 \u6708\u6b21\u6b8b\u9ad8\u306e JPA \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3","text":""},{"location":"article/part3-orm/chapter18-orm/#_6","title":"\u8907\u5408\u4e3b\u30ad\u30fc\u30af\u30e9\u30b9","text":"MonthlyAccountBalanceId.java <pre><code>package com.example.accounting.domain.model.balance;\n\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Embeddable;\nimport lombok.*;\n\nimport java.io.Serializable;\nimport java.util.Objects;\n\n/**\n * \u6708\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u306e\u8907\u5408\u4e3b\u30ad\u30fc\n */\n@Embeddable\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class MonthlyAccountBalanceId implements Serializable {\n\n    @Column(name = \"\u6c7a\u7b97\u671f\", nullable = false)\n    private Integer fiscalYear;\n\n    @Column(name = \"\u6708\u5ea6\", nullable = false)\n    private Integer month;\n\n    @Column(name = \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", length = 5, nullable = false)\n    private String accountCode;\n\n    @Column(name = \"\u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\", length = 10, nullable = false)\n    private String subAccountCode;\n\n    @Column(name = \"\u90e8\u9580\u30b3\u30fc\u30c9\", length = 5, nullable = false)\n    private String departmentCode;\n\n    @Column(name = \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9\", length = 10, nullable = false)\n    private String projectCode;\n\n    @Column(name = \"\u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\", nullable = false)\n    private Boolean closingJournalFlag;\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        MonthlyAccountBalanceId that = (MonthlyAccountBalanceId) o;\n        return Objects.equals(fiscalYear, that.fiscalYear) &amp;&amp;\n               Objects.equals(month, that.month) &amp;&amp;\n               Objects.equals(accountCode, that.accountCode) &amp;&amp;\n               Objects.equals(subAccountCode, that.subAccountCode) &amp;&amp;\n               Objects.equals(departmentCode, that.departmentCode) &amp;&amp;\n               Objects.equals(projectCode, that.projectCode) &amp;&amp;\n               Objects.equals(closingJournalFlag, that.closingJournalFlag);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(fiscalYear, month, accountCode, subAccountCode,\n                           departmentCode, projectCode, closingJournalFlag);\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter18-orm/#entity_1","title":"\u6708\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8 Entity","text":"MonthlyAccountBalance.java <pre><code>package com.example.accounting.domain.model.balance;\n\nimport com.example.accounting.domain.model.account.Account;\nimport com.example.accounting.domain.model.department.Department;\nimport jakarta.persistence.*;\nimport lombok.*;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\n\n/**\n * \u6708\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8 Entity\n */\n@Entity\n@Table(name = \"\u6708\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\")\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class MonthlyAccountBalance {\n\n    @EmbeddedId\n    private MonthlyAccountBalanceId id;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", referencedColumnName = \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\",\n                insertable = false, updatable = false)\n    private Account account;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = \"\u90e8\u9580\u30b3\u30fc\u30c9\", referencedColumnName = \"\u90e8\u9580\u30b3\u30fc\u30c9\",\n                insertable = false, updatable = false)\n    private Department department;\n\n    @Column(name = \"\u6708\u521d\u6b8b\u9ad8\", nullable = false, precision = 13)\n    private BigDecimal openingBalance;\n\n    @Column(name = \"\u501f\u65b9\u91d1\u984d\", nullable = false, precision = 14, scale = 2)\n    private BigDecimal debitAmount;\n\n    @Column(name = \"\u8cb8\u65b9\u91d1\u984d\", nullable = false, precision = 14, scale = 2)\n    private BigDecimal creditAmount;\n\n    @Column(name = \"\u6708\u672b\u6b8b\u9ad8\", nullable = false, precision = 13)\n    private BigDecimal closingBalance;\n\n    @Column(name = \"\u4f5c\u6210\u65e5\u6642\", nullable = false, updatable = false)\n    private LocalDateTime createdAt;\n\n    @Column(name = \"\u66f4\u65b0\u65e5\u6642\", nullable = false)\n    private LocalDateTime updatedAt;\n\n    /**\n     * \u6708\u672b\u6b8b\u9ad8\u3092\u8a08\u7b97\u3059\u308b\n     * @param isDebitAccount \u501f\u65b9\u52d8\u5b9a\u304b\u3069\u3046\u304b\n     */\n    public void calculateClosingBalance(boolean isDebitAccount) {\n        if (isDebitAccount) {\n            // \u501f\u65b9\u52d8\u5b9a\uff1a\u6708\u521d + \u501f\u65b9 - \u8cb8\u65b9\n            this.closingBalance = openingBalance\n                .add(debitAmount)\n                .subtract(creditAmount);\n        } else {\n            // \u8cb8\u65b9\u52d8\u5b9a\uff1a\u6708\u521d + \u8cb8\u65b9 - \u501f\u65b9\n            this.closingBalance = openingBalance\n                .add(creditAmount)\n                .subtract(debitAmount);\n        }\n    }\n\n    @PrePersist\n    protected void onCreate() {\n        LocalDateTime now = LocalDateTime.now();\n        this.createdAt = now;\n        this.updatedAt = now;\n        initializeDefaults();\n    }\n\n    @PreUpdate\n    protected void onUpdate() {\n        this.updatedAt = LocalDateTime.now();\n    }\n\n    private void initializeDefaults() {\n        if (this.openingBalance == null) this.openingBalance = BigDecimal.ZERO;\n        if (this.debitAmount == null) this.debitAmount = BigDecimal.ZERO;\n        if (this.creditAmount == null) this.creditAmount = BigDecimal.ZERO;\n        if (this.closingBalance == null) this.closingBalance = BigDecimal.ZERO;\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter18-orm/#projection_1","title":"\u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868\u884c\u7528 Projection","text":"TrialBalanceLineProjection.java \u3068 TrialBalanceLine.java <pre><code>package com.example.accounting.domain.model.balance;\n\nimport java.math.BigDecimal;\n\n/**\n * \u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868\u884c\u306e Projection \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\n */\npublic interface TrialBalanceLineProjection {\n    Integer getFiscalYear();\n    Integer getMonth();\n    String getAccountCode();\n    String getAccountName();\n    String getBsplType();\n    String getDebitCreditType();\n    BigDecimal getOpeningBalance();\n    BigDecimal getDebitTotal();\n    BigDecimal getCreditTotal();\n    BigDecimal getClosingBalance();\n}\n</code></pre> <pre><code>package com.example.accounting.domain.model.balance;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.math.BigDecimal;\n\n/**\n * \u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868\u884c DTO\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class TrialBalanceLine {\n    private Integer fiscalYear;           // \u6c7a\u7b97\u671f\n    private Integer month;                // \u6708\u5ea6\n    private String accountCode;           // \u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\n    private String accountName;           // \u52d8\u5b9a\u79d1\u76ee\u540d\n    private String bsplType;              // BSPL\u533a\u5206\n    private String debitCreditType;       // \u8cb8\u501f\u533a\u5206\n    private BigDecimal openingBalance;    // \u6708\u521d\u6b8b\u9ad8\n    private BigDecimal debitTotal;        // \u501f\u65b9\u5408\u8a08\n    private BigDecimal creditTotal;       // \u8cb8\u65b9\u5408\u8a08\n    private BigDecimal closingBalance;    // \u6708\u672b\u6b8b\u9ad8\n\n    /**\n     * Projection \u304b\u3089 DTO \u3092\u751f\u6210\n     */\n    public static TrialBalanceLine fromProjection(TrialBalanceLineProjection projection) {\n        return TrialBalanceLine.builder()\n            .fiscalYear(projection.getFiscalYear())\n            .month(projection.getMonth())\n            .accountCode(projection.getAccountCode())\n            .accountName(projection.getAccountName())\n            .bsplType(projection.getBsplType())\n            .debitCreditType(projection.getDebitCreditType())\n            .openingBalance(projection.getOpeningBalance())\n            .debitTotal(projection.getDebitTotal())\n            .creditTotal(projection.getCreditTotal())\n            .closingBalance(projection.getClosingBalance())\n            .build();\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter18-orm/#188","title":"18.8 \u6b8b\u9ad8\u66f4\u65b0\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":"BalanceUpdateService.java <pre><code>package com.example.accounting.application.service;\n\nimport com.example.accounting.application.port.out.DailyAccountBalanceRepository;\nimport com.example.accounting.application.port.out.MonthlyAccountBalanceRepository;\nimport com.example.accounting.domain.model.journal.DebitCreditType;\nimport com.example.accounting.domain.model.journal.Journal;\nimport com.example.accounting.domain.model.journal.JournalDebitCreditDetail;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\n\n/**\n * \u6b8b\u9ad8\u66f4\u65b0\u30b5\u30fc\u30d3\u30b9\n *\n * \u4ed5\u8a33\u767b\u9332\u6642\u306e\u6b8b\u9ad8\u66f4\u65b0\u3092\u62c5\u5f53\n * JPA \u7248\u3067\u3082\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u306f MyBatis \u7248\u3068\u540c\u3058\n */\n@Service\n@RequiredArgsConstructor\n@Slf4j\npublic class BalanceUpdateService {\n\n    private final DailyAccountBalanceRepository dailyBalanceRepository;\n    private final MonthlyAccountBalanceRepository monthlyBalanceRepository;\n\n    /**\n     * \u4ed5\u8a33\u767b\u9332\u306b\u4f34\u3046\u6b8b\u9ad8\u66f4\u65b0\n     */\n    @Transactional\n    public void updateBalancesForJournal(Journal journal) {\n        var postingDate = journal.getPostingDate();\n        var closingFlag = journal.getClosingEntryFlag() != null\n            ? journal.getClosingEntryFlag() : false;\n\n        // \u4ed5\u8a33\u306e\u5404\u660e\u7d30\u306b\u3064\u3044\u3066\u6b8b\u9ad8\u3092\u66f4\u65b0\n        for (var detail : journal.getDetails()) {\n            for (var dcDetail : detail.getDebitCreditDetails()) {\n                updateDailyBalance(postingDate, dcDetail, closingFlag);\n            }\n        }\n\n        log.info(\"\u6b8b\u9ad8\u66f4\u65b0\u5b8c\u4e86: \u4ed5\u8a33\u4f1d\u7968\u756a\u53f7={}, \u8d77\u7968\u65e5={}\",\n            journal.getJournalVoucherNumber(), postingDate);\n    }\n\n    /**\n     * \u65e5\u6b21\u6b8b\u9ad8\u306e\u66f4\u65b0\n     * JPA \u7248\u3067\u306f upsert \u30e1\u30bd\u30c3\u30c9\u3067 Native Query \u3092\u4f7f\u7528\n     */\n    private void updateDailyBalance(LocalDate postingDate,\n            JournalDebitCreditDetail dcDetail, boolean closingFlag) {\n        var debitAmount = dcDetail.getDebitCreditType() == DebitCreditType.DEBIT\n            ? dcDetail.getAmount() : BigDecimal.ZERO;\n        var creditAmount = dcDetail.getDebitCreditType() == DebitCreditType.CREDIT\n            ? dcDetail.getAmount() : BigDecimal.ZERO;\n\n        dailyBalanceRepository.upsert(\n            postingDate,\n            dcDetail.getAccountCode(),\n            dcDetail.getSubAccountCode() != null ? dcDetail.getSubAccountCode() : \"\",\n            dcDetail.getDepartmentCode() != null ? dcDetail.getDepartmentCode() : \"00000\",\n            dcDetail.getProjectCode() != null ? dcDetail.getProjectCode() : \"\",\n            closingFlag,\n            debitAmount,\n            creditAmount\n        );\n    }\n\n    /**\n     * \u6708\u6b21\u6b8b\u9ad8\u306e\u96c6\u8a08\n     */\n    @Transactional\n    public int aggregateMonthlyBalance(int fiscalYear, int month) {\n        LocalDate fromDate = LocalDate.of(fiscalYear, month, 1);\n        LocalDate toDate = fromDate.withDayOfMonth(fromDate.lengthOfMonth());\n\n        int count = monthlyBalanceRepository.aggregateFromDaily(\n            fiscalYear, month, fromDate, toDate);\n\n        log.info(\"\u6708\u6b21\u6b8b\u9ad8\u96c6\u8a08\u5b8c\u4e86: \u6c7a\u7b97\u671f={}, \u6708\u5ea6={}, \u4ef6\u6570={}\",\n            fiscalYear, month, count);\n\n        return count;\n    }\n\n    /**\n     * \u6708\u6b21\u6b8b\u9ad8\u306e\u7e70\u8d8a\u51e6\u7406\n     */\n    @Transactional\n    public int carryForwardMonthlyBalance(int fiscalYear, int fromMonth, int toMonth) {\n        int count = monthlyBalanceRepository.carryForward(fiscalYear, fromMonth, toMonth);\n\n        log.info(\"\u6708\u6b21\u6b8b\u9ad8\u7e70\u8d8a\u5b8c\u4e86: \u6c7a\u7b97\u671f={}, {}\u6708 \u2192 {}\u6708, \u4ef6\u6570={}\",\n            fiscalYear, fromMonth, toMonth, count);\n\n        return count;\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter18-orm/#189","title":"18.9 \u307e\u3068\u3081\uff1a\u8a2d\u8a08\u306e\u30dd\u30a4\u30f3\u30c8","text":""},{"location":"article/part3-orm/chapter18-orm/#_7","title":"\u8907\u5408\u4e3b\u30ad\u30fc\u306b\u3088\u308b\u591a\u6b21\u5143\u7ba1\u7406","text":"<ol> <li>\u65e5\u6b21\u6b8b\u9ad8\uff1a\u8d77\u7968\u65e5 + \u52d8\u5b9a\u79d1\u76ee + \u88dc\u52a9\u79d1\u76ee + \u90e8\u9580 + \u30d7\u30ed\u30b8\u30a7\u30af\u30c8 + \u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0</li> <li>\u6708\u6b21\u6b8b\u9ad8\uff1a\u6c7a\u7b97\u671f + \u6708\u5ea6 + \u52d8\u5b9a\u79d1\u76ee + \u88dc\u52a9\u79d1\u76ee + \u90e8\u9580 + \u30d7\u30ed\u30b8\u30a7\u30af\u30c8 + \u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0</li> <li>JPA \u3067\u306f @EmbeddedId + @Embeddable \u3067\u8907\u5408\u4e3b\u30ad\u30fc\u3092\u8868\u73fe</li> </ol>"},{"location":"article/part3-orm/chapter18-orm/#upsert","title":"UPSERT \u306b\u3088\u308b\u52b9\u7387\u7684\u306a\u6b8b\u9ad8\u66f4\u65b0","text":"<ul> <li>PostgreSQL \u306e <code>INSERT ON CONFLICT DO UPDATE</code> \u3092\u4f7f\u7528</li> <li>JPA \u3067\u306f @Query + nativeQuery \u3067 Native SQL \u3092\u5b9f\u884c</li> <li>\u65e2\u5b58\u30ec\u30b3\u30fc\u30c9\u304c\u3042\u308c\u3070\u91d1\u984d\u3092\u52a0\u7b97\u3001\u306a\u3051\u308c\u3070\u65b0\u898f\u633f\u5165</li> </ul>"},{"location":"article/part3-orm/chapter18-orm/#projection_2","title":"Projection \u306b\u3088\u308b\u96c6\u8a08\u7d50\u679c\u306e\u30de\u30c3\u30d4\u30f3\u30b0","text":"<ul> <li>Native Query \u306e\u7d50\u679c\u3092 Projection \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3067\u53d7\u3051\u53d6\u308a</li> <li>Projection \u304b\u3089 DTO \u3078\u306e\u5909\u63db\u30e1\u30bd\u30c3\u30c9\u3092\u7528\u610f</li> <li>\u578b\u5b89\u5168\u306a\u96c6\u8a08\u7d50\u679c\u306e\u53d6\u308a\u6271\u3044\u304c\u53ef\u80fd</li> </ul>"},{"location":"article/part3-orm/chapter18-orm/#mybatis","title":"MyBatis \u7248\u3068\u306e\u6bd4\u8f03","text":"\u89b3\u70b9 MyBatis \u7248 JPA \u7248 \u8907\u5408\u4e3b\u30ad\u30fc Key \u5185\u90e8\u30af\u30e9\u30b9 @EmbeddedId + @Embeddable \u96c6\u8a08\u7d50\u679c\u30de\u30c3\u30d4\u30f3\u30b0 resultMap + DTO Projection \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9 UPSERT XML \u3067 INSERT ON CONFLICT @Query + nativeQuery \u30c6\u30b9\u30c8 @MybatisTest @DataJpaTest"},{"location":"article/part3-orm/chapter18-orm/#_8","title":"\u6b21\u7ae0\u4e88\u544a","text":"<p>\u7b2c19\u7ae0\u3067\u306f\u3001\u8d64\u9ed2\u51e6\u7406\u306b\u3088\u308b\u30c7\u30fc\u30bf\u8a02\u6b63\u65b9\u5f0f\u3068\u3001JPA Auditing \u3092\u4f7f\u7528\u3057\u305f\u30ed\u30b0\u7ba1\u7406\u306e\u8a2d\u8a08\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u307e\u3059\u3002</p>"},{"location":"article/part3-orm/chapter19-orm/","title":"\u7b2c19\u7ae0\uff1a\u8d64\u9ed2\u3068\u30ed\u30b0\u306e\u8a2d\u8a08\uff08ORM\u7248\uff09","text":"<p>\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306b\u304a\u3051\u308b\u30c7\u30fc\u30bf\u8a02\u6b63\u65b9\u5f0f\uff08\u8d64\u9ed2\u51e6\u7406\uff09\u3068\u30ed\u30b0\u7ba1\u7406\u306e\u8a2d\u8a08\u3092\u884c\u3044\u307e\u3059\u3002</p> <p>JPA \u7248\u3067\u306f\u3001@EntityListeners \u3068 AuditingEntityListener \u3092\u4f7f\u7528\u3057\u305f\u76e3\u67fb\u8a3c\u8de1\u306e\u5b9f\u88c5\u3092\u884c\u3044\u307e\u3059\u3002</p>"},{"location":"article/part3-orm/chapter19-orm/#191","title":"19.1 \u8d64\u9ed2\u51e6\u7406\u306e\u6982\u5ff5","text":"<p>\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u3067\u306f\u3001\u4e00\u5ea6\u767b\u9332\u3057\u305f\u30c7\u30fc\u30bf\u306e\u300c\u524a\u9664\u300d\u3084\u300c\u66f4\u65b0\u300d\u3092\u5b89\u6613\u306b\u884c\u3046\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002\u76e3\u67fb\u8a3c\u8de1\u3092\u78ba\u4fdd\u3057\u3064\u3064\u3001\u30c7\u30fc\u30bf\u8a02\u6b63\u3092\u884c\u3046\u65b9\u5f0f\u304c\u5fc5\u8981\u3067\u3059\u3002</p>"},{"location":"article/part3-orm/chapter19-orm/#_1","title":"\u8d64\u9ed2\u51e6\u7406\u3068\u306f","text":"<p>\u8d64\u9ed2\u51e6\u7406\u3068\u306f\u3001\u8aa4\u3063\u305f\u4ed5\u8a33\u3092\u8a02\u6b63\u3059\u308b\u969b\u306b\u3001\u5143\u306e\u4ed5\u8a33\u3092\u300c\u8d64\u4f1d\uff08\u53d6\u6d88\u4f1d\u7968\uff09\u300d\u3067\u6253\u3061\u6d88\u3057\u3001\u6b63\u3057\u3044\u4ed5\u8a33\u3092\u300c\u9ed2\u4f1d\uff08\u8a02\u6b63\u4f1d\u7968\uff09\u300d\u3068\u3057\u3066\u65b0\u898f\u767b\u9332\u3059\u308b\u65b9\u5f0f\u3067\u3059\u3002</p> <p></p>"},{"location":"article/part3-orm/chapter19-orm/#_2","title":"\u8d64\u9ed2\u51e6\u7406\u306e\u30e1\u30ea\u30c3\u30c8","text":"\u30e1\u30ea\u30c3\u30c8 \u8aac\u660e \u76e3\u67fb\u8a3c\u8de1\u306e\u78ba\u4fdd \u5143\u306e\u4ed5\u8a33\u304c\u6b8b\u308a\u3001\u8a02\u6b63\u5c65\u6b74\u304c\u8ffd\u8de1\u53ef\u80fd \u30c7\u30fc\u30bf\u6574\u5408\u6027 \u7269\u7406\u524a\u9664\u3092\u884c\u308f\u306a\u3044\u305f\u3081\u3001\u53c2\u7167\u6574\u5408\u6027\u304c\u7dad\u6301\u3055\u308c\u308b \u4f1a\u8a08\u57fa\u6e96\u6e96\u62e0 \u4f1a\u8a08\u539f\u5247\u306b\u5247\u3063\u305f\u6b63\u5f53\u306a\u8a02\u6b63\u65b9\u6cd5 \u6b8b\u9ad8\u306e\u81ea\u52d5\u8abf\u6574 \u8d64\u4f1d\u306b\u3088\u308a\u6b8b\u9ad8\u304c\u81ea\u52d5\u7684\u306b\u8a02\u6b63\u3055\u308c\u308b"},{"location":"article/part3-orm/chapter19-orm/#192","title":"19.2 \u8d64\u9ed2\u51e6\u7406\u306e\u30c6\u30fc\u30d6\u30eb\u8a2d\u8a08","text":"<p>\u4ed5\u8a33\u30c6\u30fc\u30d6\u30eb\u306b\u306f\u3001\u8d64\u9ed2\u51e6\u7406\u306b\u5fc5\u8981\u306a\u9805\u76ee\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part3-orm/chapter19-orm/#193-mybatis","title":"19.3 MyBatis \u7248\u3068\u306e\u5b9f\u88c5\u6bd4\u8f03","text":""},{"location":"article/part3-orm/chapter19-orm/#_3","title":"\u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u5c64\u306e\u6bd4\u8f03","text":"\u6a5f\u80fd MyBatis \u7248 JPA \u7248 \u76e3\u67fb\u30ab\u30e9\u30e0\u8a2d\u5b9a \u624b\u52d5 / Interceptor @EnableJpaAuditing \u30de\u30b9\u30bf\u5909\u66f4\u30ed\u30b0 DB \u30c8\u30ea\u30ac\u30fc @EntityListeners ENUM \u5909\u63db TypeHandler AttributeConverter \u52d5\u7684\u30af\u30a8\u30ea XML <code>&lt;if&gt;</code> \u30bf\u30b0 Specification \u30d1\u30bf\u30fc\u30f3 \u4e00\u62ec\u4fdd\u5b58\uff08Cascade\uff09 \u660e\u793a\u7684\u306b\u5404\u30c6\u30fc\u30d6\u30eb INSERT CascadeType.ALL"},{"location":"article/part3-orm/chapter19-orm/#194","title":"19.4 \u8d64\u9ed2\u51e6\u7406\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":"JournalCorrectionService.java <pre><code>package com.example.accounting.application.service;\n\nimport com.example.accounting.application.port.out.JournalRepository;\nimport com.example.accounting.domain.model.journal.*;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.time.LocalDate;\nimport java.util.ArrayList;\n\n/**\n * \u8d64\u9ed2\u51e6\u7406\u30b5\u30fc\u30d3\u30b9\n *\n * JPA \u7248\u3067\u3082\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u306f MyBatis \u7248\u3068\u540c\u3058\n * Entity \u306e\u64cd\u4f5c\u65b9\u6cd5\u304c\u7570\u306a\u308b\uff08JPA \u3067\u306f Cascade \u3092\u6d3b\u7528\uff09\n */\n@Service\n@RequiredArgsConstructor\n@Slf4j\npublic class JournalCorrectionService {\n\n    private final JournalRepository journalRepository;\n    private final BalanceUpdateService balanceUpdateService;\n\n    /**\n     * \u4ed5\u8a33\u3092\u8d64\u9ed2\u8a02\u6b63\u3059\u308b\n     * @param originalVoucherNumber \u5143\u4f1d\u7968\u756a\u53f7\n     * @param correctedJournal \u8a02\u6b63\u5f8c\u306e\u4ed5\u8a33\uff08\u9ed2\u4f1d\uff09\n     * @return \u8d64\u4f1d\u3068\u9ed2\u4f1d\u306e\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\n     */\n    @Transactional\n    public CorrectionResult correctJournal(String originalVoucherNumber,\n            Journal correctedJournal) {\n        // \u5143\u4f1d\u7968\u3092\u53d6\u5f97\n        var original = journalRepository.findByVoucherNumber(originalVoucherNumber)\n            .orElseThrow(() -&gt; new IllegalArgumentException(\n                \"\u5143\u4f1d\u7968\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + originalVoucherNumber));\n\n        // \u8d64\u4f1d\u3092\u4f5c\u6210\n        var redSlip = createRedSlip(original);\n        journalRepository.save(redSlip);\n        balanceUpdateService.updateBalancesForJournal(redSlip);\n\n        // \u9ed2\u4f1d\uff08\u8a02\u6b63\u4f1d\u7968\uff09\u3092\u767b\u9332\n        if (!correctedJournal.isBalanced()) {\n            throw new IllegalArgumentException(\"\u8a02\u6b63\u4ed5\u8a33\u306e\u8cb8\u501f\u304c\u4e00\u81f4\u3057\u307e\u305b\u3093\");\n        }\n        journalRepository.save(correctedJournal);\n        balanceUpdateService.updateBalancesForJournal(correctedJournal);\n\n        log.info(\"\u8d64\u9ed2\u8a02\u6b63\u5b8c\u4e86: \u5143\u4f1d\u7968={}, \u8d64\u4f1d={}, \u9ed2\u4f1d={}\",\n            originalVoucherNumber,\n            redSlip.getJournalVoucherNumber(),\n            correctedJournal.getJournalVoucherNumber());\n\n        return new CorrectionResult(\n            redSlip.getJournalVoucherNumber(),\n            correctedJournal.getJournalVoucherNumber()\n        );\n    }\n\n    /**\n     * \u4ed5\u8a33\u3092\u53d6\u6d88\u3059\u308b\uff08\u8d64\u4f1d\u306e\u307f\u767a\u884c\uff09\n     * @param voucherNumber \u53d6\u6d88\u5bfe\u8c61\u306e\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\n     * @return \u8d64\u4f1d\u306e\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\n     */\n    @Transactional\n    public String cancelJournal(String voucherNumber) {\n        var original = journalRepository.findByVoucherNumber(voucherNumber)\n            .orElseThrow(() -&gt; new IllegalArgumentException(\n                \"\u4ed5\u8a33\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + voucherNumber));\n\n        // \u65e2\u306b\u8d64\u4f1d\u304c\u767a\u884c\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\n        if (original.getRedSlipFlag() != null &amp;&amp; original.getRedSlipFlag()) {\n            throw new IllegalStateException(\"\u3053\u306e\u4ed5\u8a33\u306f\u65e2\u306b\u53d6\u6d88\u6e08\u307f\u3067\u3059\");\n        }\n\n        // \u8d64\u4f1d\u3092\u4f5c\u6210\n        var redSlip = createRedSlip(original);\n        journalRepository.save(redSlip);\n        balanceUpdateService.updateBalancesForJournal(redSlip);\n\n        log.info(\"\u4ed5\u8a33\u53d6\u6d88\u5b8c\u4e86: \u5143\u4f1d\u7968={}, \u8d64\u4f1d={}\",\n            voucherNumber, redSlip.getJournalVoucherNumber());\n\n        return redSlip.getJournalVoucherNumber();\n    }\n\n    /**\n     * \u8d64\u4f1d\u3092\u4f5c\u6210\u3059\u308b\n     *\n     * JPA \u7248\u3067\u306f CascadeType.ALL \u306b\u3088\u308a\u3001\n     * Journal \u3092\u4fdd\u5b58\u3059\u308b\u3068 details \u3082\u81ea\u52d5\u7684\u306b\u4fdd\u5b58\u3055\u308c\u308b\n     */\n    private Journal createRedSlip(Journal original) {\n        // \u8d64\u4f1d\u306e\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\u3092\u751f\u6210\uff08\u5143\u4f1d\u7968\u756a\u53f7 + R\uff09\n        var redVoucherNumber = original.getJournalVoucherNumber() + \"R\";\n\n        // \u8cb8\u501f\u3092\u53cd\u8ee2\u3057\u305f\u660e\u7d30\u3092\u4f5c\u6210\n        var redDetails = new ArrayList&lt;JournalDetail&gt;();\n        for (var detail : original.getDetails()) {\n            var reversedDCDetails = new ArrayList&lt;JournalDebitCreditDetail&gt;();\n            for (var dcDetail : detail.getDebitCreditDetails()) {\n                var reversed = JournalDebitCreditDetail.builder()\n                    .journalVoucherNumber(redVoucherNumber)\n                    .lineNumber(dcDetail.getLineNumber())\n                    .debitCreditLineNumber(dcDetail.getDebitCreditLineNumber())\n                    // \u501f\u65b9\u2192\u8cb8\u65b9\u3001\u8cb8\u65b9\u2192\u501f\u65b9\u306b\u53cd\u8ee2\n                    .debitCreditType(\n                        dcDetail.getDebitCreditType() == DebitCreditType.DEBIT\n                            ? DebitCreditType.CREDIT\n                            : DebitCreditType.DEBIT)\n                    .accountCode(dcDetail.getAccountCode())\n                    .subAccountCode(dcDetail.getSubAccountCode())\n                    .departmentCode(dcDetail.getDepartmentCode())\n                    .amount(dcDetail.getAmount())\n                    .taxType(dcDetail.getTaxType())\n                    .taxRate(dcDetail.getTaxRate())\n                    .build();\n                reversedDCDetails.add(reversed);\n            }\n\n            var redDetail = JournalDetail.builder()\n                .journalVoucherNumber(redVoucherNumber)\n                .lineNumber(detail.getLineNumber())\n                .lineSummary(detail.getLineSummary() + \"\uff08\u53d6\u6d88\uff09\")\n                .debitCreditDetails(reversedDCDetails)\n                .build();\n            redDetails.add(redDetail);\n        }\n\n        return Journal.builder()\n            .journalVoucherNumber(redVoucherNumber)\n            .postingDate(LocalDate.now())\n            .entryDate(LocalDate.now())\n            .closingEntryFlag(original.getClosingEntryFlag())\n            .voucherType(original.getVoucherType())\n            .departmentCode(original.getDepartmentCode())\n            .redSlipFlag(true)\n            .redBlackVoucherNumber(extractNumericPart(original.getJournalVoucherNumber()))\n            .details(redDetails)\n            .build();\n    }\n\n    private Integer extractNumericPart(String voucherNumber) {\n        return Integer.parseInt(voucherNumber.replaceAll(\"[^0-9]\", \"\"));\n    }\n\n    /**\n     * \u8a02\u6b63\u7d50\u679c\n     */\n    public record CorrectionResult(\n        String redSlipNumber,\n        String blackSlipNumber\n    ) {}\n}\n</code></pre>"},{"location":"article/part3-orm/chapter19-orm/#195","title":"19.5 \u30ed\u30b0\u7ba1\u7406\u65b9\u5f0f\u306e\u9078\u629e","text":"<p>\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u30ed\u30b0\u7ba1\u7406\u306b\u306f\u30013\u3064\u306e\u65b9\u5f0f\u304c\u3042\u308a\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part3-orm/chapter19-orm/#_4","title":"\u63a8\u5968\u3055\u308c\u308b\u7d44\u307f\u5408\u308f\u305b","text":"\u30c7\u30fc\u30bf\u7a2e\u5225 \u65b9\u5f0f JPA \u5b9f\u88c5 \u30de\u30b9\u30bf\u30c7\u30fc\u30bf A + C @EnableJpaAuditing + @EntityListeners \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf A + B @EnableJpaAuditing + \u8d64\u9ed2\u51e6\u7406 \u30b5\u30de\u30ea\u30c7\u30fc\u30bf A @EnableJpaAuditing \u306e\u307f"},{"location":"article/part3-orm/chapter19-orm/#196-jpa-auditing","title":"19.6 JPA Auditing \u306b\u3088\u308b\u81ea\u52d5\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7","text":"<p>JPA \u7248\u3067\u306f\u3001Spring Data JPA \u306e Auditing \u6a5f\u80fd\u3092\u4f7f\u7528\u3057\u3066\u3001\u4f5c\u6210\u65e5\u6642\u30fb\u66f4\u65b0\u65e5\u6642\u30fb\u4f5c\u6210\u8005\u30fb\u66f4\u65b0\u8005\u3092\u81ea\u52d5\u7684\u306b\u8a2d\u5b9a\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"article/part3-orm/chapter19-orm/#auditing","title":"Auditing \u8a2d\u5b9a","text":"AccountingApplication.java <pre><code>package com.example.accounting;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.data.jpa.repository.config.EnableJpaAuditing;\n\n@SpringBootApplication\n@EnableJpaAuditing  // JPA Auditing \u3092\u6709\u52b9\u5316\npublic class AccountingApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(AccountingApplication.class, args);\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter19-orm/#auditoraware","title":"AuditorAware \u5b9f\u88c5\uff08\u64cd\u4f5c\u8005\u306e\u81ea\u52d5\u8a2d\u5b9a\uff09","text":"AuditorAwareImpl.java <pre><code>package com.example.accounting.infrastructure.config;\n\nimport org.springframework.data.domain.AuditorAware;\nimport org.springframework.security.core.Authentication;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.stereotype.Component;\n\nimport java.util.Optional;\n\n/**\n * \u64cd\u4f5c\u8005\u3092\u81ea\u52d5\u53d6\u5f97\u3059\u308b AuditorAware \u5b9f\u88c5\n *\n * Spring Security \u3068\u9023\u643a\u3057\u3066\u3001\u73fe\u5728\u30ed\u30b0\u30a4\u30f3\u4e2d\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u53d6\u5f97\n * @CreatedBy, @LastModifiedBy \u306b\u81ea\u52d5\u8a2d\u5b9a\u3055\u308c\u308b\n */\n@Component\npublic class AuditorAwareImpl implements AuditorAware&lt;String&gt; {\n\n    @Override\n    public Optional&lt;String&gt; getCurrentAuditor() {\n        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\n\n        if (authentication == null || !authentication.isAuthenticated()) {\n            return Optional.of(\"system\");\n        }\n\n        return Optional.of(authentication.getName());\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter19-orm/#entity","title":"\u76e3\u67fb\u60c5\u5831\u3092\u6301\u3064\u57fa\u5e95 Entity","text":"BaseEntity.java <pre><code>package com.example.accounting.domain.model.common;\n\nimport jakarta.persistence.*;\nimport lombok.Getter;\nimport lombok.Setter;\nimport org.springframework.data.annotation.CreatedBy;\nimport org.springframework.data.annotation.CreatedDate;\nimport org.springframework.data.annotation.LastModifiedBy;\nimport org.springframework.data.annotation.LastModifiedDate;\nimport org.springframework.data.jpa.domain.support.AuditingEntityListener;\n\nimport java.time.LocalDateTime;\n\n/**\n * \u76e3\u67fb\u60c5\u5831\u3092\u6301\u3064\u57fa\u5e95 Entity\n *\n * JPA \u7248\u3067\u306f @EntityListeners \u3068 Auditing \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\n * \u4f5c\u6210\u65e5\u6642\u30fb\u66f4\u65b0\u65e5\u6642\u30fb\u4f5c\u6210\u8005\u30fb\u66f4\u65b0\u8005\u3092\u81ea\u52d5\u7ba1\u7406\n *\n * MyBatis \u7248\u3067\u306f\u624b\u52d5\u3067\u8a2d\u5b9a\u3057\u3066\u3044\u305f\u304c\u3001JPA \u7248\u3067\u306f\u81ea\u52d5\u5316\n */\n@MappedSuperclass\n@EntityListeners(AuditingEntityListener.class)\n@Getter\n@Setter\npublic abstract class BaseEntity {\n\n    @CreatedDate\n    @Column(name = \"\u4f5c\u6210\u65e5\u6642\", nullable = false, updatable = false)\n    private LocalDateTime createdAt;\n\n    @LastModifiedDate\n    @Column(name = \"\u66f4\u65b0\u65e5\u6642\", nullable = false)\n    private LocalDateTime updatedAt;\n\n    @CreatedBy\n    @Column(name = \"\u4f5c\u6210\u8005\", length = 50, updatable = false)\n    private String createdBy;\n\n    @LastModifiedBy\n    @Column(name = \"\u66f4\u65b0\u8005\", length = 50)\n    private String updatedBy;\n}\n</code></pre>"},{"location":"article/part3-orm/chapter19-orm/#197","title":"19.7 \u30de\u30b9\u30bf\u5909\u66f4\u30ed\u30b0\u30c6\u30fc\u30d6\u30eb\u306e\u8a2d\u8a08","text":""},{"location":"article/part3-orm/chapter19-orm/#flyway","title":"Flyway \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3","text":"V010__create_change_log_table.sql <pre><code>-- \u64cd\u4f5c\u7a2e\u5225\nCREATE TYPE \u64cd\u4f5c\u7a2e\u5225 AS ENUM ('INSERT', 'UPDATE', 'DELETE');\n\n-- \u5909\u66f4\u30ed\u30b0\u30c6\u30fc\u30d6\u30eb\nCREATE TABLE \"\u5909\u66f4\u30ed\u30b0\" (\n    \"\u30ed\u30b0ID\" SERIAL PRIMARY KEY,\n    \"\u30c6\u30fc\u30d6\u30eb\u540d\" VARCHAR(50) NOT NULL,\n    \"\u30ec\u30b3\u30fc\u30c9\u30ad\u30fc\" VARCHAR(100) NOT NULL,\n    \"\u64cd\u4f5c\u7a2e\u5225\" \u64cd\u4f5c\u7a2e\u5225 NOT NULL,\n    \"\u64cd\u4f5c\u524d\u30c7\u30fc\u30bf\" JSONB,\n    \"\u64cd\u4f5c\u5f8c\u30c7\u30fc\u30bf\" JSONB,\n    \"\u64cd\u4f5c\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u64cd\u4f5c\u8005\" VARCHAR(50),\n    \"\u64cd\u4f5c\u7aef\u672b\" VARCHAR(100),\n    \"\u5099\u8003\" TEXT\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"idx_\u5909\u66f4\u30ed\u30b0_\u30c6\u30fc\u30d6\u30eb\u540d\" ON \"\u5909\u66f4\u30ed\u30b0\"(\"\u30c6\u30fc\u30d6\u30eb\u540d\");\nCREATE INDEX \"idx_\u5909\u66f4\u30ed\u30b0_\u30ec\u30b3\u30fc\u30c9\u30ad\u30fc\" ON \"\u5909\u66f4\u30ed\u30b0\"(\"\u30ec\u30b3\u30fc\u30c9\u30ad\u30fc\");\nCREATE INDEX \"idx_\u5909\u66f4\u30ed\u30b0_\u64cd\u4f5c\u65e5\u6642\" ON \"\u5909\u66f4\u30ed\u30b0\"(\"\u64cd\u4f5c\u65e5\u6642\");\n</code></pre>"},{"location":"article/part3-orm/chapter19-orm/#entity_1","title":"\u5909\u66f4\u30ed\u30b0 Entity","text":"ChangeLog.java <pre><code>package com.example.accounting.domain.model.audit;\n\nimport com.example.accounting.infrastructure.persistence.converter.OperationTypeConverter;\nimport jakarta.persistence.*;\nimport lombok.*;\n\nimport java.time.LocalDateTime;\n\n/**\n * \u5909\u66f4\u30ed\u30b0 Entity\n *\n * JPA \u7248\u3067\u306f @Entity \u3067\u5b9a\u7fa9\n * @GeneratedValue \u3067\u81ea\u52d5\u63a1\u756a\n */\n@Entity\n@Table(name = \"\u5909\u66f4\u30ed\u30b0\")\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class ChangeLog {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = \"\u30ed\u30b0ID\")\n    private Long logId;\n\n    @Column(name = \"\u30c6\u30fc\u30d6\u30eb\u540d\", length = 50, nullable = false)\n    private String tableName;\n\n    @Column(name = \"\u30ec\u30b3\u30fc\u30c9\u30ad\u30fc\", length = 100, nullable = false)\n    private String recordKey;\n\n    @Convert(converter = OperationTypeConverter.class)\n    @Column(name = \"\u64cd\u4f5c\u7a2e\u5225\", nullable = false, columnDefinition = \"\u64cd\u4f5c\u7a2e\u5225\")\n    private OperationType operationType;\n\n    @Column(name = \"\u64cd\u4f5c\u524d\u30c7\u30fc\u30bf\", columnDefinition = \"JSONB\")\n    private String beforeData;\n\n    @Column(name = \"\u64cd\u4f5c\u5f8c\u30c7\u30fc\u30bf\", columnDefinition = \"JSONB\")\n    private String afterData;\n\n    @Column(name = \"\u64cd\u4f5c\u65e5\u6642\", nullable = false)\n    private LocalDateTime operatedAt;\n\n    @Column(name = \"\u64cd\u4f5c\u8005\", length = 50)\n    private String operatedBy;\n\n    @Column(name = \"\u64cd\u4f5c\u7aef\u672b\", length = 100)\n    private String operatedFrom;\n\n    @Column(name = \"\u5099\u8003\", columnDefinition = \"TEXT\")\n    private String remarks;\n\n    @PrePersist\n    protected void onCreate() {\n        if (this.operatedAt == null) {\n            this.operatedAt = LocalDateTime.now();\n        }\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter19-orm/#enum-converter","title":"\u64cd\u4f5c\u7a2e\u5225 Enum \u3068 Converter","text":"OperationType.java \u3068 OperationTypeConverter.java <pre><code>package com.example.accounting.domain.model.audit;\n\n/**\n * \u64cd\u4f5c\u7a2e\u5225 Enum\n */\npublic enum OperationType {\n    INSERT,\n    UPDATE,\n    DELETE\n}\n</code></pre> <pre><code>package com.example.accounting.infrastructure.persistence.converter;\n\nimport com.example.accounting.domain.model.audit.OperationType;\nimport jakarta.persistence.AttributeConverter;\nimport jakarta.persistence.Converter;\n\n/**\n * \u64cd\u4f5c\u7a2e\u5225 \u2194 PostgreSQL ENUM \u5909\u63db\n */\n@Converter(autoApply = true)\npublic class OperationTypeConverter implements AttributeConverter&lt;OperationType, String&gt; {\n\n    @Override\n    public String convertToDatabaseColumn(OperationType attribute) {\n        return attribute != null ? attribute.name() : null;\n    }\n\n    @Override\n    public OperationType convertToEntityAttribute(String dbData) {\n        return dbData != null ? OperationType.valueOf(dbData) : null;\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter19-orm/#198-entitylistener","title":"19.8 EntityListener \u306b\u3088\u308b\u30de\u30b9\u30bf\u5909\u66f4\u30ed\u30b0\u306e\u81ea\u52d5\u8a18\u9332","text":"<p>JPA \u7248\u3067\u306f @EntityListeners \u3092\u4f7f\u7528\u3057\u3066\u3001Entity \u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u30a4\u30d9\u30f3\u30c8\u3092\u30d5\u30c3\u30af\u3057\u3001\u5909\u66f4\u30ed\u30b0\u3092\u81ea\u52d5\u7684\u306b\u8a18\u9332\u3067\u304d\u307e\u3059\u3002</p> ChangeLogListener.java <pre><code>package com.example.accounting.infrastructure.persistence.listener;\n\nimport com.example.accounting.domain.model.audit.ChangeLog;\nimport com.example.accounting.domain.model.audit.OperationType;\nimport com.example.accounting.infrastructure.persistence.repository.ChangeLogJpaRepository;\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport jakarta.persistence.*;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.stereotype.Component;\n\nimport java.time.LocalDateTime;\n\n/**\n * \u30de\u30b9\u30bf\u5909\u66f4\u30ed\u30b0\u3092\u81ea\u52d5\u8a18\u9332\u3059\u308b EntityListener\n *\n * JPA \u7248\u3067\u306f @EntityListeners \u3067 Entity \u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u3092\u30d5\u30c3\u30af\n * MyBatis \u7248\u3067\u306f DB \u30c8\u30ea\u30ac\u30fc\u3067\u5b9f\u88c5\u3057\u3066\u3044\u305f\u6a5f\u80fd\u3092 Java \u30b3\u30fc\u30c9\u3067\u5b9f\u73fe\n */\n@Component\n@Slf4j\npublic class ChangeLogListener {\n\n    private static ChangeLogJpaRepository changeLogRepository;\n    private static ObjectMapper objectMapper;\n\n    @Autowired\n    public void setChangeLogRepository(ChangeLogJpaRepository repository) {\n        ChangeLogListener.changeLogRepository = repository;\n    }\n\n    @Autowired\n    public void setObjectMapper(ObjectMapper mapper) {\n        ChangeLogListener.objectMapper = mapper;\n    }\n\n    @PostPersist\n    public void postPersist(Object entity) {\n        saveChangeLog(entity, OperationType.INSERT, null, entity);\n    }\n\n    @PostUpdate\n    public void postUpdate(Object entity) {\n        saveChangeLog(entity, OperationType.UPDATE, null, entity);\n    }\n\n    @PostRemove\n    public void postRemove(Object entity) {\n        saveChangeLog(entity, OperationType.DELETE, entity, null);\n    }\n\n    private void saveChangeLog(Object entity, OperationType operationType,\n                               Object beforeData, Object afterData) {\n        try {\n            String tableName = getTableName(entity);\n            String recordKey = getRecordKey(entity);\n            String beforeJson = beforeData != null ? objectMapper.writeValueAsString(beforeData) : null;\n            String afterJson = afterData != null ? objectMapper.writeValueAsString(afterData) : null;\n\n            var changeLog = ChangeLog.builder()\n                .tableName(tableName)\n                .recordKey(recordKey)\n                .operationType(operationType)\n                .beforeData(beforeJson)\n                .afterData(afterJson)\n                .operatedAt(LocalDateTime.now())\n                .operatedBy(getCurrentUser())\n                .build();\n\n            changeLogRepository.save(changeLog);\n\n            log.debug(\"\u5909\u66f4\u30ed\u30b0\u8a18\u9332: table={}, key={}, operation={}\",\n                tableName, recordKey, operationType);\n\n        } catch (JsonProcessingException e) {\n            log.error(\"\u5909\u66f4\u30ed\u30b0\u306e JSON \u5909\u63db\u306b\u5931\u6557\u3057\u307e\u3057\u305f\", e);\n        }\n    }\n\n    private String getTableName(Object entity) {\n        Table tableAnnotation = entity.getClass().getAnnotation(Table.class);\n        return tableAnnotation != null ? tableAnnotation.name() : entity.getClass().getSimpleName();\n    }\n\n    private String getRecordKey(Object entity) {\n        return entity.toString();\n    }\n\n    private String getCurrentUser() {\n        var authentication = SecurityContextHolder.getContext().getAuthentication();\n        return authentication != null ? authentication.getName() : \"system\";\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter19-orm/#entitylistener-entity","title":"EntityListener \u3092\u4f7f\u7528\u3059\u308b Entity","text":"<pre><code>// Account Entity \u306b @EntityListeners \u3092\u8ffd\u52a0\n@Entity\n@Table(name = \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\")\n@EntityListeners(ChangeLogListener.class)  // \u5909\u66f4\u30ed\u30b0\u3092\u81ea\u52d5\u8a18\u9332\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Account extends BaseEntity {\n    // ... \u65e2\u5b58\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\n}\n</code></pre>"},{"location":"article/part3-orm/chapter19-orm/#199","title":"19.9 \u5909\u66f4\u30ed\u30b0\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u5b9f\u88c5","text":""},{"location":"article/part3-orm/chapter19-orm/#jparepository-specification","title":"JpaRepository \u3068 Specification","text":"ChangeLogJpaRepository.java <pre><code>package com.example.accounting.infrastructure.persistence.repository;\n\nimport com.example.accounting.domain.model.audit.ChangeLog;\nimport com.example.accounting.domain.model.audit.OperationType;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.jpa.repository.JpaSpecificationExecutor;\nimport org.springframework.data.jpa.repository.Query;\nimport org.springframework.data.repository.query.Param;\nimport org.springframework.stereotype.Repository;\n\nimport java.time.LocalDateTime;\nimport java.util.List;\n\n/**\n * \u5909\u66f4\u30ed\u30b0 JpaRepository\n *\n * JpaSpecificationExecutor \u3092\u7d99\u627f\u3057\u3066\u52d5\u7684\u30af\u30a8\u30ea\u306b\u5bfe\u5fdc\n */\n@Repository\npublic interface ChangeLogJpaRepository\n        extends JpaRepository&lt;ChangeLog, Long&gt;,\n                JpaSpecificationExecutor&lt;ChangeLog&gt; {\n\n    /**\n     * \u30c6\u30fc\u30d6\u30eb\u540d\u3068\u30ec\u30b3\u30fc\u30c9\u30ad\u30fc\u3067\u691c\u7d22\n     */\n    List&lt;ChangeLog&gt; findByTableNameAndRecordKeyOrderByOperatedAtDesc(\n            String tableName, String recordKey);\n\n    /**\n     * \u30c6\u30fc\u30d6\u30eb\u540d\u3067\u691c\u7d22\n     */\n    List&lt;ChangeLog&gt; findByTableNameOrderByOperatedAtDesc(String tableName);\n\n    /**\n     * \u64cd\u4f5c\u7a2e\u5225\u3067\u691c\u7d22\n     */\n    List&lt;ChangeLog&gt; findByOperationTypeOrderByOperatedAtDesc(OperationType operationType);\n\n    /**\n     * \u671f\u9593\u6307\u5b9a\u3067\u691c\u7d22\n     */\n    @Query(\"SELECT c FROM ChangeLog c \" +\n           \"WHERE c.operatedAt BETWEEN :from AND :to \" +\n           \"ORDER BY c.operatedAt DESC\")\n    List&lt;ChangeLog&gt; findByDateRange(\n            @Param(\"from\") LocalDateTime from,\n            @Param(\"to\") LocalDateTime to);\n\n    /**\n     * \u64cd\u4f5c\u8005\u3067\u691c\u7d22\n     */\n    List&lt;ChangeLog&gt; findByOperatedByOrderByOperatedAtDesc(String operatedBy);\n}\n</code></pre>"},{"location":"article/part3-orm/chapter19-orm/#specification","title":"Specification \u306b\u3088\u308b\u52d5\u7684\u30af\u30a8\u30ea","text":"ChangeLogSpecifications.java <pre><code>package com.example.accounting.infrastructure.persistence.specification;\n\nimport com.example.accounting.domain.model.audit.ChangeLog;\nimport com.example.accounting.domain.model.audit.OperationType;\nimport org.springframework.data.jpa.domain.Specification;\n\nimport java.time.LocalDateTime;\n\n/**\n * \u5909\u66f4\u30ed\u30b0\u691c\u7d22\u7528 Specification\n *\n * JPA \u7248\u3067\u306f Specification \u30d1\u30bf\u30fc\u30f3\u3067\u52d5\u7684\u30af\u30a8\u30ea\u3092\u69cb\u7bc9\n * MyBatis \u7248\u3067\u306f XML \u306e &lt;if&gt; \u30bf\u30b0\u3067\u52d5\u7684 SQL \u3092\u69cb\u7bc9\u3057\u3066\u3044\u305f\n */\npublic class ChangeLogSpecifications {\n\n    public static Specification&lt;ChangeLog&gt; tableNameEquals(String tableName) {\n        return (root, query, cb) -&gt;\n            tableName == null ? null : cb.equal(root.get(\"tableName\"), tableName);\n    }\n\n    public static Specification&lt;ChangeLog&gt; recordKeyEquals(String recordKey) {\n        return (root, query, cb) -&gt;\n            recordKey == null ? null : cb.equal(root.get(\"recordKey\"), recordKey);\n    }\n\n    public static Specification&lt;ChangeLog&gt; operationTypeEquals(OperationType operationType) {\n        return (root, query, cb) -&gt;\n            operationType == null ? null : cb.equal(root.get(\"operationType\"), operationType);\n    }\n\n    public static Specification&lt;ChangeLog&gt; operatedAtAfter(LocalDateTime from) {\n        return (root, query, cb) -&gt;\n            from == null ? null : cb.greaterThanOrEqualTo(root.get(\"operatedAt\"), from);\n    }\n\n    public static Specification&lt;ChangeLog&gt; operatedAtBefore(LocalDateTime to) {\n        return (root, query, cb) -&gt;\n            to == null ? null : cb.lessThanOrEqualTo(root.get(\"operatedAt\"), to);\n    }\n\n    public static Specification&lt;ChangeLog&gt; operatedByEquals(String operatedBy) {\n        return (root, query, cb) -&gt;\n            operatedBy == null ? null : cb.equal(root.get(\"operatedBy\"), operatedBy);\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter19-orm/#1910","title":"19.10 \u5909\u66f4\u30ed\u30b0\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30c6\u30b9\u30c8","text":"ChangeLogRepositoryTest.java <pre><code>package com.example.accounting.infrastructure.persistence.repository;\n\nimport com.example.accounting.application.port.out.ChangeLogRepository;\nimport com.example.accounting.domain.model.audit.ChangeLog;\nimport com.example.accounting.domain.model.audit.OperationType;\nimport org.junit.jupiter.api.*;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.jdbc.AutoConfigureTestDatabase;\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\nimport org.springframework.context.annotation.Import;\nimport org.springframework.test.context.DynamicPropertyRegistry;\nimport org.springframework.test.context.DynamicPropertySource;\nimport org.testcontainers.containers.PostgreSQLContainer;\nimport org.testcontainers.junit.jupiter.Container;\nimport org.testcontainers.junit.jupiter.Testcontainers;\n\nimport java.time.LocalDateTime;\n\nimport static org.assertj.core.api.Assertions.*;\n\n/**\n * \u5909\u66f4\u30ed\u30b0\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30c6\u30b9\u30c8\n */\n@DataJpaTest\n@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\n@Testcontainers\n@Import(ChangeLogRepositoryImpl.class)\n@DisplayName(\"\u5909\u66f4\u30ed\u30b0\u30ea\u30dd\u30b8\u30c8\u30ea\")\nclass ChangeLogRepositoryTest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:16\")\n            .withDatabaseName(\"testdb\")\n            .withUsername(\"test\")\n            .withPassword(\"test\");\n\n    @DynamicPropertySource\n    static void configureProperties(DynamicPropertyRegistry registry) {\n        registry.add(\"spring.datasource.url\", postgres::getJdbcUrl);\n        registry.add(\"spring.datasource.username\", postgres::getUsername);\n        registry.add(\"spring.datasource.password\", postgres::getPassword);\n    }\n\n    @Autowired\n    private ChangeLogRepository changeLogRepository;\n\n    @Nested\n    @DisplayName(\"\u767b\u9332\")\n    class Insert {\n\n        @Test\n        @DisplayName(\"\u5909\u66f4\u30ed\u30b0\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canInsertChangeLog() {\n            // Arrange\n            var changeLog = ChangeLog.builder()\n                    .tableName(\"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\")\n                    .recordKey(\"11100\")\n                    .operationType(OperationType.INSERT)\n                    .afterData(\"{\\\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\\\":\\\"11100\\\",\\\"\u52d8\u5b9a\u79d1\u76ee\u540d\\\":\\\"\u73fe\u91d1\\\"}\")\n                    .operatedBy(\"admin\")\n                    .build();\n\n            // Act\n            changeLogRepository.save(changeLog);\n\n            // Assert\n            assertThat(changeLog.getLogId()).isNotNull();\n            var result = changeLogRepository.findById(changeLog.getLogId());\n            assertThat(result).isPresent();\n            assertThat(result.get().getTableName()).isEqualTo(\"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\");\n            assertThat(result.get().getOperationType()).isEqualTo(OperationType.INSERT);\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u691c\u7d22\")\n    class Search {\n\n        @Test\n        @DisplayName(\"\u30c6\u30fc\u30d6\u30eb\u540d\u3068\u30ec\u30b3\u30fc\u30c9\u30ad\u30fc\u3067\u691c\u7d22\u3067\u304d\u308b\")\n        void canFindByTableNameAndRecordKey() {\n            // Act\n            var result = changeLogRepository.findByTableNameAndRecordKey(\n                    \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\", \"11100\");\n\n            // Assert\n            assertThat(result).allMatch(log -&gt;\n                    log.getTableName().equals(\"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\") &amp;&amp;\n                    log.getRecordKey().equals(\"11100\"));\n        }\n\n        @Test\n        @DisplayName(\"\u8907\u5408\u6761\u4ef6\u3067\u691c\u7d22\u3067\u304d\u308b\")\n        void canFindByConditions() {\n            // Act: Specification \u30d1\u30bf\u30fc\u30f3\u3067\u52d5\u7684\u30af\u30a8\u30ea\n            var result = changeLogRepository.findByConditions(\n                    \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\",\n                    null,\n                    OperationType.UPDATE,\n                    null,\n                    null,\n                    null);\n\n            // Assert\n            assertThat(result).allMatch(log -&gt;\n                log.getOperationType() == OperationType.UPDATE);\n        }\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter19-orm/#1911","title":"19.11 \u307e\u3068\u3081\uff1a\u8a2d\u8a08\u306e\u30dd\u30a4\u30f3\u30c8","text":""},{"location":"article/part3-orm/chapter19-orm/#_5","title":"\u8d64\u9ed2\u51e6\u7406\u306b\u3088\u308b\u30c7\u30fc\u30bf\u8a02\u6b63","text":"<ol> <li>\u7269\u7406\u524a\u9664\u3092\u884c\u308f\u305a\u3001\u8d64\u4f1d\u3067\u6253\u3061\u6d88\u3057</li> <li>\u76e3\u67fb\u8a3c\u8de1\u306e\u78ba\u4fdd</li> <li>\u6b8b\u9ad8\u306e\u81ea\u52d5\u8abf\u6574</li> <li>JPA \u7248\u3067\u306f CascadeType.ALL \u3067\u4e00\u62ec\u4fdd\u5b58</li> </ol>"},{"location":"article/part3-orm/chapter19-orm/#_6","title":"\u30ed\u30b0\u7ba1\u7406\u65b9\u5f0f\u306e\u4f7f\u3044\u5206\u3051","text":"\u30c7\u30fc\u30bf\u7a2e\u5225 \u65b9\u5f0f JPA \u5b9f\u88c5 \u30de\u30b9\u30bf\u30c7\u30fc\u30bf \u30ed\u30b0\u30c6\u30fc\u30d6\u30eb\u65b9\u5f0f @EntityListeners \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf \u8d64\u9ed2\u51e6\u7406 Cascade \u4fdd\u5b58 \u30b5\u30de\u30ea\u30c7\u30fc\u30bf \u66f4\u65b0\u65e5\u6642\u306e\u307f @EnableJpaAuditing"},{"location":"article/part3-orm/chapter19-orm/#jpa-auditing","title":"JPA Auditing \u306b\u3088\u308b\u81ea\u52d5\u5316","text":"<ul> <li>@CreatedDate, @LastModifiedDate \u3067\u65e5\u6642\u81ea\u52d5\u8a2d\u5b9a</li> <li>@CreatedBy, @LastModifiedBy \u3067\u64cd\u4f5c\u8005\u81ea\u52d5\u8a2d\u5b9a</li> <li>AuditorAware \u3067 Spring Security \u9023\u643a</li> </ul>"},{"location":"article/part3-orm/chapter19-orm/#mybatis","title":"MyBatis \u7248\u3068\u306e\u6bd4\u8f03","text":"\u89b3\u70b9 MyBatis \u7248 JPA \u7248 \u76e3\u67fb\u30ab\u30e9\u30e0\u8a2d\u5b9a \u624b\u52d5 / Interceptor @EnableJpaAuditing \u30de\u30b9\u30bf\u5909\u66f4\u30ed\u30b0 DB \u30c8\u30ea\u30ac\u30fc @EntityListeners ENUM \u5909\u63db TypeHandler AttributeConverter \u52d5\u7684\u30af\u30a8\u30ea XML <code>&lt;if&gt;</code> \u30bf\u30b0 Specification \u30d1\u30bf\u30fc\u30f3 \u81ea\u52d5\u63a1\u756a useGeneratedKeys @GeneratedValue \u30c6\u30b9\u30c8 @MybatisTest @DataJpaTest"},{"location":"article/part3-orm/chapter19-orm/#_7","title":"\u6b21\u7ae0\u4e88\u544a","text":"<p>\u7b2c20\u7ae0\u3067\u306f\u3001D\u793e\uff08\u5316\u7ca7\u54c1\u88fd\u9020\u8ca9\u58f2\uff09\u306e\u4e8b\u4f8b\u306b\u57fa\u3065\u3044\u3066\u3001Seed\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002JPA \u7248\u3067\u306f CommandLineRunner \u3068 @Transactional \u3092\u4f7f\u7528\u3057\u305f\u30c7\u30fc\u30bf\u6295\u5165\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002</p>"},{"location":"article/part3-orm/chapter20-orm/","title":"\u7b2c20\u7ae0\uff1a\u8ca1\u52d9\u4f1a\u8a08\u30c7\u30fc\u30bf\u8a2d\u8a08\uff08D\u793e\u4e8b\u4f8b\uff09\u3010ORM\u7248\u3011","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u5316\u7ca7\u54c1\u88fd\u9020\u8ca9\u58f2\u4f1a\u793eD\u793e\u3092\u984c\u6750\u3068\u3057\u3066\u3001Spring Data JPA \u3092\u4f7f\u7528\u3057\u305f\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u30c7\u30fc\u30bf\u8a2d\u8a08\u3068 Seed \u30c7\u30fc\u30bf\u5b9f\u88c5\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002JPA \u306e CascadeType.ALL \u306b\u3088\u308b\u30ab\u30b9\u30b1\u30fc\u30c9\u4fdd\u5b58\u3084\u3001CommandLineRunner \u306b\u3088\u308b\u8d77\u52d5\u6642\u30c7\u30fc\u30bf\u6295\u5165\u3092\u6d3b\u7528\u3057\u307e\u3059\u3002</p>"},{"location":"article/part3-orm/chapter20-orm/#201-d","title":"20.1 D\u793e\u306e\u6982\u8981","text":""},{"location":"article/part3-orm/chapter20-orm/#2011","title":"20.1.1 \u4f1a\u793e\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb","text":"<p>D\u793e\u306f\u5316\u7ca7\u54c1\u88fd\u9020\u8ca9\u58f2\u3092\u4e3b\u696d\u3068\u3059\u308b\u4e2d\u5805\u4f01\u696d\u3067\u3059\u3002</p> \u9805\u76ee \u5185\u5bb9 \u696d\u7a2e \u5316\u7ca7\u54c1\u88fd\u9020\u8ca9\u58f2 \u8cc7\u672c\u91d1 5\u5104\u5186 \u5f93\u696d\u54e1\u6570 300\u540d \u5e74\u9593\u58f2\u4e0a\u9ad8 80\u5104\u5186 \u6c7a\u7b97\u671f 3\u6708 \u7d4c\u7406\u4f53\u5236 \u7d4c\u7406\u90e810\u540d\u3001\u8ca1\u52d9\u8ab23\u540d"},{"location":"article/part3-orm/chapter20-orm/#2012","title":"20.1.2 \u4f01\u696d\u6982\u8981","text":""},{"location":"article/part3-orm/chapter20-orm/#202","title":"20.2 \u7d44\u7e54\u69cb\u6210","text":""},{"location":"article/part3-orm/chapter20-orm/#2021","title":"20.2.1 \u7d44\u7e54\u56f3","text":""},{"location":"article/part3-orm/chapter20-orm/#2022","title":"20.2.2 \u90e8\u9580\u30b3\u30fc\u30c9\u4f53\u7cfb","text":"\u90e8\u9580\u30b3\u30fc\u30c9 \u90e8\u9580\u540d \u7d44\u7e54\u968e\u5c64 \u90e8\u9580\u30d1\u30b9 10000 \u5168\u793e 0 10000 11000 \u55b6\u696d\u672c\u90e8 1 10000~11000 11100 \u56fd\u5185\u55b6\u696d\u90e8 2 10000~11000~11100 11110 \u6771\u65e5\u672c\u55b6\u696d\u8ab2 3 10000~11000~11100~11110 11120 \u897f\u65e5\u672c\u55b6\u696d\u8ab2 3 10000~11000~11100~11120 12000 \u88fd\u9020\u672c\u90e8 1 10000~12000 12100 \u88fd\u9020\u90e8 2 10000~12000~12100 13000 \u7ba1\u7406\u672c\u90e8 1 10000~13000 13100 \u7d4c\u7406\u90e8 2 10000~13000~13100"},{"location":"article/part3-orm/chapter20-orm/#2023-jpa","title":"20.2.3 \u90e8\u9580\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\uff08JPA\uff09","text":"Department \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/accounting/domain/model/department/Department.java\npackage com.example.accounting.domain.model.department;\n\nimport jakarta.persistence.*;\nimport lombok.*;\n\nimport java.time.LocalDateTime;\n\n/**\n * \u90e8\u9580\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n */\n@Entity\n@Table(name = \"\u90e8\u9580\u30de\u30b9\u30bf\")\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Department {\n\n    @Id\n    @Column(name = \"\u90e8\u9580\u30b3\u30fc\u30c9\", length = 5)\n    private String departmentCode;\n\n    @Column(name = \"\u90e8\u9580\u540d\", length = 40, nullable = false)\n    private String departmentName;\n\n    @Column(name = \"\u7d44\u7e54\u968e\u5c64\")\n    private Integer organizationLevel;\n\n    @Column(name = \"\u90e8\u9580\u30d1\u30b9\", length = 100)\n    private String departmentPath;\n\n    @Column(name = \"\u6700\u4e0b\u5c64\u533a\u5206\")\n    private Integer lowestLevelFlag;\n\n    @Column(name = \"\u4f5c\u6210\u65e5\u6642\")\n    private LocalDateTime createdAt;\n\n    @Column(name = \"\u66f4\u65b0\u65e5\u6642\")\n    private LocalDateTime updatedAt;\n\n    @Column(name = \"\u66f4\u65b0\u8005\u540d\", length = 20)\n    private String updatedBy;\n\n    /**\n     * \u6700\u4e0b\u5c64\uff08\u672b\u7aef\uff09\u90e8\u9580\u304b\u3069\u3046\u304b\n     */\n    public boolean isLeaf() {\n        return lowestLevelFlag != null &amp;&amp; lowestLevelFlag == 1;\n    }\n\n    /**\n     * \u90e8\u9580\u30d1\u30b9\u304b\u3089\u89aa\u90e8\u9580\u30b3\u30fc\u30c9\u3092\u53d6\u5f97\n     */\n    public String getParentDepartmentCode() {\n        if (departmentPath == null || !departmentPath.contains(\"~\")) {\n            return null;\n        }\n        String[] parts = departmentPath.split(\"~\");\n        if (parts.length &lt; 2) {\n            return null;\n        }\n        return parts[parts.length - 2];\n    }\n\n    @PrePersist\n    protected void onCreate() {\n        if (createdAt == null) {\n            createdAt = LocalDateTime.now();\n        }\n        if (updatedAt == null) {\n            updatedAt = LocalDateTime.now();\n        }\n    }\n\n    @PreUpdate\n    protected void onUpdate() {\n        updatedAt = LocalDateTime.now();\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter20-orm/#2024-jpa","title":"20.2.4 \u90e8\u9580\u30ea\u30dd\u30b8\u30c8\u30ea\uff08JPA\uff09","text":"DepartmentJpaRepository \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9 <pre><code>// src/main/java/com/example/accounting/infrastructure/persistence/repository/DepartmentJpaRepository.java\npackage com.example.accounting.infrastructure.persistence.repository;\n\nimport com.example.accounting.domain.model.department.Department;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.jpa.repository.Query;\nimport org.springframework.data.repository.query.Param;\nimport org.springframework.stereotype.Repository;\n\nimport java.util.List;\n\n/**\n * \u90e8\u9580\u30ea\u30dd\u30b8\u30c8\u30ea\uff08Spring Data JPA\uff09\n */\n@Repository\npublic interface DepartmentJpaRepository extends JpaRepository&lt;Department, String&gt; {\n\n    /**\n     * \u7d44\u7e54\u968e\u5c64\u3067\u691c\u7d22\u3059\u308b\n     */\n    List&lt;Department&gt; findByOrganizationLevel(Integer level);\n\n    /**\n     * \u90e8\u9580\u30d1\u30b9\u3067\u524d\u65b9\u4e00\u81f4\u691c\u7d22\u3059\u308b\uff08\u914d\u4e0b\u306e\u90e8\u9580\u3092\u53d6\u5f97\uff09\n     */\n    @Query(\"SELECT d FROM Department d WHERE d.departmentPath LIKE CONCAT(:pathPrefix, '%') ORDER BY d.departmentPath\")\n    List&lt;Department&gt; findByDepartmentPathStartsWith(@Param(\"pathPrefix\") String pathPrefix);\n\n    /**\n     * \u6700\u4e0b\u5c64\u90e8\u9580\u306e\u307f\u691c\u7d22\u3059\u308b\n     */\n    List&lt;Department&gt; findByLowestLevelFlag(Integer flag);\n\n    /**\n     * \u6700\u4e0b\u5c64\u90e8\u9580\u306e\u307f\u691c\u7d22\u3059\u308b\uff08\u4fbf\u5229\u30e1\u30bd\u30c3\u30c9\uff09\n     */\n    default List&lt;Department&gt; findLeafDepartments() {\n        return findByLowestLevelFlag(1);\n    }\n\n    /**\n     * \u90e8\u9580\u30b3\u30fc\u30c9\u9806\u3067\u5168\u4ef6\u53d6\u5f97\n     */\n    List&lt;Department&gt; findAllByOrderByDepartmentCodeAsc();\n}\n</code></pre>"},{"location":"article/part3-orm/chapter20-orm/#2025-jpa","title":"20.2.5 \u90e8\u9580\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30c6\u30b9\u30c8\uff08JPA\uff09","text":"DepartmentJpaRepositoryTest <pre><code>// src/test/java/com/example/accounting/infrastructure/persistence/repository/DepartmentJpaRepositoryTest.java\npackage com.example.accounting.infrastructure.persistence.repository;\n\nimport com.example.accounting.domain.model.department.Department;\nimport org.junit.jupiter.api.*;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\nimport org.springframework.test.context.DynamicPropertyRegistry;\nimport org.springframework.test.context.DynamicPropertySource;\nimport org.testcontainers.containers.PostgreSQLContainer;\nimport org.testcontainers.junit.jupiter.Container;\nimport org.testcontainers.junit.jupiter.Testcontainers;\n\nimport static org.assertj.core.api.Assertions.*;\n\n@DataJpaTest\n@Testcontainers\n@DisplayName(\"\u90e8\u9580\u30ea\u30dd\u30b8\u30c8\u30ea\uff08JPA\uff09\")\nclass DepartmentJpaRepositoryTest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:16\")\n            .withDatabaseName(\"testdb\")\n            .withUsername(\"testuser\")\n            .withPassword(\"testpass\");\n\n    @DynamicPropertySource\n    static void configureProperties(DynamicPropertyRegistry registry) {\n        registry.add(\"spring.datasource.url\", postgres::getJdbcUrl);\n        registry.add(\"spring.datasource.username\", postgres::getUsername);\n        registry.add(\"spring.datasource.password\", postgres::getPassword);\n    }\n\n    @Autowired\n    private DepartmentJpaRepository departmentRepository;\n\n    @BeforeEach\n    void setUp() {\n        departmentRepository.deleteAll();\n    }\n\n    @Nested\n    @DisplayName(\"\u767b\u9332\")\n    class Insert {\n\n        @Test\n        @DisplayName(\"\u90e8\u9580\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canInsertDepartment() {\n            // Arrange\n            var department = Department.builder()\n                    .departmentCode(\"10000\")\n                    .departmentName(\"\u5168\u793e\")\n                    .organizationLevel(0)\n                    .departmentPath(\"10000\")\n                    .lowestLevelFlag(0)\n                    .build();\n\n            // Act\n            departmentRepository.save(department);\n\n            // Assert\n            var result = departmentRepository.findById(\"10000\");\n            assertThat(result).isPresent();\n            assertThat(result.get().getDepartmentName()).isEqualTo(\"\u5168\u793e\");\n            assertThat(result.get().getOrganizationLevel()).isEqualTo(0);\n        }\n\n        @Test\n        @DisplayName(\"\u968e\u5c64\u69cb\u9020\u3092\u6301\u3064\u90e8\u9580\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canInsertHierarchicalDepartments() {\n            // Arrange &amp; Act\n            departmentRepository.save(Department.builder()\n                    .departmentCode(\"10000\")\n                    .departmentName(\"\u5168\u793e\")\n                    .organizationLevel(0)\n                    .departmentPath(\"10000\")\n                    .lowestLevelFlag(0)\n                    .build());\n\n            departmentRepository.save(Department.builder()\n                    .departmentCode(\"11000\")\n                    .departmentName(\"\u55b6\u696d\u672c\u90e8\")\n                    .organizationLevel(1)\n                    .departmentPath(\"10000~11000\")\n                    .lowestLevelFlag(0)\n                    .build());\n\n            departmentRepository.save(Department.builder()\n                    .departmentCode(\"11110\")\n                    .departmentName(\"\u6771\u65e5\u672c\u55b6\u696d\u8ab2\")\n                    .organizationLevel(3)\n                    .departmentPath(\"10000~11000~11100~11110\")\n                    .lowestLevelFlag(1)\n                    .build());\n\n            // Assert\n            var result = departmentRepository.findById(\"11110\");\n            assertThat(result).isPresent();\n            assertThat(result.get().getDepartmentPath()).isEqualTo(\"10000~11000~11100~11110\");\n            assertThat(result.get().isLeaf()).isTrue();\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u691c\u7d22\")\n    class Search {\n\n        @BeforeEach\n        void setUpTestData() {\n            departmentRepository.save(Department.builder()\n                    .departmentCode(\"10000\")\n                    .departmentName(\"\u5168\u793e\")\n                    .organizationLevel(0)\n                    .departmentPath(\"10000\")\n                    .lowestLevelFlag(0)\n                    .build());\n\n            departmentRepository.save(Department.builder()\n                    .departmentCode(\"11000\")\n                    .departmentName(\"\u55b6\u696d\u672c\u90e8\")\n                    .organizationLevel(1)\n                    .departmentPath(\"10000~11000\")\n                    .lowestLevelFlag(0)\n                    .build());\n\n            departmentRepository.save(Department.builder()\n                    .departmentCode(\"11110\")\n                    .departmentName(\"\u6771\u65e5\u672c\u55b6\u696d\u8ab2\")\n                    .organizationLevel(3)\n                    .departmentPath(\"10000~11000~11100~11110\")\n                    .lowestLevelFlag(1)\n                    .build());\n\n            departmentRepository.save(Department.builder()\n                    .departmentCode(\"12000\")\n                    .departmentName(\"\u88fd\u9020\u672c\u90e8\")\n                    .organizationLevel(1)\n                    .departmentPath(\"10000~12000\")\n                    .lowestLevelFlag(0)\n                    .build());\n        }\n\n        @Test\n        @DisplayName(\"\u7d44\u7e54\u968e\u5c64\u3067\u691c\u7d22\u3067\u304d\u308b\")\n        void canFindByOrganizationLevel() {\n            // Act\n            var result = departmentRepository.findByOrganizationLevel(1);\n\n            // Assert\n            assertThat(result).hasSize(2);\n            assertThat(result).extracting(Department::getDepartmentCode)\n                    .containsExactlyInAnyOrder(\"11000\", \"12000\");\n        }\n\n        @Test\n        @DisplayName(\"\u90e8\u9580\u30d1\u30b9\u3067\u914d\u4e0b\u306e\u90e8\u9580\u3092\u691c\u7d22\u3067\u304d\u308b\")\n        void canFindByDepartmentPathStartsWith() {\n            // Act\n            var result = departmentRepository.findByDepartmentPathStartsWith(\"10000~11000\");\n\n            // Assert\n            assertThat(result).hasSize(2);\n            assertThat(result).extracting(Department::getDepartmentCode)\n                    .containsExactlyInAnyOrder(\"11000\", \"11110\");\n        }\n\n        @Test\n        @DisplayName(\"\u6700\u4e0b\u5c64\u90e8\u9580\u306e\u307f\u691c\u7d22\u3067\u304d\u308b\")\n        void canFindLeafDepartments() {\n            // Act\n            var result = departmentRepository.findLeafDepartments();\n\n            // Assert\n            assertThat(result).hasSize(1);\n            assertThat(result.get(0).getDepartmentCode()).isEqualTo(\"11110\");\n        }\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter20-orm/#203","title":"20.3 \u52d8\u5b9a\u79d1\u76ee\u4f53\u7cfb","text":""},{"location":"article/part3-orm/chapter20-orm/#2031","title":"20.3.1 \u52d8\u5b9a\u79d1\u76ee\u306e\u69cb\u6210","text":"<p>D\u793e\u306e\u52d8\u5b9a\u79d1\u76ee\u306f\u3001\u8cb8\u501f\u5bfe\u7167\u8868\uff08BS\uff09\u79d1\u76ee\u3068\u640d\u76ca\u8a08\u7b97\u66f8\uff08PL\uff09\u79d1\u76ee\u3067\u69cb\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part3-orm/chapter20-orm/#2032","title":"20.3.2 \u4e3b\u8981\u52d8\u5b9a\u79d1\u76ee\u4e00\u89a7","text":"<p>\u8cc7\u7523\uff08BS\u501f\u65b9\uff09</p> \u30b3\u30fc\u30c9 \u79d1\u76ee\u540d \u88dc\u52a9\u79d1\u76ee \u8aac\u660e 11110 \u73fe\u91d1 - \u624b\u5143\u73fe\u91d1 11130 \u666e\u901a\u9810\u91d1 \u5fc5\u9808 \u9280\u884c\u5225\u7ba1\u7406 11210 \u58f2\u639b\u91d1 \u5fc5\u9808 \u5f97\u610f\u5148\u5225\u7ba1\u7406 11330 \u539f\u6750\u6599 \u5fc5\u9808 \u54c1\u76ee\u5225\u7ba1\u7406 11430 \u4eee\u6255\u6d88\u8cbb\u7a0e - \u6d88\u8cbb\u7a0e\u51e6\u7406\u7528 <p>\u8ca0\u50b5\u30fb\u7d14\u8cc7\u7523\u30fb\u53ce\u76ca\u30fb\u8cbb\u7528</p> \u30b3\u30fc\u30c9 \u79d1\u76ee\u540d \u6d88\u8cbb\u7a0e \u8aac\u660e 21110 \u8cb7\u639b\u91d1 - \u4ed5\u5165\u5148\u5225\u7ba1\u7406 21240 \u4eee\u53d7\u6d88\u8cbb\u7a0e - \u6d88\u8cbb\u7a0e\u51e6\u7406\u7528 33200 \u7e70\u8d8a\u5229\u76ca\u5270\u4f59\u91d1 - \u7559\u4fdd\u5229\u76ca 41110 \u56fd\u5185\u58f2\u4e0a\u9ad8 \u8ab2\u7a0e10% \u56fd\u5185\u5411\u3051\u58f2\u4e0a 62100 \u65c5\u8cbb\u4ea4\u901a\u8cbb \u8ab2\u7a0e10% \u51fa\u5f35\u8cbb\u7b49"},{"location":"article/part3-orm/chapter20-orm/#2033","title":"20.3.3 \u4f1a\u8a08\u51e6\u7406\u306e\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"article/part3-orm/chapter20-orm/#204-seed-jpa","title":"20.4 Seed \u30c7\u30fc\u30bf\u6295\u5165\u30b5\u30fc\u30d3\u30b9\uff08JPA\u7248\uff09","text":""},{"location":"article/part3-orm/chapter20-orm/#2041-seeddataservice","title":"20.4.1 SeedDataService","text":"<p>JPA \u306e CascadeType.ALL \u3092\u6d3b\u7528\u3057\u3001\u4ed5\u8a33\u3068\u660e\u7d30\u3092\u4e00\u62ec\u4fdd\u5b58\u3057\u307e\u3059\u3002</p> SeedDataService\uff08JPA\u7248\uff09 <pre><code>// src/main/java/com/example/accounting/infrastructure/seed/SeedDataService.java\npackage com.example.accounting.infrastructure.seed;\n\nimport com.example.accounting.domain.model.account.*;\nimport com.example.accounting.domain.model.department.*;\nimport com.example.accounting.domain.model.journal.*;\nimport com.example.accounting.domain.model.tax.*;\nimport com.example.accounting.infrastructure.persistence.repository.*;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.util.ArrayList;\nimport java.util.List;\n\n/**\n * Seed \u30c7\u30fc\u30bf\u6295\u5165\u30b5\u30fc\u30d3\u30b9\uff08JPA \u7248\uff09\n */\n@Service\n@RequiredArgsConstructor\n@Slf4j\npublic class SeedDataService {\n\n    private final AccountJpaRepository accountRepository;\n    private final AccountStructureJpaRepository accountStructureRepository;\n    private final TaxTransactionJpaRepository taxTransactionRepository;\n    private final DepartmentJpaRepository departmentRepository;\n    private final JournalJpaRepository journalRepository;\n\n    /**\n     * \u5168Seed\u30c7\u30fc\u30bf\u3092\u6295\u5165\n     */\n    @Transactional\n    public void seedAll() {\n        log.info(\"Starting seed data insertion...\");\n\n        seedTaxTransactions();\n        seedAccountMasters();\n        seedAccountStructures();\n        seedDepartments();\n        seedSampleJournals();\n\n        log.info(\"Seed data insertion completed.\");\n    }\n\n    /**\n     * \u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\u306eSeed\u30c7\u30fc\u30bf\n     */\n    @Transactional\n    public void seedTaxTransactions() {\n        log.info(\"Seeding tax transactions...\");\n\n        List&lt;TaxTransaction&gt; taxes = List.of(\n            TaxTransaction.builder()\n                .taxCode(\"00\").taxName(\"\u514d\u7a0e\").taxRate(BigDecimal.ZERO).build(),\n            TaxTransaction.builder()\n                .taxCode(\"08\").taxName(\"\u8efd\u6e1b\u7a0e\u73878%\").taxRate(new BigDecimal(\"0.080\")).build(),\n            TaxTransaction.builder()\n                .taxCode(\"10\").taxName(\"\u6a19\u6e96\u7a0e\u738710%\").taxRate(new BigDecimal(\"0.100\")).build(),\n            TaxTransaction.builder()\n                .taxCode(\"80\").taxName(\"\u975e\u8ab2\u7a0e\").taxRate(BigDecimal.ZERO).build(),\n            TaxTransaction.builder()\n                .taxCode(\"99\").taxName(\"\u5bfe\u8c61\u5916\").taxRate(BigDecimal.ZERO).build()\n        );\n\n        int insertedCount = 0;\n        for (TaxTransaction tax : taxes) {\n            if (!taxTransactionRepository.existsById(tax.getTaxCode())) {\n                taxTransactionRepository.save(tax);\n                insertedCount++;\n            }\n        }\n\n        log.info(\"Tax transactions seeded: {} records\", insertedCount);\n    }\n\n    /**\n     * \u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u306eSeed\u30c7\u30fc\u30bf\n     */\n    @Transactional\n    public void seedAccountMasters() {\n        log.info(\"Seeding account masters...\");\n\n        List&lt;Account&gt; accounts = createAccountMasterSeedData();\n\n        int insertedCount = 0;\n        for (Account account : accounts) {\n            if (!accountRepository.existsById(account.getAccountCode())) {\n                accountRepository.save(account);\n                insertedCount++;\n            }\n        }\n\n        log.info(\"Account masters seeded: {} records\", insertedCount);\n    }\n\n    /**\n     * \u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf\u306eSeed\u30c7\u30fc\u30bf\n     */\n    @Transactional\n    public void seedAccountStructures() {\n        log.info(\"Seeding account structures...\");\n\n        List&lt;Account&gt; accounts = accountRepository.findAll();\n\n        int insertedCount = 0;\n        for (Account account : accounts) {\n            if (!accountStructureRepository.existsById(account.getAccountCode())) {\n                String path = generateAccountPath(account);\n                AccountStructure structure = AccountStructure.builder()\n                    .accountCode(account.getAccountCode())\n                    .accountPath(path)\n                    .account(account)\n                    .build();\n                accountStructureRepository.save(structure);\n                insertedCount++;\n            }\n        }\n\n        log.info(\"Account structures seeded: {} records\", insertedCount);\n    }\n\n    /**\n     * \u90e8\u9580\u30de\u30b9\u30bf\u306eSeed\u30c7\u30fc\u30bf\n     */\n    @Transactional\n    public void seedDepartments() {\n        log.info(\"Seeding departments...\");\n\n        List&lt;Department&gt; departments = createDepartmentSeedData();\n\n        int insertedCount = 0;\n        for (Department dept : departments) {\n            if (!departmentRepository.existsById(dept.getDepartmentCode())) {\n                departmentRepository.save(dept);\n                insertedCount++;\n            }\n        }\n\n        log.info(\"Departments seeded: {} records\", insertedCount);\n    }\n\n    /**\n     * \u30b5\u30f3\u30d7\u30eb\u4ed5\u8a33\u30c7\u30fc\u30bf\u306eSeed\n     */\n    @Transactional\n    public void seedSampleJournals() {\n        log.info(\"Seeding sample journals...\");\n\n        // \u671f\u9996\u4ed5\u8a33\n        createOpeningJournal();\n\n        // \u58f2\u4e0a\u4ed5\u8a33\n        createSalesJournal();\n\n        // \u7d4c\u8cbb\u4ed5\u8a33\n        createExpenseJournal();\n\n        // \u6750\u6599\u4ed5\u5165\u4ed5\u8a33\n        createMaterialPurchaseJournal();\n\n        // \u7d66\u4e0e\u652f\u6255\u4ed5\u8a33\n        createSalaryJournal();\n\n        // \u5165\u91d1\u4ed5\u8a33\n        createReceiptJournal();\n\n        // \u652f\u6255\u4ed5\u8a33\n        createPaymentJournal();\n\n        log.info(\"Sample journals seeded.\");\n    }\n\n    private void createOpeningJournal() {\n        String journalNumber = \"J2025040001\";\n\n        if (journalRepository.existsById(journalNumber)) {\n            return;\n        }\n\n        LocalDate date = LocalDate.of(2025, 4, 1);\n\n        // \u4ed5\u8a33\u30d8\u30c3\u30c0\n        Journal journal = Journal.builder()\n            .journalNumber(journalNumber)\n            .postingDate(date)\n            .inputDate(date)\n            .closingJournalFlag(0)\n            .singleFlag(0)\n            .journalSlipType(JournalSlipType.NORMAL)\n            .departmentCode(\"13100\")\n            .build();\n\n        // \u4ed5\u8a33\u660e\u7d30\n        JournalDetail detail = JournalDetail.builder()\n            .lineNumber(1)\n            .lineDescription(\"\u524d\u671f\u7e70\u8d8a\")\n            .build();\n        detail.setJournal(journal);\n\n        // \u501f\u65b9\uff1a\u666e\u901a\u9810\u91d1\n        JournalDcDetail debit = JournalDcDetail.builder()\n            .dcType(DcType.DEBIT)\n            .accountCode(\"11130\")\n            .amount(new BigDecimal(\"50000000\"))\n            .build();\n        debit.setJournalDetail(detail);\n\n        // \u8cb8\u65b9\uff1a\u7e70\u8d8a\u5229\u76ca\u5270\u4f59\u91d1\n        JournalDcDetail credit = JournalDcDetail.builder()\n            .dcType(DcType.CREDIT)\n            .accountCode(\"33200\")\n            .amount(new BigDecimal(\"50000000\"))\n            .build();\n        credit.setJournalDetail(detail);\n\n        // \u95a2\u9023\u4ed8\u3051\n        detail.addDcDetail(debit);\n        detail.addDcDetail(credit);\n        journal.addDetail(detail);\n\n        // CascadeType.ALL \u306b\u3088\u308a\u4e00\u62ec\u4fdd\u5b58\n        journalRepository.save(journal);\n    }\n\n    private void createSalesJournal() {\n        String journalNumber = \"J2025040002\";\n\n        if (journalRepository.existsById(journalNumber)) {\n            return;\n        }\n\n        LocalDate date = LocalDate.of(2025, 4, 5);\n\n        Journal journal = Journal.builder()\n            .journalNumber(journalNumber)\n            .postingDate(date)\n            .inputDate(date)\n            .closingJournalFlag(0)\n            .singleFlag(0)\n            .journalSlipType(JournalSlipType.AUTO)\n            .departmentCode(\"11110\")\n            .build();\n\n        JournalDetail detail = JournalDetail.builder()\n            .lineNumber(1)\n            .lineDescription(\"ABC\u5546\u4e8b \u30b9\u30ad\u30f3\u30b1\u30a2\u30bb\u30c3\u30c8 100\u500b\")\n            .build();\n        detail.setJournal(journal);\n\n        // \u501f\u65b9\uff1a\u58f2\u639b\u91d1\n        JournalDcDetail debit = JournalDcDetail.builder()\n            .dcType(DcType.DEBIT)\n            .accountCode(\"11210\")\n            .subAccountCode(\"ABC001\")\n            .amount(new BigDecimal(\"330000\"))\n            .build();\n        debit.setJournalDetail(detail);\n\n        // \u8cb8\u65b9\uff1a\u56fd\u5185\u58f2\u4e0a\u9ad8\n        JournalDcDetail creditSales = JournalDcDetail.builder()\n            .dcType(DcType.CREDIT)\n            .accountCode(\"41110\")\n            .subAccountCode(\"ABC001\")\n            .amount(new BigDecimal(\"300000\"))\n            .taxType(TaxType.TAXABLE_SALES)\n            .taxRate(10)\n            .build();\n        creditSales.setJournalDetail(detail);\n\n        // \u8cb8\u65b9\uff1a\u4eee\u53d7\u6d88\u8cbb\u7a0e\n        JournalDcDetail creditTax = JournalDcDetail.builder()\n            .dcType(DcType.CREDIT)\n            .accountCode(\"21240\")\n            .amount(new BigDecimal(\"30000\"))\n            .build();\n        creditTax.setJournalDetail(detail);\n\n        detail.addDcDetail(debit);\n        detail.addDcDetail(creditSales);\n        detail.addDcDetail(creditTax);\n        journal.addDetail(detail);\n\n        journalRepository.save(journal);\n    }\n\n    private void createExpenseJournal() {\n        String journalNumber = \"J2025040003\";\n\n        if (journalRepository.existsById(journalNumber)) {\n            return;\n        }\n\n        LocalDate date = LocalDate.of(2025, 4, 10);\n\n        Journal journal = Journal.builder()\n            .journalNumber(journalNumber)\n            .postingDate(date)\n            .inputDate(date)\n            .closingJournalFlag(0)\n            .singleFlag(0)\n            .journalSlipType(JournalSlipType.NORMAL)\n            .departmentCode(\"11110\")\n            .build();\n\n        JournalDetail detail = JournalDetail.builder()\n            .lineNumber(1)\n            .lineDescription(\"\u51fa\u5f35\u65c5\u8cbb \u6771\u4eac\u2192\u5927\u962a\")\n            .build();\n        detail.setJournal(journal);\n\n        // \u501f\u65b9\uff1a\u65c5\u8cbb\u4ea4\u901a\u8cbb\n        JournalDcDetail debitExp = JournalDcDetail.builder()\n            .dcType(DcType.DEBIT)\n            .accountCode(\"62100\")\n            .amount(new BigDecimal(\"27273\"))\n            .taxType(TaxType.TAXABLE_PURCHASE)\n            .taxRate(10)\n            .build();\n        debitExp.setJournalDetail(detail);\n\n        // \u501f\u65b9\uff1a\u4eee\u6255\u6d88\u8cbb\u7a0e\n        JournalDcDetail debitTax = JournalDcDetail.builder()\n            .dcType(DcType.DEBIT)\n            .accountCode(\"11430\")\n            .amount(new BigDecimal(\"2727\"))\n            .build();\n        debitTax.setJournalDetail(detail);\n\n        // \u8cb8\u65b9\uff1a\u73fe\u91d1\n        JournalDcDetail credit = JournalDcDetail.builder()\n            .dcType(DcType.CREDIT)\n            .accountCode(\"11110\")\n            .amount(new BigDecimal(\"30000\"))\n            .build();\n        credit.setJournalDetail(detail);\n\n        detail.addDcDetail(debitExp);\n        detail.addDcDetail(debitTax);\n        detail.addDcDetail(credit);\n        journal.addDetail(detail);\n\n        journalRepository.save(journal);\n    }\n\n    private void createMaterialPurchaseJournal() {\n        String journalNumber = \"J2025040004\";\n\n        if (journalRepository.existsById(journalNumber)) {\n            return;\n        }\n\n        LocalDate date = LocalDate.of(2025, 4, 15);\n\n        Journal journal = Journal.builder()\n            .journalNumber(journalNumber)\n            .postingDate(date)\n            .inputDate(date)\n            .closingJournalFlag(0)\n            .singleFlag(0)\n            .journalSlipType(JournalSlipType.AUTO)\n            .departmentCode(\"12110\")\n            .build();\n\n        JournalDetail detail = JournalDetail.builder()\n            .lineNumber(1)\n            .lineDescription(\"XYZ\u5316\u5b66 \u539f\u6750\u6599\u4ed5\u5165\")\n            .build();\n        detail.setJournal(journal);\n\n        // \u501f\u65b9\uff1a\u539f\u6750\u6599\n        JournalDcDetail debitMat = JournalDcDetail.builder()\n            .dcType(DcType.DEBIT)\n            .accountCode(\"11330\")\n            .subAccountCode(\"MAT001\")\n            .amount(new BigDecimal(\"500000\"))\n            .taxType(TaxType.TAXABLE_PURCHASE)\n            .taxRate(10)\n            .build();\n        debitMat.setJournalDetail(detail);\n\n        // \u501f\u65b9\uff1a\u4eee\u6255\u6d88\u8cbb\u7a0e\n        JournalDcDetail debitTax = JournalDcDetail.builder()\n            .dcType(DcType.DEBIT)\n            .accountCode(\"11430\")\n            .amount(new BigDecimal(\"50000\"))\n            .build();\n        debitTax.setJournalDetail(detail);\n\n        // \u8cb8\u65b9\uff1a\u8cb7\u639b\u91d1\n        JournalDcDetail credit = JournalDcDetail.builder()\n            .dcType(DcType.CREDIT)\n            .accountCode(\"21110\")\n            .subAccountCode(\"XYZ001\")\n            .amount(new BigDecimal(\"550000\"))\n            .build();\n        credit.setJournalDetail(detail);\n\n        detail.addDcDetail(debitMat);\n        detail.addDcDetail(debitTax);\n        detail.addDcDetail(credit);\n        journal.addDetail(detail);\n\n        journalRepository.save(journal);\n    }\n\n    private void createSalaryJournal() {\n        String journalNumber = \"J2025040005\";\n\n        if (journalRepository.existsById(journalNumber)) {\n            return;\n        }\n\n        LocalDate date = LocalDate.of(2025, 4, 20);\n\n        Journal journal = Journal.builder()\n            .journalNumber(journalNumber)\n            .postingDate(date)\n            .inputDate(date)\n            .closingJournalFlag(0)\n            .singleFlag(0)\n            .journalSlipType(JournalSlipType.NORMAL)\n            .departmentCode(\"13100\")\n            .build();\n\n        JournalDetail detail = JournalDetail.builder()\n            .lineNumber(1)\n            .lineDescription(\"4\u6708\u5ea6\u7d66\u4e0e\")\n            .build();\n        detail.setJournal(journal);\n\n        // \u501f\u65b9\uff1a\u7d66\u6599\u624b\u5f53\n        JournalDcDetail debit = JournalDcDetail.builder()\n            .dcType(DcType.DEBIT)\n            .accountCode(\"61200\")\n            .amount(new BigDecimal(\"10000000\"))\n            .build();\n        debit.setJournalDetail(detail);\n\n        // \u8cb8\u65b9\uff1a\u666e\u901a\u9810\u91d1\n        JournalDcDetail creditBank = JournalDcDetail.builder()\n            .dcType(DcType.CREDIT)\n            .accountCode(\"11130\")\n            .amount(new BigDecimal(\"8500000\"))\n            .build();\n        creditBank.setJournalDetail(detail);\n\n        // \u8cb8\u65b9\uff1a\u9810\u308a\u91d1\n        JournalDcDetail creditDeposit = JournalDcDetail.builder()\n            .dcType(DcType.CREDIT)\n            .accountCode(\"21250\")\n            .amount(new BigDecimal(\"1500000\"))\n            .build();\n        creditDeposit.setJournalDetail(detail);\n\n        detail.addDcDetail(debit);\n        detail.addDcDetail(creditBank);\n        detail.addDcDetail(creditDeposit);\n        journal.addDetail(detail);\n\n        journalRepository.save(journal);\n    }\n\n    private void createReceiptJournal() {\n        String journalNumber = \"J2025040006\";\n\n        if (journalRepository.existsById(journalNumber)) {\n            return;\n        }\n\n        LocalDate date = LocalDate.of(2025, 4, 25);\n\n        Journal journal = Journal.builder()\n            .journalNumber(journalNumber)\n            .postingDate(date)\n            .inputDate(date)\n            .closingJournalFlag(0)\n            .singleFlag(0)\n            .journalSlipType(JournalSlipType.NORMAL)\n            .departmentCode(\"13100\")\n            .build();\n\n        JournalDetail detail = JournalDetail.builder()\n            .lineNumber(1)\n            .lineDescription(\"ABC\u5546\u4e8b \u5165\u91d1\")\n            .build();\n        detail.setJournal(journal);\n\n        // \u501f\u65b9\uff1a\u666e\u901a\u9810\u91d1\n        JournalDcDetail debit = JournalDcDetail.builder()\n            .dcType(DcType.DEBIT)\n            .accountCode(\"11130\")\n            .amount(new BigDecimal(\"330000\"))\n            .build();\n        debit.setJournalDetail(detail);\n\n        // \u8cb8\u65b9\uff1a\u58f2\u639b\u91d1\n        JournalDcDetail credit = JournalDcDetail.builder()\n            .dcType(DcType.CREDIT)\n            .accountCode(\"11210\")\n            .subAccountCode(\"ABC001\")\n            .amount(new BigDecimal(\"330000\"))\n            .build();\n        credit.setJournalDetail(detail);\n\n        detail.addDcDetail(debit);\n        detail.addDcDetail(credit);\n        journal.addDetail(detail);\n\n        journalRepository.save(journal);\n    }\n\n    private void createPaymentJournal() {\n        String journalNumber = \"J2025040007\";\n\n        if (journalRepository.existsById(journalNumber)) {\n            return;\n        }\n\n        LocalDate date = LocalDate.of(2025, 4, 30);\n\n        Journal journal = Journal.builder()\n            .journalNumber(journalNumber)\n            .postingDate(date)\n            .inputDate(date)\n            .closingJournalFlag(0)\n            .singleFlag(0)\n            .journalSlipType(JournalSlipType.NORMAL)\n            .departmentCode(\"13100\")\n            .build();\n\n        JournalDetail detail = JournalDetail.builder()\n            .lineNumber(1)\n            .lineDescription(\"XYZ\u5316\u5b66 \u652f\u6255\")\n            .build();\n        detail.setJournal(journal);\n\n        // \u501f\u65b9\uff1a\u8cb7\u639b\u91d1\n        JournalDcDetail debit = JournalDcDetail.builder()\n            .dcType(DcType.DEBIT)\n            .accountCode(\"21110\")\n            .subAccountCode(\"XYZ001\")\n            .amount(new BigDecimal(\"550000\"))\n            .build();\n        debit.setJournalDetail(detail);\n\n        // \u8cb8\u65b9\uff1a\u666e\u901a\u9810\u91d1\n        JournalDcDetail credit = JournalDcDetail.builder()\n            .dcType(DcType.CREDIT)\n            .accountCode(\"11130\")\n            .amount(new BigDecimal(\"550000\"))\n            .build();\n        credit.setJournalDetail(detail);\n\n        detail.addDcDetail(debit);\n        detail.addDcDetail(credit);\n        journal.addDetail(detail);\n\n        journalRepository.save(journal);\n    }\n\n    private List&lt;Account&gt; createAccountMasterSeedData() {\n        List&lt;Account&gt; accounts = new ArrayList&lt;&gt;();\n\n        // \u6d41\u52d5\u8cc7\u7523\n        accounts.add(Account.builder()\n            .accountCode(\"11110\").accountName(\"\u73fe\u91d1\").accountShortName(\"\u73fe\u91d1\")\n            .bsPlType(BsPlType.BS).dcType(AccountDcType.DEBIT).elementType(ElementType.ASSET)\n            .summaryType(SummaryType.POSTING).managementType(ManagementType.COMMON)\n            .build());\n\n        accounts.add(Account.builder()\n            .accountCode(\"11130\").accountName(\"\u666e\u901a\u9810\u91d1\").accountShortName(\"\u666e\u901a\")\n            .bsPlType(BsPlType.BS).dcType(AccountDcType.DEBIT).elementType(ElementType.ASSET)\n            .summaryType(SummaryType.POSTING).managementType(ManagementType.COMMON)\n            .subAccountType(SubAccountType.REQUIRED)\n            .build());\n\n        accounts.add(Account.builder()\n            .accountCode(\"11210\").accountName(\"\u58f2\u639b\u91d1\").accountShortName(\"\u58f2\u639b\u91d1\")\n            .bsPlType(BsPlType.BS).dcType(AccountDcType.DEBIT).elementType(ElementType.ASSET)\n            .summaryType(SummaryType.POSTING).managementType(ManagementType.COMMON)\n            .subAccountType(SubAccountType.REQUIRED).dueDateManagementType(DueDateManagementType.REQUIRED)\n            .build());\n\n        // \u68da\u5378\u8cc7\u7523\n        accounts.add(Account.builder()\n            .accountCode(\"11330\").accountName(\"\u539f\u6750\u6599\").accountShortName(\"\u539f\u6750\u6599\")\n            .bsPlType(BsPlType.BS).dcType(AccountDcType.DEBIT).elementType(ElementType.ASSET)\n            .summaryType(SummaryType.POSTING).managementType(ManagementType.MANUFACTURING)\n            .subAccountType(SubAccountType.REQUIRED)\n            .build());\n\n        // \u4eee\u6255\u6d88\u8cbb\u7a0e\n        accounts.add(Account.builder()\n            .accountCode(\"11430\").accountName(\"\u4eee\u6255\u6d88\u8cbb\u7a0e\").accountShortName(\"\u4eee\u6255\u7a0e\")\n            .bsPlType(BsPlType.BS).dcType(AccountDcType.DEBIT).elementType(ElementType.ASSET)\n            .summaryType(SummaryType.POSTING).managementType(ManagementType.COMMON)\n            .build());\n\n        // \u8ca0\u50b5\n        accounts.add(Account.builder()\n            .accountCode(\"21110\").accountName(\"\u8cb7\u639b\u91d1\").accountShortName(\"\u8cb7\u639b\u91d1\")\n            .bsPlType(BsPlType.BS).dcType(AccountDcType.CREDIT).elementType(ElementType.LIABILITY)\n            .summaryType(SummaryType.POSTING).managementType(ManagementType.COMMON)\n            .subAccountType(SubAccountType.REQUIRED).dueDateManagementType(DueDateManagementType.REQUIRED)\n            .build());\n\n        accounts.add(Account.builder()\n            .accountCode(\"21240\").accountName(\"\u4eee\u53d7\u6d88\u8cbb\u7a0e\").accountShortName(\"\u4eee\u53d7\u7a0e\")\n            .bsPlType(BsPlType.BS).dcType(AccountDcType.CREDIT).elementType(ElementType.LIABILITY)\n            .summaryType(SummaryType.POSTING).managementType(ManagementType.COMMON)\n            .build());\n\n        accounts.add(Account.builder()\n            .accountCode(\"21250\").accountName(\"\u9810\u308a\u91d1\").accountShortName(\"\u9810\u308a\u91d1\")\n            .bsPlType(BsPlType.BS).dcType(AccountDcType.CREDIT).elementType(ElementType.LIABILITY)\n            .summaryType(SummaryType.POSTING).managementType(ManagementType.COMMON)\n            .build());\n\n        // \u7d14\u8cc7\u7523\n        accounts.add(Account.builder()\n            .accountCode(\"33200\").accountName(\"\u7e70\u8d8a\u5229\u76ca\u5270\u4f59\u91d1\").accountShortName(\"\u7e70\u8d8a\u5229\u76ca\")\n            .bsPlType(BsPlType.BS).dcType(AccountDcType.CREDIT).elementType(ElementType.CAPITAL)\n            .summaryType(SummaryType.POSTING).managementType(ManagementType.COMMON)\n            .build());\n\n        // \u58f2\u4e0a\n        accounts.add(Account.builder()\n            .accountCode(\"41110\").accountName(\"\u56fd\u5185\u58f2\u4e0a\u9ad8\").accountShortName(\"\u56fd\u5185\u58f2\u4e0a\")\n            .bsPlType(BsPlType.PL).dcType(AccountDcType.CREDIT).elementType(ElementType.REVENUE)\n            .summaryType(SummaryType.POSTING).managementType(ManagementType.COMMON)\n            .taxCalculationType(TaxCalculationType.SALES).taxCode(\"10\")\n            .build());\n\n        // \u7d4c\u8cbb\n        accounts.add(Account.builder()\n            .accountCode(\"61200\").accountName(\"\u7d66\u6599\u624b\u5f53\").accountShortName(\"\u7d66\u6599\")\n            .bsPlType(BsPlType.PL).dcType(AccountDcType.DEBIT).elementType(ElementType.EXPENSE)\n            .summaryType(SummaryType.POSTING).managementType(ManagementType.COMMON)\n            .expenseType(ExpenseType.EXPENSE)\n            .build());\n\n        accounts.add(Account.builder()\n            .accountCode(\"62100\").accountName(\"\u65c5\u8cbb\u4ea4\u901a\u8cbb\").accountShortName(\"\u65c5\u8cbb\u4ea4\u901a\")\n            .bsPlType(BsPlType.PL).dcType(AccountDcType.DEBIT).elementType(ElementType.EXPENSE)\n            .summaryType(SummaryType.POSTING).managementType(ManagementType.COMMON)\n            .expenseType(ExpenseType.EXPENSE)\n            .taxCalculationType(TaxCalculationType.PURCHASE).taxCode(\"10\")\n            .build());\n\n        return accounts;\n    }\n\n    private List&lt;Department&gt; createDepartmentSeedData() {\n        return List.of(\n            Department.builder()\n                .departmentCode(\"10000\").departmentName(\"\u5168\u793e\")\n                .organizationLevel(0).departmentPath(\"10000\").lowestLevelFlag(0).build(),\n            Department.builder()\n                .departmentCode(\"11000\").departmentName(\"\u55b6\u696d\u672c\u90e8\")\n                .organizationLevel(1).departmentPath(\"10000~11000\").lowestLevelFlag(0).build(),\n            Department.builder()\n                .departmentCode(\"11110\").departmentName(\"\u6771\u65e5\u672c\u55b6\u696d\u8ab2\")\n                .organizationLevel(3).departmentPath(\"10000~11000~11100~11110\").lowestLevelFlag(1).build(),\n            Department.builder()\n                .departmentCode(\"12000\").departmentName(\"\u88fd\u9020\u672c\u90e8\")\n                .organizationLevel(1).departmentPath(\"10000~12000\").lowestLevelFlag(0).build(),\n            Department.builder()\n                .departmentCode(\"12110\").departmentName(\"\u7b2c\u4e00\u88fd\u9020\u8ab2\")\n                .organizationLevel(3).departmentPath(\"10000~12000~12100~12110\").lowestLevelFlag(1).build(),\n            Department.builder()\n                .departmentCode(\"13000\").departmentName(\"\u7ba1\u7406\u672c\u90e8\")\n                .organizationLevel(1).departmentPath(\"10000~13000\").lowestLevelFlag(0).build(),\n            Department.builder()\n                .departmentCode(\"13100\").departmentName(\"\u7d4c\u7406\u90e8\")\n                .organizationLevel(2).departmentPath(\"10000~13000~13100\").lowestLevelFlag(0).build()\n        );\n    }\n\n    private String generateAccountPath(Account account) {\n        String code = account.getAccountCode();\n\n        // \u7c21\u6613\u7684\u306a\u30d1\u30b9\u751f\u6210\uff08\u5b9f\u969b\u306f\u30de\u30b9\u30bf\u306e\u89aa\u5b50\u95a2\u4fc2\u304b\u3089\u751f\u6210\uff09\n        if (code.length() == 2) {\n            return code;\n        } else if (code.length() == 5) {\n            String parent = code.substring(0, 2);\n            return parent + \"~\" + code;\n        }\n        return code;\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter20-orm/#2042-commandlinerunner","title":"20.4.2 CommandLineRunner \u306b\u3088\u308b\u8d77\u52d5\u6642\u30c7\u30fc\u30bf\u6295\u5165","text":"SeedDataRunner\uff08CommandLineRunner\uff09 <pre><code>// src/main/java/com/example/accounting/infrastructure/seed/SeedDataRunner.java\npackage com.example.accounting.infrastructure.seed;\n\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.boot.CommandLineRunner;\nimport org.springframework.context.annotation.Profile;\nimport org.springframework.stereotype.Component;\n\n/**\n * \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8d77\u52d5\u6642\u306b Seed \u30c7\u30fc\u30bf\u3092\u6295\u5165\u3059\u308b\n *\n * dev, local \u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u6642\u306e\u307f\u6709\u52b9\n */\n@Component\n@Profile({\"dev\", \"local\"})\n@RequiredArgsConstructor\n@Slf4j\npublic class SeedDataRunner implements CommandLineRunner {\n\n    private final SeedDataService seedDataService;\n\n    @Override\n    public void run(String... args) {\n        log.info(\"=== Starting Seed Data Initialization ===\");\n\n        try {\n            seedDataService.seedAll();\n            log.info(\"=== Seed Data Initialization Completed ===\");\n        } catch (Exception e) {\n            log.error(\"=== Seed Data Initialization Failed ===\", e);\n            // \u8d77\u52d5\u306f\u7d99\u7d9a\u3055\u305b\u308b\uff08\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u304c\u7121\u304f\u3066\u3082\u52d5\u4f5c\u306f\u53ef\u80fd\uff09\n        }\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter20-orm/#2043-postconstruct","title":"20.4.3 @PostConstruct \u3092\u4f7f\u7528\u3057\u305f\u4ee3\u66ff\u5b9f\u88c5","text":"SeedDataInitializer\uff08@PostConstruct\uff09 <pre><code>// src/main/java/com/example/accounting/infrastructure/seed/SeedDataInitializer.java\npackage com.example.accounting.infrastructure.seed;\n\nimport jakarta.annotation.PostConstruct;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.context.annotation.Profile;\nimport org.springframework.stereotype.Component;\n\n/**\n * @PostConstruct \u3092\u4f7f\u7528\u3057\u305f Seed \u30c7\u30fc\u30bf\u6295\u5165\n *\n * CommandLineRunner \u3088\u308a\u65e9\u3044\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u5b9f\u884c\u3055\u308c\u308b\n */\n@Component\n@Profile({\"dev\", \"local\"})\n@RequiredArgsConstructor\n@Slf4j\npublic class SeedDataInitializer {\n\n    private final SeedDataService seedDataService;\n\n    @PostConstruct\n    public void initialize() {\n        log.info(\"=== @PostConstruct Seed Data Initialization ===\");\n\n        try {\n            seedDataService.seedAll();\n            log.info(\"=== Seed Data Initialization Completed ===\");\n        } catch (Exception e) {\n            log.error(\"=== Seed Data Initialization Failed ===\", e);\n        }\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter20-orm/#205-seed","title":"20.5 Seed \u30c7\u30fc\u30bf\u6295\u5165\u30c6\u30b9\u30c8","text":"SeedDataServiceTest\uff08JPA\u7248\uff09 <pre><code>// src/test/java/com/example/accounting/infrastructure/seed/SeedDataServiceTest.java\npackage com.example.accounting.infrastructure.seed;\n\nimport com.example.accounting.domain.model.account.*;\nimport com.example.accounting.domain.model.journal.*;\nimport com.example.accounting.infrastructure.persistence.repository.*;\nimport org.junit.jupiter.api.*;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\nimport org.springframework.context.annotation.Import;\nimport org.springframework.test.context.DynamicPropertyRegistry;\nimport org.springframework.test.context.DynamicPropertySource;\nimport org.testcontainers.containers.PostgreSQLContainer;\nimport org.testcontainers.junit.jupiter.Container;\nimport org.testcontainers.junit.jupiter.Testcontainers;\n\nimport java.math.BigDecimal;\n\nimport static org.assertj.core.api.Assertions.*;\n\n@DataJpaTest\n@Import(SeedDataService.class)\n@Testcontainers\n@DisplayName(\"Seed\u30c7\u30fc\u30bf\u6295\u5165\uff08JPA\uff09\")\nclass SeedDataServiceTest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:16\")\n            .withDatabaseName(\"testdb\")\n            .withUsername(\"testuser\")\n            .withPassword(\"testpass\");\n\n    @DynamicPropertySource\n    static void configureProperties(DynamicPropertyRegistry registry) {\n        registry.add(\"spring.datasource.url\", postgres::getJdbcUrl);\n        registry.add(\"spring.datasource.username\", postgres::getUsername);\n        registry.add(\"spring.datasource.password\", postgres::getPassword);\n    }\n\n    @Autowired\n    private SeedDataService seedDataService;\n\n    @Autowired\n    private AccountJpaRepository accountRepository;\n\n    @Autowired\n    private TaxTransactionJpaRepository taxTransactionRepository;\n\n    @Autowired\n    private DepartmentJpaRepository departmentRepository;\n\n    @Autowired\n    private JournalJpaRepository journalRepository;\n\n    @Nested\n    @DisplayName(\"\u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\")\n    class TaxTransactionSeed {\n\n        @Test\n        @DisplayName(\"\u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\u306eSeed\u30c7\u30fc\u30bf\u3092\u6295\u5165\u3067\u304d\u308b\")\n        void canSeedTaxTransactions() {\n            // Act\n            seedDataService.seedTaxTransactions();\n\n            // Assert\n            var tax10 = taxTransactionRepository.findById(\"10\");\n            assertThat(tax10).isPresent();\n            assertThat(tax10.get().getTaxName()).isEqualTo(\"\u6a19\u6e96\u7a0e\u738710%\");\n            assertThat(tax10.get().getTaxRate()).isEqualByComparingTo(new BigDecimal(\"0.100\"));\n\n            var tax08 = taxTransactionRepository.findById(\"08\");\n            assertThat(tax08).isPresent();\n            assertThat(tax08.get().getTaxName()).isEqualTo(\"\u8efd\u6e1b\u7a0e\u73878%\");\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\")\n    class AccountMasterSeed {\n\n        @BeforeEach\n        void setUp() {\n            seedDataService.seedTaxTransactions();\n        }\n\n        @Test\n        @DisplayName(\"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u306eSeed\u30c7\u30fc\u30bf\u3092\u6295\u5165\u3067\u304d\u308b\")\n        void canSeedAccountMasters() {\n            // Act\n            seedDataService.seedAccountMasters();\n\n            // Assert\n            var cash = accountRepository.findById(\"11110\");\n            assertThat(cash).isPresent();\n            assertThat(cash.get().getAccountName()).isEqualTo(\"\u73fe\u91d1\");\n            assertThat(cash.get().getBsPlType()).isEqualTo(BsPlType.BS);\n            assertThat(cash.get().getDcType()).isEqualTo(AccountDcType.DEBIT);\n\n            var sales = accountRepository.findById(\"41110\");\n            assertThat(sales).isPresent();\n            assertThat(sales.get().getAccountName()).isEqualTo(\"\u56fd\u5185\u58f2\u4e0a\u9ad8\");\n            assertThat(sales.get().getBsPlType()).isEqualTo(BsPlType.PL);\n            assertThat(sales.get().getDcType()).isEqualTo(AccountDcType.CREDIT);\n        }\n\n        @Test\n        @DisplayName(\"\u91cd\u8907\u5b9f\u884c\u3057\u3066\u3082\u65e2\u5b58\u30c7\u30fc\u30bf\u304c\u4e0a\u66f8\u304d\u3055\u308c\u306a\u3044\uff08\u51aa\u7b49\u6027\uff09\")\n        void seedIsIdempotent() {\n            // Act\n            seedDataService.seedAccountMasters();\n            seedDataService.seedAccountMasters(); // 2\u56de\u76ee\n\n            // Assert\n            var accounts = accountRepository.findAll();\n            long cashCount = accounts.stream()\n                    .filter(a -&gt; \"11110\".equals(a.getAccountCode()))\n                    .count();\n            assertThat(cashCount).isEqualTo(1);\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u90e8\u9580\u30de\u30b9\u30bf\")\n    class DepartmentSeed {\n\n        @Test\n        @DisplayName(\"\u90e8\u9580\u30de\u30b9\u30bf\u306eSeed\u30c7\u30fc\u30bf\u3092\u6295\u5165\u3067\u304d\u308b\")\n        void canSeedDepartments() {\n            // Act\n            seedDataService.seedDepartments();\n\n            // Assert\n            var company = departmentRepository.findById(\"10000\");\n            assertThat(company).isPresent();\n            assertThat(company.get().getDepartmentName()).isEqualTo(\"\u5168\u793e\");\n            assertThat(company.get().getOrganizationLevel()).isEqualTo(0);\n\n            var sales = departmentRepository.findById(\"11110\");\n            assertThat(sales).isPresent();\n            assertThat(sales.get().getDepartmentName()).isEqualTo(\"\u6771\u65e5\u672c\u55b6\u696d\u8ab2\");\n            assertThat(sales.get().getDepartmentPath()).isEqualTo(\"10000~11000~11100~11110\");\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u4ed5\u8a33\u30c7\u30fc\u30bf\")\n    class JournalSeed {\n\n        @BeforeEach\n        void setUp() {\n            seedDataService.seedTaxTransactions();\n            seedDataService.seedAccountMasters();\n            seedDataService.seedDepartments();\n        }\n\n        @Test\n        @DisplayName(\"\u30b5\u30f3\u30d7\u30eb\u4ed5\u8a33\u30c7\u30fc\u30bf\u3092\u6295\u5165\u3067\u304d\u308b\")\n        void canSeedSampleJournals() {\n            // Act\n            seedDataService.seedSampleJournals();\n\n            // Assert\n            // \u671f\u9996\u4ed5\u8a33\n            var opening = journalRepository.findById(\"J2025040001\");\n            assertThat(opening).isPresent();\n            assertThat(opening.get().getJournalSlipType()).isEqualTo(JournalSlipType.NORMAL);\n\n            // \u58f2\u4e0a\u4ed5\u8a33\n            var sales = journalRepository.findById(\"J2025040002\");\n            assertThat(sales).isPresent();\n            assertThat(sales.get().getJournalSlipType()).isEqualTo(JournalSlipType.AUTO);\n\n            // CascadeType.ALL \u306b\u3088\u308a\u660e\u7d30\u3082\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\n            var salesWithDetails = journalRepository.findWithDetailsById(\"J2025040002\");\n            assertThat(salesWithDetails).isPresent();\n            assertThat(salesWithDetails.get().getDetails()).hasSize(1);\n        }\n\n        @Test\n        @DisplayName(\"\u4ed5\u8a33\u306e\u8cb8\u501f\u4e00\u81f4\u3092\u78ba\u8a8d\u3067\u304d\u308b\")\n        void journalBalanceIsCorrect() {\n            // Arrange\n            seedDataService.seedSampleJournals();\n\n            // Act\n            var journal = journalRepository.findWithDetailsById(\"J2025040002\").orElseThrow();\n\n            // Assert\n            var detail = journal.getDetails().get(0);\n            BigDecimal debitSum = detail.getDcDetails().stream()\n                    .filter(d -&gt; d.getDcType() == DcType.DEBIT)\n                    .map(JournalDcDetail::getAmount)\n                    .reduce(BigDecimal.ZERO, BigDecimal::add);\n            BigDecimal creditSum = detail.getDcDetails().stream()\n                    .filter(d -&gt; d.getDcType() == DcType.CREDIT)\n                    .map(JournalDcDetail::getAmount)\n                    .reduce(BigDecimal.ZERO, BigDecimal::add);\n\n            assertThat(debitSum).isEqualByComparingTo(creditSum);\n            assertThat(debitSum).isEqualByComparingTo(new BigDecimal(\"330000\"));\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u5168\u30c7\u30fc\u30bf\u4e00\u62ec\u6295\u5165\")\n    class SeedAll {\n\n        @Test\n        @DisplayName(\"\u5168Seed\u30c7\u30fc\u30bf\u3092\u4e00\u62ec\u6295\u5165\u3067\u304d\u308b\")\n        void canSeedAll() {\n            // Act\n            seedDataService.seedAll();\n\n            // Assert\n            assertThat(taxTransactionRepository.findById(\"10\")).isPresent();\n            assertThat(accountRepository.findById(\"11110\")).isPresent();\n            assertThat(departmentRepository.findById(\"10000\")).isPresent();\n            assertThat(journalRepository.findById(\"J2025040001\")).isPresent();\n        }\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter20-orm/#206","title":"20.6 \u30c7\u30fc\u30bf\u6295\u5165\u9806\u5e8f","text":"<p>\u5916\u90e8\u30ad\u30fc\u5236\u7d04\u3092\u8003\u616e\u3057\u305f\u30c7\u30fc\u30bf\u6295\u5165\u9806\u5e8f\uff1a</p> <p></p>"},{"location":"article/part3-orm/chapter20-orm/#_1","title":"\u307e\u3068\u3081","text":""},{"location":"article/part3-orm/chapter20-orm/#mybatis","title":"MyBatis \u7248\u3068\u306e\u9055\u3044","text":"\u89b3\u70b9 MyBatis \u7248 JPA \u7248 Repository Mapper \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9 + XML JpaRepository \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9 \u30de\u30c3\u30d4\u30f3\u30b0 resultMap \u3067\u65e5\u672c\u8a9e\u30ab\u30e9\u30e0 \u2194 \u82f1\u8a9e\u30d7\u30ed\u30d1\u30c6\u30a3 @Column \u3067\u65e5\u672c\u8a9e\u30ab\u30e9\u30e0\u540d\u3092\u6307\u5b9a \u95a2\u9023\u306e\u4fdd\u5b58 \u500b\u5225\u306b INSERT CascadeType.ALL \u3067\u4e00\u62ec\u4fdd\u5b58 \u30c6\u30b9\u30c8 @MybatisTest @DataJpaTest \u30af\u30a8\u30ea\u30e1\u30bd\u30c3\u30c9 XML \u306b SQL \u3092\u8a18\u8ff0 \u30e1\u30bd\u30c3\u30c9\u540d\u898f\u7d04 or @Query \u5b58\u5728\u78ba\u8a8d findByCode() == null existsById()"},{"location":"article/part3-orm/chapter20-orm/#jpa","title":"JPA \u56fa\u6709\u306e\u30dd\u30a4\u30f3\u30c8","text":"<ol> <li> <p>CascadeType.ALL \u306b\u3088\u308b\u30ab\u30b9\u30b1\u30fc\u30c9\u4fdd\u5b58 <pre><code>@OneToMany(mappedBy = \"journal\", cascade = CascadeType.ALL, orphanRemoval = true)\nprivate List&lt;JournalDetail&gt; details = new ArrayList&lt;&gt;();\n</code></pre></p> </li> <li> <p>@PrePersist / @PreUpdate \u306b\u3088\u308b\u81ea\u52d5\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7 <pre><code>@PrePersist\nprotected void onCreate() {\n    if (createdAt == null) {\n        createdAt = LocalDateTime.now();\n    }\n}\n</code></pre></p> </li> <li> <p>existsById() \u306b\u3088\u308b\u5b58\u5728\u78ba\u8a8d <pre><code>if (!accountRepository.existsById(account.getAccountCode())) {\n    accountRepository.save(account);\n}\n</code></pre></p> </li> <li> <p>CommandLineRunner \u306b\u3088\u308b\u8d77\u52d5\u6642\u30c7\u30fc\u30bf\u6295\u5165 <pre><code>@Component\n@Profile({\"dev\", \"local\"})\npublic class SeedDataRunner implements CommandLineRunner {\n    @Override\n    public void run(String... args) {\n        seedDataService.seedAll();\n    }\n}\n</code></pre></p> </li> </ol>"},{"location":"article/part3-orm/chapter20-orm/#_2","title":"\u8a2d\u8a08\u306e\u30dd\u30a4\u30f3\u30c8","text":"<ol> <li>\u5b9f\u52d9\u306b\u5373\u3057\u305f\u52d8\u5b9a\u79d1\u76ee\u4f53\u7cfb</li> <li>\u88fd\u9020\u696d\u5411\u3051\u306e\u79d1\u76ee\u69cb\u6210</li> <li>\u7ba1\u7406\u4f1a\u8a08\u533a\u5206\u306b\u3088\u308b\u90e8\u9580\u5225\u640d\u76ca</li> <li> <p>\u6d88\u8cbb\u7a0e\u8907\u6570\u7a0e\u7387\u5bfe\u5fdc</p> </li> <li> <p>\u968e\u5c64\u69cb\u9020\u306e\u7ba1\u7406</p> </li> <li>\u52d8\u5b9a\u79d1\u76ee\u306e\u30c1\u30eb\u30c0\u9023\u7d50\u30d1\u30b9</li> <li>\u90e8\u9580\u30de\u30b9\u30bf\u306e\u7d44\u7e54\u968e\u5c64</li> <li> <p>\u79d1\u76ee\u96c6\u8a08\u306e\u52b9\u7387\u5316</p> </li> <li> <p>Seed\u30c7\u30fc\u30bf\u306e\u8a2d\u8a08</p> </li> <li>\u5916\u90e8\u30ad\u30fc\u5236\u7d04\u3092\u8003\u616e\u3057\u305f\u6295\u5165\u9806\u5e8f</li> <li>\u51aa\u7b49\u6027\uff08\u91cd\u8907\u5b9f\u884c\u6642\u306e\u5b89\u5168\u6027\uff09</li> <li> <p>\u30c6\u30b9\u30c8\u53ef\u80fd\u306a\u69cb\u9020</p> </li> <li> <p>\u4ed5\u8a33\u30d1\u30bf\u30fc\u30f3\u306e\u7db2\u7f85</p> </li> <li>\u671f\u9996\u7e70\u8d8a\u4ed5\u8a33</li> <li>\u58f2\u4e0a\u30fb\u58f2\u639b\u91d1\u4ed5\u8a33</li> <li>\u7d4c\u8cbb\u30fb\u6d88\u8cbb\u7a0e\u4ed5\u8a33</li> <li>\u6750\u6599\u4ed5\u5165\u4ed5\u8a33</li> <li>\u7d66\u4e0e\u652f\u6255\u4ed5\u8a33</li> <li>\u5165\u91d1\u30fb\u652f\u6255\u4ed5\u8a33</li> </ol>"},{"location":"article/part3-orm/chapter20-orm/#seed","title":"\u30c6\u30fc\u30d6\u30eb\u4e00\u89a7\uff08Seed\u5bfe\u8c61\uff09","text":"\u30c6\u30fc\u30d6\u30eb\u540d \u4ef6\u6570\u76ee\u5b89 \u8aac\u660e \u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf 5\u4ef6 \u7a0e\u7387\u30de\u30b9\u30bf \u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf 100\u4ef6 \u79d1\u76ee\u30de\u30b9\u30bf \u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf 100\u4ef6 \u79d1\u76ee\u968e\u5c64 \u90e8\u9580\u30de\u30b9\u30bf 30\u4ef6 \u7d44\u7e54\u30de\u30b9\u30bf \u4ed5\u8a33 10\u4ef6 \u30b5\u30f3\u30d7\u30eb\u4ed5\u8a33 \u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8 50\u4ef6 \u65e5\u6b21\u6b8b\u9ad8 \u6708\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8 20\u4ef6 \u6708\u6b21\u6b8b\u9ad8 <p>\u2190 \u7b2c19\u7ae0\uff1a\u8d64\u9ed2\u3068\u30ed\u30b0\u306e\u8a2d\u8a08\u3010ORM\u7248\u3011 | \u7b2c21\u7ae0\uff1aAPI\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5\u3010ORM\u7248\u3011 \u2192</p>"},{"location":"article/part3-orm/chapter21-orm/","title":"\u7b2c21\u7ae0\uff1aAPI\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5\u3010ORM\u7248\u3011","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e API \u30b5\u30fc\u30d3\u30b9\u3092 TDD \u3067\u5b9f\u88c5\u3057\u307e\u3059\u3002\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u57fa\u3065\u304d\u3001Spring Data JPA \u3092\u4f7f\u7528\u3057\u305f\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf API\u3001\u4ed5\u8a33 API\u3001\u6b8b\u9ad8\u7167\u4f1a API \u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002</p>"},{"location":"article/part3-orm/chapter21-orm/#211","title":"21.1 \u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":""},{"location":"article/part3-orm/chapter21-orm/#2111-ports-and-adapters","title":"21.1.1 Ports and Adapters \u30d1\u30bf\u30fc\u30f3","text":"<p>\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306f\u3001\u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\u3092\u5916\u90e8\u306e\u6280\u8853\u7684\u95a2\u5fc3\u4e8b\u304b\u3089\u5206\u96e2\u3059\u308b\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002</p> <p></p>"},{"location":"article/part3-orm/chapter21-orm/#2112","title":"21.1.2 \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u5229\u70b9","text":"\u5229\u70b9 \u8aac\u660e \u30c6\u30b9\u30c8\u5bb9\u6613\u6027 \u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\u3092\u5358\u72ec\u3067\u30c6\u30b9\u30c8\u53ef\u80fd \u6280\u8853\u72ec\u7acb\u6027 DB\u3001\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306e\u5909\u66f4\u304c\u5bb9\u6613 \u53ef\u8aad\u6027 \u8cac\u52d9\u304c\u660e\u78ba\u306b\u5206\u96e2\u3055\u308c\u308b \u4fdd\u5b88\u6027 \u5909\u66f4\u306e\u5f71\u97ff\u7bc4\u56f2\u304c\u9650\u5b9a\u3055\u308c\u308b"},{"location":"article/part3-orm/chapter21-orm/#212-jpa","title":"21.2 \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u69cb\u9020\uff08JPA\u7248\uff09","text":""},{"location":"article/part3-orm/chapter21-orm/#2121","title":"21.2.1 \u30d1\u30c3\u30b1\u30fc\u30b8\u69cb\u6210","text":""},{"location":"article/part3-orm/chapter21-orm/#2122","title":"21.2.2 \u5404\u30ec\u30a4\u30e4\u30fc\u306e\u8cac\u52d9","text":""},{"location":"article/part3-orm/chapter21-orm/#213-api","title":"21.3 \u30de\u30b9\u30bf API \u306e\u5b9f\u88c5","text":""},{"location":"article/part3-orm/chapter21-orm/#2131-api","title":"21.3.1 API \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u8a2d\u8a08","text":"\u30e1\u30bd\u30c3\u30c9 \u30d1\u30b9 \u8aac\u660e GET /api/accounts \u52d8\u5b9a\u79d1\u76ee\u4e00\u89a7\u53d6\u5f97 GET /api/accounts/{accountCode} \u52d8\u5b9a\u79d1\u76ee\u53d6\u5f97 GET /api/accounts/{accountCode}/hierarchy \u79d1\u76ee\u968e\u5c64\u53d6\u5f97 POST /api/accounts \u52d8\u5b9a\u79d1\u76ee\u767b\u9332 PUT /api/accounts/{accountCode} \u52d8\u5b9a\u79d1\u76ee\u66f4\u65b0 DELETE /api/accounts/{accountCode} \u52d8\u5b9a\u79d1\u76ee\u524a\u9664"},{"location":"article/part3-orm/chapter21-orm/#2132-output-port","title":"21.3.2 Output Port\uff08\u30ea\u30dd\u30b8\u30c8\u30ea\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff09","text":"AccountRepository\uff08Output Port\uff09 <pre><code>// src/main/java/com/example/accounting/application/port/out/AccountRepository.java\npackage com.example.accounting.application.port.out;\n\nimport com.example.accounting.domain.model.account.Account;\n\nimport java.util.List;\nimport java.util.Optional;\n\n/**\n * \u52d8\u5b9a\u79d1\u76ee\u30ea\u30dd\u30b8\u30c8\u30ea\uff08Output Port\uff09\n *\n * \u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u304a\u3051\u308b\u51fa\u529b\u30dd\u30fc\u30c8\u3002\n * \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\u304b\u3089\u6c38\u7d9a\u5316\u5c64\u3078\u306e\u4f9d\u5b58\u3092\u62bd\u8c61\u5316\u3059\u308b\u3002\n */\npublic interface AccountRepository {\n\n    /**\n     * \u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\u3067\u691c\u7d22\n     */\n    Optional&lt;Account&gt; findByCode(String accountCode);\n\n    /**\n     * \u5168\u4ef6\u53d6\u5f97\n     */\n    List&lt;Account&gt; findAll();\n\n    /**\n     * BSPL\u533a\u5206\u3067\u691c\u7d22\n     */\n    List&lt;Account&gt; findByBsPlType(String bsPlType);\n\n    /**\n     * \u79d1\u76ee\u30d1\u30b9\u3067\u691c\u7d22\uff08\u30c1\u30eb\u30c0\u9023\u7d50\u65b9\u5f0f\uff09\n     */\n    List&lt;Account&gt; findByPathLike(String pathPattern);\n\n    /**\n     * \u8a08\u4e0a\u79d1\u76ee\u306e\u307f\u53d6\u5f97\n     */\n    List&lt;Account&gt; findPostingAccounts();\n\n    /**\n     * \u4fdd\u5b58\uff08\u65b0\u898f\u30fb\u66f4\u65b0\uff09\n     */\n    Account save(Account account);\n\n    /**\n     * \u524a\u9664\n     */\n    void delete(String accountCode);\n\n    /**\n     * \u5b58\u5728\u78ba\u8a8d\n     */\n    boolean exists(String accountCode);\n}\n</code></pre>"},{"location":"article/part3-orm/chapter21-orm/#2133-jpa-repository","title":"21.3.3 JPA Repository \u5b9f\u88c5","text":"AccountJpaRepository <pre><code>// src/main/java/com/example/accounting/infrastructure/adapter/out/persistence/AccountJpaRepository.java\npackage com.example.accounting.infrastructure.adapter.out.persistence;\n\nimport com.example.accounting.domain.model.account.Account;\nimport com.example.accounting.domain.model.account.BsPlType;\nimport com.example.accounting.domain.model.account.SummaryType;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.jpa.repository.Query;\nimport org.springframework.data.repository.query.Param;\nimport org.springframework.stereotype.Repository;\n\nimport java.util.List;\n\n/**\n * \u52d8\u5b9a\u79d1\u76ee JPA \u30ea\u30dd\u30b8\u30c8\u30ea\n *\n * Spring Data JPA \u306b\u3088\u308a\u57fa\u672c\u7684\u306a CRUD \u64cd\u4f5c\u306f\u81ea\u52d5\u751f\u6210\u3055\u308c\u308b\u3002\n * \u30ab\u30b9\u30bf\u30e0\u30af\u30a8\u30ea\u306f @Query \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u5b9a\u7fa9\u3002\n */\n@Repository\npublic interface AccountJpaRepository extends JpaRepository&lt;Account, String&gt; {\n\n    /**\n     * BSPL\u533a\u5206\u3067\u691c\u7d22\n     */\n    List&lt;Account&gt; findByBsPlType(BsPlType bsPlType);\n\n    /**\n     * \u79d1\u76ee\u30d1\u30b9\u3067\u524d\u65b9\u4e00\u81f4\u691c\u7d22\uff08\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf\u7d4c\u7531\uff09\n     */\n    @Query(\"SELECT a FROM Account a JOIN AccountStructure s ON a.accountCode = s.accountCode \" +\n           \"WHERE s.accountPath LIKE CONCAT(:pathPrefix, '%') ORDER BY a.accountCode\")\n    List&lt;Account&gt; findByAccountPathStartsWith(@Param(\"pathPrefix\") String pathPrefix);\n\n    /**\n     * \u8a08\u4e0a\u79d1\u76ee\u306e\u307f\u53d6\u5f97\n     */\n    List&lt;Account&gt; findBySummaryType(SummaryType summaryType);\n\n    /**\n     * \u8a08\u4e0a\u79d1\u76ee\u306e\u307f\u53d6\u5f97\uff08\u4fbf\u5229\u30e1\u30bd\u30c3\u30c9\uff09\n     */\n    default List&lt;Account&gt; findPostingAccounts() {\n        return findBySummaryType(SummaryType.POSTING);\n    }\n\n    /**\n     * \u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\u9806\u3067\u5168\u4ef6\u53d6\u5f97\n     */\n    List&lt;Account&gt; findAllByOrderByAccountCodeAsc();\n}\n</code></pre>"},{"location":"article/part3-orm/chapter21-orm/#2134-repository","title":"21.3.4 Repository \u30a2\u30c0\u30d7\u30bf\u30fc","text":"AccountRepositoryAdapter <pre><code>// src/main/java/com/example/accounting/infrastructure/adapter/out/persistence/AccountRepositoryAdapter.java\npackage com.example.accounting.infrastructure.adapter.out.persistence;\n\nimport com.example.accounting.application.port.out.AccountRepository;\nimport com.example.accounting.domain.model.account.Account;\nimport com.example.accounting.domain.model.account.BsPlType;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Component;\n\nimport java.util.List;\nimport java.util.Optional;\n\n/**\n * \u52d8\u5b9a\u79d1\u76ee\u30ea\u30dd\u30b8\u30c8\u30ea\u30a2\u30c0\u30d7\u30bf\u30fc\n *\n * Output Port\uff08AccountRepository\uff09\u306e\u5b9f\u88c5\u3002\n * JpaRepository \u3092\u30e9\u30c3\u30d7\u3057\u3066\u30c9\u30e1\u30a4\u30f3\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306b\u9069\u5408\u3055\u305b\u308b\u3002\n */\n@Component\n@RequiredArgsConstructor\npublic class AccountRepositoryAdapter implements AccountRepository {\n\n    private final AccountJpaRepository jpaRepository;\n\n    @Override\n    public Optional&lt;Account&gt; findByCode(String accountCode) {\n        return jpaRepository.findById(accountCode);\n    }\n\n    @Override\n    public List&lt;Account&gt; findAll() {\n        return jpaRepository.findAllByOrderByAccountCodeAsc();\n    }\n\n    @Override\n    public List&lt;Account&gt; findByBsPlType(String bsPlType) {\n        return jpaRepository.findByBsPlType(BsPlType.valueOf(bsPlType));\n    }\n\n    @Override\n    public List&lt;Account&gt; findByPathLike(String pathPattern) {\n        String prefix = pathPattern.replace(\"%\", \"\");\n        return jpaRepository.findByAccountPathStartsWith(prefix);\n    }\n\n    @Override\n    public List&lt;Account&gt; findPostingAccounts() {\n        return jpaRepository.findPostingAccounts();\n    }\n\n    @Override\n    public Account save(Account account) {\n        return jpaRepository.save(account);\n    }\n\n    @Override\n    public void delete(String accountCode) {\n        jpaRepository.deleteById(accountCode);\n    }\n\n    @Override\n    public boolean exists(String accountCode) {\n        return jpaRepository.existsById(accountCode);\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter21-orm/#2135-input-port","title":"21.3.5 Input Port\uff08\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff09","text":"AccountUseCase\uff08Input Port\uff09 <pre><code>// src/main/java/com/example/accounting/application/port/in/AccountUseCase.java\npackage com.example.accounting.application.port.in;\n\nimport com.example.accounting.application.port.in.dto.*;\n\nimport java.util.List;\n\n/**\n * \u52d8\u5b9a\u79d1\u76ee\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\uff08Input Port\uff09\n */\npublic interface AccountUseCase {\n\n    /**\n     * \u52d8\u5b9a\u79d1\u76ee\u3092\u53d6\u5f97\n     */\n    AccountResponse getAccount(String accountCode);\n\n    /**\n     * \u5168\u52d8\u5b9a\u79d1\u76ee\u3092\u53d6\u5f97\n     */\n    List&lt;AccountResponse&gt; getAllAccounts();\n\n    /**\n     * BS/PL\u533a\u5206\u3067\u52d8\u5b9a\u79d1\u76ee\u3092\u53d6\u5f97\n     */\n    List&lt;AccountResponse&gt; getAccountsByBsPlType(String bsPlType);\n\n    /**\n     * \u79d1\u76ee\u968e\u5c64\u3092\u53d6\u5f97\uff08\u89aa\u79d1\u76ee\u4ee5\u4e0b\u306e\u5168\u79d1\u76ee\uff09\n     */\n    List&lt;AccountResponse&gt; getAccountHierarchy(String parentAccountCode);\n\n    /**\n     * \u8a08\u4e0a\u79d1\u76ee\u306e\u307f\u53d6\u5f97\n     */\n    List&lt;AccountResponse&gt; getPostingAccounts();\n\n    /**\n     * \u52d8\u5b9a\u79d1\u76ee\u3092\u767b\u9332\n     */\n    AccountResponse createAccount(CreateAccountCommand command);\n\n    /**\n     * \u52d8\u5b9a\u79d1\u76ee\u3092\u66f4\u65b0\n     */\n    AccountResponse updateAccount(String accountCode, UpdateAccountCommand command);\n\n    /**\n     * \u52d8\u5b9a\u79d1\u76ee\u3092\u524a\u9664\n     */\n    void deleteAccount(String accountCode);\n}\n</code></pre>"},{"location":"article/part3-orm/chapter21-orm/#2136-dto","title":"21.3.6 \u30b3\u30de\u30f3\u30c9\u30fb\u30ec\u30b9\u30dd\u30f3\u30b9 DTO","text":"CreateAccountCommand <pre><code>// src/main/java/com/example/accounting/application/port/in/dto/CreateAccountCommand.java\npackage com.example.accounting.application.port.in.dto;\n\nimport jakarta.validation.constraints.*;\nimport lombok.Builder;\nimport lombok.Data;\n\n@Data\n@Builder\npublic class CreateAccountCommand {\n\n    @NotBlank(message = \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\u306f\u5fc5\u9808\u3067\u3059\")\n    @Size(max = 5, message = \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\u306f5\u6587\u5b57\u4ee5\u5185\u3067\u3059\")\n    private String accountCode;\n\n    @NotBlank(message = \"\u52d8\u5b9a\u79d1\u76ee\u540d\u306f\u5fc5\u9808\u3067\u3059\")\n    @Size(max = 40, message = \"\u52d8\u5b9a\u79d1\u76ee\u540d\u306f40\u6587\u5b57\u4ee5\u5185\u3067\u3059\")\n    private String accountName;\n\n    @Size(max = 10, message = \"\u52d8\u5b9a\u79d1\u76ee\u7565\u540d\u306f10\u6587\u5b57\u4ee5\u5185\u3067\u3059\")\n    private String accountShortName;\n\n    @NotBlank(message = \"BSPL\u533a\u5206\u306f\u5fc5\u9808\u3067\u3059\")\n    @Pattern(regexp = \"BS|PL\", message = \"BSPL\u533a\u5206\u306fBS/PL\u306e\u3044\u305a\u308c\u304b\u3067\u3059\")\n    private String bsPlType;\n\n    @NotBlank(message = \"\u8cb8\u501f\u533a\u5206\u306f\u5fc5\u9808\u3067\u3059\")\n    @Pattern(regexp = \"\u501f\u65b9|\u8cb8\u65b9\", message = \"\u8cb8\u501f\u533a\u5206\u306f\u501f\u65b9/\u8cb8\u65b9\u306e\u3044\u305a\u308c\u304b\u3067\u3059\")\n    private String dcType;\n\n    @NotBlank(message = \"\u53d6\u5f15\u8981\u7d20\u533a\u5206\u306f\u5fc5\u9808\u3067\u3059\")\n    private String elementType;\n\n    @NotBlank(message = \"\u96c6\u8a08\u533a\u5206\u306f\u5fc5\u9808\u3067\u3059\")\n    private String summaryType;\n\n    private String managementType;\n    private String expenseType;\n    private String taxCalculationType;\n    private String taxCode;\n    private String parentAccountCode;\n}\n</code></pre> AccountResponse <pre><code>// src/main/java/com/example/accounting/application/port/in/dto/AccountResponse.java\npackage com.example.accounting.application.port.in.dto;\n\nimport com.example.accounting.domain.model.account.Account;\nimport lombok.Builder;\nimport lombok.Data;\n\n@Data\n@Builder\npublic class AccountResponse {\n    private String accountCode;\n    private String accountName;\n    private String accountShortName;\n    private String accountKana;\n    private String bsPlType;\n    private String dcType;\n    private String elementType;\n    private String summaryType;\n    private String managementType;\n    private String expenseType;\n    private String taxCalculationType;\n    private String taxCode;\n    private String accountPath;\n\n    /**\n     * \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u304b\u3089\u30ec\u30b9\u30dd\u30f3\u30b9DTO\u3092\u751f\u6210\n     */\n    public static AccountResponse from(Account account) {\n        return AccountResponse.builder()\n                .accountCode(account.getAccountCode())\n                .accountName(account.getAccountName())\n                .accountShortName(account.getAccountShortName())\n                .accountKana(account.getAccountKana())\n                .bsPlType(account.getBsPlType() != null ? account.getBsPlType().name() : null)\n                .dcType(account.getDcType() != null ? account.getDcType().getDisplayName() : null)\n                .elementType(account.getElementType() != null ? account.getElementType().getDisplayName() : null)\n                .summaryType(account.getSummaryType() != null ? account.getSummaryType().getDisplayName() : null)\n                .managementType(account.getManagementType() != null ? account.getManagementType().getDisplayName() : null)\n                .expenseType(account.getExpenseType() != null ? account.getExpenseType().getDisplayName() : null)\n                .taxCalculationType(account.getTaxCalculationType() != null ? account.getTaxCalculationType().getDisplayName() : null)\n                .taxCode(account.getTaxCode())\n                .build();\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter21-orm/#214-tdd","title":"21.4 TDD \u306b\u3088\u308b\u5b9f\u88c5","text":""},{"location":"article/part3-orm/chapter21-orm/#2141-red-controller","title":"21.4.1 Red: Controller \u30c6\u30b9\u30c8","text":"AccountControllerTest <pre><code>// src/test/java/com/example/accounting/infrastructure/adapter/in/web/AccountControllerTest.java\npackage com.example.accounting.infrastructure.adapter.in.web;\n\nimport com.example.accounting.application.port.in.AccountUseCase;\nimport com.example.accounting.application.port.in.dto.*;\nimport com.example.accounting.domain.exception.AccountNotFoundException;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport org.junit.jupiter.api.*;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;\nimport org.springframework.boot.test.mock.mockito.MockBean;\nimport org.springframework.http.MediaType;\nimport org.springframework.test.web.servlet.MockMvc;\n\nimport java.util.List;\n\nimport static org.mockito.ArgumentMatchers.*;\nimport static org.mockito.BDDMockito.*;\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;\n\n@WebMvcTest(AccountController.class)\n@DisplayName(\"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf API\")\nclass AccountControllerTest {\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @Autowired\n    private ObjectMapper objectMapper;\n\n    @MockBean\n    private AccountUseCase accountUseCase;\n\n    @Nested\n    @DisplayName(\"GET /api/accounts/{accountCode}\")\n    class GetAccount {\n\n        @Test\n        @DisplayName(\"\u52d8\u5b9a\u79d1\u76ee\u3092\u53d6\u5f97\u3067\u304d\u308b\")\n        void canGetAccount() throws Exception {\n            // Given\n            AccountResponse response = AccountResponse.builder()\n                    .accountCode(\"11110\")\n                    .accountName(\"\u73fe\u91d1\")\n                    .accountShortName(\"\u73fe\u91d1\")\n                    .bsPlType(\"BS\")\n                    .dcType(\"\u501f\u65b9\")\n                    .elementType(\"\u8cc7\u7523\")\n                    .summaryType(\"\u8a08\u4e0a\u79d1\u76ee\")\n                    .build();\n\n            given(accountUseCase.getAccount(\"11110\")).willReturn(response);\n\n            // When &amp; Then\n            mockMvc.perform(get(\"/api/accounts/{accountCode}\", \"11110\"))\n                    .andExpect(status().isOk())\n                    .andExpect(jsonPath(\"$.accountCode\").value(\"11110\"))\n                    .andExpect(jsonPath(\"$.accountName\").value(\"\u73fe\u91d1\"))\n                    .andExpect(jsonPath(\"$.bsPlType\").value(\"BS\"));\n        }\n\n        @Test\n        @DisplayName(\"\u5b58\u5728\u3057\u306a\u3044\u52d8\u5b9a\u79d1\u76ee\u306f404\u3092\u8fd4\u3059\")\n        void notFoundForNonExistent() throws Exception {\n            // Given\n            given(accountUseCase.getAccount(\"99999\")).willThrow(\n                    new AccountNotFoundException(\"99999\"));\n\n            // When &amp; Then\n            mockMvc.perform(get(\"/api/accounts/{accountCode}\", \"99999\"))\n                    .andExpect(status().isNotFound());\n        }\n    }\n\n    @Nested\n    @DisplayName(\"POST /api/accounts\")\n    class CreateAccount {\n\n        @Test\n        @DisplayName(\"\u52d8\u5b9a\u79d1\u76ee\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canCreateAccount() throws Exception {\n            // Given\n            CreateAccountCommand command = CreateAccountCommand.builder()\n                    .accountCode(\"11150\")\n                    .accountName(\"\u624b\u8a31\u73fe\u91d1\")\n                    .accountShortName(\"\u624b\u8a31\u73fe\u91d1\")\n                    .bsPlType(\"BS\")\n                    .dcType(\"\u501f\u65b9\")\n                    .elementType(\"\u8cc7\u7523\")\n                    .summaryType(\"\u8a08\u4e0a\u79d1\u76ee\")\n                    .build();\n\n            AccountResponse response = AccountResponse.builder()\n                    .accountCode(\"11150\")\n                    .accountName(\"\u624b\u8a31\u73fe\u91d1\")\n                    .accountShortName(\"\u624b\u8a31\u73fe\u91d1\")\n                    .bsPlType(\"BS\")\n                    .dcType(\"\u501f\u65b9\")\n                    .build();\n\n            given(accountUseCase.createAccount(any())).willReturn(response);\n\n            // When &amp; Then\n            mockMvc.perform(post(\"/api/accounts\")\n                            .contentType(MediaType.APPLICATION_JSON)\n                            .content(objectMapper.writeValueAsString(command)))\n                    .andExpect(status().isCreated())\n                    .andExpect(jsonPath(\"$.accountCode\").value(\"11150\"))\n                    .andExpect(jsonPath(\"$.accountName\").value(\"\u624b\u8a31\u73fe\u91d1\"));\n        }\n\n        @Test\n        @DisplayName(\"\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\u3067400\u3092\u8fd4\u3059\")\n        void badRequestForValidationError() throws Exception {\n            // Given\n            CreateAccountCommand command = CreateAccountCommand.builder()\n                    .accountCode(\"\")  // \u5fc5\u9808\u9805\u76ee\u304c\u7a7a\n                    .accountName(\"\")\n                    .build();\n\n            // When &amp; Then\n            mockMvc.perform(post(\"/api/accounts\")\n                            .contentType(MediaType.APPLICATION_JSON)\n                            .content(objectMapper.writeValueAsString(command)))\n                    .andExpect(status().isBadRequest());\n        }\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter21-orm/#2142-green-controller","title":"21.4.2 Green: Controller \u5b9f\u88c5","text":"AccountController <pre><code>// src/main/java/com/example/accounting/infrastructure/adapter/in/web/AccountController.java\npackage com.example.accounting.infrastructure.adapter.in.web;\n\nimport com.example.accounting.application.port.in.AccountUseCase;\nimport com.example.accounting.application.port.in.dto.*;\nimport io.swagger.v3.oas.annotations.Operation;\nimport io.swagger.v3.oas.annotations.Parameter;\nimport io.swagger.v3.oas.annotations.responses.ApiResponse;\nimport io.swagger.v3.oas.annotations.tags.Tag;\nimport jakarta.validation.Valid;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\n\n@RestController\n@RequestMapping(\"/api/accounts\")\n@RequiredArgsConstructor\n@Tag(name = \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\", description = \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u306e\u7ba1\u7406API\")\npublic class AccountController {\n\n    private final AccountUseCase accountUseCase;\n\n    @GetMapping(\"/{accountCode}\")\n    @Operation(summary = \"\u52d8\u5b9a\u79d1\u76ee\u53d6\u5f97\", description = \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\u3067\u52d8\u5b9a\u79d1\u76ee\u3092\u53d6\u5f97\u3057\u307e\u3059\")\n    @ApiResponse(responseCode = \"200\", description = \"\u53d6\u5f97\u6210\u529f\")\n    @ApiResponse(responseCode = \"404\", description = \"\u52d8\u5b9a\u79d1\u76ee\u304c\u5b58\u5728\u3057\u306a\u3044\")\n    public ResponseEntity&lt;AccountResponse&gt; getAccount(\n            @Parameter(description = \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\")\n            @PathVariable String accountCode) {\n        return ResponseEntity.ok(accountUseCase.getAccount(accountCode));\n    }\n\n    @GetMapping\n    @Operation(summary = \"\u52d8\u5b9a\u79d1\u76ee\u4e00\u89a7\u53d6\u5f97\", description = \"\u52d8\u5b9a\u79d1\u76ee\u306e\u4e00\u89a7\u3092\u53d6\u5f97\u3057\u307e\u3059\")\n    public ResponseEntity&lt;List&lt;AccountResponse&gt;&gt; getAccounts(\n            @Parameter(description = \"BSPL\u533a\u5206\uff08BS/PL\uff09\")\n            @RequestParam(required = false) String bsPlType,\n            @Parameter(description = \"\u8a08\u4e0a\u79d1\u76ee\u306e\u307f\")\n            @RequestParam(required = false, defaultValue = \"false\") boolean postingOnly) {\n\n        List&lt;AccountResponse&gt; accounts;\n        if (bsPlType != null) {\n            accounts = accountUseCase.getAccountsByBsPlType(bsPlType);\n        } else if (postingOnly) {\n            accounts = accountUseCase.getPostingAccounts();\n        } else {\n            accounts = accountUseCase.getAllAccounts();\n        }\n        return ResponseEntity.ok(accounts);\n    }\n\n    @PostMapping\n    @Operation(summary = \"\u52d8\u5b9a\u79d1\u76ee\u767b\u9332\", description = \"\u65b0\u898f\u52d8\u5b9a\u79d1\u76ee\u3092\u767b\u9332\u3057\u307e\u3059\")\n    @ApiResponse(responseCode = \"201\", description = \"\u767b\u9332\u6210\u529f\")\n    @ApiResponse(responseCode = \"400\", description = \"\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\")\n    public ResponseEntity&lt;AccountResponse&gt; createAccount(\n            @Valid @RequestBody CreateAccountCommand command) {\n        AccountResponse response = accountUseCase.createAccount(command);\n        return ResponseEntity.status(HttpStatus.CREATED).body(response);\n    }\n\n    @PutMapping(\"/{accountCode}\")\n    @Operation(summary = \"\u52d8\u5b9a\u79d1\u76ee\u66f4\u65b0\", description = \"\u52d8\u5b9a\u79d1\u76ee\u3092\u66f4\u65b0\u3057\u307e\u3059\")\n    public ResponseEntity&lt;AccountResponse&gt; updateAccount(\n            @PathVariable String accountCode,\n            @Valid @RequestBody UpdateAccountCommand command) {\n        return ResponseEntity.ok(accountUseCase.updateAccount(accountCode, command));\n    }\n\n    @DeleteMapping(\"/{accountCode}\")\n    @Operation(summary = \"\u52d8\u5b9a\u79d1\u76ee\u524a\u9664\", description = \"\u52d8\u5b9a\u79d1\u76ee\u3092\u524a\u9664\u3057\u307e\u3059\")\n    @ApiResponse(responseCode = \"204\", description = \"\u524a\u9664\u6210\u529f\")\n    public ResponseEntity&lt;Void&gt; deleteAccount(@PathVariable String accountCode) {\n        accountUseCase.deleteAccount(accountCode);\n        return ResponseEntity.noContent().build();\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter21-orm/#2143-refactor-application-service","title":"21.4.3 Refactor: Application Service \u5b9f\u88c5","text":"AccountApplicationService <pre><code>// src/main/java/com/example/accounting/application/service/AccountApplicationService.java\npackage com.example.accounting.application.service;\n\nimport com.example.accounting.application.port.in.AccountUseCase;\nimport com.example.accounting.application.port.in.dto.*;\nimport com.example.accounting.application.port.out.AccountRepository;\nimport com.example.accounting.application.port.out.AccountStructureRepository;\nimport com.example.accounting.domain.exception.*;\nimport com.example.accounting.domain.model.account.*;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.util.List;\nimport java.util.stream.Collectors;\n\n@Service\n@RequiredArgsConstructor\n@Transactional(readOnly = true)\npublic class AccountApplicationService implements AccountUseCase {\n\n    private final AccountRepository accountRepository;\n    private final AccountStructureRepository accountStructureRepository;\n\n    @Override\n    public AccountResponse getAccount(String accountCode) {\n        Account account = accountRepository.findByCode(accountCode)\n                .orElseThrow(() -&gt; new AccountNotFoundException(accountCode));\n        return AccountResponse.from(account);\n    }\n\n    @Override\n    public List&lt;AccountResponse&gt; getAllAccounts() {\n        return accountRepository.findAll().stream()\n                .map(AccountResponse::from)\n                .collect(Collectors.toList());\n    }\n\n    @Override\n    public List&lt;AccountResponse&gt; getAccountsByBsPlType(String bsPlType) {\n        return accountRepository.findByBsPlType(bsPlType).stream()\n                .map(AccountResponse::from)\n                .collect(Collectors.toList());\n    }\n\n    @Override\n    public List&lt;AccountResponse&gt; getAccountHierarchy(String parentAccountCode) {\n        String pathPattern = \"%\" + parentAccountCode + \"%\";\n        return accountRepository.findByPathLike(pathPattern).stream()\n                .map(AccountResponse::from)\n                .collect(Collectors.toList());\n    }\n\n    @Override\n    public List&lt;AccountResponse&gt; getPostingAccounts() {\n        return accountRepository.findPostingAccounts().stream()\n                .map(AccountResponse::from)\n                .collect(Collectors.toList());\n    }\n\n    @Override\n    @Transactional\n    public AccountResponse createAccount(CreateAccountCommand command) {\n        if (accountRepository.exists(command.getAccountCode())) {\n            throw new AccountAlreadyExistsException(command.getAccountCode());\n        }\n\n        Account account = Account.builder()\n                .accountCode(command.getAccountCode())\n                .accountName(command.getAccountName())\n                .accountShortName(command.getAccountShortName())\n                .bsPlType(BsPlType.valueOf(command.getBsPlType()))\n                .dcType(AccountDcType.fromDisplayName(command.getDcType()))\n                .elementType(ElementType.fromDisplayName(command.getElementType()))\n                .summaryType(SummaryType.fromDisplayName(command.getSummaryType()))\n                .taxCode(command.getTaxCode())\n                .build();\n\n        accountRepository.save(account);\n\n        String accountPath = generateAccountPath(command.getAccountCode(), command.getParentAccountCode());\n        AccountStructure structure = AccountStructure.builder()\n                .accountCode(command.getAccountCode())\n                .accountPath(accountPath)\n                .account(account)\n                .build();\n        accountStructureRepository.save(structure);\n\n        return AccountResponse.from(account);\n    }\n\n    @Override\n    @Transactional\n    public AccountResponse updateAccount(String accountCode, UpdateAccountCommand command) {\n        Account account = accountRepository.findByCode(accountCode)\n                .orElseThrow(() -&gt; new AccountNotFoundException(accountCode));\n\n        if (command.getAccountName() != null) {\n            account.setAccountName(command.getAccountName());\n        }\n        if (command.getAccountShortName() != null) {\n            account.setAccountShortName(command.getAccountShortName());\n        }\n\n        accountRepository.save(account);\n        return AccountResponse.from(account);\n    }\n\n    @Override\n    @Transactional\n    public void deleteAccount(String accountCode) {\n        if (!accountRepository.exists(accountCode)) {\n            throw new AccountNotFoundException(accountCode);\n        }\n        accountStructureRepository.delete(accountCode);\n        accountRepository.delete(accountCode);\n    }\n\n    private String generateAccountPath(String accountCode, String parentAccountCode) {\n        if (parentAccountCode == null || parentAccountCode.isEmpty()) {\n            return accountCode;\n        }\n        return accountStructureRepository.findByCode(parentAccountCode)\n                .map(parent -&gt; parent.getAccountPath() + \"~\" + accountCode)\n                .orElse(accountCode);\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter21-orm/#215-api","title":"21.5 \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3 API","text":""},{"location":"article/part3-orm/chapter21-orm/#2151-api","title":"21.5.1 \u4ed5\u8a33 API \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8","text":"\u30e1\u30bd\u30c3\u30c9 \u30d1\u30b9 \u8aac\u660e GET /api/journals \u4ed5\u8a33\u4e00\u89a7\u53d6\u5f97 GET /api/journals/{journalNumber} \u4ed5\u8a33\u53d6\u5f97 POST /api/journals \u4ed5\u8a33\u767b\u9332 POST /api/journals/check-balance \u8cb8\u501f\u30d0\u30e9\u30f3\u30b9\u30c1\u30a7\u30c3\u30af POST /api/journals/{journalNumber}/cancel \u4ed5\u8a33\u53d6\u6d88\uff08\u8d64\u9ed2\u51e6\u7406\uff09 POST /api/journals/{journalNumber}/correct \u4ed5\u8a33\u8a02\u6b63\uff08\u8d64\u9ed2\u51e6\u7406\uff09 JournalController <pre><code>// src/main/java/com/example/accounting/infrastructure/adapter/in/web/JournalController.java\npackage com.example.accounting.infrastructure.adapter.in.web;\n\nimport com.example.accounting.application.port.in.JournalUseCase;\nimport com.example.accounting.application.port.in.dto.*;\nimport io.swagger.v3.oas.annotations.Operation;\nimport io.swagger.v3.oas.annotations.Parameter;\nimport io.swagger.v3.oas.annotations.tags.Tag;\nimport jakarta.validation.Valid;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.format.annotation.DateTimeFormat;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.time.LocalDate;\nimport java.util.List;\n\n@RestController\n@RequestMapping(\"/api/journals\")\n@RequiredArgsConstructor\n@Tag(name = \"\u4ed5\u8a33\", description = \"\u4ed5\u8a33\u306e\u7ba1\u7406API\")\npublic class JournalController {\n\n    private final JournalUseCase journalUseCase;\n\n    @GetMapping(\"/{journalNumber}\")\n    @Operation(summary = \"\u4ed5\u8a33\u53d6\u5f97\", description = \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\u3067\u4ed5\u8a33\u3092\u53d6\u5f97\u3057\u307e\u3059\")\n    public ResponseEntity&lt;JournalResponse&gt; getJournal(\n            @Parameter(description = \"\u4ed5\u8a33\u4f1d\u7968\u756a\u53f7\")\n            @PathVariable String journalNumber) {\n        return ResponseEntity.ok(journalUseCase.getJournal(journalNumber));\n    }\n\n    @GetMapping\n    @Operation(summary = \"\u4ed5\u8a33\u4e00\u89a7\u53d6\u5f97\", description = \"\u6761\u4ef6\u3092\u6307\u5b9a\u3057\u3066\u4ed5\u8a33\u3092\u691c\u7d22\u3057\u307e\u3059\")\n    public ResponseEntity&lt;List&lt;JournalResponse&gt;&gt; getJournals(\n            @Parameter(description = \"\u958b\u59cb\u65e5\")\n            @RequestParam @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) LocalDate fromDate,\n            @Parameter(description = \"\u7d42\u4e86\u65e5\")\n            @RequestParam @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) LocalDate toDate,\n            @Parameter(description = \"\u90e8\u9580\u30b3\u30fc\u30c9\")\n            @RequestParam(required = false) String departmentCode) {\n\n        List&lt;JournalResponse&gt; journals;\n        if (departmentCode != null) {\n            journals = journalUseCase.getJournalsByDepartment(departmentCode, fromDate, toDate);\n        } else {\n            journals = journalUseCase.getJournalsByDateRange(fromDate, toDate);\n        }\n        return ResponseEntity.ok(journals);\n    }\n\n    @PostMapping\n    @Operation(summary = \"\u4ed5\u8a33\u767b\u9332\", description = \"\u65b0\u898f\u4ed5\u8a33\u3092\u767b\u9332\u3057\u307e\u3059\")\n    public ResponseEntity&lt;JournalResponse&gt; createJournal(\n            @Valid @RequestBody CreateJournalCommand command) {\n        JournalResponse response = journalUseCase.createJournal(command);\n        return ResponseEntity.status(HttpStatus.CREATED).body(response);\n    }\n\n    @PostMapping(\"/check-balance\")\n    @Operation(summary = \"\u8cb8\u501f\u30d0\u30e9\u30f3\u30b9\u30c1\u30a7\u30c3\u30af\", description = \"\u4ed5\u8a33\u306e\u8cb8\u501f\u30d0\u30e9\u30f3\u30b9\u3092\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\")\n    public ResponseEntity&lt;BalanceCheckResult&gt; checkBalance(\n            @Valid @RequestBody CreateJournalCommand command) {\n        return ResponseEntity.ok(journalUseCase.checkBalance(command));\n    }\n\n    @PostMapping(\"/{journalNumber}/cancel\")\n    @Operation(summary = \"\u4ed5\u8a33\u53d6\u6d88\", description = \"\u4ed5\u8a33\u3092\u8d64\u9ed2\u51e6\u7406\u3067\u53d6\u6d88\u3057\u307e\u3059\")\n    public ResponseEntity&lt;JournalCancellationResult&gt; cancelJournal(\n            @PathVariable String journalNumber,\n            @RequestParam String reason) {\n        return ResponseEntity.ok(journalUseCase.cancelJournal(journalNumber, reason));\n    }\n\n    @PostMapping(\"/{journalNumber}/correct\")\n    @Operation(summary = \"\u4ed5\u8a33\u8a02\u6b63\", description = \"\u4ed5\u8a33\u3092\u8d64\u9ed2\u51e6\u7406\u3067\u8a02\u6b63\u3057\u307e\u3059\")\n    public ResponseEntity&lt;JournalCorrectionResult&gt; correctJournal(\n            @PathVariable String journalNumber,\n            @RequestParam String reason,\n            @Valid @RequestBody CreateJournalCommand correctedData) {\n        return ResponseEntity.ok(journalUseCase.correctJournal(journalNumber, correctedData, reason));\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter21-orm/#2152-api","title":"21.5.2 \u6b8b\u9ad8\u7167\u4f1a API","text":"BalanceController <pre><code>// src/main/java/com/example/accounting/infrastructure/adapter/in/web/BalanceController.java\npackage com.example.accounting.infrastructure.adapter.in.web;\n\nimport com.example.accounting.application.port.in.BalanceUseCase;\nimport com.example.accounting.application.port.in.dto.*;\nimport io.swagger.v3.oas.annotations.Operation;\nimport io.swagger.v3.oas.annotations.Parameter;\nimport io.swagger.v3.oas.annotations.tags.Tag;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.format.annotation.DateTimeFormat;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.time.LocalDate;\nimport java.util.List;\n\n@RestController\n@RequestMapping(\"/api/balances\")\n@RequiredArgsConstructor\n@Tag(name = \"\u6b8b\u9ad8\u7167\u4f1a\", description = \"\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u306e\u7167\u4f1aAPI\")\npublic class BalanceController {\n\n    private final BalanceUseCase balanceUseCase;\n\n    @GetMapping(\"/daily\")\n    @Operation(summary = \"\u65e5\u6b21\u6b8b\u9ad8\u53d6\u5f97\", description = \"\u6307\u5b9a\u65e5\u306e\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u3092\u53d6\u5f97\u3057\u307e\u3059\")\n    public ResponseEntity&lt;List&lt;DailyBalanceResponse&gt;&gt; getDailyBalances(\n            @Parameter(description = \"\u5bfe\u8c61\u65e5\")\n            @RequestParam @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) LocalDate date,\n            @Parameter(description = \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\uff08\u7701\u7565\u6642\u306f\u5168\u79d1\u76ee\uff09\")\n            @RequestParam(required = false) String accountCode) {\n        return ResponseEntity.ok(balanceUseCase.getDailyBalances(date, accountCode));\n    }\n\n    @GetMapping(\"/monthly\")\n    @Operation(summary = \"\u6708\u6b21\u6b8b\u9ad8\u53d6\u5f97\", description = \"\u6307\u5b9a\u6708\u306e\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\u3092\u53d6\u5f97\u3057\u307e\u3059\")\n    public ResponseEntity&lt;List&lt;MonthlyBalanceResponse&gt;&gt; getMonthlyBalances(\n            @Parameter(description = \"\u6c7a\u7b97\u671f\")\n            @RequestParam int fiscalYear,\n            @Parameter(description = \"\u6708\u5ea6\")\n            @RequestParam int month) {\n        return ResponseEntity.ok(balanceUseCase.getMonthlyBalances(fiscalYear, month));\n    }\n\n    @GetMapping(\"/accounts/{accountCode}\")\n    @Operation(summary = \"\u52d8\u5b9a\u79d1\u76ee\u5225\u6b8b\u9ad8\u53d6\u5f97\", description = \"\u52d8\u5b9a\u79d1\u76ee\u306e\u671f\u9593\u5225\u6b8b\u9ad8\u3092\u53d6\u5f97\u3057\u307e\u3059\")\n    public ResponseEntity&lt;AccountBalanceSummary&gt; getAccountBalanceSummary(\n            @PathVariable String accountCode,\n            @RequestParam @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) LocalDate fromDate,\n            @RequestParam @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) LocalDate toDate) {\n        return ResponseEntity.ok(balanceUseCase.getAccountBalanceSummary(accountCode, fromDate, toDate));\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter21-orm/#216","title":"21.6 \u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0","text":""},{"location":"article/part3-orm/chapter21-orm/#2161","title":"21.6.1 \u30c9\u30e1\u30a4\u30f3\u4f8b\u5916","text":"\u30c9\u30e1\u30a4\u30f3\u4f8b\u5916\u30af\u30e9\u30b9 <pre><code>// src/main/java/com/example/accounting/domain/exception/AccountingException.java\npackage com.example.accounting.domain.exception;\n\nimport lombok.Getter;\n\n@Getter\npublic abstract class AccountingException extends RuntimeException {\n    private final String errorCode;\n\n    protected AccountingException(String errorCode, String message) {\n        super(message);\n        this.errorCode = errorCode;\n    }\n}\n\n// AccountNotFoundException.java\npackage com.example.accounting.domain.exception;\n\npublic class AccountNotFoundException extends AccountingException {\n    public AccountNotFoundException(String accountCode) {\n        super(\"ACC001\", \"\u52d8\u5b9a\u79d1\u76ee\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + accountCode);\n    }\n}\n\n// JournalBalanceException.java\npackage com.example.accounting.domain.exception;\n\nimport java.math.BigDecimal;\n\npublic class JournalBalanceException extends AccountingException {\n    public JournalBalanceException(BigDecimal debit, BigDecimal credit) {\n        super(\"JNL001\", String.format(\"\u8cb8\u501f\u304c\u4e00\u81f4\u3057\u307e\u305b\u3093\u3002\u501f\u65b9\u5408\u8a08: %s, \u8cb8\u65b9\u5408\u8a08: %s\", debit, credit));\n    }\n}\n\n// AccountAlreadyExistsException.java\npackage com.example.accounting.domain.exception;\n\npublic class AccountAlreadyExistsException extends AccountingException {\n    public AccountAlreadyExistsException(String accountCode) {\n        super(\"ACC002\", \"\u52d8\u5b9a\u79d1\u76ee\u306f\u65e2\u306b\u5b58\u5728\u3057\u307e\u3059: \" + accountCode);\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter21-orm/#2162","title":"21.6.2 \u30b0\u30ed\u30fc\u30d0\u30eb\u4f8b\u5916\u30cf\u30f3\u30c9\u30e9\u30fc","text":"GlobalExceptionHandler <pre><code>// src/main/java/com/example/accounting/infrastructure/adapter/in/web/GlobalExceptionHandler.java\npackage com.example.accounting.infrastructure.adapter.in.web;\n\nimport com.example.accounting.domain.exception.*;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.validation.FieldError;\nimport org.springframework.web.bind.MethodArgumentNotValidException;\nimport org.springframework.web.bind.annotation.ExceptionHandler;\nimport org.springframework.web.bind.annotation.RestControllerAdvice;\n\nimport java.time.LocalDateTime;\nimport java.util.HashMap;\nimport java.util.Map;\n\n@RestControllerAdvice\n@Slf4j\npublic class GlobalExceptionHandler {\n\n    @ExceptionHandler(AccountNotFoundException.class)\n    public ResponseEntity&lt;ErrorResponse&gt; handleAccountNotFoundException(AccountNotFoundException e) {\n        log.warn(\"Account not found: {}\", e.getMessage());\n        return ResponseEntity.status(HttpStatus.NOT_FOUND)\n                .body(createErrorResponse(e.getErrorCode(), e.getMessage()));\n    }\n\n    @ExceptionHandler(AccountAlreadyExistsException.class)\n    public ResponseEntity&lt;ErrorResponse&gt; handleAccountAlreadyExistsException(AccountAlreadyExistsException e) {\n        log.warn(\"Account already exists: {}\", e.getMessage());\n        return ResponseEntity.status(HttpStatus.CONFLICT)\n                .body(createErrorResponse(e.getErrorCode(), e.getMessage()));\n    }\n\n    @ExceptionHandler(JournalBalanceException.class)\n    public ResponseEntity&lt;ErrorResponse&gt; handleJournalBalanceException(JournalBalanceException e) {\n        log.warn(\"Journal balance error: {}\", e.getMessage());\n        return ResponseEntity.status(HttpStatus.BAD_REQUEST)\n                .body(createErrorResponse(e.getErrorCode(), e.getMessage()));\n    }\n\n    @ExceptionHandler(MethodArgumentNotValidException.class)\n    public ResponseEntity&lt;ValidationErrorResponse&gt; handleValidationException(MethodArgumentNotValidException e) {\n        log.warn(\"Validation error: {}\", e.getMessage());\n\n        Map&lt;String, String&gt; errors = new HashMap&lt;&gt;();\n        e.getBindingResult().getAllErrors().forEach(error -&gt; {\n            String fieldName = ((FieldError) error).getField();\n            String errorMessage = error.getDefaultMessage();\n            errors.put(fieldName, errorMessage);\n        });\n\n        return ResponseEntity.status(HttpStatus.BAD_REQUEST)\n                .body(ValidationErrorResponse.builder()\n                        .errorCode(\"VAL001\")\n                        .message(\"\u5165\u529b\u5024\u304c\u4e0d\u6b63\u3067\u3059\")\n                        .timestamp(LocalDateTime.now())\n                        .errors(errors)\n                        .build());\n    }\n\n    @ExceptionHandler(Exception.class)\n    public ResponseEntity&lt;ErrorResponse&gt; handleGenericException(Exception e) {\n        log.error(\"Unexpected error\", e);\n        return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)\n                .body(createErrorResponse(\"SYS001\", \"\u30b7\u30b9\u30c6\u30e0\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\"));\n    }\n\n    private ErrorResponse createErrorResponse(String errorCode, String message) {\n        return ErrorResponse.builder()\n                .errorCode(errorCode)\n                .message(message)\n                .timestamp(LocalDateTime.now())\n                .build();\n    }\n\n    @Data\n    @Builder\n    public static class ErrorResponse {\n        private String errorCode;\n        private String message;\n        private LocalDateTime timestamp;\n    }\n\n    @Data\n    @Builder\n    public static class ValidationErrorResponse {\n        private String errorCode;\n        private String message;\n        private LocalDateTime timestamp;\n        private Map&lt;String, String&gt; errors;\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter21-orm/#217","title":"21.7 \u7d71\u5408\u30c6\u30b9\u30c8","text":"AccountControllerIntegrationTest <pre><code>// src/test/java/com/example/accounting/infrastructure/adapter/in/web/AccountControllerIntegrationTest.java\npackage com.example.accounting.infrastructure.adapter.in.web;\n\nimport com.example.accounting.application.port.in.dto.CreateAccountCommand;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport org.junit.jupiter.api.*;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.http.MediaType;\nimport org.springframework.test.context.DynamicPropertyRegistry;\nimport org.springframework.test.context.DynamicPropertySource;\nimport org.springframework.test.web.servlet.MockMvc;\nimport org.testcontainers.containers.PostgreSQLContainer;\nimport org.testcontainers.junit.jupiter.Container;\nimport org.testcontainers.junit.jupiter.Testcontainers;\n\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;\n\n@SpringBootTest\n@AutoConfigureMockMvc\n@Testcontainers\n@DisplayName(\"\u52d8\u5b9a\u79d1\u76ee API \u7d71\u5408\u30c6\u30b9\u30c8\")\nclass AccountControllerIntegrationTest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:16\")\n            .withDatabaseName(\"testdb\")\n            .withUsername(\"testuser\")\n            .withPassword(\"testpass\");\n\n    @DynamicPropertySource\n    static void configureProperties(DynamicPropertyRegistry registry) {\n        registry.add(\"spring.datasource.url\", postgres::getJdbcUrl);\n        registry.add(\"spring.datasource.username\", postgres::getUsername);\n        registry.add(\"spring.datasource.password\", postgres::getPassword);\n    }\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @Autowired\n    private ObjectMapper objectMapper;\n\n    @Nested\n    @DisplayName(\"\u52d8\u5b9a\u79d1\u76ee CRUD\")\n    class AccountCrud {\n\n        @Test\n        @DisplayName(\"\u52d8\u5b9a\u79d1\u76ee\u306e\u767b\u9332\u30fb\u53d6\u5f97\u30fb\u66f4\u65b0\u30fb\u524a\u9664\u304c\u6b63\u5e38\u306b\u52d5\u4f5c\u3059\u308b\")\n        void crudOperationsWork() throws Exception {\n            // Create\n            CreateAccountCommand createCommand = CreateAccountCommand.builder()\n                    .accountCode(\"99999\")\n                    .accountName(\"\u30c6\u30b9\u30c8\u79d1\u76ee\")\n                    .accountShortName(\"\u30c6\u30b9\u30c8\")\n                    .bsPlType(\"BS\")\n                    .dcType(\"\u501f\u65b9\")\n                    .elementType(\"\u8cc7\u7523\")\n                    .summaryType(\"\u8a08\u4e0a\u79d1\u76ee\")\n                    .build();\n\n            mockMvc.perform(post(\"/api/accounts\")\n                            .contentType(MediaType.APPLICATION_JSON)\n                            .content(objectMapper.writeValueAsString(createCommand)))\n                    .andExpect(status().isCreated())\n                    .andExpect(jsonPath(\"$.accountCode\").value(\"99999\"))\n                    .andExpect(jsonPath(\"$.accountName\").value(\"\u30c6\u30b9\u30c8\u79d1\u76ee\"));\n\n            // Read\n            mockMvc.perform(get(\"/api/accounts/{accountCode}\", \"99999\"))\n                    .andExpect(status().isOk())\n                    .andExpect(jsonPath(\"$.accountCode\").value(\"99999\"));\n\n            // Delete\n            mockMvc.perform(delete(\"/api/accounts/{accountCode}\", \"99999\"))\n                    .andExpect(status().isNoContent());\n\n            // Verify deleted\n            mockMvc.perform(get(\"/api/accounts/{accountCode}\", \"99999\"))\n                    .andExpect(status().isNotFound());\n        }\n    }\n}\n</code></pre>"},{"location":"article/part3-orm/chapter21-orm/#218-openapi","title":"21.8 OpenAPI \u8a2d\u5b9a","text":"OpenApiConfig <pre><code>// src/main/java/com/example/accounting/infrastructure/config/OpenApiConfig.java\npackage com.example.accounting.infrastructure.config;\n\nimport io.swagger.v3.oas.models.OpenAPI;\nimport io.swagger.v3.oas.models.info.Contact;\nimport io.swagger.v3.oas.models.info.Info;\nimport io.swagger.v3.oas.models.info.License;\nimport io.swagger.v3.oas.models.servers.Server;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\nimport java.util.List;\n\n@Configuration\npublic class OpenApiConfig {\n\n    @Bean\n    public OpenAPI customOpenAPI() {\n        return new OpenAPI()\n                .info(new Info()\n                        .title(\"\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0 API\")\n                        .description(\"\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306eREST API\u4ed5\u69d8\u66f8\uff08JPA\u7248\uff09\")\n                        .version(\"1.0.0\")\n                        .contact(new Contact()\n                                .name(\"\u958b\u767a\u30c1\u30fc\u30e0\")\n                                .email(\"dev@example.com\"))\n                        .license(new License()\n                                .name(\"MIT License\")\n                                .url(\"https://opensource.org/licenses/MIT\")))\n                .servers(List.of(\n                        new Server().url(\"http://localhost:8080\").description(\"\u958b\u767a\u74b0\u5883\"),\n                        new Server().url(\"https://api.example.com\").description(\"\u672c\u756a\u74b0\u5883\")\n                ));\n    }\n}\n</code></pre> <p>API \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\uff1a - Swagger UI: http://localhost:8080/swagger-ui.html - OpenAPI JSON: http://localhost:8080/api-docs</p>"},{"location":"article/part3-orm/chapter21-orm/#_1","title":"\u307e\u3068\u3081","text":""},{"location":"article/part3-orm/chapter21-orm/#mybatis","title":"MyBatis \u7248\u3068\u306e\u9055\u3044","text":"\u89b3\u70b9 MyBatis \u7248 JPA \u7248 Output Port \u5b9f\u88c5 Mapper + XML JpaRepository + Adapter \u30af\u30a8\u30ea\u5b9a\u7fa9 XML \u306b SQL @Query or \u30e1\u30bd\u30c3\u30c9\u540d\u898f\u7d04 \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3 @Transactional @Transactional\uff08\u540c\u4e00\uff09 N+1 \u5bfe\u7b56 JOIN \u3092 XML \u3067\u8a18\u8ff0 @EntityGraph \u52d5\u7684\u30af\u30a8\u30ea <code>&lt;if&gt;</code> \u30bf\u30b0 Specification \u30c6\u30b9\u30c8 @MybatisTest @DataJpaTest"},{"location":"article/part3-orm/chapter21-orm/#jpa","title":"JPA \u56fa\u6709\u306e\u5b9f\u88c5\u30dd\u30a4\u30f3\u30c8","text":"<ol> <li> <p>Repository Adapter \u30d1\u30bf\u30fc\u30f3 <pre><code>@Component\n@RequiredArgsConstructor\npublic class AccountRepositoryAdapter implements AccountRepository {\n    private final AccountJpaRepository jpaRepository;\n\n    @Override\n    public Optional&lt;Account&gt; findByCode(String accountCode) {\n        return jpaRepository.findById(accountCode);\n    }\n}\n</code></pre></p> </li> <li> <p>@Query \u306b\u3088\u308b\u30ab\u30b9\u30bf\u30e0\u30af\u30a8\u30ea <pre><code>@Query(\"SELECT a FROM Account a JOIN AccountStructure s ON a.accountCode = s.accountCode \" +\n       \"WHERE s.accountPath LIKE CONCAT(:pathPrefix, '%') ORDER BY a.accountCode\")\nList&lt;Account&gt; findByAccountPathStartsWith(@Param(\"pathPrefix\") String pathPrefix);\n</code></pre></p> </li> <li> <p>existsById() \u306b\u3088\u308b\u5b58\u5728\u78ba\u8a8d <pre><code>@Override\npublic boolean exists(String accountCode) {\n    return jpaRepository.existsById(accountCode);\n}\n</code></pre></p> </li> </ol>"},{"location":"article/part3-orm/chapter21-orm/#api","title":"API \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u4e00\u89a7","text":"\u30e1\u30bd\u30c3\u30c9 \u30d1\u30b9 \u8aac\u660e GET /api/accounts \u52d8\u5b9a\u79d1\u76ee\u4e00\u89a7\u53d6\u5f97 GET /api/accounts/{accountCode} \u52d8\u5b9a\u79d1\u76ee\u53d6\u5f97 POST /api/accounts \u52d8\u5b9a\u79d1\u76ee\u767b\u9332 PUT /api/accounts/{accountCode} \u52d8\u5b9a\u79d1\u76ee\u66f4\u65b0 DELETE /api/accounts/{accountCode} \u52d8\u5b9a\u79d1\u76ee\u524a\u9664 GET /api/journals \u4ed5\u8a33\u4e00\u89a7\u53d6\u5f97 GET /api/journals/{journalNumber} \u4ed5\u8a33\u53d6\u5f97 POST /api/journals \u4ed5\u8a33\u767b\u9332 POST /api/journals/{journalNumber}/cancel \u4ed5\u8a33\u53d6\u6d88 POST /api/journals/{journalNumber}/correct \u4ed5\u8a33\u8a02\u6b63 GET /api/balances/daily \u65e5\u6b21\u6b8b\u9ad8\u53d6\u5f97 GET /api/balances/monthly \u6708\u6b21\u6b8b\u9ad8\u53d6\u5f97 GET /api/reports/daily-report \u65e5\u8a08\u8868\u53d6\u5f97 GET /api/reports/trial-balance \u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868\u53d6\u5f97 <p>\u2190 \u7b2c20\u7ae0\uff1a\u8ca1\u52d9\u4f1a\u8a08\u30c7\u30fc\u30bf\u8a2d\u8a08\uff08D\u793e\u4e8b\u4f8b\uff09\u3010ORM\u7248\u3011 | \u7b2c22\u7ae0\uff1a\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u5168\u4f53\u50cf \u2192</p>"},{"location":"article/part4/chapter22/","title":"\u7b2c22\u7ae0\uff1a\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u5168\u4f53\u50cf","text":"<p>\u672c\u7ae0\u304b\u3089\u7b2c4\u90e8\u300c\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u300d\u306e\u89e3\u8aac\u306b\u5165\u308a\u307e\u3059\u3002\u307e\u305a\u3001\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u30b9\u30b3\u30fc\u30d7\u3068\u3001\u95a2\u9023\u3059\u308b\u7d44\u7e54\u306e\u5f79\u5272\u5206\u62c5\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u307e\u3059\u3002</p>"},{"location":"article/part4/chapter22/#221","title":"22.1 \u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u30b9\u30b3\u30fc\u30d7","text":"<p>\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306f\u3001\u88fd\u9020\u696d\u306b\u304a\u3051\u308b\u300c\u30e2\u30ce\u3065\u304f\u308a\u300d\u306e\u5168\u5de5\u7a0b\u3092\u7ba1\u7406\u3059\u308b\u30b7\u30b9\u30c6\u30e0\u3067\u3059\u3002\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u304b\u3089\u306e\u53d7\u6ce8\u60c5\u5831\u3092\u8d77\u70b9\u3068\u3057\u3066\u3001\u751f\u7523\u8a08\u753b\u306e\u7acb\u6848\u304b\u3089\u88fd\u54c1\u306e\u5b8c\u6210\u3001\u5728\u5eab\u7ba1\u7406\u306b\u81f3\u308b\u307e\u3067\u306e\u4e00\u9023\u306e\u696d\u52d9\u30d7\u30ed\u30bb\u30b9\u3092\u7ba1\u7406\u3057\u307e\u3059\u3002</p>"},{"location":"article/part4/chapter22/#_1","title":"\u30b7\u30b9\u30c6\u30e0\u5168\u4f53\u50cf","text":""},{"location":"article/part4/chapter22/#_2","title":"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u56f3","text":"<p>\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u5168\u4f53\u306e\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002</p> <p></p>"},{"location":"article/part4/chapter22/#mpsmrp","title":"\u751f\u7523\u8a08\u753b\uff08MPS\u30fbMRP\uff09","text":"<p>\u751f\u7523\u8a08\u753b\u306f\u3001\u8ca9\u58f2\u8a08\u753b\u3084\u53d7\u6ce8\u60c5\u5831\u306b\u57fa\u3065\u3044\u3066\u3001\u4f55\u3092\u3044\u3064\u307e\u3067\u306b\u3069\u308c\u3060\u3051\u751f\u7523\u3059\u308b\u304b\u3092\u6c7a\u5b9a\u3059\u308b\u696d\u52d9\u3067\u3059\u3002</p> <p></p> \u9805\u76ee \u8aac\u660e MPS\uff08\u57fa\u6e96\u751f\u7523\u8a08\u753b\uff09 \u88fd\u54c1\u30ec\u30d9\u30eb\u306e\u751f\u7523\u8a08\u753b\u3002\u4f55\u3092\u3044\u3064\u307e\u3067\u306b\u3044\u304f\u3064\u4f5c\u308b\u304b MRP\uff08\u6240\u8981\u91cf\u5c55\u958b\uff09 BOM \u3092\u4f7f\u3063\u3066\u90e8\u54c1\u30fb\u6750\u6599\u30ec\u30d9\u30eb\u307e\u3067\u5c55\u958b\u3002\u5fc5\u8981\u6570\u91cf\u3068\u6642\u671f\u3092\u7b97\u51fa \u4e3b\u306a\u30c7\u30fc\u30bf \u30aa\u30fc\u30c0\u60c5\u5831\u3001\u6240\u8981\u60c5\u5831\u3001\u5f15\u5f53\u60c5\u5831"},{"location":"article/part4/chapter22/#_3","title":"\u8cfc\u8cb7\u7ba1\u7406\uff08\u767a\u6ce8\u30fb\u5165\u8377\u30fb\u691c\u53ce\uff09","text":"<p>\u8cfc\u8cb7\u7ba1\u7406\u306f\u3001\u751f\u7523\u306b\u5fc5\u8981\u306a\u90e8\u54c1\u30fb\u6750\u6599\u3092\u5916\u90e8\u304b\u3089\u8abf\u9054\u3059\u308b\u696d\u52d9\u3067\u3059\u3002</p> <p></p> \u9805\u76ee \u8aac\u660e \u76ee\u7684 \u751f\u7523\u306b\u5fc5\u8981\u306a\u90e8\u54c1\u30fb\u6750\u6599\u3092\u9069\u5207\u306a\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u8abf\u9054 \u5165\u529b MRP \u304b\u3089\u306e\u8cfc\u8cb7\u30aa\u30fc\u30c0\u3001\u767a\u6ce8\u4f9d\u983c \u51fa\u529b \u767a\u6ce8\u66f8\u3001\u5165\u8377\u4f1d\u7968\u3001\u691c\u53ce\u4f1d\u7968 \u4e3b\u306a\u30c7\u30fc\u30bf \u767a\u6ce8\u30c7\u30fc\u30bf\u3001\u5165\u8377\u53d7\u5165\u30c7\u30fc\u30bf\u3001\u691c\u53ce\u30c7\u30fc\u30bf"},{"location":"article/part4/chapter22/#_4","title":"\u5de5\u7a0b\u7ba1\u7406\uff08\u88fd\u9020\u6307\u793a\u30fb\u88fd\u9020\u5b9f\u7e3e\uff09","text":"<p>\u5de5\u7a0b\u7ba1\u7406\u306f\u3001\u88fd\u9020\u30aa\u30fc\u30c0\u306b\u57fa\u3065\u3044\u3066\u88fd\u9020\u4f5c\u696d\u3092\u6307\u793a\u3057\u3001\u5b9f\u7e3e\u3092\u53ce\u96c6\u3059\u308b\u696d\u52d9\u3067\u3059\u3002</p> <p></p> \u9805\u76ee \u8aac\u660e \u76ee\u7684 \u88fd\u9020\u30aa\u30fc\u30c0\u3092\u52b9\u7387\u7684\u306b\u5b9f\u884c\u3057\u3001\u5b9f\u7e3e\u3092\u6b63\u78ba\u306b\u8a18\u9332 \u5165\u529b \u88fd\u9020\u30aa\u30fc\u30c0\u3001\u5de5\u7a0b\u8868\u3001BOM \u51fa\u529b \u4f5c\u696d\u6307\u793a\u66f8\u3001\u30d4\u30c3\u30ad\u30f3\u30b0\u30ea\u30b9\u30c8\u3001\u5b8c\u6210\u5831\u544a\u66f8 \u4e3b\u306a\u30c7\u30fc\u30bf \u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf\u3001\u5b8c\u6210\u5b9f\u7e3e\u30c7\u30fc\u30bf\u3001\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf"},{"location":"article/part4/chapter22/#_5","title":"\u5728\u5eab\u7ba1\u7406\uff08\u53d7\u6255\u30fb\u5728\u5eab\u72b6\u614b\uff09","text":"<p>\u5728\u5eab\u7ba1\u7406\u306f\u3001\u90e8\u54c1\u30fb\u6750\u6599\u30fb\u88fd\u54c1\u306e\u5728\u5eab\u6570\u91cf\u3068\u72b6\u614b\u3092\u7ba1\u7406\u3059\u308b\u696d\u52d9\u3067\u3059\u3002</p> <p></p> \u9805\u76ee \u8aac\u660e \u76ee\u7684 \u5728\u5eab\u306e\u6b63\u78ba\u306a\u628a\u63e1\u3068\u9069\u6b63\u5728\u5eab\u306e\u7dad\u6301 \u4e3b\u306a\u6a5f\u80fd \u5728\u5eab\u7167\u4f1a\u3001\u53d7\u6255\u7ba1\u7406\u3001\u68da\u5378\u3001\u5728\u5eab\u8abf\u6574 \u4e3b\u306a\u30c7\u30fc\u30bf \u5728\u5eab\u30c7\u30fc\u30bf\u3001\u6255\u51fa\u30c7\u30fc\u30bf\u3001\u68da\u5378\u30c7\u30fc\u30bf"},{"location":"article/part4/chapter22/#_6","title":"\u54c1\u8cea\u7ba1\u7406\uff08\u53d7\u5165\u691c\u67fb\u30fb\u51fa\u8377\u691c\u67fb\u30fb\u30c8\u30ec\u30fc\u30b5\u30d3\u30ea\u30c6\u30a3\uff09","text":"<p>\u54c1\u8cea\u7ba1\u7406\u306f\u3001\u88fd\u54c1\u306e\u54c1\u8cea\u3092\u78ba\u4fdd\u3059\u308b\u305f\u3081\u306e\u691c\u67fb\u3068\u5c65\u6b74\u7ba1\u7406\u3092\u884c\u3046\u696d\u52d9\u3067\u3059\u3002</p> \u691c\u67fb\u7a2e\u5225 \u30bf\u30a4\u30df\u30f3\u30b0 \u76ee\u7684 \u53d7\u5165\u691c\u67fb \u5165\u8377\u6642 \u8cfc\u5165\u54c1\u306e\u54c1\u8cea\u78ba\u8a8d \u5de5\u7a0b\u691c\u67fb \u88fd\u9020\u4e2d \u5de5\u7a0b\u3054\u3068\u306e\u54c1\u8cea\u78ba\u8a8d \u51fa\u8377\u691c\u67fb \u51fa\u8377\u524d \u6700\u7d42\u88fd\u54c1\u306e\u54c1\u8cea\u78ba\u8a8d"},{"location":"article/part4/chapter22/#_7","title":"\u88fd\u9020\u539f\u4fa1\u7ba1\u7406\uff08\u6a19\u6e96\u539f\u4fa1\u30fb\u5b9f\u969b\u539f\u4fa1\u30fb\u914d\u8ce6\uff09","text":"<p>\u88fd\u9020\u539f\u4fa1\u7ba1\u7406\u306f\u3001\u88fd\u54c1\u306e\u88fd\u9020\u306b\u304b\u304b\u3063\u305f\u30b3\u30b9\u30c8\u3092\u8a08\u7b97\u30fb\u7ba1\u7406\u3059\u308b\u696d\u52d9\u3067\u3059\u3002</p> \u539f\u4fa1\u8981\u7d20 \u8aac\u660e \u6750\u6599\u8cbb \u76f4\u63a5\u6750\u6599\u8cbb\u3001\u9593\u63a5\u6750\u6599\u8cbb \u52b4\u52d9\u8cbb \u76f4\u63a5\u52b4\u52d9\u8cbb\u3001\u9593\u63a5\u52b4\u52d9\u8cbb \u88fd\u9020\u9593\u63a5\u8cbb \u6e1b\u4fa1\u511f\u5374\u8cbb\u3001\u5149\u71b1\u8cbb\u3001\u9593\u63a5\u52b4\u52d9\u8cbb\u7b49"},{"location":"article/part4/chapter22/#_8","title":"\u30de\u30b9\u30bf\u60c5\u5831\u3068\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u60c5\u5831","text":"<p>\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u30c7\u30fc\u30bf\u306f\u3001\u5927\u304d\u304f\u300c\u30de\u30b9\u30bf\u60c5\u5831\u300d\u3068\u300c\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u60c5\u5831\u300d\u306b\u5206\u985e\u3055\u308c\u307e\u3059\u3002</p> \u5206\u985e \u8aac\u660e \u4f8b \u30de\u30b9\u30bf\u60c5\u5831 \u57fa\u672c\u7684\u306b\u5909\u66f4\u304c\u5c11\u306a\u3044\u3001\u30b7\u30b9\u30c6\u30e0\u306e\u57fa\u76e4\u3068\u306a\u308b\u30c7\u30fc\u30bf \u54c1\u76ee\u30de\u30b9\u30bf\u3001BOM\u3001\u53d6\u5f15\u5148\u30de\u30b9\u30bf\u3001\u5de5\u7a0b\u30de\u30b9\u30bf \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u60c5\u5831 \u65e5\u3005\u306e\u696d\u52d9\u3067\u767a\u751f\u3059\u308b\u30c7\u30fc\u30bf \u767a\u6ce8\u30c7\u30fc\u30bf\u3001\u88fd\u9020\u5b9f\u7e3e\u3001\u5728\u5eab\u79fb\u52d5"},{"location":"article/part4/chapter22/#222","title":"22.2 \u751f\u7523\u7d44\u7e54\u306e\u5f79\u5272\u5206\u62c5","text":"<p>\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306b\u95a2\u308f\u308b\u7d44\u7e54\u306f\u8907\u6570\u3042\u308a\u3001\u305d\u308c\u305e\u308c\u304c\u7570\u306a\u308b\u5f79\u5272\u3092\u62c5\u3063\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"article/part4/chapter22/#_9","title":"\u7d44\u7e54\u69cb\u6210","text":""},{"location":"article/part4/chapter22/#_10","title":"\u55b6\u696d\u90e8","text":"<p>\u55b6\u696d\u90e8\u306f\u3001\u5f97\u610f\u5148\u3068\u306e\u63a5\u70b9\u3092\u6301\u3061\u3001\u53d7\u6ce8\u60c5\u5831\u3092\u751f\u7523\u7ba1\u7406\u306b\u9023\u643a\u3057\u307e\u3059\u3002</p> \u696d\u52d9 \u8cac\u52d9 \u4e3b\u306a\u64cd\u4f5c \u53d7\u6ce8\u9023\u643a \u53d7\u6ce8\u60c5\u5831\u306e\u751f\u7523\u8a08\u753b\u3078\u306e\u9023\u643a \u53d7\u6ce8\u30c7\u30fc\u30bf\u767b\u9332 \u7d0d\u671f\u8abf\u6574 \u751f\u7523\u8a08\u753b\u306b\u57fa\u3065\u304f\u7d0d\u671f\u56de\u7b54 \u7d0d\u671f\u56de\u7b54\u3001\u7d0d\u671f\u5909\u66f4 \u51fa\u8377\u6307\u793a \u88fd\u54c1\u5009\u5eab\u3078\u306e\u51fa\u8377\u4f9d\u983c \u51fa\u8377\u6307\u793a\u767b\u9332"},{"location":"article/part4/chapter22/#_11","title":"\u751f\u7523\u7ba1\u7406\u90e8","text":"<p>\u751f\u7523\u7ba1\u7406\u90e8\u306f\u3001\u751f\u7523\u8a08\u753b\u306e\u7acb\u6848\u304b\u3089\u9032\u6357\u7ba1\u7406\u3001\u539f\u4fa1\u7ba1\u7406\u307e\u3067\u3092\u62c5\u5f53\u3057\u307e\u3059\u3002</p> \u696d\u52d9 \u8cac\u52d9 \u4e3b\u306a\u64cd\u4f5c \u751f\u7523\u8a08\u753b MPS\u30fbMRP \u306e\u7acb\u6848\u3068\u8abf\u6574 \u8a08\u753b\u767b\u9332\u3001\u6240\u8981\u91cf\u5c55\u958b \u9032\u6357\u7ba1\u7406 \u88fd\u9020\u9032\u6357\u306e\u76e3\u8996\u3068\u5bfe\u5fdc \u9032\u6357\u7167\u4f1a\u3001\u9045\u5ef6\u30a2\u30e9\u30fc\u30c8 \u539f\u4fa1\u7ba1\u7406 \u88fd\u9020\u539f\u4fa1\u306e\u8a08\u7b97\u3068\u5206\u6790 \u539f\u4fa1\u8a08\u7b97\u3001\u5dee\u7570\u5206\u6790"},{"location":"article/part4/chapter22/#_12","title":"\u88fd\u9020\u90e8","text":"<p>\u88fd\u9020\u90e8\u306f\u3001\u5b9f\u969b\u306e\u88fd\u9020\u4f5c\u696d\u3092\u62c5\u5f53\u3057\u307e\u3059\u3002</p> \u696d\u52d9 \u8cac\u52d9 \u4e3b\u306a\u64cd\u4f5c \u88fd\u9020\u4f5c\u696d \u4f5c\u696d\u6307\u793a\u306b\u57fa\u3065\u304f\u88fd\u9020 \u4f5c\u696d\u5b9f\u65bd \u5b8c\u6210\u5831\u544a \u5b8c\u6210\u6570\u91cf\u306e\u5831\u544a \u5b8c\u6210\u5b9f\u7e3e\u767b\u9332 \u5de5\u6570\u5831\u544a \u4f5c\u696d\u6642\u9593\u306e\u5831\u544a \u5de5\u6570\u5b9f\u7e3e\u767b\u9332"},{"location":"article/part4/chapter22/#_13","title":"\u8cfc\u8cb7\u90e8","text":"<p>\u8cfc\u8cb7\u90e8\u306f\u3001\u90e8\u54c1\u30fb\u6750\u6599\u306e\u5916\u90e8\u8abf\u9054\u3092\u62c5\u5f53\u3057\u307e\u3059\u3002</p> \u696d\u52d9 \u8cac\u52d9 \u4e3b\u306a\u64cd\u4f5c \u767a\u6ce8 \u4ed5\u5165\u5148\u3078\u306e\u767a\u6ce8 \u767a\u6ce8\u767b\u9332\u3001\u6ce8\u6587\u66f8\u767a\u884c \u7d0d\u671f\u7ba1\u7406 \u5165\u8377\u4e88\u5b9a\u306e\u7ba1\u7406 \u7d0d\u671f\u78ba\u8a8d\u3001\u7763\u4fc3 \u4ed5\u5165\u5148\u7ba1\u7406 \u4ed5\u5165\u5148\u60c5\u5831\u306e\u7ba1\u7406 \u4ed5\u5165\u5148\u8a55\u4fa1"},{"location":"article/part4/chapter22/#_14","title":"\u5916\u6ce8\u90e8","text":"<p>\u5916\u6ce8\u90e8\u306f\u3001\u5916\u6ce8\u52a0\u5de5\u306e\u7ba1\u7406\u3092\u62c5\u5f53\u3057\u307e\u3059\u3002</p> \u696d\u52d9 \u8cac\u52d9 \u4e3b\u306a\u64cd\u4f5c \u5916\u6ce8\u767a\u6ce8 \u5916\u6ce8\u5148\u3078\u306e\u52a0\u5de5\u4f9d\u983c \u5916\u6ce8\u767a\u6ce8\u767b\u9332 \u652f\u7d66\u54c1\u7ba1\u7406 \u5916\u6ce8\u5148\u3078\u306e\u652f\u7d66\u54c1\u7ba1\u7406 \u652f\u7d66\u767b\u9332\u3001\u6d88\u8cbb\u78ba\u8a8d \u9032\u6357\u7ba1\u7406 \u5916\u6ce8\u4f5c\u696d\u306e\u9032\u6357\u7ba1\u7406 \u9032\u6357\u78ba\u8a8d\u3001\u7763\u4fc3"},{"location":"article/part4/chapter22/#_15","title":"\u8cc7\u6750\u5009\u5eab","text":"<p>\u8cc7\u6750\u5009\u5eab\u306f\u3001\u90e8\u54c1\u30fb\u6750\u6599\u306e\u7269\u7406\u7684\u306a\u7ba1\u7406\u3092\u62c5\u5f53\u3057\u307e\u3059\u3002</p> \u696d\u52d9 \u8cac\u52d9 \u4e3b\u306a\u64cd\u4f5c \u5165\u8377\u53d7\u5165 \u8cfc\u5165\u54c1\u306e\u53d7\u5165\u3068\u691c\u54c1 \u5165\u8377\u767b\u9332\u3001\u691c\u54c1 \u90e8\u6750\u6255\u51fa \u88fd\u9020\u3078\u306e\u90e8\u6750\u4f9b\u7d66 \u6255\u51fa\u767b\u9332\u3001\u30d4\u30c3\u30ad\u30f3\u30b0 \u5728\u5eab\u7ba1\u7406 \u5728\u5eab\u6570\u91cf\u306e\u7ba1\u7406 \u68da\u5378\u3001\u5728\u5eab\u8abf\u6574"},{"location":"article/part4/chapter22/#_16","title":"\u88fd\u54c1\u5009\u5eab","text":"<p>\u88fd\u54c1\u5009\u5eab\u306f\u3001\u5b8c\u6210\u54c1\u306e\u7269\u7406\u7684\u306a\u7ba1\u7406\u3092\u62c5\u5f53\u3057\u307e\u3059\u3002</p> \u696d\u52d9 \u8cac\u52d9 \u4e3b\u306a\u64cd\u4f5c \u5b8c\u6210\u54c1\u5165\u5eab \u88fd\u9020\u304b\u3089\u306e\u5b8c\u6210\u54c1\u53d7\u5165 \u5165\u5eab\u767b\u9332 \u51fa\u8377\u4f5c\u696d \u5f97\u610f\u5148\u3078\u306e\u51fa\u8377 \u51fa\u8377\u767b\u9332\u3001\u914d\u9001\u624b\u914d \u5728\u5eab\u7ba1\u7406 \u88fd\u54c1\u5728\u5eab\u306e\u7ba1\u7406 \u68da\u5378\u3001\u5728\u5eab\u8abf\u6574"},{"location":"article/part4/chapter22/#_17","title":"\u696d\u52d9\u30d5\u30ed\u30fc\u3068\u5404\u90e8\u9580\u306e\u8cac\u52d9","text":"<p>\u5404\u90e8\u9580\u304c\u3069\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u696d\u52d9\u306b\u95a2\u4e0e\u3059\u308b\u304b\u3092\u3001\u5168\u4f53\u30d5\u30ed\u30fc\u3067\u793a\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part4/chapter22/#_18","title":"\u90e8\u9580\u9593\u306e\u9023\u643a\u30dd\u30a4\u30f3\u30c8","text":"\u9023\u643a\u5143 \u9023\u643a\u5148 \u9023\u643a\u5185\u5bb9 \u55b6\u696d\u90e8 \u751f\u7523\u7ba1\u7406\u90e8 \u53d7\u6ce8\u60c5\u5831\u3001\u7d0d\u671f\u8981\u671b \u751f\u7523\u7ba1\u7406\u90e8 \u8cfc\u8cb7\u90e8 \u8cfc\u8cb7\u30aa\u30fc\u30c0 \u751f\u7523\u7ba1\u7406\u90e8 \u88fd\u9020\u90e8 \u88fd\u9020\u30aa\u30fc\u30c0\u3001\u4f5c\u696d\u6307\u793a \u751f\u7523\u7ba1\u7406\u90e8 \u5916\u6ce8\u90e8 \u5916\u6ce8\u30aa\u30fc\u30c0 \u8cfc\u8cb7\u90e8 \u8cc7\u6750\u5009\u5eab \u5165\u8377\u4e88\u5b9a\u60c5\u5831 \u5916\u6ce8\u90e8 \u8cc7\u6750\u5009\u5eab \u652f\u7d66\u6307\u793a \u8cc7\u6750\u5009\u5eab \u88fd\u9020\u90e8 \u90e8\u6750\u4f9b\u7d66 \u88fd\u9020\u90e8 \u88fd\u54c1\u5009\u5eab \u5b8c\u6210\u54c1 \u88fd\u9020\u90e8 \u751f\u7523\u7ba1\u7406\u90e8 \u9032\u6357\u5831\u544a \u88fd\u54c1\u5009\u5eab \u55b6\u696d\u90e8 \u51fa\u8377\u53ef\u80fd\u5831\u544a"},{"location":"article/part4/chapter22/#223","title":"22.3 \u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":"<p>\u672c\u7bc0\u3067\u306f\u3001\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\uff08PMS: Production Management System\uff09\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u6210\u3068\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u307e\u3059\u3002</p>"},{"location":"article/part4/chapter22/#_19","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u6210","text":"<p>\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306f <code>apps/pms</code> \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b\u306b\u69cb\u7bc9\u3057\u307e\u3059\u3002</p> <pre><code>apps/pms/\n\u251c\u2500\u2500 backend/\n\u2502   \u251c\u2500\u2500 build.gradle.kts               # Gradle \u30d3\u30eb\u30c9\u8a2d\u5b9a\uff08Kotlin DSL\uff09\n\u2502   \u251c\u2500\u2500 settings.gradle.kts            # Gradle \u8a2d\u5b9a\n\u2502   \u251c\u2500\u2500 config/                        # \u54c1\u8cea\u7ba1\u7406\u30c4\u30fc\u30eb\u8a2d\u5b9a\n\u2502   \u2502   \u251c\u2500\u2500 checkstyle/\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 checkstyle.xml\n\u2502   \u2502   \u251c\u2500\u2500 pmd/\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 ruleset.xml\n\u2502   \u2502   \u2514\u2500\u2500 spotbugs/\n\u2502   \u2502       \u2514\u2500\u2500 exclude.xml\n\u2502   \u2502\n\u2502   \u2514\u2500\u2500 src/\n\u2502       \u251c\u2500\u2500 main/\n\u2502       \u2502   \u251c\u2500\u2500 java/com/example/pms/\n\u2502       \u2502   \u2502   \u2502\n\u2502       \u2502   \u2502   \u251c\u2500\u2500 domain/            # \u30c9\u30e1\u30a4\u30f3\u5c64\uff08\u7d14\u7c8b\u306a\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\uff09\n\u2502       \u2502   \u2502   \u2502   \u251c\u2500\u2500 model/         # \u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\uff08\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3001\u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\uff09\n\u2502       \u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 master/    # \u30de\u30b9\u30bf\u95a2\u9023\n\u2502       \u2502   \u2502   \u2502   \u2502   \u2514\u2500\u2500 transaction/ # \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u95a2\u9023\n\u2502       \u2502   \u2502   \u2502   \u251c\u2500\u2500 type/          # \u57fa\u672c\u578b\uff08\u901a\u8ca8\u3001\u5358\u4f4d\u3001\u6570\u91cf\u7b49\uff09\n\u2502       \u2502   \u2502   \u2502   \u2514\u2500\u2500 exception/     # \u30c9\u30e1\u30a4\u30f3\u4f8b\u5916\n\u2502       \u2502   \u2502   \u2502\n\u2502       \u2502   \u2502   \u251c\u2500\u2500 application/       # \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\n\u2502       \u2502   \u2502   \u2502   \u251c\u2500\u2500 port/\n\u2502       \u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 in/        # Input Port\uff08\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9IF\uff09\n\u2502       \u2502   \u2502   \u2502   \u2502   \u2514\u2500\u2500 out/       # Output Port\uff08\u30ea\u30dd\u30b8\u30c8\u30eaIF\uff09\n\u2502       \u2502   \u2502   \u2502   \u2514\u2500\u2500 service/       # Application Service\uff08\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u5b9f\u88c5\uff09\n\u2502       \u2502   \u2502   \u2502\n\u2502       \u2502   \u2502   \u251c\u2500\u2500 infrastructure/    # \u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u5c64\n\u2502       \u2502   \u2502   \u2502   \u251c\u2500\u2500 in/            # Input Adapter\n\u2502       \u2502   \u2502   \u2502   \u2502   \u2514\u2500\u2500 rest/      # REST API Controller\n\u2502       \u2502   \u2502   \u2502   \u251c\u2500\u2500 out/           # Output Adapter\n\u2502       \u2502   \u2502   \u2502   \u2502   \u2514\u2500\u2500 persistence/ # \u6c38\u7d9a\u5316\uff08MyBatis Mapper\uff09\n\u2502       \u2502   \u2502   \u2502   \u2514\u2500\u2500 config/        # \u8a2d\u5b9a\u30af\u30e9\u30b9\n\u2502       \u2502   \u2502   \u2502\n\u2502       \u2502   \u2502   \u2514\u2500\u2500 Application.java   # \u30e1\u30a4\u30f3\u30af\u30e9\u30b9\n\u2502       \u2502   \u2502\n\u2502       \u2502   \u2514\u2500\u2500 resources/\n\u2502       \u2502       \u251c\u2500\u2500 application.yml    # \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\n\u2502       \u2502       \u251c\u2500\u2500 db/migration/      # Flyway \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\n\u2502       \u2502       \u2514\u2500\u2500 mapper/            # MyBatis XML \u30de\u30c3\u30d1\u30fc\n\u2502       \u2502\n\u2502       \u2514\u2500\u2500 test/\n\u2502           \u251c\u2500\u2500 java/com/example/pms/\n\u2502           \u2502   \u251c\u2500\u2500 testsetup/         # \u30c6\u30b9\u30c8\u57fa\u76e4\u30af\u30e9\u30b9\n\u2502           \u2502   \u2502   \u2514\u2500\u2500 BaseIntegrationTest.java\n\u2502           \u2502   \u251c\u2500\u2500 domain/            # \u30c9\u30e1\u30a4\u30f3\u5c64\u30c6\u30b9\u30c8\n\u2502           \u2502   \u251c\u2500\u2500 application/       # \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\u30c6\u30b9\u30c8\n\u2502           \u2502   \u2514\u2500\u2500 infrastructure/    # \u30a4\u30f3\u30d5\u30e9\u5c64\u30c6\u30b9\u30c8\n\u2502           \u2502\n\u2502           \u2514\u2500\u2500 resources/\n\u2502               \u2514\u2500\u2500 application-test.yml\n\u2502\n\u2514\u2500\u2500 docker-compose.yml                 # Docker \u69cb\u6210\n</code></pre> <p>\u5404\u30ec\u30a4\u30e4\u30fc\u306e\u8cac\u52d9\uff1a</p> \u30ec\u30a4\u30e4\u30fc \u8cac\u52d9 Domain \u5c64 \u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u3068\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\uff08\u5916\u90e8\u6280\u8853\u306b\u975e\u4f9d\u5b58\uff09 Application \u5c64 \u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306e\u5b9f\u88c5\u3068\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3 Infrastructure \u5c64 \u5916\u90e8\u6280\u8853\u3068\u306e\u63a5\u7d9a\uff08DB\u3001Web \u7b49\uff09"},{"location":"article/part4/chapter22/#_20","title":"\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u30dd\u30fc\u30c8&amp;\u30a2\u30c0\u30d7\u30bf\u30fc\uff09","text":"<p>\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306f\u3001\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08Ports and Adapters\uff09\u3092\u63a1\u7528\u3057\u307e\u3059\u3002\u3053\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u3088\u308a\u3001\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3092\u5916\u90e8\u306e\u6280\u8853\u7684\u95a2\u5fc3\u4e8b\u304b\u3089\u5206\u96e2\u3057\u3001\u30c6\u30b9\u30c8\u5bb9\u6613\u6027\u3068\u4fdd\u5b88\u6027\u3092\u9ad8\u3081\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part4/chapter22/#_21","title":"\u30c9\u30e1\u30a4\u30f3\uff08\u4e2d\u5fc3\uff09","text":"<p>\u30c9\u30e1\u30a4\u30f3\u306f\u30b7\u30b9\u30c6\u30e0\u306e\u4e2d\u5fc3\u306b\u4f4d\u7f6e\u3057\u3001\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002</p> <pre><code>domain/\n\u251c\u2500\u2500 model/                       # \u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\n\u2502   \u251c\u2500\u2500 master/                  # \u30de\u30b9\u30bf\u95a2\u9023\n\u2502   \u2502   \u251c\u2500\u2500 Item.java            # \u54c1\u76ee\n\u2502   \u2502   \u251c\u2500\u2500 Bom.java             # \u90e8\u54c1\u69cb\u6210\u8868\n\u2502   \u2502   \u251c\u2500\u2500 WorkCalendar.java    # \u30ab\u30ec\u30f3\u30c0\n\u2502   \u2502   \u251c\u2500\u2500 Location.java        # \u5834\u6240\n\u2502   \u2502   \u2514\u2500\u2500 Supplier.java        # \u53d6\u5f15\u5148\n\u2502   \u251c\u2500\u2500 planning/                # \u8a08\u753b\u95a2\u9023\n\u2502   \u2502   \u251c\u2500\u2500 ProductionPlan.java  # \u751f\u7523\u8a08\u753b\n\u2502   \u2502   \u251c\u2500\u2500 Order.java           # \u30aa\u30fc\u30c0\n\u2502   \u2502   \u2514\u2500\u2500 Requirement.java     # \u6240\u8981\n\u2502   \u251c\u2500\u2500 purchasing/              # \u8cfc\u8cb7\u95a2\u9023\n\u2502   \u2502   \u251c\u2500\u2500 PurchaseOrder.java   # \u767a\u6ce8\n\u2502   \u2502   \u251c\u2500\u2500 Receiving.java       # \u5165\u8377\u53d7\u5165\n\u2502   \u2502   \u2514\u2500\u2500 Acceptance.java      # \u691c\u53ce\n\u2502   \u251c\u2500\u2500 manufacturing/           # \u88fd\u9020\u95a2\u9023\n\u2502   \u2502   \u251c\u2500\u2500 WorkOrder.java       # \u4f5c\u696d\u6307\u793a\n\u2502   \u2502   \u251c\u2500\u2500 Completion.java      # \u5b8c\u6210\u5b9f\u7e3e\n\u2502   \u2502   \u2514\u2500\u2500 LaborReport.java     # \u5de5\u6570\u5b9f\u7e3e\n\u2502   \u2514\u2500\u2500 inventory/               # \u5728\u5eab\u95a2\u9023\n\u2502       \u251c\u2500\u2500 Stock.java           # \u5728\u5eab\n\u2502       \u2514\u2500\u2500 Issue.java           # \u6255\u51fa\n\u251c\u2500\u2500 type/                        # \u57fa\u672c\u578b\n\u2502   \u251c\u2500\u2500 Money.java               # \u901a\u8ca8\n\u2502   \u251c\u2500\u2500 Quantity.java            # \u6570\u91cf\n\u2502   \u2514\u2500\u2500 ItemCode.java            # \u54c1\u76ee\u30b3\u30fc\u30c9\n\u2514\u2500\u2500 exception/                   # \u30c9\u30e1\u30a4\u30f3\u4f8b\u5916\n    \u2514\u2500\u2500 DomainException.java\n</code></pre>"},{"location":"article/part4/chapter22/#_22","title":"\u30dd\u30fc\u30c8\uff08\u5165\u529b\u30dd\u30fc\u30c8\u30fb\u51fa\u529b\u30dd\u30fc\u30c8\uff09","text":"<p>\u30dd\u30fc\u30c8\u306f\u3001\u30c9\u30e1\u30a4\u30f3\u3068\u5916\u90e8\u4e16\u754c\u3068\u306e\u5883\u754c\u3092\u5b9a\u7fa9\u3059\u308b\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3067\u3059\u3002</p> \u30dd\u30fc\u30c8\u7a2e\u5225 \u5f79\u5272 \u4f8b \u5165\u529b\u30dd\u30fc\u30c8 \u5916\u90e8\u304b\u3089\u306e\u8981\u6c42\u3092\u53d7\u3051\u4ed8\u3051\u308b \u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9 \u51fa\u529b\u30dd\u30fc\u30c8 \u5916\u90e8\u30ea\u30bd\u30fc\u30b9\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u62bd\u8c61\u5316 \u30ea\u30dd\u30b8\u30c8\u30ea\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9 <pre><code>// \u5165\u529b\u30dd\u30fc\u30c8\uff08\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff09\npublic interface ExecuteMrpUseCase {\n    MrpResult execute(MrpCommand command);\n}\n\n// \u51fa\u529b\u30dd\u30fc\u30c8\uff08\u30ea\u30dd\u30b8\u30c8\u30ea\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff09\npublic interface ItemRepository {\n    void save(Item item);\n    Optional&lt;Item&gt; findByCode(ItemCode code);\n    List&lt;Item&gt; findAll();\n}\n</code></pre>"},{"location":"article/part4/chapter22/#_23","title":"\u30a2\u30c0\u30d7\u30bf\u30fc\uff08\u30d7\u30e9\u30a4\u30de\u30ea\u30fb\u30bb\u30ab\u30f3\u30c0\u30ea\uff09","text":"<p>\u30a2\u30c0\u30d7\u30bf\u30fc\u306f\u3001\u30dd\u30fc\u30c8\u306e\u5b9f\u88c5\u3092\u63d0\u4f9b\u3057\u3001\u5916\u90e8\u6280\u8853\u3068\u30c9\u30e1\u30a4\u30f3\u3092\u63a5\u7d9a\u3057\u307e\u3059\u3002</p> \u30a2\u30c0\u30d7\u30bf\u30fc\u7a2e\u5225 \u5f79\u5272 \u4f8b \u30d7\u30e9\u30a4\u30de\u30ea\u30a2\u30c0\u30d7\u30bf\u30fc \u5916\u90e8\u304b\u3089\u306e\u5165\u529b\u3092\u51e6\u7406 REST \u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u3001CLI \u30bb\u30ab\u30f3\u30c0\u30ea\u30a2\u30c0\u30d7\u30bf\u30fc \u5916\u90e8\u30ea\u30bd\u30fc\u30b9\u3078\u306e\u51fa\u529b\u3092\u51e6\u7406 DB \u30ea\u30dd\u30b8\u30c8\u30ea\u5b9f\u88c5\u3001\u5916\u90e8 API \u30af\u30e9\u30a4\u30a2\u30f3\u30c8 <pre><code>infrastructure/\n\u251c\u2500\u2500 in/                          # Input Adapter\uff08\u30d7\u30e9\u30a4\u30de\u30ea\u30a2\u30c0\u30d7\u30bf\u30fc\uff09\n\u2502   \u2514\u2500\u2500 rest/                    # REST API\n\u2502       \u251c\u2500\u2500 controller/\n\u2502       \u2502   \u251c\u2500\u2500 ItemController.java\n\u2502       \u2502   \u251c\u2500\u2500 BomController.java\n\u2502       \u2502   \u2514\u2500\u2500 MrpController.java\n\u2502       \u251c\u2500\u2500 dto/\n\u2502       \u2502   \u251c\u2500\u2500 ItemRequest.java\n\u2502       \u2502   \u2514\u2500\u2500 ItemResponse.java\n\u2502       \u2514\u2500\u2500 exception/\n\u2502           \u2514\u2500\u2500 RestExceptionHandler.java\n\u251c\u2500\u2500 out/                         # Output Adapter\uff08\u30bb\u30ab\u30f3\u30c0\u30ea\u30a2\u30c0\u30d7\u30bf\u30fc\uff09\n\u2502   \u2514\u2500\u2500 persistence/             # \u6c38\u7d9a\u5316\n\u2502       \u251c\u2500\u2500 mapper/              # MyBatis Mapper\n\u2502       \u2502   \u2514\u2500\u2500 ItemMapper.java\n\u2502       \u251c\u2500\u2500 repository/          # Repository\u5b9f\u88c5\n\u2502       \u2502   \u2514\u2500\u2500 ItemRepositoryImpl.java\n\u2502       \u2514\u2500\u2500 typehandler/         # \u578b\u30cf\u30f3\u30c9\u30e9\n\u2502           \u2514\u2500\u2500 ItemTypeEnumHandler.java\n\u2514\u2500\u2500 config/                      # \u8a2d\u5b9a\u30af\u30e9\u30b9\n    \u251c\u2500\u2500 DatabaseConfig.java\n    \u2514\u2500\u2500 WebConfig.java\n</code></pre>"},{"location":"article/part4/chapter22/#_24","title":"\u4f9d\u5b58\u6027\u306e\u65b9\u5411\u3068\u4f9d\u5b58\u6027\u9006\u8ee2\u306e\u539f\u5247","text":"<p>\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3067\u306f\u3001\u3059\u3079\u3066\u306e\u4f9d\u5b58\u6027\u304c\u30c9\u30e1\u30a4\u30f3\u306b\u5411\u304b\u3044\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part4/chapter22/#_25","title":"\u30c9\u30e1\u30a4\u30f3\u99c6\u52d5\u8a2d\u8a08\u306e\u9069\u7528","text":""},{"location":"article/part4/chapter22/#_26","title":"\u96c6\u7d04\u3068\u30ea\u30dd\u30b8\u30c8\u30ea","text":"<p>\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u4e3b\u8981\u306a\u96c6\u7d04\u3092\u4ee5\u4e0b\u306b\u793a\u3057\u307e\u3059\u3002</p> <p></p> \u96c6\u7d04 \u30eb\u30fc\u30c8\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 \u4e3b\u306a\u8cac\u52d9 \u54c1\u76ee\u96c6\u7d04 Item \u54c1\u76ee\u60c5\u5831\u306e\u7ba1\u7406 BOM \u96c6\u7d04 Bom \u90e8\u54c1\u69cb\u6210\u306e\u7ba1\u7406 \u30aa\u30fc\u30c0\u96c6\u7d04 Order \u751f\u7523\u30fb\u8cfc\u8cb7\u30aa\u30fc\u30c0\u306e\u7ba1\u7406 \u4f5c\u696d\u6307\u793a\u96c6\u7d04 WorkOrder \u88fd\u9020\u6307\u793a\u306e\u7ba1\u7406 \u5728\u5eab\u96c6\u7d04 Stock \u5728\u5eab\u6570\u91cf\u306e\u7ba1\u7406"},{"location":"article/part4/chapter22/#_27","title":"\u30c9\u30e1\u30a4\u30f3\u30b5\u30fc\u30d3\u30b9","text":"<p>\u8907\u6570\u306e\u96c6\u7d04\u3092\u307e\u305f\u3050\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u306f\u3001\u30c9\u30e1\u30a4\u30f3\u30b5\u30fc\u30d3\u30b9\u3068\u3057\u3066\u5b9f\u88c5\u3057\u307e\u3059\u3002</p> <pre><code>// MRP \u30c9\u30e1\u30a4\u30f3\u30b5\u30fc\u30d3\u30b9\npublic class MrpDomainService {\n\n    public List&lt;Requirement&gt; explodeRequirements(\n            Item item,\n            Quantity requiredQty,\n            LocalDate requiredDate,\n            BomRepository bomRepository) {\n\n        List&lt;Bom&gt; children = bomRepository.findChildren(item.getItemCode());\n\n        return children.stream()\n            .map(bom -&gt; new Requirement(\n                bom.getChildItemCode(),\n                requiredQty.multiply(bom.getRequiredQuantity()),\n                requiredDate.minusDays(item.getLeadTime())\n            ))\n            .collect(Collectors.toList());\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter22/#_28","title":"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9","text":"<p>\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306e\u5b9f\u88c5\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u3068\u3057\u3066\u5b9f\u88c5\u3057\u307e\u3059\u3002</p> <pre><code>@Service\n@RequiredArgsConstructor\npublic class MrpApplicationService implements ExecuteMrpUseCase {\n\n    private final ItemRepository itemRepository;\n    private final BomRepository bomRepository;\n    private final OrderRepository orderRepository;\n    private final MrpDomainService mrpDomainService;\n\n    @Override\n    @Transactional\n    public MrpResult execute(MrpCommand command) {\n        // 1. \u5bfe\u8c61\u54c1\u76ee\u306e\u53d6\u5f97\n        Item item = itemRepository.findByCode(command.getItemCode())\n            .orElseThrow(() -&gt; new ItemNotFoundException(command.getItemCode()));\n\n        // 2. \u6240\u8981\u91cf\u5c55\u958b\n        List&lt;Requirement&gt; requirements = mrpDomainService.explodeRequirements(\n            item, command.getQuantity(), command.getRequiredDate(), bomRepository);\n\n        // 3. \u30aa\u30fc\u30c0\u751f\u6210\n        List&lt;Order&gt; orders = requirements.stream()\n            .map(this::createOrder)\n            .collect(Collectors.toList());\n\n        orders.forEach(orderRepository::save);\n\n        return new MrpResult(orders);\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter22/#api","title":"API \u8a2d\u8a08","text":""},{"location":"article/part4/chapter22/#restful-api","title":"RESTful API \u306e\u57fa\u672c\u65b9\u91dd","text":"\u65b9\u91dd \u8aac\u660e \u30ea\u30bd\u30fc\u30b9\u6307\u5411 URL \u306f\u30ea\u30bd\u30fc\u30b9\u3092\u8868\u73fe\uff08\u52d5\u8a5e\u3067\u306f\u306a\u304f\u540d\u8a5e\uff09 HTTP \u30e1\u30bd\u30c3\u30c9 GET\uff08\u53d6\u5f97\uff09\u3001POST\uff08\u4f5c\u6210\uff09\u3001PUT\uff08\u66f4\u65b0\uff09\u3001DELETE\uff08\u524a\u9664\uff09 \u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9 200\uff08\u6210\u529f\uff09\u3001201\uff08\u4f5c\u6210\uff09\u3001400\uff08\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30a8\u30e9\u30fc\uff09\u3001404\uff08\u672a\u691c\u51fa\uff09\u3001500\uff08\u30b5\u30fc\u30d0\u30fc\u30a8\u30e9\u30fc\uff09"},{"location":"article/part4/chapter22/#_29","title":"\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u8a2d\u8a08","text":"\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 \u30e1\u30bd\u30c3\u30c9 \u8aac\u660e <code>/api/items</code> GET \u54c1\u76ee\u4e00\u89a7\u53d6\u5f97 <code>/api/items/{code}</code> GET \u54c1\u76ee\u8a73\u7d30\u53d6\u5f97 <code>/api/items</code> POST \u54c1\u76ee\u767b\u9332 <code>/api/items/{code}</code> PUT \u54c1\u76ee\u66f4\u65b0 <code>/api/bom/{parentCode}</code> GET BOM \u5c55\u958b\uff08\u5b50\u54c1\u76ee\u4e00\u89a7\uff09 <code>/api/mrp/execute</code> POST MRP \u5b9f\u884c <code>/api/orders</code> GET \u30aa\u30fc\u30c0\u4e00\u89a7\u53d6\u5f97 <code>/api/orders/{id}</code> GET \u30aa\u30fc\u30c0\u8a73\u7d30\u53d6\u5f97 <code>/api/work-orders</code> GET \u4f5c\u696d\u6307\u793a\u4e00\u89a7\u53d6\u5f97 <code>/api/stock/{locationCode}/{itemCode}</code> GET \u5728\u5eab\u7167\u4f1a"},{"location":"article/part4/chapter22/#_30","title":"\u307e\u3068\u3081","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u5168\u4f53\u50cf\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u307e\u3057\u305f\u3002</p> <ol> <li>\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u30b9\u30b3\u30fc\u30d7</li> <li>\u751f\u7523\u8a08\u753b\uff08MPS\u30fbMRP\uff09\u3001\u8cfc\u8cb7\u7ba1\u7406\u3001\u5de5\u7a0b\u7ba1\u7406\u3001\u5728\u5eab\u7ba1\u7406\u3001\u54c1\u8cea\u7ba1\u7406\u3001\u539f\u4fa1\u7ba1\u7406</li> <li> <p>\u30de\u30b9\u30bf\u60c5\u5831\u3068\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u60c5\u5831\u306e\u5206\u985e</p> </li> <li> <p>\u751f\u7523\u7d44\u7e54\u306e\u5f79\u5272\u5206\u62c5</p> </li> <li>\u55b6\u696d\u90e8\u30fb\u751f\u7523\u7ba1\u7406\u90e8\u30fb\u88fd\u9020\u90e8\u30fb\u8cfc\u8cb7\u90e8\u30fb\u5916\u6ce8\u90e8\u30fb\u8cc7\u6750\u5009\u5eab\u30fb\u88fd\u54c1\u5009\u5eab</li> <li> <p>\u5404\u90e8\u9580\u306e\u8cac\u52d9\u3068\u9023\u643a\u30dd\u30a4\u30f3\u30c8</p> </li> <li> <p>\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3</p> </li> <li>\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u30dd\u30fc\u30c8&amp;\u30a2\u30c0\u30d7\u30bf\u30fc\uff09</li> <li>\u30c9\u30e1\u30a4\u30f3\u99c6\u52d5\u8a2d\u8a08\u306e\u9069\u7528</li> <li>RESTful API \u306e\u8a2d\u8a08\u65b9\u91dd</li> </ol> <p>\u6b21\u7ae0\u3067\u306f\u3001\u54c1\u76ee\u30de\u30b9\u30bf\u3084 BOM\uff08\u90e8\u54c1\u69cb\u6210\u8868\uff09\u306a\u3069\u306e\u30de\u30b9\u30bf\u60c5\u5831\u306e\u8a2d\u8a08\u306b\u3064\u3044\u3066\u8a73\u3057\u304f\u89e3\u8aac\u3057\u307e\u3059\u3002</p>"},{"location":"article/part4/chapter23/","title":"\u7b2c23\u7ae0\uff1a\u30de\u30b9\u30bf\u60c5\u5831\u306e\u8a2d\u8a08","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u57fa\u76e4\u3068\u306a\u308b\u30de\u30b9\u30bf\u60c5\u5831\u3092\u8a2d\u8a08\u3057\u307e\u3059\u3002\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u30dd\u30fc\u30c8\uff06\u30a2\u30c0\u30d7\u30bf\u30fc\u30d1\u30bf\u30fc\u30f3\uff09\u3092\u63a1\u7528\u3057\u3001\u30c9\u30e1\u30a4\u30f3\u5c64\u304c\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u5c64\u306b\u4f9d\u5b58\u3057\u306a\u3044\u8a2d\u8a08\u3068\u3057\u307e\u3059\u3002</p>"},{"location":"article/part4/chapter23/#_1","title":"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u6982\u8981","text":""},{"location":"article/part4/chapter23/#_2","title":"\u30d1\u30c3\u30b1\u30fc\u30b8\u69cb\u6210","text":"<pre><code>src/main/java/com/example/production/\n\u251c\u2500\u2500 application/                    # \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\n\u2502   \u2514\u2500\u2500 port/\n\u2502       \u2514\u2500\u2500 out/                   # Output Port\uff08\u30ea\u30dd\u30b8\u30c8\u30ea\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff09\n\u2502           \u2514\u2500\u2500 ItemRepository.java\n\u251c\u2500\u2500 domain/                         # \u30c9\u30e1\u30a4\u30f3\u5c64\uff08\u7d14\u7c8b\u306a\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\uff09\n\u2502   \u2514\u2500\u2500 model/                     # \u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\n\u2502       \u2514\u2500\u2500 item/\n\u2502           \u251c\u2500\u2500 Item.java\n\u2502           \u2514\u2500\u2500 ItemCategory.java\n\u251c\u2500\u2500 infrastructure/                 # \u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u5c64\n\u2502   \u2514\u2500\u2500 persistence/\n\u2502       \u251c\u2500\u2500 mapper/                # MyBatis Mapper\n\u2502       \u2502   \u2514\u2500\u2500 ItemMapper.java\n\u2502       \u251c\u2500\u2500 repository/            # Repository\u5b9f\u88c5\n\u2502       \u2502   \u2514\u2500\u2500 ItemRepositoryImpl.java\n\u2502       \u2514\u2500\u2500 ItemCategoryTypeHandler.java\n\u2514\u2500\u2500 config/\n    \u2514\u2500\u2500 FlywayConfig.java\n</code></pre>"},{"location":"article/part4/chapter23/#231","title":"23.1 \u54c1\u76ee\u30de\u30b9\u30bf\u306e\u8a2d\u8a08","text":"<p>\u54c1\u76ee\u30de\u30b9\u30bf\u306f\u3001\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3067\u6271\u3046\u300c\u30e2\u30ce\u300d\uff08\u88fd\u54c1\u3001\u90e8\u54c1\u3001\u6750\u6599\u306a\u3069\uff09\u306e\u60c5\u5831\u3092\u7ba1\u7406\u3059\u308b\u3001\u6700\u3082\u57fa\u672c\u7684\u306a\u30de\u30b9\u30bf\u3067\u3059\u3002</p>"},{"location":"article/part4/chapter23/#_3","title":"\u54c1\u76ee\u3068\u306f","text":"<p>\u751f\u7523\u7ba1\u7406\u306b\u304a\u3051\u308b\u300c\u54c1\u76ee\u300d\u3068\u306f\u3001\u7ba1\u7406\u5bfe\u8c61\u3068\u306a\u308b\u3059\u3079\u3066\u306e\u300c\u30e2\u30ce\u300d\u3092\u6307\u3057\u307e\u3059\u3002</p> \u54c1\u76ee\u533a\u5206 \u8aac\u660e \u4f8b \u88fd\u54c1 \u6700\u7d42\u7684\u306b\u8ca9\u58f2\u3059\u308b\u5b8c\u6210\u54c1 \u30d1\u30bd\u30b3\u30f3\u3001\u30b9\u30de\u30fc\u30c8\u30d5\u30a9\u30f3 \u534a\u88fd\u54c1 \u9014\u4e2d\u307e\u3067\u5b8c\u6210\u3057\u305f\u88fd\u54c1 \u7d44\u7acb\u6e08\u307f\u306e\u57fa\u677f \u4e2d\u9593\u54c1 \u88fd\u9020\u5de5\u7a0b\u306e\u4e2d\u9593\u751f\u6210\u7269 \u52a0\u5de5\u6e08\u307f\u90e8\u54c1 \u90e8\u54c1 \u88fd\u54c1\u3092\u69cb\u6210\u3059\u308b\u90e8\u54c1 \u30cd\u30b8\u3001\u30b3\u30cd\u30af\u30bf \u6750\u6599 \u52a0\u5de5\u306b\u4f7f\u7528\u3059\u308b\u6750\u6599 \u92fc\u6750\u3001\u30d7\u30e9\u30b9\u30c1\u30c3\u30af \u539f\u6599 \u5316\u5b66\u53cd\u5fdc\u306a\u3069\u306e\u5143\u3068\u306a\u308b\u539f\u6599 \u5316\u5b66\u85ac\u54c1 \u8cc7\u6750 \u88fd\u9020\u3092\u652f\u63f4\u3059\u308b\u8cc7\u6750 \u68b1\u5305\u6750\u3001\u30e9\u30d9\u30eb"},{"location":"article/part4/chapter23/#_4","title":"\u54c1\u76ee\u30de\u30b9\u30bf\u306b\u5fc5\u8981\u306a\u60c5\u5831","text":""},{"location":"article/part4/chapter23/#_5","title":"\u30c6\u30fc\u30d6\u30eb\u5b9a\u7fa9","text":"DDL\uff08\u54c1\u76ee\u30de\u30b9\u30bf\u30fb\u5358\u4f4d\u30de\u30b9\u30bf\uff09 <pre><code>-- src/main/resources/db/migration/V002__create_item_master.sql\n\n-- \u54c1\u76ee\u533a\u5206 ENUM\uff08\u65e5\u672c\u8a9e\u5024\uff09\nCREATE TYPE \u54c1\u76ee\u533a\u5206 AS ENUM (\n    '\u88fd\u54c1', '\u534a\u88fd\u54c1', '\u4e2d\u9593\u54c1', '\u90e8\u54c1', '\u6750\u6599', '\u539f\u6599', '\u8cc7\u6750'\n);\n\n-- \u5358\u4f4d\u30de\u30b9\u30bf\uff08\u65e5\u672c\u8a9e\u30c6\u30fc\u30d6\u30eb\u540d\u30fb\u30ab\u30e9\u30e0\u540d\uff09\nCREATE TABLE \"\u5358\u4f4d\u30de\u30b9\u30bf\" (\n    \"\u5358\u4f4d\u30b3\u30fc\u30c9\" VARCHAR(10) PRIMARY KEY,\n    \"\u5358\u4f4d\u8a18\u53f7\" VARCHAR(10) NOT NULL,\n    \"\u5358\u4f4d\u540d\" VARCHAR(50) NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- \u54c1\u76ee\u30de\u30b9\u30bf\uff08\u65e5\u672c\u8a9e\u30c6\u30fc\u30d6\u30eb\u540d\u30fb\u30ab\u30e9\u30e0\u540d\uff09\nCREATE TABLE \"\u54c1\u76ee\u30de\u30b9\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u54c1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u9069\u7528\u958b\u59cb\u65e5\" DATE NOT NULL,\n    \"\u9069\u7528\u505c\u6b62\u65e5\" DATE,\n    \"\u54c1\u540d\" VARCHAR(100) NOT NULL,\n    \"\u54c1\u76ee\u533a\u5206\" \u54c1\u76ee\u533a\u5206 NOT NULL,\n    \"\u5358\u4f4d\u30b3\u30fc\u30c9\" VARCHAR(10) REFERENCES \"\u5358\u4f4d\u30de\u30b9\u30bf\"(\"\u5358\u4f4d\u30b3\u30fc\u30c9\"),\n    \"\u30ea\u30fc\u30c9\u30bf\u30a4\u30e0\" INTEGER DEFAULT 0,\n    \"\u5b89\u5168\u30ea\u30fc\u30c9\u30bf\u30a4\u30e0\" INTEGER DEFAULT 0,\n    \"\u5b89\u5168\u5728\u5eab\u6570\" DECIMAL(15, 2) DEFAULT 0,\n    \"\u6b69\u7559\u7387\" DECIMAL(5, 2) DEFAULT 100,\n    \"\u6700\u5c0f\u30ed\u30c3\u30c8\u6570\" DECIMAL(15, 2) DEFAULT 1,\n    \"\u523b\u307f\u30ed\u30c3\u30c8\u6570\" DECIMAL(15, 2) DEFAULT 1,\n    \"\u6700\u5927\u30ed\u30c3\u30c8\u6570\" DECIMAL(15, 2),\n    \"\u6709\u52b9\u671f\u9593\" INTEGER,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    UNIQUE(\"\u54c1\u76ee\u30b3\u30fc\u30c9\", \"\u9069\u7528\u958b\u59cb\u65e5\")\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX idx_\u54c1\u76ee\u30de\u30b9\u30bf_\u54c1\u76ee\u30b3\u30fc\u30c9 ON \"\u54c1\u76ee\u30de\u30b9\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\");\nCREATE INDEX idx_\u54c1\u76ee\u30de\u30b9\u30bf_\u54c1\u76ee\u533a\u5206 ON \"\u54c1\u76ee\u30de\u30b9\u30bf\"(\"\u54c1\u76ee\u533a\u5206\");\n</code></pre>"},{"location":"article/part4/chapter23/#_6","title":"\u4e16\u4ee3\u7ba1\u7406","text":"<p>\u54c1\u76ee\u30de\u30b9\u30bf\u306f <code>\u54c1\u76ee\u30b3\u30fc\u30c9</code> \u3068 <code>\u9069\u7528\u958b\u59cb\u65e5</code> \u306e\u8907\u5408\u30ad\u30fc\u306b\u3088\u308b\u4e16\u4ee3\u7ba1\u7406\u3092\u63a1\u7528\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\uff1a</p> <ul> <li>\u540c\u3058\u54c1\u76ee\u30b3\u30fc\u30c9\u3067\u3082\u3001\u9069\u7528\u958b\u59cb\u65e5\u304c\u7570\u306a\u308c\u3070\u5225\u30ec\u30b3\u30fc\u30c9\u3068\u3057\u3066\u767b\u9332\u53ef\u80fd</li> <li>\u904e\u53bb\u30fb\u73fe\u5728\u30fb\u672a\u6765\u306e\u54c1\u76ee\u60c5\u5831\u3092\u4fdd\u6301\u3067\u304d\u308b</li> <li>\u7279\u5b9a\u6642\u70b9\u3067\u306e\u54c1\u76ee\u60c5\u5831\u3092\u53c2\u7167\u3067\u304d\u308b</li> </ul>"},{"location":"article/part4/chapter23/#_7","title":"\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb","text":"\u54c1\u76ee\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\uff08Item.java\uff09 <pre><code>// src/main/java/com/example/production/domain/model/item/Item.java\npackage com.example.production.domain.model.item;\n\nimport lombok.*;\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Item {\n    private Integer id;\n    private String itemCode;\n    private LocalDate effectiveFrom;\n    private LocalDate effectiveTo;\n    private String itemName;\n    private ItemCategory itemCategory;\n    private String unitCode;\n    @Builder.Default\n    private Integer leadTime = 0;\n    @Builder.Default\n    private Integer safetyLeadTime = 0;\n    @Builder.Default\n    private BigDecimal safetyStock = BigDecimal.ZERO;\n    @Builder.Default\n    private BigDecimal yieldRate = new BigDecimal(\"100\");\n    @Builder.Default\n    private BigDecimal minLotSize = BigDecimal.ONE;\n    @Builder.Default\n    private BigDecimal lotIncrement = BigDecimal.ONE;\n    private BigDecimal maxLotSize;\n    private Integer shelfLife;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n}\n</code></pre> \u54c1\u76ee\u533a\u5206 Enum\uff08ItemCategory.java\uff09 <pre><code>// src/main/java/com/example/production/domain/model/item/ItemCategory.java\npackage com.example.production.domain.model.item;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum ItemCategory {\n    PRODUCT(\"\u88fd\u54c1\"),\n    SEMI_PRODUCT(\"\u534a\u88fd\u54c1\"),\n    INTERMEDIATE(\"\u4e2d\u9593\u54c1\"),\n    PART(\"\u90e8\u54c1\"),\n    MATERIAL(\"\u6750\u6599\"),\n    RAW_MATERIAL(\"\u539f\u6599\"),\n    SUPPLY(\"\u8cc7\u6750\");\n\n    private final String displayName;\n\n    public static ItemCategory fromDisplayName(String displayName) {\n        for (ItemCategory category : values()) {\n            if (category.displayName.equals(displayName)) {\n                return category;\n            }\n        }\n        throw new IllegalArgumentException(\"\u4e0d\u6b63\u306a\u54c1\u76ee\u533a\u5206: \" + displayName);\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter23/#_8","title":"\u30ea\u30dd\u30b8\u30c8\u30ea","text":"Repository \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff08Output Port\uff09 <pre><code>// src/main/java/com/example/production/application/port/out/ItemRepository.java\npackage com.example.production.application.port.out;\n\nimport com.example.production.domain.model.item.Item;\n\nimport java.time.LocalDate;\nimport java.util.List;\nimport java.util.Optional;\n\n/**\n * \u54c1\u76ee\u30ea\u30dd\u30b8\u30c8\u30ea\uff08Output Port\uff09\n * \u30c9\u30e1\u30a4\u30f3\u5c64\u304c\u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u306b\u4f9d\u5b58\u3057\u306a\u3044\u305f\u3081\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\n */\npublic interface ItemRepository {\n\n    /**\n     * \u54c1\u76ee\u3092\u4fdd\u5b58\u3059\u308b\n     */\n    void save(Item item);\n\n    /**\n     * \u54c1\u76ee\u30b3\u30fc\u30c9\u3067\u54c1\u76ee\u3092\u691c\u7d22\u3059\u308b\uff08\u6700\u65b0\u306e\u9069\u7528\u958b\u59cb\u65e5\uff09\n     */\n    Optional&lt;Item&gt; findByItemCode(String itemCode);\n\n    /**\n     * \u54c1\u76ee\u30b3\u30fc\u30c9\u3068\u57fa\u6e96\u65e5\u3067\u54c1\u76ee\u3092\u691c\u7d22\u3059\u308b\n     */\n    Optional&lt;Item&gt; findByItemCodeAndDate(String itemCode, LocalDate baseDate);\n\n    /**\n     * \u3059\u3079\u3066\u306e\u54c1\u76ee\u3092\u53d6\u5f97\u3059\u308b\n     */\n    List&lt;Item&gt; findAll();\n\n    /**\n     * \u54c1\u76ee\u3092\u66f4\u65b0\u3059\u308b\n     */\n    void update(Item item);\n\n    /**\n     * \u3059\u3079\u3066\u306e\u54c1\u76ee\u3092\u524a\u9664\u3059\u308b\n     */\n    void deleteAll();\n}\n</code></pre> Repository \u5b9f\u88c5\uff08\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u5c64\uff09 <pre><code>// src/main/java/com/example/production/infrastructure/persistence/repository/ItemRepositoryImpl.java\npackage com.example.production.infrastructure.persistence.repository;\n\nimport com.example.production.application.port.out.ItemRepository;\nimport com.example.production.domain.model.item.Item;\nimport com.example.production.infrastructure.persistence.mapper.ItemMapper;\nimport org.springframework.stereotype.Repository;\n\nimport java.time.LocalDate;\nimport java.util.List;\nimport java.util.Optional;\n\n/**\n * \u54c1\u76ee\u30ea\u30dd\u30b8\u30c8\u30ea\u5b9f\u88c5\n */\n@Repository\npublic class ItemRepositoryImpl implements ItemRepository {\n\n    private final ItemMapper itemMapper;\n\n    public ItemRepositoryImpl(ItemMapper itemMapper) {\n        this.itemMapper = itemMapper;\n    }\n\n    @Override\n    public void save(Item item) {\n        itemMapper.insert(item);\n    }\n\n    @Override\n    public Optional&lt;Item&gt; findByItemCode(String itemCode) {\n        return itemMapper.findByItemCode(itemCode);\n    }\n\n    @Override\n    public Optional&lt;Item&gt; findByItemCodeAndDate(String itemCode, LocalDate baseDate) {\n        return itemMapper.findByItemCodeAndDate(itemCode, baseDate);\n    }\n\n    @Override\n    public List&lt;Item&gt; findAll() {\n        return itemMapper.findAll();\n    }\n\n    @Override\n    public void update(Item item) {\n        itemMapper.update(item);\n    }\n\n    @Override\n    public void deleteAll() {\n        itemMapper.deleteAll();\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter23/#typehandler","title":"TypeHandler","text":"<p>PostgreSQL \u306e\u65e5\u672c\u8a9e ENUM \u578b\u3068 Java \u306e Enum \u3092\u76f8\u4e92\u5909\u63db\u3059\u308b\u305f\u3081\u306e TypeHandler \u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002</p> ItemCategoryTypeHandler <pre><code>// src/main/java/com/example/production/infrastructure/persistence/ItemCategoryTypeHandler.java\npackage com.example.production.infrastructure.persistence;\n\nimport com.example.production.domain.model.item.ItemCategory;\nimport org.apache.ibatis.type.BaseTypeHandler;\nimport org.apache.ibatis.type.JdbcType;\nimport org.apache.ibatis.type.MappedTypes;\n\nimport java.sql.*;\n\n@MappedTypes(ItemCategory.class)\npublic class ItemCategoryTypeHandler extends BaseTypeHandler&lt;ItemCategory&gt; {\n\n    @Override\n    public void setNonNullParameter(PreparedStatement ps, int i,\n            ItemCategory parameter, JdbcType jdbcType) throws SQLException {\n        ps.setString(i, parameter.getDisplayName());\n    }\n\n    @Override\n    public ItemCategory getNullableResult(ResultSet rs, String columnName) throws SQLException {\n        String value = rs.getString(columnName);\n        return value == null ? null : ItemCategory.fromDisplayName(value);\n    }\n\n    @Override\n    public ItemCategory getNullableResult(ResultSet rs, int columnIndex) throws SQLException {\n        String value = rs.getString(columnIndex);\n        return value == null ? null : ItemCategory.fromDisplayName(value);\n    }\n\n    @Override\n    public ItemCategory getNullableResult(CallableStatement cs, int columnIndex) throws SQLException {\n        String value = cs.getString(columnIndex);\n        return value == null ? null : ItemCategory.fromDisplayName(value);\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter23/#mybatis-mapper","title":"MyBatis Mapper","text":"<p>\u65e5\u672c\u8a9e\u30ab\u30e9\u30e0\u540d\u3068\u82f1\u8a9e\u30d7\u30ed\u30d1\u30c6\u30a3\u540d\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002</p> Mapper \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9 <pre><code>// src/main/java/com/example/production/infrastructure/persistence/mapper/ItemMapper.java\npackage com.example.production.infrastructure.persistence.mapper;\n\nimport com.example.production.domain.model.item.Item;\nimport org.apache.ibatis.annotations.Mapper;\nimport org.apache.ibatis.annotations.Param;\n\nimport java.time.LocalDate;\nimport java.util.List;\nimport java.util.Optional;\n\n@Mapper\npublic interface ItemMapper {\n    void insert(Item item);\n    Optional&lt;Item&gt; findByItemCode(String itemCode);\n    Optional&lt;Item&gt; findByItemCodeAndDate(@Param(\"itemCode\") String itemCode,\n                                          @Param(\"baseDate\") LocalDate baseDate);\n    List&lt;Item&gt; findAll();\n    void update(Item item);\n    void deleteAll();\n}\n</code></pre> MyBatis XML Mapper <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.production.infrastructure.persistence.mapper.ItemMapper\"&gt;\n\n    &lt;!-- \u65e5\u672c\u8a9e\u30ab\u30e9\u30e0\u540d\u3068\u82f1\u8a9e\u30d7\u30ed\u30d1\u30c6\u30a3\u540d\u306e\u30de\u30c3\u30d4\u30f3\u30b0 --&gt;\n    &lt;resultMap id=\"ItemResultMap\" type=\"com.example.production.domain.model.item.Item\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"itemCode\" column=\"\u54c1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"effectiveFrom\" column=\"\u9069\u7528\u958b\u59cb\u65e5\"/&gt;\n        &lt;result property=\"effectiveTo\" column=\"\u9069\u7528\u505c\u6b62\u65e5\"/&gt;\n        &lt;result property=\"itemName\" column=\"\u54c1\u540d\"/&gt;\n        &lt;result property=\"itemCategory\" column=\"\u54c1\u76ee\u533a\u5206\"\n                typeHandler=\"com.example.production.infrastructure.persistence.ItemCategoryTypeHandler\"/&gt;\n        &lt;result property=\"unitCode\" column=\"\u5358\u4f4d\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"leadTime\" column=\"\u30ea\u30fc\u30c9\u30bf\u30a4\u30e0\"/&gt;\n        &lt;result property=\"safetyLeadTime\" column=\"\u5b89\u5168\u30ea\u30fc\u30c9\u30bf\u30a4\u30e0\"/&gt;\n        &lt;result property=\"safetyStock\" column=\"\u5b89\u5168\u5728\u5eab\u6570\"/&gt;\n        &lt;result property=\"yieldRate\" column=\"\u6b69\u7559\u7387\"/&gt;\n        &lt;result property=\"minLotSize\" column=\"\u6700\u5c0f\u30ed\u30c3\u30c8\u6570\"/&gt;\n        &lt;result property=\"lotIncrement\" column=\"\u523b\u307f\u30ed\u30c3\u30c8\u6570\"/&gt;\n        &lt;result property=\"maxLotSize\" column=\"\u6700\u5927\u30ed\u30c3\u30c8\u6570\"/&gt;\n        &lt;result property=\"shelfLife\" column=\"\u6709\u52b9\u671f\u9593\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;insert id=\"insert\" parameterType=\"com.example.production.domain.model.item.Item\"\n            useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u54c1\u76ee\u30de\u30b9\u30bf\" (\n            \"\u54c1\u76ee\u30b3\u30fc\u30c9\",\n            \"\u9069\u7528\u958b\u59cb\u65e5\",\n            \"\u9069\u7528\u505c\u6b62\u65e5\",\n            \"\u54c1\u540d\",\n            \"\u54c1\u76ee\u533a\u5206\",\n            \"\u5358\u4f4d\u30b3\u30fc\u30c9\",\n            \"\u30ea\u30fc\u30c9\u30bf\u30a4\u30e0\",\n            \"\u5b89\u5168\u30ea\u30fc\u30c9\u30bf\u30a4\u30e0\",\n            \"\u5b89\u5168\u5728\u5eab\u6570\",\n            \"\u6b69\u7559\u7387\",\n            \"\u6700\u5c0f\u30ed\u30c3\u30c8\u6570\",\n            \"\u523b\u307f\u30ed\u30c3\u30c8\u6570\",\n            \"\u6700\u5927\u30ed\u30c3\u30c8\u6570\",\n            \"\u6709\u52b9\u671f\u9593\",\n            \"\u4f5c\u6210\u65e5\u6642\",\n            \"\u66f4\u65b0\u65e5\u6642\"\n        ) VALUES (\n            #{itemCode},\n            #{effectiveFrom},\n            #{effectiveTo},\n            #{itemName},\n            #{itemCategory, typeHandler=com.example.production.infrastructure.persistence.ItemCategoryTypeHandler}::\u54c1\u76ee\u533a\u5206,\n            #{unitCode},\n            #{leadTime},\n            #{safetyLeadTime},\n            #{safetyStock},\n            #{yieldRate},\n            #{minLotSize},\n            #{lotIncrement},\n            #{maxLotSize},\n            #{shelfLife},\n            CURRENT_TIMESTAMP,\n            CURRENT_TIMESTAMP\n        )\n    &lt;/insert&gt;\n\n    &lt;select id=\"findByItemCode\" resultMap=\"ItemResultMap\"&gt;\n        SELECT * FROM \"\u54c1\u76ee\u30de\u30b9\u30bf\"\n        WHERE \"\u54c1\u76ee\u30b3\u30fc\u30c9\" = #{itemCode}\n        ORDER BY \"\u9069\u7528\u958b\u59cb\u65e5\" DESC\n        LIMIT 1\n    &lt;/select&gt;\n\n    &lt;select id=\"findByItemCodeAndDate\" resultMap=\"ItemResultMap\"&gt;\n        SELECT * FROM \"\u54c1\u76ee\u30de\u30b9\u30bf\"\n        WHERE \"\u54c1\u76ee\u30b3\u30fc\u30c9\" = #{itemCode}\n          AND \"\u9069\u7528\u958b\u59cb\u65e5\" &amp;lt;= #{baseDate}\n          AND (\"\u9069\u7528\u505c\u6b62\u65e5\" IS NULL OR \"\u9069\u7528\u505c\u6b62\u65e5\" &gt; #{baseDate})\n        ORDER BY \"\u9069\u7528\u958b\u59cb\u65e5\" DESC\n        LIMIT 1\n    &lt;/select&gt;\n\n    &lt;select id=\"findAll\" resultMap=\"ItemResultMap\"&gt;\n        SELECT * FROM \"\u54c1\u76ee\u30de\u30b9\u30bf\"\n        ORDER BY \"\u54c1\u76ee\u30b3\u30fc\u30c9\", \"\u9069\u7528\u958b\u59cb\u65e5\" DESC\n    &lt;/select&gt;\n\n    &lt;update id=\"update\" parameterType=\"com.example.production.domain.model.item.Item\"&gt;\n        UPDATE \"\u54c1\u76ee\u30de\u30b9\u30bf\" SET\n            \"\u54c1\u540d\" = #{itemName},\n            \"\u54c1\u76ee\u533a\u5206\" = #{itemCategory, typeHandler=com.example.production.infrastructure.persistence.ItemCategoryTypeHandler}::\u54c1\u76ee\u533a\u5206,\n            \"\u5358\u4f4d\u30b3\u30fc\u30c9\" = #{unitCode},\n            \"\u30ea\u30fc\u30c9\u30bf\u30a4\u30e0\" = #{leadTime},\n            \"\u5b89\u5168\u30ea\u30fc\u30c9\u30bf\u30a4\u30e0\" = #{safetyLeadTime},\n            \"\u5b89\u5168\u5728\u5eab\u6570\" = #{safetyStock},\n            \"\u6b69\u7559\u7387\" = #{yieldRate},\n            \"\u6700\u5c0f\u30ed\u30c3\u30c8\u6570\" = #{minLotSize},\n            \"\u523b\u307f\u30ed\u30c3\u30c8\u6570\" = #{lotIncrement},\n            \"\u6700\u5927\u30ed\u30c3\u30c8\u6570\" = #{maxLotSize},\n            \"\u6709\u52b9\u671f\u9593\" = #{shelfLife},\n            \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP\n        WHERE \"ID\" = #{id}\n    &lt;/update&gt;\n\n    &lt;delete id=\"deleteAll\"&gt;\n        TRUNCATE TABLE \"\u54c1\u76ee\u30de\u30b9\u30bf\" CASCADE\n    &lt;/delete&gt;\n&lt;/mapper&gt;\n</code></pre>"},{"location":"article/part4/chapter23/#232-bom","title":"23.2 BOM\uff08\u90e8\u54c1\u69cb\u6210\u8868\uff09\u306e\u8a2d\u8a08","text":"<p>BOM\uff08Bill of Materials\uff1a\u90e8\u54c1\u69cb\u6210\u8868\uff09\u306f\u3001\u88fd\u54c1\u304c\u3069\u306e\u3088\u3046\u306a\u90e8\u54c1\u30fb\u6750\u6599\u304b\u3089\u69cb\u6210\u3055\u308c\u3066\u3044\u308b\u304b\u3092\u5b9a\u7fa9\u3059\u308b\u3001\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u4e2d\u6838\u3068\u306a\u308b\u30de\u30b9\u30bf\u3067\u3059\u3002</p>"},{"location":"article/part4/chapter23/#bom","title":"BOM \u306e\u69cb\u9020","text":"<p>()\u5185\u306e\u6570\u5b57\u306f\u6570\u91cf\u3092\u8868\u3057\u307e\u3059\u3002\u88fd\u54c1 X \u30921\u3064\u4f5c\u308b\u306b\u306f\uff1a - \u4e2d\u9593\u54c1 n \u304c 1 \u500b\u5fc5\u8981 - \u90e8\u54c1 d \u304c 1 \u500b\u5fc5\u8981 - \u4e2d\u9593\u54c1 n \u3092\u4f5c\u308b\u306b\u306f\u3001m \u304c 1 \u500b\u3001b \u304c 1 \u500b\u3001c \u304c 2 \u500b\u5fc5\u8981 - ...\u3068\u3044\u3046\u3088\u3046\u306b\u3001\u518d\u5e30\u7684\u306a\u69cb\u9020\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"article/part4/chapter23/#er","title":"ER \u56f3","text":""},{"location":"article/part4/chapter23/#_9","title":"\u30c6\u30fc\u30d6\u30eb\u5b9a\u7fa9","text":"DDL\uff08\u90e8\u54c1\u69cb\u6210\u8868\uff09 <pre><code>-- src/main/resources/db/migration/V003__create_bom.sql\n\n-- \u90e8\u54c1\u69cb\u6210\u8868\uff08BOM\uff09\nCREATE TABLE \"\u90e8\u54c1\u69cb\u6210\u8868\" (\n    \"\u89aa\u54c1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u5b50\u54c1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u9069\u7528\u958b\u59cb\u65e5\" DATE NOT NULL,\n    \"\u9069\u7528\u505c\u6b62\u65e5\" DATE,\n    \"\u57fa\u6e96\u6570\u91cf\" DECIMAL(15, 2) NOT NULL DEFAULT 1,\n    \"\u5fc5\u8981\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u4e0d\u826f\u7387\" DECIMAL(5, 2) DEFAULT 0,\n    \"\u5de5\u9806\" INTEGER,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    PRIMARY KEY (\"\u89aa\u54c1\u76ee\u30b3\u30fc\u30c9\", \"\u5b50\u54c1\u76ee\u30b3\u30fc\u30c9\", \"\u9069\u7528\u958b\u59cb\u65e5\")\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX idx_bom_\u89aa\u54c1\u76ee\u30b3\u30fc\u30c9 ON \"\u90e8\u54c1\u69cb\u6210\u8868\"(\"\u89aa\u54c1\u76ee\u30b3\u30fc\u30c9\");\nCREATE INDEX idx_bom_\u5b50\u54c1\u76ee\u30b3\u30fc\u30c9 ON \"\u90e8\u54c1\u69cb\u6210\u8868\"(\"\u5b50\u54c1\u76ee\u30b3\u30fc\u30c9\");\n</code></pre>"},{"location":"article/part4/chapter23/#_10","title":"\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb","text":"BOM \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\uff08Bom.java\uff09 <pre><code>// src/main/java/com/example/production/domain/model/bom/Bom.java\npackage com.example.production.domain.model.bom;\n\nimport lombok.*;\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Bom {\n    private String parentItemCode;\n    private String childItemCode;\n    private LocalDate effectiveFrom;\n    private LocalDate effectiveTo;\n    @Builder.Default\n    private BigDecimal baseQuantity = BigDecimal.ONE;\n    private BigDecimal requiredQuantity;\n    @Builder.Default\n    private BigDecimal defectRate = BigDecimal.ZERO;\n    private Integer sequence;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n}\n</code></pre> BOM \u5c55\u958b\u7d50\u679c\uff08BomExplosion.java\uff09 <pre><code>// src/main/java/com/example/production/domain/model/bom/BomExplosion.java\npackage com.example.production.domain.model.bom;\n\nimport lombok.*;\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class BomExplosion {\n    private String parentItemCode;\n    private String childItemCode;\n    private LocalDate effectiveFrom;\n    private LocalDate effectiveTo;\n    private BigDecimal baseQuantity;\n    private BigDecimal requiredQuantity;\n    private BigDecimal defectRate;\n    private Integer sequence;\n    private Integer level;\n    private BigDecimal totalQuantity;\n}\n</code></pre>"},{"location":"article/part4/chapter23/#_11","title":"\u30ea\u30dd\u30b8\u30c8\u30ea","text":"BomRepository \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff08Output Port\uff09 <pre><code>// src/main/java/com/example/production/application/port/out/BomRepository.java\npackage com.example.production.application.port.out;\n\nimport com.example.production.domain.model.bom.Bom;\nimport com.example.production.domain.model.bom.BomExplosion;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.util.List;\n\n/**\n * BOM\u30ea\u30dd\u30b8\u30c8\u30ea\uff08Output Port\uff09\n */\npublic interface BomRepository {\n\n    void save(Bom bom);\n\n    List&lt;Bom&gt; findByParentItemCode(String parentItemCode);\n\n    List&lt;Bom&gt; findByParentItemCodeAndDate(String parentItemCode, LocalDate baseDate);\n\n    List&lt;Bom&gt; findByChildItemCode(String childItemCode);\n\n    List&lt;BomExplosion&gt; explode(String itemCode, BigDecimal quantity);\n\n    void deleteAll();\n}\n</code></pre> BomRepositoryImpl \u5b9f\u88c5\uff08\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u5c64\uff09 <pre><code>// src/main/java/com/example/production/infrastructure/persistence/repository/BomRepositoryImpl.java\npackage com.example.production.infrastructure.persistence.repository;\n\nimport com.example.production.application.port.out.BomRepository;\nimport com.example.production.domain.model.bom.Bom;\nimport com.example.production.domain.model.bom.BomExplosion;\nimport com.example.production.infrastructure.persistence.mapper.BomMapper;\nimport org.springframework.stereotype.Repository;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.util.List;\n\n@Repository\npublic class BomRepositoryImpl implements BomRepository {\n\n    private final BomMapper bomMapper;\n\n    public BomRepositoryImpl(BomMapper bomMapper) {\n        this.bomMapper = bomMapper;\n    }\n\n    @Override\n    public void save(Bom bom) {\n        bomMapper.insert(bom);\n    }\n\n    @Override\n    public List&lt;Bom&gt; findByParentItemCode(String parentItemCode) {\n        return bomMapper.findByParentItemCode(parentItemCode);\n    }\n\n    @Override\n    public List&lt;Bom&gt; findByParentItemCodeAndDate(String parentItemCode, LocalDate baseDate) {\n        return bomMapper.findByParentItemCodeAndDate(parentItemCode, baseDate);\n    }\n\n    @Override\n    public List&lt;Bom&gt; findByChildItemCode(String childItemCode) {\n        return bomMapper.findByChildItemCode(childItemCode);\n    }\n\n    @Override\n    public List&lt;BomExplosion&gt; explode(String itemCode, BigDecimal quantity) {\n        return bomMapper.explode(itemCode, quantity);\n    }\n\n    @Override\n    public void deleteAll() {\n        bomMapper.deleteAll();\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter23/#cte-bom","title":"\u518d\u5e30 CTE \u306b\u3088\u308b BOM \u5c55\u958b","text":"<p>BOM \u306f\u518d\u5e30\u7684\u306a\u69cb\u9020\u3092\u6301\u3064\u305f\u3081\u3001PostgreSQL \u306e\u518d\u5e30 CTE\uff08Common Table Expression\uff09\u3092\u4f7f\u7528\u3057\u3066\u5168\u968e\u5c64\u3092\u5c55\u958b\u3057\u307e\u3059\u3002</p> Mapper \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9 <pre><code>// src/main/java/com/example/production/infrastructure/persistence/mapper/BomMapper.java\npackage com.example.production.infrastructure.persistence.mapper;\n\nimport com.example.production.domain.model.bom.Bom;\nimport com.example.production.domain.model.bom.BomExplosion;\nimport org.apache.ibatis.annotations.Mapper;\nimport org.apache.ibatis.annotations.Param;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.util.List;\n\n@Mapper\npublic interface BomMapper {\n    void insert(Bom bom);\n    List&lt;Bom&gt; findByParentItemCode(String parentItemCode);\n    List&lt;Bom&gt; findByParentItemCodeAndDate(@Param(\"parentItemCode\") String parentItemCode,\n                                           @Param(\"baseDate\") LocalDate baseDate);\n    List&lt;Bom&gt; findByChildItemCode(String childItemCode);\n    List&lt;BomExplosion&gt; explode(@Param(\"itemCode\") String itemCode,\n                               @Param(\"quantity\") BigDecimal quantity);\n    void deleteAll();\n}\n</code></pre> MyBatis XML Mapper\uff08\u518d\u5e30 CTE \u3092\u542b\u3080\uff09 <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.production.infrastructure.persistence.mapper.BomMapper\"&gt;\n\n    &lt;!-- \u65e5\u672c\u8a9e\u30ab\u30e9\u30e0\u540d\u3068\u82f1\u8a9e\u30d7\u30ed\u30d1\u30c6\u30a3\u540d\u306e\u30de\u30c3\u30d4\u30f3\u30b0 --&gt;\n    &lt;resultMap id=\"BomResultMap\" type=\"com.example.production.domain.model.bom.Bom\"&gt;\n        &lt;result property=\"parentItemCode\" column=\"\u89aa\u54c1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"childItemCode\" column=\"\u5b50\u54c1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"effectiveFrom\" column=\"\u9069\u7528\u958b\u59cb\u65e5\"/&gt;\n        &lt;result property=\"effectiveTo\" column=\"\u9069\u7528\u505c\u6b62\u65e5\"/&gt;\n        &lt;result property=\"baseQuantity\" column=\"\u57fa\u6e96\u6570\u91cf\"/&gt;\n        &lt;result property=\"requiredQuantity\" column=\"\u5fc5\u8981\u6570\u91cf\"/&gt;\n        &lt;result property=\"defectRate\" column=\"\u4e0d\u826f\u7387\"/&gt;\n        &lt;result property=\"sequence\" column=\"\u5de5\u9806\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;resultMap id=\"BomExplosionResultMap\" type=\"com.example.production.domain.model.bom.BomExplosion\"&gt;\n        &lt;result property=\"parentItemCode\" column=\"\u89aa\u54c1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"childItemCode\" column=\"\u5b50\u54c1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"effectiveFrom\" column=\"\u9069\u7528\u958b\u59cb\u65e5\"/&gt;\n        &lt;result property=\"effectiveTo\" column=\"\u9069\u7528\u505c\u6b62\u65e5\"/&gt;\n        &lt;result property=\"baseQuantity\" column=\"\u57fa\u6e96\u6570\u91cf\"/&gt;\n        &lt;result property=\"requiredQuantity\" column=\"\u5fc5\u8981\u6570\u91cf\"/&gt;\n        &lt;result property=\"defectRate\" column=\"\u4e0d\u826f\u7387\"/&gt;\n        &lt;result property=\"sequence\" column=\"\u5de5\u9806\"/&gt;\n        &lt;result property=\"level\" column=\"\u968e\u5c64\"/&gt;\n        &lt;result property=\"totalQuantity\" column=\"\u7d2f\u8a08\u6570\u91cf\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;insert id=\"insert\" parameterType=\"com.example.production.domain.model.bom.Bom\"&gt;\n        INSERT INTO \"\u90e8\u54c1\u69cb\u6210\u8868\" (\n            \"\u89aa\u54c1\u76ee\u30b3\u30fc\u30c9\",\n            \"\u5b50\u54c1\u76ee\u30b3\u30fc\u30c9\",\n            \"\u9069\u7528\u958b\u59cb\u65e5\",\n            \"\u9069\u7528\u505c\u6b62\u65e5\",\n            \"\u57fa\u6e96\u6570\u91cf\",\n            \"\u5fc5\u8981\u6570\u91cf\",\n            \"\u4e0d\u826f\u7387\",\n            \"\u5de5\u9806\",\n            \"\u4f5c\u6210\u65e5\u6642\",\n            \"\u66f4\u65b0\u65e5\u6642\"\n        ) VALUES (\n            #{parentItemCode},\n            #{childItemCode},\n            #{effectiveFrom},\n            #{effectiveTo},\n            #{baseQuantity},\n            #{requiredQuantity},\n            #{defectRate},\n            #{sequence},\n            CURRENT_TIMESTAMP,\n            CURRENT_TIMESTAMP\n        )\n    &lt;/insert&gt;\n\n    &lt;select id=\"findByParentItemCode\" resultMap=\"BomResultMap\"&gt;\n        SELECT * FROM \"\u90e8\u54c1\u69cb\u6210\u8868\"\n        WHERE \"\u89aa\u54c1\u76ee\u30b3\u30fc\u30c9\" = #{parentItemCode}\n          AND (\"\u9069\u7528\u505c\u6b62\u65e5\" IS NULL OR \"\u9069\u7528\u505c\u6b62\u65e5\" &gt; CURRENT_DATE)\n        ORDER BY \"\u5de5\u9806\", \"\u5b50\u54c1\u76ee\u30b3\u30fc\u30c9\"\n    &lt;/select&gt;\n\n    &lt;select id=\"findByParentItemCodeAndDate\" resultMap=\"BomResultMap\"&gt;\n        SELECT * FROM \"\u90e8\u54c1\u69cb\u6210\u8868\"\n        WHERE \"\u89aa\u54c1\u76ee\u30b3\u30fc\u30c9\" = #{parentItemCode}\n          AND \"\u9069\u7528\u958b\u59cb\u65e5\" &amp;lt;= #{baseDate}\n          AND (\"\u9069\u7528\u505c\u6b62\u65e5\" IS NULL OR \"\u9069\u7528\u505c\u6b62\u65e5\" &gt; #{baseDate})\n        ORDER BY \"\u5de5\u9806\", \"\u5b50\u54c1\u76ee\u30b3\u30fc\u30c9\"\n    &lt;/select&gt;\n\n    &lt;select id=\"findByChildItemCode\" resultMap=\"BomResultMap\"&gt;\n        SELECT * FROM \"\u90e8\u54c1\u69cb\u6210\u8868\"\n        WHERE \"\u5b50\u54c1\u76ee\u30b3\u30fc\u30c9\" = #{childItemCode}\n          AND (\"\u9069\u7528\u505c\u6b62\u65e5\" IS NULL OR \"\u9069\u7528\u505c\u6b62\u65e5\" &gt; CURRENT_DATE)\n        ORDER BY \"\u89aa\u54c1\u76ee\u30b3\u30fc\u30c9\"\n    &lt;/select&gt;\n\n    &lt;!-- \u518d\u5e30CTE\u306b\u3088\u308b\u5168\u968e\u5c64\u5c55\u958b --&gt;\n    &lt;select id=\"explode\" resultMap=\"BomExplosionResultMap\"&gt;\n        WITH RECURSIVE bom_explosion AS (\n            -- \u57fa\u5e95: \u76f4\u63a5\u306e\u5b50\u54c1\u76ee\n            SELECT\n                \"\u89aa\u54c1\u76ee\u30b3\u30fc\u30c9\",\n                \"\u5b50\u54c1\u76ee\u30b3\u30fc\u30c9\",\n                \"\u9069\u7528\u958b\u59cb\u65e5\",\n                \"\u9069\u7528\u505c\u6b62\u65e5\",\n                \"\u57fa\u6e96\u6570\u91cf\",\n                \"\u5fc5\u8981\u6570\u91cf\",\n                \"\u4e0d\u826f\u7387\",\n                \"\u5de5\u9806\",\n                1 as \"\u968e\u5c64\",\n                \"\u5fc5\u8981\u6570\u91cf\" as \"\u7d2f\u8a08\u6570\u91cf\"\n            FROM \"\u90e8\u54c1\u69cb\u6210\u8868\"\n            WHERE \"\u89aa\u54c1\u76ee\u30b3\u30fc\u30c9\" = #{itemCode}\n              AND (\"\u9069\u7528\u505c\u6b62\u65e5\" IS NULL OR \"\u9069\u7528\u505c\u6b62\u65e5\" &gt;= CURRENT_DATE)\n\n            UNION ALL\n\n            -- \u518d\u5e30: \u5b50\u54c1\u76ee\u306e\u5b50\u54c1\u76ee\n            SELECT\n                b.\"\u89aa\u54c1\u76ee\u30b3\u30fc\u30c9\",\n                b.\"\u5b50\u54c1\u76ee\u30b3\u30fc\u30c9\",\n                b.\"\u9069\u7528\u958b\u59cb\u65e5\",\n                b.\"\u9069\u7528\u505c\u6b62\u65e5\",\n                b.\"\u57fa\u6e96\u6570\u91cf\",\n                b.\"\u5fc5\u8981\u6570\u91cf\",\n                b.\"\u4e0d\u826f\u7387\",\n                b.\"\u5de5\u9806\",\n                be.\"\u968e\u5c64\" + 1,\n                be.\"\u7d2f\u8a08\u6570\u91cf\" * b.\"\u5fc5\u8981\u6570\u91cf\"\n            FROM \"\u90e8\u54c1\u69cb\u6210\u8868\" b\n            INNER JOIN bom_explosion be ON b.\"\u89aa\u54c1\u76ee\u30b3\u30fc\u30c9\" = be.\"\u5b50\u54c1\u76ee\u30b3\u30fc\u30c9\"\n            WHERE (b.\"\u9069\u7528\u505c\u6b62\u65e5\" IS NULL OR b.\"\u9069\u7528\u505c\u6b62\u65e5\" &gt;= CURRENT_DATE)\n              AND be.\"\u968e\u5c64\" &amp;lt; 10  -- \u7121\u9650\u30eb\u30fc\u30d7\u9632\u6b62\n        )\n        SELECT\n            \"\u89aa\u54c1\u76ee\u30b3\u30fc\u30c9\",\n            \"\u5b50\u54c1\u76ee\u30b3\u30fc\u30c9\",\n            \"\u9069\u7528\u958b\u59cb\u65e5\",\n            \"\u9069\u7528\u505c\u6b62\u65e5\",\n            \"\u57fa\u6e96\u6570\u91cf\",\n            \"\u5fc5\u8981\u6570\u91cf\",\n            \"\u4e0d\u826f\u7387\",\n            \"\u5de5\u9806\",\n            \"\u968e\u5c64\",\n            \"\u7d2f\u8a08\u6570\u91cf\" * #{quantity} as \"\u7d2f\u8a08\u6570\u91cf\"\n        FROM bom_explosion\n        ORDER BY \"\u968e\u5c64\", \"\u89aa\u54c1\u76ee\u30b3\u30fc\u30c9\", \"\u5de5\u9806\", \"\u5b50\u54c1\u76ee\u30b3\u30fc\u30c9\"\n    &lt;/select&gt;\n\n    &lt;delete id=\"deleteAll\"&gt;\n        TRUNCATE TABLE \"\u90e8\u54c1\u69cb\u6210\u8868\" CASCADE\n    &lt;/delete&gt;\n&lt;/mapper&gt;\n</code></pre>"},{"location":"article/part4/chapter23/#233","title":"23.3 \u88dc\u52a9\u30de\u30b9\u30bf\u306e\u8a2d\u8a08","text":"<p>\u54c1\u76ee\u30de\u30b9\u30bf\u3068 BOM \u3092\u88dc\u5b8c\u3059\u308b\u88dc\u52a9\u30de\u30b9\u30bf\u3092\u8a2d\u8a08\u3057\u307e\u3059\u3002</p>"},{"location":"article/part4/chapter23/#_12","title":"\u30ab\u30ec\u30f3\u30c0\u30de\u30b9\u30bf","text":"<p>\u7a3c\u50cd\u65e5\u30fb\u4f11\u65e5\u30fb\u534a\u65e5\u7a3c\u50cd\u3092\u7ba1\u7406\u3059\u308b\u30de\u30b9\u30bf\u3067\u3059\u3002</p> <p></p> DDL\uff08\u30ab\u30ec\u30f3\u30c0\u30de\u30b9\u30bf\uff09 <pre><code>-- src/main/resources/db/migration/V004__create_calendar_master.sql\n\n-- \u65e5\u4ed8\u533a\u5206 ENUM\nCREATE TYPE \u65e5\u4ed8\u533a\u5206 AS ENUM ('\u7a3c\u50cd\u65e5', '\u4f11\u65e5', '\u534a\u65e5\u7a3c\u50cd');\n\n-- \u30ab\u30ec\u30f3\u30c0\u30de\u30b9\u30bf\nCREATE TABLE \"\u30ab\u30ec\u30f3\u30c0\u30de\u30b9\u30bf\" (\n    \"\u30ab\u30ec\u30f3\u30c0\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u65e5\u4ed8\" DATE NOT NULL,\n    \"\u65e5\u4ed8\u533a\u5206\" \u65e5\u4ed8\u533a\u5206 NOT NULL DEFAULT '\u7a3c\u50cd\u65e5',\n    \"\u7a3c\u50cd\u6642\u9593\" DECIMAL(5, 2),\n    \"\u5099\u8003\" VARCHAR(200),\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    PRIMARY KEY (\"\u30ab\u30ec\u30f3\u30c0\u30b3\u30fc\u30c9\", \"\u65e5\u4ed8\")\n);\n</code></pre> \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\uff08WorkCalendar.java, DateType.java\uff09 <pre><code>// src/main/java/com/example/production/domain/model/calendar/WorkCalendar.java\npackage com.example.production.domain.model.calendar;\n\nimport lombok.*;\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class WorkCalendar {\n    private String calendarCode;\n    private LocalDate date;\n    private DateType dateType;\n    private BigDecimal workingHours;\n    private String note;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n}\n</code></pre> <pre><code>// src/main/java/com/example/production/domain/model/calendar/DateType.java\npackage com.example.production.domain.model.calendar;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum DateType {\n    WORKING(\"\u7a3c\u50cd\u65e5\"),\n    HOLIDAY(\"\u4f11\u65e5\"),\n    HALF_DAY(\"\u534a\u65e5\u7a3c\u50cd\");\n\n    private final String displayName;\n\n    public static DateType fromDisplayName(String displayName) {\n        for (DateType type : values()) {\n            if (type.displayName.equals(displayName)) {\n                return type;\n            }\n        }\n        throw new IllegalArgumentException(\"\u4e0d\u6b63\u306a\u65e5\u4ed8\u533a\u5206: \" + displayName);\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter23/#_13","title":"\u5834\u6240\u30de\u30b9\u30bf","text":"<p>\u5009\u5eab\u30fb\u88fd\u9020\u5834\u6240\u30fb\u691c\u67fb\u5834\u6240\u306a\u3069\u3092\u7ba1\u7406\u3059\u308b\u30de\u30b9\u30bf\u3067\u3059\u3002\u968e\u5c64\u69cb\u9020\u3092\u6301\u3064\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p></p> DDL\uff08\u5834\u6240\u30de\u30b9\u30bf\uff09 <pre><code>-- src/main/resources/db/migration/V005__create_location_master.sql\n\n-- \u5834\u6240\u533a\u5206 ENUM\nCREATE TYPE \u5834\u6240\u533a\u5206 AS ENUM ('\u5009\u5eab', '\u88fd\u9020', '\u691c\u67fb', '\u51fa\u8377', '\u5916\u6ce8');\n\n-- \u5834\u6240\u30de\u30b9\u30bf\nCREATE TABLE \"\u5834\u6240\u30de\u30b9\u30bf\" (\n    \"\u5834\u6240\u30b3\u30fc\u30c9\" VARCHAR(20) PRIMARY KEY,\n    \"\u5834\u6240\u540d\" VARCHAR(100) NOT NULL,\n    \"\u5834\u6240\u533a\u5206\" \u5834\u6240\u533a\u5206 NOT NULL,\n    \"\u89aa\u5834\u6240\u30b3\u30fc\u30c9\" VARCHAR(20) REFERENCES \"\u5834\u6240\u30de\u30b9\u30bf\"(\"\u5834\u6240\u30b3\u30fc\u30c9\"),\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE INDEX idx_\u5834\u6240\u30de\u30b9\u30bf_\u5834\u6240\u533a\u5206 ON \"\u5834\u6240\u30de\u30b9\u30bf\"(\"\u5834\u6240\u533a\u5206\");\n</code></pre> \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\uff08Location.java, LocationType.java\uff09 <pre><code>// src/main/java/com/example/production/domain/model/location/Location.java\npackage com.example.production.domain.model.location;\n\nimport lombok.*;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Location {\n    private String locationCode;\n    private String locationName;\n    private LocationType locationType;\n    private String parentLocationCode;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n}\n</code></pre> <pre><code>// src/main/java/com/example/production/domain/model/location/LocationType.java\npackage com.example.production.domain.model.location;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum LocationType {\n    WAREHOUSE(\"\u5009\u5eab\"),\n    MANUFACTURING(\"\u88fd\u9020\"),\n    INSPECTION(\"\u691c\u67fb\"),\n    SHIPPING(\"\u51fa\u8377\"),\n    SUBCONTRACT(\"\u5916\u6ce8\");\n\n    private final String displayName;\n\n    public static LocationType fromDisplayName(String displayName) {\n        for (LocationType type : values()) {\n            if (type.displayName.equals(displayName)) {\n                return type;\n            }\n        }\n        throw new IllegalArgumentException(\"\u4e0d\u6b63\u306a\u5834\u6240\u533a\u5206: \" + displayName);\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter23/#_14","title":"\u53d6\u5f15\u5148\u30de\u30b9\u30bf","text":"<p>\u4ed5\u5165\u5148\u30fb\u5916\u6ce8\u5148\u30fb\u5f97\u610f\u5148\u3092\u7ba1\u7406\u3059\u308b\u30de\u30b9\u30bf\u3067\u3059\u3002\u4e16\u4ee3\u7ba1\u7406\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3002</p> <p></p> DDL\uff08\u53d6\u5f15\u5148\u30de\u30b9\u30bf\uff09 <pre><code>-- src/main/resources/db/migration/V006__create_supplier_master.sql\n\n-- \u53d6\u5f15\u5148\u533a\u5206 ENUM\nCREATE TYPE \u53d6\u5f15\u5148\u533a\u5206 AS ENUM ('\u4ed5\u5165\u5148', '\u5916\u6ce8\u5148', '\u5f97\u610f\u5148', '\u4ed5\u5165\u5148\u517c\u5916\u6ce8\u5148');\n\n-- \u53d6\u5f15\u5148\u30de\u30b9\u30bf\nCREATE TABLE \"\u53d6\u5f15\u5148\u30de\u30b9\u30bf\" (\n    \"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u9069\u7528\u958b\u59cb\u65e5\" DATE NOT NULL,\n    \"\u9069\u7528\u505c\u6b62\u65e5\" DATE,\n    \"\u53d6\u5f15\u5148\u540d\" VARCHAR(100) NOT NULL,\n    \"\u53d6\u5f15\u5148\u30ab\u30ca\" VARCHAR(100),\n    \"\u53d6\u5f15\u5148\u533a\u5206\" \u53d6\u5f15\u5148\u533a\u5206 NOT NULL,\n    \"\u90f5\u4fbf\u756a\u53f7\" VARCHAR(10),\n    \"\u4f4f\u6240\" VARCHAR(200),\n    \"\u96fb\u8a71\u756a\u53f7\" VARCHAR(20),\n    \"FAX\u756a\u53f7\" VARCHAR(20),\n    \"\u62c5\u5f53\u8005\u540d\" VARCHAR(50),\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    PRIMARY KEY (\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\", \"\u9069\u7528\u958b\u59cb\u65e5\")\n);\n\nCREATE INDEX idx_\u53d6\u5f15\u5148\u30de\u30b9\u30bf_\u53d6\u5f15\u5148\u533a\u5206 ON \"\u53d6\u5f15\u5148\u30de\u30b9\u30bf\"(\"\u53d6\u5f15\u5148\u533a\u5206\");\n</code></pre> \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\uff08Supplier.java, SupplierType.java\uff09 <pre><code>// src/main/java/com/example/production/domain/model/supplier/Supplier.java\npackage com.example.production.domain.model.supplier;\n\nimport lombok.*;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Supplier {\n    private String supplierCode;\n    private LocalDate effectiveFrom;\n    private LocalDate effectiveTo;\n    private String supplierName;\n    private String supplierNameKana;\n    private SupplierType supplierType;\n    private String postalCode;\n    private String address;\n    private String phoneNumber;\n    private String faxNumber;\n    private String contactPerson;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n}\n</code></pre> <pre><code>// src/main/java/com/example/production/domain/model/supplier/SupplierType.java\npackage com.example.production.domain.model.supplier;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum SupplierType {\n    VENDOR(\"\u4ed5\u5165\u5148\"),\n    SUBCONTRACTOR(\"\u5916\u6ce8\u5148\"),\n    CUSTOMER(\"\u5f97\u610f\u5148\"),\n    VENDOR_AND_SUBCONTRACTOR(\"\u4ed5\u5165\u5148\u517c\u5916\u6ce8\u5148\");\n\n    private final String displayName;\n\n    public static SupplierType fromDisplayName(String displayName) {\n        for (SupplierType type : values()) {\n            if (type.displayName.equals(displayName)) {\n                return type;\n            }\n        }\n        throw new IllegalArgumentException(\"\u4e0d\u6b63\u306a\u53d6\u5f15\u5148\u533a\u5206: \" + displayName);\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter23/#_15","title":"\u305d\u306e\u4ed6\u306e\u88dc\u52a9\u30de\u30b9\u30bf","text":"\u30de\u30b9\u30bf\u540d \u8aac\u660e \u4e3b\u30ad\u30fc \u5009\u5eab\u30de\u30b9\u30bf \u5009\u5eab\u306e\u8a73\u7d30\u60c5\u5831 \u5009\u5eab\u30b3\u30fc\u30c9 \u90e8\u9580\u30de\u30b9\u30bf \u90e8\u9580\u30fb\u8ab2\u306e\u968e\u5c64\u69cb\u9020 \u90e8\u9580\u30b3\u30fc\u30c9 \u62c5\u5f53\u8005\u30de\u30b9\u30bf \u62c5\u5f53\u8005\u3068\u90e8\u9580\u306e\u7d10\u4ed8\u3051 \u62c5\u5f53\u8005\u30b3\u30fc\u30c9 \u00d7 \u9069\u7528\u958b\u59cb\u65e5 \u8cc7\u6e90\u30de\u30b9\u30bf \u8a2d\u5099\u30fb\u4f5c\u696d\u8005\u306a\u3069\u306e\u8cc7\u6e90 \u8cc7\u6e90\u30b3\u30fc\u30c9 \u5de5\u7a0b\u30de\u30b9\u30bf \u5de5\u7a0b\u306e\u5b9a\u7fa9 \u5de5\u7a0b\u30b3\u30fc\u30c9 \u5de5\u7a0b\u8868 \u54c1\u76ee\u3054\u3068\u306e\u88fd\u9020\u5de5\u7a0b \u54c1\u76ee\u30b3\u30fc\u30c9 \u00d7 \u5de5\u9806 \u5358\u4fa1\u30de\u30b9\u30bf \u54c1\u76ee \u00d7 \u53d6\u5f15\u5148\u306e\u5358\u4fa1 \u54c1\u76ee\u30b3\u30fc\u30c9 \u00d7 \u53d6\u5f15\u5148\u30b3\u30fc\u30c9 \u00d7 \u9069\u7528\u958b\u59cb\u65e5"},{"location":"article/part4/chapter23/#_16","title":"\u307e\u3068\u3081","text":""},{"location":"article/part4/chapter23/#_17","title":"\u4f5c\u6210\u3057\u305f\u30c6\u30fc\u30d6\u30eb","text":"\u30c6\u30fc\u30d6\u30eb\u540d\uff08\u65e5\u672c\u8a9e\uff09 \u8aac\u660e <code>\u54c1\u76ee\u30de\u30b9\u30bf</code> \u88fd\u54c1\u30fb\u90e8\u54c1\u30fb\u6750\u6599\u306a\u3069\u306e\u54c1\u76ee\u60c5\u5831 <code>\u5358\u4f4d\u30de\u30b9\u30bf</code> \u54c1\u76ee\u306e\u5358\u4f4d\uff08\u500b\u3001kg\u3001m \u306a\u3069\uff09 <code>\u90e8\u54c1\u69cb\u6210\u8868</code> BOM\uff08\u89aa\u5b50\u95a2\u4fc2\uff09 <code>\u30ab\u30ec\u30f3\u30c0\u30de\u30b9\u30bf</code> \u7a3c\u50cd\u65e5\u30fb\u4f11\u65e5\u306e\u7ba1\u7406 <code>\u5834\u6240\u30de\u30b9\u30bf</code> \u5009\u5eab\u30fb\u5de5\u7a0b\u306a\u3069\u306e\u5834\u6240\u60c5\u5831 <code>\u53d6\u5f15\u5148\u30de\u30b9\u30bf</code> \u4ed5\u5165\u5148\u30fb\u5916\u6ce8\u5148\u30fb\u5f97\u610f\u5148"},{"location":"article/part4/chapter23/#_18","title":"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u30dd\u30a4\u30f3\u30c8","text":"\u30ec\u30a4\u30e4\u30fc \u30d1\u30c3\u30b1\u30fc\u30b8 \u8cac\u52d9 Domain <code>domain.model.*</code> \u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3001\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 Application <code>application.port.out</code> Repository \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff08Output Port\uff09 Infrastructure <code>infrastructure.persistence.*</code> DB \u30a2\u30af\u30bb\u30b9\u5b9f\u88c5"},{"location":"article/part4/chapter23/#_19","title":"\u547d\u540d\u898f\u5247\u306e\u307e\u3068\u3081","text":"\u8981\u7d20 \u8a00\u8a9e \u4f8b \u30c6\u30fc\u30d6\u30eb\u540d \u65e5\u672c\u8a9e <code>\"\u54c1\u76ee\u30de\u30b9\u30bf\"</code>, <code>\"\u90e8\u54c1\u69cb\u6210\u8868\"</code> \u30ab\u30e9\u30e0\u540d \u65e5\u672c\u8a9e <code>\"\u54c1\u76ee\u30b3\u30fc\u30c9\"</code>, <code>\"\u54c1\u540d\"</code> ENUM \u578b \u65e5\u672c\u8a9e <code>\u54c1\u76ee\u533a\u5206</code>, <code>\u65e5\u4ed8\u533a\u5206</code> ENUM \u5024 \u65e5\u672c\u8a9e <code>'\u88fd\u54c1'</code>, <code>'\u7a3c\u50cd\u65e5'</code> Java \u30af\u30e9\u30b9\u540d \u82f1\u8a9e <code>Item</code>, <code>Bom</code>, <code>WorkCalendar</code> Java \u30d5\u30a3\u30fc\u30eb\u30c9\u540d \u82f1\u8a9e <code>itemCode</code>, <code>itemName</code> Java \u30e1\u30bd\u30c3\u30c9\u540d \u82f1\u8a9e <code>findByItemCode()</code>, <code>save()</code> MyBatis resultMap \u65e5\u672c\u8a9e \u2194 \u82f1\u8a9e <code>column=\"\u54c1\u76ee\u30b3\u30fc\u30c9\" property=\"itemCode\"</code>"},{"location":"article/part4/chapter23/#er23","title":"ER\u56f3\uff08\u7b2c23\u7ae0\u5b8c\u4e86\u6642\u70b9\uff09","text":""},{"location":"article/part4/chapter23/#_20","title":"\u8a2d\u8a08\u306e\u30dd\u30a4\u30f3\u30c8","text":"<ol> <li>\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3: \u30c9\u30e1\u30a4\u30f3\u5c64\u304c\u30a4\u30f3\u30d5\u30e9\u306b\u4f9d\u5b58\u3057\u306a\u3044\u8a2d\u8a08</li> <li>\u4e16\u4ee3\u7ba1\u7406: \u54c1\u76ee\u30de\u30b9\u30bf\u3084\u53d6\u5f15\u5148\u30de\u30b9\u30bf\u306f <code>\u9069\u7528\u958b\u59cb\u65e5</code> \u306b\u3088\u308b\u4e16\u4ee3\u7ba1\u7406\u3092\u63a1\u7528</li> <li>\u65e5\u672c\u8a9e DB / \u82f1\u8a9e Java: \u30c6\u30fc\u30d6\u30eb\u30fb\u30ab\u30e9\u30e0\u306f\u65e5\u672c\u8a9e\u3001Java \u30b3\u30fc\u30c9\u306f\u82f1\u8a9e\u3067\u7d71\u4e00</li> <li>MyBatis resultMap: \u65e5\u672c\u8a9e\u30ab\u30e9\u30e0\u3068\u82f1\u8a9e\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u660e\u793a\u7684\u306b\u5b9a\u7fa9</li> <li>PostgreSQL ENUM: \u533a\u5206\u5024\u306f\u65e5\u672c\u8a9e ENUM \u578b\u3067\u578b\u5b89\u5168\u6027\u3092\u78ba\u4fdd</li> <li>TypeHandler: Java Enum \u3068\u65e5\u672c\u8a9e ENUM \u5024\u306e\u5909\u63db\u3092\u5b9f\u88c5</li> <li>Repository \u30d1\u30bf\u30fc\u30f3: \u30c6\u30b9\u30c8\u3067\u306f Repository \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u4f7f\u7528</li> <li>\u518d\u5e30 CTE: BOM \u5c55\u958b\u306b\u306f\u518d\u5e30 CTE \u3092\u4f7f\u7528\u3057\u3066\u5168\u968e\u5c64\u3092\u52b9\u7387\u7684\u306b\u53d6\u5f97</li> </ol> <p>\u2190 \u7b2c22\u7ae0\uff1a\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u5168\u4f53\u50cf | \u7b2c24\u7ae0\uff1a\u751f\u7523\u8a08\u753b\u306e\u8a2d\u8a08 \u2192</p>"},{"location":"article/part4/chapter24/","title":"\u7b2c24\u7ae0\uff1a\u751f\u7523\u8a08\u753b\u306e\u8a2d\u8a08","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u6838\u5fc3\u90e8\u5206\u3067\u3042\u308b\u300c\u751f\u7523\u8a08\u753b\u300d\u3092\u8a2d\u8a08\u3057\u307e\u3059\u3002\u751f\u7523\u8a08\u753b\u306f\u3001\u88fd\u9020\u696d\u306b\u304a\u3051\u308b\u610f\u601d\u6c7a\u5b9a\u306e\u8d77\u70b9\u3068\u306a\u308b\u91cd\u8981\u306a\u6a5f\u80fd\u3067\u3059\u3002</p>"},{"location":"article/part4/chapter24/#241","title":"24.1 \u751f\u7523\u8a08\u753b\u306e\u7279\u5fb4","text":"<p>\u751f\u7523\u8a08\u753b\u306f\u3001\u300c\u3044\u3064\u300d\u300c\u4f55\u3092\u300d\u300c\u3069\u308c\u3060\u3051\u300d\u751f\u7523\u3059\u308b\u304b\u3092\u6c7a\u5b9a\u3059\u308b\u8a08\u753b\u7cfb\u306e\u4e2d\u6838\u6a5f\u80fd\u3067\u3059\u3002</p>"},{"location":"article/part4/chapter24/#_1","title":"\u8a08\u753b\u7cfb\u3068\u5b9f\u7e3e\u7cfb\u306e\u5206\u96e2","text":"<p>\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u30c7\u30fc\u30bf\u306f\u3001\u5927\u304d\u304f\u300c\u8a08\u753b\u7cfb\u300d\u3068\u300c\u5b9f\u7e3e\u7cfb\u300d\u306b\u5206\u985e\u3055\u308c\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part4/chapter24/#_2","title":"\u8a08\u753b\u7cfb\u30c7\u30fc\u30bf\u306e\u7279\u5fb4","text":"\u7279\u6027 \u8aac\u660e \u518d\u8a08\u7b97\u53ef\u80fd \u6761\u4ef6\u304c\u5909\u308f\u308c\u3070\u3044\u3064\u3067\u3082\u518d\u8a08\u7b97\u3067\u304d\u308b \u4eee\u306e\u6570\u5024 \u78ba\u5b9a\u524d\u306f\u4f55\u5ea6\u3067\u3082\u5909\u66f4\u53ef\u80fd \u5c06\u6765\u6307\u5411 \u672a\u6765\u306e\u4e88\u5b9a\u3092\u8868\u3059 \u67d4\u8edf\u6027\u91cd\u8996 \u30d3\u30b8\u30cd\u30b9\u72b6\u6cc1\u306b\u5fdc\u3058\u3066\u8abf\u6574\u3055\u308c\u308b"},{"location":"article/part4/chapter24/#_3","title":"\u5b9f\u7e3e\u7cfb\u30c7\u30fc\u30bf\u306e\u7279\u5fb4","text":"\u7279\u6027 \u8aac\u660e \u4e0d\u53ef\u9006 \u4e00\u5ea6\u8a18\u9332\u3057\u305f\u3089\u524a\u9664\u30fb\u5909\u66f4\u3057\u306a\u3044 \u4e8b\u5b9f\u306e\u8a18\u9332 \u5b9f\u969b\u306b\u8d77\u304d\u305f\u3053\u3068\u3092\u8a18\u9332 \u904e\u53bb\u6307\u5411 \u904e\u53bb\u306e\u4e8b\u5b9f\u3092\u8868\u3059 \u8a3c\u8de1\u6027\u91cd\u8996 \u76e3\u67fb\u30fb\u30c8\u30ec\u30fc\u30b5\u30d3\u30ea\u30c6\u30a3\u306b\u4f7f\u7528"},{"location":"article/part4/chapter24/#_4","title":"\u8a08\u753b\u306e\u968e\u5c64\u69cb\u9020","text":"<p>\u751f\u7523\u8a08\u753b\u306f\u3001\u9577\u671f\u304b\u3089\u77ed\u671f\u3078\u3068\u6bb5\u968e\u7684\u306b\u8a73\u7d30\u5316\u3055\u308c\u3066\u3044\u304d\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part4/chapter24/#_5","title":"\u5404\u8a08\u753b\u30ec\u30d9\u30eb\u306e\u6982\u8981","text":"\u30ec\u30d9\u30eb \u8a08\u753b\u540d \u5bfe\u8c61\u671f\u9593 \u7ba1\u7406\u5358\u4f4d \u4e3b\u306a\u8cac\u4efb\u8005 1 \u30d3\u30b8\u30cd\u30b9\u30d7\u30e9\u30f3 3\u301c5\u5e74 \u5e74 \u7d4c\u55b6\u5c64 2 \u5e74\u9593\u8ca9\u58f2\u8a08\u753b 1\u5e74 \u6708 \u55b6\u696d\u90e8\u9580 3 \u6708\u6b21\u751f\u7523\u8a08\u753b 1\u301c3\u30f6\u6708 \u6708 \u751f\u7523\u7ba1\u7406\u90e8\u9580 4 \u57fa\u6e96\u751f\u7523\u8a08\u753b\uff08MPS\uff09 1\u9031\u301c1\u30f6\u6708 \u65e5 \u751f\u7523\u7ba1\u7406\u90e8\u9580 5 \u6240\u8981\u91cf\u5c55\u958b\uff08MRP\uff09 1\u65e5\u301c1\u9031\u9593 \u65e5/\u6642\u9593 \u751f\u7523\u7ba1\u7406\u90e8\u9580"},{"location":"article/part4/chapter24/#mps","title":"\u57fa\u6e96\u751f\u7523\u8a08\u753b\uff08MPS\uff09\u306e\u7406\u89e3","text":"<p>\u57fa\u6e96\u751f\u7523\u8a08\u753b\uff08Master Production Schedule\uff09\u306f\u3001\u6700\u7d42\u88fd\u54c1\u306e\u751f\u7523\u8a08\u753b\u3067\u3059\u3002</p> <p></p>"},{"location":"article/part4/chapter24/#_6","title":"\u8a08\u753b\u30c7\u30fc\u30bf\u306e\u30b9\u30ad\u30fc\u30de\u8a2d\u8a08","text":"DDL\uff08\u751f\u7523\u8a08\u753b\u95a2\u9023\u30c6\u30fc\u30d6\u30eb\uff09 <pre><code>-- V008__create_planning_tables.sql\n\n-- \u8a08\u753b\u30b9\u30c6\u30fc\u30bf\u30b9\nCREATE TYPE \u8a08\u753b\u30b9\u30c6\u30fc\u30bf\u30b9 AS ENUM ('\u8349\u6848', '\u78ba\u5b9a', '\u5c55\u958b\u6e08', '\u53d6\u6d88');\n\n-- \u30aa\u30fc\u30c0\u7a2e\u5225\nCREATE TYPE \u30aa\u30fc\u30c0\u7a2e\u5225 AS ENUM ('\u8cfc\u8cb7', '\u88fd\u9020');\n\n-- \u5f15\u5f53\u533a\u5206\nCREATE TYPE \u5f15\u5f53\u533a\u5206 AS ENUM ('\u5728\u5eab', '\u767a\u6ce8\u6b8b', '\u88fd\u9020\u6b8b');\n\n-- \u57fa\u6e96\u751f\u7523\u8a08\u753b\nCREATE TABLE \"\u57fa\u6e96\u751f\u7523\u8a08\u753b\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"MPS\u756a\u53f7\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u8a08\u753b\u65e5\" DATE NOT NULL,\n    \"\u54c1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u8a08\u753b\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u7d0d\u671f\" DATE NOT NULL,\n    \"\u30b9\u30c6\u30fc\u30bf\u30b9\" \u8a08\u753b\u30b9\u30c6\u30fc\u30bf\u30b9 DEFAULT '\u8349\u6848' NOT NULL,\n    \"\u5834\u6240\u30b3\u30fc\u30c9\" VARCHAR(20),\n    \"\u5099\u8003\" TEXT,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u8005\" VARCHAR(50),\n    CONSTRAINT \"fk_\u57fa\u6e96\u751f\u7523\u8a08\u753b_\u54c1\u76ee\"\n        FOREIGN KEY (\"\u54c1\u76ee\u30b3\u30fc\u30c9\") REFERENCES \"\u54c1\u76ee\u30de\u30b9\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n);\n\n-- \u30aa\u30fc\u30c0\u60c5\u5831\uff08\u8cfc\u8cb7\u30fb\u88fd\u9020\u5171\u901a\uff09\nCREATE TABLE \"\u30aa\u30fc\u30c0\u60c5\u5831\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u30aa\u30fc\u30c0NO\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u30aa\u30fc\u30c0\u7a2e\u5225\" \u30aa\u30fc\u30c0\u7a2e\u5225 NOT NULL,\n    \"\u54c1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u7740\u624b\u4e88\u5b9a\u65e5\" DATE NOT NULL,\n    \"\u7d0d\u671f\" DATE NOT NULL,\n    \"\u6709\u52b9\u671f\u9650\" DATE,\n    \"\u8a08\u753b\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u5834\u6240\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u30b9\u30c6\u30fc\u30bf\u30b9\" \u8a08\u753b\u30b9\u30c6\u30fc\u30bf\u30b9 DEFAULT '\u8349\u6848' NOT NULL,\n    \"MPS_ID\" INTEGER,\n    \"\u89aa\u30aa\u30fc\u30c0ID\" INTEGER,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u8005\" VARCHAR(50),\n    CONSTRAINT \"fk_\u30aa\u30fc\u30c0\u60c5\u5831_\u54c1\u76ee\"\n        FOREIGN KEY (\"\u54c1\u76ee\u30b3\u30fc\u30c9\") REFERENCES \"\u54c1\u76ee\u30de\u30b9\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"fk_\u30aa\u30fc\u30c0\u60c5\u5831_MPS\"\n        FOREIGN KEY (\"MPS_ID\") REFERENCES \"\u57fa\u6e96\u751f\u7523\u8a08\u753b\"(\"ID\"),\n    CONSTRAINT \"fk_\u30aa\u30fc\u30c0\u60c5\u5831_\u89aa\u30aa\u30fc\u30c0\"\n        FOREIGN KEY (\"\u89aa\u30aa\u30fc\u30c0ID\") REFERENCES \"\u30aa\u30fc\u30c0\u60c5\u5831\"(\"ID\")\n);\n\n-- \u6240\u8981\u60c5\u5831\nCREATE TABLE \"\u6240\u8981\u60c5\u5831\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u6240\u8981NO\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u30aa\u30fc\u30c0ID\" INTEGER NOT NULL,\n    \"\u54c1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u7d0d\u671f\" DATE NOT NULL,\n    \"\u5fc5\u8981\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u5f15\u5f53\u6e08\u6570\u91cf\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u4e0d\u8db3\u6570\u91cf\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u5834\u6240\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"fk_\u6240\u8981\u60c5\u5831_\u30aa\u30fc\u30c0\"\n        FOREIGN KEY (\"\u30aa\u30fc\u30c0ID\") REFERENCES \"\u30aa\u30fc\u30c0\u60c5\u5831\"(\"ID\"),\n    CONSTRAINT \"fk_\u6240\u8981\u60c5\u5831_\u54c1\u76ee\"\n        FOREIGN KEY (\"\u54c1\u76ee\u30b3\u30fc\u30c9\") REFERENCES \"\u54c1\u76ee\u30de\u30b9\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n);\n\n-- \u5f15\u5f53\u60c5\u5831\nCREATE TABLE \"\u5f15\u5f53\u60c5\u5831\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u6240\u8981ID\" INTEGER NOT NULL,\n    \"\u5f15\u5f53\u533a\u5206\" \u5f15\u5f53\u533a\u5206 NOT NULL,\n    \"\u30aa\u30fc\u30c0ID\" INTEGER,\n    \"\u5f15\u5f53\u65e5\" DATE NOT NULL,\n    \"\u5f15\u5f53\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u5834\u6240\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"fk_\u5f15\u5f53\u60c5\u5831_\u6240\u8981\"\n        FOREIGN KEY (\"\u6240\u8981ID\") REFERENCES \"\u6240\u8981\u60c5\u5831\"(\"ID\"),\n    CONSTRAINT \"fk_\u5f15\u5f53\u60c5\u5831_\u30aa\u30fc\u30c0\"\n        FOREIGN KEY (\"\u30aa\u30fc\u30c0ID\") REFERENCES \"\u30aa\u30fc\u30c0\u60c5\u5831\"(\"ID\")\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"idx_\u57fa\u6e96\u751f\u7523\u8a08\u753b_\u54c1\u76ee\u30b3\u30fc\u30c9\" ON \"\u57fa\u6e96\u751f\u7523\u8a08\u753b\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u57fa\u6e96\u751f\u7523\u8a08\u753b_\u7d0d\u671f\" ON \"\u57fa\u6e96\u751f\u7523\u8a08\u753b\"(\"\u7d0d\u671f\");\nCREATE INDEX \"idx_\u30aa\u30fc\u30c0\u60c5\u5831_\u54c1\u76ee\u30b3\u30fc\u30c9\" ON \"\u30aa\u30fc\u30c0\u60c5\u5831\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u30aa\u30fc\u30c0\u60c5\u5831_\u7d0d\u671f\" ON \"\u30aa\u30fc\u30c0\u60c5\u5831\"(\"\u7d0d\u671f\");\nCREATE INDEX \"idx_\u30aa\u30fc\u30c0\u60c5\u5831_MPS_ID\" ON \"\u30aa\u30fc\u30c0\u60c5\u5831\"(\"MPS_ID\");\nCREATE INDEX \"idx_\u6240\u8981\u60c5\u5831_\u30aa\u30fc\u30c0ID\" ON \"\u6240\u8981\u60c5\u5831\"(\"\u30aa\u30fc\u30c0ID\");\nCREATE INDEX \"idx_\u6240\u8981\u60c5\u5831_\u54c1\u76ee\u30b3\u30fc\u30c9\" ON \"\u6240\u8981\u60c5\u5831\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u5f15\u5f53\u60c5\u5831_\u6240\u8981ID\" ON \"\u5f15\u5f53\u60c5\u5831\"(\"\u6240\u8981ID\");\n</code></pre>"},{"location":"article/part4/chapter24/#_7","title":"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u69cb\u9020","text":"<p>\u751f\u7523\u8a08\u753b\u3067\u3082\u3001\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u30dd\u30fc\u30c8\uff06\u30a2\u30c0\u30d7\u30bf\u30fc\uff09\u3092\u63a1\u7528\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part4/chapter24/#_8","title":"\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb","text":"\u8a08\u753b\u30b9\u30c6\u30fc\u30bf\u30b9 Enum\uff08PlanStatus.java\uff09 <pre><code>// src/main/java/com/example/production/domain/model/plan/PlanStatus.java\npackage com.example.production.domain.model.plan;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum PlanStatus {\n    DRAFT(\"\u8349\u6848\"),\n    CONFIRMED(\"\u78ba\u5b9a\"),\n    EXPANDED(\"\u5c55\u958b\u6e08\"),\n    CANCELLED(\"\u53d6\u6d88\");\n\n    private final String displayName;\n\n    public static PlanStatus fromDisplayName(String displayName) {\n        for (PlanStatus status : values()) {\n            if (status.displayName.equals(displayName)) {\n                return status;\n            }\n        }\n        throw new IllegalArgumentException(\"Unknown plan status: \" + displayName);\n    }\n}\n</code></pre> \u30aa\u30fc\u30c0\u7a2e\u5225 Enum\uff08OrderType.java\uff09 <pre><code>// src/main/java/com/example/production/domain/model/plan/OrderType.java\npackage com.example.production.domain.model.plan;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum OrderType {\n    PURCHASE(\"\u8cfc\u8cb7\"),\n    MANUFACTURING(\"\u88fd\u9020\");\n\n    private final String displayName;\n\n    public static OrderType fromDisplayName(String displayName) {\n        for (OrderType type : values()) {\n            if (type.displayName.equals(displayName)) {\n                return type;\n            }\n        }\n        throw new IllegalArgumentException(\"Unknown order type: \" + displayName);\n    }\n}\n</code></pre> \u5f15\u5f53\u533a\u5206 Enum\uff08AllocationType.java\uff09 <pre><code>// src/main/java/com/example/production/domain/model/plan/AllocationType.java\npackage com.example.production.domain.model.plan;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum AllocationType {\n    INVENTORY(\"\u5728\u5eab\"),\n    PURCHASE_ORDER(\"\u767a\u6ce8\u6b8b\"),\n    MANUFACTURING_ORDER(\"\u88fd\u9020\u6b8b\");\n\n    private final String displayName;\n\n    public static AllocationType fromDisplayName(String displayName) {\n        for (AllocationType type : values()) {\n            if (type.displayName.equals(displayName)) {\n                return type;\n            }\n        }\n        throw new IllegalArgumentException(\"Unknown allocation type: \" + displayName);\n    }\n}\n</code></pre> \u57fa\u6e96\u751f\u7523\u8a08\u753b\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\uff08MasterProductionSchedule.java\uff09 <pre><code>// src/main/java/com/example/production/domain/model/plan/MasterProductionSchedule.java\npackage com.example.production.domain.model.plan;\n\nimport com.example.production.domain.model.item.Item;\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\npublic class MasterProductionSchedule {\n    private Integer id;\n    private String mpsNumber;\n    private LocalDate planDate;\n    private String itemCode;\n    private BigDecimal planQuantity;\n    private LocalDate dueDate;\n    private PlanStatus status;\n    private String locationCode;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n\n    // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n    private Item item;\n}\n</code></pre> \u30aa\u30fc\u30c0\u60c5\u5831\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\uff08Order.java\uff09 <pre><code>// src/main/java/com/example/production/domain/model/plan/Order.java\npackage com.example.production.domain.model.plan;\n\nimport com.example.production.domain.model.item.Item;\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.List;\n\n@Data\n@Builder\npublic class Order {\n    private Integer id;\n    private String orderNumber;\n    private OrderType orderType;\n    private String itemCode;\n    private LocalDate startDate;\n    private LocalDate dueDate;\n    private LocalDate expirationDate;\n    private BigDecimal planQuantity;\n    private String locationCode;\n    private PlanStatus status;\n    private Integer mpsId;\n    private Integer parentOrderId;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n\n    // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n    private Item item;\n    private MasterProductionSchedule mps;\n    private Order parentOrder;\n    private List&lt;Order&gt; childOrders;\n    private List&lt;Requirement&gt; requirements;\n}\n</code></pre> \u6240\u8981\u60c5\u5831\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\uff08Requirement.java\uff09 <pre><code>// src/main/java/com/example/production/domain/model/plan/Requirement.java\npackage com.example.production.domain.model.plan;\n\nimport com.example.production.domain.model.item.Item;\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.List;\n\n@Data\n@Builder\npublic class Requirement {\n    private Integer id;\n    private String requirementNumber;\n    private Integer orderId;\n    private String itemCode;\n    private LocalDate dueDate;\n    private BigDecimal requiredQuantity;\n    private BigDecimal allocatedQuantity;\n    private BigDecimal shortageQuantity;\n    private String locationCode;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n\n    // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n    private Order order;\n    private Item item;\n    private List&lt;Allocation&gt; allocations;\n}\n</code></pre> \u5f15\u5f53\u60c5\u5831\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\uff08Allocation.java\uff09 <pre><code>// src/main/java/com/example/production/domain/model/plan/Allocation.java\npackage com.example.production.domain.model.plan;\n\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\npublic class Allocation {\n    private Integer id;\n    private Integer requirementId;\n    private AllocationType allocationType;\n    private Integer orderId;\n    private LocalDate allocationDate;\n    private BigDecimal allocatedQuantity;\n    private String locationCode;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n\n    // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n    private Requirement requirement;\n    private Order order;\n}\n</code></pre>"},{"location":"article/part4/chapter24/#typehandler","title":"TypeHandler","text":"PlanStatusTypeHandler <pre><code>// src/main/java/com/example/production/infrastructure/persistence/PlanStatusTypeHandler.java\npackage com.example.production.infrastructure.persistence;\n\nimport com.example.production.domain.model.plan.PlanStatus;\nimport org.apache.ibatis.type.BaseTypeHandler;\nimport org.apache.ibatis.type.JdbcType;\nimport org.apache.ibatis.type.MappedTypes;\n\nimport java.sql.CallableStatement;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\n\n@MappedTypes(PlanStatus.class)\npublic class PlanStatusTypeHandler extends BaseTypeHandler&lt;PlanStatus&gt; {\n\n    @Override\n    public void setNonNullParameter(PreparedStatement ps, int i, PlanStatus parameter, JdbcType jdbcType)\n            throws SQLException {\n        ps.setString(i, parameter.getDisplayName());\n    }\n\n    @Override\n    public PlanStatus getNullableResult(ResultSet rs, String columnName) throws SQLException {\n        String value = rs.getString(columnName);\n        return value == null ? null : PlanStatus.fromDisplayName(value);\n    }\n\n    @Override\n    public PlanStatus getNullableResult(ResultSet rs, int columnIndex) throws SQLException {\n        String value = rs.getString(columnIndex);\n        return value == null ? null : PlanStatus.fromDisplayName(value);\n    }\n\n    @Override\n    public PlanStatus getNullableResult(CallableStatement cs, int columnIndex) throws SQLException {\n        String value = cs.getString(columnIndex);\n        return value == null ? null : PlanStatus.fromDisplayName(value);\n    }\n}\n</code></pre> OrderTypeTypeHandler <pre><code>// src/main/java/com/example/production/infrastructure/persistence/OrderTypeTypeHandler.java\npackage com.example.production.infrastructure.persistence;\n\nimport com.example.production.domain.model.plan.OrderType;\nimport org.apache.ibatis.type.BaseTypeHandler;\nimport org.apache.ibatis.type.JdbcType;\nimport org.apache.ibatis.type.MappedTypes;\n\nimport java.sql.CallableStatement;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\n\n@MappedTypes(OrderType.class)\npublic class OrderTypeTypeHandler extends BaseTypeHandler&lt;OrderType&gt; {\n\n    @Override\n    public void setNonNullParameter(PreparedStatement ps, int i, OrderType parameter, JdbcType jdbcType)\n            throws SQLException {\n        ps.setString(i, parameter.getDisplayName());\n    }\n\n    @Override\n    public OrderType getNullableResult(ResultSet rs, String columnName) throws SQLException {\n        String value = rs.getString(columnName);\n        return value == null ? null : OrderType.fromDisplayName(value);\n    }\n\n    @Override\n    public OrderType getNullableResult(ResultSet rs, int columnIndex) throws SQLException {\n        String value = rs.getString(columnIndex);\n        return value == null ? null : OrderType.fromDisplayName(value);\n    }\n\n    @Override\n    public OrderType getNullableResult(CallableStatement cs, int columnIndex) throws SQLException {\n        String value = cs.getString(columnIndex);\n        return value == null ? null : OrderType.fromDisplayName(value);\n    }\n}\n</code></pre> AllocationTypeTypeHandler <pre><code>// src/main/java/com/example/production/infrastructure/persistence/AllocationTypeTypeHandler.java\npackage com.example.production.infrastructure.persistence;\n\nimport com.example.production.domain.model.plan.AllocationType;\nimport org.apache.ibatis.type.BaseTypeHandler;\nimport org.apache.ibatis.type.JdbcType;\nimport org.apache.ibatis.type.MappedTypes;\n\nimport java.sql.CallableStatement;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\n\n@MappedTypes(AllocationType.class)\npublic class AllocationTypeTypeHandler extends BaseTypeHandler&lt;AllocationType&gt; {\n\n    @Override\n    public void setNonNullParameter(PreparedStatement ps, int i, AllocationType parameter, JdbcType jdbcType)\n            throws SQLException {\n        ps.setString(i, parameter.getDisplayName());\n    }\n\n    @Override\n    public AllocationType getNullableResult(ResultSet rs, String columnName) throws SQLException {\n        String value = rs.getString(columnName);\n        return value == null ? null : AllocationType.fromDisplayName(value);\n    }\n\n    @Override\n    public AllocationType getNullableResult(ResultSet rs, int columnIndex) throws SQLException {\n        String value = rs.getString(columnIndex);\n        return value == null ? null : AllocationType.fromDisplayName(value);\n    }\n\n    @Override\n    public AllocationType getNullableResult(CallableStatement cs, int columnIndex) throws SQLException {\n        String value = cs.getString(columnIndex);\n        return value == null ? null : AllocationType.fromDisplayName(value);\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter24/#mybatis-mapper","title":"MyBatis Mapper","text":"MasterProductionScheduleMapper.xml <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.production.infrastructure.persistence.mapper.MasterProductionScheduleMapper\"&gt;\n\n    &lt;resultMap id=\"MasterProductionScheduleResultMap\"\n               type=\"com.example.production.domain.model.plan.MasterProductionSchedule\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"mpsNumber\" column=\"MPS\u756a\u53f7\"/&gt;\n        &lt;result property=\"planDate\" column=\"\u8a08\u753b\u65e5\"/&gt;\n        &lt;result property=\"itemCode\" column=\"\u54c1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"planQuantity\" column=\"\u8a08\u753b\u6570\u91cf\"/&gt;\n        &lt;result property=\"dueDate\" column=\"\u7d0d\u671f\"/&gt;\n        &lt;result property=\"status\" column=\"\u30b9\u30c6\u30fc\u30bf\u30b9\"\n                typeHandler=\"com.example.production.infrastructure.persistence.PlanStatusTypeHandler\"/&gt;\n        &lt;result property=\"locationCode\" column=\"\u5834\u6240\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"remarks\" column=\"\u5099\u8003\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"createdBy\" column=\"\u4f5c\u6210\u8005\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedBy\" column=\"\u66f4\u65b0\u8005\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;insert id=\"insert\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u57fa\u6e96\u751f\u7523\u8a08\u753b\" (\n            \"MPS\u756a\u53f7\", \"\u8a08\u753b\u65e5\", \"\u54c1\u76ee\u30b3\u30fc\u30c9\", \"\u8a08\u753b\u6570\u91cf\", \"\u7d0d\u671f\",\n            \"\u30b9\u30c6\u30fc\u30bf\u30b9\", \"\u5834\u6240\u30b3\u30fc\u30c9\", \"\u5099\u8003\", \"\u4f5c\u6210\u8005\"\n        ) VALUES (\n            #{mpsNumber},\n            #{planDate},\n            #{itemCode},\n            #{planQuantity},\n            #{dueDate},\n            #{status, typeHandler=com.example.production.infrastructure.persistence.PlanStatusTypeHandler}::\u8a08\u753b\u30b9\u30c6\u30fc\u30bf\u30b9,\n            #{locationCode},\n            #{remarks},\n            #{createdBy}\n        )\n    &lt;/insert&gt;\n\n    &lt;select id=\"findById\" resultMap=\"MasterProductionScheduleResultMap\"&gt;\n        SELECT * FROM \"\u57fa\u6e96\u751f\u7523\u8a08\u753b\" WHERE \"ID\" = #{id}\n    &lt;/select&gt;\n\n    &lt;select id=\"findByMpsNumber\" resultMap=\"MasterProductionScheduleResultMap\"&gt;\n        SELECT * FROM \"\u57fa\u6e96\u751f\u7523\u8a08\u753b\" WHERE \"MPS\u756a\u53f7\" = #{mpsNumber}\n    &lt;/select&gt;\n\n    &lt;select id=\"findByStatus\" resultMap=\"MasterProductionScheduleResultMap\"&gt;\n        SELECT * FROM \"\u57fa\u6e96\u751f\u7523\u8a08\u753b\"\n        WHERE \"\u30b9\u30c6\u30fc\u30bf\u30b9\" = #{status, typeHandler=com.example.production.infrastructure.persistence.PlanStatusTypeHandler}::\u8a08\u753b\u30b9\u30c6\u30fc\u30bf\u30b9\n        ORDER BY \"\u7d0d\u671f\"\n    &lt;/select&gt;\n\n    &lt;update id=\"updateStatus\"&gt;\n        UPDATE \"\u57fa\u6e96\u751f\u7523\u8a08\u753b\"\n        SET \"\u30b9\u30c6\u30fc\u30bf\u30b9\" = #{status, typeHandler=com.example.production.infrastructure.persistence.PlanStatusTypeHandler}::\u8a08\u753b\u30b9\u30c6\u30fc\u30bf\u30b9,\n            \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP\n        WHERE \"ID\" = #{id}\n    &lt;/update&gt;\n\n    &lt;delete id=\"deleteAll\"&gt;\n        DELETE FROM \"\u57fa\u6e96\u751f\u7523\u8a08\u753b\"\n    &lt;/delete&gt;\n&lt;/mapper&gt;\n</code></pre> OrderMapper.xml <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.production.infrastructure.persistence.mapper.OrderMapper\"&gt;\n\n    &lt;resultMap id=\"OrderResultMap\" type=\"com.example.production.domain.model.plan.Order\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"orderNumber\" column=\"\u30aa\u30fc\u30c0NO\"/&gt;\n        &lt;result property=\"orderType\" column=\"\u30aa\u30fc\u30c0\u7a2e\u5225\"\n                typeHandler=\"com.example.production.infrastructure.persistence.OrderTypeTypeHandler\"/&gt;\n        &lt;result property=\"itemCode\" column=\"\u54c1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"startDate\" column=\"\u7740\u624b\u4e88\u5b9a\u65e5\"/&gt;\n        &lt;result property=\"dueDate\" column=\"\u7d0d\u671f\"/&gt;\n        &lt;result property=\"expirationDate\" column=\"\u6709\u52b9\u671f\u9650\"/&gt;\n        &lt;result property=\"planQuantity\" column=\"\u8a08\u753b\u6570\u91cf\"/&gt;\n        &lt;result property=\"locationCode\" column=\"\u5834\u6240\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"status\" column=\"\u30b9\u30c6\u30fc\u30bf\u30b9\"\n                typeHandler=\"com.example.production.infrastructure.persistence.PlanStatusTypeHandler\"/&gt;\n        &lt;result property=\"mpsId\" column=\"MPS_ID\"/&gt;\n        &lt;result property=\"parentOrderId\" column=\"\u89aa\u30aa\u30fc\u30c0ID\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"createdBy\" column=\"\u4f5c\u6210\u8005\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedBy\" column=\"\u66f4\u65b0\u8005\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;insert id=\"insert\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u30aa\u30fc\u30c0\u60c5\u5831\" (\n            \"\u30aa\u30fc\u30c0NO\", \"\u30aa\u30fc\u30c0\u7a2e\u5225\", \"\u54c1\u76ee\u30b3\u30fc\u30c9\", \"\u7740\u624b\u4e88\u5b9a\u65e5\", \"\u7d0d\u671f\",\n            \"\u6709\u52b9\u671f\u9650\", \"\u8a08\u753b\u6570\u91cf\", \"\u5834\u6240\u30b3\u30fc\u30c9\", \"\u30b9\u30c6\u30fc\u30bf\u30b9\", \"MPS_ID\", \"\u89aa\u30aa\u30fc\u30c0ID\", \"\u4f5c\u6210\u8005\"\n        ) VALUES (\n            #{orderNumber},\n            #{orderType, typeHandler=com.example.production.infrastructure.persistence.OrderTypeTypeHandler}::\u30aa\u30fc\u30c0\u7a2e\u5225,\n            #{itemCode},\n            #{startDate},\n            #{dueDate},\n            #{expirationDate},\n            #{planQuantity},\n            #{locationCode},\n            #{status, typeHandler=com.example.production.infrastructure.persistence.PlanStatusTypeHandler}::\u8a08\u753b\u30b9\u30c6\u30fc\u30bf\u30b9,\n            #{mpsId},\n            #{parentOrderId},\n            #{createdBy}\n        )\n    &lt;/insert&gt;\n\n    &lt;select id=\"findById\" resultMap=\"OrderResultMap\"&gt;\n        SELECT * FROM \"\u30aa\u30fc\u30c0\u60c5\u5831\" WHERE \"ID\" = #{id}\n    &lt;/select&gt;\n\n    &lt;select id=\"findByOrderNumber\" resultMap=\"OrderResultMap\"&gt;\n        SELECT * FROM \"\u30aa\u30fc\u30c0\u60c5\u5831\" WHERE \"\u30aa\u30fc\u30c0NO\" = #{orderNumber}\n    &lt;/select&gt;\n\n    &lt;select id=\"findByMpsId\" resultMap=\"OrderResultMap\"&gt;\n        SELECT * FROM \"\u30aa\u30fc\u30c0\u60c5\u5831\" WHERE \"MPS_ID\" = #{mpsId}\n    &lt;/select&gt;\n\n    &lt;select id=\"findByParentOrderId\" resultMap=\"OrderResultMap\"&gt;\n        SELECT * FROM \"\u30aa\u30fc\u30c0\u60c5\u5831\" WHERE \"\u89aa\u30aa\u30fc\u30c0ID\" = #{parentOrderId}\n    &lt;/select&gt;\n\n    &lt;update id=\"updateParentOrderId\"&gt;\n        UPDATE \"\u30aa\u30fc\u30c0\u60c5\u5831\"\n        SET \"\u89aa\u30aa\u30fc\u30c0ID\" = #{parentOrderId}, \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP\n        WHERE \"ID\" = #{id}\n    &lt;/update&gt;\n\n    &lt;update id=\"updateStatus\"&gt;\n        UPDATE \"\u30aa\u30fc\u30c0\u60c5\u5831\"\n        SET \"\u30b9\u30c6\u30fc\u30bf\u30b9\" = #{status, typeHandler=com.example.production.infrastructure.persistence.PlanStatusTypeHandler}::\u8a08\u753b\u30b9\u30c6\u30fc\u30bf\u30b9,\n            \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP\n        WHERE \"ID\" = #{id}\n    &lt;/update&gt;\n\n    &lt;delete id=\"deleteAll\"&gt;\n        DELETE FROM \"\u30aa\u30fc\u30c0\u60c5\u5831\"\n    &lt;/delete&gt;\n&lt;/mapper&gt;\n</code></pre> RequirementMapper.xml <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.production.infrastructure.persistence.mapper.RequirementMapper\"&gt;\n\n    &lt;resultMap id=\"RequirementResultMap\" type=\"com.example.production.domain.model.plan.Requirement\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"requirementNumber\" column=\"\u6240\u8981NO\"/&gt;\n        &lt;result property=\"orderId\" column=\"\u30aa\u30fc\u30c0ID\"/&gt;\n        &lt;result property=\"itemCode\" column=\"\u54c1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"dueDate\" column=\"\u7d0d\u671f\"/&gt;\n        &lt;result property=\"requiredQuantity\" column=\"\u5fc5\u8981\u6570\u91cf\"/&gt;\n        &lt;result property=\"allocatedQuantity\" column=\"\u5f15\u5f53\u6e08\u6570\u91cf\"/&gt;\n        &lt;result property=\"shortageQuantity\" column=\"\u4e0d\u8db3\u6570\u91cf\"/&gt;\n        &lt;result property=\"locationCode\" column=\"\u5834\u6240\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;insert id=\"insert\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u6240\u8981\u60c5\u5831\" (\n            \"\u6240\u8981NO\", \"\u30aa\u30fc\u30c0ID\", \"\u54c1\u76ee\u30b3\u30fc\u30c9\", \"\u7d0d\u671f\", \"\u5fc5\u8981\u6570\u91cf\",\n            \"\u5f15\u5f53\u6e08\u6570\u91cf\", \"\u4e0d\u8db3\u6570\u91cf\", \"\u5834\u6240\u30b3\u30fc\u30c9\"\n        ) VALUES (\n            #{requirementNumber},\n            #{orderId},\n            #{itemCode},\n            #{dueDate},\n            #{requiredQuantity},\n            #{allocatedQuantity},\n            #{shortageQuantity},\n            #{locationCode}\n        )\n    &lt;/insert&gt;\n\n    &lt;select id=\"findById\" resultMap=\"RequirementResultMap\"&gt;\n        SELECT * FROM \"\u6240\u8981\u60c5\u5831\" WHERE \"ID\" = #{id}\n    &lt;/select&gt;\n\n    &lt;select id=\"findByOrderId\" resultMap=\"RequirementResultMap\"&gt;\n        SELECT * FROM \"\u6240\u8981\u60c5\u5831\" WHERE \"\u30aa\u30fc\u30c0ID\" = #{orderId}\n    &lt;/select&gt;\n\n    &lt;update id=\"updateAllocation\"&gt;\n        UPDATE \"\u6240\u8981\u60c5\u5831\"\n        SET \"\u5f15\u5f53\u6e08\u6570\u91cf\" = #{allocatedQuantity},\n            \"\u4e0d\u8db3\u6570\u91cf\" = #{shortageQuantity},\n            \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP\n        WHERE \"ID\" = #{id}\n    &lt;/update&gt;\n\n    &lt;delete id=\"deleteAll\"&gt;\n        DELETE FROM \"\u6240\u8981\u60c5\u5831\"\n    &lt;/delete&gt;\n&lt;/mapper&gt;\n</code></pre> AllocationMapper.xml <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.production.infrastructure.persistence.mapper.AllocationMapper\"&gt;\n\n    &lt;resultMap id=\"AllocationResultMap\" type=\"com.example.production.domain.model.plan.Allocation\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"requirementId\" column=\"\u6240\u8981ID\"/&gt;\n        &lt;result property=\"allocationType\" column=\"\u5f15\u5f53\u533a\u5206\"\n                typeHandler=\"com.example.production.infrastructure.persistence.AllocationTypeTypeHandler\"/&gt;\n        &lt;result property=\"orderId\" column=\"\u30aa\u30fc\u30c0ID\"/&gt;\n        &lt;result property=\"allocationDate\" column=\"\u5f15\u5f53\u65e5\"/&gt;\n        &lt;result property=\"allocatedQuantity\" column=\"\u5f15\u5f53\u6570\u91cf\"/&gt;\n        &lt;result property=\"locationCode\" column=\"\u5834\u6240\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;insert id=\"insert\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u5f15\u5f53\u60c5\u5831\" (\n            \"\u6240\u8981ID\", \"\u5f15\u5f53\u533a\u5206\", \"\u30aa\u30fc\u30c0ID\", \"\u5f15\u5f53\u65e5\", \"\u5f15\u5f53\u6570\u91cf\", \"\u5834\u6240\u30b3\u30fc\u30c9\"\n        ) VALUES (\n            #{requirementId},\n            #{allocationType, typeHandler=com.example.production.infrastructure.persistence.AllocationTypeTypeHandler}::\u5f15\u5f53\u533a\u5206,\n            #{orderId},\n            #{allocationDate},\n            #{allocatedQuantity},\n            #{locationCode}\n        )\n    &lt;/insert&gt;\n\n    &lt;select id=\"findByRequirementId\" resultMap=\"AllocationResultMap\"&gt;\n        SELECT * FROM \"\u5f15\u5f53\u60c5\u5831\" WHERE \"\u6240\u8981ID\" = #{requirementId}\n    &lt;/select&gt;\n\n    &lt;delete id=\"deleteAll\"&gt;\n        DELETE FROM \"\u5f15\u5f53\u60c5\u5831\"\n    &lt;/delete&gt;\n&lt;/mapper&gt;\n</code></pre>"},{"location":"article/part4/chapter24/#_9","title":"\u30ea\u30dd\u30b8\u30c8\u30ea","text":"MpsRepository \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9 <pre><code>// src/main/java/com/example/production/application/port/out/MpsRepository.java\npackage com.example.production.application.port.out;\n\nimport com.example.production.domain.model.plan.MasterProductionSchedule;\nimport com.example.production.domain.model.plan.PlanStatus;\n\nimport java.util.List;\nimport java.util.Optional;\n\n/**\n * \u57fa\u6e96\u751f\u7523\u8a08\u753b\u30ea\u30dd\u30b8\u30c8\u30ea\uff08Output Port\uff09\n */\npublic interface MpsRepository {\n    void save(MasterProductionSchedule mps);\n    Optional&lt;MasterProductionSchedule&gt; findById(Integer id);\n    Optional&lt;MasterProductionSchedule&gt; findByMpsNumber(String mpsNumber);\n    List&lt;MasterProductionSchedule&gt; findByStatus(PlanStatus status);\n    void updateStatus(Integer id, PlanStatus status);\n    void deleteAll();\n}\n</code></pre> MpsRepositoryImpl \u5b9f\u88c5 <pre><code>// src/main/java/com/example/production/infrastructure/persistence/repository/MpsRepositoryImpl.java\npackage com.example.production.infrastructure.persistence.repository;\n\nimport com.example.production.application.port.out.MpsRepository;\nimport com.example.production.domain.model.plan.MasterProductionSchedule;\nimport com.example.production.domain.model.plan.PlanStatus;\nimport com.example.production.infrastructure.persistence.mapper.MasterProductionScheduleMapper;\nimport org.springframework.stereotype.Repository;\n\nimport java.util.List;\nimport java.util.Optional;\n\n@Repository\npublic class MpsRepositoryImpl implements MpsRepository {\n\n    private final MasterProductionScheduleMapper mpsMapper;\n\n    public MpsRepositoryImpl(MasterProductionScheduleMapper mpsMapper) {\n        this.mpsMapper = mpsMapper;\n    }\n\n    @Override\n    public void save(MasterProductionSchedule mps) {\n        mpsMapper.insert(mps);\n    }\n\n    @Override\n    public Optional&lt;MasterProductionSchedule&gt; findById(Integer id) {\n        return Optional.ofNullable(mpsMapper.findById(id));\n    }\n\n    @Override\n    public Optional&lt;MasterProductionSchedule&gt; findByMpsNumber(String mpsNumber) {\n        return Optional.ofNullable(mpsMapper.findByMpsNumber(mpsNumber));\n    }\n\n    @Override\n    public List&lt;MasterProductionSchedule&gt; findByStatus(PlanStatus status) {\n        return mpsMapper.findByStatus(status);\n    }\n\n    @Override\n    public void updateStatus(Integer id, PlanStatus status) {\n        mpsMapper.updateStatus(id, status);\n    }\n\n    @Override\n    public void deleteAll() {\n        mpsMapper.deleteAll();\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter24/#242-mrp","title":"24.2 MRP\uff08\u6240\u8981\u91cf\u5c55\u958b\uff09","text":"<p>\u6240\u8981\u91cf\u5c55\u958b\uff08Material Requirements Planning\uff09\u306f\u3001\u57fa\u6e96\u751f\u7523\u8a08\u753b\uff08MPS\uff09\u3092\u8d77\u70b9\u3068\u3057\u3066\u3001\u5fc5\u8981\u306a\u90e8\u54c1\u30fb\u6750\u6599\u306e\u6240\u8981\u91cf\u3092\u8a08\u7b97\u3057\u3001\u8cfc\u8cb7\u30aa\u30fc\u30c0\u3084\u88fd\u9020\u30aa\u30fc\u30c0\u3092\u751f\u6210\u3059\u308b\u51e6\u7406\u3067\u3059\u3002</p>"},{"location":"article/part4/chapter24/#mrp","title":"MRP \u306e\u57fa\u672c\u6982\u5ff5","text":""},{"location":"article/part4/chapter24/#mrp_1","title":"MRP \u51e6\u7406\u306e\u6d41\u308c","text":""},{"location":"article/part4/chapter24/#_10","title":"\u7dcf\u6240\u8981\u91cf\u30fb\u6b63\u5473\u6240\u8981\u91cf\u306e\u8a08\u7b97","text":"<p>MRP \u3067\u306f\u4ee5\u4e0b\u306e\u8a08\u7b97\u3092\u884c\u3044\u307e\u3059\uff1a</p> \u9805\u76ee \u8a08\u7b97\u5f0f \u7dcf\u6240\u8981\u91cf \u89aa\u30aa\u30fc\u30c0\u6570\u91cf \u00d7 (\u5fc5\u8981\u6570\u91cf / \u57fa\u6e96\u6570\u91cf) \u00d7 (1 + \u4e0d\u826f\u7387) \u5f15\u5f53\u53ef\u80fd\u91cf \u5728\u5eab\u6b8b + \u767a\u6ce8\u6b8b + \u88fd\u9020\u6b8b \u6b63\u5473\u6240\u8981\u91cf \u7dcf\u6240\u8981\u91cf - \u5f15\u5f53\u53ef\u80fd\u91cf \u30aa\u30fc\u30c0\u6570\u91cf \u30ed\u30c3\u30c8\u30b5\u30a4\u30ba\u3092\u8003\u616e\u3057\u305f\u767a\u6ce8\u30fb\u88fd\u9020\u6570\u91cf"},{"location":"article/part4/chapter24/#_11","title":"\u30ed\u30c3\u30c8\u307e\u3068\u3081","text":"<p>\u30ed\u30c3\u30c8\u30b5\u30a4\u30ba\u306e\u8a08\u7b97\u30ed\u30b8\u30c3\u30af\uff1a</p> <ol> <li>\u6700\u5c0f\u30ed\u30c3\u30c8\u6570: \u5fc5\u8981\u6570\u91cf\u304c\u6700\u5c0f\u30ed\u30c3\u30c8\u6570\u672a\u6e80\u306e\u5834\u5408\u3001\u6700\u5c0f\u30ed\u30c3\u30c8\u6570\u3092\u63a1\u7528</li> <li>\u523b\u307f\u30ed\u30c3\u30c8\u6570: \u6700\u5c0f\u30ed\u30c3\u30c8\u6570\u3092\u8d85\u3048\u308b\u5834\u5408\u3001\u523b\u307f\u30ed\u30c3\u30c8\u6570\u3067\u5207\u308a\u4e0a\u3052</li> <li>\u6700\u5927\u30ed\u30c3\u30c8\u6570: \u8a08\u7b97\u7d50\u679c\u304c\u6700\u5927\u30ed\u30c3\u30c8\u6570\u3092\u8d85\u3048\u308b\u5834\u5408\u3001\u6700\u5927\u30ed\u30c3\u30c8\u6570\u3067\u5236\u9650</li> </ol>"},{"location":"article/part4/chapter24/#mrp_2","title":"MRP \u30b5\u30fc\u30d3\u30b9","text":"MrpService.java <pre><code>// src/main/java/com/example/production/application/service/MrpService.java\npackage com.example.production.application.service;\n\nimport com.example.production.application.port.out.*;\nimport com.example.production.domain.model.bom.Bom;\nimport com.example.production.domain.model.item.Item;\nimport com.example.production.domain.model.item.ItemCategory;\nimport com.example.production.domain.model.plan.*;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.math.BigDecimal;\nimport java.math.RoundingMode;\nimport java.time.LocalDate;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Service\n@RequiredArgsConstructor\npublic class MrpService {\n\n    private final ItemRepository itemRepository;\n    private final BomRepository bomRepository;\n    private final OrderRepository orderRepository;\n    private final RequirementRepository requirementRepository;\n    private final AllocationRepository allocationRepository;\n\n    /**\n     * \u30aa\u30fc\u30c0\u304b\u3089\u6240\u8981\u91cf\u3092\u5c55\u958b\u3059\u308b\n     */\n    @Transactional\n    public List&lt;Requirement&gt; explodeRequirements(Integer orderId) {\n        var order = orderRepository.findById(orderId)\n                .orElseThrow(() -&gt; new IllegalArgumentException(\"Order not found: \" + orderId));\n\n        var bomList = bomRepository.findByParentItemCodeEffective(\n                order.getItemCode(),\n                order.getDueDate()\n        );\n\n        List&lt;Requirement&gt; requirements = new ArrayList&lt;&gt;();\n\n        for (var bom : bomList) {\n            var childItem = itemRepository.findByItemCodeAndDate(\n                    bom.getChildItemCode(),\n                    order.getDueDate()\n            );\n\n            if (childItem.isEmpty()) continue;\n\n            // \u6240\u8981\u91cf = \u89aa\u30aa\u30fc\u30c0\u6570\u91cf \u00d7 (\u5fc5\u8981\u6570\u91cf / \u57fa\u6e96\u6570\u91cf) \u00d7 (1 + \u4e0d\u826f\u7387)\n            var requiredQuantity = order.getPlanQuantity()\n                    .multiply(bom.getRequiredQuantity())\n                    .divide(bom.getBaseQuantity(), 2, RoundingMode.HALF_UP)\n                    .multiply(BigDecimal.ONE.add(\n                            bom.getDefectRate().divide(new BigDecimal(\"100\"), 4, RoundingMode.HALF_UP)\n                    ));\n\n            // \u5b50\u54c1\u76ee\u306e\u30ea\u30fc\u30c9\u30bf\u30a4\u30e0\u3092\u8003\u616e\u3057\u305f\u7d0d\u671f\n            var item = childItem.get();\n            int leadTime = item.getLeadTime() != null ? item.getLeadTime() : 0;\n            int safetyLeadTime = item.getSafetyLeadTime() != null ? item.getSafetyLeadTime() : 0;\n            var childDueDate = calculateStartDate(order.getStartDate(), leadTime, safetyLeadTime);\n\n            var requirement = Requirement.builder()\n                    .requirementNumber(\"REQ-\" + System.currentTimeMillis() + \"-\" + bom.getChildItemCode())\n                    .orderId(order.getId())\n                    .itemCode(bom.getChildItemCode())\n                    .dueDate(childDueDate)\n                    .requiredQuantity(requiredQuantity)\n                    .allocatedQuantity(BigDecimal.ZERO)\n                    .shortageQuantity(requiredQuantity)\n                    .locationCode(order.getLocationCode())\n                    .build();\n            requirementRepository.save(requirement);\n\n            requirements.add(requirement);\n        }\n\n        return requirements;\n    }\n\n    /**\n     * \u5728\u5eab\u304b\u3089\u5f15\u5f53\u3092\u884c\u3046\n     */\n    @Transactional\n    public Allocation allocateFromInventory(Integer requirementId, int inventoryQuantity) {\n        var requirement = requirementRepository.findById(requirementId)\n                .orElseThrow(() -&gt; new IllegalArgumentException(\"Requirement not found: \" + requirementId));\n\n        var requiredQuantity = requirement.getRequiredQuantity();\n        var allocatedQuantity = requiredQuantity.min(new BigDecimal(inventoryQuantity));\n        var shortageQuantity = requiredQuantity.subtract(allocatedQuantity);\n\n        var allocation = Allocation.builder()\n                .requirementId(requirementId)\n                .allocationType(AllocationType.INVENTORY)\n                .allocationDate(LocalDate.now())\n                .allocatedQuantity(allocatedQuantity)\n                .locationCode(requirement.getLocationCode())\n                .build();\n        allocationRepository.save(allocation);\n\n        requirementRepository.updateAllocation(requirementId, allocatedQuantity, shortageQuantity);\n\n        return allocation;\n    }\n\n    /**\n     * \u30ed\u30c3\u30c8\u30b5\u30a4\u30ba\u3092\u8003\u616e\u3057\u305f\u30aa\u30fc\u30c0\u6570\u91cf\u3092\u8a08\u7b97\u3059\u308b\n     */\n    public BigDecimal calculateOrderQuantity(\n            BigDecimal requiredQuantity,\n            BigDecimal minimumLotSize,\n            BigDecimal incrementLotSize,\n            BigDecimal maximumLotSize\n    ) {\n        if (minimumLotSize == null) minimumLotSize = BigDecimal.ONE;\n        if (incrementLotSize == null) incrementLotSize = BigDecimal.ONE;\n\n        // \u6700\u5c0f\u30ed\u30c3\u30c8\u306b\u6e80\u305f\u306a\u3044\u5834\u5408\n        if (requiredQuantity.compareTo(minimumLotSize) &lt;= 0) {\n            if (maximumLotSize != null &amp;&amp; minimumLotSize.compareTo(maximumLotSize) &gt; 0) {\n                return maximumLotSize;\n            }\n            return minimumLotSize;\n        }\n\n        // \u523b\u307f\u30ed\u30c3\u30c8\u3067\u5207\u308a\u4e0a\u3052\n        BigDecimal difference = requiredQuantity.subtract(minimumLotSize);\n        BigDecimal lots = difference.divide(incrementLotSize, 0, RoundingMode.CEILING);\n        BigDecimal orderQuantity = minimumLotSize.add(lots.multiply(incrementLotSize));\n\n        // \u6700\u5927\u30ed\u30c3\u30c8\u3092\u8d85\u3048\u308b\u5834\u5408\u306f\u5236\u9650\n        if (maximumLotSize != null &amp;&amp; orderQuantity.compareTo(maximumLotSize) &gt; 0) {\n            return maximumLotSize;\n        }\n\n        return orderQuantity;\n    }\n\n    /**\n     * \u30ea\u30fc\u30c9\u30bf\u30a4\u30e0\u304b\u3089\u7740\u624b\u65e5\u3092\u8a08\u7b97\u3059\u308b\n     */\n    public LocalDate calculateStartDate(LocalDate dueDate, int leadTime, int safetyLeadTime) {\n        return dueDate.minusDays(leadTime + safetyLeadTime);\n    }\n\n    /**\n     * \u4e0d\u8db3\u5206\u306b\u5bfe\u3057\u3066\u65b0\u898f\u30aa\u30fc\u30c0\u3092\u751f\u6210\u3059\u308b\n     */\n    @Transactional\n    public Order createShortageOrder(\n            String itemCode,\n            BigDecimal shortageQuantity,\n            LocalDate dueDate,\n            String locationCode,\n            OrderType orderType\n    ) {\n        var item = itemRepository.findByItemCodeAndDate(itemCode, LocalDate.now())\n                .orElseThrow(() -&gt; new IllegalArgumentException(\"Item not found: \" + itemCode));\n\n        var orderQuantity = calculateOrderQuantity(\n                shortageQuantity,\n                item.getMinLotSize(),\n                item.getLotIncrement(),\n                item.getMaxLotSize()\n        );\n\n        int leadTime = item.getLeadTime() != null ? item.getLeadTime() : 0;\n        int safetyLeadTime = item.getSafetyLeadTime() != null ? item.getSafetyLeadTime() : 0;\n        var startDate = calculateStartDate(dueDate, leadTime, safetyLeadTime);\n\n        var order = Order.builder()\n                .orderNumber((orderType == OrderType.PURCHASE ? \"PO\" : \"MO\") + \"-\" + System.currentTimeMillis())\n                .orderType(orderType)\n                .itemCode(itemCode)\n                .startDate(startDate)\n                .dueDate(dueDate)\n                .planQuantity(orderQuantity)\n                .locationCode(locationCode)\n                .status(PlanStatus.DRAFT)\n                .build();\n        orderRepository.save(order);\n\n        return order;\n    }\n\n    /**\n     * MRP \u306e\u5b8c\u5168\u5b9f\u884c\n     */\n    @Transactional\n    public void executeMrp(Integer mpsId, MpsRepository mpsRepository) {\n        var mps = mpsRepository.findById(mpsId)\n                .orElseThrow(() -&gt; new IllegalArgumentException(\"MPS not found: \" + mpsId));\n\n        var orders = orderRepository.findByMpsId(mpsId);\n\n        Order productOrder;\n        if (orders.isEmpty()) {\n            productOrder = Order.builder()\n                    .orderNumber(\"MO-\" + System.currentTimeMillis())\n                    .orderType(OrderType.MANUFACTURING)\n                    .itemCode(mps.getItemCode())\n                    .startDate(calculateStartDate(mps.getDueDate(), 5, 0))\n                    .dueDate(mps.getDueDate())\n                    .planQuantity(mps.getPlanQuantity())\n                    .locationCode(mps.getLocationCode() != null ? mps.getLocationCode() : \"WH-001\")\n                    .status(PlanStatus.CONFIRMED)\n                    .mpsId(mpsId)\n                    .build();\n            orderRepository.save(productOrder);\n        } else {\n            productOrder = orders.get(0);\n        }\n\n        recursiveMrpExplosion(productOrder.getId());\n    }\n\n    /**\n     * \u518d\u5e30\u7684\u306a\u6240\u8981\u91cf\u5c55\u958b\n     */\n    private void recursiveMrpExplosion(Integer orderId) {\n        var requirements = explodeRequirements(orderId);\n\n        for (var requirement : requirements) {\n            var itemOpt = itemRepository.findByItemCodeAndDate(requirement.getItemCode(), LocalDate.now());\n            if (itemOpt.isEmpty()) continue;\n            var item = itemOpt.get();\n\n            var orderType = (item.getItemCategory() == ItemCategory.MATERIAL ||\n                    item.getItemCategory() == ItemCategory.RAW_MATERIAL)\n                    ? OrderType.PURCHASE : OrderType.MANUFACTURING;\n\n            var newOrder = createShortageOrder(\n                    requirement.getItemCode(),\n                    requirement.getShortageQuantity(),\n                    requirement.getDueDate(),\n                    requirement.getLocationCode(),\n                    orderType\n            );\n\n            orderRepository.updateParentOrderId(newOrder.getId(), orderId);\n\n            recursiveMrpExplosion(newOrder.getId());\n        }\n    }\n\n    /**\n     * \u6b69\u7559\u7387\u3068\u4e0d\u826f\u7387\u3092\u8003\u616e\u3057\u305f\u6240\u8981\u91cf\u8a08\u7b97\n     */\n    public BigDecimal calculateRequiredQuantity(\n            BigDecimal parentQuantity,\n            BigDecimal baseQuantity,\n            BigDecimal requiredQuantity,\n            BigDecimal defectRate,\n            BigDecimal yieldRate\n    ) {\n        // \u57fa\u672c\u6240\u8981\u91cf\n        BigDecimal basicQuantity = parentQuantity.multiply(requiredQuantity)\n                .divide(baseQuantity, 4, RoundingMode.HALF_UP);\n\n        // \u4e0d\u826f\u7387\u3092\u8003\u616e\n        BigDecimal afterDefect = basicQuantity.multiply(\n                BigDecimal.ONE.add(defectRate.divide(new BigDecimal(\"100\"), 4, RoundingMode.HALF_UP))\n        );\n\n        // \u6b69\u7559\u7387\u3092\u8003\u616e\n        BigDecimal afterYield = afterDefect.divide(\n                yieldRate.divide(new BigDecimal(\"100\"), 4, RoundingMode.HALF_UP),\n                0,\n                RoundingMode.CEILING\n        );\n\n        return afterYield;\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter24/#mrp-er","title":"MRP \u51e6\u7406\u306e ER \u56f3","text":""},{"location":"article/part4/chapter24/#_12","title":"\u307e\u3068\u3081","text":""},{"location":"article/part4/chapter24/#_13","title":"\u5b66\u3093\u3060\u3053\u3068","text":"<ol> <li>\u8a08\u753b\u7cfb\u3068\u5b9f\u7e3e\u7cfb\u306e\u5206\u96e2</li> <li>\u8a08\u753b\u30c7\u30fc\u30bf\u306f\u518d\u8a08\u7b97\u53ef\u80fd\u3001\u5b9f\u7e3e\u30c7\u30fc\u30bf\u306f\u4e0d\u53ef\u9006</li> <li> <p>\u4e21\u8005\u3092\u660e\u78ba\u306b\u5206\u96e2\u3059\u308b\u3053\u3068\u3067\u4fdd\u5b88\u6027\u304c\u5411\u4e0a</p> </li> <li> <p>\u8a08\u753b\u306e\u968e\u5c64\u69cb\u9020</p> </li> <li>\u9577\u671f\u8a08\u753b\u304b\u3089\u77ed\u671f\u8a08\u753b\u3078\u6bb5\u968e\u7684\u306b\u8a73\u7d30\u5316</li> <li> <p>MPS \u304c MRP \u306e\u5165\u529b\u3068\u306a\u308b</p> </li> <li> <p>MRP \u306e\u57fa\u672c\u51e6\u7406</p> </li> <li>BOM \u5c55\u958b\u306b\u3088\u308b\u6240\u8981\u91cf\u8a08\u7b97</li> <li>\u5728\u5eab\u30fb\u767a\u6ce8\u6b8b\u30fb\u88fd\u9020\u6b8b\u304b\u3089\u306e\u5f15\u5f53</li> <li>\u30ed\u30c3\u30c8\u30b5\u30a4\u30ba\u3068\u30ea\u30fc\u30c9\u30bf\u30a4\u30e0\u306e\u8003\u616e</li> <li> <p>\u4e0d\u8db3\u5206\u306b\u5bfe\u3059\u308b\u65b0\u898f\u30aa\u30fc\u30c0\u751f\u6210</p> </li> <li> <p>\u65e5\u672c\u8a9eDB \u2194 \u82f1\u8a9eJava\u306e\u30de\u30c3\u30d4\u30f3\u30b0</p> </li> <li>MyBatis \u306e resultMap \u3092\u4f7f\u7528\u3057\u3066\u65e5\u672c\u8a9e\u30ab\u30e9\u30e0\u540d\u3092\u82f1\u8a9e\u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u30de\u30c3\u30d4\u30f3\u30b0</li> <li>TypeHandler \u3092\u4f7f\u7528\u3057\u3066\u65e5\u672c\u8a9e ENUM \u5024\u3092\u82f1\u8a9e Enum \u306b\u30de\u30c3\u30d4\u30f3\u30b0</li> </ol>"},{"location":"article/part4/chapter24/#_14","title":"\u8a2d\u8a08\u306e\u30dd\u30a4\u30f3\u30c8","text":"\u30dd\u30a4\u30f3\u30c8 \u8aac\u660e \u30aa\u30fc\u30c0\u306e\u89aa\u5b50\u95a2\u4fc2 \u88fd\u54c1\u30aa\u30fc\u30c0\u304b\u3089\u90e8\u54c1\u30aa\u30fc\u30c0\u3078\u306e\u968e\u5c64\u69cb\u9020\u3092\u7ba1\u7406 \u6240\u8981-\u5f15\u5f53\u306e\u95a2\u4fc2 \u591a\u5bfe\u591a\u306e\u95a2\u4fc2\u3092\u4e2d\u9593\u30c6\u30fc\u30d6\u30eb\u3067\u7ba1\u7406 \u30ed\u30c3\u30c8\u30b5\u30a4\u30ba\u8a08\u7b97 \u6700\u5c0f\u30fb\u523b\u307f\u30fb\u6700\u5927\u306e3\u30d1\u30e9\u30e1\u30fc\u30bf\u3067\u67d4\u8edf\u306b\u5bfe\u5fdc \u30ea\u30fc\u30c9\u30bf\u30a4\u30e0\u9006\u7b97 \u7d0d\u671f\u304b\u3089\u7740\u624b\u65e5\u3092\u81ea\u52d5\u8a08\u7b97"},{"location":"article/part4/chapter24/#_15","title":"\u30c6\u30fc\u30d6\u30eb\u5b9a\u7fa9","text":""},{"location":"article/part4/chapter24/#_16","title":"\u57fa\u6e96\u751f\u7523\u8a08\u753b\u30c6\u30fc\u30d6\u30eb","text":"\u30ab\u30e9\u30e0\u540d \u30c7\u30fc\u30bf\u578b NULL \u8aac\u660e ID SERIAL NO \u4e3b\u30ad\u30fc MPS\u756a\u53f7 VARCHAR(20) NO MPS\u756a\u53f7\uff08\u30e6\u30cb\u30fc\u30af\uff09 \u8a08\u753b\u65e5 DATE NO \u8a08\u753b\u65e5 \u54c1\u76ee\u30b3\u30fc\u30c9 VARCHAR(20) NO \u54c1\u76ee\u30b3\u30fc\u30c9 \u8a08\u753b\u6570\u91cf DECIMAL(15,2) NO \u8a08\u753b\u6570\u91cf \u7d0d\u671f DATE NO \u7d0d\u671f \u30b9\u30c6\u30fc\u30bf\u30b9 \u8a08\u753b\u30b9\u30c6\u30fc\u30bf\u30b9 NO \u30b9\u30c6\u30fc\u30bf\u30b9 \u5834\u6240\u30b3\u30fc\u30c9 VARCHAR(20) YES \u5834\u6240\u30b3\u30fc\u30c9 \u5099\u8003 TEXT YES \u5099\u8003"},{"location":"article/part4/chapter24/#_17","title":"\u30aa\u30fc\u30c0\u60c5\u5831\u30c6\u30fc\u30d6\u30eb","text":"\u30ab\u30e9\u30e0\u540d \u30c7\u30fc\u30bf\u578b NULL \u8aac\u660e ID SERIAL NO \u4e3b\u30ad\u30fc \u30aa\u30fc\u30c0NO VARCHAR(20) NO \u30aa\u30fc\u30c0\u756a\u53f7\uff08\u30e6\u30cb\u30fc\u30af\uff09 \u30aa\u30fc\u30c0\u7a2e\u5225 \u30aa\u30fc\u30c0\u7a2e\u5225 NO \u30aa\u30fc\u30c0\u7a2e\u5225 \u54c1\u76ee\u30b3\u30fc\u30c9 VARCHAR(20) NO \u54c1\u76ee\u30b3\u30fc\u30c9 \u7740\u624b\u4e88\u5b9a\u65e5 DATE NO \u7740\u624b\u4e88\u5b9a\u65e5 \u7d0d\u671f DATE NO \u7d0d\u671f \u6709\u52b9\u671f\u9650 DATE YES \u6709\u52b9\u671f\u9650 \u8a08\u753b\u6570\u91cf DECIMAL(15,2) NO \u8a08\u753b\u6570\u91cf \u5834\u6240\u30b3\u30fc\u30c9 VARCHAR(20) NO \u5834\u6240\u30b3\u30fc\u30c9 \u30b9\u30c6\u30fc\u30bf\u30b9 \u8a08\u753b\u30b9\u30c6\u30fc\u30bf\u30b9 NO \u30b9\u30c6\u30fc\u30bf\u30b9 MPS_ID INTEGER YES MPS ID\uff08\u5916\u90e8\u30ad\u30fc\uff09 \u89aa\u30aa\u30fc\u30c0ID INTEGER YES \u89aa\u30aa\u30fc\u30c0ID\uff08\u81ea\u5df1\u53c2\u7167\uff09"},{"location":"article/part4/chapter24/#_18","title":"\u6240\u8981\u60c5\u5831\u30c6\u30fc\u30d6\u30eb","text":"\u30ab\u30e9\u30e0\u540d \u30c7\u30fc\u30bf\u578b NULL \u8aac\u660e ID SERIAL NO \u4e3b\u30ad\u30fc \u6240\u8981NO VARCHAR(20) NO \u6240\u8981\u756a\u53f7\uff08\u30e6\u30cb\u30fc\u30af\uff09 \u30aa\u30fc\u30c0ID INTEGER NO \u30aa\u30fc\u30c0ID\uff08\u5916\u90e8\u30ad\u30fc\uff09 \u54c1\u76ee\u30b3\u30fc\u30c9 VARCHAR(20) NO \u54c1\u76ee\u30b3\u30fc\u30c9 \u7d0d\u671f DATE NO \u7d0d\u671f \u5fc5\u8981\u6570\u91cf DECIMAL(15,2) NO \u5fc5\u8981\u6570\u91cf \u5f15\u5f53\u6e08\u6570\u91cf DECIMAL(15,2) NO \u5f15\u5f53\u6e08\u6570\u91cf \u4e0d\u8db3\u6570\u91cf DECIMAL(15,2) NO \u4e0d\u8db3\u6570\u91cf \u5834\u6240\u30b3\u30fc\u30c9 VARCHAR(20) NO \u5834\u6240\u30b3\u30fc\u30c9"},{"location":"article/part4/chapter24/#_19","title":"\u5f15\u5f53\u60c5\u5831\u30c6\u30fc\u30d6\u30eb","text":"\u30ab\u30e9\u30e0\u540d \u30c7\u30fc\u30bf\u578b NULL \u8aac\u660e ID SERIAL NO \u4e3b\u30ad\u30fc \u6240\u8981ID INTEGER NO \u6240\u8981ID\uff08\u5916\u90e8\u30ad\u30fc\uff09 \u5f15\u5f53\u533a\u5206 \u5f15\u5f53\u533a\u5206 NO \u5f15\u5f53\u533a\u5206 \u30aa\u30fc\u30c0ID INTEGER YES \u30aa\u30fc\u30c0ID\uff08\u5916\u90e8\u30ad\u30fc\uff09 \u5f15\u5f53\u65e5 DATE NO \u5f15\u5f53\u65e5 \u5f15\u5f53\u6570\u91cf DECIMAL(15,2) NO \u5f15\u5f53\u6570\u91cf \u5834\u6240\u30b3\u30fc\u30c9 VARCHAR(20) NO \u5834\u6240\u30b3\u30fc\u30c9 <p>\u2190 \u7b2c23\u7ae0\uff1a\u30de\u30b9\u30bf\u60c5\u5831\u306e\u8a2d\u8a08 | \u7b2c25\u7ae0\uff1a\u8cfc\u8cb7\u7ba1\u7406\u306e\u8a2d\u8a08 \u2192</p>"},{"location":"article/part4/chapter25/","title":"\u7b2c25\u7ae0\uff1a\u8cfc\u8cb7\u7ba1\u7406\u306e\u8a2d\u8a08","text":"<p>\u672c\u7ae0\u3067\u306f\u3001MRP \u3067\u751f\u6210\u3055\u308c\u305f\u8cfc\u8cb7\u30aa\u30fc\u30c0\u3092\u5b9f\u969b\u306e\u767a\u6ce8\u306b\u5909\u63db\u3057\u3001\u5165\u8377\u30fb\u691c\u53ce\u307e\u3067\u306e\u4e00\u9023\u306e\u8cfc\u8cb7\u696d\u52d9\u3092\u8a2d\u8a08\u3057\u307e\u3059\u3002</p>"},{"location":"article/part4/chapter25/#251-db","title":"25.1 \u767a\u6ce8\u696d\u52d9\u306e DB \u8a2d\u8a08","text":"<p>\u767a\u6ce8\u696d\u52d9\u306f\u3001\u8cfc\u8cb7\u30aa\u30fc\u30c0\u3092\u57fa\u306b\u53d6\u5f15\u5148\u3078\u306e\u767a\u6ce8\u3092\u884c\u3044\u3001\u7d0d\u671f\u7ba1\u7406\u3092\u884c\u3046\u696d\u52d9\u3067\u3059\u3002</p>"},{"location":"article/part4/chapter25/#_1","title":"\u767a\u6ce8\u696d\u52d9\u306e\u6d41\u308c","text":""},{"location":"article/part4/chapter25/#_2","title":"\u767a\u6ce8\u696d\u52d9\u306e\u30c7\u30fc\u30bf\u95a2\u9023","text":"<p>\u767a\u6ce8\u696d\u52d9\u3067\u306f\u3001\u30aa\u30fc\u30c0\u60c5\u5831\u3092\u57fa\u306b\u767a\u6ce8\u30c7\u30fc\u30bf\u3092\u751f\u6210\u3057\u3001\u5358\u4fa1\u30de\u30b9\u30bf\u3092\u53c2\u7167\u3057\u3066\u767a\u6ce8\u91d1\u984d\u3092\u8a08\u7b97\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part4/chapter25/#_3","title":"\u767a\u6ce8\u95a2\u9023\u306e\u30b9\u30ad\u30fc\u30de\u8a2d\u8a08","text":"<p>\u767a\u6ce8\u696d\u52d9\u3067\u4f7f\u7528\u3059\u308b\u30c6\u30fc\u30d6\u30eb\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002</p>"},{"location":"article/part4/chapter25/#_4","title":"\u30c6\u30fc\u30d6\u30eb\u69cb\u9020","text":"\u30c6\u30fc\u30d6\u30eb\u540d \u8aac\u660e \u5358\u4fa1\u30de\u30b9\u30bf \u54c1\u76ee\u30fb\u53d6\u5f15\u5148\u3054\u3068\u306e\u5358\u4fa1\u60c5\u5831\u3092\u7ba1\u7406 \u767a\u6ce8\u30c7\u30fc\u30bf \u767a\u6ce8\u30d8\u30c3\u30c0\u60c5\u5831\uff08\u767a\u6ce8\u756a\u53f7\u3001\u53d6\u5f15\u5148\u3001\u30b9\u30c6\u30fc\u30bf\u30b9\u7b49\uff09 \u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf \u767a\u6ce8\u660e\u7d30\u60c5\u5831\uff08\u54c1\u76ee\u3001\u6570\u91cf\u3001\u5358\u4fa1\u3001\u91d1\u984d\u7b49\uff09 \u8af8\u53e3\u54c1\u76ee\u60c5\u5831 \u30de\u30b9\u30bf\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u306a\u3044\u81e8\u6642\u54c1\u76ee\u306e\u60c5\u5831"},{"location":"article/part4/chapter25/#_5","title":"\u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\u306e\u72b6\u614b\u9077\u79fb","text":"DDL: \u767a\u6ce8\u95a2\u9023\u30c6\u30fc\u30d6\u30eb <pre><code>-- V009__create_purchasing_tables.sql\n\n-- \u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\nCREATE TYPE \u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9 AS ENUM ('\u4f5c\u6210\u4e2d', '\u767a\u6ce8\u6e08', '\u4e00\u90e8\u5165\u8377', '\u5165\u8377\u5b8c\u4e86', '\u691c\u53ce\u5b8c\u4e86', '\u53d6\u6d88');\n\n-- \u5165\u8377\u53d7\u5165\u533a\u5206\nCREATE TYPE \u5165\u8377\u53d7\u5165\u533a\u5206 AS ENUM ('\u901a\u5e38\u5165\u8377', '\u5206\u5272\u5165\u8377', '\u8fd4\u54c1\u5165\u8377');\n\n-- \u5358\u4fa1\u30de\u30b9\u30bf\nCREATE TABLE \"\u5358\u4fa1\u30de\u30b9\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u54c1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u30ed\u30c3\u30c8\u5358\u4f4d\u6570\" DECIMAL(15, 2) DEFAULT 1 NOT NULL,\n    \"\u4f7f\u7528\u958b\u59cb\u65e5\" DATE NOT NULL,\n    \"\u4f7f\u7528\u505c\u6b62\u65e5\" DATE,\n    \"\u5358\u4fa1\" DECIMAL(15, 2) NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u8005\" VARCHAR(50),\n    CONSTRAINT \"fk_\u5358\u4fa1\u30de\u30b9\u30bf_\u54c1\u76ee\"\n        FOREIGN KEY (\"\u54c1\u76ee\u30b3\u30fc\u30c9\") REFERENCES \"\u54c1\u76ee\u30de\u30b9\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"fk_\u5358\u4fa1\u30de\u30b9\u30bf_\u53d6\u5f15\u5148\"\n        FOREIGN KEY (\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\") REFERENCES \"\u53d6\u5f15\u5148\u30de\u30b9\u30bf\"(\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\"),\n    UNIQUE (\"\u54c1\u76ee\u30b3\u30fc\u30c9\", \"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\", \"\u30ed\u30c3\u30c8\u5358\u4f4d\u6570\", \"\u4f7f\u7528\u958b\u59cb\u65e5\")\n);\n\n-- \u767a\u6ce8\u30c7\u30fc\u30bf\nCREATE TABLE \"\u767a\u6ce8\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u767a\u6ce8\u756a\u53f7\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u767a\u6ce8\u65e5\" DATE NOT NULL,\n    \"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u767a\u6ce8\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\" VARCHAR(20),\n    \"\u767a\u6ce8\u90e8\u9580\u30b3\u30fc\u30c9\" VARCHAR(20),\n    \"\u30b9\u30c6\u30fc\u30bf\u30b9\" \u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9 DEFAULT '\u4f5c\u6210\u4e2d' NOT NULL,\n    \"\u5099\u8003\" TEXT,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u8005\" VARCHAR(50),\n    CONSTRAINT \"fk_\u767a\u6ce8\u30c7\u30fc\u30bf_\u53d6\u5f15\u5148\"\n        FOREIGN KEY (\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\") REFERENCES \"\u53d6\u5f15\u5148\u30de\u30b9\u30bf\"(\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\")\n);\n\n-- \u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\nCREATE TABLE \"\u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u767a\u6ce8\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u767a\u6ce8\u884c\u756a\u53f7\" INTEGER NOT NULL,\n    \"\u30aa\u30fc\u30c0NO\" VARCHAR(20),\n    \"\u7d0d\u5165\u5834\u6240\u30b3\u30fc\u30c9\" VARCHAR(20),\n    \"\u54c1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u8af8\u53e3\u54c1\u76ee\u533a\u5206\" BOOLEAN DEFAULT FALSE NOT NULL,\n    \"\u53d7\u5165\u4e88\u5b9a\u65e5\" DATE NOT NULL,\n    \"\u56de\u7b54\u7d0d\u671f\" DATE,\n    \"\u767a\u6ce8\u5358\u4fa1\" DECIMAL(15, 2) NOT NULL,\n    \"\u767a\u6ce8\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u5165\u8377\u6e08\u6570\u91cf\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u691c\u67fb\u6e08\u6570\u91cf\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u691c\u53ce\u6e08\u6570\u91cf\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u767a\u6ce8\u91d1\u984d\" DECIMAL(15, 2) NOT NULL,\n    \"\u6d88\u8cbb\u7a0e\u91d1\u984d\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u5b8c\u4e86\u30d5\u30e9\u30b0\" BOOLEAN DEFAULT FALSE NOT NULL,\n    \"\u660e\u7d30\u5099\u8003\" TEXT,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u8005\" VARCHAR(50),\n    CONSTRAINT \"fk_\u767a\u6ce8\u660e\u7d30_\u767a\u6ce8\"\n        FOREIGN KEY (\"\u767a\u6ce8\u756a\u53f7\") REFERENCES \"\u767a\u6ce8\u30c7\u30fc\u30bf\"(\"\u767a\u6ce8\u756a\u53f7\"),\n    CONSTRAINT \"fk_\u767a\u6ce8\u660e\u7d30_\u54c1\u76ee\"\n        FOREIGN KEY (\"\u54c1\u76ee\u30b3\u30fc\u30c9\") REFERENCES \"\u54c1\u76ee\u30de\u30b9\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\"),\n    UNIQUE (\"\u767a\u6ce8\u756a\u53f7\", \"\u767a\u6ce8\u884c\u756a\u53f7\")\n);\n\n-- \u8af8\u53e3\u54c1\u76ee\u60c5\u5831\uff08\u30de\u30b9\u30bf\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u306a\u3044\u81e8\u6642\u54c1\u76ee\uff09\nCREATE TABLE \"\u8af8\u53e3\u54c1\u76ee\u60c5\u5831\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u767a\u6ce8\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u767a\u6ce8\u884c\u756a\u53f7\" INTEGER NOT NULL,\n    \"\u54c1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u54c1\u540d\" VARCHAR(100) NOT NULL,\n    \"\u898f\u683c\" VARCHAR(100),\n    \"\u56f3\u756a\u30e1\u30fc\u30ab\u30fc\" VARCHAR(100),\n    \"\u7248\u6570\" VARCHAR(20),\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    UNIQUE (\"\u767a\u6ce8\u756a\u53f7\", \"\u767a\u6ce8\u884c\u756a\u53f7\", \"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"idx_\u767a\u6ce8\u30c7\u30fc\u30bf_\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\" ON \"\u767a\u6ce8\u30c7\u30fc\u30bf\"(\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u767a\u6ce8\u30c7\u30fc\u30bf_\u767a\u6ce8\u65e5\" ON \"\u767a\u6ce8\u30c7\u30fc\u30bf\"(\"\u767a\u6ce8\u65e5\");\nCREATE INDEX \"idx_\u767a\u6ce8\u660e\u7d30_\u767a\u6ce8\u756a\u53f7\" ON \"\u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\"(\"\u767a\u6ce8\u756a\u53f7\");\nCREATE INDEX \"idx_\u767a\u6ce8\u660e\u7d30_\u54c1\u76ee\u30b3\u30fc\u30c9\" ON \"\u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u5358\u4fa1\u30de\u30b9\u30bf_\u54c1\u76ee\u53d6\u5f15\u5148\" ON \"\u5358\u4fa1\u30de\u30b9\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\", \"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\");\n</code></pre>"},{"location":"article/part4/chapter25/#_6","title":"\u30aa\u30fc\u30c0\u60c5\u5831\u30fb\u5834\u6240\u30de\u30b9\u30bf\u30fb\u5358\u4fa1\u30de\u30b9\u30bf\u3068\u306e\u9023\u643a","text":"<p>\u767a\u6ce8\u30c7\u30fc\u30bf\u306f\u4ee5\u4e0b\u306e\u30de\u30b9\u30bf\u60c5\u5831\u3068\u9023\u643a\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part4/chapter25/#_7","title":"\u8af8\u53e3\u54c1\u76ee\u306e\u6271\u3044","text":"<p>\u30de\u30b9\u30bf\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u306a\u3044\u81e8\u6642\u54c1\u76ee\uff08\u8af8\u53e3\u54c1\u76ee\uff09\u3092\u767a\u6ce8\u3059\u308b\u5834\u5408\u3001\u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\u306e\u300c\u8af8\u53e3\u54c1\u76ee\u533a\u5206\u300d\u3092 <code>TRUE</code> \u306b\u8a2d\u5b9a\u3057\u3001\u8af8\u53e3\u54c1\u76ee\u60c5\u5831\u30c6\u30fc\u30d6\u30eb\u306b\u54c1\u76ee\u306e\u8a73\u7d30\u60c5\u5831\u3092\u767b\u9332\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part4/chapter25/#_8","title":"\u7d0d\u671f\u7ba1\u7406\u30fb\u5206\u7d0d\u5bfe\u5fdc","text":"<p>\u767a\u6ce8\u660e\u7d30\u306b\u306f\u300c\u53d7\u5165\u4e88\u5b9a\u65e5\u300d\u3068\u300c\u56de\u7b54\u7d0d\u671f\u300d\u306e 2 \u3064\u306e\u65e5\u4ed8\u3092\u6301\u3061\u307e\u3059\u3002</p> \u30d5\u30a3\u30fc\u30eb\u30c9 \u8aac\u660e \u53d7\u5165\u4e88\u5b9a\u65e5 \u767a\u6ce8\u6642\u306b\u6307\u5b9a\u3057\u305f\u5e0c\u671b\u7d0d\u671f \u56de\u7b54\u7d0d\u671f \u4ed5\u5165\u5148\u304b\u3089\u56de\u7b54\u3055\u308c\u305f\u5b9f\u969b\u306e\u7d0d\u671f <p>\u5206\u7d0d\uff08\u5206\u5272\u7d0d\u54c1\uff09\u306b\u5bfe\u5fdc\u3059\u308b\u305f\u3081\u3001\u767a\u6ce8\u660e\u7d30\u3054\u3068\u306b\u300c\u5165\u8377\u6e08\u6570\u91cf\u300d\u300c\u691c\u67fb\u6e08\u6570\u91cf\u300d\u300c\u691c\u53ce\u6e08\u6570\u91cf\u300d\u3092\u7ba1\u7406\u3057\u307e\u3059\u3002</p>"},{"location":"article/part4/chapter25/#java","title":"Java \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u5b9a\u7fa9","text":"\u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9 Enum <pre><code>// src/main/java/com/example/production/domain/model/purchase/PurchaseOrderStatus.java\npackage com.example.production.domain.model.purchase;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum PurchaseOrderStatus {\n    CREATING(\"\u4f5c\u6210\u4e2d\"),\n    ORDERED(\"\u767a\u6ce8\u6e08\"),\n    PARTIALLY_RECEIVED(\"\u4e00\u90e8\u5165\u8377\"),\n    RECEIVED(\"\u5165\u8377\u5b8c\u4e86\"),\n    ACCEPTED(\"\u691c\u53ce\u5b8c\u4e86\"),\n    CANCELLED(\"\u53d6\u6d88\");\n\n    private final String displayName;\n\n    public static PurchaseOrderStatus fromDisplayName(String displayName) {\n        for (PurchaseOrderStatus status : values()) {\n            if (status.displayName.equals(displayName)) {\n                return status;\n            }\n        }\n        throw new IllegalArgumentException(\"Unknown purchase order status: \" + displayName);\n    }\n}\n</code></pre> \u5165\u8377\u53d7\u5165\u533a\u5206 Enum <pre><code>// src/main/java/com/example/production/domain/model/purchase/ReceivingType.java\npackage com.example.production.domain.model.purchase;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum ReceivingType {\n    NORMAL(\"\u901a\u5e38\u5165\u8377\"),\n    SPLIT(\"\u5206\u5272\u5165\u8377\"),\n    RETURN(\"\u8fd4\u54c1\u5165\u8377\");\n\n    private final String displayName;\n\n    public static ReceivingType fromDisplayName(String displayName) {\n        for (ReceivingType type : values()) {\n            if (type.displayName.equals(displayName)) {\n                return type;\n            }\n        }\n        throw new IllegalArgumentException(\"Unknown receiving type: \" + displayName);\n    }\n}\n</code></pre> \u5358\u4fa1\u30de\u30b9\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/production/domain/model/purchase/UnitPrice.java\npackage com.example.production.domain.model.purchase;\n\nimport com.example.production.domain.model.item.Item;\nimport com.example.production.domain.model.master.Supplier;\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\npublic class UnitPrice {\n    private Integer id;\n    private String itemCode;\n    private String supplierCode;\n    private BigDecimal lotUnitQuantity;\n    private LocalDate effectiveFrom;\n    private LocalDate effectiveTo;\n    private BigDecimal unitPrice;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n\n    // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n    private Item item;\n    private Supplier supplier;\n}\n</code></pre> \u767a\u6ce8\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/production/domain/model/purchase/PurchaseOrder.java\npackage com.example.production.domain.model.purchase;\n\nimport com.example.production.domain.model.master.Supplier;\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.List;\n\n@Data\n@Builder\npublic class PurchaseOrder {\n    private Integer id;\n    private String purchaseOrderNumber;\n    private LocalDate orderDate;\n    private String supplierCode;\n    private String ordererCode;\n    private String departmentCode;\n    private PurchaseOrderStatus status;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n\n    // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n    private Supplier supplier;\n    private List&lt;PurchaseOrderDetail&gt; details;\n}\n</code></pre> \u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/production/domain/model/purchase/PurchaseOrderDetail.java\npackage com.example.production.domain.model.purchase;\n\nimport com.example.production.domain.model.item.Item;\nimport com.example.production.domain.model.plan.Order;\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.List;\n\n@Data\n@Builder\npublic class PurchaseOrderDetail {\n    private Integer id;\n    private String purchaseOrderNumber;\n    private Integer lineNumber;\n    private String orderNumber;\n    private String deliveryLocationCode;\n    private String itemCode;\n    private Boolean miscellaneousItemFlag;\n    private LocalDate expectedReceivingDate;\n    private LocalDate confirmedDeliveryDate;\n    private BigDecimal orderUnitPrice;\n    private BigDecimal orderQuantity;\n    private BigDecimal receivedQuantity;\n    private BigDecimal inspectedQuantity;\n    private BigDecimal acceptedQuantity;\n    private BigDecimal orderAmount;\n    private BigDecimal taxAmount;\n    private Boolean completedFlag;\n    private String detailRemarks;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n\n    // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n    private PurchaseOrder purchaseOrder;\n    private Item item;\n    private Order order;\n    private MiscellaneousItem miscellaneousItem;\n    private List&lt;Receiving&gt; receivings;\n    private List&lt;Acceptance&gt; acceptances;\n}\n</code></pre> \u8af8\u53e3\u54c1\u76ee\u60c5\u5831\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/production/domain/model/purchase/MiscellaneousItem.java\npackage com.example.production.domain.model.purchase;\n\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\npublic class MiscellaneousItem {\n    private Integer id;\n    private String purchaseOrderNumber;\n    private Integer lineNumber;\n    private String itemCode;\n    private String itemName;\n    private String specification;\n    private String drawingNumberMaker;\n    private String version;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n\n    // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n    private PurchaseOrderDetail purchaseOrderDetail;\n}\n</code></pre>"},{"location":"article/part4/chapter25/#typehandler","title":"TypeHandler \u306e\u5b9f\u88c5","text":"<p>PostgreSQL \u306e\u65e5\u672c\u8a9e ENUM \u578b\u3068 Java \u306e\u82f1\u8a9e Enum \u3092\u76f8\u4e92\u5909\u63db\u3059\u308b\u305f\u3081\u306b TypeHandler \u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002</p> PurchaseOrderStatusTypeHandler <pre><code>// src/main/java/com/example/production/infrastructure/persistence/PurchaseOrderStatusTypeHandler.java\npackage com.example.production.infrastructure.persistence;\n\nimport com.example.production.domain.model.purchase.PurchaseOrderStatus;\nimport org.apache.ibatis.type.BaseTypeHandler;\nimport org.apache.ibatis.type.JdbcType;\nimport org.apache.ibatis.type.MappedTypes;\n\nimport java.sql.CallableStatement;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\n\n@MappedTypes(PurchaseOrderStatus.class)\npublic class PurchaseOrderStatusTypeHandler extends BaseTypeHandler&lt;PurchaseOrderStatus&gt; {\n\n    @Override\n    public void setNonNullParameter(PreparedStatement ps, int i, PurchaseOrderStatus parameter, JdbcType jdbcType)\n            throws SQLException {\n        ps.setString(i, parameter.getDisplayName());\n    }\n\n    @Override\n    public PurchaseOrderStatus getNullableResult(ResultSet rs, String columnName) throws SQLException {\n        String value = rs.getString(columnName);\n        return value == null ? null : PurchaseOrderStatus.fromDisplayName(value);\n    }\n\n    @Override\n    public PurchaseOrderStatus getNullableResult(ResultSet rs, int columnIndex) throws SQLException {\n        String value = rs.getString(columnIndex);\n        return value == null ? null : PurchaseOrderStatus.fromDisplayName(value);\n    }\n\n    @Override\n    public PurchaseOrderStatus getNullableResult(CallableStatement cs, int columnIndex) throws SQLException {\n        String value = cs.getString(columnIndex);\n        return value == null ? null : PurchaseOrderStatus.fromDisplayName(value);\n    }\n}\n</code></pre> ReceivingTypeTypeHandler <pre><code>// src/main/java/com/example/production/infrastructure/persistence/ReceivingTypeTypeHandler.java\npackage com.example.production.infrastructure.persistence;\n\nimport com.example.production.domain.model.purchase.ReceivingType;\nimport org.apache.ibatis.type.BaseTypeHandler;\nimport org.apache.ibatis.type.JdbcType;\nimport org.apache.ibatis.type.MappedTypes;\n\nimport java.sql.CallableStatement;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\n\n@MappedTypes(ReceivingType.class)\npublic class ReceivingTypeTypeHandler extends BaseTypeHandler&lt;ReceivingType&gt; {\n\n    @Override\n    public void setNonNullParameter(PreparedStatement ps, int i, ReceivingType parameter, JdbcType jdbcType)\n            throws SQLException {\n        ps.setString(i, parameter.getDisplayName());\n    }\n\n    @Override\n    public ReceivingType getNullableResult(ResultSet rs, String columnName) throws SQLException {\n        String value = rs.getString(columnName);\n        return value == null ? null : ReceivingType.fromDisplayName(value);\n    }\n\n    @Override\n    public ReceivingType getNullableResult(ResultSet rs, int columnIndex) throws SQLException {\n        String value = rs.getString(columnIndex);\n        return value == null ? null : ReceivingType.fromDisplayName(value);\n    }\n\n    @Override\n    public ReceivingType getNullableResult(CallableStatement cs, int columnIndex) throws SQLException {\n        String value = cs.getString(columnIndex);\n        return value == null ? null : ReceivingType.fromDisplayName(value);\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter25/#mybatis-mapper-xml","title":"MyBatis Mapper XML","text":"UnitPriceMapper.xml <pre><code>&lt;!-- src/main/resources/com/example/production/infrastructure/persistence/mapper/UnitPriceMapper.xml --&gt;\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.production.infrastructure.persistence.mapper.UnitPriceMapper\"&gt;\n\n    &lt;resultMap id=\"UnitPriceResultMap\" type=\"com.example.production.domain.model.purchase.UnitPrice\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"itemCode\" column=\"\u54c1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"supplierCode\" column=\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"lotUnitQuantity\" column=\"\u30ed\u30c3\u30c8\u5358\u4f4d\u6570\"/&gt;\n        &lt;result property=\"effectiveFrom\" column=\"\u4f7f\u7528\u958b\u59cb\u65e5\"/&gt;\n        &lt;result property=\"effectiveTo\" column=\"\u4f7f\u7528\u505c\u6b62\u65e5\"/&gt;\n        &lt;result property=\"unitPrice\" column=\"\u5358\u4fa1\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"createdBy\" column=\"\u4f5c\u6210\u8005\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedBy\" column=\"\u66f4\u65b0\u8005\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;insert id=\"insert\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u5358\u4fa1\u30de\u30b9\u30bf\" (\n            \"\u54c1\u76ee\u30b3\u30fc\u30c9\", \"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\", \"\u30ed\u30c3\u30c8\u5358\u4f4d\u6570\", \"\u4f7f\u7528\u958b\u59cb\u65e5\",\n            \"\u4f7f\u7528\u505c\u6b62\u65e5\", \"\u5358\u4fa1\", \"\u4f5c\u6210\u8005\"\n        ) VALUES (\n            #{itemCode},\n            #{supplierCode},\n            #{lotUnitQuantity},\n            #{effectiveFrom},\n            #{effectiveTo},\n            #{unitPrice},\n            #{createdBy}\n        )\n    &lt;/insert&gt;\n\n    &lt;select id=\"findEffectiveUnitPrice\" resultMap=\"UnitPriceResultMap\"&gt;\n        SELECT * FROM \"\u5358\u4fa1\u30de\u30b9\u30bf\"\n        WHERE \"\u54c1\u76ee\u30b3\u30fc\u30c9\" = #{itemCode}\n          AND \"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\" = #{supplierCode}\n          AND \"\u4f7f\u7528\u958b\u59cb\u65e5\" &amp;lt;= #{date}\n          AND (\"\u4f7f\u7528\u505c\u6b62\u65e5\" IS NULL OR \"\u4f7f\u7528\u505c\u6b62\u65e5\" &amp;gt;= #{date})\n        ORDER BY \"\u4f7f\u7528\u958b\u59cb\u65e5\" DESC\n        LIMIT 1\n    &lt;/select&gt;\n\n    &lt;delete id=\"deleteAll\"&gt;\n        DELETE FROM \"\u5358\u4fa1\u30de\u30b9\u30bf\"\n    &lt;/delete&gt;\n&lt;/mapper&gt;\n</code></pre> PurchaseOrderMapper.xml <pre><code>&lt;!-- src/main/resources/com/example/production/infrastructure/persistence/mapper/PurchaseOrderMapper.xml --&gt;\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.production.infrastructure.persistence.mapper.PurchaseOrderMapper\"&gt;\n\n    &lt;resultMap id=\"PurchaseOrderResultMap\" type=\"com.example.production.domain.model.purchase.PurchaseOrder\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"purchaseOrderNumber\" column=\"\u767a\u6ce8\u756a\u53f7\"/&gt;\n        &lt;result property=\"orderDate\" column=\"\u767a\u6ce8\u65e5\"/&gt;\n        &lt;result property=\"supplierCode\" column=\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"ordererCode\" column=\"\u767a\u6ce8\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"departmentCode\" column=\"\u767a\u6ce8\u90e8\u9580\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"status\" column=\"\u30b9\u30c6\u30fc\u30bf\u30b9\"\n                typeHandler=\"com.example.production.infrastructure.persistence.PurchaseOrderStatusTypeHandler\"/&gt;\n        &lt;result property=\"remarks\" column=\"\u5099\u8003\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"createdBy\" column=\"\u4f5c\u6210\u8005\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedBy\" column=\"\u66f4\u65b0\u8005\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;insert id=\"insert\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u767a\u6ce8\u30c7\u30fc\u30bf\" (\n            \"\u767a\u6ce8\u756a\u53f7\", \"\u767a\u6ce8\u65e5\", \"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\", \"\u767a\u6ce8\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\",\n            \"\u767a\u6ce8\u90e8\u9580\u30b3\u30fc\u30c9\", \"\u30b9\u30c6\u30fc\u30bf\u30b9\", \"\u5099\u8003\", \"\u4f5c\u6210\u8005\"\n        ) VALUES (\n            #{purchaseOrderNumber},\n            #{orderDate},\n            #{supplierCode},\n            #{ordererCode},\n            #{departmentCode},\n            #{status, typeHandler=com.example.production.infrastructure.persistence.PurchaseOrderStatusTypeHandler}::\u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9,\n            #{remarks},\n            #{createdBy}\n        )\n    &lt;/insert&gt;\n\n    &lt;select id=\"findByPurchaseOrderNumber\" resultMap=\"PurchaseOrderResultMap\"&gt;\n        SELECT * FROM \"\u767a\u6ce8\u30c7\u30fc\u30bf\" WHERE \"\u767a\u6ce8\u756a\u53f7\" = #{purchaseOrderNumber}\n    &lt;/select&gt;\n\n    &lt;select id=\"findLatestPurchaseOrderNumber\" resultType=\"string\"&gt;\n        SELECT \"\u767a\u6ce8\u756a\u53f7\" FROM \"\u767a\u6ce8\u30c7\u30fc\u30bf\"\n        WHERE \"\u767a\u6ce8\u756a\u53f7\" LIKE #{prefix}\n        ORDER BY \"\u767a\u6ce8\u756a\u53f7\" DESC\n        LIMIT 1\n    &lt;/select&gt;\n\n    &lt;update id=\"updateStatus\"&gt;\n        UPDATE \"\u767a\u6ce8\u30c7\u30fc\u30bf\"\n        SET \"\u30b9\u30c6\u30fc\u30bf\u30b9\" = #{status, typeHandler=com.example.production.infrastructure.persistence.PurchaseOrderStatusTypeHandler}::\u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9,\n            \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP\n        WHERE \"\u767a\u6ce8\u756a\u53f7\" = #{purchaseOrderNumber}\n    &lt;/update&gt;\n\n    &lt;delete id=\"deleteAll\"&gt;\n        DELETE FROM \"\u767a\u6ce8\u30c7\u30fc\u30bf\"\n    &lt;/delete&gt;\n&lt;/mapper&gt;\n</code></pre> PurchaseOrderDetailMapper.xml <pre><code>&lt;!-- src/main/resources/com/example/production/infrastructure/persistence/mapper/PurchaseOrderDetailMapper.xml --&gt;\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.production.infrastructure.persistence.mapper.PurchaseOrderDetailMapper\"&gt;\n\n    &lt;resultMap id=\"PurchaseOrderDetailResultMap\" type=\"com.example.production.domain.model.purchase.PurchaseOrderDetail\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"purchaseOrderNumber\" column=\"\u767a\u6ce8\u756a\u53f7\"/&gt;\n        &lt;result property=\"lineNumber\" column=\"\u767a\u6ce8\u884c\u756a\u53f7\"/&gt;\n        &lt;result property=\"orderNumber\" column=\"\u30aa\u30fc\u30c0NO\"/&gt;\n        &lt;result property=\"deliveryLocationCode\" column=\"\u7d0d\u5165\u5834\u6240\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"itemCode\" column=\"\u54c1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"miscellaneousItemFlag\" column=\"\u8af8\u53e3\u54c1\u76ee\u533a\u5206\"/&gt;\n        &lt;result property=\"expectedReceivingDate\" column=\"\u53d7\u5165\u4e88\u5b9a\u65e5\"/&gt;\n        &lt;result property=\"confirmedDeliveryDate\" column=\"\u56de\u7b54\u7d0d\u671f\"/&gt;\n        &lt;result property=\"orderUnitPrice\" column=\"\u767a\u6ce8\u5358\u4fa1\"/&gt;\n        &lt;result property=\"orderQuantity\" column=\"\u767a\u6ce8\u6570\u91cf\"/&gt;\n        &lt;result property=\"receivedQuantity\" column=\"\u5165\u8377\u6e08\u6570\u91cf\"/&gt;\n        &lt;result property=\"inspectedQuantity\" column=\"\u691c\u67fb\u6e08\u6570\u91cf\"/&gt;\n        &lt;result property=\"acceptedQuantity\" column=\"\u691c\u53ce\u6e08\u6570\u91cf\"/&gt;\n        &lt;result property=\"orderAmount\" column=\"\u767a\u6ce8\u91d1\u984d\"/&gt;\n        &lt;result property=\"taxAmount\" column=\"\u6d88\u8cbb\u7a0e\u91d1\u984d\"/&gt;\n        &lt;result property=\"completedFlag\" column=\"\u5b8c\u4e86\u30d5\u30e9\u30b0\"/&gt;\n        &lt;result property=\"detailRemarks\" column=\"\u660e\u7d30\u5099\u8003\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"createdBy\" column=\"\u4f5c\u6210\u8005\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedBy\" column=\"\u66f4\u65b0\u8005\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;insert id=\"insert\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\" (\n            \"\u767a\u6ce8\u756a\u53f7\", \"\u767a\u6ce8\u884c\u756a\u53f7\", \"\u30aa\u30fc\u30c0NO\", \"\u7d0d\u5165\u5834\u6240\u30b3\u30fc\u30c9\", \"\u54c1\u76ee\u30b3\u30fc\u30c9\",\n            \"\u8af8\u53e3\u54c1\u76ee\u533a\u5206\", \"\u53d7\u5165\u4e88\u5b9a\u65e5\", \"\u56de\u7b54\u7d0d\u671f\", \"\u767a\u6ce8\u5358\u4fa1\", \"\u767a\u6ce8\u6570\u91cf\",\n            \"\u767a\u6ce8\u91d1\u984d\", \"\u6d88\u8cbb\u7a0e\u91d1\u984d\", \"\u4f5c\u6210\u8005\"\n        ) VALUES (\n            #{purchaseOrderNumber},\n            #{lineNumber},\n            #{orderNumber},\n            #{deliveryLocationCode},\n            #{itemCode},\n            #{miscellaneousItemFlag},\n            #{expectedReceivingDate},\n            #{confirmedDeliveryDate},\n            #{orderUnitPrice},\n            #{orderQuantity},\n            #{orderAmount},\n            #{taxAmount},\n            #{createdBy}\n        )\n    &lt;/insert&gt;\n\n    &lt;select id=\"findByPurchaseOrderNumber\" resultMap=\"PurchaseOrderDetailResultMap\"&gt;\n        SELECT * FROM \"\u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\"\n        WHERE \"\u767a\u6ce8\u756a\u53f7\" = #{purchaseOrderNumber}\n        ORDER BY \"\u767a\u6ce8\u884c\u756a\u53f7\"\n    &lt;/select&gt;\n\n    &lt;select id=\"findByPurchaseOrderNumberAndLineNumber\" resultMap=\"PurchaseOrderDetailResultMap\"&gt;\n        SELECT * FROM \"\u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\"\n        WHERE \"\u767a\u6ce8\u756a\u53f7\" = #{purchaseOrderNumber} AND \"\u767a\u6ce8\u884c\u756a\u53f7\" = #{lineNumber}\n    &lt;/select&gt;\n\n    &lt;update id=\"updateReceivedQuantity\"&gt;\n        UPDATE \"\u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\"\n        SET \"\u5165\u8377\u6e08\u6570\u91cf\" = #{receivedQuantity}, \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP\n        WHERE \"\u767a\u6ce8\u756a\u53f7\" = #{purchaseOrderNumber} AND \"\u767a\u6ce8\u884c\u756a\u53f7\" = #{lineNumber}\n    &lt;/update&gt;\n\n    &lt;update id=\"updateAcceptedQuantity\"&gt;\n        UPDATE \"\u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\"\n        SET \"\u691c\u53ce\u6e08\u6570\u91cf\" = #{acceptedQuantity}, \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP\n        WHERE \"\u767a\u6ce8\u756a\u53f7\" = #{purchaseOrderNumber} AND \"\u767a\u6ce8\u884c\u756a\u53f7\" = #{lineNumber}\n    &lt;/update&gt;\n\n    &lt;delete id=\"deleteAll\"&gt;\n        DELETE FROM \"\u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\"\n    &lt;/delete&gt;\n&lt;/mapper&gt;\n</code></pre>"},{"location":"article/part4/chapter25/#mapper","title":"Mapper \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9","text":"UnitPriceMapper <pre><code>// src/main/java/com/example/production/infrastructure/persistence/mapper/UnitPriceMapper.java\npackage com.example.production.infrastructure.persistence.mapper;\n\nimport com.example.production.domain.model.purchase.UnitPrice;\nimport org.apache.ibatis.annotations.Mapper;\nimport org.apache.ibatis.annotations.Param;\n\nimport java.time.LocalDate;\n\n@Mapper\npublic interface UnitPriceMapper {\n    void insert(UnitPrice unitPrice);\n    UnitPrice findEffectiveUnitPrice(@Param(\"itemCode\") String itemCode,\n                                     @Param(\"supplierCode\") String supplierCode,\n                                     @Param(\"date\") LocalDate date);\n    void deleteAll();\n}\n</code></pre> PurchaseOrderMapper <pre><code>// src/main/java/com/example/production/infrastructure/persistence/mapper/PurchaseOrderMapper.java\npackage com.example.production.infrastructure.persistence.mapper;\n\nimport com.example.production.domain.model.purchase.PurchaseOrder;\nimport com.example.production.domain.model.purchase.PurchaseOrderStatus;\nimport org.apache.ibatis.annotations.Mapper;\nimport org.apache.ibatis.annotations.Param;\n\n@Mapper\npublic interface PurchaseOrderMapper {\n    void insert(PurchaseOrder purchaseOrder);\n    PurchaseOrder findByPurchaseOrderNumber(String purchaseOrderNumber);\n    String findLatestPurchaseOrderNumber(String prefix);\n    void updateStatus(@Param(\"purchaseOrderNumber\") String purchaseOrderNumber,\n                      @Param(\"status\") PurchaseOrderStatus status);\n    void deleteAll();\n}\n</code></pre> PurchaseOrderDetailMapper <pre><code>// src/main/java/com/example/production/infrastructure/persistence/mapper/PurchaseOrderDetailMapper.java\npackage com.example.production.infrastructure.persistence.mapper;\n\nimport com.example.production.domain.model.purchase.PurchaseOrderDetail;\nimport org.apache.ibatis.annotations.Mapper;\nimport org.apache.ibatis.annotations.Param;\n\nimport java.math.BigDecimal;\nimport java.util.List;\n\n@Mapper\npublic interface PurchaseOrderDetailMapper {\n    void insert(PurchaseOrderDetail detail);\n    List&lt;PurchaseOrderDetail&gt; findByPurchaseOrderNumber(String purchaseOrderNumber);\n    PurchaseOrderDetail findByPurchaseOrderNumberAndLineNumber(\n            @Param(\"purchaseOrderNumber\") String purchaseOrderNumber,\n            @Param(\"lineNumber\") Integer lineNumber);\n    void updateReceivedQuantity(@Param(\"purchaseOrderNumber\") String purchaseOrderNumber,\n                                @Param(\"lineNumber\") Integer lineNumber,\n                                @Param(\"receivedQuantity\") BigDecimal receivedQuantity);\n    void updateAcceptedQuantity(@Param(\"purchaseOrderNumber\") String purchaseOrderNumber,\n                                @Param(\"lineNumber\") Integer lineNumber,\n                                @Param(\"acceptedQuantity\") BigDecimal acceptedQuantity);\n    void deleteAll();\n}\n</code></pre>"},{"location":"article/part4/chapter25/#_9","title":"\u767a\u6ce8\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":"PurchaseOrderService <pre><code>// src/main/java/com/example/production/application/service/PurchaseOrderService.java\npackage com.example.production.application.service;\n\nimport com.example.production.domain.model.purchase.*;\nimport com.example.production.infrastructure.persistence.mapper.*;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.math.BigDecimal;\nimport java.math.RoundingMode;\nimport java.time.LocalDate;\nimport java.time.format.DateTimeFormatter;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Service\n@RequiredArgsConstructor\npublic class PurchaseOrderService {\n\n    private final PurchaseOrderMapper purchaseOrderMapper;\n    private final PurchaseOrderDetailMapper purchaseOrderDetailMapper;\n    private final UnitPriceMapper unitPriceMapper;\n\n    /**\n     * \u767a\u6ce8\u756a\u53f7\u3092\u751f\u6210\u3059\u308b\n     */\n    private String generatePurchaseOrderNumber(LocalDate orderDate) {\n        String prefix = \"PO-\" + orderDate.format(DateTimeFormatter.ofPattern(\"yyyyMM\")) + \"-\";\n        String latestNumber = purchaseOrderMapper.findLatestPurchaseOrderNumber(prefix + \"%\");\n\n        int sequence = 1;\n        if (latestNumber != null) {\n            int currentSequence = Integer.parseInt(latestNumber.substring(latestNumber.length() - 4));\n            sequence = currentSequence + 1;\n        }\n\n        return prefix + String.format(\"%04d\", sequence);\n    }\n\n    /**\n     * \u767a\u6ce8\u3092\u4f5c\u6210\u3059\u308b\n     */\n    @Transactional\n    public PurchaseOrder createPurchaseOrder(PurchaseOrderCreateInput input) {\n        String purchaseOrderNumber = generatePurchaseOrderNumber(input.getOrderDate());\n        BigDecimal taxRate = input.getTaxRate() != null ? input.getTaxRate() : new BigDecimal(\"10\");\n\n        // \u767a\u6ce8\u30d8\u30c3\u30c0\u3092\u4f5c\u6210\n        PurchaseOrder purchaseOrder = PurchaseOrder.builder()\n                .purchaseOrderNumber(purchaseOrderNumber)\n                .orderDate(input.getOrderDate())\n                .supplierCode(input.getSupplierCode())\n                .ordererCode(input.getOrdererCode())\n                .departmentCode(input.getDepartmentCode())\n                .status(PurchaseOrderStatus.CREATING)\n                .remarks(input.getRemarks())\n                .build();\n        purchaseOrderMapper.insert(purchaseOrder);\n\n        // \u767a\u6ce8\u660e\u7d30\u3092\u4f5c\u6210\n        List&lt;PurchaseOrderDetail&gt; details = new ArrayList&lt;&gt;();\n        int lineNumber = 0;\n\n        for (PurchaseOrderDetailInput detailInput : input.getDetails()) {\n            lineNumber++;\n\n            // \u5358\u4fa1\u3092\u53d6\u5f97\n            UnitPrice unitPrice = unitPriceMapper.findEffectiveUnitPrice(\n                    detailInput.getItemCode(),\n                    input.getSupplierCode(),\n                    input.getOrderDate()\n            );\n\n            if (unitPrice == null) {\n                throw new IllegalArgumentException(\n                        \"Unit price not found: \" + detailInput.getItemCode() + \" / \" + input.getSupplierCode());\n            }\n\n            // \u91d1\u984d\u8a08\u7b97\n            BigDecimal orderAmount = unitPrice.getUnitPrice().multiply(detailInput.getOrderQuantity());\n            BigDecimal taxAmount = orderAmount.multiply(taxRate)\n                    .divide(new BigDecimal(\"100\"), 0, RoundingMode.HALF_UP);\n\n            PurchaseOrderDetail detail = PurchaseOrderDetail.builder()\n                    .purchaseOrderNumber(purchaseOrderNumber)\n                    .lineNumber(lineNumber)\n                    .orderNumber(detailInput.getOrderNumber())\n                    .deliveryLocationCode(detailInput.getDeliveryLocationCode())\n                    .itemCode(detailInput.getItemCode())\n                    .miscellaneousItemFlag(false)\n                    .expectedReceivingDate(detailInput.getExpectedReceivingDate())\n                    .orderUnitPrice(unitPrice.getUnitPrice())\n                    .orderQuantity(detailInput.getOrderQuantity())\n                    .orderAmount(orderAmount)\n                    .taxAmount(taxAmount)\n                    .build();\n            purchaseOrderDetailMapper.insert(detail);\n\n            details.add(detail);\n        }\n\n        purchaseOrder.setDetails(details);\n        return purchaseOrder;\n    }\n\n    /**\n     * \u767a\u6ce8\u3092\u78ba\u5b9a\u3059\u308b\n     */\n    @Transactional\n    public PurchaseOrder confirmPurchaseOrder(String purchaseOrderNumber) {\n        PurchaseOrder purchaseOrder = purchaseOrderMapper.findByPurchaseOrderNumber(purchaseOrderNumber);\n\n        if (purchaseOrder == null) {\n            throw new IllegalArgumentException(\"Purchase order not found: \" + purchaseOrderNumber);\n        }\n\n        if (purchaseOrder.getStatus() != PurchaseOrderStatus.CREATING) {\n            throw new IllegalStateException(\"Only creating purchase orders can be confirmed: \" + purchaseOrderNumber);\n        }\n\n        purchaseOrderMapper.updateStatus(purchaseOrderNumber, PurchaseOrderStatus.ORDERED);\n        purchaseOrder.setStatus(PurchaseOrderStatus.ORDERED);\n        return purchaseOrder;\n    }\n\n    /**\n     * \u767a\u6ce8\u3092\u53d6\u6d88\u3059\u308b\n     */\n    @Transactional\n    public PurchaseOrder cancelPurchaseOrder(String purchaseOrderNumber) {\n        PurchaseOrder purchaseOrder = purchaseOrderMapper.findByPurchaseOrderNumber(purchaseOrderNumber);\n\n        if (purchaseOrder == null) {\n            throw new IllegalArgumentException(\"Purchase order not found: \" + purchaseOrderNumber);\n        }\n\n        List&lt;PurchaseOrderDetail&gt; details = purchaseOrderDetailMapper.findByPurchaseOrderNumber(purchaseOrderNumber);\n        boolean hasReceived = details.stream()\n                .anyMatch(d -&gt; d.getReceivedQuantity() != null &amp;&amp;\n                        d.getReceivedQuantity().compareTo(BigDecimal.ZERO) &gt; 0);\n\n        if (hasReceived) {\n            throw new IllegalStateException(\"Cannot cancel purchase order with received items: \" + purchaseOrderNumber);\n        }\n\n        purchaseOrderMapper.updateStatus(purchaseOrderNumber, PurchaseOrderStatus.CANCELLED);\n        purchaseOrder.setStatus(PurchaseOrderStatus.CANCELLED);\n        return purchaseOrder;\n    }\n}\n</code></pre> \u5165\u529b DTO \u30af\u30e9\u30b9 <pre><code>// src/main/java/com/example/production/application/service/PurchaseOrderCreateInput.java\npackage com.example.production.application.service;\n\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.util.List;\n\n@Data\n@Builder\npublic class PurchaseOrderCreateInput {\n    private String supplierCode;\n    private LocalDate orderDate;\n    private String ordererCode;\n    private String departmentCode;\n    private BigDecimal taxRate;\n    private String remarks;\n    private List&lt;PurchaseOrderDetailInput&gt; details;\n}\n</code></pre> <pre><code>// src/main/java/com/example/production/application/service/PurchaseOrderDetailInput.java\npackage com.example.production.application.service;\n\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\n\n@Data\n@Builder\npublic class PurchaseOrderDetailInput {\n    private String itemCode;\n    private BigDecimal orderQuantity;\n    private LocalDate expectedReceivingDate;\n    private String orderNumber;\n    private String deliveryLocationCode;\n}\n</code></pre>"},{"location":"article/part4/chapter25/#tdd","title":"TDD: \u767a\u6ce8\u30c7\u30fc\u30bf\u306e\u767b\u9332\u30c6\u30b9\u30c8","text":"PurchaseOrderServiceTest <pre><code>// src/test/java/com/example/production/application/service/PurchaseOrderServiceTest.java\npackage com.example.production.application.service;\n\nimport com.example.production.domain.model.item.Item;\nimport com.example.production.domain.model.item.ItemCategory;\nimport com.example.production.domain.model.master.Supplier;\nimport com.example.production.domain.model.purchase.*;\nimport com.example.production.infrastructure.persistence.mapper.*;\nimport org.junit.jupiter.api.*;\nimport org.mybatis.spring.boot.test.autoconfigure.MybatisTest;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.jdbc.AutoConfigureTestDatabase;\nimport org.springframework.context.annotation.Import;\nimport org.springframework.test.context.DynamicPropertyRegistry;\nimport org.springframework.test.context.DynamicPropertySource;\nimport org.testcontainers.containers.PostgreSQLContainer;\nimport org.testcontainers.junit.jupiter.Container;\nimport org.testcontainers.junit.jupiter.Testcontainers;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.util.List;\n\nimport static org.assertj.core.api.Assertions.*;\n\n@MybatisTest\n@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\n@Import(PurchaseOrderService.class)\n@Testcontainers\n@DisplayName(\"\u767a\u6ce8\u696d\u52d9\")\nclass PurchaseOrderServiceTest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:15\")\n            .withDatabaseName(\"testdb\")\n            .withUsername(\"testuser\")\n            .withPassword(\"testpass\");\n\n    @DynamicPropertySource\n    static void configureProperties(DynamicPropertyRegistry registry) {\n        registry.add(\"spring.datasource.url\", postgres::getJdbcUrl);\n        registry.add(\"spring.datasource.username\", postgres::getUsername);\n        registry.add(\"spring.datasource.password\", postgres::getPassword);\n    }\n\n    @Autowired\n    private PurchaseOrderService purchaseOrderService;\n\n    @Autowired\n    private PurchaseOrderMapper purchaseOrderMapper;\n\n    @Autowired\n    private PurchaseOrderDetailMapper purchaseOrderDetailMapper;\n\n    @Autowired\n    private ItemMapper itemMapper;\n\n    @Autowired\n    private SupplierMapper supplierMapper;\n\n    @Autowired\n    private UnitPriceMapper unitPriceMapper;\n\n    @BeforeEach\n    void setUp() {\n        purchaseOrderDetailMapper.deleteAll();\n        purchaseOrderMapper.deleteAll();\n        unitPriceMapper.deleteAll();\n        supplierMapper.deleteAll();\n        itemMapper.deleteAll();\n    }\n\n    @Nested\n    @DisplayName(\"\u767a\u6ce8\u30c7\u30fc\u30bf\u306e\u4f5c\u6210\")\n    class PurchaseOrderCreation {\n\n        @Test\n        @DisplayName(\"\u8cfc\u8cb7\u30aa\u30fc\u30c0\u304b\u3089\u767a\u6ce8\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\u3067\u304d\u308b\")\n        void canCreatePurchaseOrderFromOrder() {\n            // Arrange: \u30de\u30b9\u30bf\u30c7\u30fc\u30bf\u3092\u6e96\u5099\n            Supplier supplier = Supplier.builder()\n                    .supplierCode(\"SUP-001\")\n                    .effectiveFrom(LocalDate.of(2025, 1, 1))\n                    .supplierName(\"\u30c6\u30b9\u30c8\u4ed5\u5165\u5148\u682a\u5f0f\u4f1a\u793e\")\n                    .supplierNameKana(\"\u30c6\u30b9\u30c8\u30b7\u30a4\u30ec\u30b5\u30ad\u30ab\u30d6\u30b7\u30ad\u30ac\u30a4\u30b7\u30e3\")\n                    .build();\n            supplierMapper.insert(supplier);\n\n            Item item = Item.builder()\n                    .itemCode(\"MAT-001\")\n                    .effectiveFrom(LocalDate.of(2025, 1, 1))\n                    .itemName(\"\u6750\u6599A\")\n                    .itemCategory(ItemCategory.MATERIAL)\n                    .build();\n            itemMapper.insert(item);\n\n            UnitPrice unitPrice = UnitPrice.builder()\n                    .itemCode(\"MAT-001\")\n                    .supplierCode(\"SUP-001\")\n                    .effectiveFrom(LocalDate.of(2025, 1, 1))\n                    .unitPrice(new BigDecimal(\"1000\"))\n                    .build();\n            unitPriceMapper.insert(unitPrice);\n\n            // Act: \u767a\u6ce8\u3092\u4f5c\u6210\n            PurchaseOrderCreateInput input = PurchaseOrderCreateInput.builder()\n                    .supplierCode(\"SUP-001\")\n                    .orderDate(LocalDate.of(2025, 1, 15))\n                    .taxRate(new BigDecimal(\"10\"))\n                    .details(List.of(\n                            PurchaseOrderDetailInput.builder()\n                                    .itemCode(\"MAT-001\")\n                                    .orderQuantity(new BigDecimal(\"100\"))\n                                    .expectedReceivingDate(LocalDate.of(2025, 1, 25))\n                                    .build()\n                    ))\n                    .build();\n\n            PurchaseOrder purchaseOrder = purchaseOrderService.createPurchaseOrder(input);\n\n            // Assert\n            assertThat(purchaseOrder).isNotNull();\n            assertThat(purchaseOrder.getPurchaseOrderNumber()).startsWith(\"PO-\");\n            assertThat(purchaseOrder.getStatus()).isEqualTo(PurchaseOrderStatus.CREATING);\n            assertThat(purchaseOrder.getDetails()).hasSize(1);\n            assertThat(purchaseOrder.getDetails().get(0).getOrderQuantity())\n                    .isEqualByComparingTo(new BigDecimal(\"100\"));\n            assertThat(purchaseOrder.getDetails().get(0).getOrderUnitPrice())\n                    .isEqualByComparingTo(new BigDecimal(\"1000\"));\n            assertThat(purchaseOrder.getDetails().get(0).getOrderAmount())\n                    .isEqualByComparingTo(new BigDecimal(\"100000\"));\n        }\n\n        @Test\n        @DisplayName(\"\u767a\u6ce8\u3092\u767a\u6ce8\u6e08\u30b9\u30c6\u30fc\u30bf\u30b9\u306b\u5909\u66f4\u3067\u304d\u308b\")\n        void canConfirmPurchaseOrder() {\n            // Arrange: \u767a\u6ce8\u30c7\u30fc\u30bf\u3092\u6e96\u5099\n            Supplier supplier = Supplier.builder()\n                    .supplierCode(\"SUP-003\")\n                    .effectiveFrom(LocalDate.of(2025, 1, 1))\n                    .supplierName(\"\u30b9\u30c6\u30fc\u30bf\u30b9\u78ba\u8a8d\u7528\u4ed5\u5165\u5148\")\n                    .build();\n            supplierMapper.insert(supplier);\n\n            Item item = Item.builder()\n                    .itemCode(\"MAT-004\")\n                    .effectiveFrom(LocalDate.of(2025, 1, 1))\n                    .itemName(\"\u6750\u6599D\")\n                    .itemCategory(ItemCategory.MATERIAL)\n                    .build();\n            itemMapper.insert(item);\n\n            unitPriceMapper.insert(UnitPrice.builder()\n                    .itemCode(\"MAT-004\")\n                    .supplierCode(\"SUP-003\")\n                    .effectiveFrom(LocalDate.of(2025, 1, 1))\n                    .unitPrice(new BigDecimal(\"2000\"))\n                    .build());\n\n            PurchaseOrderCreateInput input = PurchaseOrderCreateInput.builder()\n                    .supplierCode(\"SUP-003\")\n                    .orderDate(LocalDate.of(2025, 1, 15))\n                    .details(List.of(\n                            PurchaseOrderDetailInput.builder()\n                                    .itemCode(\"MAT-004\")\n                                    .orderQuantity(new BigDecimal(\"10\"))\n                                    .expectedReceivingDate(LocalDate.of(2025, 1, 25))\n                                    .build()\n                    ))\n                    .build();\n\n            PurchaseOrder purchaseOrder = purchaseOrderService.createPurchaseOrder(input);\n\n            // Act: \u767a\u6ce8\u78ba\u5b9a\n            PurchaseOrder confirmedOrder = purchaseOrderService.confirmPurchaseOrder(\n                    purchaseOrder.getPurchaseOrderNumber());\n\n            // Assert\n            assertThat(confirmedOrder.getStatus()).isEqualTo(PurchaseOrderStatus.ORDERED);\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u6d88\u8cbb\u7a0e\u8a08\u7b97\")\n    class TaxCalculation {\n\n        @Test\n        @DisplayName(\"\u6d88\u8cbb\u7a0e\u984d\u304c\u6b63\u3057\u304f\u8a08\u7b97\u3055\u308c\u308b\")\n        void calculatesTaxCorrectly() {\n            // Arrange\n            Supplier supplier = Supplier.builder()\n                    .supplierCode(\"SUP-004\")\n                    .effectiveFrom(LocalDate.of(2025, 1, 1))\n                    .supplierName(\"\u6d88\u8cbb\u7a0e\u78ba\u8a8d\u7528\u4ed5\u5165\u5148\")\n                    .build();\n            supplierMapper.insert(supplier);\n\n            Item item = Item.builder()\n                    .itemCode(\"MAT-005\")\n                    .effectiveFrom(LocalDate.of(2025, 1, 1))\n                    .itemName(\"\u6750\u6599E\")\n                    .itemCategory(ItemCategory.MATERIAL)\n                    .build();\n            itemMapper.insert(item);\n\n            unitPriceMapper.insert(UnitPrice.builder()\n                    .itemCode(\"MAT-005\")\n                    .supplierCode(\"SUP-004\")\n                    .effectiveFrom(LocalDate.of(2025, 1, 1))\n                    .unitPrice(new BigDecimal(\"1000\"))\n                    .build());\n\n            // Act\n            PurchaseOrderCreateInput input = PurchaseOrderCreateInput.builder()\n                    .supplierCode(\"SUP-004\")\n                    .orderDate(LocalDate.of(2025, 1, 15))\n                    .taxRate(new BigDecimal(\"10\"))\n                    .details(List.of(\n                            PurchaseOrderDetailInput.builder()\n                                    .itemCode(\"MAT-005\")\n                                    .orderQuantity(new BigDecimal(\"100\"))\n                                    .expectedReceivingDate(LocalDate.of(2025, 1, 25))\n                                    .build()\n                    ))\n                    .build();\n\n            PurchaseOrder purchaseOrder = purchaseOrderService.createPurchaseOrder(input);\n\n            // Assert: 100 \u00d7 1000 = 100,000\u5186\u3001\u6d88\u8cbb\u7a0e 10,000\u5186\n            assertThat(purchaseOrder.getDetails().get(0).getOrderAmount())\n                    .isEqualByComparingTo(new BigDecimal(\"100000\"));\n            assertThat(purchaseOrder.getDetails().get(0).getTaxAmount())\n                    .isEqualByComparingTo(new BigDecimal(\"10000\"));\n        }\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter25/#252-db","title":"25.2 \u5165\u8377\u30fb\u691c\u53ce\u696d\u52d9\u306e DB \u8a2d\u8a08","text":"<p>\u5165\u8377\u30fb\u691c\u53ce\u696d\u52d9\u306f\u3001\u767a\u6ce8\u3057\u305f\u54c1\u76ee\u304c\u7d0d\u54c1\u3055\u308c\u305f\u5f8c\u306e\u4e00\u9023\u306e\u51e6\u7406\u3092\u7ba1\u7406\u3057\u307e\u3059\u3002</p>"},{"location":"article/part4/chapter25/#_10","title":"\u5165\u8377\u30fb\u53d7\u5165\u696d\u52d9\u306e\u6d41\u308c","text":""},{"location":"article/part4/chapter25/#_11","title":"\u5165\u8377\u30fb\u691c\u53ce\u95a2\u9023\u306e\u30b9\u30ad\u30fc\u30de\u8a2d\u8a08","text":""},{"location":"article/part4/chapter25/#_12","title":"\u30c6\u30fc\u30d6\u30eb\u69cb\u9020","text":"\u30c6\u30fc\u30d6\u30eb\u540d \u8aac\u660e \u5165\u8377\u53d7\u5165\u30c7\u30fc\u30bf \u5165\u8377\u60c5\u5831\uff08\u5165\u8377\u756a\u53f7\u3001\u6570\u91cf\u3001\u62c5\u5f53\u8005\u7b49\uff09 \u6b20\u70b9\u30de\u30b9\u30bf \u4e0d\u826f\u54c1\u306e\u6b20\u70b9\u30b3\u30fc\u30c9\u30fb\u5185\u5bb9 \u53d7\u5165\u691c\u67fb\u30c7\u30fc\u30bf \u53d7\u5165\u691c\u67fb\u60c5\u5831\uff08\u826f\u54c1\u6570\u3001\u4e0d\u826f\u54c1\u6570\u7b49\uff09 \u691c\u53ce\u30c7\u30fc\u30bf \u691c\u53ce\u60c5\u5831\uff08\u691c\u53ce\u6570\u3001\u691c\u53ce\u91d1\u984d\u7b49\uff09"},{"location":"article/part4/chapter25/#_13","title":"\u30c7\u30fc\u30bf\u306e\u95a2\u9023","text":"DDL: \u5165\u8377\u30fb\u691c\u53ce\u95a2\u9023\u30c6\u30fc\u30d6\u30eb <pre><code>-- V010__create_receiving_tables.sql\n\n-- \u5165\u8377\u53d7\u5165\u30c7\u30fc\u30bf\nCREATE TABLE \"\u5165\u8377\u53d7\u5165\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u5165\u8377\u756a\u53f7\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u767a\u6ce8\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u767a\u6ce8\u884c\u756a\u53f7\" INTEGER NOT NULL,\n    \"\u5165\u8377\u65e5\" DATE NOT NULL,\n    \"\u5165\u8377\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\" VARCHAR(20),\n    \"\u5165\u8377\u53d7\u5165\u533a\u5206\" \u5165\u8377\u53d7\u5165\u533a\u5206 DEFAULT '\u901a\u5e38\u5165\u8377' NOT NULL,\n    \"\u54c1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u8af8\u53e3\u54c1\u76ee\u533a\u5206\" BOOLEAN DEFAULT FALSE NOT NULL,\n    \"\u5165\u8377\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u5165\u8377\u5099\u8003\" TEXT,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u8005\" VARCHAR(50),\n    CONSTRAINT \"fk_\u5165\u8377\u53d7\u5165_\u767a\u6ce8\u660e\u7d30\"\n        FOREIGN KEY (\"\u767a\u6ce8\u756a\u53f7\", \"\u767a\u6ce8\u884c\u756a\u53f7\") REFERENCES \"\u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\"(\"\u767a\u6ce8\u756a\u53f7\", \"\u767a\u6ce8\u884c\u756a\u53f7\"),\n    CONSTRAINT \"fk_\u5165\u8377\u53d7\u5165_\u54c1\u76ee\"\n        FOREIGN KEY (\"\u54c1\u76ee\u30b3\u30fc\u30c9\") REFERENCES \"\u54c1\u76ee\u30de\u30b9\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n);\n\n-- \u6b20\u70b9\u30de\u30b9\u30bf\nCREATE TABLE \"\u6b20\u70b9\u30de\u30b9\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u6b20\u70b9\u30b3\u30fc\u30c9\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u6b20\u70b9\u5185\u5bb9\" VARCHAR(200) NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u8005\" VARCHAR(50)\n);\n\n-- \u53d7\u5165\u691c\u67fb\u30c7\u30fc\u30bf\nCREATE TABLE \"\u53d7\u5165\u691c\u67fb\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u53d7\u5165\u691c\u67fb\u756a\u53f7\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u5165\u8377\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u767a\u6ce8\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u767a\u6ce8\u884c\u756a\u53f7\" INTEGER NOT NULL,\n    \"\u53d7\u5165\u691c\u67fb\u65e5\" DATE NOT NULL,\n    \"\u53d7\u5165\u691c\u67fb\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\" VARCHAR(20),\n    \"\u54c1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u8af8\u53e3\u54c1\u76ee\u533a\u5206\" BOOLEAN DEFAULT FALSE NOT NULL,\n    \"\u826f\u54c1\u6570\" DECIMAL(15, 2) NOT NULL,\n    \"\u4e0d\u826f\u54c1\u6570\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u53d7\u5165\u691c\u67fb\u5099\u8003\" TEXT,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u8005\" VARCHAR(50),\n    CONSTRAINT \"fk_\u53d7\u5165\u691c\u67fb_\u5165\u8377\"\n        FOREIGN KEY (\"\u5165\u8377\u756a\u53f7\") REFERENCES \"\u5165\u8377\u53d7\u5165\u30c7\u30fc\u30bf\"(\"\u5165\u8377\u756a\u53f7\"),\n    CONSTRAINT \"fk_\u53d7\u5165\u691c\u67fb_\u54c1\u76ee\"\n        FOREIGN KEY (\"\u54c1\u76ee\u30b3\u30fc\u30c9\") REFERENCES \"\u54c1\u76ee\u30de\u30b9\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n);\n\n-- \u691c\u53ce\u30c7\u30fc\u30bf\nCREATE TABLE \"\u691c\u53ce\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u691c\u53ce\u756a\u53f7\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u53d7\u5165\u691c\u67fb\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u767a\u6ce8\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u767a\u6ce8\u884c\u756a\u53f7\" INTEGER NOT NULL,\n    \"\u691c\u53ce\u65e5\" DATE NOT NULL,\n    \"\u691c\u53ce\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\" VARCHAR(20),\n    \"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u54c1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u8af8\u53e3\u54c1\u76ee\u533a\u5206\" BOOLEAN DEFAULT FALSE NOT NULL,\n    \"\u691c\u53ce\u6570\" DECIMAL(15, 2) NOT NULL,\n    \"\u691c\u53ce\u5358\u4fa1\" DECIMAL(15, 2) NOT NULL,\n    \"\u691c\u53ce\u91d1\u984d\" DECIMAL(15, 2) NOT NULL,\n    \"\u691c\u53ce\u6d88\u8cbb\u7a0e\u984d\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u691c\u53ce\u5099\u8003\" TEXT,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u8005\" VARCHAR(50),\n    CONSTRAINT \"fk_\u691c\u53ce_\u53d7\u5165\u691c\u67fb\"\n        FOREIGN KEY (\"\u53d7\u5165\u691c\u67fb\u756a\u53f7\") REFERENCES \"\u53d7\u5165\u691c\u67fb\u30c7\u30fc\u30bf\"(\"\u53d7\u5165\u691c\u67fb\u756a\u53f7\"),\n    CONSTRAINT \"fk_\u691c\u53ce_\u767a\u6ce8\u660e\u7d30\"\n        FOREIGN KEY (\"\u767a\u6ce8\u756a\u53f7\", \"\u767a\u6ce8\u884c\u756a\u53f7\") REFERENCES \"\u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\"(\"\u767a\u6ce8\u756a\u53f7\", \"\u767a\u6ce8\u884c\u756a\u53f7\"),\n    CONSTRAINT \"fk_\u691c\u53ce_\u53d6\u5f15\u5148\"\n        FOREIGN KEY (\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\") REFERENCES \"\u53d6\u5f15\u5148\u30de\u30b9\u30bf\"(\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"fk_\u691c\u53ce_\u54c1\u76ee\"\n        FOREIGN KEY (\"\u54c1\u76ee\u30b3\u30fc\u30c9\") REFERENCES \"\u54c1\u76ee\u30de\u30b9\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"idx_\u5165\u8377\u53d7\u5165_\u767a\u6ce8\u756a\u53f7\" ON \"\u5165\u8377\u53d7\u5165\u30c7\u30fc\u30bf\"(\"\u767a\u6ce8\u756a\u53f7\", \"\u767a\u6ce8\u884c\u756a\u53f7\");\nCREATE INDEX \"idx_\u5165\u8377\u53d7\u5165_\u5165\u8377\u65e5\" ON \"\u5165\u8377\u53d7\u5165\u30c7\u30fc\u30bf\"(\"\u5165\u8377\u65e5\");\nCREATE INDEX \"idx_\u53d7\u5165\u691c\u67fb_\u5165\u8377\u756a\u53f7\" ON \"\u53d7\u5165\u691c\u67fb\u30c7\u30fc\u30bf\"(\"\u5165\u8377\u756a\u53f7\");\nCREATE INDEX \"idx_\u691c\u53ce_\u53d7\u5165\u691c\u67fb\u756a\u53f7\" ON \"\u691c\u53ce\u30c7\u30fc\u30bf\"(\"\u53d7\u5165\u691c\u67fb\u756a\u53f7\");\nCREATE INDEX \"idx_\u691c\u53ce_\u767a\u6ce8\u756a\u53f7\" ON \"\u691c\u53ce\u30c7\u30fc\u30bf\"(\"\u767a\u6ce8\u756a\u53f7\", \"\u767a\u6ce8\u884c\u756a\u53f7\");\n</code></pre>"},{"location":"article/part4/chapter25/#_14","title":"\u767a\u6ce8\u660e\u7d30\u3068\u306e\u7d10\u4ed8\u3051","text":"<p>\u5165\u8377\u53d7\u5165\u30c7\u30fc\u30bf\u306f\u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\u3068\u7d10\u4ed8\u3051\u3089\u308c\u3001\u5165\u8377\u306e\u305f\u3073\u306b\u767a\u6ce8\u660e\u7d30\u306e\u300c\u5165\u8377\u6e08\u6570\u91cf\u300d\u304c\u66f4\u65b0\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u5206\u7d0d\u3078\u306e\u5bfe\u5fdc\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"article/part4/chapter25/#_15","title":"\u5165\u8377\u53d7\u5165\u533a\u5206\uff08\u5165\u8377 / \u53d7\u5165\u8fd4\u54c1\uff09","text":"<p>\u5165\u8377\u53d7\u5165\u533a\u5206\u306f\u4ee5\u4e0b\u306e\u5024\u3092\u53d6\u308a\u307e\u3059\u3002</p> \u533a\u5206 \u8aac\u660e \u901a\u5e38\u5165\u8377 \u901a\u5e38\u306e\u5165\u8377\u51e6\u7406 \u5206\u5272\u5165\u8377 \u767a\u6ce8\u6570\u91cf\u3092\u5206\u5272\u3057\u3066\u5165\u8377\u3059\u308b\u5834\u5408 \u8fd4\u54c1\u5165\u8377 \u691c\u53ce\u5f8c\u306e\u8fd4\u54c1\u3092\u53d7\u3051\u5165\u308c\u308b\u5834\u5408"},{"location":"article/part4/chapter25/#java_1","title":"Java \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u5b9a\u7fa9","text":"\u5165\u8377\u53d7\u5165\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/production/domain/model/purchase/Receiving.java\npackage com.example.production.domain.model.purchase;\n\nimport com.example.production.domain.model.item.Item;\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.List;\n\n@Data\n@Builder\npublic class Receiving {\n    private Integer id;\n    private String receivingNumber;\n    private String purchaseOrderNumber;\n    private Integer lineNumber;\n    private LocalDate receivingDate;\n    private String receiverCode;\n    private ReceivingType receivingType;\n    private String itemCode;\n    private Boolean miscellaneousItemFlag;\n    private BigDecimal receivingQuantity;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n\n    // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n    private PurchaseOrderDetail purchaseOrderDetail;\n    private Item item;\n    private List&lt;Inspection&gt; inspections;\n}\n</code></pre> \u53d7\u5165\u691c\u67fb\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/production/domain/model/purchase/Inspection.java\npackage com.example.production.domain.model.purchase;\n\nimport com.example.production.domain.model.item.Item;\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.List;\n\n@Data\n@Builder\npublic class Inspection {\n    private Integer id;\n    private String inspectionNumber;\n    private String receivingNumber;\n    private String purchaseOrderNumber;\n    private Integer lineNumber;\n    private LocalDate inspectionDate;\n    private String inspectorCode;\n    private String itemCode;\n    private Boolean miscellaneousItemFlag;\n    private BigDecimal goodQuantity;\n    private BigDecimal defectQuantity;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n\n    // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n    private Receiving receiving;\n    private Item item;\n    private List&lt;InspectionResult&gt; results;\n    private List&lt;Acceptance&gt; acceptances;\n}\n</code></pre> \u691c\u53ce\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/production/domain/model/purchase/Acceptance.java\npackage com.example.production.domain.model.purchase;\n\nimport com.example.production.domain.model.item.Item;\nimport com.example.production.domain.model.master.Supplier;\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\npublic class Acceptance {\n    private Integer id;\n    private String acceptanceNumber;\n    private String inspectionNumber;\n    private String purchaseOrderNumber;\n    private Integer lineNumber;\n    private LocalDate acceptanceDate;\n    private String acceptorCode;\n    private String supplierCode;\n    private String itemCode;\n    private Boolean miscellaneousItemFlag;\n    private BigDecimal acceptedQuantity;\n    private BigDecimal unitPrice;\n    private BigDecimal amount;\n    private BigDecimal taxAmount;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n\n    // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n    private Inspection inspection;\n    private PurchaseOrderDetail purchaseOrderDetail;\n    private Supplier supplier;\n    private Item item;\n}\n</code></pre>"},{"location":"article/part4/chapter25/#mybatis-mapper-xml_1","title":"MyBatis Mapper XML\uff08\u5165\u8377\u30fb\u691c\u53ce\uff09","text":"ReceivingMapper.xml <pre><code>&lt;!-- src/main/resources/com/example/production/infrastructure/persistence/mapper/ReceivingMapper.xml --&gt;\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.production.infrastructure.persistence.mapper.ReceivingMapper\"&gt;\n\n    &lt;resultMap id=\"ReceivingResultMap\" type=\"com.example.production.domain.model.purchase.Receiving\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"receivingNumber\" column=\"\u5165\u8377\u756a\u53f7\"/&gt;\n        &lt;result property=\"purchaseOrderNumber\" column=\"\u767a\u6ce8\u756a\u53f7\"/&gt;\n        &lt;result property=\"lineNumber\" column=\"\u767a\u6ce8\u884c\u756a\u53f7\"/&gt;\n        &lt;result property=\"receivingDate\" column=\"\u5165\u8377\u65e5\"/&gt;\n        &lt;result property=\"receiverCode\" column=\"\u5165\u8377\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"receivingType\" column=\"\u5165\u8377\u53d7\u5165\u533a\u5206\"\n                typeHandler=\"com.example.production.infrastructure.persistence.ReceivingTypeTypeHandler\"/&gt;\n        &lt;result property=\"itemCode\" column=\"\u54c1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"miscellaneousItemFlag\" column=\"\u8af8\u53e3\u54c1\u76ee\u533a\u5206\"/&gt;\n        &lt;result property=\"receivingQuantity\" column=\"\u5165\u8377\u6570\u91cf\"/&gt;\n        &lt;result property=\"remarks\" column=\"\u5165\u8377\u5099\u8003\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"createdBy\" column=\"\u4f5c\u6210\u8005\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedBy\" column=\"\u66f4\u65b0\u8005\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;insert id=\"insert\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u5165\u8377\u53d7\u5165\u30c7\u30fc\u30bf\" (\n            \"\u5165\u8377\u756a\u53f7\", \"\u767a\u6ce8\u756a\u53f7\", \"\u767a\u6ce8\u884c\u756a\u53f7\", \"\u5165\u8377\u65e5\", \"\u5165\u8377\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\",\n            \"\u5165\u8377\u53d7\u5165\u533a\u5206\", \"\u54c1\u76ee\u30b3\u30fc\u30c9\", \"\u8af8\u53e3\u54c1\u76ee\u533a\u5206\", \"\u5165\u8377\u6570\u91cf\", \"\u5165\u8377\u5099\u8003\", \"\u4f5c\u6210\u8005\"\n        ) VALUES (\n            #{receivingNumber},\n            #{purchaseOrderNumber},\n            #{lineNumber},\n            #{receivingDate},\n            #{receiverCode},\n            #{receivingType, typeHandler=com.example.production.infrastructure.persistence.ReceivingTypeTypeHandler}::\u5165\u8377\u53d7\u5165\u533a\u5206,\n            #{itemCode},\n            #{miscellaneousItemFlag},\n            #{receivingQuantity},\n            #{remarks},\n            #{createdBy}\n        )\n    &lt;/insert&gt;\n\n    &lt;select id=\"findByReceivingNumber\" resultMap=\"ReceivingResultMap\"&gt;\n        SELECT * FROM \"\u5165\u8377\u53d7\u5165\u30c7\u30fc\u30bf\" WHERE \"\u5165\u8377\u756a\u53f7\" = #{receivingNumber}\n    &lt;/select&gt;\n\n    &lt;select id=\"findLatestReceivingNumber\" resultType=\"string\"&gt;\n        SELECT \"\u5165\u8377\u756a\u53f7\" FROM \"\u5165\u8377\u53d7\u5165\u30c7\u30fc\u30bf\"\n        WHERE \"\u5165\u8377\u756a\u53f7\" LIKE #{prefix}\n        ORDER BY \"\u5165\u8377\u756a\u53f7\" DESC\n        LIMIT 1\n    &lt;/select&gt;\n\n    &lt;select id=\"findByPurchaseOrderNumber\" resultMap=\"ReceivingResultMap\"&gt;\n        SELECT * FROM \"\u5165\u8377\u53d7\u5165\u30c7\u30fc\u30bf\"\n        WHERE \"\u767a\u6ce8\u756a\u53f7\" = #{purchaseOrderNumber}\n        ORDER BY \"\u5165\u8377\u65e5\", \"\u5165\u8377\u756a\u53f7\"\n    &lt;/select&gt;\n\n    &lt;delete id=\"deleteAll\"&gt;\n        DELETE FROM \"\u5165\u8377\u53d7\u5165\u30c7\u30fc\u30bf\"\n    &lt;/delete&gt;\n&lt;/mapper&gt;\n</code></pre> InspectionMapper.xml <pre><code>&lt;!-- src/main/resources/com/example/production/infrastructure/persistence/mapper/InspectionMapper.xml --&gt;\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.production.infrastructure.persistence.mapper.InspectionMapper\"&gt;\n\n    &lt;resultMap id=\"InspectionResultMap\" type=\"com.example.production.domain.model.purchase.Inspection\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"inspectionNumber\" column=\"\u53d7\u5165\u691c\u67fb\u756a\u53f7\"/&gt;\n        &lt;result property=\"receivingNumber\" column=\"\u5165\u8377\u756a\u53f7\"/&gt;\n        &lt;result property=\"purchaseOrderNumber\" column=\"\u767a\u6ce8\u756a\u53f7\"/&gt;\n        &lt;result property=\"lineNumber\" column=\"\u767a\u6ce8\u884c\u756a\u53f7\"/&gt;\n        &lt;result property=\"inspectionDate\" column=\"\u53d7\u5165\u691c\u67fb\u65e5\"/&gt;\n        &lt;result property=\"inspectorCode\" column=\"\u53d7\u5165\u691c\u67fb\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"itemCode\" column=\"\u54c1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"miscellaneousItemFlag\" column=\"\u8af8\u53e3\u54c1\u76ee\u533a\u5206\"/&gt;\n        &lt;result property=\"goodQuantity\" column=\"\u826f\u54c1\u6570\"/&gt;\n        &lt;result property=\"defectQuantity\" column=\"\u4e0d\u826f\u54c1\u6570\"/&gt;\n        &lt;result property=\"remarks\" column=\"\u53d7\u5165\u691c\u67fb\u5099\u8003\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"createdBy\" column=\"\u4f5c\u6210\u8005\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedBy\" column=\"\u66f4\u65b0\u8005\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;insert id=\"insert\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u53d7\u5165\u691c\u67fb\u30c7\u30fc\u30bf\" (\n            \"\u53d7\u5165\u691c\u67fb\u756a\u53f7\", \"\u5165\u8377\u756a\u53f7\", \"\u767a\u6ce8\u756a\u53f7\", \"\u767a\u6ce8\u884c\u756a\u53f7\", \"\u53d7\u5165\u691c\u67fb\u65e5\",\n            \"\u53d7\u5165\u691c\u67fb\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\", \"\u54c1\u76ee\u30b3\u30fc\u30c9\", \"\u8af8\u53e3\u54c1\u76ee\u533a\u5206\", \"\u826f\u54c1\u6570\", \"\u4e0d\u826f\u54c1\u6570\",\n            \"\u53d7\u5165\u691c\u67fb\u5099\u8003\", \"\u4f5c\u6210\u8005\"\n        ) VALUES (\n            #{inspectionNumber},\n            #{receivingNumber},\n            #{purchaseOrderNumber},\n            #{lineNumber},\n            #{inspectionDate},\n            #{inspectorCode},\n            #{itemCode},\n            #{miscellaneousItemFlag},\n            #{goodQuantity},\n            #{defectQuantity},\n            #{remarks},\n            #{createdBy}\n        )\n    &lt;/insert&gt;\n\n    &lt;select id=\"findByInspectionNumber\" resultMap=\"InspectionResultMap\"&gt;\n        SELECT * FROM \"\u53d7\u5165\u691c\u67fb\u30c7\u30fc\u30bf\" WHERE \"\u53d7\u5165\u691c\u67fb\u756a\u53f7\" = #{inspectionNumber}\n    &lt;/select&gt;\n\n    &lt;select id=\"findLatestInspectionNumber\" resultType=\"string\"&gt;\n        SELECT \"\u53d7\u5165\u691c\u67fb\u756a\u53f7\" FROM \"\u53d7\u5165\u691c\u67fb\u30c7\u30fc\u30bf\"\n        WHERE \"\u53d7\u5165\u691c\u67fb\u756a\u53f7\" LIKE #{prefix}\n        ORDER BY \"\u53d7\u5165\u691c\u67fb\u756a\u53f7\" DESC\n        LIMIT 1\n    &lt;/select&gt;\n\n    &lt;delete id=\"deleteAll\"&gt;\n        DELETE FROM \"\u53d7\u5165\u691c\u67fb\u30c7\u30fc\u30bf\"\n    &lt;/delete&gt;\n&lt;/mapper&gt;\n</code></pre> AcceptanceMapper.xml <pre><code>&lt;!-- src/main/resources/com/example/production/infrastructure/persistence/mapper/AcceptanceMapper.xml --&gt;\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.production.infrastructure.persistence.mapper.AcceptanceMapper\"&gt;\n\n    &lt;resultMap id=\"AcceptanceResultMap\" type=\"com.example.production.domain.model.purchase.Acceptance\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"acceptanceNumber\" column=\"\u691c\u53ce\u756a\u53f7\"/&gt;\n        &lt;result property=\"inspectionNumber\" column=\"\u53d7\u5165\u691c\u67fb\u756a\u53f7\"/&gt;\n        &lt;result property=\"purchaseOrderNumber\" column=\"\u767a\u6ce8\u756a\u53f7\"/&gt;\n        &lt;result property=\"lineNumber\" column=\"\u767a\u6ce8\u884c\u756a\u53f7\"/&gt;\n        &lt;result property=\"acceptanceDate\" column=\"\u691c\u53ce\u65e5\"/&gt;\n        &lt;result property=\"acceptorCode\" column=\"\u691c\u53ce\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"supplierCode\" column=\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"itemCode\" column=\"\u54c1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"miscellaneousItemFlag\" column=\"\u8af8\u53e3\u54c1\u76ee\u533a\u5206\"/&gt;\n        &lt;result property=\"acceptedQuantity\" column=\"\u691c\u53ce\u6570\"/&gt;\n        &lt;result property=\"unitPrice\" column=\"\u691c\u53ce\u5358\u4fa1\"/&gt;\n        &lt;result property=\"amount\" column=\"\u691c\u53ce\u91d1\u984d\"/&gt;\n        &lt;result property=\"taxAmount\" column=\"\u691c\u53ce\u6d88\u8cbb\u7a0e\u984d\"/&gt;\n        &lt;result property=\"remarks\" column=\"\u691c\u53ce\u5099\u8003\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"createdBy\" column=\"\u4f5c\u6210\u8005\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedBy\" column=\"\u66f4\u65b0\u8005\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;insert id=\"insert\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u691c\u53ce\u30c7\u30fc\u30bf\" (\n            \"\u691c\u53ce\u756a\u53f7\", \"\u53d7\u5165\u691c\u67fb\u756a\u53f7\", \"\u767a\u6ce8\u756a\u53f7\", \"\u767a\u6ce8\u884c\u756a\u53f7\", \"\u691c\u53ce\u65e5\",\n            \"\u691c\u53ce\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\", \"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\", \"\u54c1\u76ee\u30b3\u30fc\u30c9\", \"\u8af8\u53e3\u54c1\u76ee\u533a\u5206\",\n            \"\u691c\u53ce\u6570\", \"\u691c\u53ce\u5358\u4fa1\", \"\u691c\u53ce\u91d1\u984d\", \"\u691c\u53ce\u6d88\u8cbb\u7a0e\u984d\", \"\u691c\u53ce\u5099\u8003\", \"\u4f5c\u6210\u8005\"\n        ) VALUES (\n            #{acceptanceNumber},\n            #{inspectionNumber},\n            #{purchaseOrderNumber},\n            #{lineNumber},\n            #{acceptanceDate},\n            #{acceptorCode},\n            #{supplierCode},\n            #{itemCode},\n            #{miscellaneousItemFlag},\n            #{acceptedQuantity},\n            #{unitPrice},\n            #{amount},\n            #{taxAmount},\n            #{remarks},\n            #{createdBy}\n        )\n    &lt;/insert&gt;\n\n    &lt;select id=\"findByAcceptanceNumber\" resultMap=\"AcceptanceResultMap\"&gt;\n        SELECT * FROM \"\u691c\u53ce\u30c7\u30fc\u30bf\" WHERE \"\u691c\u53ce\u756a\u53f7\" = #{acceptanceNumber}\n    &lt;/select&gt;\n\n    &lt;select id=\"findLatestAcceptanceNumber\" resultType=\"string\"&gt;\n        SELECT \"\u691c\u53ce\u756a\u53f7\" FROM \"\u691c\u53ce\u30c7\u30fc\u30bf\"\n        WHERE \"\u691c\u53ce\u756a\u53f7\" LIKE #{prefix}\n        ORDER BY \"\u691c\u53ce\u756a\u53f7\" DESC\n        LIMIT 1\n    &lt;/select&gt;\n\n    &lt;select id=\"findByPurchaseOrderNumber\" resultMap=\"AcceptanceResultMap\"&gt;\n        SELECT * FROM \"\u691c\u53ce\u30c7\u30fc\u30bf\"\n        WHERE \"\u767a\u6ce8\u756a\u53f7\" = #{purchaseOrderNumber}\n        ORDER BY \"\u691c\u53ce\u65e5\", \"\u691c\u53ce\u756a\u53f7\"\n    &lt;/select&gt;\n\n    &lt;delete id=\"deleteAll\"&gt;\n        DELETE FROM \"\u691c\u53ce\u30c7\u30fc\u30bf\"\n    &lt;/delete&gt;\n&lt;/mapper&gt;\n</code></pre>"},{"location":"article/part4/chapter25/#mapper_1","title":"Mapper \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff08\u5165\u8377\u30fb\u691c\u53ce\uff09","text":"ReceivingMapper <pre><code>// src/main/java/com/example/production/infrastructure/persistence/mapper/ReceivingMapper.java\npackage com.example.production.infrastructure.persistence.mapper;\n\nimport com.example.production.domain.model.purchase.Receiving;\nimport org.apache.ibatis.annotations.Mapper;\nimport org.apache.ibatis.annotations.Param;\n\nimport java.util.List;\n\n@Mapper\npublic interface ReceivingMapper {\n    void insert(Receiving receiving);\n    Receiving findByReceivingNumber(String receivingNumber);\n    String findLatestReceivingNumber(String prefix);\n    List&lt;Receiving&gt; findByPurchaseOrderNumber(String purchaseOrderNumber);\n    void deleteAll();\n}\n</code></pre> InspectionMapper <pre><code>// src/main/java/com/example/production/infrastructure/persistence/mapper/InspectionMapper.java\npackage com.example.production.infrastructure.persistence.mapper;\n\nimport com.example.production.domain.model.purchase.Inspection;\nimport org.apache.ibatis.annotations.Mapper;\n\n@Mapper\npublic interface InspectionMapper {\n    void insert(Inspection inspection);\n    Inspection findByInspectionNumber(String inspectionNumber);\n    String findLatestInspectionNumber(String prefix);\n    void deleteAll();\n}\n</code></pre> AcceptanceMapper <pre><code>// src/main/java/com/example/production/infrastructure/persistence/mapper/AcceptanceMapper.java\npackage com.example.production.infrastructure.persistence.mapper;\n\nimport com.example.production.domain.model.purchase.Acceptance;\nimport org.apache.ibatis.annotations.Mapper;\n\nimport java.util.List;\n\n@Mapper\npublic interface AcceptanceMapper {\n    void insert(Acceptance acceptance);\n    Acceptance findByAcceptanceNumber(String acceptanceNumber);\n    String findLatestAcceptanceNumber(String prefix);\n    List&lt;Acceptance&gt; findByPurchaseOrderNumber(String purchaseOrderNumber);\n    void deleteAll();\n}\n</code></pre>"},{"location":"article/part4/chapter25/#_16","title":"\u30b3\u30de\u30f3\u30c9\u30af\u30e9\u30b9","text":"<p>\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u5f93\u3044\u3001\u5165\u529b\u7528 DTO \u306f <code>application/port/in/command</code> \u306b\u914d\u7f6e\u3057\u3001\u547d\u540d\u306f <code>xxxCommand</code> \u3068\u3057\u307e\u3059\u3002</p> ReceivingCommand <pre><code>// src/main/java/com/example/production/application/port/in/command/ReceivingCommand.java\npackage com.example.production.application.port.in.command;\n\nimport com.example.production.domain.model.purchase.ReceivingType;\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\n\n@Data\n@Builder\npublic class ReceivingCommand {\n    private String purchaseOrderNumber;\n    private Integer lineNumber;\n    private LocalDate receivingDate;\n    private String receiverCode;\n    private ReceivingType receivingType;\n    private BigDecimal receivingQuantity;\n    private String remarks;\n}\n</code></pre> InspectionCommand <pre><code>// src/main/java/com/example/production/application/port/in/command/InspectionCommand.java\npackage com.example.production.application.port.in.command;\n\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\n\n@Data\n@Builder\npublic class InspectionCommand {\n    private String receivingNumber;\n    private LocalDate inspectionDate;\n    private String inspectorCode;\n    private BigDecimal goodQuantity;\n    private BigDecimal defectQuantity;\n    private String remarks;\n}\n</code></pre> AcceptanceCommand <pre><code>// src/main/java/com/example/production/application/port/in/command/AcceptanceCommand.java\npackage com.example.production.application.port.in.command;\n\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\n\n@Data\n@Builder\npublic class AcceptanceCommand {\n    private String inspectionNumber;\n    private LocalDate acceptanceDate;\n    private String acceptorCode;\n    private BigDecimal taxRate;\n    private String remarks;\n}\n</code></pre>"},{"location":"article/part4/chapter25/#_17","title":"\u5165\u8377\u691c\u53ce\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":"ReceivingService <pre><code>// src/main/java/com/example/production/application/service/ReceivingService.java\npackage com.example.production.application.service;\n\nimport com.example.production.domain.model.purchase.*;\nimport com.example.production.infrastructure.persistence.mapper.*;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.math.BigDecimal;\nimport java.math.RoundingMode;\nimport java.time.LocalDate;\nimport java.time.format.DateTimeFormatter;\n\n@Service\n@RequiredArgsConstructor\npublic class ReceivingService {\n\n    private final ReceivingMapper receivingMapper;\n    private final InspectionMapper inspectionMapper;\n    private final AcceptanceMapper acceptanceMapper;\n    private final PurchaseOrderMapper purchaseOrderMapper;\n    private final PurchaseOrderDetailMapper purchaseOrderDetailMapper;\n\n    /**\n     * \u5165\u8377\u3092\u767b\u9332\u3059\u308b\n     */\n    @Transactional\n    public Receiving registerReceiving(ReceivingCommand command) {\n        PurchaseOrderDetail detail = purchaseOrderDetailMapper.findByPurchaseOrderNumberAndLineNumber(\n                command.getPurchaseOrderNumber(), command.getLineNumber());\n\n        if (detail == null) {\n            throw new IllegalArgumentException(\n                    \"Purchase order detail not found: \" + command.getPurchaseOrderNumber() + \"-\" + command.getLineNumber());\n        }\n\n        BigDecimal receivedQuantity = detail.getReceivedQuantity() != null ?\n                detail.getReceivedQuantity() : BigDecimal.ZERO;\n        BigDecimal remainingQuantity = detail.getOrderQuantity().subtract(receivedQuantity);\n\n        if (command.getReceivingQuantity().compareTo(remainingQuantity) &gt; 0) {\n            throw new IllegalStateException(\"Cannot receive more than ordered quantity\");\n        }\n\n        String receivingNumber = generateReceivingNumber(command.getReceivingDate());\n\n        Receiving receiving = Receiving.builder()\n                .receivingNumber(receivingNumber)\n                .purchaseOrderNumber(command.getPurchaseOrderNumber())\n                .lineNumber(command.getLineNumber())\n                .receivingDate(command.getReceivingDate())\n                .receiverCode(command.getReceiverCode())\n                .receivingType(command.getReceivingType() != null ? command.getReceivingType() : ReceivingType.NORMAL)\n                .itemCode(detail.getItemCode())\n                .miscellaneousItemFlag(detail.getMiscellaneousItemFlag())\n                .receivingQuantity(command.getReceivingQuantity())\n                .remarks(command.getRemarks())\n                .build();\n        receivingMapper.insert(receiving);\n\n        BigDecimal newReceivedQuantity = receivedQuantity.add(command.getReceivingQuantity());\n        purchaseOrderDetailMapper.updateReceivedQuantity(\n                command.getPurchaseOrderNumber(), command.getLineNumber(), newReceivedQuantity);\n\n        PurchaseOrderStatus newStatus = newReceivedQuantity.compareTo(detail.getOrderQuantity()) &gt;= 0\n                ? PurchaseOrderStatus.RECEIVED : PurchaseOrderStatus.PARTIALLY_RECEIVED;\n        purchaseOrderMapper.updateStatus(command.getPurchaseOrderNumber(), newStatus);\n\n        return receiving;\n    }\n\n    private String generateReceivingNumber(LocalDate date) {\n        String prefix = \"RCV-\" + date.format(DateTimeFormatter.ofPattern(\"yyyyMM\")) + \"-\";\n        String latestNumber = receivingMapper.findLatestReceivingNumber(prefix + \"%\");\n\n        int sequence = 1;\n        if (latestNumber != null) {\n            int currentSequence = Integer.parseInt(latestNumber.substring(latestNumber.length() - 4));\n            sequence = currentSequence + 1;\n        }\n\n        return prefix + String.format(\"%04d\", sequence);\n    }\n\n    /**\n     * \u53d7\u5165\u691c\u67fb\u3092\u767b\u9332\u3059\u308b\n     */\n    @Transactional\n    public Inspection registerInspection(InspectionCommand command) {\n        Receiving receiving = receivingMapper.findByReceivingNumber(command.getReceivingNumber());\n\n        if (receiving == null) {\n            throw new IllegalArgumentException(\"Receiving not found: \" + command.getReceivingNumber());\n        }\n\n        BigDecimal totalQuantity = command.getGoodQuantity().add(command.getDefectQuantity());\n        if (totalQuantity.compareTo(receiving.getReceivingQuantity()) &gt; 0) {\n            throw new IllegalStateException(\"Inspection quantity exceeds receiving quantity\");\n        }\n\n        String inspectionNumber = generateInspectionNumber(command.getInspectionDate());\n\n        Inspection inspection = Inspection.builder()\n                .inspectionNumber(inspectionNumber)\n                .receivingNumber(command.getReceivingNumber())\n                .purchaseOrderNumber(receiving.getPurchaseOrderNumber())\n                .lineNumber(receiving.getLineNumber())\n                .inspectionDate(command.getInspectionDate())\n                .inspectorCode(command.getInspectorCode())\n                .itemCode(receiving.getItemCode())\n                .miscellaneousItemFlag(receiving.getMiscellaneousItemFlag())\n                .goodQuantity(command.getGoodQuantity())\n                .defectQuantity(command.getDefectQuantity())\n                .remarks(command.getRemarks())\n                .build();\n        inspectionMapper.insert(inspection);\n\n        return inspection;\n    }\n\n    private String generateInspectionNumber(LocalDate date) {\n        String prefix = \"INS-\" + date.format(DateTimeFormatter.ofPattern(\"yyyyMM\")) + \"-\";\n        String latestNumber = inspectionMapper.findLatestInspectionNumber(prefix + \"%\");\n\n        int sequence = 1;\n        if (latestNumber != null) {\n            int currentSequence = Integer.parseInt(latestNumber.substring(latestNumber.length() - 4));\n            sequence = currentSequence + 1;\n        }\n\n        return prefix + String.format(\"%04d\", sequence);\n    }\n\n    /**\n     * \u691c\u53ce\u51e6\u7406\u3092\u884c\u3046\n     */\n    @Transactional\n    public Acceptance processAcceptance(AcceptanceCommand command) {\n        Inspection inspection = inspectionMapper.findByInspectionNumber(command.getInspectionNumber());\n\n        if (inspection == null) {\n            throw new IllegalArgumentException(\"Inspection not found: \" + command.getInspectionNumber());\n        }\n\n        PurchaseOrderDetail detail = purchaseOrderDetailMapper.findByPurchaseOrderNumberAndLineNumber(\n                inspection.getPurchaseOrderNumber(), inspection.getLineNumber());\n\n        PurchaseOrder purchaseOrder = purchaseOrderMapper.findByPurchaseOrderNumber(\n                inspection.getPurchaseOrderNumber());\n\n        BigDecimal taxRate = command.getTaxRate() != null ? command.getTaxRate() : new BigDecimal(\"10\");\n\n        BigDecimal amount = detail.getOrderUnitPrice().multiply(inspection.getGoodQuantity());\n        BigDecimal taxAmount = amount.multiply(taxRate)\n                .divide(new BigDecimal(\"100\"), 0, RoundingMode.HALF_UP);\n\n        String acceptanceNumber = generateAcceptanceNumber(command.getAcceptanceDate());\n\n        Acceptance acceptance = Acceptance.builder()\n                .acceptanceNumber(acceptanceNumber)\n                .inspectionNumber(command.getInspectionNumber())\n                .purchaseOrderNumber(inspection.getPurchaseOrderNumber())\n                .lineNumber(inspection.getLineNumber())\n                .acceptanceDate(command.getAcceptanceDate())\n                .acceptorCode(command.getAcceptorCode())\n                .supplierCode(purchaseOrder.getSupplierCode())\n                .itemCode(inspection.getItemCode())\n                .miscellaneousItemFlag(inspection.getMiscellaneousItemFlag())\n                .acceptedQuantity(inspection.getGoodQuantity())\n                .unitPrice(detail.getOrderUnitPrice())\n                .amount(amount)\n                .taxAmount(taxAmount)\n                .remarks(command.getRemarks())\n                .build();\n        acceptanceMapper.insert(acceptance);\n\n        return acceptance;\n    }\n\n    private String generateAcceptanceNumber(LocalDate date) {\n        String prefix = \"ACC-\" + date.format(DateTimeFormatter.ofPattern(\"yyyyMM\")) + \"-\";\n        String latestNumber = acceptanceMapper.findLatestAcceptanceNumber(prefix + \"%\");\n\n        int sequence = 1;\n        if (latestNumber != null) {\n            int currentSequence = Integer.parseInt(latestNumber.substring(latestNumber.length() - 4));\n            sequence = currentSequence + 1;\n        }\n\n        return prefix + String.format(\"%04d\", sequence);\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter25/#_18","title":"\u5728\u5eab\u8a08\u4e0a\u51e6\u7406","text":"<p>\u691c\u53ce\u51e6\u7406\u304c\u5b8c\u4e86\u3059\u308b\u3068\u3001\u826f\u54c1\u6570\u304c\u5728\u5eab\u306b\u8a08\u4e0a\u3055\u308c\u307e\u3059\u3002\u5728\u5eab\u8a08\u4e0a\u51e6\u7406\u306e\u8a73\u7d30\u306f\u7b2c28\u7ae0\u3067\u89e3\u8aac\u3057\u307e\u3059\u3002</p>"},{"location":"article/part4/chapter25/#tdd_1","title":"TDD: \u5165\u8377\u30fb\u691c\u53ce\u306e\u30c6\u30b9\u30c8","text":"ReceivingServiceTest <pre><code>// src/test/java/com/example/production/application/service/ReceivingServiceTest.java\npackage com.example.production.application.service;\n\nimport com.example.production.domain.model.item.Item;\nimport com.example.production.domain.model.item.ItemCategory;\nimport com.example.production.domain.model.master.Supplier;\nimport com.example.production.domain.model.purchase.*;\nimport com.example.production.infrastructure.persistence.mapper.*;\nimport org.junit.jupiter.api.*;\nimport org.mybatis.spring.boot.test.autoconfigure.MybatisTest;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.jdbc.AutoConfigureTestDatabase;\nimport org.springframework.context.annotation.Import;\nimport org.springframework.test.context.DynamicPropertyRegistry;\nimport org.springframework.test.context.DynamicPropertySource;\nimport org.testcontainers.containers.PostgreSQLContainer;\nimport org.testcontainers.junit.jupiter.Container;\nimport org.testcontainers.junit.jupiter.Testcontainers;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.util.List;\n\nimport static org.assertj.core.api.Assertions.*;\n\n@MybatisTest\n@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\n@Import({ReceivingService.class, PurchaseOrderService.class})\n@Testcontainers\n@DisplayName(\"\u5165\u8377\u30fb\u691c\u53ce\u696d\u52d9\")\nclass ReceivingServiceTest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:15\")\n            .withDatabaseName(\"testdb\")\n            .withUsername(\"testuser\")\n            .withPassword(\"testpass\");\n\n    @DynamicPropertySource\n    static void configureProperties(DynamicPropertyRegistry registry) {\n        registry.add(\"spring.datasource.url\", postgres::getJdbcUrl);\n        registry.add(\"spring.datasource.username\", postgres::getUsername);\n        registry.add(\"spring.datasource.password\", postgres::getPassword);\n    }\n\n    @Autowired\n    private ReceivingService receivingService;\n\n    @Autowired\n    private PurchaseOrderService purchaseOrderService;\n\n    @Autowired\n    private ItemMapper itemMapper;\n\n    @Autowired\n    private SupplierMapper supplierMapper;\n\n    @Autowired\n    private UnitPriceMapper unitPriceMapper;\n\n    @Autowired\n    private AcceptanceMapper acceptanceMapper;\n\n    @Autowired\n    private InspectionMapper inspectionMapper;\n\n    @Autowired\n    private ReceivingMapper receivingMapper;\n\n    @Autowired\n    private PurchaseOrderDetailMapper purchaseOrderDetailMapper;\n\n    @Autowired\n    private PurchaseOrderMapper purchaseOrderMapper;\n\n    private PurchaseOrder testPurchaseOrder;\n\n    @BeforeEach\n    void setUp() {\n        // \u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7\n        acceptanceMapper.deleteAll();\n        inspectionMapper.deleteAll();\n        receivingMapper.deleteAll();\n        purchaseOrderDetailMapper.deleteAll();\n        purchaseOrderMapper.deleteAll();\n        unitPriceMapper.deleteAll();\n        supplierMapper.deleteAll();\n        itemMapper.deleteAll();\n\n        // \u30de\u30b9\u30bf\u30c7\u30fc\u30bf\u306e\u6e96\u5099\n        Supplier supplier = Supplier.builder()\n                .supplierCode(\"SUP-RCV-001\")\n                .effectiveFrom(LocalDate.of(2025, 1, 1))\n                .supplierName(\"\u5165\u8377\u30c6\u30b9\u30c8\u7528\u4ed5\u5165\u5148\")\n                .build();\n        supplierMapper.insert(supplier);\n\n        Item item = Item.builder()\n                .itemCode(\"MAT-RCV-001\")\n                .effectiveFrom(LocalDate.of(2025, 1, 1))\n                .itemName(\"\u5165\u8377\u30c6\u30b9\u30c8\u7528\u6750\u6599\")\n                .itemCategory(ItemCategory.MATERIAL)\n                .build();\n        itemMapper.insert(item);\n\n        unitPriceMapper.insert(UnitPrice.builder()\n                .itemCode(\"MAT-RCV-001\")\n                .supplierCode(\"SUP-RCV-001\")\n                .effectiveFrom(LocalDate.of(2025, 1, 1))\n                .unitPrice(new BigDecimal(\"1000\"))\n                .build());\n\n        // \u30c6\u30b9\u30c8\u7528\u767a\u6ce8\u3092\u4f5c\u6210\n        PurchaseOrderCreateInput poInput = PurchaseOrderCreateInput.builder()\n                .supplierCode(\"SUP-RCV-001\")\n                .orderDate(LocalDate.of(2025, 1, 15))\n                .details(List.of(\n                        PurchaseOrderDetailInput.builder()\n                                .itemCode(\"MAT-RCV-001\")\n                                .orderQuantity(new BigDecimal(\"100\"))\n                                .expectedReceivingDate(LocalDate.of(2025, 1, 25))\n                                .build()\n                ))\n                .build();\n        testPurchaseOrder = purchaseOrderService.createPurchaseOrder(poInput);\n        purchaseOrderService.confirmPurchaseOrder(testPurchaseOrder.getPurchaseOrderNumber());\n    }\n\n    @Nested\n    @DisplayName(\"\u5165\u8377\u767b\u9332\")\n    class ReceivingRegistration {\n\n        @Test\n        @DisplayName(\"\u767a\u6ce8\u306b\u5bfe\u3057\u3066\u5165\u8377\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterReceiving() {\n            // Act\n            ReceivingCommand command = ReceivingCommand.builder()\n                    .purchaseOrderNumber(testPurchaseOrder.getPurchaseOrderNumber())\n                    .lineNumber(1)\n                    .receivingDate(LocalDate.of(2025, 1, 25))\n                    .receivingQuantity(new BigDecimal(\"50\"))\n                    .build();\n\n            Receiving receiving = receivingService.registerReceiving(command);\n\n            // Assert\n            assertThat(receiving).isNotNull();\n            assertThat(receiving.getReceivingNumber()).startsWith(\"RCV-\");\n            assertThat(receiving.getReceivingQuantity()).isEqualByComparingTo(new BigDecimal(\"50\"));\n            assertThat(receiving.getReceivingType()).isEqualTo(ReceivingType.NORMAL);\n        }\n\n        @Test\n        @DisplayName(\"\u5206\u5272\u5165\u8377\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterSplitReceiving() {\n            // Arrange: 1\u56de\u76ee\u306e\u5165\u8377\n            receivingService.registerReceiving(ReceivingCommand.builder()\n                    .purchaseOrderNumber(testPurchaseOrder.getPurchaseOrderNumber())\n                    .lineNumber(1)\n                    .receivingDate(LocalDate.of(2025, 1, 25))\n                    .receivingQuantity(new BigDecimal(\"30\"))\n                    .receivingType(ReceivingType.SPLIT)\n                    .build());\n\n            // Act: 2\u56de\u76ee\u306e\u5165\u8377\n            Receiving secondReceiving = receivingService.registerReceiving(ReceivingCommand.builder()\n                    .purchaseOrderNumber(testPurchaseOrder.getPurchaseOrderNumber())\n                    .lineNumber(1)\n                    .receivingDate(LocalDate.of(2025, 1, 28))\n                    .receivingQuantity(new BigDecimal(\"70\"))\n                    .receivingType(ReceivingType.SPLIT)\n                    .build());\n\n            // Assert\n            assertThat(secondReceiving).isNotNull();\n            assertThat(secondReceiving.getReceivingType()).isEqualTo(ReceivingType.SPLIT);\n        }\n\n        @Test\n        @DisplayName(\"\u767a\u6ce8\u6570\u91cf\u3092\u8d85\u3048\u308b\u5165\u8377\u306f\u30a8\u30e9\u30fc\u306b\u306a\u308b\")\n        void cannotReceiveMoreThanOrdered() {\n            // Act &amp; Assert\n            ReceivingCommand command = ReceivingCommand.builder()\n                    .purchaseOrderNumber(testPurchaseOrder.getPurchaseOrderNumber())\n                    .lineNumber(1)\n                    .receivingDate(LocalDate.of(2025, 1, 25))\n                    .receivingQuantity(new BigDecimal(\"150\"))\n                    .build();\n\n            assertThatThrownBy(() -&gt; receivingService.registerReceiving(command))\n                    .isInstanceOf(IllegalStateException.class)\n                    .hasMessageContaining(\"Cannot receive more than ordered quantity\");\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u53d7\u5165\u691c\u67fb\")\n    class InspectionRegistration {\n\n        @Test\n        @DisplayName(\"\u5165\u8377\u306b\u5bfe\u3057\u3066\u53d7\u5165\u691c\u67fb\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void canRegisterInspection() {\n            // Arrange\n            Receiving receiving = receivingService.registerReceiving(ReceivingCommand.builder()\n                    .purchaseOrderNumber(testPurchaseOrder.getPurchaseOrderNumber())\n                    .lineNumber(1)\n                    .receivingDate(LocalDate.of(2025, 1, 25))\n                    .receivingQuantity(new BigDecimal(\"100\"))\n                    .build());\n\n            // Act\n            InspectionCommand command = InspectionCommand.builder()\n                    .receivingNumber(receiving.getReceivingNumber())\n                    .inspectionDate(LocalDate.of(2025, 1, 26))\n                    .goodQuantity(new BigDecimal(\"95\"))\n                    .defectQuantity(new BigDecimal(\"5\"))\n                    .build();\n\n            Inspection inspection = receivingService.registerInspection(command);\n\n            // Assert\n            assertThat(inspection).isNotNull();\n            assertThat(inspection.getInspectionNumber()).startsWith(\"INS-\");\n            assertThat(inspection.getGoodQuantity()).isEqualByComparingTo(new BigDecimal(\"95\"));\n            assertThat(inspection.getDefectQuantity()).isEqualByComparingTo(new BigDecimal(\"5\"));\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u691c\u53ce\u51e6\u7406\")\n    class AcceptanceProcessing {\n\n        @Test\n        @DisplayName(\"\u691c\u67fb\u5408\u683c\u54c1\u3092\u691c\u53ce\u3067\u304d\u308b\")\n        void canProcessAcceptance() {\n            // Arrange\n            Receiving receiving = receivingService.registerReceiving(ReceivingCommand.builder()\n                    .purchaseOrderNumber(testPurchaseOrder.getPurchaseOrderNumber())\n                    .lineNumber(1)\n                    .receivingDate(LocalDate.of(2025, 1, 25))\n                    .receivingQuantity(new BigDecimal(\"100\"))\n                    .build());\n\n            Inspection inspection = receivingService.registerInspection(InspectionCommand.builder()\n                    .receivingNumber(receiving.getReceivingNumber())\n                    .inspectionDate(LocalDate.of(2025, 1, 26))\n                    .goodQuantity(new BigDecimal(\"100\"))\n                    .defectQuantity(BigDecimal.ZERO)\n                    .build());\n\n            // Act\n            AcceptanceCommand command = AcceptanceCommand.builder()\n                    .inspectionNumber(inspection.getInspectionNumber())\n                    .acceptanceDate(LocalDate.of(2025, 1, 27))\n                    .taxRate(new BigDecimal(\"10\"))\n                    .build();\n\n            Acceptance acceptance = receivingService.processAcceptance(command);\n\n            // Assert\n            assertThat(acceptance).isNotNull();\n            assertThat(acceptance.getAcceptanceNumber()).startsWith(\"ACC-\");\n            assertThat(acceptance.getAcceptedQuantity()).isEqualByComparingTo(new BigDecimal(\"100\"));\n            // 100\u500b \u00d7 1000\u5186 = 100,000\u5186\n            assertThat(acceptance.getAmount()).isEqualByComparingTo(new BigDecimal(\"100000\"));\n            // \u6d88\u8cbb\u7a0e 10% = 10,000\u5186\n            assertThat(acceptance.getTaxAmount()).isEqualByComparingTo(new BigDecimal(\"10000\"));\n        }\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter25/#_19","title":"\u307e\u3068\u3081","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u8cfc\u8cb7\u7ba1\u7406\uff08\u767a\u6ce8\u304b\u3089\u691c\u53ce\u307e\u3067\uff09\u306e DB \u8a2d\u8a08\u3068\u5b9f\u88c5\u306b\u3064\u3044\u3066\u5b66\u3073\u307e\u3057\u305f\u3002</p>"},{"location":"article/part4/chapter25/#_20","title":"\u5b66\u3093\u3060\u3053\u3068","text":"<ol> <li>\u767a\u6ce8\u696d\u52d9\u306e\u8a2d\u8a08</li> <li>\u767a\u6ce8\u30c7\u30fc\u30bf\u3068\u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\u306e\u89aa\u5b50\u95a2\u4fc2</li> <li>\u5358\u4fa1\u30de\u30b9\u30bf\u306b\u3088\u308b\u4fa1\u683c\u7ba1\u7406</li> <li>\u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\u306e\u72b6\u614b\u9077\u79fb</li> <li> <p>\u8af8\u53e3\u54c1\u76ee\uff08\u30de\u30b9\u30bf\u5916\u54c1\u76ee\uff09\u306e\u6271\u3044</p> </li> <li> <p>\u5165\u8377\u30fb\u691c\u53ce\u696d\u52d9\u306e\u8a2d\u8a08</p> </li> <li>\u5165\u8377\u2192\u691c\u67fb\u2192\u691c\u53ce\u306e\u696d\u52d9\u30d5\u30ed\u30fc</li> <li>\u5206\u5272\u5165\u8377\u3078\u306e\u5bfe\u5fdc</li> <li>\u826f\u54c1\u30fb\u4e0d\u826f\u54c1\u306e\u7ba1\u7406</li> <li> <p>\u6d88\u8cbb\u7a0e\u8a08\u7b97</p> </li> <li> <p>\u547d\u540d\u898f\u5247\u306e\u30d1\u30bf\u30fc\u30f3</p> </li> <li>DB\uff08\u65e5\u672c\u8a9e\uff09: \u30c6\u30fc\u30d6\u30eb\u540d\u3001\u30ab\u30e9\u30e0\u540d\u3001ENUM \u578b\u30fb\u5024\u306f\u65e5\u672c\u8a9e</li> <li>Java\uff08\u82f1\u8a9e\uff09: \u30af\u30e9\u30b9\u540d\u3001\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\u3001enum \u5024\u306f\u82f1\u8a9e</li> <li>MyBatis resultMap: \u65e5\u672c\u8a9e\u30ab\u30e9\u30e0\u3068\u82f1\u8a9e\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u30de\u30c3\u30d4\u30f3\u30b0</li> <li>TypeHandler: \u65e5\u672c\u8a9e ENUM \u5024\u3068\u82f1\u8a9e enum \u306e\u76f8\u4e92\u5909\u63db</li> </ol>"},{"location":"article/part4/chapter25/#_21","title":"\u30c6\u30fc\u30d6\u30eb\u4e00\u89a7","text":"\u30c6\u30fc\u30d6\u30eb\u540d\uff08\u65e5\u672c\u8a9e\uff09 Java \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 \u8aac\u660e \u5358\u4fa1\u30de\u30b9\u30bf UnitPrice \u54c1\u76ee\u30fb\u53d6\u5f15\u5148\u3054\u3068\u306e\u5358\u4fa1\u60c5\u5831 \u767a\u6ce8\u30c7\u30fc\u30bf PurchaseOrder \u767a\u6ce8\u30d8\u30c3\u30c0\u60c5\u5831 \u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf PurchaseOrderDetail \u767a\u6ce8\u660e\u7d30\u60c5\u5831 \u8af8\u53e3\u54c1\u76ee\u60c5\u5831 MiscellaneousItem \u30de\u30b9\u30bf\u5916\u54c1\u76ee\u306e\u81e8\u6642\u60c5\u5831 \u5165\u8377\u53d7\u5165\u30c7\u30fc\u30bf Receiving \u5165\u8377\u60c5\u5831 \u6b20\u70b9\u30de\u30b9\u30bf Defect \u4e0d\u826f\u54c1\u306e\u6b20\u70b9\u30b3\u30fc\u30c9 \u53d7\u5165\u691c\u67fb\u30c7\u30fc\u30bf Inspection \u53d7\u5165\u691c\u67fb\u60c5\u5831 \u691c\u53ce\u30c7\u30fc\u30bf Acceptance \u691c\u53ce\u60c5\u5831"},{"location":"article/part4/chapter25/#enum","title":"ENUM \u4e00\u89a7","text":"DB ENUM \u578b\uff08\u65e5\u672c\u8a9e\uff09 Java Enum \u5024 \u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9 PurchaseOrderStatus \u4f5c\u6210\u4e2d\u2192CREATING, \u767a\u6ce8\u6e08\u2192ORDERED, \u4e00\u90e8\u5165\u8377\u2192PARTIALLY_RECEIVED, \u5165\u8377\u5b8c\u4e86\u2192RECEIVED, \u691c\u53ce\u5b8c\u4e86\u2192ACCEPTED, \u53d6\u6d88\u2192CANCELLED \u5165\u8377\u53d7\u5165\u533a\u5206 ReceivingType \u901a\u5e38\u5165\u8377\u2192NORMAL, \u5206\u5272\u5165\u8377\u2192SPLIT, \u8fd4\u54c1\u5165\u8377\u2192RETURN"},{"location":"article/part4/chapter26/","title":"\u7b2c26\u7ae0\uff1a\u5916\u6ce8\u59d4\u8a17\u7ba1\u7406\u306e\u8a2d\u8a08","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u5916\u6ce8\u59d4\u8a17\u696d\u52d9\u306e DB \u8a2d\u8a08\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002\u81ea\u793e\u3067\u88fd\u9020\u3067\u304d\u306a\u3044\u5de5\u7a0b\u3092\u5916\u90e8\u306e\u59d4\u8a17\u5148\u306b\u4f9d\u983c\u3057\u3001\u6750\u6599\u3092\u652f\u7d66\u3057\u3066\u52a0\u5de5\u3057\u3066\u3082\u3089\u3046\u696d\u52d9\u30d5\u30ed\u30fc\u3092\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3067\u8868\u73fe\u3057\u307e\u3059\u3002</p>"},{"location":"article/part4/chapter26/#261","title":"26.1 \u5916\u6ce8\u59d4\u8a17\u696d\u52d9\u306e\u7406\u89e3","text":"<p>\u5916\u6ce8\u59d4\u8a17\u306f\u3001\u81ea\u793e\u306e\u751f\u7523\u80fd\u529b\u3092\u88dc\u5b8c\u3057\u3001\u5c02\u9580\u7684\u306a\u52a0\u5de5\u3092\u5916\u90e8\u306b\u4f9d\u983c\u3059\u308b\u305f\u3081\u306e\u91cd\u8981\u306a\u696d\u52d9\u3067\u3059\u3002</p>"},{"location":"article/part4/chapter26/#_1","title":"\u5916\u6ce8\u59d4\u8a17\u3068\u306f","text":"<p>\u5916\u6ce8\u59d4\u8a17\u306b\u306f\u4ee5\u4e0b\u306e\u7279\u5fb4\u304c\u3042\u308a\u307e\u3059\uff1a</p> \u7279\u5fb4 \u8aac\u660e \u5c02\u9580\u52a0\u5de5\u306e\u59d4\u8a17 \u30e1\u30c3\u30ad\u3001\u71b1\u51e6\u7406\u3001\u5857\u88c5\u306a\u3069\u5c02\u9580\u8a2d\u5099\u304c\u5fc5\u8981\u306a\u5de5\u7a0b\u3092\u59d4\u8a17 \u751f\u7523\u80fd\u529b\u306e\u88dc\u5b8c \u7e41\u5fd9\u671f\u306e\u751f\u7523\u91cf\u5897\u52a0\u3078\u306e\u5bfe\u5fdc \u30b3\u30b9\u30c8\u6700\u9069\u5316 \u5185\u88fd\u3068\u5916\u6ce8\u306e\u30b3\u30b9\u30c8\u6bd4\u8f03\u306b\u3088\u308b\u6700\u9069\u306a\u751f\u7523\u914d\u5206"},{"location":"article/part4/chapter26/#_2","title":"\u6709\u511f\u652f\u7d66\u3068\u7121\u511f\u652f\u7d66","text":"<p>\u5916\u6ce8\u59d4\u8a17\u306b\u304a\u3051\u308b\u6750\u6599\u306e\u652f\u7d66\u65b9\u6cd5\u306b\u306f2\u7a2e\u985e\u3042\u308a\u307e\u3059\u3002</p> \u652f\u7d66\u65b9\u5f0f \u8aac\u660e \u4f1a\u8a08\u51e6\u7406 \u6709\u511f\u652f\u7d66 \u6750\u6599\u3092\u58f2\u5374\u6271\u3044\u3067\u652f\u7d66 \u58f2\u4e0a\u8a08\u4e0a\u5f8c\u3001\u52a0\u5de5\u54c1\u3092\u4ed5\u5165\u308c \u7121\u511f\u652f\u7d66 \u6750\u6599\u3092\u7121\u511f\u3067\u8cb8\u4e0e \u5728\u5eab\u306e\u307e\u307e\u3001\u52a0\u5de5\u8cc3\u306e\u307f\u652f\u6255\u3044 <p></p>"},{"location":"article/part4/chapter26/#_3","title":"\u5916\u6ce8\u59d4\u8a17\u306e\u696d\u52d9\u30d5\u30ed\u30fc","text":""},{"location":"article/part4/chapter26/#262-db","title":"26.2 \u5916\u6ce8\u59d4\u8a17\u306e DB \u8a2d\u8a08","text":""},{"location":"article/part4/chapter26/#_4","title":"\u5916\u6ce8\u30aa\u30fc\u30c0\u306e\u69cb\u9020","text":"<p>\u5916\u6ce8\u30aa\u30fc\u30c0\u306f\u3001\u901a\u5e38\u306e\u8cfc\u8cb7\u767a\u6ce8\u3068\u540c\u3058\u30c6\u30fc\u30d6\u30eb\u69cb\u9020\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u767a\u6ce8\u30c7\u30fc\u30bf\u3068\u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\u306b\u5916\u6ce8\u59d4\u8a17\u7528\u306e\u60c5\u5831\u3092\u8ffd\u52a0\u3059\u308b\u5f62\u3067\u7ba1\u7406\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part4/chapter26/#_5","title":"\u652f\u7d66\u95a2\u9023\u306e\u30b9\u30ad\u30fc\u30de\u8a2d\u8a08","text":"DDL: \u652f\u7d66\u95a2\u9023\u30c6\u30fc\u30d6\u30eb <pre><code>-- V011__create_supply_tables.sql\n\n-- \u652f\u7d66\u533a\u5206\nCREATE TYPE \u652f\u7d66\u533a\u5206 AS ENUM ('\u6709\u511f\u652f\u7d66', '\u7121\u511f\u652f\u7d66');\n\n-- \u652f\u7d66\u30c7\u30fc\u30bf\nCREATE TABLE \"\u652f\u7d66\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u652f\u7d66\u756a\u53f7\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u767a\u6ce8\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u767a\u6ce8\u884c\u756a\u53f7\" INTEGER NOT NULL,\n    \"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u652f\u7d66\u65e5\" DATE NOT NULL,\n    \"\u652f\u7d66\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u652f\u7d66\u533a\u5206\" \u652f\u7d66\u533a\u5206 DEFAULT '\u7121\u511f\u652f\u7d66' NOT NULL,\n    \"\u5099\u8003\" TEXT,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u8005\" VARCHAR(50),\n    CONSTRAINT \"fk_\u652f\u7d66\u30c7\u30fc\u30bf_\u767a\u6ce8\u660e\u7d30\"\n        FOREIGN KEY (\"\u767a\u6ce8\u756a\u53f7\", \"\u767a\u6ce8\u884c\u756a\u53f7\") REFERENCES \"\u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\"(\"\u767a\u6ce8\u756a\u53f7\", \"\u767a\u6ce8\u884c\u756a\u53f7\"),\n    CONSTRAINT \"fk_\u652f\u7d66\u30c7\u30fc\u30bf_\u53d6\u5f15\u5148\"\n        FOREIGN KEY (\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\") REFERENCES \"\u53d6\u5f15\u5148\u30de\u30b9\u30bf\"(\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\")\n);\n\n-- \u652f\u7d66\u660e\u7d30\u30c7\u30fc\u30bf\nCREATE TABLE \"\u652f\u7d66\u660e\u7d30\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u652f\u7d66\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u652f\u7d66\u884c\u756a\u53f7\" INTEGER NOT NULL,\n    \"\u54c1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u652f\u7d66\u6570\" DECIMAL(15, 2) NOT NULL,\n    \"\u652f\u7d66\u5358\u4fa1\" DECIMAL(15, 2) NOT NULL,\n    \"\u652f\u7d66\u91d1\u984d\" DECIMAL(15, 2) NOT NULL,\n    \"\u5099\u8003\" TEXT,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"fk_\u652f\u7d66\u660e\u7d30_\u652f\u7d66\"\n        FOREIGN KEY (\"\u652f\u7d66\u756a\u53f7\") REFERENCES \"\u652f\u7d66\u30c7\u30fc\u30bf\"(\"\u652f\u7d66\u756a\u53f7\"),\n    CONSTRAINT \"fk_\u652f\u7d66\u660e\u7d30_\u54c1\u76ee\"\n        FOREIGN KEY (\"\u54c1\u76ee\u30b3\u30fc\u30c9\") REFERENCES \"\u54c1\u76ee\u30de\u30b9\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\"),\n    UNIQUE (\"\u652f\u7d66\u756a\u53f7\", \"\u652f\u7d66\u884c\u756a\u53f7\")\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"idx_\u652f\u7d66\u30c7\u30fc\u30bf_\u767a\u6ce8\u756a\u53f7\" ON \"\u652f\u7d66\u30c7\u30fc\u30bf\"(\"\u767a\u6ce8\u756a\u53f7\", \"\u767a\u6ce8\u884c\u756a\u53f7\");\nCREATE INDEX \"idx_\u652f\u7d66\u30c7\u30fc\u30bf_\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\" ON \"\u652f\u7d66\u30c7\u30fc\u30bf\"(\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u652f\u7d66\u30c7\u30fc\u30bf_\u652f\u7d66\u65e5\" ON \"\u652f\u7d66\u30c7\u30fc\u30bf\"(\"\u652f\u7d66\u65e5\");\nCREATE INDEX \"idx_\u652f\u7d66\u660e\u7d30_\u54c1\u76ee\u30b3\u30fc\u30c9\" ON \"\u652f\u7d66\u660e\u7d30\u30c7\u30fc\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\");\n</code></pre>"},{"location":"article/part4/chapter26/#_6","title":"\u767a\u6ce8\u30c7\u30fc\u30bf\u3068\u306e\u7d10\u4ed8\u3051","text":"<p>\u652f\u7d66\u30c7\u30fc\u30bf\u306f\u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\u3068\u7d10\u4ed8\u3051\u3089\u308c\u307e\u3059\u30021\u3064\u306e\u767a\u6ce8\u660e\u7d30\u306b\u5bfe\u3057\u3066\u3001\u8907\u6570\u306e\u652f\u7d66\u304c\u767a\u751f\u3059\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\uff08\u5206\u5272\u652f\u7d66\uff09\u3002</p>"},{"location":"article/part4/chapter26/#_7","title":"\u652f\u7d66\u91d1\u984d\u306e\u8a08\u7b97\uff08\u6709\u511f\u652f\u7d66\u306e\u5834\u5408\uff09","text":"<p>\u6709\u511f\u652f\u7d66\u306e\u5834\u5408\u3001\u652f\u7d66\u91d1\u984d\u306f\u4ee5\u4e0b\u306e\u8a08\u7b97\u5f0f\u3067\u7b97\u51fa\u3055\u308c\u307e\u3059\uff1a</p> <pre><code>\u652f\u7d66\u91d1\u984d = \u652f\u7d66\u6570 \u00d7 \u652f\u7d66\u5358\u4fa1\n</code></pre> <p>\u7121\u511f\u652f\u7d66\u306e\u5834\u5408\u3082\u91d1\u984d\u306f\u8a08\u7b97\u3055\u308c\u307e\u3059\u304c\u3001\u4f1a\u8a08\u51e6\u7406\u304c\u7570\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"article/part4/chapter26/#java","title":"Java \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u5b9a\u7fa9","text":"\u652f\u7d66\u533a\u5206 Enum <pre><code>// src/main/java/com/example/production/domain/model/subcontract/SupplyType.java\npackage com.example.production.domain.model.subcontract;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum SupplyType {\n    PAID(\"\u6709\u511f\u652f\u7d66\"),\n    FREE(\"\u7121\u511f\u652f\u7d66\");\n\n    private final String displayName;\n\n    public static SupplyType fromDisplayName(String displayName) {\n        for (SupplyType type : values()) {\n            if (type.displayName.equals(displayName)) {\n                return type;\n            }\n        }\n        throw new IllegalArgumentException(\"Unknown supply type: \" + displayName);\n    }\n}\n</code></pre> \u652f\u7d66\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/production/domain/model/subcontract/Supply.java\npackage com.example.production.domain.model.subcontract;\n\nimport com.example.production.domain.model.master.Supplier;\nimport com.example.production.domain.model.purchase.PurchaseOrderDetail;\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.List;\n\n@Data\n@Builder\npublic class Supply {\n    private Integer id;\n    private String supplyNumber;\n    private String purchaseOrderNumber;\n    private Integer lineNumber;\n    private String supplierCode;\n    private LocalDate supplyDate;\n    private String supplierPersonCode;\n    private SupplyType supplyType;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n\n    // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n    private PurchaseOrderDetail purchaseOrderDetail;\n    private Supplier supplier;\n    private List&lt;SupplyDetail&gt; details;\n}\n</code></pre> \u652f\u7d66\u660e\u7d30\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/production/domain/model/subcontract/SupplyDetail.java\npackage com.example.production.domain.model.subcontract;\n\nimport com.example.production.domain.model.item.Item;\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\npublic class SupplyDetail {\n    private Integer id;\n    private String supplyNumber;\n    private Integer lineNumber;\n    private String itemCode;\n    private BigDecimal quantity;\n    private BigDecimal unitPrice;\n    private BigDecimal amount;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n\n    // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n    private Supply supply;\n    private Item item;\n}\n</code></pre>"},{"location":"article/part4/chapter26/#typehandler","title":"TypeHandler \u306e\u5b9f\u88c5","text":"SupplyTypeTypeHandler <pre><code>// src/main/java/com/example/production/infrastructure/persistence/SupplyTypeTypeHandler.java\npackage com.example.production.infrastructure.persistence;\n\nimport com.example.production.domain.model.subcontract.SupplyType;\nimport org.apache.ibatis.type.BaseTypeHandler;\nimport org.apache.ibatis.type.JdbcType;\nimport org.apache.ibatis.type.MappedTypes;\n\nimport java.sql.CallableStatement;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\n\n@MappedTypes(SupplyType.class)\npublic class SupplyTypeTypeHandler extends BaseTypeHandler&lt;SupplyType&gt; {\n\n    @Override\n    public void setNonNullParameter(PreparedStatement ps, int i, SupplyType parameter, JdbcType jdbcType)\n            throws SQLException {\n        ps.setString(i, parameter.getDisplayName());\n    }\n\n    @Override\n    public SupplyType getNullableResult(ResultSet rs, String columnName) throws SQLException {\n        String value = rs.getString(columnName);\n        return value == null ? null : SupplyType.fromDisplayName(value);\n    }\n\n    @Override\n    public SupplyType getNullableResult(ResultSet rs, int columnIndex) throws SQLException {\n        String value = rs.getString(columnIndex);\n        return value == null ? null : SupplyType.fromDisplayName(value);\n    }\n\n    @Override\n    public SupplyType getNullableResult(CallableStatement cs, int columnIndex) throws SQLException {\n        String value = cs.getString(columnIndex);\n        return value == null ? null : SupplyType.fromDisplayName(value);\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter26/#mybatis-mapper-xml","title":"MyBatis Mapper XML","text":"SupplyMapper.xml <pre><code>&lt;!-- src/main/resources/com/example/production/infrastructure/persistence/mapper/SupplyMapper.xml --&gt;\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.production.infrastructure.persistence.mapper.SupplyMapper\"&gt;\n\n    &lt;resultMap id=\"SupplyResultMap\" type=\"com.example.production.domain.model.subcontract.Supply\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"supplyNumber\" column=\"\u652f\u7d66\u756a\u53f7\"/&gt;\n        &lt;result property=\"purchaseOrderNumber\" column=\"\u767a\u6ce8\u756a\u53f7\"/&gt;\n        &lt;result property=\"lineNumber\" column=\"\u767a\u6ce8\u884c\u756a\u53f7\"/&gt;\n        &lt;result property=\"supplierCode\" column=\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"supplyDate\" column=\"\u652f\u7d66\u65e5\"/&gt;\n        &lt;result property=\"supplierPersonCode\" column=\"\u652f\u7d66\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"supplyType\" column=\"\u652f\u7d66\u533a\u5206\"\n                typeHandler=\"com.example.production.infrastructure.persistence.SupplyTypeTypeHandler\"/&gt;\n        &lt;result property=\"remarks\" column=\"\u5099\u8003\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"createdBy\" column=\"\u4f5c\u6210\u8005\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedBy\" column=\"\u66f4\u65b0\u8005\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;insert id=\"insert\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u652f\u7d66\u30c7\u30fc\u30bf\" (\n            \"\u652f\u7d66\u756a\u53f7\", \"\u767a\u6ce8\u756a\u53f7\", \"\u767a\u6ce8\u884c\u756a\u53f7\", \"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\",\n            \"\u652f\u7d66\u65e5\", \"\u652f\u7d66\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\", \"\u652f\u7d66\u533a\u5206\", \"\u5099\u8003\", \"\u4f5c\u6210\u8005\"\n        ) VALUES (\n            #{supplyNumber},\n            #{purchaseOrderNumber},\n            #{lineNumber},\n            #{supplierCode},\n            #{supplyDate},\n            #{supplierPersonCode},\n            #{supplyType, typeHandler=com.example.production.infrastructure.persistence.SupplyTypeTypeHandler}::\u652f\u7d66\u533a\u5206,\n            #{remarks},\n            #{createdBy}\n        )\n    &lt;/insert&gt;\n\n    &lt;select id=\"findBySupplyNumber\" resultMap=\"SupplyResultMap\"&gt;\n        SELECT * FROM \"\u652f\u7d66\u30c7\u30fc\u30bf\" WHERE \"\u652f\u7d66\u756a\u53f7\" = #{supplyNumber}\n    &lt;/select&gt;\n\n    &lt;select id=\"findByPurchaseOrderDetail\" resultMap=\"SupplyResultMap\"&gt;\n        SELECT * FROM \"\u652f\u7d66\u30c7\u30fc\u30bf\"\n        WHERE \"\u767a\u6ce8\u756a\u53f7\" = #{purchaseOrderNumber} AND \"\u767a\u6ce8\u884c\u756a\u53f7\" = #{lineNumber}\n    &lt;/select&gt;\n\n    &lt;select id=\"findLatestSupplyNumber\" resultType=\"string\"&gt;\n        SELECT \"\u652f\u7d66\u756a\u53f7\" FROM \"\u652f\u7d66\u30c7\u30fc\u30bf\"\n        WHERE \"\u652f\u7d66\u756a\u53f7\" LIKE #{prefix}\n        ORDER BY \"\u652f\u7d66\u756a\u53f7\" DESC\n        LIMIT 1\n    &lt;/select&gt;\n\n    &lt;delete id=\"deleteAll\"&gt;\n        DELETE FROM \"\u652f\u7d66\u30c7\u30fc\u30bf\"\n    &lt;/delete&gt;\n&lt;/mapper&gt;\n</code></pre> SupplyDetailMapper.xml <pre><code>&lt;!-- src/main/resources/com/example/production/infrastructure/persistence/mapper/SupplyDetailMapper.xml --&gt;\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.production.infrastructure.persistence.mapper.SupplyDetailMapper\"&gt;\n\n    &lt;resultMap id=\"SupplyDetailResultMap\" type=\"com.example.production.domain.model.subcontract.SupplyDetail\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"supplyNumber\" column=\"\u652f\u7d66\u756a\u53f7\"/&gt;\n        &lt;result property=\"lineNumber\" column=\"\u652f\u7d66\u884c\u756a\u53f7\"/&gt;\n        &lt;result property=\"itemCode\" column=\"\u54c1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"quantity\" column=\"\u652f\u7d66\u6570\"/&gt;\n        &lt;result property=\"unitPrice\" column=\"\u652f\u7d66\u5358\u4fa1\"/&gt;\n        &lt;result property=\"amount\" column=\"\u652f\u7d66\u91d1\u984d\"/&gt;\n        &lt;result property=\"remarks\" column=\"\u5099\u8003\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;insert id=\"insert\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u652f\u7d66\u660e\u7d30\u30c7\u30fc\u30bf\" (\n            \"\u652f\u7d66\u756a\u53f7\", \"\u652f\u7d66\u884c\u756a\u53f7\", \"\u54c1\u76ee\u30b3\u30fc\u30c9\", \"\u652f\u7d66\u6570\", \"\u652f\u7d66\u5358\u4fa1\", \"\u652f\u7d66\u91d1\u984d\", \"\u5099\u8003\"\n        ) VALUES (\n            #{supplyNumber},\n            #{lineNumber},\n            #{itemCode},\n            #{quantity},\n            #{unitPrice},\n            #{amount},\n            #{remarks}\n        )\n    &lt;/insert&gt;\n\n    &lt;select id=\"findBySupplyNumber\" resultMap=\"SupplyDetailResultMap\"&gt;\n        SELECT * FROM \"\u652f\u7d66\u660e\u7d30\u30c7\u30fc\u30bf\"\n        WHERE \"\u652f\u7d66\u756a\u53f7\" = #{supplyNumber}\n        ORDER BY \"\u652f\u7d66\u884c\u756a\u53f7\"\n    &lt;/select&gt;\n\n    &lt;delete id=\"deleteAll\"&gt;\n        DELETE FROM \"\u652f\u7d66\u660e\u7d30\u30c7\u30fc\u30bf\"\n    &lt;/delete&gt;\n&lt;/mapper&gt;\n</code></pre>"},{"location":"article/part4/chapter26/#mapper","title":"Mapper \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9","text":"SupplyMapper <pre><code>// src/main/java/com/example/production/infrastructure/persistence/mapper/SupplyMapper.java\npackage com.example.production.infrastructure.persistence.mapper;\n\nimport com.example.production.domain.model.subcontract.Supply;\nimport org.apache.ibatis.annotations.Mapper;\nimport org.apache.ibatis.annotations.Param;\n\n@Mapper\npublic interface SupplyMapper {\n    void insert(Supply supply);\n    Supply findBySupplyNumber(String supplyNumber);\n    Supply findByPurchaseOrderDetail(@Param(\"purchaseOrderNumber\") String purchaseOrderNumber,\n                                     @Param(\"lineNumber\") Integer lineNumber);\n    String findLatestSupplyNumber(String prefix);\n    void deleteAll();\n}\n</code></pre> SupplyDetailMapper <pre><code>// src/main/java/com/example/production/infrastructure/persistence/mapper/SupplyDetailMapper.java\npackage com.example.production.infrastructure.persistence.mapper;\n\nimport com.example.production.domain.model.subcontract.SupplyDetail;\nimport org.apache.ibatis.annotations.Mapper;\n\nimport java.util.List;\n\n@Mapper\npublic interface SupplyDetailMapper {\n    void insert(SupplyDetail detail);\n    List&lt;SupplyDetail&gt; findBySupplyNumber(String supplyNumber);\n    void deleteAll();\n}\n</code></pre>"},{"location":"article/part4/chapter26/#_8","title":"\u652f\u7d66\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":"SupplyService <pre><code>// src/main/java/com/example/production/application/service/SupplyService.java\npackage com.example.production.application.service;\n\nimport com.example.production.application.port.in.command.SupplyCreateCommand;\nimport com.example.production.application.port.in.command.SupplyDetailCommand;\nimport com.example.production.domain.model.subcontract.*;\nimport com.example.production.infrastructure.persistence.mapper.*;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.time.LocalDate;\nimport java.time.format.DateTimeFormatter;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Service\n@RequiredArgsConstructor\npublic class SupplyService {\n\n    private final SupplyMapper supplyMapper;\n    private final SupplyDetailMapper supplyDetailMapper;\n\n    /**\n     * \u652f\u7d66\u756a\u53f7\u3092\u751f\u6210\u3059\u308b\n     */\n    private String generateSupplyNumber(LocalDate supplyDate) {\n        String prefix = \"SUP-\" + supplyDate.format(DateTimeFormatter.ofPattern(\"yyyyMM\")) + \"-\";\n        String latestNumber = supplyMapper.findLatestSupplyNumber(prefix + \"%\");\n\n        int sequence = 1;\n        if (latestNumber != null) {\n            int currentSequence = Integer.parseInt(latestNumber.substring(latestNumber.length() - 4));\n            sequence = currentSequence + 1;\n        }\n\n        return prefix + String.format(\"%04d\", sequence);\n    }\n\n    /**\n     * \u652f\u7d66\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\u3059\u308b\n     */\n    @Transactional\n    public Supply createSupply(SupplyCreateCommand command) {\n        String supplyNumber = generateSupplyNumber(command.getSupplyDate());\n        SupplyType supplyType = command.getSupplyType() != null ? command.getSupplyType() : SupplyType.FREE;\n\n        // \u652f\u7d66\u30d8\u30c3\u30c0\u3092\u4f5c\u6210\n        Supply supply = Supply.builder()\n                .supplyNumber(supplyNumber)\n                .purchaseOrderNumber(command.getPurchaseOrderNumber())\n                .lineNumber(command.getLineNumber())\n                .supplierCode(command.getSupplierCode())\n                .supplyDate(command.getSupplyDate())\n                .supplierPersonCode(command.getSupplierPersonCode())\n                .supplyType(supplyType)\n                .remarks(command.getRemarks())\n                .build();\n        supplyMapper.insert(supply);\n\n        // \u652f\u7d66\u660e\u7d30\u3092\u4f5c\u6210\n        List&lt;SupplyDetail&gt; details = new ArrayList&lt;&gt;();\n        int detailLineNumber = 0;\n\n        for (SupplyDetailCommand detailCommand : command.getDetails()) {\n            detailLineNumber++;\n\n            SupplyDetail detail = SupplyDetail.builder()\n                    .supplyNumber(supplyNumber)\n                    .lineNumber(detailLineNumber)\n                    .itemCode(detailCommand.getItemCode())\n                    .quantity(detailCommand.getQuantity())\n                    .unitPrice(detailCommand.getUnitPrice())\n                    .amount(detailCommand.getQuantity().multiply(detailCommand.getUnitPrice()))\n                    .remarks(detailCommand.getRemarks())\n                    .build();\n            supplyDetailMapper.insert(detail);\n\n            details.add(detail);\n        }\n\n        supply.setDetails(details);\n        return supply;\n    }\n\n    /**\n     * \u652f\u7d66\u756a\u53f7\u3067\u691c\u7d22\u3059\u308b\n     */\n    public Supply findBySupplyNumber(String supplyNumber) {\n        Supply supply = supplyMapper.findBySupplyNumber(supplyNumber);\n        if (supply != null) {\n            supply.setDetails(supplyDetailMapper.findBySupplyNumber(supplyNumber));\n        }\n        return supply;\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter26/#_9","title":"\u30b3\u30de\u30f3\u30c9\u30af\u30e9\u30b9","text":"SupplyCreateCommand <pre><code>// src/main/java/com/example/production/application/port/in/command/SupplyCreateCommand.java\npackage com.example.production.application.port.in.command;\n\nimport com.example.production.domain.model.subcontract.SupplyType;\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.time.LocalDate;\nimport java.util.List;\n\n@Data\n@Builder\npublic class SupplyCreateCommand {\n    private String purchaseOrderNumber;\n    private Integer lineNumber;\n    private String supplierCode;\n    private LocalDate supplyDate;\n    private String supplierPersonCode;\n    private SupplyType supplyType;\n    private String remarks;\n    private List&lt;SupplyDetailCommand&gt; details;\n}\n</code></pre> SupplyDetailCommand <pre><code>// src/main/java/com/example/production/application/port/in/command/SupplyDetailCommand.java\npackage com.example.production.application.port.in.command;\n\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\n\n@Data\n@Builder\npublic class SupplyDetailCommand {\n    private String itemCode;\n    private BigDecimal quantity;\n    private BigDecimal unitPrice;\n    private String remarks;\n}\n</code></pre>"},{"location":"article/part4/chapter26/#tdd","title":"TDD: \u652f\u7d66\u30c7\u30fc\u30bf\u306e\u767b\u9332\u30c6\u30b9\u30c8","text":"SupplyServiceTest <pre><code>// src/test/java/com/example/production/application/service/SupplyServiceTest.java\npackage com.example.production.application.service;\n\nimport com.example.production.domain.model.item.Item;\nimport com.example.production.domain.model.item.ItemCategory;\nimport com.example.production.domain.model.master.Supplier;\nimport com.example.production.domain.model.purchase.*;\nimport com.example.production.domain.model.subcontract.*;\nimport com.example.production.infrastructure.persistence.mapper.*;\nimport org.junit.jupiter.api.*;\nimport org.mybatis.spring.boot.test.autoconfigure.MybatisTest;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.jdbc.AutoConfigureTestDatabase;\nimport org.springframework.context.annotation.Import;\nimport org.springframework.test.context.DynamicPropertyRegistry;\nimport org.springframework.test.context.DynamicPropertySource;\nimport org.testcontainers.containers.PostgreSQLContainer;\nimport org.testcontainers.junit.jupiter.Container;\nimport org.testcontainers.junit.jupiter.Testcontainers;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.util.List;\n\nimport static org.assertj.core.api.Assertions.*;\n\n@MybatisTest\n@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\n@Import({SupplyService.class, PurchaseOrderService.class})\n@Testcontainers\n@DisplayName(\"\u652f\u7d66\u696d\u52d9\")\nclass SupplyServiceTest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:15\")\n            .withDatabaseName(\"testdb\")\n            .withUsername(\"testuser\")\n            .withPassword(\"testpass\");\n\n    @DynamicPropertySource\n    static void configureProperties(DynamicPropertyRegistry registry) {\n        registry.add(\"spring.datasource.url\", postgres::getJdbcUrl);\n        registry.add(\"spring.datasource.username\", postgres::getUsername);\n        registry.add(\"spring.datasource.password\", postgres::getPassword);\n    }\n\n    @Autowired\n    private SupplyService supplyService;\n\n    @Autowired\n    private PurchaseOrderService purchaseOrderService;\n\n    @Autowired\n    private ItemMapper itemMapper;\n\n    @Autowired\n    private SupplierMapper supplierMapper;\n\n    @Autowired\n    private UnitPriceMapper unitPriceMapper;\n\n    @Autowired\n    private SupplyMapper supplyMapper;\n\n    @Autowired\n    private SupplyDetailMapper supplyDetailMapper;\n\n    @Autowired\n    private PurchaseOrderMapper purchaseOrderMapper;\n\n    @Autowired\n    private PurchaseOrderDetailMapper purchaseOrderDetailMapper;\n\n    private PurchaseOrder testPurchaseOrder;\n\n    @BeforeEach\n    void setUp() {\n        supplyDetailMapper.deleteAll();\n        supplyMapper.deleteAll();\n        purchaseOrderDetailMapper.deleteAll();\n        purchaseOrderMapper.deleteAll();\n        unitPriceMapper.deleteAll();\n        supplierMapper.deleteAll();\n        itemMapper.deleteAll();\n\n        // \u30de\u30b9\u30bf\u30c7\u30fc\u30bf\u306e\u6e96\u5099\n        Supplier supplier = Supplier.builder()\n                .supplierCode(\"SUB-001\")\n                .effectiveFrom(LocalDate.of(2025, 1, 1))\n                .supplierName(\"\u682a\u5f0f\u4f1a\u793e\u30e1\u30c3\u30ad\u5de5\u696d\")\n                .build();\n        supplierMapper.insert(supplier);\n\n        Item parentItem = Item.builder()\n                .itemCode(\"PLATED-001\")\n                .effectiveFrom(LocalDate.of(2025, 1, 1))\n                .itemName(\"\u30e1\u30c3\u30ad\u52a0\u5de5\u54c1\")\n                .itemCategory(ItemCategory.SEMI_PRODUCT)\n                .build();\n        itemMapper.insert(parentItem);\n\n        Item supplyItem = Item.builder()\n                .itemCode(\"PRESS-001\")\n                .effectiveFrom(LocalDate.of(2025, 1, 1))\n                .itemName(\"\u30d7\u30ec\u30b9\u90e8\u54c1\")\n                .itemCategory(ItemCategory.PART)\n                .build();\n        itemMapper.insert(supplyItem);\n\n        unitPriceMapper.insert(UnitPrice.builder()\n                .itemCode(\"PLATED-001\")\n                .supplierCode(\"SUB-001\")\n                .effectiveFrom(LocalDate.of(2025, 1, 1))\n                .unitPrice(new BigDecimal(\"500\"))\n                .build());\n\n        // \u30c6\u30b9\u30c8\u7528\u767a\u6ce8\u3092\u4f5c\u6210\n        PurchaseOrderCreateInput poInput = PurchaseOrderCreateInput.builder()\n                .supplierCode(\"SUB-001\")\n                .orderDate(LocalDate.of(2025, 1, 15))\n                .details(List.of(\n                        PurchaseOrderDetailInput.builder()\n                                .itemCode(\"PLATED-001\")\n                                .orderQuantity(new BigDecimal(\"100\"))\n                                .expectedReceivingDate(LocalDate.of(2025, 1, 25))\n                                .build()\n                ))\n                .build();\n        testPurchaseOrder = purchaseOrderService.createPurchaseOrder(poInput);\n        purchaseOrderService.confirmPurchaseOrder(testPurchaseOrder.getPurchaseOrderNumber());\n    }\n\n    @Nested\n    @DisplayName(\"\u652f\u7d66\u30c7\u30fc\u30bf\u4f5c\u6210\")\n    class SupplyCreation {\n\n        @Test\n        @DisplayName(\"\u767a\u6ce8\u306b\u7d10\u3065\u304f\u652f\u7d66\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\u3067\u304d\u308b\")\n        void canCreateSupplyFromPurchaseOrder() {\n            // Act\n            SupplyCreateCommand input = SupplyCreateCommand.builder()\n                    .purchaseOrderNumber(testPurchaseOrder.getPurchaseOrderNumber())\n                    .lineNumber(1)\n                    .supplierCode(\"SUB-001\")\n                    .supplyDate(LocalDate.of(2025, 1, 16))\n                    .supplierPersonCode(\"EMP001\")\n                    .supplyType(SupplyType.FREE)\n                    .details(List.of(\n                            SupplyDetailCommand.builder()\n                                    .itemCode(\"PRESS-001\")\n                                    .quantity(new BigDecimal(\"100\"))\n                                    .unitPrice(new BigDecimal(\"200\"))\n                                    .build()\n                    ))\n                    .build();\n\n            Supply supply = supplyService.createSupply(input);\n\n            // Assert\n            assertThat(supply).isNotNull();\n            assertThat(supply.getSupplyNumber()).startsWith(\"SUP-\");\n            assertThat(supply.getSupplierCode()).isEqualTo(\"SUB-001\");\n            assertThat(supply.getSupplyType()).isEqualTo(SupplyType.FREE);\n            assertThat(supply.getDetails()).hasSize(1);\n            assertThat(supply.getDetails().get(0).getQuantity())\n                    .isEqualByComparingTo(new BigDecimal(\"100\"));\n        }\n\n        @Test\n        @DisplayName(\"\u6709\u511f\u652f\u7d66\u3092\u4f5c\u6210\u3067\u304d\u308b\")\n        void canCreatePaidSupply() {\n            // Act\n            SupplyCreateCommand input = SupplyCreateCommand.builder()\n                    .purchaseOrderNumber(testPurchaseOrder.getPurchaseOrderNumber())\n                    .lineNumber(1)\n                    .supplierCode(\"SUB-001\")\n                    .supplyDate(LocalDate.of(2025, 1, 16))\n                    .supplierPersonCode(\"EMP001\")\n                    .supplyType(SupplyType.PAID)\n                    .details(List.of(\n                            SupplyDetailCommand.builder()\n                                    .itemCode(\"PRESS-001\")\n                                    .quantity(new BigDecimal(\"100\"))\n                                    .unitPrice(new BigDecimal(\"200\"))\n                                    .build()\n                    ))\n                    .build();\n\n            Supply supply = supplyService.createSupply(input);\n\n            // Assert\n            assertThat(supply.getSupplyType()).isEqualTo(SupplyType.PAID);\n            assertThat(supply.getDetails().get(0).getAmount())\n                    .isEqualByComparingTo(new BigDecimal(\"20000\"));\n        }\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter26/#263","title":"26.3 \u6d88\u8cbb\u696d\u52d9\u306e\u8a2d\u8a08","text":"<p>\u5916\u6ce8\u5148\u304c\u652f\u7d66\u54c1\u3092\u52a0\u5de5\u3057\u3066\u7d0d\u54c1\u3057\u305f\u969b\u3001\u652f\u7d66\u3057\u305f\u6750\u6599\u304c\u3069\u308c\u3060\u3051\u6d88\u8cbb\u3055\u308c\u305f\u304b\u3092\u8a18\u9332\u3057\u307e\u3059\u3002</p>"},{"location":"article/part4/chapter26/#_10","title":"\u6d88\u8cbb\u95a2\u9023\u306e\u30b9\u30ad\u30fc\u30de\u8a2d\u8a08","text":"DDL: \u6d88\u8cbb\u95a2\u9023\u30c6\u30fc\u30d6\u30eb <pre><code>-- V012__create_consumption_tables.sql\n\n-- \u6d88\u8cbb\u30c7\u30fc\u30bf\nCREATE TABLE \"\u6d88\u8cbb\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u6d88\u8cbb\u756a\u53f7\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u5165\u8377\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u6d88\u8cbb\u65e5\" DATE NOT NULL,\n    \"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u5099\u8003\" TEXT,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u8005\" VARCHAR(50),\n    CONSTRAINT \"fk_\u6d88\u8cbb\u30c7\u30fc\u30bf_\u5165\u8377\"\n        FOREIGN KEY (\"\u5165\u8377\u756a\u53f7\") REFERENCES \"\u5165\u8377\u53d7\u5165\u30c7\u30fc\u30bf\"(\"\u5165\u8377\u756a\u53f7\"),\n    CONSTRAINT \"fk_\u6d88\u8cbb\u30c7\u30fc\u30bf_\u53d6\u5f15\u5148\"\n        FOREIGN KEY (\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\") REFERENCES \"\u53d6\u5f15\u5148\u30de\u30b9\u30bf\"(\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\")\n);\n\n-- \u6d88\u8cbb\u660e\u7d30\u30c7\u30fc\u30bf\nCREATE TABLE \"\u6d88\u8cbb\u660e\u7d30\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u6d88\u8cbb\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u6d88\u8cbb\u884c\u756a\u53f7\" INTEGER NOT NULL,\n    \"\u54c1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u6d88\u8cbb\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u5099\u8003\" TEXT,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"fk_\u6d88\u8cbb\u660e\u7d30_\u6d88\u8cbb\"\n        FOREIGN KEY (\"\u6d88\u8cbb\u756a\u53f7\") REFERENCES \"\u6d88\u8cbb\u30c7\u30fc\u30bf\"(\"\u6d88\u8cbb\u756a\u53f7\"),\n    CONSTRAINT \"fk_\u6d88\u8cbb\u660e\u7d30_\u54c1\u76ee\"\n        FOREIGN KEY (\"\u54c1\u76ee\u30b3\u30fc\u30c9\") REFERENCES \"\u54c1\u76ee\u30de\u30b9\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\"),\n    UNIQUE (\"\u6d88\u8cbb\u756a\u53f7\", \"\u6d88\u8cbb\u884c\u756a\u53f7\")\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"idx_\u6d88\u8cbb\u30c7\u30fc\u30bf_\u5165\u8377\u756a\u53f7\" ON \"\u6d88\u8cbb\u30c7\u30fc\u30bf\"(\"\u5165\u8377\u756a\u53f7\");\nCREATE INDEX \"idx_\u6d88\u8cbb\u30c7\u30fc\u30bf_\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\" ON \"\u6d88\u8cbb\u30c7\u30fc\u30bf\"(\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u6d88\u8cbb\u30c7\u30fc\u30bf_\u6d88\u8cbb\u65e5\" ON \"\u6d88\u8cbb\u30c7\u30fc\u30bf\"(\"\u6d88\u8cbb\u65e5\");\nCREATE INDEX \"idx_\u6d88\u8cbb\u660e\u7d30_\u54c1\u76ee\u30b3\u30fc\u30c9\" ON \"\u6d88\u8cbb\u660e\u7d30\u30c7\u30fc\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\");\n</code></pre>"},{"location":"article/part4/chapter26/#_11","title":"\u5165\u8377\u53d7\u5165\u30c7\u30fc\u30bf\u3068\u306e\u7d10\u4ed8\u3051","text":"<p>\u6d88\u8cbb\u30c7\u30fc\u30bf\u306f\u5165\u8377\u53d7\u5165\u30c7\u30fc\u30bf\u3068\u7d10\u4ed8\u3051\u3089\u308c\u307e\u3059\u3002\u5916\u6ce8\u5148\u304b\u3089\u52a0\u5de5\u54c1\u304c\u5165\u8377\u3057\u305f\u6642\u70b9\u3067\u3001\u652f\u7d66\u3057\u305f\u6750\u6599\u306e\u6d88\u8cbb\u91cf\u3092\u8a18\u9332\u3057\u307e\u3059\u3002</p>"},{"location":"article/part4/chapter26/#_12","title":"\u6d88\u8cbb\u7387\u306e\u8a08\u7b97","text":"<p>\u6d88\u8cbb\u7387\uff08\u6b69\u7559\u307e\u308a\u7387\uff09\u306f\u4ee5\u4e0b\u306e\u8a08\u7b97\u5f0f\u3067\u7b97\u51fa\u3055\u308c\u307e\u3059\uff1a</p> <pre><code>\u6d88\u8cbb\u7387 = \u6d88\u8cbb\u6570\u91cf \u00f7 \u652f\u7d66\u6570\u91cf\n</code></pre> <p>\u3053\u306e\u5024\u306f\u54c1\u8cea\u7ba1\u7406\u3084\u539f\u4fa1\u8a08\u7b97\u306b\u304a\u3044\u3066\u91cd\u8981\u306a\u6307\u6a19\u3068\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"article/part4/chapter26/#java_1","title":"Java \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u5b9a\u7fa9","text":"\u6d88\u8cbb\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/production/domain/model/subcontract/Consumption.java\npackage com.example.production.domain.model.subcontract;\n\nimport com.example.production.domain.model.master.Supplier;\nimport com.example.production.domain.model.purchase.Receiving;\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.List;\n\n@Data\n@Builder\npublic class Consumption {\n    private Integer id;\n    private String consumptionNumber;\n    private String receivingNumber;\n    private LocalDate consumptionDate;\n    private String supplierCode;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n\n    // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n    private Receiving receiving;\n    private Supplier supplier;\n    private List&lt;ConsumptionDetail&gt; details;\n}\n</code></pre> \u6d88\u8cbb\u660e\u7d30\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 <pre><code>// src/main/java/com/example/production/domain/model/subcontract/ConsumptionDetail.java\npackage com.example.production.domain.model.subcontract;\n\nimport com.example.production.domain.model.item.Item;\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\npublic class ConsumptionDetail {\n    private Integer id;\n    private String consumptionNumber;\n    private Integer lineNumber;\n    private String itemCode;\n    private BigDecimal quantity;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n\n    // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n    private Consumption consumption;\n    private Item item;\n}\n</code></pre>"},{"location":"article/part4/chapter26/#mybatis-mapper-xml_1","title":"MyBatis Mapper XML","text":"ConsumptionMapper.xml <pre><code>&lt;!-- src/main/resources/com/example/production/infrastructure/persistence/mapper/ConsumptionMapper.xml --&gt;\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.production.infrastructure.persistence.mapper.ConsumptionMapper\"&gt;\n\n    &lt;resultMap id=\"ConsumptionResultMap\" type=\"com.example.production.domain.model.subcontract.Consumption\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"consumptionNumber\" column=\"\u6d88\u8cbb\u756a\u53f7\"/&gt;\n        &lt;result property=\"receivingNumber\" column=\"\u5165\u8377\u756a\u53f7\"/&gt;\n        &lt;result property=\"consumptionDate\" column=\"\u6d88\u8cbb\u65e5\"/&gt;\n        &lt;result property=\"supplierCode\" column=\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"remarks\" column=\"\u5099\u8003\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"createdBy\" column=\"\u4f5c\u6210\u8005\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedBy\" column=\"\u66f4\u65b0\u8005\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;insert id=\"insert\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u6d88\u8cbb\u30c7\u30fc\u30bf\" (\n            \"\u6d88\u8cbb\u756a\u53f7\", \"\u5165\u8377\u756a\u53f7\", \"\u6d88\u8cbb\u65e5\", \"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\", \"\u5099\u8003\", \"\u4f5c\u6210\u8005\"\n        ) VALUES (\n            #{consumptionNumber},\n            #{receivingNumber},\n            #{consumptionDate},\n            #{supplierCode},\n            #{remarks},\n            #{createdBy}\n        )\n    &lt;/insert&gt;\n\n    &lt;select id=\"findByConsumptionNumber\" resultMap=\"ConsumptionResultMap\"&gt;\n        SELECT * FROM \"\u6d88\u8cbb\u30c7\u30fc\u30bf\" WHERE \"\u6d88\u8cbb\u756a\u53f7\" = #{consumptionNumber}\n    &lt;/select&gt;\n\n    &lt;select id=\"findByReceivingNumber\" resultMap=\"ConsumptionResultMap\"&gt;\n        SELECT * FROM \"\u6d88\u8cbb\u30c7\u30fc\u30bf\" WHERE \"\u5165\u8377\u756a\u53f7\" = #{receivingNumber}\n    &lt;/select&gt;\n\n    &lt;select id=\"findLatestConsumptionNumber\" resultType=\"string\"&gt;\n        SELECT \"\u6d88\u8cbb\u756a\u53f7\" FROM \"\u6d88\u8cbb\u30c7\u30fc\u30bf\"\n        WHERE \"\u6d88\u8cbb\u756a\u53f7\" LIKE #{prefix}\n        ORDER BY \"\u6d88\u8cbb\u756a\u53f7\" DESC\n        LIMIT 1\n    &lt;/select&gt;\n\n    &lt;delete id=\"deleteAll\"&gt;\n        DELETE FROM \"\u6d88\u8cbb\u30c7\u30fc\u30bf\"\n    &lt;/delete&gt;\n&lt;/mapper&gt;\n</code></pre> ConsumptionDetailMapper.xml <pre><code>&lt;!-- src/main/resources/com/example/production/infrastructure/persistence/mapper/ConsumptionDetailMapper.xml --&gt;\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.production.infrastructure.persistence.mapper.ConsumptionDetailMapper\"&gt;\n\n    &lt;resultMap id=\"ConsumptionDetailResultMap\" type=\"com.example.production.domain.model.subcontract.ConsumptionDetail\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"consumptionNumber\" column=\"\u6d88\u8cbb\u756a\u53f7\"/&gt;\n        &lt;result property=\"lineNumber\" column=\"\u6d88\u8cbb\u884c\u756a\u53f7\"/&gt;\n        &lt;result property=\"itemCode\" column=\"\u54c1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"quantity\" column=\"\u6d88\u8cbb\u6570\u91cf\"/&gt;\n        &lt;result property=\"remarks\" column=\"\u5099\u8003\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;insert id=\"insert\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u6d88\u8cbb\u660e\u7d30\u30c7\u30fc\u30bf\" (\n            \"\u6d88\u8cbb\u756a\u53f7\", \"\u6d88\u8cbb\u884c\u756a\u53f7\", \"\u54c1\u76ee\u30b3\u30fc\u30c9\", \"\u6d88\u8cbb\u6570\u91cf\", \"\u5099\u8003\"\n        ) VALUES (\n            #{consumptionNumber},\n            #{lineNumber},\n            #{itemCode},\n            #{quantity},\n            #{remarks}\n        )\n    &lt;/insert&gt;\n\n    &lt;select id=\"findByConsumptionNumber\" resultMap=\"ConsumptionDetailResultMap\"&gt;\n        SELECT * FROM \"\u6d88\u8cbb\u660e\u7d30\u30c7\u30fc\u30bf\"\n        WHERE \"\u6d88\u8cbb\u756a\u53f7\" = #{consumptionNumber}\n        ORDER BY \"\u6d88\u8cbb\u884c\u756a\u53f7\"\n    &lt;/select&gt;\n\n    &lt;select id=\"sumByPurchaseOrderAndItem\" resultType=\"java.math.BigDecimal\"&gt;\n        SELECT COALESCE(SUM(cd.\"\u6d88\u8cbb\u6570\u91cf\"), 0)\n        FROM \"\u6d88\u8cbb\u660e\u7d30\u30c7\u30fc\u30bf\" cd\n        JOIN \"\u6d88\u8cbb\u30c7\u30fc\u30bf\" c ON cd.\"\u6d88\u8cbb\u756a\u53f7\" = c.\"\u6d88\u8cbb\u756a\u53f7\"\n        JOIN \"\u5165\u8377\u53d7\u5165\u30c7\u30fc\u30bf\" r ON c.\"\u5165\u8377\u756a\u53f7\" = r.\"\u5165\u8377\u756a\u53f7\"\n        WHERE r.\"\u767a\u6ce8\u756a\u53f7\" = #{purchaseOrderNumber}\n          AND r.\"\u767a\u6ce8\u884c\u756a\u53f7\" = #{lineNumber}\n          AND cd.\"\u54c1\u76ee\u30b3\u30fc\u30c9\" = #{itemCode}\n    &lt;/select&gt;\n\n    &lt;delete id=\"deleteAll\"&gt;\n        DELETE FROM \"\u6d88\u8cbb\u660e\u7d30\u30c7\u30fc\u30bf\"\n    &lt;/delete&gt;\n&lt;/mapper&gt;\n</code></pre>"},{"location":"article/part4/chapter26/#mapper_1","title":"Mapper \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9","text":"ConsumptionMapper <pre><code>// src/main/java/com/example/production/infrastructure/persistence/mapper/ConsumptionMapper.java\npackage com.example.production.infrastructure.persistence.mapper;\n\nimport com.example.production.domain.model.subcontract.Consumption;\nimport org.apache.ibatis.annotations.Mapper;\n\n@Mapper\npublic interface ConsumptionMapper {\n    void insert(Consumption consumption);\n    Consumption findByConsumptionNumber(String consumptionNumber);\n    Consumption findByReceivingNumber(String receivingNumber);\n    String findLatestConsumptionNumber(String prefix);\n    void deleteAll();\n}\n</code></pre> ConsumptionDetailMapper <pre><code>// src/main/java/com/example/production/infrastructure/persistence/mapper/ConsumptionDetailMapper.java\npackage com.example.production.infrastructure.persistence.mapper;\n\nimport com.example.production.domain.model.subcontract.ConsumptionDetail;\nimport org.apache.ibatis.annotations.Mapper;\nimport org.apache.ibatis.annotations.Param;\n\nimport java.math.BigDecimal;\nimport java.util.List;\n\n@Mapper\npublic interface ConsumptionDetailMapper {\n    void insert(ConsumptionDetail detail);\n    List&lt;ConsumptionDetail&gt; findByConsumptionNumber(String consumptionNumber);\n    BigDecimal sumByPurchaseOrderAndItem(@Param(\"purchaseOrderNumber\") String purchaseOrderNumber,\n                                         @Param(\"lineNumber\") Integer lineNumber,\n                                         @Param(\"itemCode\") String itemCode);\n    void deleteAll();\n}\n</code></pre>"},{"location":"article/part4/chapter26/#_13","title":"\u6d88\u8cbb\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":"ConsumptionService <pre><code>// src/main/java/com/example/production/application/service/ConsumptionService.java\npackage com.example.production.application.service;\n\nimport com.example.production.application.port.in.command.ConsumptionCreateCommand;\nimport com.example.production.application.port.in.command.ConsumptionDetailCommand;\nimport com.example.production.domain.model.purchase.Receiving;\nimport com.example.production.domain.model.subcontract.*;\nimport com.example.production.infrastructure.persistence.mapper.*;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.math.BigDecimal;\nimport java.math.RoundingMode;\nimport java.time.LocalDate;\nimport java.time.format.DateTimeFormatter;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Service\n@RequiredArgsConstructor\npublic class ConsumptionService {\n\n    private final ConsumptionMapper consumptionMapper;\n    private final ConsumptionDetailMapper consumptionDetailMapper;\n    private final ReceivingMapper receivingMapper;\n    private final SupplyMapper supplyMapper;\n    private final SupplyDetailMapper supplyDetailMapper;\n\n    /**\n     * \u6d88\u8cbb\u756a\u53f7\u3092\u751f\u6210\u3059\u308b\n     */\n    private String generateConsumptionNumber(LocalDate consumptionDate) {\n        String prefix = \"CON-\" + consumptionDate.format(DateTimeFormatter.ofPattern(\"yyyyMM\")) + \"-\";\n        String latestNumber = consumptionMapper.findLatestConsumptionNumber(prefix + \"%\");\n\n        int sequence = 1;\n        if (latestNumber != null) {\n            int currentSequence = Integer.parseInt(latestNumber.substring(latestNumber.length() - 4));\n            sequence = currentSequence + 1;\n        }\n\n        return prefix + String.format(\"%04d\", sequence);\n    }\n\n    /**\n     * \u6d88\u8cbb\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\u3059\u308b\n     */\n    @Transactional\n    public Consumption createConsumption(ConsumptionCreateCommand command) {\n        // \u5165\u8377\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\n        Receiving receiving = receivingMapper.findByReceivingNumber(command.getReceivingNumber());\n        if (receiving == null) {\n            throw new IllegalArgumentException(\"Receiving not found: \" + command.getReceivingNumber());\n        }\n\n        // \u95a2\u9023\u3059\u308b\u652f\u7d66\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\n        Supply supply = supplyMapper.findByPurchaseOrderDetail(\n                receiving.getPurchaseOrderNumber(), receiving.getLineNumber());\n        if (supply == null) {\n            throw new IllegalArgumentException(\"Supply not found for receiving: \" + command.getReceivingNumber());\n        }\n\n        List&lt;SupplyDetail&gt; supplyDetails = supplyDetailMapper.findBySupplyNumber(supply.getSupplyNumber());\n\n        // \u6d88\u8cbb\u6570\u91cf\u306e\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\n        for (ConsumptionDetailCommand detailCommand : command.getDetails()) {\n            for (SupplyDetail supplyDetail : supplyDetails) {\n                if (supplyDetail.getItemCode().equals(detailCommand.getItemCode())) {\n                    if (detailCommand.getQuantity().compareTo(supplyDetail.getQuantity()) &gt; 0) {\n                        throw new IllegalStateException(\"Consumption quantity exceeds supply quantity\");\n                    }\n                }\n            }\n        }\n\n        String consumptionNumber = generateConsumptionNumber(command.getConsumptionDate());\n\n        // \u6d88\u8cbb\u30d8\u30c3\u30c0\u3092\u4f5c\u6210\n        Consumption consumption = Consumption.builder()\n                .consumptionNumber(consumptionNumber)\n                .receivingNumber(command.getReceivingNumber())\n                .consumptionDate(command.getConsumptionDate())\n                .supplierCode(command.getSupplierCode())\n                .remarks(command.getRemarks())\n                .build();\n        consumptionMapper.insert(consumption);\n\n        // \u6d88\u8cbb\u660e\u7d30\u3092\u4f5c\u6210\n        List&lt;ConsumptionDetail&gt; details = new ArrayList&lt;&gt;();\n        int lineNumber = 0;\n\n        for (ConsumptionDetailCommand detailCommand : command.getDetails()) {\n            lineNumber++;\n\n            ConsumptionDetail detail = ConsumptionDetail.builder()\n                    .consumptionNumber(consumptionNumber)\n                    .lineNumber(lineNumber)\n                    .itemCode(detailCommand.getItemCode())\n                    .quantity(detailCommand.getQuantity())\n                    .remarks(detailCommand.getRemarks())\n                    .build();\n            consumptionDetailMapper.insert(detail);\n\n            details.add(detail);\n        }\n\n        consumption.setDetails(details);\n        return consumption;\n    }\n\n    /**\n     * \u6d88\u8cbb\u7387\u3092\u8a08\u7b97\u3059\u308b\n     */\n    public BigDecimal calculateConsumptionRate(String supplyNumber, String itemCode) {\n        Supply supply = supplyMapper.findBySupplyNumber(supplyNumber);\n        if (supply == null) {\n            throw new IllegalArgumentException(\"Supply not found: \" + supplyNumber);\n        }\n\n        List&lt;SupplyDetail&gt; supplyDetails = supplyDetailMapper.findBySupplyNumber(supplyNumber);\n        SupplyDetail targetDetail = supplyDetails.stream()\n                .filter(d -&gt; d.getItemCode().equals(itemCode))\n                .findFirst()\n                .orElseThrow(() -&gt; new IllegalArgumentException(\"Supply detail not found: \" + itemCode));\n\n        BigDecimal supplyQuantity = targetDetail.getQuantity();\n\n        BigDecimal totalConsumption = consumptionDetailMapper.sumByPurchaseOrderAndItem(\n                supply.getPurchaseOrderNumber(),\n                supply.getLineNumber(),\n                itemCode\n        );\n\n        if (totalConsumption == null) {\n            totalConsumption = BigDecimal.ZERO;\n        }\n\n        return totalConsumption.divide(supplyQuantity, 2, RoundingMode.HALF_UP);\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter26/#_14","title":"\u30b3\u30de\u30f3\u30c9\u30af\u30e9\u30b9","text":"ConsumptionCreateCommand <pre><code>// src/main/java/com/example/production/application/port/in/command/ConsumptionCreateCommand.java\npackage com.example.production.application.port.in.command;\n\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.time.LocalDate;\nimport java.util.List;\n\n@Data\n@Builder\npublic class ConsumptionCreateCommand {\n    private String receivingNumber;\n    private LocalDate consumptionDate;\n    private String supplierCode;\n    private String remarks;\n    private List&lt;ConsumptionDetailCommand&gt; details;\n}\n</code></pre> ConsumptionDetailCommand <pre><code>// src/main/java/com/example/production/application/port/in/command/ConsumptionDetailCommand.java\npackage com.example.production.application.port.in.command;\n\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\n\n@Data\n@Builder\npublic class ConsumptionDetailCommand {\n    private String itemCode;\n    private BigDecimal quantity;\n    private String remarks;\n}\n</code></pre>"},{"location":"article/part4/chapter26/#tdd_1","title":"TDD: \u6d88\u8cbb\u30c7\u30fc\u30bf\u306e\u30c6\u30b9\u30c8","text":"ConsumptionServiceTest <pre><code>// src/test/java/com/example/production/application/service/ConsumptionServiceTest.java\npackage com.example.production.application.service;\n\nimport com.example.production.domain.model.subcontract.*;\nimport org.junit.jupiter.api.*;\nimport org.mybatis.spring.boot.test.autoconfigure.MybatisTest;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.jdbc.AutoConfigureTestDatabase;\nimport org.springframework.context.annotation.Import;\nimport org.springframework.test.context.DynamicPropertyRegistry;\nimport org.springframework.test.context.DynamicPropertySource;\nimport org.testcontainers.containers.PostgreSQLContainer;\nimport org.testcontainers.junit.jupiter.Container;\nimport org.testcontainers.junit.jupiter.Testcontainers;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.util.List;\n\nimport static org.assertj.core.api.Assertions.*;\n\n@MybatisTest\n@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\n@Import({ConsumptionService.class, SupplyService.class, ReceivingService.class, PurchaseOrderService.class})\n@Testcontainers\n@DisplayName(\"\u6d88\u8cbb\u696d\u52d9\")\nclass ConsumptionServiceTest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:15\")\n            .withDatabaseName(\"testdb\")\n            .withUsername(\"testuser\")\n            .withPassword(\"testpass\");\n\n    @DynamicPropertySource\n    static void configureProperties(DynamicPropertyRegistry registry) {\n        registry.add(\"spring.datasource.url\", postgres::getJdbcUrl);\n        registry.add(\"spring.datasource.username\", postgres::getUsername);\n        registry.add(\"spring.datasource.password\", postgres::getPassword);\n    }\n\n    @Autowired\n    private ConsumptionService consumptionService;\n\n    // \u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u6e96\u5099\u306f\u7701\u7565\n\n    @Nested\n    @DisplayName(\"\u6d88\u8cbb\u30c7\u30fc\u30bf\u4f5c\u6210\")\n    class ConsumptionCreation {\n\n        @Test\n        @DisplayName(\"\u5165\u8377\u6642\u306b\u652f\u7d66\u54c1\u306e\u6d88\u8cbb\u3092\u8a18\u9332\u3067\u304d\u308b\")\n        void canRecordConsumptionOnReceiving() {\n            // Arrange: \u4e8b\u524d\u306b\u652f\u7d66\u30fb\u5165\u8377\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\uff08\u7701\u7565\uff09\n            String receivingNumber = \"RCV-202501-0001\";\n\n            // Act\n            ConsumptionCreateCommand input = ConsumptionCreateCommand.builder()\n                    .receivingNumber(receivingNumber)\n                    .consumptionDate(LocalDate.of(2025, 1, 26))\n                    .supplierCode(\"SUB-001\")\n                    .details(List.of(\n                            ConsumptionDetailCommand.builder()\n                                    .itemCode(\"PRESS-001\")\n                                    .quantity(new BigDecimal(\"95\"))\n                                    .build()\n                    ))\n                    .build();\n\n            Consumption consumption = consumptionService.createConsumption(input);\n\n            // Assert\n            assertThat(consumption).isNotNull();\n            assertThat(consumption.getConsumptionNumber()).startsWith(\"CON-\");\n            assertThat(consumption.getDetails()).hasSize(1);\n            assertThat(consumption.getDetails().get(0).getQuantity())\n                    .isEqualByComparingTo(new BigDecimal(\"95\"));\n        }\n\n        @Test\n        @DisplayName(\"\u6d88\u8cbb\u6570\u91cf\u306f\u652f\u7d66\u6570\u91cf\u3092\u8d85\u3048\u3066\u306f\u306a\u3089\u306a\u3044\")\n        void cannotConsumeMoreThanSupplied() {\n            // Arrange\n            String receivingNumber = \"RCV-202501-0001\";\n\n            // Act &amp; Assert\n            ConsumptionCreateCommand input = ConsumptionCreateCommand.builder()\n                    .receivingNumber(receivingNumber)\n                    .consumptionDate(LocalDate.of(2025, 1, 26))\n                    .supplierCode(\"SUB-001\")\n                    .details(List.of(\n                            ConsumptionDetailCommand.builder()\n                                    .itemCode(\"PRESS-001\")\n                                    .quantity(new BigDecimal(\"150\"))\n                                    .build()\n                    ))\n                    .build();\n\n            assertThatThrownBy(() -&gt; consumptionService.createConsumption(input))\n                    .isInstanceOf(IllegalStateException.class)\n                    .hasMessageContaining(\"exceeds supply quantity\");\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u6d88\u8cbb\u7387\u306e\u8a08\u7b97\")\n    class ConsumptionRateCalculation {\n\n        @Test\n        @DisplayName(\"\u652f\u7d66\u306b\u5bfe\u3059\u308b\u6d88\u8cbb\u7387\u3092\u8a08\u7b97\u3067\u304d\u308b\")\n        void canCalculateConsumptionRate() {\n            // Arrange: \u6d88\u8cbb\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\uff08\u7701\u7565\uff09\n            String supplyNumber = \"SUP-202501-0001\";\n\n            // Act\n            BigDecimal rate = consumptionService.calculateConsumptionRate(supplyNumber, \"PRESS-001\");\n\n            // Assert: 95/100 = 0.95\n            assertThat(rate).isEqualByComparingTo(new BigDecimal(\"0.95\"));\n        }\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter26/#264","title":"26.4 \u5916\u6ce8\u59d4\u8a17\u30ef\u30fc\u30af\u30d5\u30ed\u30fc","text":""},{"location":"article/part4/chapter26/#_15","title":"\u5916\u6ce8\u59d4\u8a17\u306e\u5168\u4f53\u30d5\u30ed\u30fc","text":""},{"location":"article/part4/chapter26/#_16","title":"\u5916\u6ce8\u59d4\u8a17\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u30b5\u30fc\u30d3\u30b9","text":"SubcontractingWorkflowService <pre><code>// src/main/java/com/example/production/application/service/SubcontractingWorkflowService.java\npackage com.example.production.application.service;\n\nimport com.example.production.application.port.in.command.SubcontractOrderCommand;\nimport com.example.production.application.port.out.SubcontractStatus;\nimport com.example.production.domain.model.purchase.*;\nimport com.example.production.domain.model.subcontract.*;\nimport com.example.production.infrastructure.persistence.mapper.*;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.math.BigDecimal;\nimport java.math.RoundingMode;\nimport java.time.LocalDate;\nimport java.time.format.DateTimeFormatter;\nimport java.util.List;\n\n@Service\n@RequiredArgsConstructor\npublic class SubcontractingWorkflowService {\n\n    private final PurchaseOrderMapper purchaseOrderMapper;\n    private final PurchaseOrderDetailMapper purchaseOrderDetailMapper;\n    private final SupplyMapper supplyMapper;\n    private final SupplyDetailMapper supplyDetailMapper;\n    private final ConsumptionDetailMapper consumptionDetailMapper;\n    private final UnitPriceMapper unitPriceMapper;\n\n    /**\n     * \u767a\u6ce8\u756a\u53f7\u3092\u751f\u6210\u3059\u308b\n     */\n    private String generatePurchaseOrderNumber() {\n        String prefix = \"PO-\" + LocalDate.now().format(DateTimeFormatter.ofPattern(\"yyyyMM\")) + \"-\";\n        String latestNumber = purchaseOrderMapper.findLatestPurchaseOrderNumber(prefix + \"%\");\n\n        int sequence = 1;\n        if (latestNumber != null) {\n            int currentSequence = Integer.parseInt(latestNumber.substring(latestNumber.length() - 4));\n            sequence = currentSequence + 1;\n        }\n\n        return prefix + String.format(\"%04d\", sequence);\n    }\n\n    /**\n     * \u5916\u6ce8\u767a\u6ce8\u3092\u4f5c\u6210\u3059\u308b\n     */\n    @Transactional\n    public PurchaseOrder createSubcontractOrder(SubcontractOrderCommand command) {\n        String purchaseOrderNumber = generatePurchaseOrderNumber();\n\n        // \u5358\u4fa1\u3092\u53d6\u5f97\n        BigDecimal unitPrice = command.getUnitPrice();\n        if (unitPrice == null) {\n            UnitPrice priceEntity = unitPriceMapper.findEffectiveUnitPrice(\n                    command.getItemCode(), command.getSupplierCode(), LocalDate.now());\n            unitPrice = priceEntity != null ? priceEntity.getUnitPrice() : BigDecimal.ZERO;\n        }\n\n        // \u767a\u6ce8\u30d8\u30c3\u30c0\u3092\u4f5c\u6210\n        PurchaseOrder purchaseOrder = PurchaseOrder.builder()\n                .purchaseOrderNumber(purchaseOrderNumber)\n                .orderDate(LocalDate.now())\n                .supplierCode(command.getSupplierCode())\n                .status(PurchaseOrderStatus.CREATING)\n                .build();\n        purchaseOrderMapper.insert(purchaseOrder);\n\n        // \u767a\u6ce8\u660e\u7d30\u3092\u4f5c\u6210\n        BigDecimal orderAmount = command.getQuantity().multiply(unitPrice);\n        PurchaseOrderDetail detail = PurchaseOrderDetail.builder()\n                .purchaseOrderNumber(purchaseOrderNumber)\n                .lineNumber(1)\n                .itemCode(command.getItemCode())\n                .orderQuantity(command.getQuantity())\n                .orderUnitPrice(unitPrice)\n                .orderAmount(orderAmount)\n                .expectedReceivingDate(command.getDeliveryDate())\n                .completedFlag(false)\n                .build();\n        purchaseOrderDetailMapper.insert(detail);\n\n        // \u767a\u6ce8\u78ba\u5b9a\n        purchaseOrderMapper.updateStatus(purchaseOrderNumber, PurchaseOrderStatus.ORDERED);\n        purchaseOrder.setStatus(PurchaseOrderStatus.ORDERED);\n\n        return purchaseOrder;\n    }\n\n    /**\n     * \u5916\u6ce8\u59d4\u8a17\u72b6\u6cc1\u3092\u53d6\u5f97\u3059\u308b\n     */\n    public SubcontractStatus getSubcontractStatus(String purchaseOrderNumber) {\n        PurchaseOrder purchaseOrder = purchaseOrderMapper.findByPurchaseOrderNumber(purchaseOrderNumber);\n        if (purchaseOrder == null) {\n            throw new IllegalArgumentException(\"Purchase order not found: \" + purchaseOrderNumber);\n        }\n\n        List&lt;PurchaseOrderDetail&gt; details = purchaseOrderDetailMapper.findByPurchaseOrderNumber(purchaseOrderNumber);\n\n        BigDecimal suppliedQuantity = BigDecimal.ZERO;\n        BigDecimal consumedQuantity = BigDecimal.ZERO;\n        BigDecimal acceptedQuantity = BigDecimal.ZERO;\n\n        for (PurchaseOrderDetail detail : details) {\n            Supply supply = supplyMapper.findByPurchaseOrderDetail(purchaseOrderNumber, detail.getLineNumber());\n            if (supply != null) {\n                List&lt;SupplyDetail&gt; supplyDetails = supplyDetailMapper.findBySupplyNumber(supply.getSupplyNumber());\n                for (SupplyDetail supplyDetail : supplyDetails) {\n                    suppliedQuantity = suppliedQuantity.add(supplyDetail.getQuantity());\n\n                    BigDecimal consumed = consumptionDetailMapper.sumByPurchaseOrderAndItem(\n                            purchaseOrderNumber, detail.getLineNumber(), supplyDetail.getItemCode());\n                    if (consumed != null) {\n                        consumedQuantity = consumedQuantity.add(consumed);\n                    }\n                }\n            }\n\n            if (detail.getAcceptedQuantity() != null) {\n                acceptedQuantity = acceptedQuantity.add(detail.getAcceptedQuantity());\n            }\n        }\n\n        BigDecimal yieldRate = suppliedQuantity.compareTo(BigDecimal.ZERO) &gt; 0\n                ? consumedQuantity.divide(suppliedQuantity, 2, RoundingMode.HALF_UP)\n                : BigDecimal.ZERO;\n\n        return SubcontractStatus.builder()\n                .purchaseOrderNumber(purchaseOrderNumber)\n                .status(purchaseOrder.getStatus())\n                .suppliedQuantity(suppliedQuantity)\n                .consumedQuantity(consumedQuantity)\n                .acceptedQuantity(acceptedQuantity)\n                .yieldRate(yieldRate)\n                .build();\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter26/#dto","title":"\u30b3\u30de\u30f3\u30c9\u30fbDTO \u30af\u30e9\u30b9","text":"SubcontractOrderCommand <pre><code>// src/main/java/com/example/production/application/port/in/command/SubcontractOrderCommand.java\npackage com.example.production.application.port.in.command;\n\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\n\n@Data\n@Builder\npublic class SubcontractOrderCommand {\n    private String supplierCode;\n    private LocalDate deliveryDate;\n    private String itemCode;\n    private BigDecimal quantity;\n    private BigDecimal unitPrice;\n}\n</code></pre> SubcontractStatus <pre><code>// src/main/java/com/example/production/application/port/out/SubcontractStatus.java\npackage com.example.production.application.port.out;\n\nimport com.example.production.domain.model.purchase.PurchaseOrderStatus;\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\n\n/**\n * \u5916\u6ce8\u59d4\u8a17\u72b6\u6cc1DTO\n */\n@Data\n@Builder\npublic class SubcontractStatus {\n    private String purchaseOrderNumber;\n    private PurchaseOrderStatus status;\n    private BigDecimal suppliedQuantity;\n    private BigDecimal consumedQuantity;\n    private BigDecimal acceptedQuantity;\n    private BigDecimal yieldRate;\n}\n</code></pre>"},{"location":"article/part4/chapter26/#_17","title":"\u6709\u511f\u652f\u7d66\u3068\u7121\u511f\u652f\u7d66\u306e\u4f1a\u8a08\u51e6\u7406\u306e\u9055\u3044","text":"\u51e6\u7406 \u6709\u511f\u652f\u7d66 \u7121\u511f\u652f\u7d66 \u652f\u7d66\u6642 \u58f2\u4e0a\u8a08\u4e0a\uff08\u6750\u6599\u3092\u58f2\u5374\uff09 \u5728\u5eab\u79fb\u52d5\u306e\u307f \u5165\u8377\u6642 \u4ed5\u5165\u8a08\u4e0a\uff08\u52a0\u5de5\u54c1\u3092\u8cfc\u5165\uff09 \u52a0\u5de5\u8cc3\u306e\u307f\u8a08\u4e0a \u6d88\u8cbb\u7a0e \u58f2\u4e0a\u30fb\u4ed5\u5165\u4e21\u65b9\u3067\u8ab2\u7a0e \u52a0\u5de5\u8cc3\u306e\u307f\u8ab2\u7a0e \u5728\u5eab\u7ba1\u7406 \u652f\u7d66\u6642\u306b\u5728\u5eab\u6e1b\u3001\u5165\u8377\u6642\u306b\u5728\u5eab\u5897 \u5728\u5eab\u306f\u81ea\u793e\u306e\u307e\u307e"},{"location":"article/part4/chapter26/#_18","title":"\u307e\u3068\u3081","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u5916\u6ce8\u59d4\u8a17\u7ba1\u7406\uff08\u652f\u7d66\u304b\u3089\u6d88\u8cbb\u307e\u3067\uff09\u306e DB \u8a2d\u8a08\u3068\u5b9f\u88c5\u306b\u3064\u3044\u3066\u5b66\u3073\u307e\u3057\u305f\u3002</p>"},{"location":"article/part4/chapter26/#_19","title":"\u5b66\u3093\u3060\u3053\u3068","text":"<ol> <li>\u652f\u7d66\u696d\u52d9\u306e\u8a2d\u8a08</li> <li>\u652f\u7d66\u30c7\u30fc\u30bf\u3068\u652f\u7d66\u660e\u7d30\u30c7\u30fc\u30bf\u306e\u89aa\u5b50\u95a2\u4fc2</li> <li>\u6709\u511f\u652f\u7d66\u3068\u7121\u511f\u652f\u7d66\u306e\u533a\u5225</li> <li> <p>\u767a\u6ce8\u660e\u7d30\u3068\u306e\u7d10\u4ed8\u3051</p> </li> <li> <p>\u6d88\u8cbb\u696d\u52d9\u306e\u8a2d\u8a08</p> </li> <li>\u5165\u8377\u6642\u306e\u6d88\u8cbb\u8a18\u9332</li> <li>\u6b69\u7559\u307e\u308a\u7387\u306e\u8a08\u7b97</li> <li> <p>\u652f\u7d66\u6570\u91cf\u3092\u8d85\u3048\u306a\u3044\u6d88\u8cbb\u306e\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3</p> </li> <li> <p>\u547d\u540d\u898f\u5247\u306e\u30d1\u30bf\u30fc\u30f3</p> </li> <li>DB\uff08\u65e5\u672c\u8a9e\uff09: \u30c6\u30fc\u30d6\u30eb\u540d\u3001\u30ab\u30e9\u30e0\u540d\u3001ENUM \u578b\u30fb\u5024\u306f\u65e5\u672c\u8a9e</li> <li>Java\uff08\u82f1\u8a9e\uff09: \u30af\u30e9\u30b9\u540d\u3001\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\u3001enum \u5024\u306f\u82f1\u8a9e</li> <li>MyBatis resultMap: \u65e5\u672c\u8a9e\u30ab\u30e9\u30e0\u3068\u82f1\u8a9e\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u30de\u30c3\u30d4\u30f3\u30b0</li> <li>TypeHandler: \u65e5\u672c\u8a9e ENUM \u5024\u3068\u82f1\u8a9e enum \u306e\u76f8\u4e92\u5909\u63db</li> </ol>"},{"location":"article/part4/chapter26/#_20","title":"\u30c6\u30fc\u30d6\u30eb\u4e00\u89a7","text":"\u30c6\u30fc\u30d6\u30eb\u540d\uff08\u65e5\u672c\u8a9e\uff09 Java \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 \u8aac\u660e \u652f\u7d66\u30c7\u30fc\u30bf Supply \u5916\u6ce8\u5148\u3078\u306e\u652f\u7d66\u60c5\u5831 \u652f\u7d66\u660e\u7d30\u30c7\u30fc\u30bf SupplyDetail \u652f\u7d66\u54c1\u76ee\u306e\u660e\u7d30 \u6d88\u8cbb\u30c7\u30fc\u30bf Consumption \u652f\u7d66\u54c1\u306e\u6d88\u8cbb\u5831\u544a \u6d88\u8cbb\u660e\u7d30\u30c7\u30fc\u30bf ConsumptionDetail \u6d88\u8cbb\u54c1\u76ee\u306e\u660e\u7d30"},{"location":"article/part4/chapter26/#enum","title":"ENUM \u4e00\u89a7","text":"DB ENUM \u578b\uff08\u65e5\u672c\u8a9e\uff09 Java Enum \u5024 \u652f\u7d66\u533a\u5206 SupplyType \u6709\u511f\u652f\u7d66\u2192PAID, \u7121\u511f\u652f\u7d66\u2192FREE"},{"location":"article/part4/chapter27/","title":"\u7b2c27\u7ae0\uff1a\u5de5\u7a0b\u7ba1\u7406\u306e\u8a2d\u8a08","text":""},{"location":"article/part4/chapter27/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306b\u304a\u3051\u308b\u5de5\u7a0b\u7ba1\u7406\u306e\u8a2d\u8a08\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002\u88fd\u9020\u30aa\u30fc\u30c0\u304b\u3089\u4f5c\u696d\u6307\u793a\u3092\u751f\u6210\u3057\u3001\u5b8c\u6210\u5b9f\u7e3e\u30fb\u5de5\u6570\u5b9f\u7e3e\u3092\u8a18\u9332\u3059\u308b\u4ed5\u7d44\u307f\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part4/chapter27/#271-db","title":"27.1 \u88fd\u9020\u6307\u793a\u306e DB \u8a2d\u8a08","text":""},{"location":"article/part4/chapter27/#_2","title":"\u5de5\u7a0b\u7ba1\u7406\u696d\u52d9\u306e\u6d41\u308c","text":"<p>\u88fd\u9020\u30aa\u30fc\u30c0\u304c\u78ba\u5b9a\u3059\u308b\u3068\u3001\u4f5c\u696d\u6307\u793a\u306b\u5c55\u958b\u3055\u308c\u307e\u3059\u3002\u4f5c\u696d\u6307\u793a\u306f\u5de5\u7a0b\u8868\u306b\u57fa\u3065\u3044\u3066\u5de5\u7a0b\u3054\u3068\u306e\u660e\u7d30\u3092\u6301\u3061\u3001\u73fe\u5834\u3067\u306e\u88fd\u9020\u4f5c\u696d\u3092\u7ba1\u7406\u3057\u307e\u3059\u3002</p> <p></p> <p></p>"},{"location":"article/part4/chapter27/#_3","title":"\u5de5\u7a0b\u30de\u30b9\u30bf\u30fb\u5de5\u7a0b\u8868\u306e\u30b9\u30ad\u30fc\u30de\u8a2d\u8a08","text":"<p>\u5de5\u7a0b\u30de\u30b9\u30bf\u306f\u88fd\u9020\u5de5\u7a0b\u3092\u5b9a\u7fa9\u3057\u3001\u5de5\u7a0b\u8868\u306f\u54c1\u76ee\u3054\u3068\u306e\u88fd\u9020\u5de5\u9806\u3092\u7ba1\u7406\u3057\u307e\u3059\u3002</p> DDL: \u5de5\u7a0b\u30de\u30b9\u30bf\u30fb\u5de5\u7a0b\u8868 <pre><code>-- V013__create_process_master_tables.sql\n\n-- \u5de5\u7a0b\u30de\u30b9\u30bf\nCREATE TABLE \"\u5de5\u7a0b\u30de\u30b9\u30bf\" (\n    \"\u5de5\u7a0b\u30b3\u30fc\u30c9\" VARCHAR(20) PRIMARY KEY,\n    \"\u5de5\u7a0b\u540d\" VARCHAR(100) NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u8005\" VARCHAR(50)\n);\n\n-- \u5de5\u7a0b\u8868\nCREATE TABLE \"\u5de5\u7a0b\u8868\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u54c1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u5de5\u9806\" INTEGER NOT NULL,\n    \"\u5de5\u7a0b\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"fk_\u5de5\u7a0b\u8868_\u54c1\u76ee\"\n        FOREIGN KEY (\"\u54c1\u76ee\u30b3\u30fc\u30c9\") REFERENCES \"\u54c1\u76ee\u30de\u30b9\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"fk_\u5de5\u7a0b\u8868_\u5de5\u7a0b\"\n        FOREIGN KEY (\"\u5de5\u7a0b\u30b3\u30fc\u30c9\") REFERENCES \"\u5de5\u7a0b\u30de\u30b9\u30bf\"(\"\u5de5\u7a0b\u30b3\u30fc\u30c9\"),\n    UNIQUE (\"\u54c1\u76ee\u30b3\u30fc\u30c9\", \"\u5de5\u9806\")\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"idx_\u5de5\u7a0b\u8868_\u54c1\u76ee\u30b3\u30fc\u30c9\" ON \"\u5de5\u7a0b\u8868\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u5de5\u7a0b\u8868_\u5de5\u7a0b\u30b3\u30fc\u30c9\" ON \"\u5de5\u7a0b\u8868\"(\"\u5de5\u7a0b\u30b3\u30fc\u30c9\");\n</code></pre>"},{"location":"article/part4/chapter27/#_4","title":"\u4f5c\u696d\u6307\u793a\u306e\u30b9\u30ad\u30fc\u30de\u8a2d\u8a08","text":"<p>\u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf\u306f\u30aa\u30fc\u30c0\u60c5\u5831\u304b\u3089\u5c55\u958b\u3055\u308c\u3001\u4f5c\u696d\u6307\u793a\u660e\u7d30\u30c7\u30fc\u30bf\u306f\u5de5\u7a0b\u8868\u306b\u57fa\u3065\u3044\u3066\u751f\u6210\u3055\u308c\u307e\u3059\u3002</p> <p></p> DDL: \u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf\u30fb\u4f5c\u696d\u6307\u793a\u660e\u7d30\u30c7\u30fc\u30bf <pre><code>-- V014__create_work_order_tables.sql\n\n-- \u4f5c\u696d\u6307\u793a\u30b9\u30c6\u30fc\u30bf\u30b9\nCREATE TYPE \u4f5c\u696d\u6307\u793a\u30b9\u30c6\u30fc\u30bf\u30b9 AS ENUM ('\u672a\u7740\u624b', '\u4f5c\u696d\u4e2d', '\u5b8c\u4e86', '\u4e2d\u65ad');\n\n-- \u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf\nCREATE TABLE \"\u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u30aa\u30fc\u30c0\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u4f5c\u696d\u6307\u793a\u65e5\" DATE NOT NULL,\n    \"\u54c1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u4f5c\u696d\u6307\u793a\u6570\" DECIMAL(15, 2) NOT NULL,\n    \"\u5834\u6240\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u958b\u59cb\u4e88\u5b9a\u65e5\" DATE NOT NULL,\n    \"\u5b8c\u6210\u4e88\u5b9a\u65e5\" DATE NOT NULL,\n    \"\u5b9f\u7e3e\u958b\u59cb\u65e5\" DATE,\n    \"\u5b9f\u7e3e\u5b8c\u4e86\u65e5\" DATE,\n    \"\u5b8c\u6210\u6e08\u6570\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u7dcf\u826f\u54c1\u6570\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u7dcf\u4e0d\u826f\u54c1\u6570\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u30b9\u30c6\u30fc\u30bf\u30b9\" \u4f5c\u696d\u6307\u793a\u30b9\u30c6\u30fc\u30bf\u30b9 DEFAULT '\u672a\u7740\u624b' NOT NULL,\n    \"\u5b8c\u4e86\u30d5\u30e9\u30b0\" BOOLEAN DEFAULT false NOT NULL,\n    \"\u5099\u8003\" TEXT,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u8005\" VARCHAR(50),\n    CONSTRAINT \"fk_\u4f5c\u696d\u6307\u793a_\u30aa\u30fc\u30c0\"\n        FOREIGN KEY (\"\u30aa\u30fc\u30c0\u756a\u53f7\") REFERENCES \"\u30aa\u30fc\u30c0\u60c5\u5831\"(\"\u30aa\u30fc\u30c0NO\"),\n    CONSTRAINT \"fk_\u4f5c\u696d\u6307\u793a_\u54c1\u76ee\"\n        FOREIGN KEY (\"\u54c1\u76ee\u30b3\u30fc\u30c9\") REFERENCES \"\u54c1\u76ee\u30de\u30b9\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"fk_\u4f5c\u696d\u6307\u793a_\u5834\u6240\"\n        FOREIGN KEY (\"\u5834\u6240\u30b3\u30fc\u30c9\") REFERENCES \"\u5834\u6240\u30de\u30b9\u30bf\"(\"\u5834\u6240\u30b3\u30fc\u30c9\")\n);\n\n-- \u4f5c\u696d\u6307\u793a\u660e\u7d30\u30c7\u30fc\u30bf\nCREATE TABLE \"\u4f5c\u696d\u6307\u793a\u660e\u7d30\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u5de5\u9806\" INTEGER NOT NULL,\n    \"\u5de5\u7a0b\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"fk_\u4f5c\u696d\u6307\u793a\u660e\u7d30_\u4f5c\u696d\u6307\u793a\"\n        FOREIGN KEY (\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\") REFERENCES \"\u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf\"(\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\"),\n    CONSTRAINT \"fk_\u4f5c\u696d\u6307\u793a\u660e\u7d30_\u5de5\u7a0b\"\n        FOREIGN KEY (\"\u5de5\u7a0b\u30b3\u30fc\u30c9\") REFERENCES \"\u5de5\u7a0b\u30de\u30b9\u30bf\"(\"\u5de5\u7a0b\u30b3\u30fc\u30c9\"),\n    UNIQUE (\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\", \"\u5de5\u9806\")\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"idx_\u4f5c\u696d\u6307\u793a_\u30aa\u30fc\u30c0\u756a\u53f7\" ON \"\u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf\"(\"\u30aa\u30fc\u30c0\u756a\u53f7\");\nCREATE INDEX \"idx_\u4f5c\u696d\u6307\u793a_\u54c1\u76ee\u30b3\u30fc\u30c9\" ON \"\u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u4f5c\u696d\u6307\u793a_\u30b9\u30c6\u30fc\u30bf\u30b9\" ON \"\u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf\"(\"\u30b9\u30c6\u30fc\u30bf\u30b9\");\nCREATE INDEX \"idx_\u4f5c\u696d\u6307\u793a\u660e\u7d30_\u5de5\u7a0b\u30b3\u30fc\u30c9\" ON \"\u4f5c\u696d\u6307\u793a\u660e\u7d30\u30c7\u30fc\u30bf\"(\"\u5de5\u7a0b\u30b3\u30fc\u30c9\");\n</code></pre>"},{"location":"article/part4/chapter27/#java","title":"Java \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u5b9a\u7fa9","text":""},{"location":"article/part4/chapter27/#_5","title":"\u5de5\u7a0b\u30de\u30b9\u30bf\u30fb\u5de5\u7a0b\u8868\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3","text":"Entity: Process\uff08\u5de5\u7a0b\u30de\u30b9\u30bf\uff09 <pre><code>// src/main/java/com/example/production/domain/model/process/Process.java\npackage com.example.production.domain.model.process;\n\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\npublic class Process {\n    private String processCode;\n    private String processName;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n}\n</code></pre> Entity: Routing\uff08\u5de5\u7a0b\u8868\uff09 <pre><code>// src/main/java/com/example/production/domain/model/process/Routing.java\npackage com.example.production.domain.model.process;\n\nimport com.example.production.domain.model.item.Item;\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\npublic class Routing {\n    private Integer id;\n    private String itemCode;\n    private Integer sequence;\n    private String processCode;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n\n    // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n    private Item item;\n    private Process process;\n}\n</code></pre>"},{"location":"article/part4/chapter27/#enum","title":"\u4f5c\u696d\u6307\u793a\u30b9\u30c6\u30fc\u30bf\u30b9 Enum","text":"Enum: WorkOrderStatus\uff08\u4f5c\u696d\u6307\u793a\u30b9\u30c6\u30fc\u30bf\u30b9\uff09 <pre><code>// src/main/java/com/example/production/domain/model/process/WorkOrderStatus.java\npackage com.example.production.domain.model.process;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum WorkOrderStatus {\n    NOT_STARTED(\"\u672a\u7740\u624b\"),\n    IN_PROGRESS(\"\u4f5c\u696d\u4e2d\"),\n    COMPLETED(\"\u5b8c\u4e86\"),\n    SUSPENDED(\"\u4e2d\u65ad\");\n\n    private final String displayName;\n\n    public static WorkOrderStatus fromDisplayName(String displayName) {\n        for (WorkOrderStatus status : values()) {\n            if (status.displayName.equals(displayName)) {\n                return status;\n            }\n        }\n        throw new IllegalArgumentException(\"Unknown work order status: \" + displayName);\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter27/#_6","title":"\u4f5c\u696d\u6307\u793a\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3","text":"Entity: WorkOrder\uff08\u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf\uff09 <pre><code>// src/main/java/com/example/production/domain/model/process/WorkOrder.java\npackage com.example.production.domain.model.process;\n\nimport com.example.production.domain.model.item.Item;\nimport com.example.production.domain.master.Location;\nimport com.example.production.domain.model.planning.Order;\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.List;\n\n@Data\n@Builder\npublic class WorkOrder {\n    private Integer id;\n    private String workOrderNumber;\n    private String orderNumber;\n    private LocalDate workOrderDate;\n    private String itemCode;\n    private BigDecimal orderQuantity;\n    private String locationCode;\n    private LocalDate plannedStartDate;\n    private LocalDate plannedEndDate;\n    private LocalDate actualStartDate;\n    private LocalDate actualEndDate;\n    private BigDecimal completedQuantity;\n    private BigDecimal totalGoodQuantity;\n    private BigDecimal totalDefectQuantity;\n    private WorkOrderStatus status;\n    private Boolean completedFlag;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n\n    // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n    private Order order;\n    private Item item;\n    private Location location;\n    private List&lt;WorkOrderDetail&gt; details;\n}\n</code></pre> Entity: WorkOrderDetail\uff08\u4f5c\u696d\u6307\u793a\u660e\u7d30\u30c7\u30fc\u30bf\uff09 <pre><code>// src/main/java/com/example/production/domain/model/process/WorkOrderDetail.java\npackage com.example.production.domain.model.process;\n\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\npublic class WorkOrderDetail {\n    private Integer id;\n    private String workOrderNumber;\n    private Integer sequence;\n    private String processCode;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n\n    // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n    private WorkOrder workOrder;\n    private Process process;\n}\n</code></pre>"},{"location":"article/part4/chapter27/#typehandler","title":"TypeHandler \u306e\u5b9f\u88c5","text":"TypeHandler: WorkOrderStatusTypeHandler <pre><code>// src/main/java/com/example/production/infrastructure/persistence/WorkOrderStatusTypeHandler.java\npackage com.example.production.infrastructure.persistence;\n\nimport com.example.production.domain.model.process.WorkOrderStatus;\nimport org.apache.ibatis.type.BaseTypeHandler;\nimport org.apache.ibatis.type.JdbcType;\nimport org.apache.ibatis.type.MappedTypes;\n\nimport java.sql.CallableStatement;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\n\n@MappedTypes(WorkOrderStatus.class)\npublic class WorkOrderStatusTypeHandler extends BaseTypeHandler&lt;WorkOrderStatus&gt; {\n\n    @Override\n    public void setNonNullParameter(PreparedStatement ps, int i, WorkOrderStatus parameter, JdbcType jdbcType)\n            throws SQLException {\n        ps.setString(i, parameter.getDisplayName());\n    }\n\n    @Override\n    public WorkOrderStatus getNullableResult(ResultSet rs, String columnName) throws SQLException {\n        String value = rs.getString(columnName);\n        return value == null ? null : WorkOrderStatus.fromDisplayName(value);\n    }\n\n    @Override\n    public WorkOrderStatus getNullableResult(ResultSet rs, int columnIndex) throws SQLException {\n        String value = rs.getString(columnIndex);\n        return value == null ? null : WorkOrderStatus.fromDisplayName(value);\n    }\n\n    @Override\n    public WorkOrderStatus getNullableResult(CallableStatement cs, int columnIndex) throws SQLException {\n        String value = cs.getString(columnIndex);\n        return value == null ? null : WorkOrderStatus.fromDisplayName(value);\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter27/#mybatis-mapper","title":"MyBatis Mapper","text":"Mapper XML: WorkOrderMapper.xml <pre><code>&lt;!-- src/main/resources/com/example/production/infrastructure/persistence/mapper/WorkOrderMapper.xml --&gt;\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.production.infrastructure.persistence.mapper.WorkOrderMapper\"&gt;\n\n    &lt;resultMap id=\"WorkOrderResultMap\" type=\"com.example.production.domain.model.process.WorkOrder\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"workOrderNumber\" column=\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\"/&gt;\n        &lt;result property=\"orderNumber\" column=\"\u30aa\u30fc\u30c0\u756a\u53f7\"/&gt;\n        &lt;result property=\"workOrderDate\" column=\"\u4f5c\u696d\u6307\u793a\u65e5\"/&gt;\n        &lt;result property=\"itemCode\" column=\"\u54c1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"orderQuantity\" column=\"\u4f5c\u696d\u6307\u793a\u6570\"/&gt;\n        &lt;result property=\"locationCode\" column=\"\u5834\u6240\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"plannedStartDate\" column=\"\u958b\u59cb\u4e88\u5b9a\u65e5\"/&gt;\n        &lt;result property=\"plannedEndDate\" column=\"\u5b8c\u6210\u4e88\u5b9a\u65e5\"/&gt;\n        &lt;result property=\"actualStartDate\" column=\"\u5b9f\u7e3e\u958b\u59cb\u65e5\"/&gt;\n        &lt;result property=\"actualEndDate\" column=\"\u5b9f\u7e3e\u5b8c\u4e86\u65e5\"/&gt;\n        &lt;result property=\"completedQuantity\" column=\"\u5b8c\u6210\u6e08\u6570\"/&gt;\n        &lt;result property=\"totalGoodQuantity\" column=\"\u7dcf\u826f\u54c1\u6570\"/&gt;\n        &lt;result property=\"totalDefectQuantity\" column=\"\u7dcf\u4e0d\u826f\u54c1\u6570\"/&gt;\n        &lt;result property=\"status\" column=\"\u30b9\u30c6\u30fc\u30bf\u30b9\"\n                typeHandler=\"com.example.production.infrastructure.persistence.WorkOrderStatusTypeHandler\"/&gt;\n        &lt;result property=\"completedFlag\" column=\"\u5b8c\u4e86\u30d5\u30e9\u30b0\"/&gt;\n        &lt;result property=\"remarks\" column=\"\u5099\u8003\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"createdBy\" column=\"\u4f5c\u6210\u8005\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedBy\" column=\"\u66f4\u65b0\u8005\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;insert id=\"insert\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf\" (\n            \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\", \"\u30aa\u30fc\u30c0\u756a\u53f7\", \"\u4f5c\u696d\u6307\u793a\u65e5\", \"\u54c1\u76ee\u30b3\u30fc\u30c9\", \"\u4f5c\u696d\u6307\u793a\u6570\",\n            \"\u5834\u6240\u30b3\u30fc\u30c9\", \"\u958b\u59cb\u4e88\u5b9a\u65e5\", \"\u5b8c\u6210\u4e88\u5b9a\u65e5\", \"\u30b9\u30c6\u30fc\u30bf\u30b9\", \"\u5b8c\u4e86\u30d5\u30e9\u30b0\", \"\u5099\u8003\", \"\u4f5c\u6210\u8005\"\n        ) VALUES (\n            #{workOrderNumber},\n            #{orderNumber},\n            #{workOrderDate},\n            #{itemCode},\n            #{orderQuantity},\n            #{locationCode},\n            #{plannedStartDate},\n            #{plannedEndDate},\n            #{status, typeHandler=com.example.production.infrastructure.persistence.WorkOrderStatusTypeHandler}::\u4f5c\u696d\u6307\u793a\u30b9\u30c6\u30fc\u30bf\u30b9,\n            #{completedFlag},\n            #{remarks},\n            #{createdBy}\n        )\n    &lt;/insert&gt;\n\n    &lt;select id=\"findByWorkOrderNumber\" resultMap=\"WorkOrderResultMap\"&gt;\n        SELECT * FROM \"\u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf\" WHERE \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" = #{workOrderNumber}\n    &lt;/select&gt;\n\n    &lt;select id=\"findLatestWorkOrderNumber\" resultType=\"string\"&gt;\n        SELECT \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" FROM \"\u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf\"\n        WHERE \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" LIKE #{prefix}\n        ORDER BY \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" DESC\n        LIMIT 1\n    &lt;/select&gt;\n\n    &lt;update id=\"startWork\"&gt;\n        UPDATE \"\u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf\"\n        SET \"\u30b9\u30c6\u30fc\u30bf\u30b9\" = '\u4f5c\u696d\u4e2d'::\u4f5c\u696d\u6307\u793a\u30b9\u30c6\u30fc\u30bf\u30b9,\n            \"\u5b9f\u7e3e\u958b\u59cb\u65e5\" = #{actualStartDate},\n            \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP\n        WHERE \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" = #{workOrderNumber}\n    &lt;/update&gt;\n\n    &lt;update id=\"completeWork\"&gt;\n        UPDATE \"\u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf\"\n        SET \"\u30b9\u30c6\u30fc\u30bf\u30b9\" = '\u5b8c\u4e86'::\u4f5c\u696d\u6307\u793a\u30b9\u30c6\u30fc\u30bf\u30b9,\n            \"\u5b8c\u4e86\u30d5\u30e9\u30b0\" = true,\n            \"\u5b9f\u7e3e\u5b8c\u4e86\u65e5\" = #{actualEndDate},\n            \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP\n        WHERE \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" = #{workOrderNumber}\n    &lt;/update&gt;\n\n    &lt;update id=\"updateCompletionQuantities\"&gt;\n        UPDATE \"\u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf\"\n        SET \"\u5b8c\u6210\u6e08\u6570\" = \"\u5b8c\u6210\u6e08\u6570\" + #{completedQuantity},\n            \"\u7dcf\u826f\u54c1\u6570\" = \"\u7dcf\u826f\u54c1\u6570\" + #{goodQuantity},\n            \"\u7dcf\u4e0d\u826f\u54c1\u6570\" = \"\u7dcf\u4e0d\u826f\u54c1\u6570\" + #{defectQuantity},\n            \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP\n        WHERE \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" = #{workOrderNumber}\n    &lt;/update&gt;\n\n    &lt;delete id=\"deleteAll\"&gt;\n        DELETE FROM \"\u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf\"\n    &lt;/delete&gt;\n&lt;/mapper&gt;\n</code></pre> Mapper XML: WorkOrderDetailMapper.xml <pre><code>&lt;!-- src/main/resources/com/example/production/infrastructure/persistence/mapper/WorkOrderDetailMapper.xml --&gt;\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.production.infrastructure.persistence.mapper.WorkOrderDetailMapper\"&gt;\n\n    &lt;resultMap id=\"WorkOrderDetailResultMap\" type=\"com.example.production.domain.model.process.WorkOrderDetail\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"workOrderNumber\" column=\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\"/&gt;\n        &lt;result property=\"sequence\" column=\"\u5de5\u9806\"/&gt;\n        &lt;result property=\"processCode\" column=\"\u5de5\u7a0b\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;insert id=\"insert\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u4f5c\u696d\u6307\u793a\u660e\u7d30\u30c7\u30fc\u30bf\" (\n            \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\", \"\u5de5\u9806\", \"\u5de5\u7a0b\u30b3\u30fc\u30c9\"\n        ) VALUES (\n            #{workOrderNumber},\n            #{sequence},\n            #{processCode}\n        )\n    &lt;/insert&gt;\n\n    &lt;select id=\"findByWorkOrderNumber\" resultMap=\"WorkOrderDetailResultMap\"&gt;\n        SELECT * FROM \"\u4f5c\u696d\u6307\u793a\u660e\u7d30\u30c7\u30fc\u30bf\"\n        WHERE \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" = #{workOrderNumber}\n        ORDER BY \"\u5de5\u9806\"\n    &lt;/select&gt;\n\n    &lt;select id=\"findByWorkOrderAndSequence\" resultMap=\"WorkOrderDetailResultMap\"&gt;\n        SELECT * FROM \"\u4f5c\u696d\u6307\u793a\u660e\u7d30\u30c7\u30fc\u30bf\"\n        WHERE \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" = #{workOrderNumber} AND \"\u5de5\u9806\" = #{sequence}\n    &lt;/select&gt;\n\n    &lt;delete id=\"deleteAll\"&gt;\n        DELETE FROM \"\u4f5c\u696d\u6307\u793a\u660e\u7d30\u30c7\u30fc\u30bf\"\n    &lt;/delete&gt;\n&lt;/mapper&gt;\n</code></pre>"},{"location":"article/part4/chapter27/#mapper","title":"Mapper \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9","text":"Mapper Interface: WorkOrderMapper <pre><code>// src/main/java/com/example/production/infrastructure/persistence/mapper/WorkOrderMapper.java\npackage com.example.production.infrastructure.persistence.mapper;\n\nimport com.example.production.domain.model.process.WorkOrder;\nimport org.apache.ibatis.annotations.Mapper;\nimport org.apache.ibatis.annotations.Param;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\n\n@Mapper\npublic interface WorkOrderMapper {\n    void insert(WorkOrder workOrder);\n    WorkOrder findByWorkOrderNumber(String workOrderNumber);\n    String findLatestWorkOrderNumber(String prefix);\n    void startWork(@Param(\"workOrderNumber\") String workOrderNumber,\n                   @Param(\"actualStartDate\") LocalDate actualStartDate);\n    void completeWork(@Param(\"workOrderNumber\") String workOrderNumber,\n                      @Param(\"actualEndDate\") LocalDate actualEndDate);\n    void updateCompletionQuantities(@Param(\"workOrderNumber\") String workOrderNumber,\n                                    @Param(\"completedQuantity\") BigDecimal completedQuantity,\n                                    @Param(\"goodQuantity\") BigDecimal goodQuantity,\n                                    @Param(\"defectQuantity\") BigDecimal defectQuantity);\n    void deleteAll();\n}\n</code></pre> Mapper Interface: WorkOrderDetailMapper <pre><code>// src/main/java/com/example/production/infrastructure/persistence/mapper/WorkOrderDetailMapper.java\npackage com.example.production.infrastructure.persistence.mapper;\n\nimport com.example.production.domain.model.process.WorkOrderDetail;\nimport org.apache.ibatis.annotations.Mapper;\nimport org.apache.ibatis.annotations.Param;\n\nimport java.util.List;\n\n@Mapper\npublic interface WorkOrderDetailMapper {\n    void insert(WorkOrderDetail detail);\n    List&lt;WorkOrderDetail&gt; findByWorkOrderNumber(String workOrderNumber);\n    WorkOrderDetail findByWorkOrderAndSequence(@Param(\"workOrderNumber\") String workOrderNumber,\n                                               @Param(\"sequence\") Integer sequence);\n    void deleteAll();\n}\n</code></pre>"},{"location":"article/part4/chapter27/#_7","title":"\u4f5c\u696d\u6307\u793a\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":"Service: WorkOrderService <pre><code>// src/main/java/com/example/production/application/service/WorkOrderService.java\npackage com.example.production.application.service;\n\nimport com.example.production.domain.model.planning.Order;\nimport com.example.production.domain.model.process.*;\nimport com.example.production.infrastructure.persistence.mapper.*;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.format.DateTimeFormatter;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Service\n@RequiredArgsConstructor\npublic class WorkOrderService {\n\n    private final WorkOrderMapper workOrderMapper;\n    private final WorkOrderDetailMapper workOrderDetailMapper;\n    private final OrderMapper orderMapper;\n    private final RoutingMapper routingMapper;\n\n    /**\n     * \u4f5c\u696d\u6307\u793a\u756a\u53f7\u3092\u751f\u6210\u3059\u308b\n     */\n    private String generateWorkOrderNumber(LocalDate workOrderDate) {\n        String prefix = \"WO-\" + workOrderDate.format(DateTimeFormatter.ofPattern(\"yyyyMM\")) + \"-\";\n        String latestNumber = workOrderMapper.findLatestWorkOrderNumber(prefix + \"%\");\n\n        int sequence = 1;\n        if (latestNumber != null) {\n            int currentSequence = Integer.parseInt(latestNumber.substring(latestNumber.length() - 4));\n            sequence = currentSequence + 1;\n        }\n\n        return prefix + String.format(\"%04d\", sequence);\n    }\n\n    /**\n     * \u4f5c\u696d\u6307\u793a\u3092\u4f5c\u6210\u3059\u308b\n     */\n    @Transactional\n    public WorkOrder createWorkOrder(WorkOrderCreateInput input) {\n        // \u30aa\u30fc\u30c0\u60c5\u5831\u3092\u53d6\u5f97\n        Order order = orderMapper.findByOrderNumber(input.getOrderNumber());\n        if (order == null) {\n            throw new IllegalArgumentException(\"Order not found: \" + input.getOrderNumber());\n        }\n\n        // \u5de5\u7a0b\u8868\u3092\u53d6\u5f97\n        List&lt;Routing&gt; routings = routingMapper.findByItemCode(order.getItemCode());\n        if (routings.isEmpty()) {\n            throw new IllegalArgumentException(\"Routing not found for item: \" + order.getItemCode());\n        }\n\n        String workOrderNumber = generateWorkOrderNumber(input.getWorkOrderDate());\n\n        // \u4f5c\u696d\u6307\u793a\u30d8\u30c3\u30c0\u3092\u4f5c\u6210\n        WorkOrder workOrder = WorkOrder.builder()\n                .workOrderNumber(workOrderNumber)\n                .orderNumber(input.getOrderNumber())\n                .workOrderDate(input.getWorkOrderDate())\n                .itemCode(order.getItemCode())\n                .orderQuantity(order.getPlannedQuantity())\n                .locationCode(input.getLocationCode())\n                .plannedStartDate(input.getPlannedStartDate())\n                .plannedEndDate(input.getPlannedEndDate())\n                .completedQuantity(BigDecimal.ZERO)\n                .totalGoodQuantity(BigDecimal.ZERO)\n                .totalDefectQuantity(BigDecimal.ZERO)\n                .status(WorkOrderStatus.NOT_STARTED)\n                .completedFlag(false)\n                .remarks(input.getRemarks())\n                .build();\n        workOrderMapper.insert(workOrder);\n\n        // \u4f5c\u696d\u6307\u793a\u660e\u7d30\u3092\u4f5c\u6210\uff08\u5de5\u7a0b\u8868\u304b\u3089\u81ea\u52d5\u5c55\u958b\uff09\n        List&lt;WorkOrderDetail&gt; details = new ArrayList&lt;&gt;();\n        for (Routing routing : routings) {\n            WorkOrderDetail detail = WorkOrderDetail.builder()\n                    .workOrderNumber(workOrderNumber)\n                    .sequence(routing.getSequence())\n                    .processCode(routing.getProcessCode())\n                    .build();\n            workOrderDetailMapper.insert(detail);\n            details.add(detail);\n        }\n\n        workOrder.setDetails(details);\n        return workOrder;\n    }\n\n    /**\n     * \u4f5c\u696d\u3092\u958b\u59cb\u3059\u308b\n     */\n    @Transactional\n    public WorkOrder startWork(String workOrderNumber) {\n        WorkOrder workOrder = workOrderMapper.findByWorkOrderNumber(workOrderNumber);\n        if (workOrder == null) {\n            throw new IllegalArgumentException(\"Work order not found: \" + workOrderNumber);\n        }\n\n        if (workOrder.getStatus() != WorkOrderStatus.NOT_STARTED) {\n            throw new IllegalStateException(\"Only NOT_STARTED work orders can be started\");\n        }\n\n        workOrderMapper.startWork(workOrderNumber, LocalDate.now());\n        return workOrderMapper.findByWorkOrderNumber(workOrderNumber);\n    }\n\n    /**\n     * \u4f5c\u696d\u3092\u5b8c\u4e86\u3059\u308b\n     */\n    @Transactional\n    public WorkOrder completeWork(String workOrderNumber) {\n        WorkOrder workOrder = workOrderMapper.findByWorkOrderNumber(workOrderNumber);\n        if (workOrder == null) {\n            throw new IllegalArgumentException(\"Work order not found: \" + workOrderNumber);\n        }\n\n        if (workOrder.getStatus() != WorkOrderStatus.IN_PROGRESS) {\n            throw new IllegalStateException(\"Only IN_PROGRESS work orders can be completed\");\n        }\n\n        workOrderMapper.completeWork(workOrderNumber, LocalDate.now());\n        return workOrderMapper.findByWorkOrderNumber(workOrderNumber);\n    }\n\n    /**\n     * \u4f5c\u696d\u6307\u793a\u3092\u691c\u7d22\u3059\u308b\n     */\n    public WorkOrder findByWorkOrderNumber(String workOrderNumber) {\n        WorkOrder workOrder = workOrderMapper.findByWorkOrderNumber(workOrderNumber);\n        if (workOrder != null) {\n            workOrder.setDetails(workOrderDetailMapper.findByWorkOrderNumber(workOrderNumber));\n        }\n        return workOrder;\n    }\n}\n</code></pre> Input DTO: WorkOrderCreateInput <pre><code>// src/main/java/com/example/production/application/service/WorkOrderCreateInput.java\npackage com.example.production.application.service;\n\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.time.LocalDate;\n\n@Data\n@Builder\npublic class WorkOrderCreateInput {\n    private String orderNumber;\n    private LocalDate workOrderDate;\n    private String locationCode;\n    private LocalDate plannedStartDate;\n    private LocalDate plannedEndDate;\n    private String remarks;\n}\n</code></pre>"},{"location":"article/part4/chapter27/#tdd","title":"TDD: \u4f5c\u696d\u6307\u793a\u306e\u30c6\u30b9\u30c8","text":"Test: WorkOrderServiceTest <pre><code>// src/test/java/com/example/production/application/service/WorkOrderServiceTest.java\npackage com.example.production.application.service;\n\nimport com.example.production.domain.model.item.Item;\nimport com.example.production.domain.model.item.ItemCategory;\nimport com.example.production.domain.master.Location;\nimport com.example.production.domain.model.planning.Order;\nimport com.example.production.domain.model.planning.OrderType;\nimport com.example.production.domain.model.planning.OrderStatus;\nimport com.example.production.domain.model.process.*;\nimport com.example.production.infrastructure.persistence.mapper.*;\nimport org.junit.jupiter.api.*;\nimport org.mybatis.spring.boot.test.autoconfigure.MybatisTest;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.jdbc.AutoConfigureTestDatabase;\nimport org.springframework.context.annotation.Import;\nimport org.springframework.test.context.DynamicPropertyRegistry;\nimport org.springframework.test.context.DynamicPropertySource;\nimport org.testcontainers.containers.PostgreSQLContainer;\nimport org.testcontainers.junit.jupiter.Container;\nimport org.testcontainers.junit.jupiter.Testcontainers;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.util.List;\n\nimport static org.assertj.core.api.Assertions.*;\n\n@MybatisTest\n@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\n@Import(WorkOrderService.class)\n@Testcontainers\n@DisplayName(\"\u4f5c\u696d\u6307\u793a\")\nclass WorkOrderServiceTest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:15\")\n            .withDatabaseName(\"testdb\")\n            .withUsername(\"testuser\")\n            .withPassword(\"testpass\");\n\n    @DynamicPropertySource\n    static void configureProperties(DynamicPropertyRegistry registry) {\n        registry.add(\"spring.datasource.url\", postgres::getJdbcUrl);\n        registry.add(\"spring.datasource.username\", postgres::getUsername);\n        registry.add(\"spring.datasource.password\", postgres::getPassword);\n    }\n\n    @Autowired\n    private WorkOrderService workOrderService;\n\n    @Autowired\n    private ItemMapper itemMapper;\n\n    @Autowired\n    private ProcessMapper processMapper;\n\n    @Autowired\n    private RoutingMapper routingMapper;\n\n    @Autowired\n    private LocationMapper locationMapper;\n\n    @Autowired\n    private OrderMapper orderMapper;\n\n    @Autowired\n    private WorkOrderMapper workOrderMapper;\n\n    @Autowired\n    private WorkOrderDetailMapper workOrderDetailMapper;\n\n    @BeforeEach\n    void setUp() {\n        workOrderDetailMapper.deleteAll();\n        workOrderMapper.deleteAll();\n        routingMapper.deleteAll();\n        orderMapper.deleteAll();\n        processMapper.deleteAll();\n        locationMapper.deleteAll();\n        itemMapper.deleteAll();\n\n        setupMasterData();\n    }\n\n    void setupMasterData() {\n        // \u54c1\u76ee\u30de\u30b9\u30bf\n        itemMapper.insert(Item.builder()\n                .itemCode(\"PROD-001\")\n                .effectiveFrom(LocalDate.of(2025, 1, 1))\n                .itemName(\"\u88fd\u54c1A\")\n                .itemCategory(ItemCategory.PRODUCT)\n                .build());\n\n        // \u5de5\u7a0b\u30de\u30b9\u30bf\n        processMapper.insert(Process.builder()\n                .processCode(\"PRESS\")\n                .processName(\"\u30d7\u30ec\u30b9\u52a0\u5de5\")\n                .build());\n        processMapper.insert(Process.builder()\n                .processCode(\"ASSEMBLY\")\n                .processName(\"\u7d44\u7acb\")\n                .build());\n        processMapper.insert(Process.builder()\n                .processCode(\"INSPECT\")\n                .processName(\"\u691c\u67fb\")\n                .build());\n\n        // \u5de5\u7a0b\u8868\n        routingMapper.insert(Routing.builder()\n                .itemCode(\"PROD-001\")\n                .sequence(1)\n                .processCode(\"PRESS\")\n                .build());\n        routingMapper.insert(Routing.builder()\n                .itemCode(\"PROD-001\")\n                .sequence(2)\n                .processCode(\"ASSEMBLY\")\n                .build());\n        routingMapper.insert(Routing.builder()\n                .itemCode(\"PROD-001\")\n                .sequence(3)\n                .processCode(\"INSPECT\")\n                .build());\n\n        // \u5834\u6240\u30de\u30b9\u30bf\n        locationMapper.insert(Location.builder()\n                .locationCode(\"LINE001\")\n                .locationName(\"\u88fd\u9020\u30e9\u30a4\u30f31\")\n                .locationTypeCode(\"\u88fd\u9020\")\n                .build());\n\n        // \u30aa\u30fc\u30c0\u60c5\u5831\n        orderMapper.insert(Order.builder()\n                .orderNumber(\"MO-2025-001\")\n                .orderType(OrderType.MANUFACTURING)\n                .itemCode(\"PROD-001\")\n                .plannedStartDate(LocalDate.of(2025, 1, 21))\n                .dueDate(LocalDate.of(2025, 1, 25))\n                .plannedQuantity(new BigDecimal(\"100\"))\n                .status(OrderStatus.CONFIRMED)\n                .build());\n    }\n\n    @Nested\n    @DisplayName(\"\u4f5c\u696d\u6307\u793a\u306e\u4f5c\u6210\")\n    class WorkOrderCreation {\n\n        @Test\n        @DisplayName(\"\u30aa\u30fc\u30c0\u60c5\u5831\u304b\u3089\u4f5c\u696d\u6307\u793a\u3092\u4f5c\u6210\u3067\u304d\u308b\")\n        void canCreateWorkOrderFromOrder() {\n            // Act\n            WorkOrderCreateInput input = WorkOrderCreateInput.builder()\n                    .orderNumber(\"MO-2025-001\")\n                    .workOrderDate(LocalDate.of(2025, 1, 20))\n                    .locationCode(\"LINE001\")\n                    .plannedStartDate(LocalDate.of(2025, 1, 21))\n                    .plannedEndDate(LocalDate.of(2025, 1, 25))\n                    .build();\n\n            WorkOrder workOrder = workOrderService.createWorkOrder(input);\n\n            // Assert\n            assertThat(workOrder).isNotNull();\n            assertThat(workOrder.getWorkOrderNumber()).startsWith(\"WO-\");\n            assertThat(workOrder.getItemCode()).isEqualTo(\"PROD-001\");\n            assertThat(workOrder.getOrderQuantity()).isEqualByComparingTo(new BigDecimal(\"100\"));\n            assertThat(workOrder.getDetails()).hasSize(3); // \u5de5\u7a0b\u8868\u304b\u30893\u5de5\u7a0b\n        }\n\n        @Test\n        @DisplayName(\"\u5de5\u7a0b\u8868\u306e\u5de5\u9806\u306b\u5f93\u3063\u3066\u660e\u7d30\u304c\u4f5c\u6210\u3055\u308c\u308b\")\n        void detailsAreCreatedAccordingToRouting() {\n            // Act\n            WorkOrderCreateInput input = WorkOrderCreateInput.builder()\n                    .orderNumber(\"MO-2025-001\")\n                    .workOrderDate(LocalDate.of(2025, 1, 20))\n                    .locationCode(\"LINE001\")\n                    .plannedStartDate(LocalDate.of(2025, 1, 21))\n                    .plannedEndDate(LocalDate.of(2025, 1, 25))\n                    .build();\n\n            WorkOrder workOrder = workOrderService.createWorkOrder(input);\n\n            // Assert: \u5de5\u9806\u306e\u9806\u5e8f\u3092\u78ba\u8a8d\n            List&lt;Integer&gt; sequences = workOrder.getDetails().stream()\n                    .map(WorkOrderDetail::getSequence)\n                    .sorted()\n                    .toList();\n            assertThat(sequences).containsExactly(1, 2, 3);\n\n            // \u5404\u5de5\u7a0b\u306e\u78ba\u8a8d\n            List&lt;String&gt; processCodes = workOrder.getDetails().stream()\n                    .map(WorkOrderDetail::getProcessCode)\n                    .toList();\n            assertThat(processCodes).containsExactlyInAnyOrder(\"PRESS\", \"ASSEMBLY\", \"INSPECT\");\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u4f5c\u696d\u6307\u793a\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u7ba1\u7406\")\n    class WorkOrderStatusManagement {\n\n        @Test\n        @DisplayName(\"\u4f5c\u696d\u6307\u793a\u3092\u958b\u59cb\u3067\u304d\u308b\")\n        void canStartWorkOrder() {\n            // Arrange\n            WorkOrder workOrder = workOrderService.createWorkOrder(WorkOrderCreateInput.builder()\n                    .orderNumber(\"MO-2025-001\")\n                    .workOrderDate(LocalDate.of(2025, 1, 20))\n                    .locationCode(\"LINE001\")\n                    .plannedStartDate(LocalDate.of(2025, 1, 21))\n                    .plannedEndDate(LocalDate.of(2025, 1, 25))\n                    .build());\n\n            // Act\n            WorkOrder updated = workOrderService.startWork(workOrder.getWorkOrderNumber());\n\n            // Assert\n            assertThat(updated.getStatus()).isEqualTo(WorkOrderStatus.IN_PROGRESS);\n            assertThat(updated.getActualStartDate()).isNotNull();\n        }\n\n        @Test\n        @DisplayName(\"\u4f5c\u696d\u6307\u793a\u3092\u5b8c\u4e86\u3067\u304d\u308b\")\n        void canCompleteWorkOrder() {\n            // Arrange\n            WorkOrder workOrder = workOrderService.createWorkOrder(WorkOrderCreateInput.builder()\n                    .orderNumber(\"MO-2025-001\")\n                    .workOrderDate(LocalDate.of(2025, 1, 20))\n                    .locationCode(\"LINE001\")\n                    .plannedStartDate(LocalDate.of(2025, 1, 21))\n                    .plannedEndDate(LocalDate.of(2025, 1, 25))\n                    .build());\n            workOrderService.startWork(workOrder.getWorkOrderNumber());\n\n            // Act\n            WorkOrder updated = workOrderService.completeWork(workOrder.getWorkOrderNumber());\n\n            // Assert\n            assertThat(updated.getStatus()).isEqualTo(WorkOrderStatus.COMPLETED);\n            assertThat(updated.getCompletedFlag()).isTrue();\n            assertThat(updated.getActualEndDate()).isNotNull();\n        }\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter27/#272-db","title":"27.2 \u88fd\u9020\u5b9f\u7e3e\u306e DB \u8a2d\u8a08","text":""},{"location":"article/part4/chapter27/#_8","title":"\u5b8c\u6210\u5b9f\u7e3e\u30c7\u30fc\u30bf\u306e\u69cb\u9020","text":"<p>\u88fd\u9020\u73fe\u5834\u304b\u3089\u306e\u5b8c\u6210\u5831\u544a\u3092\u8a18\u9332\u3057\u307e\u3059\u3002\u826f\u54c1\u6570\u30fb\u4e0d\u826f\u54c1\u6570\u3092\u7ba1\u7406\u3057\u3001\u4f5c\u696d\u6307\u793a\u306e\u5b8c\u6210\u6e08\u6570\u306b\u53cd\u6620\u3057\u307e\u3059\u3002</p> <p></p> DDL: \u5b8c\u6210\u5b9f\u7e3e\u30c7\u30fc\u30bf\u30fb\u5b8c\u6210\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf <pre><code>-- V015__create_completion_result_tables.sql\n\n-- \u5b8c\u6210\u5b9f\u7e3e\u30c7\u30fc\u30bf\nCREATE TABLE \"\u5b8c\u6210\u5b9f\u7e3e\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u5b8c\u6210\u5b9f\u7e3e\u756a\u53f7\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u54c1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u5b8c\u6210\u65e5\" DATE NOT NULL,\n    \"\u5b8c\u6210\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u826f\u54c1\u6570\" DECIMAL(15, 2) NOT NULL,\n    \"\u4e0d\u826f\u54c1\u6570\" DECIMAL(15, 2) NOT NULL,\n    \"\u5099\u8003\" TEXT,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u8005\" VARCHAR(50),\n    CONSTRAINT \"fk_\u5b8c\u6210\u5b9f\u7e3e_\u4f5c\u696d\u6307\u793a\"\n        FOREIGN KEY (\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\") REFERENCES \"\u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf\"(\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\"),\n    CONSTRAINT \"fk_\u5b8c\u6210\u5b9f\u7e3e_\u54c1\u76ee\"\n        FOREIGN KEY (\"\u54c1\u76ee\u30b3\u30fc\u30c9\") REFERENCES \"\u54c1\u76ee\u30de\u30b9\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n);\n\n-- \u5b8c\u6210\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf\nCREATE TABLE \"\u5b8c\u6210\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u5b8c\u6210\u5b9f\u7e3e\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u6b20\u70b9\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"fk_\u5b8c\u6210\u691c\u67fb\u7d50\u679c_\u5b8c\u6210\u5b9f\u7e3e\"\n        FOREIGN KEY (\"\u5b8c\u6210\u5b9f\u7e3e\u756a\u53f7\") REFERENCES \"\u5b8c\u6210\u5b9f\u7e3e\u30c7\u30fc\u30bf\"(\"\u5b8c\u6210\u5b9f\u7e3e\u756a\u53f7\"),\n    CONSTRAINT \"fk_\u5b8c\u6210\u691c\u67fb\u7d50\u679c_\u6b20\u70b9\"\n        FOREIGN KEY (\"\u6b20\u70b9\u30b3\u30fc\u30c9\") REFERENCES \"\u6b20\u70b9\u30de\u30b9\u30bf\"(\"\u6b20\u70b9\u30b3\u30fc\u30c9\"),\n    UNIQUE (\"\u5b8c\u6210\u5b9f\u7e3e\u756a\u53f7\", \"\u6b20\u70b9\u30b3\u30fc\u30c9\")\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"idx_\u5b8c\u6210\u5b9f\u7e3e_\u4f5c\u696d\u6307\u793a\u756a\u53f7\" ON \"\u5b8c\u6210\u5b9f\u7e3e\u30c7\u30fc\u30bf\"(\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\");\nCREATE INDEX \"idx_\u5b8c\u6210\u5b9f\u7e3e_\u54c1\u76ee\u30b3\u30fc\u30c9\" ON \"\u5b8c\u6210\u5b9f\u7e3e\u30c7\u30fc\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u5b8c\u6210\u5b9f\u7e3e_\u5b8c\u6210\u65e5\" ON \"\u5b8c\u6210\u5b9f\u7e3e\u30c7\u30fc\u30bf\"(\"\u5b8c\u6210\u65e5\");\n</code></pre>"},{"location":"article/part4/chapter27/#java_1","title":"Java \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u5b9a\u7fa9\uff08\u5b8c\u6210\u5b9f\u7e3e\uff09","text":"Entity: CompletionResult\uff08\u5b8c\u6210\u5b9f\u7e3e\u30c7\u30fc\u30bf\uff09 <pre><code>// src/main/java/com/example/production/domain/model/process/CompletionResult.java\npackage com.example.production.domain.model.process;\n\nimport com.example.production.domain.model.item.Item;\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.List;\n\n@Data\n@Builder\npublic class CompletionResult {\n    private Integer id;\n    private String completionResultNumber;\n    private String workOrderNumber;\n    private String itemCode;\n    private LocalDate completionDate;\n    private BigDecimal completedQuantity;\n    private BigDecimal goodQuantity;\n    private BigDecimal defectQuantity;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n\n    // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n    private WorkOrder workOrder;\n    private Item item;\n    private List&lt;InspectionResult&gt; inspectionResults;\n}\n</code></pre> Entity: InspectionResult\uff08\u5b8c\u6210\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf\uff09 <pre><code>// src/main/java/com/example/production/domain/model/process/InspectionResult.java\npackage com.example.production.domain.model.process;\n\nimport com.example.production.domain.master.Defect;\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\npublic class InspectionResult {\n    private Integer id;\n    private String completionResultNumber;\n    private String defectCode;\n    private BigDecimal quantity;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n\n    // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n    private CompletionResult completionResult;\n    private Defect defect;\n}\n</code></pre>"},{"location":"article/part4/chapter27/#mybatis-mapper_1","title":"MyBatis Mapper\uff08\u5b8c\u6210\u5b9f\u7e3e\uff09","text":"Mapper XML: CompletionResultMapper.xml <pre><code>&lt;!-- src/main/resources/com/example/production/infrastructure/persistence/mapper/CompletionResultMapper.xml --&gt;\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.production.infrastructure.persistence.mapper.CompletionResultMapper\"&gt;\n\n    &lt;resultMap id=\"CompletionResultResultMap\" type=\"com.example.production.domain.model.process.CompletionResult\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"completionResultNumber\" column=\"\u5b8c\u6210\u5b9f\u7e3e\u756a\u53f7\"/&gt;\n        &lt;result property=\"workOrderNumber\" column=\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\"/&gt;\n        &lt;result property=\"itemCode\" column=\"\u54c1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"completionDate\" column=\"\u5b8c\u6210\u65e5\"/&gt;\n        &lt;result property=\"completedQuantity\" column=\"\u5b8c\u6210\u6570\u91cf\"/&gt;\n        &lt;result property=\"goodQuantity\" column=\"\u826f\u54c1\u6570\"/&gt;\n        &lt;result property=\"defectQuantity\" column=\"\u4e0d\u826f\u54c1\u6570\"/&gt;\n        &lt;result property=\"remarks\" column=\"\u5099\u8003\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"createdBy\" column=\"\u4f5c\u6210\u8005\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedBy\" column=\"\u66f4\u65b0\u8005\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;insert id=\"insert\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u5b8c\u6210\u5b9f\u7e3e\u30c7\u30fc\u30bf\" (\n            \"\u5b8c\u6210\u5b9f\u7e3e\u756a\u53f7\", \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\", \"\u54c1\u76ee\u30b3\u30fc\u30c9\", \"\u5b8c\u6210\u65e5\",\n            \"\u5b8c\u6210\u6570\u91cf\", \"\u826f\u54c1\u6570\", \"\u4e0d\u826f\u54c1\u6570\", \"\u5099\u8003\", \"\u4f5c\u6210\u8005\"\n        ) VALUES (\n            #{completionResultNumber},\n            #{workOrderNumber},\n            #{itemCode},\n            #{completionDate},\n            #{completedQuantity},\n            #{goodQuantity},\n            #{defectQuantity},\n            #{remarks},\n            #{createdBy}\n        )\n    &lt;/insert&gt;\n\n    &lt;select id=\"findByCompletionResultNumber\" resultMap=\"CompletionResultResultMap\"&gt;\n        SELECT * FROM \"\u5b8c\u6210\u5b9f\u7e3e\u30c7\u30fc\u30bf\" WHERE \"\u5b8c\u6210\u5b9f\u7e3e\u756a\u53f7\" = #{completionResultNumber}\n    &lt;/select&gt;\n\n    &lt;select id=\"findByWorkOrderNumber\" resultMap=\"CompletionResultResultMap\"&gt;\n        SELECT * FROM \"\u5b8c\u6210\u5b9f\u7e3e\u30c7\u30fc\u30bf\"\n        WHERE \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" = #{workOrderNumber}\n        ORDER BY \"\u5b8c\u6210\u65e5\"\n    &lt;/select&gt;\n\n    &lt;select id=\"findLatestCompletionResultNumber\" resultType=\"string\"&gt;\n        SELECT \"\u5b8c\u6210\u5b9f\u7e3e\u756a\u53f7\" FROM \"\u5b8c\u6210\u5b9f\u7e3e\u30c7\u30fc\u30bf\"\n        WHERE \"\u5b8c\u6210\u5b9f\u7e3e\u756a\u53f7\" LIKE #{prefix}\n        ORDER BY \"\u5b8c\u6210\u5b9f\u7e3e\u756a\u53f7\" DESC\n        LIMIT 1\n    &lt;/select&gt;\n\n    &lt;delete id=\"deleteAll\"&gt;\n        DELETE FROM \"\u5b8c\u6210\u5b9f\u7e3e\u30c7\u30fc\u30bf\"\n    &lt;/delete&gt;\n&lt;/mapper&gt;\n</code></pre>"},{"location":"article/part4/chapter27/#_9","title":"\u5b8c\u6210\u5b9f\u7e3e\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":"Service: CompletionResultService <pre><code>// src/main/java/com/example/production/application/service/CompletionResultService.java\npackage com.example.production.application.service;\n\nimport com.example.production.domain.model.process.*;\nimport com.example.production.infrastructure.persistence.mapper.*;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.time.LocalDate;\nimport java.time.format.DateTimeFormatter;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Service\n@RequiredArgsConstructor\npublic class CompletionResultService {\n\n    private final CompletionResultMapper completionResultMapper;\n    private final InspectionResultMapper inspectionResultMapper;\n    private final WorkOrderMapper workOrderMapper;\n\n    /**\n     * \u5b8c\u6210\u5b9f\u7e3e\u756a\u53f7\u3092\u751f\u6210\u3059\u308b\n     */\n    private String generateCompletionResultNumber(LocalDate completionDate) {\n        String prefix = \"CR-\" + completionDate.format(DateTimeFormatter.ofPattern(\"yyyyMM\")) + \"-\";\n        String latestNumber = completionResultMapper.findLatestCompletionResultNumber(prefix + \"%\");\n\n        int sequence = 1;\n        if (latestNumber != null) {\n            int currentSequence = Integer.parseInt(latestNumber.substring(latestNumber.length() - 4));\n            sequence = currentSequence + 1;\n        }\n\n        return prefix + String.format(\"%04d\", sequence);\n    }\n\n    /**\n     * \u5b8c\u6210\u5b9f\u7e3e\u3092\u5831\u544a\u3059\u308b\n     */\n    @Transactional\n    public CompletionResult reportCompletion(CompletionResultInput input) {\n        // \u4f5c\u696d\u6307\u793a\u3092\u53d6\u5f97\n        WorkOrder workOrder = workOrderMapper.findByWorkOrderNumber(input.getWorkOrderNumber());\n        if (workOrder == null) {\n            throw new IllegalArgumentException(\"Work order not found: \" + input.getWorkOrderNumber());\n        }\n\n        String completionResultNumber = generateCompletionResultNumber(input.getCompletionDate());\n\n        // \u5b8c\u6210\u5b9f\u7e3e\u3092\u4f5c\u6210\n        CompletionResult completionResult = CompletionResult.builder()\n                .completionResultNumber(completionResultNumber)\n                .workOrderNumber(input.getWorkOrderNumber())\n                .itemCode(workOrder.getItemCode())\n                .completionDate(input.getCompletionDate())\n                .completedQuantity(input.getCompletedQuantity())\n                .goodQuantity(input.getGoodQuantity())\n                .defectQuantity(input.getDefectQuantity())\n                .remarks(input.getRemarks())\n                .build();\n        completionResultMapper.insert(completionResult);\n\n        // \u691c\u67fb\u7d50\u679c\u3092\u4f5c\u6210\n        List&lt;InspectionResult&gt; inspectionResults = new ArrayList&lt;&gt;();\n        if (input.getInspectionResults() != null) {\n            for (InspectionResultInput irInput : input.getInspectionResults()) {\n                InspectionResult ir = InspectionResult.builder()\n                        .completionResultNumber(completionResultNumber)\n                        .defectCode(irInput.getDefectCode())\n                        .quantity(irInput.getQuantity())\n                        .build();\n                inspectionResultMapper.insert(ir);\n                inspectionResults.add(ir);\n            }\n        }\n        completionResult.setInspectionResults(inspectionResults);\n\n        // \u4f5c\u696d\u6307\u793a\u306e\u7d2f\u8a08\u3092\u66f4\u65b0\n        workOrderMapper.updateCompletionQuantities(\n                input.getWorkOrderNumber(),\n                input.getCompletedQuantity(),\n                input.getGoodQuantity(),\n                input.getDefectQuantity()\n        );\n\n        return completionResult;\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter27/#_10","title":"\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\u306e\u69cb\u9020","text":"<p>\u5de5\u6570\u5b9f\u7e3e\u306f\u3001\u4f5c\u696d\u6307\u793a\u660e\u7d30\uff08\u5de5\u9806\uff09\u3054\u3068\u306b\u62c5\u5f53\u8005\u306e\u4f5c\u696d\u6642\u9593\u3092\u8a18\u9332\u3057\u307e\u3059\u3002</p> <p></p> DDL: \u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf <pre><code>-- V016__create_labor_hours_tables.sql\n\n-- \u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\nCREATE TABLE \"\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u5de5\u6570\u5b9f\u7e3e\u756a\u53f7\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u54c1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u5de5\u9806\" INTEGER NOT NULL,\n    \"\u5de5\u7a0b\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u90e8\u9580\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u4f5c\u696d\u65e5\" DATE NOT NULL,\n    \"\u5de5\u6570\" DECIMAL(10, 2) NOT NULL,\n    \"\u5099\u8003\" TEXT,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u4f5c\u6210\u8005\" VARCHAR(50),\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u8005\" VARCHAR(50),\n    CONSTRAINT \"fk_\u5de5\u6570\u5b9f\u7e3e_\u4f5c\u696d\u6307\u793a\"\n        FOREIGN KEY (\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\") REFERENCES \"\u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf\"(\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\"),\n    CONSTRAINT \"fk_\u5de5\u6570\u5b9f\u7e3e_\u54c1\u76ee\"\n        FOREIGN KEY (\"\u54c1\u76ee\u30b3\u30fc\u30c9\") REFERENCES \"\u54c1\u76ee\u30de\u30b9\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"fk_\u5de5\u6570\u5b9f\u7e3e_\u5de5\u7a0b\"\n        FOREIGN KEY (\"\u5de5\u7a0b\u30b3\u30fc\u30c9\") REFERENCES \"\u5de5\u7a0b\u30de\u30b9\u30bf\"(\"\u5de5\u7a0b\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"fk_\u5de5\u6570\u5b9f\u7e3e_\u90e8\u9580\"\n        FOREIGN KEY (\"\u90e8\u9580\u30b3\u30fc\u30c9\") REFERENCES \"\u90e8\u9580\u30de\u30b9\u30bf\"(\"\u90e8\u9580\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"fk_\u5de5\u6570\u5b9f\u7e3e_\u62c5\u5f53\u8005\"\n        FOREIGN KEY (\"\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\") REFERENCES \"\u62c5\u5f53\u8005\u30de\u30b9\u30bf\"(\"\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\")\n);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"idx_\u5de5\u6570\u5b9f\u7e3e_\u4f5c\u696d\u6307\u793a\u756a\u53f7\" ON \"\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\"(\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\");\nCREATE INDEX \"idx_\u5de5\u6570\u5b9f\u7e3e_\u54c1\u76ee\u30b3\u30fc\u30c9\" ON \"\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u5de5\u6570\u5b9f\u7e3e_\u5de5\u7a0b\u30b3\u30fc\u30c9\" ON \"\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\"(\"\u5de5\u7a0b\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u5de5\u6570\u5b9f\u7e3e_\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\" ON \"\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\"(\"\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\");\nCREATE INDEX \"idx_\u5de5\u6570\u5b9f\u7e3e_\u4f5c\u696d\u65e5\" ON \"\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\"(\"\u4f5c\u696d\u65e5\");\n</code></pre>"},{"location":"article/part4/chapter27/#java_2","title":"Java \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u5b9a\u7fa9\uff08\u5de5\u6570\u5b9f\u7e3e\uff09","text":"Entity: LaborHours\uff08\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\uff09 <pre><code>// src/main/java/com/example/production/domain/model/process/LaborHours.java\npackage com.example.production.domain.model.process;\n\nimport com.example.production.domain.model.item.Item;\nimport com.example.production.domain.master.Department;\nimport com.example.production.domain.master.Employee;\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\npublic class LaborHours {\n    private Integer id;\n    private String laborHoursNumber;\n    private String workOrderNumber;\n    private String itemCode;\n    private Integer sequence;\n    private String processCode;\n    private String departmentCode;\n    private String employeeCode;\n    private LocalDate workDate;\n    private BigDecimal hours;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private String createdBy;\n    private LocalDateTime updatedAt;\n    private String updatedBy;\n\n    // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n    private WorkOrder workOrder;\n    private Item item;\n    private Process process;\n    private Department department;\n    private Employee employee;\n}\n</code></pre>"},{"location":"article/part4/chapter27/#mybatis-mapper_2","title":"MyBatis Mapper\uff08\u5de5\u6570\u5b9f\u7e3e\uff09","text":"Mapper XML: LaborHoursMapper.xml <pre><code>&lt;!-- src/main/resources/com/example/production/infrastructure/persistence/mapper/LaborHoursMapper.xml --&gt;\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.production.infrastructure.persistence.mapper.LaborHoursMapper\"&gt;\n\n    &lt;resultMap id=\"LaborHoursResultMap\" type=\"com.example.production.domain.model.process.LaborHours\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"laborHoursNumber\" column=\"\u5de5\u6570\u5b9f\u7e3e\u756a\u53f7\"/&gt;\n        &lt;result property=\"workOrderNumber\" column=\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\"/&gt;\n        &lt;result property=\"itemCode\" column=\"\u54c1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"sequence\" column=\"\u5de5\u9806\"/&gt;\n        &lt;result property=\"processCode\" column=\"\u5de5\u7a0b\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"departmentCode\" column=\"\u90e8\u9580\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"employeeCode\" column=\"\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"workDate\" column=\"\u4f5c\u696d\u65e5\"/&gt;\n        &lt;result property=\"hours\" column=\"\u5de5\u6570\"/&gt;\n        &lt;result property=\"remarks\" column=\"\u5099\u8003\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"createdBy\" column=\"\u4f5c\u6210\u8005\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedBy\" column=\"\u66f4\u65b0\u8005\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;insert id=\"insert\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\" (\n            \"\u5de5\u6570\u5b9f\u7e3e\u756a\u53f7\", \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\", \"\u54c1\u76ee\u30b3\u30fc\u30c9\", \"\u5de5\u9806\", \"\u5de5\u7a0b\u30b3\u30fc\u30c9\",\n            \"\u90e8\u9580\u30b3\u30fc\u30c9\", \"\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\", \"\u4f5c\u696d\u65e5\", \"\u5de5\u6570\", \"\u5099\u8003\", \"\u4f5c\u6210\u8005\"\n        ) VALUES (\n            #{laborHoursNumber},\n            #{workOrderNumber},\n            #{itemCode},\n            #{sequence},\n            #{processCode},\n            #{departmentCode},\n            #{employeeCode},\n            #{workDate},\n            #{hours},\n            #{remarks},\n            #{createdBy}\n        )\n    &lt;/insert&gt;\n\n    &lt;select id=\"findByLaborHoursNumber\" resultMap=\"LaborHoursResultMap\"&gt;\n        SELECT * FROM \"\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\" WHERE \"\u5de5\u6570\u5b9f\u7e3e\u756a\u53f7\" = #{laborHoursNumber}\n    &lt;/select&gt;\n\n    &lt;select id=\"sumByWorkOrderAndSequence\" resultType=\"java.math.BigDecimal\"&gt;\n        SELECT COALESCE(SUM(\"\u5de5\u6570\"), 0)\n        FROM \"\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\"\n        WHERE \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" = #{workOrderNumber} AND \"\u5de5\u9806\" = #{sequence}\n    &lt;/select&gt;\n\n    &lt;select id=\"sumByWorkOrder\" resultType=\"java.math.BigDecimal\"&gt;\n        SELECT COALESCE(SUM(\"\u5de5\u6570\"), 0)\n        FROM \"\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\"\n        WHERE \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" = #{workOrderNumber}\n    &lt;/select&gt;\n\n    &lt;select id=\"sumByEmployee\" resultType=\"java.math.BigDecimal\"&gt;\n        SELECT COALESCE(SUM(\"\u5de5\u6570\"), 0)\n        FROM \"\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\"\n        WHERE \"\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\" = #{employeeCode}\n          AND \"\u4f5c\u696d\u65e5\" BETWEEN #{startDate} AND #{endDate}\n    &lt;/select&gt;\n\n    &lt;select id=\"findLatestLaborHoursNumber\" resultType=\"string\"&gt;\n        SELECT \"\u5de5\u6570\u5b9f\u7e3e\u756a\u53f7\" FROM \"\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\"\n        WHERE \"\u5de5\u6570\u5b9f\u7e3e\u756a\u53f7\" LIKE #{prefix}\n        ORDER BY \"\u5de5\u6570\u5b9f\u7e3e\u756a\u53f7\" DESC\n        LIMIT 1\n    &lt;/select&gt;\n\n    &lt;delete id=\"deleteAll\"&gt;\n        DELETE FROM \"\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\"\n    &lt;/delete&gt;\n&lt;/mapper&gt;\n</code></pre>"},{"location":"article/part4/chapter27/#_11","title":"\u5de5\u6570\u5b9f\u7e3e\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":"Service: LaborHoursService <pre><code>// src/main/java/com/example/production/application/service/LaborHoursService.java\npackage com.example.production.application.service;\n\nimport com.example.production.domain.model.process.*;\nimport com.example.production.infrastructure.persistence.mapper.*;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.format.DateTimeFormatter;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Service\n@RequiredArgsConstructor\npublic class LaborHoursService {\n\n    private final LaborHoursMapper laborHoursMapper;\n    private final WorkOrderDetailMapper workOrderDetailMapper;\n    private final WorkOrderMapper workOrderMapper;\n    private final ProcessMapper processMapper;\n\n    /**\n     * \u5de5\u6570\u5b9f\u7e3e\u756a\u53f7\u3092\u751f\u6210\u3059\u308b\n     */\n    private String generateLaborHoursNumber(LocalDate workDate) {\n        String prefix = \"LH-\" + workDate.format(DateTimeFormatter.ofPattern(\"yyyyMM\")) + \"-\";\n        String latestNumber = laborHoursMapper.findLatestLaborHoursNumber(prefix + \"%\");\n\n        int sequence = 1;\n        if (latestNumber != null) {\n            int currentSequence = Integer.parseInt(latestNumber.substring(latestNumber.length() - 4));\n            sequence = currentSequence + 1;\n        }\n\n        return prefix + String.format(\"%04d\", sequence);\n    }\n\n    /**\n     * \u5de5\u6570\u5b9f\u7e3e\u3092\u5831\u544a\u3059\u308b\n     */\n    @Transactional\n    public LaborHours reportLaborHours(LaborHoursInput input) {\n        // \u4f5c\u696d\u6307\u793a\u660e\u7d30\u3092\u53d6\u5f97\n        WorkOrderDetail detail = workOrderDetailMapper.findByWorkOrderAndSequence(\n                input.getWorkOrderNumber(), input.getSequence());\n        if (detail == null) {\n            throw new IllegalArgumentException(\"Work order detail not found\");\n        }\n\n        // \u4f5c\u696d\u6307\u793a\u3092\u53d6\u5f97\n        WorkOrder workOrder = workOrderMapper.findByWorkOrderNumber(input.getWorkOrderNumber());\n        if (workOrder == null) {\n            throw new IllegalArgumentException(\"Work order not found\");\n        }\n\n        String laborHoursNumber = generateLaborHoursNumber(input.getWorkDate());\n\n        // \u5de5\u6570\u5b9f\u7e3e\u3092\u4f5c\u6210\n        LaborHours laborHours = LaborHours.builder()\n                .laborHoursNumber(laborHoursNumber)\n                .workOrderNumber(input.getWorkOrderNumber())\n                .itemCode(workOrder.getItemCode())\n                .sequence(input.getSequence())\n                .processCode(detail.getProcessCode())\n                .departmentCode(input.getDepartmentCode())\n                .employeeCode(input.getEmployeeCode())\n                .workDate(input.getWorkDate())\n                .hours(input.getHours())\n                .remarks(input.getRemarks())\n                .build();\n        laborHoursMapper.insert(laborHours);\n\n        return laborHours;\n    }\n\n    /**\n     * \u5de5\u9806\u5225\u306e\u5de5\u6570\u5408\u8a08\u3092\u53d6\u5f97\u3059\u308b\n     */\n    public BigDecimal getTotalHoursBySequence(String workOrderNumber, Integer sequence) {\n        return laborHoursMapper.sumByWorkOrderAndSequence(workOrderNumber, sequence);\n    }\n\n    /**\n     * \u4f5c\u696d\u6307\u793a\u306e\u5de5\u6570\u30b5\u30de\u30ea\u3092\u53d6\u5f97\u3059\u308b\n     */\n    public LaborHoursSummary getSummary(String workOrderNumber) {\n        WorkOrder workOrder = workOrderMapper.findByWorkOrderNumber(workOrderNumber);\n        if (workOrder == null) {\n            throw new IllegalArgumentException(\"Work order not found\");\n        }\n\n        List&lt;WorkOrderDetail&gt; details = workOrderDetailMapper.findByWorkOrderNumber(workOrderNumber);\n        List&lt;ProcessLaborHours&gt; processHours = new ArrayList&lt;&gt;();\n        BigDecimal totalHours = BigDecimal.ZERO;\n\n        for (WorkOrderDetail detail : details) {\n            BigDecimal hours = laborHoursMapper.sumByWorkOrderAndSequence(workOrderNumber, detail.getSequence());\n            Process process = processMapper.findByProcessCode(detail.getProcessCode());\n\n            processHours.add(ProcessLaborHours.builder()\n                    .processCode(detail.getProcessCode())\n                    .processName(process != null ? process.getProcessName() : \"\")\n                    .hours(hours)\n                    .build());\n\n            totalHours = totalHours.add(hours);\n        }\n\n        return LaborHoursSummary.builder()\n                .totalHours(totalHours)\n                .processHours(processHours)\n                .build();\n    }\n\n    /**\n     * \u62c5\u5f53\u8005\u5225\u306e\u5de5\u6570\u3092\u53d6\u5f97\u3059\u308b\n     */\n    public BigDecimal getTotalHoursByEmployee(String employeeCode, LocalDate startDate, LocalDate endDate) {\n        return laborHoursMapper.sumByEmployee(employeeCode, startDate, endDate);\n    }\n}\n</code></pre> Input DTO: LaborHoursInput <pre><code>// src/main/java/com/example/production/application/service/LaborHoursInput.java\npackage com.example.production.application.service;\n\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\n\n@Data\n@Builder\npublic class LaborHoursInput {\n    private String workOrderNumber;\n    private Integer sequence;\n    private LocalDate workDate;\n    private String employeeCode;\n    private String departmentCode;\n    private BigDecimal hours;\n    private String remarks;\n}\n</code></pre> DTO: LaborHoursSummary\u30fbProcessLaborHours <pre><code>// src/main/java/com/example/production/application/service/LaborHoursSummary.java\npackage com.example.production.application.service;\n\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\nimport java.util.List;\n\n@Data\n@Builder\npublic class LaborHoursSummary {\n    private BigDecimal totalHours;\n    private List&lt;ProcessLaborHours&gt; processHours;\n}\n</code></pre> <pre><code>// src/main/java/com/example/production/application/service/ProcessLaborHours.java\npackage com.example.production.application.service;\n\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\n\n@Data\n@Builder\npublic class ProcessLaborHours {\n    private String processCode;\n    private String processName;\n    private BigDecimal hours;\n}\n</code></pre>"},{"location":"article/part4/chapter27/#273","title":"27.3 \u9032\u6357\u7ba1\u7406","text":""},{"location":"article/part4/chapter27/#_12","title":"\u5de5\u7a0b\u5225\u9032\u6357\u306e\u7ba1\u7406","text":"<p>\u4f5c\u696d\u6307\u793a\u306e\u9032\u6357\u72b6\u6cc1\u3092\u5de5\u7a0b\u5225\u306b\u628a\u63e1\u3059\u308b\u305f\u3081\u306e\u8a2d\u8a08\u3092\u884c\u3044\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part4/chapter27/#dto","title":"\u9032\u6357\u72b6\u6cc1DTO","text":"DTO: WorkOrderProgress <pre><code>// src/main/java/com/example/production/application/service/WorkOrderProgress.java\npackage com.example.production.application.service;\n\nimport com.example.production.domain.model.process.WorkOrderStatus;\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\nimport java.math.RoundingMode;\nimport java.time.LocalDate;\nimport java.util.List;\n\n@Data\n@Builder\npublic class WorkOrderProgress {\n    private String workOrderNumber;\n    private String itemCode;\n    private WorkOrderStatus status;\n    private BigDecimal orderQuantity;\n    private BigDecimal completedQuantity;\n    private LocalDate plannedStartDate;\n    private LocalDate plannedEndDate;\n    private LocalDate actualStartDate;\n    private LocalDate actualEndDate;\n    private List&lt;ProcessProgress&gt; processProgresses;\n\n    /**\n     * \u9032\u6357\u7387\u3092\u8a08\u7b97\u3059\u308b\uff080-100%\uff09\n     */\n    public BigDecimal getProgressRate() {\n        if (orderQuantity == null || orderQuantity.compareTo(BigDecimal.ZERO) == 0) {\n            return BigDecimal.ZERO;\n        }\n        return completedQuantity\n                .multiply(new BigDecimal(\"100\"))\n                .divide(orderQuantity, 2, RoundingMode.HALF_UP);\n    }\n\n    /**\n     * \u9045\u5ef6\u5224\u5b9a\n     */\n    public boolean isDelayed() {\n        if (status == WorkOrderStatus.COMPLETED) {\n            return false;\n        }\n        LocalDate today = LocalDate.now();\n        return today.isAfter(plannedEndDate);\n    }\n\n    /**\n     * \u9045\u5ef6\u65e5\u6570\u3092\u8a08\u7b97\n     */\n    public long getDelayDays() {\n        if (!isDelayed()) {\n            return 0;\n        }\n        LocalDate today = LocalDate.now();\n        return java.time.temporal.ChronoUnit.DAYS.between(plannedEndDate, today);\n    }\n}\n</code></pre> DTO: ProcessProgress <pre><code>// src/main/java/com/example/production/application/service/ProcessProgress.java\npackage com.example.production.application.service;\n\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\n\n@Data\n@Builder\npublic class ProcessProgress {\n    private Integer sequence;\n    private String processCode;\n    private String processName;\n    private BigDecimal plannedHours;\n    private BigDecimal actualHours;\n\n    /**\n     * \u5de5\u6570\u6d88\u5316\u7387\u3092\u8a08\u7b97\n     */\n    public BigDecimal getHoursRate() {\n        if (plannedHours == null || plannedHours.compareTo(BigDecimal.ZERO) == 0) {\n            return BigDecimal.ZERO;\n        }\n        return actualHours\n                .multiply(new BigDecimal(\"100\"))\n                .divide(plannedHours, 2, java.math.RoundingMode.HALF_UP);\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter27/#_13","title":"\u9032\u6357\u7ba1\u7406\u30b5\u30fc\u30d3\u30b9","text":"Service: ProgressManagementService <pre><code>// src/main/java/com/example/production/application/service/ProgressManagementService.java\npackage com.example.production.application.service;\n\nimport com.example.production.domain.model.process.*;\nimport com.example.production.infrastructure.persistence.mapper.*;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\n\nimport java.time.LocalDate;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.stream.Collectors;\n\n@Service\n@RequiredArgsConstructor\npublic class ProgressManagementService {\n\n    private final WorkOrderMapper workOrderMapper;\n    private final WorkOrderDetailMapper workOrderDetailMapper;\n    private final LaborHoursMapper laborHoursMapper;\n    private final ProcessMapper processMapper;\n\n    /**\n     * \u4f5c\u696d\u6307\u793a\u306e\u9032\u6357\u3092\u53d6\u5f97\u3059\u308b\n     */\n    public WorkOrderProgress getProgress(String workOrderNumber) {\n        WorkOrder workOrder = workOrderMapper.findByWorkOrderNumber(workOrderNumber);\n        if (workOrder == null) {\n            throw new IllegalArgumentException(\"Work order not found: \" + workOrderNumber);\n        }\n\n        List&lt;WorkOrderDetail&gt; details = workOrderDetailMapper.findByWorkOrderNumber(workOrderNumber);\n        List&lt;ProcessProgress&gt; processProgresses = new ArrayList&lt;&gt;();\n\n        for (WorkOrderDetail detail : details) {\n            Process process = processMapper.findByProcessCode(detail.getProcessCode());\n            var actualHours = laborHoursMapper.sumByWorkOrderAndSequence(\n                    workOrderNumber, detail.getSequence());\n\n            processProgresses.add(ProcessProgress.builder()\n                    .sequence(detail.getSequence())\n                    .processCode(detail.getProcessCode())\n                    .processName(process != null ? process.getProcessName() : \"\")\n                    .actualHours(actualHours)\n                    .build());\n        }\n\n        return WorkOrderProgress.builder()\n                .workOrderNumber(workOrder.getWorkOrderNumber())\n                .itemCode(workOrder.getItemCode())\n                .status(workOrder.getStatus())\n                .orderQuantity(workOrder.getOrderQuantity())\n                .completedQuantity(workOrder.getCompletedQuantity())\n                .plannedStartDate(workOrder.getPlannedStartDate())\n                .plannedEndDate(workOrder.getPlannedEndDate())\n                .actualStartDate(workOrder.getActualStartDate())\n                .actualEndDate(workOrder.getActualEndDate())\n                .processProgresses(processProgresses)\n                .build();\n    }\n\n    /**\n     * \u9045\u5ef6\u3057\u3066\u3044\u308b\u4f5c\u696d\u6307\u793a\u3092\u53d6\u5f97\u3059\u308b\n     */\n    public List&lt;WorkOrderProgress&gt; getDelayedWorkOrders() {\n        // \u672a\u5b8c\u4e86\u306e\u4f5c\u696d\u6307\u793a\u3092\u53d6\u5f97\n        List&lt;WorkOrder&gt; workOrders = workOrderMapper.findByStatus(\n                List.of(WorkOrderStatus.NOT_STARTED, WorkOrderStatus.IN_PROGRESS));\n\n        LocalDate today = LocalDate.now();\n\n        return workOrders.stream()\n                .filter(wo -&gt; today.isAfter(wo.getPlannedEndDate()))\n                .map(wo -&gt; getProgress(wo.getWorkOrderNumber()))\n                .collect(Collectors.toList());\n    }\n\n    /**\n     * \u672c\u65e5\u958b\u59cb\u4e88\u5b9a\u306e\u4f5c\u696d\u6307\u793a\u3092\u53d6\u5f97\u3059\u308b\n     */\n    public List&lt;WorkOrderProgress&gt; getTodayStartWorkOrders() {\n        LocalDate today = LocalDate.now();\n        List&lt;WorkOrder&gt; workOrders = workOrderMapper.findByPlannedStartDate(today);\n\n        return workOrders.stream()\n                .map(wo -&gt; getProgress(wo.getWorkOrderNumber()))\n                .collect(Collectors.toList());\n    }\n\n    /**\n     * \u672c\u65e5\u5b8c\u6210\u4e88\u5b9a\u306e\u4f5c\u696d\u6307\u793a\u3092\u53d6\u5f97\u3059\u308b\n     */\n    public List&lt;WorkOrderProgress&gt; getTodayDueWorkOrders() {\n        LocalDate today = LocalDate.now();\n        List&lt;WorkOrder&gt; workOrders = workOrderMapper.findByPlannedEndDate(today);\n\n        return workOrders.stream()\n                .map(wo -&gt; getProgress(wo.getWorkOrderNumber()))\n                .collect(Collectors.toList());\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter27/#_14","title":"\u9045\u5ef6\u30a2\u30e9\u30fc\u30c8\u306e\u8a2d\u8a08","text":""},{"location":"article/part4/chapter27/#_15","title":"\u9032\u6357\u72b6\u6cc1\u306e\u53ef\u8996\u5316","text":"<p>\u9032\u6357\u72b6\u6cc1\u3092\u53ef\u8996\u5316\u3059\u308b\u305f\u3081\u306e\u30d3\u30e5\u30fc\u5b9a\u7fa9\u4f8b\u3092\u793a\u3057\u307e\u3059\u3002</p> DDL: \u9032\u6357\u7ba1\u7406\u30d3\u30e5\u30fc <pre><code>-- \u4f5c\u696d\u6307\u793a\u9032\u6357\u30d3\u30e5\u30fc\nCREATE OR REPLACE VIEW \"\u4f5c\u696d\u6307\u793a\u9032\u6357\u30d3\u30e5\u30fc\" AS\nSELECT\n    wo.\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\",\n    wo.\"\u30aa\u30fc\u30c0\u756a\u53f7\",\n    wo.\"\u54c1\u76ee\u30b3\u30fc\u30c9\",\n    i.\"\u54c1\u76ee\u540d\",\n    wo.\"\u4f5c\u696d\u6307\u793a\u6570\",\n    wo.\"\u5b8c\u6210\u6e08\u6570\",\n    CASE\n        WHEN wo.\"\u4f5c\u696d\u6307\u793a\u6570\" = 0 THEN 0\n        ELSE ROUND((wo.\"\u5b8c\u6210\u6e08\u6570\" / wo.\"\u4f5c\u696d\u6307\u793a\u6570\") * 100, 2)\n    END AS \"\u9032\u6357\u7387\",\n    wo.\"\u958b\u59cb\u4e88\u5b9a\u65e5\",\n    wo.\"\u5b8c\u6210\u4e88\u5b9a\u65e5\",\n    wo.\"\u5b9f\u7e3e\u958b\u59cb\u65e5\",\n    wo.\"\u5b9f\u7e3e\u5b8c\u4e86\u65e5\",\n    wo.\"\u30b9\u30c6\u30fc\u30bf\u30b9\",\n    CASE\n        WHEN wo.\"\u30b9\u30c6\u30fc\u30bf\u30b9\" = '\u5b8c\u4e86' THEN '\u5b8c\u4e86'\n        WHEN CURRENT_DATE &gt; wo.\"\u5b8c\u6210\u4e88\u5b9a\u65e5\" THEN '\u9045\u5ef6'\n        WHEN CURRENT_DATE &gt;= wo.\"\u958b\u59cb\u4e88\u5b9a\u65e5\" AND wo.\"\u30b9\u30c6\u30fc\u30bf\u30b9\" = '\u672a\u7740\u624b' THEN '\u672a\u7740\u624b\u9045\u5ef6'\n        ELSE '\u6b63\u5e38'\n    END AS \"\u9032\u6357\u72b6\u614b\",\n    CASE\n        WHEN wo.\"\u30b9\u30c6\u30fc\u30bf\u30b9\" = '\u5b8c\u4e86' THEN 0\n        WHEN CURRENT_DATE &gt; wo.\"\u5b8c\u6210\u4e88\u5b9a\u65e5\" THEN CURRENT_DATE - wo.\"\u5b8c\u6210\u4e88\u5b9a\u65e5\"\n        ELSE 0\n    END AS \"\u9045\u5ef6\u65e5\u6570\"\nFROM \"\u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf\" wo\nLEFT JOIN \"\u54c1\u76ee\u30de\u30b9\u30bf\" i ON wo.\"\u54c1\u76ee\u30b3\u30fc\u30c9\" = i.\"\u54c1\u76ee\u30b3\u30fc\u30c9\";\n\n-- \u5de5\u7a0b\u5225\u5de5\u6570\u5b9f\u7e3e\u30d3\u30e5\u30fc\nCREATE OR REPLACE VIEW \"\u5de5\u7a0b\u5225\u5de5\u6570\u5b9f\u7e3e\u30d3\u30e5\u30fc\" AS\nSELECT\n    lh.\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\",\n    lh.\"\u5de5\u9806\",\n    lh.\"\u5de5\u7a0b\u30b3\u30fc\u30c9\",\n    p.\"\u5de5\u7a0b\u540d\",\n    SUM(lh.\"\u5de5\u6570\") AS \"\u5408\u8a08\u5de5\u6570\",\n    COUNT(*) AS \"\u8a18\u9332\u4ef6\u6570\"\nFROM \"\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\" lh\nLEFT JOIN \"\u5de5\u7a0b\u30de\u30b9\u30bf\" p ON lh.\"\u5de5\u7a0b\u30b3\u30fc\u30c9\" = p.\"\u5de5\u7a0b\u30b3\u30fc\u30c9\"\nGROUP BY\n    lh.\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\",\n    lh.\"\u5de5\u9806\",\n    lh.\"\u5de5\u7a0b\u30b3\u30fc\u30c9\",\n    p.\"\u5de5\u7a0b\u540d\"\nORDER BY\n    lh.\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\",\n    lh.\"\u5de5\u9806\";\n</code></pre>"},{"location":"article/part4/chapter27/#_16","title":"\u307e\u3068\u3081","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u5de5\u7a0b\u7ba1\u7406\u306e\u8a2d\u8a08\u306b\u3064\u3044\u3066\u5b66\u3073\u307e\u3057\u305f\u3002</p>"},{"location":"article/part4/chapter27/#_17","title":"\u5b66\u3093\u3060\u3053\u3068","text":"<ol> <li>\u88fd\u9020\u6307\u793a\u306e\u8a2d\u8a08</li> <li>\u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf\u3068\u4f5c\u696d\u6307\u793a\u660e\u7d30\u30c7\u30fc\u30bf\u306e\u89aa\u5b50\u95a2\u4fc2</li> <li>\u5de5\u7a0b\u8868\u304b\u3089\u306e\u81ea\u52d5\u5c55\u958b</li> <li> <p>\u30b9\u30c6\u30fc\u30bf\u30b9\u7ba1\u7406\uff08\u672a\u7740\u624b\u2192\u4f5c\u696d\u4e2d\u2192\u5b8c\u4e86\uff09</p> </li> <li> <p>\u88fd\u9020\u5b9f\u7e3e\u306e\u8a2d\u8a08</p> </li> <li>\u5b8c\u6210\u5b9f\u7e3e\u3068\u691c\u67fb\u7d50\u679c\u306e\u8a18\u9332</li> <li>\u4f5c\u696d\u6307\u793a\u306e\u7d2f\u8a08\u66f4\u65b0</li> <li> <p>\u4e0d\u826f\u54c1\u306e\u6b20\u70b9\u5225\u7ba1\u7406</p> </li> <li> <p>\u5de5\u6570\u5b9f\u7e3e\u306e\u8a2d\u8a08</p> </li> <li>\u5de5\u9806\u3054\u3068\u306e\u5de5\u6570\u8a18\u9332</li> <li> <p>\u62c5\u5f53\u8005\u5225\u30fb\u5de5\u7a0b\u5225\u306e\u96c6\u8a08</p> </li> <li> <p>\u9032\u6357\u7ba1\u7406\u306e\u8a2d\u8a08</p> </li> <li>\u9032\u6357\u7387\u306e\u8a08\u7b97</li> <li>\u9045\u5ef6\u30a2\u30e9\u30fc\u30c8\u306e\u5224\u5b9a</li> <li>\u9032\u6357\u72b6\u6cc1\u306e\u53ef\u8996\u5316</li> </ol>"},{"location":"article/part4/chapter27/#27_1","title":"\u30c6\u30fc\u30d6\u30eb\u4e00\u89a7\uff08\u7b2c27\u7ae0\uff09","text":"\u30c6\u30fc\u30d6\u30eb\u540d\uff08\u65e5\u672c\u8a9e\uff09 Java \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 \u8aac\u660e \u5de5\u7a0b\u30de\u30b9\u30bf Process \u5de5\u7a0b\u306e\u5b9a\u7fa9 \u5de5\u7a0b\u8868 Routing \u54c1\u76ee\u306e\u88fd\u9020\u5de5\u7a0b\u5b9a\u7fa9 \u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf WorkOrder \u88fd\u9020\u6307\u793a\u60c5\u5831 \u4f5c\u696d\u6307\u793a\u660e\u7d30\u30c7\u30fc\u30bf WorkOrderDetail \u5de5\u7a0b\u3054\u3068\u306e\u6307\u793a\u660e\u7d30 \u5b8c\u6210\u5b9f\u7e3e\u30c7\u30fc\u30bf CompletionResult \u5b8c\u6210\u5831\u544a \u5b8c\u6210\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf InspectionResult \u691c\u67fb\u3067\u306e\u4e0d\u826f\u5185\u8a33 \u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf LaborHours \u5de5\u7a0b\u3054\u3068\u306e\u4f5c\u696d\u6642\u9593"},{"location":"article/part4/chapter27/#enum-27","title":"ENUM \u4e00\u89a7\uff08\u7b2c27\u7ae0\uff09","text":"DB ENUM \u578b\uff08\u65e5\u672c\u8a9e\uff09 Java Enum \u5024 \u4f5c\u696d\u6307\u793a\u30b9\u30c6\u30fc\u30bf\u30b9 WorkOrderStatus \u672a\u7740\u624b\u2192NOT_STARTED, \u4f5c\u696d\u4e2d\u2192IN_PROGRESS, \u5b8c\u4e86\u2192COMPLETED, \u4e2d\u65ad\u2192SUSPENDED"},{"location":"article/part4/chapter27/#_18","title":"\u547d\u540d\u898f\u5247\u306e\u30d1\u30bf\u30fc\u30f3","text":"<ul> <li>DB\uff08\u65e5\u672c\u8a9e\uff09: \u30c6\u30fc\u30d6\u30eb\u540d\u3001\u30ab\u30e9\u30e0\u540d\u3001ENUM \u578b\u30fb\u5024\u306f\u65e5\u672c\u8a9e</li> <li>Java\uff08\u82f1\u8a9e\uff09: \u30af\u30e9\u30b9\u540d\u3001\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\u3001enum \u5024\u306f\u82f1\u8a9e</li> <li>MyBatis resultMap: \u65e5\u672c\u8a9e\u30ab\u30e9\u30e0\u3068\u82f1\u8a9e\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u30de\u30c3\u30d4\u30f3\u30b0</li> <li>TypeHandler: \u65e5\u672c\u8a9e ENUM \u5024\u3068\u82f1\u8a9e enum \u306e\u76f8\u4e92\u5909\u63db</li> </ul> <p>\u2190 \u7b2c26\u7ae0\uff1a\u5916\u6ce8\u59d4\u8a17\u7ba1\u7406\u306e\u8a2d\u8a08 | \u7b2c28\u7ae0\uff1a\u5728\u5eab\u7ba1\u7406\u306e\u8a2d\u8a08 \u2192</p>"},{"location":"article/part4/chapter28/","title":"\u7b2c28\u7ae0\uff1a\u5728\u5eab\u7ba1\u7406\u306e\u8a2d\u8a08","text":""},{"location":"article/part4/chapter28/#_1","title":"\u6982\u8981","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306b\u304a\u3051\u308b\u5728\u5eab\u7ba1\u7406\u306e\u8a2d\u8a08\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002\u5728\u5eab\u60c5\u5831\u306e\u7ba1\u7406\u3001\u6255\u51fa\u696d\u52d9\u3001\u68da\u5378\u696d\u52d9\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part4/chapter28/#281-db","title":"28.1 \u5728\u5eab\u60c5\u5831\u306e DB \u8a2d\u8a08","text":""},{"location":"article/part4/chapter28/#_2","title":"\u5728\u5eab\u7ba1\u7406\u306e\u6982\u5ff5","text":"<p>\u5728\u5eab\u60c5\u5831\u306f\u300c\u5834\u6240\u30b3\u30fc\u30c9 \u00d7 \u54c1\u76ee\u30b3\u30fc\u30c9\u300d\u3067\u4e00\u610f\u306b\u7ba1\u7406\u3055\u308c\u307e\u3059\u3002\u3055\u3089\u306b\u5728\u5eab\u72b6\u614b\uff08\u5408\u683c\u30fb\u4e0d\u826f\u30fb\u672a\u691c\u67fb\uff09\u3054\u3068\u306e\u6570\u91cf\u3092\u4fdd\u6301\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part4/chapter28/#_3","title":"\u30b9\u30ad\u30fc\u30de\u8a2d\u8a08","text":"DDL: \u5834\u6240\u30de\u30b9\u30bf\u30fb\u5009\u5eab\u30de\u30b9\u30bf\u30fb\u5728\u5eab\u60c5\u5831 <pre><code>-- V17__create_inventory_tables.sql\n\n-- \u5834\u6240\u30de\u30b9\u30bf\nCREATE TABLE \"\u5834\u6240\u30de\u30b9\u30bf\" (\n    \"\u5834\u6240\u30b3\u30fc\u30c9\" VARCHAR(20) PRIMARY KEY,\n    \"\u5834\u6240\u540d\" VARCHAR(100) NOT NULL,\n    \"\u5834\u6240\u7a2e\u985e\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\" VARCHAR(20),\n    \"\u90e8\u9580\u30b3\u30fc\u30c9\" VARCHAR(20),\n    \"\u9069\u7528\u958b\u59cb\u65e5\" DATE,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"FK_\u5834\u6240_\u53d6\u5f15\u5148\" FOREIGN KEY (\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\")\n        REFERENCES \"\u53d6\u5f15\u5148\u30de\u30b9\u30bf\"(\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"FK_\u5834\u6240_\u90e8\u9580\" FOREIGN KEY (\"\u90e8\u9580\u30b3\u30fc\u30c9\")\n        REFERENCES \"\u90e8\u9580\u30de\u30b9\u30bf\"(\"\u90e8\u9580\u30b3\u30fc\u30c9\")\n);\n\nCOMMENT ON TABLE \"\u5834\u6240\u30de\u30b9\u30bf\" IS '\u5834\u6240\u30de\u30b9\u30bf';\nCOMMENT ON COLUMN \"\u5834\u6240\u30de\u30b9\u30bf\".\"\u5834\u6240\u30b3\u30fc\u30c9\" IS '\u5834\u6240\u30b3\u30fc\u30c9';\nCOMMENT ON COLUMN \"\u5834\u6240\u30de\u30b9\u30bf\".\"\u5834\u6240\u540d\" IS '\u5834\u6240\u540d';\nCOMMENT ON COLUMN \"\u5834\u6240\u30de\u30b9\u30bf\".\"\u5834\u6240\u7a2e\u985e\u30b3\u30fc\u30c9\" IS '\u5834\u6240\u7a2e\u985e\u30b3\u30fc\u30c9\uff08\u5009\u5eab/\u88fd\u9020\u30e9\u30a4\u30f3\u7b49\uff09';\n\n-- \u5009\u5eab\u30de\u30b9\u30bf\nCREATE TABLE \"\u5009\u5eab\u30de\u30b9\u30bf\" (\n    \"\u5009\u5eab\u30b3\u30fc\u30c9\" VARCHAR(20) PRIMARY KEY,\n    \"\u5009\u5eab\u533a\u5206\" VARCHAR(20) NOT NULL,\n    \"\u5009\u5eab\u540d\" VARCHAR(100) NOT NULL,\n    \"\u90e8\u9580\u30b3\u30fc\u30c9\" VARCHAR(20),\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL\n);\n\nCOMMENT ON TABLE \"\u5009\u5eab\u30de\u30b9\u30bf\" IS '\u5009\u5eab\u30de\u30b9\u30bf';\nCOMMENT ON COLUMN \"\u5009\u5eab\u30de\u30b9\u30bf\".\"\u5009\u5eab\u30b3\u30fc\u30c9\" IS '\u5009\u5eab\u30b3\u30fc\u30c9';\nCOMMENT ON COLUMN \"\u5009\u5eab\u30de\u30b9\u30bf\".\"\u5009\u5eab\u533a\u5206\" IS '\u5009\u5eab\u533a\u5206';\nCOMMENT ON COLUMN \"\u5009\u5eab\u30de\u30b9\u30bf\".\"\u5009\u5eab\u540d\" IS '\u5009\u5eab\u540d';\n\n-- \u5728\u5eab\u60c5\u5831\nCREATE TABLE \"\u5728\u5eab\u60c5\u5831\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u5834\u6240\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u54c1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u5728\u5eab\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u5408\u683c\u6570\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u4e0d\u826f\u6570\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u672a\u691c\u67fb\u6570\" DECIMAL(15, 2) DEFAULT 0 NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"UK_\u5728\u5eab_\u5834\u6240_\u54c1\u76ee\" UNIQUE (\"\u5834\u6240\u30b3\u30fc\u30c9\", \"\u54c1\u76ee\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"FK_\u5728\u5eab_\u5834\u6240\" FOREIGN KEY (\"\u5834\u6240\u30b3\u30fc\u30c9\")\n        REFERENCES \"\u5834\u6240\u30de\u30b9\u30bf\"(\"\u5834\u6240\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"FK_\u5728\u5eab_\u54c1\u76ee\" FOREIGN KEY (\"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n        REFERENCES \"\u54c1\u76ee\u30de\u30b9\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n);\n\nCOMMENT ON TABLE \"\u5728\u5eab\u60c5\u5831\" IS '\u5728\u5eab\u60c5\u5831';\nCOMMENT ON COLUMN \"\u5728\u5eab\u60c5\u5831\".\"ID\" IS '\u30b5\u30ed\u30b2\u30fc\u30c8\u30ad\u30fc';\nCOMMENT ON COLUMN \"\u5728\u5eab\u60c5\u5831\".\"\u5834\u6240\u30b3\u30fc\u30c9\" IS '\u5834\u6240\u30b3\u30fc\u30c9';\nCOMMENT ON COLUMN \"\u5728\u5eab\u60c5\u5831\".\"\u54c1\u76ee\u30b3\u30fc\u30c9\" IS '\u54c1\u76ee\u30b3\u30fc\u30c9';\nCOMMENT ON COLUMN \"\u5728\u5eab\u60c5\u5831\".\"\u5728\u5eab\u6570\u91cf\" IS '\u7dcf\u5728\u5eab\u6570\u91cf';\nCOMMENT ON COLUMN \"\u5728\u5eab\u60c5\u5831\".\"\u5408\u683c\u6570\" IS '\u5408\u683c\u54c1\u6570\u91cf';\nCOMMENT ON COLUMN \"\u5728\u5eab\u60c5\u5831\".\"\u4e0d\u826f\u6570\" IS '\u4e0d\u826f\u54c1\u6570\u91cf';\nCOMMENT ON COLUMN \"\u5728\u5eab\u60c5\u5831\".\"\u672a\u691c\u67fb\u6570\" IS '\u672a\u691c\u67fb\u54c1\u6570\u91cf';\n\nCREATE INDEX \"IDX_\u5728\u5eab_\u5834\u6240\" ON \"\u5728\u5eab\u60c5\u5831\" (\"\u5834\u6240\u30b3\u30fc\u30c9\");\nCREATE INDEX \"IDX_\u5728\u5eab_\u54c1\u76ee\" ON \"\u5728\u5eab\u60c5\u5831\" (\"\u54c1\u76ee\u30b3\u30fc\u30c9\");\n</code></pre>"},{"location":"article/part4/chapter28/#java","title":"Java \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u5b9a\u7fa9","text":""},{"location":"article/part4/chapter28/#enum","title":"\u5728\u5eab\u72b6\u614b Enum","text":"Enum: StockStatus\uff08\u5728\u5eab\u72b6\u614b\uff09 <pre><code>// src/main/java/com/example/production/domain/model/inventory/StockStatus.java\npackage com.example.production.domain.model.inventory;\n\n/**\n * \u5728\u5eab\u72b6\u614b\n */\npublic enum StockStatus {\n    PASSED(\"\u5408\u683c\"),\n    DEFECTIVE(\"\u4e0d\u826f\"),\n    UNINSPECTED(\"\u672a\u691c\u67fb\");\n\n    private final String displayName;\n\n    StockStatus(String displayName) {\n        this.displayName = displayName;\n    }\n\n    public String getDisplayName() {\n        return displayName;\n    }\n\n    public static StockStatus fromDisplayName(String displayName) {\n        for (StockStatus status : values()) {\n            if (status.displayName.equals(displayName)) {\n                return status;\n            }\n        }\n        throw new IllegalArgumentException(\"Unknown display name: \" + displayName);\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter28/#_4","title":"\u5834\u6240\u30de\u30b9\u30bf\u30fb\u5728\u5eab\u60c5\u5831\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3","text":"Entity: Location\uff08\u5834\u6240\u30de\u30b9\u30bf\uff09 <pre><code>// src/main/java/com/example/production/domain/model/inventory/Location.java\npackage com.example.production.domain.model.inventory;\n\nimport lombok.*;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n/**\n * \u5834\u6240\u30de\u30b9\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Location {\n    private String locationCode;\n    private String locationName;\n    private String locationTypeCode;\n    private String supplierCode;\n    private String departmentCode;\n    private LocalDate effectiveDate;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n\n    public Location(String locationCode, String locationName, String locationTypeCode) {\n        this.locationCode = locationCode;\n        this.locationName = locationName;\n        this.locationTypeCode = locationTypeCode;\n    }\n}\n</code></pre> Entity: Stock\uff08\u5728\u5eab\u60c5\u5831\uff09 <pre><code>// src/main/java/com/example/production/domain/model/inventory/Stock.java\npackage com.example.production.domain.model.inventory;\n\nimport lombok.*;\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\n\n/**\n * \u5728\u5eab\u60c5\u5831\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Stock {\n    private Long id;\n    private String locationCode;\n    private String itemCode;\n    private BigDecimal stockQuantity;\n    private BigDecimal passedQuantity;\n    private BigDecimal defectiveQuantity;\n    private BigDecimal uninspectedQuantity;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n\n    public static Stock empty(String locationCode, String itemCode) {\n        return Stock.builder()\n                .locationCode(locationCode)\n                .itemCode(itemCode)\n                .stockQuantity(BigDecimal.ZERO)\n                .passedQuantity(BigDecimal.ZERO)\n                .defectiveQuantity(BigDecimal.ZERO)\n                .uninspectedQuantity(BigDecimal.ZERO)\n                .build();\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter28/#_5","title":"\u5728\u5eab\u64cd\u4f5c\u30ea\u30af\u30a8\u30b9\u30c8","text":"DTO: StockChangeRequest\u30fbStockStatusChangeRequest <pre><code>// src/main/java/com/example/production/domain/model/inventory/StockChangeRequest.java\npackage com.example.production.domain.model.inventory;\n\nimport lombok.*;\nimport java.math.BigDecimal;\n\n/**\n * \u5728\u5eab\u5897\u6e1b\u30ea\u30af\u30a8\u30b9\u30c8\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class StockChangeRequest {\n    private String locationCode;\n    private String itemCode;\n    private BigDecimal quantity;\n    private StockStatus stockStatus;\n}\n</code></pre> <pre><code>// src/main/java/com/example/production/domain/model/inventory/StockStatusChangeRequest.java\npackage com.example.production.domain.model.inventory;\n\nimport lombok.*;\nimport java.math.BigDecimal;\n\n/**\n * \u5728\u5eab\u72b6\u614b\u5909\u66f4\u30ea\u30af\u30a8\u30b9\u30c8\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class StockStatusChangeRequest {\n    private String locationCode;\n    private String itemCode;\n    private BigDecimal quantity;\n    private StockStatus fromStatus;\n    private StockStatus toStatus;\n}\n</code></pre> Exception: InsufficientStockException <pre><code>// src/main/java/com/example/production/domain/model/inventory/InsufficientStockException.java\npackage com.example.production.domain.model.inventory;\n\n/**\n * \u5728\u5eab\u4e0d\u8db3\u4f8b\u5916\n */\npublic class InsufficientStockException extends RuntimeException {\n    public InsufficientStockException(String message) {\n        super(message);\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter28/#mybatis-mapper","title":"MyBatis Mapper","text":"Mapper XML: StockMapper.xml <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.production.infrastructure.persistence.mapper.StockMapper\"&gt;\n\n    &lt;resultMap id=\"StockResultMap\" type=\"com.example.production.domain.model.inventory.Stock\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"locationCode\" column=\"\u5834\u6240\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"itemCode\" column=\"\u54c1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"stockQuantity\" column=\"\u5728\u5eab\u6570\u91cf\"/&gt;\n        &lt;result property=\"passedQuantity\" column=\"\u5408\u683c\u6570\"/&gt;\n        &lt;result property=\"defectiveQuantity\" column=\"\u4e0d\u826f\u6570\"/&gt;\n        &lt;result property=\"uninspectedQuantity\" column=\"\u672a\u691c\u67fb\u6570\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;select id=\"findByLocationAndItem\" resultMap=\"StockResultMap\"&gt;\n        SELECT * FROM \"\u5728\u5eab\u60c5\u5831\"\n        WHERE \"\u5834\u6240\u30b3\u30fc\u30c9\" = #{locationCode}\n          AND \"\u54c1\u76ee\u30b3\u30fc\u30c9\" = #{itemCode}\n    &lt;/select&gt;\n\n    &lt;select id=\"findByLocation\" resultMap=\"StockResultMap\"&gt;\n        SELECT * FROM \"\u5728\u5eab\u60c5\u5831\"\n        WHERE \"\u5834\u6240\u30b3\u30fc\u30c9\" = #{locationCode}\n    &lt;/select&gt;\n\n    &lt;insert id=\"insert\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u5728\u5eab\u60c5\u5831\" (\n            \"\u5834\u6240\u30b3\u30fc\u30c9\", \"\u54c1\u76ee\u30b3\u30fc\u30c9\", \"\u5728\u5eab\u6570\u91cf\",\n            \"\u5408\u683c\u6570\", \"\u4e0d\u826f\u6570\", \"\u672a\u691c\u67fb\u6570\"\n        ) VALUES (\n            #{locationCode}, #{itemCode}, #{stockQuantity},\n            #{passedQuantity}, #{defectiveQuantity}, #{uninspectedQuantity}\n        )\n    &lt;/insert&gt;\n\n    &lt;update id=\"increaseByStatus\"&gt;\n        UPDATE \"\u5728\u5eab\u60c5\u5831\"\n        SET \"\u5728\u5eab\u6570\u91cf\" = \"\u5728\u5eab\u6570\u91cf\" + #{quantity},\n            &lt;choose&gt;\n                &lt;when test=\"status == 'PASSED'\"&gt;\n                    \"\u5408\u683c\u6570\" = \"\u5408\u683c\u6570\" + #{quantity}\n                &lt;/when&gt;\n                &lt;when test=\"status == 'DEFECTIVE'\"&gt;\n                    \"\u4e0d\u826f\u6570\" = \"\u4e0d\u826f\u6570\" + #{quantity}\n                &lt;/when&gt;\n                &lt;when test=\"status == 'UNINSPECTED'\"&gt;\n                    \"\u672a\u691c\u67fb\u6570\" = \"\u672a\u691c\u67fb\u6570\" + #{quantity}\n                &lt;/when&gt;\n            &lt;/choose&gt;,\n            \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP\n        WHERE \"\u5834\u6240\u30b3\u30fc\u30c9\" = #{locationCode}\n          AND \"\u54c1\u76ee\u30b3\u30fc\u30c9\" = #{itemCode}\n    &lt;/update&gt;\n\n    &lt;update id=\"decreaseByStatus\"&gt;\n        UPDATE \"\u5728\u5eab\u60c5\u5831\"\n        SET \"\u5728\u5eab\u6570\u91cf\" = \"\u5728\u5eab\u6570\u91cf\" - #{quantity},\n            &lt;choose&gt;\n                &lt;when test=\"status == 'PASSED'\"&gt;\n                    \"\u5408\u683c\u6570\" = \"\u5408\u683c\u6570\" - #{quantity}\n                &lt;/when&gt;\n                &lt;when test=\"status == 'DEFECTIVE'\"&gt;\n                    \"\u4e0d\u826f\u6570\" = \"\u4e0d\u826f\u6570\" - #{quantity}\n                &lt;/when&gt;\n                &lt;when test=\"status == 'UNINSPECTED'\"&gt;\n                    \"\u672a\u691c\u67fb\u6570\" = \"\u672a\u691c\u67fb\u6570\" - #{quantity}\n                &lt;/when&gt;\n            &lt;/choose&gt;,\n            \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP\n        WHERE \"\u5834\u6240\u30b3\u30fc\u30c9\" = #{locationCode}\n          AND \"\u54c1\u76ee\u30b3\u30fc\u30c9\" = #{itemCode}\n    &lt;/update&gt;\n\n    &lt;update id=\"changeStatus\"&gt;\n        UPDATE \"\u5728\u5eab\u60c5\u5831\"\n        SET\n            &lt;choose&gt;\n                &lt;when test=\"fromStatus == 'PASSED'\"&gt;\n                    \"\u5408\u683c\u6570\" = \"\u5408\u683c\u6570\" - #{quantity}\n                &lt;/when&gt;\n                &lt;when test=\"fromStatus == 'DEFECTIVE'\"&gt;\n                    \"\u4e0d\u826f\u6570\" = \"\u4e0d\u826f\u6570\" - #{quantity}\n                &lt;/when&gt;\n                &lt;when test=\"fromStatus == 'UNINSPECTED'\"&gt;\n                    \"\u672a\u691c\u67fb\u6570\" = \"\u672a\u691c\u67fb\u6570\" - #{quantity}\n                &lt;/when&gt;\n            &lt;/choose&gt;,\n            &lt;choose&gt;\n                &lt;when test=\"toStatus == 'PASSED'\"&gt;\n                    \"\u5408\u683c\u6570\" = \"\u5408\u683c\u6570\" + #{quantity}\n                &lt;/when&gt;\n                &lt;when test=\"toStatus == 'DEFECTIVE'\"&gt;\n                    \"\u4e0d\u826f\u6570\" = \"\u4e0d\u826f\u6570\" + #{quantity}\n                &lt;/when&gt;\n                &lt;when test=\"toStatus == 'UNINSPECTED'\"&gt;\n                    \"\u672a\u691c\u67fb\u6570\" = \"\u672a\u691c\u67fb\u6570\" + #{quantity}\n                &lt;/when&gt;\n            &lt;/choose&gt;,\n            \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP\n        WHERE \"\u5834\u6240\u30b3\u30fc\u30c9\" = #{locationCode}\n          AND \"\u54c1\u76ee\u30b3\u30fc\u30c9\" = #{itemCode}\n    &lt;/update&gt;\n\n    &lt;update id=\"update\"&gt;\n        UPDATE \"\u5728\u5eab\u60c5\u5831\"\n        SET \"\u5728\u5eab\u6570\u91cf\" = #{stockQuantity},\n            \"\u5408\u683c\u6570\" = #{passedQuantity},\n            \"\u4e0d\u826f\u6570\" = #{defectiveQuantity},\n            \"\u672a\u691c\u67fb\u6570\" = #{uninspectedQuantity},\n            \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP\n        WHERE \"\u5834\u6240\u30b3\u30fc\u30c9\" = #{locationCode}\n          AND \"\u54c1\u76ee\u30b3\u30fc\u30c9\" = #{itemCode}\n    &lt;/update&gt;\n\n&lt;/mapper&gt;\n</code></pre> Mapper Interface: StockMapper <pre><code>// src/main/java/com/example/production/infrastructure/persistence/mapper/StockMapper.java\npackage com.example.production.infrastructure.persistence.mapper;\n\nimport com.example.production.domain.model.inventory.Stock;\nimport org.apache.ibatis.annotations.Mapper;\nimport org.apache.ibatis.annotations.Param;\nimport java.math.BigDecimal;\nimport java.util.List;\n\n@Mapper\npublic interface StockMapper {\n    Stock findByLocationAndItem(\n            @Param(\"locationCode\") String locationCode,\n            @Param(\"itemCode\") String itemCode);\n\n    List&lt;Stock&gt; findByLocation(@Param(\"locationCode\") String locationCode);\n\n    void insert(Stock stock);\n\n    void increaseByStatus(\n            @Param(\"locationCode\") String locationCode,\n            @Param(\"itemCode\") String itemCode,\n            @Param(\"quantity\") BigDecimal quantity,\n            @Param(\"status\") String status);\n\n    void decreaseByStatus(\n            @Param(\"locationCode\") String locationCode,\n            @Param(\"itemCode\") String itemCode,\n            @Param(\"quantity\") BigDecimal quantity,\n            @Param(\"status\") String status);\n\n    void changeStatus(\n            @Param(\"locationCode\") String locationCode,\n            @Param(\"itemCode\") String itemCode,\n            @Param(\"quantity\") BigDecimal quantity,\n            @Param(\"fromStatus\") String fromStatus,\n            @Param(\"toStatus\") String toStatus);\n\n    void update(Stock stock);\n}\n</code></pre>"},{"location":"article/part4/chapter28/#_6","title":"\u5728\u5eab\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":"Service: InventoryService <pre><code>// src/main/java/com/example/production/application/service/InventoryService.java\npackage com.example.production.application.service;\n\nimport com.example.production.domain.model.inventory.*;\nimport com.example.production.infrastructure.persistence.mapper.StockMapper;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.math.BigDecimal;\nimport java.util.Optional;\n\n/**\n * \u5728\u5eab\u7ba1\u7406\u30b5\u30fc\u30d3\u30b9\n */\n@Service\n@RequiredArgsConstructor\npublic class InventoryService {\n\n    private final StockMapper stockMapper;\n\n    /**\n     * \u5728\u5eab\u3092\u53d6\u5f97\u3059\u308b\n     */\n    public Stock getStock(String locationCode, String itemCode) {\n        return Optional.ofNullable(stockMapper.findByLocationAndItem(locationCode, itemCode))\n                .orElse(Stock.empty(locationCode, itemCode));\n    }\n\n    /**\n     * \u5728\u5eab\u3092\u5897\u52a0\u3059\u308b\n     */\n    @Transactional\n    public void increaseStock(StockChangeRequest request) {\n        Stock stock = stockMapper.findByLocationAndItem(request.getLocationCode(), request.getItemCode());\n\n        if (stock == null) {\n            // \u65b0\u898f\u4f5c\u6210\n            Stock newStock = Stock.builder()\n                    .locationCode(request.getLocationCode())\n                    .itemCode(request.getItemCode())\n                    .stockQuantity(request.getQuantity())\n                    .passedQuantity(request.getStockStatus() == StockStatus.PASSED ? request.getQuantity() : BigDecimal.ZERO)\n                    .defectiveQuantity(request.getStockStatus() == StockStatus.DEFECTIVE ? request.getQuantity() : BigDecimal.ZERO)\n                    .uninspectedQuantity(request.getStockStatus() == StockStatus.UNINSPECTED ? request.getQuantity() : BigDecimal.ZERO)\n                    .build();\n            stockMapper.insert(newStock);\n        } else {\n            // \u66f4\u65b0\n            stockMapper.increaseByStatus(\n                    request.getLocationCode(),\n                    request.getItemCode(),\n                    request.getQuantity(),\n                    request.getStockStatus().name()\n            );\n        }\n    }\n\n    /**\n     * \u5728\u5eab\u3092\u6e1b\u5c11\u3059\u308b\n     */\n    @Transactional\n    public void decreaseStock(StockChangeRequest request) {\n        Stock stock = getStock(request.getLocationCode(), request.getItemCode());\n        BigDecimal currentQuantity = getQuantityByStatus(stock, request.getStockStatus());\n\n        if (currentQuantity.compareTo(request.getQuantity()) &lt; 0) {\n            throw new InsufficientStockException(\"\u5728\u5eab\u304c\u4e0d\u8db3\u3057\u3066\u3044\u307e\u3059\");\n        }\n\n        stockMapper.decreaseByStatus(\n                request.getLocationCode(),\n                request.getItemCode(),\n                request.getQuantity(),\n                request.getStockStatus().name()\n        );\n    }\n\n    /**\n     * \u5728\u5eab\u72b6\u614b\u3092\u5909\u66f4\u3059\u308b\n     */\n    @Transactional\n    public void changeStockStatus(StockStatusChangeRequest request) {\n        Stock stock = getStock(request.getLocationCode(), request.getItemCode());\n        BigDecimal currentQuantity = getQuantityByStatus(stock, request.getFromStatus());\n\n        if (currentQuantity.compareTo(request.getQuantity()) &lt; 0) {\n            throw new InsufficientStockException(\n                    String.format(\"%s\u306e\u5728\u5eab\u304c\u4e0d\u8db3\u3057\u3066\u3044\u307e\u3059\", request.getFromStatus().getDisplayName())\n            );\n        }\n\n        stockMapper.changeStatus(\n                request.getLocationCode(),\n                request.getItemCode(),\n                request.getQuantity(),\n                request.getFromStatus().name(),\n                request.getToStatus().name()\n        );\n    }\n\n    private BigDecimal getQuantityByStatus(Stock stock, StockStatus status) {\n        return switch (status) {\n            case PASSED -&gt; stock.getPassedQuantity();\n            case DEFECTIVE -&gt; stock.getDefectiveQuantity();\n            case UNINSPECTED -&gt; stock.getUninspectedQuantity();\n        };\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter28/#tdd","title":"TDD: \u5728\u5eab\u60c5\u5831\u306e\u30c6\u30b9\u30c8","text":"Test: StockTest <pre><code>// src/test/java/com/example/production/domain/model/inventory/StockTest.java\npackage com.example.production.domain.model.inventory;\n\nimport com.example.production.application.service.InventoryService;\nimport com.example.production.infrastructure.persistence.mapper.*;\nimport org.junit.jupiter.api.*;\nimport org.mybatis.spring.boot.test.autoconfigure.MybatisTest;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.jdbc.AutoConfigureTestDatabase;\nimport org.springframework.context.annotation.Import;\nimport org.springframework.test.context.DynamicPropertyRegistry;\nimport org.springframework.test.context.DynamicPropertySource;\nimport org.testcontainers.containers.PostgreSQLContainer;\nimport org.testcontainers.junit.jupiter.Container;\nimport org.testcontainers.junit.jupiter.Testcontainers;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\n\nimport static org.assertj.core.api.Assertions.*;\n\n@MybatisTest\n@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\n@Testcontainers\n@Import({InventoryService.class})\n@DisplayName(\"\u5728\u5eab\u60c5\u5831\")\nclass StockTest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:15\")\n            .withDatabaseName(\"testdb\")\n            .withUsername(\"test\")\n            .withPassword(\"test\");\n\n    @DynamicPropertySource\n    static void configureProperties(DynamicPropertyRegistry registry) {\n        registry.add(\"spring.datasource.url\", postgres::getJdbcUrl);\n        registry.add(\"spring.datasource.username\", postgres::getUsername);\n        registry.add(\"spring.datasource.password\", postgres::getPassword);\n    }\n\n    @Autowired\n    private InventoryService inventoryService;\n\n    @Autowired\n    private StockMapper stockMapper;\n\n    @Nested\n    @DisplayName(\"\u5728\u5eab\u306e\u53c2\u7167\")\n    class StockReferenceTest {\n\n        @Test\n        @DisplayName(\"\u5834\u6240\u3068\u54c1\u76ee\u3067\u5728\u5eab\u3092\u53d6\u5f97\u3067\u304d\u308b\")\n        void shouldGetStockByLocationAndItem() {\n            // Act\n            Stock stock = inventoryService.getStock(\"WH001\", \"PROD001\");\n\n            // Assert\n            assertThat(stock).isNotNull();\n            assertThat(stock.getStockQuantity()).isEqualByComparingTo(new BigDecimal(\"100\"));\n            assertThat(stock.getPassedQuantity()).isEqualByComparingTo(new BigDecimal(\"95\"));\n        }\n\n        @Test\n        @DisplayName(\"\u5b58\u5728\u3057\u306a\u3044\u5728\u5eab\u306f0\u3068\u3057\u3066\u8fd4\u3059\")\n        void shouldReturnZeroForNonExistentStock() {\n            // Act\n            Stock stock = inventoryService.getStock(\"WH001\", \"NONEXISTENT\");\n\n            // Assert\n            assertThat(stock.getStockQuantity()).isEqualByComparingTo(BigDecimal.ZERO);\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u5728\u5eab\u306e\u5897\u6e1b\")\n    class StockChangeTest {\n\n        @Test\n        @DisplayName(\"\u5728\u5eab\u3092\u5897\u52a0\u3067\u304d\u308b\")\n        void shouldIncreaseStock() {\n            // Act\n            inventoryService.increaseStock(StockChangeRequest.builder()\n                    .locationCode(\"WH001\")\n                    .itemCode(\"PROD001\")\n                    .quantity(new BigDecimal(\"50\"))\n                    .stockStatus(StockStatus.PASSED)\n                    .build());\n\n            // Assert\n            Stock stock = inventoryService.getStock(\"WH001\", \"PROD001\");\n            assertThat(stock.getStockQuantity()).isEqualByComparingTo(new BigDecimal(\"150\"));\n        }\n\n        @Test\n        @DisplayName(\"\u5728\u5eab\u4ee5\u4e0a\u306e\u6570\u91cf\u3092\u6e1b\u5c11\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u30a8\u30e9\u30fc\")\n        void shouldThrowExceptionWhenDecreasingMoreThanStock() {\n            // Act &amp; Assert\n            assertThatThrownBy(() -&gt; inventoryService.decreaseStock(StockChangeRequest.builder()\n                    .locationCode(\"WH001\")\n                    .itemCode(\"PROD001\")\n                    .quantity(new BigDecimal(\"200\"))\n                    .stockStatus(StockStatus.PASSED)\n                    .build()))\n                    .isInstanceOf(InsufficientStockException.class)\n                    .hasMessageContaining(\"\u5728\u5eab\u304c\u4e0d\u8db3\u3057\u3066\u3044\u307e\u3059\");\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u5728\u5eab\u72b6\u614b\u306e\u5909\u66f4\")\n    class StockStatusChangeTest {\n\n        @Test\n        @DisplayName(\"\u672a\u691c\u67fb\u304b\u3089\u5408\u683c\u3078\u306e\u72b6\u614b\u5909\u66f4\u304c\u3067\u304d\u308b\")\n        void shouldChangeStatusFromUninspectedToPassed() {\n            // Arrange\n            Stock initialStock = inventoryService.getStock(\"WH001\", \"PROD001\");\n            BigDecimal initialUninspected = initialStock.getUninspectedQuantity();\n            BigDecimal initialPassed = initialStock.getPassedQuantity();\n\n            // Act\n            inventoryService.changeStockStatus(StockStatusChangeRequest.builder()\n                    .locationCode(\"WH001\")\n                    .itemCode(\"PROD001\")\n                    .quantity(new BigDecimal(\"2\"))\n                    .fromStatus(StockStatus.UNINSPECTED)\n                    .toStatus(StockStatus.PASSED)\n                    .build());\n\n            // Assert\n            Stock stock = inventoryService.getStock(\"WH001\", \"PROD001\");\n            assertThat(stock.getUninspectedQuantity())\n                    .isEqualByComparingTo(initialUninspected.subtract(new BigDecimal(\"2\")));\n            assertThat(stock.getPassedQuantity())\n                    .isEqualByComparingTo(initialPassed.add(new BigDecimal(\"2\")));\n        }\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter28/#282-db","title":"28.2 \u6255\u51fa\u696d\u52d9\u306e DB \u8a2d\u8a08","text":""},{"location":"article/part4/chapter28/#_7","title":"\u6255\u51fa\u696d\u52d9\u306e\u6d41\u308c","text":"<p>\u6255\u51fa\u696d\u52d9\u306f\u3001\u88fd\u9020\u306b\u5fc5\u8981\u306a\u6750\u6599\u3092\u5009\u5eab\u304b\u3089\u88fd\u9020\u30e9\u30a4\u30f3\u3078\u4f9b\u7d66\u3059\u308b\u696d\u52d9\u3067\u3059\u3002</p> <p></p>"},{"location":"article/part4/chapter28/#_8","title":"\u6255\u51fa\u6307\u793a\u30fb\u6255\u51fa\u30c7\u30fc\u30bf\u306e\u30b9\u30ad\u30fc\u30de\u8a2d\u8a08","text":"DDL: \u6255\u51fa\u6307\u793a\u30c7\u30fc\u30bf\u30fb\u6255\u51fa\u30c7\u30fc\u30bf <pre><code>-- V18__create_issue_tables.sql\n\n-- \u6255\u51fa\u6307\u793a\u30c7\u30fc\u30bf\nCREATE TABLE \"\u6255\u51fa\u6307\u793a\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u6255\u51fa\u6307\u793a\u756a\u53f7\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u30aa\u30fc\u30c0\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u6255\u51fa\u6307\u793a\u65e5\" DATE NOT NULL,\n    \"\u5834\u6240\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u5099\u8003\" VARCHAR(500),\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"FK_\u6255\u51fa\u6307\u793a_\u30aa\u30fc\u30c0\" FOREIGN KEY (\"\u30aa\u30fc\u30c0\u756a\u53f7\")\n        REFERENCES \"\u30aa\u30fc\u30c0\u60c5\u5831\"(\"\u30aa\u30fc\u30c0NO\"),\n    CONSTRAINT \"FK_\u6255\u51fa\u6307\u793a_\u5834\u6240\" FOREIGN KEY (\"\u5834\u6240\u30b3\u30fc\u30c9\")\n        REFERENCES \"\u5834\u6240\u30de\u30b9\u30bf\"(\"\u5834\u6240\u30b3\u30fc\u30c9\")\n);\n\nCOMMENT ON TABLE \"\u6255\u51fa\u6307\u793a\u30c7\u30fc\u30bf\" IS '\u6255\u51fa\u6307\u793a\u30c7\u30fc\u30bf';\n\n-- \u6255\u51fa\u6307\u793a\u660e\u7d30\u30c7\u30fc\u30bf\nCREATE TABLE \"\u6255\u51fa\u6307\u793a\u660e\u7d30\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u6255\u51fa\u6307\u793a\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u6255\u51fa\u884c\u756a\u53f7\" INT NOT NULL,\n    \"\u54c1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u5de5\u9806\" INT NOT NULL,\n    \"\u6255\u51fa\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"UK_\u6255\u51fa\u6307\u793a\u660e\u7d30\" UNIQUE (\"\u6255\u51fa\u6307\u793a\u756a\u53f7\", \"\u6255\u51fa\u884c\u756a\u53f7\"),\n    CONSTRAINT \"FK_\u6255\u51fa\u6307\u793a\u660e\u7d30_\u6255\u51fa\u6307\u793a\" FOREIGN KEY (\"\u6255\u51fa\u6307\u793a\u756a\u53f7\")\n        REFERENCES \"\u6255\u51fa\u6307\u793a\u30c7\u30fc\u30bf\"(\"\u6255\u51fa\u6307\u793a\u756a\u53f7\"),\n    CONSTRAINT \"FK_\u6255\u51fa\u6307\u793a\u660e\u7d30_\u54c1\u76ee\" FOREIGN KEY (\"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n        REFERENCES \"\u54c1\u76ee\u30de\u30b9\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n);\n\nCOMMENT ON TABLE \"\u6255\u51fa\u6307\u793a\u660e\u7d30\u30c7\u30fc\u30bf\" IS '\u6255\u51fa\u6307\u793a\u660e\u7d30\u30c7\u30fc\u30bf';\n\n-- \u6255\u51fa\u30c7\u30fc\u30bf\nCREATE TABLE \"\u6255\u51fa\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u6255\u51fa\u756a\u53f7\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u5de5\u9806\" INT NOT NULL,\n    \"\u5834\u6240\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u6255\u51fa\u65e5\" DATE NOT NULL,\n    \"\u6255\u51fa\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"FK_\u6255\u51fa_\u5834\u6240\" FOREIGN KEY (\"\u5834\u6240\u30b3\u30fc\u30c9\")\n        REFERENCES \"\u5834\u6240\u30de\u30b9\u30bf\"(\"\u5834\u6240\u30b3\u30fc\u30c9\")\n);\n\nCOMMENT ON TABLE \"\u6255\u51fa\u30c7\u30fc\u30bf\" IS '\u6255\u51fa\u30c7\u30fc\u30bf';\n\n-- \u6255\u51fa\u660e\u7d30\u30c7\u30fc\u30bf\nCREATE TABLE \"\u6255\u51fa\u660e\u7d30\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u6255\u51fa\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u6255\u51fa\u884c\u756a\u53f7\" INT NOT NULL,\n    \"\u54c1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u6255\u51fa\u6570\" DECIMAL(15, 2) NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"UK_\u6255\u51fa\u660e\u7d30\" UNIQUE (\"\u6255\u51fa\u756a\u53f7\", \"\u6255\u51fa\u884c\u756a\u53f7\"),\n    CONSTRAINT \"FK_\u6255\u51fa\u660e\u7d30_\u6255\u51fa\" FOREIGN KEY (\"\u6255\u51fa\u756a\u53f7\")\n        REFERENCES \"\u6255\u51fa\u30c7\u30fc\u30bf\"(\"\u6255\u51fa\u756a\u53f7\"),\n    CONSTRAINT \"FK_\u6255\u51fa\u660e\u7d30_\u54c1\u76ee\" FOREIGN KEY (\"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n        REFERENCES \"\u54c1\u76ee\u30de\u30b9\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n);\n\nCOMMENT ON TABLE \"\u6255\u51fa\u660e\u7d30\u30c7\u30fc\u30bf\" IS '\u6255\u51fa\u660e\u7d30\u30c7\u30fc\u30bf';\n\nCREATE INDEX \"IDX_\u6255\u51fa\u6307\u793a_\u30aa\u30fc\u30c0\" ON \"\u6255\u51fa\u6307\u793a\u30c7\u30fc\u30bf\" (\"\u30aa\u30fc\u30c0\u756a\u53f7\");\nCREATE INDEX \"IDX_\u6255\u51fa\u6307\u793a_\u5834\u6240\" ON \"\u6255\u51fa\u6307\u793a\u30c7\u30fc\u30bf\" (\"\u5834\u6240\u30b3\u30fc\u30c9\");\nCREATE INDEX \"IDX_\u6255\u51fa_\u4f5c\u696d\u6307\u793a\" ON \"\u6255\u51fa\u30c7\u30fc\u30bf\" (\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\");\n</code></pre>"},{"location":"article/part4/chapter28/#java_1","title":"Java \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u5b9a\u7fa9\uff08\u6255\u51fa\uff09","text":"Entity: IssueInstruction\u30fbIssueInstructionDetail <pre><code>// src/main/java/com/example/production/domain/model/inventory/IssueInstruction.java\npackage com.example.production.domain.model.inventory;\n\nimport lombok.*;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.List;\n\n/**\n * \u6255\u51fa\u6307\u793a\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class IssueInstruction {\n    private Long id;\n    private String instructionNumber;\n    private String orderNumber;\n    private LocalDate instructionDate;\n    private String locationCode;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n\n    private List&lt;IssueInstructionDetail&gt; details;\n}\n</code></pre> <pre><code>// src/main/java/com/example/production/domain/model/inventory/IssueInstructionDetail.java\npackage com.example.production.domain.model.inventory;\n\nimport lombok.*;\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\n\n/**\n * \u6255\u51fa\u6307\u793a\u660e\u7d30\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class IssueInstructionDetail {\n    private Long id;\n    private String instructionNumber;\n    private Integer lineNumber;\n    private String itemCode;\n    private Integer routingSequence;\n    private BigDecimal issueQuantity;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n}\n</code></pre> Entity: Issue\u30fbIssueDetail <pre><code>// src/main/java/com/example/production/domain/model/inventory/Issue.java\npackage com.example.production.domain.model.inventory;\n\nimport lombok.*;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.List;\n\n/**\n * \u6255\u51fa\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Issue {\n    private Long id;\n    private String issueNumber;\n    private String workOrderNumber;\n    private Integer routingSequence;\n    private String locationCode;\n    private LocalDate issueDate;\n    private String issuerCode;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n\n    private List&lt;IssueDetail&gt; details;\n}\n</code></pre> <pre><code>// src/main/java/com/example/production/domain/model/inventory/IssueDetail.java\npackage com.example.production.domain.model.inventory;\n\nimport lombok.*;\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\n\n/**\n * \u6255\u51fa\u660e\u7d30\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class IssueDetail {\n    private Long id;\n    private String issueNumber;\n    private Integer lineNumber;\n    private String itemCode;\n    private BigDecimal issueQuantity;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n}\n</code></pre>"},{"location":"article/part4/chapter28/#_9","title":"\u6255\u51fa\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":"Service: IssueService <pre><code>// src/main/java/com/example/production/application/service/IssueService.java\npackage com.example.production.application.service;\n\nimport com.example.production.domain.model.inventory.*;\nimport com.example.production.infrastructure.persistence.mapper.*;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.time.Year;\nimport java.util.List;\nimport java.util.stream.IntStream;\n\n/**\n * \u6255\u51fa\u30b5\u30fc\u30d3\u30b9\n */\n@Service\n@RequiredArgsConstructor\npublic class IssueService {\n\n    private final IssueInstructionMapper instructionMapper;\n    private final IssueMapper issueMapper;\n    private final InventoryService inventoryService;\n\n    /**\n     * \u6255\u51fa\u6307\u793a\u3092\u4f5c\u6210\u3059\u308b\n     */\n    @Transactional\n    public IssueInstruction createIssueInstruction(IssueInstructionRequest request) {\n        String instructionNumber = generateInstructionNumber();\n\n        IssueInstruction instruction = IssueInstruction.builder()\n                .instructionNumber(instructionNumber)\n                .orderNumber(request.getOrderNumber())\n                .instructionDate(request.getInstructionDate())\n                .locationCode(request.getLocationCode())\n                .build();\n\n        instructionMapper.insert(instruction);\n\n        List&lt;IssueInstructionDetail&gt; details = IntStream.range(0, request.getDetails().size())\n                .mapToObj(i -&gt; {\n                    IssueInstructionDetailRequest detailReq = request.getDetails().get(i);\n                    return IssueInstructionDetail.builder()\n                            .instructionNumber(instructionNumber)\n                            .lineNumber(i + 1)\n                            .itemCode(detailReq.getItemCode())\n                            .routingSequence(detailReq.getRoutingSequence())\n                            .issueQuantity(detailReq.getIssueQuantity())\n                            .build();\n                })\n                .toList();\n\n        details.forEach(instructionMapper::insertDetail);\n\n        instruction.setDetails(details);\n        return instruction;\n    }\n\n    /**\n     * \u6255\u51fa\u3092\u5b9f\u884c\u3059\u308b\n     */\n    @Transactional\n    public Issue executeIssue(IssueExecuteRequest request) {\n        String locationCode = request.getLocationCode();\n\n        // \u5728\u5eab\u30c1\u30a7\u30c3\u30af\n        for (IssueDetailRequest detail : request.getDetails()) {\n            Stock stock = inventoryService.getStock(locationCode, detail.getItemCode());\n            if (stock.getPassedQuantity().compareTo(detail.getIssueQuantity()) &lt; 0) {\n                throw new InsufficientStockException(\"\u5728\u5eab\u304c\u4e0d\u8db3\u3057\u3066\u3044\u307e\u3059: \" + detail.getItemCode());\n            }\n        }\n\n        String issueNumber = generateIssueNumber();\n\n        Issue issue = Issue.builder()\n                .issueNumber(issueNumber)\n                .workOrderNumber(request.getWorkOrderNumber())\n                .routingSequence(request.getRoutingSequence())\n                .locationCode(locationCode)\n                .issueDate(request.getIssueDate())\n                .issuerCode(request.getIssuerCode())\n                .build();\n\n        issueMapper.insert(issue);\n\n        List&lt;IssueDetail&gt; details = IntStream.range(0, request.getDetails().size())\n                .mapToObj(i -&gt; {\n                    IssueDetailRequest detailReq = request.getDetails().get(i);\n                    return IssueDetail.builder()\n                            .issueNumber(issueNumber)\n                            .lineNumber(i + 1)\n                            .itemCode(detailReq.getItemCode())\n                            .issueQuantity(detailReq.getIssueQuantity())\n                            .build();\n                })\n                .toList();\n\n        details.forEach(issueMapper::insertDetail);\n\n        // \u5728\u5eab\u3092\u6e1b\u5c11\n        for (IssueDetailRequest detail : request.getDetails()) {\n            inventoryService.decreaseStock(StockChangeRequest.builder()\n                    .locationCode(locationCode)\n                    .itemCode(detail.getItemCode())\n                    .quantity(detail.getIssueQuantity())\n                    .stockStatus(StockStatus.PASSED)\n                    .build());\n        }\n\n        issue.setDetails(details);\n        return issue;\n    }\n\n    private String generateInstructionNumber() {\n        int year = Year.now().getValue();\n        long count = instructionMapper.countByYear(year);\n        return String.format(\"IS-%d-%04d\", year, count + 1);\n    }\n\n    private String generateIssueNumber() {\n        int year = Year.now().getValue();\n        long count = issueMapper.countByYear(year);\n        return String.format(\"PO-%d-%04d\", year, count + 1);\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter28/#283-db","title":"28.3 \u68da\u5378\u696d\u52d9\u306e DB \u8a2d\u8a08","text":""},{"location":"article/part4/chapter28/#_10","title":"\u68da\u5378\u696d\u52d9\u306e\u6d41\u308c","text":"<p>\u68da\u5378\u696d\u52d9\u306f\u3001\u5e33\u7c3f\u5728\u5eab\u3068\u5b9f\u969b\u306e\u5728\u5eab\u3092\u7167\u5408\u3057\u3001\u5dee\u7570\u3092\u8abf\u6574\u3059\u308b\u696d\u52d9\u3067\u3059\u3002</p> <p></p>"},{"location":"article/part4/chapter28/#_11","title":"\u68da\u5378\u30c7\u30fc\u30bf\u306e\u30b9\u30ad\u30fc\u30de\u8a2d\u8a08","text":"DDL: \u68da\u5378\u30c7\u30fc\u30bf\u30fb\u5728\u5eab\u8abf\u6574\u30c7\u30fc\u30bf <pre><code>-- V19__create_stocktaking_tables.sql\n\n-- \u68da\u5378\u30b9\u30c6\u30fc\u30bf\u30b9 ENUM\nCREATE TYPE \"\u68da\u5378\u30b9\u30c6\u30fc\u30bf\u30b9\" AS ENUM ('\u767a\u884c\u6e08', '\u5165\u529b\u6e08', '\u78ba\u5b9a');\n\n-- \u68da\u5378\u30c7\u30fc\u30bf\nCREATE TABLE \"\u68da\u5378\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u68da\u5378\u756a\u53f7\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u5834\u6240\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u68da\u5378\u65e5\" DATE NOT NULL,\n    \"\u30b9\u30c6\u30fc\u30bf\u30b9\" \"\u68da\u5378\u30b9\u30c6\u30fc\u30bf\u30b9\" DEFAULT '\u767a\u884c\u6e08' NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL\n);\n\nCOMMENT ON TABLE \"\u68da\u5378\u30c7\u30fc\u30bf\" IS '\u68da\u5378\u30c7\u30fc\u30bf';\n\n-- \u68da\u5378\u660e\u7d30\u30c7\u30fc\u30bf\nCREATE TABLE \"\u68da\u5378\u660e\u7d30\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u68da\u5378\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u68da\u5378\u884c\u756a\u53f7\" INT NOT NULL,\n    \"\u54c1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u5e33\u7c3f\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u5b9f\u68da\u6570\u91cf\" DECIMAL(15, 2),\n    \"\u5dee\u7570\u6570\u91cf\" DECIMAL(15, 2),\n    CONSTRAINT \"UK_\u68da\u5378\u660e\u7d30\" UNIQUE (\"\u68da\u5378\u756a\u53f7\", \"\u68da\u5378\u884c\u756a\u53f7\"),\n    CONSTRAINT \"FK_\u68da\u5378\u660e\u7d30_\u68da\u5378\" FOREIGN KEY (\"\u68da\u5378\u756a\u53f7\")\n        REFERENCES \"\u68da\u5378\u30c7\u30fc\u30bf\"(\"\u68da\u5378\u756a\u53f7\"),\n    CONSTRAINT \"FK_\u68da\u5378\u660e\u7d30_\u54c1\u76ee\" FOREIGN KEY (\"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n        REFERENCES \"\u54c1\u76ee\u30de\u30b9\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n);\n\nCOMMENT ON TABLE \"\u68da\u5378\u660e\u7d30\u30c7\u30fc\u30bf\" IS '\u68da\u5378\u660e\u7d30\u30c7\u30fc\u30bf';\n\n-- \u5728\u5eab\u8abf\u6574\u30c7\u30fc\u30bf\nCREATE TABLE \"\u5728\u5eab\u8abf\u6574\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u5728\u5eab\u8abf\u6574\u756a\u53f7\" VARCHAR(30) UNIQUE NOT NULL,\n    \"\u68da\u5378\u756a\u53f7\" VARCHAR(20),\n    \"\u54c1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u5834\u6240\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u8abf\u6574\u65e5\" DATE NOT NULL,\n    \"\u8abf\u6574\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u8abf\u6574\u6570\" DECIMAL(15, 2) NOT NULL,\n    \"\u7406\u7531\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"FK_\u5728\u5eab\u8abf\u6574_\u68da\u5378\" FOREIGN KEY (\"\u68da\u5378\u756a\u53f7\")\n        REFERENCES \"\u68da\u5378\u30c7\u30fc\u30bf\"(\"\u68da\u5378\u756a\u53f7\"),\n    CONSTRAINT \"FK_\u5728\u5eab\u8abf\u6574_\u54c1\u76ee\" FOREIGN KEY (\"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n        REFERENCES \"\u54c1\u76ee\u30de\u30b9\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n);\n\nCOMMENT ON TABLE \"\u5728\u5eab\u8abf\u6574\u30c7\u30fc\u30bf\" IS '\u5728\u5eab\u8abf\u6574\u30c7\u30fc\u30bf';\nCOMMENT ON COLUMN \"\u5728\u5eab\u8abf\u6574\u30c7\u30fc\u30bf\".\"\u8abf\u6574\u6570\" IS '\u8abf\u6574\u6570\uff08+/-\uff09';\n\nCREATE INDEX \"IDX_\u68da\u5378_\u5834\u6240\" ON \"\u68da\u5378\u30c7\u30fc\u30bf\" (\"\u5834\u6240\u30b3\u30fc\u30c9\");\nCREATE INDEX \"IDX_\u68da\u5378_\u65e5\u4ed8\" ON \"\u68da\u5378\u30c7\u30fc\u30bf\" (\"\u68da\u5378\u65e5\");\nCREATE INDEX \"IDX_\u5728\u5eab\u8abf\u6574_\u68da\u5378\" ON \"\u5728\u5eab\u8abf\u6574\u30c7\u30fc\u30bf\" (\"\u68da\u5378\u756a\u53f7\");\n</code></pre>"},{"location":"article/part4/chapter28/#java_2","title":"Java \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u5b9a\u7fa9\uff08\u68da\u5378\uff09","text":"Enum: StocktakingStatus <pre><code>// src/main/java/com/example/production/domain/model/inventory/StocktakingStatus.java\npackage com.example.production.domain.model.inventory;\n\n/**\n * \u68da\u5378\u30b9\u30c6\u30fc\u30bf\u30b9\n */\npublic enum StocktakingStatus {\n    ISSUED(\"\u767a\u884c\u6e08\"),\n    ENTERED(\"\u5165\u529b\u6e08\"),\n    CONFIRMED(\"\u78ba\u5b9a\");\n\n    private final String displayName;\n\n    StocktakingStatus(String displayName) {\n        this.displayName = displayName;\n    }\n\n    public String getDisplayName() {\n        return displayName;\n    }\n\n    public static StocktakingStatus fromDisplayName(String displayName) {\n        for (StocktakingStatus status : values()) {\n            if (status.displayName.equals(displayName)) {\n                return status;\n            }\n        }\n        throw new IllegalArgumentException(\"Unknown display name: \" + displayName);\n    }\n}\n</code></pre> TypeHandler: StocktakingStatusTypeHandler <pre><code>// src/main/java/com/example/production/infrastructure/persistence/StocktakingStatusTypeHandler.java\npackage com.example.production.infrastructure.persistence;\n\nimport com.example.production.domain.model.inventory.StocktakingStatus;\nimport org.apache.ibatis.type.BaseTypeHandler;\nimport org.apache.ibatis.type.JdbcType;\nimport org.apache.ibatis.type.MappedTypes;\n\nimport java.sql.CallableStatement;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\n\n/**\n * \u68da\u5378\u30b9\u30c6\u30fc\u30bf\u30b9\u306eTypeHandler\n */\n@MappedTypes(StocktakingStatus.class)\npublic class StocktakingStatusTypeHandler extends BaseTypeHandler&lt;StocktakingStatus&gt; {\n\n    @Override\n    public void setNonNullParameter(PreparedStatement ps, int i,\n                                    StocktakingStatus parameter, JdbcType jdbcType) throws SQLException {\n        ps.setString(i, parameter.getDisplayName());\n    }\n\n    @Override\n    public StocktakingStatus getNullableResult(ResultSet rs, String columnName) throws SQLException {\n        String value = rs.getString(columnName);\n        return value == null ? null : StocktakingStatus.fromDisplayName(value);\n    }\n\n    @Override\n    public StocktakingStatus getNullableResult(ResultSet rs, int columnIndex) throws SQLException {\n        String value = rs.getString(columnIndex);\n        return value == null ? null : StocktakingStatus.fromDisplayName(value);\n    }\n\n    @Override\n    public StocktakingStatus getNullableResult(CallableStatement cs, int columnIndex) throws SQLException {\n        String value = cs.getString(columnIndex);\n        return value == null ? null : StocktakingStatus.fromDisplayName(value);\n    }\n}\n</code></pre> Entity: Stocktaking\u30fbStocktakingDetail\u30fbStockAdjustment <pre><code>// src/main/java/com/example/production/domain/model/inventory/Stocktaking.java\npackage com.example.production.domain.model.inventory;\n\nimport lombok.*;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.List;\n\n/**\n * \u68da\u5378\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Stocktaking {\n    private Long id;\n    private String stocktakingNumber;\n    private String locationCode;\n    private LocalDate stocktakingDate;\n    private StocktakingStatus status;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n\n    private List&lt;StocktakingDetail&gt; details;\n}\n</code></pre> <pre><code>// src/main/java/com/example/production/domain/model/inventory/StocktakingDetail.java\npackage com.example.production.domain.model.inventory;\n\nimport lombok.*;\nimport java.math.BigDecimal;\n\n/**\n * \u68da\u5378\u660e\u7d30\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class StocktakingDetail {\n    private Long id;\n    private String stocktakingNumber;\n    private Integer lineNumber;\n    private String itemCode;\n    private BigDecimal bookQuantity;\n    private BigDecimal actualQuantity;\n    private BigDecimal differenceQuantity;\n}\n</code></pre> <pre><code>// src/main/java/com/example/production/domain/model/inventory/StockAdjustment.java\npackage com.example.production.domain.model.inventory;\n\nimport lombok.*;\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n/**\n * \u5728\u5eab\u8abf\u6574\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class StockAdjustment {\n    private Long id;\n    private String adjustmentNumber;\n    private String stocktakingNumber;\n    private String itemCode;\n    private String locationCode;\n    private LocalDate adjustmentDate;\n    private String adjusterCode;\n    private BigDecimal adjustmentQuantity;\n    private String reasonCode;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n}\n</code></pre>"},{"location":"article/part4/chapter28/#_12","title":"\u68da\u5378\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":"Service: StocktakingService <pre><code>// src/main/java/com/example/production/application/service/StocktakingService.java\npackage com.example.production.application.service;\n\nimport com.example.production.domain.model.inventory.*;\nimport com.example.production.infrastructure.persistence.mapper.*;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.Year;\nimport java.util.List;\nimport java.util.UUID;\nimport java.util.stream.IntStream;\n\n/**\n * \u68da\u5378\u30b5\u30fc\u30d3\u30b9\n */\n@Service\n@RequiredArgsConstructor\npublic class StocktakingService {\n\n    private final StocktakingMapper stocktakingMapper;\n    private final StockMapper stockMapper;\n    private final StockAdjustmentMapper adjustmentMapper;\n\n    /**\n     * \u68da\u5378\u8868\u3092\u767a\u884c\u3059\u308b\n     */\n    @Transactional\n    public Stocktaking issueStocktakingSheet(StocktakingIssueRequest request) {\n        List&lt;Stock&gt; stocks = stockMapper.findByLocation(request.getLocationCode());\n\n        String stocktakingNumber = generateStocktakingNumber();\n\n        Stocktaking stocktaking = Stocktaking.builder()\n                .stocktakingNumber(stocktakingNumber)\n                .locationCode(request.getLocationCode())\n                .stocktakingDate(request.getStocktakingDate())\n                .status(StocktakingStatus.ISSUED)\n                .build();\n\n        stocktakingMapper.insert(stocktaking);\n\n        List&lt;StocktakingDetail&gt; details = IntStream.range(0, stocks.size())\n                .mapToObj(i -&gt; {\n                    Stock stock = stocks.get(i);\n                    return StocktakingDetail.builder()\n                            .stocktakingNumber(stocktakingNumber)\n                            .lineNumber(i + 1)\n                            .itemCode(stock.getItemCode())\n                            .bookQuantity(stock.getStockQuantity())\n                            .build();\n                })\n                .toList();\n\n        details.forEach(stocktakingMapper::insertDetail);\n\n        stocktaking.setDetails(details);\n        return stocktaking;\n    }\n\n    /**\n     * \u5b9f\u68da\u6570\u91cf\u3092\u5165\u529b\u3059\u308b\n     */\n    @Transactional\n    public Stocktaking inputActualCount(ActualCountInputRequest request) {\n        Stocktaking stocktaking = stocktakingMapper.findByStocktakingNumber(request.getStocktakingNumber());\n        if (stocktaking == null) {\n            throw new IllegalArgumentException(\"\u68da\u5378\u30c7\u30fc\u30bf\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\");\n        }\n\n        List&lt;StocktakingDetail&gt; existingDetails = stocktakingMapper.findDetailsByStocktakingNumber(\n                request.getStocktakingNumber());\n\n        for (ActualCountDetailRequest inputDetail : request.getDetails()) {\n            existingDetails.stream()\n                    .filter(d -&gt; d.getItemCode().equals(inputDetail.getItemCode()))\n                    .findFirst()\n                    .ifPresent(detail -&gt; {\n                        BigDecimal difference = inputDetail.getActualQuantity()\n                                .subtract(detail.getBookQuantity());\n\n                        stocktakingMapper.updateDetail(\n                                detail.getId(),\n                                inputDetail.getActualQuantity(),\n                                difference\n                        );\n                    });\n        }\n\n        stocktakingMapper.updateStatus(request.getStocktakingNumber(), StocktakingStatus.ENTERED);\n\n        return stocktakingMapper.findByStocktakingNumberWithDetails(request.getStocktakingNumber());\n    }\n\n    /**\n     * \u68da\u5378\u3092\u78ba\u5b9a\u3059\u308b\n     */\n    @Transactional\n    public Stocktaking confirmStocktaking(StocktakingConfirmRequest request) {\n        Stocktaking stocktaking = stocktakingMapper.findByStocktakingNumberWithDetails(\n                request.getStocktakingNumber());\n\n        if (stocktaking == null) {\n            throw new IllegalArgumentException(\"\u68da\u5378\u30c7\u30fc\u30bf\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\");\n        }\n\n        // \u5dee\u7570\u304c\u3042\u308b\u660e\u7d30\u306b\u3064\u3044\u3066\u5728\u5eab\u8abf\u6574\n        for (StocktakingDetail detail : stocktaking.getDetails()) {\n            BigDecimal difference = detail.getDifferenceQuantity();\n\n            if (difference != null &amp;&amp; difference.compareTo(BigDecimal.ZERO) != 0) {\n                // \u5728\u5eab\u3092\u8abf\u6574\n                Stock stock = stockMapper.findByLocationAndItem(\n                        stocktaking.getLocationCode(), detail.getItemCode());\n\n                stock.setStockQuantity(stock.getStockQuantity().add(difference));\n                stock.setPassedQuantity(stock.getPassedQuantity().add(difference));\n                stockMapper.update(stock);\n\n                // \u5728\u5eab\u8abf\u6574\u5c65\u6b74\u3092\u8a18\u9332\n                StockAdjustment adjustment = StockAdjustment.builder()\n                        .adjustmentNumber(UUID.randomUUID().toString().substring(0, 30))\n                        .stocktakingNumber(request.getStocktakingNumber())\n                        .itemCode(detail.getItemCode())\n                        .locationCode(stocktaking.getLocationCode())\n                        .adjustmentDate(LocalDate.now())\n                        .adjusterCode(request.getAdjusterCode())\n                        .adjustmentQuantity(difference)\n                        .reasonCode(request.getAdjustmentReasonCode())\n                        .build();\n\n                adjustmentMapper.insert(adjustment);\n            }\n        }\n\n        // \u68da\u5378\u3092\u78ba\u5b9a\n        stocktakingMapper.updateStatus(request.getStocktakingNumber(), StocktakingStatus.CONFIRMED);\n\n        return stocktakingMapper.findByStocktakingNumberWithDetails(request.getStocktakingNumber());\n    }\n\n    private String generateStocktakingNumber() {\n        int year = Year.now().getValue();\n        long count = stocktakingMapper.countByYear(year);\n        return String.format(\"ST-%d-%04d\", year, count + 1);\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter28/#mybatis-mapper_1","title":"MyBatis Mapper\uff08\u68da\u5378\uff09","text":"Mapper XML: StocktakingMapper.xml <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.production.infrastructure.persistence.mapper.StocktakingMapper\"&gt;\n\n    &lt;resultMap id=\"StocktakingResultMap\" type=\"com.example.production.domain.model.inventory.Stocktaking\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"stocktakingNumber\" column=\"\u68da\u5378\u756a\u53f7\"/&gt;\n        &lt;result property=\"locationCode\" column=\"\u5834\u6240\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"stocktakingDate\" column=\"\u68da\u5378\u65e5\"/&gt;\n        &lt;result property=\"status\" column=\"\u30b9\u30c6\u30fc\u30bf\u30b9\"\n                typeHandler=\"com.example.production.infrastructure.persistence.StocktakingStatusTypeHandler\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;resultMap id=\"StocktakingWithDetailsResultMap\" type=\"com.example.production.domain.model.inventory.Stocktaking\"\n               extends=\"StocktakingResultMap\"&gt;\n        &lt;collection property=\"details\" ofType=\"com.example.production.domain.model.inventory.StocktakingDetail\"&gt;\n            &lt;id property=\"id\" column=\"detail_ID\"/&gt;\n            &lt;result property=\"stocktakingNumber\" column=\"detail_\u68da\u5378\u756a\u53f7\"/&gt;\n            &lt;result property=\"lineNumber\" column=\"\u68da\u5378\u884c\u756a\u53f7\"/&gt;\n            &lt;result property=\"itemCode\" column=\"detail_\u54c1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n            &lt;result property=\"bookQuantity\" column=\"\u5e33\u7c3f\u6570\u91cf\"/&gt;\n            &lt;result property=\"actualQuantity\" column=\"\u5b9f\u68da\u6570\u91cf\"/&gt;\n            &lt;result property=\"differenceQuantity\" column=\"\u5dee\u7570\u6570\u91cf\"/&gt;\n        &lt;/collection&gt;\n    &lt;/resultMap&gt;\n\n    &lt;resultMap id=\"StocktakingDetailResultMap\" type=\"com.example.production.domain.model.inventory.StocktakingDetail\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"stocktakingNumber\" column=\"\u68da\u5378\u756a\u53f7\"/&gt;\n        &lt;result property=\"lineNumber\" column=\"\u68da\u5378\u884c\u756a\u53f7\"/&gt;\n        &lt;result property=\"itemCode\" column=\"\u54c1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"bookQuantity\" column=\"\u5e33\u7c3f\u6570\u91cf\"/&gt;\n        &lt;result property=\"actualQuantity\" column=\"\u5b9f\u68da\u6570\u91cf\"/&gt;\n        &lt;result property=\"differenceQuantity\" column=\"\u5dee\u7570\u6570\u91cf\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;select id=\"findByStocktakingNumber\" resultMap=\"StocktakingResultMap\"&gt;\n        SELECT * FROM \"\u68da\u5378\u30c7\u30fc\u30bf\"\n        WHERE \"\u68da\u5378\u756a\u53f7\" = #{stocktakingNumber}\n    &lt;/select&gt;\n\n    &lt;select id=\"findByStocktakingNumberWithDetails\" resultMap=\"StocktakingWithDetailsResultMap\"&gt;\n        SELECT\n            s.\"ID\", s.\"\u68da\u5378\u756a\u53f7\", s.\"\u5834\u6240\u30b3\u30fc\u30c9\", s.\"\u68da\u5378\u65e5\", s.\"\u30b9\u30c6\u30fc\u30bf\u30b9\",\n            s.\"\u4f5c\u6210\u65e5\u6642\", s.\"\u66f4\u65b0\u65e5\u6642\",\n            d.\"ID\" AS detail_ID, d.\"\u68da\u5378\u756a\u53f7\" AS \"detail_\u68da\u5378\u756a\u53f7\",\n            d.\"\u68da\u5378\u884c\u756a\u53f7\", d.\"\u54c1\u76ee\u30b3\u30fc\u30c9\" AS \"detail_\u54c1\u76ee\u30b3\u30fc\u30c9\",\n            d.\"\u5e33\u7c3f\u6570\u91cf\", d.\"\u5b9f\u68da\u6570\u91cf\", d.\"\u5dee\u7570\u6570\u91cf\"\n        FROM \"\u68da\u5378\u30c7\u30fc\u30bf\" s\n        LEFT JOIN \"\u68da\u5378\u660e\u7d30\u30c7\u30fc\u30bf\" d ON s.\"\u68da\u5378\u756a\u53f7\" = d.\"\u68da\u5378\u756a\u53f7\"\n        WHERE s.\"\u68da\u5378\u756a\u53f7\" = #{stocktakingNumber}\n        ORDER BY d.\"\u68da\u5378\u884c\u756a\u53f7\"\n    &lt;/select&gt;\n\n    &lt;select id=\"findDetailsByStocktakingNumber\" resultMap=\"StocktakingDetailResultMap\"&gt;\n        SELECT * FROM \"\u68da\u5378\u660e\u7d30\u30c7\u30fc\u30bf\"\n        WHERE \"\u68da\u5378\u756a\u53f7\" = #{stocktakingNumber}\n        ORDER BY \"\u68da\u5378\u884c\u756a\u53f7\"\n    &lt;/select&gt;\n\n    &lt;select id=\"countByYear\" resultType=\"long\"&gt;\n        SELECT COUNT(*) FROM \"\u68da\u5378\u30c7\u30fc\u30bf\"\n        WHERE \"\u68da\u5378\u756a\u53f7\" LIKE 'ST-' || #{year} || '-%'\n    &lt;/select&gt;\n\n    &lt;insert id=\"insert\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u68da\u5378\u30c7\u30fc\u30bf\" (\n            \"\u68da\u5378\u756a\u53f7\", \"\u5834\u6240\u30b3\u30fc\u30c9\", \"\u68da\u5378\u65e5\", \"\u30b9\u30c6\u30fc\u30bf\u30b9\"\n        ) VALUES (\n            #{stocktakingNumber}, #{locationCode}, #{stocktakingDate},\n            #{status, typeHandler=com.example.production.infrastructure.persistence.StocktakingStatusTypeHandler}\n        )\n    &lt;/insert&gt;\n\n    &lt;insert id=\"insertDetail\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u68da\u5378\u660e\u7d30\u30c7\u30fc\u30bf\" (\n            \"\u68da\u5378\u756a\u53f7\", \"\u68da\u5378\u884c\u756a\u53f7\", \"\u54c1\u76ee\u30b3\u30fc\u30c9\", \"\u5e33\u7c3f\u6570\u91cf\"\n        ) VALUES (\n            #{stocktakingNumber}, #{lineNumber}, #{itemCode}, #{bookQuantity}\n        )\n    &lt;/insert&gt;\n\n    &lt;update id=\"updateDetail\"&gt;\n        UPDATE \"\u68da\u5378\u660e\u7d30\u30c7\u30fc\u30bf\"\n        SET \"\u5b9f\u68da\u6570\u91cf\" = #{actualQuantity},\n            \"\u5dee\u7570\u6570\u91cf\" = #{differenceQuantity}\n        WHERE \"ID\" = #{id}\n    &lt;/update&gt;\n\n    &lt;update id=\"updateStatus\"&gt;\n        UPDATE \"\u68da\u5378\u30c7\u30fc\u30bf\"\n        SET \"\u30b9\u30c6\u30fc\u30bf\u30b9\" = #{status, typeHandler=com.example.production.infrastructure.persistence.StocktakingStatusTypeHandler},\n            \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP\n        WHERE \"\u68da\u5378\u756a\u53f7\" = #{stocktakingNumber}\n    &lt;/update&gt;\n\n&lt;/mapper&gt;\n</code></pre>"},{"location":"article/part4/chapter28/#_13","title":"\u307e\u3068\u3081","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u5728\u5eab\u7ba1\u7406\u306e\u8a2d\u8a08\u306b\u3064\u3044\u3066\u5b66\u3073\u307e\u3057\u305f\u3002</p>"},{"location":"article/part4/chapter28/#_14","title":"\u5b66\u3093\u3060\u3053\u3068","text":"<ol> <li>\u5728\u5eab\u60c5\u5831\u306e\u8a2d\u8a08</li> <li>\u5834\u6240\u30b3\u30fc\u30c9 \u00d7 \u54c1\u76ee\u30b3\u30fc\u30c9\u3067\u306e\u4e00\u610f\u7ba1\u7406</li> <li>\u5728\u5eab\u72b6\u614b\uff08\u5408\u683c\u30fb\u4e0d\u826f\u30fb\u672a\u691c\u67fb\uff09\u3054\u3068\u306e\u6570\u91cf\u7ba1\u7406</li> <li> <p>\u5728\u5eab\u5897\u6e1b\u30fb\u72b6\u614b\u5909\u66f4\u306e\u5b9f\u88c5</p> </li> <li> <p>\u6255\u51fa\u696d\u52d9\u306e\u8a2d\u8a08</p> </li> <li>\u6255\u51fa\u6307\u793a\u304b\u3089\u6255\u51fa\u5b9f\u884c\u307e\u3067\u306e\u30d5\u30ed\u30fc</li> <li>BOM \u3068\u306e\u9023\u643a\u306b\u3088\u308b\u81ea\u52d5\u5c55\u958b</li> <li> <p>\u5728\u5eab\u3068\u306e\u9023\u52d5</p> </li> <li> <p>\u68da\u5378\u696d\u52d9\u306e\u8a2d\u8a08</p> </li> <li>\u68da\u5378\u8868\u767a\u884c\u304b\u3089\u78ba\u5b9a\u307e\u3067\u306e\u30d5\u30ed\u30fc</li> <li>\u5e33\u7c3f\u5728\u5eab\u3068\u5b9f\u68da\u5728\u5eab\u306e\u5dee\u7570\u5206\u6790</li> <li>\u5728\u5eab\u8abf\u6574\u5c65\u6b74\u306e\u8a18\u9332</li> </ol>"},{"location":"article/part4/chapter28/#er-28","title":"ER \u56f3\uff08\u7b2c28\u7ae0\uff09","text":""},{"location":"article/part4/chapter28/#28_1","title":"\u30c6\u30fc\u30d6\u30eb\u4e00\u89a7\uff08\u7b2c28\u7ae0\uff09","text":"\u30c6\u30fc\u30d6\u30eb\u540d\uff08\u65e5\u672c\u8a9e\uff09 Java \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 \u8aac\u660e \u5834\u6240\u30de\u30b9\u30bf Location \u5834\u6240\uff08\u5009\u5eab\u30fb\u30e9\u30a4\u30f3\u7b49\uff09\u306e\u5b9a\u7fa9 \u5009\u5eab\u30de\u30b9\u30bf Warehouse \u5009\u5eab\u306e\u5b9a\u7fa9 \u5728\u5eab\u60c5\u5831 Stock \u5834\u6240\u00d7\u54c1\u76ee\u306e\u5728\u5eab\u6570\u91cf \u6255\u51fa\u6307\u793a\u30c7\u30fc\u30bf IssueInstruction \u6255\u51fa\u6307\u793a\u60c5\u5831 \u6255\u51fa\u6307\u793a\u660e\u7d30\u30c7\u30fc\u30bf IssueInstructionDetail \u6255\u51fa\u6307\u793a\u306e\u660e\u7d30 \u6255\u51fa\u30c7\u30fc\u30bf Issue \u6255\u51fa\u5b9f\u7e3e \u6255\u51fa\u660e\u7d30\u30c7\u30fc\u30bf IssueDetail \u6255\u51fa\u5b9f\u7e3e\u306e\u660e\u7d30 \u68da\u5378\u30c7\u30fc\u30bf Stocktaking \u68da\u5378\u30d8\u30c3\u30c0 \u68da\u5378\u660e\u7d30\u30c7\u30fc\u30bf StocktakingDetail \u68da\u5378\u660e\u7d30 \u5728\u5eab\u8abf\u6574\u30c7\u30fc\u30bf StockAdjustment \u5728\u5eab\u8abf\u6574\u5c65\u6b74"},{"location":"article/part4/chapter28/#enum-28","title":"ENUM \u4e00\u89a7\uff08\u7b2c28\u7ae0\uff09","text":"DB ENUM \u578b\uff08\u65e5\u672c\u8a9e\uff09 Java Enum \u5024 \u68da\u5378\u30b9\u30c6\u30fc\u30bf\u30b9 StocktakingStatus \u767a\u884c\u6e08\u2192ISSUED, \u5165\u529b\u6e08\u2192ENTERED, \u78ba\u5b9a\u2192CONFIRMED - StockStatus \u5408\u683c\u2192PASSED, \u4e0d\u826f\u2192DEFECTIVE, \u672a\u691c\u67fb\u2192UNINSPECTED <p>\u2190 \u7b2c27\u7ae0\uff1a\u5de5\u7a0b\u7ba1\u7406\u306e\u8a2d\u8a08 | \u7b2c29\u7ae0\uff1a\u54c1\u8cea\u7ba1\u7406\u306e\u8a2d\u8a08 \u2192</p>"},{"location":"article/part4/chapter29/","title":"\u7b2c29\u7ae0\uff1a\u54c1\u8cea\u7ba1\u7406\u306e\u8a2d\u8a08","text":""},{"location":"article/part4/chapter29/#291","title":"29.1 \u54c1\u8cea\u7ba1\u7406\u306e\u6982\u8981","text":""},{"location":"article/part4/chapter29/#_1","title":"\u54c1\u8cea\u7ba1\u7406\u306e\u76ee\u7684\u3068\u91cd\u8981\u6027","text":"<p>\u54c1\u8cea\u7ba1\u7406\u306f\u3001\u88fd\u54c1\u304c\u9867\u5ba2\u306e\u8981\u6c42\u4ed5\u69d8\u3092\u6e80\u305f\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u4fdd\u8a3c\u3059\u308b\u305f\u3081\u306e\u91cd\u8981\u306a\u696d\u52d9\u9818\u57df\u3067\u3059\u3002\u88fd\u9020\u696d\u306b\u304a\u3044\u3066\u54c1\u8cea\u7ba1\u7406\u306f\u3001\u4ee5\u4e0b\u306e\u76ee\u7684\u3067\u5b9f\u65bd\u3055\u308c\u307e\u3059\u3002</p> <p></p> <p>\u54c1\u8cea\u7ba1\u7406\u306e\u91cd\u8981\u6027\u306f\u4ee5\u4e0b\u306e\u70b9\u306b\u3042\u308a\u307e\u3059\uff1a</p> \u89b3\u70b9 \u8aac\u660e \u9867\u5ba2\u8996\u70b9 \u4e0d\u826f\u54c1\u306e\u6d41\u51fa\u306f\u9867\u5ba2\u306e\u4fe1\u983c\u3092\u5931\u3044\u3001\u30d6\u30e9\u30f3\u30c9\u4fa1\u5024\u3092\u6bc0\u640d\u3059\u308b \u30b3\u30b9\u30c8\u8996\u70b9 \u65e9\u671f\u767a\u898b\u306b\u3088\u308b\u624b\u76f4\u3057\u30b3\u30b9\u30c8\u524a\u6e1b\u3001\u5ec3\u68c4\u30ed\u30b9\u306e\u6700\u5c0f\u5316 \u6cd5\u7684\u8996\u70b9 PL \u6cd5\uff08\u88fd\u9020\u7269\u8cac\u4efb\u6cd5\uff09\u3078\u306e\u5bfe\u5fdc\u3001\u5404\u7a2e\u898f\u683c\u3078\u306e\u9069\u5408 \u7af6\u4e89\u529b\u8996\u70b9 \u9ad8\u54c1\u8cea\u306f\u5dee\u5225\u5316\u8981\u56e0\u3068\u306a\u308a\u3001\u7af6\u4e89\u512a\u4f4d\u6027\u3092\u78ba\u4fdd"},{"location":"article/part4/chapter29/#_2","title":"\u691c\u67fb\u306e\u7a2e\u985e\u3068\u4f4d\u7f6e\u3065\u3051","text":"<p>\u88fd\u9020\u30d7\u30ed\u30bb\u30b9\u306b\u304a\u3051\u308b\u691c\u67fb\u306f\u3001\u5b9f\u65bd\u30bf\u30a4\u30df\u30f3\u30b0\u306b\u3088\u3063\u3066\u4ee5\u4e0b\u306e3\u7a2e\u985e\u306b\u5206\u985e\u3055\u308c\u307e\u3059\u3002</p> <p></p> <p>\u5404\u691c\u67fb\u306e\u7279\u5fb4\u3068\u76ee\u7684\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\uff1a</p> \u691c\u67fb\u7a2e\u5225 \u30bf\u30a4\u30df\u30f3\u30b0 \u76ee\u7684 \u95a2\u9023\u30c6\u30fc\u30d6\u30eb \u53d7\u5165\u691c\u67fb \u5165\u8377\u5f8c \u8cfc\u8cb7\u54c1\u306e\u54c1\u8cea\u78ba\u8a8d\u3001\u4e0d\u826f\u54c1\u306e\u53d7\u5165\u9632\u6b62 \u53d7\u5165\u691c\u67fb\u30c7\u30fc\u30bf \u5de5\u7a0b\u5185\u691c\u67fb \u88fd\u9020\u4e2d \u88fd\u9020\u5de5\u7a0b\u3067\u306e\u54c1\u8cea\u78ba\u8a8d\u3001\u65e9\u671f\u4e0d\u826f\u767a\u898b \u5b8c\u6210\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf \u51fa\u8377\u691c\u67fb \u51fa\u8377\u524d \u6700\u7d42\u54c1\u8cea\u78ba\u8a8d\u3001\u4e0d\u826f\u54c1\u306e\u6d41\u51fa\u9632\u6b62 \u51fa\u8377\u691c\u67fb\u30c7\u30fc\u30bf"},{"location":"article/part4/chapter29/#292","title":"29.2 \u53d7\u5165\u691c\u67fb\u30fb\u5de5\u7a0b\u691c\u67fb\u30fb\u51fa\u8377\u691c\u67fb","text":""},{"location":"article/part4/chapter29/#_3","title":"\u5171\u901a\u306e\u691c\u67fb\u5224\u5b9a","text":"<p>\u3059\u3079\u3066\u306e\u691c\u67fb\u3067\u5171\u901a\u3057\u3066\u4f7f\u7528\u3059\u308b\u691c\u67fb\u5224\u5b9a\u306e\u5217\u6319\u578b\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002</p>"},{"location":"article/part4/chapter29/#enum","title":"\u691c\u67fb\u5224\u5b9a Enum","text":"InspectionJudgment.java <pre><code>// src/main/java/com/example/sms/domain/model/quality/InspectionJudgment.java\npackage com.example.sms.domain.model.quality;\n\n/**\n * \u691c\u67fb\u5224\u5b9a\n */\npublic enum InspectionJudgment {\n    PASSED(\"\u5408\u683c\"),\n    FAILED(\"\u4e0d\u5408\u683c\"),\n    HOLD(\"\u4fdd\u7559\");\n\n    private final String displayName;\n\n    InspectionJudgment(String displayName) {\n        this.displayName = displayName;\n    }\n\n    public String getDisplayName() {\n        return displayName;\n    }\n\n    public static InspectionJudgment fromDisplayName(String displayName) {\n        for (InspectionJudgment judgment : values()) {\n            if (judgment.displayName.equals(displayName)) {\n                return judgment;\n            }\n        }\n        throw new IllegalArgumentException(\"Unknown display name: \" + displayName);\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter29/#typehandler","title":"\u691c\u67fb\u5224\u5b9a TypeHandler","text":"InspectionJudgmentTypeHandler.java <pre><code>// src/main/java/com/example/sms/infrastructure/out/persistence/typehandler/InspectionJudgmentTypeHandler.java\npackage com.example.sms.infrastructure.out.persistence.typehandler;\n\nimport com.example.sms.domain.model.quality.InspectionJudgment;\nimport org.apache.ibatis.type.BaseTypeHandler;\nimport org.apache.ibatis.type.JdbcType;\nimport org.apache.ibatis.type.MappedTypes;\n\nimport java.sql.CallableStatement;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\n\n/**\n * \u691c\u67fb\u5224\u5b9a\u306eTypeHandler\n */\n@MappedTypes(InspectionJudgment.class)\npublic class InspectionJudgmentTypeHandler extends BaseTypeHandler&lt;InspectionJudgment&gt; {\n\n    @Override\n    public void setNonNullParameter(PreparedStatement ps, int i,\n                                    InspectionJudgment parameter, JdbcType jdbcType) throws SQLException {\n        ps.setString(i, parameter.getDisplayName());\n    }\n\n    @Override\n    public InspectionJudgment getNullableResult(ResultSet rs, String columnName) throws SQLException {\n        String value = rs.getString(columnName);\n        return value == null ? null : InspectionJudgment.fromDisplayName(value);\n    }\n\n    @Override\n    public InspectionJudgment getNullableResult(ResultSet rs, int columnIndex) throws SQLException {\n        String value = rs.getString(columnIndex);\n        return value == null ? null : InspectionJudgment.fromDisplayName(value);\n    }\n\n    @Override\n    public InspectionJudgment getNullableResult(CallableStatement cs, int columnIndex) throws SQLException {\n        String value = cs.getString(columnIndex);\n        return value == null ? null : InspectionJudgment.fromDisplayName(value);\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter29/#_4","title":"\u6b20\u70b9\u30de\u30b9\u30bf","text":"<p>\u691c\u67fb\u3067\u767a\u898b\u3055\u308c\u305f\u4e0d\u826f\u306e\u7a2e\u985e\u3092\u7ba1\u7406\u3059\u308b\u30de\u30b9\u30bf\u3067\u3059\u3002</p>"},{"location":"article/part4/chapter29/#_5","title":"\u6b20\u70b9\u30de\u30b9\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3","text":"DefectMaster.java <pre><code>// src/main/java/com/example/sms/domain/model/quality/DefectMaster.java\npackage com.example.sms.domain.model.quality;\n\nimport lombok.*;\nimport java.time.LocalDateTime;\n\n/**\n * \u6b20\u70b9\u30de\u30b9\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class DefectMaster {\n    private String defectCode;\n    private String defectName;\n    private String defectCategory;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n}\n</code></pre>"},{"location":"article/part4/chapter29/#_6","title":"\u53d7\u5165\u691c\u67fb\u306e\u8a2d\u8a08\uff08\u8cfc\u8cb7\u54c1\u306e\u54c1\u8cea\u78ba\u8a8d\uff09","text":"<p>\u53d7\u5165\u691c\u67fb\u306f\u3001\u8cfc\u8cb7\u54c1\u304c\u4ed5\u5165\u5148\u304b\u3089\u5165\u8377\u3057\u305f\u969b\u306b\u5b9f\u65bd\u3059\u308b\u54c1\u8cea\u691c\u67fb\u3067\u3059\u3002</p> <p></p>"},{"location":"article/part4/chapter29/#_7","title":"\u53d7\u5165\u691c\u67fb\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3","text":"ReceivingInspection.java <pre><code>// src/main/java/com/example/sms/domain/model/quality/ReceivingInspection.java\npackage com.example.sms.domain.model.quality;\n\nimport lombok.*;\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.List;\n\n/**\n * \u53d7\u5165\u691c\u67fb\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class ReceivingInspection {\n    private Long id;\n    private String inspectionNumber;\n    private String receivingNumber;\n    private String purchaseOrderNumber;\n    private String itemCode;\n    private String supplierCode;\n    private LocalDate inspectionDate;\n    private String inspectorCode;\n    private BigDecimal inspectionQuantity;\n    private BigDecimal passedQuantity;\n    private BigDecimal failedQuantity;\n    private InspectionJudgment judgment;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n\n    private List&lt;ReceivingInspectionResult&gt; results;\n}\n</code></pre>"},{"location":"article/part4/chapter29/#_8","title":"\u53d7\u5165\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3","text":"ReceivingInspectionResult.java <pre><code>// src/main/java/com/example/sms/domain/model/quality/ReceivingInspectionResult.java\npackage com.example.sms.domain.model.quality;\n\nimport lombok.*;\nimport java.math.BigDecimal;\n\n/**\n * \u53d7\u5165\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class ReceivingInspectionResult {\n    private Long id;\n    private String inspectionNumber;\n    private String defectCode;\n    private BigDecimal quantity;\n    private String remarks;\n}\n</code></pre>"},{"location":"article/part4/chapter29/#mybatis-mapper-xml","title":"MyBatis Mapper XML\uff1a\u53d7\u5165\u691c\u67fb","text":"ReceivingInspectionMapper.xml <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.sms.infrastructure.out.persistence.mapper.ReceivingInspectionMapper\"&gt;\n\n    &lt;resultMap id=\"ReceivingInspectionResultMap\"\n               type=\"com.example.sms.domain.model.quality.ReceivingInspection\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"inspectionNumber\" column=\"\u53d7\u5165\u691c\u67fb\u756a\u53f7\"/&gt;\n        &lt;result property=\"receivingNumber\" column=\"\u5165\u8377\u756a\u53f7\"/&gt;\n        &lt;result property=\"purchaseOrderNumber\" column=\"\u767a\u6ce8\u756a\u53f7\"/&gt;\n        &lt;result property=\"itemCode\" column=\"\u54c1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"supplierCode\" column=\"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"inspectionDate\" column=\"\u691c\u67fb\u65e5\"/&gt;\n        &lt;result property=\"inspectorCode\" column=\"\u691c\u67fb\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"inspectionQuantity\" column=\"\u691c\u67fb\u6570\u91cf\"/&gt;\n        &lt;result property=\"passedQuantity\" column=\"\u5408\u683c\u6570\"/&gt;\n        &lt;result property=\"failedQuantity\" column=\"\u4e0d\u5408\u683c\u6570\"/&gt;\n        &lt;result property=\"judgment\" column=\"\u5224\u5b9a\"\n                typeHandler=\"com.example.sms.infrastructure.out.persistence.typehandler.InspectionJudgmentTypeHandler\"/&gt;\n        &lt;result property=\"remarks\" column=\"\u5099\u8003\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n        &lt;collection property=\"results\" ofType=\"com.example.sms.domain.model.quality.ReceivingInspectionResult\"\n                    resultMap=\"ReceivingInspectionResultResultMap\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;resultMap id=\"ReceivingInspectionResultResultMap\"\n               type=\"com.example.sms.domain.model.quality.ReceivingInspectionResult\"&gt;\n        &lt;id property=\"id\" column=\"RESULT_ID\"/&gt;\n        &lt;result property=\"inspectionNumber\" column=\"\u53d7\u5165\u691c\u67fb\u756a\u53f7\"/&gt;\n        &lt;result property=\"defectCode\" column=\"\u6b20\u70b9\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"quantity\" column=\"\u6570\u91cf\"/&gt;\n        &lt;result property=\"remarks\" column=\"\u7d50\u679c\u5099\u8003\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;select id=\"findByInspectionNumber\" resultMap=\"ReceivingInspectionResultMap\"&gt;\n        SELECT\n            ri.*,\n            rir.\"ID\" AS RESULT_ID,\n            rir.\"\u6b20\u70b9\u30b3\u30fc\u30c9\",\n            rir.\"\u6570\u91cf\",\n            rir.\"\u5099\u8003\" AS \u7d50\u679c\u5099\u8003\n        FROM \"\u53d7\u5165\u691c\u67fb\u30c7\u30fc\u30bf\" ri\n        LEFT JOIN \"\u53d7\u5165\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf\" rir ON ri.\"\u53d7\u5165\u691c\u67fb\u756a\u53f7\" = rir.\"\u53d7\u5165\u691c\u67fb\u756a\u53f7\"\n        WHERE ri.\"\u53d7\u5165\u691c\u67fb\u756a\u53f7\" = #{inspectionNumber}\n    &lt;/select&gt;\n\n    &lt;select id=\"findByReceivingNumber\" resultMap=\"ReceivingInspectionResultMap\"&gt;\n        SELECT * FROM \"\u53d7\u5165\u691c\u67fb\u30c7\u30fc\u30bf\"\n        WHERE \"\u5165\u8377\u756a\u53f7\" = #{receivingNumber}\n    &lt;/select&gt;\n\n    &lt;select id=\"findBySupplierCode\" resultMap=\"ReceivingInspectionResultMap\"&gt;\n        SELECT * FROM \"\u53d7\u5165\u691c\u67fb\u30c7\u30fc\u30bf\"\n        WHERE \"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\" = #{supplierCode}\n        ORDER BY \"\u691c\u67fb\u65e5\" DESC\n    &lt;/select&gt;\n\n    &lt;insert id=\"insert\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u53d7\u5165\u691c\u67fb\u30c7\u30fc\u30bf\" (\n            \"\u53d7\u5165\u691c\u67fb\u756a\u53f7\", \"\u5165\u8377\u756a\u53f7\", \"\u767a\u6ce8\u756a\u53f7\", \"\u54c1\u76ee\u30b3\u30fc\u30c9\",\n            \"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\", \"\u691c\u67fb\u65e5\", \"\u691c\u67fb\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\",\n            \"\u691c\u67fb\u6570\u91cf\", \"\u5408\u683c\u6570\", \"\u4e0d\u5408\u683c\u6570\", \"\u5224\u5b9a\", \"\u5099\u8003\"\n        ) VALUES (\n            #{inspectionNumber}, #{receivingNumber}, #{purchaseOrderNumber}, #{itemCode},\n            #{supplierCode}, #{inspectionDate}, #{inspectorCode},\n            #{inspectionQuantity}, #{passedQuantity}, #{failedQuantity},\n            #{judgment, typeHandler=com.example.sms.infrastructure.out.persistence.typehandler.InspectionJudgmentTypeHandler},\n            #{remarks}\n        )\n    &lt;/insert&gt;\n\n    &lt;insert id=\"insertResult\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u53d7\u5165\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf\" (\n            \"\u53d7\u5165\u691c\u67fb\u756a\u53f7\", \"\u6b20\u70b9\u30b3\u30fc\u30c9\", \"\u6570\u91cf\", \"\u5099\u8003\"\n        ) VALUES (\n            #{inspectionNumber}, #{defectCode}, #{quantity}, #{remarks}\n        )\n    &lt;/insert&gt;\n\n    &lt;update id=\"update\"&gt;\n        UPDATE \"\u53d7\u5165\u691c\u67fb\u30c7\u30fc\u30bf\" SET\n            \"\u691c\u67fb\u6570\u91cf\" = #{inspectionQuantity},\n            \"\u5408\u683c\u6570\" = #{passedQuantity},\n            \"\u4e0d\u5408\u683c\u6570\" = #{failedQuantity},\n            \"\u5224\u5b9a\" = #{judgment, typeHandler=com.example.sms.infrastructure.out.persistence.typehandler.InspectionJudgmentTypeHandler},\n            \"\u5099\u8003\" = #{remarks},\n            \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP\n        WHERE \"\u53d7\u5165\u691c\u67fb\u756a\u53f7\" = #{inspectionNumber}\n    &lt;/update&gt;\n\n&lt;/mapper&gt;\n</code></pre>"},{"location":"article/part4/chapter29/#flyway","title":"Flyway \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff1a\u53d7\u5165\u691c\u67fb","text":"V029_1__create_receiving_inspection_tables.sql <pre><code>-- V029_1__create_receiving_inspection_tables.sql\n\n-- \u691c\u67fb\u5224\u5b9a ENUM\uff08\u5171\u901a\uff09\nCREATE TYPE \"\u691c\u67fb\u5224\u5b9a\" AS ENUM ('\u5408\u683c', '\u4e0d\u5408\u683c', '\u4fdd\u7559');\n\n-- \u6b20\u70b9\u30de\u30b9\u30bf\nCREATE TABLE \"\u6b20\u70b9\u30de\u30b9\u30bf\" (\n    \"\u6b20\u70b9\u30b3\u30fc\u30c9\" VARCHAR(20) PRIMARY KEY,\n    \"\u6b20\u70b9\u540d\" VARCHAR(100) NOT NULL,\n    \"\u6b20\u70b9\u5206\u985e\" VARCHAR(50),\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL\n);\n\nCOMMENT ON TABLE \"\u6b20\u70b9\u30de\u30b9\u30bf\" IS '\u6b20\u70b9\u30de\u30b9\u30bf';\nCOMMENT ON COLUMN \"\u6b20\u70b9\u30de\u30b9\u30bf\".\"\u6b20\u70b9\u30b3\u30fc\u30c9\" IS '\u6b20\u70b9\u30b3\u30fc\u30c9';\nCOMMENT ON COLUMN \"\u6b20\u70b9\u30de\u30b9\u30bf\".\"\u6b20\u70b9\u540d\" IS '\u6b20\u70b9\u540d';\nCOMMENT ON COLUMN \"\u6b20\u70b9\u30de\u30b9\u30bf\".\"\u6b20\u70b9\u5206\u985e\" IS '\u6b20\u70b9\u5206\u985e\uff08\u5916\u89b3/\u5bf8\u6cd5/\u6a5f\u80fd\u306a\u3069\uff09';\n\n-- \u53d7\u5165\u691c\u67fb\u30c7\u30fc\u30bf\nCREATE TABLE \"\u53d7\u5165\u691c\u67fb\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u53d7\u5165\u691c\u67fb\u756a\u53f7\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u5165\u8377\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u767a\u6ce8\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u54c1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u691c\u67fb\u65e5\" DATE NOT NULL,\n    \"\u691c\u67fb\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u691c\u67fb\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u5408\u683c\u6570\" DECIMAL(15, 2) NOT NULL,\n    \"\u4e0d\u5408\u683c\u6570\" DECIMAL(15, 2) NOT NULL,\n    \"\u5224\u5b9a\" \"\u691c\u67fb\u5224\u5b9a\" NOT NULL,\n    \"\u5099\u8003\" VARCHAR(500),\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"FK_\u53d7\u5165\u691c\u67fb_\u54c1\u76ee\" FOREIGN KEY (\"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n        REFERENCES \"\u54c1\u76ee\u30de\u30b9\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"FK_\u53d7\u5165\u691c\u67fb_\u4ed5\u5165\u5148\" FOREIGN KEY (\"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\")\n        REFERENCES \"\u4ed5\u5165\u5148\u30de\u30b9\u30bf\"(\"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\")\n);\n\nCOMMENT ON TABLE \"\u53d7\u5165\u691c\u67fb\u30c7\u30fc\u30bf\" IS '\u53d7\u5165\u691c\u67fb\u30c7\u30fc\u30bf';\nCOMMENT ON COLUMN \"\u53d7\u5165\u691c\u67fb\u30c7\u30fc\u30bf\".\"\u53d7\u5165\u691c\u67fb\u756a\u53f7\" IS '\u53d7\u5165\u691c\u67fb\u756a\u53f7';\nCOMMENT ON COLUMN \"\u53d7\u5165\u691c\u67fb\u30c7\u30fc\u30bf\".\"\u5165\u8377\u756a\u53f7\" IS '\u5165\u8377\u756a\u53f7';\nCOMMENT ON COLUMN \"\u53d7\u5165\u691c\u67fb\u30c7\u30fc\u30bf\".\"\u5224\u5b9a\" IS '\u691c\u67fb\u5224\u5b9a\uff08\u5408\u683c/\u4e0d\u5408\u683c/\u4fdd\u7559\uff09';\n\n-- \u53d7\u5165\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf\nCREATE TABLE \"\u53d7\u5165\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u53d7\u5165\u691c\u67fb\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u6b20\u70b9\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u5099\u8003\" VARCHAR(500),\n    CONSTRAINT \"UK_\u53d7\u5165\u691c\u67fb\u7d50\u679c\" UNIQUE (\"\u53d7\u5165\u691c\u67fb\u756a\u53f7\", \"\u6b20\u70b9\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"FK_\u53d7\u5165\u691c\u67fb\u7d50\u679c_\u53d7\u5165\u691c\u67fb\" FOREIGN KEY (\"\u53d7\u5165\u691c\u67fb\u756a\u53f7\")\n        REFERENCES \"\u53d7\u5165\u691c\u67fb\u30c7\u30fc\u30bf\"(\"\u53d7\u5165\u691c\u67fb\u756a\u53f7\"),\n    CONSTRAINT \"FK_\u53d7\u5165\u691c\u67fb\u7d50\u679c_\u6b20\u70b9\" FOREIGN KEY (\"\u6b20\u70b9\u30b3\u30fc\u30c9\")\n        REFERENCES \"\u6b20\u70b9\u30de\u30b9\u30bf\"(\"\u6b20\u70b9\u30b3\u30fc\u30c9\")\n);\n\nCOMMENT ON TABLE \"\u53d7\u5165\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf\" IS '\u53d7\u5165\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf';\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"IDX_\u53d7\u5165\u691c\u67fb_\u5165\u8377\u756a\u53f7\" ON \"\u53d7\u5165\u691c\u67fb\u30c7\u30fc\u30bf\" (\"\u5165\u8377\u756a\u53f7\");\nCREATE INDEX \"IDX_\u53d7\u5165\u691c\u67fb_\u4ed5\u5165\u5148\" ON \"\u53d7\u5165\u691c\u67fb\u30c7\u30fc\u30bf\" (\"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\");\nCREATE INDEX \"IDX_\u53d7\u5165\u691c\u67fb_\u691c\u67fb\u65e5\" ON \"\u53d7\u5165\u691c\u67fb\u30c7\u30fc\u30bf\" (\"\u691c\u67fb\u65e5\");\n</code></pre>"},{"location":"article/part4/chapter29/#er","title":"\u53d7\u5165\u691c\u67fb\u306e ER \u56f3","text":""},{"location":"article/part4/chapter29/#_9","title":"\u5de5\u7a0b\u691c\u67fb\u306e\u8a2d\u8a08\uff08\u88fd\u9020\u4e2d\u306e\u54c1\u8cea\u78ba\u8a8d\uff09","text":"<p>\u5de5\u7a0b\u691c\u67fb\u306f\u3001\u88fd\u9020\u5de5\u7a0b\u306e\u9014\u4e2d\u3067\u5b9f\u65bd\u3059\u308b\u54c1\u8cea\u691c\u67fb\u3067\u3059\u3002\u88fd\u9020\u5de5\u7a0b\u3067\u54c1\u8cea\u554f\u984c\u3092\u65e9\u671f\u767a\u898b\u3057\u3001\u4e0d\u826f\u54c1\u306e\u5927\u91cf\u767a\u751f\u3092\u9632\u6b62\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part4/chapter29/#_10","title":"\u5de5\u7a0b\u691c\u67fb\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3","text":"ProcessInspection.java <pre><code>// src/main/java/com/example/sms/domain/model/quality/ProcessInspection.java\npackage com.example.sms.domain.model.quality;\n\nimport lombok.*;\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.List;\n\n/**\n * \u5de5\u7a0b\u691c\u67fb\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class ProcessInspection {\n    private Long id;\n    private String inspectionNumber;\n    private String workOrderNumber;\n    private String processCode;\n    private String itemCode;\n    private LocalDate inspectionDate;\n    private String inspectorCode;\n    private BigDecimal inspectionQuantity;\n    private BigDecimal passedQuantity;\n    private BigDecimal failedQuantity;\n    private InspectionJudgment judgment;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n\n    private List&lt;ProcessInspectionResult&gt; results;\n}\n</code></pre>"},{"location":"article/part4/chapter29/#_11","title":"\u5de5\u7a0b\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3","text":"ProcessInspectionResult.java <pre><code>// src/main/java/com/example/sms/domain/model/quality/ProcessInspectionResult.java\npackage com.example.sms.domain.model.quality;\n\nimport lombok.*;\nimport java.math.BigDecimal;\n\n/**\n * \u5de5\u7a0b\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class ProcessInspectionResult {\n    private Long id;\n    private String inspectionNumber;\n    private String defectCode;\n    private BigDecimal quantity;\n    private String remarks;\n}\n</code></pre>"},{"location":"article/part4/chapter29/#mybatis-mapper-xml_1","title":"MyBatis Mapper XML\uff1a\u5de5\u7a0b\u691c\u67fb","text":"ProcessInspectionMapper.xml <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.sms.infrastructure.out.persistence.mapper.ProcessInspectionMapper\"&gt;\n\n    &lt;resultMap id=\"ProcessInspectionResultMap\"\n               type=\"com.example.sms.domain.model.quality.ProcessInspection\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"inspectionNumber\" column=\"\u5de5\u7a0b\u691c\u67fb\u756a\u53f7\"/&gt;\n        &lt;result property=\"workOrderNumber\" column=\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\"/&gt;\n        &lt;result property=\"processCode\" column=\"\u5de5\u7a0b\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"itemCode\" column=\"\u54c1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"inspectionDate\" column=\"\u691c\u67fb\u65e5\"/&gt;\n        &lt;result property=\"inspectorCode\" column=\"\u691c\u67fb\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"inspectionQuantity\" column=\"\u691c\u67fb\u6570\u91cf\"/&gt;\n        &lt;result property=\"passedQuantity\" column=\"\u5408\u683c\u6570\"/&gt;\n        &lt;result property=\"failedQuantity\" column=\"\u4e0d\u5408\u683c\u6570\"/&gt;\n        &lt;result property=\"judgment\" column=\"\u5224\u5b9a\"\n                typeHandler=\"com.example.sms.infrastructure.out.persistence.typehandler.InspectionJudgmentTypeHandler\"/&gt;\n        &lt;result property=\"remarks\" column=\"\u5099\u8003\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n        &lt;collection property=\"results\" ofType=\"com.example.sms.domain.model.quality.ProcessInspectionResult\"\n                    resultMap=\"ProcessInspectionResultResultMap\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;resultMap id=\"ProcessInspectionResultResultMap\"\n               type=\"com.example.sms.domain.model.quality.ProcessInspectionResult\"&gt;\n        &lt;id property=\"id\" column=\"RESULT_ID\"/&gt;\n        &lt;result property=\"inspectionNumber\" column=\"\u5de5\u7a0b\u691c\u67fb\u756a\u53f7\"/&gt;\n        &lt;result property=\"defectCode\" column=\"\u6b20\u70b9\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"quantity\" column=\"\u6570\u91cf\"/&gt;\n        &lt;result property=\"remarks\" column=\"\u7d50\u679c\u5099\u8003\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;select id=\"findByInspectionNumber\" resultMap=\"ProcessInspectionResultMap\"&gt;\n        SELECT\n            pi.*,\n            pir.\"ID\" AS RESULT_ID,\n            pir.\"\u6b20\u70b9\u30b3\u30fc\u30c9\",\n            pir.\"\u6570\u91cf\",\n            pir.\"\u5099\u8003\" AS \u7d50\u679c\u5099\u8003\n        FROM \"\u5de5\u7a0b\u691c\u67fb\u30c7\u30fc\u30bf\" pi\n        LEFT JOIN \"\u5de5\u7a0b\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf\" pir ON pi.\"\u5de5\u7a0b\u691c\u67fb\u756a\u53f7\" = pir.\"\u5de5\u7a0b\u691c\u67fb\u756a\u53f7\"\n        WHERE pi.\"\u5de5\u7a0b\u691c\u67fb\u756a\u53f7\" = #{inspectionNumber}\n    &lt;/select&gt;\n\n    &lt;select id=\"findByWorkOrderNumber\" resultMap=\"ProcessInspectionResultMap\"&gt;\n        SELECT * FROM \"\u5de5\u7a0b\u691c\u67fb\u30c7\u30fc\u30bf\"\n        WHERE \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" = #{workOrderNumber}\n        ORDER BY \"\u691c\u67fb\u65e5\" ASC\n    &lt;/select&gt;\n\n    &lt;select id=\"findByProcessCode\" resultMap=\"ProcessInspectionResultMap\"&gt;\n        SELECT * FROM \"\u5de5\u7a0b\u691c\u67fb\u30c7\u30fc\u30bf\"\n        WHERE \"\u5de5\u7a0b\u30b3\u30fc\u30c9\" = #{processCode}\n        ORDER BY \"\u691c\u67fb\u65e5\" DESC\n    &lt;/select&gt;\n\n    &lt;insert id=\"insert\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u5de5\u7a0b\u691c\u67fb\u30c7\u30fc\u30bf\" (\n            \"\u5de5\u7a0b\u691c\u67fb\u756a\u53f7\", \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\", \"\u5de5\u7a0b\u30b3\u30fc\u30c9\", \"\u54c1\u76ee\u30b3\u30fc\u30c9\",\n            \"\u691c\u67fb\u65e5\", \"\u691c\u67fb\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\",\n            \"\u691c\u67fb\u6570\u91cf\", \"\u5408\u683c\u6570\", \"\u4e0d\u5408\u683c\u6570\", \"\u5224\u5b9a\", \"\u5099\u8003\"\n        ) VALUES (\n            #{inspectionNumber}, #{workOrderNumber}, #{processCode}, #{itemCode},\n            #{inspectionDate}, #{inspectorCode},\n            #{inspectionQuantity}, #{passedQuantity}, #{failedQuantity},\n            #{judgment, typeHandler=com.example.sms.infrastructure.out.persistence.typehandler.InspectionJudgmentTypeHandler},\n            #{remarks}\n        )\n    &lt;/insert&gt;\n\n    &lt;insert id=\"insertResult\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u5de5\u7a0b\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf\" (\n            \"\u5de5\u7a0b\u691c\u67fb\u756a\u53f7\", \"\u6b20\u70b9\u30b3\u30fc\u30c9\", \"\u6570\u91cf\", \"\u5099\u8003\"\n        ) VALUES (\n            #{inspectionNumber}, #{defectCode}, #{quantity}, #{remarks}\n        )\n    &lt;/insert&gt;\n\n    &lt;update id=\"update\"&gt;\n        UPDATE \"\u5de5\u7a0b\u691c\u67fb\u30c7\u30fc\u30bf\" SET\n            \"\u691c\u67fb\u6570\u91cf\" = #{inspectionQuantity},\n            \"\u5408\u683c\u6570\" = #{passedQuantity},\n            \"\u4e0d\u5408\u683c\u6570\" = #{failedQuantity},\n            \"\u5224\u5b9a\" = #{judgment, typeHandler=com.example.sms.infrastructure.out.persistence.typehandler.InspectionJudgmentTypeHandler},\n            \"\u5099\u8003\" = #{remarks},\n            \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP\n        WHERE \"\u5de5\u7a0b\u691c\u67fb\u756a\u53f7\" = #{inspectionNumber}\n    &lt;/update&gt;\n\n&lt;/mapper&gt;\n</code></pre>"},{"location":"article/part4/chapter29/#flyway_1","title":"Flyway \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff1a\u5de5\u7a0b\u691c\u67fb","text":"V029_2__create_process_inspection_tables.sql <pre><code>-- V029_2__create_process_inspection_tables.sql\n\n-- \u5de5\u7a0b\u691c\u67fb\u30c7\u30fc\u30bf\nCREATE TABLE \"\u5de5\u7a0b\u691c\u67fb\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u5de5\u7a0b\u691c\u67fb\u756a\u53f7\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u5de5\u7a0b\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u54c1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u691c\u67fb\u65e5\" DATE NOT NULL,\n    \"\u691c\u67fb\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u691c\u67fb\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u5408\u683c\u6570\" DECIMAL(15, 2) NOT NULL,\n    \"\u4e0d\u5408\u683c\u6570\" DECIMAL(15, 2) NOT NULL,\n    \"\u5224\u5b9a\" \"\u691c\u67fb\u5224\u5b9a\" NOT NULL,\n    \"\u5099\u8003\" VARCHAR(500),\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"FK_\u5de5\u7a0b\u691c\u67fb_\u4f5c\u696d\u6307\u793a\" FOREIGN KEY (\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\")\n        REFERENCES \"\u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf\"(\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\"),\n    CONSTRAINT \"FK_\u5de5\u7a0b\u691c\u67fb_\u5de5\u7a0b\" FOREIGN KEY (\"\u5de5\u7a0b\u30b3\u30fc\u30c9\")\n        REFERENCES \"\u5de5\u7a0b\u30de\u30b9\u30bf\"(\"\u5de5\u7a0b\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"FK_\u5de5\u7a0b\u691c\u67fb_\u54c1\u76ee\" FOREIGN KEY (\"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n        REFERENCES \"\u54c1\u76ee\u30de\u30b9\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n);\n\nCOMMENT ON TABLE \"\u5de5\u7a0b\u691c\u67fb\u30c7\u30fc\u30bf\" IS '\u5de5\u7a0b\u691c\u67fb\u30c7\u30fc\u30bf';\nCOMMENT ON COLUMN \"\u5de5\u7a0b\u691c\u67fb\u30c7\u30fc\u30bf\".\"\u5de5\u7a0b\u691c\u67fb\u756a\u53f7\" IS '\u5de5\u7a0b\u691c\u67fb\u756a\u53f7';\nCOMMENT ON COLUMN \"\u5de5\u7a0b\u691c\u67fb\u30c7\u30fc\u30bf\".\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" IS '\u4f5c\u696d\u6307\u793a\u756a\u53f7';\nCOMMENT ON COLUMN \"\u5de5\u7a0b\u691c\u67fb\u30c7\u30fc\u30bf\".\"\u5de5\u7a0b\u30b3\u30fc\u30c9\" IS '\u691c\u67fb\u5bfe\u8c61\u5de5\u7a0b';\n\n-- \u5de5\u7a0b\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf\nCREATE TABLE \"\u5de5\u7a0b\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u5de5\u7a0b\u691c\u67fb\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u6b20\u70b9\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u5099\u8003\" VARCHAR(500),\n    CONSTRAINT \"UK_\u5de5\u7a0b\u691c\u67fb\u7d50\u679c\" UNIQUE (\"\u5de5\u7a0b\u691c\u67fb\u756a\u53f7\", \"\u6b20\u70b9\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"FK_\u5de5\u7a0b\u691c\u67fb\u7d50\u679c_\u5de5\u7a0b\u691c\u67fb\" FOREIGN KEY (\"\u5de5\u7a0b\u691c\u67fb\u756a\u53f7\")\n        REFERENCES \"\u5de5\u7a0b\u691c\u67fb\u30c7\u30fc\u30bf\"(\"\u5de5\u7a0b\u691c\u67fb\u756a\u53f7\"),\n    CONSTRAINT \"FK_\u5de5\u7a0b\u691c\u67fb\u7d50\u679c_\u6b20\u70b9\" FOREIGN KEY (\"\u6b20\u70b9\u30b3\u30fc\u30c9\")\n        REFERENCES \"\u6b20\u70b9\u30de\u30b9\u30bf\"(\"\u6b20\u70b9\u30b3\u30fc\u30c9\")\n);\n\nCOMMENT ON TABLE \"\u5de5\u7a0b\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf\" IS '\u5de5\u7a0b\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf';\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"IDX_\u5de5\u7a0b\u691c\u67fb_\u4f5c\u696d\u6307\u793a\" ON \"\u5de5\u7a0b\u691c\u67fb\u30c7\u30fc\u30bf\" (\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\");\nCREATE INDEX \"IDX_\u5de5\u7a0b\u691c\u67fb_\u5de5\u7a0b\" ON \"\u5de5\u7a0b\u691c\u67fb\u30c7\u30fc\u30bf\" (\"\u5de5\u7a0b\u30b3\u30fc\u30c9\");\nCREATE INDEX \"IDX_\u5de5\u7a0b\u691c\u67fb_\u691c\u67fb\u65e5\" ON \"\u5de5\u7a0b\u691c\u67fb\u30c7\u30fc\u30bf\" (\"\u691c\u67fb\u65e5\");\n</code></pre>"},{"location":"article/part4/chapter29/#er_1","title":"\u5de5\u7a0b\u691c\u67fb\u306e ER \u56f3","text":""},{"location":"article/part4/chapter29/#_12","title":"\u51fa\u8377\u691c\u67fb\u306e\u8a2d\u8a08\uff08\u51fa\u8377\u524d\u306e\u54c1\u8cea\u78ba\u8a8d\uff09","text":"<p>\u51fa\u8377\u691c\u67fb\u306f\u3001\u88fd\u54c1\u3092\u9867\u5ba2\u306b\u51fa\u8377\u3059\u308b\u524d\u306b\u5b9f\u65bd\u3059\u308b\u6700\u7d42\u54c1\u8cea\u691c\u67fb\u3067\u3059\u3002\u4e0d\u826f\u54c1\u306e\u6d41\u51fa\u3092\u9632\u6b62\u3059\u308b\u6700\u5f8c\u306e\u7826\u3068\u306a\u308a\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part4/chapter29/#_13","title":"\u51fa\u8377\u691c\u67fb\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3","text":"ShipmentInspection.java <pre><code>// src/main/java/com/example/sms/domain/model/quality/ShipmentInspection.java\npackage com.example.sms.domain.model.quality;\n\nimport lombok.*;\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.List;\n\n/**\n * \u51fa\u8377\u691c\u67fb\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class ShipmentInspection {\n    private Long id;\n    private String inspectionNumber;\n    private String shipmentNumber;\n    private String itemCode;\n    private LocalDate inspectionDate;\n    private String inspectorCode;\n    private BigDecimal inspectionQuantity;\n    private BigDecimal passedQuantity;\n    private BigDecimal failedQuantity;\n    private InspectionJudgment judgment;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n\n    private List&lt;ShipmentInspectionResult&gt; results;\n}\n</code></pre>"},{"location":"article/part4/chapter29/#_14","title":"\u51fa\u8377\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3","text":"ShipmentInspectionResult.java <pre><code>// src/main/java/com/example/sms/domain/model/quality/ShipmentInspectionResult.java\npackage com.example.sms.domain.model.quality;\n\nimport lombok.*;\nimport java.math.BigDecimal;\n\n/**\n * \u51fa\u8377\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class ShipmentInspectionResult {\n    private Long id;\n    private String inspectionNumber;\n    private String defectCode;\n    private BigDecimal quantity;\n    private String remarks;\n}\n</code></pre>"},{"location":"article/part4/chapter29/#mybatis-mapper-xml_2","title":"MyBatis Mapper XML\uff1a\u51fa\u8377\u691c\u67fb","text":"ShipmentInspectionMapper.xml <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.sms.infrastructure.out.persistence.mapper.ShipmentInspectionMapper\"&gt;\n\n    &lt;resultMap id=\"ShipmentInspectionResultMap\"\n               type=\"com.example.sms.domain.model.quality.ShipmentInspection\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"inspectionNumber\" column=\"\u51fa\u8377\u691c\u67fb\u756a\u53f7\"/&gt;\n        &lt;result property=\"shipmentNumber\" column=\"\u51fa\u8377\u756a\u53f7\"/&gt;\n        &lt;result property=\"itemCode\" column=\"\u54c1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"inspectionDate\" column=\"\u691c\u67fb\u65e5\"/&gt;\n        &lt;result property=\"inspectorCode\" column=\"\u691c\u67fb\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"inspectionQuantity\" column=\"\u691c\u67fb\u6570\u91cf\"/&gt;\n        &lt;result property=\"passedQuantity\" column=\"\u5408\u683c\u6570\"/&gt;\n        &lt;result property=\"failedQuantity\" column=\"\u4e0d\u5408\u683c\u6570\"/&gt;\n        &lt;result property=\"judgment\" column=\"\u5224\u5b9a\"\n                typeHandler=\"com.example.sms.infrastructure.out.persistence.typehandler.InspectionJudgmentTypeHandler\"/&gt;\n        &lt;result property=\"remarks\" column=\"\u5099\u8003\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n        &lt;collection property=\"results\" ofType=\"com.example.sms.domain.model.quality.ShipmentInspectionResult\"\n                    resultMap=\"ShipmentInspectionResultResultMap\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;resultMap id=\"ShipmentInspectionResultResultMap\"\n               type=\"com.example.sms.domain.model.quality.ShipmentInspectionResult\"&gt;\n        &lt;id property=\"id\" column=\"RESULT_ID\"/&gt;\n        &lt;result property=\"inspectionNumber\" column=\"\u51fa\u8377\u691c\u67fb\u756a\u53f7\"/&gt;\n        &lt;result property=\"defectCode\" column=\"\u6b20\u70b9\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"quantity\" column=\"\u6570\u91cf\"/&gt;\n        &lt;result property=\"remarks\" column=\"\u7d50\u679c\u5099\u8003\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;select id=\"findByInspectionNumber\" resultMap=\"ShipmentInspectionResultMap\"&gt;\n        SELECT\n            si.*,\n            sir.\"ID\" AS RESULT_ID,\n            sir.\"\u6b20\u70b9\u30b3\u30fc\u30c9\",\n            sir.\"\u6570\u91cf\",\n            sir.\"\u5099\u8003\" AS \u7d50\u679c\u5099\u8003\n        FROM \"\u51fa\u8377\u691c\u67fb\u30c7\u30fc\u30bf\" si\n        LEFT JOIN \"\u51fa\u8377\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf\" sir ON si.\"\u51fa\u8377\u691c\u67fb\u756a\u53f7\" = sir.\"\u51fa\u8377\u691c\u67fb\u756a\u53f7\"\n        WHERE si.\"\u51fa\u8377\u691c\u67fb\u756a\u53f7\" = #{inspectionNumber}\n    &lt;/select&gt;\n\n    &lt;select id=\"findByShipmentNumber\" resultMap=\"ShipmentInspectionResultMap\"&gt;\n        SELECT * FROM \"\u51fa\u8377\u691c\u67fb\u30c7\u30fc\u30bf\"\n        WHERE \"\u51fa\u8377\u756a\u53f7\" = #{shipmentNumber}\n    &lt;/select&gt;\n\n    &lt;insert id=\"insert\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u51fa\u8377\u691c\u67fb\u30c7\u30fc\u30bf\" (\n            \"\u51fa\u8377\u691c\u67fb\u756a\u53f7\", \"\u51fa\u8377\u756a\u53f7\", \"\u54c1\u76ee\u30b3\u30fc\u30c9\", \"\u691c\u67fb\u65e5\",\n            \"\u691c\u67fb\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\", \"\u691c\u67fb\u6570\u91cf\", \"\u5408\u683c\u6570\", \"\u4e0d\u5408\u683c\u6570\", \"\u5224\u5b9a\", \"\u5099\u8003\"\n        ) VALUES (\n            #{inspectionNumber}, #{shipmentNumber}, #{itemCode}, #{inspectionDate},\n            #{inspectorCode}, #{inspectionQuantity}, #{passedQuantity}, #{failedQuantity},\n            #{judgment, typeHandler=com.example.sms.infrastructure.out.persistence.typehandler.InspectionJudgmentTypeHandler},\n            #{remarks}\n        )\n    &lt;/insert&gt;\n\n    &lt;insert id=\"insertResult\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u51fa\u8377\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf\" (\n            \"\u51fa\u8377\u691c\u67fb\u756a\u53f7\", \"\u6b20\u70b9\u30b3\u30fc\u30c9\", \"\u6570\u91cf\", \"\u5099\u8003\"\n        ) VALUES (\n            #{inspectionNumber}, #{defectCode}, #{quantity}, #{remarks}\n        )\n    &lt;/insert&gt;\n\n    &lt;update id=\"update\"&gt;\n        UPDATE \"\u51fa\u8377\u691c\u67fb\u30c7\u30fc\u30bf\" SET\n            \"\u691c\u67fb\u6570\u91cf\" = #{inspectionQuantity},\n            \"\u5408\u683c\u6570\" = #{passedQuantity},\n            \"\u4e0d\u5408\u683c\u6570\" = #{failedQuantity},\n            \"\u5224\u5b9a\" = #{judgment, typeHandler=com.example.sms.infrastructure.out.persistence.typehandler.InspectionJudgmentTypeHandler},\n            \"\u5099\u8003\" = #{remarks},\n            \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP\n        WHERE \"\u51fa\u8377\u691c\u67fb\u756a\u53f7\" = #{inspectionNumber}\n    &lt;/update&gt;\n\n&lt;/mapper&gt;\n</code></pre>"},{"location":"article/part4/chapter29/#flyway_2","title":"Flyway \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff1a\u51fa\u8377\u691c\u67fb","text":"V029_3__create_shipment_inspection_tables.sql <pre><code>-- V029_3__create_shipment_inspection_tables.sql\n\n-- \u51fa\u8377\u691c\u67fb\u30c7\u30fc\u30bf\nCREATE TABLE \"\u51fa\u8377\u691c\u67fb\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u51fa\u8377\u691c\u67fb\u756a\u53f7\" VARCHAR(20) UNIQUE NOT NULL,\n    \"\u51fa\u8377\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u54c1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u691c\u67fb\u65e5\" DATE NOT NULL,\n    \"\u691c\u67fb\u62c5\u5f53\u8005\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u691c\u67fb\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u5408\u683c\u6570\" DECIMAL(15, 2) NOT NULL,\n    \"\u4e0d\u5408\u683c\u6570\" DECIMAL(15, 2) NOT NULL,\n    \"\u5224\u5b9a\" \"\u691c\u67fb\u5224\u5b9a\" NOT NULL,\n    \"\u5099\u8003\" VARCHAR(500),\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"FK_\u51fa\u8377\u691c\u67fb_\u54c1\u76ee\" FOREIGN KEY (\"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n        REFERENCES \"\u54c1\u76ee\u30de\u30b9\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n);\n\nCOMMENT ON TABLE \"\u51fa\u8377\u691c\u67fb\u30c7\u30fc\u30bf\" IS '\u51fa\u8377\u691c\u67fb\u30c7\u30fc\u30bf';\nCOMMENT ON COLUMN \"\u51fa\u8377\u691c\u67fb\u30c7\u30fc\u30bf\".\"\u51fa\u8377\u691c\u67fb\u756a\u53f7\" IS '\u51fa\u8377\u691c\u67fb\u756a\u53f7';\nCOMMENT ON COLUMN \"\u51fa\u8377\u691c\u67fb\u30c7\u30fc\u30bf\".\"\u51fa\u8377\u756a\u53f7\" IS '\u51fa\u8377\u756a\u53f7';\nCOMMENT ON COLUMN \"\u51fa\u8377\u691c\u67fb\u30c7\u30fc\u30bf\".\"\u5224\u5b9a\" IS '\u691c\u67fb\u5224\u5b9a\uff08\u5408\u683c/\u4e0d\u5408\u683c/\u4fdd\u7559\uff09';\n\n-- \u51fa\u8377\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf\nCREATE TABLE \"\u51fa\u8377\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u51fa\u8377\u691c\u67fb\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u6b20\u70b9\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u5099\u8003\" VARCHAR(500),\n    CONSTRAINT \"UK_\u51fa\u8377\u691c\u67fb\u7d50\u679c\" UNIQUE (\"\u51fa\u8377\u691c\u67fb\u756a\u53f7\", \"\u6b20\u70b9\u30b3\u30fc\u30c9\"),\n    CONSTRAINT \"FK_\u51fa\u8377\u691c\u67fb\u7d50\u679c_\u51fa\u8377\u691c\u67fb\" FOREIGN KEY (\"\u51fa\u8377\u691c\u67fb\u756a\u53f7\")\n        REFERENCES \"\u51fa\u8377\u691c\u67fb\u30c7\u30fc\u30bf\"(\"\u51fa\u8377\u691c\u67fb\u756a\u53f7\"),\n    CONSTRAINT \"FK_\u51fa\u8377\u691c\u67fb\u7d50\u679c_\u6b20\u70b9\" FOREIGN KEY (\"\u6b20\u70b9\u30b3\u30fc\u30c9\")\n        REFERENCES \"\u6b20\u70b9\u30de\u30b9\u30bf\"(\"\u6b20\u70b9\u30b3\u30fc\u30c9\")\n);\n\nCOMMENT ON TABLE \"\u51fa\u8377\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf\" IS '\u51fa\u8377\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf';\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"IDX_\u51fa\u8377\u691c\u67fb_\u51fa\u8377\u756a\u53f7\" ON \"\u51fa\u8377\u691c\u67fb\u30c7\u30fc\u30bf\" (\"\u51fa\u8377\u756a\u53f7\");\nCREATE INDEX \"IDX_\u51fa\u8377\u691c\u67fb_\u691c\u67fb\u65e5\" ON \"\u51fa\u8377\u691c\u67fb\u30c7\u30fc\u30bf\" (\"\u691c\u67fb\u65e5\");\n</code></pre>"},{"location":"article/part4/chapter29/#er_2","title":"\u51fa\u8377\u691c\u67fb\u306e ER \u56f3","text":""},{"location":"article/part4/chapter29/#_15","title":"\u30c8\u30ec\u30fc\u30b5\u30d3\u30ea\u30c6\u30a3\uff08\u30ed\u30c3\u30c8\u8ffd\u8de1\u30fb\u5c65\u6b74\u7ba1\u7406\uff09","text":"<p>\u88fd\u9020\u696d\u306b\u304a\u3051\u308b\u30c8\u30ec\u30fc\u30b5\u30d3\u30ea\u30c6\u30a3\u306f\u3001\u88fd\u54c1\u306e\u88fd\u9020\u5c65\u6b74\u3092\u8ffd\u8de1\u53ef\u80fd\u306b\u3059\u308b\u4ed5\u7d44\u307f\u3067\u3059\u3002\u54c1\u8cea\u554f\u984c\u304c\u767a\u751f\u3057\u305f\u969b\u306b\u3001\u539f\u56e0\u7a76\u660e\u3068\u5f71\u97ff\u7bc4\u56f2\u306e\u7279\u5b9a\u3092\u53ef\u80fd\u306b\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part4/chapter29/#_16","title":"\u30c8\u30ec\u30fc\u30b5\u30d3\u30ea\u30c6\u30a3\u306e\u7a2e\u985e","text":"\u7a2e\u985e \u8aac\u660e \u7528\u9014 \u30c8\u30ec\u30fc\u30b9\u30d5\u30a9\u30ef\u30fc\u30c9 \u6750\u6599\u304b\u3089\u88fd\u54c1\u3078\u306e\u8ffd\u8de1 \u4e0d\u826f\u6750\u6599\u3092\u4f7f\u7528\u3057\u305f\u88fd\u54c1\u306e\u7279\u5b9a \u30c8\u30ec\u30fc\u30b9\u30d0\u30c3\u30af \u88fd\u54c1\u304b\u3089\u6750\u6599\u3078\u306e\u8ffd\u8de1 \u4e0d\u826f\u88fd\u54c1\u306e\u539f\u56e0\u7a76\u660e"},{"location":"article/part4/chapter29/#enum_1","title":"\u30ed\u30c3\u30c8\u7a2e\u5225 Enum","text":"LotType.java <pre><code>// src/main/java/com/example/sms/domain/model/quality/LotType.java\npackage com.example.sms.domain.model.quality;\n\n/**\n * \u30ed\u30c3\u30c8\u7a2e\u5225\n */\npublic enum LotType {\n    PURCHASED(\"\u8cfc\u5165\u30ed\u30c3\u30c8\"),\n    MANUFACTURED(\"\u88fd\u9020\u30ed\u30c3\u30c8\");\n\n    private final String displayName;\n\n    LotType(String displayName) {\n        this.displayName = displayName;\n    }\n\n    public String getDisplayName() {\n        return displayName;\n    }\n\n    public static LotType fromDisplayName(String displayName) {\n        for (LotType type : values()) {\n            if (type.displayName.equals(displayName)) {\n                return type;\n            }\n        }\n        throw new IllegalArgumentException(\"Unknown display name: \" + displayName);\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter29/#typehandler_1","title":"\u30ed\u30c3\u30c8\u7a2e\u5225 TypeHandler","text":"LotTypeTypeHandler.java <pre><code>// src/main/java/com/example/sms/infrastructure/out/persistence/typehandler/LotTypeTypeHandler.java\npackage com.example.sms.infrastructure.out.persistence.typehandler;\n\nimport com.example.sms.domain.model.quality.LotType;\nimport org.apache.ibatis.type.BaseTypeHandler;\nimport org.apache.ibatis.type.JdbcType;\nimport org.apache.ibatis.type.MappedTypes;\n\nimport java.sql.CallableStatement;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\n\n/**\n * \u30ed\u30c3\u30c8\u7a2e\u5225\u306eTypeHandler\n */\n@MappedTypes(LotType.class)\npublic class LotTypeTypeHandler extends BaseTypeHandler&lt;LotType&gt; {\n\n    @Override\n    public void setNonNullParameter(PreparedStatement ps, int i,\n                                    LotType parameter, JdbcType jdbcType) throws SQLException {\n        ps.setString(i, parameter.getDisplayName());\n    }\n\n    @Override\n    public LotType getNullableResult(ResultSet rs, String columnName) throws SQLException {\n        String value = rs.getString(columnName);\n        return value == null ? null : LotType.fromDisplayName(value);\n    }\n\n    @Override\n    public LotType getNullableResult(ResultSet rs, int columnIndex) throws SQLException {\n        String value = rs.getString(columnIndex);\n        return value == null ? null : LotType.fromDisplayName(value);\n    }\n\n    @Override\n    public LotType getNullableResult(CallableStatement cs, int columnIndex) throws SQLException {\n        String value = cs.getString(columnIndex);\n        return value == null ? null : LotType.fromDisplayName(value);\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter29/#_17","title":"\u30ed\u30c3\u30c8\u30de\u30b9\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3","text":"LotMaster.java <pre><code>// src/main/java/com/example/sms/domain/model/quality/LotMaster.java\npackage com.example.sms.domain.model.quality;\n\nimport lombok.*;\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.List;\n\n/**\n * \u30ed\u30c3\u30c8\u30de\u30b9\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class LotMaster {\n    private Long id;\n    private String lotNumber;\n    private String itemCode;\n    private LotType lotType;\n    private LocalDate manufactureDate;\n    private LocalDate expirationDate;\n    private BigDecimal quantity;\n    private String warehouseCode;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n\n    private List&lt;LotComposition&gt; parentLotRelations;\n    private List&lt;LotComposition&gt; childLotRelations;\n}\n</code></pre>"},{"location":"article/part4/chapter29/#_18","title":"\u30ed\u30c3\u30c8\u69cb\u6210\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3","text":"LotComposition.java <pre><code>// src/main/java/com/example/sms/domain/model/quality/LotComposition.java\npackage com.example.sms.domain.model.quality;\n\nimport lombok.*;\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\n\n/**\n * \u30ed\u30c3\u30c8\u69cb\u6210\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n * \u89aa\u5b50\u30ed\u30c3\u30c8\u9593\u306e\u95a2\u4fc2\u3092\u7ba1\u7406\uff08\u30c8\u30ec\u30fc\u30b5\u30d3\u30ea\u30c6\u30a3\u7528\uff09\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class LotComposition {\n    private Long id;\n    private String parentLotNumber;\n    private String childLotNumber;\n    private BigDecimal usedQuantity;\n    private LocalDateTime createdAt;\n}\n</code></pre>"},{"location":"article/part4/chapter29/#mybatis-mapper-xml_3","title":"MyBatis Mapper XML\uff1a\u30ed\u30c3\u30c8\u7ba1\u7406","text":"LotMapper.xml <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.sms.infrastructure.out.persistence.mapper.LotMapper\"&gt;\n\n    &lt;resultMap id=\"LotMasterResultMap\" type=\"com.example.sms.domain.model.quality.LotMaster\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"lotNumber\" column=\"\u30ed\u30c3\u30c8\u756a\u53f7\"/&gt;\n        &lt;result property=\"itemCode\" column=\"\u54c1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"lotType\" column=\"\u30ed\u30c3\u30c8\u7a2e\u5225\"\n                typeHandler=\"com.example.sms.infrastructure.out.persistence.typehandler.LotTypeTypeHandler\"/&gt;\n        &lt;result property=\"manufactureDate\" column=\"\u88fd\u9020\u65e5\"/&gt;\n        &lt;result property=\"expirationDate\" column=\"\u6709\u52b9\u671f\u9650\"/&gt;\n        &lt;result property=\"quantity\" column=\"\u6570\u91cf\"/&gt;\n        &lt;result property=\"warehouseCode\" column=\"\u5009\u5eab\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"remarks\" column=\"\u5099\u8003\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;resultMap id=\"LotCompositionResultMap\" type=\"com.example.sms.domain.model.quality.LotComposition\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"parentLotNumber\" column=\"\u89aa\u30ed\u30c3\u30c8\u756a\u53f7\"/&gt;\n        &lt;result property=\"childLotNumber\" column=\"\u5b50\u30ed\u30c3\u30c8\u756a\u53f7\"/&gt;\n        &lt;result property=\"usedQuantity\" column=\"\u4f7f\u7528\u6570\u91cf\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;select id=\"findByLotNumber\" resultMap=\"LotMasterResultMap\"&gt;\n        SELECT * FROM \"\u30ed\u30c3\u30c8\u30de\u30b9\u30bf\"\n        WHERE \"\u30ed\u30c3\u30c8\u756a\u53f7\" = #{lotNumber}\n    &lt;/select&gt;\n\n    &lt;select id=\"findByItemCode\" resultMap=\"LotMasterResultMap\"&gt;\n        SELECT * FROM \"\u30ed\u30c3\u30c8\u30de\u30b9\u30bf\"\n        WHERE \"\u54c1\u76ee\u30b3\u30fc\u30c9\" = #{itemCode}\n        ORDER BY \"\u88fd\u9020\u65e5\" DESC\n    &lt;/select&gt;\n\n    &lt;select id=\"findChildLots\" resultMap=\"LotCompositionResultMap\"&gt;\n        SELECT * FROM \"\u30ed\u30c3\u30c8\u69cb\u6210\"\n        WHERE \"\u89aa\u30ed\u30c3\u30c8\u756a\u53f7\" = #{parentLotNumber}\n    &lt;/select&gt;\n\n    &lt;select id=\"findParentLots\" resultMap=\"LotCompositionResultMap\"&gt;\n        SELECT * FROM \"\u30ed\u30c3\u30c8\u69cb\u6210\"\n        WHERE \"\u5b50\u30ed\u30c3\u30c8\u756a\u53f7\" = #{childLotNumber}\n    &lt;/select&gt;\n\n    &lt;!-- \u30c8\u30ec\u30fc\u30b9\u30d5\u30a9\u30ef\u30fc\u30c9: \u5b50\u30ed\u30c3\u30c8\u304b\u3089\u88fd\u9020\u30ed\u30c3\u30c8\u3001\u51fa\u8377\u5148\u3092\u8ffd\u8de1 --&gt;\n    &lt;select id=\"traceForward\" resultMap=\"LotMasterResultMap\"&gt;\n        WITH RECURSIVE lot_tree AS (\n            SELECT lm.*, 0 AS level\n            FROM \"\u30ed\u30c3\u30c8\u30de\u30b9\u30bf\" lm\n            WHERE lm.\"\u30ed\u30c3\u30c8\u756a\u53f7\" = #{lotNumber}\n\n            UNION ALL\n\n            SELECT lm.*, lt.level + 1\n            FROM \"\u30ed\u30c3\u30c8\u30de\u30b9\u30bf\" lm\n            JOIN \"\u30ed\u30c3\u30c8\u69cb\u6210\" lc ON lm.\"\u30ed\u30c3\u30c8\u756a\u53f7\" = lc.\"\u89aa\u30ed\u30c3\u30c8\u756a\u53f7\"\n            JOIN lot_tree lt ON lc.\"\u5b50\u30ed\u30c3\u30c8\u756a\u53f7\" = lt.\"\u30ed\u30c3\u30c8\u756a\u53f7\"\n            WHERE lt.level &amp;lt; 10\n        )\n        SELECT * FROM lot_tree\n        ORDER BY level ASC\n    &lt;/select&gt;\n\n    &lt;!-- \u30c8\u30ec\u30fc\u30b9\u30d0\u30c3\u30af: \u89aa\u30ed\u30c3\u30c8\u304b\u3089\u6750\u6599\u30ed\u30c3\u30c8\u3092\u8ffd\u8de1 --&gt;\n    &lt;select id=\"traceBack\" resultMap=\"LotMasterResultMap\"&gt;\n        WITH RECURSIVE lot_tree AS (\n            SELECT lm.*, 0 AS level\n            FROM \"\u30ed\u30c3\u30c8\u30de\u30b9\u30bf\" lm\n            WHERE lm.\"\u30ed\u30c3\u30c8\u756a\u53f7\" = #{lotNumber}\n\n            UNION ALL\n\n            SELECT lm.*, lt.level + 1\n            FROM \"\u30ed\u30c3\u30c8\u30de\u30b9\u30bf\" lm\n            JOIN \"\u30ed\u30c3\u30c8\u69cb\u6210\" lc ON lm.\"\u30ed\u30c3\u30c8\u756a\u53f7\" = lc.\"\u5b50\u30ed\u30c3\u30c8\u756a\u53f7\"\n            JOIN lot_tree lt ON lc.\"\u89aa\u30ed\u30c3\u30c8\u756a\u53f7\" = lt.\"\u30ed\u30c3\u30c8\u756a\u53f7\"\n            WHERE lt.level &amp;lt; 10\n        )\n        SELECT * FROM lot_tree\n        ORDER BY level ASC\n    &lt;/select&gt;\n\n    &lt;insert id=\"insert\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u30ed\u30c3\u30c8\u30de\u30b9\u30bf\" (\n            \"\u30ed\u30c3\u30c8\u756a\u53f7\", \"\u54c1\u76ee\u30b3\u30fc\u30c9\", \"\u30ed\u30c3\u30c8\u7a2e\u5225\",\n            \"\u88fd\u9020\u65e5\", \"\u6709\u52b9\u671f\u9650\", \"\u6570\u91cf\", \"\u5009\u5eab\u30b3\u30fc\u30c9\", \"\u5099\u8003\"\n        ) VALUES (\n            #{lotNumber}, #{itemCode},\n            #{lotType, typeHandler=com.example.sms.infrastructure.out.persistence.typehandler.LotTypeTypeHandler},\n            #{manufactureDate}, #{expirationDate}, #{quantity}, #{warehouseCode}, #{remarks}\n        )\n    &lt;/insert&gt;\n\n    &lt;insert id=\"insertComposition\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u30ed\u30c3\u30c8\u69cb\u6210\" (\n            \"\u89aa\u30ed\u30c3\u30c8\u756a\u53f7\", \"\u5b50\u30ed\u30c3\u30c8\u756a\u53f7\", \"\u4f7f\u7528\u6570\u91cf\"\n        ) VALUES (\n            #{parentLotNumber}, #{childLotNumber}, #{usedQuantity}\n        )\n    &lt;/insert&gt;\n\n    &lt;update id=\"update\"&gt;\n        UPDATE \"\u30ed\u30c3\u30c8\u30de\u30b9\u30bf\" SET\n            \"\u6570\u91cf\" = #{quantity},\n            \"\u5009\u5eab\u30b3\u30fc\u30c9\" = #{warehouseCode},\n            \"\u5099\u8003\" = #{remarks},\n            \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP\n        WHERE \"\u30ed\u30c3\u30c8\u756a\u53f7\" = #{lotNumber}\n    &lt;/update&gt;\n\n&lt;/mapper&gt;\n</code></pre>"},{"location":"article/part4/chapter29/#flyway_3","title":"Flyway \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff1a\u30ed\u30c3\u30c8\u7ba1\u7406","text":"V029_4__create_lot_tables.sql <pre><code>-- V029_4__create_lot_tables.sql\n\n-- \u30ed\u30c3\u30c8\u7a2e\u5225 ENUM\nCREATE TYPE \"\u30ed\u30c3\u30c8\u7a2e\u5225\" AS ENUM ('\u8cfc\u5165\u30ed\u30c3\u30c8', '\u88fd\u9020\u30ed\u30c3\u30c8');\n\n-- \u30ed\u30c3\u30c8\u30de\u30b9\u30bf\nCREATE TABLE \"\u30ed\u30c3\u30c8\u30de\u30b9\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u30ed\u30c3\u30c8\u756a\u53f7\" VARCHAR(30) UNIQUE NOT NULL,\n    \"\u54c1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u30ed\u30c3\u30c8\u7a2e\u5225\" \"\u30ed\u30c3\u30c8\u7a2e\u5225\" NOT NULL,\n    \"\u88fd\u9020\u65e5\" DATE,\n    \"\u6709\u52b9\u671f\u9650\" DATE,\n    \"\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u5009\u5eab\u30b3\u30fc\u30c9\" VARCHAR(20),\n    \"\u5099\u8003\" VARCHAR(500),\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"FK_\u30ed\u30c3\u30c8_\u54c1\u76ee\" FOREIGN KEY (\"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n        REFERENCES \"\u54c1\u76ee\u30de\u30b9\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n);\n\nCOMMENT ON TABLE \"\u30ed\u30c3\u30c8\u30de\u30b9\u30bf\" IS '\u30ed\u30c3\u30c8\u30de\u30b9\u30bf';\nCOMMENT ON COLUMN \"\u30ed\u30c3\u30c8\u30de\u30b9\u30bf\".\"\u30ed\u30c3\u30c8\u756a\u53f7\" IS '\u30ed\u30c3\u30c8\u756a\u53f7';\nCOMMENT ON COLUMN \"\u30ed\u30c3\u30c8\u30de\u30b9\u30bf\".\"\u30ed\u30c3\u30c8\u7a2e\u5225\" IS '\u30ed\u30c3\u30c8\u7a2e\u5225\uff08\u8cfc\u5165\u30ed\u30c3\u30c8/\u88fd\u9020\u30ed\u30c3\u30c8\uff09';\nCOMMENT ON COLUMN \"\u30ed\u30c3\u30c8\u30de\u30b9\u30bf\".\"\u88fd\u9020\u65e5\" IS '\u88fd\u9020\u65e5\uff08\u8cfc\u5165\u30ed\u30c3\u30c8\u306e\u5834\u5408\u306f\u5165\u8377\u65e5\uff09';\nCOMMENT ON COLUMN \"\u30ed\u30c3\u30c8\u30de\u30b9\u30bf\".\"\u6709\u52b9\u671f\u9650\" IS '\u6709\u52b9\u671f\u9650\uff08\u8cde\u5473\u671f\u9650\u3001\u4f7f\u7528\u671f\u9650\u306a\u3069\uff09';\n\n-- \u30ed\u30c3\u30c8\u69cb\u6210\uff08\u30c8\u30ec\u30fc\u30b5\u30d3\u30ea\u30c6\u30a3\u7528\uff09\nCREATE TABLE \"\u30ed\u30c3\u30c8\u69cb\u6210\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u89aa\u30ed\u30c3\u30c8\u756a\u53f7\" VARCHAR(30) NOT NULL,\n    \"\u5b50\u30ed\u30c3\u30c8\u756a\u53f7\" VARCHAR(30) NOT NULL,\n    \"\u4f7f\u7528\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"UK_\u30ed\u30c3\u30c8\u69cb\u6210\" UNIQUE (\"\u89aa\u30ed\u30c3\u30c8\u756a\u53f7\", \"\u5b50\u30ed\u30c3\u30c8\u756a\u53f7\"),\n    CONSTRAINT \"FK_\u30ed\u30c3\u30c8\u69cb\u6210_\u89aa\" FOREIGN KEY (\"\u89aa\u30ed\u30c3\u30c8\u756a\u53f7\")\n        REFERENCES \"\u30ed\u30c3\u30c8\u30de\u30b9\u30bf\"(\"\u30ed\u30c3\u30c8\u756a\u53f7\"),\n    CONSTRAINT \"FK_\u30ed\u30c3\u30c8\u69cb\u6210_\u5b50\" FOREIGN KEY (\"\u5b50\u30ed\u30c3\u30c8\u756a\u53f7\")\n        REFERENCES \"\u30ed\u30c3\u30c8\u30de\u30b9\u30bf\"(\"\u30ed\u30c3\u30c8\u756a\u53f7\")\n);\n\nCOMMENT ON TABLE \"\u30ed\u30c3\u30c8\u69cb\u6210\" IS '\u30ed\u30c3\u30c8\u69cb\u6210\uff08\u30c8\u30ec\u30fc\u30b5\u30d3\u30ea\u30c6\u30a3\u7528\uff09';\nCOMMENT ON COLUMN \"\u30ed\u30c3\u30c8\u69cb\u6210\".\"\u89aa\u30ed\u30c3\u30c8\u756a\u53f7\" IS '\u88fd\u9020\u30ed\u30c3\u30c8\uff08\u88fd\u54c1\u5074\uff09';\nCOMMENT ON COLUMN \"\u30ed\u30c3\u30c8\u69cb\u6210\".\"\u5b50\u30ed\u30c3\u30c8\u756a\u53f7\" IS '\u6d88\u8cbb\u30ed\u30c3\u30c8\uff08\u6750\u6599\u5074\uff09';\nCOMMENT ON COLUMN \"\u30ed\u30c3\u30c8\u69cb\u6210\".\"\u4f7f\u7528\u6570\u91cf\" IS '\u88fd\u9020\u306b\u4f7f\u7528\u3057\u305f\u6570\u91cf';\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"IDX_\u30ed\u30c3\u30c8_\u54c1\u76ee\" ON \"\u30ed\u30c3\u30c8\u30de\u30b9\u30bf\" (\"\u54c1\u76ee\u30b3\u30fc\u30c9\");\nCREATE INDEX \"IDX_\u30ed\u30c3\u30c8_\u88fd\u9020\u65e5\" ON \"\u30ed\u30c3\u30c8\u30de\u30b9\u30bf\" (\"\u88fd\u9020\u65e5\");\nCREATE INDEX \"IDX_\u30ed\u30c3\u30c8_\u6709\u52b9\u671f\u9650\" ON \"\u30ed\u30c3\u30c8\u30de\u30b9\u30bf\" (\"\u6709\u52b9\u671f\u9650\");\nCREATE INDEX \"IDX_\u30ed\u30c3\u30c8\u69cb\u6210_\u89aa\" ON \"\u30ed\u30c3\u30c8\u69cb\u6210\" (\"\u89aa\u30ed\u30c3\u30c8\u756a\u53f7\");\nCREATE INDEX \"IDX_\u30ed\u30c3\u30c8\u69cb\u6210_\u5b50\" ON \"\u30ed\u30c3\u30c8\u69cb\u6210\" (\"\u5b50\u30ed\u30c3\u30c8\u756a\u53f7\");\n</code></pre>"},{"location":"article/part4/chapter29/#er_3","title":"\u30ed\u30c3\u30c8\u7ba1\u7406\u306e ER \u56f3","text":""},{"location":"article/part4/chapter29/#_19","title":"\u30c8\u30ec\u30fc\u30b5\u30d3\u30ea\u30c6\u30a3\u30b5\u30fc\u30d3\u30b9","text":"TraceabilityService.java <pre><code>// src/main/java/com/example/sms/application/service/quality/TraceabilityService.java\npackage com.example.sms.application.service.quality;\n\nimport com.example.sms.domain.model.quality.LotMaster;\nimport com.example.sms.infrastructure.out.persistence.mapper.LotMapper;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.util.List;\n\n/**\n * \u30c8\u30ec\u30fc\u30b5\u30d3\u30ea\u30c6\u30a3\u30b5\u30fc\u30d3\u30b9\n */\n@Service\n@RequiredArgsConstructor\npublic class TraceabilityService {\n\n    private final LotMapper lotMapper;\n\n    /**\n     * \u30c8\u30ec\u30fc\u30b9\u30d5\u30a9\u30ef\u30fc\u30c9\n     * \u6307\u5b9a\u3055\u308c\u305f\u30ed\u30c3\u30c8\u304c\u4f7f\u7528\u3055\u308c\u305f\u88fd\u54c1\u30ed\u30c3\u30c8\u3092\u8ffd\u8de1\u3059\u308b\n     *\n     * @param lotNumber \u8ffd\u8de1\u5bfe\u8c61\u306e\u30ed\u30c3\u30c8\u756a\u53f7\n     * @return \u88fd\u54c1\u30ed\u30c3\u30c8\u306e\u30ea\u30b9\u30c8\n     */\n    @Transactional(readOnly = true)\n    public List&lt;LotMaster&gt; traceForward(String lotNumber) {\n        return lotMapper.traceForward(lotNumber);\n    }\n\n    /**\n     * \u30c8\u30ec\u30fc\u30b9\u30d0\u30c3\u30af\n     * \u6307\u5b9a\u3055\u308c\u305f\u88fd\u54c1\u30ed\u30c3\u30c8\u306b\u4f7f\u7528\u3055\u308c\u305f\u6750\u6599\u30ed\u30c3\u30c8\u3092\u8ffd\u8de1\u3059\u308b\n     *\n     * @param lotNumber \u8ffd\u8de1\u5bfe\u8c61\u306e\u30ed\u30c3\u30c8\u756a\u53f7\n     * @return \u6750\u6599\u30ed\u30c3\u30c8\u306e\u30ea\u30b9\u30c8\n     */\n    @Transactional(readOnly = true)\n    public List&lt;LotMaster&gt; traceBack(String lotNumber) {\n        return lotMapper.traceBack(lotNumber);\n    }\n\n    /**\n     * \u5f71\u97ff\u7bc4\u56f2\u306e\u8abf\u67fb\n     * \u4e0d\u826f\u30ed\u30c3\u30c8\u304c\u4f7f\u7528\u3055\u308c\u305f\u88fd\u54c1\u3068\u51fa\u8377\u5148\u3092\u7279\u5b9a\u3059\u308b\n     *\n     * @param defectiveLotNumber \u4e0d\u826f\u30ed\u30c3\u30c8\u756a\u53f7\n     * @return \u5f71\u97ff\u3092\u53d7\u3051\u305f\u30ed\u30c3\u30c8\u306e\u30ea\u30b9\u30c8\n     */\n    @Transactional(readOnly = true)\n    public List&lt;LotMaster&gt; investigateImpactRange(String defectiveLotNumber) {\n        // \u30c8\u30ec\u30fc\u30b9\u30d5\u30a9\u30ef\u30fc\u30c9\u3067\u5f71\u97ff\u7bc4\u56f2\u3092\u7279\u5b9a\n        return traceForward(defectiveLotNumber);\n    }\n\n    /**\n     * \u539f\u56e0\u7a76\u660e\n     * \u4e0d\u826f\u88fd\u54c1\u306e\u539f\u56e0\u3068\u306a\u3063\u305f\u6750\u6599\u30ed\u30c3\u30c8\u3092\u7279\u5b9a\u3059\u308b\n     *\n     * @param defectiveProductLotNumber \u4e0d\u826f\u88fd\u54c1\u30ed\u30c3\u30c8\u756a\u53f7\n     * @return \u539f\u56e0\u3068\u306a\u308a\u3046\u308b\u6750\u6599\u30ed\u30c3\u30c8\u306e\u30ea\u30b9\u30c8\n     */\n    @Transactional(readOnly = true)\n    public List&lt;LotMaster&gt; investigateCause(String defectiveProductLotNumber) {\n        // \u30c8\u30ec\u30fc\u30b9\u30d0\u30c3\u30af\u3067\u539f\u56e0\u3092\u8ffd\u8de1\n        return traceBack(defectiveProductLotNumber);\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter29/#er_4","title":"\u54c1\u8cea\u7ba1\u7406\u306e\u5168\u4f53 ER \u56f3","text":""},{"location":"article/part4/chapter29/#_20","title":"\u307e\u3068\u3081","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u54c1\u8cea\u7ba1\u7406\u306e\u8a2d\u8a08\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u307e\u3057\u305f\u3002</p>"},{"location":"article/part4/chapter29/#_21","title":"\u8a2d\u8a08\u306e\u30dd\u30a4\u30f3\u30c8","text":"<ol> <li>\u691c\u67fb\u306e\u7a2e\u985e\u3068\u76ee\u7684\u306e\u660e\u78ba\u5316</li> <li>\u53d7\u5165\u691c\u67fb\uff1a\u8cfc\u8cb7\u54c1\u306e\u54c1\u8cea\u78ba\u8a8d</li> <li>\u5de5\u7a0b\u691c\u67fb\uff1a\u88fd\u9020\u4e2d\u306e\u54c1\u8cea\u78ba\u8a8d</li> <li> <p>\u51fa\u8377\u691c\u67fb\uff1a\u51fa\u8377\u524d\u306e\u6700\u7d42\u54c1\u8cea\u78ba\u8a8d</p> </li> <li> <p>\u5171\u901a\u306e\u691c\u67fb\u5224\u5b9a</p> </li> <li>InspectionJudgment Enum \u3067\u5408\u683c/\u4e0d\u5408\u683c/\u4fdd\u7559\u3092\u7d71\u4e00\u7ba1\u7406</li> <li> <p>TypeHandler \u306b\u3088\u308b PostgreSQL ENUM \u578b\u3068\u306e\u9023\u643a</p> </li> <li> <p>\u691c\u67fb\u30c7\u30fc\u30bf\u69cb\u9020\u306e\u7d71\u4e00</p> </li> <li>\u30d8\u30c3\u30c0\u30fc\uff08\u691c\u67fb\u30c7\u30fc\u30bf\uff09\u3068\u660e\u7d30\uff08\u691c\u67fb\u7d50\u679c\u30c7\u30fc\u30bf\uff09\u306e\u5206\u96e2</li> <li> <p>\u6b20\u70b9\u30de\u30b9\u30bf\u306b\u3088\u308b\u4e0d\u826f\u7a2e\u985e\u306e\u7ba1\u7406</p> </li> <li> <p>\u30c8\u30ec\u30fc\u30b5\u30d3\u30ea\u30c6\u30a3\u306e\u5b9f\u73fe</p> </li> <li>\u30ed\u30c3\u30c8\u30de\u30b9\u30bf\u306b\u3088\u308b\u30ed\u30c3\u30c8\u60c5\u5831\u306e\u7ba1\u7406</li> <li>\u30ed\u30c3\u30c8\u69cb\u6210\u30c6\u30fc\u30d6\u30eb\u306b\u3088\u308b\u89aa\u5b50\u95a2\u4fc2\u306e\u7ba1\u7406</li> <li>\u518d\u5e30\u30af\u30a8\u30ea\u306b\u3088\u308b\u30c8\u30ec\u30fc\u30b9\u30d5\u30a9\u30ef\u30fc\u30c9/\u30c8\u30ec\u30fc\u30b9\u30d0\u30c3\u30af</li> </ol>"},{"location":"article/part4/chapter29/#_22","title":"\u6b21\u7ae0\u3078\u306e\u6a4b\u6e21\u3057","text":"<p>\u6b21\u7ae0\u3067\u306f\u3001\u88fd\u9020\u539f\u4fa1\u7ba1\u7406\u306e\u8a2d\u8a08\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u307e\u3059\u3002\u6a19\u6e96\u539f\u4fa1\u3068\u5b9f\u969b\u539f\u4fa1\u306e\u8a08\u7b97\u3001\u539f\u4fa1\u5dee\u7570\u5206\u6790\u306a\u3069\u3001\u88fd\u9020\u696d\u306e\u539f\u4fa1\u7ba1\u7406\u306b\u5fc5\u8981\u306a\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\u3092\u53d6\u308a\u4e0a\u3052\u307e\u3059\u3002</p> <p>\u2190 \u7b2c28\u7ae0\uff1a\u5728\u5eab\u7ba1\u7406\u306e\u8a2d\u8a08 | \u7b2c30\u7ae0\uff1a\u88fd\u9020\u539f\u4fa1\u7ba1\u7406\u306e\u8a2d\u8a08 \u2192</p>"},{"location":"article/part4/chapter30/","title":"\u7b2c30\u7ae0\uff1a\u88fd\u9020\u539f\u4fa1\u7ba1\u7406\u306e\u8a2d\u8a08","text":""},{"location":"article/part4/chapter30/#301","title":"30.1 \u539f\u4fa1\u8a08\u7b97\u306e\u6982\u8981","text":""},{"location":"article/part4/chapter30/#_1","title":"\u88fd\u9020\u539f\u4fa1\u306e\u69cb\u6210","text":"<p>\u88fd\u9020\u539f\u4fa1\u306f\u3001\u88fd\u54c1\u3092\u88fd\u9020\u3059\u308b\u305f\u3081\u306b\u767a\u751f\u3059\u308b\u3059\u3079\u3066\u306e\u30b3\u30b9\u30c8\u3092\u4f53\u7cfb\u7684\u306b\u628a\u63e1\u3059\u308b\u305f\u3081\u306e\u6982\u5ff5\u3067\u3059\u3002\u88fd\u9020\u539f\u4fa1\u306f\u5927\u304d\u304f\u76f4\u63a5\u8cbb\u3068\u9593\u63a5\u8cbb\uff08\u88fd\u9020\u9593\u63a5\u8cbb\uff09\u306b\u5206\u985e\u3055\u308c\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part4/chapter30/#_2","title":"\u539f\u4fa1\u8981\u7d20\u306e\u5206\u985e","text":"\u5206\u985e \u539f\u4fa1\u8981\u7d20 \u8aac\u660e \u4f8b \u76f4\u63a5\u6750\u6599\u8cbb \u88fd\u54c1\u306b\u76f4\u63a5\u4f7f\u7528\u3055\u308c\u308b\u6750\u6599 BOM \u306b\u57fa\u3065\u304d\u8a08\u7b97 \u4e3b\u8981\u6750\u6599\u3001\u90e8\u54c1 \u76f4\u63a5\u52b4\u52d9\u8cbb \u88fd\u9020\u4f5c\u696d\u8005\u306e\u8cc3\u91d1 \u5de5\u6570\u5b9f\u7e3e \u00d7 \u8cc3\u7387 \u88fd\u9020\u30e9\u30a4\u30f3\u306e\u4f5c\u696d\u8005 \u76f4\u63a5\u7d4c\u8cbb \u88fd\u54c1\u306b\u76f4\u63a5\u8ce6\u8ab2\u3067\u304d\u308b\u7d4c\u8cbb \u5916\u6ce8\u8cbb\u306a\u3069 \u5916\u6ce8\u52a0\u5de5\u8cbb\u3001\u7279\u8a31\u4f7f\u7528\u6599 \u9593\u63a5\u6750\u6599\u8cbb \u88fd\u54c1\u306b\u9593\u63a5\u7684\u306b\u4f7f\u7528\u3055\u308c\u308b\u6750\u6599 \u914d\u8ce6\u306b\u3088\u308a\u8a08\u7b97 \u6f64\u6ed1\u6cb9\u3001\u6d88\u8017\u5de5\u5177 \u9593\u63a5\u52b4\u52d9\u8cbb \u9593\u63a5\u4f5c\u696d\u8005\u306e\u8cc3\u91d1 \u914d\u8ce6\u306b\u3088\u308a\u8a08\u7b97 \u76e3\u7763\u8005\u3001\u54c1\u8cea\u7ba1\u7406\u8005 \u9593\u63a5\u7d4c\u8cbb \u88fd\u9020\u306b\u9593\u63a5\u7684\u306b\u767a\u751f\u3059\u308b\u7d4c\u8cbb \u914d\u8ce6\u306b\u3088\u308a\u8a08\u7b97 \u6e1b\u4fa1\u511f\u5374\u8cbb\u3001\u6c34\u9053\u5149\u71b1\u8cbb"},{"location":"article/part4/chapter30/#_3","title":"\u6a19\u6e96\u539f\u4fa1\u3068\u5b9f\u969b\u539f\u4fa1","text":"<p>\u539f\u4fa1\u8a08\u7b97\u306b\u306f\u3001\u6a19\u6e96\u539f\u4fa1\u8a08\u7b97\u3068\u5b9f\u969b\u539f\u4fa1\u8a08\u7b97\u306e2\u3064\u306e\u30a2\u30d7\u30ed\u30fc\u30c1\u304c\u3042\u308a\u307e\u3059\u3002</p> <p></p> \u533a\u5206 \u8aac\u660e \u7528\u9014 \u6a19\u6e96\u539f\u4fa1 \u4e8b\u524d\u306b\u8a2d\u5b9a\u3057\u305f\u76ee\u6a19\u539f\u4fa1 \u4e88\u7b97\u7ba1\u7406\u3001\u898b\u7a4d\u308a\u3001\u539f\u4fa1\u7d71\u5236 \u5b9f\u969b\u539f\u4fa1 \u5b9f\u969b\u306b\u767a\u751f\u3057\u305f\u539f\u4fa1 \u5b9f\u7e3e\u628a\u63e1\u3001\u539f\u4fa1\u5dee\u7570\u5206\u6790"},{"location":"article/part4/chapter30/#_4","title":"\u539f\u4fa1\u5dee\u7570\u5206\u6790","text":"<p>\u539f\u4fa1\u5dee\u7570\u306f\u3001\u6a19\u6e96\u539f\u4fa1\u3068\u5b9f\u969b\u539f\u4fa1\u306e\u5dee\u3068\u3057\u3066\u8a08\u7b97\u3055\u308c\u307e\u3059\u3002</p> <pre><code>\u539f\u4fa1\u5dee\u7570 = \u5b9f\u969b\u539f\u4fa1 - \u6a19\u6e96\u539f\u4fa1\n</code></pre> <p>\u5dee\u7570\u304c\u30d7\u30e9\u30b9\uff08\u4e0d\u5229\u5dee\u7570\uff09\u306e\u5834\u5408\u306f\u5b9f\u969b\u539f\u4fa1\u304c\u6a19\u6e96\u3092\u4e0a\u56de\u3063\u3066\u304a\u308a\u3001\u30de\u30a4\u30ca\u30b9\uff08\u6709\u5229\u5dee\u7570\uff09\u306e\u5834\u5408\u306f\u5b9f\u969b\u539f\u4fa1\u304c\u6a19\u6e96\u3092\u4e0b\u56de\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u793a\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part4/chapter30/#_5","title":"\u5dee\u7570\u306e\u8981\u56e0\u5206\u6790","text":"\u5dee\u7570\u7a2e\u985e \u8981\u56e0 \u8a08\u7b97\u5f0f \u4fa1\u683c\u5dee\u7570 \u6750\u6599\u306e\u8cfc\u5165\u5358\u4fa1\u306e\u5dee (\u5b9f\u969b\u5358\u4fa1 - \u6a19\u6e96\u5358\u4fa1) \u00d7 \u5b9f\u969b\u4f7f\u7528\u91cf \u6570\u91cf\u5dee\u7570 \u6750\u6599\u306e\u4f7f\u7528\u91cf\u306e\u5dee (\u5b9f\u969b\u4f7f\u7528\u91cf - \u6a19\u6e96\u4f7f\u7528\u91cf) \u00d7 \u6a19\u6e96\u5358\u4fa1 \u8cc3\u7387\u5dee\u7570 \u52b4\u50cd\u8005\u306e\u8cc3\u7387\u306e\u5dee (\u5b9f\u969b\u8cc3\u7387 - \u6a19\u6e96\u8cc3\u7387) \u00d7 \u5b9f\u969b\u4f5c\u696d\u6642\u9593 \u80fd\u7387\u5dee\u7570 \u4f5c\u696d\u52b9\u7387\u306e\u5dee (\u5b9f\u969b\u4f5c\u696d\u6642\u9593 - \u6a19\u6e96\u4f5c\u696d\u6642\u9593) \u00d7 \u6a19\u6e96\u8cc3\u7387"},{"location":"article/part4/chapter30/#302","title":"30.2 \u6750\u6599\u8cbb\u30fb\u52b4\u52d9\u8cbb\u30fb\u88fd\u9020\u9593\u63a5\u8cbb","text":""},{"location":"article/part4/chapter30/#_6","title":"\u6750\u6599\u8cbb\u306e\u8a08\u7b97\uff08\u76f4\u63a5\u6750\u6599\u8cbb\u30fb\u9593\u63a5\u6750\u6599\u8cbb\uff09","text":"<p>\u6750\u6599\u8cbb\u306f\u3001\u88fd\u54c1\u306e\u88fd\u9020\u306b\u4f7f\u7528\u3055\u308c\u305f\u6750\u6599\u306e\u6d88\u8cbb\u984d\u3067\u3059\u3002BOM\uff08\u90e8\u54c1\u8868\uff09\u3068\u6d88\u8cbb\u5b9f\u7e3e\u306b\u57fa\u3065\u3044\u3066\u8a08\u7b97\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part4/chapter30/#_7","title":"\u6750\u6599\u6d88\u8cbb\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3","text":"MaterialConsumption.java <pre><code>// src/main/java/com/example/sms/domain/model/cost/MaterialConsumption.java\npackage com.example.sms.domain.model.cost;\n\nimport lombok.*;\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n/**\n * \u6750\u6599\u6d88\u8cbb\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class MaterialConsumption {\n    private Long id;\n    private String workOrderNumber;\n    private String materialCode;\n    private LocalDate consumptionDate;\n    private BigDecimal consumptionQuantity;\n    private BigDecimal unitPrice;\n    private BigDecimal consumptionAmount;\n    private Boolean isDirect;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n}\n</code></pre>"},{"location":"article/part4/chapter30/#mybatis-mapper-xml","title":"MyBatis Mapper XML\uff1a\u6750\u6599\u6d88\u8cbb","text":"MaterialConsumptionMapper.xml <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.sms.infrastructure.out.persistence.mapper.MaterialConsumptionMapper\"&gt;\n\n    &lt;resultMap id=\"MaterialConsumptionResultMap\"\n               type=\"com.example.sms.domain.model.cost.MaterialConsumption\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"workOrderNumber\" column=\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\"/&gt;\n        &lt;result property=\"materialCode\" column=\"\u6750\u6599\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"consumptionDate\" column=\"\u6d88\u8cbb\u65e5\"/&gt;\n        &lt;result property=\"consumptionQuantity\" column=\"\u6d88\u8cbb\u6570\u91cf\"/&gt;\n        &lt;result property=\"unitPrice\" column=\"\u5358\u4fa1\"/&gt;\n        &lt;result property=\"consumptionAmount\" column=\"\u6d88\u8cbb\u91d1\u984d\"/&gt;\n        &lt;result property=\"isDirect\" column=\"\u76f4\u63a5\u6750\u6599\u30d5\u30e9\u30b0\"/&gt;\n        &lt;result property=\"remarks\" column=\"\u5099\u8003\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;select id=\"findByWorkOrderNumber\" resultMap=\"MaterialConsumptionResultMap\"&gt;\n        SELECT * FROM \"\u6750\u6599\u6d88\u8cbb\u30c7\u30fc\u30bf\"\n        WHERE \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" = #{workOrderNumber}\n        ORDER BY \"\u6d88\u8cbb\u65e5\" ASC\n    &lt;/select&gt;\n\n    &lt;select id=\"sumDirectMaterialCostByWorkOrderNumber\" resultType=\"java.math.BigDecimal\"&gt;\n        SELECT COALESCE(SUM(\"\u6d88\u8cbb\u91d1\u984d\"), 0)\n        FROM \"\u6750\u6599\u6d88\u8cbb\u30c7\u30fc\u30bf\"\n        WHERE \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" = #{workOrderNumber}\n          AND \"\u76f4\u63a5\u6750\u6599\u30d5\u30e9\u30b0\" = true\n    &lt;/select&gt;\n\n    &lt;select id=\"sumIndirectMaterialCostByPeriod\" resultType=\"java.math.BigDecimal\"&gt;\n        SELECT COALESCE(SUM(\"\u6d88\u8cbb\u91d1\u984d\"), 0)\n        FROM \"\u6750\u6599\u6d88\u8cbb\u30c7\u30fc\u30bf\"\n        WHERE \"\u6d88\u8cbb\u65e5\" BETWEEN #{startDate} AND #{endDate}\n          AND \"\u76f4\u63a5\u6750\u6599\u30d5\u30e9\u30b0\" = false\n    &lt;/select&gt;\n\n    &lt;insert id=\"insert\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u6750\u6599\u6d88\u8cbb\u30c7\u30fc\u30bf\" (\n            \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\", \"\u6750\u6599\u30b3\u30fc\u30c9\", \"\u6d88\u8cbb\u65e5\",\n            \"\u6d88\u8cbb\u6570\u91cf\", \"\u5358\u4fa1\", \"\u6d88\u8cbb\u91d1\u984d\", \"\u76f4\u63a5\u6750\u6599\u30d5\u30e9\u30b0\", \"\u5099\u8003\"\n        ) VALUES (\n            #{workOrderNumber}, #{materialCode}, #{consumptionDate},\n            #{consumptionQuantity}, #{unitPrice}, #{consumptionAmount},\n            #{isDirect}, #{remarks}\n        )\n    &lt;/insert&gt;\n\n&lt;/mapper&gt;\n</code></pre>"},{"location":"article/part4/chapter30/#flyway","title":"Flyway \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff1a\u6750\u6599\u6d88\u8cbb","text":"V030_1__create_material_consumption_tables.sql <pre><code>-- V030_1__create_material_consumption_tables.sql\n\n-- \u6750\u6599\u6d88\u8cbb\u30c7\u30fc\u30bf\nCREATE TABLE \"\u6750\u6599\u6d88\u8cbb\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u6750\u6599\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u6d88\u8cbb\u65e5\" DATE NOT NULL,\n    \"\u6d88\u8cbb\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u5358\u4fa1\" DECIMAL(15, 4) NOT NULL,\n    \"\u6d88\u8cbb\u91d1\u984d\" DECIMAL(15, 2) NOT NULL,\n    \"\u76f4\u63a5\u6750\u6599\u30d5\u30e9\u30b0\" BOOLEAN NOT NULL DEFAULT true,\n    \"\u5099\u8003\" VARCHAR(500),\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"FK_\u6750\u6599\u6d88\u8cbb_\u4f5c\u696d\u6307\u793a\" FOREIGN KEY (\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\")\n        REFERENCES \"\u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf\"(\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\"),\n    CONSTRAINT \"FK_\u6750\u6599\u6d88\u8cbb_\u54c1\u76ee\" FOREIGN KEY (\"\u6750\u6599\u30b3\u30fc\u30c9\")\n        REFERENCES \"\u54c1\u76ee\u30de\u30b9\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n);\n\nCOMMENT ON TABLE \"\u6750\u6599\u6d88\u8cbb\u30c7\u30fc\u30bf\" IS '\u6750\u6599\u6d88\u8cbb\u30c7\u30fc\u30bf';\nCOMMENT ON COLUMN \"\u6750\u6599\u6d88\u8cbb\u30c7\u30fc\u30bf\".\"\u76f4\u63a5\u6750\u6599\u30d5\u30e9\u30b0\" IS '\u76f4\u63a5\u6750\u6599=true, \u9593\u63a5\u6750\u6599=false';\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"IDX_\u6750\u6599\u6d88\u8cbb_\u4f5c\u696d\u6307\u793a\" ON \"\u6750\u6599\u6d88\u8cbb\u30c7\u30fc\u30bf\" (\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\");\nCREATE INDEX \"IDX_\u6750\u6599\u6d88\u8cbb_\u6d88\u8cbb\u65e5\" ON \"\u6750\u6599\u6d88\u8cbb\u30c7\u30fc\u30bf\" (\"\u6d88\u8cbb\u65e5\");\n</code></pre>"},{"location":"article/part4/chapter30/#_8","title":"\u52b4\u52d9\u8cbb\u306e\u8a08\u7b97\uff08\u76f4\u63a5\u52b4\u52d9\u8cbb\u30fb\u9593\u63a5\u52b4\u52d9\u8cbb\uff09","text":"<p>\u52b4\u52d9\u8cbb\u306f\u3001\u88fd\u9020\u306b\u95a2\u308f\u308b\u4f5c\u696d\u8005\u306e\u4eba\u4ef6\u8cbb\u3067\u3059\u3002\u5de5\u6570\u5b9f\u7e3e\u3068\u8cc3\u7387\u306b\u57fa\u3065\u3044\u3066\u8a08\u7b97\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part4/chapter30/#_9","title":"\u8cc3\u7387\u30de\u30b9\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3","text":"WageRate.java <pre><code>// src/main/java/com/example/sms/domain/model/cost/WageRate.java\npackage com.example.sms.domain.model.cost;\n\nimport lombok.*;\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n/**\n * \u8cc3\u7387\u30de\u30b9\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class WageRate {\n    private Long id;\n    private String workerCategoryCode;\n    private String workerCategoryName;\n    private LocalDate effectiveStartDate;\n    private LocalDate effectiveEndDate;\n    private BigDecimal hourlyRate;\n    private Boolean isDirect;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n}\n</code></pre>"},{"location":"article/part4/chapter30/#_10","title":"\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3","text":"LaborHours.java <pre><code>// src/main/java/com/example/sms/domain/model/cost/LaborHours.java\npackage com.example.sms.domain.model.cost;\n\nimport lombok.*;\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n/**\n * \u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class LaborHours {\n    private Long id;\n    private String workOrderNumber;\n    private String processCode;\n    private String workerCode;\n    private String workerCategoryCode;\n    private LocalDate workDate;\n    private BigDecimal workHours;\n    private BigDecimal hourlyRate;\n    private BigDecimal laborCost;\n    private Boolean isDirect;\n    private String remarks;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n}\n</code></pre>"},{"location":"article/part4/chapter30/#mybatis-mapper-xml_1","title":"MyBatis Mapper XML\uff1a\u5de5\u6570\u5b9f\u7e3e","text":"LaborHoursMapper.xml <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.sms.infrastructure.out.persistence.mapper.LaborHoursMapper\"&gt;\n\n    &lt;resultMap id=\"WageRateResultMap\"\n               type=\"com.example.sms.domain.model.cost.WageRate\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"workerCategoryCode\" column=\"\u4f5c\u696d\u8005\u533a\u5206\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"workerCategoryName\" column=\"\u4f5c\u696d\u8005\u533a\u5206\u540d\"/&gt;\n        &lt;result property=\"effectiveStartDate\" column=\"\u9069\u7528\u958b\u59cb\u65e5\"/&gt;\n        &lt;result property=\"effectiveEndDate\" column=\"\u9069\u7528\u7d42\u4e86\u65e5\"/&gt;\n        &lt;result property=\"hourlyRate\" column=\"\u6642\u9593\u5358\u4fa1\"/&gt;\n        &lt;result property=\"isDirect\" column=\"\u76f4\u63a5\u52b4\u52d9\u30d5\u30e9\u30b0\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;resultMap id=\"LaborHoursResultMap\"\n               type=\"com.example.sms.domain.model.cost.LaborHours\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"workOrderNumber\" column=\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\"/&gt;\n        &lt;result property=\"processCode\" column=\"\u5de5\u7a0b\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"workerCode\" column=\"\u4f5c\u696d\u8005\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"workerCategoryCode\" column=\"\u4f5c\u696d\u8005\u533a\u5206\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"workDate\" column=\"\u4f5c\u696d\u65e5\"/&gt;\n        &lt;result property=\"workHours\" column=\"\u4f5c\u696d\u6642\u9593\"/&gt;\n        &lt;result property=\"hourlyRate\" column=\"\u6642\u9593\u5358\u4fa1\"/&gt;\n        &lt;result property=\"laborCost\" column=\"\u52b4\u52d9\u8cbb\"/&gt;\n        &lt;result property=\"isDirect\" column=\"\u76f4\u63a5\u52b4\u52d9\u30d5\u30e9\u30b0\"/&gt;\n        &lt;result property=\"remarks\" column=\"\u5099\u8003\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;select id=\"findByWorkOrderNumber\" resultMap=\"LaborHoursResultMap\"&gt;\n        SELECT * FROM \"\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\"\n        WHERE \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" = #{workOrderNumber}\n        ORDER BY \"\u4f5c\u696d\u65e5\" ASC\n    &lt;/select&gt;\n\n    &lt;select id=\"sumDirectLaborCostByWorkOrderNumber\" resultType=\"java.math.BigDecimal\"&gt;\n        SELECT COALESCE(SUM(\"\u52b4\u52d9\u8cbb\"), 0)\n        FROM \"\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\"\n        WHERE \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" = #{workOrderNumber}\n          AND \"\u76f4\u63a5\u52b4\u52d9\u30d5\u30e9\u30b0\" = true\n    &lt;/select&gt;\n\n    &lt;select id=\"sumIndirectLaborCostByPeriod\" resultType=\"java.math.BigDecimal\"&gt;\n        SELECT COALESCE(SUM(\"\u52b4\u52d9\u8cbb\"), 0)\n        FROM \"\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\"\n        WHERE \"\u4f5c\u696d\u65e5\" BETWEEN #{startDate} AND #{endDate}\n          AND \"\u76f4\u63a5\u52b4\u52d9\u30d5\u30e9\u30b0\" = false\n    &lt;/select&gt;\n\n    &lt;select id=\"sumWorkHoursByWorkOrderNumber\" resultType=\"java.math.BigDecimal\"&gt;\n        SELECT COALESCE(SUM(\"\u4f5c\u696d\u6642\u9593\"), 0)\n        FROM \"\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\"\n        WHERE \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" = #{workOrderNumber}\n    &lt;/select&gt;\n\n    &lt;select id=\"findWageRateByCategory\" resultMap=\"WageRateResultMap\"&gt;\n        SELECT * FROM \"\u8cc3\u7387\u30de\u30b9\u30bf\"\n        WHERE \"\u4f5c\u696d\u8005\u533a\u5206\u30b3\u30fc\u30c9\" = #{workerCategoryCode}\n          AND \"\u9069\u7528\u958b\u59cb\u65e5\" &amp;lt;= #{targetDate}\n          AND (\"\u9069\u7528\u7d42\u4e86\u65e5\" IS NULL OR \"\u9069\u7528\u7d42\u4e86\u65e5\" &gt;= #{targetDate})\n        ORDER BY \"\u9069\u7528\u958b\u59cb\u65e5\" DESC\n        LIMIT 1\n    &lt;/select&gt;\n\n    &lt;insert id=\"insert\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\" (\n            \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\", \"\u5de5\u7a0b\u30b3\u30fc\u30c9\", \"\u4f5c\u696d\u8005\u30b3\u30fc\u30c9\", \"\u4f5c\u696d\u8005\u533a\u5206\u30b3\u30fc\u30c9\",\n            \"\u4f5c\u696d\u65e5\", \"\u4f5c\u696d\u6642\u9593\", \"\u6642\u9593\u5358\u4fa1\", \"\u52b4\u52d9\u8cbb\", \"\u76f4\u63a5\u52b4\u52d9\u30d5\u30e9\u30b0\", \"\u5099\u8003\"\n        ) VALUES (\n            #{workOrderNumber}, #{processCode}, #{workerCode}, #{workerCategoryCode},\n            #{workDate}, #{workHours}, #{hourlyRate}, #{laborCost}, #{isDirect}, #{remarks}\n        )\n    &lt;/insert&gt;\n\n&lt;/mapper&gt;\n</code></pre>"},{"location":"article/part4/chapter30/#flyway_1","title":"Flyway \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff1a\u52b4\u52d9\u8cbb","text":"V030_2__create_labor_cost_tables.sql <pre><code>-- V030_2__create_labor_cost_tables.sql\n\n-- \u8cc3\u7387\u30de\u30b9\u30bf\nCREATE TABLE \"\u8cc3\u7387\u30de\u30b9\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u4f5c\u696d\u8005\u533a\u5206\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u4f5c\u696d\u8005\u533a\u5206\u540d\" VARCHAR(100) NOT NULL,\n    \"\u9069\u7528\u958b\u59cb\u65e5\" DATE NOT NULL,\n    \"\u9069\u7528\u7d42\u4e86\u65e5\" DATE,\n    \"\u6642\u9593\u5358\u4fa1\" DECIMAL(15, 2) NOT NULL,\n    \"\u76f4\u63a5\u52b4\u52d9\u30d5\u30e9\u30b0\" BOOLEAN NOT NULL DEFAULT true,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"UK_\u8cc3\u7387_\u533a\u5206_\u9069\u7528\u958b\u59cb\u65e5\" UNIQUE (\"\u4f5c\u696d\u8005\u533a\u5206\u30b3\u30fc\u30c9\", \"\u9069\u7528\u958b\u59cb\u65e5\")\n);\n\nCOMMENT ON TABLE \"\u8cc3\u7387\u30de\u30b9\u30bf\" IS '\u8cc3\u7387\u30de\u30b9\u30bf';\nCOMMENT ON COLUMN \"\u8cc3\u7387\u30de\u30b9\u30bf\".\"\u6642\u9593\u5358\u4fa1\" IS '1\u6642\u9593\u3042\u305f\u308a\u306e\u8cc3\u7387';\nCOMMENT ON COLUMN \"\u8cc3\u7387\u30de\u30b9\u30bf\".\"\u76f4\u63a5\u52b4\u52d9\u30d5\u30e9\u30b0\" IS '\u76f4\u63a5\u52b4\u52d9=true, \u9593\u63a5\u52b4\u52d9=false';\n\n-- \u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\nCREATE TABLE \"\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u5de5\u7a0b\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u4f5c\u696d\u8005\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u4f5c\u696d\u8005\u533a\u5206\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u4f5c\u696d\u65e5\" DATE NOT NULL,\n    \"\u4f5c\u696d\u6642\u9593\" DECIMAL(5, 2) NOT NULL,\n    \"\u6642\u9593\u5358\u4fa1\" DECIMAL(15, 2) NOT NULL,\n    \"\u52b4\u52d9\u8cbb\" DECIMAL(15, 2) NOT NULL,\n    \"\u76f4\u63a5\u52b4\u52d9\u30d5\u30e9\u30b0\" BOOLEAN NOT NULL DEFAULT true,\n    \"\u5099\u8003\" VARCHAR(500),\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"FK_\u5de5\u6570\u5b9f\u7e3e_\u4f5c\u696d\u6307\u793a\" FOREIGN KEY (\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\")\n        REFERENCES \"\u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf\"(\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\"),\n    CONSTRAINT \"FK_\u5de5\u6570\u5b9f\u7e3e_\u5de5\u7a0b\" FOREIGN KEY (\"\u5de5\u7a0b\u30b3\u30fc\u30c9\")\n        REFERENCES \"\u5de5\u7a0b\u30de\u30b9\u30bf\"(\"\u5de5\u7a0b\u30b3\u30fc\u30c9\")\n);\n\nCOMMENT ON TABLE \"\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\" IS '\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf';\nCOMMENT ON COLUMN \"\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\".\"\u4f5c\u696d\u6642\u9593\" IS '\u4f5c\u696d\u6642\u9593\uff08\u6642\u9593\u5358\u4f4d\uff09';\nCOMMENT ON COLUMN \"\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\".\"\u52b4\u52d9\u8cbb\" IS '\u4f5c\u696d\u6642\u9593 \u00d7 \u6642\u9593\u5358\u4fa1';\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"IDX_\u5de5\u6570\u5b9f\u7e3e_\u4f5c\u696d\u6307\u793a\" ON \"\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\" (\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\");\nCREATE INDEX \"IDX_\u5de5\u6570\u5b9f\u7e3e_\u4f5c\u696d\u65e5\" ON \"\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\" (\"\u4f5c\u696d\u65e5\");\nCREATE INDEX \"IDX_\u5de5\u6570\u5b9f\u7e3e_\u4f5c\u696d\u8005\" ON \"\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\" (\"\u4f5c\u696d\u8005\u30b3\u30fc\u30c9\");\n</code></pre>"},{"location":"article/part4/chapter30/#_11","title":"\u88fd\u9020\u9593\u63a5\u8cbb\u306e\u914d\u8ce6","text":"<p>\u88fd\u9020\u9593\u63a5\u8cbb\u306f\u3001\u7279\u5b9a\u306e\u88fd\u54c1\u306b\u76f4\u63a5\u7d10\u4ed8\u3051\u3089\u308c\u306a\u3044\u8cbb\u7528\u3067\u3042\u308a\u3001\u4e00\u5b9a\u306e\u914d\u8ce6\u57fa\u6e96\u306b\u57fa\u3065\u3044\u3066\u5404\u88fd\u54c1\u306b\u914d\u5206\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part4/chapter30/#_12","title":"\u88fd\u9020\u9593\u63a5\u8cbb\u914d\u8ce6\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3","text":"OverheadAllocation.java <pre><code>// src/main/java/com/example/sms/domain/model/cost/OverheadAllocation.java\npackage com.example.sms.domain.model.cost;\n\nimport lombok.*;\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\n\n/**\n * \u88fd\u9020\u9593\u63a5\u8cbb\u914d\u8ce6\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class OverheadAllocation {\n    private Long id;\n    private String workOrderNumber;\n    private String accountingPeriod;\n    private String allocationBasis;\n    private BigDecimal basisAmount;\n    private BigDecimal allocationRate;\n    private BigDecimal allocatedAmount;\n    private LocalDateTime createdAt;\n}\n</code></pre>"},{"location":"article/part4/chapter30/#_13","title":"\u88fd\u9020\u9593\u63a5\u8cbb\u30de\u30b9\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3","text":"ManufacturingOverhead.java <pre><code>// src/main/java/com/example/sms/domain/model/cost/ManufacturingOverhead.java\npackage com.example.sms.domain.model.cost;\n\nimport lombok.*;\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\n\n/**\n * \u88fd\u9020\u9593\u63a5\u8cbb\u30de\u30b9\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class ManufacturingOverhead {\n    private Long id;\n    private String accountingPeriod;\n    private String costCategory;\n    private String costCategoryName;\n    private BigDecimal amount;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n}\n</code></pre>"},{"location":"article/part4/chapter30/#mybatis-mapper-xml_2","title":"MyBatis Mapper XML\uff1a\u88fd\u9020\u9593\u63a5\u8cbb","text":"OverheadMapper.xml <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.sms.infrastructure.out.persistence.mapper.OverheadMapper\"&gt;\n\n    &lt;resultMap id=\"ManufacturingOverheadResultMap\"\n               type=\"com.example.sms.domain.model.cost.ManufacturingOverhead\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"accountingPeriod\" column=\"\u4f1a\u8a08\u671f\u9593\"/&gt;\n        &lt;result property=\"costCategory\" column=\"\u8cbb\u7528\u533a\u5206\"/&gt;\n        &lt;result property=\"costCategoryName\" column=\"\u8cbb\u7528\u533a\u5206\u540d\"/&gt;\n        &lt;result property=\"amount\" column=\"\u91d1\u984d\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;resultMap id=\"OverheadAllocationResultMap\"\n               type=\"com.example.sms.domain.model.cost.OverheadAllocation\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"workOrderNumber\" column=\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\"/&gt;\n        &lt;result property=\"accountingPeriod\" column=\"\u4f1a\u8a08\u671f\u9593\"/&gt;\n        &lt;result property=\"allocationBasis\" column=\"\u914d\u8ce6\u57fa\u6e96\"/&gt;\n        &lt;result property=\"basisAmount\" column=\"\u57fa\u6e96\u91d1\u984d\"/&gt;\n        &lt;result property=\"allocationRate\" column=\"\u914d\u8ce6\u7387\"/&gt;\n        &lt;result property=\"allocatedAmount\" column=\"\u914d\u8ce6\u91d1\u984d\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;select id=\"sumOverheadByPeriod\" resultType=\"java.math.BigDecimal\"&gt;\n        SELECT COALESCE(SUM(\"\u91d1\u984d\"), 0)\n        FROM \"\u88fd\u9020\u9593\u63a5\u8cbb\u30de\u30b9\u30bf\"\n        WHERE \"\u4f1a\u8a08\u671f\u9593\" = #{accountingPeriod}\n    &lt;/select&gt;\n\n    &lt;select id=\"findAllocationByWorkOrderNumber\" resultMap=\"OverheadAllocationResultMap\"&gt;\n        SELECT * FROM \"\u88fd\u9020\u9593\u63a5\u8cbb\u914d\u8ce6\u30c7\u30fc\u30bf\"\n        WHERE \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" = #{workOrderNumber}\n        ORDER BY \"\u4f1a\u8a08\u671f\u9593\" ASC\n    &lt;/select&gt;\n\n    &lt;insert id=\"insertOverhead\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u88fd\u9020\u9593\u63a5\u8cbb\u30de\u30b9\u30bf\" (\n            \"\u4f1a\u8a08\u671f\u9593\", \"\u8cbb\u7528\u533a\u5206\", \"\u8cbb\u7528\u533a\u5206\u540d\", \"\u91d1\u984d\"\n        ) VALUES (\n            #{accountingPeriod}, #{costCategory}, #{costCategoryName}, #{amount}\n        )\n    &lt;/insert&gt;\n\n    &lt;insert id=\"insertAllocation\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u88fd\u9020\u9593\u63a5\u8cbb\u914d\u8ce6\u30c7\u30fc\u30bf\" (\n            \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\", \"\u4f1a\u8a08\u671f\u9593\", \"\u914d\u8ce6\u57fa\u6e96\",\n            \"\u57fa\u6e96\u91d1\u984d\", \"\u914d\u8ce6\u7387\", \"\u914d\u8ce6\u91d1\u984d\"\n        ) VALUES (\n            #{workOrderNumber}, #{accountingPeriod}, #{allocationBasis},\n            #{basisAmount}, #{allocationRate}, #{allocatedAmount}\n        )\n    &lt;/insert&gt;\n\n&lt;/mapper&gt;\n</code></pre>"},{"location":"article/part4/chapter30/#flyway_2","title":"Flyway \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff1a\u88fd\u9020\u9593\u63a5\u8cbb","text":"V030_3__create_overhead_tables.sql <pre><code>-- V030_3__create_overhead_tables.sql\n\n-- \u88fd\u9020\u9593\u63a5\u8cbb\u30de\u30b9\u30bf\nCREATE TABLE \"\u88fd\u9020\u9593\u63a5\u8cbb\u30de\u30b9\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u4f1a\u8a08\u671f\u9593\" VARCHAR(7) NOT NULL,\n    \"\u8cbb\u7528\u533a\u5206\" VARCHAR(20) NOT NULL,\n    \"\u8cbb\u7528\u533a\u5206\u540d\" VARCHAR(100) NOT NULL,\n    \"\u91d1\u984d\" DECIMAL(15, 2) NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"UK_\u88fd\u9020\u9593\u63a5\u8cbb_\u671f\u9593_\u533a\u5206\" UNIQUE (\"\u4f1a\u8a08\u671f\u9593\", \"\u8cbb\u7528\u533a\u5206\")\n);\n\nCOMMENT ON TABLE \"\u88fd\u9020\u9593\u63a5\u8cbb\u30de\u30b9\u30bf\" IS '\u88fd\u9020\u9593\u63a5\u8cbb\u30de\u30b9\u30bf';\nCOMMENT ON COLUMN \"\u88fd\u9020\u9593\u63a5\u8cbb\u30de\u30b9\u30bf\".\"\u4f1a\u8a08\u671f\u9593\" IS '\u4f1a\u8a08\u671f\u9593\uff08YYYY-MM\u5f62\u5f0f\uff09';\nCOMMENT ON COLUMN \"\u88fd\u9020\u9593\u63a5\u8cbb\u30de\u30b9\u30bf\".\"\u8cbb\u7528\u533a\u5206\" IS '\u8cbb\u7528\u533a\u5206\uff08\u9593\u63a5\u6750\u6599/\u9593\u63a5\u52b4\u52d9/\u6e1b\u4fa1\u511f\u5374/\u6c34\u9053\u5149\u71b1\u306a\u3069\uff09';\n\n-- \u88fd\u9020\u9593\u63a5\u8cbb\u914d\u8ce6\u30c7\u30fc\u30bf\nCREATE TABLE \"\u88fd\u9020\u9593\u63a5\u8cbb\u914d\u8ce6\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u4f1a\u8a08\u671f\u9593\" VARCHAR(7) NOT NULL,\n    \"\u914d\u8ce6\u57fa\u6e96\" VARCHAR(50) NOT NULL,\n    \"\u57fa\u6e96\u91d1\u984d\" DECIMAL(15, 2) NOT NULL,\n    \"\u914d\u8ce6\u7387\" DECIMAL(10, 6) NOT NULL,\n    \"\u914d\u8ce6\u91d1\u984d\" DECIMAL(15, 2) NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"UK_\u9593\u63a5\u8cbb\u914d\u8ce6_\u4f5c\u696d\u6307\u793a_\u671f\u9593\" UNIQUE (\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\", \"\u4f1a\u8a08\u671f\u9593\"),\n    CONSTRAINT \"FK_\u9593\u63a5\u8cbb\u914d\u8ce6_\u4f5c\u696d\u6307\u793a\" FOREIGN KEY (\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\")\n        REFERENCES \"\u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf\"(\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\")\n);\n\nCOMMENT ON TABLE \"\u88fd\u9020\u9593\u63a5\u8cbb\u914d\u8ce6\u30c7\u30fc\u30bf\" IS '\u88fd\u9020\u9593\u63a5\u8cbb\u914d\u8ce6\u30c7\u30fc\u30bf';\nCOMMENT ON COLUMN \"\u88fd\u9020\u9593\u63a5\u8cbb\u914d\u8ce6\u30c7\u30fc\u30bf\".\"\u914d\u8ce6\u57fa\u6e96\" IS '\u914d\u8ce6\u57fa\u6e96\uff08\u76f4\u63a5\u4f5c\u696d\u6642\u9593/\u6a5f\u68b0\u7a3c\u50cd\u6642\u9593/\u76f4\u63a5\u6750\u6599\u8cbb/\u76f4\u63a5\u52b4\u52d9\u8cbb\uff09';\nCOMMENT ON COLUMN \"\u88fd\u9020\u9593\u63a5\u8cbb\u914d\u8ce6\u30c7\u30fc\u30bf\".\"\u914d\u8ce6\u7387\" IS '\u88fd\u9020\u9593\u63a5\u8cbb \u00f7 \u914d\u8ce6\u57fa\u6e96\u7dcf\u984d';\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"IDX_\u88fd\u9020\u9593\u63a5\u8cbb_\u671f\u9593\" ON \"\u88fd\u9020\u9593\u63a5\u8cbb\u30de\u30b9\u30bf\" (\"\u4f1a\u8a08\u671f\u9593\");\nCREATE INDEX \"IDX_\u9593\u63a5\u8cbb\u914d\u8ce6_\u4f5c\u696d\u6307\u793a\" ON \"\u88fd\u9020\u9593\u63a5\u8cbb\u914d\u8ce6\u30c7\u30fc\u30bf\" (\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\");\n</code></pre>"},{"location":"article/part4/chapter30/#_14","title":"\u88fd\u54c1\u539f\u4fa1\u306e\u96c6\u8a08","text":"<p>\u88fd\u54c1\u539f\u4fa1\u306f\u3001\u76f4\u63a5\u8cbb\u3068\u9593\u63a5\u8cbb\u3092\u96c6\u8a08\u3057\u3066\u8a08\u7b97\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part4/chapter30/#_15","title":"\u6a19\u6e96\u539f\u4fa1\u30de\u30b9\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3","text":"StandardCost.java <pre><code>// src/main/java/com/example/sms/domain/model/cost/StandardCost.java\npackage com.example.sms.domain.model.cost;\n\nimport lombok.*;\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n/**\n * \u6a19\u6e96\u539f\u4fa1\u30de\u30b9\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class StandardCost {\n    private Long id;\n    private String itemCode;\n    private LocalDate effectiveStartDate;\n    private LocalDate effectiveEndDate;\n    private BigDecimal standardMaterialCost;\n    private BigDecimal standardLaborCost;\n    private BigDecimal standardExpense;\n    private BigDecimal standardManufacturingCost;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n}\n</code></pre>"},{"location":"article/part4/chapter30/#_16","title":"\u5b9f\u969b\u539f\u4fa1\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3","text":"ActualCost.java <pre><code>// src/main/java/com/example/sms/domain/model/cost/ActualCost.java\npackage com.example.sms.domain.model.cost;\n\nimport lombok.*;\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\n\n/**\n * \u5b9f\u969b\u539f\u4fa1\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class ActualCost {\n    private Long id;\n    private String workOrderNumber;\n    private String itemCode;\n    private BigDecimal completedQuantity;\n    private BigDecimal actualMaterialCost;\n    private BigDecimal actualLaborCost;\n    private BigDecimal actualExpense;\n    private BigDecimal actualManufacturingCost;\n    private BigDecimal unitCost;\n    private LocalDateTime createdAt;\n    private LocalDateTime updatedAt;\n}\n</code></pre>"},{"location":"article/part4/chapter30/#_17","title":"\u539f\u4fa1\u5dee\u7570\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3","text":"CostVariance.java <pre><code>// src/main/java/com/example/sms/domain/model/cost/CostVariance.java\npackage com.example.sms.domain.model.cost;\n\nimport lombok.*;\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\n\n/**\n * \u539f\u4fa1\u5dee\u7570\u30c7\u30fc\u30bf\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n */\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class CostVariance {\n    private Long id;\n    private String workOrderNumber;\n    private String itemCode;\n    private BigDecimal materialCostVariance;\n    private BigDecimal laborCostVariance;\n    private BigDecimal expenseVariance;\n    private BigDecimal totalVariance;\n    private LocalDateTime createdAt;\n}\n</code></pre>"},{"location":"article/part4/chapter30/#mybatis-mapper-xml_3","title":"MyBatis Mapper XML\uff1a\u539f\u4fa1\u7ba1\u7406","text":"CostMapper.xml <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.example.sms.infrastructure.out.persistence.mapper.CostMapper\"&gt;\n\n    &lt;resultMap id=\"StandardCostResultMap\"\n               type=\"com.example.sms.domain.model.cost.StandardCost\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"itemCode\" column=\"\u54c1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"effectiveStartDate\" column=\"\u9069\u7528\u958b\u59cb\u65e5\"/&gt;\n        &lt;result property=\"effectiveEndDate\" column=\"\u9069\u7528\u7d42\u4e86\u65e5\"/&gt;\n        &lt;result property=\"standardMaterialCost\" column=\"\u6a19\u6e96\u6750\u6599\u8cbb\"/&gt;\n        &lt;result property=\"standardLaborCost\" column=\"\u6a19\u6e96\u52b4\u52d9\u8cbb\"/&gt;\n        &lt;result property=\"standardExpense\" column=\"\u6a19\u6e96\u7d4c\u8cbb\"/&gt;\n        &lt;result property=\"standardManufacturingCost\" column=\"\u6a19\u6e96\u88fd\u9020\u539f\u4fa1\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;resultMap id=\"ActualCostResultMap\"\n               type=\"com.example.sms.domain.model.cost.ActualCost\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"workOrderNumber\" column=\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\"/&gt;\n        &lt;result property=\"itemCode\" column=\"\u54c1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"completedQuantity\" column=\"\u5b8c\u6210\u6570\u91cf\"/&gt;\n        &lt;result property=\"actualMaterialCost\" column=\"\u5b9f\u969b\u6750\u6599\u8cbb\"/&gt;\n        &lt;result property=\"actualLaborCost\" column=\"\u5b9f\u969b\u52b4\u52d9\u8cbb\"/&gt;\n        &lt;result property=\"actualExpense\" column=\"\u5b9f\u969b\u7d4c\u8cbb\"/&gt;\n        &lt;result property=\"actualManufacturingCost\" column=\"\u5b9f\u969b\u88fd\u9020\u539f\u4fa1\"/&gt;\n        &lt;result property=\"unitCost\" column=\"\u5358\u4f4d\u539f\u4fa1\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n        &lt;result property=\"updatedAt\" column=\"\u66f4\u65b0\u65e5\u6642\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;resultMap id=\"CostVarianceResultMap\"\n               type=\"com.example.sms.domain.model.cost.CostVariance\"&gt;\n        &lt;id property=\"id\" column=\"ID\"/&gt;\n        &lt;result property=\"workOrderNumber\" column=\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\"/&gt;\n        &lt;result property=\"itemCode\" column=\"\u54c1\u76ee\u30b3\u30fc\u30c9\"/&gt;\n        &lt;result property=\"materialCostVariance\" column=\"\u6750\u6599\u8cbb\u5dee\u7570\"/&gt;\n        &lt;result property=\"laborCostVariance\" column=\"\u52b4\u52d9\u8cbb\u5dee\u7570\"/&gt;\n        &lt;result property=\"expenseVariance\" column=\"\u7d4c\u8cbb\u5dee\u7570\"/&gt;\n        &lt;result property=\"totalVariance\" column=\"\u7dcf\u5dee\u7570\"/&gt;\n        &lt;result property=\"createdAt\" column=\"\u4f5c\u6210\u65e5\u6642\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;select id=\"findStandardCostByItemCode\" resultMap=\"StandardCostResultMap\"&gt;\n        SELECT * FROM \"\u6a19\u6e96\u539f\u4fa1\u30de\u30b9\u30bf\"\n        WHERE \"\u54c1\u76ee\u30b3\u30fc\u30c9\" = #{itemCode}\n          AND \"\u9069\u7528\u958b\u59cb\u65e5\" &amp;lt;= #{targetDate}\n          AND (\"\u9069\u7528\u7d42\u4e86\u65e5\" IS NULL OR \"\u9069\u7528\u7d42\u4e86\u65e5\" &gt;= #{targetDate})\n        ORDER BY \"\u9069\u7528\u958b\u59cb\u65e5\" DESC\n        LIMIT 1\n    &lt;/select&gt;\n\n    &lt;select id=\"findActualCostByWorkOrderNumber\" resultMap=\"ActualCostResultMap\"&gt;\n        SELECT * FROM \"\u5b9f\u969b\u539f\u4fa1\u30c7\u30fc\u30bf\"\n        WHERE \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" = #{workOrderNumber}\n    &lt;/select&gt;\n\n    &lt;select id=\"findCostVarianceByWorkOrderNumber\" resultMap=\"CostVarianceResultMap\"&gt;\n        SELECT * FROM \"\u539f\u4fa1\u5dee\u7570\u30c7\u30fc\u30bf\"\n        WHERE \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" = #{workOrderNumber}\n    &lt;/select&gt;\n\n    &lt;insert id=\"insertStandardCost\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u6a19\u6e96\u539f\u4fa1\u30de\u30b9\u30bf\" (\n            \"\u54c1\u76ee\u30b3\u30fc\u30c9\", \"\u9069\u7528\u958b\u59cb\u65e5\", \"\u9069\u7528\u7d42\u4e86\u65e5\",\n            \"\u6a19\u6e96\u6750\u6599\u8cbb\", \"\u6a19\u6e96\u52b4\u52d9\u8cbb\", \"\u6a19\u6e96\u7d4c\u8cbb\", \"\u6a19\u6e96\u88fd\u9020\u539f\u4fa1\"\n        ) VALUES (\n            #{itemCode}, #{effectiveStartDate}, #{effectiveEndDate},\n            #{standardMaterialCost}, #{standardLaborCost},\n            #{standardExpense}, #{standardManufacturingCost}\n        )\n    &lt;/insert&gt;\n\n    &lt;insert id=\"insertActualCost\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u5b9f\u969b\u539f\u4fa1\u30c7\u30fc\u30bf\" (\n            \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\", \"\u54c1\u76ee\u30b3\u30fc\u30c9\", \"\u5b8c\u6210\u6570\u91cf\",\n            \"\u5b9f\u969b\u6750\u6599\u8cbb\", \"\u5b9f\u969b\u52b4\u52d9\u8cbb\", \"\u5b9f\u969b\u7d4c\u8cbb\",\n            \"\u5b9f\u969b\u88fd\u9020\u539f\u4fa1\", \"\u5358\u4f4d\u539f\u4fa1\"\n        ) VALUES (\n            #{workOrderNumber}, #{itemCode}, #{completedQuantity},\n            #{actualMaterialCost}, #{actualLaborCost}, #{actualExpense},\n            #{actualManufacturingCost}, #{unitCost}\n        )\n    &lt;/insert&gt;\n\n    &lt;insert id=\"insertCostVariance\" useGeneratedKeys=\"true\" keyProperty=\"id\" keyColumn=\"ID\"&gt;\n        INSERT INTO \"\u539f\u4fa1\u5dee\u7570\u30c7\u30fc\u30bf\" (\n            \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\", \"\u54c1\u76ee\u30b3\u30fc\u30c9\",\n            \"\u6750\u6599\u8cbb\u5dee\u7570\", \"\u52b4\u52d9\u8cbb\u5dee\u7570\", \"\u7d4c\u8cbb\u5dee\u7570\", \"\u7dcf\u5dee\u7570\"\n        ) VALUES (\n            #{workOrderNumber}, #{itemCode},\n            #{materialCostVariance}, #{laborCostVariance},\n            #{expenseVariance}, #{totalVariance}\n        )\n    &lt;/insert&gt;\n\n    &lt;update id=\"updateActualCost\"&gt;\n        UPDATE \"\u5b9f\u969b\u539f\u4fa1\u30c7\u30fc\u30bf\" SET\n            \"\u5b8c\u6210\u6570\u91cf\" = #{completedQuantity},\n            \"\u5b9f\u969b\u6750\u6599\u8cbb\" = #{actualMaterialCost},\n            \"\u5b9f\u969b\u52b4\u52d9\u8cbb\" = #{actualLaborCost},\n            \"\u5b9f\u969b\u7d4c\u8cbb\" = #{actualExpense},\n            \"\u5b9f\u969b\u88fd\u9020\u539f\u4fa1\" = #{actualManufacturingCost},\n            \"\u5358\u4f4d\u539f\u4fa1\" = #{unitCost},\n            \"\u66f4\u65b0\u65e5\u6642\" = CURRENT_TIMESTAMP\n        WHERE \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" = #{workOrderNumber}\n    &lt;/update&gt;\n\n&lt;/mapper&gt;\n</code></pre>"},{"location":"article/part4/chapter30/#flyway_3","title":"Flyway \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff1a\u539f\u4fa1\u7ba1\u7406","text":"V030_4__create_cost_tables.sql <pre><code>-- V030_4__create_cost_tables.sql\n\n-- \u6a19\u6e96\u539f\u4fa1\u30de\u30b9\u30bf\nCREATE TABLE \"\u6a19\u6e96\u539f\u4fa1\u30de\u30b9\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u54c1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u9069\u7528\u958b\u59cb\u65e5\" DATE NOT NULL,\n    \"\u9069\u7528\u7d42\u4e86\u65e5\" DATE,\n    \"\u6a19\u6e96\u6750\u6599\u8cbb\" DECIMAL(15, 2) NOT NULL,\n    \"\u6a19\u6e96\u52b4\u52d9\u8cbb\" DECIMAL(15, 2) NOT NULL,\n    \"\u6a19\u6e96\u7d4c\u8cbb\" DECIMAL(15, 2) NOT NULL,\n    \"\u6a19\u6e96\u88fd\u9020\u539f\u4fa1\" DECIMAL(15, 2) NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"UK_\u6a19\u6e96\u539f\u4fa1_\u54c1\u76ee_\u9069\u7528\u958b\u59cb\u65e5\" UNIQUE (\"\u54c1\u76ee\u30b3\u30fc\u30c9\", \"\u9069\u7528\u958b\u59cb\u65e5\"),\n    CONSTRAINT \"FK_\u6a19\u6e96\u539f\u4fa1_\u54c1\u76ee\" FOREIGN KEY (\"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n        REFERENCES \"\u54c1\u76ee\u30de\u30b9\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n);\n\nCOMMENT ON TABLE \"\u6a19\u6e96\u539f\u4fa1\u30de\u30b9\u30bf\" IS '\u6a19\u6e96\u539f\u4fa1\u30de\u30b9\u30bf';\nCOMMENT ON COLUMN \"\u6a19\u6e96\u539f\u4fa1\u30de\u30b9\u30bf\".\"\u6a19\u6e96\u6750\u6599\u8cbb\" IS '\u6a19\u6e96\u6750\u6599\u8cbb\uff08\u5358\u4f4d\u3042\u305f\u308a\uff09';\nCOMMENT ON COLUMN \"\u6a19\u6e96\u539f\u4fa1\u30de\u30b9\u30bf\".\"\u6a19\u6e96\u52b4\u52d9\u8cbb\" IS '\u6a19\u6e96\u52b4\u52d9\u8cbb\uff08\u5358\u4f4d\u3042\u305f\u308a\uff09';\nCOMMENT ON COLUMN \"\u6a19\u6e96\u539f\u4fa1\u30de\u30b9\u30bf\".\"\u6a19\u6e96\u7d4c\u8cbb\" IS '\u6a19\u6e96\u7d4c\u8cbb\uff08\u5358\u4f4d\u3042\u305f\u308a\uff09';\nCOMMENT ON COLUMN \"\u6a19\u6e96\u539f\u4fa1\u30de\u30b9\u30bf\".\"\u6a19\u6e96\u88fd\u9020\u539f\u4fa1\" IS '\u6a19\u6e96\u88fd\u9020\u539f\u4fa1\uff08\u5358\u4f4d\u3042\u305f\u308a\uff09= \u6750\u6599\u8cbb + \u52b4\u52d9\u8cbb + \u7d4c\u8cbb';\n\n-- \u5b9f\u969b\u539f\u4fa1\u30c7\u30fc\u30bf\nCREATE TABLE \"\u5b9f\u969b\u539f\u4fa1\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u54c1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u5b8c\u6210\u6570\u91cf\" DECIMAL(15, 2) NOT NULL,\n    \"\u5b9f\u969b\u6750\u6599\u8cbb\" DECIMAL(15, 2) NOT NULL,\n    \"\u5b9f\u969b\u52b4\u52d9\u8cbb\" DECIMAL(15, 2) NOT NULL,\n    \"\u5b9f\u969b\u7d4c\u8cbb\" DECIMAL(15, 2) NOT NULL,\n    \"\u5b9f\u969b\u88fd\u9020\u539f\u4fa1\" DECIMAL(15, 2) NOT NULL,\n    \"\u5358\u4f4d\u539f\u4fa1\" DECIMAL(15, 4) NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    \"\u66f4\u65b0\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"UK_\u5b9f\u969b\u539f\u4fa1_\u4f5c\u696d\u6307\u793a\" UNIQUE (\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\"),\n    CONSTRAINT \"FK_\u5b9f\u969b\u539f\u4fa1_\u4f5c\u696d\u6307\u793a\" FOREIGN KEY (\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\")\n        REFERENCES \"\u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf\"(\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\"),\n    CONSTRAINT \"FK_\u5b9f\u969b\u539f\u4fa1_\u54c1\u76ee\" FOREIGN KEY (\"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n        REFERENCES \"\u54c1\u76ee\u30de\u30b9\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n);\n\nCOMMENT ON TABLE \"\u5b9f\u969b\u539f\u4fa1\u30c7\u30fc\u30bf\" IS '\u5b9f\u969b\u539f\u4fa1\u30c7\u30fc\u30bf';\nCOMMENT ON COLUMN \"\u5b9f\u969b\u539f\u4fa1\u30c7\u30fc\u30bf\".\"\u5358\u4f4d\u539f\u4fa1\" IS '\u5b9f\u969b\u88fd\u9020\u539f\u4fa1 \u00f7 \u5b8c\u6210\u6570\u91cf';\n\n-- \u539f\u4fa1\u5dee\u7570\u30c7\u30fc\u30bf\nCREATE TABLE \"\u539f\u4fa1\u5dee\u7570\u30c7\u30fc\u30bf\" (\n    \"ID\" SERIAL PRIMARY KEY,\n    \"\u4f5c\u696d\u6307\u793a\u756a\u53f7\" VARCHAR(20) NOT NULL,\n    \"\u54c1\u76ee\u30b3\u30fc\u30c9\" VARCHAR(20) NOT NULL,\n    \"\u6750\u6599\u8cbb\u5dee\u7570\" DECIMAL(15, 2) NOT NULL,\n    \"\u52b4\u52d9\u8cbb\u5dee\u7570\" DECIMAL(15, 2) NOT NULL,\n    \"\u7d4c\u8cbb\u5dee\u7570\" DECIMAL(15, 2) NOT NULL,\n    \"\u7dcf\u5dee\u7570\" DECIMAL(15, 2) NOT NULL,\n    \"\u4f5c\u6210\u65e5\u6642\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    CONSTRAINT \"UK_\u539f\u4fa1\u5dee\u7570_\u4f5c\u696d\u6307\u793a\" UNIQUE (\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\"),\n    CONSTRAINT \"FK_\u539f\u4fa1\u5dee\u7570_\u4f5c\u696d\u6307\u793a\" FOREIGN KEY (\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\")\n        REFERENCES \"\u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf\"(\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\"),\n    CONSTRAINT \"FK_\u539f\u4fa1\u5dee\u7570_\u54c1\u76ee\" FOREIGN KEY (\"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n        REFERENCES \"\u54c1\u76ee\u30de\u30b9\u30bf\"(\"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n);\n\nCOMMENT ON TABLE \"\u539f\u4fa1\u5dee\u7570\u30c7\u30fc\u30bf\" IS '\u539f\u4fa1\u5dee\u7570\u30c7\u30fc\u30bf';\nCOMMENT ON COLUMN \"\u539f\u4fa1\u5dee\u7570\u30c7\u30fc\u30bf\".\"\u6750\u6599\u8cbb\u5dee\u7570\" IS '\u5b9f\u969b\u6750\u6599\u8cbb - \u6a19\u6e96\u6750\u6599\u8cbb \u00d7 \u5b8c\u6210\u6570\u91cf';\nCOMMENT ON COLUMN \"\u539f\u4fa1\u5dee\u7570\u30c7\u30fc\u30bf\".\"\u52b4\u52d9\u8cbb\u5dee\u7570\" IS '\u5b9f\u969b\u52b4\u52d9\u8cbb - \u6a19\u6e96\u52b4\u52d9\u8cbb \u00d7 \u5b8c\u6210\u6570\u91cf';\nCOMMENT ON COLUMN \"\u539f\u4fa1\u5dee\u7570\u30c7\u30fc\u30bf\".\"\u7d4c\u8cbb\u5dee\u7570\" IS '\u5b9f\u969b\u7d4c\u8cbb - \u6a19\u6e96\u7d4c\u8cbb \u00d7 \u5b8c\u6210\u6570\u91cf';\nCOMMENT ON COLUMN \"\u539f\u4fa1\u5dee\u7570\u30c7\u30fc\u30bf\".\"\u7dcf\u5dee\u7570\" IS '\u6750\u6599\u8cbb\u5dee\u7570 + \u52b4\u52d9\u8cbb\u5dee\u7570 + \u7d4c\u8cbb\u5dee\u7570';\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nCREATE INDEX \"IDX_\u6a19\u6e96\u539f\u4fa1_\u54c1\u76ee\" ON \"\u6a19\u6e96\u539f\u4fa1\u30de\u30b9\u30bf\" (\"\u54c1\u76ee\u30b3\u30fc\u30c9\");\nCREATE INDEX \"IDX_\u5b9f\u969b\u539f\u4fa1_\u4f5c\u696d\u6307\u793a\" ON \"\u5b9f\u969b\u539f\u4fa1\u30c7\u30fc\u30bf\" (\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\");\nCREATE INDEX \"IDX_\u539f\u4fa1\u5dee\u7570_\u4f5c\u696d\u6307\u793a\" ON \"\u539f\u4fa1\u5dee\u7570\u30c7\u30fc\u30bf\" (\"\u4f5c\u696d\u6307\u793a\u756a\u53f7\");\n</code></pre>"},{"location":"article/part4/chapter30/#_18","title":"\u539f\u4fa1\u8a08\u7b97\u30b5\u30fc\u30d3\u30b9","text":"CostCalculationService.java <pre><code>// src/main/java/com/example/sms/application/service/cost/CostCalculationService.java\npackage com.example.sms.application.service.cost;\n\nimport com.example.sms.domain.model.cost.*;\nimport com.example.sms.infrastructure.out.persistence.mapper.*;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.math.BigDecimal;\nimport java.math.RoundingMode;\nimport java.time.LocalDate;\n\n/**\n * \u539f\u4fa1\u8a08\u7b97\u30b5\u30fc\u30d3\u30b9\n */\n@Service\n@RequiredArgsConstructor\npublic class CostCalculationService {\n\n    private final CostMapper costMapper;\n    private final MaterialConsumptionMapper materialConsumptionMapper;\n    private final LaborHoursMapper laborHoursMapper;\n    private final OverheadMapper overheadMapper;\n    private final WorkOrderMapper workOrderMapper;\n\n    /**\n     * \u5b9f\u969b\u539f\u4fa1\u3092\u8a08\u7b97\u3059\u308b\n     *\n     * @param workOrderNumber \u4f5c\u696d\u6307\u793a\u756a\u53f7\n     * @return \u5b9f\u969b\u539f\u4fa1\u30c7\u30fc\u30bf\n     */\n    @Transactional\n    public ActualCost calculateActualCost(String workOrderNumber) {\n        // 1. \u6750\u6599\u8cbb\u306e\u8a08\u7b97: \u76f4\u63a5\u6750\u6599\u8cbb\u3092\u96c6\u8a08\n        BigDecimal materialCost = calculateMaterialCost(workOrderNumber);\n\n        // 2. \u52b4\u52d9\u8cbb\u306e\u8a08\u7b97: \u76f4\u63a5\u52b4\u52d9\u8cbb\u3092\u96c6\u8a08\n        BigDecimal laborCost = calculateLaborCost(workOrderNumber);\n\n        // 3. \u7d4c\u8cbb\u306e\u8a08\u7b97: \u88fd\u9020\u9593\u63a5\u8cbb\u914d\u8ce6\u984d\u3092\u96c6\u8a08\n        BigDecimal expense = calculateExpense(workOrderNumber);\n\n        // 4. \u5b8c\u6210\u6570\u91cf\u306e\u53d6\u5f97\n        BigDecimal completedQuantity = getCompletedQuantity(workOrderNumber);\n\n        // 5. \u88fd\u9020\u539f\u4fa1\u30fb\u5358\u4f4d\u539f\u4fa1\u306e\u8a08\u7b97\n        BigDecimal totalCost = materialCost.add(laborCost).add(expense);\n        BigDecimal unitCost = completedQuantity.compareTo(BigDecimal.ZERO) &gt; 0\n                ? totalCost.divide(completedQuantity, 4, RoundingMode.HALF_UP)\n                : BigDecimal.ZERO;\n\n        // 6. \u5b9f\u969b\u539f\u4fa1\u30c7\u30fc\u30bf\u3092\u4fdd\u5b58\n        ActualCost actualCost = ActualCost.builder()\n                .workOrderNumber(workOrderNumber)\n                .itemCode(getItemCode(workOrderNumber))\n                .completedQuantity(completedQuantity)\n                .actualMaterialCost(materialCost)\n                .actualLaborCost(laborCost)\n                .actualExpense(expense)\n                .actualManufacturingCost(totalCost)\n                .unitCost(unitCost)\n                .build();\n\n        costMapper.insertActualCost(actualCost);\n        return actualCost;\n    }\n\n    /**\n     * \u539f\u4fa1\u5dee\u7570\u3092\u5206\u6790\u3059\u308b\n     *\n     * @param workOrderNumber \u4f5c\u696d\u6307\u793a\u756a\u53f7\n     * @return \u539f\u4fa1\u5dee\u7570\u30c7\u30fc\u30bf\n     */\n    @Transactional\n    public CostVariance analyzeCostVariance(String workOrderNumber) {\n        ActualCost actualCost = costMapper.findActualCostByWorkOrderNumber(workOrderNumber);\n        StandardCost standardCost = costMapper.findStandardCostByItemCode(\n                actualCost.getItemCode(), LocalDate.now());\n\n        // \u6a19\u6e96\u539f\u4fa1\u7dcf\u984d\uff08\u5358\u4f4d\u539f\u4fa1 \u00d7 \u5b8c\u6210\u6570\u91cf\uff09\n        BigDecimal standardTotal = standardCost.getStandardManufacturingCost()\n                .multiply(actualCost.getCompletedQuantity());\n\n        // \u6750\u6599\u8cbb\u5dee\u7570\n        BigDecimal materialVariance = actualCost.getActualMaterialCost()\n                .subtract(standardCost.getStandardMaterialCost()\n                        .multiply(actualCost.getCompletedQuantity()));\n\n        // \u52b4\u52d9\u8cbb\u5dee\u7570\n        BigDecimal laborVariance = actualCost.getActualLaborCost()\n                .subtract(standardCost.getStandardLaborCost()\n                        .multiply(actualCost.getCompletedQuantity()));\n\n        // \u7d4c\u8cbb\u5dee\u7570\n        BigDecimal expenseVariance = actualCost.getActualExpense()\n                .subtract(standardCost.getStandardExpense()\n                        .multiply(actualCost.getCompletedQuantity()));\n\n        // \u7dcf\u5dee\u7570\n        BigDecimal totalVariance = actualCost.getActualManufacturingCost()\n                .subtract(standardTotal);\n\n        CostVariance variance = CostVariance.builder()\n                .workOrderNumber(workOrderNumber)\n                .itemCode(actualCost.getItemCode())\n                .materialCostVariance(materialVariance)\n                .laborCostVariance(laborVariance)\n                .expenseVariance(expenseVariance)\n                .totalVariance(totalVariance)\n                .build();\n\n        costMapper.insertCostVariance(variance);\n        return variance;\n    }\n\n    /**\n     * \u88fd\u9020\u9593\u63a5\u8cbb\u3092\u914d\u8ce6\u3059\u308b\n     *\n     * @param accountingPeriod \u4f1a\u8a08\u671f\u9593\n     * @param allocationBasis \u914d\u8ce6\u57fa\u6e96\n     */\n    @Transactional\n    public void allocateOverhead(String accountingPeriod, String allocationBasis) {\n        // \u88fd\u9020\u9593\u63a5\u8cbb\u7dcf\u984d\u3092\u53d6\u5f97\n        BigDecimal totalOverhead = overheadMapper.sumOverheadByPeriod(accountingPeriod);\n\n        // \u914d\u8ce6\u57fa\u6e96\u7dcf\u984d\u3092\u53d6\u5f97\uff08\u4f8b: \u76f4\u63a5\u4f5c\u696d\u6642\u9593\u306e\u5834\u5408\uff09\n        BigDecimal totalBasis = getTotalAllocationBasis(accountingPeriod, allocationBasis);\n\n        if (totalBasis.compareTo(BigDecimal.ZERO) == 0) {\n            return;\n        }\n\n        // \u914d\u8ce6\u7387\u3092\u8a08\u7b97\n        BigDecimal allocationRate = totalOverhead.divide(totalBasis, 6, RoundingMode.HALF_UP);\n\n        // \u5404\u4f5c\u696d\u6307\u793a\u306b\u914d\u8ce6\n        // \u5b9f\u88c5\u7701\u7565: \u5404\u4f5c\u696d\u6307\u793a\u306e\u914d\u8ce6\u57fa\u6e96\u984d\u3092\u53d6\u5f97\u3057\u3001\u914d\u8ce6\u984d\u3092\u8a08\u7b97\u3057\u3066\u767b\u9332\n    }\n\n    private BigDecimal calculateMaterialCost(String workOrderNumber) {\n        return materialConsumptionMapper.sumDirectMaterialCostByWorkOrderNumber(workOrderNumber);\n    }\n\n    private BigDecimal calculateLaborCost(String workOrderNumber) {\n        return laborHoursMapper.sumDirectLaborCostByWorkOrderNumber(workOrderNumber);\n    }\n\n    private BigDecimal calculateExpense(String workOrderNumber) {\n        // \u88fd\u9020\u9593\u63a5\u8cbb\u914d\u8ce6\u984d\u3092\u53d6\u5f97\n        var allocations = overheadMapper.findAllocationByWorkOrderNumber(workOrderNumber);\n        return allocations.stream()\n                .map(OverheadAllocation::getAllocatedAmount)\n                .reduce(BigDecimal.ZERO, BigDecimal::add);\n    }\n\n    private BigDecimal getCompletedQuantity(String workOrderNumber) {\n        // \u4f5c\u696d\u6307\u793a\u304b\u3089\u5b8c\u6210\u6570\u91cf\u3092\u53d6\u5f97\n        return workOrderMapper.getCompletedQuantity(workOrderNumber);\n    }\n\n    private String getItemCode(String workOrderNumber) {\n        return workOrderMapper.getItemCode(workOrderNumber);\n    }\n\n    private BigDecimal getTotalAllocationBasis(String accountingPeriod, String allocationBasis) {\n        // \u914d\u8ce6\u57fa\u6e96\u306b\u5fdc\u3058\u3066\u7dcf\u984d\u3092\u8a08\u7b97\n        // \u5b9f\u88c5\u7701\u7565\n        return BigDecimal.ZERO;\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter30/#er","title":"\u539f\u4fa1\u7ba1\u7406\u306e ER \u56f3","text":""},{"location":"article/part4/chapter30/#_19","title":"\u307e\u3068\u3081","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u88fd\u9020\u539f\u4fa1\u7ba1\u7406\u306e\u8a2d\u8a08\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u307e\u3057\u305f\u3002</p>"},{"location":"article/part4/chapter30/#_20","title":"\u8a2d\u8a08\u306e\u30dd\u30a4\u30f3\u30c8","text":"<ol> <li>\u539f\u4fa1\u8981\u7d20\u306e\u4f53\u7cfb\u7684\u306a\u7ba1\u7406</li> <li>\u76f4\u63a5\u8cbb\uff08\u6750\u6599\u8cbb\u3001\u52b4\u52d9\u8cbb\u3001\u7d4c\u8cbb\uff09\u3068\u9593\u63a5\u8cbb\u306e\u5206\u96e2</li> <li> <p>\u5404\u539f\u4fa1\u8981\u7d20\u306e\u30c8\u30ec\u30fc\u30b5\u30d3\u30ea\u30c6\u30a3\u78ba\u4fdd</p> </li> <li> <p>\u6a19\u6e96\u539f\u4fa1\u3068\u5b9f\u969b\u539f\u4fa1\u306e\u5bfe\u6bd4</p> </li> <li>\u6a19\u6e96\u539f\u4fa1\u30de\u30b9\u30bf\u306b\u3088\u308b\u76ee\u6a19\u539f\u4fa1\u306e\u8a2d\u5b9a</li> <li>\u5b9f\u969b\u539f\u4fa1\u30c7\u30fc\u30bf\u306b\u3088\u308b\u5b9f\u7e3e\u306e\u628a\u63e1</li> <li> <p>\u539f\u4fa1\u5dee\u7570\u5206\u6790\u306b\u3088\u308b\u6539\u5584\u6d3b\u52d5\u306e\u652f\u63f4</p> </li> <li> <p>\u88fd\u9020\u9593\u63a5\u8cbb\u306e\u914d\u8ce6</p> </li> <li>\u914d\u8ce6\u57fa\u6e96\uff08\u76f4\u63a5\u4f5c\u696d\u6642\u9593\u3001\u6a5f\u68b0\u7a3c\u50cd\u6642\u9593\u306a\u3069\uff09\u306e\u8a2d\u5b9a</li> <li> <p>\u914d\u8ce6\u7387\u306e\u8a08\u7b97\u3068\u5404\u88fd\u54c1\u3078\u306e\u914d\u5206</p> </li> <li> <p>\u539f\u4fa1\u8a08\u7b97\u30b5\u30fc\u30d3\u30b9</p> </li> <li>\u6750\u6599\u8cbb\u3001\u52b4\u52d9\u8cbb\u3001\u88fd\u9020\u9593\u63a5\u8cbb\u306e\u96c6\u8a08</li> <li>\u88fd\u9020\u539f\u4fa1\u30fb\u5358\u4f4d\u539f\u4fa1\u306e\u8a08\u7b97</li> <li>\u539f\u4fa1\u5dee\u7570\u5206\u6790\u306e\u81ea\u52d5\u5316</li> </ol>"},{"location":"article/part4/chapter30/#_21","title":"\u6b21\u7ae0\u3078\u306e\u6a4b\u6e21\u3057","text":"<p>\u6b21\u7ae0\u3067\u306f\u3001E \u793e\u4e8b\u4f8b\u3092\u901a\u3058\u3066\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u5177\u4f53\u7684\u306a\u30c7\u30fc\u30bf\u8a2d\u8a08\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002\u7cbe\u5bc6\u6a5f\u68b0\u90e8\u54c1\u88fd\u9020\u696d\u306b\u304a\u3051\u308b\u5b9f\u8df5\u7684\u306a\u30c7\u30fc\u30bf\u69cb\u9020\u3068\u30b7\u30fc\u30c9\u30c7\u30fc\u30bf\u306e\u5b9f\u88c5\u3092\u53d6\u308a\u4e0a\u3052\u307e\u3059\u3002</p> <p>\u2190 \u7b2c29\u7ae0\uff1a\u54c1\u8cea\u7ba1\u7406\u306e\u8a2d\u8a08 | \u7b2c31\u7ae0\uff1a\u751f\u7523\u7ba1\u7406\u30c7\u30fc\u30bf\u8a2d\u8a08\uff08E\u793e\u4e8b\u4f8b\uff09 \u2192</p>"},{"location":"article/part4/chapter31/","title":"\u7b2c31\u7ae0\uff1a\u751f\u7523\u7ba1\u7406\u30c7\u30fc\u30bf\u8a2d\u8a08\uff08E\u793e\u4e8b\u4f8b\uff09","text":""},{"location":"article/part4/chapter31/#311-e","title":"31.1 E\u793e\u306e\u6982\u8981","text":""},{"location":"article/part4/chapter31/#_1","title":"\u4f1a\u793e\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\uff08\u7cbe\u5bc6\u6a5f\u68b0\u90e8\u54c1\u88fd\u9020\u696d\uff09","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u67b6\u7a7a\u306e\u88fd\u9020\u696d E \u793e\uff08\u7cbe\u5bc6\u6a5f\u68b0\u90e8\u54c1\u30e1\u30fc\u30ab\u30fc\uff09\u306e\u4e8b\u4f8b\u3092\u57fa\u306b\u3001\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306b\u9069\u3057\u305f\u30ea\u30a2\u30eb\u306a\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u8a2d\u8a08\u3068\u5b9f\u88c5\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002</p> \u9805\u76ee \u5185\u5bb9 \u793e\u540d E \u7cbe\u5bc6\u5de5\u696d\u682a\u5f0f\u4f1a\u793e\uff08\u67b6\u7a7a\uff09 \u696d\u7a2e \u7cbe\u5bc6\u6a5f\u68b0\u90e8\u54c1\u88fd\u9020\u696d \u4e3b\u8981\u88fd\u54c1 \u7523\u696d\u7528\u6a5f\u68b0\u90e8\u54c1\u3001\u7cbe\u5bc6\u30b7\u30e3\u30d5\u30c8\u3001\u30ae\u30a2\u30dc\u30c3\u30af\u30b9 \u5f93\u696d\u54e1\u6570 \u7d0450\u540d \u751f\u7523\u5f62\u614b \u898b\u8fbc\u751f\u7523\uff08MTS\uff09+ \u53d7\u6ce8\u751f\u7523\uff08MTO\uff09"},{"location":"article/part4/chapter31/#50","title":"\u4f01\u696d\u6982\u8981\uff08\u5f93\u696d\u54e1\u7d0450\u540d\uff09","text":"<p>E \u793e\u306f\u3001\u7523\u696d\u7528\u6a5f\u68b0\u5411\u3051\u306e\u7cbe\u5bc6\u90e8\u54c1\u3092\u88fd\u9020\u3059\u308b\u4e2d\u5c0f\u4f01\u696d\u3067\u3059\u3002\u9ad8\u7cbe\u5ea6\u306a\u52a0\u5de5\u6280\u8853\u3092\u5f37\u307f\u3068\u3057\u3001\u591a\u54c1\u7a2e\u5c11\u91cf\u751f\u7523\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part4/chapter31/#_2","title":"\u4e3b\u8981\u306a\u88fd\u54c1\u30e9\u30a4\u30f3\u30ca\u30c3\u30d7","text":"\u88fd\u54c1\u533a\u5206 \u88fd\u54c1\u4f8b \u7279\u5fb4 \u7cbe\u5bc6\u30b7\u30e3\u30d5\u30c8 PROD-A001 \u9ad8\u7cbe\u5ea6\u306e\u5186\u7b52\u90e8\u54c1\u3001\u30e1\u30c3\u30ad\u51e6\u7406\u3042\u308a \u30ae\u30a2\u30dc\u30c3\u30af\u30b9 PROD-B001 \u8907\u6570\u306e\u534a\u88fd\u54c1\u3092\u7d44\u307f\u7acb\u3066 \u7cbe\u5bc6\u30d7\u30ec\u30fc\u30c8 PROD-C001 \u677f\u91d1\u52a0\u5de5\u54c1"},{"location":"article/part4/chapter31/#_3","title":"\u751f\u7523\u306e\u7279\u5fb4\uff08\u591a\u54c1\u7a2e\u5c11\u91cf\u30fb\u53d7\u6ce8\u751f\u7523\u578b\uff09","text":"<p>E \u793e\u306e\u751f\u7523\u306b\u306f\u4ee5\u4e0b\u306e\u7279\u5fb4\u304c\u3042\u308a\u307e\u3059\uff1a</p> <ol> <li>BOM \u968e\u5c64\u304c\u6df1\u3044: \u88fd\u54c1 \u2192 \u534a\u88fd\u54c1 \u2192 \u90e8\u54c1\u30fb\u6750\u6599\u306e\u591a\u6bb5\u968e\u69cb\u6210</li> <li>\u5916\u6ce8\u52a0\u5de5\u304c\u591a\u3044: \u30e1\u30c3\u30ad\u51e6\u7406\u3001\u71b1\u51e6\u7406\u306f\u5916\u6ce8\u4f9d\u5b58</li> <li>\u54c1\u8cea\u7ba1\u7406\u304c\u53b3\u683c: \u5de5\u7a0b\u691c\u67fb\u3001\u51fa\u8377\u691c\u67fb\u3092\u5fb9\u5e95</li> <li>\u5728\u5eab\u7ba1\u7406\u304c\u91cd\u8981: \u6750\u6599\u3001\u90e8\u54c1\u3001\u534a\u88fd\u54c1\u3001\u88fd\u54c1\u306e4\u5c64\u5728\u5eab</li> </ol> <p></p>"},{"location":"article/part4/chapter31/#_4","title":"\u5916\u6ce8\u6d3b\u7528\uff08\u30e1\u30c3\u30ad\u51e6\u7406\u30fb\u71b1\u51e6\u7406\uff09","text":"<p>E \u793e\u3067\u306f\u3001\u7279\u6b8a\u306a\u8868\u9762\u51e6\u7406\u3092\u5916\u6ce8\u5148\u306b\u59d4\u8a17\u3057\u3066\u3044\u307e\u3059\u3002</p> \u5916\u6ce8\u5148 \u51e6\u7406\u5185\u5bb9 \u5bfe\u8c61\u54c1\u76ee \u30e1\u30c3\u30ad\u5de5\u696d\u6240\uff08OUT-001\uff09 \u30e1\u30c3\u30ad\u51e6\u7406 \u52a0\u5de5\u6e08\u307f\u30b7\u30e3\u30d5\u30c8 \u71b1\u51e6\u7406\u30bb\u30f3\u30bf\u30fc\uff08OUT-002\uff09 \u71b1\u51e6\u7406 \u99c6\u52d5\u30ae\u30a2\u3001\u5f93\u52d5\u30ae\u30a2"},{"location":"article/part4/chapter31/#312","title":"31.2 \u7d44\u7e54\u69cb\u6210","text":""},{"location":"article/part4/chapter31/#_5","title":"\u7d44\u7e54\u56f3\uff08\u55b6\u696d\u90e8\u30fb\u751f\u7523\u7ba1\u7406\u90e8\u30fb\u88fd\u9020\u90e8\u30fb\u54c1\u8cea\u7ba1\u7406\u90e8\u30fb\u8cfc\u8cb7\u90e8\u30fb\u5009\u5eab\u90e8\u30fb\u5916\u6ce8\u7ba1\u7406\u90e8\uff09","text":"<pre><code>E\u7cbe\u5bc6\u5de5\u696d\u682a\u5f0f\u4f1a\u793e\n\u251c\u2500\u2500 \u55b6\u696d\u90e8\uff08SALES\uff09\n\u251c\u2500\u2500 \u751f\u7523\u7ba1\u7406\u90e8\uff08PROD-PLAN\uff09\n\u251c\u2500\u2500 \u88fd\u9020\u90e8\uff08MFG\uff09\n\u251c\u2500\u2500 \u54c1\u8cea\u7ba1\u7406\u90e8\uff08QUALITY\uff09\n\u251c\u2500\u2500 \u8cfc\u8cb7\u90e8\uff08PURCHASE\uff09\n\u251c\u2500\u2500 \u5009\u5eab\u90e8\uff08WAREHOUSE\uff09\n\u2514\u2500\u2500 \u5916\u6ce8\u7ba1\u7406\u90e8\uff08OUTSOURCE\uff09\n</code></pre>"},{"location":"article/part4/chapter31/#_6","title":"\u90e8\u9580\u30de\u30b9\u30bf\u306e\u968e\u5c64\u69cb\u9020","text":"<p>\u90e8\u9580\u30de\u30b9\u30bf\u306f\u4ee5\u4e0b\u306e\u30c7\u30fc\u30bf\u69cb\u9020\u3067\u7ba1\u7406\u3057\u307e\u3059\u3002</p> \u90e8\u9580\u30b3\u30fc\u30c9 \u90e8\u9580\u540d \u5f79\u5272 SALES \u55b6\u696d\u90e8 \u53d7\u6ce8\u7ba1\u7406\u3001\u9867\u5ba2\u5bfe\u5fdc PROD-PLAN \u751f\u7523\u7ba1\u7406\u90e8 \u751f\u7523\u8a08\u753b\u3001MRP MFG \u88fd\u9020\u90e8 \u88fd\u9020\u4f5c\u696d\u3001\u5de5\u7a0b\u7ba1\u7406 QUALITY \u54c1\u8cea\u7ba1\u7406\u90e8 \u54c1\u8cea\u691c\u67fb\u3001\u4e0d\u826f\u7ba1\u7406 PURCHASE \u8cfc\u8cb7\u90e8 \u767a\u6ce8\u3001\u4ed5\u5165\u5148\u7ba1\u7406 WAREHOUSE \u5009\u5eab\u90e8 \u5728\u5eab\u7ba1\u7406\u3001\u5165\u51fa\u5eab OUTSOURCE \u5916\u6ce8\u7ba1\u7406\u90e8 \u5916\u6ce8\u624b\u914d\u3001\u9032\u6357\u7ba1\u7406"},{"location":"article/part4/chapter31/#_7","title":"\u62c5\u5f53\u8005\u306e\u914d\u7f6e","text":"<p>\u5404\u90e8\u9580\u306b\u914d\u7f6e\u3055\u308c\u308b\u62c5\u5f53\u8005\u306e\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u3067\u3059\u3002</p> \u62c5\u5f53\u8005\u30b3\u30fc\u30c9 \u6c0f\u540d \u6240\u5c5e\u90e8\u9580 EMP-001 \u7530\u4e2d \u592a\u90ce \u88fd\u9020\u90e8 EMP-002 \u9234\u6728 \u4e00\u90ce \u88fd\u9020\u90e8 EMP-003 \u4f50\u85e4 \u6b21\u90ce \u88fd\u9020\u90e8 EMP-004 \u9ad8\u6a4b \u4e09\u90ce \u88fd\u9020\u90e8 EMP-005 \u4f0a\u85e4 \u56db\u90ce \u88fd\u9020\u90e8 EMP-006 \u6e21\u8fba \u4e94\u90ce \u54c1\u8cea\u7ba1\u7406\u90e8 EMP-007 \u5c71\u672c \u82b1\u5b50 \u54c1\u8cea\u7ba1\u7406\u90e8 EMP-008 \u4e2d\u6751 \u7f8e\u54b2 \u751f\u7523\u7ba1\u7406\u90e8 EMP-009 \u5c0f\u6797 \u5065\u4e00 \u8cfc\u8cb7\u90e8 EMP-010 \u52a0\u85e4 \u6b63 \u5009\u5eab\u90e8 EMP-011 \u5409\u7530 \u8aa0 \u5916\u6ce8\u7ba1\u7406\u90e8 EMP-012 \u5c71\u7530 \u6d69\u4e8c \u55b6\u696d\u90e8"},{"location":"article/part4/chapter31/#313","title":"31.3 \u30c7\u30fc\u30bf\u69cb\u9020\u306e\u8a2d\u8a08","text":""},{"location":"article/part4/chapter31/#prod-semi-part-mat-","title":"\u54c1\u76ee\u30b3\u30fc\u30c9\u4f53\u7cfb\uff08PROD-/SEMI-/PART-/MAT-\uff09","text":"<p>\u54c1\u76ee\u306f\u3001\u63a5\u982d\u8f9e\u306b\u3088\u3063\u3066\u533a\u5206\u3092\u8b58\u5225\u3067\u304d\u308b\u4f53\u7cfb\u3092\u63a1\u7528\u3057\u3066\u3044\u307e\u3059\u3002</p> \u63a5\u982d\u8f9e \u533a\u5206 \u4f8b \u8aac\u660e PROD- \u88fd\u54c1 PROD-A001 \u8ca9\u58f2\u53ef\u80fd\u306a\u5b8c\u6210\u54c1 SEMI- \u534a\u88fd\u54c1 SEMI-A001 \u88fd\u9020\u9014\u4e2d\u306e\u4e2d\u9593\u54c1 PART- \u90e8\u54c1 PART-001 \u8cfc\u5165\u90e8\u54c1 MAT- \u6750\u6599 MAT-001 \u539f\u6750\u6599\u3001\u5305\u88c5\u6750"},{"location":"article/part4/chapter31/#_8","title":"\u54c1\u76ee\u30de\u30b9\u30bf\u306e\u968e\u5c64\u69cb\u9020","text":"<pre><code>\u88fd\u54c1\uff08PROD-\uff09\n\u251c\u2500\u2500 PROD-A001 \u7cbe\u5bc6\u30b7\u30e3\u30d5\u30c8A\n\u251c\u2500\u2500 PROD-B001 \u30ae\u30a2\u30dc\u30c3\u30af\u30b9\u30a2\u30bb\u30f3\u30d6\u30ea\n\u2514\u2500\u2500 PROD-C001 \u7cbe\u5bc6\u30d7\u30ec\u30fc\u30c8\n\n\u534a\u88fd\u54c1\uff08SEMI-\uff09\n\u251c\u2500\u2500 SEMI-A001 \u52a0\u5de5\u6e08\u307f\u30b7\u30e3\u30d5\u30c8\n\u251c\u2500\u2500 SEMI-B001 \u30ae\u30a2\u30dc\u30c3\u30af\u30b9\u672c\u4f53\n\u251c\u2500\u2500 SEMI-B002 \u99c6\u52d5\u30ae\u30a2\n\u251c\u2500\u2500 SEMI-B003 \u5f93\u52d5\u30ae\u30a2\n\u2514\u2500\u2500 SEMI-C001 \u52a0\u5de5\u6e08\u307f\u30d7\u30ec\u30fc\u30c8\n\n\u90e8\u54c1\uff08PART-\uff09\n\u251c\u2500\u2500 PART-001 \u30d9\u30a2\u30ea\u30f3\u30b0 6205\n\u251c\u2500\u2500 PART-002 \u30aa\u30a4\u30eb\u30b7\u30fc\u30eb \u03c620\n\u251c\u2500\u2500 PART-003 \u6a19\u6e96\u30b7\u30e3\u30d5\u30c8 \u03c610\n\u251c\u2500\u2500 PART-004 \u30aa\u30a4\u30eb\u30b7\u30fc\u30eb \u03c630\n\u251c\u2500\u2500 PART-005 \u30dc\u30eb\u30c8\u30bb\u30c3\u30c8 M6\n\u251c\u2500\u2500 PART-006 \u30ef\u30c3\u30b7\u30e3\u30fc\u30bb\u30c3\u30c8\n\u251c\u2500\u2500 PART-007 O\u30ea\u30f3\u30b0 \u03c625\n\u2514\u2500\u2500 PART-008 \u30d4\u30f3 \u03c63\n\n\u6750\u6599\uff08MAT-\uff09\n\u251c\u2500\u2500 MAT-001 \u4e38\u68d2\u6750 SUS304 \u03c620\n\u251c\u2500\u2500 MAT-002 \u30a2\u30eb\u30df\u30c0\u30a4\u30ad\u30e3\u30b9\u30c8\u7d20\u6750\n\u251c\u2500\u2500 MAT-003 \u6b6f\u8eca\u7528\u7d20\u6750 SCM415\n\u251c\u2500\u2500 MAT-004 \u92fc\u677f SS400 t3\n\u251c\u2500\u2500 MAT-005 \u4e38\u68d2\u6750 S45C \u03c615\n\u251c\u2500\u2500 MAT-006 \u771f\u936e\u4e38\u68d2 C3604 \u03c610\n\u251c\u2500\u2500 MAT-010 \u5305\u88c5\u6750\u30bb\u30c3\u30c8\n\u251c\u2500\u2500 MAT-011 \u9632\u9306\u7d19\n\u2514\u2500\u2500 MAT-012 \u6bb5\u30dc\u30fc\u30eb\u7bb1\n</code></pre>"},{"location":"article/part4/chapter31/#sup-out-cus-","title":"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\u4f53\u7cfb\uff08SUP-/OUT-/CUS-\uff09","text":"<p>\u53d6\u5f15\u5148\u3082\u63a5\u982d\u8f9e\u3067\u533a\u5206\u3092\u8b58\u5225\u3057\u307e\u3059\u3002</p> \u63a5\u982d\u8f9e \u533a\u5206 \u4f8b \u8aac\u660e SUP- \u4ed5\u5165\u5148 SUP-001 \u6750\u6599\u30fb\u90e8\u54c1\u306e\u8cfc\u5165\u5148 OUT- \u5916\u6ce8\u5148 OUT-001 \u52a0\u5de5\u59d4\u8a17\u5148 CUS- \u5f97\u610f\u5148 CUS-001 \u88fd\u54c1\u306e\u8ca9\u58f2\u5148"},{"location":"article/part4/chapter31/#_9","title":"\u53d6\u5f15\u5148\u4e00\u89a7","text":"\u30b3\u30fc\u30c9 \u53d6\u5f15\u5148\u540d \u533a\u5206 SUP-001 \u6771\u4eac\u30b9\u30c1\u30fc\u30eb\u682a\u5f0f\u4f1a\u793e \u4ed5\u5165\u5148 SUP-002 \u5927\u962a\u91d1\u5c5e\u5de5\u696d \u4ed5\u5165\u5148 SUP-003 \u540d\u53e4\u5c4b\u30d9\u30a2\u30ea\u30f3\u30b0 \u4ed5\u5165\u5148 SUP-004 \u6a2a\u6d5c\u90e8\u54c1\u30bb\u30f3\u30bf\u30fc \u4ed5\u5165\u5148 SUP-005 \u795e\u6238\u5305\u88c5\u8cc7\u6750 \u4ed5\u5165\u5148 OUT-001 \u30e1\u30c3\u30ad\u5de5\u696d\u6240 \u5916\u6ce8\u5148 OUT-002 \u71b1\u51e6\u7406\u30bb\u30f3\u30bf\u30fc \u5916\u6ce8\u5148 CUS-001 \u6a5f\u68b0\u30e1\u30fc\u30ab\u30fcA\u793e \u5f97\u610f\u5148 CUS-002 \u7523\u696d\u6a5f\u5668B\u793e \u5f97\u610f\u5148 CUS-003 \u7cbe\u5bc6\u6a5f\u68b0C\u793e \u5f97\u610f\u5148"},{"location":"article/part4/chapter31/#lathemillgrinddrillheatplatassyinsp","title":"\u5de5\u7a0b\u30b3\u30fc\u30c9\u4f53\u7cfb\uff08LATHE/MILL/GRIND/DRILL/HEAT/PLAT/ASSY/INSP\uff09","text":"<p>\u5de5\u7a0b\u306f\u4f5c\u696d\u5185\u5bb9\u306b\u5fdc\u3058\u305f\u30b3\u30fc\u30c9\u4f53\u7cfb\u3092\u63a1\u7528\u3057\u3066\u3044\u307e\u3059\u3002</p> \u30b3\u30fc\u30c9 \u5de5\u7a0b\u540d \u533a\u5206 LATHE \u65cb\u76e4\u52a0\u5de5 \u5207\u524a MILL \u30d5\u30e9\u30a4\u30b9\u52a0\u5de5 \u5207\u524a GRIND \u7814\u524a\u52a0\u5de5 \u5207\u524a HOB \u30db\u30d6\u5207\u308a \u5207\u524a DRILL \u7a74\u3042\u3051\u52a0\u5de5 \u5207\u524a ASM \u7d44\u7acb \u7d44\u7acb FINAL-ASM \u6700\u7d42\u7d44\u7acb \u7d44\u7acb INS-PROC \u5de5\u7a0b\u691c\u67fb \u691c\u67fb INS-SHIP \u51fa\u8377\u691c\u67fb \u691c\u67fb INS-RCV \u53d7\u5165\u691c\u67fb \u691c\u67fb OUT-MEKI \u30e1\u30c3\u30ad\u51e6\u7406 \u5916\u6ce8 OUT-HEAT \u71b1\u51e6\u7406 \u5916\u6ce8"},{"location":"article/part4/chapter31/#bom","title":"BOM \u968e\u5c64\uff08\u88fd\u54c1\u2192\u534a\u88fd\u54c1\u2192\u90e8\u54c1\u2192\u6750\u6599\uff09","text":"<p>BOM\uff08\u90e8\u54c1\u8868\uff09\u306f\u88fd\u54c1\u306e\u69cb\u6210\u3092\u968e\u5c64\u7684\u306b\u5b9a\u7fa9\u3057\u307e\u3059\u3002</p>"},{"location":"article/part4/chapter31/#bom_1","title":"BOM \u5c55\u958b\u4f8b\uff08\u30ae\u30a2\u30dc\u30c3\u30af\u30b9\u30a2\u30bb\u30f3\u30d6\u30ea\uff09","text":"<pre><code>PROD-B001 \u30ae\u30a2\u30dc\u30c3\u30af\u30b9\u30a2\u30bb\u30f3\u30d6\u30ea\n\u251c\u2500\u2500 SEMI-B001 \u30ae\u30a2\u30dc\u30c3\u30af\u30b9\u672c\u4f53 \u00d71\n\u2502   \u2514\u2500\u2500 MAT-002 \u30a2\u30eb\u30df\u30c0\u30a4\u30ad\u30e3\u30b9\u30c8\u7d20\u6750 \u00d71 (\u4e0d\u826f\u73873%)\n\u251c\u2500\u2500 SEMI-B002 \u99c6\u52d5\u30ae\u30a2 \u00d71\n\u2502   \u2514\u2500\u2500 MAT-003 \u6b6f\u8eca\u7528\u7d20\u6750 SCM415 \u00d70.8kg (\u4e0d\u826f\u73875%)\n\u251c\u2500\u2500 SEMI-B003 \u5f93\u52d5\u30ae\u30a2 \u00d71\n\u2502   \u2514\u2500\u2500 MAT-003 \u6b6f\u8eca\u7528\u7d20\u6750 SCM415 \u00d70.6kg (\u4e0d\u826f\u73875%)\n\u251c\u2500\u2500 PART-003 \u6a19\u6e96\u30b7\u30e3\u30d5\u30c8 \u03c610 \u00d71\n\u251c\u2500\u2500 PART-001 \u30d9\u30a2\u30ea\u30f3\u30b0 6205 \u00d72\n\u251c\u2500\u2500 PART-004 \u30aa\u30a4\u30eb\u30b7\u30fc\u30eb \u03c630 \u00d71\n\u251c\u2500\u2500 PART-005 \u30dc\u30eb\u30c8\u30bb\u30c3\u30c8 M6 \u00d71\n\u2514\u2500\u2500 MAT-010 \u5305\u88c5\u6750\u30bb\u30c3\u30c8 \u00d71\n</code></pre>"},{"location":"article/part4/chapter31/#enum","title":"Enum \u306e\u65e5\u672c\u8a9e\u30fb\u82f1\u8a9e\u30de\u30c3\u30d4\u30f3\u30b0","text":"<p>\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3067\u306f\u65e5\u672c\u8a9e\u5024\u3001Java \u30b3\u30fc\u30c9\u3067\u306f\u82f1\u8a9e\u5024\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002TypeHandler \u306b\u3088\u308a\u76f8\u4e92\u5909\u63db\u3092\u884c\u3044\u307e\u3059\u3002</p>"},{"location":"article/part4/chapter31/#itemcategory","title":"\u54c1\u76ee\u533a\u5206\uff08ItemCategory\uff09","text":"\u65e5\u672c\u8a9e DB \u5024 \u82f1\u8a9e Java \u5024 \"\u88fd\u54c1\" PRODUCT \"\u534a\u88fd\u54c1\" SEMI_FINISHED \"\u90e8\u54c1\" PART \"\u6750\u6599\" MATERIAL"},{"location":"article/part4/chapter31/#suppliertype","title":"\u53d6\u5f15\u5148\u533a\u5206\uff08SupplierType\uff09","text":"\u65e5\u672c\u8a9e DB \u5024 \u82f1\u8a9e Java \u5024 \"\u4ed5\u5165\u5148\" VENDOR \"\u5916\u6ce8\u5148\" SUBCONTRACTOR \"\u5f97\u610f\u5148\" CUSTOMER"},{"location":"article/part4/chapter31/#processtype","title":"\u5de5\u7a0b\u533a\u5206\uff08ProcessType\uff09","text":"\u65e5\u672c\u8a9e DB \u5024 \u82f1\u8a9e Java \u5024 \"\u793e\u5185\" INTERNAL \"\u5916\u6ce8\" EXTERNAL"},{"location":"article/part4/chapter31/#ordertype","title":"\u30aa\u30fc\u30c0\u533a\u5206\uff08OrderType\uff09","text":"\u65e5\u672c\u8a9e DB \u5024 \u82f1\u8a9e Java \u5024 \"\u88fd\u9020\" MANUFACTURING \"\u8cfc\u8cb7\" PURCHASE"},{"location":"article/part4/chapter31/#orderstatus","title":"\u30aa\u30fc\u30c0\u30b9\u30c6\u30fc\u30bf\u30b9\uff08OrderStatus\uff09","text":"\u65e5\u672c\u8a9e DB \u5024 \u82f1\u8a9e Java \u5024 \"\u8a08\u753b\" PLANNED \"\u78ba\u5b9a\" CONFIRMED \"\u767a\u6ce8\u6e08\" ORDERED \"\u5b8c\u4e86\" COMPLETED"},{"location":"article/part4/chapter31/#workorderstatus","title":"\u4f5c\u696d\u6307\u793a\u30b9\u30c6\u30fc\u30bf\u30b9\uff08WorkOrderStatus\uff09","text":"\u65e5\u672c\u8a9e DB \u5024 \u82f1\u8a9e Java \u5024 \"\u672a\u7740\u624b\" NOT_STARTED \"\u4f5c\u696d\u4e2d\" IN_PROGRESS \"\u5b8c\u4e86\" COMPLETED"},{"location":"article/part4/chapter31/#stockstatus","title":"\u5728\u5eab\u72b6\u614b\uff08StockStatus\uff09","text":"\u65e5\u672c\u8a9e DB \u5024 \u82f1\u8a9e Java \u5024 \"\u5408\u683c\" PASSED \"\u4e0d\u5408\u683c\" DEFECTIVE \"\u672a\u691c\u67fb\" UNINSPECTED"},{"location":"article/part4/chapter31/#defectcategory","title":"\u6b20\u70b9\u533a\u5206\uff08DefectCategory\uff09","text":"\u65e5\u672c\u8a9e DB \u5024 \u82f1\u8a9e Java \u5024 \"\u52a0\u5de5\u4e0d\u826f\" MACHINING \"\u5916\u89b3\u4e0d\u826f\" APPEARANCE \"\u8868\u9762\u51e6\u7406\u4e0d\u826f\" SURFACE_TREATMENT \"\u71b1\u51e6\u7406\u4e0d\u826f\" HEAT_TREATMENT \"\u7d44\u7acb\u4e0d\u826f\" ASSEMBLY \"\u6750\u6599\u4e0d\u826f\" MATERIAL"},{"location":"article/part4/chapter31/#314-seed","title":"31.4 Seed \u30c7\u30fc\u30bf\u306e\u5b9f\u88c5","text":""},{"location":"article/part4/chapter31/#_10","title":"\u5b9f\u88c5\u65b9\u91dd\uff08\u5916\u90e8\u30ad\u30fc\u5236\u7d04\u30fb\u8907\u5408\u30ad\u30fc\u30fb\u65e5\u672c\u8a9e\u30c6\u30fc\u30d6\u30eb\u540d\uff09","text":"<p>Seed \u30c7\u30fc\u30bf\u5b9f\u88c5\u306b\u304a\u3051\u308b\u6280\u8853\u7684\u306a\u30dd\u30a4\u30f3\u30c8\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002</p> <ol> <li>\u5916\u90e8\u30ad\u30fc\u5236\u7d04\u306e\u8003\u616e</li> <li>\u30c7\u30fc\u30bf\u6295\u5165\u9806\u5e8f\u3092\u5916\u90e8\u30ad\u30fc\u4f9d\u5b58\u95a2\u4fc2\u306b\u57fa\u3065\u3044\u3066\u8a2d\u8a08</li> <li>\u30de\u30b9\u30bf \u2192 \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306e\u9806\u3067\u6295\u5165</li> <li> <p>\u524a\u9664\u6642\u306f\u9006\u9806\uff08\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3 \u2192 \u30de\u30b9\u30bf\uff09</p> </li> <li> <p>\u8907\u5408\u30ad\u30fc\u306e\u6271\u3044</p> </li> <li>\u54c1\u76ee\u30de\u30b9\u30bf\u306f <code>(\u54c1\u76ee\u30b3\u30fc\u30c9, \u9069\u7528\u958b\u59cb\u65e5)</code> \u306e\u8907\u5408\u4e3b\u30ad\u30fc</li> <li>BOM \u306f <code>(\u89aa\u54c1\u76ee\u30b3\u30fc\u30c9, \u89aa\u54c1\u76ee\u9069\u7528\u958b\u59cb\u65e5, \u5b50\u54c1\u76ee\u30b3\u30fc\u30c9, \u5b50\u54c1\u76ee\u9069\u7528\u958b\u59cb\u65e5)</code> \u306e\u8907\u5408\u4e3b\u30ad\u30fc</li> <li> <p>\u5916\u90e8\u30ad\u30fc\u53c2\u7167\u6642\u306f\u4e21\u65b9\u306e\u30ad\u30fc\u3092\u6307\u5b9a</p> </li> <li> <p>\u65e5\u672c\u8a9e\u30c6\u30fc\u30d6\u30eb\u540d\u30fb\u30ab\u30e9\u30e0\u540d</p> </li> <li>MyBatis \u306e resultMap \u3092\u4f7f\u7528\u3057\u3066\u65e5\u672c\u8a9e\u30ab\u30e9\u30e0\u540d\u3092\u82f1\u8a9e\u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u30de\u30c3\u30d4\u30f3\u30b0</li> <li>SQL \u6587\u3067\u306f\u65e5\u672c\u8a9e\u30c6\u30fc\u30d6\u30eb\u540d\u30fb\u30ab\u30e9\u30e0\u540d\u3092\u30c0\u30d6\u30eb\u30af\u30a9\u30fc\u30c8\u3067\u56f2\u3080</li> </ol>"},{"location":"article/part4/chapter31/#_11","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u9020","text":"<pre><code>src/\n\u251c\u2500\u2500 main/\n\u2502   \u2514\u2500\u2500 java/\n\u2502       \u2514\u2500\u2500 com/example/sms/\n\u2502           \u2514\u2500\u2500 seed/\n\u2502               \u251c\u2500\u2500 SeedDataService.java\n\u2502               \u251c\u2500\u2500 MasterDataSeeder.java\n\u2502               \u251c\u2500\u2500 TransactionDataSeeder.java\n\u2502               \u2514\u2500\u2500 SeedRunner.java\n\u2514\u2500\u2500 test/\n    \u2514\u2500\u2500 java/\n        \u2514\u2500\u2500 com/example/sms/\n            \u2514\u2500\u2500 seed/\n                \u2514\u2500\u2500 SeedDataIntegrationTest.java\n</code></pre>"},{"location":"article/part4/chapter31/#seeddataservice","title":"SeedDataService \u306e\u8a2d\u8a08","text":"SeedDataService.java <pre><code>// src/main/java/com/example/sms/seed/SeedDataService.java\npackage com.example.sms.seed;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.time.LocalDate;\n\n@Service\npublic class SeedDataService {\n\n    private static final Logger log = LoggerFactory.getLogger(SeedDataService.class);\n\n    private final SqlSessionFactory sqlSessionFactory;\n    private final MasterDataSeeder masterDataSeeder;\n    private final TransactionDataSeeder transactionDataSeeder;\n\n    public SeedDataService(\n            SqlSessionFactory sqlSessionFactory,\n            MasterDataSeeder masterDataSeeder,\n            TransactionDataSeeder transactionDataSeeder) {\n        this.sqlSessionFactory = sqlSessionFactory;\n        this.masterDataSeeder = masterDataSeeder;\n        this.transactionDataSeeder = transactionDataSeeder;\n    }\n\n    @Transactional\n    public void seedAll() {\n        log.info(\"========================================\");\n        log.info(\"\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 Seed \u30c7\u30fc\u30bf\u6295\u5165\u958b\u59cb\");\n        log.info(\"========================================\");\n\n        LocalDate effectiveDate = LocalDate.of(2025, 1, 1);\n\n        // \u65e2\u5b58\u30c7\u30fc\u30bf\u306e\u524a\u9664\n        cleanAllData();\n\n        // \u30de\u30b9\u30bf\u30c7\u30fc\u30bf\u306e\u6295\u5165\n        masterDataSeeder.seedAll(effectiveDate);\n\n        // \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u306e\u6295\u5165\n        transactionDataSeeder.seedAll(effectiveDate);\n\n        log.info(\"========================================\");\n        log.info(\"\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 Seed \u30c7\u30fc\u30bf\u6295\u5165\u5b8c\u4e86!\");\n        log.info(\"========================================\");\n    }\n\n    private void cleanAllData() {\n        log.info(\"\u65e2\u5b58\u30c7\u30fc\u30bf\u3092\u524a\u9664\u4e2d...\");\n\n        try (SqlSession session = sqlSessionFactory.openSession()) {\n            // \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u304b\u3089\u524a\u9664\uff08\u5916\u90e8\u30ad\u30fc\u5236\u7d04\u306e\u305f\u3081\u9006\u9806\uff09\n            session.delete(\"seed.deleteAllLaborRecords\");\n            session.delete(\"seed.deleteAllCompletionRecords\");\n            session.delete(\"seed.deleteAllWorkOrderDetails\");\n            session.delete(\"seed.deleteAllWorkOrders\");\n            session.delete(\"seed.deleteAllPurchaseOrderDetails\");\n            session.delete(\"seed.deleteAllPurchaseOrders\");\n            session.delete(\"seed.deleteAllOrders\");\n            session.delete(\"seed.deleteAllStocks\");\n\n            // \u30de\u30b9\u30bf\u30c7\u30fc\u30bf\u3092\u524a\u9664\n            session.delete(\"seed.deleteAllDefects\");\n            session.delete(\"seed.deleteAllUnitPrices\");\n            session.delete(\"seed.deleteAllEmployees\");\n            session.delete(\"seed.deleteAllRoutings\");\n            session.delete(\"seed.deleteAllBoms\");\n            session.delete(\"seed.deleteAllItems\");\n            session.delete(\"seed.deleteAllProcesses\");\n            session.delete(\"seed.deleteAllWarehouses\");\n            session.delete(\"seed.deleteAllLocations\");\n            session.delete(\"seed.deleteAllSuppliers\");\n            session.delete(\"seed.deleteAllDepartments\");\n            session.delete(\"seed.deleteAllItemGroups\");\n            session.delete(\"seed.deleteAllUnits\");\n\n            session.commit();\n        }\n\n        log.info(\"\u65e2\u5b58\u30c7\u30fc\u30bf\u524a\u9664\u5b8c\u4e86\");\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter31/#masterdataseeder-bom","title":"MasterDataSeeder \u306e\u5b9f\u88c5\uff08\u90e8\u9580\u30fb\u62c5\u5f53\u8005\u30fb\u54c1\u76ee\u30fbBOM\u30fb\u5de5\u7a0b\u30fb\u53d6\u5f15\u5148\u30fb\u5358\u4fa1\uff09","text":"MasterDataSeeder.java <pre><code>// src/main/java/com/example/sms/seed/MasterDataSeeder.java\npackage com.example.sms.seed;\n\nimport com.example.sms.domain.model.item.*;\nimport com.example.sms.domain.model.master.*;\nimport com.example.sms.domain.model.bom.Bom;\nimport com.example.sms.domain.model.process.*;\nimport com.example.sms.infrastructure.out.persistence.mapper.*;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.stereotype.Component;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.util.List;\n\n@Component\npublic class MasterDataSeeder {\n\n    private static final Logger log = LoggerFactory.getLogger(MasterDataSeeder.class);\n\n    private final UnitMapper unitMapper;\n    private final ItemGroupMapper itemGroupMapper;\n    private final DepartmentMapper departmentMapper;\n    private final SupplierMapper supplierMapper;\n    private final LocationMapper locationMapper;\n    private final WarehouseMapper warehouseMapper;\n    private final ProcessMapper processMapper;\n    private final ItemMapper itemMapper;\n    private final BomMapper bomMapper;\n    private final RoutingMapper routingMapper;\n    private final EmployeeMapper employeeMapper;\n    private final UnitPriceMapper unitPriceMapper;\n    private final DefectMapper defectMapper;\n\n    public MasterDataSeeder(/* \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u5f15\u6570\u7701\u7565 */) {\n        // \u4f9d\u5b58\u6027\u6ce8\u5165\n    }\n\n    public void seedAll(LocalDate effectiveDate) {\n        seedUnits();\n        seedItemGroups();\n        seedDepartments(effectiveDate);\n        seedSuppliers(effectiveDate);\n        seedLocations();\n        seedWarehouses();\n        seedProcesses(effectiveDate);\n        seedItems(effectiveDate);\n        seedBoms(effectiveDate);\n        seedRoutings(effectiveDate);\n        seedEmployees(effectiveDate);\n        seedUnitPrices(effectiveDate);\n        seedDefects();\n    }\n\n    private void seedUnits() {\n        log.info(\"\u5358\u4f4d\u30de\u30b9\u30bf\u3092\u6295\u5165\u4e2d...\");\n\n        List&lt;Unit&gt; units = List.of(\n            new Unit(\"PCS\", \"\u500b\"),\n            new Unit(\"KG\", \"\u30ad\u30ed\u30b0\u30e9\u30e0\"),\n            new Unit(\"M\", \"\u30e1\u30fc\u30c8\u30eb\"),\n            new Unit(\"SET\", \"\u30bb\u30c3\u30c8\"),\n            new Unit(\"L\", \"\u30ea\u30c3\u30c8\u30eb\")\n        );\n\n        units.forEach(unitMapper::insert);\n        log.info(\"\u5358\u4f4d\u30de\u30b9\u30bf {}\u4ef6 \u6295\u5165\u5b8c\u4e86\", units.size());\n    }\n\n    private void seedItemGroups() {\n        log.info(\"\u54c1\u76ee\u30b0\u30eb\u30fc\u30d7\u30de\u30b9\u30bf\u3092\u6295\u5165\u4e2d...\");\n\n        List&lt;ItemGroup&gt; groups = List.of(\n            new ItemGroup(\"PRODUCT\", \"\u5b8c\u6210\u54c1\"),\n            new ItemGroup(\"SEMI\", \"\u534a\u88fd\u54c1\"),\n            new ItemGroup(\"PART\", \"\u8cfc\u5165\u90e8\u54c1\"),\n            new ItemGroup(\"MATERIAL\", \"\u539f\u6750\u6599\"),\n            new ItemGroup(\"PACKING\", \"\u68b1\u5305\u6750\"),\n            new ItemGroup(\"BEARING\", \"\u8ef8\u53d7\u30fb\u30b7\u30fc\u30eb\u90e8\u54c1\")\n        );\n\n        groups.forEach(itemGroupMapper::insert);\n        log.info(\"\u54c1\u76ee\u30b0\u30eb\u30fc\u30d7\u30de\u30b9\u30bf {}\u4ef6 \u6295\u5165\u5b8c\u4e86\", groups.size());\n    }\n\n    private void seedDepartments(LocalDate effectiveDate) {\n        log.info(\"\u90e8\u9580\u30de\u30b9\u30bf\u3092\u6295\u5165\u4e2d...\");\n\n        List&lt;Department&gt; departments = List.of(\n            new Department(\"SALES\", effectiveDate, \"\u55b6\u696d\u90e8\"),\n            new Department(\"PROD-PLAN\", effectiveDate, \"\u751f\u7523\u7ba1\u7406\u90e8\"),\n            new Department(\"MFG\", effectiveDate, \"\u88fd\u9020\u90e8\"),\n            new Department(\"QUALITY\", effectiveDate, \"\u54c1\u8cea\u7ba1\u7406\u90e8\"),\n            new Department(\"PURCHASE\", effectiveDate, \"\u8cfc\u8cb7\u90e8\"),\n            new Department(\"WAREHOUSE\", effectiveDate, \"\u5009\u5eab\u90e8\"),\n            new Department(\"OUTSOURCE\", effectiveDate, \"\u5916\u6ce8\u7ba1\u7406\u90e8\")\n        );\n\n        departments.forEach(departmentMapper::insert);\n        log.info(\"\u90e8\u9580\u30de\u30b9\u30bf {}\u4ef6 \u6295\u5165\u5b8c\u4e86\", departments.size());\n    }\n\n    private void seedSuppliers(LocalDate effectiveDate) {\n        log.info(\"\u53d6\u5f15\u5148\u30de\u30b9\u30bf\u3092\u6295\u5165\u4e2d...\");\n\n        List&lt;Supplier&gt; suppliers = List.of(\n            // \u4ed5\u5165\u5148\n            new Supplier(\"SUP-001\", effectiveDate, \"\u6771\u4eac\u30b9\u30c1\u30fc\u30eb\u682a\u5f0f\u4f1a\u793e\", SupplierType.VENDOR),\n            new Supplier(\"SUP-002\", effectiveDate, \"\u5927\u962a\u91d1\u5c5e\u5de5\u696d\", SupplierType.VENDOR),\n            new Supplier(\"SUP-003\", effectiveDate, \"\u540d\u53e4\u5c4b\u30d9\u30a2\u30ea\u30f3\u30b0\", SupplierType.VENDOR),\n            new Supplier(\"SUP-004\", effectiveDate, \"\u6a2a\u6d5c\u90e8\u54c1\u30bb\u30f3\u30bf\u30fc\", SupplierType.VENDOR),\n            new Supplier(\"SUP-005\", effectiveDate, \"\u795e\u6238\u5305\u88c5\u8cc7\u6750\", SupplierType.VENDOR),\n            // \u5916\u6ce8\u5148\n            new Supplier(\"OUT-001\", effectiveDate, \"\u30e1\u30c3\u30ad\u5de5\u696d\u6240\", SupplierType.SUBCONTRACTOR),\n            new Supplier(\"OUT-002\", effectiveDate, \"\u71b1\u51e6\u7406\u30bb\u30f3\u30bf\u30fc\", SupplierType.SUBCONTRACTOR),\n            // \u5f97\u610f\u5148\n            new Supplier(\"CUS-001\", effectiveDate, \"\u6a5f\u68b0\u30e1\u30fc\u30ab\u30fcA\u793e\", SupplierType.CUSTOMER),\n            new Supplier(\"CUS-002\", effectiveDate, \"\u7523\u696d\u6a5f\u5668B\u793e\", SupplierType.CUSTOMER),\n            new Supplier(\"CUS-003\", effectiveDate, \"\u7cbe\u5bc6\u6a5f\u68b0C\u793e\", SupplierType.CUSTOMER)\n        );\n\n        suppliers.forEach(supplierMapper::insert);\n        log.info(\"\u53d6\u5f15\u5148\u30de\u30b9\u30bf {}\u4ef6 \u6295\u5165\u5b8c\u4e86\", suppliers.size());\n    }\n\n    private void seedProcesses(LocalDate effectiveDate) {\n        log.info(\"\u5de5\u7a0b\u30de\u30b9\u30bf\u3092\u6295\u5165\u4e2d...\");\n\n        List&lt;Process&gt; processes = List.of(\n            // \u5207\u524a\u5de5\u7a0b\n            new Process(\"LATHE\", effectiveDate, \"\u65cb\u76e4\u52a0\u5de5\", ProcessType.INTERNAL),\n            new Process(\"MILL\", effectiveDate, \"\u30d5\u30e9\u30a4\u30b9\u52a0\u5de5\", ProcessType.INTERNAL),\n            new Process(\"GRIND\", effectiveDate, \"\u7814\u524a\u52a0\u5de5\", ProcessType.INTERNAL),\n            new Process(\"HOB\", effectiveDate, \"\u30db\u30d6\u5207\u308a\", ProcessType.INTERNAL),\n            new Process(\"DRILL\", effectiveDate, \"\u7a74\u3042\u3051\u52a0\u5de5\", ProcessType.INTERNAL),\n            // \u7d44\u7acb\u5de5\u7a0b\n            new Process(\"ASM\", effectiveDate, \"\u7d44\u7acb\", ProcessType.INTERNAL),\n            new Process(\"FINAL-ASM\", effectiveDate, \"\u6700\u7d42\u7d44\u7acb\", ProcessType.INTERNAL),\n            // \u691c\u67fb\u5de5\u7a0b\n            new Process(\"INS-PROC\", effectiveDate, \"\u5de5\u7a0b\u691c\u67fb\", ProcessType.INTERNAL),\n            new Process(\"INS-SHIP\", effectiveDate, \"\u51fa\u8377\u691c\u67fb\", ProcessType.INTERNAL),\n            new Process(\"INS-RCV\", effectiveDate, \"\u53d7\u5165\u691c\u67fb\", ProcessType.INTERNAL),\n            // \u5916\u6ce8\u5de5\u7a0b\n            new Process(\"OUT-MEKI\", effectiveDate, \"\u30e1\u30c3\u30ad\u51e6\u7406\", ProcessType.EXTERNAL),\n            new Process(\"OUT-HEAT\", effectiveDate, \"\u71b1\u51e6\u7406\", ProcessType.EXTERNAL)\n        );\n\n        processes.forEach(processMapper::insert);\n        log.info(\"\u5de5\u7a0b\u30de\u30b9\u30bf {}\u4ef6 \u6295\u5165\u5b8c\u4e86\", processes.size());\n    }\n\n    private void seedItems(LocalDate effectiveDate) {\n        log.info(\"\u54c1\u76ee\u30de\u30b9\u30bf\u3092\u6295\u5165\u4e2d...\");\n\n        List&lt;Item&gt; items = List.of(\n            // \u88fd\u54c1\n            new Item(\"PROD-A001\", effectiveDate, \"\u7cbe\u5bc6\u30b7\u30e3\u30d5\u30c8A\",\n                    ItemCategory.PRODUCT, \"PRODUCT\", \"PCS\", \"WH-PROD\", 7, 100),\n            new Item(\"PROD-B001\", effectiveDate, \"\u30ae\u30a2\u30dc\u30c3\u30af\u30b9\u30a2\u30bb\u30f3\u30d6\u30ea\",\n                    ItemCategory.PRODUCT, \"PRODUCT\", \"PCS\", \"WH-PROD\", 14, 50),\n            new Item(\"PROD-C001\", effectiveDate, \"\u7cbe\u5bc6\u30d7\u30ec\u30fc\u30c8\",\n                    ItemCategory.PRODUCT, \"PRODUCT\", \"PCS\", \"WH-PROD\", 5, 80),\n\n            // \u534a\u88fd\u54c1\n            new Item(\"SEMI-A001\", effectiveDate, \"\u52a0\u5de5\u6e08\u307f\u30b7\u30e3\u30d5\u30c8\",\n                    ItemCategory.SEMI_FINISHED, \"SEMI\", \"PCS\", \"WH-PART\", 5, 120),\n            new Item(\"SEMI-B001\", effectiveDate, \"\u30ae\u30a2\u30dc\u30c3\u30af\u30b9\u672c\u4f53\",\n                    ItemCategory.SEMI_FINISHED, \"SEMI\", \"PCS\", \"WH-PART\", 7, 60),\n            new Item(\"SEMI-B002\", effectiveDate, \"\u99c6\u52d5\u30ae\u30a2\",\n                    ItemCategory.SEMI_FINISHED, \"SEMI\", \"PCS\", \"WH-PART\", 7, 80),\n            new Item(\"SEMI-B003\", effectiveDate, \"\u5f93\u52d5\u30ae\u30a2\",\n                    ItemCategory.SEMI_FINISHED, \"SEMI\", \"PCS\", \"WH-PART\", 7, 80),\n            new Item(\"SEMI-C001\", effectiveDate, \"\u52a0\u5de5\u6e08\u307f\u30d7\u30ec\u30fc\u30c8\",\n                    ItemCategory.SEMI_FINISHED, \"SEMI\", \"PCS\", \"WH-PART\", 3, 100),\n\n            // \u90e8\u54c1\n            new Item(\"PART-001\", effectiveDate, \"\u30d9\u30a2\u30ea\u30f3\u30b0 6205\",\n                    ItemCategory.PART, \"BEARING\", \"PCS\", \"WH-PART\", 7, 100),\n            new Item(\"PART-002\", effectiveDate, \"\u30aa\u30a4\u30eb\u30b7\u30fc\u30eb \u03c620\",\n                    ItemCategory.PART, \"BEARING\", \"PCS\", \"WH-PART\", 7, 100),\n\n            // \u6750\u6599\n            new Item(\"MAT-001\", effectiveDate, \"\u4e38\u68d2\u6750 SUS304 \u03c620\",\n                    ItemCategory.MATERIAL, \"MATERIAL\", \"KG\", \"WH-MAT\", 14, 500),\n            new Item(\"MAT-002\", effectiveDate, \"\u30a2\u30eb\u30df\u30c0\u30a4\u30ad\u30e3\u30b9\u30c8\u7d20\u6750\",\n                    ItemCategory.MATERIAL, \"MATERIAL\", \"PCS\", \"WH-MAT\", 21, 100),\n            new Item(\"MAT-003\", effectiveDate, \"\u6b6f\u8eca\u7528\u7d20\u6750 SCM415\",\n                    ItemCategory.MATERIAL, \"MATERIAL\", \"KG\", \"WH-MAT\", 14, 300),\n            new Item(\"MAT-010\", effectiveDate, \"\u5305\u88c5\u6750\u30bb\u30c3\u30c8\",\n                    ItemCategory.MATERIAL, \"PACKING\", \"SET\", \"WH-MAT\", 3, 500)\n        );\n\n        items.forEach(itemMapper::insert);\n        log.info(\"\u54c1\u76ee\u30de\u30b9\u30bf {}\u4ef6 \u6295\u5165\u5b8c\u4e86\", items.size());\n    }\n\n    private void seedBoms(LocalDate effectiveDate) {\n        log.info(\"BOM\u3092\u6295\u5165\u4e2d...\");\n\n        List&lt;Bom&gt; boms = List.of(\n            // \u7cbe\u5bc6\u30b7\u30e3\u30d5\u30c8A \u306e\u69cb\u6210\n            new Bom(\"PROD-A001\", effectiveDate, \"SEMI-A001\", effectiveDate,\n                    BigDecimal.ONE, BigDecimal.ONE, new BigDecimal(\"0.02\")),\n            new Bom(\"PROD-A001\", effectiveDate, \"PART-001\", effectiveDate,\n                    BigDecimal.ONE, BigDecimal.ONE, null),\n            new Bom(\"PROD-A001\", effectiveDate, \"PART-002\", effectiveDate,\n                    BigDecimal.ONE, BigDecimal.ONE, null),\n            new Bom(\"PROD-A001\", effectiveDate, \"MAT-010\", effectiveDate,\n                    BigDecimal.ONE, BigDecimal.ONE, null),\n\n            // \u52a0\u5de5\u6e08\u307f\u30b7\u30e3\u30d5\u30c8 \u306e\u69cb\u6210\n            new Bom(\"SEMI-A001\", effectiveDate, \"MAT-001\", effectiveDate,\n                    BigDecimal.ONE, new BigDecimal(\"0.5\"), new BigDecimal(\"0.05\")),\n\n            // \u30ae\u30a2\u30dc\u30c3\u30af\u30b9\u30a2\u30bb\u30f3\u30d6\u30ea \u306e\u69cb\u6210\n            new Bom(\"PROD-B001\", effectiveDate, \"SEMI-B001\", effectiveDate,\n                    BigDecimal.ONE, BigDecimal.ONE, null),\n            new Bom(\"PROD-B001\", effectiveDate, \"SEMI-B002\", effectiveDate,\n                    BigDecimal.ONE, BigDecimal.ONE, null),\n            new Bom(\"PROD-B001\", effectiveDate, \"SEMI-B003\", effectiveDate,\n                    BigDecimal.ONE, BigDecimal.ONE, null),\n            new Bom(\"PROD-B001\", effectiveDate, \"PART-001\", effectiveDate,\n                    BigDecimal.ONE, new BigDecimal(\"2\"), null)\n        );\n\n        boms.forEach(bomMapper::insert);\n        log.info(\"BOM {}\u4ef6 \u6295\u5165\u5b8c\u4e86\", boms.size());\n    }\n\n    private void seedRoutings(LocalDate effectiveDate) {\n        log.info(\"\u5de5\u7a0b\u8868\u3092\u6295\u5165\u4e2d...\");\n\n        List&lt;Routing&gt; routings = List.of(\n            // \u7cbe\u5bc6\u30b7\u30e3\u30d5\u30c8A\n            new Routing(\"PROD-A001\", effectiveDate, \"ASM\", effectiveDate, 1, new BigDecimal(\"1.0\")),\n            new Routing(\"PROD-A001\", effectiveDate, \"INS-SHIP\", effectiveDate, 2, new BigDecimal(\"0.5\")),\n\n            // \u52a0\u5de5\u6e08\u307f\u30b7\u30e3\u30d5\u30c8\n            new Routing(\"SEMI-A001\", effectiveDate, \"LATHE\", effectiveDate, 1, new BigDecimal(\"2.0\")),\n            new Routing(\"SEMI-A001\", effectiveDate, \"GRIND\", effectiveDate, 2, new BigDecimal(\"1.0\")),\n            new Routing(\"SEMI-A001\", effectiveDate, \"OUT-MEKI\", effectiveDate, 3, BigDecimal.ZERO),\n            new Routing(\"SEMI-A001\", effectiveDate, \"INS-PROC\", effectiveDate, 4, new BigDecimal(\"0.5\")),\n\n            // \u30ae\u30a2\u30dc\u30c3\u30af\u30b9\u30a2\u30bb\u30f3\u30d6\u30ea\n            new Routing(\"PROD-B001\", effectiveDate, \"FINAL-ASM\", effectiveDate, 1, new BigDecimal(\"2.0\")),\n            new Routing(\"PROD-B001\", effectiveDate, \"INS-SHIP\", effectiveDate, 2, new BigDecimal(\"0.5\"))\n        );\n\n        routings.forEach(routingMapper::insert);\n        log.info(\"\u5de5\u7a0b\u8868 {}\u4ef6 \u6295\u5165\u5b8c\u4e86\", routings.size());\n    }\n\n    private void seedEmployees(LocalDate effectiveDate) {\n        log.info(\"\u62c5\u5f53\u8005\u30de\u30b9\u30bf\u3092\u6295\u5165\u4e2d...\");\n\n        List&lt;Employee&gt; employees = List.of(\n            new Employee(\"EMP-001\", effectiveDate, \"\u7530\u4e2d \u592a\u90ce\", \"MFG\", effectiveDate),\n            new Employee(\"EMP-002\", effectiveDate, \"\u9234\u6728 \u4e00\u90ce\", \"MFG\", effectiveDate),\n            new Employee(\"EMP-006\", effectiveDate, \"\u6e21\u8fba \u4e94\u90ce\", \"QUALITY\", effectiveDate),\n            new Employee(\"EMP-008\", effectiveDate, \"\u4e2d\u6751 \u7f8e\u54b2\", \"PROD-PLAN\", effectiveDate),\n            new Employee(\"EMP-009\", effectiveDate, \"\u5c0f\u6797 \u5065\u4e00\", \"PURCHASE\", effectiveDate),\n            new Employee(\"EMP-010\", effectiveDate, \"\u52a0\u85e4 \u6b63\", \"WAREHOUSE\", effectiveDate)\n        );\n\n        employees.forEach(employeeMapper::insert);\n        log.info(\"\u62c5\u5f53\u8005\u30de\u30b9\u30bf {}\u4ef6 \u6295\u5165\u5b8c\u4e86\", employees.size());\n    }\n\n    private void seedUnitPrices(LocalDate effectiveDate) {\n        log.info(\"\u5358\u4fa1\u30de\u30b9\u30bf\u3092\u6295\u5165\u4e2d...\");\n\n        List&lt;UnitPrice&gt; unitPrices = List.of(\n            // \u6750\u6599\u306e\u4ed5\u5165\u5358\u4fa1\n            new UnitPrice(\"MAT-001\", effectiveDate, \"SUP-001\", effectiveDate,\n                         effectiveDate, new BigDecimal(\"1500\"), 10),\n            new UnitPrice(\"MAT-002\", effectiveDate, \"SUP-002\", effectiveDate,\n                         effectiveDate, new BigDecimal(\"3500\"), 1),\n            new UnitPrice(\"MAT-003\", effectiveDate, \"SUP-002\", effectiveDate,\n                         effectiveDate, new BigDecimal(\"2000\"), 10),\n\n            // \u5916\u6ce8\u52a0\u5de5\u5358\u4fa1\n            new UnitPrice(\"SEMI-A001\", effectiveDate, \"OUT-001\", effectiveDate,\n                         effectiveDate, new BigDecimal(\"500\"), 1)\n        );\n\n        unitPrices.forEach(unitPriceMapper::insert);\n        log.info(\"\u5358\u4fa1\u30de\u30b9\u30bf {}\u4ef6 \u6295\u5165\u5b8c\u4e86\", unitPrices.size());\n    }\n\n    private void seedDefects() {\n        log.info(\"\u6b20\u70b9\u30de\u30b9\u30bf\u3092\u6295\u5165\u4e2d...\");\n\n        List&lt;Defect&gt; defects = List.of(\n            new Defect(\"DEF-001\", \"\u5bf8\u6cd5\u4e0d\u826f\", DefectCategory.MACHINING),\n            new Defect(\"DEF-002\", \"\u8868\u9762\u50b7\", DefectCategory.APPEARANCE),\n            new Defect(\"DEF-003\", \"\u30e1\u30c3\u30ad\u4e0d\u826f\", DefectCategory.SURFACE_TREATMENT),\n            new Defect(\"DEF-004\", \"\u71b1\u51e6\u7406\u4e0d\u826f\", DefectCategory.HEAT_TREATMENT),\n            new Defect(\"DEF-005\", \"\u7d44\u7acb\u4e0d\u826f\", DefectCategory.ASSEMBLY),\n            new Defect(\"DEF-006\", \"\u6750\u6599\u4e0d\u826f\", DefectCategory.MATERIAL)\n        );\n\n        defects.forEach(defectMapper::insert);\n        log.info(\"\u6b20\u70b9\u30de\u30b9\u30bf {}\u4ef6 \u6295\u5165\u5b8c\u4e86\", defects.size());\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter31/#transactiondataseeder","title":"TransactionDataSeeder \u306e\u5b9f\u88c5\uff08\u767a\u6ce8\u30fb\u5165\u8377\u30fb\u4f5c\u696d\u6307\u793a\u30fb\u5b8c\u6210\u5b9f\u7e3e\u30fb\u5728\u5eab\uff09","text":"TransactionDataSeeder.java <pre><code>// src/main/java/com/example/sms/seed/TransactionDataSeeder.java\npackage com.example.sms.seed;\n\nimport com.example.sms.domain.model.inventory.*;\nimport com.example.sms.domain.model.order.*;\nimport com.example.sms.domain.model.purchase.*;\nimport com.example.sms.domain.model.workorder.*;\nimport com.example.sms.infrastructure.out.persistence.mapper.*;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.stereotype.Component;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.List;\n\n@Component\npublic class TransactionDataSeeder {\n\n    private static final Logger log = LoggerFactory.getLogger(TransactionDataSeeder.class);\n\n    private final StockMapper stockMapper;\n    private final OrderMapper orderMapper;\n    private final PurchaseOrderMapper purchaseOrderMapper;\n    private final PurchaseOrderDetailMapper purchaseOrderDetailMapper;\n    private final WorkOrderMapper workOrderMapper;\n    private final WorkOrderDetailMapper workOrderDetailMapper;\n    private final CompletionRecordMapper completionRecordMapper;\n    private final LaborRecordMapper laborRecordMapper;\n\n    public TransactionDataSeeder(/* \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u5f15\u6570\u7701\u7565 */) {\n        // \u4f9d\u5b58\u6027\u6ce8\u5165\n    }\n\n    public void seedAll(LocalDate effectiveDate) {\n        seedStocks(effectiveDate);\n        seedOrders(effectiveDate);\n        seedPurchaseOrders(effectiveDate);\n        seedWorkOrders(effectiveDate);\n        seedCompletionRecords(effectiveDate);\n        seedLaborRecords(effectiveDate);\n    }\n\n    private void seedStocks(LocalDate effectiveDate) {\n        log.info(\"\u5728\u5eab\u60c5\u5831\u3092\u6295\u5165\u4e2d...\");\n\n        List&lt;Stock&gt; stocks = List.of(\n            // \u6750\u6599\u5009\u5eab\n            new Stock(\"WH-MAT\", \"MAT-001\", effectiveDate,\n                     new BigDecimal(\"800\"), StockStatus.PASSED),\n            new Stock(\"WH-MAT\", \"MAT-002\", effectiveDate,\n                     new BigDecimal(\"150\"), StockStatus.PASSED),\n            new Stock(\"WH-MAT\", \"MAT-003\", effectiveDate,\n                     new BigDecimal(\"450\"), StockStatus.PASSED),\n            new Stock(\"WH-MAT\", \"MAT-010\", effectiveDate,\n                     new BigDecimal(\"600\"), StockStatus.PASSED),\n\n            // \u90e8\u54c1\u5009\u5eab\n            new Stock(\"WH-PART\", \"PART-001\", effectiveDate,\n                     new BigDecimal(\"200\"), StockStatus.PASSED),\n            new Stock(\"WH-PART\", \"PART-002\", effectiveDate,\n                     new BigDecimal(\"150\"), StockStatus.PASSED),\n\n            // \u534a\u88fd\u54c1\u5728\u5eab\n            new Stock(\"WH-PART\", \"SEMI-A001\", effectiveDate,\n                     new BigDecimal(\"50\"), StockStatus.PASSED),\n            new Stock(\"WH-PART\", \"SEMI-B001\", effectiveDate,\n                     new BigDecimal(\"30\"), StockStatus.PASSED),\n            new Stock(\"WH-PART\", \"SEMI-B002\", effectiveDate,\n                     new BigDecimal(\"40\"), StockStatus.PASSED),\n            new Stock(\"WH-PART\", \"SEMI-B003\", effectiveDate,\n                     new BigDecimal(\"40\"), StockStatus.PASSED),\n\n            // \u88fd\u54c1\u5009\u5eab\n            new Stock(\"WH-PROD\", \"PROD-A001\", effectiveDate,\n                     new BigDecimal(\"80\"), StockStatus.PASSED),\n            new Stock(\"WH-PROD\", \"PROD-B001\", effectiveDate,\n                     new BigDecimal(\"45\"), StockStatus.PASSED),\n            new Stock(\"WH-PROD\", \"PROD-C001\", effectiveDate,\n                     new BigDecimal(\"60\"), StockStatus.PASSED)\n        );\n\n        stocks.forEach(stockMapper::insert);\n        log.info(\"\u5728\u5eab\u60c5\u5831 {}\u4ef6 \u6295\u5165\u5b8c\u4e86\", stocks.size());\n    }\n\n    private void seedOrders(LocalDate effectiveDate) {\n        log.info(\"\u30aa\u30fc\u30c0\u60c5\u5831\u3092\u6295\u5165\u4e2d...\");\n\n        List&lt;Order&gt; orders = List.of(\n            // \u88fd\u9020\u30aa\u30fc\u30c0\n            new Order(\"MO-2025-001\", OrderType.MANUFACTURING, \"PROD-A001\", effectiveDate,\n                     new BigDecimal(\"100\"), LocalDate.of(2025, 1, 31), OrderStatus.CONFIRMED),\n            new Order(\"MO-2025-002\", OrderType.MANUFACTURING, \"PROD-A001\", effectiveDate,\n                     new BigDecimal(\"100\"), LocalDate.of(2025, 2, 7), OrderStatus.PLANNED),\n            new Order(\"MO-2025-003\", OrderType.MANUFACTURING, \"PROD-B001\", effectiveDate,\n                     new BigDecimal(\"50\"), LocalDate.of(2025, 1, 31), OrderStatus.CONFIRMED),\n\n            // \u8cfc\u8cb7\u30aa\u30fc\u30c0\n            new Order(\"PO-2025-001\", OrderType.PURCHASE, \"MAT-001\", effectiveDate,\n                     new BigDecimal(\"200\"), LocalDate.of(2025, 1, 20), OrderStatus.ORDERED),\n            new Order(\"PO-2025-002\", OrderType.PURCHASE, \"MAT-003\", effectiveDate,\n                     new BigDecimal(\"150\"), LocalDate.of(2025, 1, 22), OrderStatus.ORDERED)\n        );\n\n        orders.forEach(orderMapper::insert);\n        log.info(\"\u30aa\u30fc\u30c0\u60c5\u5831 {}\u4ef6 \u6295\u5165\u5b8c\u4e86\", orders.size());\n    }\n\n    private void seedPurchaseOrders(LocalDate effectiveDate) {\n        log.info(\"\u767a\u6ce8\u30c7\u30fc\u30bf\u3092\u6295\u5165\u4e2d...\");\n\n        // \u767a\u6ce81\n        PurchaseOrder po1 = new PurchaseOrder(\n            \"PUR-2025-001\", LocalDate.of(2025, 1, 10),\n            \"SUP-001\", effectiveDate, PurchaseOrderStatus.CONFIRMED\n        );\n        purchaseOrderMapper.insert(po1);\n\n        purchaseOrderDetailMapper.insert(new PurchaseOrderDetail(\n            \"PUR-2025-001\", 1, \"MAT-001\", effectiveDate,\n            new BigDecimal(\"200\"), new BigDecimal(\"1500\"), LocalDate.of(2025, 1, 20)\n        ));\n\n        // \u767a\u6ce82\n        PurchaseOrder po2 = new PurchaseOrder(\n            \"PUR-2025-002\", LocalDate.of(2025, 1, 10),\n            \"SUP-002\", effectiveDate, PurchaseOrderStatus.CONFIRMED\n        );\n        purchaseOrderMapper.insert(po2);\n\n        purchaseOrderDetailMapper.insert(new PurchaseOrderDetail(\n            \"PUR-2025-002\", 1, \"MAT-003\", effectiveDate,\n            new BigDecimal(\"150\"), new BigDecimal(\"2000\"), LocalDate.of(2025, 1, 22)\n        ));\n\n        log.info(\"\u767a\u6ce8\u30c7\u30fc\u30bf 2\u4ef6 \u6295\u5165\u5b8c\u4e86\");\n    }\n\n    private void seedWorkOrders(LocalDate effectiveDate) {\n        log.info(\"\u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf\u3092\u6295\u5165\u4e2d...\");\n\n        // \u4f5c\u696d\u6307\u793a1\n        WorkOrder wo1 = new WorkOrder(\n            \"WO-2025-001\", \"MO-2025-001\",\n            LocalDate.of(2025, 1, 15), WorkOrderStatus.IN_PROGRESS\n        );\n        workOrderMapper.insert(wo1);\n\n        workOrderDetailMapper.insert(new WorkOrderDetail(\n            \"WO-2025-001\", 1, \"ASM\", effectiveDate,\n            new BigDecimal(\"100\"),\n            LocalDateTime.of(2025, 1, 20, 9, 0),\n            LocalDateTime.of(2025, 1, 20, 17, 0)\n        ));\n        workOrderDetailMapper.insert(new WorkOrderDetail(\n            \"WO-2025-001\", 2, \"INS-SHIP\", effectiveDate,\n            new BigDecimal(\"100\"),\n            LocalDateTime.of(2025, 1, 21, 9, 0),\n            LocalDateTime.of(2025, 1, 21, 12, 0)\n        ));\n\n        // \u4f5c\u696d\u6307\u793a2\uff08\u5b8c\u4e86\u6e08\u307f\uff09\n        WorkOrder wo2 = new WorkOrder(\n            \"WO-2025-002\", \"MO-2025-005\",\n            LocalDate.of(2025, 1, 12), WorkOrderStatus.COMPLETED\n        );\n        workOrderMapper.insert(wo2);\n\n        workOrderDetailMapper.insert(new WorkOrderDetail(\n            \"WO-2025-002\", 1, \"LATHE\", effectiveDate,\n            new BigDecimal(\"120\"),\n            LocalDateTime.of(2025, 1, 15, 9, 0),\n            LocalDateTime.of(2025, 1, 16, 17, 0)\n        ));\n\n        log.info(\"\u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf 2\u4ef6 \u6295\u5165\u5b8c\u4e86\");\n    }\n\n    private void seedCompletionRecords(LocalDate effectiveDate) {\n        log.info(\"\u5b8c\u6210\u5b9f\u7e3e\u30c7\u30fc\u30bf\u3092\u6295\u5165\u4e2d...\");\n\n        List&lt;CompletionRecord&gt; records = List.of(\n            new CompletionRecord(\n                \"CR-2025-001\", \"WO-2025-002\", 1,\n                LocalDate.of(2025, 1, 16),\n                new BigDecimal(\"118\"), new BigDecimal(\"116\"), new BigDecimal(\"2\"),\n                \"EMP-001\", effectiveDate\n            ),\n            new CompletionRecord(\n                \"CR-2025-002\", \"WO-2025-002\", 2,\n                LocalDate.of(2025, 1, 17),\n                new BigDecimal(\"116\"), new BigDecimal(\"115\"), new BigDecimal(\"1\"),\n                \"EMP-002\", effectiveDate\n            )\n        );\n\n        records.forEach(completionRecordMapper::insert);\n        log.info(\"\u5b8c\u6210\u5b9f\u7e3e\u30c7\u30fc\u30bf {}\u4ef6 \u6295\u5165\u5b8c\u4e86\", records.size());\n    }\n\n    private void seedLaborRecords(LocalDate effectiveDate) {\n        log.info(\"\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\u3092\u6295\u5165\u4e2d...\");\n\n        List&lt;LaborRecord&gt; records = List.of(\n            new LaborRecord(\n                \"LH-2025-001\", \"WO-2025-002\", 1,\n                LocalDate.of(2025, 1, 15),\n                \"EMP-001\", effectiveDate,\n                new BigDecimal(\"8.0\"), new BigDecimal(\"0.5\")\n            ),\n            new LaborRecord(\n                \"LH-2025-002\", \"WO-2025-002\", 1,\n                LocalDate.of(2025, 1, 16),\n                \"EMP-001\", effectiveDate,\n                new BigDecimal(\"6.0\"), BigDecimal.ZERO\n            )\n        );\n\n        records.forEach(laborRecordMapper::insert);\n        log.info(\"\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf {}\u4ef6 \u6295\u5165\u5b8c\u4e86\", records.size());\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter31/#seed-mapper-xml","title":"Seed \u524a\u9664\u7528 Mapper XML","text":"seed-mapper.xml <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n    \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"seed\"&gt;\n\n    &lt;!-- \u524a\u9664\u6587\uff08\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\uff09 --&gt;\n    &lt;delete id=\"deleteAllLaborRecords\"&gt;\n        DELETE FROM \"\u5de5\u6570\u5b9f\u7e3e\u30c7\u30fc\u30bf\"\n    &lt;/delete&gt;\n\n    &lt;delete id=\"deleteAllCompletionRecords\"&gt;\n        DELETE FROM \"\u5b8c\u6210\u5b9f\u7e3e\u30c7\u30fc\u30bf\"\n    &lt;/delete&gt;\n\n    &lt;delete id=\"deleteAllWorkOrderDetails\"&gt;\n        DELETE FROM \"\u4f5c\u696d\u6307\u793a\u660e\u7d30\u30c7\u30fc\u30bf\"\n    &lt;/delete&gt;\n\n    &lt;delete id=\"deleteAllWorkOrders\"&gt;\n        DELETE FROM \"\u4f5c\u696d\u6307\u793a\u30c7\u30fc\u30bf\"\n    &lt;/delete&gt;\n\n    &lt;delete id=\"deleteAllPurchaseOrderDetails\"&gt;\n        DELETE FROM \"\u767a\u6ce8\u660e\u7d30\u30c7\u30fc\u30bf\"\n    &lt;/delete&gt;\n\n    &lt;delete id=\"deleteAllPurchaseOrders\"&gt;\n        DELETE FROM \"\u767a\u6ce8\u30c7\u30fc\u30bf\"\n    &lt;/delete&gt;\n\n    &lt;delete id=\"deleteAllOrders\"&gt;\n        DELETE FROM \"\u30aa\u30fc\u30c0\u60c5\u5831\"\n    &lt;/delete&gt;\n\n    &lt;delete id=\"deleteAllStocks\"&gt;\n        DELETE FROM \"\u5728\u5eab\u60c5\u5831\"\n    &lt;/delete&gt;\n\n    &lt;!-- \u524a\u9664\u6587\uff08\u30de\u30b9\u30bf\u30c7\u30fc\u30bf\uff09 --&gt;\n    &lt;delete id=\"deleteAllDefects\"&gt;\n        DELETE FROM \"\u6b20\u70b9\u30de\u30b9\u30bf\"\n    &lt;/delete&gt;\n\n    &lt;delete id=\"deleteAllUnitPrices\"&gt;\n        DELETE FROM \"\u5358\u4fa1\u30de\u30b9\u30bf\"\n    &lt;/delete&gt;\n\n    &lt;delete id=\"deleteAllEmployees\"&gt;\n        DELETE FROM \"\u62c5\u5f53\u8005\u30de\u30b9\u30bf\"\n    &lt;/delete&gt;\n\n    &lt;delete id=\"deleteAllRoutings\"&gt;\n        DELETE FROM \"\u5de5\u7a0b\u8868\"\n    &lt;/delete&gt;\n\n    &lt;delete id=\"deleteAllBoms\"&gt;\n        DELETE FROM \"BOM\"\n    &lt;/delete&gt;\n\n    &lt;delete id=\"deleteAllItems\"&gt;\n        DELETE FROM \"\u54c1\u76ee\u30de\u30b9\u30bf\"\n    &lt;/delete&gt;\n\n    &lt;delete id=\"deleteAllProcesses\"&gt;\n        DELETE FROM \"\u5de5\u7a0b\u30de\u30b9\u30bf\"\n    &lt;/delete&gt;\n\n    &lt;delete id=\"deleteAllWarehouses\"&gt;\n        DELETE FROM \"\u5009\u5eab\u30de\u30b9\u30bf\"\n    &lt;/delete&gt;\n\n    &lt;delete id=\"deleteAllLocations\"&gt;\n        DELETE FROM \"\u5834\u6240\u30de\u30b9\u30bf\"\n    &lt;/delete&gt;\n\n    &lt;delete id=\"deleteAllSuppliers\"&gt;\n        DELETE FROM \"\u53d6\u5f15\u5148\u30de\u30b9\u30bf\"\n    &lt;/delete&gt;\n\n    &lt;delete id=\"deleteAllDepartments\"&gt;\n        DELETE FROM \"\u90e8\u9580\u30de\u30b9\u30bf\"\n    &lt;/delete&gt;\n\n    &lt;delete id=\"deleteAllItemGroups\"&gt;\n        DELETE FROM \"\u54c1\u76ee\u30b0\u30eb\u30fc\u30d7\u30de\u30b9\u30bf\"\n    &lt;/delete&gt;\n\n    &lt;delete id=\"deleteAllUnits\"&gt;\n        DELETE FROM \"\u5358\u4f4d\u30de\u30b9\u30bf\"\n    &lt;/delete&gt;\n\n&lt;/mapper&gt;\n</code></pre>"},{"location":"article/part4/chapter31/#_12","title":"\u5b9f\u884c\u65b9\u6cd5","text":""},{"location":"article/part4/chapter31/#gradle","title":"Gradle \u30bf\u30b9\u30af\u306e\u8a2d\u5b9a","text":"<pre><code>// build.gradle.kts\ntasks.register&lt;JavaExec&gt;(\"seedData\") {\n    group = \"application\"\n    description = \"Seed \u30c7\u30fc\u30bf\u3092\u6295\u5165\u3059\u308b\"\n    mainClass.set(\"com.example.sms.seed.SeedRunner\")\n    classpath = sourceSets[\"main\"].runtimeClasspath\n    args(\"--spring.profiles.active=seed\")\n}\n</code></pre>"},{"location":"article/part4/chapter31/#_13","title":"\u5b9f\u884c\u30b3\u30de\u30f3\u30c9","text":"<pre><code># Gradle \u30bf\u30b9\u30af\u3067\u5b9f\u884c\n./gradlew seedData\n\n# \u307e\u305f\u306f\u76f4\u63a5 Java \u3067\u5b9f\u884c\njava -jar build/libs/production-management.jar --spring.profiles.active=seed\n</code></pre>"},{"location":"article/part4/chapter31/#315","title":"31.5 \u30c7\u30fc\u30bf\u306e\u691c\u8a3c\u3068\u6d3b\u7528","text":""},{"location":"article/part4/chapter31/#bom_2","title":"\u30c7\u30fc\u30bf\u306e\u6574\u5408\u6027\u78ba\u8a8d\uff08BOM \u5c55\u958b\u30fb\u5728\u5eab\u6b8b\u9ad8\u30fb\u767a\u6ce8\u6b8b\uff09","text":"SeedDataIntegrationTest.java <pre><code>// src/test/java/com/example/sms/seed/SeedDataIntegrationTest.java\npackage com.example.sms.seed;\n\nimport com.example.sms.domain.model.bom.Bom;\nimport com.example.sms.domain.model.inventory.Stock;\nimport com.example.sms.domain.model.item.Item;\nimport com.example.sms.infrastructure.out.persistence.mapper.*;\nimport org.junit.jupiter.api.*;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.test.context.DynamicPropertyRegistry;\nimport org.springframework.test.context.DynamicPropertySource;\nimport org.testcontainers.containers.PostgreSQLContainer;\nimport org.testcontainers.junit.jupiter.Container;\nimport org.testcontainers.junit.jupiter.Testcontainers;\n\nimport java.util.List;\n\nimport static org.assertj.core.api.Assertions.assertThat;\n\n@SpringBootTest\n@Testcontainers\n@DisplayName(\"Seed \u30c7\u30fc\u30bf\u6574\u5408\u6027\u30c1\u30a7\u30c3\u30af\")\nclass SeedDataIntegrationTest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:15\")\n            .withDatabaseName(\"production_test\")\n            .withUsername(\"test\")\n            .withPassword(\"test\");\n\n    @DynamicPropertySource\n    static void configureProperties(DynamicPropertyRegistry registry) {\n        registry.add(\"spring.datasource.url\", postgres::getJdbcUrl);\n        registry.add(\"spring.datasource.username\", postgres::getUsername);\n        registry.add(\"spring.datasource.password\", postgres::getPassword);\n    }\n\n    @Autowired\n    private SeedDataService seedDataService;\n\n    @Autowired\n    private ItemMapper itemMapper;\n\n    @Autowired\n    private BomMapper bomMapper;\n\n    @Autowired\n    private StockMapper stockMapper;\n\n    @BeforeEach\n    void seedData() {\n        seedDataService.seedAll();\n    }\n\n    @Nested\n    @DisplayName(\"\u30de\u30b9\u30bf\u30c7\u30fc\u30bf\u306e\u59a5\u5f53\u6027\u691c\u8a3c\")\n    class MasterDataValidation {\n\n        @Test\n        @DisplayName(\"\u3059\u3079\u3066\u306e\u54c1\u76ee\u304c\u5358\u4f4d\u3092\u6301\u3064\")\n        void allItemsHaveUnit() {\n            List&lt;Item&gt; items = itemMapper.findAll();\n\n            assertThat(items).isNotEmpty();\n            for (Item item : items) {\n                assertThat(item.getUnitCode()).isNotBlank();\n            }\n        }\n\n        @Test\n        @DisplayName(\"\u3059\u3079\u3066\u306e\u54c1\u76ee\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u5834\u6240\u3092\u6301\u3064\")\n        void allItemsHaveDefaultLocation() {\n            List&lt;Item&gt; items = itemMapper.findAll();\n\n            for (Item item : items) {\n                assertThat(item.getLocationCode()).isNotBlank();\n            }\n        }\n    }\n\n    @Nested\n    @DisplayName(\"BOM \u5c55\u958b\u306e\u6574\u5408\u6027\u78ba\u8a8d\")\n    class BomIntegrity {\n\n        @Test\n        @DisplayName(\"\u88fd\u54c1\u306eBOM\u304c\u6b63\u3057\u304f\u5c55\u958b\u3067\u304d\u308b\")\n        void productBomCanBeExpanded() {\n            List&lt;Bom&gt; boms = bomMapper.findByParentItemCode(\"PROD-A001\");\n\n            assertThat(boms).isNotEmpty();\n            for (Bom bom : boms) {\n                assertThat(bom.getRequiredQuantity()).isPositive();\n            }\n        }\n\n        @Test\n        @DisplayName(\"BOM \u306b\u5faa\u74b0\u53c2\u7167\u304c\u306a\u3044\")\n        void noCyclicReferenceInBom() {\n            List&lt;Bom&gt; allBoms = bomMapper.findAll();\n\n            for (Bom bom : allBoms) {\n                // \u7c21\u6613\u7684\u306a\u5faa\u74b0\u53c2\u7167\u30c1\u30a7\u30c3\u30af\uff08\u89aa=\u5b50\u306f\u7981\u6b62\uff09\n                assertThat(bom.getParentItemCode())\n                    .isNotEqualTo(bom.getChildItemCode());\n            }\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u5728\u5eab\u6570\u91cf\u306e\u6b63\u78ba\u6027\u691c\u8a3c\")\n    class StockValidation {\n\n        @Test\n        @DisplayName(\"\u5728\u5eab\u6570\u91cf\u304c0\u4ee5\u4e0a\u3067\u3042\u308b\")\n        void stockQuantityIsNonNegative() {\n            List&lt;Stock&gt; stocks = stockMapper.findAll();\n\n            assertThat(stocks).isNotEmpty();\n            for (Stock stock : stocks) {\n                assertThat(stock.getQuantity()).isNotNegative();\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter31/#_14","title":"\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u306e\u6d3b\u7528\u65b9\u6cd5","text":"<p>\u3053\u306e\u30c7\u30fc\u30bf\u3092\u4f7f\u3063\u3066\u4ee5\u4e0b\u306e\u696d\u52d9\u3092\u5b66\u7fd2\u30fb\u691c\u8a3c\u3067\u304d\u307e\u3059\uff1a</p> \u696d\u52d9\u9818\u57df \u5b66\u7fd2\u5185\u5bb9 MRP\uff08\u6240\u8981\u91cf\u5c55\u958b\uff09 \u88fd\u54c1\u306e\u751f\u7523\u8a08\u753b\u304b\u3089\u5fc5\u8981\u306a\u90e8\u54c1\u30fb\u6750\u6599\u306e\u6570\u91cf\u3092\u8a08\u7b97 \u8cfc\u8cb7\u7ba1\u7406 \u767a\u6ce8\u304b\u3089\u691c\u53ce\u307e\u3067\u306e\u4e00\u9023\u306e\u30d5\u30ed\u30fc \u5916\u6ce8\u7ba1\u7406 \u652f\u7d66\u54c1\u306e\u7ba1\u7406\u3068\u6d88\u8cbb\u8a18\u9332 \u5de5\u7a0b\u7ba1\u7406 \u4f5c\u696d\u6307\u793a\u304b\u3089\u5b8c\u6210\u5b9f\u7e3e\u307e\u3067\u306e\u8ffd\u8de1 \u5728\u5eab\u7ba1\u7406 \u54c1\u76ee\u00d7\u5834\u6240\u3067\u306e\u5728\u5eab\u72b6\u614b\u7ba1\u7406"},{"location":"article/part4/chapter31/#_15","title":"\u30c6\u30b9\u30c8\u30b7\u30ca\u30ea\u30aa\u3078\u306e\u5fdc\u7528","text":""},{"location":"article/part4/chapter31/#mrp","title":"MRP \u5b9f\u884c\u7d50\u679c\u306e\u691c\u8a3c","text":"<pre><code>@Test\n@DisplayName(\"\u88fd\u9020\u30aa\u30fc\u30c0\u304b\u3089\u6240\u8981\u91cf\u304c\u6b63\u3057\u304f\u8a08\u7b97\u3055\u308c\u308b\")\nvoid calculateRequirementsFromManufacturingOrder() {\n    var order = orderMapper.findByOrderNumber(\"MO-2025-001\");\n\n    assertThat(order).isNotNull();\n    assertThat(order.getQuantity()).isEqualByComparingTo(new BigDecimal(\"100\"));\n\n    // BOM\u5c55\u958b\u3067\u5fc5\u8981\u91cf\u3092\u8a08\u7b97\n    List&lt;Bom&gt; boms = bomMapper.findByParentItemCode(order.getItemCode());\n\n    for (Bom bom : boms) {\n        BigDecimal requiredQty = order.getQuantity()\n            .multiply(bom.getRequiredQuantity());\n        System.out.println(bom.getChildItemCode() + \": \" + requiredQty + \"\u500b\");\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter31/#_16","title":"\u307e\u3068\u3081","text":"<p>\u672c\u7ae0\u3067\u306f\u3001E \u793e\u4e8b\u4f8b\u3092\u57fa\u306b\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u30c7\u30fc\u30bf\u8a2d\u8a08\u3068 Seed \u30c7\u30fc\u30bf\u5b9f\u88c5\u3092\u89e3\u8aac\u3057\u307e\u3057\u305f\u3002</p>"},{"location":"article/part4/chapter31/#_17","title":"\u5b9f\u88c5\u3057\u305f\u30c7\u30fc\u30bf","text":"\u30ab\u30c6\u30b4\u30ea \u5185\u5bb9 \u30de\u30b9\u30bf\u30c7\u30fc\u30bf \u54c1\u76ee25\u4ef6\u3001BOM20\u4ef6\u3001\u5de5\u7a0b\u886824\u4ef6\u3001\u53d6\u5f15\u514810\u4ef6 \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3 \u30aa\u30fc\u30c09\u4ef6\u3001\u767a\u6ce83\u4ef6\u3001\u4f5c\u696d\u6307\u793a2\u4ef6\u3001\u5b8c\u6210\u5b9f\u7e3e2\u4ef6 \u5728\u5eab\u60c5\u5831 17\u7b87\u6240\u00d7\u54c1\u76ee\u306e\u521d\u671f\u5728\u5eab"},{"location":"article/part4/chapter31/#_18","title":"\u30c7\u30fc\u30bf\u306e\u7279\u5fb4","text":"<ol> <li>\u968e\u5c64\u7684\u306a\u88fd\u54c1\u69cb\u6210: \u88fd\u54c1\u2192\u534a\u88fd\u54c1\u2192\u90e8\u54c1\u2192\u6750\u6599\u306e BOM \u69cb\u9020</li> <li>\u5de5\u7a0b\u306e\u591a\u69d8\u6027: \u5207\u524a\u3001\u5916\u6ce8\uff08\u30e1\u30c3\u30ad\u3001\u71b1\u51e6\u7406\uff09\u3001\u7d44\u7acb\u3001\u691c\u67fb</li> <li>\u30c8\u30ec\u30fc\u30b5\u30d3\u30ea\u30c6\u30a3: \u30aa\u30fc\u30c0\u304b\u3089\u5b8c\u6210\u5b9f\u7e3e\u307e\u3067\u8ffd\u8de1\u53ef\u80fd</li> <li>\u547d\u540d\u898f\u5247\u306e\u5206\u96e2: Java \u306f\u82f1\u8a9e\u3001DB \u306f\u65e5\u672c\u8a9e</li> </ol>"},{"location":"article/part4/chapter31/#_19","title":"\u5b66\u7fd2\u52b9\u679c","text":"<ul> <li>\u751f\u7523\u7ba1\u7406\u696d\u52d9\u306e\u5168\u4f53\u50cf\u3092\u628a\u63e1</li> <li>TDD \u306b\u3088\u308b\u30c9\u30e1\u30a4\u30f3\u77e5\u8b58\u306e\u7fd2\u5f97</li> <li>\u5b9f\u52d9\u306b\u5373\u3057\u305f\u30c7\u30fc\u30bf\u8a2d\u8a08\u306e\u7d4c\u9a13</li> </ul>"},{"location":"article/part4/chapter31/#_20","title":"\u6b21\u7ae0\u3078\u306e\u6a4b\u6e21\u3057","text":"<p>\u6b21\u7ae0\u3067\u306f\u3001\u3053\u306e\u30c7\u30fc\u30bf\u30e2\u30c7\u30eb\u3092\u6d3b\u7528\u3057\u305f API \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5\u306b\u9032\u307f\u307e\u3059\u3002\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u57fa\u3065\u3044\u305f REST API \u306e\u8a2d\u8a08\u3068\u5b9f\u88c5\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002</p> <p>\u2190 \u7b2c30\u7ae0\uff1a\u88fd\u9020\u539f\u4fa1\u7ba1\u7406\u306e\u8a2d\u8a08 | \u7b2c32\u7ae0\uff1aAPI\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5 \u2192</p>"},{"location":"article/part4/chapter32/","title":"\u7b2c32\u7ae0\uff1aAPI \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":""},{"location":"article/part4/chapter32/#321","title":"32.1 \u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u5fa9\u7fd2","text":""},{"location":"article/part4/chapter32/#_1","title":"\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3068\u306f","text":"<p>\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08Ports and Adapters \u30d1\u30bf\u30fc\u30f3\uff09\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\u3092\u5916\u90e8\u306e\u6280\u8853\u7684\u8a73\u7d30\u304b\u3089\u5206\u96e2\u3059\u308b\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30b9\u30bf\u30a4\u30eb\u3067\u3059\u3002</p> <p></p>"},{"location":"article/part4/chapter32/#_2","title":"\u4e3b\u8981\u306a\u6982\u5ff5","text":"\u6982\u5ff5 \u8aac\u660e \u4f8b Input Port \u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u3092\u5b9a\u7fa9\u3059\u308b\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9 ItemUseCase Output Port \u5916\u90e8\u30ea\u30bd\u30fc\u30b9\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u5b9a\u7fa9\u3059\u308b\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9 ItemRepository Input Adapter \u5916\u90e8\u304b\u3089\u306e\u5165\u529b\u3092\u53d7\u3051\u4ed8\u3051\u308b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8 REST Controller Output Adapter \u5916\u90e8\u30ea\u30bd\u30fc\u30b9\u3078\u306e\u51fa\u529b\u3092\u884c\u3046\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8 MyBatis Repository Domain \u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3092\u542b\u3080\u4e2d\u5fc3\u90e8\u5206 Entity, Value Object"},{"location":"article/part4/chapter32/#_3","title":"\u4f9d\u5b58\u95a2\u4fc2\u306e\u65b9\u5411","text":"<p>\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3067\u306f\u3001\u4f9d\u5b58\u95a2\u4fc2\u306f\u5e38\u306b\u5916\u5074\u304b\u3089\u5185\u5074\u306b\u5411\u304b\u3044\u307e\u3059\u3002</p> <p></p>"},{"location":"article/part4/chapter32/#322","title":"32.2 \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u69cb\u9020","text":""},{"location":"article/part4/chapter32/#_4","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u9020","text":"<pre><code>production-management/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 main/\n\u2502   \u2502   \u251c\u2500\u2500 java/\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 com/example/production/\n\u2502   \u2502   \u2502       \u251c\u2500\u2500 ProductionManagementApplication.java\n\u2502   \u2502   \u2502       \u251c\u2500\u2500 domain/\n\u2502   \u2502   \u2502       \u2502   \u251c\u2500\u2500 model/           # \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u30fb\u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\u2502   \u2502   \u2502       \u2502   \u2502   \u251c\u2500\u2500 item/\n\u2502   \u2502   \u2502       \u2502   \u2502   \u251c\u2500\u2500 bom/\n\u2502   \u2502   \u2502       \u2502   \u2502   \u251c\u2500\u2500 inventory/\n\u2502   \u2502   \u2502       \u2502   \u2502   \u2514\u2500\u2500 workorder/\n\u2502   \u2502   \u2502       \u2502   \u251c\u2500\u2500 service/         # \u30c9\u30e1\u30a4\u30f3\u30b5\u30fc\u30d3\u30b9\n\u2502   \u2502   \u2502       \u2502   \u2514\u2500\u2500 exception/       # \u30c9\u30e1\u30a4\u30f3\u4f8b\u5916\n\u2502   \u2502   \u2502       \u251c\u2500\u2500 application/\n\u2502   \u2502   \u2502       \u2502   \u251c\u2500\u2500 port/\n\u2502   \u2502   \u2502       \u2502   \u2502   \u251c\u2500\u2500 in/          # Input Port\uff08\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\uff09\n\u2502   \u2502   \u2502       \u2502   \u2502   \u2514\u2500\u2500 out/         # Output Port\uff08\u30ea\u30dd\u30b8\u30c8\u30ea\uff09\n\u2502   \u2502   \u2502       \u2502   \u2514\u2500\u2500 service/         # \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\n\u2502   \u2502   \u2502       \u2514\u2500\u2500 infrastructure/\n\u2502   \u2502   \u2502           \u251c\u2500\u2500 rest/\n\u2502   \u2502   \u2502           \u2502   \u251c\u2500\u2500 controller/  # REST Controller\n\u2502   \u2502   \u2502           \u2502   \u251c\u2500\u2500 dto/         # Request/Response DTO\n\u2502   \u2502   \u2502           \u2502   \u2514\u2500\u2500 exception/   # \u4f8b\u5916\u30cf\u30f3\u30c9\u30e9\n\u2502   \u2502   \u2502           \u2514\u2500\u2500 persistence/\n\u2502   \u2502   \u2502               \u2514\u2500\u2500 mybatis/     # MyBatis Repository\n\u2502   \u2502   \u2514\u2500\u2500 resources/\n\u2502   \u2502       \u251c\u2500\u2500 mapper/                  # MyBatis \u30de\u30c3\u30d1\u30fc XML\n\u2502   \u2502       \u2514\u2500\u2500 application.yml\n\u2502   \u2514\u2500\u2500 test/\n\u2502       \u2514\u2500\u2500 java/\n\u2502           \u2514\u2500\u2500 com/example/production/\n\u2502               \u2514\u2500\u2500 infrastructure/\n\u2502                   \u2514\u2500\u2500 rest/\n\u2502                       \u2514\u2500\u2500 controller/  # \u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30c6\u30b9\u30c8\n\u2514\u2500\u2500 build.gradle.kts\n</code></pre>"},{"location":"article/part4/chapter32/#_5","title":"\u6280\u8853\u30b9\u30bf\u30c3\u30af\u306e\u5c0e\u5165","text":"build.gradle.kts <pre><code>plugins {\n    java\n    id(\"org.springframework.boot\") version \"3.2.0\"\n    id(\"io.spring.dependency-management\") version \"1.1.4\"\n}\n\ngroup = \"com.example\"\nversion = \"0.0.1-SNAPSHOT\"\n\njava {\n    sourceCompatibility = JavaVersion.VERSION_21\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    // Spring Boot\n    implementation(\"org.springframework.boot:spring-boot-starter-web\")\n    implementation(\"org.springframework.boot:spring-boot-starter-validation\")\n\n    // MyBatis\n    implementation(\"org.mybatis.spring.boot:mybatis-spring-boot-starter:3.0.3\")\n\n    // PostgreSQL\n    runtimeOnly(\"org.postgresql:postgresql\")\n\n    // OpenAPI / Swagger\n    implementation(\"org.springdoc:springdoc-openapi-starter-webmvc-ui:2.3.0\")\n\n    // Lombok\n    compileOnly(\"org.projectlombok:lombok\")\n    annotationProcessor(\"org.projectlombok:lombok\")\n\n    // Test\n    testImplementation(\"org.springframework.boot:spring-boot-starter-test\")\n    testImplementation(\"org.testcontainers:postgresql:1.19.3\")\n    testImplementation(\"org.testcontainers:junit-jupiter:1.19.3\")\n}\n\ntasks.withType&lt;Test&gt; {\n    useJUnitPlatform()\n}\n</code></pre>"},{"location":"article/part4/chapter32/#_6","title":"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a","text":"ProductionManagementApplication.java <pre><code>package com.example.production;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class ProductionManagementApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(ProductionManagementApplication.class, args);\n    }\n}\n</code></pre> OpenApiConfig.java <pre><code>package com.example.production.infrastructure.rest.config;\n\nimport io.swagger.v3.oas.models.OpenAPI;\nimport io.swagger.v3.oas.models.info.Info;\nimport io.swagger.v3.oas.models.info.Contact;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class OpenApiConfig {\n\n    @Bean\n    public OpenAPI customOpenAPI() {\n        return new OpenAPI()\n            .info(new Info()\n                .title(\"\u751f\u7523\u7ba1\u7406 API\")\n                .version(\"1.0\")\n                .description(\"\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e RESTful API\")\n                .contact(new Contact()\n                    .name(\"\u958b\u767a\u30c1\u30fc\u30e0\")\n                    .email(\"dev@example.com\")));\n    }\n}\n</code></pre> RootController.java <pre><code>package com.example.production.infrastructure.rest.controller;\n\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport java.util.Map;\n\n@RestController\npublic class RootController {\n\n    @GetMapping(\"/\")\n    public ResponseEntity&lt;Map&lt;String, String&gt;&gt; root() {\n        return ResponseEntity.ok(Map.of(\n            \"service\", \"Production Management API\",\n            \"version\", \"1.0\",\n            \"docs\", \"/swagger-ui.html\"\n        ));\n    }\n\n    @GetMapping(\"/health\")\n    public ResponseEntity&lt;Map&lt;String, String&gt;&gt; health() {\n        return ResponseEntity.ok(Map.of(\"status\", \"UP\"));\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter32/#323-api","title":"32.3 \u30de\u30b9\u30bf API \u306e\u5b9f\u88c5","text":""},{"location":"article/part4/chapter32/#3231-api","title":"32.3.1 \u54c1\u76ee\u30de\u30b9\u30bf API","text":""},{"location":"article/part4/chapter32/#output-port","title":"Output Port\uff08\u30ea\u30dd\u30b8\u30c8\u30ea\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff09","text":"ItemRepository.java <pre><code>package com.example.production.application.port.out;\n\nimport com.example.production.domain.model.item.Item;\n\nimport java.util.List;\nimport java.util.Optional;\n\n/**\n * \u54c1\u76ee\u30ea\u30dd\u30b8\u30c8\u30ea\uff08Output Port\uff09\n */\npublic interface ItemRepository {\n\n    List&lt;Item&gt; findAll();\n\n    Optional&lt;Item&gt; findByCode(String itemCode);\n\n    void save(Item item);\n\n    void update(Item item);\n\n    void deleteByCode(String itemCode);\n\n    boolean existsByCode(String itemCode);\n}\n</code></pre>"},{"location":"article/part4/chapter32/#input-port","title":"Input Port\uff08\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff09","text":"ItemUseCase.java <pre><code>package com.example.production.application.port.in;\n\nimport com.example.production.domain.model.item.Item;\nimport lombok.Builder;\nimport lombok.Value;\n\nimport java.math.BigDecimal;\nimport java.util.List;\n\n/**\n * \u54c1\u76ee\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\uff08Input Port\uff09\n */\npublic interface ItemUseCase {\n\n    List&lt;Item&gt; getAllItems();\n\n    Item getItem(String itemCode);\n\n    Item createItem(CreateItemCommand command);\n\n    Item updateItem(String itemCode, UpdateItemCommand command);\n\n    void deleteItem(String itemCode);\n}\n\n@Value\n@Builder\nclass CreateItemCommand {\n    String itemCode;\n    String itemName;\n    String itemType;\n    String unit;\n    BigDecimal standardCost;\n    Integer safetyStock;\n    Integer leadTime;\n}\n\n@Value\n@Builder\nclass UpdateItemCommand {\n    String itemName;\n    String unit;\n    BigDecimal standardCost;\n    Integer safetyStock;\n    Integer leadTime;\n}\n</code></pre>"},{"location":"article/part4/chapter32/#application-service","title":"Application Service","text":"ItemService.java <pre><code>package com.example.production.application.service;\n\nimport com.example.production.application.port.in.*;\nimport com.example.production.application.port.out.ItemRepository;\nimport com.example.production.domain.exception.DuplicateItemException;\nimport com.example.production.domain.exception.ItemNotFoundException;\nimport com.example.production.domain.model.item.Item;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.util.List;\n\n@Service\n@Transactional\npublic class ItemService implements ItemUseCase {\n\n    private final ItemRepository itemRepository;\n\n    public ItemService(ItemRepository itemRepository) {\n        this.itemRepository = itemRepository;\n    }\n\n    @Override\n    @Transactional(readOnly = true)\n    public List&lt;Item&gt; getAllItems() {\n        return itemRepository.findAll();\n    }\n\n    @Override\n    @Transactional(readOnly = true)\n    public Item getItem(String itemCode) {\n        return itemRepository.findByCode(itemCode)\n            .orElseThrow(() -&gt; new ItemNotFoundException(itemCode));\n    }\n\n    @Override\n    public Item createItem(CreateItemCommand command) {\n        if (itemRepository.existsByCode(command.getItemCode())) {\n            throw new DuplicateItemException(command.getItemCode());\n        }\n\n        Item item = Item.builder()\n            .itemCode(command.getItemCode())\n            .itemName(command.getItemName())\n            .itemType(command.getItemType())\n            .unit(command.getUnit())\n            .standardCost(command.getStandardCost())\n            .safetyStock(command.getSafetyStock())\n            .leadTime(command.getLeadTime())\n            .build();\n\n        itemRepository.save(item);\n        return item;\n    }\n\n    @Override\n    public Item updateItem(String itemCode, UpdateItemCommand command) {\n        Item existing = itemRepository.findByCode(itemCode)\n            .orElseThrow(() -&gt; new ItemNotFoundException(itemCode));\n\n        Item updated = existing.toBuilder()\n            .itemName(command.getItemName())\n            .unit(command.getUnit())\n            .standardCost(command.getStandardCost())\n            .safetyStock(command.getSafetyStock())\n            .leadTime(command.getLeadTime())\n            .build();\n\n        itemRepository.update(updated);\n        return updated;\n    }\n\n    @Override\n    public void deleteItem(String itemCode) {\n        if (!itemRepository.existsByCode(itemCode)) {\n            throw new ItemNotFoundException(itemCode);\n        }\n        itemRepository.deleteByCode(itemCode);\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter32/#input-adapterrest-controller","title":"Input Adapter\uff08REST Controller\uff09","text":"ItemControllerTest.java\uff08\u30c6\u30b9\u30c8\u99c6\u52d5\u958b\u767a\uff09 <pre><code>package com.example.production.infrastructure.rest.controller;\n\nimport com.example.production.application.port.in.CreateItemCommand;\nimport com.example.production.application.port.in.ItemUseCase;\nimport com.example.production.domain.model.item.Item;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;\nimport org.springframework.boot.test.mock.mockito.MockBean;\nimport org.springframework.http.MediaType;\nimport org.springframework.test.web.servlet.MockMvc;\n\nimport java.math.BigDecimal;\nimport java.util.List;\n\nimport static org.mockito.ArgumentMatchers.any;\nimport static org.mockito.Mockito.when;\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;\n\n@WebMvcTest(ItemController.class)\nclass ItemControllerTest {\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @Autowired\n    private ObjectMapper objectMapper;\n\n    @MockBean\n    private ItemUseCase itemUseCase;\n\n    private Item sampleItem;\n\n    @BeforeEach\n    void setUp() {\n        sampleItem = Item.builder()\n            .itemCode(\"ITEM001\")\n            .itemName(\"\u30c6\u30b9\u30c8\u54c1\u76ee\")\n            .itemType(\"\u88fd\u54c1\")\n            .unit(\"\u500b\")\n            .standardCost(BigDecimal.valueOf(1000))\n            .safetyStock(100)\n            .leadTime(5)\n            .build();\n    }\n\n    @Test\n    void \u54c1\u76ee\u4e00\u89a7\u3092\u53d6\u5f97\u3067\u304d\u308b() throws Exception {\n        when(itemUseCase.getAllItems()).thenReturn(List.of(sampleItem));\n\n        mockMvc.perform(get(\"/api/items\"))\n            .andExpect(status().isOk())\n            .andExpect(jsonPath(\"$[0].itemCode\").value(\"ITEM001\"))\n            .andExpect(jsonPath(\"$[0].itemName\").value(\"\u30c6\u30b9\u30c8\u54c1\u76ee\"));\n    }\n\n    @Test\n    void \u54c1\u76ee\u3092\u767b\u9332\u3067\u304d\u308b() throws Exception {\n        when(itemUseCase.createItem(any())).thenReturn(sampleItem);\n\n        var request = \"\"\"\n            {\n                \"itemCode\": \"ITEM001\",\n                \"itemName\": \"\u30c6\u30b9\u30c8\u54c1\u76ee\",\n                \"itemType\": \"\u88fd\u54c1\",\n                \"unit\": \"\u500b\",\n                \"standardCost\": 1000,\n                \"safetyStock\": 100,\n                \"leadTime\": 5\n            }\n            \"\"\";\n\n        mockMvc.perform(post(\"/api/items\")\n                .contentType(MediaType.APPLICATION_JSON)\n                .content(request))\n            .andExpect(status().isCreated())\n            .andExpect(jsonPath(\"$.itemCode\").value(\"ITEM001\"));\n    }\n\n    @Test\n    void \u54c1\u76ee\u3092\u524a\u9664\u3067\u304d\u308b() throws Exception {\n        mockMvc.perform(delete(\"/api/items/ITEM001\"))\n            .andExpect(status().isNoContent());\n    }\n}\n</code></pre> ItemController.java <pre><code>package com.example.production.infrastructure.rest.controller;\n\nimport com.example.production.application.port.in.*;\nimport com.example.production.domain.model.item.Item;\nimport com.example.production.infrastructure.rest.dto.*;\nimport io.swagger.v3.oas.annotations.Operation;\nimport io.swagger.v3.oas.annotations.tags.Tag;\nimport jakarta.validation.Valid;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\n\n@RestController\n@RequestMapping(\"/api/items\")\n@Tag(name = \"items\", description = \"\u54c1\u76ee\u30de\u30b9\u30bf API\")\npublic class ItemController {\n\n    private final ItemUseCase itemUseCase;\n\n    public ItemController(ItemUseCase itemUseCase) {\n        this.itemUseCase = itemUseCase;\n    }\n\n    @GetMapping\n    @Operation(summary = \"\u54c1\u76ee\u4e00\u89a7\u306e\u53d6\u5f97\")\n    public ResponseEntity&lt;List&lt;ItemResponse&gt;&gt; getAllItems() {\n        List&lt;Item&gt; items = itemUseCase.getAllItems();\n        return ResponseEntity.ok(items.stream()\n            .map(ItemResponse::from)\n            .toList());\n    }\n\n    @GetMapping(\"/{itemCode}\")\n    @Operation(summary = \"\u54c1\u76ee\u306e\u53d6\u5f97\")\n    public ResponseEntity&lt;ItemResponse&gt; getItem(@PathVariable String itemCode) {\n        Item item = itemUseCase.getItem(itemCode);\n        return ResponseEntity.ok(ItemResponse.from(item));\n    }\n\n    @PostMapping\n    @Operation(summary = \"\u54c1\u76ee\u306e\u767b\u9332\")\n    public ResponseEntity&lt;ItemResponse&gt; createItem(\n            @Valid @RequestBody CreateItemRequest request) {\n        CreateItemCommand command = CreateItemCommand.builder()\n            .itemCode(request.getItemCode())\n            .itemName(request.getItemName())\n            .itemType(request.getItemType())\n            .unit(request.getUnit())\n            .standardCost(request.getStandardCost())\n            .safetyStock(request.getSafetyStock())\n            .leadTime(request.getLeadTime())\n            .build();\n\n        Item item = itemUseCase.createItem(command);\n        return ResponseEntity.status(HttpStatus.CREATED)\n            .body(ItemResponse.from(item));\n    }\n\n    @PutMapping(\"/{itemCode}\")\n    @Operation(summary = \"\u54c1\u76ee\u306e\u66f4\u65b0\")\n    public ResponseEntity&lt;ItemResponse&gt; updateItem(\n            @PathVariable String itemCode,\n            @Valid @RequestBody UpdateItemRequest request) {\n        UpdateItemCommand command = UpdateItemCommand.builder()\n            .itemName(request.getItemName())\n            .unit(request.getUnit())\n            .standardCost(request.getStandardCost())\n            .safetyStock(request.getSafetyStock())\n            .leadTime(request.getLeadTime())\n            .build();\n\n        Item item = itemUseCase.updateItem(itemCode, command);\n        return ResponseEntity.ok(ItemResponse.from(item));\n    }\n\n    @DeleteMapping(\"/{itemCode}\")\n    @Operation(summary = \"\u54c1\u76ee\u306e\u524a\u9664\")\n    @ResponseStatus(HttpStatus.NO_CONTENT)\n    public void deleteItem(@PathVariable String itemCode) {\n        itemUseCase.deleteItem(itemCode);\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter32/#dtorequestresponse","title":"DTO\uff08Request/Response\uff09","text":"CreateItemRequest.java <pre><code>package com.example.production.infrastructure.rest.dto;\n\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.NotNull;\nimport jakarta.validation.constraints.Positive;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\n\n@Data\npublic class CreateItemRequest {\n\n    @NotBlank(message = \"\u54c1\u76ee\u30b3\u30fc\u30c9\u306f\u5fc5\u9808\u3067\u3059\")\n    private String itemCode;\n\n    @NotBlank(message = \"\u54c1\u76ee\u540d\u306f\u5fc5\u9808\u3067\u3059\")\n    private String itemName;\n\n    @NotBlank(message = \"\u54c1\u76ee\u7a2e\u5225\u306f\u5fc5\u9808\u3067\u3059\")\n    private String itemType;\n\n    @NotBlank(message = \"\u5358\u4f4d\u306f\u5fc5\u9808\u3067\u3059\")\n    private String unit;\n\n    @NotNull(message = \"\u6a19\u6e96\u539f\u4fa1\u306f\u5fc5\u9808\u3067\u3059\")\n    @Positive(message = \"\u6a19\u6e96\u539f\u4fa1\u306f\u6b63\u306e\u5024\u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\")\n    private BigDecimal standardCost;\n\n    private Integer safetyStock;\n\n    private Integer leadTime;\n}\n</code></pre> UpdateItemRequest.java <pre><code>package com.example.production.infrastructure.rest.dto;\n\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.Positive;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\n\n@Data\npublic class UpdateItemRequest {\n\n    @NotBlank(message = \"\u54c1\u76ee\u540d\u306f\u5fc5\u9808\u3067\u3059\")\n    private String itemName;\n\n    @NotBlank(message = \"\u5358\u4f4d\u306f\u5fc5\u9808\u3067\u3059\")\n    private String unit;\n\n    @Positive(message = \"\u6a19\u6e96\u539f\u4fa1\u306f\u6b63\u306e\u5024\u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\")\n    private BigDecimal standardCost;\n\n    private Integer safetyStock;\n\n    private Integer leadTime;\n}\n</code></pre> ItemResponse.java <pre><code>package com.example.production.infrastructure.rest.dto;\n\nimport com.example.production.domain.model.item.Item;\nimport lombok.Builder;\nimport lombok.Value;\n\nimport java.math.BigDecimal;\n\n@Value\n@Builder\npublic class ItemResponse {\n\n    String itemCode;\n    String itemName;\n    String itemType;\n    String unit;\n    BigDecimal standardCost;\n    Integer safetyStock;\n    Integer leadTime;\n\n    public static ItemResponse from(Item item) {\n        return ItemResponse.builder()\n            .itemCode(item.getItemCode())\n            .itemName(item.getItemName())\n            .itemType(item.getItemType())\n            .unit(item.getUnit())\n            .standardCost(item.getStandardCost())\n            .safetyStock(item.getSafetyStock())\n            .leadTime(item.getLeadTime())\n            .build();\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter32/#output-adaptermybatis-repository","title":"Output Adapter\uff08MyBatis Repository\uff09","text":"MyBatisItemRepository.java <pre><code>package com.example.production.infrastructure.persistence.mybatis;\n\nimport com.example.production.application.port.out.ItemRepository;\nimport com.example.production.domain.model.item.Item;\nimport org.apache.ibatis.annotations.*;\nimport org.springframework.stereotype.Repository;\n\nimport java.util.List;\nimport java.util.Optional;\n\n@Repository\n@Mapper\npublic interface MyBatisItemRepository extends ItemRepository {\n\n    @Override\n    @Select(\"SELECT * FROM \u54c1\u76ee\u30de\u30b9\u30bf\")\n    @Results(id = \"itemMap\", value = {\n        @Result(property = \"itemCode\", column = \"\u54c1\u76ee\u30b3\u30fc\u30c9\"),\n        @Result(property = \"itemName\", column = \"\u54c1\u76ee\u540d\"),\n        @Result(property = \"itemType\", column = \"\u54c1\u76ee\u7a2e\u5225\"),\n        @Result(property = \"unit\", column = \"\u5358\u4f4d\"),\n        @Result(property = \"standardCost\", column = \"\u6a19\u6e96\u539f\u4fa1\"),\n        @Result(property = \"safetyStock\", column = \"\u5b89\u5168\u5728\u5eab\"),\n        @Result(property = \"leadTime\", column = \"\u30ea\u30fc\u30c9\u30bf\u30a4\u30e0\")\n    })\n    List&lt;Item&gt; findAll();\n\n    @Override\n    @Select(\"SELECT * FROM \u54c1\u76ee\u30de\u30b9\u30bf WHERE \u54c1\u76ee\u30b3\u30fc\u30c9 = #{itemCode}\")\n    @ResultMap(\"itemMap\")\n    Optional&lt;Item&gt; findByCode(String itemCode);\n\n    @Override\n    @Insert(\"\"\"\n        INSERT INTO \u54c1\u76ee\u30de\u30b9\u30bf (\u54c1\u76ee\u30b3\u30fc\u30c9, \u54c1\u76ee\u540d, \u54c1\u76ee\u7a2e\u5225, \u5358\u4f4d, \u6a19\u6e96\u539f\u4fa1, \u5b89\u5168\u5728\u5eab, \u30ea\u30fc\u30c9\u30bf\u30a4\u30e0)\n        VALUES (#{itemCode}, #{itemName}, #{itemType}, #{unit}, #{standardCost}, #{safetyStock}, #{leadTime})\n        \"\"\")\n    void save(Item item);\n\n    @Override\n    @Update(\"\"\"\n        UPDATE \u54c1\u76ee\u30de\u30b9\u30bf\n        SET \u54c1\u76ee\u540d = #{itemName}, \u5358\u4f4d = #{unit}, \u6a19\u6e96\u539f\u4fa1 = #{standardCost},\n            \u5b89\u5168\u5728\u5eab = #{safetyStock}, \u30ea\u30fc\u30c9\u30bf\u30a4\u30e0 = #{leadTime}\n        WHERE \u54c1\u76ee\u30b3\u30fc\u30c9 = #{itemCode}\n        \"\"\")\n    void update(Item item);\n\n    @Override\n    @Delete(\"DELETE FROM \u54c1\u76ee\u30de\u30b9\u30bf WHERE \u54c1\u76ee\u30b3\u30fc\u30c9 = #{itemCode}\")\n    void deleteByCode(String itemCode);\n\n    @Override\n    @Select(\"SELECT COUNT(*) &gt; 0 FROM \u54c1\u76ee\u30de\u30b9\u30bf WHERE \u54c1\u76ee\u30b3\u30fc\u30c9 = #{itemCode}\")\n    boolean existsByCode(String itemCode);\n}\n</code></pre>"},{"location":"article/part4/chapter32/#3232-bom-api","title":"32.3.2 BOM \u30de\u30b9\u30bf API","text":""},{"location":"article/part4/chapter32/#bom","title":"BOM \u5c55\u958b\u30b5\u30fc\u30d3\u30b9","text":"BomService.java <pre><code>package com.example.production.application.service;\n\nimport com.example.production.application.port.out.BomRepository;\nimport com.example.production.domain.model.bom.Bom;\nimport lombok.Builder;\nimport lombok.Value;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.math.BigDecimal;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Service\n@Transactional(readOnly = true)\npublic class BomService {\n\n    private final BomRepository bomRepository;\n\n    public BomService(BomRepository bomRepository) {\n        this.bomRepository = bomRepository;\n    }\n\n    /**\n     * BOM \u5c55\u958b\uff08\u90e8\u54c1\u5c55\u958b\uff09\n     */\n    public List&lt;BomNode&gt; explodeBom(String itemCode, int maxLevel) {\n        List&lt;BomNode&gt; result = new ArrayList&lt;&gt;();\n        explodeRecursive(itemCode, 1, maxLevel, BigDecimal.ONE, result);\n        return result;\n    }\n\n    private void explodeRecursive(\n            String parentCode,\n            int currentLevel,\n            int maxLevel,\n            BigDecimal parentQuantity,\n            List&lt;BomNode&gt; result) {\n\n        if (currentLevel &gt; maxLevel) return;\n\n        List&lt;Bom&gt; children = bomRepository.findByParentCode(parentCode);\n\n        for (Bom bom : children) {\n            BigDecimal requiredQty = bom.getQuantity().multiply(parentQuantity);\n\n            result.add(BomNode.builder()\n                .level(currentLevel)\n                .itemCode(bom.getChildItemCode())\n                .itemName(bom.getChildItemName())\n                .quantity(requiredQty)\n                .unit(bom.getUnit())\n                .build());\n\n            explodeRecursive(\n                bom.getChildItemCode(),\n                currentLevel + 1,\n                maxLevel,\n                requiredQty,\n                result);\n        }\n    }\n\n    /**\n     * \u9006\u5c55\u958b\uff08\u4f7f\u7528\u5148\u7167\u4f1a\uff09\n     */\n    public List&lt;WhereUsedResult&gt; whereUsed(String itemCode) {\n        List&lt;WhereUsedResult&gt; result = new ArrayList&lt;&gt;();\n        whereUsedRecursive(itemCode, 1, result);\n        return result;\n    }\n\n    private void whereUsedRecursive(\n            String childCode,\n            int level,\n            List&lt;WhereUsedResult&gt; result) {\n\n        List&lt;Bom&gt; parents = bomRepository.findByChildCode(childCode);\n\n        for (Bom bom : parents) {\n            result.add(WhereUsedResult.builder()\n                .level(level)\n                .parentItemCode(bom.getParentItemCode())\n                .parentItemName(bom.getParentItemName())\n                .quantity(bom.getQuantity())\n                .build());\n\n            whereUsedRecursive(bom.getParentItemCode(), level + 1, result);\n        }\n    }\n}\n\n@Value\n@Builder\nclass BomNode {\n    int level;\n    String itemCode;\n    String itemName;\n    BigDecimal quantity;\n    String unit;\n}\n\n@Value\n@Builder\nclass WhereUsedResult {\n    int level;\n    String parentItemCode;\n    String parentItemName;\n    BigDecimal quantity;\n}\n</code></pre>"},{"location":"article/part4/chapter32/#bom-controller","title":"BOM Controller","text":"BomController.java <pre><code>package com.example.production.infrastructure.rest.controller;\n\nimport com.example.production.application.service.BomNode;\nimport com.example.production.application.service.BomService;\nimport com.example.production.application.service.WhereUsedResult;\nimport io.swagger.v3.oas.annotations.Operation;\nimport io.swagger.v3.oas.annotations.Parameter;\nimport io.swagger.v3.oas.annotations.tags.Tag;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\n\n@RestController\n@RequestMapping(\"/api/bom\")\n@Tag(name = \"bom\", description = \"BOM API\")\npublic class BomController {\n\n    private final BomService bomService;\n\n    public BomController(BomService bomService) {\n        this.bomService = bomService;\n    }\n\n    @GetMapping(\"/{itemCode}/explode\")\n    @Operation(summary = \"BOM \u5c55\u958b\uff08\u90e8\u54c1\u5c55\u958b\uff09\")\n    public ResponseEntity&lt;List&lt;BomNode&gt;&gt; explodeBom(\n            @PathVariable String itemCode,\n            @Parameter(description = \"\u5c55\u958b\u30ec\u30d9\u30eb\uff08\u30c7\u30d5\u30a9\u30eb\u30c8: 10\uff09\")\n            @RequestParam(defaultValue = \"10\") int maxLevel) {\n        List&lt;BomNode&gt; nodes = bomService.explodeBom(itemCode, maxLevel);\n        return ResponseEntity.ok(nodes);\n    }\n\n    @GetMapping(\"/{itemCode}/where-used\")\n    @Operation(summary = \"\u9006\u5c55\u958b\uff08\u4f7f\u7528\u5148\u7167\u4f1a\uff09\")\n    public ResponseEntity&lt;List&lt;WhereUsedResult&gt;&gt; whereUsed(\n            @PathVariable String itemCode) {\n        List&lt;WhereUsedResult&gt; results = bomService.whereUsed(itemCode);\n        return ResponseEntity.ok(results);\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter32/#324-api","title":"32.4 \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3 API \u306e\u5b9f\u88c5","text":""},{"location":"article/part4/chapter32/#3241-api","title":"32.4.1 \u767a\u6ce8 API","text":""},{"location":"article/part4/chapter32/#input-port_1","title":"Input Port","text":"PurchaseOrderUseCase.java <pre><code>package com.example.production.application.port.in;\n\nimport com.example.production.domain.model.order.PurchaseOrder;\nimport lombok.Builder;\nimport lombok.Value;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.util.List;\n\npublic interface PurchaseOrderUseCase {\n\n    List&lt;PurchaseOrder&gt; getAllOrders();\n\n    PurchaseOrder getOrder(String orderNumber);\n\n    PurchaseOrder createOrder(CreatePurchaseOrderCommand command);\n\n    PurchaseOrder confirmOrder(String orderNumber);\n\n    void cancelOrder(String orderNumber);\n}\n\n@Value\n@Builder\nclass CreatePurchaseOrderCommand {\n\n    String supplierCode;\n    List&lt;PurchaseOrderDetailCommand&gt; details;\n\n    @Value\n    @Builder\n    public static class PurchaseOrderDetailCommand {\n        String itemCode;\n        BigDecimal orderQuantity;\n        BigDecimal unitPrice;\n        LocalDate deliveryDate;\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter32/#controller","title":"Controller","text":"PurchaseOrderController.java <pre><code>package com.example.production.infrastructure.rest.controller;\n\nimport com.example.production.application.port.in.*;\nimport com.example.production.domain.model.order.PurchaseOrder;\nimport com.example.production.infrastructure.rest.dto.*;\nimport io.swagger.v3.oas.annotations.Operation;\nimport io.swagger.v3.oas.annotations.tags.Tag;\nimport jakarta.validation.Valid;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\n\n@RestController\n@RequestMapping(\"/api/purchase-orders\")\n@Tag(name = \"purchase-orders\", description = \"\u767a\u6ce8 API\")\npublic class PurchaseOrderController {\n\n    private final PurchaseOrderUseCase useCase;\n\n    public PurchaseOrderController(PurchaseOrderUseCase useCase) {\n        this.useCase = useCase;\n    }\n\n    @GetMapping\n    @Operation(summary = \"\u767a\u6ce8\u4e00\u89a7\u306e\u53d6\u5f97\")\n    public ResponseEntity&lt;List&lt;PurchaseOrderResponse&gt;&gt; getAllOrders() {\n        List&lt;PurchaseOrder&gt; orders = useCase.getAllOrders();\n        return ResponseEntity.ok(orders.stream()\n            .map(PurchaseOrderResponse::from)\n            .toList());\n    }\n\n    @GetMapping(\"/{orderNumber}\")\n    @Operation(summary = \"\u767a\u6ce8\u8a73\u7d30\u306e\u53d6\u5f97\")\n    public ResponseEntity&lt;PurchaseOrderResponse&gt; getOrder(\n            @PathVariable String orderNumber) {\n        PurchaseOrder order = useCase.getOrder(orderNumber);\n        return ResponseEntity.ok(PurchaseOrderResponse.from(order));\n    }\n\n    @PostMapping\n    @Operation(summary = \"\u767a\u6ce8\u306e\u767b\u9332\")\n    public ResponseEntity&lt;PurchaseOrderResponse&gt; createOrder(\n            @Valid @RequestBody CreatePurchaseOrderRequest request) {\n\n        CreatePurchaseOrderCommand command = CreatePurchaseOrderCommand.builder()\n            .supplierCode(request.getSupplierCode())\n            .details(request.getDetails().stream()\n                .map(d -&gt; CreatePurchaseOrderCommand.PurchaseOrderDetailCommand.builder()\n                    .itemCode(d.getItemCode())\n                    .orderQuantity(d.getOrderQuantity())\n                    .unitPrice(d.getUnitPrice())\n                    .deliveryDate(d.getDeliveryDate())\n                    .build())\n                .toList())\n            .build();\n\n        PurchaseOrder order = useCase.createOrder(command);\n        return ResponseEntity.status(HttpStatus.CREATED)\n            .body(PurchaseOrderResponse.from(order));\n    }\n\n    @PostMapping(\"/{orderNumber}/confirm\")\n    @Operation(summary = \"\u767a\u6ce8\u306e\u78ba\u5b9a\")\n    public ResponseEntity&lt;PurchaseOrderResponse&gt; confirmOrder(\n            @PathVariable String orderNumber) {\n        PurchaseOrder order = useCase.confirmOrder(orderNumber);\n        return ResponseEntity.ok(PurchaseOrderResponse.from(order));\n    }\n\n    @DeleteMapping(\"/{orderNumber}\")\n    @Operation(summary = \"\u767a\u6ce8\u306e\u53d6\u6d88\")\n    @ResponseStatus(HttpStatus.NO_CONTENT)\n    public void cancelOrder(@PathVariable String orderNumber) {\n        useCase.cancelOrder(orderNumber);\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter32/#3242-api","title":"32.4.2 \u5728\u5eab\u7167\u4f1a API","text":""},{"location":"article/part4/chapter32/#input-port_2","title":"Input Port","text":"InventoryUseCase.java <pre><code>package com.example.production.application.port.in;\n\nimport com.example.production.domain.model.inventory.Stock;\nimport lombok.Builder;\nimport lombok.Value;\n\nimport java.math.BigDecimal;\nimport java.util.List;\n\npublic interface InventoryUseCase {\n\n    /**\n     * \u5728\u5eab\u4e00\u89a7\u3092\u53d6\u5f97\n     */\n    List&lt;Stock&gt; getInventory(InventoryQuery query);\n\n    /**\n     * \u5728\u5eab\u30b5\u30de\u30ea\u30fc\u3092\u53d6\u5f97\n     */\n    List&lt;InventorySummary&gt; getInventorySummary();\n\n    /**\n     * \u5728\u5eab\u4e0d\u8db3\u54c1\u76ee\u3092\u53d6\u5f97\n     */\n    List&lt;InventorySummary&gt; getShortageItems();\n}\n\n@Value\n@Builder\nclass InventoryQuery {\n    String itemCode;\n    String locationCode;\n    String stockStatus;\n}\n\n@Value\n@Builder\nclass InventorySummary {\n    String itemCode;\n    String itemName;\n    BigDecimal totalQuantity;\n    Integer safetyStock;\n    StockState stockState;\n\n    public enum StockState {\n        NORMAL, SHORTAGE, EXCESS\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter32/#controller_1","title":"Controller","text":"InventoryController.java <pre><code>package com.example.production.infrastructure.rest.controller;\n\nimport com.example.production.application.port.in.*;\nimport com.example.production.domain.model.inventory.Stock;\nimport com.example.production.infrastructure.rest.dto.StockResponse;\nimport io.swagger.v3.oas.annotations.Operation;\nimport io.swagger.v3.oas.annotations.Parameter;\nimport io.swagger.v3.oas.annotations.tags.Tag;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\n\n@RestController\n@RequestMapping(\"/api/inventory\")\n@Tag(name = \"inventory\", description = \"\u5728\u5eab API\")\npublic class InventoryController {\n\n    private final InventoryUseCase useCase;\n\n    public InventoryController(InventoryUseCase useCase) {\n        this.useCase = useCase;\n    }\n\n    @GetMapping\n    @Operation(summary = \"\u5728\u5eab\u4e00\u89a7\u306e\u53d6\u5f97\")\n    public ResponseEntity&lt;List&lt;StockResponse&gt;&gt; getInventory(\n            @Parameter(description = \"\u54c1\u76ee\u30b3\u30fc\u30c9\")\n            @RequestParam(required = false) String itemCode,\n            @Parameter(description = \"\u5834\u6240\u30b3\u30fc\u30c9\")\n            @RequestParam(required = false) String locationCode,\n            @Parameter(description = \"\u5728\u5eab\u72b6\u614b\")\n            @RequestParam(required = false) String status) {\n\n        InventoryQuery query = InventoryQuery.builder()\n            .itemCode(itemCode)\n            .locationCode(locationCode)\n            .stockStatus(status)\n            .build();\n\n        List&lt;Stock&gt; stocks = useCase.getInventory(query);\n        return ResponseEntity.ok(stocks.stream()\n            .map(StockResponse::from)\n            .toList());\n    }\n\n    @GetMapping(\"/summary\")\n    @Operation(summary = \"\u5728\u5eab\u30b5\u30de\u30ea\u30fc\u306e\u53d6\u5f97\")\n    public ResponseEntity&lt;List&lt;InventorySummary&gt;&gt; getInventorySummary() {\n        List&lt;InventorySummary&gt; summary = useCase.getInventorySummary();\n        return ResponseEntity.ok(summary);\n    }\n\n    @GetMapping(\"/shortage\")\n    @Operation(summary = \"\u5728\u5eab\u4e0d\u8db3\u54c1\u76ee\u306e\u53d6\u5f97\")\n    public ResponseEntity&lt;List&lt;InventorySummary&gt;&gt; getShortageItems() {\n        List&lt;InventorySummary&gt; items = useCase.getShortageItems();\n        return ResponseEntity.ok(items);\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter32/#3243-api","title":"32.4.3 \u4f5c\u696d\u6307\u793a API","text":"WorkOrderController.java <pre><code>package com.example.production.infrastructure.rest.controller;\n\nimport com.example.production.application.port.in.*;\nimport com.example.production.domain.model.workorder.WorkOrder;\nimport com.example.production.infrastructure.rest.dto.*;\nimport io.swagger.v3.oas.annotations.Operation;\nimport io.swagger.v3.oas.annotations.tags.Tag;\nimport jakarta.validation.Valid;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\n\n@RestController\n@RequestMapping(\"/api/work-orders\")\n@Tag(name = \"work-orders\", description = \"\u4f5c\u696d\u6307\u793a API\")\npublic class WorkOrderController {\n\n    private final WorkOrderUseCase useCase;\n\n    public WorkOrderController(WorkOrderUseCase useCase) {\n        this.useCase = useCase;\n    }\n\n    @GetMapping\n    @Operation(summary = \"\u4f5c\u696d\u6307\u793a\u4e00\u89a7\u306e\u53d6\u5f97\")\n    public ResponseEntity&lt;List&lt;WorkOrderResponse&gt;&gt; getAllWorkOrders() {\n        List&lt;WorkOrder&gt; workOrders = useCase.getAllWorkOrders();\n        return ResponseEntity.ok(workOrders.stream()\n            .map(WorkOrderResponse::from)\n            .toList());\n    }\n\n    @GetMapping(\"/{workOrderNumber}\")\n    @Operation(summary = \"\u4f5c\u696d\u6307\u793a\u8a73\u7d30\u306e\u53d6\u5f97\")\n    public ResponseEntity&lt;WorkOrderResponse&gt; getWorkOrder(\n            @PathVariable String workOrderNumber) {\n        WorkOrder workOrder = useCase.getWorkOrder(workOrderNumber);\n        return ResponseEntity.ok(WorkOrderResponse.from(workOrder));\n    }\n\n    @PostMapping\n    @Operation(summary = \"\u4f5c\u696d\u6307\u793a\u306e\u767b\u9332\")\n    public ResponseEntity&lt;WorkOrderResponse&gt; createWorkOrder(\n            @Valid @RequestBody CreateWorkOrderRequest request) {\n        WorkOrder workOrder = useCase.createWorkOrder(request.toCommand());\n        return ResponseEntity.status(HttpStatus.CREATED)\n            .body(WorkOrderResponse.from(workOrder));\n    }\n\n    @PostMapping(\"/{workOrderNumber}/completion\")\n    @Operation(summary = \"\u5b8c\u6210\u5b9f\u7e3e\u306e\u767b\u9332\")\n    public ResponseEntity&lt;CompletionRecordResponse&gt; recordCompletion(\n            @PathVariable String workOrderNumber,\n            @Valid @RequestBody RecordCompletionRequest request) {\n        var result = useCase.recordCompletion(workOrderNumber, request.toCommand());\n        return ResponseEntity.status(HttpStatus.CREATED)\n            .body(CompletionRecordResponse.from(result));\n    }\n\n    @PatchMapping(\"/{workOrderNumber}/progress\")\n    @Operation(summary = \"\u4f5c\u696d\u9032\u6357\u306e\u66f4\u65b0\")\n    public ResponseEntity&lt;WorkOrderResponse&gt; updateProgress(\n            @PathVariable String workOrderNumber,\n            @Valid @RequestBody UpdateProgressRequest request) {\n        WorkOrder workOrder = useCase.updateProgress(workOrderNumber, request.getStatus());\n        return ResponseEntity.ok(WorkOrderResponse.from(workOrder));\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter32/#3244-mrp-api","title":"32.4.4 MRP \u5b9f\u884c API","text":""},{"location":"article/part4/chapter32/#mrp","title":"MRP \u30b5\u30fc\u30d3\u30b9","text":"MrpService.java <pre><code>package com.example.production.application.service;\n\nimport com.example.production.application.port.out.*;\nimport lombok.Builder;\nimport lombok.Value;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.List;\n\n@Service\n@Transactional\npublic class MrpService {\n\n    private final OrderRepository orderRepository;\n    private final BomRepository bomRepository;\n    private final StockRepository stockRepository;\n\n    public MrpService(\n            OrderRepository orderRepository,\n            BomRepository bomRepository,\n            StockRepository stockRepository) {\n        this.orderRepository = orderRepository;\n        this.bomRepository = bomRepository;\n        this.stockRepository = stockRepository;\n    }\n\n    /**\n     * MRP\uff08\u6240\u8981\u91cf\u5c55\u958b\uff09\u3092\u5b9f\u884c\n     */\n    public MrpResult execute(LocalDate startDate, LocalDate endDate) {\n        // 1. \u57fa\u6e96\u751f\u7523\u8a08\u753b\uff08MPS\uff09\u304b\u3089\u9700\u8981\u3092\u53d6\u5f97\n        var demands = getDemands(startDate, endDate);\n\n        // 2. BOM \u5c55\u958b\u3067\u6240\u8981\u91cf\u3092\u8a08\u7b97\n        var requirements = explodeRequirements(demands);\n\n        // 3. \u5728\u5eab\u3068\u7167\u5408\u3057\u3066\u6b63\u5473\u6240\u8981\u91cf\u3092\u8a08\u7b97\n        var netRequirements = calculateNetRequirements(requirements);\n\n        // 4. \u30ed\u30c3\u30c8\u30b5\u30a4\u30ba\u3092\u8003\u616e\u3057\u3066\u8a08\u753b\u30aa\u30fc\u30c0\u3092\u751f\u6210\n        var plannedOrders = generatePlannedOrders(netRequirements);\n\n        // 5. \u5728\u5eab\u4e0d\u8db3\u54c1\u76ee\u3092\u62bd\u51fa\n        var shortageItems = getShortageItems(netRequirements);\n\n        return MrpResult.builder()\n            .executionTime(LocalDateTime.now())\n            .periodStart(startDate)\n            .periodEnd(endDate)\n            .plannedOrders(plannedOrders)\n            .shortageItems(shortageItems)\n            .build();\n    }\n\n    private List&lt;?&gt; getDemands(LocalDate startDate, LocalDate endDate) {\n        // \u5b9f\u88c5\u7701\u7565\n        return List.of();\n    }\n\n    private List&lt;?&gt; explodeRequirements(List&lt;?&gt; demands) {\n        // \u5b9f\u88c5\u7701\u7565\n        return List.of();\n    }\n\n    private List&lt;?&gt; calculateNetRequirements(List&lt;?&gt; requirements) {\n        // \u5b9f\u88c5\u7701\u7565\n        return List.of();\n    }\n\n    private List&lt;PlannedOrder&gt; generatePlannedOrders(List&lt;?&gt; netRequirements) {\n        // \u5b9f\u88c5\u7701\u7565\n        return List.of();\n    }\n\n    private List&lt;ShortageItem&gt; getShortageItems(List&lt;?&gt; netRequirements) {\n        // \u5b9f\u88c5\u7701\u7565\n        return List.of();\n    }\n}\n\n@Value\n@Builder\nclass MrpResult {\n    LocalDateTime executionTime;\n    LocalDate periodStart;\n    LocalDate periodEnd;\n    List&lt;PlannedOrder&gt; plannedOrders;\n    List&lt;ShortageItem&gt; shortageItems;\n}\n\n@Value\n@Builder\nclass PlannedOrder {\n    String itemCode;\n    String itemName;\n    String orderType; // MANUFACTURING or PURCHASE\n    BigDecimal quantity;\n    LocalDate dueDate;\n}\n\n@Value\n@Builder\nclass ShortageItem {\n    String itemCode;\n    String itemName;\n    BigDecimal shortageQuantity;\n    LocalDate recommendedOrderDate;\n}\n</code></pre>"},{"location":"article/part4/chapter32/#mrp-controller","title":"MRP Controller","text":"MrpController.java <pre><code>package com.example.production.infrastructure.rest.controller;\n\nimport com.example.production.application.service.MrpResult;\nimport com.example.production.application.service.MrpService;\nimport com.example.production.infrastructure.rest.dto.ExecuteMrpRequest;\nimport io.swagger.v3.oas.annotations.Operation;\nimport io.swagger.v3.oas.annotations.tags.Tag;\nimport jakarta.validation.Valid;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\n@RestController\n@RequestMapping(\"/api/mrp\")\n@Tag(name = \"mrp\", description = \"MRP API\")\npublic class MrpController {\n\n    private final MrpService mrpService;\n\n    public MrpController(MrpService mrpService) {\n        this.mrpService = mrpService;\n    }\n\n    @PostMapping(\"/execute\")\n    @Operation(\n        summary = \"MRP \u306e\u5b9f\u884c\",\n        description = \"\u6307\u5b9a\u671f\u9593\u306e\u6240\u8981\u91cf\u5c55\u958b\u3092\u5b9f\u884c\u3057\u3001\u8a08\u753b\u30aa\u30fc\u30c0\u3092\u751f\u6210\u3057\u307e\u3059\"\n    )\n    public ResponseEntity&lt;MrpResult&gt; execute(\n            @Valid @RequestBody ExecuteMrpRequest request) {\n        MrpResult result = mrpService.execute(\n            request.getStartDate(),\n            request.getEndDate()\n        );\n        return ResponseEntity.ok(result);\n    }\n\n    @GetMapping(\"/results\")\n    @Operation(summary = \"MRP \u5b9f\u884c\u7d50\u679c\u306e\u7167\u4f1a\")\n    public ResponseEntity&lt;String&gt; getResults() {\n        return ResponseEntity.ok(\"\u672a\u5b9f\u88c5\");\n    }\n\n    @GetMapping(\"/planned-orders\")\n    @Operation(summary = \"\u8a08\u753b\u30aa\u30fc\u30c0\u4e00\u89a7\u306e\u53d6\u5f97\")\n    public ResponseEntity&lt;String&gt; getPlannedOrders() {\n        return ResponseEntity.ok(\"\u672a\u5b9f\u88c5\");\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter32/#325","title":"32.5 \u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0","text":""},{"location":"article/part4/chapter32/#3251","title":"32.5.1 \u30c9\u30e1\u30a4\u30f3\u4f8b\u5916\u306e\u5b9a\u7fa9","text":"DomainException.java <pre><code>package com.example.production.domain.exception;\n\n/**\n * \u30c9\u30e1\u30a4\u30f3\u4f8b\u5916\u306e\u57fa\u5e95\u30af\u30e9\u30b9\n */\npublic abstract class DomainException extends RuntimeException {\n\n    protected DomainException(String message) {\n        super(message);\n    }\n\n    protected DomainException(String message, Throwable cause) {\n        super(message, cause);\n    }\n}\n</code></pre> ItemNotFoundException.java <pre><code>package com.example.production.domain.exception;\n\n/**\n * \u54c1\u76ee\u304c\u898b\u3064\u304b\u3089\u306a\u3044\u4f8b\u5916\n */\npublic class ItemNotFoundException extends DomainException {\n\n    public ItemNotFoundException(String itemCode) {\n        super(\"\u54c1\u76ee\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + itemCode);\n    }\n}\n</code></pre> DuplicateItemException.java <pre><code>package com.example.production.domain.exception;\n\n/**\n * \u54c1\u76ee\u30b3\u30fc\u30c9\u91cd\u8907\u4f8b\u5916\n */\npublic class DuplicateItemException extends DomainException {\n\n    public DuplicateItemException(String itemCode) {\n        super(\"\u54c1\u76ee\u30b3\u30fc\u30c9\u304c\u65e2\u306b\u5b58\u5728\u3057\u307e\u3059: \" + itemCode);\n    }\n}\n</code></pre> InsufficientInventoryException.java <pre><code>package com.example.production.domain.exception;\n\nimport java.math.BigDecimal;\n\n/**\n * \u5728\u5eab\u4e0d\u8db3\u4f8b\u5916\n */\npublic class InsufficientInventoryException extends DomainException {\n\n    public InsufficientInventoryException(String itemCode, BigDecimal required, BigDecimal available) {\n        super(String.format(\"\u5728\u5eab\u304c\u4e0d\u8db3\u3057\u3066\u3044\u307e\u3059: %s (\u5fc5\u8981: %s, \u6709\u52b9: %s)\",\n            itemCode, required, available));\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter32/#3252","title":"32.5.2 \u30b0\u30ed\u30fc\u30d0\u30eb\u4f8b\u5916\u30cf\u30f3\u30c9\u30e9","text":"GlobalExceptionHandler.java <pre><code>package com.example.production.infrastructure.rest.exception;\n\nimport com.example.production.domain.exception.*;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ProblemDetail;\nimport org.springframework.web.bind.MethodArgumentNotValidException;\nimport org.springframework.web.bind.annotation.ExceptionHandler;\nimport org.springframework.web.bind.annotation.RestControllerAdvice;\n\nimport java.net.URI;\nimport java.time.Instant;\nimport java.util.stream.Collectors;\n\n/**\n * \u30b0\u30ed\u30fc\u30d0\u30eb\u4f8b\u5916\u30cf\u30f3\u30c9\u30e9\n */\n@RestControllerAdvice\npublic class GlobalExceptionHandler {\n\n    @ExceptionHandler(ItemNotFoundException.class)\n    public ProblemDetail handleItemNotFoundException(ItemNotFoundException ex) {\n        ProblemDetail problem = ProblemDetail.forStatusAndDetail(\n            HttpStatus.NOT_FOUND, ex.getMessage());\n        problem.setTitle(\"\u54c1\u76ee\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\");\n        problem.setType(URI.create(\"https://api.example.com/errors/item-not-found\"));\n        problem.setProperty(\"timestamp\", Instant.now());\n        return problem;\n    }\n\n    @ExceptionHandler(DuplicateItemException.class)\n    public ProblemDetail handleDuplicateItemException(DuplicateItemException ex) {\n        ProblemDetail problem = ProblemDetail.forStatusAndDetail(\n            HttpStatus.CONFLICT, ex.getMessage());\n        problem.setTitle(\"\u54c1\u76ee\u30b3\u30fc\u30c9\u91cd\u8907\");\n        problem.setType(URI.create(\"https://api.example.com/errors/duplicate-item\"));\n        problem.setProperty(\"timestamp\", Instant.now());\n        return problem;\n    }\n\n    @ExceptionHandler(InsufficientInventoryException.class)\n    public ProblemDetail handleInsufficientInventoryException(InsufficientInventoryException ex) {\n        ProblemDetail problem = ProblemDetail.forStatusAndDetail(\n            HttpStatus.UNPROCESSABLE_ENTITY, ex.getMessage());\n        problem.setTitle(\"\u5728\u5eab\u4e0d\u8db3\");\n        problem.setType(URI.create(\"https://api.example.com/errors/insufficient-inventory\"));\n        problem.setProperty(\"timestamp\", Instant.now());\n        return problem;\n    }\n\n    @ExceptionHandler(MethodArgumentNotValidException.class)\n    public ProblemDetail handleValidationException(MethodArgumentNotValidException ex) {\n        String errors = ex.getBindingResult().getFieldErrors().stream()\n            .map(e -&gt; e.getField() + \": \" + e.getDefaultMessage())\n            .collect(Collectors.joining(\", \"));\n\n        ProblemDetail problem = ProblemDetail.forStatusAndDetail(\n            HttpStatus.BAD_REQUEST, errors);\n        problem.setTitle(\"\u5165\u529b\u5024\u304c\u4e0d\u6b63\u3067\u3059\");\n        problem.setType(URI.create(\"https://api.example.com/errors/validation-error\"));\n        problem.setProperty(\"timestamp\", Instant.now());\n        return problem;\n    }\n\n    @ExceptionHandler(Exception.class)\n    public ProblemDetail handleGenericException(Exception ex) {\n        ProblemDetail problem = ProblemDetail.forStatusAndDetail(\n            HttpStatus.INTERNAL_SERVER_ERROR, \"\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\");\n        problem.setTitle(\"\u5185\u90e8\u30a8\u30e9\u30fc\");\n        problem.setType(URI.create(\"https://api.example.com/errors/internal-error\"));\n        problem.setProperty(\"timestamp\", Instant.now());\n        return problem;\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter32/#3253","title":"32.5.3 \u30a8\u30e9\u30fc\u30ec\u30b9\u30dd\u30f3\u30b9\u5f62\u5f0f","text":"<p>RFC 7807\uff08Problem Details for HTTP APIs\uff09\u306b\u6e96\u62e0\u3057\u305f\u30a8\u30e9\u30fc\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u8fd4\u3057\u307e\u3059\u3002</p> <pre><code>{\n    \"type\": \"https://api.example.com/errors/item-not-found\",\n    \"title\": \"\u54c1\u76ee\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\",\n    \"status\": 404,\n    \"detail\": \"\u54c1\u76ee\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: ITEM001\",\n    \"instance\": \"/api/items/ITEM001\",\n    \"timestamp\": \"2024-01-15T10:30:00Z\"\n}\n</code></pre> \u30d5\u30a3\u30fc\u30eb\u30c9 \u8aac\u660e type \u30a8\u30e9\u30fc\u7a2e\u5225\u3092\u8b58\u5225\u3059\u308b URI title \u30a8\u30e9\u30fc\u306e\u6982\u8981 status HTTP \u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9 detail \u30a8\u30e9\u30fc\u306e\u8a73\u7d30\u8aac\u660e instance \u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u305f\u30ea\u30bd\u30fc\u30b9\u306e URI timestamp \u30a8\u30e9\u30fc\u767a\u751f\u6642\u523b"},{"location":"article/part4/chapter32/#326-api","title":"32.6 API \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8","text":""},{"location":"article/part4/chapter32/#openapi-swagger-ui","title":"OpenAPI / Swagger UI","text":"<p>\u30b5\u30fc\u30d0\u30fc\u8d77\u52d5\u5f8c\u3001\u4ee5\u4e0b\u306e URL \u3067 Swagger UI \u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\uff1a</p> <pre><code>http://localhost:8080/swagger-ui.html\n</code></pre>"},{"location":"article/part4/chapter32/#api","title":"API \u4e00\u89a7","text":"\u30ab\u30c6\u30b4\u30ea \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 \u30e1\u30bd\u30c3\u30c9 \u8aac\u660e \u54c1\u76ee /api/items GET \u54c1\u76ee\u4e00\u89a7\u306e\u53d6\u5f97 /api/items/{itemCode} GET \u54c1\u76ee\u306e\u53d6\u5f97 /api/items POST \u54c1\u76ee\u306e\u767b\u9332 /api/items/{itemCode} PUT \u54c1\u76ee\u306e\u66f4\u65b0 /api/items/{itemCode} DELETE \u54c1\u76ee\u306e\u524a\u9664 BOM /api/bom/{itemCode}/explode GET \u90e8\u54c1\u5c55\u958b /api/bom/{itemCode}/where-used GET \u4f7f\u7528\u5148\u7167\u4f1a \u767a\u6ce8 /api/purchase-orders GET \u767a\u6ce8\u4e00\u89a7\u306e\u53d6\u5f97 /api/purchase-orders/{orderNumber} GET \u767a\u6ce8\u8a73\u7d30\u306e\u53d6\u5f97 /api/purchase-orders POST \u767a\u6ce8\u306e\u767b\u9332 /api/purchase-orders/{orderNumber}/confirm POST \u767a\u6ce8\u306e\u78ba\u5b9a /api/purchase-orders/{orderNumber} DELETE \u767a\u6ce8\u306e\u53d6\u6d88 \u5728\u5eab /api/inventory GET \u5728\u5eab\u4e00\u89a7\u306e\u53d6\u5f97 /api/inventory/summary GET \u5728\u5eab\u30b5\u30de\u30ea\u30fc\u306e\u53d6\u5f97 /api/inventory/shortage GET \u5728\u5eab\u4e0d\u8db3\u54c1\u76ee\u306e\u53d6\u5f97 \u4f5c\u696d\u6307\u793a /api/work-orders GET \u4f5c\u696d\u6307\u793a\u4e00\u89a7\u306e\u53d6\u5f97 /api/work-orders/{workOrderNumber} GET \u4f5c\u696d\u6307\u793a\u8a73\u7d30\u306e\u53d6\u5f97 /api/work-orders POST \u4f5c\u696d\u6307\u793a\u306e\u767b\u9332 /api/work-orders/{workOrderNumber}/completion POST \u5b8c\u6210\u5b9f\u7e3e\u306e\u767b\u9332 /api/work-orders/{workOrderNumber}/progress PATCH \u4f5c\u696d\u9032\u6357\u306e\u66f4\u65b0 MRP /api/mrp/execute POST MRP \u306e\u5b9f\u884c /api/mrp/results GET MRP \u5b9f\u884c\u7d50\u679c\u306e\u7167\u4f1a /api/mrp/planned-orders GET \u8a08\u753b\u30aa\u30fc\u30c0\u4e00\u89a7\u306e\u53d6\u5f97"},{"location":"article/part4/chapter32/#327-api","title":"32.7 API \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30c6\u30b9\u30c8","text":""},{"location":"article/part4/chapter32/#testcontainers","title":"Testcontainers \u3092\u4f7f\u7528\u3057\u305f\u30c6\u30b9\u30c8","text":"ItemControllerIntegrationTest.java <pre><code>package com.example.production.infrastructure.rest.controller;\n\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.http.MediaType;\nimport org.springframework.test.context.DynamicPropertyRegistry;\nimport org.springframework.test.context.DynamicPropertySource;\nimport org.springframework.test.web.servlet.MockMvc;\nimport org.testcontainers.containers.PostgreSQLContainer;\nimport org.testcontainers.junit.jupiter.Container;\nimport org.testcontainers.junit.jupiter.Testcontainers;\n\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;\n\n@SpringBootTest\n@AutoConfigureMockMvc\n@Testcontainers\nclass ItemControllerIntegrationTest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:15\")\n        .withDatabaseName(\"production_test\")\n        .withUsername(\"test\")\n        .withPassword(\"test\")\n        .withInitScript(\"init.sql\");\n\n    @DynamicPropertySource\n    static void configureProperties(DynamicPropertyRegistry registry) {\n        registry.add(\"spring.datasource.url\", postgres::getJdbcUrl);\n        registry.add(\"spring.datasource.username\", postgres::getUsername);\n        registry.add(\"spring.datasource.password\", postgres::getPassword);\n    }\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @Test\n    void \u54c1\u76ee\u3092\u767b\u9332\u3057\u3066\u53d6\u5f97\u3067\u304d\u308b() throws Exception {\n        // \u767b\u9332\n        var request = \"\"\"\n            {\n                \"itemCode\": \"ITEM001\",\n                \"itemName\": \"\u30c6\u30b9\u30c8\u54c1\u76ee\",\n                \"itemType\": \"\u88fd\u54c1\",\n                \"unit\": \"\u500b\",\n                \"standardCost\": 1000,\n                \"safetyStock\": 100,\n                \"leadTime\": 5\n            }\n            \"\"\";\n\n        mockMvc.perform(post(\"/api/items\")\n                .contentType(MediaType.APPLICATION_JSON)\n                .content(request))\n            .andExpect(status().isCreated())\n            .andExpect(jsonPath(\"$.itemCode\").value(\"ITEM001\"));\n\n        // \u53d6\u5f97\n        mockMvc.perform(get(\"/api/items/ITEM001\"))\n            .andExpect(status().isOk())\n            .andExpect(jsonPath(\"$.itemCode\").value(\"ITEM001\"))\n            .andExpect(jsonPath(\"$.itemName\").value(\"\u30c6\u30b9\u30c8\u54c1\u76ee\"));\n    }\n\n    @Test\n    void \u5b58\u5728\u3057\u306a\u3044\u54c1\u76ee\u3092\u53d6\u5f97\u3059\u308b\u3068404() throws Exception {\n        mockMvc.perform(get(\"/api/items/NOTFOUND\"))\n            .andExpect(status().isNotFound())\n            .andExpect(jsonPath(\"$.title\").value(\"\u54c1\u76ee\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\"));\n    }\n\n    @Test\n    void \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\u3067400() throws Exception {\n        var request = \"\"\"\n            {\n                \"itemCode\": \"\",\n                \"itemName\": \"\u30c6\u30b9\u30c8\u54c1\u76ee\"\n            }\n            \"\"\";\n\n        mockMvc.perform(post(\"/api/items\")\n                .contentType(MediaType.APPLICATION_JSON)\n                .content(request))\n            .andExpect(status().isBadRequest())\n            .andExpect(jsonPath(\"$.title\").value(\"\u5165\u529b\u5024\u304c\u4e0d\u6b63\u3067\u3059\"));\n    }\n\n    @Test\n    void \u91cd\u8907\u767b\u9332\u3067409() throws Exception {\n        var request = \"\"\"\n            {\n                \"itemCode\": \"ITEM002\",\n                \"itemName\": \"\u30c6\u30b9\u30c8\u54c1\u76ee2\",\n                \"itemType\": \"\u88fd\u54c1\",\n                \"unit\": \"\u500b\",\n                \"standardCost\": 1000\n            }\n            \"\"\";\n\n        // 1\u56de\u76ee\u306f\u6210\u529f\n        mockMvc.perform(post(\"/api/items\")\n                .contentType(MediaType.APPLICATION_JSON)\n                .content(request))\n            .andExpect(status().isCreated());\n\n        // 2\u56de\u76ee\u306f\u91cd\u8907\u30a8\u30e9\u30fc\n        mockMvc.perform(post(\"/api/items\")\n                .contentType(MediaType.APPLICATION_JSON)\n                .content(request))\n            .andExpect(status().isConflict())\n            .andExpect(jsonPath(\"$.title\").value(\"\u54c1\u76ee\u30b3\u30fc\u30c9\u91cd\u8907\"));\n    }\n}\n</code></pre>"},{"location":"article/part4/chapter32/#_7","title":"\u30c6\u30b9\u30c8\u7528\u521d\u671f\u5316\u30b9\u30af\u30ea\u30d7\u30c8","text":"init.sql <pre><code>-- \u30c6\u30b9\u30c8\u7528\u30c6\u30fc\u30d6\u30eb\u4f5c\u6210\nCREATE TABLE \u54c1\u76ee\u30de\u30b9\u30bf (\n    \u54c1\u76ee\u30b3\u30fc\u30c9 VARCHAR(20) PRIMARY KEY,\n    \u54c1\u76ee\u540d VARCHAR(100) NOT NULL,\n    \u54c1\u76ee\u7a2e\u5225 VARCHAR(20),\n    \u5358\u4f4d VARCHAR(10),\n    \u6a19\u6e96\u539f\u4fa1 DECIMAL(15,2),\n    \u5b89\u5168\u5728\u5eab INTEGER,\n    \u30ea\u30fc\u30c9\u30bf\u30a4\u30e0 INTEGER\n);\n\nCREATE TABLE \u90e8\u54c1\u8868 (\n    \u89aa\u54c1\u76ee\u30b3\u30fc\u30c9 VARCHAR(20) NOT NULL,\n    \u5b50\u54c1\u76ee\u30b3\u30fc\u30c9 VARCHAR(20) NOT NULL,\n    \u54e1\u6570 DECIMAL(10,4) NOT NULL,\n    PRIMARY KEY (\u89aa\u54c1\u76ee\u30b3\u30fc\u30c9, \u5b50\u54c1\u76ee\u30b3\u30fc\u30c9)\n);\n\nCREATE TABLE \u767a\u6ce8 (\n    \u767a\u6ce8\u756a\u53f7 VARCHAR(20) PRIMARY KEY,\n    \u4ed5\u5165\u5148\u30b3\u30fc\u30c9 VARCHAR(20) NOT NULL,\n    \u767a\u6ce8\u65e5 DATE NOT NULL,\n    \u30b9\u30c6\u30fc\u30bf\u30b9 VARCHAR(10) DEFAULT '\u4f5c\u6210\u4e2d'\n);\n\nCREATE TABLE \u767a\u6ce8\u660e\u7d30 (\n    \u767a\u6ce8\u756a\u53f7 VARCHAR(20) NOT NULL,\n    \u660e\u7d30\u756a\u53f7 INTEGER NOT NULL,\n    \u54c1\u76ee\u30b3\u30fc\u30c9 VARCHAR(20) NOT NULL,\n    \u767a\u6ce8\u6570\u91cf DECIMAL(10,2) NOT NULL,\n    \u5358\u4fa1 DECIMAL(15,2),\n    \u7d0d\u671f DATE,\n    PRIMARY KEY (\u767a\u6ce8\u756a\u53f7, \u660e\u7d30\u756a\u53f7)\n);\n\nCREATE TABLE \u5728\u5eab (\n    \u54c1\u76ee\u30b3\u30fc\u30c9 VARCHAR(20) NOT NULL,\n    \u4fdd\u7ba1\u5834\u6240\u30b3\u30fc\u30c9 VARCHAR(20) NOT NULL,\n    \u5728\u5eab\u6570\u91cf DECIMAL(10,2) NOT NULL DEFAULT 0,\n    PRIMARY KEY (\u54c1\u76ee\u30b3\u30fc\u30c9, \u4fdd\u7ba1\u5834\u6240\u30b3\u30fc\u30c9)\n);\n</code></pre>"},{"location":"article/part4/chapter32/#_8","title":"\u307e\u3068\u3081","text":"<p>\u672c\u7ae0\u3067\u306f\u3001\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u63a1\u7528\u3057\u305f\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e REST API \u3092\u5b9f\u88c5\u3057\u307e\u3057\u305f\u3002</p>"},{"location":"article/part4/chapter32/#_9","title":"\u5b9f\u88c5\u3057\u305f\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8","text":"\u30ec\u30a4\u30e4\u30fc \u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8 \u5f79\u5272 Domain Entity, Exception \u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3001\u30c9\u30e1\u30a4\u30f3\u30eb\u30fc\u30eb Application UseCase, Service \u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306e\u5b9f\u88c5\u3001\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u7ba1\u7406 Infrastructure Controller, Repository \u5916\u90e8\u3068\u306e\u5165\u51fa\u529b"},{"location":"article/part4/chapter32/#_10","title":"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u7279\u5fb4","text":"<ol> <li>\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3: \u30c9\u30e1\u30a4\u30f3\u3092\u4e2d\u5fc3\u306b\u636e\u3048\u305f\u8a2d\u8a08</li> <li>Ports and Adapters: \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3068\u5b9f\u88c5\u306e\u5206\u96e2</li> <li>TDD: \u30c6\u30b9\u30c8\u99c6\u52d5\u3067 API \u3092\u958b\u767a</li> <li>OpenAPI: Swagger UI \u3067 API \u4ed5\u69d8\u3092\u53ef\u8996\u5316</li> </ol>"},{"location":"article/part4/chapter32/#_11","title":"\u6280\u8853\u30b9\u30bf\u30c3\u30af","text":"<ul> <li>Spring Boot 3.2: REST API \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af</li> <li>MyBatis: O/R \u30de\u30c3\u30d4\u30f3\u30b0</li> <li>Bean Validation: \u30ea\u30af\u30a8\u30b9\u30c8\u691c\u8a3c</li> <li>springdoc-openapi: API \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u751f\u6210</li> <li>Testcontainers: \u7d71\u5408\u30c6\u30b9\u30c8</li> </ul> <p>\u524d\u3078: \u7b2c31\u7ae0 \u751f\u7523\u7ba1\u7406\u30c7\u30fc\u30bf\u8a2d\u8a08\uff08E \u793e\u4e8b\u4f8b\uff09 | \u76ee\u6b21\u3078\u623b\u308b</p>"},{"location":"article/study/study2-1/","title":"\u5b9f\u8df5\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\uff1a\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 \u7814\u7a76 1 - \u30e2\u30ce\u30ea\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":""},{"location":"article/study/study2-1/#_1","title":"\u306f\u3058\u3081\u306b","text":"<p>\u672c\u7814\u7a76\u3067\u306f\u3001API \u30b5\u30fc\u30d0\u30fc\u69cb\u6210\uff08\u7b2c13\u7ae0\uff09\u3068\u306f\u7570\u306a\u308b\u30a2\u30d7\u30ed\u30fc\u30c1\u3068\u3057\u3066\u3001\u30e2\u30ce\u30ea\u30b9\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u3088\u308b\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002UI\uff08\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\uff09\u3001\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30a2\u30af\u30bb\u30b9\u304c\u3059\u3079\u3066\u540c\u4e00\u30b5\u30fc\u30d0\u30fc\u5185\u3067\u52d5\u4f5c\u3059\u308b\u3001\u4f1d\u7d71\u7684\u304b\u3064\u5805\u5b9f\u306a\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3067\u3059\u3002</p>"},{"location":"article/study/study2-1/#14","title":"\u7b2c14\u7ae0\uff1a\u30e2\u30ce\u30ea\u30b9\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u57fa\u790e","text":""},{"location":"article/study/study2-1/#141","title":"14.1 \u30e2\u30ce\u30ea\u30b9\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3068\u306f","text":"<p>\u30e2\u30ce\u30ea\u30b9\uff08Monolith / Monolithic Architecture\uff09\u3068\u306f\u3001\u300cAPI\u300d\u3068\u300cUI\u300d\u3068\u300c\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u300d\u304c 1\u3064\u306e\u5b9f\u884c\u30e6\u30cb\u30c3\u30c8\uff081\u3064\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3084\u30d0\u30a4\u30ca\u30ea\uff09\u306b\u307e\u3068\u307e\u3063\u3066\u3044\u308b\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u6307\u3057\u307e\u3059\u3002</p> <p></p> <p>\u30e2\u30ce\u30ea\u30b9\u306e\u4e3b\u306a\u7279\u5fb4\uff1a</p> \u7279\u5fb4 \u8aac\u660e \u5358\u4e00\u30c7\u30d7\u30ed\u30a4 \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5168\u4f53\u304c1\u3064\u306e\u30a2\u30fc\u30c6\u30a3\u30d5\u30a1\u30af\u30c8\uff08JAR/WAR\uff09\u3068\u3057\u3066\u30c7\u30d7\u30ed\u30a4 \u540c\u4e00\u30d7\u30ed\u30bb\u30b9 UI\u3001\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3001\u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u304c\u540c\u3058 JVM \u3067\u52d5\u4f5c \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3 \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067 HTML \u3092\u751f\u6210\u3057\u3066\u30d6\u30e9\u30a6\u30b6\u306b\u8fd4\u5374 \u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406 \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067\u30e6\u30fc\u30b6\u30fc\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u7ba1\u7406 \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u5883\u754c \u5358\u4e00\u30d7\u30ed\u30bb\u30b9\u5185\u3067\u306e\u30ed\u30fc\u30ab\u30eb\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3"},{"location":"article/study/study2-1/#142-api-vs","title":"14.2 API \u30b5\u30fc\u30d0\u30fc vs \u30e2\u30ce\u30ea\u30b9","text":"\u89b3\u70b9 API \u30b5\u30fc\u30d0\u30fc\u69cb\u6210 \u30e2\u30ce\u30ea\u30b9\u69cb\u6210 \u7d50\u5408\u5ea6 \u758e\u7d50\u5408\uff08\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u3068\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u304c\u5206\u96e2\uff09 \u5bc6\u7d50\u5408\uff08\u3059\u3079\u3066\u304c\u540c\u4e00\u30b5\u30fc\u30d0\u30fc\uff09 \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9 SPA\uff08React/Vue/Angular\uff09 \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\uff08Thymeleaf\uff09 \u901a\u4fe1\u65b9\u5f0f REST API\uff08JSON\uff09 \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\uff08HTML\uff09 \u958b\u767a\u30c1\u30fc\u30e0 \u30d5\u30ed\u30f3\u30c8/\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3067\u5206\u696d\u53ef\u80fd \u30d5\u30eb\u30b9\u30bf\u30c3\u30af\u3067\u958b\u767a \u30c7\u30d7\u30ed\u30a4 \u5225\u3005\u306b\u30c7\u30d7\u30ed\u30a4\u53ef\u80fd \u5358\u4e00\u30a2\u30fc\u30c6\u30a3\u30d5\u30a1\u30af\u30c8\u3092\u30c7\u30d7\u30ed\u30a4 \u30b9\u30b1\u30fc\u30ea\u30f3\u30b0 \u500b\u5225\u306b\u30b9\u30b1\u30fc\u30eb\u53ef\u80fd \u5168\u4f53\u3092\u30b9\u30b1\u30fc\u30eb \u8907\u96d1\u3055 API \u8a2d\u8a08\u30fb\u8a8d\u8a3c\u30fbCORS \u306a\u3069\u304c\u5fc5\u8981 \u30b7\u30f3\u30d7\u30eb\u3001\u8a2d\u5b9a\u304c\u5c11\u306a\u3044 \u521d\u671f\u958b\u767a\u901f\u5ea6 \u74b0\u5883\u69cb\u7bc9\u306b\u6642\u9593\u304c\u304b\u304b\u308b \u7d20\u65e9\u304f\u958b\u767a\u958b\u59cb\u3067\u304d\u308b SEO SSR/SSG \u304c\u5fc5\u8981\u306a\u5834\u5408\u3042\u308a \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3067 SEO \u30d5\u30ec\u30f3\u30c9\u30ea\u30fc"},{"location":"article/study/study2-1/#143","title":"14.3 \u30e2\u30ce\u30ea\u30b9\u3092\u9078\u629e\u3059\u3079\u304d\u5834\u9762","text":"<p>\u30e2\u30ce\u30ea\u30b9\u304c\u9069\u3057\u3066\u3044\u308b\u72b6\u6cc1\uff1a</p> <ol> <li>\u5c0f\u301c\u4e2d\u898f\u6a21\u306e\u30c1\u30fc\u30e0\uff1a\u5c02\u9580\u306e\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30c1\u30fc\u30e0\u304c\u3044\u306a\u3044\u5834\u5408</li> <li>\u793e\u5185\u30b7\u30b9\u30c6\u30e0\uff1aSEO \u4e0d\u8981\u3001\u9650\u3089\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u6570</li> <li>\u696d\u52d9\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\uff1a\u8907\u96d1\u306a\u696d\u52d9\u30d5\u30ed\u30fc\u3092\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067\u51e6\u7406</li> <li>\u8fc5\u901f\u306a\u958b\u767a\uff1aMVP \u3084\u30d7\u30ed\u30c8\u30bf\u30a4\u30d7\u306e\u7d20\u65e9\u3044\u69cb\u7bc9</li> <li>\u904b\u7528\u30b3\u30b9\u30c8\u91cd\u8996\uff1a\u30a4\u30f3\u30d5\u30e9\u69cb\u6210\u3092\u30b7\u30f3\u30d7\u30eb\u306b\u4fdd\u3061\u305f\u3044\u5834\u5408</li> </ol>"},{"location":"article/study/study2-1/#144","title":"14.4 \u30e2\u30ce\u30ea\u30b9\u306b\u304a\u3051\u308b\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":"<p>\u30e2\u30ce\u30ea\u30b9\u3067\u3042\u3063\u3066\u3082\u3001\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08Ports and Adapters\uff09\u3092\u63a1\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u4fdd\u5b88\u6027\u306e\u9ad8\u3044\u8a2d\u8a08\u3092\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002</p> <p></p>"},{"location":"article/study/study2-1/#145","title":"14.5 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210","text":"<pre><code>apps/sms/backend/src/main/java/com/example/sms/\n\u251c\u2500\u2500 domain/                       # \u30c9\u30e1\u30a4\u30f3\u5c64\uff08API\u7248\u3068\u5171\u901a\uff09\n\u2502   \u251c\u2500\u2500 model/\n\u2502   \u2502   \u251c\u2500\u2500 product/\n\u2502   \u2502   \u251c\u2500\u2500 partner/\n\u2502   \u2502   \u251c\u2500\u2500 sales/\n\u2502   \u2502   \u251c\u2500\u2500 shipping/\n\u2502   \u2502   \u251c\u2500\u2500 invoice/\n\u2502   \u2502   \u2514\u2500\u2500 receipt/\n\u2502   \u2514\u2500\u2500 exception/\n\u2502\n\u251c\u2500\u2500 application/                  # \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff08API\u7248\u3068\u5171\u901a\uff09\n\u2502   \u251c\u2500\u2500 port/\n\u2502   \u2502   \u251c\u2500\u2500 in/                  # Input Port\uff08\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\uff09\n\u2502   \u2502   \u2514\u2500\u2500 out/                 # Output Port\uff08\u30ea\u30dd\u30b8\u30c8\u30ea\uff09\n\u2502   \u2514\u2500\u2500 service/\n\u2502\n\u251c\u2500\u2500 infrastructure/\n\u2502   \u251c\u2500\u2500 out/\n\u2502   \u2502   \u2514\u2500\u2500 persistence/         # Output Adapter\uff08DB\u5b9f\u88c5\uff09\n\u2502   \u2502       \u251c\u2500\u2500 mapper/\n\u2502   \u2502       \u251c\u2500\u2500 repository/\n\u2502   \u2502       \u2514\u2500\u2500 typehandler/\n\u2502   \u2514\u2500\u2500 in/\n\u2502       \u2514\u2500\u2500 web/                 # Input Adapter\uff08Web\u5b9f\u88c5\uff09\n\u2502           \u251c\u2500\u2500 controller/      # Thymeleaf Controller\n\u2502           \u251c\u2500\u2500 form/            # \u30d5\u30a9\u30fc\u30e0\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\u2502           \u2514\u2500\u2500 helper/          # \u30d3\u30e5\u30fc\u30d8\u30eb\u30d1\u30fc\n\u2502\n\u2514\u2500\u2500 config/\n\napps/sms/backend/src/main/resources/\n\u251c\u2500\u2500 templates/                    # Thymeleaf \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\n\u2502   \u251c\u2500\u2500 layout/                   # \u5171\u901a\u30ec\u30a4\u30a2\u30a6\u30c8\n\u2502   \u251c\u2500\u2500 products/                 # \u5546\u54c1\u30de\u30b9\u30bf\u753b\u9762\n\u2502   \u251c\u2500\u2500 partners/                 # \u53d6\u5f15\u5148\u30de\u30b9\u30bf\u753b\u9762\n\u2502   \u251c\u2500\u2500 orders/                   # \u53d7\u6ce8\u753b\u9762\n\u2502   \u251c\u2500\u2500 shipments/                # \u51fa\u8377\u753b\u9762\n\u2502   \u2514\u2500\u2500 invoices/                 # \u8acb\u6c42\u753b\u9762\n\u251c\u2500\u2500 static/                       # \u9759\u7684\u30ea\u30bd\u30fc\u30b9\n\u2502   \u251c\u2500\u2500 css/\n\u2502   \u251c\u2500\u2500 js/\n\u2502   \u2514\u2500\u2500 images/\n\u251c\u2500\u2500 mapper/                       # MyBatis Mapper XML\n\u2514\u2500\u2500 messages.properties           # \u30e1\u30c3\u30bb\u30fc\u30b8\u30ea\u30bd\u30fc\u30b9\n</code></pre>"},{"location":"article/study/study2-1/#146","title":"14.6 \u6280\u8853\u30b9\u30bf\u30c3\u30af\u306e\u5c0e\u5165","text":""},{"location":"article/study/study2-1/#buildgradlekts","title":"build.gradle.kts","text":"\u30b3\u30fc\u30c9\u4f8b: build.gradle.kts <pre><code>plugins {\n    id(\"java\")\n    id(\"org.springframework.boot\") version \"3.4.1\"\n    id(\"io.spring.dependency-management\") version \"1.1.7\"\n}\n\njava {\n    toolchain {\n        languageVersion = JavaLanguageVersion.of(21)\n    }\n}\n\ndependencies {\n    // Spring Boot Web\uff08REST API\u3067\u306f\u306a\u304fMVC\u3068\u3057\u3066\u4f7f\u7528\uff09\n    implementation(\"org.springframework.boot:spring-boot-starter-web\")\n    implementation(\"org.springframework.boot:spring-boot-starter-validation\")\n\n    // Thymeleaf\uff08\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\uff09\n    implementation(\"org.springframework.boot:spring-boot-starter-thymeleaf\")\n    implementation(\"nz.net.ultraq.thymeleaf:thymeleaf-layout-dialect:3.4.0\")\n\n    // htmx\uff08\u30e2\u30c0\u30f3\u306a\u30a4\u30f3\u30bf\u30e9\u30af\u30c6\u30a3\u30d6UI\uff09\n    // CDN \u304b\u3089\u8aad\u307f\u8fbc\u3080\u305f\u3081\u4f9d\u5b58\u95a2\u4fc2\u306f\u4e0d\u8981\n\n    // MyBatis\n    implementation(\"org.mybatis.spring.boot:mybatis-spring-boot-starter:3.0.4\")\n\n    // PostgreSQL\n    runtimeOnly(\"org.postgresql:postgresql\")\n\n    // Flyway\n    implementation(\"org.flywaydb:flyway-core\")\n    implementation(\"org.flywaydb:flyway-database-postgresql\")\n\n    // Webjars\uff08Bootstrap\u7b49\u306e\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30e9\u30a4\u30d6\u30e9\u30ea\uff09\n    implementation(\"org.webjars:bootstrap:5.3.3\")\n    implementation(\"org.webjars:webjars-locator-core:0.59\")\n\n    // \u5e33\u7968\u51fa\u529b\n    implementation(\"org.apache.poi:poi-ooxml:5.3.0\")  // Excel\n    implementation(\"com.itextpdf:itext7-core:8.0.5\")  // PDF\n\n    // Test\n    testImplementation(\"org.springframework.boot:spring-boot-starter-test\")\n    testImplementation(\"org.testcontainers:postgresql:1.20.4\")\n    testImplementation(\"org.testcontainers:junit-jupiter:1.20.4\")\n\n    // Lombok\n    compileOnly(\"org.projectlombok:lombok\")\n    annotationProcessor(\"org.projectlombok:lombok\")\n}\n</code></pre>"},{"location":"article/study/study2-1/#147-layoutdefaulthtml","title":"14.7 \u5171\u901a\u30ec\u30a4\u30a2\u30a6\u30c8\uff08layout/default.html\uff09","text":"\u30b3\u30fc\u30c9\u4f8b: layout/default.html <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html xmlns:th=\"http://www.thymeleaf.org\"\n      xmlns:layout=\"http://www.ultraq.net.nz/thymeleaf/layout\"\n      lang=\"ja\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;title layout:title-pattern=\"$CONTENT_TITLE - $LAYOUT_TITLE\"&gt;\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0&lt;/title&gt;\n\n    &lt;!-- Bootstrap CSS --&gt;\n    &lt;link rel=\"stylesheet\" th:href=\"@{/webjars/bootstrap/css/bootstrap.min.css}\"&gt;\n\n    &lt;!-- \u30ab\u30b9\u30bf\u30e0 CSS --&gt;\n    &lt;link rel=\"stylesheet\" th:href=\"@{/css/style.css}\"&gt;\n\n    &lt;!-- htmx\uff08\u90e8\u5206\u66f4\u65b0\u7528\uff09 --&gt;\n    &lt;script src=\"https://unpkg.com/htmx.org@1.9.12\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;!-- \u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3\u30d0\u30fc --&gt;\n    &lt;nav class=\"navbar navbar-expand-lg navbar-dark bg-primary\"&gt;\n        &lt;div class=\"container-fluid\"&gt;\n            &lt;a class=\"navbar-brand\" th:href=\"@{/}\"&gt;\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0&lt;/a&gt;\n            &lt;div class=\"collapse navbar-collapse\" id=\"navbarNav\"&gt;\n                &lt;ul class=\"navbar-nav\"&gt;\n                    &lt;li class=\"nav-item dropdown\"&gt;\n                        &lt;a class=\"nav-link dropdown-toggle\" href=\"#\" data-bs-toggle=\"dropdown\"&gt;\u30de\u30b9\u30bf&lt;/a&gt;\n                        &lt;ul class=\"dropdown-menu\"&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/products}\"&gt;\u5546\u54c1\u30de\u30b9\u30bf&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/partners}\"&gt;\u53d6\u5f15\u5148\u30de\u30b9\u30bf&lt;/a&gt;&lt;/li&gt;\n                        &lt;/ul&gt;\n                    &lt;/li&gt;\n                    &lt;li class=\"nav-item dropdown\"&gt;\n                        &lt;a class=\"nav-link dropdown-toggle\" href=\"#\" data-bs-toggle=\"dropdown\"&gt;\u8ca9\u58f2&lt;/a&gt;\n                        &lt;ul class=\"dropdown-menu\"&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/orders}\"&gt;\u53d7\u6ce8&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/shipments}\"&gt;\u51fa\u8377&lt;/a&gt;&lt;/li&gt;\n                        &lt;/ul&gt;\n                    &lt;/li&gt;\n                    &lt;li class=\"nav-item dropdown\"&gt;\n                        &lt;a class=\"nav-link dropdown-toggle\" href=\"#\" data-bs-toggle=\"dropdown\"&gt;\u50b5\u6a29&lt;/a&gt;\n                        &lt;ul class=\"dropdown-menu\"&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/invoices}\"&gt;\u8acb\u6c42&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/receipts}\"&gt;\u5165\u91d1&lt;/a&gt;&lt;/li&gt;\n                        &lt;/ul&gt;\n                    &lt;/li&gt;\n                &lt;/ul&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/nav&gt;\n\n    &lt;!-- \u30d5\u30e9\u30c3\u30b7\u30e5\u30e1\u30c3\u30bb\u30fc\u30b8 --&gt;\n    &lt;div class=\"container mt-3\"&gt;\n        &lt;div th:if=\"${successMessage}\" class=\"alert alert-success alert-dismissible fade show\"&gt;\n            &lt;span th:text=\"${successMessage}\"&gt;&lt;/span&gt;\n            &lt;button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"&gt;&lt;/button&gt;\n        &lt;/div&gt;\n        &lt;div th:if=\"${errorMessage}\" class=\"alert alert-danger alert-dismissible fade show\"&gt;\n            &lt;span th:text=\"${errorMessage}\"&gt;&lt;/span&gt;\n            &lt;button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"&gt;&lt;/button&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- \u30e1\u30a4\u30f3\u30b3\u30f3\u30c6\u30f3\u30c4 --&gt;\n    &lt;main class=\"container mt-4\"&gt;\n        &lt;div layout:fragment=\"content\"&gt;&lt;/div&gt;\n    &lt;/main&gt;\n\n    &lt;!-- Bootstrap JS --&gt;\n    &lt;script th:src=\"@{/webjars/bootstrap/js/bootstrap.bundle.min.js}\"&gt;&lt;/script&gt;\n    &lt;th:block layout:fragment=\"scripts\"&gt;&lt;/th:block&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"article/study/study2-1/#148-htmx","title":"14.8 htmx \u306b\u3088\u308b\u90e8\u5206\u66f4\u65b0","text":"<p>\u30e2\u30ce\u30ea\u30b9\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u3082\u3001htmx \u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067 SPA \u306e\u3088\u3046\u306a\u64cd\u4f5c\u6027\u3092\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002</p> <p></p>"},{"location":"article/study/study2-1/#htmx","title":"htmx \u306e\u57fa\u672c\u7684\u306a\u4f7f\u3044\u65b9","text":"\u30b3\u30fc\u30c9\u4f8b: htmx \u306b\u3088\u308b\u5546\u54c1\u691c\u7d22 <pre><code>&lt;!-- \u5546\u54c1\u691c\u7d22\uff08\u90e8\u5206\u66f4\u65b0\uff09 --&gt;\n&lt;input type=\"text\" class=\"form-control\"\n       hx-get=\"/products/search\"\n       hx-trigger=\"keyup changed delay:300ms\"\n       hx-target=\"#search-results\"\n       hx-indicator=\"#loading\"&gt;\n&lt;span id=\"loading\" class=\"htmx-indicator\"&gt;\u691c\u7d22\u4e2d...&lt;/span&gt;\n\n&lt;div id=\"search-results\"&gt;\n    &lt;!-- Controller \u304b\u3089\u8fd4\u3055\u308c\u308b HTML \u30d5\u30e9\u30b0\u30e1\u30f3\u30c8 --&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"article/study/study2-1/#15","title":"\u7b2c15\u7ae0\uff1a\u30de\u30b9\u30bf\u306e\u5b9f\u88c5","text":""},{"location":"article/study/study2-1/#151","title":"15.1 \u5546\u54c1\u30de\u30b9\u30bf\u753b\u9762\u306e\u8a2d\u8a08","text":"\u753b\u9762 URL \u30e1\u30bd\u30c3\u30c9 \u8aac\u660e \u5546\u54c1\u4e00\u89a7 /products GET \u5546\u54c1\u306e\u691c\u7d22\u30fb\u4e00\u89a7\u8868\u793a \u5546\u54c1\u8a73\u7d30 /products/{productCode} GET \u5546\u54c1\u306e\u8a73\u7d30\u8868\u793a \u5546\u54c1\u767b\u9332 /products/new GET \u767b\u9332\u30d5\u30a9\u30fc\u30e0\u8868\u793a \u5546\u54c1\u767b\u9332\u51e6\u7406 /products POST \u767b\u9332\u51e6\u7406 \u5546\u54c1\u7de8\u96c6 /products/{productCode}/edit GET \u7de8\u96c6\u30d5\u30a9\u30fc\u30e0\u8868\u793a \u5546\u54c1\u66f4\u65b0\u51e6\u7406 /products/{productCode} POST \u66f4\u65b0\u51e6\u7406\uff08PUT \u4ee3\u66ff\uff09 \u5546\u54c1\u524a\u9664\u51e6\u7406 /products/{productCode}/delete POST \u524a\u9664\u51e6\u7406\uff08DELETE \u4ee3\u66ff\uff09"},{"location":"article/study/study2-1/#152","title":"15.2 \u30d5\u30a9\u30fc\u30e0\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u8a08","text":"\u30b3\u30fc\u30c9\u4f8b: ProductForm.java <pre><code>package com.example.sms.infrastructure.in.web.form;\n\nimport com.example.sms.application.port.in.CreateProductCommand;\nimport com.example.sms.domain.model.product.ProductCategory;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.NotNull;\nimport jakarta.validation.constraints.Positive;\nimport jakarta.validation.constraints.Size;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\n\n/**\n * \u5546\u54c1\u767b\u9332\u30fb\u7de8\u96c6\u30d5\u30a9\u30fc\u30e0\n */\n@Data\npublic class ProductForm {\n\n    @NotBlank(message = \"\u5546\u54c1\u30b3\u30fc\u30c9\u306f\u5fc5\u9808\u3067\u3059\")\n    @Size(max = 20, message = \"\u5546\u54c1\u30b3\u30fc\u30c9\u306f20\u6587\u5b57\u4ee5\u5185\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\")\n    private String productCode;\n\n    @NotBlank(message = \"\u5546\u54c1\u540d\u306f\u5fc5\u9808\u3067\u3059\")\n    @Size(max = 100, message = \"\u5546\u54c1\u540d\u306f100\u6587\u5b57\u4ee5\u5185\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\")\n    private String productName;\n\n    @NotNull(message = \"\u5546\u54c1\u533a\u5206\u306f\u5fc5\u9808\u3067\u3059\")\n    private ProductCategory category;\n\n    @Positive(message = \"\u5358\u4fa1\u306f\u6b63\u306e\u6570\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\")\n    private BigDecimal unitPrice;\n\n    /**\n     * \u30d5\u30a9\u30fc\u30e0\u3092\u30b3\u30de\u30f3\u30c9\u306b\u5909\u63db\n     */\n    public CreateProductCommand toCommand() {\n        return CreateProductCommand.builder()\n            .productCode(this.productCode)\n            .productName(this.productName)\n            .category(this.category)\n            .unitPrice(this.unitPrice)\n            .build();\n    }\n\n    /**\n     * \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u304b\u3089\u30d5\u30a9\u30fc\u30e0\u3092\u751f\u6210\n     */\n    public static ProductForm from(Product product) {\n        ProductForm form = new ProductForm();\n        form.setProductCode(product.getProductCode());\n        form.setProductName(product.getProductName());\n        form.setCategory(product.getCategory());\n        form.setUnitPrice(product.getUnitPrice());\n        return form;\n    }\n}\n</code></pre>"},{"location":"article/study/study2-1/#153-controller-tdd","title":"15.3 \u5546\u54c1 Controller \u306e TDD \u5b9f\u88c5","text":"\u30b3\u30fc\u30c9\u4f8b: ProductControllerTest.java <pre><code>@SpringBootTest\n@AutoConfigureMockMvc\n@Testcontainers\n@DisplayName(\"\u5546\u54c1\u30de\u30b9\u30bf\u753b\u9762\")\nclass ProductControllerTest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:16\")\n            .withDatabaseName(\"sms_test\");\n\n    @DynamicPropertySource\n    static void configureProperties(DynamicPropertyRegistry registry) {\n        registry.add(\"spring.datasource.url\", postgres::getJdbcUrl);\n    }\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @Test\n    @DisplayName(\"\u5546\u54c1\u4e00\u89a7\u753b\u9762\u3092\u8868\u793a\u3067\u304d\u308b\")\n    void shouldDisplayProductList() throws Exception {\n        mockMvc.perform(get(\"/products\"))\n            .andExpect(status().isOk())\n            .andExpect(view().name(\"products/list\"))\n            .andExpect(model().attributeExists(\"products\"));\n    }\n\n    @Test\n    @DisplayName(\"\u5546\u54c1\u3092\u767b\u9332\u3067\u304d\u308b\")\n    void shouldCreateProduct() throws Exception {\n        mockMvc.perform(post(\"/products\")\n                .param(\"productCode\", \"NEW-001\")\n                .param(\"productName\", \"\u65b0\u898f\u5546\u54c1\")\n                .param(\"category\", \"FINISHED_GOODS\")\n                .param(\"unitPrice\", \"1000\"))\n            .andExpect(status().is3xxRedirection())\n            .andExpect(redirectedUrl(\"/products\"))\n            .andExpect(flash().attribute(\"successMessage\", containsString(\"\u767b\u9332\")));\n    }\n}\n</code></pre>"},{"location":"article/study/study2-1/#154-controller","title":"15.4 \u5546\u54c1 Controller","text":"\u30b3\u30fc\u30c9\u4f8b: ProductController.java <pre><code>@Controller\n@RequestMapping(\"/products\")\npublic class ProductController {\n\n    private final ProductUseCase productUseCase;\n\n    public ProductController(ProductUseCase productUseCase) {\n        this.productUseCase = productUseCase;\n    }\n\n    @GetMapping\n    public String list(@RequestParam(required = false) ProductCategory category, Model model) {\n        List&lt;Product&gt; products = category != null\n            ? productUseCase.findByCategory(category)\n            : productUseCase.findAll();\n        model.addAttribute(\"products\", products);\n        model.addAttribute(\"categories\", ProductCategory.values());\n        return \"products/list\";\n    }\n\n    @GetMapping(\"/new\")\n    public String newForm(Model model) {\n        model.addAttribute(\"form\", new ProductForm());\n        model.addAttribute(\"categories\", ProductCategory.values());\n        return \"products/new\";\n    }\n\n    @PostMapping\n    public String create(\n            @Valid @ModelAttribute(\"form\") ProductForm form,\n            BindingResult bindingResult,\n            RedirectAttributes redirectAttributes,\n            Model model) {\n\n        if (bindingResult.hasErrors()) {\n            model.addAttribute(\"categories\", ProductCategory.values());\n            return \"products/new\";\n        }\n\n        productUseCase.createProduct(form.toCommand());\n        redirectAttributes.addFlashAttribute(\"successMessage\", \"\u5546\u54c1\u3092\u767b\u9332\u3057\u307e\u3057\u305f\");\n        return \"redirect:/products\";\n    }\n\n    @GetMapping(\"/{productCode}/edit\")\n    public String editForm(@PathVariable String productCode, Model model) {\n        Product product = productUseCase.findByCode(productCode)\n            .orElseThrow(() -&gt; new ProductNotFoundException(productCode));\n        model.addAttribute(\"form\", ProductForm.from(product));\n        model.addAttribute(\"categories\", ProductCategory.values());\n        return \"products/edit\";\n    }\n\n    @PostMapping(\"/{productCode}\")\n    public String update(\n            @PathVariable String productCode,\n            @Valid @ModelAttribute(\"form\") ProductForm form,\n            BindingResult bindingResult,\n            RedirectAttributes redirectAttributes,\n            Model model) {\n\n        if (bindingResult.hasErrors()) {\n            model.addAttribute(\"categories\", ProductCategory.values());\n            return \"products/edit\";\n        }\n\n        productUseCase.updateProduct(productCode, form.toCommand());\n        redirectAttributes.addFlashAttribute(\"successMessage\", \"\u5546\u54c1\u3092\u66f4\u65b0\u3057\u307e\u3057\u305f\");\n        return \"redirect:/products/\" + productCode;\n    }\n\n    @PostMapping(\"/{productCode}/delete\")\n    public String delete(@PathVariable String productCode, RedirectAttributes redirectAttributes) {\n        productUseCase.deleteProduct(productCode);\n        redirectAttributes.addFlashAttribute(\"successMessage\", \"\u5546\u54c1\u3092\u524a\u9664\u3057\u307e\u3057\u305f\");\n        return \"redirect:/products\";\n    }\n}\n</code></pre>"},{"location":"article/study/study2-1/#16","title":"\u7b2c16\u7ae0\uff1a\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306e\u5b9f\u88c5","text":""},{"location":"article/study/study2-1/#161","title":"16.1 \u53d7\u6ce8\u696d\u52d9\u753b\u9762\u306e\u5b9f\u88c5","text":""},{"location":"article/study/study2-1/#controller","title":"\u53d7\u6ce8 Controller","text":"\u30b3\u30fc\u30c9\u4f8b: OrderController.java <pre><code>@Controller\n@RequestMapping(\"/orders\")\npublic class OrderController {\n\n    private final OrderUseCase orderUseCase;\n    private final ProductUseCase productUseCase;\n    private final PartnerUseCase partnerUseCase;\n\n    @GetMapping\n    public String list(\n            @RequestParam(required = false) String status,\n            @RequestParam(required = false) String customerCode,\n            Model model) {\n\n        List&lt;Order&gt; orders = orderUseCase.getOrders(status, customerCode);\n        model.addAttribute(\"orders\", orders);\n        model.addAttribute(\"customers\", partnerUseCase.getCustomers());\n        return \"orders/list\";\n    }\n\n    @GetMapping(\"/new\")\n    public String newForm(Model model) {\n        model.addAttribute(\"form\", new OrderForm());\n        model.addAttribute(\"customers\", partnerUseCase.getCustomers());\n        model.addAttribute(\"products\", productUseCase.getAllProducts());\n        return \"orders/new\";\n    }\n\n    @PostMapping\n    public String create(\n            @Valid @ModelAttribute(\"form\") OrderForm form,\n            BindingResult bindingResult,\n            Model model,\n            RedirectAttributes redirectAttributes) {\n\n        if (bindingResult.hasErrors()) {\n            model.addAttribute(\"customers\", partnerUseCase.getCustomers());\n            model.addAttribute(\"products\", productUseCase.getAllProducts());\n            return \"orders/new\";\n        }\n\n        Order order = orderUseCase.createOrder(form.toCommand());\n        redirectAttributes.addFlashAttribute(\"successMessage\",\n            \"\u53d7\u6ce8\u300c\" + order.getOrderNumber() + \"\u300d\u3092\u767b\u9332\u3057\u307e\u3057\u305f\");\n        return \"redirect:/orders\";\n    }\n\n    @PostMapping(\"/{orderNumber}/confirm\")\n    public String confirm(@PathVariable String orderNumber, RedirectAttributes redirectAttributes) {\n        orderUseCase.confirmOrder(orderNumber);\n        redirectAttributes.addFlashAttribute(\"successMessage\",\n            \"\u53d7\u6ce8\u300c\" + orderNumber + \"\u300d\u3092\u78ba\u5b9a\u3057\u307e\u3057\u305f\");\n        return \"redirect:/orders/\" + orderNumber;\n    }\n\n    @PostMapping(\"/{orderNumber}/cancel\")\n    public String cancel(@PathVariable String orderNumber, RedirectAttributes redirectAttributes) {\n        orderUseCase.cancelOrder(orderNumber);\n        redirectAttributes.addFlashAttribute(\"successMessage\",\n            \"\u53d7\u6ce8\u300c\" + orderNumber + \"\u300d\u3092\u53d6\u308a\u6d88\u3057\u307e\u3057\u305f\");\n        return \"redirect:/orders\";\n    }\n}\n</code></pre>"},{"location":"article/study/study2-1/#162","title":"16.2 \u52d5\u7684\u30d5\u30a9\u30fc\u30e0\uff08\u660e\u7d30\u884c\u306e\u8ffd\u52a0\u30fb\u524a\u9664\uff09","text":"<p>htmx \u3092\u4f7f\u7528\u3057\u3066\u3001\u30da\u30fc\u30b8\u3092\u30ea\u30ed\u30fc\u30c9\u305b\u305a\u306b\u660e\u7d30\u884c\u3092\u8ffd\u52a0\u30fb\u524a\u9664\u3067\u304d\u307e\u3059\u3002</p> \u30b3\u30fc\u30c9\u4f8b: \u52d5\u7684\u30d5\u30a9\u30fc\u30e0\uff08\u660e\u7d30\u884c\uff09 <pre><code>&lt;!-- \u660e\u7d30\u8ffd\u52a0\u30dc\u30bf\u30f3 --&gt;\n&lt;button type=\"button\" class=\"btn btn-sm btn-outline-primary\"\n        hx-get=\"/orders/add-detail-row\"\n        hx-target=\"#detail-rows\"\n        hx-swap=\"beforeend\"\n        hx-vals='js:{\"index\": document.querySelectorAll(\"#detail-rows tr\").length}'&gt;\n    &lt;i class=\"bi bi-plus\"&gt;&lt;/i&gt; \u884c\u8ffd\u52a0\n&lt;/button&gt;\n\n&lt;!-- \u660e\u7d30\u884c\u30d5\u30e9\u30b0\u30e1\u30f3\u30c8 --&gt;\n&lt;tr th:fragment=\"detailRow\" th:id=\"'row-' + ${index}\"&gt;\n    &lt;td&gt;\n        &lt;select class=\"form-select product-select\"\n                th:name=\"'details[' + ${index} + '].productCode'\" required\n                onchange=\"updatePrice(this)\"&gt;\n            &lt;option value=\"\"&gt;\u9078\u629e&lt;/option&gt;\n            &lt;option th:each=\"product : ${products}\"\n                    th:value=\"${product.productCode}\"\n                    th:text=\"${product.productCode + ' - ' + product.productName}\"\n                    th:data-price=\"${product.unitPrice}\"&gt;&lt;/option&gt;\n        &lt;/select&gt;\n    &lt;/td&gt;\n    &lt;td&gt;\n        &lt;input type=\"number\" class=\"form-control quantity-input\"\n               th:name=\"'details[' + ${index} + '].quantity'\" min=\"1\" value=\"1\" required\n               onchange=\"calculateAmount(this)\"&gt;\n    &lt;/td&gt;\n    &lt;td&gt;\n        &lt;input type=\"number\" class=\"form-control price-input\"\n               th:name=\"'details[' + ${index} + '].unitPrice'\" step=\"1\" min=\"0\"\n               onchange=\"calculateAmount(this)\"&gt;\n    &lt;/td&gt;\n    &lt;td&gt;\n        &lt;input type=\"text\" class=\"form-control amount-display\" readonly value=\"0\"&gt;\n    &lt;/td&gt;\n    &lt;td&gt;\n        &lt;button type=\"button\" class=\"btn btn-sm btn-outline-danger\"\n                onclick=\"this.closest('tr').remove(); calculateTotal()\"&gt;\u524a\u9664&lt;/button&gt;\n    &lt;/td&gt;\n&lt;/tr&gt;\n</code></pre>"},{"location":"article/study/study2-1/#163","title":"16.3 \u51fa\u8377\u696d\u52d9\u753b\u9762\u306e\u5b9f\u88c5","text":"\u30b3\u30fc\u30c9\u4f8b: ShipmentController.java <pre><code>@Controller\n@RequestMapping(\"/shipments\")\npublic class ShipmentController {\n\n    private final ShipmentUseCase shipmentUseCase;\n    private final OrderUseCase orderUseCase;\n\n    @GetMapping\n    public String list(\n            @RequestParam(required = false) String status,\n            @RequestParam(required = false) @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) LocalDate shipmentDate,\n            Model model) {\n\n        List&lt;Shipment&gt; shipments = shipmentDate != null\n            ? shipmentUseCase.getShipmentsByDate(shipmentDate)\n            : shipmentUseCase.getShipments(status);\n\n        model.addAttribute(\"shipments\", shipments);\n        model.addAttribute(\"today\", LocalDate.now());\n        return \"shipments/list\";\n    }\n\n    @PostMapping(\"/{shipmentNumber}/execute\")\n    public String execute(@PathVariable String shipmentNumber, RedirectAttributes redirectAttributes) {\n        try {\n            shipmentUseCase.executeShipment(shipmentNumber);\n            redirectAttributes.addFlashAttribute(\"successMessage\",\n                \"\u51fa\u8377\u300c\" + shipmentNumber + \"\u300d\u3092\u5b9f\u884c\u3057\u307e\u3057\u305f\");\n        } catch (InsufficientInventoryException e) {\n            redirectAttributes.addFlashAttribute(\"errorMessage\",\n                \"\u5728\u5eab\u4e0d\u8db3\u306e\u305f\u3081\u51fa\u8377\u3067\u304d\u307e\u305b\u3093: \" + e.getMessage());\n        }\n        return \"redirect:/shipments/\" + shipmentNumber;\n    }\n}\n</code></pre>"},{"location":"article/study/study2-1/#17","title":"\u7b2c17\u7ae0\uff1a\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3068\u5e33\u7968\u51fa\u529b","text":""},{"location":"article/study/study2-1/#171","title":"17.1 \u30b0\u30ed\u30fc\u30d0\u30eb\u4f8b\u5916\u30cf\u30f3\u30c9\u30e9","text":"\u30b3\u30fc\u30c9\u4f8b: GlobalExceptionHandler.java <pre><code>@ControllerAdvice\npublic class GlobalExceptionHandler {\n\n    private static final Logger logger = LoggerFactory.getLogger(GlobalExceptionHandler.class);\n\n    /**\n     * \u696d\u52d9\u30a8\u30e9\u30fc\uff08\u30ea\u30bd\u30fc\u30b9\u672a\u691c\u51fa\uff09\n     */\n    @ExceptionHandler(ResourceNotFoundException.class)\n    public String handleResourceNotFound(ResourceNotFoundException ex, Model model) {\n        logger.warn(\"\u30ea\u30bd\u30fc\u30b9\u672a\u691c\u51fa: {}\", ex.getMessage());\n        model.addAttribute(\"errorMessage\", ex.getMessage());\n        return \"error/404\";\n    }\n\n    /**\n     * \u696d\u52d9\u30a8\u30e9\u30fc\uff08\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\uff09\n     */\n    @ExceptionHandler(BusinessValidationException.class)\n    public String handleBusinessValidation(BusinessValidationException ex, Model model) {\n        logger.warn(\"\u696d\u52d9\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc: {}\", ex.getMessage());\n        model.addAttribute(\"errorMessage\", ex.getMessage());\n        model.addAttribute(\"errorCode\", ex.getErrorCode());\n        return \"error/business\";\n    }\n\n    /**\n     * \u30b7\u30b9\u30c6\u30e0\u30a8\u30e9\u30fc\n     */\n    @ExceptionHandler(Exception.class)\n    public String handleGeneralException(Exception ex, Model model) {\n        logger.error(\"\u30b7\u30b9\u30c6\u30e0\u30a8\u30e9\u30fc\", ex);\n        model.addAttribute(\"errorMessage\", \"\u30b7\u30b9\u30c6\u30e0\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u7ba1\u7406\u8005\u306b\u304a\u554f\u3044\u5408\u308f\u305b\u304f\u3060\u3055\u3044\u3002\");\n        return \"error/500\";\n    }\n}\n</code></pre>"},{"location":"article/study/study2-1/#172-excel","title":"17.2 Excel \u5e33\u7968\u51fa\u529b","text":"\u30b3\u30fc\u30c9\u4f8b: ReportController.java\uff08Excel \u51fa\u529b\uff09 <pre><code>@Controller\n@RequestMapping(\"/reports\")\npublic class ReportController {\n\n    private final ReportUseCase reportUseCase;\n\n    @GetMapping(\"/inventory/excel\")\n    public void exportInventoryExcel(HttpServletResponse response) throws IOException {\n        response.setContentType(\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\");\n        response.setHeader(\"Content-Disposition\",\n            \"attachment; filename=inventory_\" + LocalDate.now() + \".xlsx\");\n\n        try (Workbook workbook = new XSSFWorkbook()) {\n            Sheet sheet = workbook.createSheet(\"\u5728\u5eab\u4e00\u89a7\");\n\n            // \u30d8\u30c3\u30c0\u30fc\u884c\n            Row headerRow = sheet.createRow(0);\n            CellStyle headerStyle = createHeaderStyle(workbook);\n            String[] headers = {\"\u5546\u54c1\u30b3\u30fc\u30c9\", \"\u5546\u54c1\u540d\", \"\u73fe\u5728\u5728\u5eab\", \"\u5b89\u5168\u5728\u5eab\", \"\u904e\u4e0d\u8db3\"};\n            for (int i = 0; i &lt; headers.length; i++) {\n                Cell cell = headerRow.createCell(i);\n                cell.setCellValue(headers[i]);\n                cell.setCellStyle(headerStyle);\n            }\n\n            // \u30c7\u30fc\u30bf\u884c\n            List&lt;InventoryData&gt; inventoryList = reportUseCase.getInventoryReport();\n            int rowNum = 1;\n            for (InventoryData data : inventoryList) {\n                Row row = sheet.createRow(rowNum++);\n                row.createCell(0).setCellValue(data.getProductCode());\n                row.createCell(1).setCellValue(data.getProductName());\n                row.createCell(2).setCellValue(data.getCurrentStock());\n                row.createCell(3).setCellValue(data.getSafetyStock());\n                row.createCell(4).setCellValue(data.getDifference());\n            }\n\n            // \u5217\u5e45\u81ea\u52d5\u8abf\u6574\n            for (int i = 0; i &lt; headers.length; i++) {\n                sheet.autoSizeColumn(i);\n            }\n\n            workbook.write(response.getOutputStream());\n        }\n    }\n}\n</code></pre>"},{"location":"article/study/study2-1/#173-pdf","title":"17.3 PDF \u5e33\u7968\u51fa\u529b","text":"\u30b3\u30fc\u30c9\u4f8b: PDF \u8acb\u6c42\u66f8\u51fa\u529b <pre><code>@GetMapping(\"/invoice/{invoiceNumber}/pdf\")\npublic void exportInvoicePdf(@PathVariable String invoiceNumber, HttpServletResponse response)\n        throws IOException {\n\n    Invoice invoice = invoiceUseCase.getInvoice(invoiceNumber);\n\n    response.setContentType(\"application/pdf\");\n    response.setHeader(\"Content-Disposition\",\n        \"attachment; filename=invoice_\" + invoiceNumber + \".pdf\");\n\n    try (PdfWriter writer = new PdfWriter(response.getOutputStream());\n         PdfDocument pdf = new PdfDocument(writer);\n         Document document = new Document(pdf, PageSize.A4)) {\n\n        // \u65e5\u672c\u8a9e\u30d5\u30a9\u30f3\u30c8\u8a2d\u5b9a\n        PdfFont font = PdfFontFactory.createFont(\"HeiseiKakuGo-W5\", \"UniJIS-UCS2-H\");\n        document.setFont(font);\n\n        // \u30bf\u30a4\u30c8\u30eb\n        document.add(new Paragraph(\"\u8acb\u6c42\u66f8\")\n            .setFontSize(24)\n            .setTextAlignment(TextAlignment.CENTER));\n\n        // \u8acb\u6c42\u5148\u60c5\u5831\n        document.add(new Paragraph(invoice.getCustomerName() + \" \u5fa1\u4e2d\")\n            .setFontSize(14));\n\n        // \u8acb\u6c42\u660e\u7d30\u30c6\u30fc\u30d6\u30eb\n        Table table = new Table(UnitValue.createPercentArray(new float[]{3, 5, 2, 2, 2}))\n            .useAllAvailableWidth();\n\n        // \u30d8\u30c3\u30c0\u30fc\n        table.addHeaderCell(new Cell().add(new Paragraph(\"\u5546\u54c1\u30b3\u30fc\u30c9\")));\n        table.addHeaderCell(new Cell().add(new Paragraph(\"\u5546\u54c1\u540d\")));\n        table.addHeaderCell(new Cell().add(new Paragraph(\"\u6570\u91cf\")));\n        table.addHeaderCell(new Cell().add(new Paragraph(\"\u5358\u4fa1\")));\n        table.addHeaderCell(new Cell().add(new Paragraph(\"\u91d1\u984d\")));\n\n        // \u660e\u7d30\u884c\n        for (InvoiceDetail detail : invoice.getDetails()) {\n            table.addCell(detail.getProductCode());\n            table.addCell(detail.getProductName());\n            table.addCell(String.valueOf(detail.getQuantity()));\n            table.addCell(formatCurrency(detail.getUnitPrice()));\n            table.addCell(formatCurrency(detail.getAmount()));\n        }\n\n        document.add(table);\n\n        // \u5408\u8a08\n        document.add(new Paragraph(\"\u5408\u8a08\u91d1\u984d: \" + formatCurrency(invoice.getTotalAmount()))\n            .setTextAlignment(TextAlignment.RIGHT)\n            .setFontSize(16)\n            .setBold());\n    }\n}\n</code></pre>"},{"location":"article/study/study2-1/#18","title":"\u7b2c18\u7ae0\uff1a\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3","text":""},{"location":"article/study/study2-1/#181","title":"18.1 \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u306e\u6982\u8981","text":"<p>\u5927\u91cf\u306e\u30c7\u30fc\u30bf\u3092\u6271\u3046\u4e00\u89a7\u753b\u9762\u3067\u306f\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3068\u30e6\u30fc\u30b6\u30d3\u30ea\u30c6\u30a3\u306e\u89b3\u70b9\u304b\u3089\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\uff08\u30da\u30fc\u30b8\u5206\u5272\uff09\u304c\u5fc5\u8981\u3067\u3059\u3002\u672c\u7ae0\u3067\u306f\u3001\u5546\u54c1\u30de\u30b9\u30bf\u753b\u9762\u3092\u4f8b\u306b\u3001\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u6cbf\u3063\u305f\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u6a5f\u80fd\u306e\u5b9f\u88c5\u65b9\u6cd5\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/study/study2-1/#182","title":"18.2 \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u7d50\u679c\u30af\u30e9\u30b9","text":"<p>\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u7d50\u679c\u3092\u8868\u3059\u6c4e\u7528\u30af\u30e9\u30b9\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002</p> \u30b3\u30fc\u30c9\u4f8b: PageResult.java <pre><code>package com.example.sms.domain.model.common;\n\nimport java.util.List;\n\n/**\n * \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u7d50\u679c\u3092\u8868\u3059\u30af\u30e9\u30b9.\n *\n * @param &lt;T&gt; \u8981\u7d20\u306e\u578b\n */\npublic class PageResult&lt;T&gt; {\n\n    private final List&lt;T&gt; content;\n    private final int pageNumber;\n    private final int pageSize;\n    private final long totalElements;\n    private final int totalPages;\n\n    public PageResult(List&lt;T&gt; content, int pageNumber, int pageSize, long totalElements) {\n        this.content = content;\n        this.pageNumber = pageNumber;\n        this.pageSize = pageSize;\n        this.totalElements = totalElements;\n        this.totalPages = pageSize &gt; 0 ? (int) Math.ceil((double) totalElements / pageSize) : 0;\n    }\n\n    public List&lt;T&gt; getContent() { return content; }\n    public int getPage() { return pageNumber; }\n    public int getSize() { return pageSize; }\n    public long getTotalElements() { return totalElements; }\n    public int getTotalPages() { return totalPages; }\n    public boolean hasNext() { return pageNumber &lt; totalPages - 1; }\n    public boolean hasPrevious() { return pageNumber &gt; 0; }\n    public boolean isFirst() { return pageNumber == 0; }\n    public boolean isLast() { return pageNumber &gt;= totalPages - 1; }\n    public int getNumber() { return pageNumber + 1; }\n\n    public static &lt;T&gt; PageResult&lt;T&gt; empty() {\n        return new PageResult&lt;&gt;(List.of(), 0, 10, 0);\n    }\n}\n</code></pre>"},{"location":"article/study/study2-1/#183-mybatis","title":"18.3 MyBatis \u30de\u30c3\u30d1\u30fc\u306e\u5b9f\u88c5","text":"<p>\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u7528\u306e SQL \u30af\u30a8\u30ea\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002<code>LIMIT</code> \u3068 <code>OFFSET</code> \u3092\u4f7f\u7528\u3057\u3066\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u3001<code>COUNT</code> \u3067\u7dcf\u4ef6\u6570\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002</p> \u30b3\u30fc\u30c9\u4f8b: ProductMapper.xml\uff08\u629c\u7c8b\uff09 <pre><code>&lt;select id=\"findWithPagination\" resultMap=\"ProductResultMap\"&gt;\n    SELECT * FROM \"\u5546\u54c1\u30de\u30b9\u30bf\"\n    &lt;where&gt;\n        &lt;if test=\"category != null and category != ''\"&gt;\n            \"\u5546\u54c1\u533a\u5206\" = #{category}::\u5546\u54c1\u533a\u5206\n        &lt;/if&gt;\n        &lt;if test=\"keyword != null and keyword != ''\"&gt;\n            AND (LOWER(\"\u5546\u54c1\u30b3\u30fc\u30c9\") LIKE LOWER('%' || #{keyword} || '%')\n                 OR LOWER(\"\u5546\u54c1\u540d\") LIKE LOWER('%' || #{keyword} || '%'))\n        &lt;/if&gt;\n    &lt;/where&gt;\n    ORDER BY \"\u5546\u54c1\u30b3\u30fc\u30c9\"\n    LIMIT #{limit} OFFSET #{offset}\n&lt;/select&gt;\n\n&lt;select id=\"count\" resultType=\"long\"&gt;\n    SELECT COUNT(*) FROM \"\u5546\u54c1\u30de\u30b9\u30bf\"\n    &lt;where&gt;\n        &lt;if test=\"category != null and category != ''\"&gt;\n            \"\u5546\u54c1\u533a\u5206\" = #{category}::\u5546\u54c1\u533a\u5206\n        &lt;/if&gt;\n        &lt;if test=\"keyword != null and keyword != ''\"&gt;\n            AND (LOWER(\"\u5546\u54c1\u30b3\u30fc\u30c9\") LIKE LOWER('%' || #{keyword} || '%')\n                 OR LOWER(\"\u5546\u54c1\u540d\") LIKE LOWER('%' || #{keyword} || '%'))\n        &lt;/if&gt;\n    &lt;/where&gt;\n&lt;/select&gt;\n</code></pre> \u30b3\u30fc\u30c9\u4f8b: ProductMapper.java <pre><code>@Mapper\npublic interface ProductMapper {\n    // \u65e2\u5b58\u306e\u30e1\u30bd\u30c3\u30c9...\n\n    List&lt;Product&gt; findWithPagination(\n            @Param(\"offset\") int offset,\n            @Param(\"limit\") int limit,\n            @Param(\"category\") String category,\n            @Param(\"keyword\") String keyword);\n\n    long count(@Param(\"category\") String category, @Param(\"keyword\") String keyword);\n}\n</code></pre>"},{"location":"article/study/study2-1/#184","title":"18.4 \u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u5b9f\u88c5","text":"<p>Output Port \u306b\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u7528\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> \u30b3\u30fc\u30c9\u4f8b: ProductRepository.java\uff08\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff09 <pre><code>public interface ProductRepository {\n    // \u65e2\u5b58\u306e\u30e1\u30bd\u30c3\u30c9...\n\n    /**\n     * \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u4ed8\u304d\u3067\u5546\u54c1\u3092\u53d6\u5f97.\n     */\n    PageResult&lt;Product&gt; findWithPagination(int page, int size, ProductCategory category, String keyword);\n}\n</code></pre> \u30b3\u30fc\u30c9\u4f8b: ProductRepositoryImpl.java\uff08\u5b9f\u88c5\uff09 <pre><code>@Override\npublic PageResult&lt;Product&gt; findWithPagination(int page, int size, ProductCategory category, String keyword) {\n    int offset = page * size;\n    String categoryName = category != null ? category.getDisplayName() : null;\n\n    List&lt;Product&gt; products = productMapper.findWithPagination(offset, size, categoryName, keyword);\n    long totalElements = productMapper.count(categoryName, keyword);\n\n    return new PageResult&lt;&gt;(products, page, size, totalElements);\n}\n</code></pre>"},{"location":"article/study/study2-1/#185","title":"18.5 \u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u3068\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":"<p>Input Port \u306b\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u7528\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> \u30b3\u30fc\u30c9\u4f8b: ProductUseCase.java <pre><code>public interface ProductUseCase {\n    // \u65e2\u5b58\u306e\u30e1\u30bd\u30c3\u30c9...\n\n    /**\n     * \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u4ed8\u304d\u3067\u5546\u54c1\u3092\u53d6\u5f97\u3059\u308b.\n     */\n    PageResult&lt;Product&gt; getProducts(int page, int size, ProductCategory category, String keyword);\n}\n</code></pre> \u30b3\u30fc\u30c9\u4f8b: ProductService.java <pre><code>@Override\n@Transactional(readOnly = true)\npublic PageResult&lt;Product&gt; getProducts(int page, int size, ProductCategory category, String keyword) {\n    return productRepository.findWithPagination(page, size, category, keyword);\n}\n</code></pre>"},{"location":"article/study/study2-1/#186-controller","title":"18.6 Controller \u306e\u5b9f\u88c5","text":"<p>\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u53d7\u3051\u53d6\u308a\u3001\u30d3\u30e5\u30fc\u306b\u30da\u30fc\u30b8\u60c5\u5831\u3092\u6e21\u3057\u307e\u3059\u3002</p> \u30b3\u30fc\u30c9\u4f8b: ProductWebController.java <pre><code>@Controller\n@RequestMapping(\"/products\")\npublic class ProductWebController {\n\n    private static final int DEFAULT_PAGE_SIZE = 10;\n\n    private final ProductUseCase productUseCase;\n    // ...\n\n    @GetMapping\n    public String list(\n            @RequestParam(defaultValue = \"0\") int page,\n            @RequestParam(defaultValue = \"10\") int size,\n            @RequestParam(required = false) ProductCategory category,\n            @RequestParam(required = false) String keyword,\n            Model model) {\n\n        PageResult&lt;Product&gt; productPage = productUseCase.getProducts(page, size, category, keyword);\n\n        model.addAttribute(\"products\", productPage.getContent());\n        model.addAttribute(\"page\", productPage);\n        model.addAttribute(\"categories\", ProductCategory.values());\n        model.addAttribute(\"selectedCategory\", category);\n        model.addAttribute(\"keyword\", keyword);\n        model.addAttribute(\"currentSize\", size);\n        return \"products/list\";\n    }\n}\n</code></pre>"},{"location":"article/study/study2-1/#187-thymeleaf","title":"18.7 Thymeleaf \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u5b9f\u88c5","text":"<p>Bootstrap \u306e\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u4f7f\u7528\u3057\u3066 UI \u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002</p> \u30b3\u30fc\u30c9\u4f8b: products/list.html\uff08\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u90e8\u5206\uff09 <pre><code>&lt;!-- \u691c\u7d22\u30d5\u30a9\u30fc\u30e0\u306b\u8868\u793a\u4ef6\u6570\u9078\u629e\u3092\u8ffd\u52a0 --&gt;\n&lt;div class=\"col-md-2\"&gt;\n    &lt;label class=\"form-label\"&gt;\u8868\u793a\u4ef6\u6570&lt;/label&gt;\n    &lt;select name=\"size\" class=\"form-select\"&gt;\n        &lt;option value=\"10\" th:selected=\"${currentSize == 10}\"&gt;10\u4ef6&lt;/option&gt;\n        &lt;option value=\"25\" th:selected=\"${currentSize == 25}\"&gt;25\u4ef6&lt;/option&gt;\n        &lt;option value=\"50\" th:selected=\"${currentSize == 50}\"&gt;50\u4ef6&lt;/option&gt;\n        &lt;option value=\"100\" th:selected=\"${currentSize == 100}\"&gt;100\u4ef6&lt;/option&gt;\n    &lt;/select&gt;\n&lt;/div&gt;\n\n&lt;!-- \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3 --&gt;\n&lt;div class=\"mt-3\"&gt;\n    &lt;div class=\"text-muted text-center mb-2\"&gt;\n        &lt;span th:if=\"${page.totalElements &gt; 0}\"&gt;\n            &lt;span th:text=\"${page.page * page.size + 1}\"&gt;1&lt;/span&gt; -\n            &lt;span th:text=\"${page.page * page.size + #lists.size(products)}\"&gt;10&lt;/span&gt; \u4ef6\n            \uff08\u5168 &lt;span th:text=\"${page.totalElements}\"&gt;0&lt;/span&gt; \u4ef6\uff09\n        &lt;/span&gt;\n        &lt;span th:if=\"${page.totalElements == 0}\"&gt;0 \u4ef6&lt;/span&gt;\n    &lt;/div&gt;\n\n    &lt;nav th:if=\"${page.totalPages &gt; 1}\" aria-label=\"\u30da\u30fc\u30b8\u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3\"&gt;\n        &lt;ul class=\"pagination justify-content-center mb-0\"&gt;\n            &lt;!-- \u6700\u521d\u306e\u30da\u30fc\u30b8\u3078 --&gt;\n            &lt;li class=\"page-item\" th:classappend=\"${page.first} ? 'disabled'\"&gt;\n                &lt;a class=\"page-link\" th:href=\"@{/products(page=0, size=${currentSize},\n                   category=${selectedCategory?.name()}, keyword=${keyword})}\"&gt;&amp;laquo;&lt;/a&gt;\n            &lt;/li&gt;\n            &lt;!-- \u524d\u306e\u30da\u30fc\u30b8\u3078 --&gt;\n            &lt;li class=\"page-item\" th:classappend=\"${!page.hasPrevious()} ? 'disabled'\"&gt;\n                &lt;a class=\"page-link\" th:href=\"@{/products(page=${page.page - 1},\n                   size=${currentSize}, category=${selectedCategory?.name()},\n                   keyword=${keyword})}\"&gt;&amp;lsaquo;&lt;/a&gt;\n            &lt;/li&gt;\n\n            &lt;!-- \u30da\u30fc\u30b8\u756a\u53f7 --&gt;\n            &lt;th:block th:with=\"startPage=${page.page &gt; 2 ? page.page - 2 : 0},\n                               endPage=${page.page + 2 &lt; page.totalPages - 1 ? page.page + 2 : page.totalPages - 1}\"&gt;\n                &lt;li class=\"page-item\" th:if=\"${startPage &gt; 0}\"&gt;\n                    &lt;span class=\"page-link\"&gt;...&lt;/span&gt;\n                &lt;/li&gt;\n                &lt;li th:each=\"i : ${#numbers.sequence(startPage, endPage)}\"\n                    class=\"page-item\"\n                    th:classappend=\"${i == page.page} ? 'active'\"&gt;\n                    &lt;a class=\"page-link\"\n                       th:href=\"@{/products(page=${i}, size=${currentSize},\n                          category=${selectedCategory?.name()}, keyword=${keyword})}\"\n                       th:text=\"${i + 1}\"&gt;1&lt;/a&gt;\n                &lt;/li&gt;\n                &lt;li class=\"page-item\" th:if=\"${endPage &lt; page.totalPages - 1}\"&gt;\n                    &lt;span class=\"page-link\"&gt;...&lt;/span&gt;\n                &lt;/li&gt;\n            &lt;/th:block&gt;\n\n            &lt;!-- \u6b21\u306e\u30da\u30fc\u30b8\u3078 --&gt;\n            &lt;li class=\"page-item\" th:classappend=\"${!page.hasNext()} ? 'disabled'\"&gt;\n                &lt;a class=\"page-link\" th:href=\"@{/products(page=${page.page + 1},\n                   size=${currentSize}, category=${selectedCategory?.name()},\n                   keyword=${keyword})}\"&gt;&amp;rsaquo;&lt;/a&gt;\n            &lt;/li&gt;\n            &lt;!-- \u6700\u5f8c\u306e\u30da\u30fc\u30b8\u3078 --&gt;\n            &lt;li class=\"page-item\" th:classappend=\"${page.last} ? 'disabled'\"&gt;\n                &lt;a class=\"page-link\" th:href=\"@{/products(page=${page.totalPages - 1},\n                   size=${currentSize}, category=${selectedCategory?.name()},\n                   keyword=${keyword})}\"&gt;&amp;raquo;&lt;/a&gt;\n            &lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/nav&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"article/study/study2-1/#188","title":"18.8 \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u306e\u8a2d\u8a08\u30dd\u30a4\u30f3\u30c8","text":"\u30dd\u30a4\u30f3\u30c8 \u8aac\u660e 0\u59cb\u307e\u308a vs 1\u59cb\u307e\u308a \u5185\u90e8\u3067\u306f0\u59cb\u307e\u308a\u3001\u8868\u793a\u3067\u306f1\u59cb\u307e\u308a\u3092\u4f7f\u7528 \u30c7\u30d5\u30a9\u30eb\u30c8\u5024 \u30da\u30fc\u30b8\u30b5\u30a4\u30ba\u306f 10 \u4ef6\u7a0b\u5ea6\u304c\u4e00\u822c\u7684 \u691c\u7d22\u6761\u4ef6\u306e\u4fdd\u6301 \u30da\u30fc\u30b8\u9077\u79fb\u6642\u3082\u691c\u7d22\u6761\u4ef6\uff08\u30ab\u30c6\u30b4\u30ea\u3001\u30ad\u30fc\u30ef\u30fc\u30c9\uff09\u3092\u4fdd\u6301 \u30da\u30fc\u30b8\u756a\u53f7\u306e\u7701\u7565 \u5927\u91cf\u30da\u30fc\u30b8\u306e\u5834\u5408\u306f\u300c...\u300d\u3067\u7701\u7565 SQL \u6700\u9069\u5316 OFFSET \u304c\u5927\u304d\u3044\u5834\u5408\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306b\u6ce8\u610f"},{"location":"article/study/study2-1/#189","title":"18.9 \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8003\u616e\u4e8b\u9805","text":"<p>\u5927\u91cf\u30c7\u30fc\u30bf\u306e\u5834\u5408\u306f\u3001OFFSET \u30d9\u30fc\u30b9\u3067\u306f\u306a\u304f Keyset Pagination\uff08\u30ab\u30fc\u30bd\u30eb\u65b9\u5f0f\uff09\u3092\u691c\u8a0e\u3057\u307e\u3059\uff1a</p> <pre><code>-- OFFSET \u65b9\u5f0f\uff08\u975e\u52b9\u7387\uff09\nSELECT * FROM products ORDER BY product_code LIMIT 10 OFFSET 100000;\n\n-- Keyset Pagination\uff08\u52b9\u7387\u7684\uff09\nSELECT * FROM products\nWHERE product_code &gt; 'LAST_SEEN_CODE'\nORDER BY product_code\nLIMIT 10;\n</code></pre>"},{"location":"article/study/study2-1/#10-b","title":"\u7b2c10\u90e8-B \u306e\u307e\u3068\u3081","text":""},{"location":"article/study/study2-1/#api","title":"API \u30b5\u30fc\u30d0\u30fc\u7248\u3068\u306e\u6bd4\u8f03","text":"\u89b3\u70b9 API \u30b5\u30fc\u30d0\u30fc\u7248 \u30e2\u30ce\u30ea\u30b9\u7248 \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3 \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u5206\u96e2\uff08SPA\uff09 \u7d71\u5408\uff08Thymeleaf\uff09 \u901a\u4fe1 REST API\uff08JSON\uff09 \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\uff08HTML\uff09 \u72b6\u614b\u7ba1\u7406 \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\uff08localStorage \u7b49\uff09 \u30b5\u30fc\u30d0\u30fc\u5074\uff08\u30bb\u30c3\u30b7\u30e7\u30f3\uff09 \u90e8\u5206\u66f4\u65b0 JavaScript\uff08Axios \u7b49\uff09 htmx \u5e33\u7968\u51fa\u529b API \u7d4c\u7531\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 \u76f4\u63a5\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 \u8a8d\u8a3c JWT/OAuth \u30bb\u30c3\u30b7\u30e7\u30f3\u30d9\u30fc\u30b9 \u8907\u96d1\u3055 \u9ad8\uff08API \u8a2d\u8a08\u3001CORS \u7b49\uff09 \u4f4e\uff08\u30b7\u30f3\u30d7\u30eb\uff09 \u958b\u767a\u901f\u5ea6 \u521d\u671f\u306f\u9045\u3044 \u521d\u671f\u306f\u901f\u3044"},{"location":"article/study/study2-1/#_2","title":"\u5b9f\u88c5\u3057\u305f\u6a5f\u80fd","text":"\u30ab\u30c6\u30b4\u30ea \u6a5f\u80fd \u5546\u54c1\u30de\u30b9\u30bf \u4e00\u89a7\u3001\u8a73\u7d30\u3001\u767b\u9332\u3001\u7de8\u96c6\u3001\u524a\u9664\u3001\u691c\u7d22\u3001\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3 \u53d6\u5f15\u5148\u30de\u30b9\u30bf \u4e00\u89a7\u3001\u8a73\u7d30\uff08\u53d6\u5f15\u5c65\u6b74\uff09\u3001\u767b\u9332\u3001\u7de8\u96c6\u3001\u524a\u9664\u3001\u691c\u7d22 \u53d7\u6ce8 \u4e00\u89a7\u3001\u767b\u9332\uff08\u52d5\u7684\u660e\u7d30\uff09\u3001\u78ba\u5b9a\u3001\u53d6\u6d88 \u51fa\u8377 \u4e00\u89a7\u3001\u51fa\u8377\u6307\u793a\u3001\u51fa\u8377\u5b9f\u884c\u3001\u53d6\u6d88 \u8acb\u6c42 \u4e00\u89a7\u3001\u7de0\u51e6\u7406\u3001\u8acb\u6c42\u66f8\u767a\u884c \u5165\u91d1 \u4e00\u89a7\u3001\u5165\u91d1\u767b\u9332\u3001\u6d88\u8fbc\u51e6\u7406 \u5e33\u7968 Excel/PDF \u51fa\u529b \u5171\u901a \u30ec\u30a4\u30a2\u30a6\u30c8\u3001\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3001\u30d5\u30e9\u30c3\u30b7\u30e5\u30e1\u30c3\u30bb\u30fc\u30b8\u3001\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3"},{"location":"article/study/study2-1/#_3","title":"\u6280\u8853\u30b9\u30bf\u30c3\u30af","text":"\u30ab\u30c6\u30b4\u30ea \u6280\u8853 \u8a00\u8a9e Java 21 \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af Spring Boot 3.4 \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8 Thymeleaf \u90e8\u5206\u66f4\u65b0 htmx CSS Bootstrap 5 ORM MyBatis \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9 PostgreSQL 16 Excel Apache POI PDF iText7 \u30c6\u30b9\u30c8 JUnit 5, TestContainers"},{"location":"article/study/study2-1/#_4","title":"\u30e2\u30ce\u30ea\u30b9\u3092\u9078\u629e\u3059\u3079\u304d\u5834\u9762","text":"<ol> <li>\u793e\u5185\u30b7\u30b9\u30c6\u30e0: \u9650\u3089\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u3001SEO \u4e0d\u8981</li> <li>\u696d\u52d9\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3: \u8907\u96d1\u306a\u696d\u52d9\u30d5\u30ed\u30fc</li> <li>\u5c0f\u898f\u6a21\u30c1\u30fc\u30e0: \u30d5\u30eb\u30b9\u30bf\u30c3\u30af\u958b\u767a</li> <li>\u8fc5\u901f\u306a\u958b\u767a: MVP\u3001\u30d7\u30ed\u30c8\u30bf\u30a4\u30d7</li> <li>\u904b\u7528\u30b3\u30b9\u30c8\u91cd\u8996: \u30b7\u30f3\u30d7\u30eb\u306a\u30a4\u30f3\u30d5\u30e9</li> </ol> <p>\u30e2\u30ce\u30ea\u30b9\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306f\u6c7a\u3057\u3066\u300c\u53e4\u3044\u300d\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u9069\u5207\u306a\u5834\u9762\u3067\u9078\u629e\u3059\u308b\u3053\u3068\u3067\u3001\u30b7\u30f3\u30d7\u30eb\u304b\u3064\u52b9\u7387\u7684\u306a\u30b7\u30b9\u30c6\u30e0\u958b\u767a\u304c\u53ef\u80fd\u3067\u3059\u3002</p>"},{"location":"article/study/study2-2/","title":"\u5b9f\u8df5\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\uff1a\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 \u7814\u7a76 2 - JavaFX \u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5b9f\u88c5","text":""},{"location":"article/study/study2-2/#_1","title":"\u306f\u3058\u3081\u306b","text":"<p>\u672c\u7814\u7a76\u3067\u306f\u3001API \u30b5\u30fc\u30d0\u30fc\u69cb\u6210\uff08\u7b2c13\u7ae0\uff09\u3084\u30e2\u30ce\u30ea\u30b9\u30b5\u30fc\u30d3\u30b9\uff08\u7814\u7a76 1\uff09\u3068\u306f\u7570\u306a\u308b\u30a2\u30d7\u30ed\u30fc\u30c1\u3068\u3057\u3066\u3001JavaFX \u306b\u3088\u308b\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002FXML \u306b\u3088\u308b\u5ba3\u8a00\u7684 UI \u5b9a\u7fa9\u3068\u3001\u30c7\u30fc\u30bf\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u306b\u3088\u308b\u30ea\u30a2\u30af\u30c6\u30a3\u30d6\u306a\u753b\u9762\u66f4\u65b0\u3092\u6d3b\u7528\u3057\u305f\u3001\u696d\u52d9\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002</p> <p>\u7814\u7a76 1 \u3067\u69cb\u7bc9\u3057\u305f\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u30c9\u30e1\u30a4\u30f3\u5c64\u30fb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff09\u306f\u305d\u306e\u307e\u307e\u5171\u6709\u3057\u3001Input Adapter \u3068\u3057\u3066 JavaFX \u306e Controller/ViewModel \u5c64\u306e\u307f\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p>"},{"location":"article/study/study2-2/#14javafx","title":"\u7b2c14\u7ae0\uff1aJavaFX \u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u57fa\u790e","text":""},{"location":"article/study/study2-2/#141-javafx","title":"14.1 JavaFX \u3068\u306f","text":"<p>JavaFX \u306f Java \u306e\u30ea\u30c3\u30c1\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3067\u3059\u3002Swing \u306e\u5f8c\u7d99\u3068\u3057\u3066\u4f4d\u7f6e\u3065\u3051\u3089\u308c\u3001\u30e2\u30c0\u30f3\u306a UI \u69cb\u7bc9\u304c\u53ef\u80fd\u3067\u3059\u3002</p> <p></p> <p>Web \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3068\u306e\u6bd4\u8f03\uff1a</p> \u7279\u5fb4 Web \u30a2\u30d7\u30ea\uff08REST API\uff09 JavaFX \u30c7\u30b9\u30af\u30c8\u30c3\u30d7 \u914d\u7f6e \u30b5\u30fc\u30d0\u30fc + \u30d6\u30e9\u30a6\u30b6 \u30ed\u30fc\u30ab\u30eb\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \u30aa\u30d5\u30e9\u30a4\u30f3 \u4e0d\u53ef \u53ef\u80fd\uff08\u30ed\u30fc\u30ab\u30eb DB\uff09 \u30ec\u30b9\u30dd\u30f3\u30b9 \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u4f9d\u5b58 \u9ad8\u901f UI \u81ea\u7531\u5ea6 HTML/CSS \u5236\u7d04 \u30cd\u30a4\u30c6\u30a3\u30d6\u5236\u5fa1 \u5370\u5237\u6a5f\u80fd \u5236\u9650\u3042\u308a \u9ad8\u6a5f\u80fd \u66f4\u65b0\u914d\u5e03 \u81ea\u52d5 \u624b\u52d5/\u81ea\u52d5\u66f4\u65b0"},{"location":"article/study/study2-2/#142-mvvm","title":"14.2 MVVM \u30d1\u30bf\u30fc\u30f3\u306e\u63a1\u7528","text":"<p>JavaFX \u3067\u306f\u3001MVVM\uff08Model-View-ViewModel\uff09 \u30d1\u30bf\u30fc\u30f3\u3092\u63a1\u7528\u3057\u3001UI \u3068\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3092\u5206\u96e2\u3057\u307e\u3059\u3002</p> <p></p> <p>\u5404\u5c64\u306e\u8cac\u52d9\uff1a</p> \u5c64 \u8cac\u52d9 JavaFX \u3067\u306e\u5b9f\u88c5 View UI \u8868\u793a\u30fb\u30e6\u30fc\u30b6\u30fc\u5165\u529b FXML + Controller ViewModel \u753b\u9762\u72b6\u614b\u7ba1\u7406\u30fb\u5909\u63db Property, ObservableList Model \u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af UseCase, Repository"},{"location":"article/study/study2-2/#143","title":"14.3 \u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3068\u306e\u7d71\u5408","text":"<p>JavaFX \u3092\u5c0e\u5165\u3057\u3066\u3082\u3001\u65e2\u5b58\u306e\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u30c9\u30e1\u30a4\u30f3\u5c64\u30fb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff09\u306f\u305d\u306e\u307e\u307e\u5171\u6709\u3057\u3001Input Adapter \u3068\u3057\u3066 JavaFX \u306e Controller/ViewModel \u5c64\u306e\u307f\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> <p></p> <p>JavaFX \u3067\u3082\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u7dad\u6301\u3059\u308b\u7406\u7531\uff1a</p> <ol> <li>\u518d\u5229\u7528\u6027: \u65e2\u5b58\u306e UseCase/Repository \u3092\u305d\u306e\u307e\u307e\u6d3b\u7528</li> <li>\u4e26\u884c\u904b\u7528: REST API \u3068 JavaFX \u306e\u4e21\u65b9\u3092\u63d0\u4f9b\u53ef\u80fd</li> <li>\u30c6\u30b9\u30c8\u5bb9\u6613\u6027: \u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\u306f UI \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306b\u4f9d\u5b58\u3057\u306a\u3044</li> <li>\u79fb\u884c\u5bb9\u6613\u6027: \u6bb5\u968e\u7684\u306b Web \u304b\u3089\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u3078\u79fb\u884c\u53ef\u80fd</li> </ol>"},{"location":"article/study/study2-2/#144","title":"14.4 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210","text":"<p>\u65e2\u5b58\u306e\u69cb\u6210\u306b <code>infrastructure/in/javafx/</code> \u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> <pre><code>apps/sms/backend/src/main/java/com/example/sms/\n\u251c\u2500\u2500 domain/                       # \u30c9\u30e1\u30a4\u30f3\u5c64\uff08API\u7248\u3068\u5171\u901a\uff09\n\u2502   \u251c\u2500\u2500 model/\n\u2502   \u2502   \u251c\u2500\u2500 product/\n\u2502   \u2502   \u251c\u2500\u2500 partner/\n\u2502   \u2502   \u251c\u2500\u2500 sales/\n\u2502   \u2502   \u2514\u2500\u2500 invoice/\n\u2502   \u2514\u2500\u2500 exception/\n\u2502\n\u251c\u2500\u2500 application/                  # \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff08API\u7248\u3068\u5171\u901a\uff09\n\u2502   \u251c\u2500\u2500 port/\n\u2502   \u2502   \u251c\u2500\u2500 in/                  # Input Port\uff08\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\uff09\n\u2502   \u2502   \u2514\u2500\u2500 out/                 # Output Port\uff08\u30ea\u30dd\u30b8\u30c8\u30ea\uff09\n\u2502   \u2514\u2500\u2500 service/\n\u2502\n\u251c\u2500\u2500 infrastructure/\n\u2502   \u251c\u2500\u2500 out/\n\u2502   \u2502   \u2514\u2500\u2500 persistence/         # Output Adapter\uff08DB\u5b9f\u88c5\uff09- \u65e2\u5b58\n\u2502   \u2502       \u251c\u2500\u2500 mapper/\n\u2502   \u2502       \u2514\u2500\u2500 repository/\n\u2502   \u251c\u2500\u2500 in/\n\u2502   \u2502   \u251c\u2500\u2500 rest/                # Input Adapter\uff08REST\u5b9f\u88c5\uff09- \u65e2\u5b58\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 controller/\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 dto/\n\u2502   \u2502   \u2514\u2500\u2500 javafx/              # Input Adapter\uff08JavaFX\u5b9f\u88c5\uff09- \u65b0\u898f\u8ffd\u52a0\n\u2502   \u2502       \u251c\u2500\u2500 controller/      # FXML Controller\n\u2502   \u2502       \u251c\u2500\u2500 viewmodel/       # ViewModel\n\u2502   \u2502       \u251c\u2500\u2500 view/            # \u753b\u9762\u8868\u793a\u7528\u306e\u884c\u30e2\u30c7\u30eb\n\u2502   \u2502       \u251c\u2500\u2500 dialog/          # \u30c0\u30a4\u30a2\u30ed\u30b0\n\u2502   \u2502       \u251c\u2500\u2500 util/            # \u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\n\u2502   \u2502       \u2514\u2500\u2500 config/          # JavaFX \u8a2d\u5b9a\n\u2502\n\u2514\u2500\u2500 Application.java              # Spring Boot + JavaFX \u8d77\u52d5\u30af\u30e9\u30b9\n\napps/sms/backend/src/main/resources/\n\u251c\u2500\u2500 fxml/                         # FXML \u30d5\u30a1\u30a4\u30eb\n\u2502   \u251c\u2500\u2500 main.fxml\n\u2502   \u251c\u2500\u2500 product/\n\u2502   \u2502   \u251c\u2500\u2500 product-list.fxml\n\u2502   \u2502   \u2514\u2500\u2500 product-edit.fxml\n\u2502   \u251c\u2500\u2500 order/\n\u2502   \u2502   \u251c\u2500\u2500 order-list.fxml\n\u2502   \u2502   \u2514\u2500\u2500 order-entry.fxml\n\u2502   \u2514\u2500\u2500 common/\n\u2502       \u251c\u2500\u2500 login.fxml\n\u2502       \u2514\u2500\u2500 error-dialog.fxml\n\u2502\n\u251c\u2500\u2500 css/                          # \u30b9\u30bf\u30a4\u30eb\u30b7\u30fc\u30c8\n\u2502   \u251c\u2500\u2500 application.css\n\u2502   \u2514\u2500\u2500 theme/\n\u2502\n\u251c\u2500\u2500 images/                       # \u753b\u50cf\u30ea\u30bd\u30fc\u30b9\n\u2502\n\u2514\u2500\u2500 reports/                      # JasperReports \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\n    \u251c\u2500\u2500 invoice.jrxml\n    \u2514\u2500\u2500 delivery-slip.jrxml\n</code></pre>"},{"location":"article/study/study2-2/#145","title":"14.5 \u6280\u8853\u30b9\u30bf\u30c3\u30af\u306e\u8ffd\u52a0","text":""},{"location":"article/study/study2-2/#buildgradlekts","title":"build.gradle.kts\uff08\u5dee\u5206\uff09","text":"\u30b3\u30fc\u30c9\u4f8b: build.gradle.kts <pre><code>plugins {\n    // \u65e2\u5b58\u306e\u30d7\u30e9\u30b0\u30a4\u30f3...\n    id(\"org.openjfx.javafxplugin\") version \"0.1.0\"  // \u8ffd\u52a0\n}\n\n// JavaFX \u8a2d\u5b9a\njavafx {\n    version = \"21\"\n    modules = listOf(\n        \"javafx.controls\",\n        \"javafx.fxml\",\n        \"javafx.graphics\",\n        \"javafx.swing\"  // JasperReports \u9023\u643a\u7528\n    )\n}\n\ndependencies {\n    // \u65e2\u5b58\u306e\u4f9d\u5b58\u95a2\u4fc2\uff08Spring Boot, MyBatis, PostgreSQL\u7b49\uff09\u306f\u305d\u306e\u307e\u307e\n\n    // JavaFX \u95a2\u9023\u3092\u8ffd\u52a0\n    implementation(\"org.controlsfx:controlsfx:11.2.0\")           // \u62e1\u5f35\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\n    implementation(\"com.dlsc.formsfx:formsfx-core:11.6.0\")        // \u30d5\u30a9\u30fc\u30e0\u751f\u6210\n    implementation(\"org.kordamp.ikonli:ikonli-javafx:12.3.1\")     // \u30a2\u30a4\u30b3\u30f3\n    implementation(\"org.kordamp.ikonli:ikonli-fontawesome5-pack:12.3.1\")\n\n    // JasperReports\uff08\u5e33\u7968\u51fa\u529b\uff09\n    implementation(\"net.sf.jasperreports:jasperreports:6.20.6\")\n\n    // Excel \u51fa\u529b\n    implementation(\"org.apache.poi:poi-ooxml:5.2.5\")\n\n    // TestFX\uff08UI \u30c6\u30b9\u30c8\uff09\n    testImplementation(\"org.testfx:testfx-core:4.0.18\")\n    testImplementation(\"org.testfx:testfx-junit5:4.0.18\")\n}\n</code></pre> <p>\u8ffd\u52a0\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u8aac\u660e\uff1a</p> \u30d1\u30c3\u30b1\u30fc\u30b8 \u7528\u9014 javafx.controls \u6a19\u6e96 UI \u30b3\u30f3\u30c8\u30ed\u30fc\u30eb javafx.fxml FXML \u30d1\u30fc\u30b5\u30fc ControlsFX \u62e1\u5f35\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\uff08SearchableComboBox\u7b49\uff09 Ikonli \u30a2\u30a4\u30b3\u30f3\u30d5\u30a9\u30f3\u30c8 JasperReports \u5e33\u7968\u51fa\u529b Apache POI Excel \u51fa\u529b TestFX UI \u81ea\u52d5\u30c6\u30b9\u30c8"},{"location":"article/study/study2-2/#146-spring-boot-javafx","title":"14.6 Spring Boot + JavaFX \u7d71\u5408","text":""},{"location":"article/study/study2-2/#javafxapplicationjava","title":"JavaFxApplication.java","text":"\u30b3\u30fc\u30c9\u4f8b: JavaFxApplication.java <pre><code>package com.example.sms.infrastructure.in.javafx;\n\nimport javafx.application.Application;\nimport javafx.application.Platform;\nimport javafx.stage.Stage;\nimport org.springframework.boot.builder.SpringApplicationBuilder;\nimport org.springframework.context.ConfigurableApplicationContext;\n\n/**\n * JavaFX \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30a8\u30f3\u30c8\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\n * Spring Boot \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3068 JavaFX \u3092\u7d71\u5408\n */\npublic class JavaFxApplication extends Application {\n\n    private ConfigurableApplicationContext springContext;\n\n    @Override\n    public void init() {\n        springContext = new SpringApplicationBuilder(SmsApplication.class).run();\n    }\n\n    @Override\n    public void start(Stage primaryStage) {\n        StageManager stageManager = springContext.getBean(StageManager.class);\n        stageManager.setPrimaryStage(primaryStage);\n        stageManager.switchScene(FxmlView.MAIN);\n    }\n\n    @Override\n    public void stop() {\n        springContext.close();\n        Platform.exit();\n    }\n}\n</code></pre>"},{"location":"article/study/study2-2/#stagemanagerjava","title":"StageManager.java","text":"\u30b3\u30fc\u30c9\u4f8b: StageManager.java <pre><code>package com.example.sms.infrastructure.in.javafx.config;\n\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Parent;\nimport javafx.scene.Scene;\nimport javafx.stage.Stage;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.stereotype.Component;\n\nimport java.io.IOException;\nimport java.util.Objects;\n\n/**\n * JavaFX Stage/Scene \u306e\u7ba1\u7406\n */\n@Component\npublic class StageManager {\n\n    private final ApplicationContext applicationContext;\n    private Stage primaryStage;\n\n    public StageManager(ApplicationContext applicationContext) {\n        this.applicationContext = applicationContext;\n    }\n\n    public void setPrimaryStage(Stage primaryStage) {\n        this.primaryStage = primaryStage;\n    }\n\n    public void switchScene(FxmlView view) {\n        Parent root = loadView(view.getFxmlPath());\n        Scene scene = new Scene(root);\n\n        scene.getStylesheets().add(\n            Objects.requireNonNull(\n                getClass().getResource(\"/css/application.css\")\n            ).toExternalForm()\n        );\n\n        primaryStage.setTitle(view.getTitle());\n        primaryStage.setScene(scene);\n        primaryStage.centerOnScreen();\n\n        if (!primaryStage.isShowing()) {\n            primaryStage.show();\n        }\n    }\n\n    private Parent loadView(String fxmlPath) {\n        try {\n            FXMLLoader loader = new FXMLLoader(getClass().getResource(fxmlPath));\n            loader.setControllerFactory(applicationContext::getBean);\n            return loader.load();\n        } catch (IOException e) {\n            throw new RuntimeException(\"FXML \u30ed\u30fc\u30c9\u30a8\u30e9\u30fc: \" + fxmlPath, e);\n        }\n    }\n\n    public ApplicationContext getApplicationContext() {\n        return applicationContext;\n    }\n}\n</code></pre>"},{"location":"article/study/study2-2/#fxmlviewjava","title":"FxmlView.java\uff08\u753b\u9762\u5b9a\u7fa9\uff09","text":"\u30b3\u30fc\u30c9\u4f8b: FxmlView.java <pre><code>package com.example.sms.infrastructure.in.javafx.config;\n\npublic enum FxmlView {\n\n    MAIN(\"/fxml/main.fxml\", \"\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\"),\n    PRODUCT_LIST(\"/fxml/product/product-list.fxml\", \"\u5546\u54c1\u30de\u30b9\u30bf\"),\n    ORDER_ENTRY(\"/fxml/order/order-entry.fxml\", \"\u53d7\u6ce8\u5165\u529b\"),\n    ORDER_LIST(\"/fxml/order/order-list.fxml\", \"\u53d7\u6ce8\u4e00\u89a7\"),\n    SHIPMENT_LIST(\"/fxml/shipment/shipment-list.fxml\", \"\u51fa\u8377\u4e00\u89a7\"),\n    INVOICE_LIST(\"/fxml/invoice/invoice-list.fxml\", \"\u8acb\u6c42\u4e00\u89a7\");\n\n    private final String fxmlPath;\n    private final String title;\n\n    FxmlView(String fxmlPath, String title) {\n        this.fxmlPath = fxmlPath;\n        this.title = title;\n    }\n\n    public String getFxmlPath() { return fxmlPath; }\n    public String getTitle() { return title; }\n}\n</code></pre>"},{"location":"article/study/study2-2/#147-javafx-property","title":"14.7 JavaFX Property \u306e\u6d3b\u7528","text":"<p>JavaFX \u306e Property \u6a5f\u80fd\u3092\u4f7f\u3063\u3066\u3001UI \u3068\u30c7\u30fc\u30bf\u306e\u53cc\u65b9\u5411\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u3092\u5b9f\u73fe\u3057\u307e\u3059\u3002</p>"},{"location":"article/study/study2-2/#productrowjavaview","title":"ProductRow.java\uff08View \u7528\u30c7\u30fc\u30bf\u30af\u30e9\u30b9\uff09","text":"\u30b3\u30fc\u30c9\u4f8b: ProductRow.java <pre><code>package com.example.sms.infrastructure.in.javafx.view;\n\nimport javafx.beans.property.*;\nimport java.math.BigDecimal;\n\n/**\n * \u5546\u54c1\u30de\u30b9\u30bf\u753b\u9762\u7528\u306e\u884c\u30e2\u30c7\u30eb\n */\npublic class ProductRow {\n\n    private final StringProperty productCode = new SimpleStringProperty();\n    private final StringProperty productName = new SimpleStringProperty();\n    private final StringProperty categoryName = new SimpleStringProperty();\n    private final ObjectProperty&lt;BigDecimal&gt; unitPrice = new SimpleObjectProperty&lt;&gt;();\n    private final BooleanProperty discontinued = new SimpleBooleanProperty();\n\n    // Property \u30a2\u30af\u30bb\u30b5\n    public StringProperty productCodeProperty() { return productCode; }\n    public StringProperty productNameProperty() { return productName; }\n    public StringProperty categoryNameProperty() { return categoryName; }\n    public ObjectProperty&lt;BigDecimal&gt; unitPriceProperty() { return unitPrice; }\n    public BooleanProperty discontinuedProperty() { return discontinued; }\n\n    // Getter/Setter\n    public String getProductCode() { return productCode.get(); }\n    public void setProductCode(String value) { productCode.set(value); }\n\n    public String getProductName() { return productName.get(); }\n    public void setProductName(String value) { productName.set(value); }\n\n    public BigDecimal getUnitPrice() { return unitPrice.get(); }\n    public void setUnitPrice(BigDecimal value) { unitPrice.set(value); }\n}\n</code></pre>"},{"location":"article/study/study2-2/#productviewmodeljava","title":"ProductViewModel.java","text":"\u30b3\u30fc\u30c9\u4f8b: ProductViewModel.java <pre><code>package com.example.sms.infrastructure.in.javafx.viewmodel;\n\nimport com.example.sms.application.port.in.ProductUseCase;\nimport com.example.sms.domain.model.product.Product;\nimport com.example.sms.infrastructure.in.javafx.view.ProductRow;\nimport javafx.beans.property.*;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport org.springframework.stereotype.Component;\n\nimport java.util.List;\n\n@Component\npublic class ProductViewModel {\n\n    private final ProductUseCase productUseCase;\n\n    private final ObservableList&lt;ProductRow&gt; products = FXCollections.observableArrayList();\n    private final ObjectProperty&lt;ProductRow&gt; selectedProduct = new SimpleObjectProperty&lt;&gt;();\n    private final StringProperty searchKeyword = new SimpleStringProperty(\"\");\n    private final BooleanProperty loading = new SimpleBooleanProperty(false);\n    private final StringProperty errorMessage = new SimpleStringProperty();\n\n    public ProductViewModel(ProductUseCase productUseCase) {\n        this.productUseCase = productUseCase;\n    }\n\n    public void search() {\n        loading.set(true);\n        errorMessage.set(null);\n\n        try {\n            List&lt;Product&gt; result = searchKeyword.get().isBlank()\n                ? productUseCase.findAll()\n                : productUseCase.searchByKeyword(searchKeyword.get());\n\n            products.clear();\n            result.forEach(p -&gt; products.add(toRow(p)));\n        } catch (Exception e) {\n            errorMessage.set(\"\u691c\u7d22\u30a8\u30e9\u30fc: \" + e.getMessage());\n        } finally {\n            loading.set(false);\n        }\n    }\n\n    public void delete(String productCode) {\n        loading.set(true);\n        try {\n            productUseCase.delete(productCode);\n            products.removeIf(row -&gt; row.getProductCode().equals(productCode));\n        } catch (Exception e) {\n            errorMessage.set(\"\u524a\u9664\u30a8\u30e9\u30fc: \" + e.getMessage());\n            throw e;\n        } finally {\n            loading.set(false);\n        }\n    }\n\n    public ObservableList&lt;ProductRow&gt; getProducts() { return products; }\n    public StringProperty searchKeywordProperty() { return searchKeyword; }\n    public BooleanProperty loadingProperty() { return loading; }\n\n    private ProductRow toRow(Product product) {\n        ProductRow row = new ProductRow();\n        row.setProductCode(product.getProductCode());\n        row.setProductName(product.getProductName());\n        row.setUnitPrice(product.getUnitPrice());\n        return row;\n    }\n}\n</code></pre>"},{"location":"article/study/study2-2/#15","title":"\u7b2c15\u7ae0\uff1a\u30de\u30b9\u30bf\u306e\u5b9f\u88c5","text":""},{"location":"article/study/study2-2/#151","title":"15.1 \u5546\u54c1\u30de\u30b9\u30bf\u753b\u9762\u306e\u8a2d\u8a08","text":""},{"location":"article/study/study2-2/#152-tdd","title":"15.2 \u5546\u54c1\u30de\u30b9\u30bf\u4e00\u89a7\u753b\u9762\u306e TDD \u5b9f\u88c5","text":""},{"location":"article/study/study2-2/#red","title":"Red: \u5931\u6557\u3059\u308b\u30c6\u30b9\u30c8\u3092\u66f8\u304f","text":"\u30b3\u30fc\u30c9\u4f8b: ProductListControllerTest.java <pre><code>@ExtendWith({ApplicationExtension.class, MockitoExtension.class})\n@DisplayName(\"\u5546\u54c1\u30de\u30b9\u30bf\u4e00\u89a7\u753b\u9762\")\nclass ProductListControllerTest {\n\n    @Mock\n    private ProductUseCase productUseCase;\n\n    private ProductViewModel viewModel;\n\n    @Start\n    void start(Stage stage) throws Exception {\n        viewModel = new ProductViewModel(productUseCase);\n        var controller = new ProductListController(viewModel);\n\n        var loader = new FXMLLoader(getClass().getResource(\"/fxml/product/product-list.fxml\"));\n        loader.setController(controller);\n        stage.setScene(new Scene(loader.load()));\n        stage.show();\n    }\n\n    @Test\n    @DisplayName(\"\u5546\u54c1\u4e00\u89a7\u304c\u30c6\u30fc\u30d6\u30eb\u306b\u8868\u793a\u3055\u308c\u308b\")\n    void shouldDisplayProductsInTable(FxRobot robot) {\n        // Arrange\n        when(productUseCase.findAll()).thenReturn(List.of(\n            createProduct(\"P001\", \"\u30c6\u30b9\u30c8\u5546\u54c1A\", new BigDecimal(\"500\")),\n            createProduct(\"P002\", \"\u30c6\u30b9\u30c8\u5546\u54c1B\", new BigDecimal(\"800\"))\n        ));\n\n        // Act\n        robot.interact(() -&gt; viewModel.search());\n\n        // Assert\n        TableView&lt;ProductRow&gt; table = robot.lookup(\"#productTable\").queryTableView();\n        assertThat(table.getItems()).hasSize(2);\n        assertThat(table.getItems().get(0).getProductCode()).isEqualTo(\"P001\");\n    }\n\n    @Test\n    @DisplayName(\"\u30ad\u30fc\u30ef\u30fc\u30c9\u3067\u5546\u54c1\u3092\u691c\u7d22\u3067\u304d\u308b\")\n    void shouldSearchProductsByKeyword(FxRobot robot) {\n        when(productUseCase.searchByKeyword(\"\u30c6\u30b9\u30c8\")).thenReturn(List.of(\n            createProduct(\"P001\", \"\u30c6\u30b9\u30c8\u5546\u54c1A\", new BigDecimal(\"500\"))\n        ));\n\n        robot.clickOn(\"#searchField\").write(\"\u30c6\u30b9\u30c8\").type(KeyCode.ENTER);\n\n        TableView&lt;ProductRow&gt; table = robot.lookup(\"#productTable\").queryTableView();\n        assertThat(table.getItems()).hasSize(1);\n    }\n}\n</code></pre>"},{"location":"article/study/study2-2/#product-listfxml","title":"product-list.fxml","text":"\u30b3\u30fc\u30c9\u4f8b: product-list.fxml <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;?import javafx.scene.control.*?&gt;\n&lt;?import javafx.scene.layout.*?&gt;\n&lt;?import org.kordamp.ikonli.javafx.FontIcon?&gt;\n\n&lt;VBox xmlns=\"http://javafx.com/javafx/21\"\n      xmlns:fx=\"http://javafx.com/fxml/1\"\n      fx:controller=\"com.example.sms.infrastructure.in.javafx.controller.ProductListController\"\n      spacing=\"10\"&gt;\n\n    &lt;!-- \u30c4\u30fc\u30eb\u30d0\u30fc --&gt;\n    &lt;HBox spacing=\"10\" alignment=\"CENTER_LEFT\"&gt;\n        &lt;TextField fx:id=\"searchField\" promptText=\"\u5546\u54c1\u30b3\u30fc\u30c9\u30fb\u5546\u54c1\u540d\u3067\u691c\u7d22\" prefWidth=\"300\"/&gt;\n        &lt;Button onAction=\"#onSearch\"&gt;\n            &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-search\"/&gt;&lt;/graphic&gt;\n        &lt;/Button&gt;\n        &lt;Pane HBox.hgrow=\"ALWAYS\"/&gt;\n        &lt;Button fx:id=\"newButton\" text=\"\u65b0\u898f\" styleClass=\"primary\" onAction=\"#onNew\"&gt;\n            &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-plus\"/&gt;&lt;/graphic&gt;\n        &lt;/Button&gt;\n        &lt;Button fx:id=\"editButton\" text=\"\u7de8\u96c6\" onAction=\"#onEdit\" disable=\"true\"/&gt;\n        &lt;Button fx:id=\"deleteButton\" text=\"\u524a\u9664\" styleClass=\"danger\" onAction=\"#onDelete\" disable=\"true\"/&gt;\n        &lt;Button text=\"Excel\u51fa\u529b\" onAction=\"#onExportExcel\"&gt;\n            &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-file-excel\"/&gt;&lt;/graphic&gt;\n        &lt;/Button&gt;\n    &lt;/HBox&gt;\n\n    &lt;!-- \u5546\u54c1\u30c6\u30fc\u30d6\u30eb --&gt;\n    &lt;TableView fx:id=\"productTable\" VBox.vgrow=\"ALWAYS\"&gt;\n        &lt;placeholder&gt;&lt;Label text=\"\u8a72\u5f53\u3059\u308b\u5546\u54c1\u304c\u3042\u308a\u307e\u305b\u3093\"/&gt;&lt;/placeholder&gt;\n        &lt;columns&gt;\n            &lt;TableColumn text=\"\u5546\u54c1\u30b3\u30fc\u30c9\" prefWidth=\"100\"&gt;\n                &lt;cellValueFactory&gt;&lt;PropertyValueFactory property=\"productCode\"/&gt;&lt;/cellValueFactory&gt;\n            &lt;/TableColumn&gt;\n            &lt;TableColumn text=\"\u5546\u54c1\u540d\" prefWidth=\"200\"&gt;\n                &lt;cellValueFactory&gt;&lt;PropertyValueFactory property=\"productName\"/&gt;&lt;/cellValueFactory&gt;\n            &lt;/TableColumn&gt;\n            &lt;TableColumn text=\"\u5358\u4fa1\" prefWidth=\"100\" styleClass=\"amount-column\"&gt;\n                &lt;cellValueFactory&gt;&lt;PropertyValueFactory property=\"unitPrice\"/&gt;&lt;/cellValueFactory&gt;\n            &lt;/TableColumn&gt;\n        &lt;/columns&gt;\n    &lt;/TableView&gt;\n\n    &lt;!-- \u30b9\u30c6\u30fc\u30bf\u30b9\u30d0\u30fc --&gt;\n    &lt;HBox spacing=\"10\" styleClass=\"status-bar\"&gt;\n        &lt;Label fx:id=\"recordCount\" text=\"0 \u4ef6\"/&gt;\n        &lt;Pane HBox.hgrow=\"ALWAYS\"/&gt;\n        &lt;ProgressIndicator fx:id=\"loadingIndicator\" visible=\"false\" prefWidth=\"20\" prefHeight=\"20\"/&gt;\n    &lt;/HBox&gt;\n&lt;/VBox&gt;\n</code></pre>"},{"location":"article/study/study2-2/#16","title":"\u7b2c16\u7ae0\uff1a\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306e\u5b9f\u88c5","text":""},{"location":"article/study/study2-2/#161","title":"16.1 \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u753b\u9762\u306e\u7279\u5fb4","text":"<p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u753b\u9762\u306f\u3001\u30de\u30b9\u30bf\u753b\u9762\u3068\u306f\u7570\u306a\u308b\u4ee5\u4e0b\u306e\u7279\u5fb4\u304c\u3042\u308a\u307e\u3059\u3002</p> <p></p>"},{"location":"article/study/study2-2/#162","title":"16.2 \u53d7\u6ce8\u5165\u529b\u753b\u9762\u306e\u8a2d\u8a08","text":""},{"location":"article/study/study2-2/#163-tdd","title":"16.3 \u53d7\u6ce8\u5165\u529b\u753b\u9762\u306e TDD \u5b9f\u88c5","text":""},{"location":"article/study/study2-2/#red_1","title":"Red: \u5931\u6557\u3059\u308b\u30c6\u30b9\u30c8\u3092\u66f8\u304f","text":"\u30b3\u30fc\u30c9\u4f8b: OrderEntryControllerTest.java <pre><code>@ExtendWith({ApplicationExtension.class, MockitoExtension.class})\n@DisplayName(\"\u53d7\u6ce8\u5165\u529b\u753b\u9762\")\nclass OrderEntryControllerTest {\n\n    @Mock\n    private OrderUseCase orderUseCase;\n    @Mock\n    private ProductUseCase productUseCase;\n\n    private OrderViewModel viewModel;\n\n    @Nested\n    @DisplayName(\"\u660e\u7d30\u8ffd\u52a0\")\n    class AddDetail {\n\n        @Test\n        @DisplayName(\"\u5546\u54c1\u3092\u9078\u629e\u3057\u3066\u660e\u7d30\u3092\u8ffd\u52a0\u3067\u304d\u308b\")\n        void shouldAddDetailWhenProductSelected(FxRobot robot) {\n            when(productUseCase.findByCode(\"P001\")).thenReturn(\n                createProduct(\"P001\", \"\u30c6\u30b9\u30c8\u5546\u54c1\", new BigDecimal(\"500\"))\n            );\n\n            robot.clickOn(\"#productCodeField\").write(\"P001\");\n            robot.clickOn(\"#quantityField\").write(\"10\");\n            robot.clickOn(\"#addDetailButton\");\n\n            TableView&lt;OrderDetailRow&gt; table = robot.lookup(\"#detailTable\").queryTableView();\n            assertThat(table.getItems()).hasSize(1);\n            assertThat(table.getItems().get(0).getAmount())\n                .isEqualByComparingTo(new BigDecimal(\"5000\"));\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u5408\u8a08\u8a08\u7b97\")\n    class TotalCalculation {\n\n        @Test\n        @DisplayName(\"\u660e\u7d30\u8ffd\u52a0\u6642\u306b\u5408\u8a08\u91d1\u984d\u304c\u518d\u8a08\u7b97\u3055\u308c\u308b\")\n        void shouldRecalculateTotalWhenDetailAdded(FxRobot robot) {\n            viewModel.addDetail(createDetailRow(\"P001\", 10, new BigDecimal(\"500\")));\n            viewModel.addDetail(createDetailRow(\"P002\", 5, new BigDecimal(\"800\")));\n\n            Label totalLabel = robot.lookup(\"#totalAmountLabel\").queryAs(Label.class);\n            // 10 \u00d7 500 + 5 \u00d7 800 = 9000\n            assertThat(totalLabel.getText()).contains(\"9,000\");\n        }\n    }\n}\n</code></pre>"},{"location":"article/study/study2-2/#order-entryfxml","title":"order-entry.fxml","text":"\u30b3\u30fc\u30c9\u4f8b: order-entry.fxml <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;?import javafx.scene.control.*?&gt;\n&lt;?import javafx.scene.layout.*?&gt;\n&lt;?import org.kordamp.ikonli.javafx.FontIcon?&gt;\n\n&lt;VBox xmlns=\"http://javafx.com/javafx/21\"\n      xmlns:fx=\"http://javafx.com/fxml/1\"\n      fx:controller=\"com.example.sms.infrastructure.in.javafx.controller.OrderEntryController\"\n      spacing=\"10\"&gt;\n\n    &lt;!-- \u30d8\u30c3\u30c0\u60c5\u5831 --&gt;\n    &lt;GridPane hgap=\"10\" vgap=\"10\" styleClass=\"header-form\"&gt;\n        &lt;Label text=\"\u53d7\u6ce8\u756a\u53f7:\" GridPane.columnIndex=\"0\" GridPane.rowIndex=\"0\"/&gt;\n        &lt;TextField fx:id=\"orderNumberField\" editable=\"false\" GridPane.columnIndex=\"1\"/&gt;\n\n        &lt;Label text=\"\u53d7\u6ce8\u65e5:\" GridPane.columnIndex=\"2\" GridPane.rowIndex=\"0\"/&gt;\n        &lt;DatePicker fx:id=\"orderDatePicker\" GridPane.columnIndex=\"3\"/&gt;\n\n        &lt;Label text=\"\u9867\u5ba2:\" GridPane.columnIndex=\"0\" GridPane.rowIndex=\"1\"/&gt;\n        &lt;HBox spacing=\"5\" GridPane.columnIndex=\"1\" GridPane.columnSpan=\"3\"&gt;\n            &lt;TextField fx:id=\"customerCodeField\" prefWidth=\"100\"/&gt;\n            &lt;Button onAction=\"#onSearchCustomer\"&gt;\n                &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-search\"/&gt;&lt;/graphic&gt;\n            &lt;/Button&gt;\n            &lt;TextField fx:id=\"customerNameField\" editable=\"false\" HBox.hgrow=\"ALWAYS\"/&gt;\n        &lt;/HBox&gt;\n    &lt;/GridPane&gt;\n\n    &lt;Separator/&gt;\n\n    &lt;!-- \u660e\u7d30\u5165\u529b\u30a8\u30ea\u30a2 --&gt;\n    &lt;HBox spacing=\"10\" alignment=\"CENTER_LEFT\"&gt;\n        &lt;Label text=\"\u5546\u54c1:\"/&gt;\n        &lt;TextField fx:id=\"productCodeField\" prefWidth=\"100\"/&gt;\n        &lt;TextField fx:id=\"productNameField\" prefWidth=\"200\" editable=\"false\"/&gt;\n        &lt;Label text=\"\u6570\u91cf:\"/&gt;\n        &lt;TextField fx:id=\"quantityField\" prefWidth=\"80\" alignment=\"CENTER_RIGHT\"/&gt;\n        &lt;Label text=\"\u5358\u4fa1:\"/&gt;\n        &lt;TextField fx:id=\"unitPriceField\" prefWidth=\"100\" alignment=\"CENTER_RIGHT\"/&gt;\n        &lt;Button fx:id=\"addDetailButton\" text=\"\u8ffd\u52a0\" styleClass=\"primary\" onAction=\"#onAddDetail\"&gt;\n            &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-plus\"/&gt;&lt;/graphic&gt;\n        &lt;/Button&gt;\n    &lt;/HBox&gt;\n\n    &lt;!-- \u660e\u7d30\u30c6\u30fc\u30d6\u30eb --&gt;\n    &lt;TableView fx:id=\"detailTable\" VBox.vgrow=\"ALWAYS\" editable=\"true\"&gt;\n        &lt;columns&gt;\n            &lt;TableColumn text=\"No.\" prefWidth=\"50\"/&gt;\n            &lt;TableColumn text=\"\u5546\u54c1\u30b3\u30fc\u30c9\" prefWidth=\"100\"/&gt;\n            &lt;TableColumn text=\"\u5546\u54c1\u540d\" prefWidth=\"200\"/&gt;\n            &lt;TableColumn text=\"\u6570\u91cf\" prefWidth=\"80\" styleClass=\"quantity-column\"/&gt;\n            &lt;TableColumn text=\"\u5358\u4fa1\" prefWidth=\"100\" styleClass=\"amount-column\"/&gt;\n            &lt;TableColumn text=\"\u91d1\u984d\" prefWidth=\"120\" styleClass=\"amount-column\"/&gt;\n            &lt;TableColumn text=\"\u524a\u9664\" prefWidth=\"60\"/&gt;\n        &lt;/columns&gt;\n    &lt;/TableView&gt;\n\n    &lt;!-- \u5408\u8a08\u30a8\u30ea\u30a2 --&gt;\n    &lt;HBox spacing=\"20\" alignment=\"CENTER_RIGHT\" styleClass=\"total-area\"&gt;\n        &lt;VBox alignment=\"CENTER_RIGHT\" spacing=\"5\"&gt;\n            &lt;HBox spacing=\"10\" alignment=\"CENTER_RIGHT\"&gt;\n                &lt;Label text=\"\u5c0f\u8a08:\"/&gt;\n                &lt;Label fx:id=\"subtotalLabel\" text=\"\u00a50\"/&gt;\n            &lt;/HBox&gt;\n            &lt;HBox spacing=\"10\" alignment=\"CENTER_RIGHT\"&gt;\n                &lt;Label text=\"\u6d88\u8cbb\u7a0e:\"/&gt;\n                &lt;Label fx:id=\"taxAmountLabel\" text=\"\u00a50\"/&gt;\n            &lt;/HBox&gt;\n            &lt;Separator/&gt;\n            &lt;HBox spacing=\"10\" alignment=\"CENTER_RIGHT\"&gt;\n                &lt;Label text=\"\u5408\u8a08\u91d1\u984d:\" styleClass=\"total-label-large\"/&gt;\n                &lt;Label fx:id=\"totalAmountLabel\" text=\"\u00a50\" styleClass=\"total-value-large\"/&gt;\n            &lt;/HBox&gt;\n        &lt;/VBox&gt;\n    &lt;/HBox&gt;\n\n    &lt;!-- \u30dc\u30bf\u30f3\u30a8\u30ea\u30a2 --&gt;\n    &lt;HBox spacing=\"10\" alignment=\"CENTER_RIGHT\"&gt;\n        &lt;Button text=\"\u30af\u30ea\u30a2\" onAction=\"#onClear\"/&gt;\n        &lt;Button text=\"\u5370\u5237\" onAction=\"#onPrint\"&gt;\n            &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-print\"/&gt;&lt;/graphic&gt;\n        &lt;/Button&gt;\n        &lt;Button fx:id=\"saveButton\" text=\"\u767b\u9332\" styleClass=\"primary\" onAction=\"#onSave\"&gt;\n            &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-save\"/&gt;&lt;/graphic&gt;\n        &lt;/Button&gt;\n    &lt;/HBox&gt;\n&lt;/VBox&gt;\n</code></pre>"},{"location":"article/study/study2-2/#17","title":"\u7b2c17\u7ae0\uff1a\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3068\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8","text":""},{"location":"article/study/study2-2/#171-alerthelper","title":"17.1 AlertHelper \u306e\u5b9f\u88c5","text":"<p>\u30a2\u30e9\u30fc\u30c8\u30c0\u30a4\u30a2\u30ed\u30b0\u3092\u7d71\u4e00\u7684\u306b\u6271\u3046\u305f\u3081\u306e\u30d8\u30eb\u30d1\u30fc\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> \u30b3\u30fc\u30c9\u4f8b: AlertHelper.java <pre><code>package com.example.sms.infrastructure.in.javafx.util;\n\nimport javafx.scene.control.Alert;\nimport javafx.scene.control.ButtonType;\nimport javafx.scene.control.TextArea;\nimport javafx.scene.layout.GridPane;\nimport javafx.scene.layout.Priority;\n\nimport java.io.PrintWriter;\nimport java.io.StringWriter;\nimport java.util.Optional;\n\npublic class AlertHelper {\n\n    private AlertHelper() {}\n\n    public static void showInfo(String message) {\n        Alert alert = new Alert(Alert.AlertType.INFORMATION);\n        alert.setTitle(\"\u60c5\u5831\");\n        alert.setHeaderText(null);\n        alert.setContentText(message);\n        alert.showAndWait();\n    }\n\n    public static void showWarning(String message) {\n        Alert alert = new Alert(Alert.AlertType.WARNING);\n        alert.setTitle(\"\u8b66\u544a\");\n        alert.setHeaderText(null);\n        alert.setContentText(message);\n        alert.showAndWait();\n    }\n\n    public static void showError(String message) {\n        Alert alert = new Alert(Alert.AlertType.ERROR);\n        alert.setTitle(\"\u30a8\u30e9\u30fc\");\n        alert.setHeaderText(null);\n        alert.setContentText(message);\n        alert.showAndWait();\n    }\n\n    public static void showException(String title, String header, Throwable exception) {\n        Alert alert = new Alert(Alert.AlertType.ERROR);\n        alert.setTitle(title);\n        alert.setHeaderText(header);\n        alert.setContentText(exception.getMessage());\n\n        StringWriter sw = new StringWriter();\n        PrintWriter pw = new PrintWriter(sw);\n        exception.printStackTrace(pw);\n\n        TextArea textArea = new TextArea(sw.toString());\n        textArea.setEditable(false);\n        textArea.setWrapText(true);\n        textArea.setMaxWidth(Double.MAX_VALUE);\n        textArea.setMaxHeight(Double.MAX_VALUE);\n        GridPane.setVgrow(textArea, Priority.ALWAYS);\n        GridPane.setHgrow(textArea, Priority.ALWAYS);\n\n        GridPane expContent = new GridPane();\n        expContent.setMaxWidth(Double.MAX_VALUE);\n        expContent.add(textArea, 0, 0);\n\n        alert.getDialogPane().setExpandableContent(expContent);\n        alert.showAndWait();\n    }\n\n    public static boolean showConfirmation(String message) {\n        Alert alert = new Alert(Alert.AlertType.CONFIRMATION);\n        alert.setTitle(\"\u78ba\u8a8d\");\n        alert.setHeaderText(null);\n        alert.setContentText(message);\n\n        Optional&lt;ButtonType&gt; result = alert.showAndWait();\n        return result.isPresent() &amp;&amp; result.get() == ButtonType.OK;\n    }\n}\n</code></pre>"},{"location":"article/study/study2-2/#172","title":"17.2 \u30b0\u30ed\u30fc\u30d0\u30eb\u4f8b\u5916\u30cf\u30f3\u30c9\u30e9","text":"\u30b3\u30fc\u30c9\u4f8b: \u30b0\u30ed\u30fc\u30d0\u30eb\u4f8b\u5916\u30cf\u30f3\u30c9\u30e9 <pre><code>public class JavaFxApplication extends Application {\n\n    private static final Logger logger = LoggerFactory.getLogger(JavaFxApplication.class);\n\n    @Override\n    public void init() {\n        Thread.setDefaultUncaughtExceptionHandler(this::handleUncaughtException);\n        // ...\n    }\n\n    private void handleUncaughtException(Thread thread, Throwable throwable) {\n        logger.error(\"\u672a\u51e6\u7406\u4f8b\u5916\u304c\u767a\u751f\u3057\u307e\u3057\u305f [Thread: {}]\", thread.getName(), throwable);\n\n        if (Platform.isFxApplicationThread()) {\n            showErrorDialog(throwable);\n        } else {\n            Platform.runLater(() -&gt; showErrorDialog(throwable));\n        }\n    }\n\n    private void showErrorDialog(Throwable throwable) {\n        AlertHelper.showException(\n            \"\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\",\n            \"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\",\n            throwable\n        );\n    }\n}\n</code></pre>"},{"location":"article/study/study2-2/#173","title":"17.3 \u30d3\u30b8\u30cd\u30b9\u4f8b\u5916\u30af\u30e9\u30b9","text":"\u30b3\u30fc\u30c9\u4f8b: \u30d3\u30b8\u30cd\u30b9\u4f8b\u5916\u30af\u30e9\u30b9 <pre><code>public class BusinessException extends RuntimeException {\n    private final String errorCode;\n\n    public BusinessException(String errorCode, String message) {\n        super(message);\n        this.errorCode = errorCode;\n    }\n\n    public String getErrorCode() { return errorCode; }\n}\n\npublic class EntityNotFoundException extends BusinessException {\n    public EntityNotFoundException(String entityName, Object id) {\n        super(\"NOT_FOUND\", String.format(\"%s \u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: %s\", entityName, id));\n    }\n}\n\npublic class ValidationException extends BusinessException {\n    private final List&lt;String&gt; errors;\n\n    public ValidationException(List&lt;String&gt; errors) {\n        super(\"VALIDATION_ERROR\", String.join(\", \", errors));\n        this.errors = errors;\n    }\n\n    public List&lt;String&gt; getErrors() { return errors; }\n}\n</code></pre>"},{"location":"article/study/study2-2/#part-10-c","title":"Part 10-C \u306e\u307e\u3068\u3081","text":""},{"location":"article/study/study2-2/#_2","title":"\u5b9f\u88c5\u3057\u305f\u6a5f\u80fd\u4e00\u89a7","text":"\u7ae0 \u5185\u5bb9 \u7b2c14\u7ae0: \u57fa\u790e JavaFX + Spring Boot \u7d71\u5408\u3001MVVM \u30d1\u30bf\u30fc\u30f3\u3001Property \u3068 DataBinding \u7b2c15\u7ae0: \u30de\u30b9\u30bf\u753b\u9762 \u5546\u54c1\u30fb\u53d6\u5f15\u5148\u30de\u30b9\u30bf CRUD\u3001TestFX \u306b\u3088\u308b TDD\u3001Excel \u30a8\u30af\u30b9\u30dd\u30fc\u30c8 \u7b2c16\u7ae0: \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u753b\u9762 \u53d7\u6ce8\u30fb\u51fa\u8377\u30fb\u8acb\u6c42\u51e6\u7406\u3001\u30d8\u30c3\u30c0\u30fb\u660e\u7d30\u69cb\u9020\u3001JasperReports \u5e33\u7968\u51fa\u529b \u7b2c17\u7ae0: \u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0 \u7d71\u4e00\u7684\u306a\u30a2\u30e9\u30fc\u30c8\u8868\u793a\u3001\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3001\u30ed\u30ae\u30f3\u30b0"},{"location":"article/study/study2-2/#_3","title":"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u7279\u5fb4","text":""},{"location":"article/study/study2-2/#_4","title":"\u6280\u8853\u30b9\u30bf\u30c3\u30af","text":"\u30ab\u30c6\u30b4\u30ea \u6280\u8853 \u8a00\u8a9e Java 21 \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af Spring Boot 3.4, JavaFX 21 ORM MyBatis 3.0 \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9 PostgreSQL 16 \u5e33\u7968 JasperReports Excel Apache POI \u30c6\u30b9\u30c8 JUnit 5, TestFX"},{"location":"article/study/study2-2/#api","title":"API \u30b5\u30fc\u30d0\u30fc\u7248\u3068\u306e\u6bd4\u8f03","text":"\u89b3\u70b9 API \u30b5\u30fc\u30d0\u30fc\u7248 \u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u7248 UI React/Vue JavaFX + FXML \u901a\u4fe1 HTTP/REST \u76f4\u63a5\u547c\u3073\u51fa\u3057 \u72b6\u614b\u7ba1\u7406 Redux/Vuex JavaFX Property \u914d\u7f6e \u30b5\u30fc\u30d0\u30fc + \u30af\u30e9\u30a4\u30a2\u30f3\u30c8 \u30b9\u30bf\u30f3\u30c9\u30a2\u30ed\u30f3 \u30aa\u30d5\u30e9\u30a4\u30f3 \u4e0d\u53ef \u53ef\u80fd \u5e33\u7968 \u30b5\u30fc\u30d0\u30fc\u751f\u6210 PDF \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u76f4\u63a5\u5370\u5237"},{"location":"article/study/study2-2/#_5","title":"\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u9078\u629e\u57fa\u6e96","text":"\u9078\u629e\u57fa\u6e96 \u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u5411\u304d Web \u5411\u304d \u30aa\u30d5\u30e9\u30a4\u30f3\u8981\u4ef6 \u5fc5\u9808 \u4e0d\u8981 \u5e33\u7968\u30fb\u5370\u5237 \u9ad8\u5ea6\u306a\u5236\u5fa1 \u57fa\u672c\u7684\u306a\u5370\u5237 \u30ec\u30b9\u30dd\u30f3\u30b9 \u5373\u5ea7\u306e\u5fdc\u7b54 \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8a31\u5bb9 \u914d\u5e03\u30fb\u66f4\u65b0 \u9650\u5b9a\u7684 \u5168\u30e6\u30fc\u30b6\u30fc\u540c\u6642 UI \u81ea\u7531\u5ea6 \u9ad8\u3044 HTML/CSS \u5236\u7d04 <p>JavaFX \u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u3001\u30aa\u30d5\u30e9\u30a4\u30f3\u74b0\u5883\u3067\u306e\u5229\u7528\u3084\u9ad8\u5ea6\u306a\u5e33\u7968\u51fa\u529b\u304c\u5fc5\u8981\u306a\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u306b\u9069\u3057\u3066\u3044\u307e\u3059\u3002\u65e2\u5b58\u306e\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u6d3b\u304b\u3057\u306a\u304c\u3089\u3001Input Adapter \u3068\u3057\u3066\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3067\u3001REST API \u3068\u4e26\u884c\u904b\u7528\u3082\u53ef\u80fd\u3067\u3059\u3002</p>"},{"location":"article/study/study2-3/","title":"\u5b9f\u8df5\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\uff1a\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 \u7814\u7a76 3 - gRPC \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":""},{"location":"article/study/study2-3/#_1","title":"\u306f\u3058\u3081\u306b","text":"<p>\u672c\u7814\u7a76\u3067\u306f\u3001API \u30b5\u30fc\u30d0\u30fc\u69cb\u6210\uff08\u7b2c13\u7ae0\uff09\u3084\u30e2\u30ce\u30ea\u30b9\u30b5\u30fc\u30d3\u30b9\uff08\u7814\u7a76 1\uff09\u3068\u306f\u7570\u306a\u308b\u30a2\u30d7\u30ed\u30fc\u30c1\u3068\u3057\u3066\u3001gRPC \u306b\u3088\u308b\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002Protocol Buffers \u306b\u3088\u308b\u9ad8\u52b9\u7387\u306a\u30d0\u30a4\u30ca\u30ea\u30b7\u30ea\u30a2\u30e9\u30a4\u30bc\u30fc\u30b7\u30e7\u30f3\u3068\u3001HTTP/2 \u306b\u3088\u308b\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u901a\u4fe1\u3092\u6d3b\u7528\u3057\u3001\u9ad8\u6027\u80fd\u306a\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u9593\u901a\u4fe1\u3092\u5b9f\u73fe\u3057\u307e\u3059\u3002</p> <p>\u7814\u7a76 1 \u3067\u69cb\u7bc9\u3057\u305f\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u30c9\u30e1\u30a4\u30f3\u5c64\u30fb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff09\u306f\u305d\u306e\u307e\u307e\u5171\u6709\u3057\u3001Input Adapter \u3068\u3057\u3066 gRPC \u30b5\u30fc\u30d3\u30b9\u5c64\u306e\u307f\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p>"},{"location":"article/study/study2-3/#14grpc","title":"\u7b2c14\u7ae0\uff1agRPC \u30b5\u30fc\u30d0\u30fc\u306e\u57fa\u790e","text":""},{"location":"article/study/study2-3/#141-grpc","title":"14.1 gRPC \u3068\u306f","text":"<p>gRPC \u306f Google \u304c\u958b\u767a\u3057\u305f\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u9ad8\u6027\u80fd RPC\uff08Remote Procedure Call\uff09\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u3059\u3002HTTP/2 \u30d7\u30ed\u30c8\u30b3\u30eb\u3068 Protocol Buffers \u3092\u57fa\u76e4\u3068\u3057\u3001\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u9593\u901a\u4fe1\u306b\u6700\u9069\u5316\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <p></p> <p>gRPC \u306e\u4e3b\u306a\u7279\u5fb4\uff1a</p> \u7279\u5fb4 \u8aac\u660e HTTP/2 \u591a\u91cd\u5316\u3001\u30d8\u30c3\u30c0\u30fc\u5727\u7e2e\u3001\u30d0\u30a4\u30ca\u30ea\u30d5\u30ec\u30fc\u30df\u30f3\u30b0 Protocol Buffers \u9ad8\u901f\u306a\u30d0\u30a4\u30ca\u30ea\u30b7\u30ea\u30a2\u30e9\u30a4\u30bc\u30fc\u30b7\u30e7\u30f3 \u591a\u8a00\u8a9e\u30b5\u30dd\u30fc\u30c8 Java, Go, Python, C#, Node.js \u7b49 \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 4\u3064\u306e RPC \u30d1\u30bf\u30fc\u30f3\u3092\u30b5\u30dd\u30fc\u30c8 \u30c7\u30c3\u30c9\u30e9\u30a4\u30f3 \u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u7ba1\u7406\u306e\u7d44\u307f\u8fbc\u307f\u30b5\u30dd\u30fc\u30c8 \u8a8d\u8a3c TLS/SSL\u3001\u30c8\u30fc\u30af\u30f3\u30d9\u30fc\u30b9\u8a8d\u8a3c\u306e\u30b5\u30dd\u30fc\u30c8"},{"location":"article/study/study2-3/#142-rest-api-graphql","title":"14.2 REST API / GraphQL \u3068\u306e\u6bd4\u8f03","text":"<p>\u8a73\u7d30\u6bd4\u8f03\u8868\uff1a</p> \u7279\u5fb4 REST API gRPC GraphQL \u30d7\u30ed\u30c8\u30b3\u30eb HTTP/1.1 HTTP/2 HTTP/1.1 or HTTP/2 \u30c7\u30fc\u30bf\u5f62\u5f0f JSON Protocol Buffers JSON \u30b9\u30ad\u30fc\u30de OpenAPI (\u4efb\u610f) .proto (\u5fc5\u9808) .graphqls (\u5fc5\u9808) \u30b7\u30ea\u30a2\u30e9\u30a4\u30bc\u30fc\u30b7\u30e7\u30f3 \u30c6\u30ad\u30b9\u30c8 \u30d0\u30a4\u30ca\u30ea \u30c6\u30ad\u30b9\u30c8 \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9 \u4e2d \u9ad8 \u4e2d \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 WebSocket \u5225\u5b9f\u88c5 \u30cd\u30a4\u30c6\u30a3\u30d6\u30b5\u30dd\u30fc\u30c8 Subscription \u30d6\u30e9\u30a6\u30b6\u5bfe\u5fdc \u25ce \u25b3 (gRPC-Web) \u25ce \u5b66\u7fd2\u30b3\u30b9\u30c8 \u4f4e \u4e2d \u4e2d \u4e3b\u306a\u7528\u9014 \u6c4e\u7528 API \u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9 \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u5411\u3051 <p>gRPC \u3092\u9078\u629e\u3059\u308b\u5834\u9762\uff1a</p> <ol> <li>\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u9593\u901a\u4fe1: \u9ad8\u6027\u80fd\u306a\u5185\u90e8\u901a\u4fe1\u304c\u5fc5\u8981\u306a\u5834\u5408</li> <li>\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u51e6\u7406: \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u306b\u3088\u308b\u9032\u6357\u901a\u77e5\u304c\u5fc5\u8981\u306a\u5834\u5408</li> <li>\u591a\u8a00\u8a9e\u74b0\u5883: \u7570\u306a\u308b\u8a00\u8a9e\u3067\u5b9f\u88c5\u3055\u308c\u305f\u30b5\u30fc\u30d3\u30b9\u9593\u306e\u9023\u643a</li> <li>\u4f4e\u30ec\u30a4\u30c6\u30f3\u30b7: \u30d0\u30a4\u30ca\u30ea\u30d7\u30ed\u30c8\u30b3\u30eb\u306b\u3088\u308b\u9ad8\u901f\u901a\u4fe1\u304c\u5fc5\u8981\u306a\u5834\u5408</li> </ol>"},{"location":"article/study/study2-3/#143-4-rpc","title":"14.3 4\u3064\u306e RPC \u30d1\u30bf\u30fc\u30f3","text":"<p>gRPC \u306f 4 \u3064\u306e RPC \u30d1\u30bf\u30fc\u30f3\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u307e\u3059\u3002</p> <p></p> <p>\u5404\u30d1\u30bf\u30fc\u30f3\u306e\u7528\u9014\uff1a</p> \u30d1\u30bf\u30fc\u30f3 \u7528\u9014\u4f8b\uff08\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\uff09 \u5358\u9805 RPC \u5546\u54c1\u60c5\u5831\u53d6\u5f97\u3001\u53d7\u6ce8\u767b\u9332 \u30b5\u30fc\u30d0\u30fc\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 \u5546\u54c1\u4e00\u89a7\u53d6\u5f97\u3001\u51fa\u8377\u9032\u6357\u901a\u77e5 \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 \u53d7\u6ce8\u660e\u7d30\u306e\u4e00\u62ec\u767b\u9332 \u53cc\u65b9\u5411\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u5728\u5eab\u540c\u671f"},{"location":"article/study/study2-3/#144-grpc","title":"14.4 gRPC \u306b\u304a\u3051\u308b\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":"<p>gRPC \u3092\u5c0e\u5165\u3057\u3066\u3082\u3001\u65e2\u5b58\u306e\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u30c9\u30e1\u30a4\u30f3\u5c64\u30fb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff09\u306f\u305d\u306e\u307e\u307e\u5171\u6709\u3057\u3001Input Adapter \u3068\u3057\u3066 gRPC \u30b5\u30fc\u30d3\u30b9\u5c64\u306e\u307f\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> <p></p> <p>gRPC \u3067\u3082\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u7dad\u6301\u3059\u308b\u7406\u7531\uff1a</p> <ol> <li>\u518d\u5229\u7528\u6027: \u65e2\u5b58\u306e UseCase/Repository \u3092\u305d\u306e\u307e\u307e\u6d3b\u7528</li> <li>\u4e26\u884c\u904b\u7528: REST API \u3068 gRPC \u3092\u540c\u6642\u63d0\u4f9b\u53ef\u80fd</li> <li>\u30c6\u30b9\u30c8\u5bb9\u6613\u6027: \u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\u306f\u901a\u4fe1\u30d7\u30ed\u30c8\u30b3\u30eb\u306b\u4f9d\u5b58\u3057\u306a\u3044</li> <li>\u79fb\u884c\u5bb9\u6613\u6027: \u6bb5\u968e\u7684\u306b API \u5f62\u5f0f\u3092\u8ffd\u52a0\u30fb\u5909\u66f4\u53ef\u80fd</li> </ol>"},{"location":"article/study/study2-3/#145","title":"14.5 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210","text":"<p>\u65e2\u5b58\u306e\u69cb\u6210\u306b <code>infrastructure/grpc/</code> \u3092\u8ffd\u52a0\u3059\u308b\u3060\u3051\u3067\u3059\u3002</p> <pre><code>src/main/java/com/example/sales/\n\u251c\u2500\u2500 domain/                     # \u30c9\u30e1\u30a4\u30f3\u5c64\uff08API\u7248\u3068\u5171\u901a\uff09\n\u2502   \u251c\u2500\u2500 model/\n\u2502   \u2502   \u251c\u2500\u2500 product/           # \u5546\u54c1\u30c9\u30e1\u30a4\u30f3\n\u2502   \u2502   \u251c\u2500\u2500 partner/           # \u53d6\u5f15\u5148\u30c9\u30e1\u30a4\u30f3\n\u2502   \u2502   \u251c\u2500\u2500 order/             # \u53d7\u6ce8\u30c9\u30e1\u30a4\u30f3\n\u2502   \u2502   \u251c\u2500\u2500 shipment/          # \u51fa\u8377\u30c9\u30e1\u30a4\u30f3\n\u2502   \u2502   \u2514\u2500\u2500 invoice/           # \u8acb\u6c42\u30c9\u30e1\u30a4\u30f3\n\u2502   \u2514\u2500\u2500 exception/\n\u2502\n\u251c\u2500\u2500 application/               # \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff08API\u7248\u3068\u5171\u901a\uff09\n\u2502   \u251c\u2500\u2500 port/\n\u2502   \u2502   \u251c\u2500\u2500 in/               # Input Port\uff08\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\uff09\n\u2502   \u2502   \u2514\u2500\u2500 out/              # Output Port\uff08\u30ea\u30dd\u30b8\u30c8\u30ea\uff09\n\u2502   \u2514\u2500\u2500 service/\n\u2502\n\u251c\u2500\u2500 infrastructure/\n\u2502   \u251c\u2500\u2500 persistence/          # Output Adapter\uff08DB\u5b9f\u88c5\uff09- \u65e2\u5b58\n\u2502   \u2502   \u251c\u2500\u2500 mapper/\n\u2502   \u2502   \u2514\u2500\u2500 repository/\n\u2502   \u251c\u2500\u2500 rest/                 # Input Adapter\uff08REST\u5b9f\u88c5\uff09- \u65e2\u5b58\n\u2502   \u2514\u2500\u2500 grpc/                 # Input Adapter\uff08gRPC\u5b9f\u88c5\uff09- \u65b0\u898f\u8ffd\u52a0\n\u2502       \u251c\u2500\u2500 service/          # gRPC \u30b5\u30fc\u30d3\u30b9\u5b9f\u88c5\n\u2502       \u251c\u2500\u2500 interceptor/      # \u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\n\u2502       \u2514\u2500\u2500 converter/        # \u30c9\u30e1\u30a4\u30f3 \u2194 Proto \u5909\u63db\n\u2502\n\u251c\u2500\u2500 config/\n\u2502\n\u2514\u2500\u2500 src/main/proto/           # Protocol Buffers \u5b9a\u7fa9\n    \u251c\u2500\u2500 common.proto\n    \u251c\u2500\u2500 product.proto\n    \u251c\u2500\u2500 partner.proto\n    \u251c\u2500\u2500 order.proto\n    \u251c\u2500\u2500 shipment.proto\n    \u2514\u2500\u2500 invoice.proto\n</code></pre>"},{"location":"article/study/study2-3/#146","title":"14.6 \u6280\u8853\u30b9\u30bf\u30c3\u30af\u306e\u8ffd\u52a0","text":"<p>\u65e2\u5b58\u306e <code>build.gradle.kts</code> \u306b gRPC \u95a2\u9023\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p>"},{"location":"article/study/study2-3/#buildgradlekts","title":"build.gradle.kts\uff08\u5dee\u5206\uff09","text":"\u30b3\u30fc\u30c9\u4f8b: build.gradle.kts <pre><code>import com.google.protobuf.gradle.*\n\nplugins {\n    // \u65e2\u5b58\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\n    id(\"java\")\n    id(\"org.springframework.boot\") version \"4.0.0\"\n    id(\"io.spring.dependency-management\") version \"1.1.0\"\n\n    // gRPC \u95a2\u9023\u3092\u8ffd\u52a0\n    id(\"com.google.protobuf\") version \"0.9.4\"\n}\n\ndependencies {\n    // \u65e2\u5b58\u306e\u4f9d\u5b58\u95a2\u4fc2\uff08Spring Boot, MyBatis, PostgreSQL\u7b49\uff09\u306f\u305d\u306e\u307e\u307e\n\n    // gRPC \u95a2\u9023\u3092\u8ffd\u52a0\n    implementation(\"net.devh:grpc-spring-boot-starter:3.1.0.RELEASE\")\n    implementation(\"io.grpc:grpc-protobuf:1.62.2\")\n    implementation(\"io.grpc:grpc-stub:1.62.2\")\n    implementation(\"io.grpc:grpc-services:1.62.2\")  // \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\u3001\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\n\n    // Protocol Buffers\n    implementation(\"com.google.protobuf:protobuf-java:3.25.3\")\n    implementation(\"com.google.protobuf:protobuf-java-util:3.25.3\")  // JSON \u5909\u63db\n\n    // Jakarta Annotation (gRPC generated code \u3067\u5fc5\u8981)\n    compileOnly(\"jakarta.annotation:jakarta.annotation-api:2.1.1\")\n\n    // Test\n    testImplementation(\"io.grpc:grpc-testing:1.62.2\")\n    testImplementation(\"net.devh:grpc-client-spring-boot-starter:3.1.0.RELEASE\")\n}\n\nprotobuf {\n    protoc {\n        artifact = \"com.google.protobuf:protoc:3.25.3\"\n    }\n    plugins {\n        create(\"grpc\") {\n            artifact = \"io.grpc:protoc-gen-grpc-java:1.62.2\"\n        }\n    }\n    generateProtoTasks {\n        all().forEach { task -&gt;\n            task.plugins {\n                create(\"grpc\")\n            }\n        }\n    }\n}\n\n// \u751f\u6210\u30b3\u30fc\u30c9\u306e\u30bd\u30fc\u30b9\u30d1\u30b9\u8ffd\u52a0\nsourceSets {\n    main {\n        java {\n            srcDirs(\n                \"build/generated/source/proto/main/java\",\n                \"build/generated/source/proto/main/grpc\"\n            )\n        }\n    }\n}\n</code></pre> <p>\u8ffd\u52a0\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u8aac\u660e\uff1a</p> \u30d1\u30c3\u30b1\u30fc\u30b8 \u7528\u9014 grpc-spring-boot-starter Spring Boot gRPC \u7d71\u5408 grpc-protobuf gRPC + Protocol Buffers \u7d71\u5408 grpc-stub gRPC \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b9\u30bf\u30d6 grpc-services \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\u3001\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9 protobuf-java Protocol Buffers Java \u30e9\u30f3\u30bf\u30a4\u30e0 protobuf-java-util JSON \u21d4 Protobuf \u5909\u63db\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3 grpc-testing gRPC \u30c6\u30b9\u30c8\u30b5\u30dd\u30fc\u30c8"},{"location":"article/study/study2-3/#applicationyml","title":"application.yml\uff08\u5dee\u5206\uff09","text":"\u30b3\u30fc\u30c9\u4f8b: application.yml <pre><code># \u65e2\u5b58\u306e\u8a2d\u5b9a\u306f\u305d\u306e\u307e\u307e\n\n# gRPC \u30b5\u30fc\u30d0\u30fc\u8a2d\u5b9a\ngrpc:\n  server:\n    port: 9090\n    reflection-service-enabled: true  # gRPC \u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u6709\u52b9\u5316\n    health-service-enabled: true      # \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\u6709\u52b9\u5316\n    max-inbound-message-size: 4194304  # 4MB\n    max-inbound-metadata-size: 8192    # 8KB\n\n# \u30ed\u30b0\u8a2d\u5b9a\nlogging:\n  level:\n    net.devh.boot.grpc: DEBUG\n    io.grpc: INFO\n</code></pre>"},{"location":"article/study/study2-3/#147-protocol-buffers","title":"14.7 Protocol Buffers \u5b9a\u7fa9","text":""},{"location":"article/study/study2-3/#srcmainprotocommonproto","title":"src/main/proto/common.proto","text":"\u30b3\u30fc\u30c9\u4f8b: common.proto <pre><code>syntax = \"proto3\";\n\npackage com.example.sales;\n\noption java_package = \"com.example.sales.infrastructure.grpc.proto\";\noption java_outer_classname = \"CommonProto\";\noption java_multiple_files = true;\n\nimport \"google/protobuf/timestamp.proto\";\nimport \"google/protobuf/wrappers.proto\";\n\n// \u5171\u901a\u306e\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\nmessage PageRequest {\n    int32 page = 1;\n    int32 size = 2;\n}\n\nmessage PageInfo {\n    int32 page = 1;\n    int32 size = 2;\n    int32 total_elements = 3;\n    int32 total_pages = 4;\n    bool has_next = 5;\n    bool has_previous = 6;\n}\n\n// \u5171\u901a\u306e\u30a8\u30e9\u30fc\u5fdc\u7b54\nmessage ErrorDetail {\n    string field = 1;\n    string message = 2;\n}\n\nmessage ErrorResponse {\n    string code = 1;\n    string message = 2;\n    repeated ErrorDetail details = 3;\n}\n\n// \u91d1\u984d\u578b\uff08Decimal \u76f8\u5f53\uff09\nmessage Money {\n    int64 units = 1;      // \u6574\u6570\u90e8\n    int32 nanos = 2;      // \u5c0f\u6570\u90e8\uff0810\u5104\u5206\u306e1\u5358\u4f4d\uff09\n    string currency = 3;  // \u901a\u8ca8\u30b3\u30fc\u30c9\uff08JPY\u7b49\uff09\n}\n\n// \u65e5\u4ed8\u578b\uff08Date \u76f8\u5f53\uff09\nmessage Date {\n    int32 year = 1;\n    int32 month = 2;\n    int32 day = 3;\n}\n\n// \u76e3\u67fb\u60c5\u5831\nmessage AuditInfo {\n    google.protobuf.Timestamp created_at = 1;\n    string created_by = 2;\n    google.protobuf.Timestamp updated_at = 3;\n    string updated_by = 4;\n}\n</code></pre>"},{"location":"article/study/study2-3/#srcmainprotoproductproto","title":"src/main/proto/product.proto","text":"\u30b3\u30fc\u30c9\u4f8b: product.proto <pre><code>syntax = \"proto3\";\n\npackage com.example.sales;\n\noption java_package = \"com.example.sales.infrastructure.grpc.proto\";\noption java_outer_classname = \"ProductProto\";\noption java_multiple_files = true;\n\nimport \"common.proto\";\nimport \"google/protobuf/empty.proto\";\n\n// \u5546\u54c1\u533a\u5206\nenum ProductCategory {\n    PRODUCT_CATEGORY_UNSPECIFIED = 0;\n    PRODUCT_CATEGORY_GOODS = 1;       // \u5546\u54c1\n    PRODUCT_CATEGORY_SERVICE = 2;     // \u30b5\u30fc\u30d3\u30b9\n    PRODUCT_CATEGORY_SUPPLY = 3;      // \u6d88\u8017\u54c1\n}\n\n// \u7a0e\u533a\u5206\nenum TaxCategory {\n    TAX_CATEGORY_UNSPECIFIED = 0;\n    TAX_CATEGORY_TAXABLE = 1;         // \u8ab2\u7a0e\n    TAX_CATEGORY_EXEMPT = 2;          // \u975e\u8ab2\u7a0e\n    TAX_CATEGORY_REDUCED = 3;         // \u8efd\u6e1b\u7a0e\u7387\n}\n\n// \u5546\u54c1\u30e1\u30c3\u30bb\u30fc\u30b8\nmessage Product {\n    string product_code = 1;           // \u5546\u54c1\u30b3\u30fc\u30c9\n    string product_name = 2;           // \u5546\u54c1\u540d\n    ProductCategory category = 3;      // \u5546\u54c1\u533a\u5206\n    TaxCategory tax_category = 4;      // \u7a0e\u533a\u5206\n    Money standard_price = 5;          // \u6a19\u6e96\u5358\u4fa1\n    string product_group_code = 6;     // \u5546\u54c1\u5206\u985e\u30b3\u30fc\u30c9\n    string unit_code = 7;              // \u5358\u4f4d\u30b3\u30fc\u30c9\n    bool is_active = 8;                // \u6709\u52b9\u30d5\u30e9\u30b0\n    AuditInfo audit = 9;               // \u76e3\u67fb\u60c5\u5831\n}\n\n// === \u30ea\u30af\u30a8\u30b9\u30c8/\u30ec\u30b9\u30dd\u30f3\u30b9 ===\n\n// \u5546\u54c1\u53d6\u5f97\nmessage GetProductRequest {\n    string product_code = 1;\n}\n\nmessage GetProductResponse {\n    Product product = 1;\n}\n\n// \u5546\u54c1\u4e00\u89a7\u53d6\u5f97\uff08\u30b5\u30fc\u30d0\u30fc\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\uff09\nmessage ListProductsRequest {\n    PageRequest page = 1;\n    ProductCategory category = 2;      // \u30d5\u30a3\u30eb\u30bf\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\uff09\n    string product_group_code = 3;     // \u30d5\u30a3\u30eb\u30bf\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\uff09\n    string keyword = 4;                // \u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\n}\n\n// \u5546\u54c1\u767b\u9332\nmessage CreateProductRequest {\n    string product_code = 1;\n    string product_name = 2;\n    ProductCategory category = 3;\n    TaxCategory tax_category = 4;\n    Money standard_price = 5;\n    string product_group_code = 6;\n    string unit_code = 7;\n}\n\nmessage CreateProductResponse {\n    Product product = 1;\n}\n\n// \u5546\u54c1\u4e00\u62ec\u767b\u9332\uff08\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\uff09\nmessage BulkCreateProductRequest {\n    CreateProductRequest product = 1;\n}\n\nmessage BulkCreateProductResponse {\n    int32 success_count = 1;\n    int32 failure_count = 2;\n    repeated ErrorDetail errors = 3;\n}\n\n// === \u30b5\u30fc\u30d3\u30b9\u5b9a\u7fa9 ===\n\nservice ProductService {\n    // \u5358\u9805 RPC\n    rpc GetProduct(GetProductRequest) returns (GetProductResponse);\n    rpc CreateProduct(CreateProductRequest) returns (CreateProductResponse);\n    rpc UpdateProduct(UpdateProductRequest) returns (UpdateProductResponse);\n    rpc DeleteProduct(DeleteProductRequest) returns (DeleteProductResponse);\n\n    // \u30b5\u30fc\u30d0\u30fc\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 RPC\uff08\u5927\u91cf\u30c7\u30fc\u30bf\u53d6\u5f97\uff09\n    rpc ListProducts(ListProductsRequest) returns (stream Product);\n\n    // \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 RPC\uff08\u4e00\u62ec\u767b\u9332\uff09\n    rpc BulkCreateProducts(stream BulkCreateProductRequest) returns (BulkCreateProductResponse);\n}\n</code></pre>"},{"location":"article/study/study2-3/#148-grpc","title":"14.8 gRPC \u30b5\u30fc\u30d3\u30b9\u5b9f\u88c5","text":""},{"location":"article/study/study2-3/#grpcproductservicejava","title":"GrpcProductService.java","text":"\u30b3\u30fc\u30c9\u4f8b: GrpcProductService.java <pre><code>package com.example.sales.infrastructure.grpc.service;\n\nimport com.example.sales.application.port.in.ProductUseCase;\nimport com.example.sales.domain.model.product.Product;\nimport com.example.sales.domain.model.product.ProductCode;\nimport com.example.sales.infrastructure.grpc.converter.ProductConverter;\nimport com.example.sales.infrastructure.grpc.proto.*;\nimport io.grpc.stub.StreamObserver;\nimport net.devh.boot.grpc.server.service.GrpcService;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport java.util.List;\nimport java.util.concurrent.atomic.AtomicInteger;\n\n/**\n * \u5546\u54c1 gRPC \u30b5\u30fc\u30d3\u30b9\u5b9f\u88c5\n */\n@GrpcService\npublic class GrpcProductService extends ProductServiceGrpc.ProductServiceImplBase {\n\n    private static final Logger log = LoggerFactory.getLogger(GrpcProductService.class);\n\n    private final ProductUseCase productUseCase;\n    private final ProductConverter converter;\n\n    public GrpcProductService(ProductUseCase productUseCase, ProductConverter converter) {\n        this.productUseCase = productUseCase;\n        this.converter = converter;\n    }\n\n    /**\n     * \u5358\u9805 RPC: \u5546\u54c1\u53d6\u5f97\n     */\n    @Override\n    public void getProduct(GetProductRequest request,\n                           StreamObserver&lt;GetProductResponse&gt; responseObserver) {\n        log.info(\"getProduct: {}\", request.getProductCode());\n\n        try {\n            ProductCode code = new ProductCode(request.getProductCode());\n            Product product = productUseCase.findByCode(code)\n                .orElseThrow(() -&gt; new ProductNotFoundException(code));\n\n            GetProductResponse response = GetProductResponse.newBuilder()\n                .setProduct(converter.toProto(product))\n                .build();\n\n            responseObserver.onNext(response);\n            responseObserver.onCompleted();\n\n        } catch (ProductNotFoundException e) {\n            log.warn(\"Product not found: {}\", request.getProductCode());\n            responseObserver.onError(\n                io.grpc.Status.NOT_FOUND\n                    .withDescription(\"\u5546\u54c1\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + request.getProductCode())\n                    .asRuntimeException()\n            );\n        } catch (Exception e) {\n            log.error(\"Error getting product\", e);\n            responseObserver.onError(\n                io.grpc.Status.INTERNAL\n                    .withDescription(\"\u5185\u90e8\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\")\n                    .withCause(e)\n                    .asRuntimeException()\n            );\n        }\n    }\n\n    /**\n     * \u30b5\u30fc\u30d0\u30fc\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 RPC: \u5546\u54c1\u4e00\u89a7\u53d6\u5f97\n     */\n    @Override\n    public void listProducts(ListProductsRequest request,\n                             StreamObserver&lt;Product&gt; responseObserver) {\n        log.info(\"listProducts: category={}, keyword={}\",\n                 request.getCategory(), request.getKeyword());\n\n        try {\n            List&lt;Product&gt; products = productUseCase.findAll(\n                converter.toCriteria(request)\n            );\n\n            // \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u3067\u5546\u54c1\u30921\u4ef6\u305a\u3064\u9001\u4fe1\n            for (Product product : products) {\n                responseObserver.onNext(converter.toProto(product));\n            }\n\n            responseObserver.onCompleted();\n            log.info(\"listProducts completed: {} items\", products.size());\n\n        } catch (Exception e) {\n            log.error(\"Error listing products\", e);\n            responseObserver.onError(\n                io.grpc.Status.INTERNAL\n                    .withDescription(\"\u5185\u90e8\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\")\n                    .asRuntimeException()\n            );\n        }\n    }\n\n    /**\n     * \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 RPC: \u5546\u54c1\u4e00\u62ec\u767b\u9332\n     */\n    @Override\n    public StreamObserver&lt;BulkCreateProductRequest&gt; bulkCreateProducts(\n            StreamObserver&lt;BulkCreateProductResponse&gt; responseObserver) {\n\n        log.info(\"bulkCreateProducts: started\");\n\n        AtomicInteger successCount = new AtomicInteger(0);\n        AtomicInteger failureCount = new AtomicInteger(0);\n        List&lt;ErrorDetail&gt; errors = new java.util.ArrayList&lt;&gt;();\n\n        return new StreamObserver&lt;BulkCreateProductRequest&gt;() {\n            @Override\n            public void onNext(BulkCreateProductRequest request) {\n                try {\n                    CreateProductRequest productRequest = request.getProduct();\n                    Product product = converter.toDomain(productRequest);\n                    productUseCase.create(product);\n                    successCount.incrementAndGet();\n                    log.debug(\"Created product: {}\", productRequest.getProductCode());\n\n                } catch (Exception e) {\n                    failureCount.incrementAndGet();\n                    errors.add(ErrorDetail.newBuilder()\n                        .setField(request.getProduct().getProductCode())\n                        .setMessage(e.getMessage())\n                        .build());\n                    log.warn(\"Failed to create product: {}\",\n                             request.getProduct().getProductCode(), e);\n                }\n            }\n\n            @Override\n            public void onError(Throwable t) {\n                log.error(\"bulkCreateProducts error\", t);\n            }\n\n            @Override\n            public void onCompleted() {\n                BulkCreateProductResponse response = BulkCreateProductResponse.newBuilder()\n                    .setSuccessCount(successCount.get())\n                    .setFailureCount(failureCount.get())\n                    .addAllErrors(errors)\n                    .build();\n\n                responseObserver.onNext(response);\n                responseObserver.onCompleted();\n\n                log.info(\"bulkCreateProducts completed: success={}, failure={}\",\n                         successCount.get(), failureCount.get());\n            }\n        };\n    }\n}\n</code></pre>"},{"location":"article/study/study2-3/#149-productconverter-proto","title":"14.9 ProductConverter\uff08\u30c9\u30e1\u30a4\u30f3 \u21d4 Proto \u5909\u63db\uff09","text":"\u30b3\u30fc\u30c9\u4f8b: ProductConverter.java <pre><code>package com.example.sales.infrastructure.grpc.converter;\n\nimport com.example.sales.domain.model.product.*;\nimport com.example.sales.infrastructure.grpc.proto.*;\nimport org.springframework.stereotype.Component;\n\nimport java.math.BigDecimal;\n\n/**\n * \u5546\u54c1\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb \u21d4 Protocol Buffers \u5909\u63db\n */\n@Component\npublic class ProductConverter {\n\n    /**\n     * \u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb \u2192 Proto\n     */\n    public com.example.sales.infrastructure.grpc.proto.Product toProto(Product domain) {\n        return com.example.sales.infrastructure.grpc.proto.Product.newBuilder()\n            .setProductCode(domain.getProductCode().getValue())\n            .setProductName(domain.getProductName())\n            .setCategory(toProtoCategory(domain.getCategory()))\n            .setTaxCategory(toProtoTaxCategory(domain.getTaxCategory()))\n            .setStandardPrice(toProtoMoney(domain.getStandardPrice()))\n            .setProductGroupCode(nullToEmpty(domain.getProductGroupCode()))\n            .setUnitCode(nullToEmpty(domain.getUnitCode()))\n            .setIsActive(domain.isActive())\n            .build();\n    }\n\n    /**\n     * CreateProductRequest \u2192 \u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\n     */\n    public Product toDomain(CreateProductRequest request) {\n        return Product.builder()\n            .productCode(new ProductCode(request.getProductCode()))\n            .productName(request.getProductName())\n            .category(toDomainCategory(request.getCategory()))\n            .taxCategory(toDomainTaxCategory(request.getTaxCategory()))\n            .standardPrice(fromProtoMoney(request.getStandardPrice()))\n            .productGroupCode(emptyToNull(request.getProductGroupCode()))\n            .unitCode(emptyToNull(request.getUnitCode()))\n            .isActive(true)\n            .build();\n    }\n\n    // === \u533a\u5206\u5909\u63db ===\n\n    private ProductCategory toProtoCategory(\n            com.example.sales.domain.model.product.ProductCategory domain) {\n        return switch (domain) {\n            case GOODS -&gt; ProductCategory.PRODUCT_CATEGORY_GOODS;\n            case SERVICE -&gt; ProductCategory.PRODUCT_CATEGORY_SERVICE;\n            case SUPPLY -&gt; ProductCategory.PRODUCT_CATEGORY_SUPPLY;\n        };\n    }\n\n    // === Money \u5909\u63db ===\n\n    private Money toProtoMoney(BigDecimal amount) {\n        if (amount == null) {\n            return Money.getDefaultInstance();\n        }\n        long units = amount.longValue();\n        int nanos = amount.remainder(BigDecimal.ONE)\n            .multiply(BigDecimal.valueOf(1_000_000_000))\n            .intValue();\n\n        return Money.newBuilder()\n            .setUnits(units)\n            .setNanos(nanos)\n            .setCurrency(\"JPY\")\n            .build();\n    }\n\n    private BigDecimal fromProtoMoney(Money money) {\n        if (money == null || money.equals(Money.getDefaultInstance())) {\n            return BigDecimal.ZERO;\n        }\n        return BigDecimal.valueOf(money.getUnits())\n            .add(BigDecimal.valueOf(money.getNanos(), 9));\n    }\n\n    // === \u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3 ===\n\n    private String nullToEmpty(String value) {\n        return value == null ? \"\" : value;\n    }\n\n    private String emptyToNull(String value) {\n        return value == null || value.isEmpty() ? null : value;\n    }\n}\n</code></pre>"},{"location":"article/study/study2-3/#1410-grpc","title":"14.10 gRPC \u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc","text":""},{"location":"article/study/study2-3/#logginginterceptorjava","title":"LoggingInterceptor.java","text":"\u30b3\u30fc\u30c9\u4f8b: LoggingInterceptor.java <pre><code>package com.example.sales.infrastructure.grpc.interceptor;\n\nimport io.grpc.*;\nimport net.devh.boot.grpc.server.interceptor.GrpcGlobalServerInterceptor;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.slf4j.MDC;\n\nimport java.util.UUID;\n\n/**\n * gRPC \u30ed\u30b0\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\n */\n@GrpcGlobalServerInterceptor\npublic class LoggingInterceptor implements ServerInterceptor {\n\n    private static final Logger log = LoggerFactory.getLogger(LoggingInterceptor.class);\n\n    @Override\n    public &lt;ReqT, RespT&gt; ServerCall.Listener&lt;ReqT&gt; interceptCall(\n            ServerCall&lt;ReqT, RespT&gt; call,\n            Metadata headers,\n            ServerCallHandler&lt;ReqT, RespT&gt; next) {\n\n        String requestId = UUID.randomUUID().toString().substring(0, 8);\n        String methodName = call.getMethodDescriptor().getFullMethodName();\n        long startTime = System.currentTimeMillis();\n\n        MDC.put(\"requestId\", requestId);\n        log.info(\"gRPC Request started: method={}\", methodName);\n\n        return new ForwardingServerCallListener.SimpleForwardingServerCallListener&lt;&gt;(\n                next.startCall(new ForwardingServerCall.SimpleForwardingServerCall&lt;&gt;(call) {\n                    @Override\n                    public void close(Status status, Metadata trailers) {\n                        long duration = System.currentTimeMillis() - startTime;\n                        log.info(\"gRPC Request completed: method={}, status={}, duration={}ms\",\n                                 methodName, status.getCode(), duration);\n                        MDC.remove(\"requestId\");\n                        super.close(status, trailers);\n                    }\n                }, headers)) {};\n    }\n}\n</code></pre>"},{"location":"article/study/study2-3/#1411-grpcurl","title":"14.11 grpcurl \u306b\u3088\u308b\u52d5\u4f5c\u78ba\u8a8d","text":"\u30b3\u30fc\u30c9\u4f8b: grpcurl \u30b3\u30de\u30f3\u30c9 <pre><code># \u30b5\u30fc\u30d3\u30b9\u4e00\u89a7\u53d6\u5f97\ngrpcurl -plaintext localhost:9090 list\n\n# \u30e1\u30bd\u30c3\u30c9\u4e00\u89a7\u53d6\u5f97\ngrpcurl -plaintext localhost:9090 list com.example.sales.ProductService\n\n# \u5546\u54c1\u53d6\u5f97\uff08\u5358\u9805 RPC\uff09\ngrpcurl -plaintext -d '{\"product_code\": \"PRD001\"}' \\\n  localhost:9090 com.example.sales.ProductService/GetProduct\n\n# \u5546\u54c1\u4e00\u89a7\u53d6\u5f97\uff08\u30b5\u30fc\u30d0\u30fc\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\uff09\ngrpcurl -plaintext -d '{\"page\": {\"page\": 0, \"size\": 10}}' \\\n  localhost:9090 com.example.sales.ProductService/ListProducts\n\n# \u5546\u54c1\u767b\u9332\ngrpcurl -plaintext -d '{\n  \"product_code\": \"PRD100\",\n  \"product_name\": \"\u65b0\u5546\u54c1\",\n  \"category\": \"PRODUCT_CATEGORY_GOODS\",\n  \"tax_category\": \"TAX_CATEGORY_TAXABLE\",\n  \"standard_price\": {\"units\": 1000, \"currency\": \"JPY\"}\n}' localhost:9090 com.example.sales.ProductService/CreateProduct\n</code></pre>"},{"location":"article/study/study2-3/#15-api","title":"\u7b2c15\u7ae0\uff1a\u30de\u30b9\u30bf API \u306e\u5b9f\u88c5","text":""},{"location":"article/study/study2-3/#151-api","title":"15.1 \u5546\u54c1\u30de\u30b9\u30bf API \u306e\u8a73\u7d30\u8a2d\u8a08","text":"<p>\u7b2c14\u7ae0\u3067\u57fa\u790e\u3092\u5b66\u3093\u3060 gRPC \u30b5\u30fc\u30d3\u30b9\u3092\u3001\u5546\u54c1\u30fb\u53d6\u5f15\u5148\u30fb\u5009\u5eab\u30de\u30b9\u30bf\u306b\u5bfe\u3057\u3066\u62e1\u5f35\u3057\u307e\u3059\u3002</p> <p>\u5546\u54c1\u30de\u30b9\u30bf API \u306e\u6a5f\u80fd\u4e00\u89a7\uff1a</p> \u30e1\u30bd\u30c3\u30c9 RPC \u30d1\u30bf\u30fc\u30f3 \u8aac\u660e GetProduct \u5358\u9805 \u5546\u54c1\u30b3\u30fc\u30c9\u3067\u53d6\u5f97 CreateProduct \u5358\u9805 \u5546\u54c1\u767b\u9332 UpdateProduct \u5358\u9805 \u5546\u54c1\u66f4\u65b0 DeleteProduct \u5358\u9805 \u5546\u54c1\u524a\u9664\uff08\u8ad6\u7406\u524a\u9664\uff09 ListProducts \u30b5\u30fc\u30d0\u30fc\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 \u5546\u54c1\u4e00\u89a7\u53d6\u5f97 BulkCreateProducts \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 \u4e00\u62ec\u767b\u9332 BulkUpdateProducts \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 \u4e00\u62ec\u66f4\u65b0 CheckProductExists \u5358\u9805 \u5b58\u5728\u30c1\u30a7\u30c3\u30af"},{"location":"article/study/study2-3/#152-api","title":"15.2 \u53d6\u5f15\u5148\u30de\u30b9\u30bf API \u306e\u5b9f\u88c5","text":""},{"location":"article/study/study2-3/#srcmainprotopartnerproto","title":"src/main/proto/partner.proto","text":"\u30b3\u30fc\u30c9\u4f8b: partner.proto <pre><code>syntax = \"proto3\";\n\npackage com.example.sales;\n\noption java_package = \"com.example.sales.infrastructure.grpc.proto\";\noption java_outer_classname = \"PartnerProto\";\noption java_multiple_files = true;\n\nimport \"common.proto\";\n\n// \u53d6\u5f15\u5148\u533a\u5206\nenum PartnerType {\n    PARTNER_TYPE_UNSPECIFIED = 0;\n    PARTNER_TYPE_CUSTOMER = 1;        // \u9867\u5ba2\n    PARTNER_TYPE_SUPPLIER = 2;        // \u4ed5\u5165\u5148\n    PARTNER_TYPE_BOTH = 3;            // \u9867\u5ba2\u517c\u4ed5\u5165\u5148\n}\n\n// \u53d6\u5f15\u5148\u30b9\u30c6\u30fc\u30bf\u30b9\nenum PartnerStatus {\n    PARTNER_STATUS_UNSPECIFIED = 0;\n    PARTNER_STATUS_ACTIVE = 1;        // \u53d6\u5f15\u4e2d\n    PARTNER_STATUS_SUSPENDED = 2;     // \u53d6\u5f15\u505c\u6b62\n    PARTNER_STATUS_CLOSED = 3;        // \u53d6\u5f15\u7d42\u4e86\n}\n\n// \u53d6\u5f15\u5148\u30e1\u30c3\u30bb\u30fc\u30b8\nmessage Partner {\n    string partner_code = 1;\n    string partner_name = 2;\n    string partner_name_kana = 3;\n    PartnerType partner_type = 4;\n    PartnerStatus status = 5;\n    Address address = 6;\n    Contact contact = 7;\n    CustomerInfo customer_info = 8;    // \u9867\u5ba2\u60c5\u5831\uff08\u9867\u5ba2\u306e\u5834\u5408\uff09\n    SupplierInfo supplier_info = 9;    // \u4ed5\u5165\u5148\u60c5\u5831\uff08\u4ed5\u5165\u5148\u306e\u5834\u5408\uff09\n    AuditInfo audit = 10;\n}\n\n// \u4e0e\u4fe1\u30c1\u30a7\u30c3\u30af\nmessage CheckCreditRequest {\n    string partner_code = 1;\n    Money amount = 2;                  // \u30c1\u30a7\u30c3\u30af\u91d1\u984d\n}\n\nmessage CheckCreditResponse {\n    bool is_within_limit = 1;          // \u9650\u5ea6\u5185\u304b\n    Money credit_limit = 2;            // \u4e0e\u4fe1\u9650\u5ea6\u984d\n    Money current_receivable = 3;      // \u73fe\u5728\u58f2\u639b\u91d1\u6b8b\u9ad8\n    Money available_credit = 4;        // \u5229\u7528\u53ef\u80fd\u4e0e\u4fe1\u984d\n}\n\n// === \u30b5\u30fc\u30d3\u30b9\u5b9a\u7fa9 ===\n\nservice PartnerService {\n    // \u5358\u9805 RPC\n    rpc GetPartner(GetPartnerRequest) returns (GetPartnerResponse);\n    rpc CreatePartner(CreatePartnerRequest) returns (CreatePartnerResponse);\n    rpc CheckCredit(CheckCreditRequest) returns (CheckCreditResponse);\n\n    // \u30b5\u30fc\u30d0\u30fc\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 RPC\n    rpc ListPartners(ListPartnersRequest) returns (stream Partner);\n}\n</code></pre>"},{"location":"article/study/study2-3/#153","title":"15.3 \u30c6\u30b9\u30c8\u5b9f\u88c5","text":"\u30b3\u30fc\u30c9\u4f8b: GrpcProductServiceTest.java <pre><code>@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.DEFINED_PORT)\n@ActiveProfiles(\"test\")\nclass GrpcProductServiceTest {\n\n    private ManagedChannel channel;\n    private ProductServiceGrpc.ProductServiceBlockingStub blockingStub;\n    private ProductServiceGrpc.ProductServiceStub asyncStub;\n\n    @BeforeEach\n    void setUp() {\n        channel = ManagedChannelBuilder.forAddress(\"localhost\", 9999)\n            .usePlaintext()\n            .build();\n        blockingStub = ProductServiceGrpc.newBlockingStub(channel);\n        asyncStub = ProductServiceGrpc.newStub(channel);\n    }\n\n    @AfterEach\n    void tearDown() {\n        channel.shutdownNow();\n    }\n\n    @Test\n    @DisplayName(\"\u5546\u54c1\u306e CRUD \u64cd\u4f5c\u304c\u6b63\u5e38\u306b\u52d5\u4f5c\u3059\u308b\u3053\u3068\")\n    void productCrud() {\n        // \u767b\u9332\n        CreateProductResponse createResponse = blockingStub.createProduct(\n            CreateProductRequest.newBuilder()\n                .setProductCode(\"PRD999\")\n                .setProductName(\"\u30c6\u30b9\u30c8\u5546\u54c1\")\n                .setCategory(ProductCategory.PRODUCT_CATEGORY_GOODS)\n                .setTaxCategory(TaxCategory.TAX_CATEGORY_TAXABLE)\n                .setStandardPrice(Money.newBuilder().setUnits(1000).setCurrency(\"JPY\"))\n                .build()\n        );\n        assertThat(createResponse.getProduct().getProductCode()).isEqualTo(\"PRD999\");\n\n        // \u53d6\u5f97\n        GetProductResponse getResponse = blockingStub.getProduct(\n            GetProductRequest.newBuilder()\n                .setProductCode(\"PRD999\")\n                .build()\n        );\n        assertThat(getResponse.getProduct().getProductName()).isEqualTo(\"\u30c6\u30b9\u30c8\u5546\u54c1\");\n    }\n\n    @Test\n    @DisplayName(\"\u30b5\u30fc\u30d0\u30fc\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u3067\u5546\u54c1\u4e00\u89a7\u3092\u53d6\u5f97\u3067\u304d\u308b\u3053\u3068\")\n    void listProductsStreaming() throws InterruptedException {\n        CountDownLatch latch = new CountDownLatch(1);\n        List&lt;Product&gt; products = new ArrayList&lt;&gt;();\n\n        asyncStub.listProducts(\n            ListProductsRequest.newBuilder()\n                .setPage(PageRequest.newBuilder().setPage(0).setSize(100).build())\n                .build(),\n            new StreamObserver&lt;&gt;() {\n                @Override\n                public void onNext(Product product) {\n                    products.add(product);\n                }\n\n                @Override\n                public void onError(Throwable t) {\n                    latch.countDown();\n                }\n\n                @Override\n                public void onCompleted() {\n                    latch.countDown();\n                }\n            }\n        );\n\n        latch.await(10, TimeUnit.SECONDS);\n        assertThat(products).isNotEmpty();\n    }\n}\n</code></pre>"},{"location":"article/study/study2-3/#16-api","title":"\u7b2c16\u7ae0\uff1a\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3 API \u306e\u5b9f\u88c5","text":""},{"location":"article/study/study2-3/#161-api","title":"16.1 \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3 API \u306e\u8a2d\u8a08\u65b9\u91dd","text":""},{"location":"article/study/study2-3/#rpc","title":"RPC \u30d1\u30bf\u30fc\u30f3\u306e\u4f7f\u3044\u5206\u3051","text":""},{"location":"article/study/study2-3/#162-api-protocol-buffers","title":"16.2 \u53d7\u6ce8 API \u306e Protocol Buffers \u5b9a\u7fa9","text":""},{"location":"article/study/study2-3/#srcmainprotoorderproto","title":"src/main/proto/order.proto","text":"\u30b3\u30fc\u30c9\u4f8b: order.proto <pre><code>syntax = \"proto3\";\n\npackage com.example.sales;\n\noption java_package = \"com.example.sales.infrastructure.grpc.proto\";\noption java_outer_classname = \"OrderProto\";\noption java_multiple_files = true;\n\nimport \"common.proto\";\nimport \"google/protobuf/timestamp.proto\";\n\n// \u53d7\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\nenum OrderStatus {\n    ORDER_STATUS_UNSPECIFIED = 0;\n    ORDER_STATUS_DRAFT = 1;           // \u4e0b\u66f8\u304d\n    ORDER_STATUS_CONFIRMED = 2;       // \u78ba\u5b9a\n    ORDER_STATUS_PROCESSING = 3;      // \u51e6\u7406\u4e2d\n    ORDER_STATUS_SHIPPED = 4;         // \u51fa\u8377\u6e08\n    ORDER_STATUS_COMPLETED = 5;       // \u5b8c\u4e86\n    ORDER_STATUS_CANCELLED = 6;       // \u30ad\u30e3\u30f3\u30bb\u30eb\n}\n\n// \u53d7\u6ce8\u30d8\u30c3\u30c0\nmessage Order {\n    string order_number = 1;\n    string partner_code = 2;\n    string partner_name = 3;\n    Date order_date = 4;\n    Date delivery_date = 5;\n    OrderStatus status = 6;\n    Money total_amount = 7;\n    Money tax_amount = 8;\n    string warehouse_code = 9;\n    string sales_rep_code = 10;\n    string notes = 11;\n    repeated OrderDetail details = 12;\n    AuditInfo audit = 13;\n}\n\n// \u53d7\u6ce8\u660e\u7d30\nmessage OrderDetail {\n    int32 line_number = 1;\n    string product_code = 2;\n    string product_name = 3;\n    int32 quantity = 4;\n    Money unit_price = 5;\n    Money amount = 6;\n    string tax_category = 7;\n    Date delivery_date = 8;\n    string notes = 9;\n}\n\n// \u53d7\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\u76e3\u8996\uff08\u30b5\u30fc\u30d0\u30fc\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\uff09\nmessage WatchOrderStatusRequest {\n    repeated string order_numbers = 1;\n    repeated OrderStatus statuses = 2;\n}\n\nmessage OrderStatusChange {\n    string order_number = 1;\n    OrderStatus previous_status = 2;\n    OrderStatus current_status = 3;\n    google.protobuf.Timestamp changed_at = 4;\n    string changed_by = 5;\n}\n\n// === \u30b5\u30fc\u30d3\u30b9\u5b9a\u7fa9 ===\n\nservice OrderService {\n    // \u5358\u9805 RPC\n    rpc GetOrder(GetOrderRequest) returns (GetOrderResponse);\n    rpc CreateOrder(CreateOrderRequest) returns (CreateOrderResponse);\n    rpc UpdateOrder(UpdateOrderRequest) returns (UpdateOrderResponse);\n    rpc ConfirmOrder(ConfirmOrderRequest) returns (ConfirmOrderResponse);\n    rpc CancelOrder(CancelOrderRequest) returns (CancelOrderResponse);\n\n    // \u30b5\u30fc\u30d0\u30fc\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 RPC\n    rpc ListOrders(ListOrdersRequest) returns (stream Order);\n    rpc WatchOrderStatus(WatchOrderStatusRequest) returns (stream OrderStatusChange);\n\n    // \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 RPC\n    rpc BulkAddOrderDetails(stream BulkAddOrderDetailRequest) returns (BulkAddOrderDetailResponse);\n}\n</code></pre>"},{"location":"article/study/study2-3/#163","title":"16.3 \u53d7\u6ce8\u30b5\u30fc\u30d3\u30b9\u5b9f\u88c5\uff08\u30b9\u30c6\u30fc\u30bf\u30b9\u76e3\u8996\uff09","text":"\u30b3\u30fc\u30c9\u4f8b: GrpcOrderService.java <pre><code>@GrpcService\npublic class GrpcOrderService extends OrderServiceGrpc.OrderServiceImplBase {\n\n    private static final Logger log = LoggerFactory.getLogger(GrpcOrderService.class);\n\n    private final OrderUseCase orderUseCase;\n    private final CreditUseCase creditUseCase;\n    private final OrderConverter converter;\n\n    // \u30b9\u30c6\u30fc\u30bf\u30b9\u76e3\u8996\u7528\u306e\u30aa\u30d6\u30b6\u30fc\u30d0\u30fc\u7ba1\u7406\n    private final Map&lt;String, Set&lt;StreamObserver&lt;OrderStatusChange&gt;&gt;&gt; statusWatchers =\n        new ConcurrentHashMap&lt;&gt;();\n\n    /**\n     * \u30b5\u30fc\u30d0\u30fc\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 RPC: \u53d7\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\u76e3\u8996\n     */\n    @Override\n    public void watchOrderStatus(WatchOrderStatusRequest request,\n                                 StreamObserver&lt;OrderStatusChange&gt; responseObserver) {\n        log.info(\"watchOrderStatus: orders={}\", request.getOrderNumbersList());\n\n        // \u30aa\u30d6\u30b6\u30fc\u30d0\u30fc\u767b\u9332\n        for (String orderNumber : request.getOrderNumbersList()) {\n            statusWatchers\n                .computeIfAbsent(orderNumber, k -&gt; ConcurrentHashMap.newKeySet())\n                .add(responseObserver);\n        }\n\n        // \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30ad\u30e3\u30f3\u30bb\u30eb\u6642\u306b\u30aa\u30d6\u30b6\u30fc\u30d0\u30fc\u524a\u9664\n        Context.current().addListener(context -&gt; {\n            for (String orderNumber : request.getOrderNumbersList()) {\n                Set&lt;StreamObserver&lt;OrderStatusChange&gt;&gt; watchers = statusWatchers.get(orderNumber);\n                if (watchers != null) {\n                    watchers.remove(responseObserver);\n                }\n            }\n        }, Runnable::run);\n    }\n\n    /**\n     * Spring Events \u3067\u30b9\u30c6\u30fc\u30bf\u30b9\u5909\u66f4\u3092\u53d7\u4fe1\u3057\u3001\u30a6\u30a9\u30c3\u30c1\u30e3\u30fc\u306b\u901a\u77e5\n     */\n    @EventListener\n    public void onOrderStatusChanged(OrderStatusChangedEvent event) {\n        Set&lt;StreamObserver&lt;OrderStatusChange&gt;&gt; watchers =\n            statusWatchers.get(event.getOrderNumber());\n\n        if (watchers == null || watchers.isEmpty()) {\n            return;\n        }\n\n        OrderStatusChange change = OrderStatusChange.newBuilder()\n            .setOrderNumber(event.getOrderNumber())\n            .setPreviousStatus(converter.toProtoStatus(event.getPreviousStatus()))\n            .setCurrentStatus(converter.toProtoStatus(event.getCurrentStatus()))\n            .setChangedAt(converter.toProtoTimestamp(event.getChangedAt()))\n            .setChangedBy(event.getChangedBy())\n            .build();\n\n        for (StreamObserver&lt;OrderStatusChange&gt; watcher : watchers) {\n            try {\n                watcher.onNext(change);\n            } catch (Exception e) {\n                log.warn(\"Failed to notify watcher\", e);\n                watchers.remove(watcher);\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"article/study/study2-3/#164","title":"16.4 \u8acb\u6c42\u30b5\u30fc\u30d3\u30b9\u5b9f\u88c5\uff08\u53cc\u65b9\u5411\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\uff09","text":"\u30b3\u30fc\u30c9\u4f8b: processInvoices \u30e1\u30bd\u30c3\u30c9 <pre><code>/**\n * \u53cc\u65b9\u5411\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 RPC: \u8acb\u6c42\u51e6\u7406\n */\n@Override\npublic StreamObserver&lt;ProcessInvoiceRequest&gt; processInvoices(\n        StreamObserver&lt;ProcessInvoiceResponse&gt; responseObserver) {\n\n    log.info(\"processInvoices: started\");\n\n    return new StreamObserver&lt;ProcessInvoiceRequest&gt;() {\n        @Override\n        public void onNext(ProcessInvoiceRequest request) {\n            ProcessInvoiceResponse response;\n\n            try {\n                switch (request.getCommandCase()) {\n                    case CREATE:\n                        response = handleCreateInvoice(request.getCreate());\n                        break;\n                    case ISSUE:\n                        response = handleIssueInvoice(request.getIssue());\n                        break;\n                    case RECEIPT:\n                        response = handleRecordReceipt(request.getReceipt());\n                        break;\n                    default:\n                        response = ProcessInvoiceResponse.newBuilder()\n                            .setSuccess(false)\n                            .setMessage(\"\u4e0d\u660e\u306a\u30b3\u30de\u30f3\u30c9\")\n                            .build();\n                }\n            } catch (Exception e) {\n                log.error(\"processInvoices: error\", e);\n                response = ProcessInvoiceResponse.newBuilder()\n                    .setSuccess(false)\n                    .setMessage(\"\u30a8\u30e9\u30fc: \" + e.getMessage())\n                    .build();\n            }\n\n            // \u5373\u5ea7\u306b\u7d50\u679c\u3092\u8fd4\u3059\n            responseObserver.onNext(response);\n        }\n\n        @Override\n        public void onError(Throwable t) {\n            log.error(\"processInvoices: client error\", t);\n        }\n\n        @Override\n        public void onCompleted() {\n            log.info(\"processInvoices: client completed\");\n            responseObserver.onCompleted();\n        }\n    };\n}\n</code></pre>"},{"location":"article/study/study2-3/#165-grpcurl","title":"16.5 grpcurl \u306b\u3088\u308b\u52d5\u4f5c\u78ba\u8a8d","text":"\u30b3\u30fc\u30c9\u4f8b: grpcurl \u30b3\u30de\u30f3\u30c9 <pre><code># \u53d7\u6ce8\u767b\u9332\ngrpcurl -plaintext -d '{\n  \"partner_code\": \"CUS001\",\n  \"order_date\": {\"year\": 2025, \"month\": 12, \"day\": 29},\n  \"delivery_date\": {\"year\": 2026, \"month\": 1, \"day\": 5},\n  \"warehouse_code\": \"WH001\",\n  \"details\": [\n    {\"product_code\": \"PRD001\", \"quantity\": 10},\n    {\"product_code\": \"PRD002\", \"quantity\": 5}\n  ]\n}' localhost:9090 com.example.sales.OrderService/CreateOrder\n\n# \u53d7\u6ce8\u78ba\u5b9a\ngrpcurl -plaintext -d '{\n  \"order_number\": \"ORD20251229001\"\n}' localhost:9090 com.example.sales.OrderService/ConfirmOrder\n\n# \u53d7\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\u76e3\u8996\uff08\u30b5\u30fc\u30d0\u30fc\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\uff09\ngrpcurl -plaintext -d '{\n  \"order_numbers\": [\"ORD20251229001\"]\n}' localhost:9090 com.example.sales.OrderService/WatchOrderStatus\n\n# \u51fa\u8377\u9032\u6357\u76e3\u8996\uff08\u30b5\u30fc\u30d0\u30fc\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\uff09\ngrpcurl -plaintext -d '{\n  \"shipment_number\": \"SHP20251230001\"\n}' localhost:9090 com.example.sales.ShipmentService/StreamShipmentProgress\n</code></pre>"},{"location":"article/study/study2-3/#17","title":"\u7b2c17\u7ae0\uff1a\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3068\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0","text":""},{"location":"article/study/study2-3/#171-grpc","title":"17.1 gRPC \u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u306e\u6982\u8981","text":"<p>gRPC \u3067\u306f\u3001\u30a8\u30e9\u30fc\u306f Status \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3067\u8868\u73fe\u3055\u308c\u307e\u3059\u3002Status \u306b\u306f \u30b3\u30fc\u30c9\uff08StatusCode\uff09\u3068 \u30e1\u30c3\u30bb\u30fc\u30b8\u3001\u30aa\u30d7\u30b7\u30e7\u30f3\u3067 \u8a73\u7d30\u60c5\u5831 \u3092\u542b\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p></p>"},{"location":"article/study/study2-3/#172-grpc","title":"17.2 gRPC \u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9","text":"\u30b3\u30fc\u30c9\u4f8b: GrpcStatusCode.java <pre><code>/**\n * gRPC \u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3068\u30d3\u30b8\u30cd\u30b9\u4f8b\u5916\u306e\u30de\u30c3\u30d4\u30f3\u30b0\n */\npublic enum GrpcStatusCode {\n\n    // \u6210\u529f\n    OK(Status.OK, \"\u6b63\u5e38\u7d42\u4e86\"),\n\n    // \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30a8\u30e9\u30fc\n    INVALID_ARGUMENT(Status.INVALID_ARGUMENT, \"\u4e0d\u6b63\u306a\u5f15\u6570\"),\n    NOT_FOUND(Status.NOT_FOUND, \"\u30ea\u30bd\u30fc\u30b9\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\"),\n    ALREADY_EXISTS(Status.ALREADY_EXISTS, \"\u30ea\u30bd\u30fc\u30b9\u304c\u65e2\u306b\u5b58\u5728\u3057\u307e\u3059\"),\n    PERMISSION_DENIED(Status.PERMISSION_DENIED, \"\u6a29\u9650\u304c\u3042\u308a\u307e\u305b\u3093\"),\n    FAILED_PRECONDITION(Status.FAILED_PRECONDITION, \"\u524d\u63d0\u6761\u4ef6\u304c\u6e80\u305f\u3055\u308c\u3066\u3044\u307e\u305b\u3093\"),\n\n    // \u30b5\u30fc\u30d0\u30fc\u30a8\u30e9\u30fc\n    INTERNAL(Status.INTERNAL, \"\u5185\u90e8\u30a8\u30e9\u30fc\"),\n    UNAVAILABLE(Status.UNAVAILABLE, \"\u30b5\u30fc\u30d3\u30b9\u5229\u7528\u4e0d\u53ef\"),\n\n    // \u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\n    DEADLINE_EXCEEDED(Status.DEADLINE_EXCEEDED, \"\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\"),\n    CANCELLED(Status.CANCELLED, \"\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u307e\u3057\u305f\"),\n\n    // \u8a8d\u8a3c\n    UNAUTHENTICATED(Status.UNAUTHENTICATED, \"\u8a8d\u8a3c\u304c\u5fc5\u8981\u3067\u3059\");\n\n    /**\n     * \u30ea\u30c8\u30e9\u30a4\u53ef\u80fd\u306a\u30b9\u30c6\u30fc\u30bf\u30b9\u304b\u3069\u3046\u304b\n     */\n    public boolean isRetryable() {\n        return this == UNAVAILABLE ||\n               this == DEADLINE_EXCEEDED ||\n               this == INTERNAL;\n    }\n}\n</code></pre>"},{"location":"article/study/study2-3/#173","title":"17.3 \u30ab\u30b9\u30bf\u30e0\u4f8b\u5916\u30af\u30e9\u30b9","text":"\u30b3\u30fc\u30c9\u4f8b: GrpcException.java <pre><code>/**\n * gRPC \u7528\u30ab\u30b9\u30bf\u30e0\u4f8b\u5916\n */\npublic class GrpcException extends RuntimeException {\n\n    private final GrpcStatusCode statusCode;\n    private final Map&lt;String, String&gt; details;\n    private final boolean retryable;\n    private final long retryDelayMillis;\n\n    // \u4fbf\u5229\u306a\u30d5\u30a1\u30af\u30c8\u30ea\u30e1\u30bd\u30c3\u30c9\n    public static GrpcException notFound(String resource, String identifier) {\n        return builder(GrpcStatusCode.NOT_FOUND)\n            .message(resource + \" \u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + identifier)\n            .detail(\"resource\", resource)\n            .detail(\"identifier\", identifier)\n            .build();\n    }\n\n    public static GrpcException invalidArgument(String field, String reason) {\n        return builder(GrpcStatusCode.INVALID_ARGUMENT)\n            .message(\"\u4e0d\u6b63\u306a\u5f15\u6570: \" + field + \" - \" + reason)\n            .detail(\"field\", field)\n            .detail(\"reason\", reason)\n            .build();\n    }\n\n    public static GrpcException failedPrecondition(String condition) {\n        return builder(GrpcStatusCode.FAILED_PRECONDITION)\n            .message(\"\u524d\u63d0\u6761\u4ef6\u304c\u6e80\u305f\u3055\u308c\u3066\u3044\u307e\u305b\u3093: \" + condition)\n            .detail(\"condition\", condition)\n            .build();\n    }\n\n    public static GrpcException unavailable(String service, long retryDelayMillis) {\n        return builder(GrpcStatusCode.UNAVAILABLE)\n            .message(\"\u30b5\u30fc\u30d3\u30b9\u5229\u7528\u4e0d\u53ef: \" + service)\n            .retryable(true)\n            .retryDelayMillis(retryDelayMillis)\n            .build();\n    }\n\n    public Status toStatus() {\n        return statusCode.getStatus().withDescription(getMessage());\n    }\n}\n</code></pre>"},{"location":"article/study/study2-3/#174","title":"17.4 \u4f8b\u5916\u5909\u63db\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc","text":"\u30b3\u30fc\u30c9\u4f8b: ExceptionTranslationInterceptor.java <pre><code>/**\n * \u4f8b\u5916\u3092 gRPC Status \u306b\u5909\u63db\u3059\u308b\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\n */\n@GrpcGlobalServerInterceptor\npublic class ExceptionTranslationInterceptor implements ServerInterceptor {\n\n    private StatusRuntimeException translateException(Exception e) {\n        // GrpcException \u306e\u5834\u5408\n        if (e instanceof GrpcException grpcEx) {\n            return createStatusException(grpcEx);\n        }\n\n        // \u30c9\u30e1\u30a4\u30f3\u4f8b\u5916\u306e\u5909\u63db\n        if (e instanceof EntityNotFoundException notFound) {\n            return createNotFoundStatus(notFound);\n        }\n\n        if (e instanceof ValidationException validation) {\n            return createValidationStatus(validation);\n        }\n\n        if (e instanceof BusinessException business) {\n            return createBusinessStatus(business);\n        }\n\n        // \u305d\u306e\u4ed6\u306f\u5185\u90e8\u30a8\u30e9\u30fc\n        return createInternalStatus(e);\n    }\n\n    private StatusRuntimeException createValidationStatus(ValidationException e) {\n        BadRequest.Builder badRequest = BadRequest.newBuilder();\n\n        e.getViolations().forEach(violation -&gt;\n            badRequest.addFieldViolations(\n                BadRequest.FieldViolation.newBuilder()\n                    .setField(violation.field())\n                    .setDescription(violation.message())\n                    .build()\n            )\n        );\n\n        com.google.rpc.Status status = com.google.rpc.Status.newBuilder()\n            .setCode(Status.INVALID_ARGUMENT.getCode().value())\n            .setMessage(\"\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\")\n            .addDetails(Any.pack(badRequest.build()))\n            .build();\n\n        return StatusProto.toStatusRuntimeException(status);\n    }\n}\n</code></pre>"},{"location":"article/study/study2-3/#175","title":"17.5 \u30ea\u30c8\u30e9\u30a4\u8a2d\u5b9a","text":"\u30b3\u30fc\u30c9\u4f8b: GrpcRetryConfig.java <pre><code>/**\n * \u30ea\u30c8\u30e9\u30a4\u30dd\u30ea\u30b7\u30fc\u8a2d\u5b9a\n */\n@Configuration\npublic class GrpcRetryConfig {\n\n    @Bean\n    public RetryPolicy retryPolicy() {\n        return RetryPolicy.builder()\n            .maxAttempts(3)\n            .initialBackoff(Duration.ofMillis(500))\n            .maxBackoff(Duration.ofSeconds(10))\n            .backoffMultiplier(2.0)\n            .retryableStatusCodes(Set.of(\n                Status.Code.UNAVAILABLE,\n                Status.Code.DEADLINE_EXCEEDED,\n                Status.Code.INTERNAL\n            ))\n            .build();\n    }\n}\n</code></pre>"},{"location":"article/study/study2-3/#176","title":"17.6 \u56de\u8def\u30d6\u30ec\u30fc\u30ab\u30fc","text":"\u30b3\u30fc\u30c9\u4f8b: GrpcCircuitBreaker.java <pre><code>/**\n * gRPC \u56de\u8def\u30d6\u30ec\u30fc\u30ab\u30fc\n */\npublic class GrpcCircuitBreaker {\n\n    public enum State {\n        CLOSED,      // \u6b63\u5e38\uff08\u30ea\u30af\u30a8\u30b9\u30c8\u8a31\u53ef\uff09\n        OPEN,        // \u906e\u65ad\uff08\u30ea\u30af\u30a8\u30b9\u30c8\u62d2\u5426\uff09\n        HALF_OPEN    // \u8a66\u884c\u4e2d\n    }\n\n    private final int failureThreshold;\n    private final int successThreshold;\n    private final Duration openStateTimeout;\n\n    private volatile State state = State.CLOSED;\n    private final AtomicInteger failureCount = new AtomicInteger(0);\n    private final AtomicInteger successCount = new AtomicInteger(0);\n    private volatile Instant lastFailureTime;\n\n    public boolean allowRequest() {\n        return switch (state) {\n            case CLOSED -&gt; true;\n            case OPEN -&gt; shouldAttemptReset();\n            case HALF_OPEN -&gt; true;\n        };\n    }\n\n    private boolean shouldAttemptReset() {\n        if (lastFailureTime == null) {\n            return false;\n        }\n        if (Duration.between(lastFailureTime, Instant.now())\n                    .compareTo(openStateTimeout) &gt; 0) {\n            state = State.HALF_OPEN;\n            return true;\n        }\n        return false;\n    }\n\n    public void recordSuccess() {\n        if (state == State.HALF_OPEN) {\n            if (successCount.incrementAndGet() &gt;= successThreshold) {\n                reset();\n            }\n        } else {\n            failureCount.set(0);\n        }\n    }\n\n    public void recordFailure() {\n        lastFailureTime = Instant.now();\n        if (state == State.HALF_OPEN) {\n            trip();\n        } else if (failureCount.incrementAndGet() &gt;= failureThreshold) {\n            trip();\n        }\n    }\n\n    private void trip() {\n        state = State.OPEN;\n        failureCount.set(0);\n        successCount.set(0);\n    }\n\n    private void reset() {\n        state = State.CLOSED;\n        failureCount.set(0);\n        successCount.set(0);\n    }\n}\n</code></pre>"},{"location":"article/study/study2-3/#177","title":"17.7 \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\u30b5\u30fc\u30d3\u30b9","text":"\u30b3\u30fc\u30c9\u4f8b: HealthCheckService.java <pre><code>/**\n * gRPC \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\u30b5\u30fc\u30d3\u30b9\n */\n@GrpcService\npublic class HealthCheckService extends HealthGrpc.HealthImplBase {\n\n    private final Map&lt;String, HealthCheckResponse.ServingStatus&gt; serviceStatuses =\n        new ConcurrentHashMap&lt;&gt;();\n\n    public HealthCheckService() {\n        // \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u5168\u30b5\u30fc\u30d3\u30b9\u3092 SERVING \u306b\u8a2d\u5b9a\n        setServiceStatus(\"\", HealthCheckResponse.ServingStatus.SERVING);\n        setServiceStatus(\"com.example.sales.ProductService\",\n                         HealthCheckResponse.ServingStatus.SERVING);\n        setServiceStatus(\"com.example.sales.OrderService\",\n                         HealthCheckResponse.ServingStatus.SERVING);\n    }\n\n    @Override\n    public void check(HealthCheckRequest request,\n                      StreamObserver&lt;HealthCheckResponse&gt; responseObserver) {\n        String service = request.getService();\n        HealthCheckResponse.ServingStatus status = serviceStatuses.getOrDefault(\n            service,\n            HealthCheckResponse.ServingStatus.SERVICE_UNKNOWN\n        );\n\n        HealthCheckResponse response = HealthCheckResponse.newBuilder()\n            .setStatus(status)\n            .build();\n\n        responseObserver.onNext(response);\n        responseObserver.onCompleted();\n    }\n\n    @Override\n    public void watch(HealthCheckRequest request,\n                      StreamObserver&lt;HealthCheckResponse&gt; responseObserver) {\n        // \u7d99\u7d9a\u7684\u306a\u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\u76e3\u8996\n        String service = request.getService();\n\n        // \u521d\u671f\u72b6\u614b\u3092\u9001\u4fe1\n        HealthCheckResponse.ServingStatus status = serviceStatuses.getOrDefault(\n            service,\n            HealthCheckResponse.ServingStatus.SERVICE_UNKNOWN\n        );\n\n        responseObserver.onNext(HealthCheckResponse.newBuilder()\n            .setStatus(status)\n            .build());\n\n        // \u72b6\u614b\u5909\u66f4\u6642\u306b\u901a\u77e5\uff08\u5b9f\u88c5\u7701\u7565\uff09\n    }\n}\n</code></pre>"},{"location":"article/study/study2-3/#178","title":"17.8 \u30d5\u30ed\u30fc\u5236\u5fa1\u4ed8\u304d\u30b9\u30c8\u30ea\u30fc\u30e0\u30aa\u30d6\u30b6\u30fc\u30d0\u30fc","text":"\u30b3\u30fc\u30c9\u4f8b: FlowControlledStreamObserver.java <pre><code>/**\n * \u30d5\u30ed\u30fc\u5236\u5fa1\u4ed8\u304d\u30b9\u30c8\u30ea\u30fc\u30e0\u30aa\u30d6\u30b6\u30fc\u30d0\u30fc\n */\npublic class FlowControlledStreamObserver&lt;T&gt; implements StreamObserver&lt;T&gt; {\n\n    private final CallStreamObserver&lt;T&gt; delegate;\n    private final Queue&lt;T&gt; buffer;\n    private final int maxBufferSize;\n    private final AtomicBoolean completed;\n\n    public FlowControlledStreamObserver(CallStreamObserver&lt;T&gt; delegate, int maxBufferSize) {\n        this.delegate = delegate;\n        this.buffer = new ConcurrentLinkedQueue&lt;&gt;();\n        this.maxBufferSize = maxBufferSize;\n        this.completed = new AtomicBoolean(false);\n\n        // \u30d0\u30c3\u30af\u30d7\u30ec\u30c3\u30b7\u30e3\u30fc\u8a2d\u5b9a\n        delegate.setOnReadyHandler(this::drainBuffer);\n    }\n\n    @Override\n    public void onNext(T value) {\n        if (completed.get()) {\n            return;\n        }\n\n        if (delegate.isReady()) {\n            delegate.onNext(value);\n        } else {\n            if (buffer.size() &gt;= maxBufferSize) {\n                return; // \u30d0\u30c3\u30d5\u30a1\u6e80\u676f\u6642\u306f\u7834\u68c4\n            }\n            buffer.offer(value);\n        }\n    }\n\n    private void drainBuffer() {\n        while (delegate.isReady() &amp;&amp; !buffer.isEmpty()) {\n            T value = buffer.poll();\n            if (value != null) {\n                delegate.onNext(value);\n            }\n        }\n\n        if (completed.get() &amp;&amp; buffer.isEmpty()) {\n            delegate.onCompleted();\n        }\n    }\n}\n</code></pre>"},{"location":"article/study/study2-3/#part-10-d","title":"Part 10-D \u306e\u307e\u3068\u3081","text":""},{"location":"article/study/study2-3/#_2","title":"\u5b9f\u88c5\u3057\u305f\u6a5f\u80fd\u4e00\u89a7","text":"\u7ae0 \u5185\u5bb9 \u4e3b\u8981\u6280\u8853 \u7b2c14\u7ae0: \u57fa\u790e gRPC \u30b5\u30fc\u30d0\u30fc\u306e\u57fa\u790e Protocol Buffers, HTTP/2, grpc-spring-boot-starter \u7b2c15\u7ae0: \u30de\u30b9\u30bf API \u5546\u54c1\u30fb\u53d6\u5f15\u5148\u30fb\u5009\u5eab\u30de\u30b9\u30bf \u5358\u9805 RPC, \u30b5\u30fc\u30d0\u30fc\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 \u7b2c16\u7ae0: \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3 API \u53d7\u6ce8\u30fb\u51fa\u8377\u30fb\u8acb\u6c42\u51e6\u7406 \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0, \u53cc\u65b9\u5411\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 \u7b2c17\u7ae0: \u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0 \u30ea\u30c8\u30e9\u30a4, \u56de\u8def\u30d6\u30ec\u30fc\u30ab\u30fc, \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af gRPC Status, \u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc"},{"location":"article/study/study2-3/#grpc","title":"\u5b9f\u88c5\u3057\u305f gRPC \u30b5\u30fc\u30d3\u30b9","text":"<ul> <li>ProductService: \u5546\u54c1\u30de\u30b9\u30bf\u306e CRUD\u3001\u4e00\u89a7\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u3001\u4e00\u62ec\u767b\u9332</li> <li>PartnerService: \u53d6\u5f15\u5148\u30de\u30b9\u30bf\u306e CRUD\u3001\u4e00\u89a7\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u3001\u4e0e\u4fe1\u30c1\u30a7\u30c3\u30af</li> <li>WarehouseService: \u5009\u5eab\u30de\u30b9\u30bf\u306e CRUD\u3001\u5728\u5eab\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0</li> <li>OrderService: \u53d7\u6ce8\u306e CRUD\u3001\u78ba\u5b9a\u3001\u30ad\u30e3\u30f3\u30bb\u30eb\u3001\u30b9\u30c6\u30fc\u30bf\u30b9\u76e3\u8996\u3001\u660e\u7d30\u4e00\u62ec\u767b\u9332</li> <li>ShipmentService: \u51fa\u8377\u6307\u793a\u3001\u30d4\u30c3\u30ad\u30f3\u30b0\u3001\u51fa\u8377\u78ba\u5b9a\u3001\u9032\u6357\u76e3\u8996\u3001\u4e00\u62ec\u78ba\u5b9a</li> <li>InvoiceService: \u7de0\u51e6\u7406\u3001\u767a\u884c\u3001\u5165\u91d1\u8a18\u9332\u3001\u53cc\u65b9\u5411\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u51e6\u7406</li> </ul>"},{"location":"article/study/study2-3/#_3","title":"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u7279\u5fb4","text":"<pre><code>                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502         \u30d7\u30ec\u30bc\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u5c64          \u2502\n                    \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n                    \u2502  \u2502 REST API \u2502  \u2502 GraphQL \u2502  \u2502 gRPC \u2502 \u2502\n                    \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                      \u2502\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502         \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64           \u2502\n                    \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n                    \u2502  \u2502      \u30e6\u30fc\u30b9\u30b1\u30fc\u30b9 / \u30b5\u30fc\u30d3\u30b9     \u2502  \u2502\n                    \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                      \u2502\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502            \u30c9\u30e1\u30a4\u30f3\u5c64               \u2502\n                    \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n                    \u2502  \u2502 \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 \u2502  \u2502 \u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8 \u2502  \u2502 \u30ea\u30dd\u30b8\u30c8\u30ea \u2502  \u2502\n                    \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>gRPC \u306f REST API\u3001GraphQL \u3068\u4e26\u3076\u30d7\u30ec\u30bc\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u5c64\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3068\u3057\u3066\u6a5f\u80fd\u3057\u3001\u9ad8\u6027\u80fd\u306a\u30d0\u30a4\u30ca\u30ea\u901a\u4fe1\u3068\u53cc\u65b9\u5411\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u306b\u3088\u308a\u3001\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u6027\u304c\u6c42\u3081\u3089\u308c\u308b\u30b7\u30b9\u30c6\u30e0\u9593\u9023\u643a\u306b\u9069\u3057\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"article/study/study2-3/#_4","title":"\u6280\u8853\u30b9\u30bf\u30c3\u30af","text":"\u30ab\u30c6\u30b4\u30ea \u6280\u8853 \u8a00\u8a9e Java 21 \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af Spring Boot 4.0, grpc-spring-boot-starter 3.1 \u30d7\u30ed\u30c8\u30b3\u30eb gRPC 1.62, Protocol Buffers 3.25 ORM MyBatis 3.0 \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9 PostgreSQL 16 \u30c6\u30b9\u30c8 JUnit 5, grpc-testing, TestContainers"},{"location":"article/study/study2-3/#api","title":"API \u5f62\u5f0f\u306e\u6bd4\u8f03\u3068\u9078\u629e\u57fa\u6e96","text":"\u89b3\u70b9 REST API gRPC GraphQL \u7528\u9014 \u6c4e\u7528 Web API \u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u9593 \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u5411\u3051 \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9 \u4e2d \u9ad8 \u4e2d \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 WebSocket \u5225\u5b9f\u88c5 \u30cd\u30a4\u30c6\u30a3\u30d6 Subscription \u30b9\u30ad\u30fc\u30de OpenAPI (\u4efb\u610f) .proto (\u5fc5\u9808) .graphqls (\u5fc5\u9808) \u30d6\u30e9\u30a6\u30b6\u5bfe\u5fdc \u25ce \u25b3 (gRPC-Web) \u25ce \u5b66\u7fd2\u30b3\u30b9\u30c8 \u4f4e \u4e2d \u4e2d"},{"location":"article/study/study2-3/#grpc_1","title":"gRPC \u3092\u9078\u629e\u3059\u308b\u5834\u9762","text":"<ol> <li>\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u9593\u901a\u4fe1: \u9ad8\u6027\u80fd\u306a\u5185\u90e8\u901a\u4fe1\u304c\u5fc5\u8981</li> <li>\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u51e6\u7406: \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u306b\u3088\u308b\u9032\u6357\u901a\u77e5\u304c\u5fc5\u8981</li> <li>\u591a\u8a00\u8a9e\u74b0\u5883: \u7570\u306a\u308b\u8a00\u8a9e\u3067\u5b9f\u88c5\u3055\u308c\u305f\u30b5\u30fc\u30d3\u30b9\u9593\u306e\u9023\u643a</li> <li>\u4f4e\u30ec\u30a4\u30c6\u30f3\u30b7: \u30d0\u30a4\u30ca\u30ea\u30d7\u30ed\u30c8\u30b3\u30eb\u306b\u3088\u308b\u9ad8\u901f\u901a\u4fe1\u304c\u5fc5\u8981</li> <li>\u53cc\u65b9\u5411\u901a\u4fe1: \u5bfe\u8a71\u7684\u306a\u51e6\u7406\u30d5\u30ed\u30fc\u304c\u5fc5\u8981</li> </ol> <p>gRPC \u30b5\u30fc\u30d3\u30b9\u306f\u3001\u65e2\u5b58\u306e\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u6d3b\u304b\u3057\u306a\u304c\u3089\u3001Input Adapter \u3068\u3057\u3066\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3067\u3001REST API \u3068\u4e26\u884c\u904b\u7528\u304c\u53ef\u80fd\u3067\u3059\u3002\u7528\u9014\u306b\u5fdc\u3058\u3066\u9069\u5207\u306a API \u5f62\u5f0f\u3092\u9078\u629e\u3057\u3001\u30b7\u30b9\u30c6\u30e0\u5168\u4f53\u306e\u52b9\u7387\u3068\u67d4\u8edf\u6027\u3092\u9ad8\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"article/study/study2-4/","title":"\u5b9f\u8df5\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\uff1a\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 \u7814\u7a76 4 - GraphQL \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":""},{"location":"article/study/study2-4/#_1","title":"\u306f\u3058\u3081\u306b","text":"<p>\u672c\u7814\u7a76\u3067\u306f\u3001REST API\uff08\u7b2c10\u90e8-A\uff09\u3084 gRPC\uff08\u7814\u7a76 3\uff09\u3068\u306f\u7570\u306a\u308b\u30a2\u30d7\u30ed\u30fc\u30c1\u3068\u3057\u3066\u3001GraphQL \u306b\u3088\u308b\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u5fc5\u8981\u306a\u30c7\u30fc\u30bf\u3092\u6b63\u78ba\u306b\u6307\u5b9a\u3067\u304d\u308b\u67d4\u8edf\u306a\u30af\u30a8\u30ea\u3068\u3001\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u66f4\u65b0\u3092\u5b9f\u73fe\u3059\u308b Subscription \u3092\u6d3b\u7528\u3057\u307e\u3059\u3002</p> <p>\u7814\u7a76 1 \u3067\u69cb\u7bc9\u3057\u305f\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u30c9\u30e1\u30a4\u30f3\u5c64\u30fb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff09\u306f\u305d\u306e\u307e\u307e\u5171\u6709\u3057\u3001Input Adapter \u3068\u3057\u3066 GraphQL \u30ea\u30be\u30eb\u30d0\u5c64\u306e\u307f\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p>"},{"location":"article/study/study2-4/#14graphql","title":"\u7b2c14\u7ae0\uff1aGraphQL \u30b5\u30fc\u30d0\u30fc\u306e\u57fa\u790e","text":""},{"location":"article/study/study2-4/#141-graphql","title":"14.1 GraphQL \u3068\u306f","text":"<p>GraphQL \u306f Facebook \u304c\u958b\u767a\u3057\u305f\u30af\u30a8\u30ea\u8a00\u8a9e\u304a\u3088\u3073\u5b9f\u884c\u30a8\u30f3\u30b8\u30f3\u3067\u3059\u3002\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u5fc5\u8981\u306a\u30c7\u30fc\u30bf\u306e\u5f62\u72b6\u3092\u6307\u5b9a\u3067\u304d\u3001Over-fetching\uff08\u4e0d\u8981\u306a\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\uff09\u3084 Under-fetching\uff08\u5fc5\u8981\u306a\u30c7\u30fc\u30bf\u306e\u4e0d\u8db3\uff09\u3092\u9632\u304e\u307e\u3059\u3002</p> <p></p> <p>REST API / gRPC / GraphQL \u306e\u6bd4\u8f03\uff1a</p> \u7279\u5fb4 REST API gRPC GraphQL \u30d7\u30ed\u30c8\u30b3\u30eb HTTP/1.1 HTTP/2 HTTP/1.1 or HTTP/2 \u30c7\u30fc\u30bf\u5f62\u5f0f JSON Protocol Buffers JSON \u30b9\u30ad\u30fc\u30de OpenAPI (\u4efb\u610f) .proto (\u5fc5\u9808) .graphqls (\u5fc5\u9808) \u30c7\u30fc\u30bf\u53d6\u5f97 \u56fa\u5b9a\u30ec\u30b9\u30dd\u30f3\u30b9 \u56fa\u5b9a\u30ec\u30b9\u30dd\u30f3\u30b9 \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u6307\u5b9a \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 \u8907\u6570 \u8907\u6570 \u5358\u4e00 \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0 WebSocket \u5225\u5b9f\u88c5 \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 Subscription \u4e3b\u306a\u7528\u9014 \u6c4e\u7528 API \u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9 \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u5411\u3051"},{"location":"article/study/study2-4/#142-3","title":"14.2 3\u3064\u306e\u64cd\u4f5c\u30bf\u30a4\u30d7","text":"<p>GraphQL \u306f 3 \u3064\u306e\u64cd\u4f5c\u30bf\u30a4\u30d7\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u307e\u3059\uff1a</p> <p></p> <p>\u7528\u9014\uff1a</p> <ol> <li>Query: \u30c7\u30fc\u30bf\u53d6\u5f97\uff08\u5546\u54c1\u4e00\u89a7\u3001\u53d7\u6ce8\u660e\u7d30\u3001\u5728\u5eab\u7167\u4f1a\uff09</li> <li>Mutation: \u30c7\u30fc\u30bf\u66f4\u65b0\uff08\u53d7\u6ce8\u767b\u9332\u3001\u51fa\u8377\u78ba\u5b9a\u3001\u5165\u91d1\u51e6\u7406\uff09</li> <li>Subscription: \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u901a\u77e5\uff08\u53d7\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\u5909\u66f4\u3001\u5728\u5eab\u5909\u52d5\uff09</li> </ol>"},{"location":"article/study/study2-4/#143-graphql","title":"14.3 GraphQL \u306b\u304a\u3051\u308b\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":"<p>GraphQL \u3092\u5c0e\u5165\u3057\u3066\u3082\u3001\u65e2\u5b58\u306e\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u30c9\u30e1\u30a4\u30f3\u5c64\u30fb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff09\u306f\u305d\u306e\u307e\u307e\u5171\u6709\u3057\u3001Input Adapter \u3068\u3057\u3066 GraphQL \u30ea\u30be\u30eb\u30d0\u5c64\u306e\u307f\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> <p></p> <p>GraphQL \u3067\u3082\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u7dad\u6301\u3059\u308b\u7406\u7531\uff1a</p> <ol> <li>\u518d\u5229\u7528\u6027: \u65e2\u5b58\u306e UseCase/Repository \u3092\u305d\u306e\u307e\u307e\u6d3b\u7528</li> <li>\u4e26\u884c\u904b\u7528: REST API\u3001gRPC\u3001GraphQL \u3092\u540c\u6642\u63d0\u4f9b\u53ef\u80fd</li> <li>\u30c6\u30b9\u30c8\u5bb9\u6613\u6027: \u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\u306f\u901a\u4fe1\u30d7\u30ed\u30c8\u30b3\u30eb\u306b\u4f9d\u5b58\u3057\u306a\u3044</li> <li>\u79fb\u884c\u5bb9\u6613\u6027: \u6bb5\u968e\u7684\u306b API \u5f62\u5f0f\u3092\u8ffd\u52a0\u30fb\u5909\u66f4\u53ef\u80fd</li> </ol>"},{"location":"article/study/study2-4/#144","title":"14.4 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210","text":"<p>\u65e2\u5b58\u306e\u69cb\u6210\u306b <code>infrastructure/graphql/</code> \u3092\u8ffd\u52a0\u3059\u308b\u3060\u3051\u3067\u3059\u3002</p> \u30b3\u30fc\u30c9\u4f8b: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210 <pre><code>src/main/java/com/example/sales/\n\u251c\u2500\u2500 domain/                     # \u30c9\u30e1\u30a4\u30f3\u5c64\uff08API\u7248\u3068\u5171\u901a\uff09\n\u2502   \u251c\u2500\u2500 model/\n\u2502   \u2502   \u251c\u2500\u2500 product/\n\u2502   \u2502   \u251c\u2500\u2500 partner/\n\u2502   \u2502   \u251c\u2500\u2500 order/\n\u2502   \u2502   \u251c\u2500\u2500 shipment/\n\u2502   \u2502   \u2514\u2500\u2500 invoice/\n\u2502   \u2514\u2500\u2500 exception/\n\u2502\n\u251c\u2500\u2500 application/               # \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff08API\u7248\u3068\u5171\u901a\uff09\n\u2502   \u251c\u2500\u2500 port/\n\u2502   \u2502   \u251c\u2500\u2500 in/               # Input Port\uff08\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\uff09\n\u2502   \u2502   \u2514\u2500\u2500 out/              # Output Port\uff08\u30ea\u30dd\u30b8\u30c8\u30ea\uff09\n\u2502   \u2514\u2500\u2500 service/\n\u2502\n\u251c\u2500\u2500 infrastructure/\n\u2502   \u251c\u2500\u2500 persistence/          # Output Adapter\uff08DB\u5b9f\u88c5\uff09- \u65e2\u5b58\n\u2502   \u2502   \u251c\u2500\u2500 mapper/\n\u2502   \u2502   \u2514\u2500\u2500 repository/\n\u2502   \u251c\u2500\u2500 rest/                 # Input Adapter\uff08REST\u5b9f\u88c5\uff09- \u65e2\u5b58\n\u2502   \u251c\u2500\u2500 grpc/                 # Input Adapter\uff08gRPC\u5b9f\u88c5\uff09- \u65e2\u5b58\n\u2502   \u2514\u2500\u2500 graphql/              # Input Adapter\uff08GraphQL\u5b9f\u88c5\uff09- \u65b0\u898f\u8ffd\u52a0\n\u2502       \u251c\u2500\u2500 resolver/         # Query/Mutation \u30ea\u30be\u30eb\u30d0\n\u2502       \u251c\u2500\u2500 dataloader/       # N+1 \u554f\u984c\u5bfe\u7b56\n\u2502       \u251c\u2500\u2500 scalar/           # \u30ab\u30b9\u30bf\u30e0\u30b9\u30ab\u30e9\u30fc\u578b\n\u2502       \u2514\u2500\u2500 subscription/     # Subscription \u30cf\u30f3\u30c9\u30e9\n\u2502\n\u251c\u2500\u2500 config/\n\u2502\n\u2514\u2500\u2500 src/main/resources/\n    \u2514\u2500\u2500 graphql/              # GraphQL \u30b9\u30ad\u30fc\u30de\u5b9a\u7fa9\n        \u251c\u2500\u2500 schema.graphqls\n        \u251c\u2500\u2500 product.graphqls\n        \u251c\u2500\u2500 partner.graphqls\n        \u251c\u2500\u2500 order.graphqls\n        \u251c\u2500\u2500 shipment.graphqls\n        \u2514\u2500\u2500 invoice.graphqls\n</code></pre>"},{"location":"article/study/study2-4/#145","title":"14.5 \u6280\u8853\u30b9\u30bf\u30c3\u30af\u306e\u8ffd\u52a0","text":"<p>\u65e2\u5b58\u306e <code>build.gradle.kts</code> \u306b GraphQL \u95a2\u9023\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p>"},{"location":"article/study/study2-4/#buildgradlekts","title":"build.gradle.kts\uff08\u5dee\u5206\uff09","text":"\u30b3\u30fc\u30c9\u4f8b: build.gradle.kts <pre><code>dependencies {\n    // \u65e2\u5b58\u306e\u4f9d\u5b58\u95a2\u4fc2\uff08Spring Boot, MyBatis, PostgreSQL\u7b49\uff09\u306f\u305d\u306e\u307e\u307e\n\n    // GraphQL \u95a2\u9023\u3092\u8ffd\u52a0\n    implementation(\"org.springframework.boot:spring-boot-starter-graphql\")\n    implementation(\"org.springframework.boot:spring-boot-starter-websocket\")  // Subscription \u7528\n\n    // GraphQL \u62e1\u5f35\n    implementation(\"com.graphql-java:graphql-java-extended-scalars:21.0\")\n\n    // Test\n    testImplementation(\"org.springframework.graphql:spring-graphql-test\")\n}\n</code></pre> <p>\u8ffd\u52a0\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u8aac\u660e\uff1a</p> \u30d1\u30c3\u30b1\u30fc\u30b8 \u7528\u9014 spring-boot-starter-graphql Spring Boot GraphQL \u7d71\u5408 spring-boot-starter-websocket Subscription (WebSocket) graphql-java-extended-scalars DateTime, BigDecimal \u7b49\u306e\u30b9\u30ab\u30e9\u30fc\u578b spring-graphql-test GraphQL \u30c6\u30b9\u30c8\u30b5\u30dd\u30fc\u30c8"},{"location":"article/study/study2-4/#applicationyml","title":"application.yml\uff08\u5dee\u5206\uff09","text":"\u30b3\u30fc\u30c9\u4f8b: application.yml <pre><code>spring:\n  graphql:\n    graphiql:\n      enabled: true\n      path: /graphiql\n    websocket:\n      path: /graphql\n      connection-init-timeout: 60s\n      keep-alive:\n        enabled: true\n        interval: 30s\n    schema:\n      printer:\n        enabled: true\n      locations:\n        - classpath:graphql/\n    cors:\n      allowed-origins: \"*\"\n      allowed-methods: GET, POST\n</code></pre>"},{"location":"article/study/study2-4/#146-graphql","title":"14.6 GraphQL \u8a2d\u5b9a\u30af\u30e9\u30b9","text":"\u30b3\u30fc\u30c9\u4f8b: GraphQLConfig.java <pre><code>package com.example.sales.config;\n\nimport graphql.scalars.ExtendedScalars;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.graphql.execution.RuntimeWiringConfigurer;\n\n/**\n * GraphQL \u8a2d\u5b9a\n */\n@Configuration\npublic class GraphQLConfig {\n\n    @Bean\n    public RuntimeWiringConfigurer runtimeWiringConfigurer() {\n        return wiringBuilder -&gt; wiringBuilder\n            .scalar(ExtendedScalars.Date)\n            .scalar(ExtendedScalars.DateTime)\n            .scalar(ExtendedScalars.GraphQLBigDecimal)\n            .scalar(ExtendedScalars.GraphQLLong);\n    }\n}\n</code></pre>"},{"location":"article/study/study2-4/#147-graphql","title":"14.7 GraphQL \u30b9\u30ad\u30fc\u30de\u5b9a\u7fa9","text":""},{"location":"article/study/study2-4/#srcmainresourcesgraphqlschemagraphqls","title":"src/main/resources/graphql/schema.graphqls","text":"\u30b3\u30fc\u30c9\u4f8b: schema.graphqls <pre><code># \u30eb\u30fc\u30c8\u30b9\u30ad\u30fc\u30de\ntype Query {\n    # \u5546\u54c1\n    product(productCode: ID!): Product\n    products(category: ProductCategory, page: Int, size: Int): ProductConnection!\n\n    # \u53d6\u5f15\u5148\n    partner(partnerCode: ID!): Partner\n    partners(type: PartnerType, page: Int, size: Int): PartnerConnection!\n\n    # \u5009\u5eab\n    warehouse(warehouseCode: ID!): Warehouse\n    warehouses(page: Int, size: Int): WarehouseConnection!\n\n    # \u53d7\u6ce8\n    order(orderNumber: ID!): Order\n    orders(status: OrderStatus, partnerCode: ID, page: Int, size: Int): OrderConnection!\n\n    # \u51fa\u8377\n    shipment(shipmentNumber: ID!): Shipment\n    shipments(status: ShipmentStatus, page: Int, size: Int): ShipmentConnection!\n\n    # \u8acb\u6c42\n    invoice(invoiceNumber: ID!): Invoice\n    invoices(status: InvoiceStatus, partnerCode: ID, page: Int, size: Int): InvoiceConnection!\n}\n\ntype Mutation {\n    # \u5546\u54c1\n    createProduct(input: CreateProductInput!): Product!\n    updateProduct(input: UpdateProductInput!): Product!\n    deleteProduct(productCode: ID!): Boolean!\n\n    # \u53d6\u5f15\u5148\n    createPartner(input: CreatePartnerInput!): Partner!\n    updatePartner(input: UpdatePartnerInput!): Partner!\n\n    # \u53d7\u6ce8\n    createOrder(input: CreateOrderInput!): Order!\n    confirmOrder(orderNumber: ID!): Order!\n    cancelOrder(orderNumber: ID!, reason: String): Order!\n\n    # \u51fa\u8377\n    createShipment(input: CreateShipmentInput!): Shipment!\n    startPicking(shipmentNumber: ID!): Shipment!\n    confirmShipment(shipmentNumber: ID!): Shipment!\n\n    # \u8acb\u6c42\n    executeClosing(input: ExecuteClosingInput!): ClosingResult!\n    issueInvoice(invoiceNumber: ID!): Invoice!\n    recordReceipt(input: RecordReceiptInput!): Receipt!\n}\n\ntype Subscription {\n    # \u53d7\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\u5909\u66f4\n    orderStatusChanged(orderNumber: ID): OrderStatusChange!\n\n    # \u51fa\u8377\u9032\u6357\n    shipmentProgressUpdated(shipmentNumber: ID): ShipmentProgress!\n\n    # \u5728\u5eab\u5909\u52d5\n    inventoryChanged(warehouseCode: ID, productCode: ID): InventoryChange!\n\n    # \u7de0\u51e6\u7406\u9032\u6357\n    closingProgressUpdated(closingId: ID!): ClosingProgress!\n}\n\n# \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u5171\u901a\u578b\ntype PageInfo {\n    hasNextPage: Boolean!\n    hasPreviousPage: Boolean!\n    totalElements: Int!\n    totalPages: Int!\n    currentPage: Int!\n}\n\n# \u30ab\u30b9\u30bf\u30e0\u30b9\u30ab\u30e9\u30fc\nscalar Date\nscalar DateTime\nscalar BigDecimal\nscalar Long\n</code></pre>"},{"location":"article/study/study2-4/#srcmainresourcesgraphqlproductgraphqls","title":"src/main/resources/graphql/product.graphqls","text":"\u30b3\u30fc\u30c9\u4f8b: product.graphqls <pre><code># \u5546\u54c1\u533a\u5206\nenum ProductCategory {\n    PRODUCT      # \u88fd\u54c1\n    MATERIAL     # \u539f\u6750\u6599\n    PART         # \u90e8\u54c1\n}\n\n# \u7a0e\u533a\u5206\nenum TaxCategory {\n    TAXABLE      # \u8ab2\u7a0e\n    TAX_EXEMPT   # \u975e\u8ab2\u7a0e\n    TAX_FREE     # \u514d\u7a0e\n}\n\n# \u5546\u54c1\ntype Product {\n    productCode: ID!\n    productName: String!\n    productNameKana: String\n    category: ProductCategory!\n    taxCategory: TaxCategory!\n    unitCode: String\n    sellingPrice: BigDecimal!\n    purchasePrice: BigDecimal\n    costPrice: BigDecimal\n    safetyStock: Int\n    reorderPoint: Int\n    isActive: Boolean!\n    createdAt: DateTime!\n    updatedAt: DateTime!\n\n    # \u95a2\u9023\u30c7\u30fc\u30bf\uff08\u5fc5\u8981\u306a\u5834\u5408\u306e\u307f\u53d6\u5f97\uff09\n    inventories: [Inventory!]!\n    classifications: [ProductClassification!]!\n    customerPrices: [CustomerPrice!]!\n}\n\n# \u5546\u54c1\u4e00\u89a7\uff08\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u4ed8\u304d\uff09\ntype ProductConnection {\n    edges: [ProductEdge!]!\n    pageInfo: PageInfo!\n}\n\ntype ProductEdge {\n    node: Product!\n    cursor: String!\n}\n\n# \u5165\u529b\u578b\ninput CreateProductInput {\n    productCode: ID!\n    productName: String!\n    productNameKana: String\n    category: ProductCategory!\n    taxCategory: TaxCategory!\n    unitCode: String\n    sellingPrice: BigDecimal!\n    purchasePrice: BigDecimal\n    costPrice: BigDecimal\n    safetyStock: Int\n    reorderPoint: Int\n}\n\ninput UpdateProductInput {\n    productCode: ID!\n    productName: String\n    category: ProductCategory\n    taxCategory: TaxCategory\n    sellingPrice: BigDecimal\n    isActive: Boolean\n}\n</code></pre>"},{"location":"article/study/study2-4/#srcmainresourcesgraphqlordergraphqls","title":"src/main/resources/graphql/order.graphqls","text":"\u30b3\u30fc\u30c9\u4f8b: order.graphqls <pre><code># \u53d7\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\nenum OrderStatus {\n    DRAFT        # \u4eee\u767b\u9332\n    CONFIRMED    # \u78ba\u5b9a\n    SHIPPED      # \u51fa\u8377\u6e08\n    CANCELLED    # \u30ad\u30e3\u30f3\u30bb\u30eb\n}\n\n# \u53d7\u6ce8\ntype Order {\n    orderNumber: ID!\n    partnerCode: ID!\n    orderDate: Date!\n    deliveryDate: Date!\n    warehouseCode: ID!\n    status: OrderStatus!\n    totalAmount: BigDecimal!\n    taxAmount: BigDecimal!\n    grandTotal: BigDecimal!\n    salesPersonCode: String\n    remarks: String\n    createdAt: DateTime!\n    updatedAt: DateTime!\n\n    # \u95a2\u9023\u30c7\u30fc\u30bf\n    partner: Partner!\n    warehouse: Warehouse!\n    details: [OrderDetail!]!\n    shipments: [Shipment!]!\n}\n\n# \u53d7\u6ce8\u660e\u7d30\ntype OrderDetail {\n    orderNumber: ID!\n    lineNumber: Int!\n    productCode: ID!\n    quantity: Int!\n    unitPrice: BigDecimal!\n    amount: BigDecimal!\n    taxCategory: TaxCategory!\n    deliveryDate: Date\n    remarks: String\n\n    # \u95a2\u9023\u30c7\u30fc\u30bf\n    product: Product!\n}\n\n# \u53d7\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\u5909\u66f4\u30a4\u30d9\u30f3\u30c8\ntype OrderStatusChange {\n    orderNumber: ID!\n    previousStatus: OrderStatus!\n    currentStatus: OrderStatus!\n    changedBy: String\n    changedAt: DateTime!\n    reason: String\n}\n\n# \u5165\u529b\u578b\ninput CreateOrderInput {\n    partnerCode: ID!\n    orderDate: Date!\n    deliveryDate: Date!\n    warehouseCode: ID!\n    salesPersonCode: String\n    remarks: String\n    details: [OrderDetailInput!]!\n}\n\ninput OrderDetailInput {\n    productCode: ID!\n    quantity: Int!\n    unitPrice: BigDecimal\n    deliveryDate: Date\n    remarks: String\n}\n</code></pre>"},{"location":"article/study/study2-4/#148","title":"14.8 \u57fa\u672c\u7684\u306a\u30ea\u30be\u30eb\u30d0\u306e\u5b9f\u88c5","text":""},{"location":"article/study/study2-4/#query","title":"Query \u30ea\u30be\u30eb\u30d0","text":"\u30b3\u30fc\u30c9\u4f8b: QueryResolver.java <pre><code>package com.example.sales.infrastructure.graphql.resolver;\n\nimport com.example.sales.application.port.in.ProductUseCase;\nimport com.example.sales.application.port.in.PartnerUseCase;\nimport com.example.sales.domain.model.product.Product;\nimport com.example.sales.domain.model.partner.Partner;\nimport com.example.sales.infrastructure.graphql.dto.*;\nimport org.springframework.graphql.data.method.annotation.Argument;\nimport org.springframework.graphql.data.method.annotation.QueryMapping;\nimport org.springframework.stereotype.Controller;\n\nimport java.util.List;\n\n/**\n * GraphQL Query \u30ea\u30be\u30eb\u30d0\n */\n@Controller\npublic class QueryResolver {\n\n    private final ProductUseCase productUseCase;\n    private final PartnerUseCase partnerUseCase;\n\n    public QueryResolver(ProductUseCase productUseCase, PartnerUseCase partnerUseCase) {\n        this.productUseCase = productUseCase;\n        this.partnerUseCase = partnerUseCase;\n    }\n\n    // === \u5546\u54c1 ===\n\n    @QueryMapping\n    public Product product(@Argument String productCode) {\n        return productUseCase.findByCode(productCode).orElse(null);\n    }\n\n    @QueryMapping\n    public ProductConnection products(\n            @Argument String category,\n            @Argument Integer page,\n            @Argument Integer size) {\n\n        int pageNum = page != null ? page : 0;\n        int pageSize = size != null ? size : 20;\n\n        List&lt;Product&gt; products = productUseCase.findAll(category, pageNum, pageSize);\n        long totalCount = productUseCase.count(category);\n\n        return ProductConnection.of(products, pageNum, pageSize, totalCount);\n    }\n\n    // === \u53d6\u5f15\u5148 ===\n\n    @QueryMapping\n    public Partner partner(@Argument String partnerCode) {\n        return partnerUseCase.findByCode(partnerCode).orElse(null);\n    }\n\n    @QueryMapping\n    public PartnerConnection partners(\n            @Argument String type,\n            @Argument Integer page,\n            @Argument Integer size) {\n\n        int pageNum = page != null ? page : 0;\n        int pageSize = size != null ? size : 20;\n\n        List&lt;Partner&gt; partners = partnerUseCase.findAll(type, pageNum, pageSize);\n        long totalCount = partnerUseCase.count(type);\n\n        return PartnerConnection.of(partners, pageNum, pageSize, totalCount);\n    }\n}\n</code></pre>"},{"location":"article/study/study2-4/#connection-dto","title":"Connection DTO\uff08\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\uff09","text":"\u30b3\u30fc\u30c9\u4f8b: ProductConnection.java <pre><code>package com.example.sales.infrastructure.graphql.dto;\n\nimport com.example.sales.domain.model.product.Product;\n\nimport java.util.Base64;\nimport java.util.List;\n\n/**\n * \u5546\u54c1\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u7d50\u679c\uff08Connection \u30d1\u30bf\u30fc\u30f3\uff09\n */\npublic record ProductConnection(\n    List&lt;ProductEdge&gt; edges,\n    PageInfo pageInfo\n) {\n    public static ProductConnection of(\n            List&lt;Product&gt; products,\n            int page,\n            int size,\n            long totalCount) {\n\n        List&lt;ProductEdge&gt; edges = products.stream()\n            .map(product -&gt; new ProductEdge(\n                product,\n                encodeCursor(product.getProductCode())\n            ))\n            .toList();\n\n        int totalPages = (int) Math.ceil((double) totalCount / size);\n\n        PageInfo pageInfo = new PageInfo(\n            page &lt; totalPages - 1,  // hasNextPage\n            page &gt; 0,               // hasPreviousPage\n            totalCount,\n            totalPages,\n            page\n        );\n\n        return new ProductConnection(edges, pageInfo);\n    }\n\n    private static String encodeCursor(String productCode) {\n        return Base64.getEncoder().encodeToString(productCode.getBytes());\n    }\n}\n\npublic record ProductEdge(\n    Product node,\n    String cursor\n) {}\n\npublic record PageInfo(\n    boolean hasNextPage,\n    boolean hasPreviousPage,\n    long totalElements,\n    int totalPages,\n    int currentPage\n) {}\n</code></pre>"},{"location":"article/study/study2-4/#149-spring-for-graphql","title":"14.9 Spring for GraphQL \u306e\u7d71\u5408\u30c6\u30b9\u30c8","text":"\u30b3\u30fc\u30c9\u4f8b: QueryResolverTest.java <pre><code>package com.example.sales.infrastructure.graphql;\n\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.graphql.tester.AutoConfigureHttpGraphQlTester;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.graphql.test.tester.HttpGraphQlTester;\nimport org.springframework.test.context.DynamicPropertyRegistry;\nimport org.springframework.test.context.DynamicPropertySource;\nimport org.testcontainers.containers.PostgreSQLContainer;\nimport org.testcontainers.junit.jupiter.Container;\nimport org.testcontainers.junit.jupiter.Testcontainers;\n\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n@AutoConfigureHttpGraphQlTester\n@Testcontainers\nclass QueryResolverTest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:16-alpine\");\n\n    @DynamicPropertySource\n    static void configureProperties(DynamicPropertyRegistry registry) {\n        registry.add(\"spring.datasource.url\", postgres::getJdbcUrl);\n        registry.add(\"spring.datasource.username\", postgres::getUsername);\n        registry.add(\"spring.datasource.password\", postgres::getPassword);\n    }\n\n    @Autowired\n    private HttpGraphQlTester graphQlTester;\n\n    @Test\n    void testQueryProduct() {\n        // language=GraphQL\n        String query = \"\"\"\n            query {\n                product(productCode: \"PRD001\") {\n                    productCode\n                    productName\n                    sellingPrice\n                    category\n                }\n            }\n            \"\"\";\n\n        graphQlTester.document(query)\n            .execute()\n            .path(\"product.productCode\")\n            .entity(String.class)\n            .isEqualTo(\"PRD001\");\n    }\n\n    @Test\n    void testQueryProducts() {\n        // language=GraphQL\n        String query = \"\"\"\n            query {\n                products(category: PRODUCT, page: 0, size: 10) {\n                    edges {\n                        node {\n                            productCode\n                            productName\n                        }\n                        cursor\n                    }\n                    pageInfo {\n                        hasNextPage\n                        totalElements\n                    }\n                }\n            }\n            \"\"\";\n\n        graphQlTester.document(query)\n            .execute()\n            .path(\"products.edges\")\n            .entityList(Object.class)\n            .hasSizeGreaterThan(0);\n    }\n\n    @Test\n    void testQueryProductWithRelations() {\n        // \u95a2\u9023\u30c7\u30fc\u30bf\u3082\u542b\u3081\u3066\u53d6\u5f97\n        // language=GraphQL\n        String query = \"\"\"\n            query {\n                product(productCode: \"PRD001\") {\n                    productCode\n                    productName\n                    inventories {\n                        warehouseCode\n                        quantity\n                        availableQuantity\n                    }\n                    classifications {\n                        classificationCode\n                        classificationName\n                    }\n                }\n            }\n            \"\"\";\n\n        graphQlTester.document(query)\n            .execute()\n            .path(\"product.productCode\")\n            .entity(String.class)\n            .isEqualTo(\"PRD001\");\n    }\n}\n</code></pre>"},{"location":"article/study/study2-4/#15-api","title":"\u7b2c15\u7ae0\uff1a\u30de\u30b9\u30bf API \u306e\u5b9f\u88c5","text":""},{"location":"article/study/study2-4/#151-n1","title":"15.1 N+1 \u554f\u984c\u3068\u306f","text":"<p>GraphQL \u3067\u306f\u3001\u30cd\u30b9\u30c8\u3057\u305f\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\u969b\u306b N+1 \u554f\u984c \u304c\u767a\u751f\u3057\u3084\u3059\u304f\u306a\u308a\u307e\u3059\u3002\u4f8b\u3048\u3070\u300110\u4ef6\u306e\u5546\u54c1\u3092\u53d6\u5f97\u3057\u3001\u305d\u308c\u305e\u308c\u306e\u5728\u5eab\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u3068\u30011\u56de\uff08\u5546\u54c1\u4e00\u89a7\uff09+ 10\u56de\uff08\u5404\u5546\u54c1\u306e\u5728\u5eab\uff09= 11\u56de\u306e\u30af\u30a8\u30ea\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002</p> <p></p>"},{"location":"article/study/study2-4/#152-dataloader","title":"15.2 DataLoader \u306b\u3088\u308b\u89e3\u6c7a","text":"<p>DataLoader \u306f\u3001\u8907\u6570\u306e\u500b\u5225\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u30d0\u30c3\u30c1\u51e6\u7406\u306b\u307e\u3068\u3081\u308b\u3053\u3068\u3067 N+1 \u554f\u984c\u3092\u89e3\u6c7a\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/study/study2-4/#153-dataloader","title":"15.3 DataLoader \u306e\u5b9f\u88c5","text":""},{"location":"article/study/study2-4/#dataloader","title":"\u5728\u5eab DataLoader","text":"\u30b3\u30fc\u30c9\u4f8b: InventoryDataLoader.java <pre><code>package com.example.sales.infrastructure.graphql.dataloader;\n\nimport com.example.sales.application.port.out.InventoryRepository;\nimport com.example.sales.domain.model.inventory.Inventory;\nimport org.dataloader.BatchLoaderEnvironment;\nimport org.dataloader.MappedBatchLoader;\nimport org.springframework.stereotype.Component;\n\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.concurrent.CompletableFuture;\nimport java.util.concurrent.CompletionStage;\nimport java.util.stream.Collectors;\n\n/**\n * \u5728\u5eab\u30c7\u30fc\u30bf\u306e DataLoader\n * \u5546\u54c1\u30b3\u30fc\u30c9\u3092\u30ad\u30fc\u306b\u30d0\u30c3\u30c1\u53d6\u5f97\n */\n@Component\npublic class InventoryDataLoader implements MappedBatchLoader&lt;String, List&lt;Inventory&gt;&gt; {\n\n    private final InventoryRepository inventoryRepository;\n\n    public InventoryDataLoader(InventoryRepository inventoryRepository) {\n        this.inventoryRepository = inventoryRepository;\n    }\n\n    @Override\n    public CompletionStage&lt;Map&lt;String, List&lt;Inventory&gt;&gt;&gt; load(\n            Set&lt;String&gt; productCodes,\n            BatchLoaderEnvironment environment) {\n\n        return CompletableFuture.supplyAsync(() -&gt; {\n            // \u4e00\u62ec\u53d6\u5f97\n            List&lt;Inventory&gt; inventories = inventoryRepository\n                .findByProductCodes(productCodes);\n\n            // \u5546\u54c1\u30b3\u30fc\u30c9\u3067\u30b0\u30eb\u30fc\u30d7\u5316\n            return inventories.stream()\n                .collect(Collectors.groupingBy(Inventory::getProductCode));\n        });\n    }\n}\n</code></pre>"},{"location":"article/study/study2-4/#dataloader_1","title":"\u53d6\u5f15\u5148 DataLoader","text":"\u30b3\u30fc\u30c9\u4f8b: PartnerDataLoader.java <pre><code>package com.example.sales.infrastructure.graphql.dataloader;\n\nimport com.example.sales.application.port.out.PartnerRepository;\nimport com.example.sales.domain.model.partner.Partner;\nimport org.dataloader.BatchLoaderEnvironment;\nimport org.dataloader.MappedBatchLoader;\nimport org.springframework.stereotype.Component;\n\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.concurrent.CompletableFuture;\nimport java.util.concurrent.CompletionStage;\nimport java.util.function.Function;\nimport java.util.stream.Collectors;\n\n/**\n * \u53d6\u5f15\u5148\u30c7\u30fc\u30bf\u306e DataLoader\n */\n@Component\npublic class PartnerDataLoader implements MappedBatchLoader&lt;String, Partner&gt; {\n\n    private final PartnerRepository partnerRepository;\n\n    public PartnerDataLoader(PartnerRepository partnerRepository) {\n        this.partnerRepository = partnerRepository;\n    }\n\n    @Override\n    public CompletionStage&lt;Map&lt;String, Partner&gt;&gt; load(\n            Set&lt;String&gt; partnerCodes,\n            BatchLoaderEnvironment environment) {\n\n        return CompletableFuture.supplyAsync(() -&gt; {\n            return partnerRepository.findByCodes(partnerCodes).stream()\n                .collect(Collectors.toMap(\n                    Partner::getPartnerCode,\n                    Function.identity()\n                ));\n        });\n    }\n}\n</code></pre>"},{"location":"article/study/study2-4/#154-dataloader","title":"15.4 DataLoader \u306e\u767b\u9332","text":"\u30b3\u30fc\u30c9\u4f8b: DataLoaderConfig.java <pre><code>package com.example.sales.config;\n\nimport com.example.sales.infrastructure.graphql.dataloader.*;\nimport org.dataloader.DataLoader;\nimport org.dataloader.DataLoaderOptions;\nimport org.dataloader.DataLoaderRegistry;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.graphql.execution.BatchLoaderRegistry;\n\n/**\n * DataLoader \u8a2d\u5b9a\n */\n@Configuration\npublic class DataLoaderConfig {\n\n    public static final String INVENTORY_LOADER = \"inventoryLoader\";\n    public static final String PARTNER_LOADER = \"partnerLoader\";\n    public static final String PRODUCT_LOADER = \"productLoader\";\n    public static final String WAREHOUSE_LOADER = \"warehouseLoader\";\n\n    private final InventoryDataLoader inventoryDataLoader;\n    private final PartnerDataLoader partnerDataLoader;\n    private final ProductDataLoader productDataLoader;\n    private final WarehouseDataLoader warehouseDataLoader;\n\n    public DataLoaderConfig(\n            InventoryDataLoader inventoryDataLoader,\n            PartnerDataLoader partnerDataLoader,\n            ProductDataLoader productDataLoader,\n            WarehouseDataLoader warehouseDataLoader) {\n        this.inventoryDataLoader = inventoryDataLoader;\n        this.partnerDataLoader = partnerDataLoader;\n        this.productDataLoader = productDataLoader;\n        this.warehouseDataLoader = warehouseDataLoader;\n    }\n\n    @Bean\n    public BatchLoaderRegistry batchLoaderRegistry() {\n        return new BatchLoaderRegistry() {\n            @Override\n            public void registerDataLoaders(\n                    DataLoaderRegistry registry,\n                    graphql.GraphQLContext context) {\n\n                DataLoaderOptions options = DataLoaderOptions.newOptions()\n                    .setCachingEnabled(true)\n                    .setBatchingEnabled(true)\n                    .setMaxBatchSize(100);\n\n                registry.register(INVENTORY_LOADER,\n                    DataLoader.newMappedDataLoader(inventoryDataLoader, options));\n                registry.register(PARTNER_LOADER,\n                    DataLoader.newMappedDataLoader(partnerDataLoader, options));\n                registry.register(PRODUCT_LOADER,\n                    DataLoader.newMappedDataLoader(productDataLoader, options));\n                registry.register(WAREHOUSE_LOADER,\n                    DataLoader.newMappedDataLoader(warehouseDataLoader, options));\n            }\n        };\n    }\n}\n</code></pre>"},{"location":"article/study/study2-4/#155-dataloader","title":"15.5 \u5546\u54c1\u30ea\u30be\u30eb\u30d0\u306e\u5b9f\u88c5\uff08DataLoader \u4f7f\u7528\uff09","text":"\u30b3\u30fc\u30c9\u4f8b: ProductResolver.java <pre><code>package com.example.sales.infrastructure.graphql.resolver;\n\nimport com.example.sales.application.port.in.ProductUseCase;\nimport com.example.sales.config.DataLoaderConfig;\nimport com.example.sales.domain.model.inventory.Inventory;\nimport com.example.sales.domain.model.product.Product;\nimport com.example.sales.infrastructure.graphql.dto.*;\nimport graphql.schema.DataFetchingEnvironment;\nimport org.dataloader.DataLoader;\nimport org.springframework.graphql.data.method.annotation.*;\nimport org.springframework.stereotype.Controller;\n\nimport java.util.List;\nimport java.util.concurrent.CompletableFuture;\n\n/**\n * \u5546\u54c1 GraphQL \u30ea\u30be\u30eb\u30d0\n */\n@Controller\npublic class ProductResolver {\n\n    private final ProductUseCase productUseCase;\n\n    public ProductResolver(ProductUseCase productUseCase) {\n        this.productUseCase = productUseCase;\n    }\n\n    // === Query ===\n\n    @QueryMapping\n    public Product product(@Argument String productCode) {\n        return productUseCase.findByCode(productCode).orElse(null);\n    }\n\n    @QueryMapping\n    public ProductConnection products(\n            @Argument String category,\n            @Argument Integer page,\n            @Argument Integer size) {\n\n        int pageNum = page != null ? page : 0;\n        int pageSize = size != null ? size : 20;\n\n        List&lt;Product&gt; products = productUseCase.findAll(category, pageNum, pageSize);\n        long totalCount = productUseCase.count(category);\n\n        return ProductConnection.of(products, pageNum, pageSize, totalCount);\n    }\n\n    // === Mutation ===\n\n    @MutationMapping\n    public Product createProduct(@Argument CreateProductInput input) {\n        Product product = Product.builder()\n            .productCode(input.productCode())\n            .productName(input.productName())\n            .category(input.category())\n            .taxCategory(input.taxCategory())\n            .sellingPrice(input.sellingPrice())\n            .isActive(true)\n            .build();\n\n        return productUseCase.create(product);\n    }\n\n    @MutationMapping\n    public Product updateProduct(@Argument UpdateProductInput input) {\n        return productUseCase.update(input.productCode(), product -&gt; {\n            if (input.productName() != null) {\n                product.setProductName(input.productName());\n            }\n            if (input.category() != null) {\n                product.setCategory(input.category());\n            }\n            if (input.sellingPrice() != null) {\n                product.setSellingPrice(input.sellingPrice());\n            }\n            if (input.isActive() != null) {\n                product.setActive(input.isActive());\n            }\n            return product;\n        });\n    }\n\n    @MutationMapping\n    public boolean deleteProduct(@Argument String productCode) {\n        return productUseCase.delete(productCode);\n    }\n\n    // === \u30d5\u30a3\u30fc\u30eb\u30c9\u30ea\u30be\u30eb\u30d0\uff08DataLoader \u4f7f\u7528\uff09===\n\n    @SchemaMapping(typeName = \"Product\", field = \"inventories\")\n    public CompletableFuture&lt;List&lt;Inventory&gt;&gt; inventories(\n            Product product,\n            DataFetchingEnvironment env) {\n\n        DataLoader&lt;String, List&lt;Inventory&gt;&gt; loader =\n            env.getDataLoader(DataLoaderConfig.INVENTORY_LOADER);\n\n        return loader.load(product.getProductCode());\n    }\n\n    @SchemaMapping(typeName = \"Product\", field = \"classifications\")\n    public List&lt;ProductClassification&gt; classifications(Product product) {\n        return productUseCase.findClassifications(product.getProductCode());\n    }\n}\n</code></pre>"},{"location":"article/study/study2-4/#16-api","title":"\u7b2c16\u7ae0\uff1a\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3 API \u306e\u5b9f\u88c5","text":""},{"location":"article/study/study2-4/#161-graphql-subscription","title":"16.1 GraphQL Subscription \u3068\u306f","text":"<p>GraphQL Subscription \u306f\u3001\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3078\u306e\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u901a\u77e5\u3092\u5b9f\u73fe\u3059\u308b\u4ed5\u7d44\u307f\u3067\u3059\u3002WebSocket \u3092\u4f7f\u7528\u3057\u3066\u53cc\u65b9\u5411\u901a\u4fe1\u3092\u884c\u3044\u3001\u30c7\u30fc\u30bf\u306e\u5909\u66f4\u3092\u30d7\u30c3\u30b7\u30e5\u901a\u77e5\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/study/study2-4/#162","title":"16.2 \u30a4\u30d9\u30f3\u30c8\u30af\u30e9\u30b9\u306e\u5b9a\u7fa9","text":"\u30b3\u30fc\u30c9\u4f8b: OrderStatusChangedEvent.java <pre><code>package com.example.sales.domain.event;\n\nimport com.example.sales.domain.model.order.OrderStatus;\nimport java.time.LocalDateTime;\n\n/**\n * \u53d7\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\u5909\u66f4\u30a4\u30d9\u30f3\u30c8\n */\npublic record OrderStatusChangedEvent(\n    String orderNumber,\n    OrderStatus previousStatus,\n    OrderStatus currentStatus,\n    String changedBy,\n    LocalDateTime changedAt,\n    String reason\n) {\n    public static OrderStatusChangedEvent of(\n            String orderNumber,\n            OrderStatus previousStatus,\n            OrderStatus currentStatus,\n            String changedBy) {\n        return new OrderStatusChangedEvent(\n            orderNumber,\n            previousStatus,\n            currentStatus,\n            changedBy,\n            LocalDateTime.now(),\n            null\n        );\n    }\n}\n</code></pre> \u30b3\u30fc\u30c9\u4f8b: InventoryChangedEvent.java <pre><code>package com.example.sales.domain.event;\n\nimport java.time.LocalDateTime;\n\n/**\n * \u5728\u5eab\u5909\u52d5\u30a4\u30d9\u30f3\u30c8\n */\npublic record InventoryChangedEvent(\n    String warehouseCode,\n    String productCode,\n    InventoryChangeType changeType,\n    int quantity,\n    int previousQuantity,\n    int currentQuantity,\n    LocalDateTime timestamp\n) {\n    public enum InventoryChangeType {\n        RECEIPT,      // \u5165\u5eab\n        SHIPMENT,     // \u51fa\u5eab\n        ADJUSTMENT,   // \u8abf\u6574\n        TRANSFER,     // \u79fb\u52d5\n        ALLOCATION,   // \u5f15\u5f53\n        RELEASE       // \u5f15\u5f53\u89e3\u9664\n    }\n\n    public static InventoryChangedEvent of(\n            String warehouseCode,\n            String productCode,\n            InventoryChangeType changeType,\n            int quantity,\n            int previousQuantity,\n            int currentQuantity) {\n        return new InventoryChangedEvent(\n            warehouseCode,\n            productCode,\n            changeType,\n            quantity,\n            previousQuantity,\n            currentQuantity,\n            LocalDateTime.now()\n        );\n    }\n}\n</code></pre>"},{"location":"article/study/study2-4/#163-reactor-sinks","title":"16.3 \u30a4\u30d9\u30f3\u30c8\u30d1\u30d6\u30ea\u30c3\u30b7\u30e3\u30fc\uff08Reactor Sinks\uff09","text":"\u30b3\u30fc\u30c9\u4f8b: GraphQLEventPublisher.java <pre><code>package com.example.sales.infrastructure.graphql.subscription;\n\nimport com.example.sales.domain.event.*;\nimport org.springframework.stereotype.Component;\nimport reactor.core.publisher.Flux;\nimport reactor.core.publisher.Sinks;\n\n/**\n * GraphQL Subscription \u7528\u30a4\u30d9\u30f3\u30c8\u30d1\u30d6\u30ea\u30c3\u30b7\u30e3\u30fc\n */\n@Component\npublic class GraphQLEventPublisher {\n\n    // \u53d7\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\u5909\u66f4\n    private final Sinks.Many&lt;OrderStatusChangedEvent&gt; orderStatusSink =\n        Sinks.many().multicast().onBackpressureBuffer();\n\n    // \u51fa\u8377\u9032\u6357\n    private final Sinks.Many&lt;ShipmentProgressEvent&gt; shipmentProgressSink =\n        Sinks.many().multicast().onBackpressureBuffer();\n\n    // \u5728\u5eab\u5909\u52d5\n    private final Sinks.Many&lt;InventoryChangedEvent&gt; inventoryChangedSink =\n        Sinks.many().multicast().onBackpressureBuffer();\n\n    // \u7de0\u51e6\u7406\u9032\u6357\n    private final Sinks.Many&lt;ClosingProgressEvent&gt; closingProgressSink =\n        Sinks.many().multicast().onBackpressureBuffer();\n\n    // === \u767a\u884c\u30e1\u30bd\u30c3\u30c9 ===\n\n    public void publishOrderStatusChanged(OrderStatusChangedEvent event) {\n        orderStatusSink.tryEmitNext(event);\n    }\n\n    public void publishShipmentProgress(ShipmentProgressEvent event) {\n        shipmentProgressSink.tryEmitNext(event);\n    }\n\n    public void publishInventoryChanged(InventoryChangedEvent event) {\n        inventoryChangedSink.tryEmitNext(event);\n    }\n\n    public void publishClosingProgress(ClosingProgressEvent event) {\n        closingProgressSink.tryEmitNext(event);\n    }\n\n    // === Flux \u53d6\u5f97\u30e1\u30bd\u30c3\u30c9 ===\n\n    public Flux&lt;OrderStatusChangedEvent&gt; getOrderStatusChangedFlux() {\n        return orderStatusSink.asFlux();\n    }\n\n    public Flux&lt;OrderStatusChangedEvent&gt; getOrderStatusChangedFlux(String orderNumber) {\n        return orderStatusSink.asFlux()\n            .filter(event -&gt; orderNumber == null ||\n                             event.orderNumber().equals(orderNumber));\n    }\n\n    public Flux&lt;ShipmentProgressEvent&gt; getShipmentProgressFlux(String shipmentNumber) {\n        return shipmentProgressSink.asFlux()\n            .filter(event -&gt; shipmentNumber == null ||\n                             event.shipmentNumber().equals(shipmentNumber));\n    }\n\n    public Flux&lt;InventoryChangedEvent&gt; getInventoryChangedFlux(\n            String warehouseCode, String productCode) {\n        return inventoryChangedSink.asFlux()\n            .filter(event -&gt;\n                (warehouseCode == null || event.warehouseCode().equals(warehouseCode)) &amp;&amp;\n                (productCode == null || event.productCode().equals(productCode))\n            );\n    }\n\n    public Flux&lt;ClosingProgressEvent&gt; getClosingProgressFlux(String closingId) {\n        return closingProgressSink.asFlux()\n            .filter(event -&gt; event.closingId().equals(closingId));\n    }\n}\n</code></pre>"},{"location":"article/study/study2-4/#164-subscription","title":"16.4 \u53d7\u6ce8\u30ea\u30be\u30eb\u30d0\u306e\u5b9f\u88c5\uff08Subscription \u5bfe\u5fdc\uff09","text":"\u30b3\u30fc\u30c9\u4f8b: OrderResolver.java <pre><code>package com.example.sales.infrastructure.graphql.resolver;\n\nimport com.example.sales.application.port.in.OrderUseCase;\nimport com.example.sales.domain.event.OrderStatusChangedEvent;\nimport com.example.sales.domain.model.order.*;\nimport com.example.sales.infrastructure.graphql.dto.*;\nimport com.example.sales.infrastructure.graphql.subscription.GraphQLEventPublisher;\nimport org.springframework.graphql.data.method.annotation.*;\nimport org.springframework.stereotype.Controller;\nimport reactor.core.publisher.Flux;\n\nimport java.util.List;\n\n/**\n * \u53d7\u6ce8 GraphQL \u30ea\u30be\u30eb\u30d0\n */\n@Controller\npublic class OrderResolver {\n\n    private final OrderUseCase orderUseCase;\n    private final GraphQLEventPublisher eventPublisher;\n\n    public OrderResolver(OrderUseCase orderUseCase,\n                         GraphQLEventPublisher eventPublisher) {\n        this.orderUseCase = orderUseCase;\n        this.eventPublisher = eventPublisher;\n    }\n\n    // === Query ===\n\n    @QueryMapping\n    public Order order(@Argument String orderNumber) {\n        return orderUseCase.findByNumber(orderNumber).orElse(null);\n    }\n\n    @QueryMapping\n    public OrderConnection orders(\n            @Argument String status,\n            @Argument String partnerCode,\n            @Argument Integer page,\n            @Argument Integer size) {\n\n        int pageNum = page != null ? page : 0;\n        int pageSize = size != null ? size : 20;\n\n        OrderStatus orderStatus = status != null ? OrderStatus.valueOf(status) : null;\n        List&lt;Order&gt; orders = orderUseCase.findAll(orderStatus, partnerCode, pageNum, pageSize);\n        long totalCount = orderUseCase.count(orderStatus, partnerCode);\n\n        return OrderConnection.of(orders, pageNum, pageSize, totalCount);\n    }\n\n    // === Mutation ===\n\n    @MutationMapping\n    public Order createOrder(@Argument CreateOrderInput input) {\n        return orderUseCase.create(\n            input.partnerCode(),\n            input.orderDate(),\n            input.deliveryDate(),\n            input.warehouseCode(),\n            input.salesPersonCode(),\n            input.remarks(),\n            input.details()\n        );\n    }\n\n    @MutationMapping\n    public Order confirmOrder(@Argument String orderNumber) {\n        Order order = orderUseCase.confirm(orderNumber);\n\n        // \u30a4\u30d9\u30f3\u30c8\u767a\u884c\n        eventPublisher.publishOrderStatusChanged(\n            OrderStatusChangedEvent.of(\n                orderNumber,\n                OrderStatus.DRAFT,\n                OrderStatus.CONFIRMED,\n                \"system\"\n            )\n        );\n\n        return order;\n    }\n\n    @MutationMapping\n    public Order cancelOrder(@Argument String orderNumber, @Argument String reason) {\n        Order order = orderUseCase.cancel(orderNumber, reason);\n\n        // \u30a4\u30d9\u30f3\u30c8\u767a\u884c\n        eventPublisher.publishOrderStatusChanged(\n            OrderStatusChangedEvent.withReason(\n                orderNumber,\n                order.getStatus(),\n                OrderStatus.CANCELLED,\n                \"system\",\n                reason\n            )\n        );\n\n        return order;\n    }\n\n    // === Subscription ===\n\n    @SubscriptionMapping\n    public Flux&lt;OrderStatusChangedEvent&gt; orderStatusChanged(\n            @Argument String orderNumber) {\n        return eventPublisher.getOrderStatusChangedFlux(orderNumber);\n    }\n}\n</code></pre>"},{"location":"article/study/study2-4/#165-graphiql","title":"16.5 GraphiQL \u306b\u3088\u308b\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u64cd\u4f5c","text":"\u30b3\u30fc\u30c9\u4f8b: GraphQL \u30af\u30a8\u30ea/\u30df\u30e5\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3/\u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3 <pre><code># \u53d7\u6ce8\u767b\u9332\nmutation CreateOrder {\n  createOrder(input: {\n    partnerCode: \"CUS001\"\n    orderDate: \"2025-12-29\"\n    deliveryDate: \"2026-01-05\"\n    warehouseCode: \"WH001\"\n    details: [\n      { productCode: \"PRD001\", quantity: 10, unitPrice: 1000 }\n      { productCode: \"PRD002\", quantity: 5, unitPrice: 2000 }\n    ]\n  }) {\n    orderNumber\n    status\n    totalAmount\n    details {\n      productCode\n      quantity\n      amount\n    }\n  }\n}\n\n# \u53d7\u6ce8\u78ba\u5b9a\nmutation ConfirmOrder {\n  confirmOrder(orderNumber: \"ORD20251229001\") {\n    orderNumber\n    status\n    partner {\n      partnerName\n    }\n  }\n}\n\n# \u53d7\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\u76e3\u8996\uff08Subscription\uff09\nsubscription WatchOrderStatus {\n  orderStatusChanged(orderNumber: \"ORD20251229001\") {\n    orderNumber\n    previousStatus\n    currentStatus\n    changedAt\n    changedBy\n    reason\n  }\n}\n\n# \u5728\u5eab\u5909\u52d5\u76e3\u8996\nsubscription WatchInventory {\n  inventoryChanged(warehouseCode: \"WH001\") {\n    warehouseCode\n    productCode\n    changeType\n    quantity\n    previousQuantity\n    currentQuantity\n    timestamp\n  }\n}\n</code></pre>"},{"location":"article/study/study2-4/#17","title":"\u7b2c17\u7ae0\uff1a\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3068\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","text":""},{"location":"article/study/study2-4/#171-graphql","title":"17.1 GraphQL \u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0","text":"<p>GraphQL \u306e\u30a8\u30e9\u30fc\u30ec\u30b9\u30dd\u30f3\u30b9\u306f\u6a19\u6e96\u5316\u3055\u308c\u305f\u69cb\u9020\u3092\u6301\u3061\u307e\u3059\uff1a</p> \u30b3\u30fc\u30c9\u4f8b: \u30a8\u30e9\u30fc\u30ec\u30b9\u30dd\u30f3\u30b9\u69cb\u9020 <pre><code>{\n  \"errors\": [\n    {\n      \"message\": \"\u5546\u54c1\u30b3\u30fc\u30c9\u304c\u91cd\u8907\u3057\u3066\u3044\u307e\u3059\",\n      \"locations\": [{ \"line\": 2, \"column\": 3 }],\n      \"path\": [\"createProduct\"],\n      \"extensions\": {\n        \"classification\": \"VALIDATION_ERROR\",\n        \"code\": \"PRODUCT_CODE_DUPLICATE\",\n        \"field\": \"productCode\"\n      }\n    }\n  ],\n  \"data\": null\n}\n</code></pre>"},{"location":"article/study/study2-4/#_2","title":"\u30ab\u30b9\u30bf\u30e0\u4f8b\u5916\u30af\u30e9\u30b9","text":"\u30b3\u30fc\u30c9\u4f8b: GraphQLErrorCode.java <pre><code>package com.example.sales.application.exception;\n\npublic enum GraphQLErrorCode {\n    // \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\n    VALIDATION_ERROR(\"VALIDATION_ERROR\"),\n    REQUIRED_FIELD_MISSING(\"REQUIRED_FIELD_MISSING\"),\n    INVALID_FORMAT(\"INVALID_FORMAT\"),\n    VALUE_OUT_OF_RANGE(\"VALUE_OUT_OF_RANGE\"),\n    DUPLICATE_VALUE(\"DUPLICATE_VALUE\"),\n\n    // \u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u30a8\u30e9\u30fc\n    BUSINESS_RULE_VIOLATION(\"BUSINESS_RULE_VIOLATION\"),\n    INSUFFICIENT_STOCK(\"INSUFFICIENT_STOCK\"),\n    INVALID_STATUS_TRANSITION(\"INVALID_STATUS_TRANSITION\"),\n    CREDIT_LIMIT_EXCEEDED(\"CREDIT_LIMIT_EXCEEDED\"),\n\n    // \u30ea\u30bd\u30fc\u30b9\u30a8\u30e9\u30fc\n    NOT_FOUND(\"NOT_FOUND\"),\n    ALREADY_EXISTS(\"ALREADY_EXISTS\"),\n    CONFLICT(\"CONFLICT\"),\n\n    // \u8a8d\u8a3c\u30fb\u8a8d\u53ef\u30a8\u30e9\u30fc\n    UNAUTHORIZED(\"UNAUTHORIZED\"),\n    FORBIDDEN(\"FORBIDDEN\"),\n\n    // \u30b7\u30b9\u30c6\u30e0\u30a8\u30e9\u30fc\n    INTERNAL_ERROR(\"INTERNAL_ERROR\"),\n    SERVICE_UNAVAILABLE(\"SERVICE_UNAVAILABLE\");\n\n    private final String code;\n\n    GraphQLErrorCode(String code) {\n        this.code = code;\n    }\n\n    public String getCode() {\n        return code;\n    }\n}\n</code></pre> \u30b3\u30fc\u30c9\u4f8b: GraphQLBusinessException.java <pre><code>package com.example.sales.application.exception;\n\nimport graphql.ErrorClassification;\nimport graphql.GraphQLError;\nimport graphql.language.SourceLocation;\n\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\npublic class GraphQLBusinessException extends RuntimeException implements GraphQLError {\n\n    private final GraphQLErrorCode errorCode;\n    private final String field;\n    private final Map&lt;String, Object&gt; additionalData;\n\n    public GraphQLBusinessException(String message, GraphQLErrorCode errorCode) {\n        this(message, errorCode, null, null);\n    }\n\n    public GraphQLBusinessException(String message, GraphQLErrorCode errorCode, String field) {\n        this(message, errorCode, field, null);\n    }\n\n    public GraphQLBusinessException(\n            String message,\n            GraphQLErrorCode errorCode,\n            String field,\n            Map&lt;String, Object&gt; additionalData) {\n        super(message);\n        this.errorCode = errorCode;\n        this.field = field;\n        this.additionalData = additionalData != null ? additionalData : new HashMap&lt;&gt;();\n    }\n\n    @Override\n    public List&lt;SourceLocation&gt; getLocations() {\n        return null;\n    }\n\n    @Override\n    public ErrorClassification getErrorType() {\n        return CustomErrorClassification.fromCode(errorCode);\n    }\n\n    @Override\n    public Map&lt;String, Object&gt; getExtensions() {\n        Map&lt;String, Object&gt; extensions = new HashMap&lt;&gt;();\n        extensions.put(\"code\", errorCode.getCode());\n        extensions.put(\"classification\", getErrorType().toString());\n        if (field != null) {\n            extensions.put(\"field\", field);\n        }\n        extensions.putAll(additionalData);\n        return extensions;\n    }\n}\n</code></pre>"},{"location":"article/study/study2-4/#172","title":"17.2 \u4f8b\u5916\u30ea\u30be\u30eb\u30d0","text":"\u30b3\u30fc\u30c9\u4f8b: GraphQLExceptionResolver.java <pre><code>package com.example.sales.infrastructure.graphql.exception;\n\nimport com.example.sales.application.exception.GraphQLBusinessException;\nimport com.example.sales.application.exception.GraphQLErrorCode;\nimport graphql.GraphQLError;\nimport graphql.schema.DataFetchingEnvironment;\nimport org.springframework.graphql.execution.DataFetcherExceptionResolverAdapter;\nimport org.springframework.graphql.execution.ErrorType;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class GraphQLExceptionResolver extends DataFetcherExceptionResolverAdapter {\n\n    @Override\n    protected GraphQLError resolveToSingleError(Throwable ex, DataFetchingEnvironment env) {\n        // \u30ab\u30b9\u30bf\u30e0\u30d3\u30b8\u30cd\u30b9\u4f8b\u5916\n        if (ex instanceof GraphQLBusinessException businessEx) {\n            return businessEx;\n        }\n\n        // \u30c9\u30e1\u30a4\u30f3\u4f8b\u5916\u3092\u30e9\u30c3\u30d7\n        if (ex instanceof IllegalArgumentException) {\n            return new GraphQLBusinessException(\n                ex.getMessage(),\n                GraphQLErrorCode.VALIDATION_ERROR\n            );\n        }\n\n        if (ex instanceof IllegalStateException) {\n            return new GraphQLBusinessException(\n                ex.getMessage(),\n                GraphQLErrorCode.BUSINESS_RULE_VIOLATION\n            );\n        }\n\n        // Jakarta Validation \u4f8b\u5916\n        if (ex instanceof jakarta.validation.ConstraintViolationException cve) {\n            var firstViolation = cve.getConstraintViolations().iterator().next();\n            return new GraphQLBusinessException(\n                firstViolation.getMessage(),\n                GraphQLErrorCode.VALIDATION_ERROR,\n                firstViolation.getPropertyPath().toString()\n            );\n        }\n\n        // \u672a\u77e5\u306e\u4f8b\u5916\u306f\u30ed\u30b0\u51fa\u529b\u3057\u3066\u6c4e\u7528\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u8fd4\u3059\n        logger.error(\"Unexpected error in GraphQL resolver\", ex);\n        return GraphQLError.newError()\n            .message(\"\u30b7\u30b9\u30c6\u30e0\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\")\n            .errorType(ErrorType.INTERNAL_ERROR)\n            .build();\n    }\n}\n</code></pre>"},{"location":"article/study/study2-4/#173","title":"17.3 \u5165\u529b\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3","text":""},{"location":"article/study/study2-4/#graphql","title":"GraphQL \u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u306b\u3088\u308b\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3","text":"\u30b3\u30fc\u30c9\u4f8b: directives.graphqls <pre><code># schema/directives.graphqls\ndirective @NotBlank(message: String = \"\u5fc5\u9808\u9805\u76ee\u3067\u3059\") on INPUT_FIELD_DEFINITION | ARGUMENT_DEFINITION\ndirective @Size(min: Int = 0, max: Int = 255, message: String) on INPUT_FIELD_DEFINITION | ARGUMENT_DEFINITION\ndirective @Min(value: Int!, message: String) on INPUT_FIELD_DEFINITION | ARGUMENT_DEFINITION\ndirective @Pattern(regexp: String!, message: String) on INPUT_FIELD_DEFINITION | ARGUMENT_DEFINITION\ndirective @Email(message: String = \"\u6709\u52b9\u306a\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\") on INPUT_FIELD_DEFINITION | ARGUMENT_DEFINITION\n\n# \u4f7f\u7528\u4f8b\ninput CreateProductInput {\n  productCode: String! @NotBlank @Size(min: 1, max: 16, message: \"\u5546\u54c1\u30b3\u30fc\u30c9\u306f16\u6587\u5b57\u4ee5\u5185\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\")\n  productName: String! @NotBlank @Size(max: 100)\n  price: BigDecimal! @Min(value: 0, message: \"\u4fa1\u683c\u306f0\u4ee5\u4e0a\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\")\n}\n\ninput CreatePartnerInput {\n  partnerCode: String! @NotBlank @Pattern(regexp: \"^[A-Z0-9]{4,10}$\", message: \"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\u306f\u82f1\u5927\u6587\u5b57\u3068\u6570\u5b574\u301c10\u6587\u5b57\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\")\n  partnerName: String! @NotBlank @Size(max: 100)\n  email: String @Email\n  creditLimit: BigDecimal @Min(value: 0)\n}\n</code></pre>"},{"location":"article/study/study2-4/#jakarta-validation","title":"Jakarta Validation \u3068\u306e\u7d71\u5408","text":"\u30b3\u30fc\u30c9\u4f8b: CreateProductInputDto.java <pre><code>package com.example.sales.application.dto;\n\nimport jakarta.validation.constraints.*;\nimport java.math.BigDecimal;\n\npublic record CreateProductInputDto(\n    @NotBlank(message = \"\u5546\u54c1\u30b3\u30fc\u30c9\u306f\u5fc5\u9808\u3067\u3059\")\n    @Size(max = 16, message = \"\u5546\u54c1\u30b3\u30fc\u30c9\u306f16\u6587\u5b57\u4ee5\u5185\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\")\n    @Pattern(regexp = \"^[A-Z0-9]+$\", message = \"\u5546\u54c1\u30b3\u30fc\u30c9\u306f\u82f1\u5927\u6587\u5b57\u3068\u6570\u5b57\u306e\u307f\u4f7f\u7528\u53ef\u80fd\u3067\u3059\")\n    String productCode,\n\n    @NotBlank(message = \"\u5546\u54c1\u540d\u306f\u5fc5\u9808\u3067\u3059\")\n    @Size(max = 100, message = \"\u5546\u54c1\u540d\u306f100\u6587\u5b57\u4ee5\u5185\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\")\n    String productName,\n\n    @NotNull(message = \"\u4fa1\u683c\u306f\u5fc5\u9808\u3067\u3059\")\n    @DecimalMin(value = \"0\", message = \"\u4fa1\u683c\u306f0\u4ee5\u4e0a\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\")\n    @Digits(integer = 10, fraction = 2, message = \"\u4fa1\u683c\u306e\u5f62\u5f0f\u304c\u6b63\u3057\u304f\u3042\u308a\u307e\u305b\u3093\")\n    BigDecimal price,\n\n    @Min(value = 0, message = \"\u5728\u5eab\u6570\u306f0\u4ee5\u4e0a\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\")\n    Integer stockQuantity,\n\n    @Size(max = 500, message = \"\u5099\u8003\u306f500\u6587\u5b57\u4ee5\u5185\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\")\n    String notes\n) {}\n</code></pre>"},{"location":"article/study/study2-4/#174","title":"17.4 \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3","text":""},{"location":"article/study/study2-4/#_3","title":"\u8a8d\u53ef\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6","text":"\u30b3\u30fc\u30c9\u4f8b: \u8a8d\u53ef\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6 <pre><code># \u30b9\u30ad\u30fc\u30de\u30ec\u30d9\u30eb\u3067\u306e\u8a8d\u53ef\u5b9a\u7fa9\ndirective @auth(\n  roles: [String!]!\n) on FIELD_DEFINITION\n\ntype Mutation {\n  # \u7ba1\u7406\u8005\u306e\u307f\n  deleteProduct(productCode: ID!): Boolean! @auth(roles: [\"ADMIN\"])\n\n  # \u55b6\u696d\u62c5\u5f53\u3068\u7ba1\u7406\u8005\n  createOrder(input: CreateOrderInput!): Order! @auth(roles: [\"SALES\", \"ADMIN\"])\n\n  # \u7d4c\u7406\u62c5\u5f53\u3068\u7ba1\u7406\u8005\n  executeClosing(input: ExecuteClosingInput!): ClosingResult! @auth(roles: [\"ACCOUNTING\", \"ADMIN\"])\n}\n</code></pre>"},{"location":"article/study/study2-4/#_4","title":"\u30af\u30a8\u30ea\u6df1\u5ea6\u5236\u9650","text":"\u30b3\u30fc\u30c9\u4f8b: \u30af\u30a8\u30ea\u6df1\u5ea6\u5236\u9650 <pre><code>@Bean\npublic Instrumentation maxQueryDepthInstrumentation() {\n    return new MaxQueryDepthInstrumentation(10);\n}\n\n@Bean\npublic Instrumentation maxQueryComplexityInstrumentation() {\n    return new MaxQueryComplexityInstrumentation(100);\n}\n</code></pre>"},{"location":"article/study/study2-4/#175","title":"17.5 \u904b\u7528\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","text":""},{"location":"article/study/study2-4/#_5","title":"\u30ed\u30b0\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc","text":"\u30b3\u30fc\u30c9\u4f8b: GraphQLLoggingInterceptor.java <pre><code>@Component\npublic class GraphQLLoggingInterceptor implements WebGraphQlInterceptor {\n\n    private static final Logger logger = LoggerFactory.getLogger(GraphQLLoggingInterceptor.class);\n\n    @Override\n    public Mono&lt;WebGraphQlResponse&gt; intercept(WebGraphQlRequest request, Chain chain) {\n        String requestId = UUID.randomUUID().toString().substring(0, 8);\n        String operationName = request.getOperationName();\n        Instant start = Instant.now();\n\n        MDC.put(\"requestId\", requestId);\n        MDC.put(\"operationName\", operationName);\n\n        logger.info(\"GraphQL \u30ea\u30af\u30a8\u30b9\u30c8\u958b\u59cb: operation={}\", operationName);\n\n        return chain.next(request)\n            .doOnNext(response -&gt; {\n                Duration duration = Duration.between(start, Instant.now());\n\n                if (response.getErrors().isEmpty()) {\n                    logger.info(\"GraphQL \u30ea\u30af\u30a8\u30b9\u30c8\u5b8c\u4e86: operation={}, duration={}ms\",\n                        operationName, duration.toMillis());\n                } else {\n                    logger.warn(\"GraphQL \u30ea\u30af\u30a8\u30b9\u30c8\u5b8c\u4e86\uff08\u30a8\u30e9\u30fc\u3042\u308a\uff09: operation={}, duration={}ms, errors={}\",\n                        operationName, duration.toMillis(), response.getErrors().size());\n                }\n            })\n            .doFinally(signalType -&gt; {\n                MDC.remove(\"requestId\");\n                MDC.remove(\"operationName\");\n            });\n    }\n}\n</code></pre>"},{"location":"article/study/study2-4/#_6","title":"\u30e1\u30c8\u30ea\u30af\u30b9\u53ce\u96c6","text":"\u30b3\u30fc\u30c9\u4f8b: GraphQLMetricsCollector.java <pre><code>@Component\npublic class GraphQLMetricsCollector implements WebGraphQlInterceptor {\n\n    private final Timer queryTimer;\n    private final Timer mutationTimer;\n    private final Counter errorCounter;\n    private final Counter successCounter;\n\n    public GraphQLMetricsCollector(MeterRegistry registry) {\n        this.queryTimer = Timer.builder(\"graphql.query.duration\")\n            .description(\"GraphQL \u30af\u30a8\u30ea\u5b9f\u884c\u6642\u9593\")\n            .register(registry);\n\n        this.mutationTimer = Timer.builder(\"graphql.mutation.duration\")\n            .description(\"GraphQL \u30df\u30e5\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\u5b9f\u884c\u6642\u9593\")\n            .register(registry);\n\n        this.errorCounter = Counter.builder(\"graphql.errors\")\n            .description(\"GraphQL \u30a8\u30e9\u30fc\u6570\")\n            .register(registry);\n\n        this.successCounter = Counter.builder(\"graphql.success\")\n            .description(\"GraphQL \u6210\u529f\u6570\")\n            .register(registry);\n    }\n\n    @Override\n    public Mono&lt;WebGraphQlResponse&gt; intercept(WebGraphQlRequest request, Chain chain) {\n        Timer timer = request.getDocument().contains(\"mutation\")\n            ? mutationTimer\n            : queryTimer;\n\n        return Mono.fromSupplier(timer::start)\n            .flatMap(sample -&gt; chain.next(request)\n                .doOnNext(response -&gt; {\n                    sample.stop(timer);\n\n                    if (response.getErrors().isEmpty()) {\n                        successCounter.increment();\n                    } else {\n                        errorCounter.increment(response.getErrors().size());\n                    }\n                })\n            );\n    }\n}\n</code></pre>"},{"location":"article/study/study2-4/#part-10-e","title":"Part 10-E \u306e\u307e\u3068\u3081","text":""},{"location":"article/study/study2-4/#_7","title":"\u5b9f\u88c5\u3057\u305f\u6a5f\u80fd\u4e00\u89a7","text":"\u7ae0 \u5185\u5bb9 \u4e3b\u8981\u6280\u8853 \u7b2c14\u7ae0: \u57fa\u790e GraphQL \u30b5\u30fc\u30d0\u30fc\u306e\u57fa\u790e Spring for GraphQL, \u30b9\u30ad\u30fc\u30de\u99c6\u52d5\u958b\u767a \u7b2c15\u7ae0: \u30de\u30b9\u30bf API N+1 \u554f\u984c\u5bfe\u7b56\u3001\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3 DataLoader, Connection \u30d1\u30bf\u30fc\u30f3 \u7b2c16\u7ae0: \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3 API \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u901a\u77e5\u3001\u975e\u540c\u671f\u51e6\u7406 Subscription, Reactor Sinks \u7b2c17\u7ae0: \u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0 \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3 \u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6, Jakarta Validation"},{"location":"article/study/study2-4/#graphql_1","title":"\u5b9f\u88c5\u3057\u305f GraphQL \u64cd\u4f5c","text":"<ul> <li>Query: \u5546\u54c1\u30fb\u53d6\u5f15\u5148\u30fb\u5009\u5eab\u30fb\u53d7\u6ce8\u30fb\u51fa\u8377\u30fb\u8acb\u6c42\u306e\u53d6\u5f97</li> <li>Mutation: CRUD \u64cd\u4f5c\u3001\u53d7\u6ce8\u78ba\u5b9a\u3001\u51fa\u8377\u78ba\u5b9a\u3001\u7de0\u51e6\u7406</li> <li>Subscription: \u53d7\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\u5909\u66f4\u3001\u51fa\u8377\u9032\u6357\u3001\u5728\u5eab\u5909\u52d5\u3001\u7de0\u51e6\u7406\u9032\u6357</li> </ul>"},{"location":"article/study/study2-4/#_8","title":"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u7279\u5fb4","text":""},{"location":"article/study/study2-4/#_9","title":"\u6280\u8853\u30b9\u30bf\u30c3\u30af","text":"\u30ab\u30c6\u30b4\u30ea \u6280\u8853 \u8a00\u8a9e Java 21 \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af Spring Boot 4.0, Spring for GraphQL \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0 WebSocket, Reactor (Sinks) ORM MyBatis 3.0 \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9 PostgreSQL 16 \u30c6\u30b9\u30c8 JUnit 5, spring-graphql-test, TestContainers"},{"location":"article/study/study2-4/#api","title":"API \u5f62\u5f0f\u306e\u6bd4\u8f03\u3068\u9078\u629e\u57fa\u6e96","text":"\u89b3\u70b9 REST API gRPC GraphQL \u30c7\u30fc\u30bf\u53d6\u5f97 \u56fa\u5b9a\u30ec\u30b9\u30dd\u30f3\u30b9 \u56fa\u5b9a\u30ec\u30b9\u30dd\u30f3\u30b9 \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u6307\u5b9a \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 \u8907\u6570 \u8907\u6570 \u5358\u4e00 Over-fetching \u767a\u751f\u3057\u3084\u3059\u3044 \u767a\u751f\u3057\u3084\u3059\u3044 \u9632\u6b62\u53ef\u80fd Under-fetching \u767a\u751f\u3057\u3084\u3059\u3044 \u767a\u751f\u3057\u3084\u3059\u3044 \u9632\u6b62\u53ef\u80fd \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0 WebSocket \u5225\u5b9f\u88c5 \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 Subscription N+1 \u554f\u984c \u767a\u751f\u3057\u306b\u304f\u3044 \u767a\u751f\u3057\u306b\u304f\u3044 DataLoader \u3067\u89e3\u6c7a \u4e3b\u306a\u7528\u9014 \u6c4e\u7528 API \u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9 \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u5411\u3051"},{"location":"article/study/study2-4/#graphql_2","title":"GraphQL \u3092\u9078\u629e\u3059\u308b\u5834\u9762","text":"<ol> <li>\u8907\u96d1\u306a\u30c7\u30fc\u30bf\u69cb\u9020: \u95a2\u9023\u30c7\u30fc\u30bf\u3092\u67d4\u8edf\u306b\u53d6\u5f97\u3057\u305f\u3044</li> <li>\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u4e3b\u5c0e: \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u5fc5\u8981\u306a\u30c7\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u305f\u3044</li> <li>Over-fetching \u56de\u907f: \u5e2f\u57df\u5e45\u306e\u7bc0\u7d04\u304c\u91cd\u8981</li> <li>\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u901a\u77e5: Subscription \u306b\u3088\u308b\u7d71\u4e00\u7684\u306a\u901a\u77e5\u6a5f\u69cb\u304c\u5fc5\u8981</li> <li>API \u7d71\u5408: \u8907\u6570\u306e\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3092\u5358\u4e00 API \u3067\u516c\u958b\u3057\u305f\u3044</li> </ol> <p>GraphQL \u306f REST API \u3068\u6bd4\u8f03\u3057\u3066\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u5fc5\u8981\u306a\u30c7\u30fc\u30bf\u3092\u67d4\u8edf\u306b\u53d6\u5f97\u3067\u304d\u308b\u70b9\u304c\u5927\u304d\u306a\u5229\u70b9\u3067\u3059\u3002\u7279\u306b\u8907\u96d1\u306a\u30c7\u30fc\u30bf\u69cb\u9020\u3092\u6301\u3064\u8ca9\u58f2\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3067\u306f\u3001DataLoader \u3068 Subscription \u3092\u6d3b\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u52b9\u7387\u7684\u304b\u3064\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u306a API \u3092\u63d0\u4f9b\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"article/study/study3-1/","title":"\u5b9f\u8df5\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\uff1a\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0 \u7814\u7a76 1 - \u30e2\u30ce\u30ea\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":""},{"location":"article/study/study3-1/#_1","title":"\u306f\u3058\u3081\u306b","text":"<p>\u672c\u7814\u7a76\u3067\u306f\u3001API \u30b5\u30fc\u30d0\u30fc\u69cb\u6210\uff08\u7b2c21\u7ae0\uff09\u3068\u306f\u7570\u306a\u308b\u30a2\u30d7\u30ed\u30fc\u30c1\u3068\u3057\u3066\u3001\u30e2\u30ce\u30ea\u30b9\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u3088\u308b\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002UI\uff08\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\uff09\u3001\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30a2\u30af\u30bb\u30b9\u304c\u3059\u3079\u3066\u540c\u4e00\u30b5\u30fc\u30d0\u30fc\u5185\u3067\u52d5\u4f5c\u3059\u308b\u3001\u4f1d\u7d71\u7684\u304b\u3064\u5805\u5b9f\u306a\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3067\u3059\u3002</p>"},{"location":"article/study/study3-1/#22","title":"\u7b2c22\u7ae0\uff1a\u30e2\u30ce\u30ea\u30b9\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u57fa\u790e","text":""},{"location":"article/study/study3-1/#221","title":"22.1 \u30e2\u30ce\u30ea\u30b9\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3068\u306f","text":"<p>\u30e2\u30ce\u30ea\u30b9\uff08Monolith / Monolithic Architecture\uff09\u3068\u306f\u3001\u300cAPI\u300d\u3068\u300cUI\u300d\u3068\u300c\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u300d\u304c 1\u3064\u306e\u5b9f\u884c\u30e6\u30cb\u30c3\u30c8\uff081\u3064\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3084\u30d0\u30a4\u30ca\u30ea\uff09\u306b\u307e\u3068\u307e\u3063\u3066\u3044\u308b\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u6307\u3057\u307e\u3059\u3002</p> <p></p> <p>\u30e2\u30ce\u30ea\u30b9\u306e\u4e3b\u306a\u7279\u5fb4\uff1a</p> \u7279\u5fb4 \u8aac\u660e \u5358\u4e00\u30c7\u30d7\u30ed\u30a4 \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5168\u4f53\u304c1\u3064\u306e\u30a2\u30fc\u30c6\u30a3\u30d5\u30a1\u30af\u30c8\uff08JAR/WAR\uff09\u3068\u3057\u3066\u30c7\u30d7\u30ed\u30a4 \u540c\u4e00\u30d7\u30ed\u30bb\u30b9 UI\u3001\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3001\u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u304c\u540c\u3058 JVM \u3067\u52d5\u4f5c \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3 \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067 HTML \u3092\u751f\u6210\u3057\u3066\u30d6\u30e9\u30a6\u30b6\u306b\u8fd4\u5374 \u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406 \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067\u30e6\u30fc\u30b6\u30fc\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u7ba1\u7406 \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u5883\u754c \u5358\u4e00\u30d7\u30ed\u30bb\u30b9\u5185\u3067\u306e\u30ed\u30fc\u30ab\u30eb\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3"},{"location":"article/study/study3-1/#222-api-vs","title":"22.2 API \u30b5\u30fc\u30d0\u30fc vs \u30e2\u30ce\u30ea\u30b9","text":"\u89b3\u70b9 API \u30b5\u30fc\u30d0\u30fc\u69cb\u6210 \u30e2\u30ce\u30ea\u30b9\u69cb\u6210 \u7d50\u5408\u5ea6 \u758e\u7d50\u5408\uff08\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u3068\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u304c\u5206\u96e2\uff09 \u5bc6\u7d50\u5408\uff08\u3059\u3079\u3066\u304c\u540c\u4e00\u30b5\u30fc\u30d0\u30fc\uff09 \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9 SPA\uff08React/Vue/Angular\uff09 \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\uff08Thymeleaf\uff09 \u901a\u4fe1\u65b9\u5f0f REST API\uff08JSON\uff09 \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\uff08HTML\uff09 \u958b\u767a\u30c1\u30fc\u30e0 \u30d5\u30ed\u30f3\u30c8/\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3067\u5206\u696d\u53ef\u80fd \u30d5\u30eb\u30b9\u30bf\u30c3\u30af\u3067\u958b\u767a \u30c7\u30d7\u30ed\u30a4 \u5225\u3005\u306b\u30c7\u30d7\u30ed\u30a4\u53ef\u80fd \u5358\u4e00\u30a2\u30fc\u30c6\u30a3\u30d5\u30a1\u30af\u30c8\u3092\u30c7\u30d7\u30ed\u30a4 \u30b9\u30b1\u30fc\u30ea\u30f3\u30b0 \u500b\u5225\u306b\u30b9\u30b1\u30fc\u30eb\u53ef\u80fd \u5168\u4f53\u3092\u30b9\u30b1\u30fc\u30eb \u8907\u96d1\u3055 API \u8a2d\u8a08\u30fb\u8a8d\u8a3c\u30fbCORS \u306a\u3069\u304c\u5fc5\u8981 \u30b7\u30f3\u30d7\u30eb\u3001\u8a2d\u5b9a\u304c\u5c11\u306a\u3044 \u521d\u671f\u958b\u767a\u901f\u5ea6 \u74b0\u5883\u69cb\u7bc9\u306b\u6642\u9593\u304c\u304b\u304b\u308b \u7d20\u65e9\u304f\u958b\u767a\u958b\u59cb\u3067\u304d\u308b SEO SSR/SSG \u304c\u5fc5\u8981\u306a\u5834\u5408\u3042\u308a \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3067 SEO \u30d5\u30ec\u30f3\u30c9\u30ea\u30fc"},{"location":"article/study/study3-1/#223","title":"22.3 \u30e2\u30ce\u30ea\u30b9\u3092\u9078\u629e\u3059\u3079\u304d\u5834\u9762","text":"<p>\u30e2\u30ce\u30ea\u30b9\u304c\u9069\u3057\u3066\u3044\u308b\u72b6\u6cc1\uff1a</p> <ol> <li>\u5c0f\u301c\u4e2d\u898f\u6a21\u306e\u30c1\u30fc\u30e0\uff1a\u5c02\u9580\u306e\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30c1\u30fc\u30e0\u304c\u3044\u306a\u3044\u5834\u5408</li> <li>\u793e\u5185\u30b7\u30b9\u30c6\u30e0\uff1aSEO \u4e0d\u8981\u3001\u9650\u3089\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u6570</li> <li>\u696d\u52d9\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\uff1a\u8907\u96d1\u306a\u696d\u52d9\u30d5\u30ed\u30fc\u3092\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067\u51e6\u7406</li> <li>\u8fc5\u901f\u306a\u958b\u767a\uff1aMVP \u3084\u30d7\u30ed\u30c8\u30bf\u30a4\u30d7\u306e\u7d20\u65e9\u3044\u69cb\u7bc9</li> <li>\u904b\u7528\u30b3\u30b9\u30c8\u91cd\u8996\uff1a\u30a4\u30f3\u30d5\u30e9\u69cb\u6210\u3092\u30b7\u30f3\u30d7\u30eb\u306b\u4fdd\u3061\u305f\u3044\u5834\u5408</li> </ol> <p>\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306b\u304a\u3051\u308b\u30e2\u30ce\u30ea\u30b9\u306e\u30e1\u30ea\u30c3\u30c8\uff1a</p> <pre><code>\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u306e\u7279\u6027\n\u251c\u2500\u2500 \u793e\u5185\u5229\u7528\u304c\u4e2d\u5fc3 \u2192 SEO \u4e0d\u8981\u3001SPA \u4e0d\u8981\n\u251c\u2500\u2500 \u8907\u96d1\u306a\u696d\u52d9\u30d5\u30ed\u30fc \u2192 \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067\u5236\u5fa1\u304c\u5bb9\u6613\n\u251c\u2500\u2500 \u5e33\u7968\u51fa\u529b \u2192 \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067 PDF/Excel \u751f\u6210\n\u251c\u2500\u2500 \u6708\u6b21\u7de0\u3081\u30fb\u6c7a\u7b97\u51e6\u7406 \u2192 \u30d0\u30c3\u30c1\u51e6\u7406\u3068\u306e\u89aa\u548c\u6027\n\u251c\u2500\u2500 \u76e3\u67fb\u8a3c\u8de1 \u2192 \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067\u306e\u30ed\u30b0\u7ba1\u7406\n\u2514\u2500\u2500 \u904b\u7528\u62c5\u5f53\u8005\u306e\u30b9\u30ad\u30eb \u2192 \u30b7\u30f3\u30d7\u30eb\u306a\u69cb\u6210\u304c\u671b\u307e\u3057\u3044\n</code></pre>"},{"location":"article/study/study3-1/#224","title":"22.4 \u30e2\u30ce\u30ea\u30b9\u306b\u304a\u3051\u308b\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":"<p>\u30e2\u30ce\u30ea\u30b9\u3067\u3042\u3063\u3066\u3082\u3001\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08Ports and Adapters\uff09\u3092\u63a1\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u4fdd\u5b88\u6027\u306e\u9ad8\u3044\u8a2d\u8a08\u3092\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002</p> <p></p> <p>\u30e2\u30ce\u30ea\u30b9\u3067\u3082\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u9069\u7528\u3059\u308b\u7406\u7531\uff1a</p> <ol> <li>\u30c6\u30b9\u30c8\u5bb9\u6613\u6027\uff1a\u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\u3092 UI \u304b\u3089\u5206\u96e2\u3057\u3066\u30c6\u30b9\u30c8\u53ef\u80fd</li> <li>\u5c06\u6765\u306e\u79fb\u884c\uff1a\u5fc5\u8981\u306b\u5fdc\u3058\u3066 API \u5c64\u3092\u8ffd\u52a0\u53ef\u80fd</li> <li>\u4fdd\u5b88\u6027\uff1a\u95a2\u5fc3\u306e\u5206\u96e2\u306b\u3088\u308a\u5909\u66f4\u5f71\u97ff\u3092\u5c40\u6240\u5316</li> <li>\u518d\u5229\u7528\u6027\uff1a\u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\u3092\u8907\u6570\u306e UI \u3067\u5171\u6709\u53ef\u80fd</li> </ol>"},{"location":"article/study/study3-1/#225","title":"22.5 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210","text":"<pre><code>src/main/java/com/example/accounting/\n\u251c\u2500\u2500 domain/                     # \u30c9\u30e1\u30a4\u30f3\u5c64\uff08API\u7248\u3068\u5171\u901a\uff09\n\u2502   \u251c\u2500\u2500 model/\n\u2502   \u2502   \u251c\u2500\u2500 account/           # \u52d8\u5b9a\u79d1\u76ee\n\u2502   \u2502   \u251c\u2500\u2500 journal/           # \u4ed5\u8a33\n\u2502   \u2502   \u251c\u2500\u2500 balance/           # \u6b8b\u9ad8\n\u2502   \u2502   \u2514\u2500\u2500 department/        # \u90e8\u9580\n\u2502   \u2514\u2500\u2500 exception/\n\u2502\n\u251c\u2500\u2500 application/               # \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff08API\u7248\u3068\u5171\u901a\uff09\n\u2502   \u251c\u2500\u2500 port/\n\u2502   \u2502   \u251c\u2500\u2500 in/               # Input Port\uff08\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\uff09\n\u2502   \u2502   \u2514\u2500\u2500 out/              # Output Port\uff08\u30ea\u30dd\u30b8\u30c8\u30ea\uff09\n\u2502   \u2514\u2500\u2500 service/\n\u2502\n\u251c\u2500\u2500 infrastructure/\n\u2502   \u251c\u2500\u2500 persistence/          # Output Adapter\uff08DB\u5b9f\u88c5\uff09\n\u2502   \u2502   \u251c\u2500\u2500 mapper/\n\u2502   \u2502   \u2514\u2500\u2500 repository/\n\u2502   \u2514\u2500\u2500 web/                  # Input Adapter\uff08Web\u5b9f\u88c5\uff09\n\u2502       \u251c\u2500\u2500 controller/       # Thymeleaf Controller\n\u2502       \u251c\u2500\u2500 form/             # \u30d5\u30a9\u30fc\u30e0\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\u2502       \u2514\u2500\u2500 helper/           # \u30d3\u30e5\u30fc\u30d8\u30eb\u30d1\u30fc\n\u2502\n\u251c\u2500\u2500 config/\n\u2502\n\u2514\u2500\u2500 resources/\n    \u251c\u2500\u2500 templates/            # Thymeleaf \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\n    \u2502   \u251c\u2500\u2500 layout/           # \u5171\u901a\u30ec\u30a4\u30a2\u30a6\u30c8\n    \u2502   \u251c\u2500\u2500 accounts/         # \u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u753b\u9762\n    \u2502   \u251c\u2500\u2500 journals/         # \u4ed5\u8a33\u5165\u529b\u753b\u9762\n    \u2502   \u251c\u2500\u2500 balances/         # \u6b8b\u9ad8\u7167\u4f1a\u753b\u9762\n    \u2502   \u2514\u2500\u2500 reports/          # \u5e33\u7968\u51fa\u529b\u753b\u9762\n    \u251c\u2500\u2500 static/               # \u9759\u7684\u30ea\u30bd\u30fc\u30b9\n    \u2502   \u251c\u2500\u2500 css/\n    \u2502   \u251c\u2500\u2500 js/\n    \u2502   \u2514\u2500\u2500 images/\n    \u2514\u2500\u2500 messages.properties   # \u30e1\u30c3\u30bb\u30fc\u30b8\u30ea\u30bd\u30fc\u30b9\n</code></pre>"},{"location":"article/study/study3-1/#226","title":"22.6 \u6280\u8853\u30b9\u30bf\u30c3\u30af\u306e\u5c0e\u5165","text":"build.gradle.kts <pre><code>plugins {\n    id(\"java\")\n    id(\"org.springframework.boot\") version \"3.2.0\"\n    id(\"io.spring.dependency-management\") version \"1.1.4\"\n}\n\njava {\n    toolchain {\n        languageVersion = JavaLanguageVersion.of(21)\n    }\n}\n\ndependencies {\n    // Spring Boot Web\uff08REST API\u3067\u306f\u306a\u304fMVC\u3068\u3057\u3066\u4f7f\u7528\uff09\n    implementation(\"org.springframework.boot:spring-boot-starter-web\")\n    implementation(\"org.springframework.boot:spring-boot-starter-validation\")\n\n    // Thymeleaf\uff08\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\uff09\n    implementation(\"org.springframework.boot:spring-boot-starter-thymeleaf\")\n    implementation(\"nz.net.ultraq.thymeleaf:thymeleaf-layout-dialect:3.3.0\")\n\n    // Thymeleaf + Spring Security\uff08\u8a8d\u8a3c\u6a5f\u80fd\u3092\u4f7f\u3046\u5834\u5408\uff09\n    implementation(\"org.thymeleaf.extras:thymeleaf-extras-springsecurity6\")\n\n    // htmx\uff08\u30e2\u30c0\u30f3\u306a\u30a4\u30f3\u30bf\u30e9\u30af\u30c6\u30a3\u30d6UI\uff09\n    // CDN \u304b\u3089\u8aad\u307f\u8fbc\u3080\u305f\u3081\u4f9d\u5b58\u95a2\u4fc2\u306f\u4e0d\u8981\n\n    // MyBatis\n    implementation(\"org.mybatis.spring.boot:mybatis-spring-boot-starter:3.0.3\")\n\n    // PostgreSQL\n    runtimeOnly(\"org.postgresql:postgresql\")\n\n    // Flyway\n    implementation(\"org.flywaydb:flyway-core\")\n    implementation(\"org.flywaydb:flyway-database-postgresql\")\n\n    // Webjars\uff08Bootstrap\u7b49\u306e\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30e9\u30a4\u30d6\u30e9\u30ea\uff09\n    implementation(\"org.webjars:bootstrap:5.3.2\")\n    implementation(\"org.webjars:webjars-locator-core:0.55\")\n\n    // \u5e33\u7968\u51fa\u529b\n    implementation(\"org.apache.poi:poi-ooxml:5.2.5\")  // Excel\n    implementation(\"com.itextpdf:itext7-core:8.0.2\")  // PDF\n\n    // Test\n    testImplementation(\"org.springframework.boot:spring-boot-starter-test\")\n    testImplementation(\"org.testcontainers:postgresql:1.19.3\")\n    testImplementation(\"org.testcontainers:junit-jupiter:1.19.3\")\n\n    // Lombok\n    compileOnly(\"org.projectlombok:lombok\")\n    annotationProcessor(\"org.projectlombok:lombok\")\n}\n</code></pre> <p>\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u8aac\u660e\uff1a</p> \u30d1\u30c3\u30b1\u30fc\u30b8 \u7528\u9014 spring-boot-starter-thymeleaf \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3 thymeleaf-layout-dialect \u30ec\u30a4\u30a2\u30a6\u30c8\u7d99\u627f\uff08\u5171\u901a\u30d8\u30c3\u30c0\u30fc\u30fb\u30d5\u30c3\u30bf\u30fc\uff09 webjars:bootstrap CSS \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\uff08\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u914d\u4fe1\uff09 poi-ooxml Excel \u30d5\u30a1\u30a4\u30eb\u51fa\u529b\uff08\u5e33\u7968\uff09 itext7-core PDF \u30d5\u30a1\u30a4\u30eb\u51fa\u529b\uff08\u5e33\u7968\uff09"},{"location":"article/study/study3-1/#227-spring-boot-thymeleaf","title":"22.7 \u57fa\u672c\u7684\u306a Spring Boot + Thymeleaf \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3","text":"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30af\u30e9\u30b9 <pre><code>package com.example.accounting;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class AccountingApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(AccountingApplication.class, args);\n    }\n}\n</code></pre> application.yml <pre><code>spring:\n  datasource:\n    url: jdbc:postgresql://localhost:5432/accounting\n    username: postgres\n    password: postgres\n\n  thymeleaf:\n    cache: false  # \u958b\u767a\u6642\u306f\u30ad\u30e3\u30c3\u30b7\u30e5\u7121\u52b9\n    prefix: classpath:/templates/\n    suffix: .html\n    encoding: UTF-8\n    mode: HTML\n\n  messages:\n    basename: messages\n    encoding: UTF-8\n\nmybatis:\n  mapper-locations: classpath:mapper/*.xml\n  configuration:\n    map-underscore-to-camel-case: true\n\nserver:\n  servlet:\n    session:\n      timeout: 30m  # \u30bb\u30c3\u30b7\u30e7\u30f3\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\n</code></pre> \u5171\u901a\u30ec\u30a4\u30a2\u30a6\u30c8\uff08layout/default.html\uff09 <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html xmlns:th=\"http://www.thymeleaf.org\"\n      xmlns:layout=\"http://www.ultraq.net.nz/thymeleaf/layout\"\n      lang=\"ja\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;title layout:title-pattern=\"$CONTENT_TITLE - $LAYOUT_TITLE\"&gt;\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0&lt;/title&gt;\n\n    &lt;!-- Bootstrap CSS --&gt;\n    &lt;link rel=\"stylesheet\" th:href=\"@{/webjars/bootstrap/css/bootstrap.min.css}\"&gt;\n\n    &lt;!-- \u30ab\u30b9\u30bf\u30e0 CSS --&gt;\n    &lt;link rel=\"stylesheet\" th:href=\"@{/css/style.css}\"&gt;\n\n    &lt;!-- htmx\uff08\u90e8\u5206\u66f4\u65b0\u7528\uff09 --&gt;\n    &lt;script src=\"https://unpkg.com/htmx.org@1.9.10\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;!-- \u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3\u30d0\u30fc --&gt;\n    &lt;nav class=\"navbar navbar-expand-lg navbar-dark bg-primary\"&gt;\n        &lt;div class=\"container-fluid\"&gt;\n            &lt;a class=\"navbar-brand\" th:href=\"@{/}\"&gt;\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0&lt;/a&gt;\n            &lt;button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\"\n                    data-bs-target=\"#navbarNav\"&gt;\n                &lt;span class=\"navbar-toggler-icon\"&gt;&lt;/span&gt;\n            &lt;/button&gt;\n            &lt;div class=\"collapse navbar-collapse\" id=\"navbarNav\"&gt;\n                &lt;ul class=\"navbar-nav\"&gt;\n                    &lt;li class=\"nav-item dropdown\"&gt;\n                        &lt;a class=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\"\n                           data-bs-toggle=\"dropdown\"&gt;\u30de\u30b9\u30bf&lt;/a&gt;\n                        &lt;ul class=\"dropdown-menu\"&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/accounts}\"&gt;\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/account-structures}\"&gt;\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/tax-transactions}\"&gt;\u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/departments}\"&gt;\u90e8\u9580\u30de\u30b9\u30bf&lt;/a&gt;&lt;/li&gt;\n                        &lt;/ul&gt;\n                    &lt;/li&gt;\n                    &lt;li class=\"nav-item dropdown\"&gt;\n                        &lt;a class=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\"\n                           data-bs-toggle=\"dropdown\"&gt;\u4ed5\u8a33&lt;/a&gt;\n                        &lt;ul class=\"dropdown-menu\"&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/journals}\"&gt;\u4ed5\u8a33\u4e00\u89a7&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/journals/new}\"&gt;\u4ed5\u8a33\u5165\u529b&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/journals/import}\"&gt;\u4ed5\u8a33\u53d6\u8fbc&lt;/a&gt;&lt;/li&gt;\n                        &lt;/ul&gt;\n                    &lt;/li&gt;\n                    &lt;li class=\"nav-item dropdown\"&gt;\n                        &lt;a class=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\"\n                           data-bs-toggle=\"dropdown\"&gt;\u7167\u4f1a&lt;/a&gt;\n                        &lt;ul class=\"dropdown-menu\"&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/balances/daily}\"&gt;\u65e5\u6b21\u6b8b\u9ad8\u7167\u4f1a&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/balances/monthly}\"&gt;\u6708\u6b21\u6b8b\u9ad8\u7167\u4f1a&lt;/a&gt;&lt;/li&gt;\n                        &lt;/ul&gt;\n                    &lt;/li&gt;\n                    &lt;li class=\"nav-item dropdown\"&gt;\n                        &lt;a class=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\"\n                           data-bs-toggle=\"dropdown\"&gt;\u5e33\u7968&lt;/a&gt;\n                        &lt;ul class=\"dropdown-menu\"&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/reports/daily}\"&gt;\u65e5\u8a08\u8868&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/reports/trial-balance}\"&gt;\u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/reports/ledger}\"&gt;\u7dcf\u52d8\u5b9a\u5143\u5e33&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;hr class=\"dropdown-divider\"&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/reports/balance-sheet}\"&gt;\u8cb8\u501f\u5bfe\u7167\u8868&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/reports/income-statement}\"&gt;\u640d\u76ca\u8a08\u7b97\u66f8&lt;/a&gt;&lt;/li&gt;\n                        &lt;/ul&gt;\n                    &lt;/li&gt;\n                &lt;/ul&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/nav&gt;\n\n    &lt;!-- \u30d5\u30e9\u30c3\u30b7\u30e5\u30e1\u30c3\u30bb\u30fc\u30b8 --&gt;\n    &lt;div class=\"container mt-3\"&gt;\n        &lt;div th:if=\"${successMessage}\" class=\"alert alert-success alert-dismissible fade show\" role=\"alert\"&gt;\n            &lt;span th:text=\"${successMessage}\"&gt;&lt;/span&gt;\n            &lt;button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"&gt;&lt;/button&gt;\n        &lt;/div&gt;\n        &lt;div th:if=\"${errorMessage}\" class=\"alert alert-danger alert-dismissible fade show\" role=\"alert\"&gt;\n            &lt;span th:text=\"${errorMessage}\"&gt;&lt;/span&gt;\n            &lt;button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"&gt;&lt;/button&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- \u30e1\u30a4\u30f3\u30b3\u30f3\u30c6\u30f3\u30c4 --&gt;\n    &lt;main class=\"container mt-4\"&gt;\n        &lt;div layout:fragment=\"content\"&gt;\n            &lt;!-- \u5404\u30da\u30fc\u30b8\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u304c\u3053\u3053\u306b\u633f\u5165\u3055\u308c\u308b --&gt;\n        &lt;/div&gt;\n    &lt;/main&gt;\n\n    &lt;!-- \u30d5\u30c3\u30bf\u30fc --&gt;\n    &lt;footer class=\"footer mt-5 py-3 bg-light\"&gt;\n        &lt;div class=\"container text-center\"&gt;\n            &lt;span class=\"text-muted\"&gt;\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0 &amp;copy; 2025&lt;/span&gt;\n        &lt;/div&gt;\n    &lt;/footer&gt;\n\n    &lt;!-- Bootstrap JS --&gt;\n    &lt;script th:src=\"@{/webjars/bootstrap/js/bootstrap.bundle.min.js}\"&gt;&lt;/script&gt;\n\n    &lt;!-- \u30da\u30fc\u30b8\u56fa\u6709\u306e\u30b9\u30af\u30ea\u30d7\u30c8 --&gt;\n    &lt;th:block layout:fragment=\"scripts\"&gt;&lt;/th:block&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"article/study/study3-1/#228-htmx","title":"22.8 htmx \u306b\u3088\u308b\u90e8\u5206\u66f4\u65b0","text":"<p>\u30e2\u30ce\u30ea\u30b9\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u3082\u3001htmx \u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067 SPA \u306e\u3088\u3046\u306a\u64cd\u4f5c\u6027\u3092\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002\u30da\u30fc\u30b8\u5168\u4f53\u3092\u30ea\u30ed\u30fc\u30c9\u305b\u305a\u3001\u5fc5\u8981\u306a\u90e8\u5206\u3060\u3051\u3092\u66f4\u65b0\u3057\u307e\u3059\u3002</p> <p></p> htmx \u306e\u57fa\u672c\u7684\u306a\u4f7f\u3044\u65b9 <pre><code>&lt;!-- \u52d8\u5b9a\u79d1\u76ee\u691c\u7d22\uff08\u90e8\u5206\u66f4\u65b0\uff09 --&gt;\n&lt;div class=\"mb-3\"&gt;\n    &lt;input type=\"text\"\n           class=\"form-control\"\n           name=\"keyword\"\n           placeholder=\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\u307e\u305f\u306f\u52d8\u5b9a\u79d1\u76ee\u540d\u3067\u691c\u7d22\"\n           hx-get=\"/accounts/search\"\n           hx-trigger=\"keyup changed delay:300ms\"\n           hx-target=\"#search-results\"\n           hx-indicator=\"#loading\"&gt;\n    &lt;span id=\"loading\" class=\"htmx-indicator\"&gt;\u691c\u7d22\u4e2d...&lt;/span&gt;\n&lt;/div&gt;\n\n&lt;!-- \u691c\u7d22\u7d50\u679c\u304c\u3053\u3053\u306b\u633f\u5165\u3055\u308c\u308b --&gt;\n&lt;div id=\"search-results\"&gt;\n    &lt;!-- Controller \u304b\u3089\u8fd4\u3055\u308c\u308b HTML \u30d5\u30e9\u30b0\u30e1\u30f3\u30c8 --&gt;\n&lt;/div&gt;\n</code></pre> \u90e8\u5206\u66f4\u65b0\u7528 Controller <pre><code>@Controller\n@RequestMapping(\"/accounts\")\npublic class AccountController {\n\n    private final AccountUseCase accountUseCase;\n\n    // ... \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u7701\u7565\n\n    /**\n     * htmx \u7528\u306e\u691c\u7d22\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\uff08\u30d5\u30e9\u30b0\u30e1\u30f3\u30c8\u3092\u8fd4\u3059\uff09\n     */\n    @GetMapping(\"/search\")\n    public String search(\n            @RequestParam(required = false) String keyword,\n            Model model) {\n\n        List&lt;Account&gt; accounts = accountUseCase.searchAccounts(keyword);\n        model.addAttribute(\"accounts\", accounts);\n\n        // \u30d5\u30e9\u30b0\u30e1\u30f3\u30c8\u306e\u307f\u3092\u8fd4\u3059\n        return \"accounts/search-results :: results\";\n    }\n}\n</code></pre>"},{"location":"article/study/study3-1/#229-api-controller","title":"22.9 API \u30b5\u30fc\u30d0\u30fc\u7248\u3068\u306e Controller \u306e\u9055\u3044","text":"API \u30b5\u30fc\u30d0\u30fc\u7248\uff08REST Controller\uff09 <pre><code>@RestController  // JSON \u3092\u8fd4\u3059\n@RequestMapping(\"/api/accounts\")\npublic class AccountApiController {\n\n    @GetMapping\n    public ResponseEntity&lt;List&lt;AccountResponse&gt;&gt; getAllAccounts() {\n        List&lt;Account&gt; accounts = accountUseCase.getAllAccounts();\n        return ResponseEntity.ok(accounts.stream()\n            .map(AccountResponse::from)\n            .toList());\n    }\n\n    @PostMapping\n    public ResponseEntity&lt;AccountResponse&gt; createAccount(\n            @Valid @RequestBody CreateAccountRequest request) {  // JSON \u30ea\u30af\u30a8\u30b9\u30c8\n        Account account = accountUseCase.createAccount(request.toCommand());\n        return ResponseEntity.status(HttpStatus.CREATED)\n            .body(AccountResponse.from(account));\n    }\n}\n</code></pre> \u30e2\u30ce\u30ea\u30b9\u7248\uff08MVC Controller\uff09 <pre><code>@Controller  // HTML \u3092\u8fd4\u3059\n@RequestMapping(\"/accounts\")\npublic class AccountController {\n\n    @GetMapping\n    public String list(Model model) {\n        List&lt;Account&gt; accounts = accountUseCase.getAllAccounts();\n        model.addAttribute(\"accounts\", accounts);\n        return \"accounts/list\";  // Thymeleaf \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\n    }\n\n    @PostMapping\n    public String create(\n            @Valid @ModelAttribute(\"form\") AccountForm form,  // \u30d5\u30a9\u30fc\u30e0\u30c7\u30fc\u30bf\n            BindingResult bindingResult,\n            RedirectAttributes redirectAttributes) {\n\n        if (bindingResult.hasErrors()) {\n            return \"accounts/new\";  // \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\u6642\u306f\u5165\u529b\u753b\u9762\u306b\u623b\u308b\n        }\n\n        accountUseCase.createAccount(form.toCommand());\n        redirectAttributes.addFlashAttribute(\"successMessage\", \"\u52d8\u5b9a\u79d1\u76ee\u3092\u767b\u9332\u3057\u307e\u3057\u305f\");\n        return \"redirect:/accounts\";  // PRG \u30d1\u30bf\u30fc\u30f3\n    }\n}\n</code></pre> <p>\u4e3b\u306a\u9055\u3044\uff1a</p> \u89b3\u70b9 API \u30b5\u30fc\u30d0\u30fc\u7248 \u30e2\u30ce\u30ea\u30b9\u7248 \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3 <code>@RestController</code> <code>@Controller</code> \u623b\u308a\u5024 <code>ResponseEntity&lt;T&gt;</code> \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u540d\uff08String\uff09 \u30ea\u30af\u30a8\u30b9\u30c8 <code>@RequestBody</code>\uff08JSON\uff09 <code>@ModelAttribute</code>\uff08\u30d5\u30a9\u30fc\u30e0\uff09 \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3 \u4f8b\u5916\u30cf\u30f3\u30c9\u30e9\u3067\u51e6\u7406 <code>BindingResult</code> \u3067\u51e6\u7406 \u30ec\u30b9\u30dd\u30f3\u30b9 JSON HTML\uff08Thymeleaf\uff09 \u30ea\u30c0\u30a4\u30ec\u30af\u30c8 \u4e0d\u8981 PRG \u30d1\u30bf\u30fc\u30f3"},{"location":"article/study/study3-1/#23","title":"\u7b2c23\u7ae0\uff1a\u30de\u30b9\u30bf\u753b\u9762\u306e\u5b9f\u88c5","text":""},{"location":"article/study/study3-1/#231","title":"23.1 \u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u753b\u9762\u306e\u8a2d\u8a08","text":""},{"location":"article/study/study3-1/#_2","title":"\u753b\u9762\u4e00\u89a7","text":"\u753b\u9762 URL \u30e1\u30bd\u30c3\u30c9 \u8aac\u660e \u52d8\u5b9a\u79d1\u76ee\u4e00\u89a7 /accounts GET \u52d8\u5b9a\u79d1\u76ee\u306e\u691c\u7d22\u30fb\u4e00\u89a7\u8868\u793a \u52d8\u5b9a\u79d1\u76ee\u8a73\u7d30 /accounts/{accountCode} GET \u52d8\u5b9a\u79d1\u76ee\u306e\u8a73\u7d30\u8868\u793a \u52d8\u5b9a\u79d1\u76ee\u767b\u9332 /accounts/new GET \u767b\u9332\u30d5\u30a9\u30fc\u30e0\u8868\u793a \u52d8\u5b9a\u79d1\u76ee\u767b\u9332\u51e6\u7406 /accounts POST \u767b\u9332\u51e6\u7406 \u52d8\u5b9a\u79d1\u76ee\u7de8\u96c6 /accounts/{accountCode}/edit GET \u7de8\u96c6\u30d5\u30a9\u30fc\u30e0\u8868\u793a \u52d8\u5b9a\u79d1\u76ee\u66f4\u65b0\u51e6\u7406 /accounts/{accountCode} POST \u66f4\u65b0\u51e6\u7406\uff08PUT \u4ee3\u66ff\uff09 \u52d8\u5b9a\u79d1\u76ee\u524a\u9664\u51e6\u7406 /accounts/{accountCode}/delete POST \u524a\u9664\u51e6\u7406\uff08DELETE \u4ee3\u66ff\uff09 <p>\u6ce8\u610f: HTML \u30d5\u30a9\u30fc\u30e0\u306f GET/POST \u306e\u307f\u5bfe\u5fdc\u306e\u305f\u3081\u3001PUT/DELETE \u306f POST \u3067\u4ee3\u66ff\u3057\u307e\u3059\u3002</p>"},{"location":"article/study/study3-1/#232","title":"23.2 \u30d5\u30a9\u30fc\u30e0\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u8a08","text":"AccountForm.java <pre><code>package com.example.accounting.infrastructure.web.form;\n\nimport com.example.accounting.application.port.in.CreateAccountCommand;\nimport com.example.accounting.domain.model.account.*;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.NotNull;\nimport jakarta.validation.constraints.Size;\nimport lombok.Data;\n\n/**\n * \u52d8\u5b9a\u79d1\u76ee\u767b\u9332\u30fb\u7de8\u96c6\u30d5\u30a9\u30fc\u30e0\n */\n@Data\npublic class AccountForm {\n\n    @NotBlank(message = \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\u306f\u5fc5\u9808\u3067\u3059\")\n    @Size(max = 5, message = \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\u306f5\u6587\u5b57\u4ee5\u5185\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\")\n    private String accountCode;\n\n    @NotBlank(message = \"\u52d8\u5b9a\u79d1\u76ee\u540d\u306f\u5fc5\u9808\u3067\u3059\")\n    @Size(max = 40, message = \"\u52d8\u5b9a\u79d1\u76ee\u540d\u306f40\u6587\u5b57\u4ee5\u5185\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\")\n    private String accountName;\n\n    @Size(max = 10, message = \"\u52d8\u5b9a\u79d1\u76ee\u7565\u540d\u306f10\u6587\u5b57\u4ee5\u5185\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\")\n    private String accountShortName;\n\n    @Size(max = 40, message = \"\u52d8\u5b9a\u79d1\u76ee\u30ab\u30ca\u306f40\u6587\u5b57\u4ee5\u5185\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\")\n    private String accountNameKana;\n\n    @NotNull(message = \"BSPL\u533a\u5206\u306f\u5fc5\u9808\u3067\u3059\")\n    private BsplType bsplType;\n\n    @NotNull(message = \"\u8cb8\u501f\u533a\u5206\u306f\u5fc5\u9808\u3067\u3059\")\n    private DebitCreditType debitCreditType;\n\n    @NotNull(message = \"\u53d6\u5f15\u8981\u7d20\u533a\u5206\u306f\u5fc5\u9808\u3067\u3059\")\n    private TransactionElementType transactionElementType;\n\n    @NotNull(message = \"\u96c6\u8a08\u533a\u5206\u306f\u5fc5\u9808\u3067\u3059\")\n    private AggregationType aggregationType;\n\n    private ManagementAccountType managementAccountType;\n\n    private ExpenseType expenseType;\n\n    private SubsidiaryType subsidiaryType;\n\n    private TaxCalculationType taxCalculationType;\n\n    private String taxTransactionCode;\n\n    /**\n     * \u30d5\u30a9\u30fc\u30e0\u3092\u30b3\u30de\u30f3\u30c9\u306b\u5909\u63db\n     */\n    public CreateAccountCommand toCommand() {\n        return CreateAccountCommand.builder()\n            .accountCode(this.accountCode)\n            .accountName(this.accountName)\n            .accountShortName(this.accountShortName)\n            .accountNameKana(this.accountNameKana)\n            .bsplType(this.bsplType)\n            .debitCreditType(this.debitCreditType)\n            .transactionElementType(this.transactionElementType)\n            .aggregationType(this.aggregationType)\n            .managementAccountType(this.managementAccountType)\n            .expenseType(this.expenseType)\n            .subsidiaryType(this.subsidiaryType)\n            .taxCalculationType(this.taxCalculationType)\n            .taxTransactionCode(this.taxTransactionCode)\n            .build();\n    }\n\n    /**\n     * \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u304b\u3089\u30d5\u30a9\u30fc\u30e0\u3092\u751f\u6210\n     */\n    public static AccountForm from(Account account) {\n        AccountForm form = new AccountForm();\n        form.setAccountCode(account.getAccountCode());\n        form.setAccountName(account.getAccountName());\n        form.setAccountShortName(account.getAccountShortName());\n        form.setAccountNameKana(account.getAccountNameKana());\n        form.setBsplType(account.getBsplType());\n        form.setDebitCreditType(account.getDebitCreditType());\n        form.setTransactionElementType(account.getTransactionElementType());\n        form.setAggregationType(account.getAggregationType());\n        form.setManagementAccountType(account.getManagementAccountType());\n        form.setExpenseType(account.getExpenseType());\n        form.setSubsidiaryType(account.getSubsidiaryType());\n        form.setTaxCalculationType(account.getTaxCalculationType());\n        form.setTaxTransactionCode(account.getTaxTransactionCode());\n        return form;\n    }\n}\n</code></pre>"},{"location":"article/study/study3-1/#233-controller-tdd","title":"23.3 \u52d8\u5b9a\u79d1\u76ee Controller \u306e TDD \u5b9f\u88c5","text":""},{"location":"article/study/study3-1/#red","title":"Red: \u5931\u6557\u3059\u308b\u30c6\u30b9\u30c8\u3092\u66f8\u304f","text":"AccountControllerTest.java <pre><code>package com.example.accounting.infrastructure.web.controller;\n\nimport com.example.accounting.domain.model.account.*;\nimport com.example.accounting.infrastructure.persistence.mapper.AccountMapper;\nimport org.junit.jupiter.api.*;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.test.context.DynamicPropertyRegistry;\nimport org.springframework.test.context.DynamicPropertySource;\nimport org.springframework.test.web.servlet.MockMvc;\nimport org.testcontainers.containers.PostgreSQLContainer;\nimport org.testcontainers.junit.jupiter.Container;\nimport org.testcontainers.junit.jupiter.Testcontainers;\n\nimport static org.hamcrest.Matchers.*;\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;\n\n@SpringBootTest\n@AutoConfigureMockMvc\n@Testcontainers\n@DisplayName(\"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u753b\u9762\")\nclass AccountControllerTest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:16\")\n            .withDatabaseName(\"accounting_test\")\n            .withUsername(\"test\")\n            .withPassword(\"test\");\n\n    @DynamicPropertySource\n    static void configureProperties(DynamicPropertyRegistry registry) {\n        registry.add(\"spring.datasource.url\", postgres::getJdbcUrl);\n        registry.add(\"spring.datasource.username\", postgres::getUsername);\n        registry.add(\"spring.datasource.password\", postgres::getPassword);\n    }\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @Autowired\n    private AccountMapper accountMapper;\n\n    @BeforeEach\n    void setUp() {\n        accountMapper.deleteAll();\n    }\n\n    @Nested\n    @DisplayName(\"GET /accounts - \u52d8\u5b9a\u79d1\u76ee\u4e00\u89a7\")\n    class AccountList {\n\n        @Test\n        @DisplayName(\"\u52d8\u5b9a\u79d1\u76ee\u4e00\u89a7\u753b\u9762\u3092\u8868\u793a\u3067\u304d\u308b\")\n        void shouldDisplayAccountList() throws Exception {\n            // Arrange\n            insertTestAccount(\"11110\", \"\u73fe\u91d1\", BsplType.BS, DebitCreditType.DEBIT);\n\n            // Act &amp; Assert\n            mockMvc.perform(get(\"/accounts\"))\n                .andExpect(status().isOk())\n                .andExpect(view().name(\"accounts/list\"))\n                .andExpect(model().attributeExists(\"accounts\"))\n                .andExpect(content().string(containsString(\"11110\")))\n                .andExpect(content().string(containsString(\"\u73fe\u91d1\")));\n        }\n\n        @Test\n        @DisplayName(\"BSPL\u533a\u5206\u3067\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3067\u304d\u308b\")\n        void shouldFilterByBsplType() throws Exception {\n            // Arrange\n            insertTestAccount(\"11110\", \"\u73fe\u91d1\", BsplType.BS, DebitCreditType.DEBIT);\n            insertTestAccount(\"41100\", \"\u58f2\u4e0a\u9ad8\", BsplType.PL, DebitCreditType.CREDIT);\n\n            // Act &amp; Assert\n            mockMvc.perform(get(\"/accounts\").param(\"bsplType\", \"BS\"))\n                .andExpect(status().isOk())\n                .andExpect(model().attribute(\"accounts\", hasSize(1)))\n                .andExpect(content().string(containsString(\"\u73fe\u91d1\")))\n                .andExpect(content().string(not(containsString(\"\u58f2\u4e0a\u9ad8\"))));\n        }\n    }\n\n    @Nested\n    @DisplayName(\"POST /accounts - \u52d8\u5b9a\u79d1\u76ee\u767b\u9332\u51e6\u7406\")\n    class CreateAccount {\n\n        @Test\n        @DisplayName(\"\u52d8\u5b9a\u79d1\u76ee\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void shouldCreateAccount() throws Exception {\n            mockMvc.perform(post(\"/accounts\")\n                    .param(\"accountCode\", \"11120\")\n                    .param(\"accountName\", \"\u5f53\u5ea7\u9810\u91d1\")\n                    .param(\"bsplType\", \"BS\")\n                    .param(\"debitCreditType\", \"DEBIT\")\n                    .param(\"transactionElementType\", \"ASSET\")\n                    .param(\"aggregationType\", \"POSTING\"))\n                .andExpect(status().is3xxRedirection())\n                .andExpect(redirectedUrl(\"/accounts\"))\n                .andExpect(flash().attribute(\"successMessage\", containsString(\"\u767b\u9332\")));\n\n            // \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\n            var saved = accountMapper.findByCode(\"11120\");\n            Assertions.assertNotNull(saved);\n            Assertions.assertEquals(\"\u5f53\u5ea7\u9810\u91d1\", saved.getAccountName());\n        }\n\n        @Test\n        @DisplayName(\"\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\u6642\u306f\u5165\u529b\u753b\u9762\u306b\u623b\u308b\")\n        void shouldReturnFormOnValidationError() throws Exception {\n            mockMvc.perform(post(\"/accounts\")\n                    .param(\"accountCode\", \"\")  // \u5fc5\u9808\u9805\u76ee\u304c\u7a7a\n                    .param(\"accountName\", \"\")\n                    .param(\"bsplType\", \"BS\"))\n                .andExpect(status().isOk())\n                .andExpect(view().name(\"accounts/new\"))\n                .andExpect(model().attributeHasFieldErrors(\"form\", \"accountCode\", \"accountName\"));\n        }\n    }\n\n    private void insertTestAccount(String code, String name, BsplType bsplType, DebitCreditType debitCreditType) {\n        accountMapper.insert(Account.builder()\n            .accountCode(code)\n            .accountName(name)\n            .accountShortName(name)\n            .accountNameKana(\"\")\n            .bsplType(bsplType)\n            .debitCreditType(debitCreditType)\n            .transactionElementType(TransactionElementType.ASSET)\n            .aggregationType(AggregationType.POSTING)\n            .build());\n    }\n}\n</code></pre>"},{"location":"article/study/study3-1/#green-controller","title":"Green: Controller \u306e\u5b9f\u88c5","text":"AccountController.java <pre><code>package com.example.accounting.infrastructure.web.controller;\n\nimport com.example.accounting.application.port.in.*;\nimport com.example.accounting.domain.exception.AccountInUseException;\nimport com.example.accounting.domain.exception.AccountNotFoundException;\nimport com.example.accounting.domain.exception.DuplicateAccountException;\nimport com.example.accounting.domain.model.account.*;\nimport com.example.accounting.infrastructure.web.form.AccountForm;\nimport jakarta.validation.Valid;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.validation.BindingResult;\nimport org.springframework.web.bind.annotation.*;\nimport org.springframework.web.servlet.mvc.support.RedirectAttributes;\n\nimport java.util.List;\n\n/**\n * \u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf Controller\n */\n@Controller\n@RequestMapping(\"/accounts\")\npublic class AccountController {\n\n    private final AccountUseCase accountUseCase;\n\n    public AccountController(AccountUseCase accountUseCase) {\n        this.accountUseCase = accountUseCase;\n    }\n\n    /**\n     * \u52d8\u5b9a\u79d1\u76ee\u4e00\u89a7\u753b\u9762\n     */\n    @GetMapping\n    public String list(\n            @RequestParam(required = false) String keyword,\n            @RequestParam(required = false) BsplType bsplType,\n            @RequestParam(required = false) DebitCreditType debitCreditType,\n            Model model) {\n\n        List&lt;Account&gt; accounts;\n        if (keyword != null || bsplType != null || debitCreditType != null) {\n            accounts = accountUseCase.searchAccounts(keyword, bsplType, debitCreditType);\n        } else {\n            accounts = accountUseCase.getAllAccounts();\n        }\n\n        model.addAttribute(\"accounts\", accounts);\n        model.addAttribute(\"keyword\", keyword);\n        model.addAttribute(\"selectedBsplType\", bsplType);\n        model.addAttribute(\"selectedDebitCreditType\", debitCreditType);\n        addEnumsToModel(model);\n\n        return \"accounts/list\";\n    }\n\n    /**\n     * \u52d8\u5b9a\u79d1\u76ee\u767b\u9332\u753b\u9762\n     */\n    @GetMapping(\"/new\")\n    public String newForm(Model model) {\n        model.addAttribute(\"form\", new AccountForm());\n        addEnumsToModel(model);\n        return \"accounts/new\";\n    }\n\n    /**\n     * \u52d8\u5b9a\u79d1\u76ee\u767b\u9332\u51e6\u7406\n     */\n    @PostMapping\n    public String create(\n            @Valid @ModelAttribute(\"form\") AccountForm form,\n            BindingResult bindingResult,\n            Model model,\n            RedirectAttributes redirectAttributes) {\n\n        if (bindingResult.hasErrors()) {\n            addEnumsToModel(model);\n            return \"accounts/new\";\n        }\n\n        try {\n            accountUseCase.createAccount(form.toCommand());\n            redirectAttributes.addFlashAttribute(\"successMessage\",\n                \"\u52d8\u5b9a\u79d1\u76ee\u300c\" + form.getAccountName() + \"\u300d\u3092\u767b\u9332\u3057\u307e\u3057\u305f\");\n            return \"redirect:/accounts\";\n        } catch (DuplicateAccountException e) {\n            model.addAttribute(\"errorMessage\",\n                \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\u300c\" + form.getAccountCode() + \"\u300d\u306f\u65e2\u306b\u5b58\u5728\u3057\u307e\u3059\");\n            addEnumsToModel(model);\n            return \"accounts/new\";\n        }\n    }\n\n    /**\n     * \u52d8\u5b9a\u79d1\u76ee\u8a73\u7d30\u753b\u9762\n     */\n    @GetMapping(\"/{accountCode}\")\n    public String detail(@PathVariable String accountCode, Model model) {\n        Account account = accountUseCase.getAccount(accountCode)\n            .orElseThrow(() -&gt; new AccountNotFoundException(accountCode));\n\n        model.addAttribute(\"account\", account);\n        return \"accounts/detail\";\n    }\n\n    /**\n     * \u52d8\u5b9a\u79d1\u76ee\u524a\u9664\u51e6\u7406\n     */\n    @PostMapping(\"/{accountCode}/delete\")\n    public String delete(\n            @PathVariable String accountCode,\n            Model model,\n            RedirectAttributes redirectAttributes) {\n\n        try {\n            Account account = accountUseCase.getAccount(accountCode)\n                .orElseThrow(() -&gt; new AccountNotFoundException(accountCode));\n\n            accountUseCase.deleteAccount(accountCode);\n            redirectAttributes.addFlashAttribute(\"successMessage\",\n                \"\u52d8\u5b9a\u79d1\u76ee\u300c\" + account.getAccountName() + \"\u300d\u3092\u524a\u9664\u3057\u307e\u3057\u305f\");\n            return \"redirect:/accounts\";\n        } catch (AccountInUseException e) {\n            Account account = accountUseCase.getAccount(accountCode).orElseThrow();\n            model.addAttribute(\"account\", account);\n            model.addAttribute(\"errorMessage\",\n                \"\u3053\u306e\u52d8\u5b9a\u79d1\u76ee\u306f\u4ed5\u8a33\u3067\u4f7f\u7528\u4e2d\u306e\u305f\u3081\u524a\u9664\u3067\u304d\u307e\u305b\u3093\");\n            return \"accounts/detail\";\n        }\n    }\n\n    /**\n     * \u5217\u6319\u578b\u3092\u30e2\u30c7\u30eb\u306b\u8ffd\u52a0\n     */\n    private void addEnumsToModel(Model model) {\n        model.addAttribute(\"bsplTypes\", BsplType.values());\n        model.addAttribute(\"debitCreditTypes\", DebitCreditType.values());\n        model.addAttribute(\"transactionElementTypes\", TransactionElementType.values());\n        model.addAttribute(\"aggregationTypes\", AggregationType.values());\n        model.addAttribute(\"managementAccountTypes\", ManagementAccountType.values());\n        model.addAttribute(\"expenseTypes\", ExpenseType.values());\n        model.addAttribute(\"subsidiaryTypes\", SubsidiaryType.values());\n        model.addAttribute(\"taxCalculationTypes\", TaxCalculationType.values());\n    }\n\n    /**\n     * 404 \u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\n     */\n    @ExceptionHandler(AccountNotFoundException.class)\n    @ResponseStatus(org.springframework.http.HttpStatus.NOT_FOUND)\n    public String handleNotFound(AccountNotFoundException e, Model model) {\n        model.addAttribute(\"errorMessage\", e.getMessage());\n        return \"error/404\";\n    }\n}\n</code></pre>"},{"location":"article/study/study3-1/#24","title":"\u7b2c24\u7ae0\uff1a\u4ed5\u8a33\u5165\u529b\u753b\u9762\u306e\u5b9f\u88c5","text":""},{"location":"article/study/study3-1/#241","title":"24.1 \u4ed5\u8a33\u5165\u529b\u753b\u9762\u306e\u8a2d\u8a08","text":""},{"location":"article/study/study3-1/#_3","title":"\u753b\u9762\u4e00\u89a7","text":"\u753b\u9762 URL \u30e1\u30bd\u30c3\u30c9 \u8aac\u660e \u4ed5\u8a33\u4e00\u89a7 /journals GET \u4ed5\u8a33\u306e\u691c\u7d22\u30fb\u4e00\u89a7\u8868\u793a \u4ed5\u8a33\u8a73\u7d30 /journals/{journalNumber} GET \u4ed5\u8a33\u306e\u8a73\u7d30\u8868\u793a \u4ed5\u8a33\u5165\u529b /journals/new GET \u5165\u529b\u30d5\u30a9\u30fc\u30e0\u8868\u793a \u4ed5\u8a33\u767b\u9332\u51e6\u7406 /journals POST \u767b\u9332\u51e6\u7406 \u4ed5\u8a33\u53d6\u6d88 /journals/{journalNumber}/cancel POST \u8d64\u9ed2\u51e6\u7406"},{"location":"article/study/study3-1/#242","title":"24.2 \u4ed5\u8a33\u5165\u529b\u30d5\u30a9\u30fc\u30e0\u30aa\u30d6\u30b8\u30a7\u30af\u30c8","text":"JournalForm.java <pre><code>package com.example.accounting.infrastructure.web.form;\n\nimport com.example.accounting.application.port.in.CreateJournalCommand;\nimport com.example.accounting.domain.model.journal.SingleComplexType;\nimport jakarta.validation.Valid;\nimport jakarta.validation.constraints.NotEmpty;\nimport jakarta.validation.constraints.NotNull;\nimport lombok.Data;\n\nimport java.time.LocalDate;\nimport java.util.ArrayList;\nimport java.util.List;\n\n/**\n * \u4ed5\u8a33\u5165\u529b\u30d5\u30a9\u30fc\u30e0\n */\n@Data\npublic class JournalForm {\n\n    @NotNull(message = \"\u8d77\u7968\u65e5\u306f\u5fc5\u9808\u3067\u3059\")\n    private LocalDate journalDate;\n\n    private String description;\n\n    private boolean closingJournal;\n\n    @NotNull(message = \"\u5358\u8907\u533a\u5206\u306f\u5fc5\u9808\u3067\u3059\")\n    private SingleComplexType singleComplexType;\n\n    @Valid\n    @NotEmpty(message = \"\u4ed5\u8a33\u660e\u7d30\u306f1\u884c\u4ee5\u4e0a\u5fc5\u8981\u3067\u3059\")\n    private List&lt;JournalLineForm&gt; lines = new ArrayList&lt;&gt;();\n\n    /**\n     * \u30d5\u30a9\u30fc\u30e0\u3092\u30b3\u30de\u30f3\u30c9\u306b\u5909\u63db\n     */\n    public CreateJournalCommand toCommand() {\n        return CreateJournalCommand.builder()\n            .journalDate(this.journalDate)\n            .description(this.description)\n            .closingJournal(this.closingJournal)\n            .singleComplexType(this.singleComplexType)\n            .lines(this.lines.stream()\n                .map(JournalLineForm::toCommand)\n                .toList())\n            .build();\n    }\n\n    /**\n     * \u521d\u671f\u5316\uff08\u7a7a\u306e\u660e\u7d30\u884c\u3092\u8ffd\u52a0\uff09\n     */\n    public void initializeLines() {\n        if (this.lines.isEmpty()) {\n            // \u501f\u65b91\u884c\u3001\u8cb8\u65b91\u884c\u3092\u8ffd\u52a0\n            JournalLineForm debitLine = new JournalLineForm();\n            debitLine.setDebitCredit(\"DEBIT\");\n            this.lines.add(debitLine);\n\n            JournalLineForm creditLine = new JournalLineForm();\n            creditLine.setDebitCredit(\"CREDIT\");\n            this.lines.add(creditLine);\n        }\n    }\n}\n</code></pre> JournalLineForm.java <pre><code>package com.example.accounting.infrastructure.web.form;\n\nimport com.example.accounting.application.port.in.CreateJournalLineCommand;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.NotNull;\nimport jakarta.validation.constraints.Positive;\nimport lombok.Data;\n\nimport java.math.BigDecimal;\n\n/**\n * \u4ed5\u8a33\u660e\u7d30\u884c\u30d5\u30a9\u30fc\u30e0\n */\n@Data\npublic class JournalLineForm {\n\n    @NotBlank(message = \"\u8cb8\u501f\u533a\u5206\u306f\u5fc5\u9808\u3067\u3059\")\n    private String debitCredit;  // \"DEBIT\" or \"CREDIT\"\n\n    @NotBlank(message = \"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\u306f\u5fc5\u9808\u3067\u3059\")\n    private String accountCode;\n\n    private String subsidiaryCode;\n\n    @NotNull(message = \"\u91d1\u984d\u306f\u5fc5\u9808\u3067\u3059\")\n    @Positive(message = \"\u91d1\u984d\u306f\u6b63\u306e\u6570\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\")\n    private BigDecimal amount;\n\n    private String taxType;\n\n    private BigDecimal taxRate;\n\n    private String departmentCode;\n\n    private String projectCode;\n\n    private String lineDescription;\n\n    /**\n     * \u30d5\u30a9\u30fc\u30e0\u3092\u30b3\u30de\u30f3\u30c9\u306b\u5909\u63db\n     */\n    public CreateJournalLineCommand toCommand() {\n        return CreateJournalLineCommand.builder()\n            .debitCredit(this.debitCredit)\n            .accountCode(this.accountCode)\n            .subsidiaryCode(this.subsidiaryCode)\n            .amount(this.amount)\n            .taxType(this.taxType)\n            .taxRate(this.taxRate)\n            .departmentCode(this.departmentCode)\n            .projectCode(this.projectCode)\n            .lineDescription(this.lineDescription)\n            .build();\n    }\n}\n</code></pre>"},{"location":"article/study/study3-1/#243-controller","title":"24.3 \u4ed5\u8a33 Controller \u306e\u5b9f\u88c5","text":"JournalController.java <pre><code>package com.example.accounting.infrastructure.web.controller;\n\nimport com.example.accounting.application.port.in.*;\nimport com.example.accounting.domain.exception.DebitCreditImbalanceException;\nimport com.example.accounting.domain.exception.JournalNotFoundException;\nimport com.example.accounting.domain.model.journal.*;\nimport com.example.accounting.infrastructure.web.form.JournalForm;\nimport jakarta.validation.Valid;\nimport org.springframework.format.annotation.DateTimeFormat;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.validation.BindingResult;\nimport org.springframework.web.bind.annotation.*;\nimport org.springframework.web.servlet.mvc.support.RedirectAttributes;\n\nimport java.time.LocalDate;\nimport java.util.List;\n\n/**\n * \u4ed5\u8a33 Controller\n */\n@Controller\n@RequestMapping(\"/journals\")\npublic class JournalController {\n\n    private final JournalUseCase journalUseCase;\n    private final AccountUseCase accountUseCase;\n    private final DepartmentUseCase departmentUseCase;\n\n    public JournalController(\n            JournalUseCase journalUseCase,\n            AccountUseCase accountUseCase,\n            DepartmentUseCase departmentUseCase) {\n        this.journalUseCase = journalUseCase;\n        this.accountUseCase = accountUseCase;\n        this.departmentUseCase = departmentUseCase;\n    }\n\n    /**\n     * \u4ed5\u8a33\u4e00\u89a7\u753b\u9762\n     */\n    @GetMapping\n    public String list(\n            @RequestParam(required = false) @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) LocalDate fromDate,\n            @RequestParam(required = false) @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) LocalDate toDate,\n            @RequestParam(required = false) String accountCode,\n            @RequestParam(required = false) JournalStatus status,\n            Model model) {\n\n        // \u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u5f53\u6708\n        if (fromDate == null) {\n            fromDate = LocalDate.now().withDayOfMonth(1);\n        }\n        if (toDate == null) {\n            toDate = LocalDate.now();\n        }\n\n        List&lt;Journal&gt; journals = journalUseCase.searchJournals(fromDate, toDate, accountCode, status);\n\n        model.addAttribute(\"journals\", journals);\n        model.addAttribute(\"fromDate\", fromDate);\n        model.addAttribute(\"toDate\", toDate);\n        model.addAttribute(\"accountCode\", accountCode);\n        model.addAttribute(\"status\", status);\n        model.addAttribute(\"statuses\", JournalStatus.values());\n\n        return \"journals/list\";\n    }\n\n    /**\n     * \u4ed5\u8a33\u5165\u529b\u753b\u9762\n     */\n    @GetMapping(\"/new\")\n    public String newForm(Model model) {\n        JournalForm form = new JournalForm();\n        form.setJournalDate(LocalDate.now());\n        form.setSingleComplexType(SingleComplexType.SINGLE);\n        form.initializeLines();\n\n        model.addAttribute(\"form\", form);\n        addMasterDataToModel(model);\n\n        return \"journals/new\";\n    }\n\n    /**\n     * \u4ed5\u8a33\u767b\u9332\u51e6\u7406\n     */\n    @PostMapping\n    public String create(\n            @Valid @ModelAttribute(\"form\") JournalForm form,\n            BindingResult bindingResult,\n            Model model,\n            RedirectAttributes redirectAttributes) {\n\n        if (bindingResult.hasErrors()) {\n            addMasterDataToModel(model);\n            return \"journals/new\";\n        }\n\n        try {\n            Journal journal = journalUseCase.createJournal(form.toCommand());\n            redirectAttributes.addFlashAttribute(\"successMessage\",\n                \"\u4ed5\u8a33\u300c\" + journal.getJournalNumber() + \"\u300d\u3092\u767b\u9332\u3057\u307e\u3057\u305f\");\n            return \"redirect:/journals/\" + journal.getJournalNumber();\n        } catch (DebitCreditImbalanceException e) {\n            model.addAttribute(\"errorMessage\", \"\u501f\u65b9\u30fb\u8cb8\u65b9\u306e\u5408\u8a08\u304c\u4e00\u81f4\u3057\u307e\u305b\u3093\");\n            addMasterDataToModel(model);\n            return \"journals/new\";\n        }\n    }\n\n    /**\n     * \u4ed5\u8a33\u8a73\u7d30\u753b\u9762\n     */\n    @GetMapping(\"/{journalNumber}\")\n    public String detail(@PathVariable String journalNumber, Model model) {\n        Journal journal = journalUseCase.getJournal(journalNumber)\n            .orElseThrow(() -&gt; new JournalNotFoundException(journalNumber));\n\n        model.addAttribute(\"journal\", journal);\n        return \"journals/detail\";\n    }\n\n    /**\n     * \u4ed5\u8a33\u53d6\u6d88\u51e6\u7406\uff08\u8d64\u9ed2\u51e6\u7406\uff09\n     */\n    @PostMapping(\"/{journalNumber}/cancel\")\n    public String cancel(\n            @PathVariable String journalNumber,\n            @RequestParam(required = false) String reason,\n            RedirectAttributes redirectAttributes) {\n\n        Journal cancelJournal = journalUseCase.cancelJournal(journalNumber, reason);\n        redirectAttributes.addFlashAttribute(\"successMessage\",\n            \"\u4ed5\u8a33\u300c\" + journalNumber + \"\u300d\u3092\u53d6\u6d88\u3057\u307e\u3057\u305f\u3002\" +\n            \"\u53d6\u6d88\u4ed5\u8a33\u300c\" + cancelJournal.getJournalNumber() + \"\u300d\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\");\n        return \"redirect:/journals/\" + cancelJournal.getJournalNumber();\n    }\n\n    /**\n     * \u30de\u30b9\u30bf\u30c7\u30fc\u30bf\u3092\u30e2\u30c7\u30eb\u306b\u8ffd\u52a0\n     */\n    private void addMasterDataToModel(Model model) {\n        model.addAttribute(\"accounts\", accountUseCase.getPostingAccounts());\n        model.addAttribute(\"departments\", departmentUseCase.getAllDepartments());\n        model.addAttribute(\"singleComplexTypes\", SingleComplexType.values());\n    }\n}\n</code></pre>"},{"location":"article/study/study3-1/#25","title":"\u7b2c25\u7ae0\uff1a\u5e33\u7968\u51fa\u529b\u306e\u5b9f\u88c5","text":""},{"location":"article/study/study3-1/#251","title":"25.1 \u5e33\u7968\u51fa\u529b\u306e\u8a2d\u8a08","text":"<p>\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u5e33\u7968\u3092\u51fa\u529b\u3057\u307e\u3059\u3002</p> \u5e33\u7968\u540d \u8aac\u660e \u51fa\u529b\u5f62\u5f0f \u65e5\u8a08\u8868 \u65e5\u6b21\u306e\u4ed5\u8a33\u5408\u8a08 HTML / Excel / PDF \u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868 \u6708\u6b21\u306e\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8 HTML / Excel / PDF \u7dcf\u52d8\u5b9a\u5143\u5e33 \u52d8\u5b9a\u79d1\u76ee\u5225\u306e\u4ed5\u8a33\u660e\u7d30 HTML / Excel / PDF \u8cb8\u501f\u5bfe\u7167\u8868 \u8cc7\u7523\u30fb\u8ca0\u50b5\u30fb\u8cc7\u672c\u306e\u72b6\u6cc1 HTML / Excel / PDF \u640d\u76ca\u8a08\u7b97\u66f8 \u53ce\u76ca\u30fb\u8cbb\u7528\u306e\u72b6\u6cc1 HTML / Excel / PDF"},{"location":"article/study/study3-1/#252-controller","title":"25.2 \u5e33\u7968 Controller \u306e\u5b9f\u88c5","text":"ReportController.java <pre><code>package com.example.accounting.infrastructure.web.controller;\n\nimport com.example.accounting.application.port.in.*;\nimport com.example.accounting.domain.model.report.*;\nimport com.example.accounting.infrastructure.report.ExcelReportGenerator;\nimport com.example.accounting.infrastructure.report.PdfReportGenerator;\nimport org.springframework.format.annotation.DateTimeFormat;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.time.LocalDate;\nimport java.time.YearMonth;\n\n/**\n * \u5e33\u7968\u51fa\u529b Controller\n */\n@Controller\n@RequestMapping(\"/reports\")\npublic class ReportController {\n\n    private final ReportUseCase reportUseCase;\n    private final ExcelReportGenerator excelGenerator;\n    private final PdfReportGenerator pdfGenerator;\n\n    public ReportController(\n            ReportUseCase reportUseCase,\n            ExcelReportGenerator excelGenerator,\n            PdfReportGenerator pdfGenerator) {\n        this.reportUseCase = reportUseCase;\n        this.excelGenerator = excelGenerator;\n        this.pdfGenerator = pdfGenerator;\n    }\n\n    /**\n     * \u65e5\u8a08\u8868\u753b\u9762\n     */\n    @GetMapping(\"/daily\")\n    public String dailyReport(\n            @RequestParam(required = false) @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) LocalDate date,\n            Model model) {\n\n        if (date == null) {\n            date = LocalDate.now();\n        }\n\n        DailyReport report = reportUseCase.getDailyReport(date);\n        model.addAttribute(\"report\", report);\n        model.addAttribute(\"date\", date);\n\n        return \"reports/daily\";\n    }\n\n    /**\n     * \u65e5\u8a08\u8868 Excel \u51fa\u529b\n     */\n    @GetMapping(\"/daily/excel\")\n    public ResponseEntity&lt;byte[]&gt; dailyReportExcel(\n            @RequestParam @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) LocalDate date) {\n\n        DailyReport report = reportUseCase.getDailyReport(date);\n        byte[] excelData = excelGenerator.generateDailyReport(report);\n\n        return ResponseEntity.ok()\n            .header(HttpHeaders.CONTENT_DISPOSITION,\n                \"attachment; filename=\\\"daily_report_\" + date + \".xlsx\\\"\")\n            .contentType(MediaType.parseMediaType(\n                \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"))\n            .body(excelData);\n    }\n\n    /**\n     * \u65e5\u8a08\u8868 PDF \u51fa\u529b\n     */\n    @GetMapping(\"/daily/pdf\")\n    public ResponseEntity&lt;byte[]&gt; dailyReportPdf(\n            @RequestParam @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) LocalDate date) {\n\n        DailyReport report = reportUseCase.getDailyReport(date);\n        byte[] pdfData = pdfGenerator.generateDailyReport(report);\n\n        return ResponseEntity.ok()\n            .header(HttpHeaders.CONTENT_DISPOSITION,\n                \"attachment; filename=\\\"daily_report_\" + date + \".pdf\\\"\")\n            .contentType(MediaType.APPLICATION_PDF)\n            .body(pdfData);\n    }\n\n    /**\n     * \u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868\u753b\u9762\n     */\n    @GetMapping(\"/trial-balance\")\n    public String trialBalance(\n            @RequestParam(required = false) String fiscalYear,\n            @RequestParam(required = false) Integer month,\n            Model model) {\n\n        YearMonth yearMonth = (fiscalYear != null &amp;&amp; month != null)\n            ? YearMonth.of(Integer.parseInt(fiscalYear), month)\n            : YearMonth.now();\n\n        TrialBalance report = reportUseCase.getTrialBalance(yearMonth);\n        model.addAttribute(\"report\", report);\n        model.addAttribute(\"yearMonth\", yearMonth);\n\n        return \"reports/trial-balance\";\n    }\n\n    /**\n     * \u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868 Excel \u51fa\u529b\n     */\n    @GetMapping(\"/trial-balance/excel\")\n    public ResponseEntity&lt;byte[]&gt; trialBalanceExcel(\n            @RequestParam String fiscalYear,\n            @RequestParam Integer month) {\n\n        YearMonth yearMonth = YearMonth.of(Integer.parseInt(fiscalYear), month);\n        TrialBalance report = reportUseCase.getTrialBalance(yearMonth);\n        byte[] excelData = excelGenerator.generateTrialBalance(report);\n\n        return ResponseEntity.ok()\n            .header(HttpHeaders.CONTENT_DISPOSITION,\n                \"attachment; filename=\\\"trial_balance_\" + yearMonth + \".xlsx\\\"\")\n            .contentType(MediaType.parseMediaType(\n                \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"))\n            .body(excelData);\n    }\n\n    /**\n     * \u8cb8\u501f\u5bfe\u7167\u8868\u753b\u9762\n     */\n    @GetMapping(\"/balance-sheet\")\n    public String balanceSheet(\n            @RequestParam(required = false) @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) LocalDate date,\n            Model model) {\n\n        if (date == null) {\n            date = LocalDate.now();\n        }\n\n        BalanceSheet report = reportUseCase.getBalanceSheet(date);\n        model.addAttribute(\"report\", report);\n        model.addAttribute(\"date\", date);\n\n        return \"reports/balance-sheet\";\n    }\n\n    /**\n     * \u640d\u76ca\u8a08\u7b97\u66f8\u753b\u9762\n     */\n    @GetMapping(\"/income-statement\")\n    public String incomeStatement(\n            @RequestParam(required = false) String fiscalYear,\n            @RequestParam(required = false) Integer fromMonth,\n            @RequestParam(required = false) Integer toMonth,\n            Model model) {\n\n        YearMonth from = (fiscalYear != null &amp;&amp; fromMonth != null)\n            ? YearMonth.of(Integer.parseInt(fiscalYear), fromMonth)\n            : YearMonth.now().withMonth(4);  // \u671f\u9996\uff084\u6708\uff09\n\n        YearMonth to = (fiscalYear != null &amp;&amp; toMonth != null)\n            ? YearMonth.of(Integer.parseInt(fiscalYear), toMonth)\n            : YearMonth.now();\n\n        IncomeStatement report = reportUseCase.getIncomeStatement(from, to);\n        model.addAttribute(\"report\", report);\n        model.addAttribute(\"fromMonth\", from);\n        model.addAttribute(\"toMonth\", to);\n\n        return \"reports/income-statement\";\n    }\n}\n</code></pre>"},{"location":"article/study/study3-1/#253-excel","title":"25.3 Excel \u5e33\u7968\u751f\u6210","text":"ExcelReportGenerator.java <pre><code>package com.example.accounting.infrastructure.report;\n\nimport com.example.accounting.domain.model.report.*;\nimport org.apache.poi.ss.usermodel.*;\nimport org.apache.poi.ss.util.CellRangeAddress;\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\nimport org.springframework.stereotype.Component;\n\nimport java.io.ByteArrayOutputStream;\nimport java.io.IOException;\nimport java.time.format.DateTimeFormatter;\n\n/**\n * Excel \u5e33\u7968\u751f\u6210\n */\n@Component\npublic class ExcelReportGenerator {\n\n    /**\n     * \u65e5\u8a08\u8868 Excel \u751f\u6210\n     */\n    public byte[] generateDailyReport(DailyReport report) {\n        try (Workbook workbook = new XSSFWorkbook()) {\n            Sheet sheet = workbook.createSheet(\"\u65e5\u8a08\u8868\");\n\n            // \u30b9\u30bf\u30a4\u30eb\u8a2d\u5b9a\n            CellStyle headerStyle = createHeaderStyle(workbook);\n            CellStyle amountStyle = createAmountStyle(workbook);\n\n            // \u30bf\u30a4\u30c8\u30eb\n            Row titleRow = sheet.createRow(0);\n            Cell titleCell = titleRow.createCell(0);\n            titleCell.setCellValue(\"\u65e5 \u8a08 \u8868\");\n            sheet.addMergedRegion(new CellRangeAddress(0, 0, 0, 5));\n\n            // \u65e5\u4ed8\n            Row dateRow = sheet.createRow(1);\n            dateRow.createCell(0).setCellValue(\n                report.getDate().format(DateTimeFormatter.ofPattern(\"yyyy\u5e74MM\u6708dd\u65e5\")));\n\n            // \u30d8\u30c3\u30c0\u30fc\n            Row headerRow = sheet.createRow(3);\n            String[] headers = {\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u52d8\u5b9a\u79d1\u76ee\u540d\", \"\u501f\u65b9\u91d1\u984d\", \"\u8cb8\u65b9\u91d1\u984d\"};\n            for (int i = 0; i &lt; headers.length; i++) {\n                Cell cell = headerRow.createCell(i);\n                cell.setCellValue(headers[i]);\n                cell.setCellStyle(headerStyle);\n            }\n\n            // \u30c7\u30fc\u30bf\u884c\n            int rowNum = 4;\n            for (DailyReportLine line : report.getLines()) {\n                Row row = sheet.createRow(rowNum++);\n                row.createCell(0).setCellValue(line.getAccountCode());\n                row.createCell(1).setCellValue(line.getAccountName());\n\n                Cell debitCell = row.createCell(2);\n                debitCell.setCellValue(line.getDebitAmount().doubleValue());\n                debitCell.setCellStyle(amountStyle);\n\n                Cell creditCell = row.createCell(3);\n                creditCell.setCellValue(line.getCreditAmount().doubleValue());\n                creditCell.setCellStyle(amountStyle);\n            }\n\n            // \u5408\u8a08\u884c\n            Row totalRow = sheet.createRow(rowNum);\n            totalRow.createCell(1).setCellValue(\"\u5408\u8a08\");\n\n            Cell totalDebitCell = totalRow.createCell(2);\n            totalDebitCell.setCellValue(report.getTotalDebit().doubleValue());\n            totalDebitCell.setCellStyle(amountStyle);\n\n            Cell totalCreditCell = totalRow.createCell(3);\n            totalCreditCell.setCellValue(report.getTotalCredit().doubleValue());\n            totalCreditCell.setCellStyle(amountStyle);\n\n            // \u5217\u5e45\u8abf\u6574\n            for (int i = 0; i &lt; 4; i++) {\n                sheet.autoSizeColumn(i);\n            }\n\n            ByteArrayOutputStream out = new ByteArrayOutputStream();\n            workbook.write(out);\n            return out.toByteArray();\n\n        } catch (IOException e) {\n            throw new RuntimeException(\"Excel \u751f\u6210\u30a8\u30e9\u30fc\", e);\n        }\n    }\n\n    private CellStyle createHeaderStyle(Workbook workbook) {\n        CellStyle style = workbook.createCellStyle();\n        style.setFillForegroundColor(IndexedColors.GREY_25_PERCENT.getIndex());\n        style.setFillPattern(FillPatternType.SOLID_FOREGROUND);\n        style.setBorderBottom(BorderStyle.THIN);\n        style.setBorderTop(BorderStyle.THIN);\n        style.setBorderLeft(BorderStyle.THIN);\n        style.setBorderRight(BorderStyle.THIN);\n        style.setAlignment(HorizontalAlignment.CENTER);\n        return style;\n    }\n\n    private CellStyle createAmountStyle(Workbook workbook) {\n        CellStyle style = workbook.createCellStyle();\n        DataFormat format = workbook.createDataFormat();\n        style.setDataFormat(format.getFormat(\"#,##0\"));\n        style.setAlignment(HorizontalAlignment.RIGHT);\n        return style;\n    }\n}\n</code></pre>"},{"location":"article/study/study3-1/#26","title":"\u7b2c26\u7ae0\uff1a\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u306e\u5b9f\u88c5","text":""},{"location":"article/study/study3-1/#261","title":"26.1 \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u306e\u8a2d\u8a08","text":"<p>\u4e00\u89a7\u753b\u9762\u3067\u30c7\u30fc\u30bf\u91cf\u304c\u591a\u3044\u5834\u5408\u3001\u3059\u3079\u3066\u306e\u30c7\u30fc\u30bf\u3092\u4e00\u5ea6\u306b\u8868\u793a\u3059\u308b\u3068\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u304c\u4f4e\u4e0b\u3057\u307e\u3059\u3002\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u88c5\u3057\u3066\u3001\u30c7\u30fc\u30bf\u3092\u5206\u5272\u3057\u3066\u8868\u793a\u3057\u307e\u3059\u3002</p> \u8981\u7d20 \u8aac\u660e PageResult \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u7d50\u679c\u3092\u8868\u3059\u6c4e\u7528\u30af\u30e9\u30b9 LIMIT/OFFSET SQL \u3067\u306e\u30da\u30fc\u30b8\u5206\u5272 \u8868\u793a\u4ef6\u6570 \u30e6\u30fc\u30b6\u30fc\u304c\u9078\u629e\u53ef\u80fd\uff0810/25/50/100\u4ef6\uff09 \u30da\u30fc\u30b8\u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3 \u6700\u521d/\u524d/\u30da\u30fc\u30b8\u756a\u53f7/\u6b21/\u6700\u5f8c"},{"location":"article/study/study3-1/#262-pageresult","title":"26.2 PageResult \u30af\u30e9\u30b9","text":"PageResult.java <pre><code>package com.example.sms.domain.model.common;\n\nimport java.util.List;\n\n/**\n * \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u7d50\u679c\u3092\u8868\u3059\u6c4e\u7528\u30af\u30e9\u30b9.\n *\n * @param &lt;T&gt; \u30b3\u30f3\u30c6\u30f3\u30c4\u306e\u578b\n */\npublic class PageResult&lt;T&gt; {\n\n    private final List&lt;T&gt; content;\n    private final int page;\n    private final int size;\n    private final long totalElements;\n    private final int totalPages;\n\n    public PageResult(List&lt;T&gt; content, int page, int size, long totalElements) {\n        this.content = content;\n        this.page = page;\n        this.size = size;\n        this.totalElements = totalElements;\n        this.totalPages = size &gt; 0 ? (int) Math.ceil((double) totalElements / size) : 0;\n    }\n\n    public List&lt;T&gt; getContent() {\n        return content;\n    }\n\n    public int getPage() {\n        return page;\n    }\n\n    public int getSize() {\n        return size;\n    }\n\n    public long getTotalElements() {\n        return totalElements;\n    }\n\n    public int getTotalPages() {\n        return totalPages;\n    }\n\n    public boolean isFirst() {\n        return page == 0;\n    }\n\n    public boolean isLast() {\n        return page &gt;= totalPages - 1;\n    }\n\n    public boolean hasPrevious() {\n        return page &gt; 0;\n    }\n\n    public boolean hasNext() {\n        return page &lt; totalPages - 1;\n    }\n}\n</code></pre>"},{"location":"article/study/study3-1/#263-mapper","title":"26.3 Mapper \u5c64\u306e\u5b9f\u88c5","text":"<p>\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u7528\u306e\u30af\u30a8\u30ea\u3068\u4ef6\u6570\u53d6\u5f97\u30af\u30a8\u30ea\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> PartnerMapper.java\uff08\u629c\u7c8b\uff09 <pre><code>/**\n * \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u4ed8\u304d\u3067\u53d6\u5f15\u5148\u3092\u691c\u7d22.\n */\nList&lt;Partner&gt; findWithPagination(\n    @Param(\"offset\") int offset,\n    @Param(\"limit\") int limit,\n    @Param(\"type\") String type,\n    @Param(\"keyword\") String keyword);\n\n/**\n * \u691c\u7d22\u6761\u4ef6\u306b\u4e00\u81f4\u3059\u308b\u53d6\u5f15\u5148\u306e\u4ef6\u6570\u3092\u53d6\u5f97.\n */\nlong count(@Param(\"type\") String type, @Param(\"keyword\") String keyword);\n</code></pre> PartnerMapper.xml\uff08\u629c\u7c8b\uff09 <pre><code>&lt;select id=\"findWithPagination\" resultMap=\"PartnerResultMap\"&gt;\n    SELECT * FROM \"\u53d6\u5f15\u5148\u30de\u30b9\u30bf\"\n    &lt;where&gt;\n        &lt;if test=\"type == 'customer'\"&gt;\n            \"\u9867\u5ba2\u533a\u5206\" = TRUE\n        &lt;/if&gt;\n        &lt;if test=\"type == 'supplier'\"&gt;\n            \"\u4ed5\u5165\u5148\u533a\u5206\" = TRUE\n        &lt;/if&gt;\n        &lt;if test=\"keyword != null and keyword != ''\"&gt;\n            AND (LOWER(\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\") LIKE LOWER('%' || #{keyword} || '%')\n                 OR LOWER(\"\u53d6\u5f15\u5148\u540d\") LIKE LOWER('%' || #{keyword} || '%'))\n        &lt;/if&gt;\n    &lt;/where&gt;\n    ORDER BY \"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\"\n    LIMIT #{limit} OFFSET #{offset}\n&lt;/select&gt;\n\n&lt;select id=\"count\" resultType=\"long\"&gt;\n    SELECT COUNT(*) FROM \"\u53d6\u5f15\u5148\u30de\u30b9\u30bf\"\n    &lt;where&gt;\n        &lt;if test=\"type == 'customer'\"&gt;\n            \"\u9867\u5ba2\u533a\u5206\" = TRUE\n        &lt;/if&gt;\n        &lt;if test=\"type == 'supplier'\"&gt;\n            \"\u4ed5\u5165\u5148\u533a\u5206\" = TRUE\n        &lt;/if&gt;\n        &lt;if test=\"keyword != null and keyword != ''\"&gt;\n            AND (LOWER(\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\") LIKE LOWER('%' || #{keyword} || '%')\n                 OR LOWER(\"\u53d6\u5f15\u5148\u540d\") LIKE LOWER('%' || #{keyword} || '%'))\n        &lt;/if&gt;\n    &lt;/where&gt;\n&lt;/select&gt;\n</code></pre>"},{"location":"article/study/study3-1/#264-repository","title":"26.4 Repository \u5c64\u306e\u5b9f\u88c5","text":"PartnerRepository.java\uff08\u629c\u7c8b\uff09 <pre><code>/**\n * \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u4ed8\u304d\u3067\u53d6\u5f15\u5148\u3092\u691c\u7d22.\n */\nPageResult&lt;Partner&gt; findWithPagination(int page, int size, String type, String keyword);\n</code></pre> PartnerRepositoryImpl.java\uff08\u629c\u7c8b\uff09 <pre><code>@Override\npublic PageResult&lt;Partner&gt; findWithPagination(int page, int size, String type, String keyword) {\n    int offset = page * size;\n    List&lt;Partner&gt; partners = partnerMapper.findWithPagination(offset, size, type, keyword);\n    long totalElements = partnerMapper.count(type, keyword);\n    return new PageResult&lt;&gt;(partners, page, size, totalElements);\n}\n</code></pre>"},{"location":"article/study/study3-1/#265-usecase-service","title":"26.5 UseCase / Service \u5c64\u306e\u5b9f\u88c5","text":"PartnerUseCase.java\uff08\u629c\u7c8b\uff09 <pre><code>/**\n * \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u4ed8\u304d\u3067\u53d6\u5f15\u5148\u3092\u53d6\u5f97.\n */\nPageResult&lt;Partner&gt; getPartners(int page, int size, String type, String keyword);\n</code></pre> PartnerService.java\uff08\u629c\u7c8b\uff09 <pre><code>@Override\n@Transactional(readOnly = true)\npublic PageResult&lt;Partner&gt; getPartners(int page, int size, String type, String keyword) {\n    return partnerRepository.findWithPagination(page, size, type, keyword);\n}\n</code></pre>"},{"location":"article/study/study3-1/#266-controller","title":"26.6 Controller \u306e\u5b9f\u88c5","text":"PartnerWebController.java\uff08\u629c\u7c8b\uff09 <pre><code>@GetMapping\npublic String list(\n        @RequestParam(defaultValue = \"0\") int page,\n        @RequestParam(defaultValue = \"10\") int size,\n        @RequestParam(required = false) String type,\n        @RequestParam(required = false) String keyword,\n        Model model) {\n\n    PageResult&lt;Partner&gt; partnerPage = partnerUseCase.getPartners(page, size, type, keyword);\n\n    model.addAttribute(\"partners\", partnerPage.getContent());\n    model.addAttribute(\"page\", partnerPage);\n    model.addAttribute(\"selectedType\", type);\n    model.addAttribute(\"keyword\", keyword);\n    model.addAttribute(\"currentSize\", size);\n\n    return \"partners/list\";\n}\n</code></pre>"},{"location":"article/study/study3-1/#267","title":"26.7 \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u5b9f\u88c5","text":"list.html \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u90e8\u5206 <pre><code>&lt;!-- \u691c\u7d22\u30d5\u30a9\u30fc\u30e0 --&gt;\n&lt;div class=\"search-form\"&gt;\n    &lt;form th:action=\"@{/partners}\" method=\"get\" class=\"row g-3\"&gt;\n        &lt;!-- \u8868\u793a\u4ef6\u6570 --&gt;\n        &lt;div class=\"col-md-2\"&gt;\n            &lt;label class=\"form-label\"&gt;\u8868\u793a\u4ef6\u6570&lt;/label&gt;\n            &lt;select name=\"size\" class=\"form-select\"&gt;\n                &lt;option value=\"10\" th:selected=\"${currentSize == 10}\"&gt;10\u4ef6&lt;/option&gt;\n                &lt;option value=\"25\" th:selected=\"${currentSize == 25}\"&gt;25\u4ef6&lt;/option&gt;\n                &lt;option value=\"50\" th:selected=\"${currentSize == 50}\"&gt;50\u4ef6&lt;/option&gt;\n                &lt;option value=\"100\" th:selected=\"${currentSize == 100}\"&gt;100\u4ef6&lt;/option&gt;\n            &lt;/select&gt;\n        &lt;/div&gt;\n        &lt;div class=\"col-md-2 d-flex align-items-end\"&gt;\n            &lt;button type=\"submit\" class=\"btn btn-secondary\"&gt;\u691c\u7d22&lt;/button&gt;\n        &lt;/div&gt;\n    &lt;/form&gt;\n&lt;/div&gt;\n\n&lt;!-- \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3 --&gt;\n&lt;div class=\"mt-3\"&gt;\n    &lt;!-- \u4ef6\u6570\u8868\u793a --&gt;\n    &lt;div class=\"text-muted text-center mb-2\"&gt;\n        &lt;span th:if=\"${page.totalElements &gt; 0}\"&gt;\n            &lt;span th:text=\"${page.page * page.size + 1}\"&gt;1&lt;/span&gt; -\n            &lt;span th:text=\"${page.page * page.size + #lists.size(partners)}\"&gt;10&lt;/span&gt; \u4ef6\n            \uff08\u5168 &lt;span th:text=\"${page.totalElements}\"&gt;0&lt;/span&gt; \u4ef6\uff09\n        &lt;/span&gt;\n        &lt;span th:if=\"${page.totalElements == 0}\"&gt;0 \u4ef6&lt;/span&gt;\n    &lt;/div&gt;\n\n    &lt;!-- \u30da\u30fc\u30b8\u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3 --&gt;\n    &lt;nav th:if=\"${page.totalPages &gt; 1}\" aria-label=\"\u30da\u30fc\u30b8\u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3\"&gt;\n        &lt;ul class=\"pagination justify-content-center mb-0\"&gt;\n            &lt;!-- \u6700\u521d\u306e\u30da\u30fc\u30b8\u3078 --&gt;\n            &lt;li class=\"page-item\" th:classappend=\"${page.first} ? 'disabled'\"&gt;\n                &lt;a class=\"page-link\" th:href=\"@{/partners(page=0, size=${currentSize})}\"&gt;&amp;laquo;&lt;/a&gt;\n            &lt;/li&gt;\n            &lt;!-- \u524d\u306e\u30da\u30fc\u30b8\u3078 --&gt;\n            &lt;li class=\"page-item\" th:classappend=\"${!page.hasPrevious()} ? 'disabled'\"&gt;\n                &lt;a class=\"page-link\" th:href=\"@{/partners(page=${page.page - 1}, size=${currentSize})}\"&gt;&amp;lsaquo;&lt;/a&gt;\n            &lt;/li&gt;\n\n            &lt;!-- \u30da\u30fc\u30b8\u756a\u53f7 --&gt;\n            &lt;th:block th:with=\"startPage=${page.page &gt; 2 ? page.page - 2 : 0},\n                               endPage=${page.page + 2 &lt; page.totalPages - 1 ? page.page + 2 : page.totalPages - 1}\"&gt;\n                &lt;li class=\"page-item\" th:if=\"${startPage &gt; 0}\"&gt;\n                    &lt;span class=\"page-link\"&gt;...&lt;/span&gt;\n                &lt;/li&gt;\n                &lt;li th:each=\"i : ${#numbers.sequence(startPage, endPage)}\"\n                    class=\"page-item\"\n                    th:classappend=\"${i == page.page} ? 'active'\"&gt;\n                    &lt;a class=\"page-link\"\n                       th:href=\"@{/partners(page=${i}, size=${currentSize})}\"\n                       th:text=\"${i + 1}\"&gt;1&lt;/a&gt;\n                &lt;/li&gt;\n                &lt;li class=\"page-item\" th:if=\"${endPage &lt; page.totalPages - 1}\"&gt;\n                    &lt;span class=\"page-link\"&gt;...&lt;/span&gt;\n                &lt;/li&gt;\n            &lt;/th:block&gt;\n\n            &lt;!-- \u6b21\u306e\u30da\u30fc\u30b8\u3078 --&gt;\n            &lt;li class=\"page-item\" th:classappend=\"${!page.hasNext()} ? 'disabled'\"&gt;\n                &lt;a class=\"page-link\" th:href=\"@{/partners(page=${page.page + 1}, size=${currentSize})}\"&gt;&amp;rsaquo;&lt;/a&gt;\n            &lt;/li&gt;\n            &lt;!-- \u6700\u5f8c\u306e\u30da\u30fc\u30b8\u3078 --&gt;\n            &lt;li class=\"page-item\" th:classappend=\"${page.last} ? 'disabled'\"&gt;\n                &lt;a class=\"page-link\" th:href=\"@{/partners(page=${page.totalPages - 1}, size=${currentSize})}\"&gt;&amp;raquo;&lt;/a&gt;\n            &lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/nav&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"article/study/study3-1/#268","title":"26.8 \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u306e\u52d5\u4f5c","text":"<pre><code>                    \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u51e6\u7406\u30d5\u30ed\u30fc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  \u30d6\u30e9\u30a6\u30b6                                                    \u2502\n\u2502  /partners?page=2&amp;size=10&amp;keyword=xxx                       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Controller                                                  \u2502\n\u2502  - page, size, keyword \u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u53d7\u3051\u53d6\u308b                   \u2502\n\u2502  - UseCase.getPartners(page, size, keyword) \u3092\u547c\u3073\u51fa\u3059       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Service / Repository                                        \u2502\n\u2502  - offset = page * size \u3092\u8a08\u7b97                               \u2502\n\u2502  - findWithPagination(offset, size, keyword) \u3092\u5b9f\u884c          \u2502\n\u2502  - count(keyword) \u3067\u7dcf\u4ef6\u6570\u3092\u53d6\u5f97                             \u2502\n\u2502  - PageResult&lt;T&gt; \u3092\u751f\u6210\u3057\u3066\u8fd4\u5374                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  SQL (MyBatis)                                               \u2502\n\u2502  SELECT * FROM \"\u30c6\u30fc\u30d6\u30eb\"                                    \u2502\n\u2502  WHERE ... LIMIT 10 OFFSET 20                               \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  PageResult&lt;T&gt;                                               \u2502\n\u2502  - content: \u30c7\u30fc\u30bf\u30ea\u30b9\u30c8 (10\u4ef6)                               \u2502\n\u2502  - page: 2                                                   \u2502\n\u2502  - size: 10                                                  \u2502\n\u2502  - totalElements: 57                                         \u2502\n\u2502  - totalPages: 6                                             \u2502\n\u2502  - isFirst/isLast/hasPrevious/hasNext \u30e1\u30bd\u30c3\u30c9               \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"article/study/study3-1/#269","title":"26.9 \u691c\u7d22\u6761\u4ef6\u306e\u4fdd\u6301","text":"<p>\u30da\u30fc\u30b8\u9077\u79fb\u6642\u306b\u691c\u7d22\u6761\u4ef6\u3092\u4fdd\u6301\u3059\u308b\u305f\u3081\u3001\u3059\u3079\u3066\u306e\u30ea\u30f3\u30af\u306b\u691c\u7d22\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u542b\u3081\u307e\u3059\u3002</p> <pre><code>&lt;!-- \u691c\u7d22\u6761\u4ef6\u4ed8\u304d\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u30ea\u30f3\u30af --&gt;\n&lt;a th:href=\"@{/partners(\n    page=${i},\n    size=${currentSize},\n    type=${selectedType},\n    keyword=${keyword}\n)}\"&gt;\n</code></pre>"},{"location":"article/study/study3-1/#_4","title":"\u307e\u3068\u3081","text":""},{"location":"article/study/study3-1/#_5","title":"\u5b66\u3093\u3060\u3053\u3068","text":"<ol> <li>\u5e33\u7968\u306e\u7a2e\u985e: \u65e5\u8a08\u8868\u3001\u8a66\u7b97\u8868\u3001\u5143\u5e33\u3001\u8ca1\u52d9\u8af8\u8868</li> <li>HTML \u8868\u793a: Thymeleaf \u306b\u3088\u308b\u5e33\u7968\u753b\u9762\u306e\u5b9f\u88c5</li> <li>Excel \u51fa\u529b: Apache POI \u306b\u3088\u308b Excel \u30d5\u30a1\u30a4\u30eb\u751f\u6210</li> <li>PDF \u51fa\u529b: iText \u306b\u3088\u308b PDF \u30d5\u30a1\u30a4\u30eb\u751f\u6210</li> <li>\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9: ResponseEntity \u306b\u3088\u308b\u6dfb\u4ed8\u30d5\u30a1\u30a4\u30eb\u8fd4\u5374</li> <li>\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3: PageResult \u306b\u3088\u308b\u4e00\u89a7\u753b\u9762\u306e\u30da\u30fc\u30b8\u5206\u5272"},{"location":"article/study/study3-1/#_6","title":"\u5b9f\u88c5\u3057\u305f\u6a5f\u80fd","text":"\u6a5f\u80fd \u8aac\u660e \u30db\u30fc\u30e0\u753b\u9762 \u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3001\u30af\u30a4\u30c3\u30af\u30a2\u30af\u30bb\u30b9 \u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf \u4e00\u89a7\u30fb\u767b\u9332\u30fb\u7de8\u96c6\u30fb\u524a\u9664\u30fb\u691c\u7d22 \u4ed5\u8a33\u5165\u529b \u8907\u5408\u4ed5\u8a33\u5bfe\u5fdc\u3001\u8cb8\u501f\u30c1\u30a7\u30c3\u30af \u5e33\u7968\u51fa\u529b \u65e5\u8a08\u8868\u3001\u8a66\u7b97\u8868\u3001\u8ca1\u52d9\u8af8\u8868"},{"location":"article/study/study3-1/#vs-api","title":"\u30e2\u30ce\u30ea\u30b9 vs API \u30b5\u30fc\u30d0\u30fc","text":"\u89b3\u70b9 \u30e2\u30ce\u30ea\u30b9 API \u30b5\u30fc\u30d0\u30fc \u9069\u7528\u5834\u9762 \u793e\u5185\u30b7\u30b9\u30c6\u30e0\u3001\u5c0f\u301c\u4e2d\u898f\u6a21 \u5927\u898f\u6a21\u3001SPA \u9023\u643a \u958b\u767a\u901f\u5ea6 \u9ad8\u901f \u74b0\u5883\u69cb\u7bc9\u306b\u6642\u9593 \u4fdd\u5b88\u6027 \u9069\u5207\u306a\u8a2d\u8a08\u3067\u9ad8\u3044 \u9ad8\u3044 \u30c1\u30fc\u30e0\u69cb\u6210 \u30d5\u30eb\u30b9\u30bf\u30c3\u30af \u30d5\u30ed\u30f3\u30c8/\u30d0\u30c3\u30af\u5206\u96e2"},{"location":"article/study/study3-1/#_7","title":"\u6280\u8853\u7684\u306a\u30dd\u30a4\u30f3\u30c8","text":"<ol> <li>\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3: \u30e2\u30ce\u30ea\u30b9\u3067\u3082\u9069\u7528\u53ef\u80fd</li> <li>Thymeleaf: \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0</li> <li>htmx: JavaScript \u4e0d\u8981\u306e\u90e8\u5206\u66f4\u65b0</li> <li>PRG \u30d1\u30bf\u30fc\u30f3: \u30d5\u30a9\u30fc\u30e0\u4e8c\u91cd\u9001\u4fe1\u9632\u6b62</li> <li>\u5e33\u7968\u751f\u6210: POI\uff08Excel\uff09\u3001iText\uff08PDF\uff09</li> </ol>"},{"location":"article/study/study3-2/","title":"\u5b9f\u8df5\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\uff1a\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0 \u7814\u7a76 2 - JavaFX \u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5b9f\u88c5","text":""},{"location":"article/study/study3-2/#_1","title":"\u306f\u3058\u3081\u306b","text":"<p>\u672c\u7814\u7a76\u3067\u306f\u3001JavaFX \u3092\u4f7f\u7528\u3057\u305f\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5b9f\u88c5\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002API \u30b5\u30fc\u30d0\u30fc\u7248\u3001\u30e2\u30ce\u30ea\u30b9\u30b5\u30fc\u30d0\u30fc\u7248\u3068\u540c\u3058 UseCase \u3092\u5171\u6709\u3057\u306a\u304c\u3089\u3001\u30ea\u30c3\u30c1\u30af\u30e9\u30a4\u30a2\u30f3\u30c8 UI \u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002</p>"},{"location":"article/study/study3-2/#_2","title":"\u672c\u30d1\u30fc\u30c8\u3067\u5b66\u3076\u3053\u3068","text":"<ul> <li>JavaFX \u3068 Spring Boot \u306e\u7d71\u5408</li> <li>MVVM\uff08Model-View-ViewModel\uff09\u30d1\u30bf\u30fc\u30f3\u306e\u5b9f\u8df5</li> <li>FXML \u306b\u3088\u308b\u5ba3\u8a00\u7684 UI \u5b9a\u7fa9</li> <li>\u53cc\u65b9\u5411\u30c7\u30fc\u30bf\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0</li> <li>\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3068\u306e\u7d71\u5408</li> </ul>"},{"location":"article/study/study3-2/#22javafx","title":"\u7b2c22\u7ae0\uff1aJavaFX \u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u57fa\u790e","text":""},{"location":"article/study/study3-2/#221-javafx","title":"22.1 JavaFX \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":"<p>JavaFX \u306f Java \u306e\u30e2\u30c0\u30f3\u306a GUI \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u3059\u3002FXML \u306b\u3088\u308b\u5ba3\u8a00\u7684 UI \u5b9a\u7fa9\u3068\u3001CSS \u306b\u3088\u308b\u30b9\u30bf\u30a4\u30ea\u30f3\u30b0\u3092\u7279\u5fb4\u3068\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/study/study3-2/#222-mvvm","title":"22.2 MVVM \u30d1\u30bf\u30fc\u30f3","text":"<p>JavaFX \u3067\u306f MVVM\uff08Model-View-ViewModel\uff09\u30d1\u30bf\u30fc\u30f3\u3092\u63a1\u7528\u3057\u3001UI \u3068\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3092\u5206\u96e2\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/study/study3-2/#223","title":"22.3 \u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3068\u306e\u7d71\u5408","text":"<p>JavaFX \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e Input Adapter \u3068\u3057\u3066\u52d5\u4f5c\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/study/study3-2/#224","title":"22.4 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210","text":"<pre><code>app/src/main/java/com/example/accounting/\n\u251c\u2500\u2500 infrastructure/\n\u2502   \u251c\u2500\u2500 in/\n\u2502   \u2502   \u251c\u2500\u2500 api/           # REST API Controller\uff08\u65e2\u5b58\uff09\n\u2502   \u2502   \u251c\u2500\u2500 web/           # Thymeleaf Controller\uff08\u65e2\u5b58\uff09\n\u2502   \u2502   \u2514\u2500\u2500 javafx/        # JavaFX \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\uff08\u65b0\u898f\uff09\n\u2502   \u2502       \u251c\u2500\u2500 controller/    # FXML Controller\n\u2502   \u2502       \u251c\u2500\u2500 viewmodel/     # ViewModel\n\u2502   \u2502       \u251c\u2500\u2500 view/          # \u884c\u30e2\u30c7\u30eb\uff08TableView \u7528\uff09\n\u2502   \u2502       \u251c\u2500\u2500 dialog/        # \u30c0\u30a4\u30a2\u30ed\u30b0\n\u2502   \u2502       \u251c\u2500\u2500 util/          # \u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\n\u2502   \u2502       \u2514\u2500\u2500 config/        # \u8a2d\u5b9a\uff08StageManager, FxmlView\uff09\n\u2502   \u2514\u2500\u2500 out/\n\u2502       \u2514\u2500\u2500 persistence/   # MyBatis Repository\uff08\u65e2\u5b58\uff09\n\u2502\n\u2514\u2500\u2500 resources/\n    \u2514\u2500\u2500 fxml/              # FXML \u30d5\u30a1\u30a4\u30eb\n        \u251c\u2500\u2500 main.fxml\n        \u251c\u2500\u2500 dashboard.fxml\n        \u251c\u2500\u2500 account/       # \u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\n        \u251c\u2500\u2500 journal/       # \u4ed5\u8a33\n        \u251c\u2500\u2500 balance/       # \u6b8b\u9ad8\u7167\u4f1a\n        \u2514\u2500\u2500 report/        # \u5e33\u7968\n</code></pre>"},{"location":"article/study/study3-2/#23javafx","title":"\u7b2c23\u7ae0\uff1aJavaFX \u74b0\u5883\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":""},{"location":"article/study/study3-2/#231-buildgradlekts","title":"23.1 build.gradle.kts \u306e\u8a2d\u5b9a","text":"build.gradle.kts <pre><code>plugins {\n    java\n    id(\"org.springframework.boot\") version \"3.2.0\"\n    id(\"io.spring.dependency-management\") version \"1.1.4\"\n    id(\"org.openjfx.javafxplugin\") version \"0.1.0\"\n}\n\njavafx {\n    version = \"21\"\n    modules = listOf(\"javafx.controls\", \"javafx.fxml\", \"javafx.graphics\")\n}\n\ndependencies {\n    // Spring Boot\n    implementation(\"org.springframework.boot:spring-boot-starter\")\n    implementation(\"org.springframework.boot:spring-boot-starter-validation\")\n\n    // JavaFX \u8ffd\u52a0\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\n    implementation(\"org.controlsfx:controlsfx:11.2.0\")\n\n    // \u30a2\u30a4\u30b3\u30f3\n    implementation(\"org.kordamp.ikonli:ikonli-javafx:12.3.1\")\n    implementation(\"org.kordamp.ikonli:ikonli-fontawesome5-pack:12.3.1\")\n\n    // \u5e33\u7968\n    implementation(\"net.sf.jasperreports:jasperreports:6.20.5\")\n    implementation(\"com.github.librepdf:openpdf:1.3.30\")\n    implementation(\"org.apache.poi:poi-ooxml:5.2.5\")\n\n    // JavaFX \u30c6\u30b9\u30c8\n    testImplementation(\"org.testfx:testfx-core:4.0.18\")\n    testImplementation(\"org.testfx:testfx-junit5:4.0.18\")\n}\n</code></pre> <p>\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u8aac\u660e\uff1a</p> \u30d1\u30c3\u30b1\u30fc\u30b8 \u7528\u9014 javafx.controls \u6a19\u6e96 UI \u30b3\u30f3\u30c8\u30ed\u30fc\u30eb javafx.fxml FXML \u30b5\u30dd\u30fc\u30c8 controlsfx \u62e1\u5f35\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb ikonli-fontawesome5-pack FontAwesome \u30a2\u30a4\u30b3\u30f3 jasperreports PDF \u5e33\u7968\u751f\u6210 poi-ooxml Excel \u5e33\u7968\u751f\u6210 testfx JavaFX \u30c6\u30b9\u30c8"},{"location":"article/study/study3-2/#232-spring-boot-javafx","title":"23.2 Spring Boot + JavaFX \u7d71\u5408","text":"JavaFxApplication.java <pre><code>package com.example.accounting.infrastructure.in.javafx;\n\nimport javafx.application.Application;\nimport javafx.application.Platform;\nimport javafx.stage.Stage;\nimport org.springframework.boot.builder.SpringApplicationBuilder;\nimport org.springframework.context.ApplicationEvent;\nimport org.springframework.context.ConfigurableApplicationContext;\n\n/**\n * JavaFX \u3068 Spring Boot \u3092\u7d71\u5408\u3059\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30af\u30e9\u30b9\n */\npublic class JavaFxApplication extends Application {\n\n    private ConfigurableApplicationContext applicationContext;\n\n    @Override\n    public void init() {\n        applicationContext = new SpringApplicationBuilder(AccountingApplication.class)\n            .run();\n    }\n\n    @Override\n    public void start(Stage stage) {\n        applicationContext.publishEvent(new StageReadyEvent(stage));\n    }\n\n    @Override\n    public void stop() {\n        applicationContext.close();\n        Platform.exit();\n    }\n\n    /**\n     * Stage \u6e96\u5099\u5b8c\u4e86\u30a4\u30d9\u30f3\u30c8\n     */\n    public static class StageReadyEvent extends ApplicationEvent {\n        public StageReadyEvent(Stage stage) {\n            super(stage);\n        }\n\n        public Stage getStage() {\n            return (Stage) getSource();\n        }\n    }\n}\n</code></pre> StageManager.java <pre><code>package com.example.accounting.infrastructure.in.javafx.config;\n\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Parent;\nimport javafx.scene.Scene;\nimport javafx.stage.Stage;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.ApplicationListener;\nimport org.springframework.stereotype.Component;\n\nimport java.io.IOException;\nimport java.util.Objects;\n\n/**\n * Stage \u3068 Scene \u306e\u7ba1\u7406\u3092\u62c5\u5f53\u3059\u308b\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\n */\n@Component\npublic class StageManager implements ApplicationListener&lt;JavaFxApplication.StageReadyEvent&gt; {\n\n    private final ApplicationContext applicationContext;\n    private Stage primaryStage;\n\n    public StageManager(ApplicationContext applicationContext) {\n        this.applicationContext = applicationContext;\n    }\n\n    @Override\n    public void onApplicationEvent(JavaFxApplication.StageReadyEvent event) {\n        this.primaryStage = event.getStage();\n        showMainView();\n    }\n\n    /**\n     * \u30e1\u30a4\u30f3\u753b\u9762\u3092\u8868\u793a\n     */\n    private void showMainView() {\n        switchScene(FxmlView.MAIN);\n        primaryStage.setTitle(\"\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\");\n        primaryStage.setWidth(1280);\n        primaryStage.setHeight(800);\n        primaryStage.show();\n    }\n\n    /**\n     * \u30b7\u30fc\u30f3\u3092\u5207\u308a\u66ff\u3048\n     */\n    public void switchScene(FxmlView view) {\n        Parent root = loadViewNode(view.getFxmlPath());\n        Scene scene = new Scene(root);\n        scene.getStylesheets().add(\n            Objects.requireNonNull(\n                getClass().getResource(\"/fxml/css/application.css\")\n            ).toExternalForm()\n        );\n        primaryStage.setScene(scene);\n    }\n\n    /**\n     * FXML \u3092\u30ed\u30fc\u30c9\n     */\n    public Parent loadViewNode(String fxmlPath) {\n        try {\n            FXMLLoader loader = new FXMLLoader(getClass().getResource(fxmlPath));\n            loader.setControllerFactory(applicationContext::getBean);\n            return loader.load();\n        } catch (IOException e) {\n            throw new RuntimeException(\"FXML\u306e\u30ed\u30fc\u30c9\u306b\u5931\u6557: \" + fxmlPath, e);\n        }\n    }\n\n    public ApplicationContext getApplicationContext() {\n        return applicationContext;\n    }\n\n    public Stage getPrimaryStage() {\n        return primaryStage;\n    }\n}\n</code></pre> FxmlView.java <pre><code>package com.example.accounting.infrastructure.in.javafx.config;\n\n/**\n * FXML \u753b\u9762\u306e\u5b9a\u7fa9\n */\npublic enum FxmlView {\n\n    // \u30e1\u30a4\u30f3\n    MAIN(\"/fxml/main.fxml\", \"\u30e1\u30a4\u30f3\"),\n    DASHBOARD(\"/fxml/dashboard.fxml\", \"\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\"),\n\n    // \u30de\u30b9\u30bf\n    ACCOUNT_LIST(\"/fxml/account/account-list.fxml\", \"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\"),\n    ACCOUNT_EDIT(\"/fxml/account/account-edit.fxml\", \"\u52d8\u5b9a\u79d1\u76ee\u7de8\u96c6\"),\n    ACCOUNT_STRUCTURE(\"/fxml/account/account-structure.fxml\", \"\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\"),\n    TAX_TRANSACTION_LIST(\"/fxml/account/tax-transaction-list.fxml\", \"\u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\"),\n    DEPARTMENT_LIST(\"/fxml/account/department-list.fxml\", \"\u90e8\u9580\u30de\u30b9\u30bf\"),\n\n    // \u4ed5\u8a33\n    JOURNAL_ENTRY(\"/fxml/journal/journal-entry.fxml\", \"\u4ed5\u8a33\u5165\u529b\"),\n    JOURNAL_LIST(\"/fxml/journal/journal-list.fxml\", \"\u4ed5\u8a33\u4e00\u89a7\"),\n    JOURNAL_SEARCH(\"/fxml/journal/journal-search.fxml\", \"\u4ed5\u8a33\u691c\u7d22\"),\n\n    // \u6b8b\u9ad8\u7167\u4f1a\n    DAILY_BALANCE(\"/fxml/balance/daily-balance.fxml\", \"\u65e5\u6b21\u6b8b\u9ad8\u7167\u4f1a\"),\n    MONTHLY_BALANCE(\"/fxml/balance/monthly-balance.fxml\", \"\u6708\u6b21\u6b8b\u9ad8\u7167\u4f1a\"),\n    ACCOUNT_BALANCE(\"/fxml/balance/account-balance.fxml\", \"\u52d8\u5b9a\u79d1\u76ee\u5225\u6b8b\u9ad8\"),\n\n    // \u5e33\u7968\n    DAILY_REPORT(\"/fxml/report/daily-report.fxml\", \"\u65e5\u8a08\u8868\"),\n    TRIAL_BALANCE(\"/fxml/report/trial-balance.fxml\", \"\u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868\"),\n    FINANCIAL_STATEMENTS(\"/fxml/report/financial-statements.fxml\", \"\u8ca1\u52d9\u8af8\u8868\");\n\n    private final String fxmlPath;\n    private final String title;\n\n    FxmlView(String fxmlPath, String title) {\n        this.fxmlPath = fxmlPath;\n        this.title = title;\n    }\n\n    public String getFxmlPath() {\n        return fxmlPath;\n    }\n\n    public String getTitle() {\n        return title;\n    }\n}\n</code></pre>"},{"location":"article/study/study3-2/#24","title":"\u7b2c24\u7ae0\uff1a\u30e1\u30a4\u30f3\u753b\u9762\u3068\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306e\u5b9f\u88c5","text":""},{"location":"article/study/study3-2/#241-fxml","title":"24.1 \u30e1\u30a4\u30f3\u753b\u9762 FXML","text":"main.fxml <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;?import javafx.geometry.*?&gt;\n&lt;?import javafx.scene.control.*?&gt;\n&lt;?import javafx.scene.layout.*?&gt;\n&lt;?import org.kordamp.ikonli.javafx.FontIcon?&gt;\n\n&lt;BorderPane xmlns=\"http://javafx.com/javafx/21\"\n            xmlns:fx=\"http://javafx.com/fxml/1\"\n            fx:controller=\"com.example.accounting.infrastructure.in.javafx.controller.MainController\"\n            styleClass=\"main-container\"&gt;\n\n    &lt;!-- \u30e1\u30cb\u30e5\u30fc\u30d0\u30fc --&gt;\n    &lt;top&gt;\n        &lt;VBox&gt;\n            &lt;MenuBar&gt;\n                &lt;!-- \u30d5\u30a1\u30a4\u30eb\u30e1\u30cb\u30e5\u30fc --&gt;\n                &lt;Menu text=\"\u30d5\u30a1\u30a4\u30eb(_F)\"&gt;\n                    &lt;MenuItem text=\"\u7d42\u4e86(_X)\" onAction=\"#onExit\" accelerator=\"Alt+F4\"&gt;\n                        &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-sign-out-alt\"/&gt;&lt;/graphic&gt;\n                    &lt;/MenuItem&gt;\n                &lt;/Menu&gt;\n\n                &lt;!-- \u30de\u30b9\u30bf\u30e1\u30cb\u30e5\u30fc --&gt;\n                &lt;Menu text=\"\u30de\u30b9\u30bf(_M)\"&gt;\n                    &lt;MenuItem text=\"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf(_A)\" onAction=\"#onAccountMaster\"&gt;\n                        &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-book\"/&gt;&lt;/graphic&gt;\n                    &lt;/MenuItem&gt;\n                    &lt;MenuItem text=\"\u52d8\u5b9a\u79d1\u76ee\u69cb\u6210(_S)\" onAction=\"#onAccountStructure\"&gt;\n                        &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-sitemap\"/&gt;&lt;/graphic&gt;\n                    &lt;/MenuItem&gt;\n                    &lt;MenuItem text=\"\u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf(_T)\" onAction=\"#onTaxTransactionMaster\"&gt;\n                        &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-percent\"/&gt;&lt;/graphic&gt;\n                    &lt;/MenuItem&gt;\n                    &lt;SeparatorMenuItem/&gt;\n                    &lt;MenuItem text=\"\u90e8\u9580\u30de\u30b9\u30bf(_D)\" onAction=\"#onDepartmentMaster\"&gt;\n                        &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-building\"/&gt;&lt;/graphic&gt;\n                    &lt;/MenuItem&gt;\n                &lt;/Menu&gt;\n\n                &lt;!-- \u4ed5\u8a33\u30e1\u30cb\u30e5\u30fc --&gt;\n                &lt;Menu text=\"\u4ed5\u8a33(_J)\"&gt;\n                    &lt;MenuItem text=\"\u4ed5\u8a33\u5165\u529b(_E)\" onAction=\"#onJournalEntry\"&gt;\n                        &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-edit\"/&gt;&lt;/graphic&gt;\n                    &lt;/MenuItem&gt;\n                    &lt;MenuItem text=\"\u4ed5\u8a33\u4e00\u89a7(_L)\" onAction=\"#onJournalList\"&gt;\n                        &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-list\"/&gt;&lt;/graphic&gt;\n                    &lt;/MenuItem&gt;\n                    &lt;MenuItem text=\"\u4ed5\u8a33\u691c\u7d22(_S)\" onAction=\"#onJournalSearch\"&gt;\n                        &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-search\"/&gt;&lt;/graphic&gt;\n                    &lt;/MenuItem&gt;\n                &lt;/Menu&gt;\n\n                &lt;!-- \u6b8b\u9ad8\u7167\u4f1a\u30e1\u30cb\u30e5\u30fc --&gt;\n                &lt;Menu text=\"\u6b8b\u9ad8\u7167\u4f1a(_B)\"&gt;\n                    &lt;MenuItem text=\"\u65e5\u6b21\u6b8b\u9ad8\u7167\u4f1a(_D)\" onAction=\"#onDailyBalance\"&gt;\n                        &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-calendar-day\"/&gt;&lt;/graphic&gt;\n                    &lt;/MenuItem&gt;\n                    &lt;MenuItem text=\"\u6708\u6b21\u6b8b\u9ad8\u7167\u4f1a(_M)\" onAction=\"#onMonthlyBalance\"&gt;\n                        &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-calendar-alt\"/&gt;&lt;/graphic&gt;\n                    &lt;/MenuItem&gt;\n                    &lt;MenuItem text=\"\u52d8\u5b9a\u79d1\u76ee\u5225\u6b8b\u9ad8(_A)\" onAction=\"#onAccountBalance\"&gt;\n                        &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-chart-line\"/&gt;&lt;/graphic&gt;\n                    &lt;/MenuItem&gt;\n                &lt;/Menu&gt;\n\n                &lt;!-- \u5e33\u7968\u30e1\u30cb\u30e5\u30fc --&gt;\n                &lt;Menu text=\"\u5e33\u7968(_R)\"&gt;\n                    &lt;MenuItem text=\"\u65e5\u8a08\u8868(_D)\" onAction=\"#onDailyReport\"&gt;\n                        &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-file-invoice\"/&gt;&lt;/graphic&gt;\n                    &lt;/MenuItem&gt;\n                    &lt;MenuItem text=\"\u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868(_T)\" onAction=\"#onTrialBalance\"&gt;\n                        &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-file-alt\"/&gt;&lt;/graphic&gt;\n                    &lt;/MenuItem&gt;\n                    &lt;MenuItem text=\"\u8ca1\u52d9\u8af8\u8868(_F)\" onAction=\"#onFinancialStatements\"&gt;\n                        &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-file-invoice-dollar\"/&gt;&lt;/graphic&gt;\n                    &lt;/MenuItem&gt;\n                &lt;/Menu&gt;\n\n                &lt;!-- \u30d8\u30eb\u30d7\u30e1\u30cb\u30e5\u30fc --&gt;\n                &lt;Menu text=\"\u30d8\u30eb\u30d7(_H)\"&gt;\n                    &lt;MenuItem text=\"\u30d0\u30fc\u30b8\u30e7\u30f3\u60c5\u5831(_A)\" onAction=\"#onAbout\"&gt;\n                        &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-info-circle\"/&gt;&lt;/graphic&gt;\n                    &lt;/MenuItem&gt;\n                &lt;/Menu&gt;\n            &lt;/MenuBar&gt;\n\n            &lt;!-- \u30c4\u30fc\u30eb\u30d0\u30fc --&gt;\n            &lt;ToolBar styleClass=\"tool-bar\"&gt;\n                &lt;Button onAction=\"#onDashboard\" tooltip=\"\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\"&gt;\n                    &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-home\" iconSize=\"18\"/&gt;&lt;/graphic&gt;\n                &lt;/Button&gt;\n                &lt;Separator orientation=\"VERTICAL\"/&gt;\n                &lt;Button onAction=\"#onAccountMaster\" tooltip=\"\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\"&gt;\n                    &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-book\" iconSize=\"18\"/&gt;&lt;/graphic&gt;\n                &lt;/Button&gt;\n                &lt;Button onAction=\"#onJournalEntry\" tooltip=\"\u4ed5\u8a33\u5165\u529b\"&gt;\n                    &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-edit\" iconSize=\"18\"/&gt;&lt;/graphic&gt;\n                &lt;/Button&gt;\n                &lt;Button onAction=\"#onJournalList\" tooltip=\"\u4ed5\u8a33\u4e00\u89a7\"&gt;\n                    &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-list\" iconSize=\"18\"/&gt;&lt;/graphic&gt;\n                &lt;/Button&gt;\n                &lt;Separator orientation=\"VERTICAL\"/&gt;\n                &lt;Button onAction=\"#onDailyBalance\" tooltip=\"\u65e5\u6b21\u6b8b\u9ad8\u7167\u4f1a\"&gt;\n                    &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-calendar-day\" iconSize=\"18\"/&gt;&lt;/graphic&gt;\n                &lt;/Button&gt;\n                &lt;Button onAction=\"#onMonthlyBalance\" tooltip=\"\u6708\u6b21\u6b8b\u9ad8\u7167\u4f1a\"&gt;\n                    &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-calendar-alt\" iconSize=\"18\"/&gt;&lt;/graphic&gt;\n                &lt;/Button&gt;\n                &lt;Separator orientation=\"VERTICAL\"/&gt;\n                &lt;Button onAction=\"#onDailyReport\" tooltip=\"\u65e5\u8a08\u8868\"&gt;\n                    &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-file-invoice\" iconSize=\"18\"/&gt;&lt;/graphic&gt;\n                &lt;/Button&gt;\n                &lt;Button onAction=\"#onTrialBalance\" tooltip=\"\u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868\"&gt;\n                    &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-file-alt\" iconSize=\"18\"/&gt;&lt;/graphic&gt;\n                &lt;/Button&gt;\n            &lt;/ToolBar&gt;\n        &lt;/VBox&gt;\n    &lt;/top&gt;\n\n    &lt;!-- \u30e1\u30a4\u30f3\u30b3\u30f3\u30c6\u30f3\u30c4\uff08\u30bf\u30d6\u30d1\u30cd\u30eb\uff09 --&gt;\n    &lt;center&gt;\n        &lt;TabPane fx:id=\"mainTabPane\" tabClosingPolicy=\"ALL_TABS\"&gt;\n            &lt;!-- \u521d\u671f\u8868\u793a\u306f\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9 --&gt;\n        &lt;/TabPane&gt;\n    &lt;/center&gt;\n\n    &lt;!-- \u30b9\u30c6\u30fc\u30bf\u30b9\u30d0\u30fc --&gt;\n    &lt;bottom&gt;\n        &lt;HBox styleClass=\"status-bar\" spacing=\"10\"&gt;\n            &lt;Label fx:id=\"statusMessage\" text=\"\u6e96\u5099\u5b8c\u4e86\"/&gt;\n            &lt;Pane HBox.hgrow=\"ALWAYS\"/&gt;\n            &lt;Label fx:id=\"fiscalPeriod\" text=\"2025\u5e74\u5ea6\"/&gt;\n            &lt;Separator orientation=\"VERTICAL\"/&gt;\n            &lt;Label fx:id=\"currentDateTime\"/&gt;\n        &lt;/HBox&gt;\n    &lt;/bottom&gt;\n&lt;/BorderPane&gt;\n</code></pre>"},{"location":"article/study/study3-2/#242-maincontrollerjava","title":"24.2 MainController.java","text":"MainController.java <pre><code>package com.example.accounting.infrastructure.in.javafx.controller;\n\nimport com.example.accounting.infrastructure.in.javafx.config.FxmlView;\nimport com.example.accounting.infrastructure.in.javafx.config.StageManager;\nimport javafx.animation.Animation;\nimport javafx.animation.KeyFrame;\nimport javafx.animation.Timeline;\nimport javafx.fxml.FXML;\nimport javafx.fxml.Initializable;\nimport javafx.scene.control.*;\nimport javafx.util.Duration;\nimport org.springframework.stereotype.Component;\n\nimport java.net.URL;\nimport java.time.LocalDateTime;\nimport java.time.format.DateTimeFormatter;\nimport java.util.Optional;\nimport java.util.ResourceBundle;\n\n/**\n * \u30e1\u30a4\u30f3\u753b\u9762 Controller\n */\n@Component\npublic class MainController implements Initializable {\n\n    private final StageManager stageManager;\n\n    @FXML private TabPane mainTabPane;\n    @FXML private Label statusMessage;\n    @FXML private Label fiscalPeriod;\n    @FXML private Label currentDateTime;\n\n    private static final DateTimeFormatter DATE_TIME_FORMATTER =\n        DateTimeFormatter.ofPattern(\"yyyy/MM/dd HH:mm:ss\");\n\n    public MainController(StageManager stageManager) {\n        this.stageManager = stageManager;\n    }\n\n    @Override\n    public void initialize(URL location, ResourceBundle resources) {\n        startClock();\n        openInTab(FxmlView.DASHBOARD);\n    }\n\n    private void startClock() {\n        Timeline clock = new Timeline(\n            new KeyFrame(Duration.seconds(1), e -&gt; {\n                currentDateTime.setText(\n                    LocalDateTime.now().format(DATE_TIME_FORMATTER)\n                );\n            })\n        );\n        clock.setCycleCount(Animation.INDEFINITE);\n        clock.play();\n    }\n\n    // ========== \u30e1\u30cb\u30e5\u30fc\u30a2\u30af\u30b7\u30e7\u30f3 ==========\n\n    @FXML\n    private void onExit() {\n        Alert alert = new Alert(Alert.AlertType.CONFIRMATION);\n        alert.setTitle(\"\u7d42\u4e86\u78ba\u8a8d\");\n        alert.setHeaderText(\"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u7d42\u4e86\u3057\u307e\u3059\u304b\uff1f\");\n\n        Optional&lt;ButtonType&gt; result = alert.showAndWait();\n        if (result.isPresent() &amp;&amp; result.get() == ButtonType.OK) {\n            System.exit(0);\n        }\n    }\n\n    @FXML\n    private void onDashboard() {\n        openInTab(FxmlView.DASHBOARD);\n    }\n\n    // ----- \u30de\u30b9\u30bf -----\n\n    @FXML\n    private void onAccountMaster() {\n        openInTab(FxmlView.ACCOUNT_LIST);\n    }\n\n    @FXML\n    private void onAccountStructure() {\n        openInTab(FxmlView.ACCOUNT_STRUCTURE);\n    }\n\n    @FXML\n    private void onTaxTransactionMaster() {\n        openInTab(FxmlView.TAX_TRANSACTION_LIST);\n    }\n\n    @FXML\n    private void onDepartmentMaster() {\n        openInTab(FxmlView.DEPARTMENT_LIST);\n    }\n\n    // ----- \u4ed5\u8a33 -----\n\n    @FXML\n    private void onJournalEntry() {\n        openInTab(FxmlView.JOURNAL_ENTRY);\n    }\n\n    @FXML\n    private void onJournalList() {\n        openInTab(FxmlView.JOURNAL_LIST);\n    }\n\n    @FXML\n    private void onJournalSearch() {\n        openInTab(FxmlView.JOURNAL_SEARCH);\n    }\n\n    // ----- \u6b8b\u9ad8\u7167\u4f1a -----\n\n    @FXML\n    private void onDailyBalance() {\n        openInTab(FxmlView.DAILY_BALANCE);\n    }\n\n    @FXML\n    private void onMonthlyBalance() {\n        openInTab(FxmlView.MONTHLY_BALANCE);\n    }\n\n    @FXML\n    private void onAccountBalance() {\n        openInTab(FxmlView.ACCOUNT_BALANCE);\n    }\n\n    // ----- \u5e33\u7968 -----\n\n    @FXML\n    private void onDailyReport() {\n        openInTab(FxmlView.DAILY_REPORT);\n    }\n\n    @FXML\n    private void onTrialBalance() {\n        openInTab(FxmlView.TRIAL_BALANCE);\n    }\n\n    @FXML\n    private void onFinancialStatements() {\n        openInTab(FxmlView.FINANCIAL_STATEMENTS);\n    }\n\n    // ----- \u30d8\u30eb\u30d7 -----\n\n    @FXML\n    private void onAbout() {\n        Alert alert = new Alert(Alert.AlertType.INFORMATION);\n        alert.setTitle(\"\u30d0\u30fc\u30b8\u30e7\u30f3\u60c5\u5831\");\n        alert.setHeaderText(\"\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\");\n        alert.setContentText(\"\"\"\n            \u30d0\u30fc\u30b8\u30e7\u30f3: 1.0.0\n\n            D\u793e \u88fd\u9020\u696d\u5411\u3051\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\n\n            Copyright (c) 2025\n            \"\"\");\n        alert.showAndWait();\n    }\n\n    // ========== \u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3 ==========\n\n    /**\n     * TabPane \u5185\u306b\u753b\u9762\u3092\u958b\u304f\n     */\n    private void openInTab(FxmlView view) {\n        // \u65e2\u5b58\u30bf\u30d6\u3092\u30c1\u30a7\u30c3\u30af\n        for (Tab tab : mainTabPane.getTabs()) {\n            if (tab.getText().equals(view.getTitle())) {\n                mainTabPane.getSelectionModel().select(tab);\n                return;\n            }\n        }\n\n        // \u65b0\u3057\u3044\u30bf\u30d6\u3092\u4f5c\u6210\n        try {\n            var loader = new javafx.fxml.FXMLLoader(\n                getClass().getResource(view.getFxmlPath())\n            );\n            loader.setControllerFactory(\n                stageManager.getApplicationContext()::getBean\n            );\n\n            Tab tab = new Tab(view.getTitle());\n            tab.setContent(loader.load());\n            mainTabPane.getTabs().add(tab);\n            mainTabPane.getSelectionModel().select(tab);\n\n            setStatus(view.getTitle() + \" \u3092\u958b\u304d\u307e\u3057\u305f\");\n        } catch (Exception e) {\n            showError(\"\u753b\u9762\u3092\u958b\u3051\u307e\u305b\u3093\u3067\u3057\u305f: \" + e.getMessage());\n        }\n    }\n\n    private void setStatus(String message) {\n        statusMessage.setText(message);\n    }\n\n    private void showError(String message) {\n        Alert alert = new Alert(Alert.AlertType.ERROR);\n        alert.setTitle(\"\u30a8\u30e9\u30fc\");\n        alert.setHeaderText(null);\n        alert.setContentText(message);\n        alert.showAndWait();\n    }\n}\n</code></pre>"},{"location":"article/study/study3-2/#243-fxml","title":"24.3 \u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9 FXML","text":"dashboard.fxml <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;?import javafx.geometry.*?&gt;\n&lt;?import javafx.scene.chart.*?&gt;\n&lt;?import javafx.scene.control.*?&gt;\n&lt;?import javafx.scene.layout.*?&gt;\n&lt;?import org.kordamp.ikonli.javafx.FontIcon?&gt;\n\n&lt;ScrollPane xmlns=\"http://javafx.com/javafx/21\"\n            xmlns:fx=\"http://javafx.com/fxml/1\"\n            fx:controller=\"com.example.accounting.infrastructure.in.javafx.controller.DashboardController\"\n            fitToWidth=\"true\" fitToHeight=\"true\"&gt;\n\n    &lt;VBox spacing=\"20\" styleClass=\"dashboard\"&gt;\n        &lt;padding&gt;&lt;Insets top=\"20\" right=\"20\" bottom=\"20\" left=\"20\"/&gt;&lt;/padding&gt;\n\n        &lt;!-- \u30bf\u30a4\u30c8\u30eb --&gt;\n        &lt;Label text=\"\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\" styleClass=\"title\"/&gt;\n\n        &lt;!-- \u30b5\u30de\u30ea\u30fc\u30ab\u30fc\u30c9 --&gt;\n        &lt;HBox spacing=\"20\"&gt;\n            &lt;!-- \u5f53\u6708\u4ed5\u8a33\u4ef6\u6570 --&gt;\n            &lt;VBox styleClass=\"dashboard-card\" alignment=\"CENTER\" HBox.hgrow=\"ALWAYS\"&gt;\n                &lt;Label text=\"\u5f53\u6708\u4ed5\u8a33\u4ef6\u6570\" styleClass=\"card-title\"/&gt;\n                &lt;Label fx:id=\"monthlyJournalCount\" text=\"0\" styleClass=\"card-value\"/&gt;\n                &lt;Label text=\"\u4ef6\"/&gt;\n            &lt;/VBox&gt;\n\n            &lt;!-- \u5f53\u6708\u4ed5\u8a33\u91d1\u984d --&gt;\n            &lt;VBox styleClass=\"dashboard-card\" alignment=\"CENTER\" HBox.hgrow=\"ALWAYS\"&gt;\n                &lt;Label text=\"\u5f53\u6708\u4ed5\u8a33\u91d1\u984d\uff08\u501f\u65b9\uff09\" styleClass=\"card-title\"/&gt;\n                &lt;Label fx:id=\"monthlyDebitAmount\" text=\"\u00a50\" styleClass=\"card-value\"/&gt;\n            &lt;/VBox&gt;\n\n            &lt;!-- \u5f53\u6708\u4ed5\u8a33\u91d1\u984d --&gt;\n            &lt;VBox styleClass=\"dashboard-card\" alignment=\"CENTER\" HBox.hgrow=\"ALWAYS\"&gt;\n                &lt;Label text=\"\u5f53\u6708\u4ed5\u8a33\u91d1\u984d\uff08\u8cb8\u65b9\uff09\" styleClass=\"card-title\"/&gt;\n                &lt;Label fx:id=\"monthlyCreditAmount\" text=\"\u00a50\" styleClass=\"card-value\"/&gt;\n            &lt;/VBox&gt;\n\n            &lt;!-- \u73fe\u91d1\u9810\u91d1\u6b8b\u9ad8 --&gt;\n            &lt;VBox styleClass=\"dashboard-card\" alignment=\"CENTER\" HBox.hgrow=\"ALWAYS\"&gt;\n                &lt;Label text=\"\u73fe\u91d1\u9810\u91d1\u6b8b\u9ad8\" styleClass=\"card-title\"/&gt;\n                &lt;Label fx:id=\"cashBalance\" text=\"\u00a50\" styleClass=\"card-value\"/&gt;\n            &lt;/VBox&gt;\n        &lt;/HBox&gt;\n\n        &lt;!-- \u30c1\u30e3\u30fc\u30c8\u30a8\u30ea\u30a2 --&gt;\n        &lt;HBox spacing=\"20\" VBox.vgrow=\"ALWAYS\"&gt;\n            &lt;!-- \u52d8\u5b9a\u79d1\u76ee\u5225\u6b8b\u9ad8\u30b0\u30e9\u30d5 --&gt;\n            &lt;VBox styleClass=\"chart-container\" HBox.hgrow=\"ALWAYS\"&gt;\n                &lt;Label text=\"\u52d8\u5b9a\u79d1\u76ee\u5225\u6b8b\u9ad8\uff08\u8cc7\u7523\uff09\" styleClass=\"chart-title\"/&gt;\n                &lt;PieChart fx:id=\"assetChart\" legendSide=\"BOTTOM\"/&gt;\n            &lt;/VBox&gt;\n\n            &lt;!-- \u6708\u5225\u4ed5\u8a33\u4ef6\u6570\u63a8\u79fb --&gt;\n            &lt;VBox styleClass=\"chart-container\" HBox.hgrow=\"ALWAYS\"&gt;\n                &lt;Label text=\"\u6708\u5225\u4ed5\u8a33\u4ef6\u6570\u63a8\u79fb\" styleClass=\"chart-title\"/&gt;\n                &lt;BarChart fx:id=\"journalTrendChart\"&gt;\n                    &lt;xAxis&gt;&lt;CategoryAxis label=\"\u6708\"/&gt;&lt;/xAxis&gt;\n                    &lt;yAxis&gt;&lt;NumberAxis label=\"\u4ef6\u6570\"/&gt;&lt;/yAxis&gt;\n                &lt;/BarChart&gt;\n            &lt;/VBox&gt;\n        &lt;/HBox&gt;\n\n        &lt;!-- \u6700\u8fd1\u306e\u4ed5\u8a33 --&gt;\n        &lt;VBox spacing=\"10\"&gt;\n            &lt;Label text=\"\u6700\u8fd1\u306e\u4ed5\u8a33\" styleClass=\"section-title\"/&gt;\n            &lt;TableView fx:id=\"recentJournalsTable\" prefHeight=\"200\"&gt;\n                &lt;columns&gt;\n                    &lt;TableColumn text=\"\u8d77\u7968\u65e5\" prefWidth=\"100\" fx:id=\"dateColumn\"/&gt;\n                    &lt;TableColumn text=\"\u4f1d\u7968\u756a\u53f7\" prefWidth=\"120\" fx:id=\"slipNoColumn\"/&gt;\n                    &lt;TableColumn text=\"\u6458\u8981\" prefWidth=\"300\" fx:id=\"summaryColumn\"/&gt;\n                    &lt;TableColumn text=\"\u501f\u65b9\u91d1\u984d\" prefWidth=\"120\" styleClass=\"amount-column\" fx:id=\"debitColumn\"/&gt;\n                    &lt;TableColumn text=\"\u8cb8\u65b9\u91d1\u984d\" prefWidth=\"120\" styleClass=\"amount-column\" fx:id=\"creditColumn\"/&gt;\n                &lt;/columns&gt;\n                &lt;placeholder&gt;\n                    &lt;Label text=\"\u4ed5\u8a33\u30c7\u30fc\u30bf\u304c\u3042\u308a\u307e\u305b\u3093\"/&gt;\n                &lt;/placeholder&gt;\n            &lt;/TableView&gt;\n        &lt;/VBox&gt;\n\n        &lt;!-- \u30af\u30a4\u30c3\u30af\u30a2\u30af\u30bb\u30b9 --&gt;\n        &lt;HBox spacing=\"10\"&gt;\n            &lt;Button text=\"\u4ed5\u8a33\u5165\u529b\" styleClass=\"primary\" onAction=\"#onQuickJournalEntry\"&gt;\n                &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-edit\"/&gt;&lt;/graphic&gt;\n            &lt;/Button&gt;\n            &lt;Button text=\"\u65e5\u8a08\u8868\u51fa\u529b\" onAction=\"#onQuickDailyReport\"&gt;\n                &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-file-invoice\"/&gt;&lt;/graphic&gt;\n            &lt;/Button&gt;\n            &lt;Button text=\"\u8a66\u7b97\u8868\u51fa\u529b\" onAction=\"#onQuickTrialBalance\"&gt;\n                &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-file-alt\"/&gt;&lt;/graphic&gt;\n            &lt;/Button&gt;\n            &lt;Button text=\"\u30c7\u30fc\u30bf\u66f4\u65b0\" onAction=\"#onRefresh\"&gt;\n                &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-sync-alt\"/&gt;&lt;/graphic&gt;\n            &lt;/Button&gt;\n        &lt;/HBox&gt;\n    &lt;/VBox&gt;\n&lt;/ScrollPane&gt;\n</code></pre>"},{"location":"article/study/study3-2/#25","title":"\u7b2c25\u7ae0\uff1a\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u753b\u9762\u306e\u5b9f\u88c5","text":""},{"location":"article/study/study3-2/#251","title":"25.1 \u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u753b\u9762\u306e\u8a2d\u8a08","text":"<p>\u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u753b\u9762\u306f\u3001\u4e00\u89a7\u8868\u793a\u30fb\u691c\u7d22\u30fb\u767b\u9332\u30fb\u7de8\u96c6\u30fb\u524a\u9664\u306e\u6a5f\u80fd\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/study/study3-2/#252-accountrowjavaview","title":"25.2 AccountRow.java\uff08View \u7528\u30c7\u30fc\u30bf\u30af\u30e9\u30b9\uff09","text":"AccountRow.java <pre><code>package com.example.accounting.infrastructure.in.javafx.view;\n\nimport javafx.beans.property.*;\n\n/**\n * \u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u753b\u9762\u7528\u306e\u884c\u30e2\u30c7\u30eb\n * JavaFX Property \u306b\u3088\u308b\u53cc\u65b9\u5411\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u5bfe\u5fdc\n */\npublic class AccountRow {\n\n    private final StringProperty accountCode = new SimpleStringProperty();\n    private final StringProperty accountName = new SimpleStringProperty();\n    private final StringProperty bsplTypeName = new SimpleStringProperty();\n    private final StringProperty debitCreditTypeName = new SimpleStringProperty();\n    private final StringProperty elementTypeName = new SimpleStringProperty();\n    private final StringProperty aggregationTypeName = new SimpleStringProperty();\n    private final BooleanProperty active = new SimpleBooleanProperty();\n\n    // ========== \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf ==========\n\n    public AccountRow() {\n    }\n\n    public AccountRow(String accountCode, String accountName,\n                      String bsplTypeName, String debitCreditTypeName,\n                      String elementTypeName, String aggregationTypeName,\n                      boolean active) {\n        setAccountCode(accountCode);\n        setAccountName(accountName);\n        setBsplTypeName(bsplTypeName);\n        setDebitCreditTypeName(debitCreditTypeName);\n        setElementTypeName(elementTypeName);\n        setAggregationTypeName(aggregationTypeName);\n        setActive(active);\n    }\n\n    // ========== Property \u30a2\u30af\u30bb\u30b5 ==========\n\n    public StringProperty accountCodeProperty() { return accountCode; }\n    public StringProperty accountNameProperty() { return accountName; }\n    public StringProperty bsplTypeNameProperty() { return bsplTypeName; }\n    public StringProperty debitCreditTypeNameProperty() { return debitCreditTypeName; }\n    public StringProperty elementTypeNameProperty() { return elementTypeName; }\n    public StringProperty aggregationTypeNameProperty() { return aggregationTypeName; }\n    public BooleanProperty activeProperty() { return active; }\n\n    // ========== Getter/Setter ==========\n\n    public String getAccountCode() { return accountCode.get(); }\n    public void setAccountCode(String value) { accountCode.set(value); }\n\n    public String getAccountName() { return accountName.get(); }\n    public void setAccountName(String value) { accountName.set(value); }\n\n    public String getBsplTypeName() { return bsplTypeName.get(); }\n    public void setBsplTypeName(String value) { bsplTypeName.set(value); }\n\n    public String getDebitCreditTypeName() { return debitCreditTypeName.get(); }\n    public void setDebitCreditTypeName(String value) { debitCreditTypeName.set(value); }\n\n    public String getElementTypeName() { return elementTypeName.get(); }\n    public void setElementTypeName(String value) { elementTypeName.set(value); }\n\n    public String getAggregationTypeName() { return aggregationTypeName.get(); }\n    public void setAggregationTypeName(String value) { aggregationTypeName.set(value); }\n\n    public boolean isActive() { return active.get(); }\n    public void setActive(boolean value) { active.set(value); }\n}\n</code></pre>"},{"location":"article/study/study3-2/#253-accountviewmodeljava","title":"25.3 AccountViewModel.java","text":"AccountViewModel.java <pre><code>package com.example.accounting.infrastructure.in.javafx.viewmodel;\n\nimport com.example.accounting.application.port.in.AccountUseCase;\nimport com.example.accounting.application.port.in.command.CreateAccountCommand;\nimport com.example.accounting.application.port.in.command.UpdateAccountCommand;\nimport com.example.accounting.domain.model.account.Account;\nimport com.example.accounting.infrastructure.in.javafx.view.AccountRow;\nimport javafx.beans.property.*;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport org.springframework.stereotype.Component;\n\nimport java.util.List;\n\n/**\n * \u52d8\u5b9a\u79d1\u76ee\u30de\u30b9\u30bf\u753b\u9762\u306e ViewModel\n * UI \u72b6\u614b\u3068\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u306e\u6a4b\u6e21\u3057\n */\n@Component\npublic class AccountViewModel {\n\n    private final AccountUseCase accountUseCase;\n\n    // \u753b\u9762\u72b6\u614b\n    private final ObservableList&lt;AccountRow&gt; accounts = FXCollections.observableArrayList();\n    private final ObjectProperty&lt;AccountRow&gt; selectedAccount = new SimpleObjectProperty&lt;&gt;();\n    private final StringProperty searchKeyword = new SimpleStringProperty(\"\");\n    private final BooleanProperty loading = new SimpleBooleanProperty(false);\n    private final StringProperty errorMessage = new SimpleStringProperty();\n\n    // \u7de8\u96c6\u7528\u30d5\u30a3\u30fc\u30eb\u30c9\n    private final StringProperty editAccountCode = new SimpleStringProperty();\n    private final StringProperty editAccountName = new SimpleStringProperty();\n    private final ObjectProperty&lt;String&gt; editBsplType = new SimpleObjectProperty&lt;&gt;();\n    private final ObjectProperty&lt;String&gt; editDebitCreditType = new SimpleObjectProperty&lt;&gt;();\n    private final ObjectProperty&lt;String&gt; editElementType = new SimpleObjectProperty&lt;&gt;();\n    private final ObjectProperty&lt;String&gt; editAggregationType = new SimpleObjectProperty&lt;&gt;();\n\n    public AccountViewModel(AccountUseCase accountUseCase) {\n        this.accountUseCase = accountUseCase;\n    }\n\n    // ========== \u30c7\u30fc\u30bf\u64cd\u4f5c ==========\n\n    /**\n     * \u52d8\u5b9a\u79d1\u76ee\u4e00\u89a7\u3092\u691c\u7d22\n     */\n    public void search() {\n        loading.set(true);\n        errorMessage.set(null);\n\n        try {\n            List&lt;Account&gt; result;\n            String keyword = searchKeyword.get();\n\n            if (keyword == null || keyword.isBlank()) {\n                result = accountUseCase.findAll();\n            } else {\n                result = accountUseCase.searchByKeyword(keyword);\n            }\n\n            accounts.clear();\n            result.forEach(a -&gt; accounts.add(toRow(a)));\n        } catch (Exception e) {\n            errorMessage.set(\"\u691c\u7d22\u30a8\u30e9\u30fc: \" + e.getMessage());\n        } finally {\n            loading.set(false);\n        }\n    }\n\n    /**\n     * \u52d8\u5b9a\u79d1\u76ee\u3092\u65b0\u898f\u767b\u9332\n     */\n    public void create() {\n        loading.set(true);\n        errorMessage.set(null);\n\n        try {\n            var command = CreateAccountCommand.builder()\n                .accountCode(editAccountCode.get())\n                .accountName(editAccountName.get())\n                .bsplType(editBsplType.get())\n                .debitCreditType(editDebitCreditType.get())\n                .elementType(editElementType.get())\n                .aggregationType(editAggregationType.get())\n                .build();\n\n            Account created = accountUseCase.create(command);\n            accounts.add(toRow(created));\n            clearEditFields();\n        } catch (Exception e) {\n            errorMessage.set(\"\u767b\u9332\u30a8\u30e9\u30fc: \" + e.getMessage());\n            throw e;\n        } finally {\n            loading.set(false);\n        }\n    }\n\n    /**\n     * \u52d8\u5b9a\u79d1\u76ee\u3092\u66f4\u65b0\n     */\n    public void update() {\n        loading.set(true);\n        errorMessage.set(null);\n\n        try {\n            var command = UpdateAccountCommand.builder()\n                .accountCode(editAccountCode.get())\n                .accountName(editAccountName.get())\n                .bsplType(editBsplType.get())\n                .debitCreditType(editDebitCreditType.get())\n                .elementType(editElementType.get())\n                .aggregationType(editAggregationType.get())\n                .build();\n\n            Account updated = accountUseCase.update(command);\n\n            // \u4e00\u89a7\u3092\u66f4\u65b0\n            int index = findRowIndex(updated.getAccountCode());\n            if (index &gt;= 0) {\n                accounts.set(index, toRow(updated));\n            }\n        } catch (Exception e) {\n            errorMessage.set(\"\u66f4\u65b0\u30a8\u30e9\u30fc: \" + e.getMessage());\n            throw e;\n        } finally {\n            loading.set(false);\n        }\n    }\n\n    /**\n     * \u52d8\u5b9a\u79d1\u76ee\u3092\u524a\u9664\n     */\n    public void delete(String accountCode) {\n        loading.set(true);\n        errorMessage.set(null);\n\n        try {\n            accountUseCase.delete(accountCode);\n\n            // \u4e00\u89a7\u304b\u3089\u524a\u9664\n            accounts.removeIf(row -&gt; row.getAccountCode().equals(accountCode));\n        } catch (Exception e) {\n            errorMessage.set(\"\u524a\u9664\u30a8\u30e9\u30fc: \" + e.getMessage());\n            throw e;\n        } finally {\n            loading.set(false);\n        }\n    }\n\n    /**\n     * \u9078\u629e\u3055\u308c\u305f\u52d8\u5b9a\u79d1\u76ee\u3092\u7de8\u96c6\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u30ed\u30fc\u30c9\n     */\n    public void loadForEdit(AccountRow row) {\n        if (row == null) {\n            clearEditFields();\n            return;\n        }\n\n        editAccountCode.set(row.getAccountCode());\n        editAccountName.set(row.getAccountName());\n    }\n\n    /**\n     * \u7de8\u96c6\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u30af\u30ea\u30a2\n     */\n    public void clearEditFields() {\n        editAccountCode.set(\"\");\n        editAccountName.set(\"\");\n        editBsplType.set(null);\n        editDebitCreditType.set(null);\n        editElementType.set(null);\n        editAggregationType.set(null);\n    }\n\n    // ========== Property \u30a2\u30af\u30bb\u30b5 ==========\n\n    public ObservableList&lt;AccountRow&gt; getAccounts() { return accounts; }\n    public ObjectProperty&lt;AccountRow&gt; selectedAccountProperty() { return selectedAccount; }\n    public StringProperty searchKeywordProperty() { return searchKeyword; }\n    public BooleanProperty loadingProperty() { return loading; }\n    public StringProperty errorMessageProperty() { return errorMessage; }\n\n    public StringProperty editAccountCodeProperty() { return editAccountCode; }\n    public StringProperty editAccountNameProperty() { return editAccountName; }\n    public ObjectProperty&lt;String&gt; editBsplTypeProperty() { return editBsplType; }\n    public ObjectProperty&lt;String&gt; editDebitCreditTypeProperty() { return editDebitCreditType; }\n    public ObjectProperty&lt;String&gt; editElementTypeProperty() { return editElementType; }\n    public ObjectProperty&lt;String&gt; editAggregationTypeProperty() { return editAggregationType; }\n\n    // ========== \u30d8\u30eb\u30d1\u30fc ==========\n\n    private AccountRow toRow(Account account) {\n        return new AccountRow(\n            account.getAccountCode(),\n            account.getAccountName(),\n            account.getBsplTypeName(),\n            account.getDebitCreditTypeName(),\n            account.getElementTypeName(),\n            account.getAggregationTypeName(),\n            account.isActive()\n        );\n    }\n\n    private int findRowIndex(String accountCode) {\n        for (int i = 0; i &lt; accounts.size(); i++) {\n            if (accounts.get(i).getAccountCode().equals(accountCode)) {\n                return i;\n            }\n        }\n        return -1;\n    }\n}\n</code></pre>"},{"location":"article/study/study3-2/#26","title":"\u7b2c26\u7ae0\uff1a\u4ed5\u8a33\u5165\u529b\u753b\u9762\u306e\u5b9f\u88c5","text":""},{"location":"article/study/study3-2/#261","title":"26.1 \u4ed5\u8a33\u5165\u529b\u753b\u9762\u306e\u8a2d\u8a08","text":"<p>\u4ed5\u8a33\u5165\u529b\u753b\u9762\u306f\u3001\u8907\u5f0f\u7c3f\u8a18\u306b\u57fa\u3065\u3044\u305f\u501f\u65b9\u30fb\u8cb8\u65b9\u306e\u5165\u529b\u3068\u3001\u8cb8\u501f\u30d0\u30e9\u30f3\u30b9\u30c1\u30a7\u30c3\u30af\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/study/study3-2/#262-journaldetailrowjava","title":"26.2 JournalDetailRow.java","text":"JournalDetailRow.java <pre><code>package com.example.accounting.infrastructure.in.javafx.view;\n\nimport javafx.beans.property.*;\n\nimport java.math.BigDecimal;\n\n/**\n * \u4ed5\u8a33\u660e\u7d30\u884c\u306e View \u30e2\u30c7\u30eb\n */\npublic class JournalDetailRow {\n\n    private final IntegerProperty lineNumber = new SimpleIntegerProperty();\n    private final StringProperty debitCreditType = new SimpleStringProperty();\n    private final StringProperty accountCode = new SimpleStringProperty();\n    private final StringProperty accountName = new SimpleStringProperty();\n    private final StringProperty subAccountCode = new SimpleStringProperty();\n    private final StringProperty departmentCode = new SimpleStringProperty();\n    private final StringProperty lineSummary = new SimpleStringProperty();\n    private final ObjectProperty&lt;BigDecimal&gt; amount = new SimpleObjectProperty&lt;&gt;();\n    private final StringProperty taxType = new SimpleStringProperty();\n\n    // ========== \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf ==========\n\n    public JournalDetailRow() {\n        this.amount.set(BigDecimal.ZERO);\n    }\n\n    public JournalDetailRow(int lineNumber) {\n        this();\n        setLineNumber(lineNumber);\n    }\n\n    // ========== Property \u30a2\u30af\u30bb\u30b5 ==========\n\n    public IntegerProperty lineNumberProperty() { return lineNumber; }\n    public StringProperty debitCreditTypeProperty() { return debitCreditType; }\n    public StringProperty accountCodeProperty() { return accountCode; }\n    public StringProperty accountNameProperty() { return accountName; }\n    public StringProperty subAccountCodeProperty() { return subAccountCode; }\n    public StringProperty departmentCodeProperty() { return departmentCode; }\n    public StringProperty lineSummaryProperty() { return lineSummary; }\n    public ObjectProperty&lt;BigDecimal&gt; amountProperty() { return amount; }\n    public StringProperty taxTypeProperty() { return taxType; }\n\n    // ========== Getter/Setter ==========\n\n    public int getLineNumber() { return lineNumber.get(); }\n    public void setLineNumber(int value) { lineNumber.set(value); }\n\n    public String getDebitCreditType() { return debitCreditType.get(); }\n    public void setDebitCreditType(String value) { debitCreditType.set(value); }\n\n    public String getAccountCode() { return accountCode.get(); }\n    public void setAccountCode(String value) { accountCode.set(value); }\n\n    public String getAccountName() { return accountName.get(); }\n    public void setAccountName(String value) { accountName.set(value); }\n\n    public String getSubAccountCode() { return subAccountCode.get(); }\n    public void setSubAccountCode(String value) { subAccountCode.set(value); }\n\n    public String getDepartmentCode() { return departmentCode.get(); }\n    public void setDepartmentCode(String value) { departmentCode.set(value); }\n\n    public String getLineSummary() { return lineSummary.get(); }\n    public void setLineSummary(String value) { lineSummary.set(value); }\n\n    public BigDecimal getAmount() { return amount.get(); }\n    public void setAmount(BigDecimal value) { amount.set(value); }\n\n    public String getTaxType() { return taxType.get(); }\n    public void setTaxType(String value) { taxType.set(value); }\n\n    /**\n     * \u501f\u65b9\u304b\u3069\u3046\u304b\n     */\n    public boolean isDebit() {\n        return \"\u501f\u65b9\".equals(getDebitCreditType());\n    }\n\n    /**\n     * \u8cb8\u65b9\u304b\u3069\u3046\u304b\n     */\n    public boolean isCredit() {\n        return \"\u8cb8\u65b9\".equals(getDebitCreditType());\n    }\n}\n</code></pre>"},{"location":"article/study/study3-2/#263-journalentryviewmodeljava","title":"26.3 JournalEntryViewModel.java","text":"JournalEntryViewModel.java <pre><code>package com.example.accounting.infrastructure.in.javafx.viewmodel;\n\nimport com.example.accounting.application.port.in.JournalUseCase;\nimport com.example.accounting.application.port.in.AccountUseCase;\nimport com.example.accounting.application.port.in.command.CreateJournalCommand;\nimport com.example.accounting.domain.model.journal.Journal;\nimport com.example.accounting.infrastructure.in.javafx.view.JournalDetailRow;\nimport javafx.beans.property.*;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ListChangeListener;\nimport javafx.collections.ObservableList;\nimport org.springframework.stereotype.Component;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.util.stream.Collectors;\n\n/**\n * \u4ed5\u8a33\u5165\u529b\u753b\u9762\u306e ViewModel\n */\n@Component\npublic class JournalEntryViewModel {\n\n    private final JournalUseCase journalUseCase;\n    private final AccountUseCase accountUseCase;\n\n    // \u30d8\u30c3\u30c0\u30fc\u60c5\u5831\n    private final ObjectProperty&lt;LocalDate&gt; journalDate = new SimpleObjectProperty&lt;&gt;(LocalDate.now());\n    private final StringProperty slipNumber = new SimpleStringProperty();\n    private final StringProperty summary = new SimpleStringProperty();\n    private final BooleanProperty closingJournal = new SimpleBooleanProperty(false);\n\n    // \u660e\u7d30\n    private final ObservableList&lt;JournalDetailRow&gt; details = FXCollections.observableArrayList();\n\n    // \u5408\u8a08\n    private final ObjectProperty&lt;BigDecimal&gt; debitTotal = new SimpleObjectProperty&lt;&gt;(BigDecimal.ZERO);\n    private final ObjectProperty&lt;BigDecimal&gt; creditTotal = new SimpleObjectProperty&lt;&gt;(BigDecimal.ZERO);\n    private final ObjectProperty&lt;BigDecimal&gt; difference = new SimpleObjectProperty&lt;&gt;(BigDecimal.ZERO);\n    private final BooleanProperty balanced = new SimpleBooleanProperty(true);\n\n    // \u72b6\u614b\n    private final BooleanProperty loading = new SimpleBooleanProperty(false);\n    private final StringProperty errorMessage = new SimpleStringProperty();\n\n    public JournalEntryViewModel(JournalUseCase journalUseCase,\n                                  AccountUseCase accountUseCase) {\n        this.journalUseCase = journalUseCase;\n        this.accountUseCase = accountUseCase;\n\n        setupListeners();\n        initializeDetails();\n    }\n\n    private void setupListeners() {\n        // \u660e\u7d30\u5909\u66f4\u6642\u306b\u5408\u8a08\u3092\u518d\u8a08\u7b97\n        details.addListener((ListChangeListener&lt;JournalDetailRow&gt;) c -&gt; {\n            calculateTotals();\n        });\n    }\n\n    private void initializeDetails() {\n        // \u521d\u671f\u660e\u7d30\u884c\u3092\u8ffd\u52a0\uff08\u501f\u65b91\u884c\u3001\u8cb8\u65b91\u884c\uff09\n        addLine(\"\u501f\u65b9\");\n        addLine(\"\u8cb8\u65b9\");\n    }\n\n    // ========== \u30c7\u30fc\u30bf\u64cd\u4f5c ==========\n\n    /**\n     * \u660e\u7d30\u884c\u3092\u8ffd\u52a0\n     */\n    public void addLine(String debitCreditType) {\n        JournalDetailRow row = new JournalDetailRow(details.size() + 1);\n        row.setDebitCreditType(debitCreditType);\n\n        // \u91d1\u984d\u5909\u66f4\u6642\u306b\u5408\u8a08\u3092\u518d\u8a08\u7b97\n        row.amountProperty().addListener((obs, oldVal, newVal) -&gt; calculateTotals());\n        row.debitCreditTypeProperty().addListener((obs, oldVal, newVal) -&gt; calculateTotals());\n\n        details.add(row);\n    }\n\n    /**\n     * \u660e\u7d30\u884c\u3092\u524a\u9664\n     */\n    public void removeLine(int index) {\n        if (index &gt;= 0 &amp;&amp; index &lt; details.size() &amp;&amp; details.size() &gt; 2) {\n            details.remove(index);\n            // \u884c\u756a\u53f7\u3092\u632f\u308a\u76f4\u3057\n            for (int i = 0; i &lt; details.size(); i++) {\n                details.get(i).setLineNumber(i + 1);\n            }\n        }\n    }\n\n    /**\n     * \u5408\u8a08\u3092\u8a08\u7b97\n     */\n    private void calculateTotals() {\n        BigDecimal debit = details.stream()\n            .filter(JournalDetailRow::isDebit)\n            .map(row -&gt; row.getAmount() != null ? row.getAmount() : BigDecimal.ZERO)\n            .reduce(BigDecimal.ZERO, BigDecimal::add);\n\n        BigDecimal credit = details.stream()\n            .filter(JournalDetailRow::isCredit)\n            .map(row -&gt; row.getAmount() != null ? row.getAmount() : BigDecimal.ZERO)\n            .reduce(BigDecimal.ZERO, BigDecimal::add);\n\n        debitTotal.set(debit);\n        creditTotal.set(credit);\n        difference.set(debit.subtract(credit).abs());\n        balanced.set(debit.compareTo(credit) == 0);\n    }\n\n    /**\n     * \u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\u304b\u3089\u52d8\u5b9a\u79d1\u76ee\u540d\u3092\u53d6\u5f97\n     */\n    public void lookupAccountName(JournalDetailRow row) {\n        String code = row.getAccountCode();\n        if (code != null &amp;&amp; !code.isBlank()) {\n            try {\n                var account = accountUseCase.findByCode(code);\n                if (account != null) {\n                    row.setAccountName(account.getAccountName());\n                }\n            } catch (Exception e) {\n                row.setAccountName(\"\uff08\u8a72\u5f53\u306a\u3057\uff09\");\n            }\n        }\n    }\n\n    /**\n     * \u4ed5\u8a33\u3092\u767b\u9332\n     */\n    public Journal save() {\n        loading.set(true);\n        errorMessage.set(null);\n\n        try {\n            // \u30d0\u30e9\u30f3\u30b9\u30c1\u30a7\u30c3\u30af\n            if (!balanced.get()) {\n                throw new IllegalStateException(\"\u501f\u65b9\u5408\u8a08\u3068\u8cb8\u65b9\u5408\u8a08\u304c\u4e00\u81f4\u3057\u307e\u305b\u3093\");\n            }\n\n            // \u30b3\u30de\u30f3\u30c9\u3092\u69cb\u7bc9\n            var command = CreateJournalCommand.builder()\n                .journalDate(journalDate.get())\n                .summary(summary.get())\n                .closingJournal(closingJournal.get())\n                .details(details.stream()\n                    .filter(d -&gt; d.getAccountCode() != null &amp;&amp; !d.getAccountCode().isBlank())\n                    .map(d -&gt; CreateJournalCommand.DetailCommand.builder()\n                        .lineNumber(d.getLineNumber())\n                        .debitCreditType(d.getDebitCreditType())\n                        .accountCode(d.getAccountCode())\n                        .subAccountCode(d.getSubAccountCode())\n                        .departmentCode(d.getDepartmentCode())\n                        .lineSummary(d.getLineSummary())\n                        .amount(d.getAmount())\n                        .taxType(d.getTaxType())\n                        .build())\n                    .collect(Collectors.toList()))\n                .build();\n\n            Journal created = journalUseCase.create(command);\n            slipNumber.set(created.getSlipNumber());\n\n            return created;\n        } catch (Exception e) {\n            errorMessage.set(\"\u767b\u9332\u30a8\u30e9\u30fc: \" + e.getMessage());\n            throw e;\n        } finally {\n            loading.set(false);\n        }\n    }\n\n    /**\n     * \u5165\u529b\u3092\u30af\u30ea\u30a2\n     */\n    public void clear() {\n        journalDate.set(LocalDate.now());\n        slipNumber.set(null);\n        summary.set(null);\n        closingJournal.set(false);\n        details.clear();\n        initializeDetails();\n        errorMessage.set(null);\n    }\n\n    // ========== Property \u30a2\u30af\u30bb\u30b5 ==========\n\n    public ObjectProperty&lt;LocalDate&gt; journalDateProperty() { return journalDate; }\n    public StringProperty slipNumberProperty() { return slipNumber; }\n    public StringProperty summaryProperty() { return summary; }\n    public BooleanProperty closingJournalProperty() { return closingJournal; }\n    public ObservableList&lt;JournalDetailRow&gt; getDetails() { return details; }\n    public ObjectProperty&lt;BigDecimal&gt; debitTotalProperty() { return debitTotal; }\n    public ObjectProperty&lt;BigDecimal&gt; creditTotalProperty() { return creditTotal; }\n    public ObjectProperty&lt;BigDecimal&gt; differenceProperty() { return difference; }\n    public BooleanProperty balancedProperty() { return balanced; }\n    public BooleanProperty loadingProperty() { return loading; }\n    public StringProperty errorMessageProperty() { return errorMessage; }\n}\n</code></pre>"},{"location":"article/study/study3-2/#27","title":"\u7b2c27\u7ae0\uff1a\u5e33\u7968\u51fa\u529b\u753b\u9762\u306e\u5b9f\u88c5","text":""},{"location":"article/study/study3-2/#271","title":"27.1 \u5e33\u7968\u51fa\u529b\u6a5f\u80fd\u306e\u6982\u8981","text":"<p>\u5e33\u7968\u51fa\u529b\u753b\u9762\u3067\u306f\u3001\u65e5\u8a08\u8868\u3001\u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868\u3001\u8ca1\u52d9\u8af8\u8868\u3092 PDF \u307e\u305f\u306f Excel \u3067\u51fa\u529b\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/study/study3-2/#272-reportexporterjava","title":"27.2 ReportExporter.java\uff08\u5e33\u7968\u51fa\u529b\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\uff09","text":"ReportExporter.java <pre><code>package com.example.accounting.infrastructure.in.javafx.util;\n\nimport com.example.accounting.application.dto.DailyBalanceDto;\nimport com.example.accounting.application.dto.TrialBalanceDto;\nimport net.sf.jasperreports.engine.*;\nimport net.sf.jasperreports.engine.data.JRBeanCollectionDataSource;\nimport org.apache.poi.ss.usermodel.*;\nimport org.apache.poi.ss.util.CellRangeAddress;\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\nimport org.springframework.core.io.ClassPathResource;\nimport org.springframework.stereotype.Component;\n\nimport java.io.File;\nimport java.io.FileOutputStream;\nimport java.io.InputStream;\nimport java.math.BigDecimal;\nimport java.text.NumberFormat;\nimport java.time.LocalDate;\nimport java.time.format.DateTimeFormatter;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Locale;\nimport java.util.Map;\n\n/**\n * \u5e33\u7968\u51fa\u529b\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\n */\n@Component\npublic class ReportExporter {\n\n    private static final NumberFormat CURRENCY_FORMAT =\n        NumberFormat.getCurrencyInstance(Locale.JAPAN);\n    private static final DateTimeFormatter DATE_FORMATTER =\n        DateTimeFormatter.ofPattern(\"yyyy\u5e74MM\u6708dd\u65e5\");\n\n    // ========== PDF \u51fa\u529b ==========\n\n    /**\n     * \u65e5\u8a08\u8868\u3092 PDF \u51fa\u529b\n     */\n    public void exportDailyReportToPdf(List&lt;DailyBalanceDto&gt; data,\n                                        LocalDate targetDate,\n                                        File outputFile) throws Exception {\n        // JasperReports \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u30ed\u30fc\u30c9\n        InputStream templateStream = new ClassPathResource(\n            \"reports/daily_report.jrxml\"\n        ).getInputStream();\n        JasperReport report = JasperCompileManager.compileReport(templateStream);\n\n        // \u30d1\u30e9\u30e1\u30fc\u30bf\u8a2d\u5b9a\n        Map&lt;String, Object&gt; parameters = new HashMap&lt;&gt;();\n        parameters.put(\"reportDate\", targetDate.format(DATE_FORMATTER));\n        parameters.put(\"companyName\", \"D\u793e\");\n\n        // \u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u4f5c\u6210\n        JRBeanCollectionDataSource dataSource = new JRBeanCollectionDataSource(data);\n\n        // \u30ec\u30dd\u30fc\u30c8\u751f\u6210\n        JasperPrint print = JasperFillManager.fillReport(report, parameters, dataSource);\n\n        // PDF \u51fa\u529b\n        JasperExportManager.exportReportToPdfFile(print, outputFile.getAbsolutePath());\n    }\n\n    // ========== Excel \u51fa\u529b ==========\n\n    /**\n     * \u65e5\u8a08\u8868\u3092 Excel \u51fa\u529b\n     */\n    public void exportDailyReportToExcel(List&lt;DailyBalanceDto&gt; data,\n                                          LocalDate targetDate,\n                                          File outputFile) throws Exception {\n        try (Workbook workbook = new XSSFWorkbook()) {\n            Sheet sheet = workbook.createSheet(\"\u65e5\u8a08\u8868\");\n\n            // \u30b9\u30bf\u30a4\u30eb\u4f5c\u6210\n            CellStyle headerStyle = createHeaderStyle(workbook);\n            CellStyle currencyStyle = createCurrencyStyle(workbook);\n\n            int rowIndex = 0;\n\n            // \u30bf\u30a4\u30c8\u30eb\n            Row titleRow = sheet.createRow(rowIndex++);\n            Cell titleCell = titleRow.createCell(0);\n            titleCell.setCellValue(\"\u65e5 \u8a08 \u8868\");\n            sheet.addMergedRegion(new CellRangeAddress(0, 0, 0, 5));\n\n            // \u65e5\u4ed8\n            Row dateRow = sheet.createRow(rowIndex++);\n            dateRow.createCell(0).setCellValue(\"\u5bfe\u8c61\u65e5: \" + targetDate.format(DATE_FORMATTER));\n\n            rowIndex++; // \u7a7a\u884c\n\n            // \u30d8\u30c3\u30c0\u30fc\n            Row headerRow = sheet.createRow(rowIndex++);\n            String[] headers = {\"\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\", \"\u52d8\u5b9a\u79d1\u76ee\u540d\", \"\u524d\u65e5\u6b8b\u9ad8\", \"\u501f\u65b9\u91d1\u984d\", \"\u8cb8\u65b9\u91d1\u984d\", \"\u5f53\u65e5\u6b8b\u9ad8\"};\n            for (int i = 0; i &lt; headers.length; i++) {\n                Cell cell = headerRow.createCell(i);\n                cell.setCellValue(headers[i]);\n                cell.setCellStyle(headerStyle);\n            }\n\n            // \u30c7\u30fc\u30bf\n            BigDecimal totalDebit = BigDecimal.ZERO;\n            BigDecimal totalCredit = BigDecimal.ZERO;\n\n            for (DailyBalanceDto row : data) {\n                Row dataRow = sheet.createRow(rowIndex++);\n                dataRow.createCell(0).setCellValue(row.getAccountCode());\n                dataRow.createCell(1).setCellValue(row.getAccountName());\n\n                Cell prevCell = dataRow.createCell(2);\n                prevCell.setCellValue(row.getPreviousBalance().doubleValue());\n                prevCell.setCellStyle(currencyStyle);\n\n                Cell debitCell = dataRow.createCell(3);\n                debitCell.setCellValue(row.getDebitAmount().doubleValue());\n                debitCell.setCellStyle(currencyStyle);\n\n                Cell creditCell = dataRow.createCell(4);\n                creditCell.setCellValue(row.getCreditAmount().doubleValue());\n                creditCell.setCellStyle(currencyStyle);\n\n                Cell currCell = dataRow.createCell(5);\n                currCell.setCellValue(row.getCurrentBalance().doubleValue());\n                currCell.setCellStyle(currencyStyle);\n\n                totalDebit = totalDebit.add(row.getDebitAmount());\n                totalCredit = totalCredit.add(row.getCreditAmount());\n            }\n\n            // \u5408\u8a08\u884c\n            Row totalRow = sheet.createRow(rowIndex++);\n            totalRow.createCell(1).setCellValue(\"\u5408\u8a08\");\n\n            Cell totalDebitCell = totalRow.createCell(3);\n            totalDebitCell.setCellValue(totalDebit.doubleValue());\n            totalDebitCell.setCellStyle(currencyStyle);\n\n            Cell totalCreditCell = totalRow.createCell(4);\n            totalCreditCell.setCellValue(totalCredit.doubleValue());\n            totalCreditCell.setCellStyle(currencyStyle);\n\n            // \u5217\u5e45\u8abf\u6574\n            for (int i = 0; i &lt; headers.length; i++) {\n                sheet.autoSizeColumn(i);\n            }\n\n            // \u30d5\u30a1\u30a4\u30eb\u51fa\u529b\n            try (FileOutputStream fos = new FileOutputStream(outputFile)) {\n                workbook.write(fos);\n            }\n        }\n    }\n\n    private CellStyle createHeaderStyle(Workbook workbook) {\n        CellStyle style = workbook.createCellStyle();\n        style.setFillForegroundColor(IndexedColors.GREY_25_PERCENT.getIndex());\n        style.setFillPattern(FillPatternType.SOLID_FOREGROUND);\n        style.setBorderBottom(BorderStyle.THIN);\n        style.setBorderTop(BorderStyle.THIN);\n        style.setBorderLeft(BorderStyle.THIN);\n        style.setBorderRight(BorderStyle.THIN);\n\n        Font font = workbook.createFont();\n        font.setBold(true);\n        style.setFont(font);\n\n        return style;\n    }\n\n    private CellStyle createCurrencyStyle(Workbook workbook) {\n        CellStyle style = workbook.createCellStyle();\n        DataFormat format = workbook.createDataFormat();\n        style.setDataFormat(format.getFormat(\"#,##0\"));\n        style.setAlignment(HorizontalAlignment.RIGHT);\n        return style;\n    }\n}\n</code></pre>"},{"location":"article/study/study3-2/#28css","title":"\u7b2c28\u7ae0\uff1aCSS \u30b9\u30bf\u30a4\u30eb\u30b7\u30fc\u30c8","text":""},{"location":"article/study/study3-2/#281-applicationcss","title":"28.1 application.css","text":"application.css <pre><code>/* ========== \u57fa\u672c\u8a2d\u5b9a ========== */\n.root {\n    -fx-font-family: \"Yu Gothic UI\", \"Meiryo\", sans-serif;\n    -fx-font-size: 13px;\n    -fx-base: #f4f4f4;\n    -fx-accent: #0078d4;\n    -fx-focus-color: #0078d4;\n    -fx-faint-focus-color: transparent;\n}\n\n/* ========== \u30e1\u30cb\u30e5\u30fc\u30d0\u30fc ========== */\n.menu-bar {\n    -fx-background-color: #ffffff;\n    -fx-border-color: #e0e0e0;\n    -fx-border-width: 0 0 1 0;\n}\n\n.menu-bar .menu {\n    -fx-background-color: transparent;\n}\n\n.menu-bar .menu:hover,\n.menu-bar .menu:showing {\n    -fx-background-color: #e5e5e5;\n}\n\n/* ========== \u30c4\u30fc\u30eb\u30d0\u30fc ========== */\n.tool-bar {\n    -fx-background-color: #f8f8f8;\n    -fx-border-color: #e0e0e0;\n    -fx-border-width: 0 0 1 0;\n    -fx-padding: 5;\n}\n\n.tool-bar .button {\n    -fx-background-color: transparent;\n    -fx-background-radius: 4;\n    -fx-padding: 8;\n}\n\n.tool-bar .button:hover {\n    -fx-background-color: #e5e5e5;\n}\n\n.tool-bar .button:pressed {\n    -fx-background-color: #d0d0d0;\n}\n\n/* ========== \u30b9\u30c6\u30fc\u30bf\u30b9\u30d0\u30fc ========== */\n.status-bar {\n    -fx-background-color: #f0f0f0;\n    -fx-border-color: #e0e0e0;\n    -fx-border-width: 1 0 0 0;\n    -fx-padding: 5 10;\n}\n\n/* ========== \u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u30ab\u30fc\u30c9 ========== */\n.dashboard-card {\n    -fx-background-color: #ffffff;\n    -fx-background-radius: 8;\n    -fx-border-color: #e0e0e0;\n    -fx-border-radius: 8;\n    -fx-padding: 20;\n    -fx-min-width: 150;\n    -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 4, 0, 0, 2);\n}\n\n.dashboard-card:hover {\n    -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 8, 0, 0, 4);\n}\n\n.card-title {\n    -fx-font-size: 14px;\n    -fx-text-fill: #666666;\n}\n\n.card-value {\n    -fx-font-size: 28px;\n    -fx-font-weight: bold;\n    -fx-text-fill: #0078d4;\n}\n\n/* ========== \u30c6\u30fc\u30d6\u30eb ========== */\n.table-view {\n    -fx-background-color: #ffffff;\n    -fx-border-color: #e0e0e0;\n}\n\n.table-view .column-header {\n    -fx-background-color: #f8f8f8;\n    -fx-border-color: #e0e0e0;\n    -fx-border-width: 0 0 1 0;\n    -fx-font-weight: bold;\n}\n\n.table-view .table-row-cell:selected {\n    -fx-background-color: #cce4f7;\n}\n\n.table-view .table-row-cell:selected .text {\n    -fx-fill: #000000;\n}\n\n/* \u91d1\u984d\u5217\uff08\u53f3\u5bc4\u305b\uff09 */\n.amount-column {\n    -fx-alignment: CENTER-RIGHT;\n}\n\n/* ========== \u30dc\u30bf\u30f3 ========== */\n.button {\n    -fx-background-color: #ffffff;\n    -fx-border-color: #d0d0d0;\n    -fx-border-radius: 4;\n    -fx-background-radius: 4;\n    -fx-padding: 6 16;\n}\n\n.button:hover {\n    -fx-background-color: #f0f0f0;\n}\n\n.button:pressed {\n    -fx-background-color: #e0e0e0;\n}\n\n.button.primary {\n    -fx-background-color: #0078d4;\n    -fx-text-fill: #ffffff;\n    -fx-border-color: #0078d4;\n}\n\n.button.primary:hover {\n    -fx-background-color: #006cbd;\n}\n\n.button.primary:pressed {\n    -fx-background-color: #005ba1;\n}\n\n.button.danger {\n    -fx-background-color: #d32f2f;\n    -fx-text-fill: #ffffff;\n    -fx-border-color: #d32f2f;\n}\n\n.button.danger:hover {\n    -fx-background-color: #c62828;\n}\n\n/* ========== \u30c6\u30ad\u30b9\u30c8\u30d5\u30a3\u30fc\u30eb\u30c9 ========== */\n.text-field, .text-area, .combo-box, .date-picker {\n    -fx-background-color: #ffffff;\n    -fx-border-color: #d0d0d0;\n    -fx-border-radius: 4;\n    -fx-background-radius: 4;\n    -fx-padding: 6 10;\n}\n\n.text-field:focused, .text-area:focused,\n.combo-box:focused, .date-picker:focused {\n    -fx-border-color: #0078d4;\n    -fx-border-width: 2;\n}\n\n/* ========== \u4ed5\u8a33\u5165\u529b\u753b\u9762 ========== */\n.journal-entry-view .total-area {\n    -fx-background-color: #f8f8f8;\n    -fx-padding: 15;\n    -fx-border-color: #e0e0e0;\n    -fx-border-width: 1 0;\n}\n\n.total-label {\n    -fx-font-size: 12px;\n    -fx-text-fill: #666666;\n}\n\n.total-value {\n    -fx-font-size: 20px;\n    -fx-font-weight: bold;\n}\n\n.balance-ok {\n    -fx-text-fill: #28a745;\n    -fx-font-weight: bold;\n}\n\n.balance-ng {\n    -fx-text-fill: #dc3545;\n    -fx-font-weight: bold;\n}\n\n/* ========== \u30d5\u30a9\u30fc\u30e0\u30e9\u30d9\u30eb ========== */\n.form-label {\n    -fx-font-weight: bold;\n    -fx-min-width: 100;\n}\n\n.section-title {\n    -fx-font-size: 16px;\n    -fx-font-weight: bold;\n}\n\n/* ========== \u30bf\u30a4\u30c8\u30eb ========== */\n.title {\n    -fx-font-size: 24px;\n    -fx-font-weight: bold;\n}\n\n/* ========== \u30bf\u30d6 ========== */\n.tab-pane .tab-header-area {\n    -fx-background-color: #f8f8f8;\n}\n\n.tab-pane .tab {\n    -fx-background-color: #e8e8e8;\n    -fx-background-radius: 4 4 0 0;\n    -fx-padding: 6 16;\n}\n\n.tab-pane .tab:selected {\n    -fx-background-color: #ffffff;\n}\n\n.tab-pane .tab:hover:!selected {\n    -fx-background-color: #d8d8d8;\n}\n</code></pre>"},{"location":"article/study/study3-2/#_3","title":"\u307e\u3068\u3081","text":""},{"location":"article/study/study3-2/#_4","title":"\u5b66\u7fd2\u3057\u305f\u5185\u5bb9","text":"<ol> <li>JavaFX \u306e\u7279\u5fb4</li> <li>FXML \u306b\u3088\u308b\u5ba3\u8a00\u7684 UI \u5b9a\u7fa9</li> <li>Scene Builder \u306b\u3088\u308b\u30d3\u30b8\u30e5\u30a2\u30eb\u7de8\u96c6</li> <li> <p>Property \u306b\u3088\u308b\u53cc\u65b9\u5411\u30c7\u30fc\u30bf\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0</p> </li> <li> <p>MVVM \u30d1\u30bf\u30fc\u30f3</p> </li> <li>View\uff08FXML + Controller\uff09: UI \u8868\u793a</li> <li>ViewModel: \u753b\u9762\u72b6\u614b\u7ba1\u7406</li> <li> <p>Model: \u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\uff08\u65e2\u5b58 UseCase\uff09</p> </li> <li> <p>Spring Boot \u7d71\u5408</p> </li> <li>JavaFX \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3068 Spring \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u306e\u7d71\u5408</li> <li>Controller \u306e DI\uff08Dependency Injection\uff09</li> <li> <p>StageManager \u306b\u3088\u308b\u753b\u9762\u9077\u79fb\u7ba1\u7406</p> </li> <li> <p>\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3068\u306e\u7d71\u5408</p> </li> <li>JavaFX Controller/ViewModel \u3092 Input Adapter \u3068\u3057\u3066\u8ffd\u52a0</li> <li>\u65e2\u5b58\u306e UseCase, Repository \u3092\u5171\u6709</li> <li>REST API, Monolith \u3068\u4e26\u884c\u904b\u7528\u53ef\u80fd</li> </ol>"},{"location":"article/study/study3-2/#_5","title":"\u6280\u8853\u30b9\u30bf\u30c3\u30af","text":"\u30ab\u30c6\u30b4\u30ea \u6280\u8853 UI \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af JavaFX 21 \u30a2\u30a4\u30b3\u30f3 Ikonli (FontAwesome5) \u62e1\u5f35\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb ControlsFX \u5e33\u7968\uff08PDF\uff09 JasperReports, OpenPDF \u5e33\u7968\uff08Excel\uff09 Apache POI \u30c6\u30b9\u30c8 TestFX"},{"location":"article/study/study3-2/#_6","title":"\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210","text":"<pre><code>infrastructure/in/javafx/\n\u251c\u2500\u2500 controller/     # FXML Controller\n\u251c\u2500\u2500 viewmodel/      # ViewModel\uff08\u753b\u9762\u72b6\u614b\uff09\n\u251c\u2500\u2500 view/           # \u884c\u30e2\u30c7\u30eb\uff08TableView \u7528\uff09\n\u251c\u2500\u2500 dialog/         # \u30c0\u30a4\u30a2\u30ed\u30b0\n\u251c\u2500\u2500 util/           # \u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\uff08ExcelExporter, ReportExporter\uff09\n\u2514\u2500\u2500 config/         # \u8a2d\u5b9a\uff08StageManager, FxmlView\uff09\n</code></pre>"},{"location":"article/study/study3-2/#api","title":"API \u30b5\u30fc\u30d0\u30fc\u7248\u3068\u306e\u6bd4\u8f03","text":"\u89b3\u70b9 REST Controller JavaFX ViewModel UseCase \u5171\u6709\uff08\u540c\u4e00\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\uff09 \u5171\u6709\uff08\u540c\u4e00\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\uff09 \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3 <code>@RestController</code> <code>@Component</code> \u30c7\u30fc\u30bf\u5f62\u5f0f JSON ObservableList UI \u66f4\u65b0 \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8cac\u4efb \u81ea\u52d5\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0 \u975e\u540c\u671f\u51e6\u7406 \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u7ba1\u7406 Platform.runLater \u30a8\u30e9\u30fc\u51e6\u7406 ResponseEntity Property + Alert"},{"location":"article/study/study3-3/","title":"\u7814\u7a76 3\uff1agRPC \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":""},{"location":"article/study/study3-3/#_1","title":"\u306f\u3058\u3081\u306b","text":"<p>\u672c\u30d1\u30fc\u30c8\u3067\u306f\u3001API \u30b5\u30fc\u30d0\u30fc\u69cb\u6210\u3068\u306f\u7570\u306a\u308b\u30a2\u30d7\u30ed\u30fc\u30c1\u3068\u3057\u3066\u3001gRPC \u306b\u3088\u308b\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002Protocol Buffers \u306b\u3088\u308b\u9ad8\u52b9\u7387\u306a\u30d0\u30a4\u30ca\u30ea\u30b7\u30ea\u30a2\u30e9\u30a4\u30bc\u30fc\u30b7\u30e7\u30f3\u3068\u3001HTTP/2 \u306b\u3088\u308b\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u901a\u4fe1\u3092\u6d3b\u7528\u3057\u3001\u9ad8\u6027\u80fd\u306a\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u9593\u901a\u4fe1\u3092\u5b9f\u73fe\u3057\u307e\u3059\u3002</p> <p>\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u30c9\u30e1\u30a4\u30f3\u5c64\u30fb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff09\u306f\u305d\u306e\u307e\u307e\u5171\u6709\u3057\u3001Input Adapter \u3068\u3057\u3066 gRPC \u30b5\u30fc\u30d3\u30b9\u5c64\u306e\u307f\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p>"},{"location":"article/study/study3-3/#22-grpc","title":"\u7b2c 22 \u7ae0\uff1agRPC \u30b5\u30fc\u30d0\u30fc\u306e\u57fa\u790e","text":""},{"location":"article/study/study3-3/#221-grpc","title":"22.1 gRPC \u3068\u306f","text":"<p>gRPC \u306f Google \u304c\u958b\u767a\u3057\u305f\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u9ad8\u6027\u80fd RPC\uff08Remote Procedure Call\uff09\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u3059\u3002HTTP/2 \u30d7\u30ed\u30c8\u30b3\u30eb\u3068 Protocol Buffers \u3092\u57fa\u76e4\u3068\u3057\u3001\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u9593\u901a\u4fe1\u306b\u6700\u9069\u5316\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <p></p> <p>gRPC \u306e\u4e3b\u306a\u7279\u5fb4\uff1a</p> \u7279\u5fb4 \u8aac\u660e HTTP/2 \u591a\u91cd\u5316\u3001\u30d8\u30c3\u30c0\u30fc\u5727\u7e2e\u3001\u30d0\u30a4\u30ca\u30ea\u30d5\u30ec\u30fc\u30df\u30f3\u30b0 Protocol Buffers \u9ad8\u901f\u306a\u30d0\u30a4\u30ca\u30ea\u30b7\u30ea\u30a2\u30e9\u30a4\u30bc\u30fc\u30b7\u30e7\u30f3 \u591a\u8a00\u8a9e\u30b5\u30dd\u30fc\u30c8 Java, Go, Python, C#, Node.js \u7b49 \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 4 \u3064\u306e RPC \u30d1\u30bf\u30fc\u30f3\u3092\u30b5\u30dd\u30fc\u30c8 \u30c7\u30c3\u30c9\u30e9\u30a4\u30f3 \u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u7ba1\u7406\u306e\u7d44\u307f\u8fbc\u307f\u30b5\u30dd\u30fc\u30c8 \u8a8d\u8a3c TLS/SSL\u3001\u30c8\u30fc\u30af\u30f3\u30d9\u30fc\u30b9\u8a8d\u8a3c\u306e\u30b5\u30dd\u30fc\u30c8"},{"location":"article/study/study3-3/#222-rest-api-graphql","title":"22.2 REST API / GraphQL \u3068\u306e\u6bd4\u8f03","text":"<p>\u8a73\u7d30\u6bd4\u8f03\u8868\uff1a</p> \u7279\u5fb4 REST API gRPC GraphQL \u30d7\u30ed\u30c8\u30b3\u30eb HTTP/1.1 HTTP/2 HTTP/1.1 or HTTP/2 \u30c7\u30fc\u30bf\u5f62\u5f0f JSON Protocol Buffers JSON \u30b9\u30ad\u30fc\u30de OpenAPI (\u4efb\u610f) .proto (\u5fc5\u9808) .graphqls (\u5fc5\u9808) \u30b7\u30ea\u30a2\u30e9\u30a4\u30bc\u30fc\u30b7\u30e7\u30f3 \u30c6\u30ad\u30b9\u30c8 \u30d0\u30a4\u30ca\u30ea \u30c6\u30ad\u30b9\u30c8 \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9 \u4e2d \u9ad8 \u4e2d \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 WebSocket \u5225\u5b9f\u88c5 \u30cd\u30a4\u30c6\u30a3\u30d6\u30b5\u30dd\u30fc\u30c8 Subscription \u30d6\u30e9\u30a6\u30b6\u5bfe\u5fdc \u25ce \u25b3 (gRPC-Web) \u25ce \u5b66\u7fd2\u30b3\u30b9\u30c8 \u4f4e \u4e2d \u4e2d \u4e3b\u306a\u7528\u9014 \u6c4e\u7528 API \u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9 \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u5411\u3051 <p>\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u3067 gRPC \u3092\u9078\u629e\u3059\u308b\u5834\u9762\uff1a</p> <ol> <li>\u57fa\u5e79\u30b7\u30b9\u30c6\u30e0\u9593\u9023\u643a: \u8ca9\u58f2\u7ba1\u7406\u30fb\u8cfc\u8cb7\u7ba1\u7406\u3068\u306e\u9ad8\u6027\u80fd\u306a\u5185\u90e8\u901a\u4fe1</li> <li>\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u6b8b\u9ad8\u66f4\u65b0: \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u306b\u3088\u308b\u5373\u6642\u53cd\u6620\u901a\u77e5</li> <li>\u4e00\u62ec\u4ed5\u8a33\u51e6\u7406: \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u306b\u3088\u308b\u5927\u91cf\u30c7\u30fc\u30bf\u8ee2\u9001</li> <li>\u6708\u6b21\u7de0\u3081\u51e6\u7406: \u9577\u6642\u9593\u51e6\u7406\u306e\u9032\u6357\u901a\u77e5</li> </ol>"},{"location":"article/study/study3-3/#223-4-rpc","title":"22.3 4 \u3064\u306e RPC \u30d1\u30bf\u30fc\u30f3","text":"<p>gRPC \u306f 4 \u3064\u306e RPC \u30d1\u30bf\u30fc\u30f3\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u307e\u3059\u3002</p> <p></p> <p>\u5404\u30d1\u30bf\u30fc\u30f3\u306e\u7528\u9014\uff08\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\uff09\uff1a</p> \u30d1\u30bf\u30fc\u30f3 \u7528\u9014\u4f8b \u5358\u9805 RPC \u52d8\u5b9a\u79d1\u76ee\u53d6\u5f97\u3001\u4ed5\u8a33\u767b\u9332 \u30b5\u30fc\u30d0\u30fc\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 \u4ed5\u8a33\u4e00\u89a7\u53d6\u5f97\u3001\u6b8b\u9ad8\u7167\u4f1a \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 \u4ed5\u8a33\u660e\u7d30\u306e\u4e00\u62ec\u767b\u9332 \u53cc\u65b9\u5411\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u6b8b\u9ad8\u540c\u671f"},{"location":"article/study/study3-3/#224-grpc","title":"22.4 gRPC \u306b\u304a\u3051\u308b\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":"<p>gRPC \u3092\u5c0e\u5165\u3057\u3066\u3082\u3001\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u30c9\u30e1\u30a4\u30f3\u5c64\u30fb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff09\u306f\u305d\u306e\u307e\u307e\u5171\u6709\u3057\u3001Input Adapter \u3068\u3057\u3066 gRPC \u30b5\u30fc\u30d3\u30b9\u5c64\u306e\u307f\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/study/study3-3/#225","title":"22.5 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210","text":"<p>\u65e2\u5b58\u306e\u69cb\u6210\u306b <code>infrastructure/in/grpc/</code> \u3092\u8ffd\u52a0\u3059\u308b\u3060\u3051\u3067\u3059\u3002</p> <pre><code>src/main/java/com/example/accounting/\n\u251c\u2500\u2500 domain/                     # \u30c9\u30e1\u30a4\u30f3\u5c64\uff08API\u7248\u3068\u5171\u901a\uff09\n\u2502   \u251c\u2500\u2500 model/\n\u2502   \u2502   \u251c\u2500\u2500 account/           # \u52d8\u5b9a\u79d1\u76ee\u30c9\u30e1\u30a4\u30f3\n\u2502   \u2502   \u251c\u2500\u2500 journal/           # \u4ed5\u8a33\u30c9\u30e1\u30a4\u30f3\n\u2502   \u2502   \u251c\u2500\u2500 balance/           # \u6b8b\u9ad8\u30c9\u30e1\u30a4\u30f3\n\u2502   \u2502   \u2514\u2500\u2500 tax/               # \u8ab2\u7a0e\u53d6\u5f15\u30c9\u30e1\u30a4\u30f3\n\u2502   \u2514\u2500\u2500 exception/\n\u2502\n\u251c\u2500\u2500 application/               # \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff08API\u7248\u3068\u5171\u901a\uff09\n\u2502   \u251c\u2500\u2500 port/\n\u2502   \u2502   \u251c\u2500\u2500 in/               # Input Port\uff08\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\uff09\n\u2502   \u2502   \u2514\u2500\u2500 out/              # Output Port\uff08\u30ea\u30dd\u30b8\u30c8\u30ea\uff09\n\u2502   \u2514\u2500\u2500 service/\n\u2502\n\u251c\u2500\u2500 infrastructure/\n\u2502   \u251c\u2500\u2500 in/\n\u2502   \u2502   \u251c\u2500\u2500 api/              # Input Adapter\uff08REST\u5b9f\u88c5\uff09- \u65e2\u5b58\n\u2502   \u2502   \u2514\u2500\u2500 grpc/             # Input Adapter\uff08gRPC\u5b9f\u88c5\uff09- \u65b0\u898f\u8ffd\u52a0\n\u2502   \u2502       \u251c\u2500\u2500 service/      # gRPC \u30b5\u30fc\u30d3\u30b9\u5b9f\u88c5\n\u2502   \u2502       \u251c\u2500\u2500 interceptor/  # \u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\n\u2502   \u2502       \u2514\u2500\u2500 converter/    # \u30c9\u30e1\u30a4\u30f3 \u2194 Proto \u5909\u63db\n\u2502   \u2514\u2500\u2500 out/\n\u2502       \u2514\u2500\u2500 persistence/      # Output Adapter\uff08DB\u5b9f\u88c5\uff09- \u65e2\u5b58\n\u2502           \u251c\u2500\u2500 mapper/\n\u2502           \u2514\u2500\u2500 repository/\n\u2502\n\u251c\u2500\u2500 config/\n\u2502\n\u2514\u2500\u2500 src/main/proto/           # Protocol Buffers \u5b9a\u7fa9\n    \u251c\u2500\u2500 common.proto\n    \u251c\u2500\u2500 account.proto\n    \u251c\u2500\u2500 journal.proto\n    \u251c\u2500\u2500 balance.proto\n    \u2514\u2500\u2500 report.proto\n</code></pre>"},{"location":"article/study/study3-3/#226","title":"22.6 \u6280\u8853\u30b9\u30bf\u30c3\u30af\u306e\u8ffd\u52a0","text":"<p>\u65e2\u5b58\u306e <code>build.gradle.kts</code> \u306b gRPC \u95a2\u9023\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> build.gradle.kts\uff08\u5dee\u5206\uff09 <pre><code>import com.google.protobuf.gradle.*\n\nplugins {\n    // \u65e2\u5b58\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\n    id(\"java\")\n    id(\"org.springframework.boot\") version \"3.2.0\"\n    id(\"io.spring.dependency-management\") version \"1.1.4\"\n\n    // gRPC \u95a2\u9023\u3092\u8ffd\u52a0\n    id(\"com.google.protobuf\") version \"0.9.4\"\n}\n\ndependencies {\n    // \u65e2\u5b58\u306e\u4f9d\u5b58\u95a2\u4fc2\uff08Spring Boot, MyBatis, PostgreSQL\u7b49\uff09\u306f\u305d\u306e\u307e\u307e\n\n    // gRPC \u95a2\u9023\u3092\u8ffd\u52a0\n    implementation(\"net.devh:grpc-spring-boot-starter:3.1.0.RELEASE\")\n    implementation(\"io.grpc:grpc-protobuf:1.62.2\")\n    implementation(\"io.grpc:grpc-stub:1.62.2\")\n    implementation(\"io.grpc:grpc-services:1.62.2\")  // \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\u3001\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\n\n    // Protocol Buffers\n    implementation(\"com.google.protobuf:protobuf-java:3.25.3\")\n    implementation(\"com.google.protobuf:protobuf-java-util:3.25.3\")  // JSON \u5909\u63db\n\n    // Jakarta Annotation (gRPC generated code \u3067\u5fc5\u8981)\n    compileOnly(\"jakarta.annotation:jakarta.annotation-api:2.1.1\")\n\n    // Test\n    testImplementation(\"io.grpc:grpc-testing:1.62.2\")\n    testImplementation(\"net.devh:grpc-client-spring-boot-starter:3.1.0.RELEASE\")\n}\n\nprotobuf {\n    protoc {\n        artifact = \"com.google.protobuf:protoc:3.25.3\"\n    }\n    plugins {\n        create(\"grpc\") {\n            artifact = \"io.grpc:protoc-gen-grpc-java:1.62.2\"\n        }\n    }\n    generateProtoTasks {\n        all().forEach { task -&gt;\n            task.plugins {\n                create(\"grpc\")\n            }\n        }\n    }\n}\n\n// \u751f\u6210\u30b3\u30fc\u30c9\u306e\u30bd\u30fc\u30b9\u30d1\u30b9\u8ffd\u52a0\nsourceSets {\n    main {\n        java {\n            srcDirs(\n                \"build/generated/source/proto/main/java\",\n                \"build/generated/source/proto/main/grpc\"\n            )\n        }\n    }\n}\n</code></pre> application.yml\uff08\u5dee\u5206\uff09 <pre><code># \u65e2\u5b58\u306e\u8a2d\u5b9a\u306f\u305d\u306e\u307e\u307e\n\n# gRPC \u30b5\u30fc\u30d0\u30fc\u8a2d\u5b9a\ngrpc:\n  server:\n    port: 9090\n    reflection-service-enabled: true  # gRPC \u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u6709\u52b9\u5316\n    health-service-enabled: true      # \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\u6709\u52b9\u5316\n    max-inbound-message-size: 4194304  # 4MB\n    max-inbound-metadata-size: 8192    # 8KB\n\n# \u30ed\u30b0\u8a2d\u5b9a\nlogging:\n  level:\n    net.devh.boot.grpc: DEBUG\n    io.grpc: INFO\n</code></pre>"},{"location":"article/study/study3-3/#23-protocol-buffers","title":"\u7b2c 23 \u7ae0\uff1aProtocol Buffers \u5b9a\u7fa9","text":""},{"location":"article/study/study3-3/#231","title":"23.1 \u5171\u901a\u30e1\u30c3\u30bb\u30fc\u30b8\u5b9a\u7fa9","text":"src/main/proto/common.proto <pre><code>syntax = \"proto3\";\n\npackage com.example.accounting;\n\noption java_package = \"com.example.accounting.infrastructure.in.grpc.proto\";\noption java_outer_classname = \"CommonProto\";\noption java_multiple_files = true;\n\nimport \"google/protobuf/timestamp.proto\";\nimport \"google/protobuf/wrappers.proto\";\n\n// \u5171\u901a\u306e\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\nmessage PageRequest {\n    int32 page = 1;\n    int32 size = 2;\n}\n\nmessage PageInfo {\n    int32 page = 1;\n    int32 size = 2;\n    int32 total_elements = 3;\n    int32 total_pages = 4;\n    bool has_next = 5;\n    bool has_previous = 6;\n}\n\n// \u5171\u901a\u306e\u30a8\u30e9\u30fc\u5fdc\u7b54\nmessage ErrorDetail {\n    string field = 1;\n    string message = 2;\n}\n\nmessage ErrorResponse {\n    string code = 1;\n    string message = 2;\n    repeated ErrorDetail details = 3;\n}\n\n// \u91d1\u984d\u578b\uff08Decimal \u76f8\u5f53\uff09\nmessage Money {\n    int64 units = 1;      // \u6574\u6570\u90e8\n    int32 nanos = 2;      // \u5c0f\u6570\u90e8\uff0810\u5104\u5206\u306e1\u5358\u4f4d\uff09\n    string currency = 3;  // \u901a\u8ca8\u30b3\u30fc\u30c9\uff08JPY\u7b49\uff09\n}\n\n// \u65e5\u4ed8\u578b\uff08Date \u76f8\u5f53\uff09\nmessage Date {\n    int32 year = 1;\n    int32 month = 2;\n    int32 day = 3;\n}\n\n// \u5e74\u6708\u578b\nmessage YearMonth {\n    int32 year = 1;\n    int32 month = 2;\n}\n\n// \u6c7a\u7b97\u671f\nmessage FiscalPeriod {\n    int32 fiscal_year = 1;    // \u6c7a\u7b97\u5e74\u5ea6\n    int32 fiscal_month = 2;   // \u6c7a\u7b97\u6708\u5ea6\uff081-12\uff09\n}\n\n// \u76e3\u67fb\u60c5\u5831\nmessage AuditInfo {\n    google.protobuf.Timestamp created_at = 1;\n    string created_by = 2;\n    google.protobuf.Timestamp updated_at = 3;\n    string updated_by = 4;\n}\n</code></pre>"},{"location":"article/study/study3-3/#232-protocol-buffers","title":"23.2 \u52d8\u5b9a\u79d1\u76ee Protocol Buffers","text":"src/main/proto/account.proto <pre><code>syntax = \"proto3\";\n\npackage com.example.accounting;\n\noption java_package = \"com.example.accounting.infrastructure.in.grpc.proto\";\noption java_outer_classname = \"AccountProto\";\noption java_multiple_files = true;\n\nimport \"common.proto\";\nimport \"google/protobuf/empty.proto\";\n\n// BSPL\u533a\u5206\nenum BsplType {\n    BSPL_TYPE_UNSPECIFIED = 0;\n    BSPL_TYPE_BS = 1;            // \u8cb8\u501f\u5bfe\u7167\u8868\n    BSPL_TYPE_PL = 2;            // \u640d\u76ca\u8a08\u7b97\u66f8\n}\n\n// \u8cb8\u501f\u533a\u5206\nenum DebitCreditType {\n    DEBIT_CREDIT_TYPE_UNSPECIFIED = 0;\n    DEBIT_CREDIT_TYPE_DEBIT = 1;     // \u501f\u65b9\n    DEBIT_CREDIT_TYPE_CREDIT = 2;    // \u8cb8\u65b9\n}\n\n// \u53d6\u5f15\u8981\u7d20\u533a\u5206\nenum ElementType {\n    ELEMENT_TYPE_UNSPECIFIED = 0;\n    ELEMENT_TYPE_ASSET = 1;          // \u8cc7\u7523\n    ELEMENT_TYPE_LIABILITY = 2;      // \u8ca0\u50b5\n    ELEMENT_TYPE_EQUITY = 3;         // \u8cc7\u672c\n    ELEMENT_TYPE_REVENUE = 4;        // \u53ce\u76ca\n    ELEMENT_TYPE_EXPENSE = 5;        // \u8cbb\u7528\n}\n\n// \u96c6\u8a08\u533a\u5206\nenum AggregationType {\n    AGGREGATION_TYPE_UNSPECIFIED = 0;\n    AGGREGATION_TYPE_HEADING = 1;    // \u898b\u51fa\u79d1\u76ee\n    AGGREGATION_TYPE_SUMMARY = 2;    // \u96c6\u8a08\u79d1\u76ee\n    AGGREGATION_TYPE_POSTING = 3;    // \u8a08\u4e0a\u79d1\u76ee\n}\n\n// \u52d8\u5b9a\u79d1\u76ee\u30e1\u30c3\u30bb\u30fc\u30b8\nmessage Account {\n    string account_code = 1;             // \u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\n    string account_name = 2;             // \u52d8\u5b9a\u79d1\u76ee\u540d\n    BsplType bspl_type = 3;              // BSPL\u533a\u5206\n    DebitCreditType debit_credit_type = 4;  // \u8cb8\u501f\u533a\u5206\n    ElementType element_type = 5;        // \u53d6\u5f15\u8981\u7d20\u533a\u5206\n    AggregationType aggregation_type = 6;   // \u96c6\u8a08\u533a\u5206\n    string parent_account_code = 7;      // \u89aa\u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\n    string account_path = 8;             // \u52d8\u5b9a\u79d1\u76ee\u30d1\u30b9\n    int32 display_order = 9;             // \u8868\u793a\u9806\n    bool is_active = 10;                 // \u6709\u52b9\u30d5\u30e9\u30b0\n    AuditInfo audit = 11;                // \u76e3\u67fb\u60c5\u5831\n}\n\n// \u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30e1\u30c3\u30bb\u30fc\u30b8\nmessage AccountStructure {\n    string account_code = 1;             // \u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\n    string account_path = 2;             // \u52d8\u5b9a\u79d1\u76ee\u30d1\u30b9\uff08~\u533a\u5207\u308a\uff09\n    int32 level = 3;                     // \u968e\u5c64\u30ec\u30d9\u30eb\n}\n\n// \u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\nmessage TaxTransaction {\n    string tax_code = 1;                 // \u8ab2\u7a0e\u53d6\u5f15\u30b3\u30fc\u30c9\n    string tax_name = 2;                 // \u8ab2\u7a0e\u53d6\u5f15\u540d\n    int32 tax_rate = 3;                  // \u7a0e\u7387\uff08\u30d1\u30fc\u30bb\u30f3\u30c8 * 100\uff09\n    Date effective_from = 4;             // \u9069\u7528\u958b\u59cb\u65e5\n    Date effective_to = 5;               // \u9069\u7528\u7d42\u4e86\u65e5\n    bool is_active = 6;                  // \u6709\u52b9\u30d5\u30e9\u30b0\n}\n\n// === \u30ea\u30af\u30a8\u30b9\u30c8/\u30ec\u30b9\u30dd\u30f3\u30b9 ===\n\n// \u52d8\u5b9a\u79d1\u76ee\u53d6\u5f97\nmessage GetAccountRequest {\n    string account_code = 1;\n}\n\nmessage GetAccountResponse {\n    Account account = 1;\n}\n\n// \u52d8\u5b9a\u79d1\u76ee\u4e00\u89a7\u53d6\u5f97\nmessage ListAccountsRequest {\n    PageRequest page = 1;\n    BsplType bspl_type = 2;              // \u30d5\u30a3\u30eb\u30bf\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\uff09\n    ElementType element_type = 3;        // \u30d5\u30a3\u30eb\u30bf\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\uff09\n    AggregationType aggregation_type = 4; // \u30d5\u30a3\u30eb\u30bf\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\uff09\n    string keyword = 5;                  // \u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\n    bool active_only = 6;                // \u6709\u52b9\u306e\u307f\n}\n\nmessage ListAccountsResponse {\n    repeated Account accounts = 1;\n    PageInfo page_info = 2;\n}\n\n// \u52d8\u5b9a\u79d1\u76ee\u767b\u9332\nmessage CreateAccountRequest {\n    string account_code = 1;\n    string account_name = 2;\n    BsplType bspl_type = 3;\n    DebitCreditType debit_credit_type = 4;\n    ElementType element_type = 5;\n    AggregationType aggregation_type = 6;\n    string parent_account_code = 7;\n    int32 display_order = 8;\n}\n\nmessage CreateAccountResponse {\n    Account account = 1;\n}\n\n// \u52d8\u5b9a\u79d1\u76ee\u66f4\u65b0\nmessage UpdateAccountRequest {\n    string account_code = 1;\n    string account_name = 2;\n    BsplType bspl_type = 3;\n    DebitCreditType debit_credit_type = 4;\n    ElementType element_type = 5;\n    AggregationType aggregation_type = 6;\n    string parent_account_code = 7;\n    int32 display_order = 8;\n    bool is_active = 9;\n}\n\nmessage UpdateAccountResponse {\n    Account account = 1;\n}\n\n// \u52d8\u5b9a\u79d1\u76ee\u524a\u9664\nmessage DeleteAccountRequest {\n    string account_code = 1;\n}\n\nmessage DeleteAccountResponse {\n    bool success = 1;\n}\n\n// \u52d8\u5b9a\u79d1\u76ee\u4e00\u62ec\u767b\u9332\uff08\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\uff09\nmessage BulkCreateAccountRequest {\n    CreateAccountRequest account = 1;\n}\n\nmessage BulkCreateAccountResponse {\n    int32 success_count = 1;\n    int32 failure_count = 2;\n    repeated ErrorDetail errors = 3;\n}\n\n// \u52d8\u5b9a\u79d1\u76ee\u30c4\u30ea\u30fc\u53d6\u5f97\nmessage GetAccountTreeRequest {\n    BsplType bspl_type = 1;  // BS \u307e\u305f\u306f PL\n}\n\nmessage GetAccountTreeResponse {\n    repeated AccountNode nodes = 1;\n}\n\nmessage AccountNode {\n    Account account = 1;\n    repeated AccountNode children = 2;\n}\n\n// \u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\u53d6\u5f97\nmessage GetTaxTransactionRequest {\n    string tax_code = 1;\n}\n\nmessage GetTaxTransactionResponse {\n    TaxTransaction tax_transaction = 1;\n}\n\n// \u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\u4e00\u89a7\nmessage ListTaxTransactionsRequest {\n    Date as_of_date = 1;     // \u9069\u7528\u65e5\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\uff09\n    bool active_only = 2;\n}\n\nmessage ListTaxTransactionsResponse {\n    repeated TaxTransaction tax_transactions = 1;\n}\n\n// === \u30b5\u30fc\u30d3\u30b9\u5b9a\u7fa9 ===\n\nservice AccountService {\n    // \u5358\u9805 RPC\n    rpc GetAccount(GetAccountRequest) returns (GetAccountResponse);\n    rpc CreateAccount(CreateAccountRequest) returns (CreateAccountResponse);\n    rpc UpdateAccount(UpdateAccountRequest) returns (UpdateAccountResponse);\n    rpc DeleteAccount(DeleteAccountRequest) returns (DeleteAccountResponse);\n\n    // \u30b5\u30fc\u30d0\u30fc\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 RPC\uff08\u5927\u91cf\u30c7\u30fc\u30bf\u53d6\u5f97\uff09\n    rpc ListAccounts(ListAccountsRequest) returns (stream Account);\n\n    // \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 RPC\uff08\u4e00\u62ec\u767b\u9332\uff09\n    rpc BulkCreateAccounts(stream BulkCreateAccountRequest) returns (BulkCreateAccountResponse);\n\n    // \u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\n    rpc GetAccountTree(GetAccountTreeRequest) returns (GetAccountTreeResponse);\n\n    // \u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\n    rpc GetTaxTransaction(GetTaxTransactionRequest) returns (GetTaxTransactionResponse);\n    rpc ListTaxTransactions(ListTaxTransactionsRequest) returns (ListTaxTransactionsResponse);\n}\n</code></pre>"},{"location":"article/study/study3-3/#233-protocol-buffers","title":"23.3 \u4ed5\u8a33 Protocol Buffers","text":"src/main/proto/journal.proto <pre><code>syntax = \"proto3\";\n\npackage com.example.accounting;\n\noption java_package = \"com.example.accounting.infrastructure.in.grpc.proto\";\noption java_outer_classname = \"JournalProto\";\noption java_multiple_files = true;\n\nimport \"common.proto\";\nimport \"account.proto\";\nimport \"google/protobuf/empty.proto\";\n\n// \u4ed5\u8a33\u4f1d\u7968\u533a\u5206\nenum JournalType {\n    JOURNAL_TYPE_UNSPECIFIED = 0;\n    JOURNAL_TYPE_NORMAL = 1;         // \u901a\u5e38\u4ed5\u8a33\n    JOURNAL_TYPE_CLOSING = 2;        // \u6c7a\u7b97\u4ed5\u8a33\n    JOURNAL_TYPE_ADJUSTMENT = 3;     // \u8abf\u6574\u4ed5\u8a33\n    JOURNAL_TYPE_REVERSAL = 4;       // \u53d6\u6d88\u4ed5\u8a33\n}\n\n// \u4ed5\u8a33\u30b9\u30c6\u30fc\u30bf\u30b9\nenum JournalStatus {\n    JOURNAL_STATUS_UNSPECIFIED = 0;\n    JOURNAL_STATUS_DRAFT = 1;        // \u4e0b\u66f8\u304d\n    JOURNAL_STATUS_PENDING = 2;      // \u627f\u8a8d\u5f85\u3061\n    JOURNAL_STATUS_APPROVED = 3;     // \u627f\u8a8d\u6e08\u307f\n    JOURNAL_STATUS_POSTED = 4;       // \u8ee2\u8a18\u6e08\u307f\n    JOURNAL_STATUS_CANCELED = 5;     // \u53d6\u6d88\u6e08\u307f\n}\n\n// \u4ed5\u8a33\u4f1d\u7968\u30e1\u30c3\u30bb\u30fc\u30b8\nmessage Journal {\n    string slip_number = 1;              // \u4f1d\u7968\u756a\u53f7\n    Date journal_date = 2;               // \u8d77\u7968\u65e5\n    Date input_date = 3;                 // \u5165\u529b\u65e5\n    string summary = 4;                  // \u4f1d\u7968\u6458\u8981\n    JournalType journal_type = 5;        // \u4ed5\u8a33\u4f1d\u7968\u533a\u5206\n    JournalStatus status = 6;            // \u30b9\u30c6\u30fc\u30bf\u30b9\n    bool is_closing_journal = 7;         // \u6c7a\u7b97\u4ed5\u8a33\u30d5\u30e9\u30b0\n    FiscalPeriod fiscal_period = 8;      // \u6c7a\u7b97\u671f\n    Money total_debit = 9;               // \u501f\u65b9\u5408\u8a08\n    Money total_credit = 10;             // \u8cb8\u65b9\u5408\u8a08\n    repeated JournalDetail details = 11; // \u4ed5\u8a33\u660e\u7d30\n    string reversal_slip_number = 12;    // \u53d6\u6d88\u5143\u4f1d\u7968\u756a\u53f7\n    AuditInfo audit = 13;                // \u76e3\u67fb\u60c5\u5831\n}\n\n// \u4ed5\u8a33\u660e\u7d30\u30e1\u30c3\u30bb\u30fc\u30b8\nmessage JournalDetail {\n    int32 line_number = 1;               // \u884c\u756a\u53f7\n    string line_summary = 2;             // \u884c\u6458\u8981\n    repeated JournalDebitCreditDetail debit_credit_details = 3; // \u8cb8\u501f\u660e\u7d30\n}\n\n// \u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\u30e1\u30c3\u30bb\u30fc\u30b8\nmessage JournalDebitCreditDetail {\n    DebitCreditType debit_credit_type = 1;  // \u501f\u65b9/\u8cb8\u65b9\n    string account_code = 2;             // \u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\n    string account_name = 3;             // \u52d8\u5b9a\u79d1\u76ee\u540d\uff08\u53c2\u7167\u7528\uff09\n    string sub_account_code = 4;         // \u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\n    string department_code = 5;          // \u90e8\u9580\u30b3\u30fc\u30c9\n    string project_code = 6;             // \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9\n    Money amount = 7;                    // \u91d1\u984d\n    Money base_currency_amount = 8;      // \u57fa\u8ef8\u901a\u8ca8\u91d1\u984d\n    string tax_code = 9;                 // \u8ab2\u7a0e\u53d6\u5f15\u30b3\u30fc\u30c9\n    int32 tax_rate = 10;                 // \u7a0e\u7387\n    Money tax_amount = 11;               // \u6d88\u8cbb\u7a0e\u984d\n}\n\n// === \u30ea\u30af\u30a8\u30b9\u30c8/\u30ec\u30b9\u30dd\u30f3\u30b9 ===\n\n// \u4ed5\u8a33\u53d6\u5f97\nmessage GetJournalRequest {\n    string slip_number = 1;\n}\n\nmessage GetJournalResponse {\n    Journal journal = 1;\n}\n\n// \u4ed5\u8a33\u4e00\u89a7\u53d6\u5f97\nmessage ListJournalsRequest {\n    PageRequest page = 1;\n    Date date_from = 2;                  // \u8d77\u7968\u65e5From\n    Date date_to = 3;                    // \u8d77\u7968\u65e5To\n    FiscalPeriod fiscal_period = 4;      // \u6c7a\u7b97\u671f\n    JournalType journal_type = 5;        // \u4ed5\u8a33\u4f1d\u7968\u533a\u5206\n    JournalStatus status = 6;            // \u30b9\u30c6\u30fc\u30bf\u30b9\n    string account_code = 7;             // \u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\n    string keyword = 8;                  // \u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\n}\n\nmessage ListJournalsResponse {\n    repeated Journal journals = 1;\n    PageInfo page_info = 2;\n}\n\n// \u4ed5\u8a33\u767b\u9332\nmessage CreateJournalRequest {\n    Date journal_date = 1;\n    string summary = 2;\n    JournalType journal_type = 3;\n    bool is_closing_journal = 4;\n    repeated CreateJournalDetailRequest details = 5;\n}\n\nmessage CreateJournalDetailRequest {\n    int32 line_number = 1;\n    string line_summary = 2;\n    repeated CreateJournalDebitCreditRequest debit_credit_details = 3;\n}\n\nmessage CreateJournalDebitCreditRequest {\n    DebitCreditType debit_credit_type = 1;\n    string account_code = 2;\n    string sub_account_code = 3;\n    string department_code = 4;\n    string project_code = 5;\n    Money amount = 6;\n    string tax_code = 7;\n}\n\nmessage CreateJournalResponse {\n    Journal journal = 1;\n}\n\n// \u4ed5\u8a33\u66f4\u65b0\nmessage UpdateJournalRequest {\n    string slip_number = 1;\n    Date journal_date = 2;\n    string summary = 3;\n    JournalType journal_type = 4;\n    bool is_closing_journal = 5;\n    repeated CreateJournalDetailRequest details = 6;\n}\n\nmessage UpdateJournalResponse {\n    Journal journal = 1;\n}\n\n// \u4ed5\u8a33\u53d6\u6d88\uff08\u8d64\u9ed2\u51e6\u7406\uff09\nmessage CancelJournalRequest {\n    string slip_number = 1;\n    string cancel_reason = 2;\n}\n\nmessage CancelJournalResponse {\n    Journal original_journal = 1;        // \u5143\u306e\u4ed5\u8a33\n    Journal reversal_journal = 2;        // \u53d6\u6d88\u4ed5\u8a33\n}\n\n// \u4ed5\u8a33\u627f\u8a8d\nmessage ApproveJournalRequest {\n    string slip_number = 1;\n    string approver_comment = 2;\n}\n\nmessage ApproveJournalResponse {\n    Journal journal = 1;\n}\n\n// \u4ed5\u8a33\u4e00\u62ec\u767b\u9332\uff08\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\uff09\nmessage BulkCreateJournalRequest {\n    CreateJournalRequest journal = 1;\n}\n\nmessage BulkCreateJournalResponse {\n    int32 success_count = 1;\n    int32 failure_count = 2;\n    repeated ErrorDetail errors = 3;\n    repeated string created_slip_numbers = 4;\n}\n\n// \u8cb8\u501f\u30d0\u30e9\u30f3\u30b9\u30c1\u30a7\u30c3\u30af\nmessage ValidateBalanceRequest {\n    repeated CreateJournalDetailRequest details = 1;\n}\n\nmessage ValidateBalanceResponse {\n    bool is_balanced = 1;\n    Money total_debit = 2;\n    Money total_credit = 3;\n    Money difference = 4;\n}\n\n// === \u30b5\u30fc\u30d3\u30b9\u5b9a\u7fa9 ===\n\nservice JournalService {\n    // \u5358\u9805 RPC\n    rpc GetJournal(GetJournalRequest) returns (GetJournalResponse);\n    rpc CreateJournal(CreateJournalRequest) returns (CreateJournalResponse);\n    rpc UpdateJournal(UpdateJournalRequest) returns (UpdateJournalResponse);\n    rpc CancelJournal(CancelJournalRequest) returns (CancelJournalResponse);\n    rpc ApproveJournal(ApproveJournalRequest) returns (ApproveJournalResponse);\n    rpc ValidateBalance(ValidateBalanceRequest) returns (ValidateBalanceResponse);\n\n    // \u30b5\u30fc\u30d0\u30fc\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 RPC\n    rpc ListJournals(ListJournalsRequest) returns (stream Journal);\n\n    // \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 RPC\n    rpc BulkCreateJournals(stream BulkCreateJournalRequest) returns (BulkCreateJournalResponse);\n\n    // \u53cc\u65b9\u5411\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 RPC\uff08\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u4ed5\u8a33\u5165\u529b\uff09\n    rpc StreamJournalEntry(stream CreateJournalRequest) returns (stream CreateJournalResponse);\n}\n</code></pre>"},{"location":"article/study/study3-3/#234-protocol-buffers","title":"23.4 \u6b8b\u9ad8 Protocol Buffers","text":"src/main/proto/balance.proto <pre><code>syntax = \"proto3\";\n\npackage com.example.accounting;\n\noption java_package = \"com.example.accounting.infrastructure.in.grpc.proto\";\noption java_outer_classname = \"BalanceProto\";\noption java_multiple_files = true;\n\nimport \"common.proto\";\nimport \"account.proto\";\n\n// \u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\nmessage DailyBalance {\n    Date balance_date = 1;               // \u6b8b\u9ad8\u65e5\n    string account_code = 2;             // \u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\n    string account_name = 3;             // \u52d8\u5b9a\u79d1\u76ee\u540d\n    string sub_account_code = 4;         // \u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\n    string department_code = 5;          // \u90e8\u9580\u30b3\u30fc\u30c9\n    Money previous_balance = 6;          // \u524d\u65e5\u6b8b\u9ad8\n    Money debit_amount = 7;              // \u501f\u65b9\u91d1\u984d\n    Money credit_amount = 8;             // \u8cb8\u65b9\u91d1\u984d\n    Money current_balance = 9;           // \u5f53\u65e5\u6b8b\u9ad8\n}\n\n// \u6708\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\nmessage MonthlyBalance {\n    FiscalPeriod fiscal_period = 1;      // \u6c7a\u7b97\u671f\n    string account_code = 2;             // \u52d8\u5b9a\u79d1\u76ee\u30b3\u30fc\u30c9\n    string account_name = 3;             // \u52d8\u5b9a\u79d1\u76ee\u540d\n    string sub_account_code = 4;         // \u88dc\u52a9\u79d1\u76ee\u30b3\u30fc\u30c9\n    string department_code = 5;          // \u90e8\u9580\u30b3\u30fc\u30c9\n    Money opening_balance = 6;           // \u6708\u521d\u6b8b\u9ad8\n    Money debit_amount = 7;              // \u501f\u65b9\u91d1\u984d\n    Money credit_amount = 8;             // \u8cb8\u65b9\u91d1\u984d\n    Money closing_balance = 9;           // \u6708\u672b\u6b8b\u9ad8\n    Money closing_debit_balance = 10;    // \u6c7a\u7b97\u501f\u65b9\u91d1\u984d\n    Money closing_credit_balance = 11;   // \u6c7a\u7b97\u8cb8\u65b9\u91d1\u984d\n}\n\n// \u6b8b\u9ad8\u30b5\u30de\u30ea\u30fc\nmessage BalanceSummary {\n    string account_code = 1;\n    string account_name = 2;\n    BsplType bspl_type = 3;\n    ElementType element_type = 4;\n    Money balance = 5;\n    int32 level = 6;\n    bool is_leaf = 7;\n}\n\n// === \u30ea\u30af\u30a8\u30b9\u30c8/\u30ec\u30b9\u30dd\u30f3\u30b9 ===\n\n// \u65e5\u6b21\u6b8b\u9ad8\u53d6\u5f97\nmessage GetDailyBalanceRequest {\n    Date balance_date = 1;\n    string account_code = 2;\n    string sub_account_code = 3;\n    string department_code = 4;\n}\n\nmessage GetDailyBalanceResponse {\n    DailyBalance balance = 1;\n}\n\n// \u65e5\u6b21\u6b8b\u9ad8\u4e00\u89a7\u53d6\u5f97\nmessage ListDailyBalancesRequest {\n    Date balance_date = 1;\n    BsplType bspl_type = 2;\n    ElementType element_type = 3;\n    string department_code = 4;\n    bool posting_accounts_only = 5;      // \u8a08\u4e0a\u79d1\u76ee\u306e\u307f\n}\n\nmessage ListDailyBalancesResponse {\n    repeated DailyBalance balances = 1;\n    Money total_debit = 2;\n    Money total_credit = 3;\n}\n\n// \u6708\u6b21\u6b8b\u9ad8\u53d6\u5f97\nmessage GetMonthlyBalanceRequest {\n    FiscalPeriod fiscal_period = 1;\n    string account_code = 2;\n    string sub_account_code = 3;\n    string department_code = 4;\n}\n\nmessage GetMonthlyBalanceResponse {\n    MonthlyBalance balance = 1;\n}\n\n// \u6708\u6b21\u6b8b\u9ad8\u4e00\u89a7\u53d6\u5f97\nmessage ListMonthlyBalancesRequest {\n    FiscalPeriod fiscal_period = 1;\n    BsplType bspl_type = 2;\n    ElementType element_type = 3;\n    string department_code = 4;\n    bool include_closing = 5;            // \u6c7a\u7b97\u4ed5\u8a33\u542b\u3080\n}\n\nmessage ListMonthlyBalancesResponse {\n    repeated MonthlyBalance balances = 1;\n    Money total_debit = 2;\n    Money total_credit = 3;\n}\n\n// \u52d8\u5b9a\u79d1\u76ee\u5225\u6b8b\u9ad8\u7167\u4f1a\nmessage GetAccountBalanceRequest {\n    string account_code = 1;\n    Date date_from = 2;\n    Date date_to = 3;\n    string sub_account_code = 4;\n    string department_code = 5;\n}\n\nmessage GetAccountBalanceResponse {\n    string account_code = 1;\n    string account_name = 2;\n    Money opening_balance = 3;           // \u671f\u9996\u6b8b\u9ad8\n    Money total_debit = 4;               // \u671f\u9593\u501f\u65b9\u5408\u8a08\n    Money total_credit = 5;              // \u671f\u9593\u8cb8\u65b9\u5408\u8a08\n    Money closing_balance = 6;           // \u671f\u672b\u6b8b\u9ad8\n    repeated DailyBalance daily_movements = 7;  // \u65e5\u5225\u63a8\u79fb\n}\n\n// \u6b8b\u9ad8\u30b5\u30de\u30ea\u30fc\u53d6\u5f97\uff08\u8a66\u7b97\u8868\u7528\uff09\nmessage GetBalanceSummaryRequest {\n    Date as_of_date = 1;\n    BsplType bspl_type = 2;\n    bool include_sub_accounts = 3;\n}\n\nmessage GetBalanceSummaryResponse {\n    repeated BalanceSummary summaries = 1;\n    Money bs_total_debit = 2;            // BS\u501f\u65b9\u5408\u8a08\n    Money bs_total_credit = 3;           // BS\u8cb8\u65b9\u5408\u8a08\n    Money pl_total_debit = 4;            // PL\u501f\u65b9\u5408\u8a08\n    Money pl_total_credit = 5;           // PL\u8cb8\u65b9\u5408\u8a08\n}\n\n// \u6b8b\u9ad8\u66f4\u65b0\uff08\u4ed5\u8a33\u8ee2\u8a18\u6642\uff09\nmessage UpdateBalanceRequest {\n    string slip_number = 1;\n}\n\nmessage UpdateBalanceResponse {\n    bool success = 1;\n    int32 updated_daily_records = 2;\n    int32 updated_monthly_records = 3;\n}\n\n// === \u30b5\u30fc\u30d3\u30b9\u5b9a\u7fa9 ===\n\nservice BalanceService {\n    // \u5358\u9805 RPC\n    rpc GetDailyBalance(GetDailyBalanceRequest) returns (GetDailyBalanceResponse);\n    rpc GetMonthlyBalance(GetMonthlyBalanceRequest) returns (GetMonthlyBalanceResponse);\n    rpc GetAccountBalance(GetAccountBalanceRequest) returns (GetAccountBalanceResponse);\n    rpc GetBalanceSummary(GetBalanceSummaryRequest) returns (GetBalanceSummaryResponse);\n    rpc UpdateBalance(UpdateBalanceRequest) returns (UpdateBalanceResponse);\n\n    // \u30b5\u30fc\u30d0\u30fc\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 RPC\n    rpc ListDailyBalances(ListDailyBalancesRequest) returns (stream DailyBalance);\n    rpc ListMonthlyBalances(ListMonthlyBalancesRequest) returns (stream MonthlyBalance);\n\n    // \u53cc\u65b9\u5411\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\uff08\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u6b8b\u9ad8\u76e3\u8996\uff09\n    rpc WatchBalance(stream GetAccountBalanceRequest) returns (stream GetAccountBalanceResponse);\n}\n</code></pre>"},{"location":"article/study/study3-3/#24-grpc","title":"\u7b2c 24 \u7ae0\uff1agRPC \u30b5\u30fc\u30d3\u30b9\u5b9f\u88c5","text":""},{"location":"article/study/study3-3/#241","title":"24.1 \u52d8\u5b9a\u79d1\u76ee\u30b5\u30fc\u30d3\u30b9\u5b9f\u88c5","text":"GrpcAccountService.java <pre><code>package com.example.accounting.infrastructure.in.grpc.service;\n\nimport com.example.accounting.application.port.in.AccountUseCase;\nimport com.example.accounting.domain.model.account.Account;\nimport com.example.accounting.domain.model.account.AccountCode;\nimport com.example.accounting.domain.exception.ResourceNotFoundException;\nimport com.example.accounting.infrastructure.in.grpc.converter.AccountConverter;\nimport com.example.accounting.infrastructure.in.grpc.proto.*;\nimport io.grpc.Status;\nimport io.grpc.stub.StreamObserver;\nimport net.devh.boot.grpc.server.service.GrpcService;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport java.util.List;\nimport java.util.concurrent.atomic.AtomicInteger;\n\n/**\n * \u52d8\u5b9a\u79d1\u76ee gRPC \u30b5\u30fc\u30d3\u30b9\u5b9f\u88c5\n */\n@GrpcService\npublic class GrpcAccountService extends AccountServiceGrpc.AccountServiceImplBase {\n\n    private static final Logger log = LoggerFactory.getLogger(GrpcAccountService.class);\n\n    private final AccountUseCase accountUseCase;\n    private final AccountConverter converter;\n\n    public GrpcAccountService(AccountUseCase accountUseCase, AccountConverter converter) {\n        this.accountUseCase = accountUseCase;\n        this.converter = converter;\n    }\n\n    /**\n     * \u5358\u9805 RPC: \u52d8\u5b9a\u79d1\u76ee\u53d6\u5f97\n     */\n    @Override\n    public void getAccount(GetAccountRequest request,\n                           StreamObserver&lt;GetAccountResponse&gt; responseObserver) {\n        log.info(\"getAccount: {}\", request.getAccountCode());\n\n        try {\n            AccountCode code = new AccountCode(request.getAccountCode());\n            Account account = accountUseCase.findByCode(code)\n                .orElseThrow(() -&gt; new ResourceNotFoundException(\n                    \"\u52d8\u5b9a\u79d1\u76ee\", request.getAccountCode()));\n\n            GetAccountResponse response = GetAccountResponse.newBuilder()\n                .setAccount(converter.toProto(account))\n                .build();\n\n            responseObserver.onNext(response);\n            responseObserver.onCompleted();\n\n        } catch (ResourceNotFoundException e) {\n            log.warn(\"Account not found: {}\", request.getAccountCode());\n            responseObserver.onError(\n                Status.NOT_FOUND\n                    .withDescription(\"\u52d8\u5b9a\u79d1\u76ee\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + request.getAccountCode())\n                    .asRuntimeException()\n            );\n        } catch (Exception e) {\n            log.error(\"Error getting account\", e);\n            responseObserver.onError(\n                Status.INTERNAL\n                    .withDescription(\"\u5185\u90e8\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\")\n                    .withCause(e)\n                    .asRuntimeException()\n            );\n        }\n    }\n\n    /**\n     * \u5358\u9805 RPC: \u52d8\u5b9a\u79d1\u76ee\u767b\u9332\n     */\n    @Override\n    public void createAccount(CreateAccountRequest request,\n                              StreamObserver&lt;CreateAccountResponse&gt; responseObserver) {\n        log.info(\"createAccount: {}\", request.getAccountCode());\n\n        try {\n            Account account = converter.toDomain(request);\n            Account created = accountUseCase.create(account);\n\n            CreateAccountResponse response = CreateAccountResponse.newBuilder()\n                .setAccount(converter.toProto(created))\n                .build();\n\n            responseObserver.onNext(response);\n            responseObserver.onCompleted();\n\n        } catch (IllegalArgumentException e) {\n            log.warn(\"Invalid request: {}\", e.getMessage());\n            responseObserver.onError(\n                Status.INVALID_ARGUMENT\n                    .withDescription(e.getMessage())\n                    .asRuntimeException()\n            );\n        } catch (Exception e) {\n            log.error(\"Error creating account\", e);\n            responseObserver.onError(\n                Status.INTERNAL\n                    .withDescription(\"\u5185\u90e8\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\")\n                    .asRuntimeException()\n            );\n        }\n    }\n\n    /**\n     * \u30b5\u30fc\u30d0\u30fc\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 RPC: \u52d8\u5b9a\u79d1\u76ee\u4e00\u89a7\u53d6\u5f97\n     */\n    @Override\n    public void listAccounts(ListAccountsRequest request,\n                             StreamObserver&lt;com.example.accounting.infrastructure.in.grpc.proto.Account&gt; responseObserver) {\n        log.info(\"listAccounts: bsplType={}, keyword={}\",\n                 request.getBsplType(), request.getKeyword());\n\n        try {\n            List&lt;Account&gt; accounts = accountUseCase.findAll(\n                converter.toCriteria(request)\n            );\n\n            // \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u3067\u52d8\u5b9a\u79d1\u76ee\u30921\u4ef6\u305a\u3064\u9001\u4fe1\n            for (Account account : accounts) {\n                responseObserver.onNext(converter.toProto(account));\n            }\n\n            responseObserver.onCompleted();\n            log.info(\"listAccounts completed: {} items\", accounts.size());\n\n        } catch (Exception e) {\n            log.error(\"Error listing accounts\", e);\n            responseObserver.onError(\n                Status.INTERNAL\n                    .withDescription(\"\u5185\u90e8\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\")\n                    .asRuntimeException()\n            );\n        }\n    }\n\n    /**\n     * \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 RPC: \u52d8\u5b9a\u79d1\u76ee\u4e00\u62ec\u767b\u9332\n     */\n    @Override\n    public StreamObserver&lt;BulkCreateAccountRequest&gt; bulkCreateAccounts(\n            StreamObserver&lt;BulkCreateAccountResponse&gt; responseObserver) {\n\n        log.info(\"bulkCreateAccounts: started\");\n\n        AtomicInteger successCount = new AtomicInteger(0);\n        AtomicInteger failureCount = new AtomicInteger(0);\n        List&lt;ErrorDetail&gt; errors = new java.util.ArrayList&lt;&gt;();\n\n        return new StreamObserver&lt;BulkCreateAccountRequest&gt;() {\n            @Override\n            public void onNext(BulkCreateAccountRequest request) {\n                try {\n                    CreateAccountRequest accountRequest = request.getAccount();\n                    Account account = converter.toDomain(accountRequest);\n                    accountUseCase.create(account);\n                    successCount.incrementAndGet();\n                    log.debug(\"Created account: {}\", accountRequest.getAccountCode());\n\n                } catch (Exception e) {\n                    failureCount.incrementAndGet();\n                    errors.add(ErrorDetail.newBuilder()\n                        .setField(request.getAccount().getAccountCode())\n                        .setMessage(e.getMessage())\n                        .build());\n                    log.warn(\"Failed to create account: {}\",\n                             request.getAccount().getAccountCode(), e);\n                }\n            }\n\n            @Override\n            public void onError(Throwable t) {\n                log.error(\"bulkCreateAccounts error\", t);\n            }\n\n            @Override\n            public void onCompleted() {\n                BulkCreateAccountResponse response = BulkCreateAccountResponse.newBuilder()\n                    .setSuccessCount(successCount.get())\n                    .setFailureCount(failureCount.get())\n                    .addAllErrors(errors)\n                    .build();\n\n                responseObserver.onNext(response);\n                responseObserver.onCompleted();\n\n                log.info(\"bulkCreateAccounts completed: success={}, failure={}\",\n                         successCount.get(), failureCount.get());\n            }\n        };\n    }\n\n    /**\n     * \u52d8\u5b9a\u79d1\u76ee\u30c4\u30ea\u30fc\u53d6\u5f97\n     */\n    @Override\n    public void getAccountTree(GetAccountTreeRequest request,\n                               StreamObserver&lt;GetAccountTreeResponse&gt; responseObserver) {\n        log.info(\"getAccountTree: bsplType={}\", request.getBsplType());\n\n        try {\n            var tree = accountUseCase.getAccountTree(\n                converter.toDomainBsplType(request.getBsplType())\n            );\n\n            GetAccountTreeResponse response = GetAccountTreeResponse.newBuilder()\n                .addAllNodes(converter.toProtoTree(tree))\n                .build();\n\n            responseObserver.onNext(response);\n            responseObserver.onCompleted();\n\n        } catch (Exception e) {\n            log.error(\"Error getting account tree\", e);\n            responseObserver.onError(\n                Status.INTERNAL\n                    .withDescription(\"\u5185\u90e8\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\")\n                    .asRuntimeException()\n            );\n        }\n    }\n}\n</code></pre>"},{"location":"article/study/study3-3/#242","title":"24.2 \u4ed5\u8a33\u30b5\u30fc\u30d3\u30b9\u5b9f\u88c5","text":"GrpcJournalService.java <pre><code>package com.example.accounting.infrastructure.in.grpc.service;\n\nimport com.example.accounting.application.port.in.JournalUseCase;\nimport com.example.accounting.domain.model.journal.Journal;\nimport com.example.accounting.domain.model.journal.SlipNumber;\nimport com.example.accounting.domain.exception.ResourceNotFoundException;\nimport com.example.accounting.domain.exception.BalanceNotMatchException;\nimport com.example.accounting.infrastructure.in.grpc.converter.JournalConverter;\nimport com.example.accounting.infrastructure.in.grpc.proto.*;\nimport io.grpc.Status;\nimport io.grpc.stub.StreamObserver;\nimport net.devh.boot.grpc.server.service.GrpcService;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport java.util.List;\nimport java.util.concurrent.atomic.AtomicInteger;\n\n/**\n * \u4ed5\u8a33 gRPC \u30b5\u30fc\u30d3\u30b9\u5b9f\u88c5\n */\n@GrpcService\npublic class GrpcJournalService extends JournalServiceGrpc.JournalServiceImplBase {\n\n    private static final Logger log = LoggerFactory.getLogger(GrpcJournalService.class);\n\n    private final JournalUseCase journalUseCase;\n    private final JournalConverter converter;\n\n    public GrpcJournalService(JournalUseCase journalUseCase, JournalConverter converter) {\n        this.journalUseCase = journalUseCase;\n        this.converter = converter;\n    }\n\n    /**\n     * \u5358\u9805 RPC: \u4ed5\u8a33\u53d6\u5f97\n     */\n    @Override\n    public void getJournal(GetJournalRequest request,\n                           StreamObserver&lt;GetJournalResponse&gt; responseObserver) {\n        log.info(\"getJournal: {}\", request.getSlipNumber());\n\n        try {\n            SlipNumber slipNumber = new SlipNumber(request.getSlipNumber());\n            Journal journal = journalUseCase.findBySlipNumber(slipNumber)\n                .orElseThrow(() -&gt; new ResourceNotFoundException(\n                    \"\u4ed5\u8a33\", request.getSlipNumber()));\n\n            GetJournalResponse response = GetJournalResponse.newBuilder()\n                .setJournal(converter.toProto(journal))\n                .build();\n\n            responseObserver.onNext(response);\n            responseObserver.onCompleted();\n\n        } catch (ResourceNotFoundException e) {\n            log.warn(\"Journal not found: {}\", request.getSlipNumber());\n            responseObserver.onError(\n                Status.NOT_FOUND\n                    .withDescription(\"\u4ed5\u8a33\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + request.getSlipNumber())\n                    .asRuntimeException()\n            );\n        } catch (Exception e) {\n            log.error(\"Error getting journal\", e);\n            responseObserver.onError(\n                Status.INTERNAL\n                    .withDescription(\"\u5185\u90e8\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\")\n                    .asRuntimeException()\n            );\n        }\n    }\n\n    /**\n     * \u5358\u9805 RPC: \u4ed5\u8a33\u767b\u9332\n     */\n    @Override\n    public void createJournal(CreateJournalRequest request,\n                              StreamObserver&lt;CreateJournalResponse&gt; responseObserver) {\n        log.info(\"createJournal: date={}\", request.getJournalDate());\n\n        try {\n            Journal journal = converter.toDomain(request);\n            Journal created = journalUseCase.create(journal);\n\n            CreateJournalResponse response = CreateJournalResponse.newBuilder()\n                .setJournal(converter.toProto(created))\n                .build();\n\n            responseObserver.onNext(response);\n            responseObserver.onCompleted();\n\n        } catch (BalanceNotMatchException e) {\n            log.warn(\"Balance not match: {}\", e.getMessage());\n            responseObserver.onError(\n                Status.FAILED_PRECONDITION\n                    .withDescription(\"\u8cb8\u501f\u304c\u4e00\u81f4\u3057\u307e\u305b\u3093: \" + e.getMessage())\n                    .asRuntimeException()\n            );\n        } catch (IllegalArgumentException e) {\n            log.warn(\"Invalid request: {}\", e.getMessage());\n            responseObserver.onError(\n                Status.INVALID_ARGUMENT\n                    .withDescription(e.getMessage())\n                    .asRuntimeException()\n            );\n        } catch (Exception e) {\n            log.error(\"Error creating journal\", e);\n            responseObserver.onError(\n                Status.INTERNAL\n                    .withDescription(\"\u5185\u90e8\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\")\n                    .asRuntimeException()\n            );\n        }\n    }\n\n    /**\n     * \u5358\u9805 RPC: \u4ed5\u8a33\u53d6\u6d88\uff08\u8d64\u9ed2\u51e6\u7406\uff09\n     */\n    @Override\n    public void cancelJournal(CancelJournalRequest request,\n                              StreamObserver&lt;CancelJournalResponse&gt; responseObserver) {\n        log.info(\"cancelJournal: {}\", request.getSlipNumber());\n\n        try {\n            SlipNumber slipNumber = new SlipNumber(request.getSlipNumber());\n            var result = journalUseCase.cancel(slipNumber, request.getCancelReason());\n\n            CancelJournalResponse response = CancelJournalResponse.newBuilder()\n                .setOriginalJournal(converter.toProto(result.getOriginal()))\n                .setReversalJournal(converter.toProto(result.getReversal()))\n                .build();\n\n            responseObserver.onNext(response);\n            responseObserver.onCompleted();\n\n        } catch (ResourceNotFoundException e) {\n            log.warn(\"Journal not found for cancel: {}\", request.getSlipNumber());\n            responseObserver.onError(\n                Status.NOT_FOUND\n                    .withDescription(\"\u53d6\u6d88\u5bfe\u8c61\u306e\u4ed5\u8a33\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + request.getSlipNumber())\n                    .asRuntimeException()\n            );\n        } catch (Exception e) {\n            log.error(\"Error canceling journal\", e);\n            responseObserver.onError(\n                Status.INTERNAL\n                    .withDescription(\"\u5185\u90e8\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\")\n                    .asRuntimeException()\n            );\n        }\n    }\n\n    /**\n     * \u30b5\u30fc\u30d0\u30fc\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 RPC: \u4ed5\u8a33\u4e00\u89a7\u53d6\u5f97\n     */\n    @Override\n    public void listJournals(ListJournalsRequest request,\n                             StreamObserver&lt;com.example.accounting.infrastructure.in.grpc.proto.Journal&gt; responseObserver) {\n        log.info(\"listJournals: dateFrom={}, dateTo={}\",\n                 request.getDateFrom(), request.getDateTo());\n\n        try {\n            List&lt;Journal&gt; journals = journalUseCase.findAll(\n                converter.toCriteria(request)\n            );\n\n            // \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u3067\u4ed5\u8a33\u30921\u4ef6\u305a\u3064\u9001\u4fe1\n            for (Journal journal : journals) {\n                responseObserver.onNext(converter.toProto(journal));\n            }\n\n            responseObserver.onCompleted();\n            log.info(\"listJournals completed: {} items\", journals.size());\n\n        } catch (Exception e) {\n            log.error(\"Error listing journals\", e);\n            responseObserver.onError(\n                Status.INTERNAL\n                    .withDescription(\"\u5185\u90e8\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\")\n                    .asRuntimeException()\n            );\n        }\n    }\n\n    /**\n     * \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 RPC: \u4ed5\u8a33\u4e00\u62ec\u767b\u9332\n     */\n    @Override\n    public StreamObserver&lt;BulkCreateJournalRequest&gt; bulkCreateJournals(\n            StreamObserver&lt;BulkCreateJournalResponse&gt; responseObserver) {\n\n        log.info(\"bulkCreateJournals: started\");\n\n        AtomicInteger successCount = new AtomicInteger(0);\n        AtomicInteger failureCount = new AtomicInteger(0);\n        List&lt;ErrorDetail&gt; errors = new java.util.ArrayList&lt;&gt;();\n        List&lt;String&gt; createdSlipNumbers = new java.util.ArrayList&lt;&gt;();\n\n        return new StreamObserver&lt;BulkCreateJournalRequest&gt;() {\n            @Override\n            public void onNext(BulkCreateJournalRequest request) {\n                try {\n                    CreateJournalRequest journalRequest = request.getJournal();\n                    Journal journal = converter.toDomain(journalRequest);\n                    Journal created = journalUseCase.create(journal);\n                    successCount.incrementAndGet();\n                    createdSlipNumbers.add(created.getSlipNumber().getValue());\n                    log.debug(\"Created journal: {}\", created.getSlipNumber().getValue());\n\n                } catch (Exception e) {\n                    failureCount.incrementAndGet();\n                    errors.add(ErrorDetail.newBuilder()\n                        .setField(\"journal\")\n                        .setMessage(e.getMessage())\n                        .build());\n                    log.warn(\"Failed to create journal\", e);\n                }\n            }\n\n            @Override\n            public void onError(Throwable t) {\n                log.error(\"bulkCreateJournals error\", t);\n            }\n\n            @Override\n            public void onCompleted() {\n                BulkCreateJournalResponse response = BulkCreateJournalResponse.newBuilder()\n                    .setSuccessCount(successCount.get())\n                    .setFailureCount(failureCount.get())\n                    .addAllErrors(errors)\n                    .addAllCreatedSlipNumbers(createdSlipNumbers)\n                    .build();\n\n                responseObserver.onNext(response);\n                responseObserver.onCompleted();\n\n                log.info(\"bulkCreateJournals completed: success={}, failure={}\",\n                         successCount.get(), failureCount.get());\n            }\n        };\n    }\n\n    /**\n     * \u5358\u9805 RPC: \u8cb8\u501f\u30d0\u30e9\u30f3\u30b9\u30c1\u30a7\u30c3\u30af\n     */\n    @Override\n    public void validateBalance(ValidateBalanceRequest request,\n                                StreamObserver&lt;ValidateBalanceResponse&gt; responseObserver) {\n        log.info(\"validateBalance\");\n\n        try {\n            var result = journalUseCase.validateBalance(\n                converter.toDetailDomainList(request.getDetailsList())\n            );\n\n            ValidateBalanceResponse response = ValidateBalanceResponse.newBuilder()\n                .setIsBalanced(result.isBalanced())\n                .setTotalDebit(converter.toProtoMoney(result.getTotalDebit()))\n                .setTotalCredit(converter.toProtoMoney(result.getTotalCredit()))\n                .setDifference(converter.toProtoMoney(result.getDifference()))\n                .build();\n\n            responseObserver.onNext(response);\n            responseObserver.onCompleted();\n\n        } catch (Exception e) {\n            log.error(\"Error validating balance\", e);\n            responseObserver.onError(\n                Status.INTERNAL\n                    .withDescription(\"\u5185\u90e8\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\")\n                    .asRuntimeException()\n            );\n        }\n    }\n}\n</code></pre>"},{"location":"article/study/study3-3/#243","title":"24.3 \u30b3\u30f3\u30d0\u30fc\u30bf\u30fc\u5b9f\u88c5","text":"AccountConverter.java <pre><code>package com.example.accounting.infrastructure.in.grpc.converter;\n\nimport com.example.accounting.domain.model.account.*;\nimport com.example.accounting.infrastructure.in.grpc.proto.*;\nimport org.springframework.stereotype.Component;\n\nimport java.util.List;\nimport java.util.stream.Collectors;\n\n/**\n * \u52d8\u5b9a\u79d1\u76ee\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb \u21d4 Protocol Buffers \u5909\u63db\n */\n@Component\npublic class AccountConverter {\n\n    /**\n     * \u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb \u2192 Proto\n     */\n    public com.example.accounting.infrastructure.in.grpc.proto.Account toProto(Account domain) {\n        return com.example.accounting.infrastructure.in.grpc.proto.Account.newBuilder()\n            .setAccountCode(domain.getAccountCode().getValue())\n            .setAccountName(domain.getAccountName())\n            .setBsplType(toProtoBsplType(domain.getBsplType()))\n            .setDebitCreditType(toProtoDebitCreditType(domain.getDebitCreditType()))\n            .setElementType(toProtoElementType(domain.getElementType()))\n            .setAggregationType(toProtoAggregationType(domain.getAggregationType()))\n            .setParentAccountCode(nullToEmpty(domain.getParentAccountCode()))\n            .setAccountPath(nullToEmpty(domain.getAccountPath()))\n            .setDisplayOrder(domain.getDisplayOrder())\n            .setIsActive(domain.isActive())\n            .build();\n    }\n\n    /**\n     * CreateAccountRequest \u2192 \u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\n     */\n    public Account toDomain(CreateAccountRequest request) {\n        return Account.builder()\n            .accountCode(new AccountCode(request.getAccountCode()))\n            .accountName(request.getAccountName())\n            .bsplType(toDomainBsplType(request.getBsplType()))\n            .debitCreditType(toDomainDebitCreditType(request.getDebitCreditType()))\n            .elementType(toDomainElementType(request.getElementType()))\n            .aggregationType(toDomainAggregationType(request.getAggregationType()))\n            .parentAccountCode(emptyToNull(request.getParentAccountCode()))\n            .displayOrder(request.getDisplayOrder())\n            .isActive(true)\n            .build();\n    }\n\n    /**\n     * ListAccountsRequest \u2192 \u691c\u7d22\u6761\u4ef6\n     */\n    public AccountSearchCriteria toCriteria(ListAccountsRequest request) {\n        return AccountSearchCriteria.builder()\n            .bsplType(request.hasBsplType()\n                ? toDomainBsplType(request.getBsplType()) : null)\n            .elementType(request.hasElementType()\n                ? toDomainElementType(request.getElementType()) : null)\n            .aggregationType(request.hasAggregationType()\n                ? toDomainAggregationType(request.getAggregationType()) : null)\n            .keyword(emptyToNull(request.getKeyword()))\n            .activeOnly(request.getActiveOnly())\n            .page(request.hasPage() ? request.getPage().getPage() : 0)\n            .size(request.hasPage() ? request.getPage().getSize() : 20)\n            .build();\n    }\n\n    /**\n     * \u30c4\u30ea\u30fc\u69cb\u9020\u3092 Proto \u306b\u5909\u63db\n     */\n    public List&lt;AccountNode&gt; toProtoTree(List&lt;AccountTreeNode&gt; tree) {\n        return tree.stream()\n            .map(this::toProtoNode)\n            .collect(Collectors.toList());\n    }\n\n    private AccountNode toProtoNode(AccountTreeNode node) {\n        AccountNode.Builder builder = AccountNode.newBuilder()\n            .setAccount(toProto(node.getAccount()));\n\n        if (node.getChildren() != null &amp;&amp; !node.getChildren().isEmpty()) {\n            builder.addAllChildren(\n                node.getChildren().stream()\n                    .map(this::toProtoNode)\n                    .collect(Collectors.toList())\n            );\n        }\n\n        return builder.build();\n    }\n\n    // === \u533a\u5206\u5909\u63db ===\n\n    public BsplType toProtoBsplType(\n            com.example.accounting.domain.model.account.BsplType domain) {\n        return switch (domain) {\n            case BS -&gt; BsplType.BSPL_TYPE_BS;\n            case PL -&gt; BsplType.BSPL_TYPE_PL;\n        };\n    }\n\n    public com.example.accounting.domain.model.account.BsplType toDomainBsplType(\n            BsplType proto) {\n        return switch (proto) {\n            case BSPL_TYPE_BS -&gt; com.example.accounting.domain.model.account.BsplType.BS;\n            case BSPL_TYPE_PL -&gt; com.example.accounting.domain.model.account.BsplType.PL;\n            default -&gt; throw new IllegalArgumentException(\"Unknown BSPL type: \" + proto);\n        };\n    }\n\n    private DebitCreditType toProtoDebitCreditType(\n            com.example.accounting.domain.model.account.DebitCreditType domain) {\n        return switch (domain) {\n            case DEBIT -&gt; DebitCreditType.DEBIT_CREDIT_TYPE_DEBIT;\n            case CREDIT -&gt; DebitCreditType.DEBIT_CREDIT_TYPE_CREDIT;\n        };\n    }\n\n    private com.example.accounting.domain.model.account.DebitCreditType toDomainDebitCreditType(\n            DebitCreditType proto) {\n        return switch (proto) {\n            case DEBIT_CREDIT_TYPE_DEBIT -&gt;\n                com.example.accounting.domain.model.account.DebitCreditType.DEBIT;\n            case DEBIT_CREDIT_TYPE_CREDIT -&gt;\n                com.example.accounting.domain.model.account.DebitCreditType.CREDIT;\n            default -&gt; throw new IllegalArgumentException(\"Unknown debit/credit type: \" + proto);\n        };\n    }\n\n    private ElementType toProtoElementType(\n            com.example.accounting.domain.model.account.ElementType domain) {\n        return switch (domain) {\n            case ASSET -&gt; ElementType.ELEMENT_TYPE_ASSET;\n            case LIABILITY -&gt; ElementType.ELEMENT_TYPE_LIABILITY;\n            case EQUITY -&gt; ElementType.ELEMENT_TYPE_EQUITY;\n            case REVENUE -&gt; ElementType.ELEMENT_TYPE_REVENUE;\n            case EXPENSE -&gt; ElementType.ELEMENT_TYPE_EXPENSE;\n        };\n    }\n\n    private com.example.accounting.domain.model.account.ElementType toDomainElementType(\n            ElementType proto) {\n        return switch (proto) {\n            case ELEMENT_TYPE_ASSET -&gt;\n                com.example.accounting.domain.model.account.ElementType.ASSET;\n            case ELEMENT_TYPE_LIABILITY -&gt;\n                com.example.accounting.domain.model.account.ElementType.LIABILITY;\n            case ELEMENT_TYPE_EQUITY -&gt;\n                com.example.accounting.domain.model.account.ElementType.EQUITY;\n            case ELEMENT_TYPE_REVENUE -&gt;\n                com.example.accounting.domain.model.account.ElementType.REVENUE;\n            case ELEMENT_TYPE_EXPENSE -&gt;\n                com.example.accounting.domain.model.account.ElementType.EXPENSE;\n            default -&gt; throw new IllegalArgumentException(\"Unknown element type: \" + proto);\n        };\n    }\n\n    private AggregationType toProtoAggregationType(\n            com.example.accounting.domain.model.account.AggregationType domain) {\n        return switch (domain) {\n            case HEADING -&gt; AggregationType.AGGREGATION_TYPE_HEADING;\n            case SUMMARY -&gt; AggregationType.AGGREGATION_TYPE_SUMMARY;\n            case POSTING -&gt; AggregationType.AGGREGATION_TYPE_POSTING;\n        };\n    }\n\n    private com.example.accounting.domain.model.account.AggregationType toDomainAggregationType(\n            AggregationType proto) {\n        return switch (proto) {\n            case AGGREGATION_TYPE_HEADING -&gt;\n                com.example.accounting.domain.model.account.AggregationType.HEADING;\n            case AGGREGATION_TYPE_SUMMARY -&gt;\n                com.example.accounting.domain.model.account.AggregationType.SUMMARY;\n            case AGGREGATION_TYPE_POSTING -&gt;\n                com.example.accounting.domain.model.account.AggregationType.POSTING;\n            default -&gt; throw new IllegalArgumentException(\"Unknown aggregation type: \" + proto);\n        };\n    }\n\n    // === \u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3 ===\n\n    private String nullToEmpty(String value) {\n        return value == null ? \"\" : value;\n    }\n\n    private String emptyToNull(String value) {\n        return value == null || value.isEmpty() ? null : value;\n    }\n}\n</code></pre>"},{"location":"article/study/study3-3/#25-grpc","title":"\u7b2c 25 \u7ae0\uff1agRPC \u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc","text":""},{"location":"article/study/study3-3/#251","title":"25.1 \u30ed\u30b0\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc","text":"LoggingInterceptor.java <pre><code>package com.example.accounting.infrastructure.in.grpc.interceptor;\n\nimport io.grpc.*;\nimport net.devh.boot.grpc.server.interceptor.GrpcGlobalServerInterceptor;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.slf4j.MDC;\n\nimport java.util.UUID;\n\n/**\n * gRPC \u30ed\u30b0\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\n */\n@GrpcGlobalServerInterceptor\npublic class LoggingInterceptor implements ServerInterceptor {\n\n    private static final Logger log = LoggerFactory.getLogger(LoggingInterceptor.class);\n\n    @Override\n    public &lt;ReqT, RespT&gt; ServerCall.Listener&lt;ReqT&gt; interceptCall(\n            ServerCall&lt;ReqT, RespT&gt; call,\n            Metadata headers,\n            ServerCallHandler&lt;ReqT, RespT&gt; next) {\n\n        String requestId = UUID.randomUUID().toString();\n        String methodName = call.getMethodDescriptor().getFullMethodName();\n        long startTime = System.currentTimeMillis();\n\n        MDC.put(\"requestId\", requestId);\n        log.info(\"gRPC Request: method={}\", methodName);\n\n        return new ForwardingServerCallListener.SimpleForwardingServerCallListener&lt;ReqT&gt;(\n                next.startCall(\n                    new ForwardingServerCall.SimpleForwardingServerCall&lt;ReqT, RespT&gt;(call) {\n                        @Override\n                        public void close(Status status, Metadata trailers) {\n                            long duration = System.currentTimeMillis() - startTime;\n                            log.info(\"gRPC Response: method={}, status={}, duration={}ms\",\n                                     methodName, status.getCode(), duration);\n                            MDC.clear();\n                            super.close(status, trailers);\n                        }\n                    },\n                    headers\n                )\n        ) {\n            @Override\n            public void onMessage(ReqT message) {\n                log.debug(\"gRPC Request message: {}\", message);\n                super.onMessage(message);\n            }\n        };\n    }\n}\n</code></pre>"},{"location":"article/study/study3-3/#252","title":"25.2 \u4f8b\u5916\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc","text":"ExceptionInterceptor.java <pre><code>package com.example.accounting.infrastructure.in.grpc.interceptor;\n\nimport com.example.accounting.domain.exception.BusinessException;\nimport com.example.accounting.domain.exception.ResourceNotFoundException;\nimport com.example.accounting.domain.exception.ValidationException;\nimport com.example.accounting.domain.exception.BalanceNotMatchException;\nimport io.grpc.*;\nimport net.devh.boot.grpc.server.interceptor.GrpcGlobalServerInterceptor;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\n/**\n * gRPC \u4f8b\u5916\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\n */\n@GrpcGlobalServerInterceptor\npublic class ExceptionInterceptor implements ServerInterceptor {\n\n    private static final Logger log = LoggerFactory.getLogger(ExceptionInterceptor.class);\n\n    @Override\n    public &lt;ReqT, RespT&gt; ServerCall.Listener&lt;ReqT&gt; interceptCall(\n            ServerCall&lt;ReqT, RespT&gt; call,\n            Metadata headers,\n            ServerCallHandler&lt;ReqT, RespT&gt; next) {\n\n        return new ExceptionHandlingListener&lt;&gt;(\n            next.startCall(call, headers),\n            call\n        );\n    }\n\n    private class ExceptionHandlingListener&lt;ReqT, RespT&gt;\n            extends ForwardingServerCallListener.SimpleForwardingServerCallListener&lt;ReqT&gt; {\n\n        private final ServerCall&lt;ReqT, RespT&gt; call;\n\n        protected ExceptionHandlingListener(\n                ServerCall.Listener&lt;ReqT&gt; delegate,\n                ServerCall&lt;ReqT, RespT&gt; call) {\n            super(delegate);\n            this.call = call;\n        }\n\n        @Override\n        public void onHalfClose() {\n            try {\n                super.onHalfClose();\n            } catch (Exception e) {\n                handleException(e);\n            }\n        }\n\n        private void handleException(Exception e) {\n            Status status;\n            String message;\n\n            if (e instanceof ResourceNotFoundException) {\n                status = Status.NOT_FOUND;\n                message = e.getMessage();\n                log.warn(\"Resource not found: {}\", message);\n\n            } else if (e instanceof ValidationException) {\n                status = Status.INVALID_ARGUMENT;\n                message = e.getMessage();\n                log.warn(\"Validation error: {}\", message);\n\n            } else if (e instanceof BalanceNotMatchException) {\n                status = Status.FAILED_PRECONDITION;\n                message = e.getMessage();\n                log.warn(\"Balance not match: {}\", message);\n\n            } else if (e instanceof BusinessException) {\n                status = Status.FAILED_PRECONDITION;\n                message = e.getMessage();\n                log.warn(\"Business rule violation: {}\", message);\n\n            } else if (e instanceof IllegalArgumentException) {\n                status = Status.INVALID_ARGUMENT;\n                message = e.getMessage();\n                log.warn(\"Invalid argument: {}\", message);\n\n            } else {\n                status = Status.INTERNAL;\n                message = \"\u5185\u90e8\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\";\n                log.error(\"Internal error\", e);\n            }\n\n            call.close(status.withDescription(message), new Metadata());\n        }\n    }\n}\n</code></pre>"},{"location":"article/study/study3-3/#26","title":"\u7b2c 26 \u7ae0\uff1a\u52d5\u4f5c\u78ba\u8a8d\u3068\u30c6\u30b9\u30c8","text":""},{"location":"article/study/study3-3/#261-grpcurl","title":"26.1 grpcurl \u306b\u3088\u308b\u52d5\u4f5c\u78ba\u8a8d","text":"<pre><code># \u30b5\u30fc\u30d0\u30fc\u8d77\u52d5\u78ba\u8a8d\uff08\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u7d4c\u7531\uff09\ngrpcurl -plaintext localhost:9090 list\n\n# \u52d8\u5b9a\u79d1\u76ee\u30b5\u30fc\u30d3\u30b9\u306e\u30e1\u30bd\u30c3\u30c9\u4e00\u89a7\ngrpcurl -plaintext localhost:9090 list com.example.accounting.AccountService\n\n# \u52d8\u5b9a\u79d1\u76ee\u53d6\u5f97\ngrpcurl -plaintext -d '{\"account_code\": \"1110\"}' \\\n  localhost:9090 com.example.accounting.AccountService/GetAccount\n\n# \u52d8\u5b9a\u79d1\u76ee\u767b\u9332\ngrpcurl -plaintext -d '{\n  \"account_code\": \"1111\",\n  \"account_name\": \"\u666e\u901a\u9810\u91d1\uff08\u307f\u305a\u307b\u9280\u884c\uff09\",\n  \"bspl_type\": \"BSPL_TYPE_BS\",\n  \"debit_credit_type\": \"DEBIT_CREDIT_TYPE_DEBIT\",\n  \"element_type\": \"ELEMENT_TYPE_ASSET\",\n  \"aggregation_type\": \"AGGREGATION_TYPE_POSTING\",\n  \"parent_account_code\": \"1110\",\n  \"display_order\": 10\n}' localhost:9090 com.example.accounting.AccountService/CreateAccount\n\n# \u52d8\u5b9a\u79d1\u76ee\u4e00\u89a7\u53d6\u5f97\uff08\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\uff09\ngrpcurl -plaintext -d '{\n  \"bspl_type\": \"BSPL_TYPE_BS\",\n  \"active_only\": true\n}' localhost:9090 com.example.accounting.AccountService/ListAccounts\n\n# \u4ed5\u8a33\u767b\u9332\ngrpcurl -plaintext -d '{\n  \"journal_date\": {\"year\": 2025, \"month\": 1, \"day\": 15},\n  \"summary\": \"\u58f2\u4e0a\u8a08\u4e0a\",\n  \"journal_type\": \"JOURNAL_TYPE_NORMAL\",\n  \"details\": [{\n    \"line_number\": 1,\n    \"line_summary\": \"A\u793e\u3078\u306e\u58f2\u4e0a\",\n    \"debit_credit_details\": [\n      {\n        \"debit_credit_type\": \"DEBIT_CREDIT_TYPE_DEBIT\",\n        \"account_code\": \"1310\",\n        \"amount\": {\"units\": 110000, \"currency\": \"JPY\"}\n      },\n      {\n        \"debit_credit_type\": \"DEBIT_CREDIT_TYPE_CREDIT\",\n        \"account_code\": \"4100\",\n        \"amount\": {\"units\": 100000, \"currency\": \"JPY\"}\n      },\n      {\n        \"debit_credit_type\": \"DEBIT_CREDIT_TYPE_CREDIT\",\n        \"account_code\": \"2110\",\n        \"amount\": {\"units\": 10000, \"currency\": \"JPY\"}\n      }\n    ]\n  }]\n}' localhost:9090 com.example.accounting.JournalService/CreateJournal\n\n# \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\ngrpcurl -plaintext localhost:9090 grpc.health.v1.Health/Check\n</code></pre>"},{"location":"article/study/study3-3/#262","title":"26.2 \u7d71\u5408\u30c6\u30b9\u30c8","text":"GrpcAccountServiceTest.java <pre><code>package com.example.accounting.infrastructure.in.grpc.service;\n\nimport com.example.accounting.application.port.in.AccountUseCase;\nimport com.example.accounting.domain.model.account.*;\nimport com.example.accounting.infrastructure.in.grpc.converter.AccountConverter;\nimport com.example.accounting.infrastructure.in.grpc.proto.*;\nimport io.grpc.StatusRuntimeException;\nimport net.devh.boot.grpc.client.inject.GrpcClient;\nimport org.junit.jupiter.api.*;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.boot.test.mock.mockito.MockBean;\nimport org.springframework.test.context.ActiveProfiles;\n\nimport java.util.Iterator;\nimport java.util.List;\nimport java.util.Optional;\n\nimport static org.assertj.core.api.Assertions.*;\nimport static org.mockito.ArgumentMatchers.any;\nimport static org.mockito.Mockito.*;\n\n@SpringBootTest(properties = {\n    \"grpc.server.port=9091\",\n    \"grpc.server.in-process-name=test\"\n})\n@ActiveProfiles(\"test\")\nclass GrpcAccountServiceTest {\n\n    @MockBean\n    private AccountUseCase accountUseCase;\n\n    @GrpcClient(\"inProcess\")\n    private AccountServiceGrpc.AccountServiceBlockingStub blockingStub;\n\n    private Account sampleAccount;\n\n    @BeforeEach\n    void setUp() {\n        sampleAccount = Account.builder()\n            .accountCode(new AccountCode(\"1110\"))\n            .accountName(\"\u73fe\u91d1\")\n            .bsplType(com.example.accounting.domain.model.account.BsplType.BS)\n            .debitCreditType(\n                com.example.accounting.domain.model.account.DebitCreditType.DEBIT)\n            .elementType(\n                com.example.accounting.domain.model.account.ElementType.ASSET)\n            .aggregationType(\n                com.example.accounting.domain.model.account.AggregationType.POSTING)\n            .isActive(true)\n            .build();\n    }\n\n    @Test\n    @DisplayName(\"\u52d8\u5b9a\u79d1\u76ee\u53d6\u5f97 - \u5b58\u5728\u3059\u308b\u79d1\u76ee\u3092\u53d6\u5f97\u3067\u304d\u308b\u3053\u3068\")\n    void getAccount_found() {\n        // Given\n        when(accountUseCase.findByCode(any(AccountCode.class)))\n            .thenReturn(Optional.of(sampleAccount));\n\n        GetAccountRequest request = GetAccountRequest.newBuilder()\n            .setAccountCode(\"1110\")\n            .build();\n\n        // When\n        GetAccountResponse response = blockingStub.getAccount(request);\n\n        // Then\n        assertThat(response.getAccount().getAccountCode()).isEqualTo(\"1110\");\n        assertThat(response.getAccount().getAccountName()).isEqualTo(\"\u73fe\u91d1\");\n        assertThat(response.getAccount().getBsplType())\n            .isEqualTo(BsplType.BSPL_TYPE_BS);\n    }\n\n    @Test\n    @DisplayName(\"\u52d8\u5b9a\u79d1\u76ee\u53d6\u5f97 - \u5b58\u5728\u3057\u306a\u3044\u79d1\u76ee\u306f NOT_FOUND\")\n    void getAccount_notFound() {\n        // Given\n        when(accountUseCase.findByCode(any(AccountCode.class)))\n            .thenReturn(Optional.empty());\n\n        GetAccountRequest request = GetAccountRequest.newBuilder()\n            .setAccountCode(\"9999\")\n            .build();\n\n        // When &amp; Then\n        assertThatThrownBy(() -&gt; blockingStub.getAccount(request))\n            .isInstanceOf(StatusRuntimeException.class)\n            .satisfies(e -&gt; {\n                StatusRuntimeException sre = (StatusRuntimeException) e;\n                assertThat(sre.getStatus().getCode())\n                    .isEqualTo(io.grpc.Status.NOT_FOUND.getCode());\n            });\n    }\n\n    @Test\n    @DisplayName(\"\u52d8\u5b9a\u79d1\u76ee\u4e00\u89a7\u53d6\u5f97 - \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u3067\u53d6\u5f97\u3067\u304d\u308b\u3053\u3068\")\n    void listAccounts_streaming() {\n        // Given\n        List&lt;Account&gt; accounts = List.of(\n            sampleAccount,\n            Account.builder()\n                .accountCode(new AccountCode(\"1120\"))\n                .accountName(\"\u666e\u901a\u9810\u91d1\")\n                .bsplType(com.example.accounting.domain.model.account.BsplType.BS)\n                .debitCreditType(\n                    com.example.accounting.domain.model.account.DebitCreditType.DEBIT)\n                .elementType(\n                    com.example.accounting.domain.model.account.ElementType.ASSET)\n                .aggregationType(\n                    com.example.accounting.domain.model.account.AggregationType.POSTING)\n                .isActive(true)\n                .build()\n        );\n        when(accountUseCase.findAll(any())).thenReturn(accounts);\n\n        ListAccountsRequest request = ListAccountsRequest.newBuilder()\n            .setBsplType(BsplType.BSPL_TYPE_BS)\n            .setActiveOnly(true)\n            .build();\n\n        // When\n        Iterator&lt;com.example.accounting.infrastructure.in.grpc.proto.Account&gt; iterator =\n            blockingStub.listAccounts(request);\n\n        // Then\n        int count = 0;\n        while (iterator.hasNext()) {\n            com.example.accounting.infrastructure.in.grpc.proto.Account account = iterator.next();\n            assertThat(account.getAccountCode()).matches(\"11\\\\d+\");\n            count++;\n        }\n        assertThat(count).isEqualTo(2);\n    }\n}\n</code></pre>"},{"location":"article/study/study3-3/#27","title":"\u7b2c 27 \u7ae0\uff1a\u307e\u3068\u3081","text":""},{"location":"article/study/study3-3/#271","title":"27.1 \u5b66\u7fd2\u3057\u305f\u5185\u5bb9","text":"<ol> <li>gRPC \u306e\u57fa\u672c\u6982\u5ff5: Protocol Buffers\u3001HTTP/2\u30014 \u3064\u306e RPC \u30d1\u30bf\u30fc\u30f3</li> <li>REST/GraphQL \u3068\u306e\u6bd4\u8f03: \u7528\u9014\u306b\u5fdc\u3058\u305f\u9069\u5207\u306a\u9078\u629e</li> <li>\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3068\u306e\u7d71\u5408: Input Adapter \u3068\u3057\u3066 gRPC \u30b5\u30fc\u30d3\u30b9\u3092\u8ffd\u52a0</li> <li>\u6280\u8853\u30b9\u30bf\u30c3\u30af: grpc-spring-boot-starter\u3001Protocol Buffers</li> <li>Protocol Buffers \u5b9a\u7fa9: \u5171\u901a\u578b\u3001\u52d8\u5b9a\u79d1\u76ee\u3001\u4ed5\u8a33\u3001\u6b8b\u9ad8\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3068\u30b5\u30fc\u30d3\u30b9\u5b9a\u7fa9</li> <li>gRPC \u30b5\u30fc\u30d3\u30b9\u5b9f\u88c5: \u5358\u9805 RPC\u3001\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 RPC</li> <li>\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc: \u30ed\u30b0\u3001\u4f8b\u5916\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0</li> <li>\u30c6\u30b9\u30c8: gRPC \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u4f7f\u7528\u3057\u305f\u7d71\u5408\u30c6\u30b9\u30c8</li> </ol>"},{"location":"article/study/study3-3/#272-grpc","title":"27.2 gRPC \u304c\u9069\u3059\u308b\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9","text":"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9 \u7406\u7531 \u57fa\u5e79\u30b7\u30b9\u30c6\u30e0\u9023\u643a \u9ad8\u6027\u80fd\u306a\u30d0\u30a4\u30ca\u30ea\u901a\u4fe1 \u5927\u91cf\u4ed5\u8a33\u4e00\u62ec\u767b\u9332 \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u6b8b\u9ad8\u76e3\u8996 \u53cc\u65b9\u5411\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 \u6708\u6b21\u7de0\u3081\u9032\u6357\u901a\u77e5 \u30b5\u30fc\u30d0\u30fc\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 \u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u9593\u901a\u4fe1 \u578b\u5b89\u5168\u306a API \u5b9a\u7fa9"},{"location":"article/study/study3-3/#273-api","title":"27.3 API \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u9078\u629e\u30ac\u30a4\u30c9","text":""},{"location":"article/study/study3-3/#274","title":"27.4 \u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<ul> <li>gRPC-Web \u306b\u3088\u308b Web \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u5bfe\u5fdc</li> <li>\u8a8d\u8a3c\u30fb\u8a8d\u53ef\uff08JWT \u30c8\u30fc\u30af\u30f3\u691c\u8a3c\uff09</li> <li>\u30ed\u30fc\u30c9\u30d0\u30e9\u30f3\u30b7\u30f3\u30b0\u3068\u30b5\u30fc\u30d3\u30b9\u30e1\u30c3\u30b7\u30e5</li> <li>Observability\uff08\u30e1\u30c8\u30ea\u30af\u30b9\u3001\u30c8\u30ec\u30fc\u30b7\u30f3\u30b0\uff09</li> </ul>"},{"location":"article/study/study3-4/","title":"\u7814\u7a76 4\uff1aGraphQL \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":""},{"location":"article/study/study3-4/#_1","title":"\u306f\u3058\u3081\u306b","text":"<p>\u672c\u30d1\u30fc\u30c8\u3067\u306f\u3001REST API \u3084 gRPC \u3068\u306f\u7570\u306a\u308b\u30a2\u30d7\u30ed\u30fc\u30c1\u3068\u3057\u3066\u3001GraphQL \u306b\u3088\u308b\u8ca1\u52d9\u4f1a\u8a08\u30b7\u30b9\u30c6\u30e0\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u5fc5\u8981\u306a\u30c7\u30fc\u30bf\u3092\u6b63\u78ba\u306b\u6307\u5b9a\u3067\u304d\u308b\u67d4\u8edf\u306a\u30af\u30a8\u30ea\u3068\u3001\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u66f4\u65b0\u3092\u5b9f\u73fe\u3059\u308b Subscription \u3092\u6d3b\u7528\u3057\u307e\u3059\u3002</p> <p>\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u30c9\u30e1\u30a4\u30f3\u5c64\u30fb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff09\u306f\u305d\u306e\u307e\u307e\u5171\u6709\u3057\u3001Input Adapter \u3068\u3057\u3066 GraphQL \u30ea\u30be\u30eb\u30d0\u5c64\u306e\u307f\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p>"},{"location":"article/study/study3-4/#22-graphql","title":"\u7b2c 22 \u7ae0\uff1aGraphQL \u30b5\u30fc\u30d0\u30fc\u306e\u57fa\u790e","text":""},{"location":"article/study/study3-4/#221-graphql","title":"22.1 GraphQL \u3068\u306f","text":"<p>GraphQL \u306f Facebook \u304c\u958b\u767a\u3057\u305f\u30af\u30a8\u30ea\u8a00\u8a9e\u304a\u3088\u3073\u5b9f\u884c\u30a8\u30f3\u30b8\u30f3\u3067\u3059\u3002\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u5fc5\u8981\u306a\u30c7\u30fc\u30bf\u306e\u5f62\u72b6\u3092\u6307\u5b9a\u3067\u304d\u3001Over-fetching\uff08\u4e0d\u8981\u306a\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\uff09\u3084 Under-fetching\uff08\u5fc5\u8981\u306a\u30c7\u30fc\u30bf\u306e\u4e0d\u8db3\uff09\u3092\u9632\u304e\u307e\u3059\u3002</p> <p></p> <p>REST API / gRPC / GraphQL \u306e\u6bd4\u8f03\uff1a</p> \u7279\u5fb4 REST API gRPC GraphQL \u30d7\u30ed\u30c8\u30b3\u30eb HTTP/1.1 HTTP/2 HTTP/1.1 or HTTP/2 \u30c7\u30fc\u30bf\u5f62\u5f0f JSON Protocol Buffers JSON \u30b9\u30ad\u30fc\u30de OpenAPI (\u4efb\u610f) .proto (\u5fc5\u9808) .graphqls (\u5fc5\u9808) \u30c7\u30fc\u30bf\u53d6\u5f97 \u56fa\u5b9a\u30ec\u30b9\u30dd\u30f3\u30b9 \u56fa\u5b9a\u30ec\u30b9\u30dd\u30f3\u30b9 \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u6307\u5b9a \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 \u8907\u6570 \u8907\u6570 \u5358\u4e00 \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0 WebSocket \u5225\u5b9f\u88c5 \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 Subscription \u4e3b\u306a\u7528\u9014 \u6c4e\u7528 API \u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9 \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u5411\u3051"},{"location":"article/study/study3-4/#222-3","title":"22.2 3 \u3064\u306e\u64cd\u4f5c\u30bf\u30a4\u30d7","text":"<p>GraphQL \u306f 3 \u3064\u306e\u64cd\u4f5c\u30bf\u30a4\u30d7\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u307e\u3059\uff1a</p> <p></p> <p>\u7528\u9014\uff1a</p> <ol> <li>Query: \u30c7\u30fc\u30bf\u53d6\u5f97\uff08\u52d8\u5b9a\u79d1\u76ee\u4e00\u89a7\u3001\u4ed5\u8a33\u7167\u4f1a\u3001\u6b8b\u9ad8\u7167\u4f1a\uff09</li> <li>Mutation: \u30c7\u30fc\u30bf\u66f4\u65b0\uff08\u4ed5\u8a33\u767b\u9332\u3001\u4ed5\u8a33\u53d6\u6d88\u3001\u6c7a\u7b97\u4ed5\u8a33\uff09</li> <li>Subscription: \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u901a\u77e5\uff08\u6b8b\u9ad8\u5909\u52d5\u3001\u4ed5\u8a33\u767b\u9332\u901a\u77e5\uff09</li> </ol>"},{"location":"article/study/study3-4/#223-graphql","title":"22.3 GraphQL \u306b\u304a\u3051\u308b\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":"<p>GraphQL \u3092\u5c0e\u5165\u3057\u3066\u3082\u3001\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u30c9\u30e1\u30a4\u30f3\u5c64\u30fb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff09\u306f\u305d\u306e\u307e\u307e\u5171\u6709\u3057\u3001Input Adapter \u3068\u3057\u3066 GraphQL \u30ea\u30be\u30eb\u30d0\u5c64\u306e\u307f\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/study/study3-4/#224","title":"22.4 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210","text":"<p>\u65e2\u5b58\u306e\u69cb\u6210\u306b <code>infrastructure/graphql/</code> \u3092\u8ffd\u52a0\u3059\u308b\u3060\u3051\u3067\u3059\u3002</p> <pre><code>src/main/java/com/example/accounting/\n\u251c\u2500\u2500 domain/                     # \u30c9\u30e1\u30a4\u30f3\u5c64\uff08API\u7248\u3068\u5171\u901a\uff09\n\u2502   \u251c\u2500\u2500 model/\n\u2502   \u2502   \u251c\u2500\u2500 account/\n\u2502   \u2502   \u251c\u2500\u2500 journal/\n\u2502   \u2502   \u251c\u2500\u2500 balance/\n\u2502   \u2502   \u2514\u2500\u2500 report/\n\u2502   \u2514\u2500\u2500 exception/\n\u2502\n\u251c\u2500\u2500 application/               # \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff08API\u7248\u3068\u5171\u901a\uff09\n\u2502   \u251c\u2500\u2500 port/\n\u2502   \u2502   \u251c\u2500\u2500 in/               # Input Port\uff08\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\uff09\n\u2502   \u2502   \u2514\u2500\u2500 out/              # Output Port\uff08\u30ea\u30dd\u30b8\u30c8\u30ea\uff09\n\u2502   \u2514\u2500\u2500 service/\n\u2502\n\u251c\u2500\u2500 infrastructure/\n\u2502   \u251c\u2500\u2500 persistence/          # Output Adapter\uff08DB\u5b9f\u88c5\uff09- \u65e2\u5b58\n\u2502   \u2502   \u251c\u2500\u2500 mapper/\n\u2502   \u2502   \u2514\u2500\u2500 repository/\n\u2502   \u251c\u2500\u2500 rest/                 # Input Adapter\uff08REST\u5b9f\u88c5\uff09- \u65e2\u5b58\n\u2502   \u251c\u2500\u2500 grpc/                 # Input Adapter\uff08gRPC\u5b9f\u88c5\uff09- \u65e2\u5b58\n\u2502   \u2514\u2500\u2500 graphql/              # Input Adapter\uff08GraphQL\u5b9f\u88c5\uff09- \u65b0\u898f\u8ffd\u52a0\n\u2502       \u251c\u2500\u2500 resolver/         # Query/Mutation \u30ea\u30be\u30eb\u30d0\n\u2502       \u251c\u2500\u2500 dataloader/       # N+1 \u554f\u984c\u5bfe\u7b56\n\u2502       \u251c\u2500\u2500 scalar/           # \u30ab\u30b9\u30bf\u30e0\u30b9\u30ab\u30e9\u30fc\u578b\n\u2502       \u2514\u2500\u2500 subscription/     # Subscription \u30cf\u30f3\u30c9\u30e9\n\u2502\n\u251c\u2500\u2500 config/\n\u2502\n\u2514\u2500\u2500 src/main/resources/\n    \u2514\u2500\u2500 graphql/              # GraphQL \u30b9\u30ad\u30fc\u30de\u5b9a\u7fa9\n        \u251c\u2500\u2500 schema.graphqls\n        \u251c\u2500\u2500 account.graphqls\n        \u251c\u2500\u2500 journal.graphqls\n        \u251c\u2500\u2500 balance.graphqls\n        \u2514\u2500\u2500 report.graphqls\n</code></pre>"},{"location":"article/study/study3-4/#225","title":"22.5 \u6280\u8853\u30b9\u30bf\u30c3\u30af\u306e\u8ffd\u52a0","text":"<p>\u65e2\u5b58\u306e <code>build.gradle.kts</code> \u306b GraphQL \u95a2\u9023\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> build.gradle.kts\uff08\u5dee\u5206\uff09 <pre><code>dependencies {\n    // \u65e2\u5b58\u306e\u4f9d\u5b58\u95a2\u4fc2\uff08Spring Boot, MyBatis, PostgreSQL\u7b49\uff09\u306f\u305d\u306e\u307e\u307e\n\n    // GraphQL \u95a2\u9023\u3092\u8ffd\u52a0\n    implementation(\"org.springframework.boot:spring-boot-starter-graphql\")\n    implementation(\"org.springframework.boot:spring-boot-starter-websocket\")  // Subscription \u7528\n\n    // GraphQL \u62e1\u5f35\n    implementation(\"com.graphql-java:graphql-java-extended-scalars:21.0\")\n\n    // Test\n    testImplementation(\"org.springframework.graphql:spring-graphql-test\")\n}\n</code></pre> <p>\u8ffd\u52a0\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u8aac\u660e\uff1a</p> \u30d1\u30c3\u30b1\u30fc\u30b8 \u7528\u9014 spring-boot-starter-graphql Spring Boot GraphQL \u7d71\u5408 spring-boot-starter-websocket Subscription (WebSocket) graphql-java-extended-scalars DateTime, BigDecimal \u7b49\u306e\u30b9\u30ab\u30e9\u30fc\u578b spring-graphql-test GraphQL \u30c6\u30b9\u30c8\u30b5\u30dd\u30fc\u30c8"},{"location":"article/study/study3-4/#226-graphql","title":"22.6 GraphQL \u8a2d\u5b9a","text":"application.yml\uff08\u5dee\u5206\uff09 <pre><code>spring:\n  graphql:\n    graphiql:\n      enabled: true\n      path: /graphiql\n    websocket:\n      path: /graphql\n    schema:\n      printer:\n        enabled: true\n      locations:\n        - classpath:graphql/\n    cors:\n      allowed-origins: \"*\"\n      allowed-methods: GET, POST\n</code></pre> GraphQLConfig.java <pre><code>package com.example.accounting.config;\n\nimport graphql.scalars.ExtendedScalars;\nimport graphql.schema.idl.RuntimeWiring;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.graphql.execution.RuntimeWiringConfigurer;\n\n/**\n * GraphQL \u8a2d\u5b9a\n */\n@Configuration\npublic class GraphQLConfig {\n\n    @Bean\n    public RuntimeWiringConfigurer runtimeWiringConfigurer() {\n        return wiringBuilder -&gt; wiringBuilder\n            .scalar(ExtendedScalars.Date)\n            .scalar(ExtendedScalars.DateTime)\n            .scalar(ExtendedScalars.GraphQLBigDecimal)\n            .scalar(ExtendedScalars.GraphQLLong);\n    }\n}\n</code></pre>"},{"location":"article/study/study3-4/#23-graphql","title":"\u7b2c 23 \u7ae0\uff1aGraphQL \u30b9\u30ad\u30fc\u30de\u306e\u5b9a\u7fa9","text":""},{"location":"article/study/study3-4/#231","title":"23.1 \u30eb\u30fc\u30c8\u30b9\u30ad\u30fc\u30de","text":"src/main/resources/graphql/schema.graphqls <pre><code># \u30eb\u30fc\u30c8\u30b9\u30ad\u30fc\u30de\ntype Query {\n    # \u52d8\u5b9a\u79d1\u76ee\n    account(accountCode: ID!): Account\n    accounts(bsplCategory: BSPLCategory, page: Int, size: Int): AccountConnection!\n    accountHierarchy(accountCode: ID!): [Account!]!\n\n    # \u8ab2\u7a0e\u53d6\u5f15\n    taxTransaction(taxCode: ID!): TaxTransaction\n    taxTransactions: [TaxTransaction!]!\n\n    # \u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\n    accountConfig(accountCode: ID!): AccountConfig\n    accountConfigs(parentPath: String): [AccountConfig!]!\n\n    # \u4ed5\u8a33\n    journal(journalNumber: ID!): Journal\n    journals(fromDate: Date, toDate: Date, accountCode: ID, page: Int, size: Int): JournalConnection!\n\n    # \u6b8b\u9ad8\n    dailyBalance(date: Date!, accountCode: ID!, subAccountCode: ID): DailyBalance\n    dailyBalances(date: Date!, page: Int, size: Int): DailyBalanceConnection!\n\n    monthlyBalance(fiscalYear: Int!, month: Int!, accountCode: ID!, subAccountCode: ID): MonthlyBalance\n    monthlyBalances(fiscalYear: Int!, month: Int!, page: Int, size: Int): MonthlyBalanceConnection!\n\n    # \u5e33\u7968\n    dailyReport(date: Date!): DailyReport!\n    trialBalance(fiscalYear: Int!, month: Int!): TrialBalance!\n    financialStatements(fiscalYear: Int!): FinancialStatements!\n}\n\ntype Mutation {\n    # \u52d8\u5b9a\u79d1\u76ee\n    createAccount(input: CreateAccountInput!): Account!\n    updateAccount(input: UpdateAccountInput!): Account!\n    deleteAccount(accountCode: ID!): Boolean!\n\n    # \u8ab2\u7a0e\u53d6\u5f15\n    createTaxTransaction(input: CreateTaxTransactionInput!): TaxTransaction!\n    updateTaxTransaction(input: UpdateTaxTransactionInput!): TaxTransaction!\n    deleteTaxTransaction(taxCode: ID!): Boolean!\n\n    # \u4ed5\u8a33\n    createJournal(input: CreateJournalInput!): Journal!\n    updateJournal(input: UpdateJournalInput!): Journal!\n    deleteJournal(journalNumber: ID!): Boolean!\n    reverseJournal(journalNumber: ID!, reason: String): Journal!\n\n    # \u6b8b\u9ad8\u66f4\u65b0\n    recalculateDailyBalance(date: Date!): RecalculateResult!\n    recalculateMonthlyBalance(fiscalYear: Int!, month: Int!): RecalculateResult!\n\n    # \u6c7a\u7b97\u51e6\u7406\n    executeClosing(input: ExecuteClosingInput!): ClosingResult!\n}\n\ntype Subscription {\n    # \u6b8b\u9ad8\u5909\u52d5\n    balanceChanged(accountCode: ID): BalanceChange!\n\n    # \u4ed5\u8a33\u767b\u9332\u901a\u77e5\n    journalCreated: JournalNotification!\n\n    # \u6c7a\u7b97\u51e6\u7406\u9032\u6357\n    closingProgressUpdated(closingId: ID!): ClosingProgress!\n}\n\n# \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u5171\u901a\u578b\ntype PageInfo {\n    hasNextPage: Boolean!\n    hasPreviousPage: Boolean!\n    totalElements: Int!\n    totalPages: Int!\n    currentPage: Int!\n}\n\n# \u30ab\u30b9\u30bf\u30e0\u30b9\u30ab\u30e9\u30fc\nscalar Date\nscalar DateTime\nscalar BigDecimal\nscalar Long\n</code></pre>"},{"location":"article/study/study3-4/#232","title":"23.2 \u52d8\u5b9a\u79d1\u76ee\u30b9\u30ad\u30fc\u30de","text":"src/main/resources/graphql/account.graphqls <pre><code># BSPL\u533a\u5206\nenum BSPLCategory {\n    BS      # \u8cb8\u501f\u5bfe\u7167\u8868\n    PL      # \u640d\u76ca\u8a08\u7b97\u66f8\n}\n\n# \u8cb8\u501f\u533a\u5206\nenum DebitCreditCategory {\n    DEBIT   # \u501f\u65b9\n    CREDIT  # \u8cb8\u65b9\n}\n\n# \u53d6\u5f15\u8981\u7d20\u533a\u5206\nenum TransactionElementCategory {\n    ASSET       # \u8cc7\u7523\n    LIABILITY   # \u8ca0\u50b5\n    CAPITAL     # \u8cc7\u672c\n    REVENUE     # \u53ce\u76ca\n    EXPENSE     # \u8cbb\u7528\n}\n\n# \u96c6\u8a08\u533a\u5206\nenum AggregationCategory {\n    HEADING     # \u898b\u51fa\u79d1\u76ee\n    SUBTOTAL    # \u96c6\u8a08\u79d1\u76ee\n    POSTING     # \u8a08\u4e0a\u79d1\u76ee\n}\n\n# \u52d8\u5b9a\u79d1\u76ee\ntype Account {\n    accountCode: ID!\n    accountName: String!\n    accountShortName: String\n    accountKana: String\n    bsplCategory: BSPLCategory!\n    debitCreditCategory: DebitCreditCategory!\n    transactionElementCategory: TransactionElementCategory!\n    aggregationCategory: AggregationCategory!\n    managementAccountingCategory: String\n    expenseCategory: String\n    ledgerOutputCategory: String\n    subAccountType: String\n    taxCalculationCategory: String\n    taxTransactionCode: ID\n    dueDateManagementCategory: String\n    createdAt: DateTime!\n    updatedAt: DateTime!\n    updatedBy: String\n\n    # \u95a2\u9023\u30c7\u30fc\u30bf\uff08\u5fc5\u8981\u306a\u5834\u5408\u306e\u307f\u53d6\u5f97\uff09\n    taxTransaction: TaxTransaction\n    accountConfig: AccountConfig\n    childAccounts: [Account!]!\n    dailyBalances(date: Date): [DailyBalance!]!\n    monthlyBalances(fiscalYear: Int, month: Int): [MonthlyBalance!]!\n}\n\n# \u52d8\u5b9a\u79d1\u76ee\u4e00\u89a7\uff08\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u4ed8\u304d\uff09\ntype AccountConnection {\n    edges: [AccountEdge!]!\n    pageInfo: PageInfo!\n}\n\ntype AccountEdge {\n    node: Account!\n    cursor: String!\n}\n\n# \u8ab2\u7a0e\u53d6\u5f15\u30de\u30b9\u30bf\ntype TaxTransaction {\n    taxCode: ID!\n    taxName: String!\n    taxRate: BigDecimal!\n    updatedAt: DateTime!\n    updatedBy: String\n\n    # \u95a2\u9023\u30c7\u30fc\u30bf\n    accounts: [Account!]!\n}\n\n# \u52d8\u5b9a\u79d1\u76ee\u69cb\u6210\u30de\u30b9\u30bf\ntype AccountConfig {\n    accountCode: ID!\n    accountPath: String!\n    updatedAt: DateTime!\n    updatedBy: String\n\n    # \u95a2\u9023\u30c7\u30fc\u30bf\n    account: Account!\n    parentAccount: Account\n    childAccounts: [Account!]!\n}\n\n# \u5165\u529b\u578b\ninput CreateAccountInput {\n    accountCode: ID!\n    accountName: String!\n    accountShortName: String\n    accountKana: String\n    bsplCategory: BSPLCategory!\n    debitCreditCategory: DebitCreditCategory!\n    transactionElementCategory: TransactionElementCategory!\n    aggregationCategory: AggregationCategory!\n    managementAccountingCategory: String\n    expenseCategory: String\n    ledgerOutputCategory: String\n    subAccountType: String\n    taxCalculationCategory: String\n    taxTransactionCode: ID\n    dueDateManagementCategory: String\n}\n\ninput UpdateAccountInput {\n    accountCode: ID!\n    accountName: String\n    accountShortName: String\n    accountKana: String\n    bsplCategory: BSPLCategory\n    debitCreditCategory: DebitCreditCategory\n    transactionElementCategory: TransactionElementCategory\n    aggregationCategory: AggregationCategory\n    managementAccountingCategory: String\n    expenseCategory: String\n    ledgerOutputCategory: String\n    subAccountType: String\n    taxCalculationCategory: String\n    taxTransactionCode: ID\n    dueDateManagementCategory: String\n}\n</code></pre>"},{"location":"article/study/study3-4/#233","title":"23.3 \u4ed5\u8a33\u30b9\u30ad\u30fc\u30de","text":"src/main/resources/graphql/journal.graphqls <pre><code># \u4ed5\u8a33\u4f1d\u7968\u533a\u5206\nenum JournalVoucherType {\n    NORMAL          # \u901a\u5e38\u4ed5\u8a33\n    ADJUSTMENT      # \u8abf\u6574\u4ed5\u8a33\n    CLOSING         # \u6c7a\u7b97\u4ed5\u8a33\n}\n\n# \u4ed5\u8a33\ntype Journal {\n    journalNumber: ID!\n    postingDate: Date!\n    entryDate: Date!\n    isClosingEntry: Boolean!\n    isSingleEntry: Boolean!\n    voucherType: JournalVoucherType!\n    isRecurring: Boolean!\n    employeeCode: String\n    departmentCode: String\n    isReversal: Boolean!\n    reversalJournalNumber: ID\n    createdAt: DateTime!\n    updatedAt: DateTime!\n\n    # \u95a2\u9023\u30c7\u30fc\u30bf\n    details: [JournalDetail!]!\n    department: Department\n    totalDebitAmount: BigDecimal!\n    totalCreditAmount: BigDecimal!\n    isBalanced: Boolean!\n}\n\n# \u4ed5\u8a33\u660e\u7d30\ntype JournalDetail {\n    journalNumber: ID!\n    lineNumber: Int!\n    description: String\n    createdAt: DateTime!\n    updatedAt: DateTime!\n\n    # \u95a2\u9023\u30c7\u30fc\u30bf\n    debitCreditDetails: [JournalDebitCreditDetail!]!\n}\n\n# \u4ed5\u8a33\u8cb8\u501f\u660e\u7d30\ntype JournalDebitCreditDetail {\n    journalNumber: ID!\n    lineNumber: Int!\n    debitCreditCategory: DebitCreditCategory!\n    currencyCode: String\n    exchangeRate: BigDecimal\n    departmentCode: String\n    projectCode: String\n    accountCode: ID!\n    subAccountCode: String\n    amount: BigDecimal!\n    baseAmount: BigDecimal!\n    taxCategory: String\n    taxRate: BigDecimal\n    taxCalculationCategory: String\n    dueDate: Date\n    cashFlowFlag: Boolean\n    segmentCode: String\n    counterAccountCode: String\n    counterSubAccountCode: String\n    tagCode: String\n    tagDescription: String\n    createdAt: DateTime!\n    updatedAt: DateTime!\n\n    # \u95a2\u9023\u30c7\u30fc\u30bf\n    account: Account!\n    counterAccount: Account\n}\n\n# \u4ed5\u8a33\u4e00\u89a7\ntype JournalConnection {\n    edges: [JournalEdge!]!\n    pageInfo: PageInfo!\n}\n\ntype JournalEdge {\n    node: Journal!\n    cursor: String!\n}\n\n# \u4ed5\u8a33\u767b\u9332\u901a\u77e5\u30a4\u30d9\u30f3\u30c8\ntype JournalNotification {\n    journalNumber: ID!\n    postingDate: Date!\n    totalDebitAmount: BigDecimal!\n    totalCreditAmount: BigDecimal!\n    createdBy: String\n    createdAt: DateTime!\n}\n\n# \u5165\u529b\u578b\ninput CreateJournalInput {\n    postingDate: Date!\n    isClosingEntry: Boolean\n    isSingleEntry: Boolean\n    voucherType: JournalVoucherType\n    isRecurring: Boolean\n    employeeCode: String\n    departmentCode: String\n    details: [JournalDetailInput!]!\n}\n\ninput JournalDetailInput {\n    lineNumber: Int!\n    description: String\n    debitCreditDetails: [JournalDebitCreditDetailInput!]!\n}\n\ninput JournalDebitCreditDetailInput {\n    debitCreditCategory: DebitCreditCategory!\n    currencyCode: String\n    exchangeRate: BigDecimal\n    departmentCode: String\n    projectCode: String\n    accountCode: ID!\n    subAccountCode: String\n    amount: BigDecimal!\n    baseAmount: BigDecimal\n    taxCategory: String\n    taxRate: BigDecimal\n    dueDate: Date\n    segmentCode: String\n    counterAccountCode: String\n    tagCode: String\n    tagDescription: String\n}\n</code></pre>"},{"location":"article/study/study3-4/#234","title":"23.4 \u6b8b\u9ad8\u30fb\u5e33\u7968\u30b9\u30ad\u30fc\u30de","text":"src/main/resources/graphql/balance.graphqls <pre><code># \u65e5\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\ntype DailyBalance {\n    postingDate: Date!\n    accountCode: ID!\n    subAccountCode: String\n    departmentCode: String\n    projectCode: String\n    isClosingEntry: Boolean!\n    debitAmount: BigDecimal!\n    creditAmount: BigDecimal!\n    balance: BigDecimal!\n\n    # \u95a2\u9023\u30c7\u30fc\u30bf\n    account: Account!\n}\n\n# \u65e5\u6b21\u6b8b\u9ad8\u4e00\u89a7\ntype DailyBalanceConnection {\n    edges: [DailyBalanceEdge!]!\n    pageInfo: PageInfo!\n}\n\ntype DailyBalanceEdge {\n    node: DailyBalance!\n    cursor: String!\n}\n\n# \u6708\u6b21\u52d8\u5b9a\u79d1\u76ee\u6b8b\u9ad8\ntype MonthlyBalance {\n    fiscalYear: Int!\n    month: Int!\n    accountCode: ID!\n    subAccountCode: String\n    departmentCode: String\n    projectCode: String\n    isClosingEntry: Boolean!\n    beginningBalance: BigDecimal!\n    debitAmount: BigDecimal!\n    creditAmount: BigDecimal!\n    endingBalance: BigDecimal!\n\n    # \u95a2\u9023\u30c7\u30fc\u30bf\n    account: Account!\n}\n\n# \u6b8b\u9ad8\u5909\u52d5\u30a4\u30d9\u30f3\u30c8\ntype BalanceChange {\n    accountCode: ID!\n    accountName: String!\n    changeType: BalanceChangeType!\n    previousBalance: BigDecimal!\n    currentBalance: BigDecimal!\n    changeAmount: BigDecimal!\n    timestamp: DateTime!\n}\n\nenum BalanceChangeType {\n    DEBIT       # \u501f\u65b9\u8a18\u5165\n    CREDIT      # \u8cb8\u65b9\u8a18\u5165\n    ADJUSTMENT  # \u8abf\u6574\n    CLOSING     # \u6c7a\u7b97\n}\n\n# \u518d\u8a08\u7b97\u7d50\u679c\ntype RecalculateResult {\n    processedCount: Int!\n    updatedAccounts: [String!]!\n    timestamp: DateTime!\n}\n</code></pre> src/main/resources/graphql/report.graphqls <pre><code># \u65e5\u8a08\u8868\ntype DailyReport {\n    reportDate: Date!\n    entries: [DailyReportEntry!]!\n    totalDebitAmount: BigDecimal!\n    totalCreditAmount: BigDecimal!\n    generatedAt: DateTime!\n}\n\ntype DailyReportEntry {\n    accountCode: ID!\n    accountName: String!\n    debitAmount: BigDecimal!\n    creditAmount: BigDecimal!\n    balance: BigDecimal!\n}\n\n# \u5408\u8a08\u6b8b\u9ad8\u8a66\u7b97\u8868\ntype TrialBalance {\n    fiscalYear: Int!\n    month: Int!\n    entries: [TrialBalanceEntry!]!\n    totalDebitAmount: BigDecimal!\n    totalCreditAmount: BigDecimal!\n    totalDebitBalance: BigDecimal!\n    totalCreditBalance: BigDecimal!\n    generatedAt: DateTime!\n}\n\ntype TrialBalanceEntry {\n    accountCode: ID!\n    accountName: String!\n    bsplCategory: BSPLCategory!\n    debitAmount: BigDecimal!\n    creditAmount: BigDecimal!\n    debitBalance: BigDecimal!\n    creditBalance: BigDecimal!\n}\n\n# \u8ca1\u52d9\u8af8\u8868\ntype FinancialStatements {\n    fiscalYear: Int!\n    balanceSheet: BalanceSheet!\n    incomeStatement: IncomeStatement!\n    generatedAt: DateTime!\n}\n\n# \u8cb8\u501f\u5bfe\u7167\u8868\ntype BalanceSheet {\n    fiscalYear: Int!\n    assetEntries: [FinancialStatementEntry!]!\n    liabilityEntries: [FinancialStatementEntry!]!\n    capitalEntries: [FinancialStatementEntry!]!\n    totalAssets: BigDecimal!\n    totalLiabilities: BigDecimal!\n    totalCapital: BigDecimal!\n}\n\n# \u640d\u76ca\u8a08\u7b97\u66f8\ntype IncomeStatement {\n    fiscalYear: Int!\n    revenueEntries: [FinancialStatementEntry!]!\n    expenseEntries: [FinancialStatementEntry!]!\n    totalRevenue: BigDecimal!\n    totalExpense: BigDecimal!\n    netIncome: BigDecimal!\n}\n\ntype FinancialStatementEntry {\n    accountCode: ID!\n    accountName: String!\n    level: Int!\n    amount: BigDecimal!\n    isSubtotal: Boolean!\n}\n\n# \u6c7a\u7b97\u51e6\u7406\u7d50\u679c\ntype ClosingResult {\n    closingId: ID!\n    fiscalYear: Int!\n    processedJournalCount: Int!\n    closingJournals: [Journal!]!\n    completedAt: DateTime!\n}\n\n# \u6c7a\u7b97\u51e6\u7406\u9032\u6357\ntype ClosingProgress {\n    closingId: ID!\n    status: ClosingStatus!\n    currentStep: String!\n    processedCount: Int!\n    totalCount: Int!\n    progressPercent: Float!\n    updatedAt: DateTime!\n}\n\nenum ClosingStatus {\n    PROCESSING  # \u51e6\u7406\u4e2d\n    COMPLETED   # \u5b8c\u4e86\n    FAILED      # \u5931\u6557\n}\n</code></pre>"},{"location":"article/study/study3-4/#24-api","title":"\u7b2c 24 \u7ae0\uff1a\u30de\u30b9\u30bf API \u306e\u5b9f\u88c5","text":""},{"location":"article/study/study3-4/#241-query","title":"24.1 Query \u30ea\u30be\u30eb\u30d0","text":"QueryResolver.java <pre><code>package com.example.accounting.infrastructure.graphql.resolver;\n\nimport com.example.accounting.application.port.in.AccountUseCase;\nimport com.example.accounting.application.port.in.JournalUseCase;\nimport com.example.accounting.application.port.in.BalanceUseCase;\nimport com.example.accounting.domain.model.account.Account;\nimport com.example.accounting.domain.model.account.TaxTransaction;\nimport com.example.accounting.domain.model.account.AccountConfig;\nimport com.example.accounting.infrastructure.graphql.dto.*;\nimport org.springframework.graphql.data.method.annotation.Argument;\nimport org.springframework.graphql.data.method.annotation.QueryMapping;\nimport org.springframework.stereotype.Controller;\n\nimport java.util.List;\n\n/**\n * GraphQL Query \u30ea\u30be\u30eb\u30d0\n */\n@Controller\npublic class QueryResolver {\n\n    private final AccountUseCase accountUseCase;\n    private final JournalUseCase journalUseCase;\n    private final BalanceUseCase balanceUseCase;\n\n    public QueryResolver(\n            AccountUseCase accountUseCase,\n            JournalUseCase journalUseCase,\n            BalanceUseCase balanceUseCase) {\n        this.accountUseCase = accountUseCase;\n        this.journalUseCase = journalUseCase;\n        this.balanceUseCase = balanceUseCase;\n    }\n\n    // === \u52d8\u5b9a\u79d1\u76ee ===\n\n    @QueryMapping\n    public Account account(@Argument String accountCode) {\n        return accountUseCase.findByCode(accountCode)\n            .orElse(null);\n    }\n\n    @QueryMapping\n    public AccountConnection accounts(\n            @Argument String bsplCategory,\n            @Argument Integer page,\n            @Argument Integer size) {\n\n        int pageNum = page != null ? page : 0;\n        int pageSize = size != null ? size : 20;\n\n        List&lt;Account&gt; accounts = accountUseCase.findAll(bsplCategory, pageNum, pageSize);\n        long totalCount = accountUseCase.count(bsplCategory);\n\n        return AccountConnection.of(accounts, pageNum, pageSize, totalCount);\n    }\n\n    @QueryMapping\n    public List&lt;Account&gt; accountHierarchy(@Argument String accountCode) {\n        return accountUseCase.findHierarchy(accountCode);\n    }\n\n    // === \u8ab2\u7a0e\u53d6\u5f15 ===\n\n    @QueryMapping\n    public TaxTransaction taxTransaction(@Argument String taxCode) {\n        return accountUseCase.findTaxTransaction(taxCode)\n            .orElse(null);\n    }\n\n    @QueryMapping\n    public List&lt;TaxTransaction&gt; taxTransactions() {\n        return accountUseCase.findAllTaxTransactions();\n    }\n\n    // === \u52d8\u5b9a\u79d1\u76ee\u69cb\u6210 ===\n\n    @QueryMapping\n    public AccountConfig accountConfig(@Argument String accountCode) {\n        return accountUseCase.findAccountConfig(accountCode)\n            .orElse(null);\n    }\n\n    @QueryMapping\n    public List&lt;AccountConfig&gt; accountConfigs(@Argument String parentPath) {\n        if (parentPath != null) {\n            return accountUseCase.findAccountConfigsByPath(parentPath);\n        }\n        return accountUseCase.findAllAccountConfigs();\n    }\n}\n</code></pre>"},{"location":"article/study/study3-4/#242-n1","title":"24.2 N+1 \u554f\u984c\u3068\u306f","text":"<p>GraphQL \u3067\u306f\u3001\u30cd\u30b9\u30c8\u3057\u305f\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\u969b\u306b N+1 \u554f\u984c \u304c\u767a\u751f\u3057\u3084\u3059\u304f\u306a\u308a\u307e\u3059\u3002</p> <p></p>"},{"location":"article/study/study3-4/#243-dataloader","title":"24.3 DataLoader \u306b\u3088\u308b\u89e3\u6c7a","text":"<p>DataLoader \u306f\u3001\u8907\u6570\u306e\u500b\u5225\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u30d0\u30c3\u30c1\u51e6\u7406\u306b\u307e\u3068\u3081\u308b\u3053\u3068\u3067 N+1 \u554f\u984c\u3092\u89e3\u6c7a\u3057\u307e\u3059\u3002</p> <p></p> TaxTransactionDataLoader.java <pre><code>package com.example.accounting.infrastructure.graphql.dataloader;\n\nimport com.example.accounting.application.port.out.AccountRepository;\nimport com.example.accounting.domain.model.account.TaxTransaction;\nimport org.dataloader.BatchLoaderEnvironment;\nimport org.dataloader.MappedBatchLoader;\nimport org.springframework.stereotype.Component;\n\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.concurrent.CompletableFuture;\nimport java.util.concurrent.CompletionStage;\nimport java.util.function.Function;\nimport java.util.stream.Collectors;\n\n/**\n * \u8ab2\u7a0e\u53d6\u5f15\u30c7\u30fc\u30bf\u306e DataLoader\n */\n@Component\npublic class TaxTransactionDataLoader implements MappedBatchLoader&lt;String, TaxTransaction&gt; {\n\n    private final AccountRepository accountRepository;\n\n    public TaxTransactionDataLoader(AccountRepository accountRepository) {\n        this.accountRepository = accountRepository;\n    }\n\n    @Override\n    public CompletionStage&lt;Map&lt;String, TaxTransaction&gt;&gt; load(\n            Set&lt;String&gt; taxCodes,\n            BatchLoaderEnvironment environment) {\n\n        return CompletableFuture.supplyAsync(() -&gt; {\n            return accountRepository.findTaxTransactionsByCodes(taxCodes).stream()\n                .collect(Collectors.toMap(\n                    TaxTransaction::getTaxCode,\n                    Function.identity()\n                ));\n        });\n    }\n}\n</code></pre>"},{"location":"article/study/study3-4/#244","title":"24.4 \u52d8\u5b9a\u79d1\u76ee\u30ea\u30be\u30eb\u30d0\u306e\u5b9f\u88c5","text":"AccountResolver.java <pre><code>package com.example.accounting.infrastructure.graphql.resolver;\n\nimport com.example.accounting.application.port.in.AccountUseCase;\nimport com.example.accounting.config.DataLoaderConfig;\nimport com.example.accounting.domain.model.account.Account;\nimport com.example.accounting.domain.model.account.TaxTransaction;\nimport com.example.accounting.domain.model.account.AccountConfig;\nimport com.example.accounting.domain.model.balance.DailyBalance;\nimport com.example.accounting.infrastructure.graphql.dto.*;\nimport graphql.schema.DataFetchingEnvironment;\nimport org.dataloader.DataLoader;\nimport org.springframework.graphql.data.method.annotation.Argument;\nimport org.springframework.graphql.data.method.annotation.MutationMapping;\nimport org.springframework.graphql.data.method.annotation.QueryMapping;\nimport org.springframework.graphql.data.method.annotation.SchemaMapping;\nimport org.springframework.stereotype.Controller;\n\nimport java.util.List;\nimport java.util.concurrent.CompletableFuture;\n\n/**\n * \u52d8\u5b9a\u79d1\u76ee GraphQL \u30ea\u30be\u30eb\u30d0\n */\n@Controller\npublic class AccountResolver {\n\n    private final AccountUseCase accountUseCase;\n\n    public AccountResolver(AccountUseCase accountUseCase) {\n        this.accountUseCase = accountUseCase;\n    }\n\n    // === Query ===\n\n    @QueryMapping\n    public Account account(@Argument String accountCode) {\n        return accountUseCase.findByCode(accountCode).orElse(null);\n    }\n\n    @QueryMapping\n    public AccountConnection accounts(\n            @Argument String bsplCategory,\n            @Argument Integer page,\n            @Argument Integer size) {\n\n        int pageNum = page != null ? page : 0;\n        int pageSize = size != null ? size : 20;\n\n        List&lt;Account&gt; accounts = accountUseCase.findAll(bsplCategory, pageNum, pageSize);\n        long totalCount = accountUseCase.count(bsplCategory);\n\n        return AccountConnection.of(accounts, pageNum, pageSize, totalCount);\n    }\n\n    // === Mutation ===\n\n    @MutationMapping\n    public Account createAccount(@Argument CreateAccountInput input) {\n        Account account = Account.builder()\n            .accountCode(input.accountCode())\n            .accountName(input.accountName())\n            .accountShortName(input.accountShortName())\n            .bsplCategory(input.bsplCategory())\n            .debitCreditCategory(input.debitCreditCategory())\n            .transactionElementCategory(input.transactionElementCategory())\n            .aggregationCategory(input.aggregationCategory())\n            .taxTransactionCode(input.taxTransactionCode())\n            .build();\n\n        return accountUseCase.create(account);\n    }\n\n    @MutationMapping\n    public boolean deleteAccount(@Argument String accountCode) {\n        return accountUseCase.delete(accountCode);\n    }\n\n    // === \u30d5\u30a3\u30fc\u30eb\u30c9\u30ea\u30be\u30eb\u30d0\uff08DataLoader \u4f7f\u7528\uff09===\n\n    @SchemaMapping(typeName = \"Account\", field = \"taxTransaction\")\n    public CompletableFuture&lt;TaxTransaction&gt; taxTransaction(\n            Account account,\n            DataFetchingEnvironment env) {\n\n        if (account.getTaxTransactionCode() == null) {\n            return CompletableFuture.completedFuture(null);\n        }\n\n        DataLoader&lt;String, TaxTransaction&gt; loader =\n            env.getDataLoader(DataLoaderConfig.TAX_TRANSACTION_LOADER);\n\n        return loader.load(account.getTaxTransactionCode());\n    }\n\n    @SchemaMapping(typeName = \"Account\", field = \"accountConfig\")\n    public CompletableFuture&lt;AccountConfig&gt; accountConfig(\n            Account account,\n            DataFetchingEnvironment env) {\n\n        DataLoader&lt;String, AccountConfig&gt; loader =\n            env.getDataLoader(DataLoaderConfig.ACCOUNT_CONFIG_LOADER);\n\n        return loader.load(account.getAccountCode());\n    }\n\n    @SchemaMapping(typeName = \"Account\", field = \"childAccounts\")\n    public List&lt;Account&gt; childAccounts(Account account) {\n        return accountUseCase.findChildAccounts(account.getAccountCode());\n    }\n}\n</code></pre>"},{"location":"article/study/study3-4/#25-api","title":"\u7b2c 25 \u7ae0\uff1a\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3 API \u306e\u5b9f\u88c5","text":""},{"location":"article/study/study3-4/#251","title":"25.1 \u4ed5\u8a33\u30ea\u30be\u30eb\u30d0\u306e\u5b9f\u88c5","text":"JournalResolver.java <pre><code>package com.example.accounting.infrastructure.graphql.resolver;\n\nimport com.example.accounting.application.port.in.JournalUseCase;\nimport com.example.accounting.config.DataLoaderConfig;\nimport com.example.accounting.domain.model.journal.Journal;\nimport com.example.accounting.domain.model.journal.JournalDetail;\nimport com.example.accounting.domain.model.journal.JournalDebitCreditDetail;\nimport com.example.accounting.domain.model.account.Account;\nimport com.example.accounting.infrastructure.graphql.dto.*;\nimport graphql.schema.DataFetchingEnvironment;\nimport org.dataloader.DataLoader;\nimport org.springframework.graphql.data.method.annotation.Argument;\nimport org.springframework.graphql.data.method.annotation.MutationMapping;\nimport org.springframework.graphql.data.method.annotation.QueryMapping;\nimport org.springframework.graphql.data.method.annotation.SchemaMapping;\nimport org.springframework.stereotype.Controller;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.util.List;\nimport java.util.concurrent.CompletableFuture;\n\n/**\n * \u4ed5\u8a33 GraphQL \u30ea\u30be\u30eb\u30d0\n */\n@Controller\npublic class JournalResolver {\n\n    private final JournalUseCase journalUseCase;\n\n    public JournalResolver(JournalUseCase journalUseCase) {\n        this.journalUseCase = journalUseCase;\n    }\n\n    // === Query ===\n\n    @QueryMapping\n    public Journal journal(@Argument String journalNumber) {\n        return journalUseCase.findByNumber(journalNumber).orElse(null);\n    }\n\n    @QueryMapping\n    public JournalConnection journals(\n            @Argument LocalDate fromDate,\n            @Argument LocalDate toDate,\n            @Argument String accountCode,\n            @Argument Integer page,\n            @Argument Integer size) {\n\n        int pageNum = page != null ? page : 0;\n        int pageSize = size != null ? size : 20;\n\n        List&lt;Journal&gt; journals = journalUseCase.findAll(\n            fromDate, toDate, accountCode, pageNum, pageSize);\n        long totalCount = journalUseCase.count(fromDate, toDate, accountCode);\n\n        return JournalConnection.of(journals, pageNum, pageSize, totalCount);\n    }\n\n    // === Mutation ===\n\n    @MutationMapping\n    public Journal createJournal(@Argument CreateJournalInput input) {\n        Journal journal = Journal.builder()\n            .postingDate(input.postingDate())\n            .entryDate(LocalDate.now())\n            .isClosingEntry(input.isClosingEntry() != null ? input.isClosingEntry() : false)\n            .voucherType(input.voucherType())\n            .employeeCode(input.employeeCode())\n            .departmentCode(input.departmentCode())\n            .details(convertToDetails(input.details()))\n            .build();\n\n        // \u8cb8\u501f\u30d0\u30e9\u30f3\u30b9\u30c1\u30a7\u30c3\u30af\n        validateBalance(journal);\n\n        return journalUseCase.create(journal);\n    }\n\n    @MutationMapping\n    public boolean deleteJournal(@Argument String journalNumber) {\n        return journalUseCase.delete(journalNumber);\n    }\n\n    @MutationMapping\n    public Journal reverseJournal(\n            @Argument String journalNumber,\n            @Argument String reason) {\n        return journalUseCase.reverse(journalNumber, reason);\n    }\n\n    // === \u30d5\u30a3\u30fc\u30eb\u30c9\u30ea\u30be\u30eb\u30d0 ===\n\n    @SchemaMapping(typeName = \"Journal\", field = \"totalDebitAmount\")\n    public BigDecimal totalDebitAmount(Journal journal) {\n        return journal.getDetails().stream()\n            .flatMap(d -&gt; d.getDebitCreditDetails().stream())\n            .filter(dc -&gt; dc.getDebitCreditCategory().isDebit())\n            .map(JournalDebitCreditDetail::getAmount)\n            .reduce(BigDecimal.ZERO, BigDecimal::add);\n    }\n\n    @SchemaMapping(typeName = \"Journal\", field = \"totalCreditAmount\")\n    public BigDecimal totalCreditAmount(Journal journal) {\n        return journal.getDetails().stream()\n            .flatMap(d -&gt; d.getDebitCreditDetails().stream())\n            .filter(dc -&gt; dc.getDebitCreditCategory().isCredit())\n            .map(JournalDebitCreditDetail::getAmount)\n            .reduce(BigDecimal.ZERO, BigDecimal::add);\n    }\n\n    @SchemaMapping(typeName = \"Journal\", field = \"isBalanced\")\n    public boolean isBalanced(Journal journal) {\n        BigDecimal debit = totalDebitAmount(journal);\n        BigDecimal credit = totalCreditAmount(journal);\n        return debit.compareTo(credit) == 0;\n    }\n\n    @SchemaMapping(typeName = \"JournalDebitCreditDetail\", field = \"account\")\n    public CompletableFuture&lt;Account&gt; account(\n            JournalDebitCreditDetail detail,\n            DataFetchingEnvironment env) {\n\n        DataLoader&lt;String, Account&gt; loader =\n            env.getDataLoader(DataLoaderConfig.ACCOUNT_LOADER);\n\n        return loader.load(detail.getAccountCode());\n    }\n\n    // === Private Methods ===\n\n    private void validateBalance(Journal journal) {\n        BigDecimal debit = journal.getDetails().stream()\n            .flatMap(d -&gt; d.getDebitCreditDetails().stream())\n            .filter(dc -&gt; dc.getDebitCreditCategory().isDebit())\n            .map(JournalDebitCreditDetail::getAmount)\n            .reduce(BigDecimal.ZERO, BigDecimal::add);\n\n        BigDecimal credit = journal.getDetails().stream()\n            .flatMap(d -&gt; d.getDebitCreditDetails().stream())\n            .filter(dc -&gt; dc.getDebitCreditCategory().isCredit())\n            .map(JournalDebitCreditDetail::getAmount)\n            .reduce(BigDecimal.ZERO, BigDecimal::add);\n\n        if (debit.compareTo(credit) != 0) {\n            throw new IllegalArgumentException(\n                \"\u8cb8\u501f\u304c\u4e00\u81f4\u3057\u307e\u305b\u3093\u3002\u501f\u65b9\u5408\u8a08: \" + debit + \", \u8cb8\u65b9\u5408\u8a08: \" + credit);\n        }\n    }\n}\n</code></pre>"},{"location":"article/study/study3-4/#252-graphql-subscription","title":"25.2 GraphQL Subscription \u306e\u5b9f\u88c5","text":"<p>GraphQL Subscription \u306f\u3001\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3078\u306e\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u901a\u77e5\u3092\u5b9f\u73fe\u3059\u308b\u4ed5\u7d44\u307f\u3067\u3059\u3002</p> <p></p> SubscriptionResolver.java <pre><code>package com.example.accounting.infrastructure.graphql.subscription;\n\nimport com.example.accounting.domain.event.BalanceChangeEvent;\nimport com.example.accounting.domain.event.JournalCreatedEvent;\nimport com.example.accounting.domain.event.ClosingProgressEvent;\nimport com.example.accounting.infrastructure.graphql.dto.*;\nimport org.springframework.graphql.data.method.annotation.Argument;\nimport org.springframework.graphql.data.method.annotation.SubscriptionMapping;\nimport org.springframework.stereotype.Controller;\nimport reactor.core.publisher.Flux;\n\n/**\n * GraphQL Subscription \u30ea\u30be\u30eb\u30d0\n */\n@Controller\npublic class SubscriptionResolver {\n\n    private final BalanceEventPublisher balanceEventPublisher;\n    private final JournalEventPublisher journalEventPublisher;\n    private final ClosingEventPublisher closingEventPublisher;\n\n    public SubscriptionResolver(\n            BalanceEventPublisher balanceEventPublisher,\n            JournalEventPublisher journalEventPublisher,\n            ClosingEventPublisher closingEventPublisher) {\n        this.balanceEventPublisher = balanceEventPublisher;\n        this.journalEventPublisher = journalEventPublisher;\n        this.closingEventPublisher = closingEventPublisher;\n    }\n\n    @SubscriptionMapping\n    public Flux&lt;BalanceChange&gt; balanceChanged(@Argument String accountCode) {\n        Flux&lt;BalanceChangeEvent&gt; eventFlux = balanceEventPublisher.getEventFlux();\n\n        if (accountCode != null) {\n            eventFlux = eventFlux.filter(event -&gt;\n                accountCode.equals(event.getAccountCode()));\n        }\n\n        return eventFlux.map(this::toBalanceChange);\n    }\n\n    @SubscriptionMapping\n    public Flux&lt;JournalNotification&gt; journalCreated() {\n        return journalEventPublisher.getEventFlux()\n            .map(this::toJournalNotification);\n    }\n\n    @SubscriptionMapping\n    public Flux&lt;ClosingProgress&gt; closingProgressUpdated(@Argument String closingId) {\n        return closingEventPublisher.getEventFlux()\n            .filter(event -&gt; closingId.equals(event.getClosingId()))\n            .map(this::toClosingProgress);\n    }\n\n    private BalanceChange toBalanceChange(BalanceChangeEvent event) {\n        return new BalanceChange(\n            event.getAccountCode(),\n            event.getAccountName(),\n            event.getChangeType(),\n            event.getPreviousBalance(),\n            event.getCurrentBalance(),\n            event.getChangeAmount(),\n            event.getTimestamp()\n        );\n    }\n\n    private JournalNotification toJournalNotification(JournalCreatedEvent event) {\n        return new JournalNotification(\n            event.getJournalNumber(),\n            event.getPostingDate(),\n            event.getTotalDebitAmount(),\n            event.getTotalCreditAmount(),\n            event.getCreatedBy(),\n            event.getCreatedAt()\n        );\n    }\n\n    private ClosingProgress toClosingProgress(ClosingProgressEvent event) {\n        return new ClosingProgress(\n            event.getClosingId(),\n            event.getStatus(),\n            event.getCurrentStep(),\n            event.getProcessedCount(),\n            event.getTotalCount(),\n            event.getProgressPercent(),\n            event.getUpdatedAt()\n        );\n    }\n}\n</code></pre> BalanceEventPublisher.java <pre><code>package com.example.accounting.infrastructure.graphql.subscription;\n\nimport com.example.accounting.domain.event.BalanceChangeEvent;\nimport org.springframework.stereotype.Component;\nimport reactor.core.publisher.Flux;\nimport reactor.core.publisher.Sinks;\n\n/**\n * \u6b8b\u9ad8\u5909\u52d5\u30a4\u30d9\u30f3\u30c8\u30d1\u30d6\u30ea\u30c3\u30b7\u30e3\u30fc\n */\n@Component\npublic class BalanceEventPublisher {\n\n    private final Sinks.Many&lt;BalanceChangeEvent&gt; sink;\n\n    public BalanceEventPublisher() {\n        this.sink = Sinks.many().multicast().onBackpressureBuffer();\n    }\n\n    public void publish(BalanceChangeEvent event) {\n        sink.tryEmitNext(event);\n    }\n\n    public Flux&lt;BalanceChangeEvent&gt; getEventFlux() {\n        return sink.asFlux();\n    }\n}\n</code></pre>"},{"location":"article/study/study3-4/#26","title":"\u7b2c 26 \u7ae0\uff1a\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3068\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3","text":""},{"location":"article/study/study3-4/#261-graphql","title":"26.1 GraphQL \u30a8\u30e9\u30fc\u8a2d\u8a08","text":"<p>GraphQL \u3067\u306f\u3001\u30a8\u30e9\u30fc\u306f <code>errors</code> \u30d5\u30a3\u30fc\u30eb\u30c9\u3068\u3057\u3066\u8fd4\u3055\u308c\u307e\u3059\u3002</p> <p></p>"},{"location":"article/study/study3-4/#262","title":"26.2 \u30ab\u30b9\u30bf\u30e0\u4f8b\u5916\u30af\u30e9\u30b9","text":"AccountingException.java\uff08\u57fa\u5e95\u30af\u30e9\u30b9\uff09 <pre><code>package com.example.accounting.domain.exception;\n\n/**\n * \u8ca1\u52d9\u4f1a\u8a08\u30c9\u30e1\u30a4\u30f3\u4f8b\u5916\u306e\u57fa\u5e95\u30af\u30e9\u30b9\n */\npublic abstract class AccountingException extends RuntimeException {\n\n    private final String errorCode;\n\n    protected AccountingException(String errorCode, String message) {\n        super(message);\n        this.errorCode = errorCode;\n    }\n\n    protected AccountingException(String errorCode, String message, Throwable cause) {\n        super(message, cause);\n        this.errorCode = errorCode;\n    }\n\n    public String getErrorCode() {\n        return errorCode;\n    }\n}\n</code></pre> BalanceNotMatchException.java <pre><code>package com.example.accounting.domain.exception;\n\nimport java.math.BigDecimal;\n\n/**\n * \u8cb8\u501f\u4e0d\u4e00\u81f4\u4f8b\u5916\n */\npublic class BalanceNotMatchException extends AccountingException {\n\n    private final BigDecimal debitTotal;\n    private final BigDecimal creditTotal;\n\n    public BalanceNotMatchException(BigDecimal debitTotal, BigDecimal creditTotal) {\n        super(\"BALANCE_NOT_MATCH\",\n            String.format(\"\u8cb8\u501f\u304c\u4e00\u81f4\u3057\u307e\u305b\u3093\u3002\u501f\u65b9\u5408\u8a08: %s, \u8cb8\u65b9\u5408\u8a08: %s\", debitTotal, creditTotal));\n        this.debitTotal = debitTotal;\n        this.creditTotal = creditTotal;\n    }\n\n    public BigDecimal getDebitTotal() {\n        return debitTotal;\n    }\n\n    public BigDecimal getCreditTotal() {\n        return creditTotal;\n    }\n}\n</code></pre>"},{"location":"article/study/study3-4/#263-graphql","title":"26.3 GraphQL \u4f8b\u5916\u30cf\u30f3\u30c9\u30e9\u30fc","text":"GraphQLExceptionHandler.java <pre><code>package com.example.accounting.infrastructure.graphql.exception;\n\nimport com.example.accounting.domain.exception.*;\nimport graphql.GraphQLError;\nimport graphql.GraphqlErrorBuilder;\nimport graphql.schema.DataFetchingEnvironment;\nimport org.springframework.graphql.execution.DataFetcherExceptionResolverAdapter;\nimport org.springframework.graphql.execution.ErrorType;\nimport org.springframework.stereotype.Component;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\n/**\n * GraphQL \u4f8b\u5916\u30cf\u30f3\u30c9\u30e9\u30fc\n */\n@Component\npublic class GraphQLExceptionHandler extends DataFetcherExceptionResolverAdapter {\n\n    @Override\n    protected GraphQLError resolveToSingleError(Throwable ex, DataFetchingEnvironment env) {\n        if (ex instanceof AccountingException accountingEx) {\n            return handleAccountingException(accountingEx, env);\n        }\n\n        if (ex instanceof IllegalArgumentException) {\n            return GraphqlErrorBuilder.newError(env)\n                .errorType(ErrorType.BAD_REQUEST)\n                .message(ex.getMessage())\n                .build();\n        }\n\n        // \u305d\u306e\u4ed6\u306e\u4f8b\u5916\n        return GraphqlErrorBuilder.newError(env)\n            .errorType(ErrorType.INTERNAL_ERROR)\n            .message(\"\u5185\u90e8\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\")\n            .build();\n    }\n\n    private GraphQLError handleAccountingException(\n            AccountingException ex, DataFetchingEnvironment env) {\n\n        Map&lt;String, Object&gt; extensions = new HashMap&lt;&gt;();\n        extensions.put(\"errorCode\", ex.getErrorCode());\n\n        ErrorType errorType = mapToErrorType(ex);\n\n        // \u4f8b\u5916\u56fa\u6709\u306e\u60c5\u5831\u3092\u8ffd\u52a0\n        if (ex instanceof BalanceNotMatchException balanceEx) {\n            extensions.put(\"debitTotal\", balanceEx.getDebitTotal());\n            extensions.put(\"creditTotal\", balanceEx.getCreditTotal());\n        } else if (ex instanceof AccountNotFoundException accountEx) {\n            extensions.put(\"accountCode\", accountEx.getAccountCode());\n        }\n\n        return GraphqlErrorBuilder.newError(env)\n            .errorType(errorType)\n            .message(ex.getMessage())\n            .extensions(extensions)\n            .build();\n    }\n\n    private ErrorType mapToErrorType(AccountingException ex) {\n        if (ex instanceof AccountNotFoundException ||\n            ex instanceof JournalNotFoundException) {\n            return ErrorType.NOT_FOUND;\n        }\n\n        if (ex instanceof BalanceNotMatchException ||\n            ex instanceof ClosedPeriodException) {\n            return ErrorType.BAD_REQUEST;\n        }\n\n        return ErrorType.INTERNAL_ERROR;\n    }\n}\n</code></pre>"},{"location":"article/study/study3-4/#264-spring-for-graphql","title":"26.4 Spring for GraphQL \u30c6\u30b9\u30c8","text":"AccountResolverTest.java <pre><code>package com.example.accounting.infrastructure.graphql;\n\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.graphql.tester.AutoConfigureHttpGraphQlTester;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.graphql.test.tester.HttpGraphQlTester;\nimport org.springframework.test.context.DynamicPropertyRegistry;\nimport org.springframework.test.context.DynamicPropertySource;\nimport org.testcontainers.containers.PostgreSQLContainer;\nimport org.testcontainers.junit.jupiter.Container;\nimport org.testcontainers.junit.jupiter.Testcontainers;\n\nimport static org.assertj.core.api.Assertions.assertThat;\n\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n@AutoConfigureHttpGraphQlTester\n@Testcontainers\nclass AccountResolverTest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:16-alpine\");\n\n    @DynamicPropertySource\n    static void configureProperties(DynamicPropertyRegistry registry) {\n        registry.add(\"spring.datasource.url\", postgres::getJdbcUrl);\n        registry.add(\"spring.datasource.username\", postgres::getUsername);\n        registry.add(\"spring.datasource.password\", postgres::getPassword);\n    }\n\n    @Autowired\n    private HttpGraphQlTester graphQlTester;\n\n    @Test\n    void testQueryAccount() {\n        // language=GraphQL\n        String query = \"\"\"\n            query {\n                account(accountCode: \"11110\") {\n                    accountCode\n                    accountName\n                    bsplCategory\n                    debitCreditCategory\n                }\n            }\n            \"\"\";\n\n        graphQlTester.document(query)\n            .execute()\n            .path(\"account.accountCode\")\n            .entity(String.class)\n            .isEqualTo(\"11110\");\n    }\n\n    @Test\n    void testMutationCreateAccount() {\n        // language=GraphQL\n        String mutation = \"\"\"\n            mutation {\n                createAccount(input: {\n                    accountCode: \"99999\"\n                    accountName: \"\u30c6\u30b9\u30c8\u79d1\u76ee\"\n                    bsplCategory: BS\n                    debitCreditCategory: DEBIT\n                    transactionElementCategory: ASSET\n                    aggregationCategory: POSTING\n                }) {\n                    accountCode\n                    accountName\n                }\n            }\n            \"\"\";\n\n        graphQlTester.document(mutation)\n            .execute()\n            .path(\"createAccount.accountCode\")\n            .entity(String.class)\n            .isEqualTo(\"99999\");\n    }\n}\n</code></pre>"},{"location":"article/study/study3-4/#265-graphiql","title":"26.5 GraphiQL \u306b\u3088\u308b\u52d5\u4f5c\u78ba\u8a8d","text":"<p>\u30b5\u30fc\u30d0\u30fc\u8d77\u52d5\u5f8c\u3001<code>http://localhost:8080/graphiql</code> \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u5bfe\u8a71\u7684\u306b\u30af\u30a8\u30ea\u3092\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002</p> <pre><code># \u52d8\u5b9a\u79d1\u76ee\u306e\u53d6\u5f97\nquery {\n  account(accountCode: \"11110\") {\n    accountCode\n    accountName\n    bsplCategory\n    debitCreditCategory\n    taxTransaction {\n      taxCode\n      taxName\n      taxRate\n    }\n    dailyBalances {\n      postingDate\n      debitAmount\n      creditAmount\n      balance\n    }\n  }\n}\n\n# \u4ed5\u8a33\u767b\u9332\nmutation {\n  createJournal(input: {\n    postingDate: \"2025-12-29\"\n    voucherType: NORMAL\n    details: [\n      {\n        lineNumber: 1\n        description: \"\u73fe\u91d1\u58f2\u4e0a\"\n        debitCreditDetails: [\n          {\n            debitCreditCategory: DEBIT\n            accountCode: \"11110\"\n            amount: \"100000\"\n          }\n          {\n            debitCreditCategory: CREDIT\n            accountCode: \"41100\"\n            amount: \"100000\"\n          }\n        ]\n      }\n    ]\n  }) {\n    journalNumber\n    postingDate\n    totalDebitAmount\n    totalCreditAmount\n    isBalanced\n  }\n}\n\n# \u8a66\u7b97\u8868\nquery {\n  trialBalance(fiscalYear: 2025, month: 12) {\n    fiscalYear\n    month\n    entries {\n      accountCode\n      accountName\n      bsplCategory\n      debitAmount\n      creditAmount\n      debitBalance\n      creditBalance\n    }\n    totalDebitAmount\n    totalCreditAmount\n  }\n}\n</code></pre>"},{"location":"article/study/study3-4/#27","title":"\u7b2c 27 \u7ae0\uff1a\u307e\u3068\u3081\u3068\u767a\u5c55","text":""},{"location":"article/study/study3-4/#271-graphql","title":"27.1 GraphQL \u5b9f\u88c5\u306e\u632f\u308a\u8fd4\u308a","text":""},{"location":"article/study/study3-4/#272-rest-grpc-graphql","title":"27.2 REST / gRPC / GraphQL \u306e\u4f7f\u3044\u5206\u3051","text":"\u89b3\u70b9 REST API gRPC GraphQL \u30af\u30e9\u30a4\u30a2\u30f3\u30c8 Web \u30d6\u30e9\u30a6\u30b6\u3001\u5916\u90e8\u9023\u643a \u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u9593 SPA\u3001\u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea \u30c7\u30fc\u30bf\u91cf \u56fa\u5b9a\u30ec\u30b9\u30dd\u30f3\u30b9 \u56fa\u5b9a\u30ec\u30b9\u30dd\u30f3\u30b9 \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u6307\u5b9a \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0 WebSocket \u5225\u5b9f\u88c5 \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 Subscription \u578b\u5b89\u5168\u6027 \u25b3\uff08OpenAPI\uff09 \u25ce\uff08.proto\uff09 \u25ce\uff08.graphqls\uff09 \u5b66\u7fd2\u30b3\u30b9\u30c8 \u4f4e \u4e2d \u4e2d \u30d6\u30e9\u30a6\u30b6\u5bfe\u5fdc \u25ce \u25b3\uff08gRPC-Web\uff09 \u25ce"},{"location":"article/study/study3-4/#273","title":"27.3 \u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u5229\u70b9","text":"<p>\u8907\u6570\u306e API \u5f62\u5f0f\u3092\u540c\u6642\u63d0\u4f9b\u3067\u304d\u308b\u306e\u306f\u3001\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u6069\u6075\u3067\u3059\u3002</p> <p></p>"},{"location":"article/study/study3-4/#274","title":"27.4 \u4eca\u5f8c\u306e\u767a\u5c55","text":"<p>\u672c\u30d1\u30fc\u30c8\u3067\u69cb\u7bc9\u3057\u305f GraphQL \u30b5\u30fc\u30d3\u30b9\u3092\u30d9\u30fc\u30b9\u306b\u3001\u4ee5\u4e0b\u306e\u62e1\u5f35\u304c\u53ef\u80fd\u3067\u3059\uff1a</p> <ol> <li>\u8a8d\u8a3c\u30fb\u8a8d\u53ef: Spring Security + JWT \u306b\u3088\u308b GraphQL \u8a8d\u8a3c</li> <li>\u30ad\u30e3\u30c3\u30b7\u30e5: Redis \u306b\u3088\u308b\u30af\u30a8\u30ea\u7d50\u679c\u30ad\u30e3\u30c3\u30b7\u30e5</li> <li>\u76e3\u8996: GraphQL \u30e1\u30c8\u30ea\u30af\u30b9\u306e\u53ce\u96c6\u3068\u76e3\u8996</li> <li>\u30d5\u30a7\u30c7\u30ec\u30fc\u30b7\u30e7\u30f3: Apollo Federation \u306b\u3088\u308b\u8907\u6570\u30b5\u30fc\u30d3\u30b9\u7d71\u5408</li> <li>\u30b3\u30fc\u30c9\u751f\u6210: GraphQL Code Generator \u306b\u3088\u308b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b3\u30fc\u30c9\u81ea\u52d5\u751f\u6210</li> </ol>"},{"location":"article/study/study3-4/#275","title":"27.5 \u5b66\u7fd2\u3057\u305f\u5185\u5bb9","text":"<ol> <li>GraphQL \u306e\u57fa\u672c\u6982\u5ff5: Query\u3001Mutation\u3001Subscription \u306e 3 \u3064\u306e\u64cd\u4f5c\u30bf\u30a4\u30d7</li> <li>\u30b9\u30ad\u30fc\u30de\u99c6\u52d5\u958b\u767a: <code>.graphqls</code> \u30d5\u30a1\u30a4\u30eb\u306b\u3088\u308b\u578b\u5b89\u5168\u306a API \u5b9a\u7fa9</li> <li>N+1 \u554f\u984c\u3068 DataLoader: \u30d0\u30c3\u30c1\u51e6\u7406\u306b\u3088\u308b\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6700\u9069\u5316</li> <li>\u30ea\u30be\u30eb\u30d0\u5b9f\u88c5: <code>@QueryMapping</code>\u3001<code>@MutationMapping</code>\u3001<code>@SchemaMapping</code></li> <li>Subscription: WebSocket \u306b\u3088\u308b\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u901a\u77e5</li> <li>\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0: \u30ab\u30b9\u30bf\u30e0\u4f8b\u5916\u3068 GraphQL \u30a8\u30e9\u30fc\u5f62\u5f0f\u3078\u306e\u5909\u63db</li> <li>\u30c6\u30b9\u30c8: <code>HttpGraphQlTester</code> \u306b\u3088\u308b\u7d71\u5408\u30c6\u30b9\u30c8</li> </ol>"},{"location":"article/study/study4-1/","title":"\u5b9f\u8df5\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\uff1a\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 \u7814\u7a76 1 - \u30e2\u30ce\u30ea\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":""},{"location":"article/study/study4-1/#_1","title":"\u306f\u3058\u3081\u306b","text":"<p>\u672c\u7814\u7a76\u3067\u306f\u3001API \u30b5\u30fc\u30d0\u30fc\u69cb\u6210\uff08\u7b2c32\u7ae0\uff09\u3068\u306f\u7570\u306a\u308b\u30a2\u30d7\u30ed\u30fc\u30c1\u3068\u3057\u3066\u3001\u30e2\u30ce\u30ea\u30b9\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u3088\u308b\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002UI\uff08\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\uff09\u3001\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30a2\u30af\u30bb\u30b9\u304c\u3059\u3079\u3066\u540c\u4e00\u30b5\u30fc\u30d0\u30fc\u5185\u3067\u52d5\u4f5c\u3059\u308b\u3001\u4f1d\u7d71\u7684\u304b\u3064\u5805\u5b9f\u306a\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3067\u3059\u3002</p>"},{"location":"article/study/study4-1/#33","title":"\u7b2c33\u7ae0\uff1a\u30e2\u30ce\u30ea\u30b9\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u57fa\u790e","text":""},{"location":"article/study/study4-1/#331","title":"33.1 \u30e2\u30ce\u30ea\u30b9\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3068\u306f","text":"<p>\u30e2\u30ce\u30ea\u30b9\uff08Monolith / Monolithic Architecture\uff09\u3068\u306f\u3001\u300cAPI\u300d\u3068\u300cUI\u300d\u3068\u300c\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u300d\u304c 1\u3064\u306e\u5b9f\u884c\u30e6\u30cb\u30c3\u30c8\uff081\u3064\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3084\u30d0\u30a4\u30ca\u30ea\uff09\u306b\u307e\u3068\u307e\u3063\u3066\u3044\u308b\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u6307\u3057\u307e\u3059\u3002</p> <p></p> <p>\u30e2\u30ce\u30ea\u30b9\u306e\u4e3b\u306a\u7279\u5fb4\uff1a</p> \u7279\u5fb4 \u8aac\u660e \u5358\u4e00\u30c7\u30d7\u30ed\u30a4 \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5168\u4f53\u304c1\u3064\u306e\u30a2\u30fc\u30c6\u30a3\u30d5\u30a1\u30af\u30c8\uff08JAR/WAR\uff09\u3068\u3057\u3066\u30c7\u30d7\u30ed\u30a4 \u540c\u4e00\u30d7\u30ed\u30bb\u30b9 UI\u3001\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3001\u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u304c\u540c\u3058 JVM \u3067\u52d5\u4f5c \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3 \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067 HTML \u3092\u751f\u6210\u3057\u3066\u30d6\u30e9\u30a6\u30b6\u306b\u8fd4\u5374 \u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406 \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067\u30e6\u30fc\u30b6\u30fc\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u7ba1\u7406 \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u5883\u754c \u5358\u4e00\u30d7\u30ed\u30bb\u30b9\u5185\u3067\u306e\u30ed\u30fc\u30ab\u30eb\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3"},{"location":"article/study/study4-1/#332-api-vs","title":"33.2 API \u30b5\u30fc\u30d0\u30fc vs \u30e2\u30ce\u30ea\u30b9","text":"\u89b3\u70b9 API \u30b5\u30fc\u30d0\u30fc\u69cb\u6210 \u30e2\u30ce\u30ea\u30b9\u69cb\u6210 \u7d50\u5408\u5ea6 \u758e\u7d50\u5408\uff08\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u3068\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u304c\u5206\u96e2\uff09 \u5bc6\u7d50\u5408\uff08\u3059\u3079\u3066\u304c\u540c\u4e00\u30b5\u30fc\u30d0\u30fc\uff09 \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9 SPA\uff08React/Vue/Angular\uff09 \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\uff08Thymeleaf\uff09 \u901a\u4fe1\u65b9\u5f0f REST API\uff08JSON\uff09 \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\uff08HTML\uff09 \u958b\u767a\u30c1\u30fc\u30e0 \u30d5\u30ed\u30f3\u30c8/\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3067\u5206\u696d\u53ef\u80fd \u30d5\u30eb\u30b9\u30bf\u30c3\u30af\u3067\u958b\u767a \u30c7\u30d7\u30ed\u30a4 \u5225\u3005\u306b\u30c7\u30d7\u30ed\u30a4\u53ef\u80fd \u5358\u4e00\u30a2\u30fc\u30c6\u30a3\u30d5\u30a1\u30af\u30c8\u3092\u30c7\u30d7\u30ed\u30a4 \u30b9\u30b1\u30fc\u30ea\u30f3\u30b0 \u500b\u5225\u306b\u30b9\u30b1\u30fc\u30eb\u53ef\u80fd \u5168\u4f53\u3092\u30b9\u30b1\u30fc\u30eb \u8907\u96d1\u3055 API \u8a2d\u8a08\u30fb\u8a8d\u8a3c\u30fbCORS \u306a\u3069\u304c\u5fc5\u8981 \u30b7\u30f3\u30d7\u30eb\u3001\u8a2d\u5b9a\u304c\u5c11\u306a\u3044 \u521d\u671f\u958b\u767a\u901f\u5ea6 \u74b0\u5883\u69cb\u7bc9\u306b\u6642\u9593\u304c\u304b\u304b\u308b \u7d20\u65e9\u304f\u958b\u767a\u958b\u59cb\u3067\u304d\u308b SEO SSR/SSG \u304c\u5fc5\u8981\u306a\u5834\u5408\u3042\u308a \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3067 SEO \u30d5\u30ec\u30f3\u30c9\u30ea\u30fc"},{"location":"article/study/study4-1/#_2","title":"\u30e2\u30ce\u30ea\u30b9\u3092\u9078\u629e\u3059\u3079\u304d\u5834\u9762","text":"<p>\u30e2\u30ce\u30ea\u30b9\u304c\u9069\u3057\u3066\u3044\u308b\u72b6\u6cc1\uff1a</p> <ol> <li>\u5c0f\u301c\u4e2d\u898f\u6a21\u306e\u30c1\u30fc\u30e0\uff1a\u5c02\u9580\u306e\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30c1\u30fc\u30e0\u304c\u3044\u306a\u3044\u5834\u5408</li> <li>\u793e\u5185\u30b7\u30b9\u30c6\u30e0\uff1aSEO \u4e0d\u8981\u3001\u9650\u3089\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u6570</li> <li>\u696d\u52d9\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\uff1a\u8907\u96d1\u306a\u696d\u52d9\u30d5\u30ed\u30fc\u3092\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067\u51e6\u7406</li> <li>\u8fc5\u901f\u306a\u958b\u767a\uff1aMVP \u3084\u30d7\u30ed\u30c8\u30bf\u30a4\u30d7\u306e\u7d20\u65e9\u3044\u69cb\u7bc9</li> <li>\u904b\u7528\u30b3\u30b9\u30c8\u91cd\u8996\uff1a\u30a4\u30f3\u30d5\u30e9\u69cb\u6210\u3092\u30b7\u30f3\u30d7\u30eb\u306b\u4fdd\u3061\u305f\u3044\u5834\u5408</li> </ol> <p>\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306b\u304a\u3051\u308b\u30e2\u30ce\u30ea\u30b9\u306e\u30e1\u30ea\u30c3\u30c8\uff1a</p> <pre><code>\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u7279\u6027\n\u251c\u2500\u2500 \u793e\u5185\u5229\u7528\u304c\u4e2d\u5fc3 \u2192 SEO \u4e0d\u8981\u3001SPA \u4e0d\u8981\n\u251c\u2500\u2500 \u8907\u96d1\u306a\u696d\u52d9\u30d5\u30ed\u30fc \u2192 \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067\u5236\u5fa1\u304c\u5bb9\u6613\n\u251c\u2500\u2500 \u5e33\u7968\u51fa\u529b \u2192 \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067 PDF/Excel \u751f\u6210\n\u251c\u2500\u2500 \u5927\u91cf\u30c7\u30fc\u30bf\u51e6\u7406 \u2192 MRP \u306a\u3069\u30d0\u30c3\u30c1\u51e6\u7406\u3068\u306e\u89aa\u548c\u6027\n\u2514\u2500\u2500 \u904b\u7528\u62c5\u5f53\u8005\u306e\u30b9\u30ad\u30eb \u2192 \u30b7\u30f3\u30d7\u30eb\u306a\u69cb\u6210\u304c\u671b\u307e\u3057\u3044\n</code></pre>"},{"location":"article/study/study4-1/#333","title":"33.3 \u30e2\u30ce\u30ea\u30b9\u306b\u304a\u3051\u308b\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":"<p>\u30e2\u30ce\u30ea\u30b9\u3067\u3042\u3063\u3066\u3082\u3001\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08Ports and Adapters\uff09\u3092\u63a1\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u4fdd\u5b88\u6027\u306e\u9ad8\u3044\u8a2d\u8a08\u3092\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002</p> <p></p> <p>\u30e2\u30ce\u30ea\u30b9\u3067\u3082\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u9069\u7528\u3059\u308b\u7406\u7531\uff1a</p> <ol> <li>\u30c6\u30b9\u30c8\u5bb9\u6613\u6027\uff1a\u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\u3092 UI \u304b\u3089\u5206\u96e2\u3057\u3066\u30c6\u30b9\u30c8\u53ef\u80fd</li> <li>\u5c06\u6765\u306e\u79fb\u884c\uff1a\u5fc5\u8981\u306b\u5fdc\u3058\u3066 API \u5c64\u3092\u8ffd\u52a0\u53ef\u80fd</li> <li>\u4fdd\u5b88\u6027\uff1a\u95a2\u5fc3\u306e\u5206\u96e2\u306b\u3088\u308a\u5909\u66f4\u5f71\u97ff\u3092\u5c40\u6240\u5316</li> <li>\u518d\u5229\u7528\u6027\uff1a\u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\u3092\u8907\u6570\u306e UI \u3067\u5171\u6709\u53ef\u80fd</li> </ol>"},{"location":"article/study/study4-1/#334","title":"33.4 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210","text":"<pre><code>src/main/java/com/example/production/\n\u251c\u2500\u2500 domain/                     # \u30c9\u30e1\u30a4\u30f3\u5c64\uff08API\u7248\u3068\u5171\u901a\uff09\n\u2502   \u251c\u2500\u2500 model/\n\u2502   \u2502   \u251c\u2500\u2500 item/\n\u2502   \u2502   \u251c\u2500\u2500 bom/\n\u2502   \u2502   \u251c\u2500\u2500 order/\n\u2502   \u2502   \u2514\u2500\u2500 inventory/\n\u2502   \u2514\u2500\u2500 exception/\n\u2502\n\u251c\u2500\u2500 application/               # \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff08API\u7248\u3068\u5171\u901a\uff09\n\u2502   \u251c\u2500\u2500 port/\n\u2502   \u2502   \u251c\u2500\u2500 in/               # Input Port\uff08\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\uff09\n\u2502   \u2502   \u2514\u2500\u2500 out/              # Output Port\uff08\u30ea\u30dd\u30b8\u30c8\u30ea\uff09\n\u2502   \u2514\u2500\u2500 service/\n\u2502\n\u251c\u2500\u2500 infrastructure/\n\u2502   \u251c\u2500\u2500 persistence/          # Output Adapter\uff08DB\u5b9f\u88c5\uff09\n\u2502   \u2502   \u251c\u2500\u2500 mapper/\n\u2502   \u2502   \u2514\u2500\u2500 repository/\n\u2502   \u2514\u2500\u2500 web/                  # Input Adapter\uff08Web\u5b9f\u88c5\uff09\n\u2502       \u251c\u2500\u2500 controller/       # Thymeleaf Controller\n\u2502       \u251c\u2500\u2500 form/             # \u30d5\u30a9\u30fc\u30e0\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\u2502       \u2514\u2500\u2500 helper/           # \u30d3\u30e5\u30fc\u30d8\u30eb\u30d1\u30fc\n\u2502\n\u251c\u2500\u2500 config/\n\u2502\n\u2514\u2500\u2500 resources/\n    \u251c\u2500\u2500 templates/            # Thymeleaf \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\n    \u2502   \u251c\u2500\u2500 layout/           # \u5171\u901a\u30ec\u30a4\u30a2\u30a6\u30c8\n    \u2502   \u251c\u2500\u2500 items/            # \u54c1\u76ee\u30de\u30b9\u30bf\u753b\u9762\n    \u2502   \u251c\u2500\u2500 bom/              # BOM \u753b\u9762\n    \u2502   \u251c\u2500\u2500 orders/           # \u30aa\u30fc\u30c0\u753b\u9762\n    \u2502   \u2514\u2500\u2500 inventory/        # \u5728\u5eab\u753b\u9762\n    \u251c\u2500\u2500 static/               # \u9759\u7684\u30ea\u30bd\u30fc\u30b9\n    \u2502   \u251c\u2500\u2500 css/\n    \u2502   \u251c\u2500\u2500 js/\n    \u2502   \u2514\u2500\u2500 images/\n    \u2514\u2500\u2500 messages.properties   # \u30e1\u30c3\u30bb\u30fc\u30b8\u30ea\u30bd\u30fc\u30b9\n</code></pre>"},{"location":"article/study/study4-1/#335","title":"33.5 \u6280\u8853\u30b9\u30bf\u30c3\u30af\u306e\u5c0e\u5165","text":"build.gradle.kts <pre><code>plugins {\n    id(\"java\")\n    id(\"org.springframework.boot\") version \"3.2.0\"\n    id(\"io.spring.dependency-management\") version \"1.1.4\"\n}\n\ndependencies {\n    // Spring Boot Web\uff08REST API\u3067\u306f\u306a\u304fMVC\u3068\u3057\u3066\u4f7f\u7528\uff09\n    implementation(\"org.springframework.boot:spring-boot-starter-web\")\n    implementation(\"org.springframework.boot:spring-boot-starter-validation\")\n\n    // Thymeleaf\uff08\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\uff09\n    implementation(\"org.springframework.boot:spring-boot-starter-thymeleaf\")\n    implementation(\"nz.net.ultraq.thymeleaf:thymeleaf-layout-dialect:3.3.0\")\n\n    // Thymeleaf + Spring Security\uff08\u8a8d\u8a3c\u6a5f\u80fd\u3092\u4f7f\u3046\u5834\u5408\uff09\n    implementation(\"org.thymeleaf.extras:thymeleaf-extras-springsecurity6\")\n\n    // htmx\uff08\u30e2\u30c0\u30f3\u306a\u30a4\u30f3\u30bf\u30e9\u30af\u30c6\u30a3\u30d6UI\uff09\n    // CDN \u304b\u3089\u8aad\u307f\u8fbc\u3080\u305f\u3081\u4f9d\u5b58\u95a2\u4fc2\u306f\u4e0d\u8981\n\n    // MyBatis\n    implementation(\"org.mybatis.spring.boot:mybatis-spring-boot-starter:3.0.3\")\n\n    // PostgreSQL\n    runtimeOnly(\"org.postgresql:postgresql\")\n\n    // Flyway\n    implementation(\"org.flywaydb:flyway-core\")\n    implementation(\"org.flywaydb:flyway-database-postgresql\")\n\n    // Webjars\uff08Bootstrap\u7b49\u306e\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30e9\u30a4\u30d6\u30e9\u30ea\uff09\n    implementation(\"org.webjars:bootstrap:5.3.2\")\n    implementation(\"org.webjars:webjars-locator-core:0.55\")\n\n    // \u5e33\u7968\u51fa\u529b\n    implementation(\"org.apache.poi:poi-ooxml:5.2.5\")  // Excel\n    implementation(\"com.itextpdf:itext7-core:8.0.2\")  // PDF\n\n    // Test\n    testImplementation(\"org.springframework.boot:spring-boot-starter-test\")\n    testImplementation(\"org.testcontainers:postgresql:1.19.3\")\n    testImplementation(\"org.testcontainers:junit-jupiter:1.19.3\")\n\n    // Lombok\n    compileOnly(\"org.projectlombok:lombok\")\n    annotationProcessor(\"org.projectlombok:lombok\")\n}\n</code></pre> <p>\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u8aac\u660e\uff1a</p> \u30d1\u30c3\u30b1\u30fc\u30b8 \u7528\u9014 spring-boot-starter-thymeleaf \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3 thymeleaf-layout-dialect \u30ec\u30a4\u30a2\u30a6\u30c8\u7d99\u627f\uff08\u5171\u901a\u30d8\u30c3\u30c0\u30fc\u30fb\u30d5\u30c3\u30bf\u30fc\uff09 webjars:bootstrap CSS \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\uff08\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u914d\u4fe1\uff09 poi-ooxml Excel \u30d5\u30a1\u30a4\u30eb\u51fa\u529b itext7-core PDF \u30d5\u30a1\u30a4\u30eb\u51fa\u529b"},{"location":"article/study/study4-1/#336-spring-boot-thymeleaf","title":"33.6 \u57fa\u672c\u7684\u306a Spring Boot + Thymeleaf \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3","text":"ProductionManagementApplication.java <pre><code>package com.example.production;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class ProductionManagementApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(ProductionManagementApplication.class, args);\n    }\n}\n</code></pre> application.yml <pre><code>spring:\n  datasource:\n    url: jdbc:postgresql://localhost:5432/production\n    username: postgres\n    password: postgres\n\n  thymeleaf:\n    cache: false  # \u958b\u767a\u6642\u306f\u30ad\u30e3\u30c3\u30b7\u30e5\u7121\u52b9\n    prefix: classpath:/templates/\n    suffix: .html\n    encoding: UTF-8\n    mode: HTML\n\n  messages:\n    basename: messages\n    encoding: UTF-8\n\nmybatis:\n  mapper-locations: classpath:mapper/*.xml\n  configuration:\n    map-underscore-to-camel-case: true\n\nserver:\n  servlet:\n    session:\n      timeout: 30m  # \u30bb\u30c3\u30b7\u30e7\u30f3\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\n</code></pre> layout/default.html\uff08\u5171\u901a\u30ec\u30a4\u30a2\u30a6\u30c8\uff09 <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html xmlns:th=\"http://www.thymeleaf.org\"\n      xmlns:layout=\"http://www.ultraq.net.nz/thymeleaf/layout\"\n      lang=\"ja\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;title layout:title-pattern=\"$CONTENT_TITLE - $LAYOUT_TITLE\"&gt;\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0&lt;/title&gt;\n\n    &lt;!-- Bootstrap CSS --&gt;\n    &lt;link rel=\"stylesheet\" th:href=\"@{/webjars/bootstrap/css/bootstrap.min.css}\"&gt;\n\n    &lt;!-- \u30ab\u30b9\u30bf\u30e0 CSS --&gt;\n    &lt;link rel=\"stylesheet\" th:href=\"@{/css/style.css}\"&gt;\n\n    &lt;!-- htmx\uff08\u90e8\u5206\u66f4\u65b0\u7528\uff09 --&gt;\n    &lt;script src=\"https://unpkg.com/htmx.org@1.9.10\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;!-- \u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3\u30d0\u30fc --&gt;\n    &lt;nav class=\"navbar navbar-expand-lg navbar-dark bg-primary\"&gt;\n        &lt;div class=\"container-fluid\"&gt;\n            &lt;a class=\"navbar-brand\" th:href=\"@{/}\"&gt;\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0&lt;/a&gt;\n            &lt;button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\"\n                    data-bs-target=\"#navbarNav\"&gt;\n                &lt;span class=\"navbar-toggler-icon\"&gt;&lt;/span&gt;\n            &lt;/button&gt;\n            &lt;div class=\"collapse navbar-collapse\" id=\"navbarNav\"&gt;\n                &lt;ul class=\"navbar-nav\"&gt;\n                    &lt;li class=\"nav-item dropdown\"&gt;\n                        &lt;a class=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\"\n                           data-bs-toggle=\"dropdown\"&gt;\u30de\u30b9\u30bf&lt;/a&gt;\n                        &lt;ul class=\"dropdown-menu\"&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/items}\"&gt;\u54c1\u76ee\u30de\u30b9\u30bf&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/bom}\"&gt;\u90e8\u54c1\u69cb\u6210\u8868&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/suppliers}\"&gt;\u53d6\u5f15\u5148\u30de\u30b9\u30bf&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/locations}\"&gt;\u5834\u6240\u30de\u30b9\u30bf&lt;/a&gt;&lt;/li&gt;\n                        &lt;/ul&gt;\n                    &lt;/li&gt;\n                    &lt;li class=\"nav-item dropdown\"&gt;\n                        &lt;a class=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\"\n                           data-bs-toggle=\"dropdown\"&gt;\u8a08\u753b&lt;/a&gt;\n                        &lt;ul class=\"dropdown-menu\"&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/mps}\"&gt;\u57fa\u6e96\u751f\u7523\u8a08\u753b&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/mrp}\"&gt;MRP\u5b9f\u884c&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/orders}\"&gt;\u30aa\u30fc\u30c0\u7167\u4f1a&lt;/a&gt;&lt;/li&gt;\n                        &lt;/ul&gt;\n                    &lt;/li&gt;\n                    &lt;li class=\"nav-item dropdown\"&gt;\n                        &lt;a class=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\"\n                           data-bs-toggle=\"dropdown\"&gt;\u8cfc\u8cb7&lt;/a&gt;\n                        &lt;ul class=\"dropdown-menu\"&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/purchase-orders}\"&gt;\u767a\u6ce8&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/receiving}\"&gt;\u5165\u8377\u30fb\u691c\u53ce&lt;/a&gt;&lt;/li&gt;\n                        &lt;/ul&gt;\n                    &lt;/li&gt;\n                    &lt;li class=\"nav-item dropdown\"&gt;\n                        &lt;a class=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\"\n                           data-bs-toggle=\"dropdown\"&gt;\u88fd\u9020&lt;/a&gt;\n                        &lt;ul class=\"dropdown-menu\"&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/work-orders}\"&gt;\u4f5c\u696d\u6307\u793a&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/completions}\"&gt;\u5b8c\u6210\u5b9f\u7e3e&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/labor-hours}\"&gt;\u5de5\u6570\u5b9f\u7e3e&lt;/a&gt;&lt;/li&gt;\n                        &lt;/ul&gt;\n                    &lt;/li&gt;\n                    &lt;li class=\"nav-item dropdown\"&gt;\n                        &lt;a class=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\"\n                           data-bs-toggle=\"dropdown\"&gt;\u5728\u5eab&lt;/a&gt;\n                        &lt;ul class=\"dropdown-menu\"&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/inventory}\"&gt;\u5728\u5eab\u7167\u4f1a&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/issues}\"&gt;\u6255\u51fa&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a class=\"dropdown-item\" th:href=\"@{/stocktaking}\"&gt;\u68da\u5378&lt;/a&gt;&lt;/li&gt;\n                        &lt;/ul&gt;\n                    &lt;/li&gt;\n                &lt;/ul&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/nav&gt;\n\n    &lt;!-- \u30d5\u30e9\u30c3\u30b7\u30e5\u30e1\u30c3\u30bb\u30fc\u30b8 --&gt;\n    &lt;div class=\"container mt-3\"&gt;\n        &lt;div th:if=\"${successMessage}\" class=\"alert alert-success alert-dismissible fade show\" role=\"alert\"&gt;\n            &lt;span th:text=\"${successMessage}\"&gt;&lt;/span&gt;\n            &lt;button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"&gt;&lt;/button&gt;\n        &lt;/div&gt;\n        &lt;div th:if=\"${errorMessage}\" class=\"alert alert-danger alert-dismissible fade show\" role=\"alert\"&gt;\n            &lt;span th:text=\"${errorMessage}\"&gt;&lt;/span&gt;\n            &lt;button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"&gt;&lt;/button&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- \u30e1\u30a4\u30f3\u30b3\u30f3\u30c6\u30f3\u30c4 --&gt;\n    &lt;main class=\"container mt-4\"&gt;\n        &lt;div layout:fragment=\"content\"&gt;\n            &lt;!-- \u5404\u30da\u30fc\u30b8\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u304c\u3053\u3053\u306b\u633f\u5165\u3055\u308c\u308b --&gt;\n        &lt;/div&gt;\n    &lt;/main&gt;\n\n    &lt;!-- \u30d5\u30c3\u30bf\u30fc --&gt;\n    &lt;footer class=\"footer mt-5 py-3 bg-light\"&gt;\n        &lt;div class=\"container text-center\"&gt;\n            &lt;span class=\"text-muted\"&gt;\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 &amp;copy; 2025&lt;/span&gt;\n        &lt;/div&gt;\n    &lt;/footer&gt;\n\n    &lt;!-- Bootstrap JS --&gt;\n    &lt;script th:src=\"@{/webjars/bootstrap/js/bootstrap.bundle.min.js}\"&gt;&lt;/script&gt;\n\n    &lt;!-- \u30da\u30fc\u30b8\u56fa\u6709\u306e\u30b9\u30af\u30ea\u30d7\u30c8 --&gt;\n    &lt;th:block layout:fragment=\"scripts\"&gt;&lt;/th:block&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> HomeController.java <pre><code>package com.example.production.infrastructure.web.controller;\n\nimport com.example.production.application.port.in.InventoryUseCase;\nimport com.example.production.application.port.in.OrderUseCase;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\n\nimport java.time.LocalDate;\n\n/**\n * \u30db\u30fc\u30e0\u753b\u9762 Controller\n */\n@Controller\npublic class HomeController {\n\n    private final OrderUseCase orderUseCase;\n    private final InventoryUseCase inventoryUseCase;\n\n    public HomeController(OrderUseCase orderUseCase, InventoryUseCase inventoryUseCase) {\n        this.orderUseCase = orderUseCase;\n        this.inventoryUseCase = inventoryUseCase;\n    }\n\n    @GetMapping(\"/\")\n    public String home(Model model) {\n        // \u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u60c5\u5831\u3092\u53d6\u5f97\n        model.addAttribute(\"today\", LocalDate.now());\n        model.addAttribute(\"pendingOrders\", orderUseCase.countPendingOrders());\n        model.addAttribute(\"shortageItems\", inventoryUseCase.getShortageItems());\n        model.addAttribute(\"todayWorkOrders\", orderUseCase.getTodayWorkOrders());\n\n        return \"home\";\n    }\n}\n</code></pre> templates/home.html <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html xmlns:th=\"http://www.thymeleaf.org\"\n      xmlns:layout=\"http://www.ultraq.net.nz/thymeleaf/layout\"\n      layout:decorate=\"~{layout/default}\"&gt;\n&lt;head&gt;\n    &lt;title&gt;\u30db\u30fc\u30e0&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div layout:fragment=\"content\"&gt;\n    &lt;h1 class=\"mb-4\"&gt;\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9&lt;/h1&gt;\n\n    &lt;div class=\"row\"&gt;\n        &lt;!-- \u672c\u65e5\u306e\u65e5\u4ed8 --&gt;\n        &lt;div class=\"col-md-3\"&gt;\n            &lt;div class=\"card text-white bg-primary mb-3\"&gt;\n                &lt;div class=\"card-header\"&gt;\u672c\u65e5&lt;/div&gt;\n                &lt;div class=\"card-body\"&gt;\n                    &lt;h5 class=\"card-title\" th:text=\"${#temporals.format(today, 'yyyy\u5e74MM\u6708dd\u65e5')}\"&gt;&lt;/h5&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n\n        &lt;!-- \u672a\u51e6\u7406\u30aa\u30fc\u30c0\u6570 --&gt;\n        &lt;div class=\"col-md-3\"&gt;\n            &lt;div class=\"card text-white bg-warning mb-3\"&gt;\n                &lt;div class=\"card-header\"&gt;\u672a\u51e6\u7406\u30aa\u30fc\u30c0&lt;/div&gt;\n                &lt;div class=\"card-body\"&gt;\n                    &lt;h5 class=\"card-title\"&gt;\n                        &lt;span th:text=\"${pendingOrders}\"&gt;0&lt;/span&gt; \u4ef6\n                    &lt;/h5&gt;\n                    &lt;a th:href=\"@{/orders}\" class=\"btn btn-sm btn-light\"&gt;\u8a73\u7d30\u3092\u898b\u308b&lt;/a&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n\n        &lt;!-- \u5728\u5eab\u4e0d\u8db3\u54c1\u76ee --&gt;\n        &lt;div class=\"col-md-3\"&gt;\n            &lt;div class=\"card text-white bg-danger mb-3\"&gt;\n                &lt;div class=\"card-header\"&gt;\u5728\u5eab\u4e0d\u8db3&lt;/div&gt;\n                &lt;div class=\"card-body\"&gt;\n                    &lt;h5 class=\"card-title\"&gt;\n                        &lt;span th:text=\"${#lists.size(shortageItems)}\"&gt;0&lt;/span&gt; \u54c1\u76ee\n                    &lt;/h5&gt;\n                    &lt;a th:href=\"@{/inventory/shortage}\" class=\"btn btn-sm btn-light\"&gt;\u8a73\u7d30\u3092\u898b\u308b&lt;/a&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n\n        &lt;!-- \u672c\u65e5\u306e\u4f5c\u696d\u6307\u793a --&gt;\n        &lt;div class=\"col-md-3\"&gt;\n            &lt;div class=\"card text-white bg-success mb-3\"&gt;\n                &lt;div class=\"card-header\"&gt;\u672c\u65e5\u306e\u4f5c\u696d\u6307\u793a&lt;/div&gt;\n                &lt;div class=\"card-body\"&gt;\n                    &lt;h5 class=\"card-title\"&gt;\n                        &lt;span th:text=\"${#lists.size(todayWorkOrders)}\"&gt;0&lt;/span&gt; \u4ef6\n                    &lt;/h5&gt;\n                    &lt;a th:href=\"@{/work-orders}\" class=\"btn btn-sm btn-light\"&gt;\u8a73\u7d30\u3092\u898b\u308b&lt;/a&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- \u5728\u5eab\u4e0d\u8db3\u54c1\u76ee\u4e00\u89a7 --&gt;\n    &lt;div class=\"card mt-4\" th:if=\"${not #lists.isEmpty(shortageItems)}\"&gt;\n        &lt;div class=\"card-header bg-danger text-white\"&gt;\n            \u5728\u5eab\u4e0d\u8db3\u54c1\u76ee\n        &lt;/div&gt;\n        &lt;div class=\"card-body\"&gt;\n            &lt;table class=\"table table-striped\"&gt;\n                &lt;thead&gt;\n                    &lt;tr&gt;\n                        &lt;th&gt;\u54c1\u76ee\u30b3\u30fc\u30c9&lt;/th&gt;\n                        &lt;th&gt;\u54c1\u540d&lt;/th&gt;\n                        &lt;th&gt;\u73fe\u5728\u5eab&lt;/th&gt;\n                        &lt;th&gt;\u5b89\u5168\u5728\u5eab&lt;/th&gt;\n                        &lt;th&gt;\u4e0d\u8db3\u6570&lt;/th&gt;\n                    &lt;/tr&gt;\n                &lt;/thead&gt;\n                &lt;tbody&gt;\n                    &lt;tr th:each=\"item : ${shortageItems}\"&gt;\n                        &lt;td&gt;\n                            &lt;a th:href=\"@{/items/{code}(code=${item.itemCode})}\"\n                               th:text=\"${item.itemCode}\"&gt;&lt;/a&gt;\n                        &lt;/td&gt;\n                        &lt;td th:text=\"${item.itemName}\"&gt;&lt;/td&gt;\n                        &lt;td th:text=\"${item.currentStock}\"&gt;&lt;/td&gt;\n                        &lt;td th:text=\"${item.safetyStock}\"&gt;&lt;/td&gt;\n                        &lt;td class=\"text-danger\"\n                            th:text=\"${item.safetyStock - item.currentStock}\"&gt;&lt;/td&gt;\n                    &lt;/tr&gt;\n                &lt;/tbody&gt;\n            &lt;/table&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- \u30af\u30a4\u30c3\u30af\u30a2\u30af\u30bb\u30b9 --&gt;\n    &lt;div class=\"card mt-4\"&gt;\n        &lt;div class=\"card-header\"&gt;\u30af\u30a4\u30c3\u30af\u30a2\u30af\u30bb\u30b9&lt;/div&gt;\n        &lt;div class=\"card-body\"&gt;\n            &lt;div class=\"row\"&gt;\n                &lt;div class=\"col-md-3 mb-2\"&gt;\n                    &lt;a th:href=\"@{/items/new}\" class=\"btn btn-outline-primary w-100\"&gt;\n                        \u54c1\u76ee\u767b\u9332\n                    &lt;/a&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-md-3 mb-2\"&gt;\n                    &lt;a th:href=\"@{/purchase-orders/new}\" class=\"btn btn-outline-primary w-100\"&gt;\n                        \u767a\u6ce8\u767b\u9332\n                    &lt;/a&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-md-3 mb-2\"&gt;\n                    &lt;a th:href=\"@{/work-orders/new}\" class=\"btn btn-outline-primary w-100\"&gt;\n                        \u4f5c\u696d\u6307\u793a\u767b\u9332\n                    &lt;/a&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-md-3 mb-2\"&gt;\n                    &lt;a th:href=\"@{/mrp/execute}\" class=\"btn btn-outline-success w-100\"&gt;\n                        MRP \u5b9f\u884c\n                    &lt;/a&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"article/study/study4-1/#337-htmx","title":"33.7 htmx \u306b\u3088\u308b\u90e8\u5206\u66f4\u65b0","text":"<p>\u30e2\u30ce\u30ea\u30b9\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u3082\u3001htmx \u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067 SPA \u306e\u3088\u3046\u306a\u64cd\u4f5c\u6027\u3092\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002\u30da\u30fc\u30b8\u5168\u4f53\u3092\u30ea\u30ed\u30fc\u30c9\u305b\u305a\u3001\u5fc5\u8981\u306a\u90e8\u5206\u3060\u3051\u3092\u66f4\u65b0\u3057\u307e\u3059\u3002</p> <p></p> htmx \u306b\u3088\u308b\u54c1\u76ee\u691c\u7d22\uff08\u90e8\u5206\u66f4\u65b0\uff09 <pre><code>&lt;!-- \u54c1\u76ee\u691c\u7d22\uff08\u90e8\u5206\u66f4\u65b0\uff09 --&gt;\n&lt;div class=\"mb-3\"&gt;\n    &lt;input type=\"text\"\n           class=\"form-control\"\n           name=\"keyword\"\n           placeholder=\"\u54c1\u76ee\u30b3\u30fc\u30c9\u307e\u305f\u306f\u54c1\u540d\u3067\u691c\u7d22\"\n           hx-get=\"/items/search\"\n           hx-trigger=\"keyup changed delay:300ms\"\n           hx-target=\"#search-results\"\n           hx-indicator=\"#loading\"&gt;\n    &lt;span id=\"loading\" class=\"htmx-indicator\"&gt;\u691c\u7d22\u4e2d...&lt;/span&gt;\n&lt;/div&gt;\n\n&lt;!-- \u691c\u7d22\u7d50\u679c\u304c\u3053\u3053\u306b\u633f\u5165\u3055\u308c\u308b --&gt;\n&lt;div id=\"search-results\"&gt;\n    &lt;!-- Controller \u304b\u3089\u8fd4\u3055\u308c\u308b HTML \u30d5\u30e9\u30b0\u30e1\u30f3\u30c8 --&gt;\n&lt;/div&gt;\n</code></pre> \u691c\u7d22\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\uff08htmx \u7528 Controller\uff09 <pre><code>@Controller\n@RequestMapping(\"/items\")\npublic class ItemController {\n\n    private final ItemUseCase itemUseCase;\n\n    // ... \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u7701\u7565\n\n    /**\n     * htmx \u7528\u306e\u691c\u7d22\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\uff08\u30d5\u30e9\u30b0\u30e1\u30f3\u30c8\u3092\u8fd4\u3059\uff09\n     */\n    @GetMapping(\"/search\")\n    public String search(\n            @RequestParam(required = false) String keyword,\n            Model model) {\n\n        List&lt;Item&gt; items = itemUseCase.searchItems(keyword);\n        model.addAttribute(\"items\", items);\n\n        // \u30d5\u30e9\u30b0\u30e1\u30f3\u30c8\u306e\u307f\u3092\u8fd4\u3059\n        return \"items/search-results :: results\";\n    }\n}\n</code></pre> items/search-results.html\uff08\u691c\u7d22\u7d50\u679c\u30d5\u30e9\u30b0\u30e1\u30f3\u30c8\uff09 <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html xmlns:th=\"http://www.thymeleaf.org\"&gt;\n&lt;!-- \u30d5\u30e9\u30b0\u30e1\u30f3\u30c8\u5b9a\u7fa9 --&gt;\n&lt;div th:fragment=\"results\"&gt;\n    &lt;table class=\"table table-striped\" th:if=\"${not #lists.isEmpty(items)}\"&gt;\n        &lt;thead&gt;\n            &lt;tr&gt;\n                &lt;th&gt;\u54c1\u76ee\u30b3\u30fc\u30c9&lt;/th&gt;\n                &lt;th&gt;\u54c1\u540d&lt;/th&gt;\n                &lt;th&gt;\u54c1\u76ee\u533a\u5206&lt;/th&gt;\n                &lt;th&gt;\u64cd\u4f5c&lt;/th&gt;\n            &lt;/tr&gt;\n        &lt;/thead&gt;\n        &lt;tbody&gt;\n            &lt;tr th:each=\"item : ${items}\"&gt;\n                &lt;td th:text=\"${item.itemCode}\"&gt;&lt;/td&gt;\n                &lt;td th:text=\"${item.itemName}\"&gt;&lt;/td&gt;\n                &lt;td th:text=\"${item.category.displayName}\"&gt;&lt;/td&gt;\n                &lt;td&gt;\n                    &lt;a th:href=\"@{/items/{code}(code=${item.itemCode})}\"\n                       class=\"btn btn-sm btn-primary\"&gt;\u8a73\u7d30&lt;/a&gt;\n                    &lt;button class=\"btn btn-sm btn-danger\"\n                            hx-delete=\"/items/{code}\"\n                            th:attr=\"hx-delete=@{/items/{code}(code=${item.itemCode})}\"\n                            hx-confirm=\"\u672c\u5f53\u306b\u524a\u9664\u3057\u307e\u3059\u304b\uff1f\"\n                            hx-target=\"closest tr\"\n                            hx-swap=\"outerHTML\"&gt;\u524a\u9664&lt;/button&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/tbody&gt;\n    &lt;/table&gt;\n    &lt;div th:if=\"${#lists.isEmpty(items)}\" class=\"alert alert-info\"&gt;\n        \u8a72\u5f53\u3059\u308b\u54c1\u76ee\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"article/study/study4-1/#338-api-controller","title":"33.8 API \u30b5\u30fc\u30d0\u30fc\u7248\u3068\u306e Controller \u306e\u9055\u3044","text":""},{"location":"article/study/study4-1/#api-rest-controller","title":"API \u30b5\u30fc\u30d0\u30fc\u7248\uff08REST Controller\uff09","text":"ItemApiController.java\uff08API \u30b5\u30fc\u30d0\u30fc\u7248\uff09 <pre><code>@RestController  // JSON \u3092\u8fd4\u3059\n@RequestMapping(\"/api/items\")\npublic class ItemApiController {\n\n    @GetMapping\n    public ResponseEntity&lt;List&lt;ItemResponse&gt;&gt; getAllItems() {\n        List&lt;Item&gt; items = itemUseCase.getAllItems();\n        return ResponseEntity.ok(items.stream()\n            .map(ItemResponse::from)\n            .toList());\n    }\n\n    @PostMapping\n    public ResponseEntity&lt;ItemResponse&gt; createItem(\n            @Valid @RequestBody CreateItemRequest request) {  // JSON \u30ea\u30af\u30a8\u30b9\u30c8\n        Item item = itemUseCase.createItem(request.toCommand());\n        return ResponseEntity.status(HttpStatus.CREATED)\n            .body(ItemResponse.from(item));\n    }\n}\n</code></pre>"},{"location":"article/study/study4-1/#mvc-controller","title":"\u30e2\u30ce\u30ea\u30b9\u7248\uff08MVC Controller\uff09","text":"ItemController.java\uff08\u30e2\u30ce\u30ea\u30b9\u7248\uff09 <pre><code>@Controller  // HTML \u3092\u8fd4\u3059\n@RequestMapping(\"/items\")\npublic class ItemController {\n\n    @GetMapping\n    public String list(Model model) {\n        List&lt;Item&gt; items = itemUseCase.getAllItems();\n        model.addAttribute(\"items\", items);\n        return \"items/list\";  // Thymeleaf \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\n    }\n\n    @PostMapping\n    public String create(\n            @Valid @ModelAttribute(\"form\") ItemForm form,  // \u30d5\u30a9\u30fc\u30e0\u30c7\u30fc\u30bf\n            BindingResult bindingResult,\n            RedirectAttributes redirectAttributes) {\n\n        if (bindingResult.hasErrors()) {\n            return \"items/new\";  // \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\u6642\u306f\u5165\u529b\u753b\u9762\u306b\u623b\u308b\n        }\n\n        itemUseCase.createItem(form.toCommand());\n        redirectAttributes.addFlashAttribute(\"successMessage\", \"\u54c1\u76ee\u3092\u767b\u9332\u3057\u307e\u3057\u305f\");\n        return \"redirect:/items\";  // PRG \u30d1\u30bf\u30fc\u30f3\n    }\n}\n</code></pre> <p>\u4e3b\u306a\u9055\u3044\uff1a</p> \u89b3\u70b9 API \u30b5\u30fc\u30d0\u30fc\u7248 \u30e2\u30ce\u30ea\u30b9\u7248 \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3 <code>@RestController</code> <code>@Controller</code> \u623b\u308a\u5024 <code>ResponseEntity&lt;T&gt;</code> \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u540d\uff08String\uff09 \u30ea\u30af\u30a8\u30b9\u30c8 <code>@RequestBody</code>\uff08JSON\uff09 <code>@ModelAttribute</code>\uff08\u30d5\u30a9\u30fc\u30e0\uff09 \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3 \u4f8b\u5916\u30cf\u30f3\u30c9\u30e9\u3067\u51e6\u7406 <code>BindingResult</code> \u3067\u51e6\u7406 \u30ec\u30b9\u30dd\u30f3\u30b9 JSON HTML\uff08Thymeleaf\uff09 \u30ea\u30c0\u30a4\u30ec\u30af\u30c8 \u4e0d\u8981 PRG \u30d1\u30bf\u30fc\u30f3"},{"location":"article/study/study4-1/#34","title":"\u7b2c34\u7ae0\uff1a\u30de\u30b9\u30bf\u306e\u5b9f\u88c5","text":""},{"location":"article/study/study4-1/#341","title":"34.1 \u54c1\u76ee\u30de\u30b9\u30bf\u753b\u9762\u306e\u8a2d\u8a08","text":"\u753b\u9762 URL \u30e1\u30bd\u30c3\u30c9 \u8aac\u660e \u54c1\u76ee\u4e00\u89a7 /items GET \u54c1\u76ee\u306e\u691c\u7d22\u30fb\u4e00\u89a7\u8868\u793a \u54c1\u76ee\u8a73\u7d30 /items/{itemCode} GET \u54c1\u76ee\u306e\u8a73\u7d30\u8868\u793a \u54c1\u76ee\u767b\u9332 /items/new GET \u767b\u9332\u30d5\u30a9\u30fc\u30e0\u8868\u793a \u54c1\u76ee\u767b\u9332\u51e6\u7406 /items POST \u767b\u9332\u51e6\u7406 \u54c1\u76ee\u7de8\u96c6 /items/{itemCode}/edit GET \u7de8\u96c6\u30d5\u30a9\u30fc\u30e0\u8868\u793a \u54c1\u76ee\u66f4\u65b0\u51e6\u7406 /items/{itemCode} POST \u66f4\u65b0\u51e6\u7406\uff08PUT \u4ee3\u66ff\uff09 \u54c1\u76ee\u524a\u9664\u51e6\u7406 /items/{itemCode}/delete POST \u524a\u9664\u51e6\u7406\uff08DELETE \u4ee3\u66ff\uff09 <p>\u6ce8\u610f: HTML \u30d5\u30a9\u30fc\u30e0\u306f GET/POST \u306e\u307f\u5bfe\u5fdc\u306e\u305f\u3081\u3001PUT/DELETE \u306f POST \u3067\u4ee3\u66ff\u3057\u307e\u3059\u3002</p>"},{"location":"article/study/study4-1/#342","title":"34.2 \u30d5\u30a9\u30fc\u30e0\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u8a08","text":"ItemForm.java <pre><code>package com.example.production.infrastructure.web.form;\n\nimport com.example.production.application.port.in.CreateItemCommand;\nimport com.example.production.domain.model.item.ItemCategory;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.NotNull;\nimport jakarta.validation.constraints.Positive;\nimport jakarta.validation.constraints.Size;\nimport lombok.Data;\n\n/**\n * \u54c1\u76ee\u767b\u9332\u30fb\u7de8\u96c6\u30d5\u30a9\u30fc\u30e0\n */\n@Data\npublic class ItemForm {\n\n    @NotBlank(message = \"\u54c1\u76ee\u30b3\u30fc\u30c9\u306f\u5fc5\u9808\u3067\u3059\")\n    @Size(max = 20, message = \"\u54c1\u76ee\u30b3\u30fc\u30c9\u306f20\u6587\u5b57\u4ee5\u5185\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\")\n    private String itemCode;\n\n    @NotBlank(message = \"\u54c1\u540d\u306f\u5fc5\u9808\u3067\u3059\")\n    @Size(max = 100, message = \"\u54c1\u540d\u306f100\u6587\u5b57\u4ee5\u5185\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\")\n    private String itemName;\n\n    @NotNull(message = \"\u54c1\u76ee\u533a\u5206\u306f\u5fc5\u9808\u3067\u3059\")\n    private ItemCategory category;\n\n    private String itemGroupCode;\n\n    private String unitCode;\n\n    private String locationCode;\n\n    @Positive(message = \"\u30ea\u30fc\u30c9\u30bf\u30a4\u30e0\u306f\u6b63\u306e\u6574\u6570\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\")\n    private Integer leadTime;\n\n    @Positive(message = \"\u5b89\u5168\u5728\u5eab\u306f\u6b63\u306e\u6574\u6570\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\")\n    private Integer safetyStock;\n\n    /**\n     * \u30d5\u30a9\u30fc\u30e0\u3092\u30b3\u30de\u30f3\u30c9\u306b\u5909\u63db\n     */\n    public CreateItemCommand toCommand() {\n        return CreateItemCommand.builder()\n            .itemCode(this.itemCode)\n            .itemName(this.itemName)\n            .category(this.category)\n            .itemGroupCode(this.itemGroupCode)\n            .unitCode(this.unitCode)\n            .locationCode(this.locationCode)\n            .leadTime(this.leadTime)\n            .safetyStock(this.safetyStock)\n            .build();\n    }\n\n    /**\n     * \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u304b\u3089\u30d5\u30a9\u30fc\u30e0\u3092\u751f\u6210\n     */\n    public static ItemForm from(Item item) {\n        ItemForm form = new ItemForm();\n        form.setItemCode(item.getItemCode());\n        form.setItemName(item.getItemName());\n        form.setCategory(item.getCategory());\n        form.setItemGroupCode(item.getItemGroupCode());\n        form.setUnitCode(item.getUnitCode());\n        form.setLocationCode(item.getLocationCode());\n        form.setLeadTime(item.getLeadTime());\n        form.setSafetyStock(item.getSafetyStock());\n        return form;\n    }\n}\n</code></pre>"},{"location":"article/study/study4-1/#343-controller-tdd","title":"34.3 \u54c1\u76ee Controller \u306e TDD \u5b9f\u88c5","text":"ItemControllerTest.java <pre><code>package com.example.production.infrastructure.web.controller;\n\nimport com.example.production.domain.model.item.Item;\nimport com.example.production.domain.model.item.ItemCategory;\nimport com.example.production.infrastructure.persistence.mapper.ItemMapper;\nimport org.junit.jupiter.api.*;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.test.context.DynamicPropertyRegistry;\nimport org.springframework.test.context.DynamicPropertySource;\nimport org.springframework.test.web.servlet.MockMvc;\nimport org.testcontainers.containers.PostgreSQLContainer;\nimport org.testcontainers.junit.jupiter.Container;\nimport org.testcontainers.junit.jupiter.Testcontainers;\n\nimport java.time.LocalDate;\n\nimport static org.hamcrest.Matchers.*;\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;\n\n@SpringBootTest\n@AutoConfigureMockMvc\n@Testcontainers\n@DisplayName(\"\u54c1\u76ee\u30de\u30b9\u30bf\u753b\u9762\")\nclass ItemControllerTest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:15\")\n            .withDatabaseName(\"production_test\")\n            .withUsername(\"test\")\n            .withPassword(\"test\");\n\n    @DynamicPropertySource\n    static void configureProperties(DynamicPropertyRegistry registry) {\n        registry.add(\"spring.datasource.url\", postgres::getJdbcUrl);\n        registry.add(\"spring.datasource.username\", postgres::getUsername);\n        registry.add(\"spring.datasource.password\", postgres::getPassword);\n    }\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @Autowired\n    private ItemMapper itemMapper;\n\n    @BeforeEach\n    void setUp() {\n        itemMapper.deleteAll();\n    }\n\n    @Nested\n    @DisplayName(\"GET /items - \u54c1\u76ee\u4e00\u89a7\")\n    class ItemList {\n\n        @Test\n        @DisplayName(\"\u54c1\u76ee\u4e00\u89a7\u753b\u9762\u3092\u8868\u793a\u3067\u304d\u308b\")\n        void shouldDisplayItemList() throws Exception {\n            // Arrange\n            insertTestItem(\"PROD-001\", \"\u30c6\u30b9\u30c8\u88fd\u54c1\", ItemCategory.PRODUCT);\n\n            // Act &amp; Assert\n            mockMvc.perform(get(\"/items\"))\n                .andExpect(status().isOk())\n                .andExpect(view().name(\"items/list\"))\n                .andExpect(model().attributeExists(\"items\"))\n                .andExpect(content().string(containsString(\"PROD-001\")))\n                .andExpect(content().string(containsString(\"\u30c6\u30b9\u30c8\u88fd\u54c1\")));\n        }\n\n        @Test\n        @DisplayName(\"\u54c1\u76ee\u533a\u5206\u3067\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3067\u304d\u308b\")\n        void shouldFilterByCategory() throws Exception {\n            // Arrange\n            insertTestItem(\"PROD-001\", \"\u88fd\u54c1A\", ItemCategory.PRODUCT);\n            insertTestItem(\"PART-001\", \"\u90e8\u54c1A\", ItemCategory.PART);\n\n            // Act &amp; Assert\n            mockMvc.perform(get(\"/items\").param(\"category\", \"PRODUCT\"))\n                .andExpect(status().isOk())\n                .andExpect(model().attribute(\"items\", hasSize(1)))\n                .andExpect(content().string(containsString(\"\u88fd\u54c1A\")))\n                .andExpect(content().string(not(containsString(\"\u90e8\u54c1A\"))));\n        }\n    }\n\n    @Nested\n    @DisplayName(\"POST /items - \u54c1\u76ee\u767b\u9332\u51e6\u7406\")\n    class CreateItem {\n\n        @Test\n        @DisplayName(\"\u54c1\u76ee\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void shouldCreateItem() throws Exception {\n            mockMvc.perform(post(\"/items\")\n                    .param(\"itemCode\", \"NEW-001\")\n                    .param(\"itemName\", \"\u65b0\u898f\u54c1\u76ee\")\n                    .param(\"category\", \"PRODUCT\"))\n                .andExpect(status().is3xxRedirection())\n                .andExpect(redirectedUrl(\"/items\"))\n                .andExpect(flash().attribute(\"successMessage\", containsString(\"\u767b\u9332\")));\n\n            // \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\n            var saved = itemMapper.findByCode(\"NEW-001\");\n            Assertions.assertNotNull(saved);\n            Assertions.assertEquals(\"\u65b0\u898f\u54c1\u76ee\", saved.getItemName());\n        }\n\n        @Test\n        @DisplayName(\"\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\u6642\u306f\u5165\u529b\u753b\u9762\u306b\u623b\u308b\")\n        void shouldReturnFormOnValidationError() throws Exception {\n            mockMvc.perform(post(\"/items\")\n                    .param(\"itemCode\", \"\")  // \u5fc5\u9808\u9805\u76ee\u304c\u7a7a\n                    .param(\"itemName\", \"\")\n                    .param(\"category\", \"PRODUCT\"))\n                .andExpect(status().isOk())\n                .andExpect(view().name(\"items/new\"))\n                .andExpect(model().attributeHasFieldErrors(\"form\", \"itemCode\", \"itemName\"));\n        }\n    }\n\n    private void insertTestItem(String code, String name, ItemCategory category) {\n        itemMapper.insert(Item.builder()\n            .itemCode(code)\n            .effectiveDate(LocalDate.of(2025, 1, 1))\n            .itemName(name)\n            .category(category)\n            .build());\n    }\n}\n</code></pre> ItemController.java <pre><code>package com.example.production.infrastructure.web.controller;\n\nimport com.example.production.application.port.in.*;\nimport com.example.production.domain.exception.DuplicateItemException;\nimport com.example.production.domain.exception.ItemNotFoundException;\nimport com.example.production.domain.model.item.Item;\nimport com.example.production.domain.model.item.ItemCategory;\nimport com.example.production.infrastructure.web.form.ItemForm;\nimport jakarta.validation.Valid;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.validation.BindingResult;\nimport org.springframework.web.bind.annotation.*;\nimport org.springframework.web.servlet.mvc.support.RedirectAttributes;\n\nimport java.util.List;\n\n/**\n * \u54c1\u76ee\u30de\u30b9\u30bf Controller\uff08\u30e2\u30ce\u30ea\u30b9\u7248\uff09\n */\n@Controller\n@RequestMapping(\"/items\")\npublic class ItemController {\n\n    private final ItemUseCase itemUseCase;\n\n    public ItemController(ItemUseCase itemUseCase) {\n        this.itemUseCase = itemUseCase;\n    }\n\n    /**\n     * \u54c1\u76ee\u4e00\u89a7\u753b\u9762\n     */\n    @GetMapping\n    public String list(\n            @RequestParam(required = false) ItemCategory category,\n            @RequestParam(required = false) String keyword,\n            Model model) {\n\n        List&lt;Item&gt; items;\n        if (category != null) {\n            items = itemUseCase.getItemsByCategory(category);\n        } else if (keyword != null &amp;&amp; !keyword.isBlank()) {\n            items = itemUseCase.searchItems(keyword);\n        } else {\n            items = itemUseCase.getAllItems();\n        }\n\n        model.addAttribute(\"items\", items);\n        model.addAttribute(\"categories\", ItemCategory.values());\n        model.addAttribute(\"selectedCategory\", category);\n        model.addAttribute(\"keyword\", keyword);\n\n        return \"items/list\";\n    }\n\n    /**\n     * \u54c1\u76ee\u8a73\u7d30\u753b\u9762\n     */\n    @GetMapping(\"/{itemCode}\")\n    public String detail(@PathVariable String itemCode, Model model) {\n        Item item = itemUseCase.getItemByCode(itemCode);\n        model.addAttribute(\"item\", item);\n        return \"items/detail\";\n    }\n\n    /**\n     * \u54c1\u76ee\u767b\u9332\u753b\u9762\n     */\n    @GetMapping(\"/new\")\n    public String newForm(Model model) {\n        model.addAttribute(\"form\", new ItemForm());\n        model.addAttribute(\"categories\", ItemCategory.values());\n        return \"items/new\";\n    }\n\n    /**\n     * \u54c1\u76ee\u767b\u9332\u51e6\u7406\n     */\n    @PostMapping\n    public String create(\n            @Valid @ModelAttribute(\"form\") ItemForm form,\n            BindingResult bindingResult,\n            Model model,\n            RedirectAttributes redirectAttributes) {\n\n        if (bindingResult.hasErrors()) {\n            model.addAttribute(\"categories\", ItemCategory.values());\n            return \"items/new\";\n        }\n\n        try {\n            itemUseCase.createItem(form.toCommand());\n            redirectAttributes.addFlashAttribute(\"successMessage\",\n                \"\u54c1\u76ee\u300c\" + form.getItemCode() + \"\u300d\u3092\u767b\u9332\u3057\u307e\u3057\u305f\");\n            return \"redirect:/items\";\n        } catch (DuplicateItemException e) {\n            model.addAttribute(\"errorMessage\",\n                \"\u54c1\u76ee\u30b3\u30fc\u30c9\u300c\" + form.getItemCode() + \"\u300d\u306f\u65e2\u306b\u5b58\u5728\u3057\u307e\u3059\");\n            model.addAttribute(\"categories\", ItemCategory.values());\n            return \"items/new\";\n        }\n    }\n\n    /**\n     * \u54c1\u76ee\u524a\u9664\u51e6\u7406\n     */\n    @PostMapping(\"/{itemCode}/delete\")\n    public String delete(\n            @PathVariable String itemCode,\n            RedirectAttributes redirectAttributes) {\n\n        itemUseCase.deleteItem(itemCode);\n        redirectAttributes.addFlashAttribute(\"successMessage\",\n            \"\u54c1\u76ee\u300c\" + itemCode + \"\u300d\u3092\u524a\u9664\u3057\u307e\u3057\u305f\");\n        return \"redirect:/items\";\n    }\n\n    /**\n     * \u4f8b\u5916\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\uff08\u54c1\u76ee\u304c\u898b\u3064\u304b\u3089\u306a\u3044\u5834\u5408\uff09\n     */\n    @ExceptionHandler(ItemNotFoundException.class)\n    @ResponseStatus(org.springframework.http.HttpStatus.NOT_FOUND)\n    public String handleItemNotFound(ItemNotFoundException e, Model model) {\n        model.addAttribute(\"errorMessage\", e.getMessage());\n        return \"error/404\";\n    }\n}\n</code></pre>"},{"location":"article/study/study4-1/#344","title":"34.4 \u54c1\u76ee\u4e00\u89a7\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8","text":"items/list.html <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html xmlns:th=\"http://www.thymeleaf.org\"\n      xmlns:layout=\"http://www.ultraq.net.nz/thymeleaf/layout\"\n      layout:decorate=\"~{layout/default}\"&gt;\n&lt;head&gt;\n    &lt;title&gt;\u54c1\u76ee\u30de\u30b9\u30bf&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div layout:fragment=\"content\"&gt;\n    &lt;div class=\"d-flex justify-content-between align-items-center mb-4\"&gt;\n        &lt;h1&gt;\u54c1\u76ee\u30de\u30b9\u30bf&lt;/h1&gt;\n        &lt;a th:href=\"@{/items/new}\" class=\"btn btn-primary\"&gt;\n            \u65b0\u898f\u767b\u9332\n        &lt;/a&gt;\n    &lt;/div&gt;\n\n    &lt;!-- \u691c\u7d22\u30d5\u30a9\u30fc\u30e0 --&gt;\n    &lt;div class=\"card mb-4\"&gt;\n        &lt;div class=\"card-body\"&gt;\n            &lt;form th:action=\"@{/items}\" method=\"get\" class=\"row g-3\"&gt;\n                &lt;div class=\"col-md-4\"&gt;\n                    &lt;label class=\"form-label\"&gt;\u30ad\u30fc\u30ef\u30fc\u30c9\u691c\u7d22&lt;/label&gt;\n                    &lt;input type=\"text\" class=\"form-control\" name=\"keyword\"\n                           th:value=\"${keyword}\" placeholder=\"\u54c1\u76ee\u30b3\u30fc\u30c9\u307e\u305f\u306f\u54c1\u540d\"&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-md-3\"&gt;\n                    &lt;label class=\"form-label\"&gt;\u54c1\u76ee\u533a\u5206&lt;/label&gt;\n                    &lt;select class=\"form-select\" name=\"category\"&gt;\n                        &lt;option value=\"\"&gt;\u3059\u3079\u3066&lt;/option&gt;\n                        &lt;option th:each=\"cat : ${categories}\"\n                                th:value=\"${cat}\"\n                                th:text=\"${cat.displayName}\"\n                                th:selected=\"${cat == selectedCategory}\"&gt;&lt;/option&gt;\n                    &lt;/select&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-md-2 d-flex align-items-end\"&gt;\n                    &lt;button type=\"submit\" class=\"btn btn-secondary\"&gt;\u691c\u7d22&lt;/button&gt;\n                &lt;/div&gt;\n            &lt;/form&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- \u54c1\u76ee\u4e00\u89a7\u30c6\u30fc\u30d6\u30eb --&gt;\n    &lt;div class=\"card\"&gt;\n        &lt;div class=\"card-body\"&gt;\n            &lt;table class=\"table table-striped table-hover\" th:if=\"${not #lists.isEmpty(items)}\"&gt;\n                &lt;thead&gt;\n                    &lt;tr&gt;\n                        &lt;th&gt;\u54c1\u76ee\u30b3\u30fc\u30c9&lt;/th&gt;\n                        &lt;th&gt;\u54c1\u540d&lt;/th&gt;\n                        &lt;th&gt;\u54c1\u76ee\u533a\u5206&lt;/th&gt;\n                        &lt;th&gt;\u30ea\u30fc\u30c9\u30bf\u30a4\u30e0&lt;/th&gt;\n                        &lt;th&gt;\u5b89\u5168\u5728\u5eab&lt;/th&gt;\n                        &lt;th&gt;\u64cd\u4f5c&lt;/th&gt;\n                    &lt;/tr&gt;\n                &lt;/thead&gt;\n                &lt;tbody&gt;\n                    &lt;tr th:each=\"item : ${items}\"&gt;\n                        &lt;td&gt;\n                            &lt;a th:href=\"@{/items/{code}(code=${item.itemCode})}\"\n                               th:text=\"${item.itemCode}\"&gt;&lt;/a&gt;\n                        &lt;/td&gt;\n                        &lt;td th:text=\"${item.itemName}\"&gt;&lt;/td&gt;\n                        &lt;td&gt;\n                            &lt;span class=\"badge\"\n                                  th:classappend=\"${item.category.name() == 'PRODUCT'} ? 'bg-primary' :\n                                                  (${item.category.name() == 'PART'} ? 'bg-success' : 'bg-secondary')\"\n                                  th:text=\"${item.category.displayName}\"&gt;&lt;/span&gt;\n                        &lt;/td&gt;\n                        &lt;td th:text=\"${item.leadTime} + ' \u65e5'\" th:if=\"${item.leadTime}\"&gt;&lt;/td&gt;\n                        &lt;td th:unless=\"${item.leadTime}\"&gt;-&lt;/td&gt;\n                        &lt;td th:text=\"${item.safetyStock}\" th:if=\"${item.safetyStock}\"&gt;&lt;/td&gt;\n                        &lt;td th:unless=\"${item.safetyStock}\"&gt;-&lt;/td&gt;\n                        &lt;td&gt;\n                            &lt;a th:href=\"@{/items/{code}/edit(code=${item.itemCode})}\"\n                               class=\"btn btn-sm btn-outline-primary\"&gt;\u7de8\u96c6&lt;/a&gt;\n                            &lt;form th:action=\"@{/items/{code}/delete(code=${item.itemCode})}\"\n                                  method=\"post\" class=\"d-inline\"\n                                  onsubmit=\"return confirm('\u672c\u5f53\u306b\u524a\u9664\u3057\u307e\u3059\u304b\uff1f');\"&gt;\n                                &lt;button type=\"submit\" class=\"btn btn-sm btn-outline-danger\"&gt;\u524a\u9664&lt;/button&gt;\n                            &lt;/form&gt;\n                        &lt;/td&gt;\n                    &lt;/tr&gt;\n                &lt;/tbody&gt;\n            &lt;/table&gt;\n            &lt;div th:if=\"${#lists.isEmpty(items)}\" class=\"alert alert-info\"&gt;\n                \u8a72\u5f53\u3059\u308b\u54c1\u76ee\u304c\u3042\u308a\u307e\u305b\u3093\u3002\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- \u4ef6\u6570\u8868\u793a --&gt;\n    &lt;div class=\"mt-3 text-muted\"&gt;\n        \u5168 &lt;span th:text=\"${#lists.size(items)}\"&gt;0&lt;/span&gt; \u4ef6\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"article/study/study4-1/#345-bom","title":"34.5 BOM \u30de\u30b9\u30bf\u753b\u9762\u306e\u5b9f\u88c5","text":"BomController.java <pre><code>@Controller\n@RequestMapping(\"/bom\")\npublic class BomController {\n\n    private final BomService bomService;\n    private final ItemUseCase itemUseCase;\n\n    public BomController(BomService bomService, ItemUseCase itemUseCase) {\n        this.bomService = bomService;\n        this.itemUseCase = itemUseCase;\n    }\n\n    /**\n     * BOM \u4e00\u89a7\u753b\u9762\uff08\u88fd\u54c1\u306e\u4e00\u89a7\uff09\n     */\n    @GetMapping\n    public String list(Model model) {\n        List&lt;Item&gt; products = itemUseCase.getItemsByCategory(ItemCategory.PRODUCT);\n        model.addAttribute(\"products\", products);\n        return \"bom/list\";\n    }\n\n    /**\n     * BOM \u69cb\u6210\u8868\u793a\uff08\u30c4\u30ea\u30fc\u5c55\u958b\uff09\n     */\n    @GetMapping(\"/{itemCode}/explode\")\n    public String explode(@PathVariable String itemCode, Model model) {\n        BomNode tree = bomService.explodeBom(itemCode);\n        Item item = itemUseCase.getItemByCode(itemCode);\n\n        model.addAttribute(\"item\", item);\n        model.addAttribute(\"bomTree\", tree);\n        return \"bom/explode\";\n    }\n\n    /**\n     * \u9006\u5c55\u958b\uff08\u4f7f\u7528\u5148\u7167\u4f1a\uff09\n     */\n    @GetMapping(\"/{itemCode}/where-used\")\n    public String whereUsed(@PathVariable String itemCode, Model model) {\n        List&lt;WhereUsedResult&gt; parents = bomService.whereUsed(itemCode);\n        Item item = itemUseCase.getItemByCode(itemCode);\n\n        model.addAttribute(\"item\", item);\n        model.addAttribute(\"parents\", parents);\n        return \"bom/where-used\";\n    }\n}\n</code></pre> bom/explode.html\uff08BOM \u5c55\u958b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\uff09 <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html xmlns:th=\"http://www.thymeleaf.org\"\n      xmlns:layout=\"http://www.ultraq.net.nz/thymeleaf/layout\"\n      layout:decorate=\"~{layout/default}\"&gt;\n&lt;head&gt;\n    &lt;title&gt;BOM \u5c55\u958b&lt;/title&gt;\n    &lt;style&gt;\n        .bom-tree { list-style-type: none; padding-left: 0; }\n        .bom-tree ul { list-style-type: none; padding-left: 20px; }\n        .bom-item { padding: 5px; border-left: 2px solid #dee2e6; margin-bottom: 2px; }\n        .bom-item:hover { background-color: #f8f9fa; }\n        .level-0 { border-left-color: #0d6efd; }\n        .level-1 { border-left-color: #198754; }\n        .level-2 { border-left-color: #ffc107; }\n        .level-3 { border-left-color: #dc3545; }\n    &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div layout:fragment=\"content\"&gt;\n    &lt;h1 class=\"mb-4\"&gt;BOM \u5c55\u958b&lt;/h1&gt;\n\n    &lt;div class=\"card mb-4\"&gt;\n        &lt;div class=\"card-header\"&gt;\n            &lt;strong th:text=\"${item.itemCode}\"&gt;&lt;/strong&gt; -\n            &lt;span th:text=\"${item.itemName}\"&gt;&lt;/span&gt;\n        &lt;/div&gt;\n        &lt;div class=\"card-body\"&gt;\n            &lt;!-- \u518d\u5e30\u7684\u306a\u30c4\u30ea\u30fc\u8868\u793a --&gt;\n            &lt;ul class=\"bom-tree\"&gt;\n                &lt;th:block th:replace=\"~{bom/fragments :: bomNode(${bomTree})}\"&gt;&lt;/th:block&gt;\n            &lt;/ul&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;a th:href=\"@{/bom}\" class=\"btn btn-secondary\"&gt;\u623b\u308b&lt;/a&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"article/study/study4-1/#35","title":"\u7b2c35\u7ae0\uff1a\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306e\u5b9f\u88c5","text":""},{"location":"article/study/study4-1/#351","title":"35.1 \u767a\u6ce8\u696d\u52d9\u753b\u9762\u306e\u5b9f\u88c5","text":"PurchaseOrderController.java <pre><code>@Controller\n@RequestMapping(\"/purchase-orders\")\npublic class PurchaseOrderController {\n\n    private final PurchaseOrderUseCase purchaseOrderUseCase;\n    private final ItemUseCase itemUseCase;\n    private final SupplierUseCase supplierUseCase;\n\n    // ... \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u7701\u7565\n\n    /**\n     * \u767a\u6ce8\u4e00\u89a7\u753b\u9762\n     */\n    @GetMapping\n    public String list(\n            @RequestParam(required = false) String status,\n            @RequestParam(required = false) String supplierCode,\n            Model model) {\n\n        List&lt;PurchaseOrder&gt; orders = purchaseOrderUseCase.getOrders(status, supplierCode);\n        model.addAttribute(\"orders\", orders);\n        model.addAttribute(\"suppliers\", supplierUseCase.getAllSuppliers());\n        return \"purchase-orders/list\";\n    }\n\n    /**\n     * \u767a\u6ce8\u767b\u9332\u753b\u9762\n     */\n    @GetMapping(\"/new\")\n    public String newForm(Model model) {\n        model.addAttribute(\"form\", new PurchaseOrderForm());\n        model.addAttribute(\"suppliers\", supplierUseCase.getAllSuppliers());\n        model.addAttribute(\"items\", itemUseCase.getItemsByCategory(ItemCategory.MATERIAL));\n        return \"purchase-orders/new\";\n    }\n\n    /**\n     * \u767a\u6ce8\u767b\u9332\u51e6\u7406\n     */\n    @PostMapping\n    public String create(\n            @Valid @ModelAttribute(\"form\") PurchaseOrderForm form,\n            BindingResult bindingResult,\n            Model model,\n            RedirectAttributes redirectAttributes) {\n\n        if (bindingResult.hasErrors()) {\n            model.addAttribute(\"suppliers\", supplierUseCase.getAllSuppliers());\n            model.addAttribute(\"items\", itemUseCase.getItemsByCategory(ItemCategory.MATERIAL));\n            return \"purchase-orders/new\";\n        }\n\n        PurchaseOrder order = purchaseOrderUseCase.createOrder(form.toCommand());\n        redirectAttributes.addFlashAttribute(\"successMessage\",\n            \"\u767a\u6ce8\u300c\" + order.getOrderNumber() + \"\u300d\u3092\u767b\u9332\u3057\u307e\u3057\u305f\");\n        return \"redirect:/purchase-orders\";\n    }\n\n    /**\n     * \u767a\u6ce8\u78ba\u5b9a\u51e6\u7406\n     */\n    @PostMapping(\"/{orderNumber}/confirm\")\n    public String confirm(\n            @PathVariable String orderNumber,\n            RedirectAttributes redirectAttributes) {\n\n        purchaseOrderUseCase.confirmOrder(orderNumber);\n        redirectAttributes.addFlashAttribute(\"successMessage\",\n            \"\u767a\u6ce8\u300c\" + orderNumber + \"\u300d\u3092\u78ba\u5b9a\u3057\u307e\u3057\u305f\");\n        return \"redirect:/purchase-orders/\" + orderNumber;\n    }\n}\n</code></pre>"},{"location":"article/study/study4-1/#352-mrp","title":"35.2 MRP \u5b9f\u884c\u753b\u9762\u306e\u5b9f\u88c5","text":"MrpController.java <pre><code>@Controller\n@RequestMapping(\"/mrp\")\npublic class MrpController {\n\n    private final MrpService mrpService;\n\n    public MrpController(MrpService mrpService) {\n        this.mrpService = mrpService;\n    }\n\n    /**\n     * MRP \u5b9f\u884c\u753b\u9762\n     */\n    @GetMapping\n    public String index(Model model) {\n        model.addAttribute(\"form\", new MrpExecuteForm());\n        return \"mrp/index\";\n    }\n\n    /**\n     * MRP \u5b9f\u884c\u51e6\u7406\n     */\n    @PostMapping(\"/execute\")\n    public String execute(\n            @Valid @ModelAttribute(\"form\") MrpExecuteForm form,\n            BindingResult bindingResult,\n            Model model,\n            RedirectAttributes redirectAttributes) {\n\n        if (bindingResult.hasErrors()) {\n            return \"mrp/index\";\n        }\n\n        MrpResult result = mrpService.execute(form.getStartDate(), form.getEndDate());\n\n        // \u7d50\u679c\u3092\u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u4fdd\u5b58\uff08\u5927\u91cf\u30c7\u30fc\u30bf\u306e\u305f\u3081\uff09\n        model.addAttribute(\"result\", result);\n        return \"mrp/result\";\n    }\n\n    /**\n     * MRP \u7d50\u679c\u306e\u5e33\u7968\u51fa\u529b\uff08Excel\uff09\n     */\n    @GetMapping(\"/export\")\n    public ResponseEntity&lt;Resource&gt; exportExcel(HttpSession session) {\n        MrpResult result = (MrpResult) session.getAttribute(\"mrpResult\");\n        if (result == null) {\n            throw new IllegalStateException(\"MRP \u7d50\u679c\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\");\n        }\n\n        ByteArrayResource resource = mrpService.exportToExcel(result);\n\n        return ResponseEntity.ok()\n            .header(HttpHeaders.CONTENT_DISPOSITION,\n                \"attachment; filename=mrp-result.xlsx\")\n            .contentType(MediaType.parseMediaType(\n                \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"))\n            .body(resource);\n    }\n}\n</code></pre>"},{"location":"article/study/study4-1/#36","title":"\u7b2c36\u7ae0\uff1a\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3068\u5e33\u7968\u51fa\u529b","text":""},{"location":"article/study/study4-1/#361","title":"36.1 \u30b0\u30ed\u30fc\u30d0\u30eb\u4f8b\u5916\u30cf\u30f3\u30c9\u30e9","text":"GlobalExceptionHandler.java <pre><code>package com.example.production.infrastructure.web.exception;\n\nimport com.example.production.domain.exception.*;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.ControllerAdvice;\nimport org.springframework.web.bind.annotation.ExceptionHandler;\nimport org.springframework.web.servlet.mvc.support.RedirectAttributes;\n\n/**\n * \u30b0\u30ed\u30fc\u30d0\u30eb\u4f8b\u5916\u30cf\u30f3\u30c9\u30e9\uff08\u30e2\u30ce\u30ea\u30b9\u7248\uff09\n */\n@ControllerAdvice\npublic class GlobalExceptionHandler {\n\n    /**\n     * \u54c1\u76ee\u304c\u898b\u3064\u304b\u3089\u306a\u3044\n     */\n    @ExceptionHandler(ItemNotFoundException.class)\n    public String handleItemNotFound(ItemNotFoundException e, Model model) {\n        model.addAttribute(\"errorTitle\", \"\u54c1\u76ee\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\");\n        model.addAttribute(\"errorMessage\", e.getMessage());\n        return \"error/404\";\n    }\n\n    /**\n     * \u91cd\u8907\u30a8\u30e9\u30fc\n     */\n    @ExceptionHandler(DuplicateItemException.class)\n    public String handleDuplicate(DuplicateItemException e, RedirectAttributes redirectAttributes) {\n        redirectAttributes.addFlashAttribute(\"errorMessage\", e.getMessage());\n        return \"redirect:/items/new\";\n    }\n\n    /**\n     * \u5728\u5eab\u4e0d\u8db3\n     */\n    @ExceptionHandler(InsufficientInventoryException.class)\n    public String handleInsufficientInventory(InsufficientInventoryException e, Model model) {\n        model.addAttribute(\"errorTitle\", \"\u5728\u5eab\u4e0d\u8db3\");\n        model.addAttribute(\"errorMessage\", e.getMessage());\n        return \"error/business-error\";\n    }\n\n    /**\n     * \u305d\u306e\u4ed6\u306e\u4f8b\u5916\n     */\n    @ExceptionHandler(Exception.class)\n    public String handleGenericException(Exception e, Model model) {\n        model.addAttribute(\"errorTitle\", \"\u30b7\u30b9\u30c6\u30e0\u30a8\u30e9\u30fc\");\n        model.addAttribute(\"errorMessage\", \"\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u7ba1\u7406\u8005\u306b\u9023\u7d61\u3057\u3066\u304f\u3060\u3055\u3044\u3002\");\n        model.addAttribute(\"errorDetail\", e.getMessage());\n        return \"error/500\";\n    }\n}\n</code></pre>"},{"location":"article/study/study4-1/#362-excel","title":"36.2 \u5e33\u7968\u51fa\u529b\uff08Excel\uff09","text":"ReportService.java <pre><code>@Service\npublic class ReportService {\n\n    /**\n     * \u5728\u5eab\u4e00\u89a7\u3092 Excel \u51fa\u529b\n     */\n    public ByteArrayResource exportInventoryToExcel(List&lt;Stock&gt; stocks) {\n        try (Workbook workbook = new XSSFWorkbook()) {\n            Sheet sheet = workbook.createSheet(\"\u5728\u5eab\u4e00\u89a7\");\n\n            // \u30d8\u30c3\u30c0\u30fc\u884c\n            Row headerRow = sheet.createRow(0);\n            String[] headers = {\"\u5834\u6240\u30b3\u30fc\u30c9\", \"\u54c1\u76ee\u30b3\u30fc\u30c9\", \"\u54c1\u540d\", \"\u5728\u5eab\u6570\u91cf\", \"\u5728\u5eab\u72b6\u614b\"};\n            for (int i = 0; i &lt; headers.length; i++) {\n                Cell cell = headerRow.createCell(i);\n                cell.setCellValue(headers[i]);\n            }\n\n            // \u30c7\u30fc\u30bf\u884c\n            int rowNum = 1;\n            for (Stock stock : stocks) {\n                Row row = sheet.createRow(rowNum++);\n                row.createCell(0).setCellValue(stock.getLocationCode());\n                row.createCell(1).setCellValue(stock.getItemCode());\n                row.createCell(2).setCellValue(stock.getItemName());\n                row.createCell(3).setCellValue(stock.getQuantity().doubleValue());\n                row.createCell(4).setCellValue(stock.getStatus().getDisplayName());\n            }\n\n            // \u5217\u5e45\u81ea\u52d5\u8abf\u6574\n            for (int i = 0; i &lt; headers.length; i++) {\n                sheet.autoSizeColumn(i);\n            }\n\n            ByteArrayOutputStream out = new ByteArrayOutputStream();\n            workbook.write(out);\n            return new ByteArrayResource(out.toByteArray());\n\n        } catch (IOException e) {\n            throw new RuntimeException(\"Excel \u51fa\u529b\u306b\u5931\u6557\u3057\u307e\u3057\u305f\", e);\n        }\n    }\n}\n</code></pre> ReportController.java <pre><code>@Controller\n@RequestMapping(\"/reports\")\npublic class ReportController {\n\n    private final ReportService reportService;\n    private final InventoryUseCase inventoryUseCase;\n\n    // ... \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u7701\u7565\n\n    @GetMapping(\"/inventory/excel\")\n    public ResponseEntity&lt;Resource&gt; exportInventoryExcel(\n            @RequestParam(required = false) String locationCode) {\n\n        List&lt;Stock&gt; stocks = inventoryUseCase.getInventory(\n            InventoryQuery.builder().locationCode(locationCode).build());\n\n        ByteArrayResource resource = reportService.exportInventoryToExcel(stocks);\n\n        String filename = \"inventory-\" + LocalDate.now() + \".xlsx\";\n\n        return ResponseEntity.ok()\n            .header(HttpHeaders.CONTENT_DISPOSITION,\n                \"attachment; filename=\" + filename)\n            .contentType(MediaType.parseMediaType(\n                \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"))\n            .body(resource);\n    }\n}\n</code></pre>"},{"location":"article/study/study4-1/#37","title":"\u7b2c37\u7ae0\uff1a\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3","text":""},{"location":"article/study/study4-1/#371","title":"37.1 \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u306e\u6982\u8981","text":"<p>\u5927\u91cf\u306e\u30c7\u30fc\u30bf\u3092\u6271\u3046\u4e00\u89a7\u753b\u9762\u3067\u306f\u3001\u3059\u3079\u3066\u306e\u30c7\u30fc\u30bf\u3092\u4e00\u5ea6\u306b\u8868\u793a\u3059\u308b\u3068\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u4f4e\u4e0b\u3084\u30e6\u30fc\u30b6\u30d3\u30ea\u30c6\u30a3\u306e\u554f\u984c\u304c\u767a\u751f\u3057\u307e\u3059\u3002\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\uff08\u30da\u30fc\u30b8\u5206\u5272\uff09\u3092\u5b9f\u88c5\u3059\u308b\u3053\u3068\u3067\u3001\u3053\u308c\u3089\u306e\u554f\u984c\u3092\u89e3\u6c7a\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"article/study/study4-1/#372","title":"37.2 \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u7528\u306e\u30c9\u30e1\u30a4\u30f3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8","text":"PageInfo.java\uff08\u30da\u30fc\u30b8\u60c5\u5831\uff09 <pre><code>package com.example.production.domain.model.common;\n\nimport lombok.Builder;\nimport lombok.Value;\n\nimport java.util.List;\n\n/**\n * \u30da\u30fc\u30b8\u60c5\u5831\u3092\u4fdd\u6301\u3059\u308b\u30af\u30e9\u30b9\n */\n@Value\n@Builder\npublic class PageInfo&lt;T&gt; {\n\n    List&lt;T&gt; content;           // \u73fe\u5728\u306e\u30da\u30fc\u30b8\u306e\u30c7\u30fc\u30bf\n    int currentPage;           // \u73fe\u5728\u306e\u30da\u30fc\u30b8\u756a\u53f7\uff080\u59cb\u307e\u308a\uff09\n    int pageSize;              // 1\u30da\u30fc\u30b8\u3042\u305f\u308a\u306e\u4ef6\u6570\n    long totalElements;        // \u7dcf\u4ef6\u6570\n    int totalPages;            // \u7dcf\u30da\u30fc\u30b8\u6570\n\n    /**\n     * \u6700\u521d\u306e\u30da\u30fc\u30b8\u304b\u3069\u3046\u304b\n     */\n    public boolean isFirst() {\n        return currentPage == 0;\n    }\n\n    /**\n     * \u6700\u5f8c\u306e\u30da\u30fc\u30b8\u304b\u3069\u3046\u304b\n     */\n    public boolean isLast() {\n        return currentPage &gt;= totalPages - 1;\n    }\n\n    /**\n     * \u524d\u306e\u30da\u30fc\u30b8\u304c\u3042\u308b\u304b\u3069\u3046\u304b\n     */\n    public boolean hasPrevious() {\n        return currentPage &gt; 0;\n    }\n\n    /**\n     * \u6b21\u306e\u30da\u30fc\u30b8\u304c\u3042\u308b\u304b\u3069\u3046\u304b\n     */\n    public boolean hasNext() {\n        return currentPage &lt; totalPages - 1;\n    }\n\n    /**\n     * \u8868\u793a\u7528\u306e\u30da\u30fc\u30b8\u756a\u53f7\u30ea\u30b9\u30c8\u3092\u53d6\u5f97\uff08\u524d\u5f8c2\u30da\u30fc\u30b8\u305a\u3064\uff09\n     */\n    public List&lt;Integer&gt; getPageNumbers() {\n        int start = Math.max(0, currentPage - 2);\n        int end = Math.min(totalPages - 1, currentPage + 2);\n\n        return java.util.stream.IntStream.rangeClosed(start, end)\n            .boxed()\n            .toList();\n    }\n\n    /**\n     * \u958b\u59cb\u30ec\u30b3\u30fc\u30c9\u756a\u53f7\uff08\u8868\u793a\u7528\u30011\u59cb\u307e\u308a\uff09\n     */\n    public long getStartRecord() {\n        return (long) currentPage * pageSize + 1;\n    }\n\n    /**\n     * \u7d42\u4e86\u30ec\u30b3\u30fc\u30c9\u756a\u53f7\uff08\u8868\u793a\u7528\uff09\n     */\n    public long getEndRecord() {\n        return Math.min((long) (currentPage + 1) * pageSize, totalElements);\n    }\n}\n</code></pre> PageRequest.java\uff08\u30da\u30fc\u30b8\u30ea\u30af\u30a8\u30b9\u30c8\uff09 <pre><code>package com.example.production.domain.model.common;\n\nimport lombok.Builder;\nimport lombok.Value;\n\n/**\n * \u30da\u30fc\u30b8\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u4fdd\u6301\u3059\u308b\u30af\u30e9\u30b9\n */\n@Value\n@Builder\npublic class PageRequest {\n\n    int page;       // \u30da\u30fc\u30b8\u756a\u53f7\uff080\u59cb\u307e\u308a\uff09\n    int size;       // 1\u30da\u30fc\u30b8\u3042\u305f\u308a\u306e\u4ef6\u6570\n    String sortBy;  // \u30bd\u30fc\u30c8\u30ab\u30e9\u30e0\n    String sortDir; // \u30bd\u30fc\u30c8\u65b9\u5411\uff08asc/desc\uff09\n\n    public static PageRequest of(int page, int size) {\n        return PageRequest.builder()\n            .page(Math.max(0, page))\n            .size(Math.min(100, Math.max(1, size)))  // 1\u301c100\u306e\u7bc4\u56f2\n            .build();\n    }\n\n    public static PageRequest of(int page, int size, String sortBy, String sortDir) {\n        return PageRequest.builder()\n            .page(Math.max(0, page))\n            .size(Math.min(100, Math.max(1, size)))\n            .sortBy(sortBy)\n            .sortDir(\"desc\".equalsIgnoreCase(sortDir) ? \"desc\" : \"asc\")\n            .build();\n    }\n\n    public int getOffset() {\n        return page * size;\n    }\n}\n</code></pre>"},{"location":"article/study/study4-1/#373-repository","title":"37.3 Repository \u5c64\u306e\u5b9f\u88c5","text":"ItemRepository.java\uff08\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u5bfe\u5fdc\uff09 <pre><code>package com.example.production.application.port.out;\n\nimport com.example.production.domain.model.common.PageInfo;\nimport com.example.production.domain.model.common.PageRequest;\nimport com.example.production.domain.model.item.Item;\n\nimport java.util.List;\nimport java.util.Optional;\n\npublic interface ItemRepository {\n\n    /**\n     * \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u4ed8\u304d\u3067\u54c1\u76ee\u4e00\u89a7\u3092\u53d6\u5f97\n     */\n    PageInfo&lt;Item&gt; findAll(PageRequest pageRequest);\n\n    /**\n     * \u30ad\u30fc\u30ef\u30fc\u30c9\u691c\u7d22\uff08\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u4ed8\u304d\uff09\n     */\n    PageInfo&lt;Item&gt; searchByKeyword(String keyword, PageRequest pageRequest);\n\n    /**\n     * \u54c1\u76ee\u533a\u5206\u3067\u691c\u7d22\uff08\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u4ed8\u304d\uff09\n     */\n    PageInfo&lt;Item&gt; findByCategory(String category, PageRequest pageRequest);\n\n    Optional&lt;Item&gt; findByCode(String itemCode);\n\n    void save(Item item);\n\n    void update(Item item);\n\n    void deleteByCode(String itemCode);\n\n    boolean existsByCode(String itemCode);\n}\n</code></pre> MyBatisItemRepository.java\uff08MyBatis \u5b9f\u88c5\uff09 <pre><code>package com.example.production.infrastructure.persistence.mybatis;\n\nimport com.example.production.application.port.out.ItemRepository;\nimport com.example.production.domain.model.common.PageInfo;\nimport com.example.production.domain.model.common.PageRequest;\nimport com.example.production.domain.model.item.Item;\nimport org.apache.ibatis.annotations.*;\nimport org.springframework.stereotype.Repository;\n\nimport java.util.List;\nimport java.util.Optional;\n\n@Repository\n@Mapper\npublic interface MyBatisItemRepository extends ItemRepository {\n\n    @Override\n    default PageInfo&lt;Item&gt; findAll(PageRequest pageRequest) {\n        List&lt;Item&gt; items = selectAll(pageRequest.getOffset(), pageRequest.getSize(),\n            pageRequest.getSortBy(), pageRequest.getSortDir());\n        long total = countAll();\n\n        return PageInfo.&lt;Item&gt;builder()\n            .content(items)\n            .currentPage(pageRequest.getPage())\n            .pageSize(pageRequest.getSize())\n            .totalElements(total)\n            .totalPages((int) Math.ceil((double) total / pageRequest.getSize()))\n            .build();\n    }\n\n    @Select(\"\"\"\n        SELECT * FROM \u54c1\u76ee\u30de\u30b9\u30bf\n        ORDER BY\n            CASE WHEN #{sortDir} = 'asc' THEN\n                CASE #{sortBy}\n                    WHEN 'itemCode' THEN \u54c1\u76ee\u30b3\u30fc\u30c9\n                    WHEN 'itemName' THEN \u54c1\u76ee\u540d\n                    ELSE \u54c1\u76ee\u30b3\u30fc\u30c9\n                END\n            END ASC,\n            CASE WHEN #{sortDir} = 'desc' THEN\n                CASE #{sortBy}\n                    WHEN 'itemCode' THEN \u54c1\u76ee\u30b3\u30fc\u30c9\n                    WHEN 'itemName' THEN \u54c1\u76ee\u540d\n                    ELSE \u54c1\u76ee\u30b3\u30fc\u30c9\n                END\n            END DESC\n        LIMIT #{size} OFFSET #{offset}\n        \"\"\")\n    @Results(id = \"itemMap\", value = {\n        @Result(property = \"itemCode\", column = \"\u54c1\u76ee\u30b3\u30fc\u30c9\"),\n        @Result(property = \"itemName\", column = \"\u54c1\u76ee\u540d\"),\n        @Result(property = \"category\", column = \"\u54c1\u76ee\u533a\u5206\"),\n        @Result(property = \"leadTime\", column = \"\u30ea\u30fc\u30c9\u30bf\u30a4\u30e0\"),\n        @Result(property = \"safetyStock\", column = \"\u5b89\u5168\u5728\u5eab\")\n    })\n    List&lt;Item&gt; selectAll(@Param(\"offset\") int offset,\n                         @Param(\"size\") int size,\n                         @Param(\"sortBy\") String sortBy,\n                         @Param(\"sortDir\") String sortDir);\n\n    @Select(\"SELECT COUNT(*) FROM \u54c1\u76ee\u30de\u30b9\u30bf\")\n    long countAll();\n\n    @Override\n    default PageInfo&lt;Item&gt; searchByKeyword(String keyword, PageRequest pageRequest) {\n        String pattern = \"%\" + keyword + \"%\";\n        List&lt;Item&gt; items = selectByKeyword(pattern, pageRequest.getOffset(), pageRequest.getSize());\n        long total = countByKeyword(pattern);\n\n        return PageInfo.&lt;Item&gt;builder()\n            .content(items)\n            .currentPage(pageRequest.getPage())\n            .pageSize(pageRequest.getSize())\n            .totalElements(total)\n            .totalPages((int) Math.ceil((double) total / pageRequest.getSize()))\n            .build();\n    }\n\n    @Select(\"\"\"\n        SELECT * FROM \u54c1\u76ee\u30de\u30b9\u30bf\n        WHERE \u54c1\u76ee\u30b3\u30fc\u30c9 LIKE #{pattern} OR \u54c1\u76ee\u540d LIKE #{pattern}\n        ORDER BY \u54c1\u76ee\u30b3\u30fc\u30c9\n        LIMIT #{size} OFFSET #{offset}\n        \"\"\")\n    @ResultMap(\"itemMap\")\n    List&lt;Item&gt; selectByKeyword(@Param(\"pattern\") String pattern,\n                               @Param(\"offset\") int offset,\n                               @Param(\"size\") int size);\n\n    @Select(\"\"\"\n        SELECT COUNT(*) FROM \u54c1\u76ee\u30de\u30b9\u30bf\n        WHERE \u54c1\u76ee\u30b3\u30fc\u30c9 LIKE #{pattern} OR \u54c1\u76ee\u540d LIKE #{pattern}\n        \"\"\")\n    long countByKeyword(@Param(\"pattern\") String pattern);\n}\n</code></pre>"},{"location":"article/study/study4-1/#374-controller","title":"37.4 Controller \u5c64\u306e\u5b9f\u88c5","text":"ItemController.java\uff08\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u5bfe\u5fdc\uff09 <pre><code>package com.example.production.infrastructure.web.controller;\n\nimport com.example.production.application.port.in.ItemUseCase;\nimport com.example.production.domain.model.common.PageInfo;\nimport com.example.production.domain.model.common.PageRequest;\nimport com.example.production.domain.model.item.Item;\nimport com.example.production.domain.model.item.ItemCategory;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.*;\n\n/**\n * \u54c1\u76ee\u30de\u30b9\u30bf Controller\uff08\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u5bfe\u5fdc\uff09\n */\n@Controller\n@RequestMapping(\"/items\")\npublic class ItemController {\n\n    private static final int DEFAULT_PAGE_SIZE = 20;\n\n    private final ItemUseCase itemUseCase;\n\n    public ItemController(ItemUseCase itemUseCase) {\n        this.itemUseCase = itemUseCase;\n    }\n\n    /**\n     * \u54c1\u76ee\u4e00\u89a7\u753b\u9762\uff08\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u5bfe\u5fdc\uff09\n     */\n    @GetMapping\n    public String list(\n            @RequestParam(defaultValue = \"0\") int page,\n            @RequestParam(defaultValue = \"20\") int size,\n            @RequestParam(defaultValue = \"itemCode\") String sortBy,\n            @RequestParam(defaultValue = \"asc\") String sortDir,\n            @RequestParam(required = false) ItemCategory category,\n            @RequestParam(required = false) String keyword,\n            Model model) {\n\n        PageRequest pageRequest = PageRequest.of(page, size, sortBy, sortDir);\n\n        PageInfo&lt;Item&gt; pageInfo;\n        if (keyword != null &amp;&amp; !keyword.isBlank()) {\n            pageInfo = itemUseCase.searchItems(keyword, pageRequest);\n        } else if (category != null) {\n            pageInfo = itemUseCase.getItemsByCategory(category, pageRequest);\n        } else {\n            pageInfo = itemUseCase.getAllItems(pageRequest);\n        }\n\n        model.addAttribute(\"pageInfo\", pageInfo);\n        model.addAttribute(\"categories\", ItemCategory.values());\n        model.addAttribute(\"selectedCategory\", category);\n        model.addAttribute(\"keyword\", keyword);\n        model.addAttribute(\"sortBy\", sortBy);\n        model.addAttribute(\"sortDir\", sortDir);\n\n        return \"items/list\";\n    }\n}\n</code></pre>"},{"location":"article/study/study4-1/#375","title":"37.5 \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u7528\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8","text":"items/list.html\uff08\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u5bfe\u5fdc\uff09 <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html xmlns:th=\"http://www.thymeleaf.org\"\n      xmlns:layout=\"http://www.ultraq.net.nz/thymeleaf/layout\"\n      layout:decorate=\"~{layout/default}\"&gt;\n&lt;head&gt;\n    &lt;title&gt;\u54c1\u76ee\u30de\u30b9\u30bf&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div layout:fragment=\"content\"&gt;\n    &lt;div class=\"d-flex justify-content-between align-items-center mb-4\"&gt;\n        &lt;h1&gt;\u54c1\u76ee\u30de\u30b9\u30bf&lt;/h1&gt;\n        &lt;a th:href=\"@{/items/new}\" class=\"btn btn-primary\"&gt;\u65b0\u898f\u767b\u9332&lt;/a&gt;\n    &lt;/div&gt;\n\n    &lt;!-- \u691c\u7d22\u30d5\u30a9\u30fc\u30e0 --&gt;\n    &lt;div class=\"card mb-4\"&gt;\n        &lt;div class=\"card-body\"&gt;\n            &lt;form th:action=\"@{/items}\" method=\"get\" class=\"row g-3\"&gt;\n                &lt;div class=\"col-md-4\"&gt;\n                    &lt;label class=\"form-label\"&gt;\u30ad\u30fc\u30ef\u30fc\u30c9\u691c\u7d22&lt;/label&gt;\n                    &lt;input type=\"text\" class=\"form-control\" name=\"keyword\"\n                           th:value=\"${keyword}\" placeholder=\"\u54c1\u76ee\u30b3\u30fc\u30c9\u307e\u305f\u306f\u54c1\u540d\"&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-md-3\"&gt;\n                    &lt;label class=\"form-label\"&gt;\u54c1\u76ee\u533a\u5206&lt;/label&gt;\n                    &lt;select class=\"form-select\" name=\"category\"&gt;\n                        &lt;option value=\"\"&gt;\u3059\u3079\u3066&lt;/option&gt;\n                        &lt;option th:each=\"cat : ${categories}\"\n                                th:value=\"${cat}\"\n                                th:text=\"${cat.displayName}\"\n                                th:selected=\"${cat == selectedCategory}\"&gt;&lt;/option&gt;\n                    &lt;/select&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-md-2\"&gt;\n                    &lt;label class=\"form-label\"&gt;\u8868\u793a\u4ef6\u6570&lt;/label&gt;\n                    &lt;select class=\"form-select\" name=\"size\"&gt;\n                        &lt;option th:each=\"s : ${T(java.util.Arrays).asList(10, 20, 50, 100)}\"\n                                th:value=\"${s}\"\n                                th:text=\"${s + '\u4ef6'}\"\n                                th:selected=\"${s == pageInfo.pageSize}\"&gt;&lt;/option&gt;\n                    &lt;/select&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-md-2 d-flex align-items-end\"&gt;\n                    &lt;button type=\"submit\" class=\"btn btn-secondary\"&gt;\u691c\u7d22&lt;/button&gt;\n                &lt;/div&gt;\n            &lt;/form&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- \u4ef6\u6570\u8868\u793a --&gt;\n    &lt;div class=\"d-flex justify-content-between align-items-center mb-3\"&gt;\n        &lt;div class=\"text-muted\"&gt;\n            \u5168 &lt;span th:text=\"${pageInfo.totalElements}\"&gt;0&lt;/span&gt; \u4ef6\u4e2d\n            &lt;span th:text=\"${pageInfo.startRecord}\"&gt;1&lt;/span&gt; -\n            &lt;span th:text=\"${pageInfo.endRecord}\"&gt;20&lt;/span&gt; \u4ef6\u3092\u8868\u793a\n        &lt;/div&gt;\n        &lt;div&gt;\n            &lt;!-- \u30bd\u30fc\u30c8\u9078\u629e --&gt;\n            &lt;div class=\"btn-group\"&gt;\n                &lt;a th:href=\"@{/items(page=0, size=${pageInfo.pageSize}, sortBy='itemCode', sortDir=${sortBy == 'itemCode' &amp;&amp; sortDir == 'asc' ? 'desc' : 'asc'}, keyword=${keyword}, category=${selectedCategory})}\"\n                   class=\"btn btn-sm\"\n                   th:classappend=\"${sortBy == 'itemCode'} ? 'btn-primary' : 'btn-outline-primary'\"&gt;\n                    \u54c1\u76ee\u30b3\u30fc\u30c9\n                    &lt;span th:if=\"${sortBy == 'itemCode'}\"\n                          th:text=\"${sortDir == 'asc'} ? '\u2191' : '\u2193'\"&gt;&lt;/span&gt;\n                &lt;/a&gt;\n                &lt;a th:href=\"@{/items(page=0, size=${pageInfo.pageSize}, sortBy='itemName', sortDir=${sortBy == 'itemName' &amp;&amp; sortDir == 'asc' ? 'desc' : 'asc'}, keyword=${keyword}, category=${selectedCategory})}\"\n                   class=\"btn btn-sm\"\n                   th:classappend=\"${sortBy == 'itemName'} ? 'btn-primary' : 'btn-outline-primary'\"&gt;\n                    \u54c1\u540d\n                    &lt;span th:if=\"${sortBy == 'itemName'}\"\n                          th:text=\"${sortDir == 'asc'} ? '\u2191' : '\u2193'\"&gt;&lt;/span&gt;\n                &lt;/a&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- \u54c1\u76ee\u4e00\u89a7\u30c6\u30fc\u30d6\u30eb --&gt;\n    &lt;div class=\"card\"&gt;\n        &lt;div class=\"card-body\"&gt;\n            &lt;table class=\"table table-striped table-hover\" th:if=\"${not #lists.isEmpty(pageInfo.content)}\"&gt;\n                &lt;thead&gt;\n                    &lt;tr&gt;\n                        &lt;th&gt;\u54c1\u76ee\u30b3\u30fc\u30c9&lt;/th&gt;\n                        &lt;th&gt;\u54c1\u540d&lt;/th&gt;\n                        &lt;th&gt;\u54c1\u76ee\u533a\u5206&lt;/th&gt;\n                        &lt;th&gt;\u30ea\u30fc\u30c9\u30bf\u30a4\u30e0&lt;/th&gt;\n                        &lt;th&gt;\u5b89\u5168\u5728\u5eab&lt;/th&gt;\n                        &lt;th&gt;\u64cd\u4f5c&lt;/th&gt;\n                    &lt;/tr&gt;\n                &lt;/thead&gt;\n                &lt;tbody&gt;\n                    &lt;tr th:each=\"item : ${pageInfo.content}\"&gt;\n                        &lt;td&gt;\n                            &lt;a th:href=\"@{/items/{code}(code=${item.itemCode})}\"\n                               th:text=\"${item.itemCode}\"&gt;&lt;/a&gt;\n                        &lt;/td&gt;\n                        &lt;td th:text=\"${item.itemName}\"&gt;&lt;/td&gt;\n                        &lt;td&gt;\n                            &lt;span class=\"badge\"\n                                  th:classappend=\"${item.category.name() == 'PRODUCT'} ? 'bg-primary' : 'bg-secondary'\"\n                                  th:text=\"${item.category.displayName}\"&gt;&lt;/span&gt;\n                        &lt;/td&gt;\n                        &lt;td th:text=\"${item.leadTime != null} ? ${item.leadTime + ' \u65e5'} : '-'\"&gt;&lt;/td&gt;\n                        &lt;td th:text=\"${item.safetyStock != null} ? ${item.safetyStock} : '-'\"&gt;&lt;/td&gt;\n                        &lt;td&gt;\n                            &lt;a th:href=\"@{/items/{code}/edit(code=${item.itemCode})}\"\n                               class=\"btn btn-sm btn-outline-primary\"&gt;\u7de8\u96c6&lt;/a&gt;\n                        &lt;/td&gt;\n                    &lt;/tr&gt;\n                &lt;/tbody&gt;\n            &lt;/table&gt;\n            &lt;div th:if=\"${#lists.isEmpty(pageInfo.content)}\" class=\"alert alert-info\"&gt;\n                \u8a72\u5f53\u3059\u308b\u54c1\u76ee\u304c\u3042\u308a\u307e\u305b\u3093\u3002\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3 --&gt;\n    &lt;nav th:if=\"${pageInfo.totalPages &gt; 1}\" class=\"mt-4\"&gt;\n        &lt;ul class=\"pagination justify-content-center\"&gt;\n            &lt;!-- \u6700\u521d\u3078 --&gt;\n            &lt;li class=\"page-item\" th:classappend=\"${pageInfo.first} ? 'disabled'\"&gt;\n                &lt;a class=\"page-link\"\n                   th:href=\"@{/items(page=0, size=${pageInfo.pageSize}, sortBy=${sortBy}, sortDir=${sortDir}, keyword=${keyword}, category=${selectedCategory})}\"\n                   th:if=\"${!pageInfo.first}\"&gt;\u00ab&lt;/a&gt;\n                &lt;span class=\"page-link\" th:if=\"${pageInfo.first}\"&gt;\u00ab&lt;/span&gt;\n            &lt;/li&gt;\n\n            &lt;!-- \u524d\u3078 --&gt;\n            &lt;li class=\"page-item\" th:classappend=\"${pageInfo.first} ? 'disabled'\"&gt;\n                &lt;a class=\"page-link\"\n                   th:href=\"@{/items(page=${pageInfo.currentPage - 1}, size=${pageInfo.pageSize}, sortBy=${sortBy}, sortDir=${sortDir}, keyword=${keyword}, category=${selectedCategory})}\"\n                   th:if=\"${pageInfo.hasPrevious()}\"&gt;\u2039&lt;/a&gt;\n                &lt;span class=\"page-link\" th:if=\"${!pageInfo.hasPrevious()}\"&gt;\u2039&lt;/span&gt;\n            &lt;/li&gt;\n\n            &lt;!-- \u30da\u30fc\u30b8\u756a\u53f7 --&gt;\n            &lt;li th:each=\"pageNum : ${pageInfo.pageNumbers}\"\n                class=\"page-item\"\n                th:classappend=\"${pageNum == pageInfo.currentPage} ? 'active'\"&gt;\n                &lt;a class=\"page-link\"\n                   th:href=\"@{/items(page=${pageNum}, size=${pageInfo.pageSize}, sortBy=${sortBy}, sortDir=${sortDir}, keyword=${keyword}, category=${selectedCategory})}\"\n                   th:text=\"${pageNum + 1}\"&gt;&lt;/a&gt;\n            &lt;/li&gt;\n\n            &lt;!-- \u6b21\u3078 --&gt;\n            &lt;li class=\"page-item\" th:classappend=\"${pageInfo.last} ? 'disabled'\"&gt;\n                &lt;a class=\"page-link\"\n                   th:href=\"@{/items(page=${pageInfo.currentPage + 1}, size=${pageInfo.pageSize}, sortBy=${sortBy}, sortDir=${sortDir}, keyword=${keyword}, category=${selectedCategory})}\"\n                   th:if=\"${pageInfo.hasNext()}\"&gt;\u203a&lt;/a&gt;\n                &lt;span class=\"page-link\" th:if=\"${!pageInfo.hasNext()}\"&gt;\u203a&lt;/span&gt;\n            &lt;/li&gt;\n\n            &lt;!-- \u6700\u5f8c\u3078 --&gt;\n            &lt;li class=\"page-item\" th:classappend=\"${pageInfo.last} ? 'disabled'\"&gt;\n                &lt;a class=\"page-link\"\n                   th:href=\"@{/items(page=${pageInfo.totalPages - 1}, size=${pageInfo.pageSize}, sortBy=${sortBy}, sortDir=${sortDir}, keyword=${keyword}, category=${selectedCategory})}\"\n                   th:if=\"${!pageInfo.last}\"&gt;\u00bb&lt;/a&gt;\n                &lt;span class=\"page-link\" th:if=\"${pageInfo.last}\"&gt;\u00bb&lt;/span&gt;\n            &lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/nav&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"article/study/study4-1/#376","title":"37.6 \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u5171\u901a\u5316","text":"<p>\u8907\u6570\u306e\u753b\u9762\u3067\u540c\u3058\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u3001\u30d5\u30e9\u30b0\u30e1\u30f3\u30c8\u3068\u3057\u3066\u5171\u901a\u5316\u3057\u307e\u3059\u3002</p> fragments/pagination.html\uff08\u5171\u901a\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\uff09 <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html xmlns:th=\"http://www.thymeleaf.org\"&gt;\n\n&lt;!-- \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8 --&gt;\n&lt;nav th:fragment=\"pagination(pageInfo, baseUrl, params)\" th:if=\"${pageInfo.totalPages &gt; 1}\" class=\"mt-4\"&gt;\n    &lt;ul class=\"pagination justify-content-center\"&gt;\n        &lt;!-- \u6700\u521d\u3078 --&gt;\n        &lt;li class=\"page-item\" th:classappend=\"${pageInfo.first} ? 'disabled'\"&gt;\n            &lt;a class=\"page-link\"\n               th:href=\"${baseUrl + '?page=0&amp;size=' + pageInfo.pageSize + (params != null ? '&amp;' + params : '')}\"\n               th:if=\"${!pageInfo.first}\"&gt;\u00ab&lt;/a&gt;\n            &lt;span class=\"page-link\" th:if=\"${pageInfo.first}\"&gt;\u00ab&lt;/span&gt;\n        &lt;/li&gt;\n\n        &lt;!-- \u524d\u3078 --&gt;\n        &lt;li class=\"page-item\" th:classappend=\"${!pageInfo.hasPrevious()} ? 'disabled'\"&gt;\n            &lt;a class=\"page-link\"\n               th:href=\"${baseUrl + '?page=' + (pageInfo.currentPage - 1) + '&amp;size=' + pageInfo.pageSize + (params != null ? '&amp;' + params : '')}\"\n               th:if=\"${pageInfo.hasPrevious()}\"&gt;\u2039&lt;/a&gt;\n            &lt;span class=\"page-link\" th:if=\"${!pageInfo.hasPrevious()}\"&gt;\u2039&lt;/span&gt;\n        &lt;/li&gt;\n\n        &lt;!-- \u30da\u30fc\u30b8\u756a\u53f7 --&gt;\n        &lt;li th:each=\"pageNum : ${pageInfo.pageNumbers}\"\n            class=\"page-item\"\n            th:classappend=\"${pageNum == pageInfo.currentPage} ? 'active'\"&gt;\n            &lt;a class=\"page-link\"\n               th:href=\"${baseUrl + '?page=' + pageNum + '&amp;size=' + pageInfo.pageSize + (params != null ? '&amp;' + params : '')}\"\n               th:text=\"${pageNum + 1}\"&gt;&lt;/a&gt;\n        &lt;/li&gt;\n\n        &lt;!-- \u6b21\u3078 --&gt;\n        &lt;li class=\"page-item\" th:classappend=\"${!pageInfo.hasNext()} ? 'disabled'\"&gt;\n            &lt;a class=\"page-link\"\n               th:href=\"${baseUrl + '?page=' + (pageInfo.currentPage + 1) + '&amp;size=' + pageInfo.pageSize + (params != null ? '&amp;' + params : '')}\"\n               th:if=\"${pageInfo.hasNext()}\"&gt;\u203a&lt;/a&gt;\n            &lt;span class=\"page-link\" th:if=\"${!pageInfo.hasNext()}\"&gt;\u203a&lt;/span&gt;\n        &lt;/li&gt;\n\n        &lt;!-- \u6700\u5f8c\u3078 --&gt;\n        &lt;li class=\"page-item\" th:classappend=\"${pageInfo.last} ? 'disabled'\"&gt;\n            &lt;a class=\"page-link\"\n               th:href=\"${baseUrl + '?page=' + (pageInfo.totalPages - 1) + '&amp;size=' + pageInfo.pageSize + (params != null ? '&amp;' + params : '')}\"\n               th:if=\"${!pageInfo.last}\"&gt;\u00bb&lt;/a&gt;\n            &lt;span class=\"page-link\" th:if=\"${pageInfo.last}\"&gt;\u00bb&lt;/span&gt;\n        &lt;/li&gt;\n    &lt;/ul&gt;\n\n    &lt;!-- \u30da\u30fc\u30b8\u60c5\u5831 --&gt;\n    &lt;div class=\"text-center text-muted small\"&gt;\n        &lt;span th:text=\"${pageInfo.currentPage + 1}\"&gt;&lt;/span&gt; /\n        &lt;span th:text=\"${pageInfo.totalPages}\"&gt;&lt;/span&gt; \u30da\u30fc\u30b8\n        \uff08\u5168 &lt;span th:text=\"${pageInfo.totalElements}\"&gt;&lt;/span&gt; \u4ef6\uff09\n    &lt;/div&gt;\n&lt;/nav&gt;\n\n&lt;/html&gt;\n</code></pre> \u4f7f\u7528\u4f8b <pre><code>&lt;!-- \u54c1\u76ee\u4e00\u89a7\u3067\u306e\u4f7f\u7528\u4f8b --&gt;\n&lt;th:block th:replace=\"~{fragments/pagination :: pagination(\n    ${pageInfo},\n    '/items',\n    'sortBy=' + ${sortBy} + '&amp;sortDir=' + ${sortDir} + '&amp;keyword=' + ${keyword}\n)}\"&gt;&lt;/th:block&gt;\n\n&lt;!-- \u767a\u6ce8\u4e00\u89a7\u3067\u306e\u4f7f\u7528\u4f8b --&gt;\n&lt;th:block th:replace=\"~{fragments/pagination :: pagination(\n    ${pageInfo},\n    '/purchase-orders',\n    'status=' + ${status}\n)}\"&gt;&lt;/th:block&gt;\n</code></pre>"},{"location":"article/study/study4-1/#377-htmx","title":"37.7 htmx \u306b\u3088\u308b\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u306e\u90e8\u5206\u66f4\u65b0","text":"<p>\u30da\u30fc\u30b8\u9077\u79fb\u6642\u306b\u753b\u9762\u5168\u4f53\u3092\u30ea\u30ed\u30fc\u30c9\u305b\u305a\u3001\u30c6\u30fc\u30d6\u30eb\u90e8\u5206\u306e\u307f\u3092\u66f4\u65b0\u3057\u307e\u3059\u3002</p> htmx \u5bfe\u5fdc\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3 <pre><code>&lt;!-- \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u3092 htmx \u3067\u90e8\u5206\u66f4\u65b0 --&gt;\n&lt;div id=\"items-container\"&gt;\n    &lt;!-- \u30c6\u30fc\u30d6\u30eb\u3068\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u3092\u542b\u3080\u30b3\u30f3\u30c6\u30ca --&gt;\n    &lt;th:block th:replace=\"~{items/fragments :: itemsTable}\"&gt;&lt;/th:block&gt;\n&lt;/div&gt;\n\n&lt;!-- items/fragments.html --&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html xmlns:th=\"http://www.thymeleaf.org\"&gt;\n\n&lt;div th:fragment=\"itemsTable\"&gt;\n    &lt;!-- \u4ef6\u6570\u8868\u793a --&gt;\n    &lt;div class=\"d-flex justify-content-between align-items-center mb-3\"&gt;\n        &lt;div class=\"text-muted\"&gt;\n            \u5168 &lt;span th:text=\"${pageInfo.totalElements}\"&gt;0&lt;/span&gt; \u4ef6\u4e2d\n            &lt;span th:text=\"${pageInfo.startRecord}\"&gt;1&lt;/span&gt; -\n            &lt;span th:text=\"${pageInfo.endRecord}\"&gt;20&lt;/span&gt; \u4ef6\u3092\u8868\u793a\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- \u30c6\u30fc\u30d6\u30eb --&gt;\n    &lt;table class=\"table table-striped table-hover\"&gt;\n        &lt;!-- ... \u30c6\u30fc\u30d6\u30eb\u5185\u5bb9 ... --&gt;\n    &lt;/table&gt;\n\n    &lt;!-- \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\uff08htmx\u5bfe\u5fdc\uff09 --&gt;\n    &lt;nav th:if=\"${pageInfo.totalPages &gt; 1}\" class=\"mt-4\"&gt;\n        &lt;ul class=\"pagination justify-content-center\"&gt;\n            &lt;li th:each=\"pageNum : ${pageInfo.pageNumbers}\"\n                class=\"page-item\"\n                th:classappend=\"${pageNum == pageInfo.currentPage} ? 'active'\"&gt;\n                &lt;a class=\"page-link\"\n                   th:href=\"@{/items(page=${pageNum}, size=${pageInfo.pageSize})}\"\n                   hx-get=\"/items/table\"\n                   th:attr=\"hx-get=@{/items/table(page=${pageNum}, size=${pageInfo.pageSize})}\"\n                   hx-target=\"#items-container\"\n                   hx-swap=\"innerHTML\"\n                   hx-push-url=\"true\"\n                   th:text=\"${pageNum + 1}\"&gt;&lt;/a&gt;\n            &lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/nav&gt;\n&lt;/div&gt;\n\n&lt;/html&gt;\n</code></pre> Controller\uff08htmx \u5bfe\u5fdc\uff09 <pre><code>@Controller\n@RequestMapping(\"/items\")\npublic class ItemController {\n\n    /**\n     * \u30c6\u30fc\u30d6\u30eb\u90e8\u5206\u306e\u307f\u3092\u8fd4\u3059\uff08htmx\u7528\uff09\n     */\n    @GetMapping(\"/table\")\n    public String table(\n            @RequestParam(defaultValue = \"0\") int page,\n            @RequestParam(defaultValue = \"20\") int size,\n            Model model) {\n\n        PageRequest pageRequest = PageRequest.of(page, size);\n        PageInfo&lt;Item&gt; pageInfo = itemUseCase.getAllItems(pageRequest);\n        model.addAttribute(\"pageInfo\", pageInfo);\n\n        // \u30d5\u30e9\u30b0\u30e1\u30f3\u30c8\u306e\u307f\u3092\u8fd4\u3059\n        return \"items/fragments :: itemsTable\";\n    }\n}\n</code></pre>"},{"location":"article/study/study4-1/#_3","title":"\u307e\u3068\u3081","text":"<p>\u672c\u7814\u7a76\u3067\u306f\u3001\u30e2\u30ce\u30ea\u30b9\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u3088\u308b\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3092\u5b9f\u88c5\u3057\u307e\u3057\u305f\u3002</p>"},{"location":"article/study/study4-1/#api","title":"API \u30b5\u30fc\u30d0\u30fc\u7248\u3068\u306e\u6bd4\u8f03","text":"\u89b3\u70b9 API \u30b5\u30fc\u30d0\u30fc\u7248\uff08\u7b2c32\u7ae0\uff09 \u30e2\u30ce\u30ea\u30b9\u7248\uff08\u672c\u7814\u7a76\uff09 \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3 \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u5206\u96e2\uff08SPA\uff09 \u7d71\u5408\uff08Thymeleaf\uff09 \u901a\u4fe1 REST API\uff08JSON\uff09 \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\uff08HTML\uff09 \u72b6\u614b\u7ba1\u7406 \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\uff08localStorage\u7b49\uff09 \u30b5\u30fc\u30d0\u30fc\u5074\uff08\u30bb\u30c3\u30b7\u30e7\u30f3\uff09 \u90e8\u5206\u66f4\u65b0 JavaScript\uff08Axios\u7b49\uff09 htmx \u5e33\u7968\u51fa\u529b API\u7d4c\u7531\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 \u76f4\u63a5\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 \u8a8d\u8a3c JWT/OAuth \u30bb\u30c3\u30b7\u30e7\u30f3\u30d9\u30fc\u30b9 \u8907\u96d1\u3055 \u9ad8\uff08API\u8a2d\u8a08\u3001CORS\u7b49\uff09 \u4f4e\uff08\u30b7\u30f3\u30d7\u30eb\uff09 \u958b\u767a\u901f\u5ea6 \u521d\u671f\u306f\u9045\u3044 \u521d\u671f\u306f\u901f\u3044"},{"location":"article/study/study4-1/#_4","title":"\u5b9f\u88c5\u3057\u305f\u6a5f\u80fd","text":"\u30ab\u30c6\u30b4\u30ea \u6a5f\u80fd \u54c1\u76ee\u30de\u30b9\u30bf \u4e00\u89a7\u3001\u8a73\u7d30\u3001\u767b\u9332\u3001\u7de8\u96c6\u3001\u524a\u9664\u3001\u691c\u7d22 BOM \u968e\u5c64\u8868\u793a\uff08\u30c4\u30ea\u30fc\uff09\u3001\u9006\u5c55\u958b \u767a\u6ce8 \u4e00\u89a7\u3001\u767b\u9332\uff08\u52d5\u7684\u660e\u7d30\uff09\u3001\u78ba\u5b9a\u3001\u53d6\u6d88 \u5728\u5eab \u7167\u4f1a\u3001\u4e0d\u8db3\u54c1\u76ee\u8868\u793a MRP \u5b9f\u884c\u3001\u7d50\u679c\u8868\u793a \u5e33\u7968 Excel \u51fa\u529b \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3 \u30da\u30fc\u30b8\u5206\u5272\u3001\u30bd\u30fc\u30c8\u3001\u4ef6\u6570\u8868\u793a\u3001htmx \u5bfe\u5fdc \u5171\u901a \u30ec\u30a4\u30a2\u30a6\u30c8\u3001\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3001\u30d5\u30e9\u30c3\u30b7\u30e5\u30e1\u30c3\u30bb\u30fc\u30b8"},{"location":"article/study/study4-1/#_5","title":"\u6280\u8853\u30b9\u30bf\u30c3\u30af","text":"<ul> <li>Spring Boot 3.2: Web \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af</li> <li>Thymeleaf: \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3</li> <li>htmx: \u90e8\u5206\u66f4\u65b0\uff08JavaScript \u4e0d\u8981\uff09</li> <li>Bootstrap 5: CSS \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af</li> <li>Apache POI: Excel \u51fa\u529b</li> <li>MyBatis: O/R \u30de\u30c3\u30d4\u30f3\u30b0</li> <li>Testcontainers: \u7d71\u5408\u30c6\u30b9\u30c8</li> </ul>"},{"location":"article/study/study4-1/#_6","title":"\u30e2\u30ce\u30ea\u30b9\u3092\u9078\u629e\u3059\u3079\u304d\u5834\u9762","text":"<ol> <li>\u793e\u5185\u30b7\u30b9\u30c6\u30e0: \u9650\u3089\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u3001SEO \u4e0d\u8981</li> <li>\u696d\u52d9\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3: \u8907\u96d1\u306a\u696d\u52d9\u30d5\u30ed\u30fc</li> <li>\u5c0f\u898f\u6a21\u30c1\u30fc\u30e0: \u30d5\u30eb\u30b9\u30bf\u30c3\u30af\u958b\u767a</li> <li>\u8fc5\u901f\u306a\u958b\u767a: MVP\u3001\u30d7\u30ed\u30c8\u30bf\u30a4\u30d7</li> <li>\u904b\u7528\u30b3\u30b9\u30c8\u91cd\u8996: \u30b7\u30f3\u30d7\u30eb\u306a\u30a4\u30f3\u30d5\u30e9</li> </ol> <p>\u76ee\u6b21\u3078\u623b\u308b</p>"},{"location":"article/study/study4-2/","title":"\u5b9f\u8df5\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\uff1a\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 \u7814\u7a76 2 - JavaFX \u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5b9f\u88c5","text":""},{"location":"article/study/study4-2/#_1","title":"\u306f\u3058\u3081\u306b","text":"<p>\u672c\u7814\u7a76\u3067\u306f\u3001API \u30b5\u30fc\u30d0\u30fc\u69cb\u6210\uff08\u7b2c32\u7ae0\uff09\u3084\u30e2\u30ce\u30ea\u30b9\u30b5\u30fc\u30d3\u30b9\uff08\u7814\u7a76 1\uff09\u3068\u306f\u7570\u306a\u308b\u30a2\u30d7\u30ed\u30fc\u30c1\u3068\u3057\u3066\u3001JavaFX \u306b\u3088\u308b\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002FXML \u306b\u3088\u308b\u5ba3\u8a00\u7684 UI \u5b9a\u7fa9\u3068\u3001\u30c7\u30fc\u30bf\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u306b\u3088\u308b\u30ea\u30a2\u30af\u30c6\u30a3\u30d6\u306a\u753b\u9762\u66f4\u65b0\u3092\u6d3b\u7528\u3057\u305f\u3001\u696d\u52d9\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002</p> <p>\u7814\u7a76 1 \u3067\u69cb\u7bc9\u3057\u305f\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u30c9\u30e1\u30a4\u30f3\u5c64\u30fb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff09\u306f\u305d\u306e\u307e\u307e\u5171\u6709\u3057\u3001Input Adapter \u3068\u3057\u3066 JavaFX \u306e Controller/ViewModel \u5c64\u306e\u307f\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p>"},{"location":"article/study/study4-2/#38javafx","title":"\u7b2c38\u7ae0\uff1aJavaFX \u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u57fa\u790e","text":""},{"location":"article/study/study4-2/#381-javafx","title":"38.1 JavaFX \u3068\u306f","text":"<p>JavaFX \u306f Java \u306e\u30ea\u30c3\u30c1\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3067\u3059\u3002Swing \u306e\u5f8c\u7d99\u3068\u3057\u3066\u4f4d\u7f6e\u3065\u3051\u3089\u308c\u3001\u30e2\u30c0\u30f3\u306a UI \u69cb\u7bc9\u304c\u53ef\u80fd\u3067\u3059\u3002</p> <p></p> <p>Web \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3068\u306e\u6bd4\u8f03\uff1a</p> \u7279\u5fb4 Web \u30a2\u30d7\u30ea\uff08REST API\uff09 JavaFX \u30c7\u30b9\u30af\u30c8\u30c3\u30d7 \u914d\u7f6e \u30b5\u30fc\u30d0\u30fc + \u30d6\u30e9\u30a6\u30b6 \u30ed\u30fc\u30ab\u30eb\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \u30aa\u30d5\u30e9\u30a4\u30f3 \u4e0d\u53ef \u53ef\u80fd\uff08\u30ed\u30fc\u30ab\u30eb DB\uff09 \u30ec\u30b9\u30dd\u30f3\u30b9 \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u4f9d\u5b58 \u9ad8\u901f UI \u81ea\u7531\u5ea6 HTML/CSS \u5236\u7d04 \u30cd\u30a4\u30c6\u30a3\u30d6\u5236\u5fa1 \u5370\u5237\u6a5f\u80fd \u5236\u9650\u3042\u308a \u9ad8\u6a5f\u80fd \u66f4\u65b0\u914d\u5e03 \u81ea\u52d5 \u624b\u52d5/\u81ea\u52d5\u66f4\u65b0"},{"location":"article/study/study4-2/#382-mvvm","title":"38.2 MVVM \u30d1\u30bf\u30fc\u30f3\u306e\u63a1\u7528","text":"<p>JavaFX \u3067\u306f\u3001MVVM\uff08Model-View-ViewModel\uff09 \u30d1\u30bf\u30fc\u30f3\u3092\u63a1\u7528\u3057\u3001UI \u3068\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3092\u5206\u96e2\u3057\u307e\u3059\u3002</p> <p></p> <p>\u5404\u5c64\u306e\u8cac\u52d9\uff1a</p> \u5c64 \u8cac\u52d9 JavaFX \u3067\u306e\u5b9f\u88c5 View UI \u8868\u793a\u30fb\u30e6\u30fc\u30b6\u30fc\u5165\u529b FXML + Controller ViewModel \u753b\u9762\u72b6\u614b\u7ba1\u7406\u30fb\u5909\u63db Property, ObservableList Model \u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af UseCase, Repository"},{"location":"article/study/study4-2/#383","title":"38.3 \u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3068\u306e\u7d71\u5408","text":"<p>JavaFX \u3092\u5c0e\u5165\u3057\u3066\u3082\u3001\u65e2\u5b58\u306e\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u30c9\u30e1\u30a4\u30f3\u5c64\u30fb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff09\u306f\u305d\u306e\u307e\u307e\u5171\u6709\u3057\u3001Input Adapter \u3068\u3057\u3066 JavaFX \u306e Controller/ViewModel \u5c64\u306e\u307f\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> <p></p> <p>JavaFX \u3067\u3082\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u7dad\u6301\u3059\u308b\u7406\u7531\uff1a</p> <ol> <li>\u518d\u5229\u7528\u6027: \u65e2\u5b58\u306e UseCase/Repository \u3092\u305d\u306e\u307e\u307e\u6d3b\u7528</li> <li>\u4e26\u884c\u904b\u7528: REST API \u3068 JavaFX \u306e\u4e21\u65b9\u3092\u63d0\u4f9b\u53ef\u80fd</li> <li>\u30c6\u30b9\u30c8\u5bb9\u6613\u6027: \u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\u306f UI \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306b\u4f9d\u5b58\u3057\u306a\u3044</li> <li>\u79fb\u884c\u5bb9\u6613\u6027: \u6bb5\u968e\u7684\u306b Web \u304b\u3089\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u3078\u79fb\u884c\u53ef\u80fd</li> </ol>"},{"location":"article/study/study4-2/#384","title":"38.4 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210","text":"<p>\u65e2\u5b58\u306e\u69cb\u6210\u306b <code>infrastructure/in/javafx/</code> \u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> <pre><code>src/main/java/com/example/production/\n\u251c\u2500\u2500 domain/                       # \u30c9\u30e1\u30a4\u30f3\u5c64\uff08API\u7248\u3068\u5171\u901a\uff09\n\u2502   \u251c\u2500\u2500 model/\n\u2502   \u2502   \u251c\u2500\u2500 item/\n\u2502   \u2502   \u251c\u2500\u2500 bom/\n\u2502   \u2502   \u251c\u2500\u2500 purchase/\n\u2502   \u2502   \u2514\u2500\u2500 inventory/\n\u2502   \u2514\u2500\u2500 exception/\n\u2502\n\u251c\u2500\u2500 application/                  # \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff08API\u7248\u3068\u5171\u901a\uff09\n\u2502   \u251c\u2500\u2500 port/\n\u2502   \u2502   \u251c\u2500\u2500 in/                  # Input Port\uff08\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\uff09\n\u2502   \u2502   \u2514\u2500\u2500 out/                 # Output Port\uff08\u30ea\u30dd\u30b8\u30c8\u30ea\uff09\n\u2502   \u2514\u2500\u2500 service/\n\u2502\n\u251c\u2500\u2500 infrastructure/\n\u2502   \u251c\u2500\u2500 out/\n\u2502   \u2502   \u2514\u2500\u2500 persistence/         # Output Adapter\uff08DB\u5b9f\u88c5\uff09- \u65e2\u5b58\n\u2502   \u2502       \u251c\u2500\u2500 mapper/\n\u2502   \u2502       \u2514\u2500\u2500 repository/\n\u2502   \u251c\u2500\u2500 in/\n\u2502   \u2502   \u251c\u2500\u2500 rest/                # Input Adapter\uff08REST\u5b9f\u88c5\uff09- \u65e2\u5b58\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 controller/\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 dto/\n\u2502   \u2502   \u2514\u2500\u2500 javafx/              # Input Adapter\uff08JavaFX\u5b9f\u88c5\uff09- \u65b0\u898f\u8ffd\u52a0\n\u2502   \u2502       \u251c\u2500\u2500 controller/      # FXML Controller\n\u2502   \u2502       \u251c\u2500\u2500 viewmodel/       # ViewModel\n\u2502   \u2502       \u251c\u2500\u2500 view/            # \u753b\u9762\u8868\u793a\u7528\u306e\u884c\u30e2\u30c7\u30eb\n\u2502   \u2502       \u251c\u2500\u2500 dialog/          # \u30c0\u30a4\u30a2\u30ed\u30b0\n\u2502   \u2502       \u251c\u2500\u2500 util/            # \u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\n\u2502   \u2502       \u2514\u2500\u2500 config/          # JavaFX \u8a2d\u5b9a\n\u2502\n\u2514\u2500\u2500 Application.java              # Spring Boot + JavaFX \u8d77\u52d5\u30af\u30e9\u30b9\n\nsrc/main/resources/\n\u251c\u2500\u2500 fxml/                         # FXML \u30d5\u30a1\u30a4\u30eb\n\u2502   \u251c\u2500\u2500 main.fxml\n\u2502   \u251c\u2500\u2500 item/\n\u2502   \u2502   \u251c\u2500\u2500 item-list.fxml\n\u2502   \u2502   \u2514\u2500\u2500 item-edit.fxml\n\u2502   \u251c\u2500\u2500 bom/\n\u2502   \u2502   \u251c\u2500\u2500 bom-tree.fxml\n\u2502   \u2502   \u2514\u2500\u2500 where-used.fxml\n\u2502   \u251c\u2500\u2500 purchase/\n\u2502   \u2502   \u251c\u2500\u2500 order-list.fxml\n\u2502   \u2502   \u2514\u2500\u2500 order-entry.fxml\n\u2502   \u2514\u2500\u2500 common/\n\u2502       \u251c\u2500\u2500 login.fxml\n\u2502       \u2514\u2500\u2500 error-dialog.fxml\n\u2502\n\u251c\u2500\u2500 css/                          # \u30b9\u30bf\u30a4\u30eb\u30b7\u30fc\u30c8\n\u2502   \u251c\u2500\u2500 application.css\n\u2502   \u2514\u2500\u2500 theme/\n\u2502\n\u251c\u2500\u2500 images/                       # \u753b\u50cf\u30ea\u30bd\u30fc\u30b9\n\u2502\n\u2514\u2500\u2500 reports/                      # JasperReports \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\n    \u251c\u2500\u2500 purchase-order.jrxml\n    \u2514\u2500\u2500 mrp-result.jrxml\n</code></pre>"},{"location":"article/study/study4-2/#385","title":"38.5 \u6280\u8853\u30b9\u30bf\u30c3\u30af\u306e\u8ffd\u52a0","text":"build.gradle.kts\uff08\u5dee\u5206\uff09 <pre><code>plugins {\n    // \u65e2\u5b58\u306e\u30d7\u30e9\u30b0\u30a4\u30f3...\n    id(\"org.openjfx.javafxplugin\") version \"0.1.0\"  // \u8ffd\u52a0\n}\n\n// JavaFX \u8a2d\u5b9a\njavafx {\n    version = \"21\"\n    modules = listOf(\n        \"javafx.controls\",\n        \"javafx.fxml\",\n        \"javafx.graphics\",\n        \"javafx.swing\"  // JasperReports \u9023\u643a\u7528\n    )\n}\n\ndependencies {\n    // \u65e2\u5b58\u306e\u4f9d\u5b58\u95a2\u4fc2\uff08Spring Boot, MyBatis, PostgreSQL\u7b49\uff09\u306f\u305d\u306e\u307e\u307e\n\n    // JavaFX \u95a2\u9023\u3092\u8ffd\u52a0\n    implementation(\"org.controlsfx:controlsfx:11.2.0\")           // \u62e1\u5f35\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\n    implementation(\"com.dlsc.formsfx:formsfx-core:11.6.0\")        // \u30d5\u30a9\u30fc\u30e0\u751f\u6210\n    implementation(\"org.kordamp.ikonli:ikonli-javafx:12.3.1\")     // \u30a2\u30a4\u30b3\u30f3\n    implementation(\"org.kordamp.ikonli:ikonli-fontawesome5-pack:12.3.1\")\n\n    // JasperReports\uff08\u5e33\u7968\u51fa\u529b\uff09\n    implementation(\"net.sf.jasperreports:jasperreports:6.20.6\")\n\n    // Excel \u51fa\u529b\n    implementation(\"org.apache.poi:poi-ooxml:5.2.5\")\n\n    // TestFX\uff08UI \u30c6\u30b9\u30c8\uff09\n    testImplementation(\"org.testfx:testfx-core:4.0.18\")\n    testImplementation(\"org.testfx:testfx-junit5:4.0.18\")\n}\n</code></pre> <p>\u8ffd\u52a0\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u8aac\u660e\uff1a</p> \u30d1\u30c3\u30b1\u30fc\u30b8 \u7528\u9014 javafx.controls \u6a19\u6e96 UI \u30b3\u30f3\u30c8\u30ed\u30fc\u30eb javafx.fxml FXML \u30d1\u30fc\u30b5\u30fc ControlsFX \u62e1\u5f35\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\uff08SearchableComboBox\u7b49\uff09 Ikonli \u30a2\u30a4\u30b3\u30f3\u30d5\u30a9\u30f3\u30c8 JasperReports \u5e33\u7968\u51fa\u529b Apache POI Excel \u51fa\u529b TestFX UI \u81ea\u52d5\u30c6\u30b9\u30c8"},{"location":"article/study/study4-2/#466-spring-boot-javafx","title":"46.6 Spring Boot + JavaFX \u7d71\u5408","text":"JavaFxApplication.java <pre><code>package com.example.production.infrastructure.in.javafx;\n\nimport javafx.application.Application;\nimport javafx.application.Platform;\nimport javafx.stage.Stage;\nimport org.springframework.boot.builder.SpringApplicationBuilder;\nimport org.springframework.context.ConfigurableApplicationContext;\n\n/**\n * JavaFX \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30a8\u30f3\u30c8\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\n * Spring Boot \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3068 JavaFX \u3092\u7d71\u5408\n */\npublic class JavaFxApplication extends Application {\n\n    private ConfigurableApplicationContext springContext;\n\n    @Override\n    public void init() {\n        springContext = new SpringApplicationBuilder(ProductionApplication.class).run();\n    }\n\n    @Override\n    public void start(Stage primaryStage) {\n        StageManager stageManager = springContext.getBean(StageManager.class);\n        stageManager.setPrimaryStage(primaryStage);\n        stageManager.switchScene(FxmlView.MAIN);\n    }\n\n    @Override\n    public void stop() {\n        springContext.close();\n        Platform.exit();\n    }\n}\n</code></pre> StageManager.java <pre><code>package com.example.production.infrastructure.in.javafx.config;\n\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Parent;\nimport javafx.scene.Scene;\nimport javafx.stage.Stage;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.stereotype.Component;\n\nimport java.io.IOException;\nimport java.util.Objects;\n\n/**\n * JavaFX Stage/Scene \u306e\u7ba1\u7406\n */\n@Component\npublic class StageManager {\n\n    private final ApplicationContext applicationContext;\n    private Stage primaryStage;\n\n    public StageManager(ApplicationContext applicationContext) {\n        this.applicationContext = applicationContext;\n    }\n\n    public void setPrimaryStage(Stage primaryStage) {\n        this.primaryStage = primaryStage;\n    }\n\n    public void switchScene(FxmlView view) {\n        Parent root = loadView(view.getFxmlPath());\n        Scene scene = new Scene(root);\n\n        scene.getStylesheets().add(\n            Objects.requireNonNull(\n                getClass().getResource(\"/css/application.css\")\n            ).toExternalForm()\n        );\n\n        primaryStage.setTitle(view.getTitle());\n        primaryStage.setScene(scene);\n        primaryStage.centerOnScreen();\n\n        if (!primaryStage.isShowing()) {\n            primaryStage.show();\n        }\n    }\n\n    private Parent loadView(String fxmlPath) {\n        try {\n            FXMLLoader loader = new FXMLLoader(getClass().getResource(fxmlPath));\n            loader.setControllerFactory(applicationContext::getBean);\n            return loader.load();\n        } catch (IOException e) {\n            throw new RuntimeException(\"FXML \u30ed\u30fc\u30c9\u30a8\u30e9\u30fc: \" + fxmlPath, e);\n        }\n    }\n\n    public ApplicationContext getApplicationContext() {\n        return applicationContext;\n    }\n}\n</code></pre> FxmlView.java\uff08\u753b\u9762\u5b9a\u7fa9\uff09 <pre><code>package com.example.production.infrastructure.in.javafx.config;\n\npublic enum FxmlView {\n\n    MAIN(\"/fxml/main.fxml\", \"\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\"),\n    ITEM_LIST(\"/fxml/item/item-list.fxml\", \"\u54c1\u76ee\u30de\u30b9\u30bf\"),\n    ITEM_EDIT(\"/fxml/item/item-edit.fxml\", \"\u54c1\u76ee\u7de8\u96c6\"),\n    BOM_TREE(\"/fxml/bom/bom-tree.fxml\", \"BOM\u5c55\u958b\"),\n    WHERE_USED(\"/fxml/bom/where-used.fxml\", \"\u4f7f\u7528\u5148\u7167\u4f1a\"),\n    ORDER_LIST(\"/fxml/purchase/order-list.fxml\", \"\u767a\u6ce8\u4e00\u89a7\"),\n    ORDER_ENTRY(\"/fxml/purchase/order-entry.fxml\", \"\u767a\u6ce8\u5165\u529b\"),\n    STOCK_LIST(\"/fxml/inventory/stock-list.fxml\", \"\u5728\u5eab\u7167\u4f1a\"),\n    MRP_EXECUTION(\"/fxml/mrp/mrp-execution.fxml\", \"MRP\u5b9f\u884c\");\n\n    private final String fxmlPath;\n    private final String title;\n\n    FxmlView(String fxmlPath, String title) {\n        this.fxmlPath = fxmlPath;\n        this.title = title;\n    }\n\n    public String getFxmlPath() { return fxmlPath; }\n    public String getTitle() { return title; }\n}\n</code></pre>"},{"location":"article/study/study4-2/#467-javafx-property","title":"46.7 JavaFX Property \u306e\u6d3b\u7528","text":"<p>JavaFX \u306e Property \u6a5f\u80fd\u3092\u4f7f\u3063\u3066\u3001UI \u3068\u30c7\u30fc\u30bf\u306e\u53cc\u65b9\u5411\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u3092\u5b9f\u73fe\u3057\u307e\u3059\u3002</p> ItemRow.java\uff08View \u7528\u30c7\u30fc\u30bf\u30af\u30e9\u30b9\uff09 <pre><code>package com.example.production.infrastructure.in.javafx.view;\n\nimport javafx.beans.property.*;\nimport java.math.BigDecimal;\n\n/**\n * \u54c1\u76ee\u30de\u30b9\u30bf\u753b\u9762\u7528\u306e\u884c\u30e2\u30c7\u30eb\n */\npublic class ItemRow {\n\n    private final StringProperty itemCode = new SimpleStringProperty();\n    private final StringProperty itemName = new SimpleStringProperty();\n    private final StringProperty categoryName = new SimpleStringProperty();\n    private final IntegerProperty leadTime = new SimpleIntegerProperty();\n    private final IntegerProperty safetyStock = new SimpleIntegerProperty();\n    private final StringProperty unitCode = new SimpleStringProperty();\n\n    // Property \u30a2\u30af\u30bb\u30b5\n    public StringProperty itemCodeProperty() { return itemCode; }\n    public StringProperty itemNameProperty() { return itemName; }\n    public StringProperty categoryNameProperty() { return categoryName; }\n    public IntegerProperty leadTimeProperty() { return leadTime; }\n    public IntegerProperty safetyStockProperty() { return safetyStock; }\n    public StringProperty unitCodeProperty() { return unitCode; }\n\n    // Getter/Setter\n    public String getItemCode() { return itemCode.get(); }\n    public void setItemCode(String value) { itemCode.set(value); }\n\n    public String getItemName() { return itemName.get(); }\n    public void setItemName(String value) { itemName.set(value); }\n\n    public String getCategoryName() { return categoryName.get(); }\n    public void setCategoryName(String value) { categoryName.set(value); }\n\n    public int getLeadTime() { return leadTime.get(); }\n    public void setLeadTime(int value) { leadTime.set(value); }\n\n    public int getSafetyStock() { return safetyStock.get(); }\n    public void setSafetyStock(int value) { safetyStock.set(value); }\n}\n</code></pre> ItemViewModel.java <pre><code>package com.example.production.infrastructure.in.javafx.viewmodel;\n\nimport com.example.production.application.port.in.ItemUseCase;\nimport com.example.production.domain.model.item.Item;\nimport com.example.production.domain.model.item.ItemCategory;\nimport com.example.production.infrastructure.in.javafx.view.ItemRow;\nimport javafx.beans.property.*;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport org.springframework.stereotype.Component;\n\nimport java.util.List;\n\n@Component\npublic class ItemViewModel {\n\n    private final ItemUseCase itemUseCase;\n\n    private final ObservableList&lt;ItemRow&gt; items = FXCollections.observableArrayList();\n    private final ObjectProperty&lt;ItemRow&gt; selectedItem = new SimpleObjectProperty&lt;&gt;();\n    private final StringProperty searchKeyword = new SimpleStringProperty(\"\");\n    private final ObjectProperty&lt;ItemCategory&gt; filterCategory = new SimpleObjectProperty&lt;&gt;();\n    private final BooleanProperty loading = new SimpleBooleanProperty(false);\n    private final StringProperty errorMessage = new SimpleStringProperty();\n\n    public ItemViewModel(ItemUseCase itemUseCase) {\n        this.itemUseCase = itemUseCase;\n    }\n\n    public void search() {\n        loading.set(true);\n        errorMessage.set(null);\n\n        try {\n            List&lt;Item&gt; result;\n            if (filterCategory.get() != null) {\n                result = itemUseCase.getItemsByCategory(filterCategory.get());\n            } else if (!searchKeyword.get().isBlank()) {\n                result = itemUseCase.searchByKeyword(searchKeyword.get());\n            } else {\n                result = itemUseCase.getAllItems();\n            }\n\n            items.clear();\n            result.forEach(item -&gt; items.add(toRow(item)));\n        } catch (Exception e) {\n            errorMessage.set(\"\u691c\u7d22\u30a8\u30e9\u30fc: \" + e.getMessage());\n        } finally {\n            loading.set(false);\n        }\n    }\n\n    public void delete(String itemCode) {\n        loading.set(true);\n        try {\n            itemUseCase.deleteItem(itemCode);\n            items.removeIf(row -&gt; row.getItemCode().equals(itemCode));\n        } catch (Exception e) {\n            errorMessage.set(\"\u524a\u9664\u30a8\u30e9\u30fc: \" + e.getMessage());\n            throw e;\n        } finally {\n            loading.set(false);\n        }\n    }\n\n    public ObservableList&lt;ItemRow&gt; getItems() { return items; }\n    public ObjectProperty&lt;ItemRow&gt; selectedItemProperty() { return selectedItem; }\n    public StringProperty searchKeywordProperty() { return searchKeyword; }\n    public ObjectProperty&lt;ItemCategory&gt; filterCategoryProperty() { return filterCategory; }\n    public BooleanProperty loadingProperty() { return loading; }\n    public StringProperty errorMessageProperty() { return errorMessage; }\n\n    private ItemRow toRow(Item item) {\n        ItemRow row = new ItemRow();\n        row.setItemCode(item.getItemCode());\n        row.setItemName(item.getItemName());\n        row.setCategoryName(item.getCategory() != null ? item.getCategory().name() : \"\");\n        row.setLeadTime(item.getLeadTime() != null ? item.getLeadTime() : 0);\n        row.setSafetyStock(item.getSafetyStock() != null ? item.getSafetyStock() : 0);\n        return row;\n    }\n}\n</code></pre>"},{"location":"article/study/study4-2/#39","title":"\u7b2c39\u7ae0\uff1a\u30de\u30b9\u30bf\u306e\u5b9f\u88c5","text":""},{"location":"article/study/study4-2/#391","title":"39.1 \u54c1\u76ee\u30de\u30b9\u30bf\u753b\u9762\u306e\u8a2d\u8a08","text":""},{"location":"article/study/study4-2/#392-tdd","title":"39.2 \u54c1\u76ee\u30de\u30b9\u30bf\u4e00\u89a7\u753b\u9762\u306e TDD \u5b9f\u88c5","text":""},{"location":"article/study/study4-2/#red","title":"Red: \u5931\u6557\u3059\u308b\u30c6\u30b9\u30c8\u3092\u66f8\u304f","text":"ItemListControllerTest.java <pre><code>@ExtendWith({ApplicationExtension.class, MockitoExtension.class})\n@DisplayName(\"\u54c1\u76ee\u30de\u30b9\u30bf\u4e00\u89a7\u753b\u9762\")\nclass ItemListControllerTest {\n\n    @Mock\n    private ItemUseCase itemUseCase;\n\n    private ItemViewModel viewModel;\n\n    @Start\n    void start(Stage stage) throws Exception {\n        viewModel = new ItemViewModel(itemUseCase);\n        var controller = new ItemListController(viewModel);\n\n        var loader = new FXMLLoader(getClass().getResource(\"/fxml/item/item-list.fxml\"));\n        loader.setController(controller);\n        stage.setScene(new Scene(loader.load()));\n        stage.show();\n    }\n\n    @Test\n    @DisplayName(\"\u54c1\u76ee\u4e00\u89a7\u304c\u30c6\u30fc\u30d6\u30eb\u306b\u8868\u793a\u3055\u308c\u308b\")\n    void shouldDisplayItemsInTable(FxRobot robot) {\n        // Arrange\n        when(itemUseCase.getAllItems()).thenReturn(List.of(\n            createItem(\"PROD-001\", \"\u88fd\u54c1A\", ItemCategory.PRODUCT),\n            createItem(\"PART-001\", \"\u90e8\u54c1B\", ItemCategory.PART)\n        ));\n\n        // Act\n        robot.interact(() -&gt; viewModel.search());\n\n        // Assert\n        TableView&lt;ItemRow&gt; table = robot.lookup(\"#itemTable\").queryTableView();\n        assertThat(table.getItems()).hasSize(2);\n        assertThat(table.getItems().get(0).getItemCode()).isEqualTo(\"PROD-001\");\n    }\n\n    @Test\n    @DisplayName(\"\u54c1\u76ee\u533a\u5206\u3067\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3067\u304d\u308b\")\n    void shouldFilterByCategory(FxRobot robot) {\n        when(itemUseCase.getItemsByCategory(ItemCategory.PRODUCT)).thenReturn(List.of(\n            createItem(\"PROD-001\", \"\u88fd\u54c1A\", ItemCategory.PRODUCT)\n        ));\n\n        robot.clickOn(\"#categoryComboBox\").clickOn(\"\u88fd\u54c1\");\n        robot.clickOn(\"#searchButton\");\n\n        TableView&lt;ItemRow&gt; table = robot.lookup(\"#itemTable\").queryTableView();\n        assertThat(table.getItems()).hasSize(1);\n    }\n\n    @Test\n    @DisplayName(\"\u30ad\u30fc\u30ef\u30fc\u30c9\u3067\u54c1\u76ee\u3092\u691c\u7d22\u3067\u304d\u308b\")\n    void shouldSearchItemsByKeyword(FxRobot robot) {\n        when(itemUseCase.searchByKeyword(\"\u88fd\u54c1\")).thenReturn(List.of(\n            createItem(\"PROD-001\", \"\u88fd\u54c1A\", ItemCategory.PRODUCT)\n        ));\n\n        robot.clickOn(\"#searchField\").write(\"\u88fd\u54c1\").type(KeyCode.ENTER);\n\n        TableView&lt;ItemRow&gt; table = robot.lookup(\"#itemTable\").queryTableView();\n        assertThat(table.getItems()).hasSize(1);\n    }\n\n    private Item createItem(String code, String name, ItemCategory category) {\n        return Item.builder()\n            .itemCode(code)\n            .itemName(name)\n            .category(category)\n            .effectiveDate(LocalDate.now())\n            .build();\n    }\n}\n</code></pre>"},{"location":"article/study/study4-2/#green-controller","title":"Green: Controller \u306e\u5b9f\u88c5","text":"ItemListController.java <pre><code>package com.example.production.infrastructure.in.javafx.controller;\n\nimport com.example.production.domain.model.item.ItemCategory;\nimport com.example.production.infrastructure.in.javafx.util.AlertHelper;\nimport com.example.production.infrastructure.in.javafx.view.ItemRow;\nimport com.example.production.infrastructure.in.javafx.viewmodel.ItemViewModel;\nimport javafx.fxml.FXML;\nimport javafx.fxml.Initializable;\nimport javafx.scene.control.*;\nimport javafx.scene.control.cell.PropertyValueFactory;\nimport org.springframework.stereotype.Component;\n\nimport java.net.URL;\nimport java.util.ResourceBundle;\n\n@Component\npublic class ItemListController implements Initializable {\n\n    private final ItemViewModel viewModel;\n\n    @FXML private TextField searchField;\n    @FXML private ComboBox&lt;ItemCategory&gt; categoryComboBox;\n    @FXML private TableView&lt;ItemRow&gt; itemTable;\n    @FXML private TableColumn&lt;ItemRow, String&gt; codeColumn;\n    @FXML private TableColumn&lt;ItemRow, String&gt; nameColumn;\n    @FXML private TableColumn&lt;ItemRow, String&gt; categoryColumn;\n    @FXML private TableColumn&lt;ItemRow, Integer&gt; leadTimeColumn;\n    @FXML private TableColumn&lt;ItemRow, Integer&gt; safetyStockColumn;\n    @FXML private Button editButton;\n    @FXML private Button deleteButton;\n    @FXML private Label recordCount;\n    @FXML private ProgressIndicator loadingIndicator;\n\n    public ItemListController(ItemViewModel viewModel) {\n        this.viewModel = viewModel;\n    }\n\n    @Override\n    public void initialize(URL url, ResourceBundle rb) {\n        // \u30ab\u30c6\u30b4\u30ea\u30b3\u30f3\u30dc\u30dc\u30c3\u30af\u30b9\u306e\u8a2d\u5b9a\n        categoryComboBox.getItems().add(null);  // \u5168\u3066\n        categoryComboBox.getItems().addAll(ItemCategory.values());\n        categoryComboBox.valueProperty().bindBidirectional(viewModel.filterCategoryProperty());\n\n        // \u30c6\u30fc\u30d6\u30eb\u30ab\u30e9\u30e0\u306e\u8a2d\u5b9a\n        codeColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(\"itemCode\"));\n        nameColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(\"itemName\"));\n        categoryColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(\"categoryName\"));\n        leadTimeColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(\"leadTime\"));\n        safetyStockColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(\"safetyStock\"));\n\n        // \u30c6\u30fc\u30d6\u30eb\u3068ViewModel\u306e\u30d0\u30a4\u30f3\u30c9\n        itemTable.setItems(viewModel.getItems());\n        viewModel.selectedItemProperty().bind(itemTable.getSelectionModel().selectedItemProperty());\n\n        // \u30dc\u30bf\u30f3\u306e\u6709\u52b9/\u7121\u52b9\u5236\u5fa1\n        editButton.disableProperty().bind(\n            itemTable.getSelectionModel().selectedItemProperty().isNull()\n        );\n        deleteButton.disableProperty().bind(\n            itemTable.getSelectionModel().selectedItemProperty().isNull()\n        );\n\n        // \u30ed\u30fc\u30c7\u30a3\u30f3\u30b0\u30a4\u30f3\u30b8\u30b1\u30fc\u30bf\u30fc\n        loadingIndicator.visibleProperty().bind(viewModel.loadingProperty());\n\n        // \u691c\u7d22\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u30d0\u30a4\u30f3\u30c9\n        searchField.textProperty().bindBidirectional(viewModel.searchKeywordProperty());\n\n        // \u4ef6\u6570\u8868\u793a\n        viewModel.getItems().addListener((observable, oldValue, newValue) -&gt; {\n            recordCount.setText(viewModel.getItems().size() + \" \u4ef6\");\n        });\n\n        // \u521d\u671f\u691c\u7d22\n        viewModel.search();\n    }\n\n    @FXML\n    private void onSearch() {\n        viewModel.search();\n    }\n\n    @FXML\n    private void onNew() {\n        // \u65b0\u898f\u753b\u9762\u3078\u306e\u9077\u79fb\n    }\n\n    @FXML\n    private void onEdit() {\n        // \u7de8\u96c6\u753b\u9762\u3078\u306e\u9077\u79fb\n    }\n\n    @FXML\n    private void onDelete() {\n        ItemRow selected = viewModel.selectedItemProperty().get();\n        if (selected == null) return;\n\n        if (AlertHelper.showConfirmation(\n                \"\u54c1\u76ee\u300c\" + selected.getItemName() + \"\u300d\u3092\u524a\u9664\u3057\u307e\u3059\u304b\uff1f\")) {\n            try {\n                viewModel.delete(selected.getItemCode());\n                AlertHelper.showInfo(\"\u524a\u9664\u3057\u307e\u3057\u305f\");\n            } catch (Exception e) {\n                AlertHelper.showError(\"\u524a\u9664\u306b\u5931\u6557\u3057\u307e\u3057\u305f: \" + e.getMessage());\n            }\n        }\n    }\n\n    @FXML\n    private void onExportExcel() {\n        // Excel\u51fa\u529b\u51e6\u7406\n    }\n}\n</code></pre> item-list.fxml <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;?import javafx.scene.control.*?&gt;\n&lt;?import javafx.scene.layout.*?&gt;\n&lt;?import org.kordamp.ikonli.javafx.FontIcon?&gt;\n\n&lt;VBox xmlns=\"http://javafx.com/javafx/21\"\n      xmlns:fx=\"http://javafx.com/fxml/1\"\n      fx:controller=\"com.example.production.infrastructure.in.javafx.controller.ItemListController\"\n      spacing=\"10\" padding=\"10\"&gt;\n\n    &lt;!-- \u30c4\u30fc\u30eb\u30d0\u30fc --&gt;\n    &lt;HBox spacing=\"10\" alignment=\"CENTER_LEFT\"&gt;\n        &lt;ComboBox fx:id=\"categoryComboBox\" promptText=\"\u54c1\u76ee\u533a\u5206\" prefWidth=\"120\"/&gt;\n        &lt;TextField fx:id=\"searchField\" promptText=\"\u54c1\u76ee\u30b3\u30fc\u30c9\u30fb\u54c1\u76ee\u540d\u3067\u691c\u7d22\" prefWidth=\"250\"/&gt;\n        &lt;Button fx:id=\"searchButton\" onAction=\"#onSearch\"&gt;\n            &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-search\"/&gt;&lt;/graphic&gt;\n        &lt;/Button&gt;\n        &lt;Pane HBox.hgrow=\"ALWAYS\"/&gt;\n        &lt;Button fx:id=\"newButton\" text=\"\u65b0\u898f\" styleClass=\"primary\" onAction=\"#onNew\"&gt;\n            &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-plus\"/&gt;&lt;/graphic&gt;\n        &lt;/Button&gt;\n        &lt;Button fx:id=\"editButton\" text=\"\u7de8\u96c6\" onAction=\"#onEdit\" disable=\"true\"/&gt;\n        &lt;Button fx:id=\"deleteButton\" text=\"\u524a\u9664\" styleClass=\"danger\" onAction=\"#onDelete\" disable=\"true\"/&gt;\n        &lt;Button text=\"Excel\u51fa\u529b\" onAction=\"#onExportExcel\"&gt;\n            &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-file-excel\"/&gt;&lt;/graphic&gt;\n        &lt;/Button&gt;\n    &lt;/HBox&gt;\n\n    &lt;!-- \u54c1\u76ee\u30c6\u30fc\u30d6\u30eb --&gt;\n    &lt;TableView fx:id=\"itemTable\" VBox.vgrow=\"ALWAYS\"&gt;\n        &lt;placeholder&gt;&lt;Label text=\"\u8a72\u5f53\u3059\u308b\u54c1\u76ee\u304c\u3042\u308a\u307e\u305b\u3093\"/&gt;&lt;/placeholder&gt;\n        &lt;columns&gt;\n            &lt;TableColumn fx:id=\"codeColumn\" text=\"\u54c1\u76ee\u30b3\u30fc\u30c9\" prefWidth=\"120\"/&gt;\n            &lt;TableColumn fx:id=\"nameColumn\" text=\"\u54c1\u76ee\u540d\" prefWidth=\"200\"/&gt;\n            &lt;TableColumn fx:id=\"categoryColumn\" text=\"\u54c1\u76ee\u533a\u5206\" prefWidth=\"100\"/&gt;\n            &lt;TableColumn fx:id=\"leadTimeColumn\" text=\"\u30ea\u30fc\u30c9\u30bf\u30a4\u30e0\" prefWidth=\"100\"/&gt;\n            &lt;TableColumn fx:id=\"safetyStockColumn\" text=\"\u5b89\u5168\u5728\u5eab\" prefWidth=\"100\"/&gt;\n        &lt;/columns&gt;\n    &lt;/TableView&gt;\n\n    &lt;!-- \u30b9\u30c6\u30fc\u30bf\u30b9\u30d0\u30fc --&gt;\n    &lt;HBox spacing=\"10\" styleClass=\"status-bar\"&gt;\n        &lt;Label fx:id=\"recordCount\" text=\"0 \u4ef6\"/&gt;\n        &lt;Pane HBox.hgrow=\"ALWAYS\"/&gt;\n        &lt;ProgressIndicator fx:id=\"loadingIndicator\" visible=\"false\" prefWidth=\"20\" prefHeight=\"20\"/&gt;\n    &lt;/HBox&gt;\n&lt;/VBox&gt;\n</code></pre>"},{"location":"article/study/study4-2/#393-bom","title":"39.3 BOM \u5c55\u958b\u753b\u9762\u306e\u5b9f\u88c5","text":"BomTreeController.java <pre><code>package com.example.production.infrastructure.in.javafx.controller;\n\nimport com.example.production.application.service.BomNode;\nimport com.example.production.application.service.BomService;\nimport com.example.production.infrastructure.in.javafx.util.AlertHelper;\nimport javafx.fxml.FXML;\nimport javafx.fxml.Initializable;\nimport javafx.scene.control.*;\nimport org.springframework.stereotype.Component;\n\nimport java.net.URL;\nimport java.util.ResourceBundle;\n\n@Component\npublic class BomTreeController implements Initializable {\n\n    private final BomService bomService;\n\n    @FXML private TextField itemCodeField;\n    @FXML private TreeView&lt;BomNode&gt; bomTreeView;\n    @FXML private Label itemNameLabel;\n    @FXML private ProgressIndicator loadingIndicator;\n\n    public BomTreeController(BomService bomService) {\n        this.bomService = bomService;\n    }\n\n    @Override\n    public void initialize(URL url, ResourceBundle rb) {\n        // TreeView \u306e\u30bb\u30eb\u30d5\u30a1\u30af\u30c8\u30ea\u8a2d\u5b9a\n        bomTreeView.setCellFactory(tv -&gt; new TreeCell&lt;&gt;() {\n            @Override\n            protected void updateItem(BomNode item, boolean empty) {\n                super.updateItem(item, empty);\n                if (empty || item == null) {\n                    setText(null);\n                    setGraphic(null);\n                } else {\n                    String indent = \"  \".repeat(item.getLevel());\n                    setText(String.format(\"%s%s [%s] x %s\",\n                        indent,\n                        item.getItemCode(),\n                        item.getItemName(),\n                        item.getRequiredQuantity()));\n                }\n            }\n        });\n    }\n\n    @FXML\n    private void onExpand() {\n        String itemCode = itemCodeField.getText();\n        if (itemCode == null || itemCode.isBlank()) {\n            AlertHelper.showWarning(\"\u54c1\u76ee\u30b3\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\");\n            return;\n        }\n\n        loadingIndicator.setVisible(true);\n        try {\n            BomNode root = bomService.explodeBom(itemCode);\n            TreeItem&lt;BomNode&gt; rootItem = createTreeItem(root);\n            rootItem.setExpanded(true);\n            bomTreeView.setRoot(rootItem);\n            itemNameLabel.setText(root.getItemName());\n        } catch (Exception e) {\n            AlertHelper.showError(\"BOM\u5c55\u958b\u30a8\u30e9\u30fc: \" + e.getMessage());\n        } finally {\n            loadingIndicator.setVisible(false);\n        }\n    }\n\n    private TreeItem&lt;BomNode&gt; createTreeItem(BomNode node) {\n        TreeItem&lt;BomNode&gt; item = new TreeItem&lt;&gt;(node);\n        if (node.getChildren() != null) {\n            for (BomNode child : node.getChildren()) {\n                item.getChildren().add(createTreeItem(child));\n            }\n        }\n        item.setExpanded(true);\n        return item;\n    }\n\n    @FXML\n    private void onExpandAll() {\n        expandAll(bomTreeView.getRoot(), true);\n    }\n\n    @FXML\n    private void onCollapseAll() {\n        expandAll(bomTreeView.getRoot(), false);\n    }\n\n    private void expandAll(TreeItem&lt;?&gt; item, boolean expand) {\n        if (item != null) {\n            item.setExpanded(expand);\n            for (TreeItem&lt;?&gt; child : item.getChildren()) {\n                expandAll(child, expand);\n            }\n        }\n    }\n}\n</code></pre> bom-tree.fxml <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;?import javafx.scene.control.*?&gt;\n&lt;?import javafx.scene.layout.*?&gt;\n&lt;?import org.kordamp.ikonli.javafx.FontIcon?&gt;\n\n&lt;VBox xmlns=\"http://javafx.com/javafx/21\"\n      xmlns:fx=\"http://javafx.com/fxml/1\"\n      fx:controller=\"com.example.production.infrastructure.in.javafx.controller.BomTreeController\"\n      spacing=\"10\" padding=\"10\"&gt;\n\n    &lt;!-- \u691c\u7d22\u30a8\u30ea\u30a2 --&gt;\n    &lt;HBox spacing=\"10\" alignment=\"CENTER_LEFT\"&gt;\n        &lt;Label text=\"\u54c1\u76ee\u30b3\u30fc\u30c9:\"/&gt;\n        &lt;TextField fx:id=\"itemCodeField\" prefWidth=\"150\"/&gt;\n        &lt;Button text=\"\u5c55\u958b\" styleClass=\"primary\" onAction=\"#onExpand\"&gt;\n            &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-sitemap\"/&gt;&lt;/graphic&gt;\n        &lt;/Button&gt;\n        &lt;Separator orientation=\"VERTICAL\"/&gt;\n        &lt;Button text=\"\u5168\u5c55\u958b\" onAction=\"#onExpandAll\"&gt;\n            &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-plus-square\"/&gt;&lt;/graphic&gt;\n        &lt;/Button&gt;\n        &lt;Button text=\"\u5168\u6298\u7573\" onAction=\"#onCollapseAll\"&gt;\n            &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-minus-square\"/&gt;&lt;/graphic&gt;\n        &lt;/Button&gt;\n        &lt;Pane HBox.hgrow=\"ALWAYS\"/&gt;\n        &lt;Label fx:id=\"itemNameLabel\" styleClass=\"item-name-label\"/&gt;\n    &lt;/HBox&gt;\n\n    &lt;!-- BOM \u30c4\u30ea\u30fc --&gt;\n    &lt;TreeView fx:id=\"bomTreeView\" VBox.vgrow=\"ALWAYS\" showRoot=\"true\"/&gt;\n\n    &lt;!-- \u30b9\u30c6\u30fc\u30bf\u30b9\u30d0\u30fc --&gt;\n    &lt;HBox spacing=\"10\" styleClass=\"status-bar\"&gt;\n        &lt;ProgressIndicator fx:id=\"loadingIndicator\" visible=\"false\" prefWidth=\"20\" prefHeight=\"20\"/&gt;\n    &lt;/HBox&gt;\n&lt;/VBox&gt;\n</code></pre>"},{"location":"article/study/study4-2/#40","title":"\u7b2c40\u7ae0\uff1a\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306e\u5b9f\u88c5","text":""},{"location":"article/study/study4-2/#401","title":"40.1 \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u753b\u9762\u306e\u7279\u5fb4","text":"<p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u753b\u9762\u306f\u3001\u30de\u30b9\u30bf\u753b\u9762\u3068\u306f\u7570\u306a\u308b\u4ee5\u4e0b\u306e\u7279\u5fb4\u304c\u3042\u308a\u307e\u3059\u3002</p> <p></p>"},{"location":"article/study/study4-2/#402","title":"40.2 \u767a\u6ce8\u5165\u529b\u753b\u9762\u306e\u8a2d\u8a08","text":""},{"location":"article/study/study4-2/#403-tdd","title":"40.3 \u767a\u6ce8\u5165\u529b\u753b\u9762\u306e TDD \u5b9f\u88c5","text":""},{"location":"article/study/study4-2/#red_1","title":"Red: \u5931\u6557\u3059\u308b\u30c6\u30b9\u30c8\u3092\u66f8\u304f","text":"PurchaseOrderEntryControllerTest.java <pre><code>@ExtendWith({ApplicationExtension.class, MockitoExtension.class})\n@DisplayName(\"\u767a\u6ce8\u5165\u529b\u753b\u9762\")\nclass PurchaseOrderEntryControllerTest {\n\n    @Mock\n    private PurchaseOrderUseCase orderUseCase;\n    @Mock\n    private ItemUseCase itemUseCase;\n\n    private PurchaseOrderViewModel viewModel;\n\n    @Nested\n    @DisplayName(\"\u660e\u7d30\u8ffd\u52a0\")\n    class AddDetail {\n\n        @Test\n        @DisplayName(\"\u54c1\u76ee\u3092\u9078\u629e\u3057\u3066\u660e\u7d30\u3092\u8ffd\u52a0\u3067\u304d\u308b\")\n        void shouldAddDetailWhenItemSelected(FxRobot robot) {\n            when(itemUseCase.getItemByCode(\"PART-001\")).thenReturn(\n                createItem(\"PART-001\", \"\u30c6\u30b9\u30c8\u90e8\u54c1\", new BigDecimal(\"500\"))\n            );\n\n            robot.clickOn(\"#itemCodeField\").write(\"PART-001\");\n            robot.clickOn(\"#quantityField\").write(\"100\");\n            robot.clickOn(\"#addDetailButton\");\n\n            TableView&lt;OrderDetailRow&gt; table = robot.lookup(\"#detailTable\").queryTableView();\n            assertThat(table.getItems()).hasSize(1);\n            assertThat(table.getItems().get(0).getAmount())\n                .isEqualByComparingTo(new BigDecimal(\"50000\"));\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u5408\u8a08\u8a08\u7b97\")\n    class TotalCalculation {\n\n        @Test\n        @DisplayName(\"\u660e\u7d30\u8ffd\u52a0\u6642\u306b\u5408\u8a08\u91d1\u984d\u304c\u518d\u8a08\u7b97\u3055\u308c\u308b\")\n        void shouldRecalculateTotalWhenDetailAdded(FxRobot robot) {\n            viewModel.addDetail(createDetailRow(\"PART-001\", 100, new BigDecimal(\"500\")));\n            viewModel.addDetail(createDetailRow(\"MAT-001\", 50, new BigDecimal(\"200\")));\n\n            Label totalLabel = robot.lookup(\"#totalAmountLabel\").queryAs(Label.class);\n            // 100 \u00d7 500 + 50 \u00d7 200 = 60,000\n            assertThat(totalLabel.getText()).contains(\"60,000\");\n        }\n    }\n\n    @Nested\n    @DisplayName(\"\u767a\u6ce8\u78ba\u5b9a\")\n    class ConfirmOrder {\n\n        @Test\n        @DisplayName(\"\u4e0b\u66f8\u304d\u72b6\u614b\u306e\u767a\u6ce8\u3092\u78ba\u5b9a\u3067\u304d\u308b\")\n        void shouldConfirmDraftOrder(FxRobot robot) {\n            // Arrange\n            viewModel.addDetail(createDetailRow(\"PART-001\", 100, new BigDecimal(\"500\")));\n            when(orderUseCase.confirmOrder(anyString())).thenReturn(\n                createOrder(\"PO-001\", OrderStatus.CONFIRMED)\n            );\n\n            // Act\n            robot.clickOn(\"#confirmButton\");\n\n            // Assert\n            verify(orderUseCase).confirmOrder(anyString());\n        }\n    }\n}\n</code></pre>"},{"location":"article/study/study4-2/#green-controller-fxml","title":"Green: Controller \u3068 FXML \u306e\u5b9f\u88c5","text":"PurchaseOrderEntryController.java <pre><code>package com.example.production.infrastructure.in.javafx.controller;\n\nimport com.example.production.application.port.in.*;\nimport com.example.production.domain.model.purchase.OrderStatus;\nimport com.example.production.infrastructure.in.javafx.util.AlertHelper;\nimport com.example.production.infrastructure.in.javafx.view.OrderDetailRow;\nimport com.example.production.infrastructure.in.javafx.viewmodel.PurchaseOrderViewModel;\nimport javafx.fxml.FXML;\nimport javafx.fxml.Initializable;\nimport javafx.scene.control.*;\nimport javafx.scene.control.cell.PropertyValueFactory;\nimport org.springframework.stereotype.Component;\n\nimport java.math.BigDecimal;\nimport java.net.URL;\nimport java.time.LocalDate;\nimport java.util.ResourceBundle;\n\n@Component\npublic class PurchaseOrderEntryController implements Initializable {\n\n    private final PurchaseOrderViewModel viewModel;\n    private final ItemUseCase itemUseCase;\n\n    @FXML private TextField orderNumberField;\n    @FXML private DatePicker orderDatePicker;\n    @FXML private TextField supplierCodeField;\n    @FXML private TextField supplierNameField;\n    @FXML private Label statusLabel;\n\n    @FXML private TextField itemCodeField;\n    @FXML private TextField itemNameField;\n    @FXML private TextField quantityField;\n    @FXML private TextField unitPriceField;\n    @FXML private DatePicker deliveryDatePicker;\n\n    @FXML private TableView&lt;OrderDetailRow&gt; detailTable;\n    @FXML private TableColumn&lt;OrderDetailRow, Integer&gt; lineNoColumn;\n    @FXML private TableColumn&lt;OrderDetailRow, String&gt; itemCodeColumn;\n    @FXML private TableColumn&lt;OrderDetailRow, String&gt; itemNameColumn;\n    @FXML private TableColumn&lt;OrderDetailRow, BigDecimal&gt; quantityColumn;\n    @FXML private TableColumn&lt;OrderDetailRow, BigDecimal&gt; unitPriceColumn;\n    @FXML private TableColumn&lt;OrderDetailRow, LocalDate&gt; deliveryDateColumn;\n    @FXML private TableColumn&lt;OrderDetailRow, BigDecimal&gt; amountColumn;\n\n    @FXML private Label totalAmountLabel;\n    @FXML private Button saveButton;\n    @FXML private Button confirmButton;\n\n    public PurchaseOrderEntryController(\n            PurchaseOrderViewModel viewModel,\n            ItemUseCase itemUseCase) {\n        this.viewModel = viewModel;\n        this.itemUseCase = itemUseCase;\n    }\n\n    @Override\n    public void initialize(URL url, ResourceBundle rb) {\n        // \u30c6\u30fc\u30d6\u30eb\u30ab\u30e9\u30e0\u306e\u8a2d\u5b9a\n        lineNoColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(\"lineNumber\"));\n        itemCodeColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(\"itemCode\"));\n        itemNameColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(\"itemName\"));\n        quantityColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(\"quantity\"));\n        unitPriceColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(\"unitPrice\"));\n        deliveryDateColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(\"deliveryDate\"));\n        amountColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(\"amount\"));\n\n        // \u91d1\u984d\u30ab\u30e9\u30e0\u306e\u66f8\u5f0f\u8a2d\u5b9a\n        amountColumn.setCellFactory(col -&gt; new TableCell&lt;&gt;() {\n            @Override\n            protected void updateItem(BigDecimal item, boolean empty) {\n                super.updateItem(item, empty);\n                if (empty || item == null) {\n                    setText(null);\n                } else {\n                    setText(String.format(\"%,d\", item.intValue()));\n                }\n                setStyle(\"-fx-alignment: CENTER-RIGHT;\");\n            }\n        });\n\n        // \u30c6\u30fc\u30d6\u30eb\u3068ViewModel\u306e\u30d0\u30a4\u30f3\u30c9\n        detailTable.setItems(viewModel.getOrderDetails());\n\n        // \u5408\u8a08\u91d1\u984d\u306e\u30d0\u30a4\u30f3\u30c9\n        viewModel.totalAmountProperty().addListener((obs, oldVal, newVal) -&gt; {\n            totalAmountLabel.setText(String.format(\"\u00a5%,d\", newVal.intValue()));\n        });\n\n        // \u521d\u671f\u65e5\u4ed8\u306e\u8a2d\u5b9a\n        orderDatePicker.setValue(LocalDate.now());\n        deliveryDatePicker.setValue(LocalDate.now().plusDays(7));\n\n        // \u30dc\u30bf\u30f3\u5236\u5fa1\n        updateButtonState();\n    }\n\n    @FXML\n    private void onSearchItem() {\n        String itemCode = itemCodeField.getText();\n        if (itemCode == null || itemCode.isBlank()) return;\n\n        try {\n            var item = itemUseCase.getItemByCode(itemCode);\n            itemNameField.setText(item.getItemName());\n            // \u30c7\u30d5\u30a9\u30eb\u30c8\u5358\u4fa1\u304c\u3042\u308c\u3070\u8a2d\u5b9a\n        } catch (Exception e) {\n            AlertHelper.showWarning(\"\u54c1\u76ee\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: \" + itemCode);\n            itemNameField.clear();\n        }\n    }\n\n    @FXML\n    private void onAddDetail() {\n        try {\n            String itemCode = itemCodeField.getText();\n            String itemName = itemNameField.getText();\n            BigDecimal quantity = new BigDecimal(quantityField.getText());\n            BigDecimal unitPrice = new BigDecimal(unitPriceField.getText());\n            LocalDate deliveryDate = deliveryDatePicker.getValue();\n\n            viewModel.addDetail(itemCode, itemName, quantity, unitPrice, deliveryDate);\n\n            // \u5165\u529b\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u30af\u30ea\u30a2\n            itemCodeField.clear();\n            itemNameField.clear();\n            quantityField.clear();\n            unitPriceField.clear();\n            itemCodeField.requestFocus();\n        } catch (NumberFormatException e) {\n            AlertHelper.showWarning(\"\u6570\u91cf\u30fb\u5358\u4fa1\u306f\u6570\u5024\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\");\n        }\n    }\n\n    @FXML\n    private void onRemoveDetail() {\n        OrderDetailRow selected = detailTable.getSelectionModel().getSelectedItem();\n        if (selected != null) {\n            viewModel.removeDetail(selected);\n        }\n    }\n\n    @FXML\n    private void onSave() {\n        if (viewModel.getOrderDetails().isEmpty()) {\n            AlertHelper.showWarning(\"\u660e\u7d30\u30921\u4ef6\u4ee5\u4e0a\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\");\n            return;\n        }\n\n        try {\n            viewModel.setSupplierCode(supplierCodeField.getText());\n            viewModel.setOrderDate(orderDatePicker.getValue());\n            viewModel.save();\n            orderNumberField.setText(viewModel.getOrderNumber());\n            AlertHelper.showInfo(\"\u4fdd\u5b58\u3057\u307e\u3057\u305f\");\n            updateButtonState();\n        } catch (Exception e) {\n            AlertHelper.showError(\"\u4fdd\u5b58\u30a8\u30e9\u30fc: \" + e.getMessage());\n        }\n    }\n\n    @FXML\n    private void onConfirm() {\n        if (AlertHelper.showConfirmation(\"\u767a\u6ce8\u3092\u78ba\u5b9a\u3057\u307e\u3059\u304b\uff1f\\n\u78ba\u5b9a\u5f8c\u306f\u7de8\u96c6\u3067\u304d\u307e\u305b\u3093\u3002\")) {\n            try {\n                viewModel.confirm();\n                statusLabel.setText(\"\u78ba\u5b9a\");\n                AlertHelper.showInfo(\"\u767a\u6ce8\u3092\u78ba\u5b9a\u3057\u307e\u3057\u305f\");\n                updateButtonState();\n            } catch (Exception e) {\n                AlertHelper.showError(\"\u78ba\u5b9a\u30a8\u30e9\u30fc: \" + e.getMessage());\n            }\n        }\n    }\n\n    @FXML\n    private void onPrint() {\n        // JasperReports \u3067\u767a\u6ce8\u66f8\u3092\u5370\u5237\n    }\n\n    @FXML\n    private void onClear() {\n        viewModel.clear();\n        orderNumberField.clear();\n        supplierCodeField.clear();\n        supplierNameField.clear();\n        orderDatePicker.setValue(LocalDate.now());\n        statusLabel.setText(\"\u65b0\u898f\");\n        updateButtonState();\n    }\n\n    private void updateButtonState() {\n        boolean isNew = viewModel.getOrderNumber() == null;\n        boolean isDraft = viewModel.getStatus() == OrderStatus.DRAFT;\n\n        saveButton.setDisable(!isDraft &amp;&amp; !isNew);\n        confirmButton.setDisable(isNew || !isDraft);\n    }\n}\n</code></pre> order-entry.fxml <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;?import javafx.scene.control.*?&gt;\n&lt;?import javafx.scene.layout.*?&gt;\n&lt;?import org.kordamp.ikonli.javafx.FontIcon?&gt;\n\n&lt;VBox xmlns=\"http://javafx.com/javafx/21\"\n      xmlns:fx=\"http://javafx.com/fxml/1\"\n      fx:controller=\"com.example.production.infrastructure.in.javafx.controller.PurchaseOrderEntryController\"\n      spacing=\"10\" padding=\"10\"&gt;\n\n    &lt;!-- \u30d8\u30c3\u30c0\u60c5\u5831 --&gt;\n    &lt;GridPane hgap=\"10\" vgap=\"10\" styleClass=\"header-form\"&gt;\n        &lt;Label text=\"\u767a\u6ce8\u756a\u53f7:\" GridPane.columnIndex=\"0\" GridPane.rowIndex=\"0\"/&gt;\n        &lt;TextField fx:id=\"orderNumberField\" editable=\"false\" GridPane.columnIndex=\"1\"/&gt;\n\n        &lt;Label text=\"\u767a\u6ce8\u65e5:\" GridPane.columnIndex=\"2\" GridPane.rowIndex=\"0\"/&gt;\n        &lt;DatePicker fx:id=\"orderDatePicker\" GridPane.columnIndex=\"3\"/&gt;\n\n        &lt;Label text=\"\u30b9\u30c6\u30fc\u30bf\u30b9:\" GridPane.columnIndex=\"4\" GridPane.rowIndex=\"0\"/&gt;\n        &lt;Label fx:id=\"statusLabel\" text=\"\u65b0\u898f\" styleClass=\"status-label\" GridPane.columnIndex=\"5\"/&gt;\n\n        &lt;Label text=\"\u4ed5\u5165\u5148:\" GridPane.columnIndex=\"0\" GridPane.rowIndex=\"1\"/&gt;\n        &lt;HBox spacing=\"5\" GridPane.columnIndex=\"1\" GridPane.columnSpan=\"3\"&gt;\n            &lt;TextField fx:id=\"supplierCodeField\" prefWidth=\"100\"/&gt;\n            &lt;Button onAction=\"#onSearchSupplier\"&gt;\n                &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-search\"/&gt;&lt;/graphic&gt;\n            &lt;/Button&gt;\n            &lt;TextField fx:id=\"supplierNameField\" editable=\"false\" HBox.hgrow=\"ALWAYS\"/&gt;\n        &lt;/HBox&gt;\n    &lt;/GridPane&gt;\n\n    &lt;Separator/&gt;\n\n    &lt;!-- \u660e\u7d30\u5165\u529b\u30a8\u30ea\u30a2 --&gt;\n    &lt;HBox spacing=\"10\" alignment=\"CENTER_LEFT\"&gt;\n        &lt;Label text=\"\u54c1\u76ee:\"/&gt;\n        &lt;TextField fx:id=\"itemCodeField\" prefWidth=\"100\" onAction=\"#onSearchItem\"/&gt;\n        &lt;Button onAction=\"#onSearchItem\"&gt;\n            &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-search\"/&gt;&lt;/graphic&gt;\n        &lt;/Button&gt;\n        &lt;TextField fx:id=\"itemNameField\" prefWidth=\"150\" editable=\"false\"/&gt;\n        &lt;Label text=\"\u6570\u91cf:\"/&gt;\n        &lt;TextField fx:id=\"quantityField\" prefWidth=\"80\" alignment=\"CENTER_RIGHT\"/&gt;\n        &lt;Label text=\"\u5358\u4fa1:\"/&gt;\n        &lt;TextField fx:id=\"unitPriceField\" prefWidth=\"100\" alignment=\"CENTER_RIGHT\"/&gt;\n        &lt;Label text=\"\u7d0d\u671f:\"/&gt;\n        &lt;DatePicker fx:id=\"deliveryDatePicker\" prefWidth=\"130\"/&gt;\n        &lt;Button fx:id=\"addDetailButton\" text=\"\u8ffd\u52a0\" styleClass=\"primary\" onAction=\"#onAddDetail\"&gt;\n            &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-plus\"/&gt;&lt;/graphic&gt;\n        &lt;/Button&gt;\n    &lt;/HBox&gt;\n\n    &lt;!-- \u660e\u7d30\u30c6\u30fc\u30d6\u30eb --&gt;\n    &lt;TableView fx:id=\"detailTable\" VBox.vgrow=\"ALWAYS\" editable=\"true\"&gt;\n        &lt;columns&gt;\n            &lt;TableColumn fx:id=\"lineNoColumn\" text=\"No.\" prefWidth=\"50\"/&gt;\n            &lt;TableColumn fx:id=\"itemCodeColumn\" text=\"\u54c1\u76ee\u30b3\u30fc\u30c9\" prefWidth=\"100\"/&gt;\n            &lt;TableColumn fx:id=\"itemNameColumn\" text=\"\u54c1\u76ee\u540d\" prefWidth=\"180\"/&gt;\n            &lt;TableColumn fx:id=\"quantityColumn\" text=\"\u6570\u91cf\" prefWidth=\"80\" styleClass=\"quantity-column\"/&gt;\n            &lt;TableColumn fx:id=\"unitPriceColumn\" text=\"\u5358\u4fa1\" prefWidth=\"100\" styleClass=\"amount-column\"/&gt;\n            &lt;TableColumn fx:id=\"deliveryDateColumn\" text=\"\u7d0d\u671f\" prefWidth=\"100\"/&gt;\n            &lt;TableColumn fx:id=\"amountColumn\" text=\"\u91d1\u984d\" prefWidth=\"120\" styleClass=\"amount-column\"/&gt;\n            &lt;TableColumn text=\"\u524a\u9664\" prefWidth=\"60\"&gt;\n                &lt;cellFactory&gt;\n                    &lt;!-- \u524a\u9664\u30dc\u30bf\u30f3 --&gt;\n                &lt;/cellFactory&gt;\n            &lt;/TableColumn&gt;\n        &lt;/columns&gt;\n    &lt;/TableView&gt;\n\n    &lt;!-- \u5408\u8a08\u30a8\u30ea\u30a2 --&gt;\n    &lt;HBox spacing=\"20\" alignment=\"CENTER_RIGHT\" styleClass=\"total-area\"&gt;\n        &lt;VBox alignment=\"CENTER_RIGHT\" spacing=\"5\"&gt;\n            &lt;HBox spacing=\"10\" alignment=\"CENTER_RIGHT\"&gt;\n                &lt;Label text=\"\u5408\u8a08\u91d1\u984d:\" styleClass=\"total-label-large\"/&gt;\n                &lt;Label fx:id=\"totalAmountLabel\" text=\"\u00a50\" styleClass=\"total-value-large\"/&gt;\n            &lt;/HBox&gt;\n        &lt;/VBox&gt;\n    &lt;/HBox&gt;\n\n    &lt;!-- \u30dc\u30bf\u30f3\u30a8\u30ea\u30a2 --&gt;\n    &lt;HBox spacing=\"10\" alignment=\"CENTER_RIGHT\"&gt;\n        &lt;Button text=\"\u30af\u30ea\u30a2\" onAction=\"#onClear\"/&gt;\n        &lt;Button text=\"\u5370\u5237\" onAction=\"#onPrint\"&gt;\n            &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-print\"/&gt;&lt;/graphic&gt;\n        &lt;/Button&gt;\n        &lt;Button fx:id=\"saveButton\" text=\"\u4fdd\u5b58\" styleClass=\"primary\" onAction=\"#onSave\"&gt;\n            &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-save\"/&gt;&lt;/graphic&gt;\n        &lt;/Button&gt;\n        &lt;Button fx:id=\"confirmButton\" text=\"\u78ba\u5b9a\" styleClass=\"success\" onAction=\"#onConfirm\" disable=\"true\"&gt;\n            &lt;graphic&gt;&lt;FontIcon iconLiteral=\"fas-check\"/&gt;&lt;/graphic&gt;\n        &lt;/Button&gt;\n    &lt;/HBox&gt;\n&lt;/VBox&gt;\n</code></pre>"},{"location":"article/study/study4-2/#404-mrp","title":"40.4 MRP \u5b9f\u884c\u753b\u9762\u306e\u5b9f\u88c5","text":"MrpExecutionController.java <pre><code>package com.example.production.infrastructure.in.javafx.controller;\n\nimport com.example.production.application.service.MrpService;\nimport com.example.production.application.service.PlannedOrder;\nimport com.example.production.application.service.ShortageItem;\nimport com.example.production.infrastructure.in.javafx.util.AlertHelper;\nimport javafx.application.Platform;\nimport javafx.concurrent.Task;\nimport javafx.fxml.FXML;\nimport javafx.fxml.Initializable;\nimport javafx.scene.control.*;\nimport javafx.scene.control.cell.PropertyValueFactory;\nimport org.springframework.stereotype.Component;\n\nimport java.math.BigDecimal;\nimport java.net.URL;\nimport java.time.LocalDate;\nimport java.util.ResourceBundle;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\n@Component\npublic class MrpExecutionController implements Initializable {\n\n    private final MrpService mrpService;\n    private final ExecutorService executor = Executors.newSingleThreadExecutor();\n\n    @FXML private DatePicker startDatePicker;\n    @FXML private DatePicker endDatePicker;\n    @FXML private ProgressBar progressBar;\n    @FXML private Label progressLabel;\n\n    @FXML private TableView&lt;PlannedOrder&gt; plannedOrderTable;\n    @FXML private TableColumn&lt;PlannedOrder, String&gt; poItemCodeColumn;\n    @FXML private TableColumn&lt;PlannedOrder, String&gt; poItemNameColumn;\n    @FXML private TableColumn&lt;PlannedOrder, BigDecimal&gt; poQuantityColumn;\n    @FXML private TableColumn&lt;PlannedOrder, LocalDate&gt; poDueDateColumn;\n\n    @FXML private TableView&lt;ShortageItem&gt; shortageTable;\n    @FXML private TableColumn&lt;ShortageItem, String&gt; siItemCodeColumn;\n    @FXML private TableColumn&lt;ShortageItem, String&gt; siItemNameColumn;\n    @FXML private TableColumn&lt;ShortageItem, BigDecimal&gt; siShortageColumn;\n\n    @FXML private Label executionTimeLabel;\n    @FXML private Label totalItemsLabel;\n    @FXML private Label shortageCountLabel;\n\n    public MrpExecutionController(MrpService mrpService) {\n        this.mrpService = mrpService;\n    }\n\n    @Override\n    public void initialize(URL url, ResourceBundle rb) {\n        // \u521d\u671f\u65e5\u4ed8\u306e\u8a2d\u5b9a\n        startDatePicker.setValue(LocalDate.now());\n        endDatePicker.setValue(LocalDate.now().plusMonths(3));\n\n        // \u8a08\u753b\u30aa\u30fc\u30c0\u30c6\u30fc\u30d6\u30eb\u306e\u30ab\u30e9\u30e0\u8a2d\u5b9a\n        poItemCodeColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(\"itemCode\"));\n        poItemNameColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(\"itemName\"));\n        poQuantityColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(\"quantity\"));\n        poDueDateColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(\"dueDate\"));\n\n        // \u4e0d\u8db3\u54c1\u76ee\u30c6\u30fc\u30d6\u30eb\u306e\u30ab\u30e9\u30e0\u8a2d\u5b9a\n        siItemCodeColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(\"itemCode\"));\n        siItemNameColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(\"itemName\"));\n        siShortageColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(\"shortageQuantity\"));\n\n        progressBar.setProgress(0);\n    }\n\n    @FXML\n    private void onExecute() {\n        LocalDate startDate = startDatePicker.getValue();\n        LocalDate endDate = endDatePicker.getValue();\n\n        if (startDate == null || endDate == null) {\n            AlertHelper.showWarning(\"\u671f\u9593\u3092\u6307\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\");\n            return;\n        }\n\n        if (startDate.isAfter(endDate)) {\n            AlertHelper.showWarning(\"\u958b\u59cb\u65e5\u306f\u7d42\u4e86\u65e5\u3088\u308a\u524d\u306b\u3057\u3066\u304f\u3060\u3055\u3044\");\n            return;\n        }\n\n        // \u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067MRP\u5b9f\u884c\n        Task&lt;Void&gt; task = new Task&lt;&gt;() {\n            @Override\n            protected Void call() throws Exception {\n                updateProgress(0.1, 1.0);\n                updateMessage(\"\u9700\u8981\u53d6\u5f97\u4e2d...\");\n\n                updateProgress(0.3, 1.0);\n                updateMessage(\"BOM\u5c55\u958b\u4e2d...\");\n\n                updateProgress(0.5, 1.0);\n                updateMessage(\"\u6b63\u5473\u6240\u8981\u91cf\u8a08\u7b97\u4e2d...\");\n\n                updateProgress(0.7, 1.0);\n                updateMessage(\"\u8a08\u753b\u30aa\u30fc\u30c0\u751f\u6210\u4e2d...\");\n\n                long start = System.currentTimeMillis();\n                var result = mrpService.execute(startDate, endDate);\n                long elapsed = System.currentTimeMillis() - start;\n\n                updateProgress(1.0, 1.0);\n                updateMessage(\"\u5b8c\u4e86\");\n\n                Platform.runLater(() -&gt; {\n                    plannedOrderTable.getItems().setAll(result.getPlannedOrders());\n                    shortageTable.getItems().setAll(result.getShortageItems());\n\n                    executionTimeLabel.setText(String.format(\"%.2f \u79d2\", elapsed / 1000.0));\n                    totalItemsLabel.setText(String.valueOf(result.getPlannedOrders().size()));\n                    shortageCountLabel.setText(String.valueOf(result.getShortageItems().size()));\n                });\n\n                return null;\n            }\n        };\n\n        progressBar.progressProperty().bind(task.progressProperty());\n        progressLabel.textProperty().bind(task.messageProperty());\n\n        task.setOnFailed(e -&gt; {\n            AlertHelper.showError(\"MRP\u5b9f\u884c\u30a8\u30e9\u30fc: \" + task.getException().getMessage());\n            progressBar.progressProperty().unbind();\n            progressLabel.textProperty().unbind();\n        });\n\n        executor.submit(task);\n    }\n\n    @FXML\n    private void onExportExcel() {\n        // Excel\u51fa\u529b\u51e6\u7406\n    }\n}\n</code></pre>"},{"location":"article/study/study4-2/#41","title":"\u7b2c41\u7ae0\uff1a\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3068\u5e33\u7968\u51fa\u529b","text":""},{"location":"article/study/study4-2/#411-alerthelper","title":"41.1 AlertHelper \u306e\u5b9f\u88c5","text":"<p>\u30a2\u30e9\u30fc\u30c8\u30c0\u30a4\u30a2\u30ed\u30b0\u3092\u7d71\u4e00\u7684\u306b\u6271\u3046\u305f\u3081\u306e\u30d8\u30eb\u30d1\u30fc\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> AlertHelper.java <pre><code>package com.example.production.infrastructure.in.javafx.util;\n\nimport javafx.scene.control.Alert;\nimport javafx.scene.control.ButtonType;\nimport javafx.scene.control.TextArea;\nimport javafx.scene.layout.GridPane;\nimport javafx.scene.layout.Priority;\n\nimport java.io.PrintWriter;\nimport java.io.StringWriter;\nimport java.util.Optional;\n\npublic class AlertHelper {\n\n    private AlertHelper() {}\n\n    public static void showInfo(String message) {\n        Alert alert = new Alert(Alert.AlertType.INFORMATION);\n        alert.setTitle(\"\u60c5\u5831\");\n        alert.setHeaderText(null);\n        alert.setContentText(message);\n        alert.showAndWait();\n    }\n\n    public static void showWarning(String message) {\n        Alert alert = new Alert(Alert.AlertType.WARNING);\n        alert.setTitle(\"\u8b66\u544a\");\n        alert.setHeaderText(null);\n        alert.setContentText(message);\n        alert.showAndWait();\n    }\n\n    public static void showError(String message) {\n        Alert alert = new Alert(Alert.AlertType.ERROR);\n        alert.setTitle(\"\u30a8\u30e9\u30fc\");\n        alert.setHeaderText(null);\n        alert.setContentText(message);\n        alert.showAndWait();\n    }\n\n    public static void showException(String title, String header, Throwable exception) {\n        Alert alert = new Alert(Alert.AlertType.ERROR);\n        alert.setTitle(title);\n        alert.setHeaderText(header);\n        alert.setContentText(exception.getMessage());\n\n        StringWriter sw = new StringWriter();\n        PrintWriter pw = new PrintWriter(sw);\n        exception.printStackTrace(pw);\n\n        TextArea textArea = new TextArea(sw.toString());\n        textArea.setEditable(false);\n        textArea.setWrapText(true);\n        textArea.setMaxWidth(Double.MAX_VALUE);\n        textArea.setMaxHeight(Double.MAX_VALUE);\n        GridPane.setVgrow(textArea, Priority.ALWAYS);\n        GridPane.setHgrow(textArea, Priority.ALWAYS);\n\n        GridPane expContent = new GridPane();\n        expContent.setMaxWidth(Double.MAX_VALUE);\n        expContent.add(textArea, 0, 0);\n\n        alert.getDialogPane().setExpandableContent(expContent);\n        alert.showAndWait();\n    }\n\n    public static boolean showConfirmation(String message) {\n        Alert alert = new Alert(Alert.AlertType.CONFIRMATION);\n        alert.setTitle(\"\u78ba\u8a8d\");\n        alert.setHeaderText(null);\n        alert.setContentText(message);\n\n        Optional&lt;ButtonType&gt; result = alert.showAndWait();\n        return result.isPresent() &amp;&amp; result.get() == ButtonType.OK;\n    }\n}\n</code></pre>"},{"location":"article/study/study4-2/#412","title":"41.2 \u30b0\u30ed\u30fc\u30d0\u30eb\u4f8b\u5916\u30cf\u30f3\u30c9\u30e9","text":"\u30b0\u30ed\u30fc\u30d0\u30eb\u4f8b\u5916\u30cf\u30f3\u30c9\u30e9 <pre><code>public class JavaFxApplication extends Application {\n\n    private static final Logger logger = LoggerFactory.getLogger(JavaFxApplication.class);\n\n    @Override\n    public void init() {\n        Thread.setDefaultUncaughtExceptionHandler(this::handleUncaughtException);\n        // ...\n    }\n\n    private void handleUncaughtException(Thread thread, Throwable throwable) {\n        logger.error(\"\u672a\u51e6\u7406\u4f8b\u5916\u304c\u767a\u751f\u3057\u307e\u3057\u305f [Thread: {}]\", thread.getName(), throwable);\n\n        if (Platform.isFxApplicationThread()) {\n            showErrorDialog(throwable);\n        } else {\n            Platform.runLater(() -&gt; showErrorDialog(throwable));\n        }\n    }\n\n    private void showErrorDialog(Throwable throwable) {\n        AlertHelper.showException(\n            \"\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\",\n            \"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\",\n            throwable\n        );\n    }\n}\n</code></pre>"},{"location":"article/study/study4-2/#413-jasperreports","title":"41.3 JasperReports \u306b\u3088\u308b\u5e33\u7968\u51fa\u529b","text":"ReportService.java <pre><code>package com.example.production.infrastructure.in.javafx.util;\n\nimport net.sf.jasperreports.engine.*;\nimport net.sf.jasperreports.engine.data.JRBeanCollectionDataSource;\nimport org.springframework.core.io.ClassPathResource;\nimport org.springframework.stereotype.Service;\n\nimport java.io.InputStream;\nimport java.util.List;\nimport java.util.Map;\n\n@Service\npublic class ReportService {\n\n    /**\n     * \u767a\u6ce8\u66f8\u3092\u751f\u6210\u3057\u3066\u5370\u5237\u30d7\u30ec\u30d3\u30e5\u30fc\u3092\u8868\u793a\n     */\n    public void printPurchaseOrder(String orderNumber, Map&lt;String, Object&gt; parameters, List&lt;?&gt; details) {\n        try {\n            InputStream reportStream = new ClassPathResource(\"reports/purchase-order.jrxml\").getInputStream();\n            JasperReport jasperReport = JasperCompileManager.compileReport(reportStream);\n\n            JRBeanCollectionDataSource dataSource = new JRBeanCollectionDataSource(details);\n            JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, parameters, dataSource);\n\n            // \u30d7\u30ec\u30d3\u30e5\u30fc\u8868\u793a\n            javafx.embed.swing.SwingNode swingNode = new javafx.embed.swing.SwingNode();\n            javax.swing.SwingUtilities.invokeLater(() -&gt; {\n                net.sf.jasperreports.swing.JRViewer viewer = new net.sf.jasperreports.swing.JRViewer(jasperPrint);\n                swingNode.setContent(viewer);\n            });\n\n            // \u65b0\u3057\u3044\u30a6\u30a3\u30f3\u30c9\u30a6\u3067\u30d7\u30ec\u30d3\u30e5\u30fc\u8868\u793a\n            javafx.stage.Stage previewStage = new javafx.stage.Stage();\n            previewStage.setTitle(\"\u767a\u6ce8\u66f8\u30d7\u30ec\u30d3\u30e5\u30fc - \" + orderNumber);\n            javafx.scene.layout.BorderPane pane = new javafx.scene.layout.BorderPane(swingNode);\n            previewStage.setScene(new javafx.scene.Scene(pane, 800, 600));\n            previewStage.show();\n\n        } catch (Exception e) {\n            throw new RuntimeException(\"\u5e33\u7968\u751f\u6210\u30a8\u30e9\u30fc\", e);\n        }\n    }\n\n    /**\n     * MRP\u7d50\u679c\u30ec\u30dd\u30fc\u30c8\u3092Excel\u51fa\u529b\n     */\n    public void exportMrpResultToExcel(List&lt;?&gt; plannedOrders, List&lt;?&gt; shortageItems, String filePath) {\n        // Apache POI \u3092\u4f7f\u7528\u3057\u305fExcel\u51fa\u529b\n    }\n}\n</code></pre>"},{"location":"article/study/study4-2/#_2","title":"\u307e\u3068\u3081","text":""},{"location":"article/study/study4-2/#_3","title":"\u5b9f\u88c5\u3057\u305f\u6a5f\u80fd\u4e00\u89a7","text":"\u7ae0 \u5185\u5bb9 \u7b2c38\u7ae0: \u57fa\u790e JavaFX + Spring Boot \u7d71\u5408\u3001MVVM \u30d1\u30bf\u30fc\u30f3\u3001Property \u3068 DataBinding \u7b2c39\u7ae0: \u30de\u30b9\u30bf\u753b\u9762 \u54c1\u76ee\u30de\u30b9\u30bf CRUD\u3001BOM\u5c55\u958b\u753b\u9762\u3001TestFX \u306b\u3088\u308b TDD\u3001Excel \u30a8\u30af\u30b9\u30dd\u30fc\u30c8 \u7b2c40\u7ae0: \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u753b\u9762 \u767a\u6ce8\u5165\u529b\u30fb\u78ba\u5b9a\u51e6\u7406\u3001MRP\u5b9f\u884c\u753b\u9762\u3001\u30d8\u30c3\u30c0\u30fb\u660e\u7d30\u69cb\u9020\u3001\u9032\u6357\u8868\u793a \u7b2c41\u7ae0: \u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0 \u7d71\u4e00\u7684\u306a\u30a2\u30e9\u30fc\u30c8\u8868\u793a\u3001\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3001JasperReports \u5e33\u7968\u51fa\u529b"},{"location":"article/study/study4-2/#_4","title":"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u7279\u5fb4","text":""},{"location":"article/study/study4-2/#_5","title":"\u6280\u8853\u30b9\u30bf\u30c3\u30af","text":"\u30ab\u30c6\u30b4\u30ea \u6280\u8853 \u8a00\u8a9e Java 21 \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af Spring Boot 3.4, JavaFX 21 ORM MyBatis 3.0 \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9 PostgreSQL 16 \u5e33\u7968 JasperReports Excel Apache POI \u30c6\u30b9\u30c8 JUnit 5, TestFX"},{"location":"article/study/study4-2/#api","title":"API \u30b5\u30fc\u30d0\u30fc\u7248\u3068\u306e\u6bd4\u8f03","text":"\u89b3\u70b9 API \u30b5\u30fc\u30d0\u30fc\u7248 \u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u7248 UI React/Vue JavaFX + FXML \u901a\u4fe1 HTTP/REST \u76f4\u63a5\u547c\u3073\u51fa\u3057 \u72b6\u614b\u7ba1\u7406 Redux/Vuex JavaFX Property \u914d\u7f6e \u30b5\u30fc\u30d0\u30fc + \u30af\u30e9\u30a4\u30a2\u30f3\u30c8 \u30b9\u30bf\u30f3\u30c9\u30a2\u30ed\u30f3 \u30aa\u30d5\u30e9\u30a4\u30f3 \u4e0d\u53ef \u53ef\u80fd \u5e33\u7968 \u30b5\u30fc\u30d0\u30fc\u751f\u6210 PDF \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u76f4\u63a5\u5370\u5237"},{"location":"article/study/study4-2/#_6","title":"\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u9078\u629e\u57fa\u6e96","text":"\u9078\u629e\u57fa\u6e96 \u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u5411\u304d Web \u5411\u304d \u30aa\u30d5\u30e9\u30a4\u30f3\u8981\u4ef6 \u5fc5\u9808 \u4e0d\u8981 \u5e33\u7968\u30fb\u5370\u5237 \u9ad8\u5ea6\u306a\u5236\u5fa1 \u57fa\u672c\u7684\u306a\u5370\u5237 \u30ec\u30b9\u30dd\u30f3\u30b9 \u5373\u5ea7\u306e\u5fdc\u7b54 \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8a31\u5bb9 \u914d\u5e03\u30fb\u66f4\u65b0 \u9650\u5b9a\u7684 \u5168\u30e6\u30fc\u30b6\u30fc\u540c\u6642 UI \u81ea\u7531\u5ea6 \u9ad8\u3044 HTML/CSS \u5236\u7d04 <p>JavaFX \u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u3001\u30aa\u30d5\u30e9\u30a4\u30f3\u74b0\u5883\u3067\u306e\u5229\u7528\u3084\u9ad8\u5ea6\u306a\u5e33\u7968\u51fa\u529b\u304c\u5fc5\u8981\u306a\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u306b\u9069\u3057\u3066\u3044\u307e\u3059\u3002\u65e2\u5b58\u306e\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u6d3b\u304b\u3057\u306a\u304c\u3089\u3001Input Adapter \u3068\u3057\u3066\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3067\u3001REST API \u3068\u4e26\u884c\u904b\u7528\u3082\u53ef\u80fd\u3067\u3059\u3002</p> <p>\u76ee\u6b21\u3078\u623b\u308b</p>"},{"location":"article/study/study4-3/","title":"\u5b9f\u8df5\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\uff1a\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 \u7814\u7a76 3 - gRPC \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":""},{"location":"article/study/study4-3/#_1","title":"\u306f\u3058\u3081\u306b","text":"<p>\u672c\u7814\u7a76\u3067\u306f\u3001API \u30b5\u30fc\u30d0\u30fc\u69cb\u6210\uff08\u7b2c32\u7ae0\uff09\u3068\u306f\u7570\u306a\u308b\u30a2\u30d7\u30ed\u30fc\u30c1\u3068\u3057\u3066\u3001gRPC \u306b\u3088\u308b\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002Protocol Buffers \u306b\u3088\u308b\u30b9\u30ad\u30fc\u30de\u99c6\u52d5\u958b\u767a\u3068 HTTP/2 \u306e\u53cc\u65b9\u5411\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u3092\u6d3b\u7528\u3057\u305f\u3001\u9ad8\u6027\u80fd\u306a API \u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002</p> <p>\u7b2c32\u7ae0\u3067\u69cb\u7bc9\u3057\u305f\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u30c9\u30e1\u30a4\u30f3\u5c64\u30fb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff09\u306f\u305d\u306e\u307e\u307e\u5171\u6709\u3057\u3001Input Adapter \u3068\u3057\u3066 gRPC \u30b5\u30fc\u30d3\u30b9\u5c64\u306e\u307f\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p>"},{"location":"article/study/study4-3/#42grpc","title":"\u7b2c42\u7ae0\uff1agRPC \u30b5\u30fc\u30d0\u30fc\u306e\u57fa\u790e","text":""},{"location":"article/study/study4-3/#421-grpc","title":"42.1 gRPC \u3068\u306f","text":"<p>gRPC \u306f Google \u304c\u958b\u767a\u3057\u305f\u9ad8\u6027\u80fd\u306a RPC\uff08Remote Procedure Call\uff09\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u3059\u3002Protocol Buffers \u3092\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u5b9a\u7fa9\u8a00\u8a9e\uff08IDL\uff09\u3068\u3057\u3066\u4f7f\u7528\u3057\u3001HTTP/2 \u4e0a\u3067\u52d5\u4f5c\u3057\u307e\u3059\u3002</p> <p></p> <p>REST API \u3068\u306e\u6bd4\u8f03\uff1a</p> \u7279\u5fb4 REST API gRPC \u30d7\u30ed\u30c8\u30b3\u30eb HTTP/1.1 HTTP/2 \u30c7\u30fc\u30bf\u5f62\u5f0f JSON (\u30c6\u30ad\u30b9\u30c8) Protocol Buffers (\u30d0\u30a4\u30ca\u30ea) \u30b9\u30ad\u30fc\u30de OpenAPI (\u4efb\u610f) .proto (\u5fc5\u9808) \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 WebSocket \u5225\u5b9f\u88c5 \u30cd\u30a4\u30c6\u30a3\u30d6\u30b5\u30dd\u30fc\u30c8 \u30b3\u30fc\u30c9\u751f\u6210 \u624b\u52d5/\u30c4\u30fc\u30eb \u81ea\u52d5\u751f\u6210 \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9 \u6a19\u6e96 \u9ad8\u901f"},{"location":"article/study/study4-3/#422-4","title":"42.2 4\u3064\u306e\u901a\u4fe1\u30d1\u30bf\u30fc\u30f3","text":"<p>gRPC \u306f 4 \u3064\u306e\u901a\u4fe1\u30d1\u30bf\u30fc\u30f3\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u307e\u3059\uff1a</p> <p></p> <p>\u7528\u9014\uff1a</p> <ol> <li>Unary RPC: \u901a\u5e38\u306e API \u547c\u3073\u51fa\u3057\uff08CRUD \u64cd\u4f5c\uff09</li> <li>Server Streaming: \u5927\u91cf\u30c7\u30fc\u30bf\u306e\u914d\u4fe1\uff08MRP \u5b9f\u884c\u7d50\u679c\uff09</li> <li>Client Streaming: \u30d0\u30c3\u30c1\u767b\u9332\uff08\u8907\u6570\u54c1\u76ee\u306e\u4e00\u62ec\u767b\u9332\uff09</li> <li>Bidirectional Streaming: \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u901a\u4fe1\uff08\u9032\u6357\u76e3\u8996\uff09</li> </ol>"},{"location":"article/study/study4-3/#423-grpc","title":"42.3 gRPC \u306b\u304a\u3051\u308b\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":"<p>gRPC \u3092\u5c0e\u5165\u3057\u3066\u3082\u3001\u7b2c32\u7ae0\u3067\u69cb\u7bc9\u3057\u305f\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u30c9\u30e1\u30a4\u30f3\u5c64\u30fb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff09\u306f\u305d\u306e\u307e\u307e\u5171\u6709\u3057\u3001Input Adapter \u3068\u3057\u3066 gRPC \u30b5\u30fc\u30d3\u30b9\u5c64\u306e\u307f\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> <p></p> <p>gRPC \u3067\u3082\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u7dad\u6301\u3059\u308b\u7406\u7531\uff1a</p> <ol> <li>\u518d\u5229\u7528\u6027: \u65e2\u5b58\u306e UseCase/Repository \u3092\u305d\u306e\u307e\u307e\u6d3b\u7528</li> <li>\u4e26\u884c\u904b\u7528: REST API \u3068 gRPC API \u306e\u4e21\u65b9\u3092\u63d0\u4f9b\u53ef\u80fd</li> <li>\u30c6\u30b9\u30c8\u5bb9\u6613\u6027: \u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\u306f\u901a\u4fe1\u30d7\u30ed\u30c8\u30b3\u30eb\u306b\u4f9d\u5b58\u3057\u306a\u3044</li> <li>\u79fb\u884c\u5bb9\u6613\u6027: \u6bb5\u968e\u7684\u306b REST \u304b\u3089 gRPC \u3078\u79fb\u884c\u53ef\u80fd</li> </ol>"},{"location":"article/study/study4-3/#424","title":"42.4 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210","text":"<p>\u65e2\u5b58\u306e\u69cb\u6210\u306b <code>infrastructure/grpc/</code> \u3092\u8ffd\u52a0\u3059\u308b\u3060\u3051\u3067\u3059\u3002</p> <pre><code>src/main/java/com/example/production/\n\u251c\u2500\u2500 domain/                     # \u30c9\u30e1\u30a4\u30f3\u5c64\uff08API\u7248\u3068\u5171\u901a\uff09\n\u2502   \u251c\u2500\u2500 model/\n\u2502   \u2502   \u251c\u2500\u2500 item/\n\u2502   \u2502   \u251c\u2500\u2500 bom/\n\u2502   \u2502   \u251c\u2500\u2500 order/\n\u2502   \u2502   \u2514\u2500\u2500 inventory/\n\u2502   \u2514\u2500\u2500 exception/\n\u2502\n\u251c\u2500\u2500 application/               # \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff08API\u7248\u3068\u5171\u901a\uff09\n\u2502   \u251c\u2500\u2500 port/\n\u2502   \u2502   \u251c\u2500\u2500 in/               # Input Port\uff08\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\uff09\n\u2502   \u2502   \u2514\u2500\u2500 out/              # Output Port\uff08\u30ea\u30dd\u30b8\u30c8\u30ea\uff09\n\u2502   \u2514\u2500\u2500 service/\n\u2502\n\u251c\u2500\u2500 infrastructure/\n\u2502   \u251c\u2500\u2500 persistence/          # Output Adapter\uff08DB\u5b9f\u88c5\uff09- \u65e2\u5b58\n\u2502   \u2502   \u251c\u2500\u2500 mapper/\n\u2502   \u2502   \u2514\u2500\u2500 repository/\n\u2502   \u251c\u2500\u2500 rest/                 # Input Adapter\uff08REST\u5b9f\u88c5\uff09- \u65e2\u5b58\n\u2502   \u2502   \u251c\u2500\u2500 controller/\n\u2502   \u2502   \u251c\u2500\u2500 dto/\n\u2502   \u2502   \u2514\u2500\u2500 exception/\n\u2502   \u2514\u2500\u2500 grpc/                 # Input Adapter\uff08gRPC\u5b9f\u88c5\uff09- \u65b0\u898f\u8ffd\u52a0\n\u2502       \u251c\u2500\u2500 service/          # gRPC Service \u5b9f\u88c5\n\u2502       \u251c\u2500\u2500 mapper/           # Proto \u21d4 Domain \u5909\u63db\n\u2502       \u2514\u2500\u2500 interceptor/      # \u5171\u901a\u51e6\u7406\uff08\u30ed\u30b0\u3001\u30a8\u30e9\u30fc\u7b49\uff09\n\u2502\n\u251c\u2500\u2500 config/\n\u2502\n\u2514\u2500\u2500 src/main/proto/            # Protocol Buffers \u5b9a\u7fa9\n    \u251c\u2500\u2500 common.proto\n    \u251c\u2500\u2500 item.proto\n    \u251c\u2500\u2500 bom.proto\n    \u251c\u2500\u2500 purchase_order.proto\n    \u2514\u2500\u2500 mrp.proto\n</code></pre>"},{"location":"article/study/study4-3/#425","title":"42.5 \u6280\u8853\u30b9\u30bf\u30c3\u30af\u306e\u8ffd\u52a0","text":"<p>\u65e2\u5b58\u306e <code>build.gradle.kts</code> \u306b gRPC \u95a2\u9023\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> build.gradle.kts\uff08\u5dee\u5206\uff09 <pre><code>import com.google.protobuf.gradle.*\n\nplugins {\n    // \u65e2\u5b58\u306e\u30d7\u30e9\u30b0\u30a4\u30f3...\n    id(\"com.google.protobuf\") version \"0.9.4\"  // \u8ffd\u52a0\n}\n\ndependencies {\n    // \u65e2\u5b58\u306e\u4f9d\u5b58\u95a2\u4fc2\uff08Spring Boot, MyBatis, PostgreSQL\u7b49\uff09\u306f\u305d\u306e\u307e\u307e\n\n    // gRPC \u95a2\u9023\u3092\u8ffd\u52a0\n    implementation(\"net.devh:grpc-spring-boot-starter:3.0.0.RELEASE\")\n    implementation(\"io.grpc:grpc-protobuf:1.60.0\")\n    implementation(\"io.grpc:grpc-stub:1.60.0\")\n    implementation(\"io.grpc:grpc-services:1.60.0\")  // Health check, Reflection\n\n    // Protocol Buffers\n    implementation(\"com.google.protobuf:protobuf-java:3.25.1\")\n    implementation(\"com.google.protobuf:protobuf-java-util:3.25.1\")\n\n    // Test\n    testImplementation(\"io.grpc:grpc-testing:1.60.0\")\n}\n\n// Protocol Buffers \u30b3\u30f3\u30d1\u30a4\u30eb\u8a2d\u5b9a\nprotobuf {\n    protoc {\n        artifact = \"com.google.protobuf:protoc:3.25.1\"\n    }\n    plugins {\n        id(\"grpc\") {\n            artifact = \"io.grpc:protoc-gen-grpc-java:1.60.0\"\n        }\n    }\n    generateProtoTasks {\n        all().forEach { task -&gt;\n            task.plugins {\n                id(\"grpc\")\n            }\n        }\n    }\n}\n</code></pre> <p>\u8ffd\u52a0\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u8aac\u660e\uff1a</p> \u30d1\u30c3\u30b1\u30fc\u30b8 \u7528\u9014 grpc-spring-boot-starter Spring Boot \u3068\u306e\u7d71\u5408 grpc-protobuf Protocol Buffers \u30b5\u30dd\u30fc\u30c8 grpc-services \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\u3001\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3 protobuf-java-util JSON \u21d4 Proto \u5909\u63db"},{"location":"article/study/study4-3/#386-protocol-buffers","title":"38.6 Protocol Buffers \u5b9a\u7fa9","text":"src/main/proto/common.proto <pre><code>syntax = \"proto3\";\n\npackage production;\n\noption java_package = \"com.example.production.grpc\";\noption java_multiple_files = true;\n\n// \u5171\u901a\u30e1\u30c3\u30bb\u30fc\u30b8\n\nmessage Empty {}\n\nmessage Timestamp {\n  int64 seconds = 1;\n  int32 nanos = 2;\n}\n\nmessage Date {\n  int32 year = 1;\n  int32 month = 2;\n  int32 day = 3;\n}\n\nmessage Decimal {\n  string value = 1;  // \u6587\u5b57\u5217\u3067\u7cbe\u5ea6\u3092\u7dad\u6301\n}\n\nmessage PageRequest {\n  int32 page = 1;\n  int32 size = 2;\n}\n\nmessage PageResponse {\n  int32 total_elements = 1;\n  int32 total_pages = 2;\n  int32 current_page = 3;\n}\n\n// \u30a8\u30e9\u30fc\u30ec\u30b9\u30dd\u30f3\u30b9\nmessage ErrorDetail {\n  string code = 1;\n  string message = 2;\n  map&lt;string, string&gt; metadata = 3;\n}\n</code></pre> src/main/proto/item.proto <pre><code>syntax = \"proto3\";\n\npackage production;\n\nimport \"common.proto\";\n\noption java_package = \"com.example.production.grpc\";\noption java_multiple_files = true;\n\n// \u54c1\u76ee\u533a\u5206\nenum ItemCategory {\n  ITEM_CATEGORY_UNSPECIFIED = 0;\n  PRODUCT = 1;      // \u88fd\u54c1\n  SEMI_PRODUCT = 2; // \u534a\u88fd\u54c1\n  PART = 3;         // \u90e8\u54c1\n  MATERIAL = 4;     // \u6750\u6599\n}\n\n// \u54c1\u76ee\u30e1\u30c3\u30bb\u30fc\u30b8\nmessage Item {\n  string item_code = 1;\n  Date effective_date = 2;\n  string item_name = 3;\n  ItemCategory category = 4;\n  string item_group_code = 5;\n  string unit_code = 6;\n  string location_code = 7;\n  int32 lead_time = 8;\n  int32 safety_stock = 9;\n}\n\n// \u30ea\u30af\u30a8\u30b9\u30c8/\u30ec\u30b9\u30dd\u30f3\u30b9\nmessage GetItemRequest {\n  string item_code = 1;\n}\n\nmessage GetItemsRequest {\n  ItemCategory category = 1;  // optional filter\n  PageRequest page = 2;\n}\n\nmessage GetItemsResponse {\n  repeated Item items = 1;\n  PageResponse page = 2;\n}\n\nmessage CreateItemRequest {\n  string item_code = 1;\n  string item_name = 2;\n  ItemCategory category = 3;\n  string item_group_code = 4;\n  string unit_code = 5;\n  string location_code = 6;\n  int32 lead_time = 7;\n  int32 safety_stock = 8;\n}\n\nmessage UpdateItemRequest {\n  string item_code = 1;\n  string item_name = 2;\n  ItemCategory category = 3;\n  int32 lead_time = 4;\n  int32 safety_stock = 5;\n}\n\nmessage DeleteItemRequest {\n  string item_code = 1;\n}\n\nmessage BatchCreateResponse {\n  int32 success_count = 1;\n  int32 failed_count = 2;\n  repeated string failed_codes = 3;\n}\n\n// \u54c1\u76ee\u30b5\u30fc\u30d3\u30b9\nservice ItemService {\n  // Unary RPC\n  rpc GetItem(GetItemRequest) returns (Item);\n  rpc CreateItem(CreateItemRequest) returns (Item);\n  rpc UpdateItem(UpdateItemRequest) returns (Item);\n  rpc DeleteItem(DeleteItemRequest) returns (Empty);\n\n  // Server Streaming - \u54c1\u76ee\u4e00\u89a7\u306e\u30b9\u30c8\u30ea\u30fc\u30e0\u914d\u4fe1\n  rpc StreamItems(GetItemsRequest) returns (stream Item);\n\n  // Client Streaming - \u30d0\u30c3\u30c1\u767b\u9332\n  rpc BatchCreateItems(stream CreateItemRequest) returns (BatchCreateResponse);\n}\n</code></pre>"},{"location":"article/study/study4-3/#387-api-controller","title":"38.7 API \u30b5\u30fc\u30d0\u30fc\u7248\u3068\u306e Controller \u306e\u9055\u3044","text":"<p>API \u30b5\u30fc\u30d0\u30fc\u7248\uff08REST Controller\uff09</p> <pre><code>@RestController  // JSON \u3092\u8fd4\u3059\n@RequestMapping(\"/api/items\")\npublic class ItemApiController {\n\n    private final ItemUseCase itemUseCase;  // \u5171\u6709\n\n    @GetMapping(\"/{itemCode}\")\n    public ResponseEntity&lt;ItemResponse&gt; getItem(@PathVariable String itemCode) {\n        Item item = itemUseCase.getItemByCode(itemCode);\n        return ResponseEntity.ok(ItemResponse.from(item));\n    }\n}\n</code></pre> <p>gRPC \u7248\uff08gRPC Service\uff09</p> <pre><code>@GrpcService  // gRPC \u30b5\u30fc\u30d3\u30b9\u3068\u3057\u3066\u516c\u958b\npublic class ItemGrpcService extends ItemServiceGrpc.ItemServiceImplBase {\n\n    private final ItemUseCase itemUseCase;  // \u5171\u6709\uff08\u540c\u3058\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\uff09\n    private final ProtoMapper mapper;\n\n    @Override\n    public void getItem(GetItemRequest request,\n                        StreamObserver&lt;Item&gt; responseObserver) {\n        // \u540c\u3058 UseCase \u3092\u547c\u3073\u51fa\u3057\n        var item = itemUseCase.getItemByCode(request.getItemCode());\n        responseObserver.onNext(mapper.toProto(item));\n        responseObserver.onCompleted();\n    }\n}\n</code></pre> <p>\u5171\u901a\u70b9\u3068\u76f8\u9055\u70b9\uff1a</p> \u89b3\u70b9 REST Controller gRPC Service UseCase \u5171\u6709\uff08\u540c\u4e00\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\uff09 \u5171\u6709\uff08\u540c\u4e00\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\uff09 \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3 <code>@RestController</code> <code>@GrpcService</code> \u30ea\u30af\u30a8\u30b9\u30c8 DTO\uff08JSON\uff09 Proto Message \u30ec\u30b9\u30dd\u30f3\u30b9 <code>ResponseEntity&lt;T&gt;</code> <code>StreamObserver&lt;T&gt;</code> \u5909\u63db DTO \u21d4 Domain Proto \u21d4 Domain \u30a8\u30e9\u30fc\u51e6\u7406 \u4f8b\u5916\u30cf\u30f3\u30c9\u30e9 <code>Status</code> + <code>onError</code>"},{"location":"article/study/study4-3/#43-api","title":"\u7b2c43\u7ae0\uff1a\u30de\u30b9\u30bf API \u306e\u5b9f\u88c5","text":""},{"location":"article/study/study4-3/#431-proto","title":"43.1 Proto \u30de\u30c3\u30d1\u30fc\u306e\u5b9f\u88c5","text":"<p>\u65e2\u5b58\u306e\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\u3068 Protocol Buffers \u30e1\u30c3\u30bb\u30fc\u30b8\u9593\u306e\u5909\u63db\u3092\u884c\u3044\u307e\u3059\u3002</p> ProtoMapper.java <pre><code>package com.example.production.infrastructure.grpc.mapper;\n\nimport com.example.production.domain.model.item.Item;\nimport com.example.production.domain.model.item.ItemCategory;\nimport com.example.production.grpc.*;\nimport org.springframework.stereotype.Component;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\n\n/**\n * \u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\u3068 Protocol Buffers \u30e1\u30c3\u30bb\u30fc\u30b8\u9593\u306e\u5909\u63db\n */\n@Component\npublic class ProtoMapper {\n\n    // ========== Item ==========\n\n    public com.example.production.grpc.Item toProto(Item domain) {\n        return com.example.production.grpc.Item.newBuilder()\n            .setItemCode(domain.getItemCode())\n            .setEffectiveDate(toProtoDate(domain.getEffectiveDate()))\n            .setItemName(domain.getItemName())\n            .setCategory(toProtoCategory(domain.getCategory()))\n            .setItemGroupCode(nullToEmpty(domain.getItemGroupCode()))\n            .setUnitCode(nullToEmpty(domain.getUnitCode()))\n            .setLocationCode(nullToEmpty(domain.getLocationCode()))\n            .setLeadTime(nullToZero(domain.getLeadTime()))\n            .setSafetyStock(nullToZero(domain.getSafetyStock()))\n            .build();\n    }\n\n    public Item toDomain(CreateItemRequest request) {\n        return Item.builder()\n            .itemCode(request.getItemCode())\n            .effectiveDate(LocalDate.now())\n            .itemName(request.getItemName())\n            .category(toDomainCategory(request.getCategory()))\n            .itemGroupCode(emptyToNull(request.getItemGroupCode()))\n            .unitCode(emptyToNull(request.getUnitCode()))\n            .locationCode(emptyToNull(request.getLocationCode()))\n            .leadTime(zeroToNull(request.getLeadTime()))\n            .safetyStock(zeroToNull(request.getSafetyStock()))\n            .build();\n    }\n\n    // ========== Date ==========\n\n    public Date toProtoDate(LocalDate date) {\n        if (date == null) {\n            return Date.getDefaultInstance();\n        }\n        return Date.newBuilder()\n            .setYear(date.getYear())\n            .setMonth(date.getMonthValue())\n            .setDay(date.getDayOfMonth())\n            .build();\n    }\n\n    public LocalDate toDomainDate(Date protoDate) {\n        if (protoDate.getYear() == 0) {\n            return null;\n        }\n        return LocalDate.of(\n            protoDate.getYear(),\n            protoDate.getMonth(),\n            protoDate.getDay()\n        );\n    }\n\n    // ========== Decimal ==========\n\n    public Decimal toProtoDecimal(BigDecimal value) {\n        if (value == null) {\n            return Decimal.getDefaultInstance();\n        }\n        return Decimal.newBuilder()\n            .setValue(value.toPlainString())\n            .build();\n    }\n\n    public BigDecimal toDomainDecimal(Decimal protoDecimal) {\n        if (protoDecimal.getValue().isEmpty()) {\n            return null;\n        }\n        return new BigDecimal(protoDecimal.getValue());\n    }\n\n    // ========== ItemCategory ==========\n\n    public com.example.production.grpc.ItemCategory toProtoCategory(ItemCategory domain) {\n        if (domain == null) {\n            return com.example.production.grpc.ItemCategory.ITEM_CATEGORY_UNSPECIFIED;\n        }\n        return switch (domain) {\n            case PRODUCT -&gt; com.example.production.grpc.ItemCategory.PRODUCT;\n            case SEMI_PRODUCT -&gt; com.example.production.grpc.ItemCategory.SEMI_PRODUCT;\n            case PART -&gt; com.example.production.grpc.ItemCategory.PART;\n            case MATERIAL -&gt; com.example.production.grpc.ItemCategory.MATERIAL;\n        };\n    }\n\n    public ItemCategory toDomainCategory(com.example.production.grpc.ItemCategory proto) {\n        return switch (proto) {\n            case PRODUCT -&gt; ItemCategory.PRODUCT;\n            case SEMI_PRODUCT -&gt; ItemCategory.SEMI_PRODUCT;\n            case PART -&gt; ItemCategory.PART;\n            case MATERIAL -&gt; ItemCategory.MATERIAL;\n            default -&gt; null;\n        };\n    }\n\n    // ========== Utility ==========\n\n    private String nullToEmpty(String value) {\n        return value == null ? \"\" : value;\n    }\n\n    private String emptyToNull(String value) {\n        return value == null || value.isEmpty() ? null : value;\n    }\n\n    private int nullToZero(Integer value) {\n        return value == null ? 0 : value;\n    }\n\n    private Integer zeroToNull(int value) {\n        return value == 0 ? null : value;\n    }\n}\n</code></pre>"},{"location":"article/study/study4-3/#432-grpc-tdd","title":"43.2 \u54c1\u76ee gRPC \u30b5\u30fc\u30d3\u30b9\u306e TDD \u5b9f\u88c5","text":""},{"location":"article/study/study4-3/#red","title":"Red: \u5931\u6557\u3059\u308b\u30c6\u30b9\u30c8\u3092\u66f8\u304f","text":"ItemGrpcServiceTest.java <pre><code>package com.example.production.infrastructure.grpc.service;\n\nimport com.example.production.domain.model.item.Item;\nimport com.example.production.domain.model.item.ItemCategory;\nimport com.example.production.grpc.*;\nimport com.example.production.infrastructure.persistence.mapper.ItemMapper;\nimport io.grpc.ManagedChannel;\nimport io.grpc.ManagedChannelBuilder;\nimport io.grpc.StatusRuntimeException;\nimport org.junit.jupiter.api.*;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.test.context.DynamicPropertyRegistry;\nimport org.springframework.test.context.DynamicPropertySource;\nimport org.testcontainers.containers.PostgreSQLContainer;\nimport org.testcontainers.junit.jupiter.Container;\nimport org.testcontainers.junit.jupiter.Testcontainers;\n\nimport java.time.LocalDate;\nimport java.util.ArrayList;\nimport java.util.Iterator;\nimport java.util.List;\nimport java.util.concurrent.CountDownLatch;\nimport java.util.concurrent.TimeUnit;\n\nimport static org.assertj.core.api.Assertions.*;\n\n@SpringBootTest(properties = {\n    \"grpc.server.port=9090\",\n    \"grpc.server.in-process-name=test\"\n})\n@Testcontainers\n@DisplayName(\"\u54c1\u76ee gRPC \u30b5\u30fc\u30d3\u30b9\")\nclass ItemGrpcServiceTest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:16\")\n        .withDatabaseName(\"production_test\")\n        .withUsername(\"test\")\n        .withPassword(\"test\");\n\n    @DynamicPropertySource\n    static void configureProperties(DynamicPropertyRegistry registry) {\n        registry.add(\"spring.datasource.url\", postgres::getJdbcUrl);\n        registry.add(\"spring.datasource.username\", postgres::getUsername);\n        registry.add(\"spring.datasource.password\", postgres::getPassword);\n    }\n\n    @Autowired\n    private ItemMapper itemMapper;\n\n    private ManagedChannel channel;\n    private ItemServiceGrpc.ItemServiceBlockingStub blockingStub;\n    private ItemServiceGrpc.ItemServiceStub asyncStub;\n\n    @BeforeEach\n    void setUp() {\n        channel = ManagedChannelBuilder.forAddress(\"localhost\", 9090)\n            .usePlaintext()\n            .build();\n        blockingStub = ItemServiceGrpc.newBlockingStub(channel);\n        asyncStub = ItemServiceGrpc.newStub(channel);\n\n        // \u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u3092\u30af\u30ea\u30a2\n        itemMapper.deleteAll();\n    }\n\n    @AfterEach\n    void tearDown() {\n        channel.shutdownNow();\n    }\n\n    @Nested\n    @DisplayName(\"GetItem (Unary)\")\n    class GetItemTests {\n\n        @Test\n        @DisplayName(\"\u54c1\u76ee\u30b3\u30fc\u30c9\u3067\u54c1\u76ee\u3092\u53d6\u5f97\u3067\u304d\u308b\")\n        void shouldGetItemByCode() {\n            // Arrange\n            insertTestItem(\"PROD-001\", \"\u30c6\u30b9\u30c8\u88fd\u54c1\", ItemCategory.PRODUCT);\n\n            // Act\n            var request = GetItemRequest.newBuilder()\n                .setItemCode(\"PROD-001\")\n                .build();\n            var response = blockingStub.getItem(request);\n\n            // Assert\n            assertThat(response.getItemCode()).isEqualTo(\"PROD-001\");\n            assertThat(response.getItemName()).isEqualTo(\"\u30c6\u30b9\u30c8\u88fd\u54c1\");\n            assertThat(response.getCategory())\n                .isEqualTo(com.example.production.grpc.ItemCategory.PRODUCT);\n        }\n\n        @Test\n        @DisplayName(\"\u5b58\u5728\u3057\u306a\u3044\u54c1\u76ee\u306fNOT_FOUND\u3092\u8fd4\u3059\")\n        void shouldThrowNotFoundForNonExistentItem() {\n            var request = GetItemRequest.newBuilder()\n                .setItemCode(\"NOT-EXIST\")\n                .build();\n\n            assertThatThrownBy(() -&gt; blockingStub.getItem(request))\n                .isInstanceOf(StatusRuntimeException.class)\n                .hasMessageContaining(\"NOT_FOUND\");\n        }\n    }\n\n    @Nested\n    @DisplayName(\"StreamItems (Server Streaming)\")\n    class StreamItemsTests {\n\n        @Test\n        @DisplayName(\"\u54c1\u76ee\u4e00\u89a7\u3092\u30b9\u30c8\u30ea\u30fc\u30e0\u3067\u53d6\u5f97\u3067\u304d\u308b\")\n        void shouldStreamItems() {\n            // Arrange\n            for (int i = 1; i &lt;= 5; i++) {\n                insertTestItem(\"ITEM-\" + String.format(\"%03d\", i),\n                    \"\u54c1\u76ee\" + i, ItemCategory.PRODUCT);\n            }\n\n            // Act\n            var request = GetItemsRequest.newBuilder().build();\n            Iterator&lt;com.example.production.grpc.Item&gt; iterator =\n                blockingStub.streamItems(request);\n\n            // Assert\n            List&lt;com.example.production.grpc.Item&gt; items = new ArrayList&lt;&gt;();\n            iterator.forEachRemaining(items::add);\n\n            assertThat(items).hasSize(5);\n        }\n    }\n\n    @Nested\n    @DisplayName(\"BatchCreateItems (Client Streaming)\")\n    class BatchCreateItemsTests {\n\n        @Test\n        @DisplayName(\"\u30d0\u30c3\u30c1\u3067\u54c1\u76ee\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void shouldBatchCreateItems() throws InterruptedException {\n            CountDownLatch latch = new CountDownLatch(1);\n            final BatchCreateResponse[] result = new BatchCreateResponse[1];\n\n            var requestObserver = asyncStub.batchCreateItems(\n                new io.grpc.stub.StreamObserver&lt;BatchCreateResponse&gt;() {\n                    @Override\n                    public void onNext(BatchCreateResponse response) {\n                        result[0] = response;\n                    }\n\n                    @Override\n                    public void onError(Throwable t) {\n                        latch.countDown();\n                    }\n\n                    @Override\n                    public void onCompleted() {\n                        latch.countDown();\n                    }\n                });\n\n            // Act - 3\u4ef6\u306e\u54c1\u76ee\u3092\u9001\u4fe1\n            for (int i = 1; i &lt;= 3; i++) {\n                requestObserver.onNext(CreateItemRequest.newBuilder()\n                    .setItemCode(\"BATCH-\" + String.format(\"%03d\", i))\n                    .setItemName(\"\u30d0\u30c3\u30c1\u54c1\u76ee\" + i)\n                    .setCategory(com.example.production.grpc.ItemCategory.PRODUCT)\n                    .build());\n            }\n            requestObserver.onCompleted();\n\n            // Assert\n            assertThat(latch.await(5, TimeUnit.SECONDS)).isTrue();\n            assertThat(result[0].getSuccessCount()).isEqualTo(3);\n        }\n    }\n\n    private void insertTestItem(String code, String name, ItemCategory category) {\n        itemMapper.insert(Item.builder()\n            .itemCode(code)\n            .effectiveDate(LocalDate.of(2025, 1, 1))\n            .itemName(name)\n            .category(category)\n            .build());\n    }\n}\n</code></pre>"},{"location":"article/study/study4-3/#green-grpc","title":"Green: gRPC \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":"ItemGrpcService.java <pre><code>package com.example.production.infrastructure.grpc.service;\n\nimport com.example.production.application.port.in.*;\nimport com.example.production.domain.exception.DuplicateItemException;\nimport com.example.production.domain.exception.ItemNotFoundException;\nimport com.example.production.domain.model.item.Item;\nimport com.example.production.grpc.*;\nimport com.example.production.infrastructure.grpc.mapper.ProtoMapper;\nimport io.grpc.Status;\nimport io.grpc.stub.StreamObserver;\nimport net.devh.boot.grpc.server.service.GrpcService;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\n/**\n * \u54c1\u76ee gRPC \u30b5\u30fc\u30d3\u30b9\u5b9f\u88c5\n * \u65e2\u5b58\u306e ItemUseCase \u3092 Input Adapter \u3068\u3057\u3066\u547c\u3073\u51fa\u3059\n */\n@GrpcService\npublic class ItemGrpcService extends ItemServiceGrpc.ItemServiceImplBase {\n\n    private final ItemUseCase itemUseCase;  // \u65e2\u5b58\u306e UseCase \u3092\u6ce8\u5165\n    private final ProtoMapper mapper;\n\n    public ItemGrpcService(ItemUseCase itemUseCase, ProtoMapper mapper) {\n        this.itemUseCase = itemUseCase;\n        this.mapper = mapper;\n    }\n\n    /**\n     * \u54c1\u76ee\u53d6\u5f97\uff08Unary RPC\uff09\n     */\n    @Override\n    public void getItem(GetItemRequest request,\n                        StreamObserver&lt;com.example.production.grpc.Item&gt; responseObserver) {\n        try {\n            // \u65e2\u5b58\u306e UseCase \u3092\u547c\u3073\u51fa\u3057\n            Item item = itemUseCase.getItemByCode(request.getItemCode());\n            responseObserver.onNext(mapper.toProto(item));\n            responseObserver.onCompleted();\n        } catch (ItemNotFoundException e) {\n            responseObserver.onError(Status.NOT_FOUND\n                .withDescription(e.getMessage())\n                .asRuntimeException());\n        }\n    }\n\n    /**\n     * \u54c1\u76ee\u767b\u9332\uff08Unary RPC\uff09\n     */\n    @Override\n    @Transactional\n    public void createItem(CreateItemRequest request,\n                           StreamObserver&lt;com.example.production.grpc.Item&gt; responseObserver) {\n        try {\n            // Proto \u2192 Command \u5909\u63db\n            CreateItemCommand command = CreateItemCommand.builder()\n                .itemCode(request.getItemCode())\n                .itemName(request.getItemName())\n                .category(mapper.toDomainCategory(request.getCategory()))\n                .itemGroupCode(emptyToNull(request.getItemGroupCode()))\n                .unitCode(emptyToNull(request.getUnitCode()))\n                .locationCode(emptyToNull(request.getLocationCode()))\n                .leadTime(zeroToNull(request.getLeadTime()))\n                .safetyStock(zeroToNull(request.getSafetyStock()))\n                .build();\n\n            // \u65e2\u5b58\u306e UseCase \u3092\u547c\u3073\u51fa\u3057\n            Item item = itemUseCase.createItem(command);\n            responseObserver.onNext(mapper.toProto(item));\n            responseObserver.onCompleted();\n        } catch (DuplicateItemException e) {\n            responseObserver.onError(Status.ALREADY_EXISTS\n                .withDescription(e.getMessage())\n                .asRuntimeException());\n        }\n    }\n\n    /**\n     * \u54c1\u76ee\u66f4\u65b0\uff08Unary RPC\uff09\n     */\n    @Override\n    @Transactional\n    public void updateItem(UpdateItemRequest request,\n                           StreamObserver&lt;com.example.production.grpc.Item&gt; responseObserver) {\n        try {\n            UpdateItemCommand command = UpdateItemCommand.builder()\n                .itemCode(request.getItemCode())\n                .itemName(emptyToNull(request.getItemName()))\n                .category(mapper.toDomainCategory(request.getCategory()))\n                .leadTime(zeroToNull(request.getLeadTime()))\n                .safetyStock(zeroToNull(request.getSafetyStock()))\n                .build();\n\n            Item item = itemUseCase.updateItem(command);\n            responseObserver.onNext(mapper.toProto(item));\n            responseObserver.onCompleted();\n        } catch (ItemNotFoundException e) {\n            responseObserver.onError(Status.NOT_FOUND\n                .withDescription(e.getMessage())\n                .asRuntimeException());\n        }\n    }\n\n    /**\n     * \u54c1\u76ee\u524a\u9664\uff08Unary RPC\uff09\n     */\n    @Override\n    @Transactional\n    public void deleteItem(DeleteItemRequest request,\n                           StreamObserver&lt;Empty&gt; responseObserver) {\n        try {\n            itemUseCase.deleteItem(request.getItemCode());\n            responseObserver.onNext(Empty.getDefaultInstance());\n            responseObserver.onCompleted();\n        } catch (ItemNotFoundException e) {\n            responseObserver.onError(Status.NOT_FOUND\n                .withDescription(e.getMessage())\n                .asRuntimeException());\n        }\n    }\n\n    /**\n     * \u54c1\u76ee\u4e00\u89a7\u306e\u30b9\u30c8\u30ea\u30fc\u30e0\u914d\u4fe1\uff08Server Streaming RPC\uff09\n     */\n    @Override\n    public void streamItems(GetItemsRequest request,\n                            StreamObserver&lt;com.example.production.grpc.Item&gt; responseObserver) {\n        try {\n            List&lt;Item&gt; items;\n\n            if (request.getCategory() !=\n                    com.example.production.grpc.ItemCategory.ITEM_CATEGORY_UNSPECIFIED) {\n                items = itemUseCase.getItemsByCategory(\n                    mapper.toDomainCategory(request.getCategory()));\n            } else {\n                items = itemUseCase.getAllItems();\n            }\n\n            // \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u914d\u4fe1\n            for (Item item : items) {\n                responseObserver.onNext(mapper.toProto(item));\n            }\n            responseObserver.onCompleted();\n        } catch (Exception e) {\n            responseObserver.onError(Status.INTERNAL\n                .withDescription(e.getMessage())\n                .asRuntimeException());\n        }\n    }\n\n    /**\n     * \u30d0\u30c3\u30c1\u767b\u9332\uff08Client Streaming RPC\uff09\n     */\n    @Override\n    @Transactional\n    public StreamObserver&lt;CreateItemRequest&gt; batchCreateItems(\n            StreamObserver&lt;BatchCreateResponse&gt; responseObserver) {\n\n        return new StreamObserver&lt;&gt;() {\n            private final List&lt;String&gt; successCodes = new ArrayList&lt;&gt;();\n            private final List&lt;String&gt; failedCodes = new ArrayList&lt;&gt;();\n\n            @Override\n            public void onNext(CreateItemRequest request) {\n                try {\n                    CreateItemCommand command = CreateItemCommand.builder()\n                        .itemCode(request.getItemCode())\n                        .itemName(request.getItemName())\n                        .category(mapper.toDomainCategory(request.getCategory()))\n                        .build();\n\n                    itemUseCase.createItem(command);\n                    successCodes.add(request.getItemCode());\n                } catch (Exception e) {\n                    failedCodes.add(request.getItemCode());\n                }\n            }\n\n            @Override\n            public void onError(Throwable t) {\n                responseObserver.onError(Status.INTERNAL\n                    .withDescription(t.getMessage())\n                    .asRuntimeException());\n            }\n\n            @Override\n            public void onCompleted() {\n                responseObserver.onNext(BatchCreateResponse.newBuilder()\n                    .setSuccessCount(successCodes.size())\n                    .setFailedCount(failedCodes.size())\n                    .addAllFailedCodes(failedCodes)\n                    .build());\n                responseObserver.onCompleted();\n            }\n        };\n    }\n\n    private String emptyToNull(String value) {\n        return value == null || value.isEmpty() ? null : value;\n    }\n\n    private Integer zeroToNull(int value) {\n        return value == 0 ? null : value;\n    }\n}\n</code></pre>"},{"location":"article/study/study4-3/#433-bom-grpc","title":"43.3 BOM gRPC \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":"BomGrpcService.java <pre><code>package com.example.production.infrastructure.grpc.service;\n\nimport com.example.production.application.service.BomNode;\nimport com.example.production.application.service.BomService;\nimport com.example.production.application.service.WhereUsedResult;\nimport com.example.production.grpc.*;\nimport com.example.production.infrastructure.grpc.mapper.ProtoMapper;\nimport io.grpc.Status;\nimport io.grpc.stub.StreamObserver;\nimport net.devh.boot.grpc.server.service.GrpcService;\n\nimport java.util.List;\n\n/**\n * BOM gRPC \u30b5\u30fc\u30d3\u30b9\u5b9f\u88c5\n * \u65e2\u5b58\u306e BomService \u3092 Input Adapter \u3068\u3057\u3066\u547c\u3073\u51fa\u3059\n */\n@GrpcService\npublic class BomGrpcService extends BomServiceGrpc.BomServiceImplBase {\n\n    private final BomService bomService;  // \u65e2\u5b58\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u6ce8\u5165\n    private final ProtoMapper mapper;\n\n    public BomGrpcService(BomService bomService, ProtoMapper mapper) {\n        this.bomService = bomService;\n        this.mapper = mapper;\n    }\n\n    /**\n     * \u90e8\u54c1\u5c55\u958b\uff08Server Streaming\uff09\n     */\n    @Override\n    public void explodeBom(ExplodeBomRequest request,\n                           StreamObserver&lt;com.example.production.grpc.BomNode&gt; responseObserver) {\n        try {\n            BomNode root = bomService.explodeBom(request.getItemCode());\n\n            // \u6df1\u3055\u512a\u5148\u3067\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u914d\u4fe1\n            streamBomNode(root, responseObserver);\n            responseObserver.onCompleted();\n        } catch (Exception e) {\n            responseObserver.onError(Status.INTERNAL\n                .withDescription(e.getMessage())\n                .asRuntimeException());\n        }\n    }\n\n    private void streamBomNode(BomNode node,\n                               StreamObserver&lt;com.example.production.grpc.BomNode&gt; observer) {\n        observer.onNext(toProtoBomNode(node));\n\n        if (node.getChildren() != null) {\n            for (BomNode child : node.getChildren()) {\n                streamBomNode(child, observer);\n            }\n        }\n    }\n\n    private com.example.production.grpc.BomNode toProtoBomNode(BomNode domain) {\n        var builder = com.example.production.grpc.BomNode.newBuilder()\n            .setItemCode(domain.getItemCode())\n            .setItemName(domain.getItemName())\n            .setRequiredQuantity(mapper.toProtoDecimal(domain.getRequiredQuantity()))\n            .setLevel(domain.getLevel());\n\n        if (domain.getChildren() != null) {\n            for (BomNode child : domain.getChildren()) {\n                builder.addChildren(toProtoBomNode(child));\n            }\n        }\n\n        return builder.build();\n    }\n\n    /**\n     * \u4f7f\u7528\u5148\u7167\u4f1a\n     */\n    @Override\n    public void whereUsed(WhereUsedRequest request,\n                          StreamObserver&lt;WhereUsedResponse&gt; responseObserver) {\n        try {\n            List&lt;WhereUsedResult&gt; results = bomService.whereUsed(request.getItemCode());\n\n            var response = WhereUsedResponse.newBuilder();\n            for (WhereUsedResult result : results) {\n                response.addResults(com.example.production.grpc.WhereUsedResult.newBuilder()\n                    .setParentItemCode(result.getParentItemCode())\n                    .setItemName(result.getItemName())\n                    .setRequiredQuantity(mapper.toProtoDecimal(result.getRequiredQuantity()))\n                    .build());\n            }\n\n            responseObserver.onNext(response.build());\n            responseObserver.onCompleted();\n        } catch (Exception e) {\n            responseObserver.onError(Status.INTERNAL\n                .withDescription(e.getMessage())\n                .asRuntimeException());\n        }\n    }\n}\n</code></pre>"},{"location":"article/study/study4-3/#44-api","title":"\u7b2c44\u7ae0\uff1a\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3 API \u306e\u5b9f\u88c5","text":""},{"location":"article/study/study4-3/#441-grpc","title":"44.1 \u767a\u6ce8 gRPC \u30b5\u30fc\u30d3\u30b9","text":"src/main/proto/purchase_order.proto <pre><code>syntax = \"proto3\";\n\npackage production;\n\nimport \"common.proto\";\n\noption java_package = \"com.example.production.grpc\";\noption java_multiple_files = true;\n\n// \u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\nenum OrderStatus {\n  ORDER_STATUS_UNSPECIFIED = 0;\n  DRAFT = 1;\n  CONFIRMED = 2;\n  CANCELLED = 3;\n  COMPLETED = 4;\n}\n\n// \u767a\u6ce8\u30d8\u30c3\u30c0\nmessage PurchaseOrder {\n  string order_number = 1;\n  string supplier_code = 2;\n  Date order_date = 3;\n  OrderStatus status = 4;\n  repeated PurchaseOrderDetail details = 5;\n  Decimal total_amount = 6;\n}\n\n// \u767a\u6ce8\u660e\u7d30\nmessage PurchaseOrderDetail {\n  int32 line_number = 1;\n  string item_code = 2;\n  Decimal order_quantity = 3;\n  Decimal unit_price = 4;\n  Date delivery_date = 5;\n  Decimal received_quantity = 6;\n}\n\n// \u30ea\u30af\u30a8\u30b9\u30c8\nmessage GetOrderRequest {\n  string order_number = 1;\n}\n\nmessage GetOrdersRequest {\n  OrderStatus status = 1;\n  PageRequest page = 2;\n}\n\nmessage CreateOrderRequest {\n  string supplier_code = 1;\n  repeated CreateOrderDetailRequest details = 2;\n}\n\nmessage CreateOrderDetailRequest {\n  string item_code = 1;\n  Decimal order_quantity = 2;\n  Decimal unit_price = 3;\n  Date delivery_date = 4;\n}\n\nmessage ConfirmOrderRequest {\n  string order_number = 1;\n}\n\n// \u5165\u8377\u767b\u9332\uff08\u53cc\u65b9\u5411\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\uff09\nmessage RecordReceivingRequest {\n  string order_number = 1;\n  int32 line_number = 2;\n  Decimal received_quantity = 3;\n  Date receiving_date = 4;\n}\n\nmessage RecordReceivingResponse {\n  string order_number = 1;\n  int32 line_number = 2;\n  Decimal total_received = 3;\n  bool is_completed = 4;\n}\n\n// \u767a\u6ce8\u30b5\u30fc\u30d3\u30b9\nservice PurchaseOrderService {\n  rpc GetOrder(GetOrderRequest) returns (PurchaseOrder);\n  rpc StreamOrders(GetOrdersRequest) returns (stream PurchaseOrder);\n  rpc CreateOrder(CreateOrderRequest) returns (PurchaseOrder);\n  rpc ConfirmOrder(ConfirmOrderRequest) returns (PurchaseOrder);\n  rpc CancelOrder(GetOrderRequest) returns (Empty);\n\n  // \u5165\u8377\u767b\u9332\uff08\u53cc\u65b9\u5411\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\uff09\n  rpc RecordReceiving(stream RecordReceivingRequest) returns (stream RecordReceivingResponse);\n}\n</code></pre> PurchaseOrderGrpcService.java <pre><code>package com.example.production.infrastructure.grpc.service;\n\nimport com.example.production.application.port.in.*;\nimport com.example.production.domain.model.purchase.PurchaseOrder;\nimport com.example.production.grpc.*;\nimport com.example.production.infrastructure.grpc.mapper.ProtoMapper;\nimport io.grpc.Status;\nimport io.grpc.stub.StreamObserver;\nimport net.devh.boot.grpc.server.service.GrpcService;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.util.List;\n\n/**\n * \u767a\u6ce8 gRPC \u30b5\u30fc\u30d3\u30b9\u5b9f\u88c5\n * \u65e2\u5b58\u306e PurchaseOrderUseCase \u3092 Input Adapter \u3068\u3057\u3066\u547c\u3073\u51fa\u3059\n */\n@GrpcService\npublic class PurchaseOrderGrpcService\n        extends PurchaseOrderServiceGrpc.PurchaseOrderServiceImplBase {\n\n    private final PurchaseOrderUseCase useCase;  // \u65e2\u5b58\u306e UseCase\n    private final ProtoMapper mapper;\n\n    public PurchaseOrderGrpcService(PurchaseOrderUseCase useCase, ProtoMapper mapper) {\n        this.useCase = useCase;\n        this.mapper = mapper;\n    }\n\n    @Override\n    public void getOrder(GetOrderRequest request,\n                         StreamObserver&lt;com.example.production.grpc.PurchaseOrder&gt; responseObserver) {\n        try {\n            PurchaseOrder order = useCase.getOrder(request.getOrderNumber());\n            responseObserver.onNext(toProto(order));\n            responseObserver.onCompleted();\n        } catch (Exception e) {\n            responseObserver.onError(Status.NOT_FOUND\n                .withDescription(e.getMessage())\n                .asRuntimeException());\n        }\n    }\n\n    @Override\n    public void streamOrders(GetOrdersRequest request,\n                             StreamObserver&lt;com.example.production.grpc.PurchaseOrder&gt; responseObserver) {\n        try {\n            List&lt;PurchaseOrder&gt; orders = useCase.getAllOrders();\n\n            for (PurchaseOrder order : orders) {\n                responseObserver.onNext(toProto(order));\n            }\n            responseObserver.onCompleted();\n        } catch (Exception e) {\n            responseObserver.onError(Status.INTERNAL\n                .withDescription(e.getMessage())\n                .asRuntimeException());\n        }\n    }\n\n    @Override\n    @Transactional\n    public void createOrder(CreateOrderRequest request,\n                            StreamObserver&lt;com.example.production.grpc.PurchaseOrder&gt; responseObserver) {\n        try {\n            CreatePurchaseOrderCommand command = CreatePurchaseOrderCommand.builder()\n                .supplierCode(request.getSupplierCode())\n                .details(request.getDetailsList().stream()\n                    .map(d -&gt; CreatePurchaseOrderCommand.PurchaseOrderDetailCommand.builder()\n                        .itemCode(d.getItemCode())\n                        .orderQuantity(mapper.toDomainDecimal(d.getOrderQuantity()))\n                        .unitPrice(mapper.toDomainDecimal(d.getUnitPrice()))\n                        .deliveryDate(mapper.toDomainDate(d.getDeliveryDate()))\n                        .build())\n                    .toList())\n                .build();\n\n            PurchaseOrder order = useCase.createOrder(command);\n            responseObserver.onNext(toProto(order));\n            responseObserver.onCompleted();\n        } catch (Exception e) {\n            responseObserver.onError(Status.INTERNAL\n                .withDescription(e.getMessage())\n                .asRuntimeException());\n        }\n    }\n\n    /**\n     * \u5165\u8377\u767b\u9332\uff08\u53cc\u65b9\u5411\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\uff09\n     */\n    @Override\n    public StreamObserver&lt;RecordReceivingRequest&gt; recordReceiving(\n            StreamObserver&lt;RecordReceivingResponse&gt; responseObserver) {\n\n        return new StreamObserver&lt;&gt;() {\n            @Override\n            public void onNext(RecordReceivingRequest request) {\n                try {\n                    var result = useCase.recordReceiving(\n                        request.getOrderNumber(),\n                        request.getLineNumber(),\n                        mapper.toDomainDecimal(request.getReceivedQuantity()),\n                        mapper.toDomainDate(request.getReceivingDate())\n                    );\n\n                    // \u5373\u5ea7\u306b\u30ec\u30b9\u30dd\u30f3\u30b9\n                    responseObserver.onNext(RecordReceivingResponse.newBuilder()\n                        .setOrderNumber(request.getOrderNumber())\n                        .setLineNumber(request.getLineNumber())\n                        .setTotalReceived(mapper.toProtoDecimal(result.getTotalReceived()))\n                        .setIsCompleted(result.isCompleted())\n                        .build());\n                } catch (Exception e) {\n                    responseObserver.onNext(RecordReceivingResponse.newBuilder()\n                        .setOrderNumber(request.getOrderNumber())\n                        .setLineNumber(request.getLineNumber())\n                        .setIsCompleted(false)\n                        .build());\n                }\n            }\n\n            @Override\n            public void onError(Throwable t) {\n                responseObserver.onError(Status.INTERNAL\n                    .withDescription(t.getMessage())\n                    .asRuntimeException());\n            }\n\n            @Override\n            public void onCompleted() {\n                responseObserver.onCompleted();\n            }\n        };\n    }\n\n    private com.example.production.grpc.PurchaseOrder toProto(PurchaseOrder domain) {\n        var builder = com.example.production.grpc.PurchaseOrder.newBuilder()\n            .setOrderNumber(domain.getOrderNumber())\n            .setSupplierCode(domain.getSupplierCode())\n            .setOrderDate(mapper.toProtoDate(domain.getOrderDate()))\n            .setStatus(toProtoStatus(domain.getStatus()))\n            .setTotalAmount(mapper.toProtoDecimal(domain.getTotalAmount()));\n\n        if (domain.getDetails() != null) {\n            for (var detail : domain.getDetails()) {\n                builder.addDetails(PurchaseOrderDetail.newBuilder()\n                    .setLineNumber(detail.getLineNumber())\n                    .setItemCode(detail.getItemCode())\n                    .setOrderQuantity(mapper.toProtoDecimal(detail.getOrderQuantity()))\n                    .setUnitPrice(mapper.toProtoDecimal(detail.getUnitPrice()))\n                    .setDeliveryDate(mapper.toProtoDate(detail.getDeliveryDate()))\n                    .setReceivedQuantity(mapper.toProtoDecimal(detail.getReceivedQuantity()))\n                    .build());\n            }\n        }\n\n        return builder.build();\n    }\n\n    private OrderStatus toProtoStatus(\n            com.example.production.domain.model.purchase.OrderStatus domain) {\n        return switch (domain) {\n            case DRAFT -&gt; OrderStatus.DRAFT;\n            case CONFIRMED -&gt; OrderStatus.CONFIRMED;\n            case CANCELLED -&gt; OrderStatus.CANCELLED;\n            case COMPLETED -&gt; OrderStatus.COMPLETED;\n        };\n    }\n}\n</code></pre>"},{"location":"article/study/study4-3/#442-mrp-grpc","title":"44.2 MRP gRPC \u30b5\u30fc\u30d3\u30b9","text":"MrpGrpcService.java <pre><code>package com.example.production.infrastructure.grpc.service;\n\nimport com.example.production.application.service.MrpService;\nimport com.example.production.grpc.*;\nimport com.example.production.infrastructure.grpc.mapper.ProtoMapper;\nimport io.grpc.stub.StreamObserver;\nimport net.devh.boot.grpc.server.service.GrpcService;\n\nimport java.util.concurrent.CompletableFuture;\nimport java.util.concurrent.Executors;\n\n/**\n * MRP gRPC \u30b5\u30fc\u30d3\u30b9\u5b9f\u88c5\n * \u65e2\u5b58\u306e MrpService \u3092 Input Adapter \u3068\u3057\u3066\u547c\u3073\u51fa\u3059\n */\n@GrpcService\npublic class MrpGrpcService extends MrpServiceGrpc.MrpServiceImplBase {\n\n    private final MrpService mrpService;  // \u65e2\u5b58\u306e\u30b5\u30fc\u30d3\u30b9\n    private final ProtoMapper mapper;\n\n    public MrpGrpcService(MrpService mrpService, ProtoMapper mapper) {\n        this.mrpService = mrpService;\n        this.mapper = mapper;\n    }\n\n    /**\n     * MRP \u5b9f\u884c\uff08\u9032\u6357\u3092\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\uff09\n     */\n    @Override\n    public void executeMrp(ExecuteMrpRequest request,\n                           StreamObserver&lt;MrpProgress&gt; responseObserver) {\n\n        var executor = Executors.newSingleThreadExecutor();\n\n        CompletableFuture.runAsync(() -&gt; {\n            try {\n                // \u30d5\u30a7\u30fc\u30ba1: \u9700\u8981\u53d6\u5f97\n                sendProgress(responseObserver, \"\u9700\u8981\u53d6\u5f97\", 0, 4,\n                    \"\u57fa\u6e96\u751f\u7523\u8a08\u753b\u304b\u3089\u9700\u8981\u3092\u53d6\u5f97\u4e2d...\");\n\n                // \u30d5\u30a7\u30fc\u30ba2: BOM \u5c55\u958b\n                sendProgress(responseObserver, \"BOM\u5c55\u958b\", 1, 4,\n                    \"\u90e8\u54c1\u69cb\u6210\u8868\u3092\u5c55\u958b\u4e2d...\");\n\n                // \u30d5\u30a7\u30fc\u30ba3: \u6b63\u5473\u6240\u8981\u91cf\u8a08\u7b97\n                sendProgress(responseObserver, \"\u6b63\u5473\u6240\u8981\u91cf\u8a08\u7b97\", 2, 4,\n                    \"\u5728\u5eab\u3068\u7167\u5408\u3057\u3066\u6b63\u5473\u6240\u8981\u91cf\u3092\u8a08\u7b97\u4e2d...\");\n\n                // \u30d5\u30a7\u30fc\u30ba4: \u8a08\u753b\u30aa\u30fc\u30c0\u751f\u6210\n                sendProgress(responseObserver, \"\u8a08\u753b\u30aa\u30fc\u30c0\u751f\u6210\", 3, 4,\n                    \"\u30ed\u30c3\u30c8\u30b5\u30a4\u30ba\u3092\u8003\u616e\u3057\u3066\u8a08\u753b\u30aa\u30fc\u30c0\u3092\u751f\u6210\u4e2d...\");\n\n                // \u5b9f\u969b\u306e MRP \u5b9f\u884c\n                var startDate = mapper.toDomainDate(request.getStartDate());\n                var endDate = mapper.toDomainDate(request.getEndDate());\n                mrpService.execute(startDate, endDate);\n\n                // \u5b8c\u4e86\n                sendProgress(responseObserver, \"\u5b8c\u4e86\", 4, 4,\n                    \"MRP \u5b9f\u884c\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\");\n                responseObserver.onCompleted();\n            } catch (Exception e) {\n                responseObserver.onError(io.grpc.Status.INTERNAL\n                    .withDescription(e.getMessage())\n                    .asRuntimeException());\n            }\n        }, executor).whenComplete((v, t) -&gt; executor.shutdown());\n    }\n\n    private void sendProgress(StreamObserver&lt;MrpProgress&gt; observer,\n                              String phase, int current, int total, String message) {\n        observer.onNext(MrpProgress.newBuilder()\n            .setPhase(phase)\n            .setCurrent(current)\n            .setTotal(total)\n            .setMessage(message)\n            .build());\n    }\n\n    /**\n     * MRP \u5b9f\u884c\uff08\u540c\u671f\uff09\n     */\n    @Override\n    public void executeMrpSync(ExecuteMrpRequest request,\n                               StreamObserver&lt;MrpResult&gt; responseObserver) {\n        try {\n            var startDate = mapper.toDomainDate(request.getStartDate());\n            var endDate = mapper.toDomainDate(request.getEndDate());\n\n            long startTime = System.currentTimeMillis();\n            var result = mrpService.execute(startDate, endDate);\n            long executionTime = System.currentTimeMillis() - startTime;\n\n            var response = MrpResult.newBuilder()\n                .setPeriodStart(request.getStartDate())\n                .setPeriodEnd(request.getEndDate())\n                .setStatistics(MrpStatistics.newBuilder()\n                    .setTotalItemsProcessed(result.getPlannedOrders().size())\n                    .setShortageItemCount(result.getShortageItems().size())\n                    .setExecutionTimeMs(executionTime)\n                    .build());\n\n            for (var order : result.getPlannedOrders()) {\n                response.addPlannedOrders(toProtoPlannedOrder(order));\n            }\n\n            for (var item : result.getShortageItems()) {\n                response.addShortageItems(toProtoShortageItem(item));\n            }\n\n            responseObserver.onNext(response.build());\n            responseObserver.onCompleted();\n        } catch (Exception e) {\n            responseObserver.onError(io.grpc.Status.INTERNAL\n                .withDescription(e.getMessage())\n                .asRuntimeException());\n        }\n    }\n\n    private PlannedOrder toProtoPlannedOrder(\n            com.example.production.application.service.PlannedOrder domain) {\n        return PlannedOrder.newBuilder()\n            .setItemCode(domain.getItemCode())\n            .setItemName(domain.getItemName())\n            .setQuantity(mapper.toProtoDecimal(domain.getQuantity()))\n            .setDueDate(mapper.toProtoDate(domain.getDueDate()))\n            .build();\n    }\n\n    private ShortageItem toProtoShortageItem(\n            com.example.production.application.service.ShortageItem domain) {\n        return ShortageItem.newBuilder()\n            .setItemCode(domain.getItemCode())\n            .setItemName(domain.getItemName())\n            .setShortageQuantity(mapper.toProtoDecimal(domain.getShortageQuantity()))\n            .setRecommendedOrderDate(mapper.toProtoDate(domain.getRecommendedOrderDate()))\n            .build();\n    }\n}\n</code></pre>"},{"location":"article/study/study4-3/#45","title":"\u7b2c45\u7ae0\uff1a\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3068\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0","text":""},{"location":"article/study/study4-3/#451-grpc","title":"45.1 gRPC \u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9","text":"<p>gRPC \u306f\u6a19\u6e96\u5316\u3055\u308c\u305f\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3092\u4f7f\u7528\u3057\u307e\u3059\uff1a</p> \u30b3\u30fc\u30c9 \u8aac\u660e \u4f7f\u7528\u4f8b <code>OK</code> \u6210\u529f \u6b63\u5e38\u5b8c\u4e86 <code>INVALID_ARGUMENT</code> \u7121\u52b9\u306a\u5f15\u6570 \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc <code>NOT_FOUND</code> \u898b\u3064\u304b\u3089\u306a\u3044 \u54c1\u76ee\u304c\u5b58\u5728\u3057\u306a\u3044 <code>ALREADY_EXISTS</code> \u65e2\u306b\u5b58\u5728 \u54c1\u76ee\u30b3\u30fc\u30c9\u91cd\u8907 <code>FAILED_PRECONDITION</code> \u524d\u63d0\u6761\u4ef6\u30a8\u30e9\u30fc \u767a\u6ce8\u78ba\u5b9a\u6e08\u307f\u306e\u53d6\u6d88 <code>INTERNAL</code> \u5185\u90e8\u30a8\u30e9\u30fc \u30b5\u30fc\u30d0\u30fc\u5074\u30a8\u30e9\u30fc"},{"location":"article/study/study4-3/#452","title":"45.2 \u30b0\u30ed\u30fc\u30d0\u30eb\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc","text":"LoggingInterceptor.java <pre><code>package com.example.production.infrastructure.grpc.interceptor;\n\nimport io.grpc.*;\nimport net.devh.boot.grpc.server.interceptor.GrpcGlobalServerInterceptor;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport java.time.Duration;\nimport java.time.Instant;\n\n/**\n * \u30ed\u30ae\u30f3\u30b0 &amp; \u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\n */\n@GrpcGlobalServerInterceptor\npublic class LoggingInterceptor implements ServerInterceptor {\n\n    private static final Logger log = LoggerFactory.getLogger(LoggingInterceptor.class);\n\n    @Override\n    public &lt;ReqT, RespT&gt; ServerCall.Listener&lt;ReqT&gt; interceptCall(\n            ServerCall&lt;ReqT, RespT&gt; call,\n            Metadata headers,\n            ServerCallHandler&lt;ReqT, RespT&gt; next) {\n\n        String methodName = call.getMethodDescriptor().getFullMethodName();\n        Instant startTime = Instant.now();\n\n        log.info(\"gRPC Request: {}\", methodName);\n\n        ServerCall&lt;ReqT, RespT&gt; wrappedCall = new ForwardingServerCall\n                .SimpleForwardingServerCall&lt;&gt;(call) {\n            @Override\n            public void close(Status status, Metadata trailers) {\n                Duration duration = Duration.between(startTime, Instant.now());\n                log.info(\"gRPC Response: {} - Status: {} - Duration: {}ms\",\n                    methodName, status.getCode(), duration.toMillis());\n                super.close(status, trailers);\n            }\n        };\n\n        return next.startCall(wrappedCall, headers);\n    }\n}\n</code></pre>"},{"location":"article/study/study4-3/#453","title":"45.3 \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\u306e\u5b9f\u88c5","text":"HealthGrpcService.java <pre><code>package com.example.production.infrastructure.grpc.service;\n\nimport io.grpc.health.v1.HealthCheckRequest;\nimport io.grpc.health.v1.HealthCheckResponse;\nimport io.grpc.health.v1.HealthGrpc;\nimport io.grpc.stub.StreamObserver;\nimport net.devh.boot.grpc.server.service.GrpcService;\n\nimport javax.sql.DataSource;\nimport java.sql.Connection;\n\n/**\n * gRPC \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\u30b5\u30fc\u30d3\u30b9\n */\n@GrpcService\npublic class HealthGrpcService extends HealthGrpc.HealthImplBase {\n\n    private final DataSource dataSource;\n\n    public HealthGrpcService(DataSource dataSource) {\n        this.dataSource = dataSource;\n    }\n\n    @Override\n    public void check(HealthCheckRequest request,\n                      StreamObserver&lt;HealthCheckResponse&gt; responseObserver) {\n\n        HealthCheckResponse.ServingStatus status = checkHealth()\n            ? HealthCheckResponse.ServingStatus.SERVING\n            : HealthCheckResponse.ServingStatus.NOT_SERVING;\n\n        responseObserver.onNext(HealthCheckResponse.newBuilder()\n            .setStatus(status)\n            .build());\n        responseObserver.onCompleted();\n    }\n\n    private boolean checkHealth() {\n        try (Connection conn = dataSource.getConnection()) {\n            return conn.isValid(5);\n        } catch (Exception e) {\n            return false;\n        }\n    }\n}\n</code></pre>"},{"location":"article/study/study4-3/#454","title":"45.4 \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb","text":"application.yml\uff08gRPC \u8ffd\u52a0\u8a2d\u5b9a\uff09 <pre><code>grpc:\n  server:\n    port: 9090\n    reflection-service-enabled: true  # \u958b\u767a\u6642\u306b\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u6709\u52b9\u5316\n\n# \u65e2\u5b58\u306e\u8a2d\u5b9a\u306f\u305d\u306e\u307e\u307e\nspring:\n  datasource:\n    url: jdbc:postgresql://localhost:5432/production\n    username: postgres\n    password: postgres\n\nmybatis:\n  mapper-locations: classpath:mapper/*.xml\n</code></pre>"},{"location":"article/study/study4-3/#455-grpc","title":"45.5 gRPC \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u306e\u547c\u3073\u51fa\u3057","text":"<pre><code># \u30b5\u30fc\u30d3\u30b9\u4e00\u89a7\ngrpcurl -plaintext localhost:9090 list\n\n# \u54c1\u76ee\u53d6\u5f97\ngrpcurl -plaintext -d '{\"item_code\": \"PROD-001\"}' \\\n  localhost:9090 production.ItemService/GetItem\n\n# \u54c1\u76ee\u4e00\u89a7\uff08\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\uff09\ngrpcurl -plaintext \\\n  localhost:9090 production.ItemService/StreamItems\n</code></pre>"},{"location":"article/study/study4-3/#_2","title":"\u307e\u3068\u3081","text":"<p>\u672c\u7814\u7a76\u3067\u306f\u3001gRPC \u306b\u3088\u308b\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 API \u3092\u5b9f\u88c5\u3057\u307e\u3057\u305f\u3002</p>"},{"location":"article/study/study4-3/#api","title":"API \u30b5\u30fc\u30d0\u30fc\u7248\u3068\u306e\u6bd4\u8f03","text":"\u89b3\u70b9 REST API\uff08\u7b2c32\u7ae0\uff09 gRPC\uff08\u672c\u7814\u7a76\uff09 \u30d7\u30ed\u30c8\u30b3\u30eb HTTP/1.1 + JSON HTTP/2 + Protobuf \u30b9\u30ad\u30fc\u30de OpenAPI\uff08\u4efb\u610f\uff09 .proto\uff08\u5fc5\u9808\uff09 \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 WebSocket \u5225\u5b9f\u88c5 \u30cd\u30a4\u30c6\u30a3\u30d6 \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9 \u6a19\u6e96 \u9ad8\u901f \u30c9\u30e1\u30a4\u30f3\u5c64 \u5171\u6709 \u5171\u6709 \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64 \u5171\u6709 \u5171\u6709 Input Adapter REST Controller gRPC Service"},{"location":"article/study/study4-3/#grpc","title":"\u5b9f\u88c5\u3057\u305f gRPC \u30b5\u30fc\u30d3\u30b9","text":"\u30b5\u30fc\u30d3\u30b9 \u30e1\u30bd\u30c3\u30c9 \u30d1\u30bf\u30fc\u30f3 ItemService GetItem, CreateItem, UpdateItem, DeleteItem Unary StreamItems Server Streaming BatchCreateItems Client Streaming BomService ExplodeBom Server Streaming WhereUsed Unary PurchaseOrderService GetOrder, CreateOrder, ConfirmOrder Unary StreamOrders Server Streaming RecordReceiving Bidirectional MrpService ExecuteMrp Server Streaming ExecuteMrpSync Unary"},{"location":"article/study/study4-3/#_3","title":"\u6280\u8853\u30b9\u30bf\u30c3\u30af","text":"<ul> <li>grpc-spring-boot-starter: Spring Boot \u7d71\u5408</li> <li>Protocol Buffers 3: \u30b9\u30ad\u30fc\u30de\u5b9a\u7fa9</li> <li>io.grpc: gRPC Java \u5b9f\u88c5</li> <li>gRPC Health Check: \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af</li> </ul>"},{"location":"article/study/study4-3/#grpc_1","title":"gRPC \u3092\u9078\u629e\u3059\u3079\u304d\u5834\u9762","text":"<ol> <li>\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u9593\u901a\u4fe1: \u9ad8\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u304c\u5fc5\u8981</li> <li>\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u901a\u4fe1: \u9032\u6357\u901a\u77e5\u3001\u30c1\u30e3\u30c3\u30c8\u7b49</li> <li>\u5927\u91cf\u30c7\u30fc\u30bf\u8ee2\u9001: \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u3067\u52b9\u7387\u7684\u306b</li> <li>\u591a\u8a00\u8a9e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8: Proto \u304b\u3089\u30b3\u30fc\u30c9\u751f\u6210</li> <li>\u578b\u5b89\u5168\u6027\u91cd\u8996: \u30b9\u30ad\u30fc\u30de\u99c6\u52d5\u958b\u767a</li> </ol> <p>\u76ee\u6b21\u3078\u623b\u308b</p>"},{"location":"article/study/study4-4/","title":"\u5b9f\u8df5\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\uff1a\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 \u7814\u7a76 4 - GraphQL \u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5","text":""},{"location":"article/study/study4-4/#_1","title":"\u306f\u3058\u3081\u306b","text":"<p>\u672c\u7814\u7a76\u3067\u306f\u3001API \u30b5\u30fc\u30d0\u30fc\u69cb\u6210\uff08\u7b2c32\u7ae0\uff09\u3068\u306f\u7570\u306a\u308b\u30a2\u30d7\u30ed\u30fc\u30c1\u3068\u3057\u3066\u3001GraphQL \u306b\u3088\u308b\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u5fc5\u8981\u306a\u30c7\u30fc\u30bf\u3092\u6b63\u78ba\u306b\u6307\u5b9a\u3067\u304d\u308b\u67d4\u8edf\u306a\u30af\u30a8\u30ea\u3068\u3001\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u66f4\u65b0\u3092\u5b9f\u73fe\u3059\u308b Subscription \u3092\u6d3b\u7528\u3057\u307e\u3059\u3002</p> <p>\u7b2c32\u7ae0\u3067\u69cb\u7bc9\u3057\u305f\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u30c9\u30e1\u30a4\u30f3\u5c64\u30fb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff09\u306f\u305d\u306e\u307e\u307e\u5171\u6709\u3057\u3001Input Adapter \u3068\u3057\u3066 GraphQL \u30ea\u30be\u30eb\u30d0\u5c64\u306e\u307f\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p>"},{"location":"article/study/study4-4/#46graphql","title":"\u7b2c46\u7ae0\uff1aGraphQL \u30b5\u30fc\u30d0\u30fc\u306e\u57fa\u790e","text":""},{"location":"article/study/study4-4/#461-graphql","title":"46.1 GraphQL \u3068\u306f","text":"<p>GraphQL \u306f Facebook \u304c\u958b\u767a\u3057\u305f\u30af\u30a8\u30ea\u8a00\u8a9e\u304a\u3088\u3073\u5b9f\u884c\u30a8\u30f3\u30b8\u30f3\u3067\u3059\u3002\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u5fc5\u8981\u306a\u30c7\u30fc\u30bf\u306e\u5f62\u72b6\u3092\u6307\u5b9a\u3067\u304d\u3001Over-fetching \u3084 Under-fetching \u3092\u9632\u304e\u307e\u3059\u3002</p> <p></p> <p>REST API / gRPC \u3068\u306e\u6bd4\u8f03\uff1a</p> \u7279\u5fb4 REST API gRPC GraphQL \u30d7\u30ed\u30c8\u30b3\u30eb HTTP/1.1 HTTP/2 HTTP/1.1 or HTTP/2 \u30c7\u30fc\u30bf\u5f62\u5f0f JSON Protocol Buffers JSON \u30b9\u30ad\u30fc\u30de OpenAPI (\u4efb\u610f) .proto (\u5fc5\u9808) .graphqls (\u5fc5\u9808) \u30c7\u30fc\u30bf\u53d6\u5f97 \u56fa\u5b9a\u30ec\u30b9\u30dd\u30f3\u30b9 \u56fa\u5b9a\u30ec\u30b9\u30dd\u30f3\u30b9 \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u6307\u5b9a \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 \u8907\u6570 \u8907\u6570 \u5358\u4e00 \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0 WebSocket \u5225\u5b9f\u88c5 \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 Subscription \u4e3b\u306a\u7528\u9014 \u6c4e\u7528 API \u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9 \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u5411\u3051"},{"location":"article/study/study4-4/#462-3","title":"46.2 3\u3064\u306e\u64cd\u4f5c\u30bf\u30a4\u30d7","text":"<p>GraphQL \u306f 3 \u3064\u306e\u64cd\u4f5c\u30bf\u30a4\u30d7\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u307e\u3059\uff1a</p> <p></p> <p>\u7528\u9014\uff1a</p> <ol> <li>Query: \u30c7\u30fc\u30bf\u53d6\u5f97\uff08\u54c1\u76ee\u4e00\u89a7\u3001BOM \u5c55\u958b\uff09</li> <li>Mutation: \u30c7\u30fc\u30bf\u66f4\u65b0\uff08\u54c1\u76ee\u767b\u9332\u3001\u767a\u6ce8\u78ba\u5b9a\uff09</li> <li>Subscription: \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u901a\u77e5\uff08MRP \u9032\u6357\u3001\u5728\u5eab\u5909\u52d5\uff09</li> </ol>"},{"location":"article/study/study4-4/#463-graphql","title":"46.3 GraphQL \u306b\u304a\u3051\u308b\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":"<p>GraphQL \u3092\u5c0e\u5165\u3057\u3066\u3082\u3001\u7b2c32\u7ae0\u3067\u69cb\u7bc9\u3057\u305f\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u30c9\u30e1\u30a4\u30f3\u5c64\u30fb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff09\u306f\u305d\u306e\u307e\u307e\u5171\u6709\u3057\u3001Input Adapter \u3068\u3057\u3066 GraphQL \u30ea\u30be\u30eb\u30d0\u5c64\u306e\u307f\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> <p></p> <p>GraphQL \u3067\u3082\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u7dad\u6301\u3059\u308b\u7406\u7531\uff1a</p> <ol> <li>\u518d\u5229\u7528\u6027: \u65e2\u5b58\u306e UseCase/Repository \u3092\u305d\u306e\u307e\u307e\u6d3b\u7528</li> <li>\u4e26\u884c\u904b\u7528: REST API\u3001gRPC\u3001GraphQL \u3092\u540c\u6642\u63d0\u4f9b\u53ef\u80fd</li> <li>\u30c6\u30b9\u30c8\u5bb9\u6613\u6027: \u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\u306f\u901a\u4fe1\u30d7\u30ed\u30c8\u30b3\u30eb\u306b\u4f9d\u5b58\u3057\u306a\u3044</li> <li>\u79fb\u884c\u5bb9\u6613\u6027: \u6bb5\u968e\u7684\u306b API \u5f62\u5f0f\u3092\u8ffd\u52a0\u30fb\u5909\u66f4\u53ef\u80fd</li> </ol>"},{"location":"article/study/study4-4/#464","title":"46.4 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210","text":"<p>\u65e2\u5b58\u306e\u69cb\u6210\u306b <code>infrastructure/graphql/</code> \u3092\u8ffd\u52a0\u3059\u308b\u3060\u3051\u3067\u3059\u3002</p> <pre><code>src/main/java/com/example/production/\n\u251c\u2500\u2500 domain/                     # \u30c9\u30e1\u30a4\u30f3\u5c64\uff08API\u7248\u3068\u5171\u901a\uff09\n\u2502   \u251c\u2500\u2500 model/\n\u2502   \u2502   \u251c\u2500\u2500 item/\n\u2502   \u2502   \u251c\u2500\u2500 bom/\n\u2502   \u2502   \u251c\u2500\u2500 order/\n\u2502   \u2502   \u2514\u2500\u2500 inventory/\n\u2502   \u2514\u2500\u2500 exception/\n\u2502\n\u251c\u2500\u2500 application/               # \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\uff08API\u7248\u3068\u5171\u901a\uff09\n\u2502   \u251c\u2500\u2500 port/\n\u2502   \u2502   \u251c\u2500\u2500 in/               # Input Port\uff08\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\uff09\n\u2502   \u2502   \u2514\u2500\u2500 out/              # Output Port\uff08\u30ea\u30dd\u30b8\u30c8\u30ea\uff09\n\u2502   \u2514\u2500\u2500 service/\n\u2502\n\u251c\u2500\u2500 infrastructure/\n\u2502   \u251c\u2500\u2500 persistence/          # Output Adapter\uff08DB\u5b9f\u88c5\uff09- \u65e2\u5b58\n\u2502   \u2502   \u251c\u2500\u2500 mapper/\n\u2502   \u2502   \u2514\u2500\u2500 repository/\n\u2502   \u251c\u2500\u2500 rest/                 # Input Adapter\uff08REST\u5b9f\u88c5\uff09- \u65e2\u5b58\n\u2502   \u251c\u2500\u2500 grpc/                 # Input Adapter\uff08gRPC\u5b9f\u88c5\uff09- \u65e2\u5b58\n\u2502   \u2514\u2500\u2500 graphql/              # Input Adapter\uff08GraphQL\u5b9f\u88c5\uff09- \u65b0\u898f\u8ffd\u52a0\n\u2502       \u251c\u2500\u2500 resolver/         # Query/Mutation \u30ea\u30be\u30eb\u30d0\n\u2502       \u251c\u2500\u2500 dataloader/       # N+1 \u554f\u984c\u5bfe\u7b56\n\u2502       \u251c\u2500\u2500 scalar/           # \u30ab\u30b9\u30bf\u30e0\u30b9\u30ab\u30e9\u30fc\u578b\n\u2502       \u2514\u2500\u2500 subscription/     # Subscription \u30cf\u30f3\u30c9\u30e9\n\u2502\n\u251c\u2500\u2500 config/\n\u2502\n\u2514\u2500\u2500 src/main/resources/\n    \u2514\u2500\u2500 graphql/              # GraphQL \u30b9\u30ad\u30fc\u30de\u5b9a\u7fa9\n        \u251c\u2500\u2500 schema.graphqls\n        \u251c\u2500\u2500 item.graphqls\n        \u251c\u2500\u2500 bom.graphqls\n        \u251c\u2500\u2500 purchase_order.graphqls\n        \u2514\u2500\u2500 mrp.graphqls\n</code></pre>"},{"location":"article/study/study4-4/#465","title":"46.5 \u6280\u8853\u30b9\u30bf\u30c3\u30af\u306e\u8ffd\u52a0","text":"<p>\u65e2\u5b58\u306e <code>build.gradle.kts</code> \u306b GraphQL \u95a2\u9023\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> build.gradle.kts\uff08\u5dee\u5206\uff09 <pre><code>dependencies {\n    // \u65e2\u5b58\u306e\u4f9d\u5b58\u95a2\u4fc2\uff08Spring Boot, MyBatis, PostgreSQL\u7b49\uff09\u306f\u305d\u306e\u307e\u307e\n\n    // GraphQL \u95a2\u9023\u3092\u8ffd\u52a0\n    implementation(\"org.springframework.boot:spring-boot-starter-graphql\")\n    implementation(\"org.springframework.boot:spring-boot-starter-websocket\")  // Subscription \u7528\n\n    // GraphQL \u62e1\u5f35\n    implementation(\"com.graphql-java:graphql-java-extended-scalars:21.0\")\n\n    // Test\n    testImplementation(\"org.springframework.graphql:spring-graphql-test\")\n}\n</code></pre> <p>\u8ffd\u52a0\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u8aac\u660e\uff1a</p> \u30d1\u30c3\u30b1\u30fc\u30b8 \u7528\u9014 spring-boot-starter-graphql Spring Boot GraphQL \u7d71\u5408 spring-boot-starter-websocket Subscription (WebSocket) graphql-java-extended-scalars DateTime, BigDecimal \u7b49\u306e\u30b9\u30ab\u30e9\u30fc\u578b spring-graphql-test GraphQL \u30c6\u30b9\u30c8\u30b5\u30dd\u30fc\u30c8"},{"location":"article/study/study4-4/#426-graphql","title":"42.6 GraphQL \u30b9\u30ad\u30fc\u30de\u5b9a\u7fa9","text":"src/main/resources/graphql/schema.graphqls <pre><code># \u30eb\u30fc\u30c8\u30b9\u30ad\u30fc\u30de\ntype Query {\n    # \u54c1\u76ee\n    item(itemCode: ID!): Item\n    items(category: ItemCategory, page: Int, size: Int): ItemConnection!\n\n    # BOM\n    bomTree(itemCode: ID!): BomNode\n    whereUsed(itemCode: ID!): [WhereUsedResult!]!\n\n    # \u767a\u6ce8\n    purchaseOrder(orderNumber: ID!): PurchaseOrder\n    purchaseOrders(status: OrderStatus, page: Int, size: Int): PurchaseOrderConnection!\n}\n\ntype Mutation {\n    # \u54c1\u76ee\n    createItem(input: CreateItemInput!): Item!\n    updateItem(input: UpdateItemInput!): Item!\n    deleteItem(itemCode: ID!): Boolean!\n\n    # \u767a\u6ce8\n    createPurchaseOrder(input: CreatePurchaseOrderInput!): PurchaseOrder!\n    confirmPurchaseOrder(orderNumber: ID!): PurchaseOrder!\n    cancelPurchaseOrder(orderNumber: ID!): Boolean!\n    recordReceiving(input: RecordReceivingInput!): ReceivingResult!\n\n    # MRP\n    executeMrp(input: ExecuteMrpInput!): MrpResult!\n}\n\ntype Subscription {\n    # MRP \u9032\u6357\n    mrpProgress(executionId: ID!): MrpProgress!\n\n    # \u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\u5909\u66f4\n    orderStatusChanged(orderNumber: ID): PurchaseOrder!\n\n    # \u5728\u5eab\u5909\u52d5\n    stockChanged(itemCode: ID): StockChange!\n}\n\n# \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\ntype PageInfo {\n    hasNextPage: Boolean!\n    hasPreviousPage: Boolean!\n    totalElements: Int!\n    totalPages: Int!\n}\n</code></pre> src/main/resources/graphql/item.graphqls <pre><code># \u54c1\u76ee\u533a\u5206\nenum ItemCategory {\n    PRODUCT      # \u88fd\u54c1\n    SEMI_PRODUCT # \u534a\u88fd\u54c1\n    PART         # \u90e8\u54c1\n    MATERIAL     # \u6750\u6599\n}\n\n# \u54c1\u76ee\ntype Item {\n    itemCode: ID!\n    effectiveDate: Date!\n    itemName: String!\n    category: ItemCategory!\n    itemGroupCode: String\n    unitCode: String\n    locationCode: String\n    leadTime: Int\n    safetyStock: Int\n\n    # \u95a2\u9023\u30c7\u30fc\u30bf\uff08\u5fc5\u8981\u306a\u5834\u5408\u306e\u307f\u53d6\u5f97\uff09\n    bom: [BomEntry!]!\n    stock: Stock\n    purchaseOrders: [PurchaseOrder!]!\n}\n\n# \u54c1\u76ee\u4e00\u89a7\uff08\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u4ed8\u304d\uff09\ntype ItemConnection {\n    edges: [ItemEdge!]!\n    pageInfo: PageInfo!\n}\n\ntype ItemEdge {\n    node: Item!\n    cursor: String!\n}\n\n# \u5165\u529b\u578b\ninput CreateItemInput {\n    itemCode: ID!\n    itemName: String!\n    category: ItemCategory!\n    itemGroupCode: String\n    unitCode: String\n    locationCode: String\n    leadTime: Int\n    safetyStock: Int\n}\n\ninput UpdateItemInput {\n    itemCode: ID!\n    itemName: String\n    category: ItemCategory\n    leadTime: Int\n    safetyStock: Int\n}\n\n# \u30ab\u30b9\u30bf\u30e0\u30b9\u30ab\u30e9\u30fc\nscalar Date\nscalar DateTime\nscalar BigDecimal\n</code></pre> src/main/resources/graphql/bom.graphqls <pre><code># BOM \u30a8\u30f3\u30c8\u30ea\ntype BomEntry {\n    parentItemCode: ID!\n    childItemCode: ID!\n    requiredQuantity: BigDecimal!\n    effectiveFrom: Date!\n    effectiveTo: Date\n\n    # \u5b50\u54c1\u76ee\u306e\u8a73\u7d30\n    childItem: Item!\n}\n\n# BOM \u30c4\u30ea\u30fc\u30ce\u30fc\u30c9\ntype BomNode {\n    itemCode: ID!\n    itemName: String!\n    requiredQuantity: BigDecimal!\n    level: Int!\n    children: [BomNode!]!\n}\n\n# \u9006\u5c55\u958b\uff08\u4f7f\u7528\u5148\u7167\u4f1a\uff09\ntype WhereUsedResult {\n    parentItemCode: ID!\n    itemName: String!\n    requiredQuantity: BigDecimal!\n    level: Int!\n}\n</code></pre> src/main/resources/graphql/purchase_order.graphqls <pre><code># \u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\nenum OrderStatus {\n    DRAFT\n    CONFIRMED\n    CANCELLED\n    COMPLETED\n}\n\n# \u767a\u6ce8\ntype PurchaseOrder {\n    orderNumber: ID!\n    supplierCode: String!\n    orderDate: Date!\n    status: OrderStatus!\n    totalAmount: BigDecimal!\n    details: [PurchaseOrderDetail!]!\n\n    # \u95a2\u9023\u30c7\u30fc\u30bf\n    supplier: Supplier\n}\n\ntype PurchaseOrderDetail {\n    lineNumber: Int!\n    itemCode: ID!\n    orderQuantity: BigDecimal!\n    unitPrice: BigDecimal!\n    deliveryDate: Date!\n    receivedQuantity: BigDecimal!\n\n    # \u95a2\u9023\u30c7\u30fc\u30bf\n    item: Item!\n}\n\ntype PurchaseOrderConnection {\n    edges: [PurchaseOrderEdge!]!\n    pageInfo: PageInfo!\n}\n\ntype PurchaseOrderEdge {\n    node: PurchaseOrder!\n    cursor: String!\n}\n\n# \u5165\u529b\u578b\ninput CreatePurchaseOrderInput {\n    supplierCode: String!\n    details: [CreateOrderDetailInput!]!\n}\n\ninput CreateOrderDetailInput {\n    itemCode: ID!\n    orderQuantity: BigDecimal!\n    unitPrice: BigDecimal!\n    deliveryDate: Date!\n}\n\ninput RecordReceivingInput {\n    orderNumber: ID!\n    lineNumber: Int!\n    receivedQuantity: BigDecimal!\n    receivingDate: Date!\n}\n\ntype ReceivingResult {\n    orderNumber: ID!\n    lineNumber: Int!\n    totalReceived: BigDecimal!\n    isCompleted: Boolean!\n}\n</code></pre> src/main/resources/graphql/mrp.graphqls <pre><code># MRP \u5165\u529b\ninput ExecuteMrpInput {\n    startDate: Date!\n    endDate: Date!\n}\n\n# MRP \u7d50\u679c\ntype MrpResult {\n    executionId: ID!\n    periodStart: Date!\n    periodEnd: Date!\n    plannedOrders: [PlannedOrder!]!\n    shortageItems: [ShortageItem!]!\n    statistics: MrpStatistics!\n}\n\ntype PlannedOrder {\n    itemCode: ID!\n    itemName: String!\n    quantity: BigDecimal!\n    dueDate: Date!\n    orderType: String!\n}\n\ntype ShortageItem {\n    itemCode: ID!\n    itemName: String!\n    shortageQuantity: BigDecimal!\n    recommendedOrderDate: Date!\n}\n\ntype MrpStatistics {\n    totalItemsProcessed: Int!\n    purchaseOrderCount: Int!\n    productionOrderCount: Int!\n    shortageItemCount: Int!\n    executionTimeMs: Long!\n}\n\n# MRP \u9032\u6357\uff08Subscription\uff09\ntype MrpProgress {\n    executionId: ID!\n    phase: String!\n    current: Int!\n    total: Int!\n    message: String!\n}\n\nscalar Long\n</code></pre>"},{"location":"article/study/study4-4/#427-api-controller","title":"42.7 API \u30b5\u30fc\u30d0\u30fc\u7248\u3068\u306e Controller \u306e\u9055\u3044","text":"<p>API \u30b5\u30fc\u30d0\u30fc\u7248\uff08REST Controller\uff09</p> <pre><code>@RestController  // JSON \u3092\u8fd4\u3059\n@RequestMapping(\"/api/items\")\npublic class ItemApiController {\n\n    private final ItemUseCase itemUseCase;  // \u5171\u6709\n\n    @GetMapping(\"/{itemCode}\")\n    public ResponseEntity&lt;ItemResponse&gt; getItem(@PathVariable String itemCode) {\n        Item item = itemUseCase.getItemByCode(itemCode);\n        return ResponseEntity.ok(ItemResponse.from(item));\n    }\n}\n</code></pre> <p>GraphQL \u7248\uff08QueryResolver\uff09</p> <pre><code>@Controller  // Spring for GraphQL\npublic class ItemResolver {\n\n    private final ItemUseCase itemUseCase;  // \u5171\u6709\uff08\u540c\u3058\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\uff09\n\n    @QueryMapping\n    public Item item(@Argument String itemCode) {\n        // \u540c\u3058 UseCase \u3092\u547c\u3073\u51fa\u3057\n        return itemUseCase.getItemByCode(itemCode);\n    }\n}\n</code></pre> <p>\u5171\u901a\u70b9\u3068\u76f8\u9055\u70b9\uff1a</p> \u89b3\u70b9 REST Controller GraphQL Resolver UseCase \u5171\u6709\uff08\u540c\u4e00\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\uff09 \u5171\u6709\uff08\u540c\u4e00\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\uff09 \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3 <code>@RestController</code> <code>@Controller</code> \u30e1\u30bd\u30c3\u30c9 <code>@GetMapping</code> \u7b49 <code>@QueryMapping</code> / <code>@MutationMapping</code> \u5f15\u6570 <code>@PathVariable</code> / <code>@RequestBody</code> <code>@Argument</code> \u30ec\u30b9\u30dd\u30f3\u30b9 DTO \u306b\u5909\u63db \u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\u76f4\u63a5\uff08\u63a8\u5968\uff09 \u30c7\u30fc\u30bf\u5f62\u5f0f \u56fa\u5b9a JSON \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u6307\u5b9a"},{"location":"article/study/study4-4/#47-api","title":"\u7b2c47\u7ae0\uff1a\u30de\u30b9\u30bf API \u306e\u5b9f\u88c5","text":""},{"location":"article/study/study4-4/#471","title":"47.1 \u30ab\u30b9\u30bf\u30e0\u30b9\u30ab\u30e9\u30fc\u306e\u5b9f\u88c5","text":"ScalarConfig.java <pre><code>package com.example.production.infrastructure.graphql.scalar;\n\nimport graphql.scalars.ExtendedScalars;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.graphql.execution.RuntimeWiringConfigurer;\n\n/**\n * \u30ab\u30b9\u30bf\u30e0\u30b9\u30ab\u30e9\u30fc\u8a2d\u5b9a\n */\n@Configuration\npublic class ScalarConfig {\n\n    @Bean\n    public RuntimeWiringConfigurer runtimeWiringConfigurer() {\n        return wiringBuilder -&gt; wiringBuilder\n            .scalar(ExtendedScalars.Date)\n            .scalar(ExtendedScalars.DateTime)\n            .scalar(ExtendedScalars.GraphQLBigDecimal)\n            .scalar(ExtendedScalars.GraphQLLong);\n    }\n}\n</code></pre>"},{"location":"article/study/study4-4/#472-graphql-tdd","title":"47.2 \u54c1\u76ee GraphQL \u30ea\u30be\u30eb\u30d0\u306e TDD \u5b9f\u88c5","text":""},{"location":"article/study/study4-4/#red","title":"Red: \u5931\u6557\u3059\u308b\u30c6\u30b9\u30c8\u3092\u66f8\u304f","text":"ItemResolverTest.java <pre><code>package com.example.production.infrastructure.graphql.resolver;\n\nimport com.example.production.domain.model.item.Item;\nimport com.example.production.domain.model.item.ItemCategory;\nimport com.example.production.infrastructure.persistence.mapper.ItemMapper;\nimport org.junit.jupiter.api.*;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.graphql.tester.AutoConfigureGraphQlTester;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.graphql.test.tester.GraphQlTester;\nimport org.springframework.test.context.DynamicPropertyRegistry;\nimport org.springframework.test.context.DynamicPropertySource;\nimport org.testcontainers.containers.PostgreSQLContainer;\nimport org.testcontainers.junit.jupiter.Container;\nimport org.testcontainers.junit.jupiter.Testcontainers;\n\nimport java.time.LocalDate;\n\nimport static org.assertj.core.api.Assertions.*;\n\n@SpringBootTest\n@AutoConfigureGraphQlTester\n@Testcontainers\n@DisplayName(\"\u54c1\u76ee GraphQL \u30ea\u30be\u30eb\u30d0\")\nclass ItemResolverTest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:16\")\n        .withDatabaseName(\"production_test\")\n        .withUsername(\"test\")\n        .withPassword(\"test\");\n\n    @DynamicPropertySource\n    static void configureProperties(DynamicPropertyRegistry registry) {\n        registry.add(\"spring.datasource.url\", postgres::getJdbcUrl);\n        registry.add(\"spring.datasource.username\", postgres::getUsername);\n        registry.add(\"spring.datasource.password\", postgres::getPassword);\n    }\n\n    @Autowired\n    private GraphQlTester graphQlTester;\n\n    @Autowired\n    private ItemMapper itemMapper;\n\n    @BeforeEach\n    void setUp() {\n        itemMapper.deleteAll();\n    }\n\n    @Nested\n    @DisplayName(\"Query: item\")\n    class ItemQueryTests {\n\n        @Test\n        @DisplayName(\"\u54c1\u76ee\u30b3\u30fc\u30c9\u3067\u54c1\u76ee\u3092\u53d6\u5f97\u3067\u304d\u308b\")\n        void shouldGetItemByCode() {\n            // Arrange\n            insertTestItem(\"PROD-001\", \"\u30c6\u30b9\u30c8\u88fd\u54c1\", ItemCategory.PRODUCT);\n\n            // Act &amp; Assert\n            graphQlTester.document(\"\"\"\n                    query {\n                        item(itemCode: \"PROD-001\") {\n                            itemCode\n                            itemName\n                            category\n                        }\n                    }\n                    \"\"\")\n                .execute()\n                .path(\"item.itemCode\").entity(String.class).isEqualTo(\"PROD-001\")\n                .path(\"item.itemName\").entity(String.class).isEqualTo(\"\u30c6\u30b9\u30c8\u88fd\u54c1\")\n                .path(\"item.category\").entity(String.class).isEqualTo(\"PRODUCT\");\n        }\n\n        @Test\n        @DisplayName(\"\u5b58\u5728\u3057\u306a\u3044\u54c1\u76ee\u306f null \u3092\u8fd4\u3059\")\n        void shouldReturnNullForNonExistentItem() {\n            graphQlTester.document(\"\"\"\n                    query {\n                        item(itemCode: \"NOT-EXIST\") {\n                            itemCode\n                        }\n                    }\n                    \"\"\")\n                .execute()\n                .path(\"item\").valueIsNull();\n        }\n\n        @Test\n        @DisplayName(\"\u95a2\u9023\u30c7\u30fc\u30bf\u3092\u540c\u6642\u306b\u53d6\u5f97\u3067\u304d\u308b\")\n        void shouldGetItemWithRelatedData() {\n            insertTestItem(\"PROD-001\", \"\u30c6\u30b9\u30c8\u88fd\u54c1\", ItemCategory.PRODUCT);\n\n            graphQlTester.document(\"\"\"\n                    query {\n                        item(itemCode: \"PROD-001\") {\n                            itemCode\n                            itemName\n                            bom {\n                                childItemCode\n                                requiredQuantity\n                            }\n                            stock {\n                                quantity\n                            }\n                        }\n                    }\n                    \"\"\")\n                .execute()\n                .path(\"item.itemCode\").entity(String.class).isEqualTo(\"PROD-001\")\n                .path(\"item.bom\").entityList(Object.class).hasSize(0);\n        }\n    }\n\n    @Nested\n    @DisplayName(\"Query: items\")\n    class ItemsQueryTests {\n\n        @Test\n        @DisplayName(\"\u54c1\u76ee\u4e00\u89a7\u3092\u53d6\u5f97\u3067\u304d\u308b\")\n        void shouldGetItems() {\n            for (int i = 1; i &lt;= 5; i++) {\n                insertTestItem(\"ITEM-\" + String.format(\"%03d\", i),\n                    \"\u54c1\u76ee\" + i, ItemCategory.PRODUCT);\n            }\n\n            graphQlTester.document(\"\"\"\n                    query {\n                        items(page: 0, size: 10) {\n                            edges {\n                                node {\n                                    itemCode\n                                    itemName\n                                }\n                            }\n                            pageInfo {\n                                totalElements\n                            }\n                        }\n                    }\n                    \"\"\")\n                .execute()\n                .path(\"items.edges\").entityList(Object.class).hasSize(5)\n                .path(\"items.pageInfo.totalElements\").entity(Integer.class).isEqualTo(5);\n        }\n\n        @Test\n        @DisplayName(\"\u30ab\u30c6\u30b4\u30ea\u3067\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3067\u304d\u308b\")\n        void shouldFilterByCategory() {\n            insertTestItem(\"PROD-001\", \"\u88fd\u54c11\", ItemCategory.PRODUCT);\n            insertTestItem(\"PART-001\", \"\u90e8\u54c11\", ItemCategory.PART);\n            insertTestItem(\"PROD-002\", \"\u88fd\u54c12\", ItemCategory.PRODUCT);\n\n            graphQlTester.document(\"\"\"\n                    query {\n                        items(category: PRODUCT, page: 0, size: 10) {\n                            edges {\n                                node {\n                                    itemCode\n                                }\n                            }\n                            pageInfo {\n                                totalElements\n                            }\n                        }\n                    }\n                    \"\"\")\n                .execute()\n                .path(\"items.pageInfo.totalElements\").entity(Integer.class).isEqualTo(2);\n        }\n    }\n\n    @Nested\n    @DisplayName(\"Mutation: createItem\")\n    class CreateItemMutationTests {\n\n        @Test\n        @DisplayName(\"\u54c1\u76ee\u3092\u767b\u9332\u3067\u304d\u308b\")\n        void shouldCreateItem() {\n            graphQlTester.document(\"\"\"\n                    mutation {\n                        createItem(input: {\n                            itemCode: \"NEW-001\"\n                            itemName: \"\u65b0\u898f\u54c1\u76ee\"\n                            category: PRODUCT\n                            leadTime: 5\n                        }) {\n                            itemCode\n                            itemName\n                            category\n                            leadTime\n                        }\n                    }\n                    \"\"\")\n                .execute()\n                .path(\"createItem.itemCode\").entity(String.class).isEqualTo(\"NEW-001\")\n                .path(\"createItem.itemName\").entity(String.class).isEqualTo(\"\u65b0\u898f\u54c1\u76ee\")\n                .path(\"createItem.category\").entity(String.class).isEqualTo(\"PRODUCT\")\n                .path(\"createItem.leadTime\").entity(Integer.class).isEqualTo(5);\n\n            // DB \u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\n            var saved = itemMapper.findByCode(\"NEW-001\");\n            assertThat(saved).isNotNull();\n            assertThat(saved.getItemName()).isEqualTo(\"\u65b0\u898f\u54c1\u76ee\");\n        }\n\n        @Test\n        @DisplayName(\"\u91cd\u8907\u3059\u308b\u54c1\u76ee\u30b3\u30fc\u30c9\u306f\u30a8\u30e9\u30fc\u306b\u306a\u308b\")\n        void shouldFailForDuplicateCode() {\n            insertTestItem(\"DUP-001\", \"\u65e2\u5b58\u54c1\u76ee\", ItemCategory.PRODUCT);\n\n            graphQlTester.document(\"\"\"\n                    mutation {\n                        createItem(input: {\n                            itemCode: \"DUP-001\"\n                            itemName: \"\u91cd\u8907\u54c1\u76ee\"\n                            category: PRODUCT\n                        }) {\n                            itemCode\n                        }\n                    }\n                    \"\"\")\n                .execute()\n                .errors()\n                .satisfy(errors -&gt; assertThat(errors).hasSize(1));\n        }\n    }\n\n    private void insertTestItem(String code, String name, ItemCategory category) {\n        itemMapper.insert(Item.builder()\n            .itemCode(code)\n            .effectiveDate(LocalDate.of(2025, 1, 1))\n            .itemName(name)\n            .category(category)\n            .build());\n    }\n}\n</code></pre>"},{"location":"article/study/study4-4/#green-graphql","title":"Green: GraphQL \u30ea\u30be\u30eb\u30d0\u306e\u5b9f\u88c5","text":"ItemResolver.java <pre><code>package com.example.production.infrastructure.graphql.resolver;\n\nimport com.example.production.application.port.in.*;\nimport com.example.production.domain.exception.DuplicateItemException;\nimport com.example.production.domain.exception.ItemNotFoundException;\nimport com.example.production.domain.model.item.Item;\nimport com.example.production.domain.model.item.ItemCategory;\nimport graphql.GraphQLError;\nimport graphql.GraphqlErrorBuilder;\nimport graphql.schema.DataFetchingEnvironment;\nimport org.springframework.graphql.data.method.annotation.*;\nimport org.springframework.graphql.execution.ErrorType;\nimport org.springframework.stereotype.Controller;\n\nimport java.util.List;\n\n/**\n * \u54c1\u76ee GraphQL \u30ea\u30be\u30eb\u30d0\u5b9f\u88c5\n * \u65e2\u5b58\u306e ItemUseCase \u3092 Input Adapter \u3068\u3057\u3066\u547c\u3073\u51fa\u3059\n */\n@Controller\npublic class ItemResolver {\n\n    private final ItemUseCase itemUseCase;  // \u65e2\u5b58\u306e UseCase \u3092\u6ce8\u5165\n\n    public ItemResolver(ItemUseCase itemUseCase) {\n        this.itemUseCase = itemUseCase;\n    }\n\n    // ========== Query ==========\n\n    /**\n     * \u54c1\u76ee\u53d6\u5f97\n     */\n    @QueryMapping\n    public Item item(@Argument String itemCode) {\n        try {\n            return itemUseCase.getItemByCode(itemCode);\n        } catch (ItemNotFoundException e) {\n            return null;  // GraphQL \u3067\u306f null \u3092\u8fd4\u3059\n        }\n    }\n\n    /**\n     * \u54c1\u76ee\u4e00\u89a7\uff08\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u4ed8\u304d\uff09\n     */\n    @QueryMapping\n    public ItemConnection items(\n            @Argument ItemCategory category,\n            @Argument Integer page,\n            @Argument Integer size) {\n\n        int pageNum = page != null ? page : 0;\n        int pageSize = size != null ? size : 20;\n\n        List&lt;Item&gt; items;\n        int totalElements;\n\n        if (category != null) {\n            items = itemUseCase.getItemsByCategory(category);\n        } else {\n            items = itemUseCase.getAllItems();\n        }\n\n        totalElements = items.size();\n\n        // \u30da\u30fc\u30b8\u30f3\u30b0\u51e6\u7406\n        int start = pageNum * pageSize;\n        int end = Math.min(start + pageSize, items.size());\n        List&lt;Item&gt; pagedItems = items.subList(start, end);\n\n        return ItemConnection.builder()\n            .edges(pagedItems.stream()\n                .map(item -&gt; ItemEdge.builder()\n                    .node(item)\n                    .cursor(item.getItemCode())\n                    .build())\n                .toList())\n            .pageInfo(PageInfo.builder()\n                .hasNextPage(end &lt; totalElements)\n                .hasPreviousPage(pageNum &gt; 0)\n                .totalElements(totalElements)\n                .totalPages((int) Math.ceil((double) totalElements / pageSize))\n                .build())\n            .build();\n    }\n\n    // ========== Mutation ==========\n\n    /**\n     * \u54c1\u76ee\u767b\u9332\n     */\n    @MutationMapping\n    public Item createItem(@Argument CreateItemInput input) {\n        CreateItemCommand command = CreateItemCommand.builder()\n            .itemCode(input.getItemCode())\n            .itemName(input.getItemName())\n            .category(input.getCategory())\n            .itemGroupCode(input.getItemGroupCode())\n            .unitCode(input.getUnitCode())\n            .locationCode(input.getLocationCode())\n            .leadTime(input.getLeadTime())\n            .safetyStock(input.getSafetyStock())\n            .build();\n\n        return itemUseCase.createItem(command);\n    }\n\n    /**\n     * \u54c1\u76ee\u66f4\u65b0\n     */\n    @MutationMapping\n    public Item updateItem(@Argument UpdateItemInput input) {\n        UpdateItemCommand command = UpdateItemCommand.builder()\n            .itemCode(input.getItemCode())\n            .itemName(input.getItemName())\n            .category(input.getCategory())\n            .leadTime(input.getLeadTime())\n            .safetyStock(input.getSafetyStock())\n            .build();\n\n        return itemUseCase.updateItem(command);\n    }\n\n    /**\n     * \u54c1\u76ee\u524a\u9664\n     */\n    @MutationMapping\n    public boolean deleteItem(@Argument String itemCode) {\n        try {\n            itemUseCase.deleteItem(itemCode);\n            return true;\n        } catch (ItemNotFoundException e) {\n            return false;\n        }\n    }\n\n    // ========== \u4f8b\u5916\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0 ==========\n\n    @GraphQlExceptionHandler\n    public GraphQLError handleDuplicateItem(DuplicateItemException ex, DataFetchingEnvironment env) {\n        return GraphqlErrorBuilder.newError(env)\n            .errorType(ErrorType.BAD_REQUEST)\n            .message(ex.getMessage())\n            .build();\n    }\n\n    @GraphQlExceptionHandler\n    public GraphQLError handleItemNotFound(ItemNotFoundException ex, DataFetchingEnvironment env) {\n        return GraphqlErrorBuilder.newError(env)\n            .errorType(ErrorType.NOT_FOUND)\n            .message(ex.getMessage())\n            .build();\n    }\n}\n</code></pre> \u88dc\u52a9\u30af\u30e9\u30b9\uff08ItemConnection, PageInfo \u7b49\uff09 <pre><code>package com.example.production.infrastructure.graphql.resolver;\n\nimport com.example.production.domain.model.item.Item;\nimport com.example.production.domain.model.item.ItemCategory;\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.util.List;\n\n@Data\n@Builder\npublic class ItemConnection {\n    private List&lt;ItemEdge&gt; edges;\n    private PageInfo pageInfo;\n}\n\n@Data\n@Builder\npublic class ItemEdge {\n    private Item node;\n    private String cursor;\n}\n\n@Data\n@Builder\npublic class PageInfo {\n    private boolean hasNextPage;\n    private boolean hasPreviousPage;\n    private int totalElements;\n    private int totalPages;\n}\n\n@Data\npublic class CreateItemInput {\n    private String itemCode;\n    private String itemName;\n    private ItemCategory category;\n    private String itemGroupCode;\n    private String unitCode;\n    private String locationCode;\n    private Integer leadTime;\n    private Integer safetyStock;\n}\n\n@Data\npublic class UpdateItemInput {\n    private String itemCode;\n    private String itemName;\n    private ItemCategory category;\n    private Integer leadTime;\n    private Integer safetyStock;\n}\n</code></pre>"},{"location":"article/study/study4-4/#473-n1-dataloader","title":"47.3 N+1 \u554f\u984c\u5bfe\u7b56\uff08DataLoader\uff09","text":"<p>GraphQL \u3067\u306f\u95a2\u9023\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\u6642\u306b N+1 \u554f\u984c\u304c\u767a\u751f\u3057\u3084\u3059\u3044\u305f\u3081\u3001DataLoader \u3092\u4f7f\u7528\u3057\u307e\u3059\u3002</p> DataLoaderConfig.java <pre><code>package com.example.production.infrastructure.graphql.dataloader;\n\nimport com.example.production.application.port.in.ItemUseCase;\nimport com.example.production.domain.model.item.Item;\nimport org.dataloader.DataLoader;\nimport org.dataloader.DataLoaderFactory;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.graphql.execution.BatchLoaderRegistry;\n\nimport java.util.List;\nimport java.util.Map;\nimport java.util.function.Function;\nimport java.util.stream.Collectors;\n\n/**\n * DataLoader \u8a2d\u5b9a\n * N+1 \u554f\u984c\u3092\u89e3\u6c7a\u3059\u308b\u305f\u3081\u306e\u30d0\u30c3\u30c1\u30ed\u30fc\u30c7\u30a3\u30f3\u30b0\n */\n@Configuration\npublic class DataLoaderConfig {\n\n    private final ItemUseCase itemUseCase;\n\n    public DataLoaderConfig(ItemUseCase itemUseCase) {\n        this.itemUseCase = itemUseCase;\n    }\n\n    @Bean\n    public BatchLoaderRegistry batchLoaderRegistry(BatchLoaderRegistry registry) {\n        // \u54c1\u76ee DataLoader\n        registry.forTypePair(String.class, Item.class)\n            .registerBatchLoader((itemCodes, env) -&gt; {\n                // \u30d0\u30c3\u30c1\u3067\u54c1\u76ee\u3092\u53d6\u5f97\uff081\u56de\u306e\u30af\u30a8\u30ea\u3067\u8907\u6570\u53d6\u5f97\uff09\n                List&lt;Item&gt; items = itemUseCase.getItemsByCodes(itemCodes);\n\n                Map&lt;String, Item&gt; itemMap = items.stream()\n                    .collect(Collectors.toMap(Item::getItemCode, Function.identity()));\n\n                return reactor.core.publisher.Flux.fromIterable(itemCodes)\n                    .map(code -&gt; itemMap.get(code));\n            });\n\n        return registry;\n    }\n}\n</code></pre> PurchaseOrderDetailResolver.java\uff08DataLoader \u4f7f\u7528\uff09 <pre><code>package com.example.production.infrastructure.graphql.resolver;\n\nimport com.example.production.domain.model.item.Item;\nimport com.example.production.domain.model.purchase.PurchaseOrderDetail;\nimport org.dataloader.DataLoader;\nimport org.springframework.graphql.data.method.annotation.SchemaMapping;\nimport org.springframework.stereotype.Controller;\n\nimport java.util.concurrent.CompletableFuture;\n\n/**\n * \u767a\u6ce8\u660e\u7d30\u30ea\u30be\u30eb\u30d0\n * DataLoader \u3092\u4f7f\u3063\u3066\u54c1\u76ee\u3092\u52b9\u7387\u7684\u306b\u53d6\u5f97\n */\n@Controller\npublic class PurchaseOrderDetailResolver {\n\n    /**\n     * \u767a\u6ce8\u660e\u7d30\u304b\u3089\u54c1\u76ee\u3092\u53d6\u5f97\uff08DataLoader \u4f7f\u7528\uff09\n     */\n    @SchemaMapping(typeName = \"PurchaseOrderDetail\", field = \"item\")\n    public CompletableFuture&lt;Item&gt; item(\n            PurchaseOrderDetail detail,\n            DataLoader&lt;String, Item&gt; itemDataLoader) {\n\n        // DataLoader \u7d4c\u7531\u3067\u53d6\u5f97\uff08\u30d0\u30c3\u30c1\u51e6\u7406\u3055\u308c\u308b\uff09\n        return itemDataLoader.load(detail.getItemCode());\n    }\n}\n</code></pre>"},{"location":"article/study/study4-4/#474-bom-graphql","title":"47.4 BOM GraphQL \u30ea\u30be\u30eb\u30d0","text":"BomResolver.java <pre><code>package com.example.production.infrastructure.graphql.resolver;\n\nimport com.example.production.application.service.BomNode;\nimport com.example.production.application.service.BomService;\nimport com.example.production.application.service.WhereUsedResult;\nimport org.springframework.graphql.data.method.annotation.Argument;\nimport org.springframework.graphql.data.method.annotation.QueryMapping;\nimport org.springframework.stereotype.Controller;\n\nimport java.util.List;\n\n/**\n * BOM GraphQL \u30ea\u30be\u30eb\u30d0\u5b9f\u88c5\n * \u65e2\u5b58\u306e BomService \u3092 Input Adapter \u3068\u3057\u3066\u547c\u3073\u51fa\u3059\n */\n@Controller\npublic class BomResolver {\n\n    private final BomService bomService;  // \u65e2\u5b58\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u6ce8\u5165\n\n    public BomResolver(BomService bomService) {\n        this.bomService = bomService;\n    }\n\n    /**\n     * \u90e8\u54c1\u5c55\u958b\uff08BOM \u30c4\u30ea\u30fc\uff09\n     */\n    @QueryMapping\n    public BomNode bomTree(@Argument String itemCode) {\n        return bomService.explodeBom(itemCode);\n    }\n\n    /**\n     * \u4f7f\u7528\u5148\u7167\u4f1a\n     */\n    @QueryMapping\n    public List&lt;WhereUsedResult&gt; whereUsed(@Argument String itemCode) {\n        return bomService.whereUsed(itemCode);\n    }\n}\n</code></pre>"},{"location":"article/study/study4-4/#48-api","title":"\u7b2c48\u7ae0\uff1a\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3 API \u306e\u5b9f\u88c5","text":""},{"location":"article/study/study4-4/#481-graphql","title":"48.1 \u767a\u6ce8 GraphQL \u30ea\u30be\u30eb\u30d0","text":"PurchaseOrderResolver.java <pre><code>package com.example.production.infrastructure.graphql.resolver;\n\nimport com.example.production.application.port.in.*;\nimport com.example.production.domain.model.purchase.PurchaseOrder;\nimport org.springframework.graphql.data.method.annotation.*;\nimport org.springframework.stereotype.Controller;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.util.List;\n\n/**\n * \u767a\u6ce8 GraphQL \u30ea\u30be\u30eb\u30d0\u5b9f\u88c5\n * \u65e2\u5b58\u306e PurchaseOrderUseCase \u3092 Input Adapter \u3068\u3057\u3066\u547c\u3073\u51fa\u3059\n */\n@Controller\npublic class PurchaseOrderResolver {\n\n    private final PurchaseOrderUseCase useCase;  // \u65e2\u5b58\u306e UseCase\n\n    public PurchaseOrderResolver(PurchaseOrderUseCase useCase) {\n        this.useCase = useCase;\n    }\n\n    // ========== Query ==========\n\n    @QueryMapping\n    public PurchaseOrder purchaseOrder(@Argument String orderNumber) {\n        return useCase.getOrder(orderNumber);\n    }\n\n    @QueryMapping\n    public PurchaseOrderConnection purchaseOrders(\n            @Argument String status,\n            @Argument Integer page,\n            @Argument Integer size) {\n\n        List&lt;PurchaseOrder&gt; orders = useCase.getAllOrders();\n\n        // \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u51e6\u7406\uff08\u7701\u7565\uff09\n        return PurchaseOrderConnection.builder()\n            .edges(orders.stream()\n                .map(order -&gt; PurchaseOrderEdge.builder()\n                    .node(order)\n                    .cursor(order.getOrderNumber())\n                    .build())\n                .toList())\n            .pageInfo(PageInfo.builder()\n                .totalElements(orders.size())\n                .build())\n            .build();\n    }\n\n    // ========== Mutation ==========\n\n    @MutationMapping\n    public PurchaseOrder createPurchaseOrder(@Argument CreatePurchaseOrderInput input) {\n        CreatePurchaseOrderCommand command = CreatePurchaseOrderCommand.builder()\n            .supplierCode(input.getSupplierCode())\n            .details(input.getDetails().stream()\n                .map(d -&gt; CreatePurchaseOrderCommand.PurchaseOrderDetailCommand.builder()\n                    .itemCode(d.getItemCode())\n                    .orderQuantity(d.getOrderQuantity())\n                    .unitPrice(d.getUnitPrice())\n                    .deliveryDate(d.getDeliveryDate())\n                    .build())\n                .toList())\n            .build();\n\n        return useCase.createOrder(command);\n    }\n\n    @MutationMapping\n    public PurchaseOrder confirmPurchaseOrder(@Argument String orderNumber) {\n        return useCase.confirmOrder(orderNumber);\n    }\n\n    @MutationMapping\n    public boolean cancelPurchaseOrder(@Argument String orderNumber) {\n        useCase.cancelOrder(orderNumber);\n        return true;\n    }\n\n    @MutationMapping\n    public ReceivingResult recordReceiving(@Argument RecordReceivingInput input) {\n        var result = useCase.recordReceiving(\n            input.getOrderNumber(),\n            input.getLineNumber(),\n            input.getReceivedQuantity(),\n            input.getReceivingDate()\n        );\n\n        return ReceivingResult.builder()\n            .orderNumber(input.getOrderNumber())\n            .lineNumber(input.getLineNumber())\n            .totalReceived(result.getTotalReceived())\n            .isCompleted(result.isCompleted())\n            .build();\n    }\n}\n\n// \u5165\u529b\u578b\n@lombok.Data\nclass CreatePurchaseOrderInput {\n    private String supplierCode;\n    private List&lt;CreateOrderDetailInput&gt; details;\n}\n\n@lombok.Data\nclass CreateOrderDetailInput {\n    private String itemCode;\n    private BigDecimal orderQuantity;\n    private BigDecimal unitPrice;\n    private LocalDate deliveryDate;\n}\n\n@lombok.Data\nclass RecordReceivingInput {\n    private String orderNumber;\n    private int lineNumber;\n    private BigDecimal receivedQuantity;\n    private LocalDate receivingDate;\n}\n\n@lombok.Data\n@lombok.Builder\nclass ReceivingResult {\n    private String orderNumber;\n    private int lineNumber;\n    private BigDecimal totalReceived;\n    private boolean isCompleted;\n}\n</code></pre>"},{"location":"article/study/study4-4/#482-mrp-graphql","title":"48.2 MRP GraphQL \u30ea\u30be\u30eb\u30d0","text":"MrpResolver.java <pre><code>package com.example.production.infrastructure.graphql.resolver;\n\nimport com.example.production.application.service.MrpService;\nimport org.springframework.graphql.data.method.annotation.*;\nimport org.springframework.stereotype.Controller;\n\nimport java.time.LocalDate;\nimport java.util.UUID;\n\n/**\n * MRP GraphQL \u30ea\u30be\u30eb\u30d0\u5b9f\u88c5\n * \u65e2\u5b58\u306e MrpService \u3092 Input Adapter \u3068\u3057\u3066\u547c\u3073\u51fa\u3059\n */\n@Controller\npublic class MrpResolver {\n\n    private final MrpService mrpService;  // \u65e2\u5b58\u306e\u30b5\u30fc\u30d3\u30b9\n\n    public MrpResolver(MrpService mrpService) {\n        this.mrpService = mrpService;\n    }\n\n    /**\n     * MRP \u5b9f\u884c\n     */\n    @MutationMapping\n    public MrpResult executeMrp(@Argument ExecuteMrpInput input) {\n        String executionId = UUID.randomUUID().toString();\n\n        long startTime = System.currentTimeMillis();\n        var result = mrpService.execute(input.getStartDate(), input.getEndDate());\n        long executionTime = System.currentTimeMillis() - startTime;\n\n        return MrpResult.builder()\n            .executionId(executionId)\n            .periodStart(input.getStartDate())\n            .periodEnd(input.getEndDate())\n            .plannedOrders(result.getPlannedOrders())\n            .shortageItems(result.getShortageItems())\n            .statistics(MrpStatistics.builder()\n                .totalItemsProcessed(result.getPlannedOrders().size())\n                .shortageItemCount(result.getShortageItems().size())\n                .executionTimeMs(executionTime)\n                .build())\n            .build();\n    }\n}\n\n@lombok.Data\nclass ExecuteMrpInput {\n    private LocalDate startDate;\n    private LocalDate endDate;\n}\n\n@lombok.Data\n@lombok.Builder\nclass MrpResult {\n    private String executionId;\n    private LocalDate periodStart;\n    private LocalDate periodEnd;\n    private java.util.List&lt;?&gt; plannedOrders;\n    private java.util.List&lt;?&gt; shortageItems;\n    private MrpStatistics statistics;\n}\n\n@lombok.Data\n@lombok.Builder\nclass MrpStatistics {\n    private int totalItemsProcessed;\n    private int purchaseOrderCount;\n    private int productionOrderCount;\n    private int shortageItemCount;\n    private long executionTimeMs;\n}\n</code></pre>"},{"location":"article/study/study4-4/#483-subscription","title":"48.3 Subscription\uff08\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u66f4\u65b0\uff09","text":"SubscriptionResolver.java <pre><code>package com.example.production.infrastructure.graphql.subscription;\n\nimport com.example.production.domain.model.purchase.PurchaseOrder;\nimport org.springframework.graphql.data.method.annotation.Argument;\nimport org.springframework.graphql.data.method.annotation.SubscriptionMapping;\nimport org.springframework.stereotype.Controller;\nimport reactor.core.publisher.Flux;\n\nimport java.time.Duration;\n\n/**\n * GraphQL Subscription \u30ea\u30be\u30eb\u30d0\n */\n@Controller\npublic class SubscriptionResolver {\n\n    private final OrderEventPublisher orderEventPublisher;\n    private final MrpProgressPublisher mrpProgressPublisher;\n\n    public SubscriptionResolver(\n            OrderEventPublisher orderEventPublisher,\n            MrpProgressPublisher mrpProgressPublisher) {\n        this.orderEventPublisher = orderEventPublisher;\n        this.mrpProgressPublisher = mrpProgressPublisher;\n    }\n\n    /**\n     * MRP \u9032\u6357\u306e\u8cfc\u8aad\n     */\n    @SubscriptionMapping\n    public Flux&lt;MrpProgress&gt; mrpProgress(@Argument String executionId) {\n        return mrpProgressPublisher.subscribe(executionId);\n    }\n\n    /**\n     * \u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\u5909\u66f4\u306e\u8cfc\u8aad\n     */\n    @SubscriptionMapping\n    public Flux&lt;PurchaseOrder&gt; orderStatusChanged(@Argument String orderNumber) {\n        return orderEventPublisher.subscribe(orderNumber);\n    }\n\n    /**\n     * \u5728\u5eab\u5909\u52d5\u306e\u8cfc\u8aad\n     */\n    @SubscriptionMapping\n    public Flux&lt;StockChange&gt; stockChanged(@Argument String itemCode) {\n        // \u30c0\u30df\u30fc\u5b9f\u88c5\uff085\u79d2\u3054\u3068\u306b\u5728\u5eab\u5909\u52d5\u3092\u30b7\u30df\u30e5\u30ec\u30fc\u30c8\uff09\n        return Flux.interval(Duration.ofSeconds(5))\n            .map(i -&gt; StockChange.builder()\n                .itemCode(itemCode != null ? itemCode : \"ITEM-001\")\n                .changeType(\"RECEIVE\")\n                .quantity(java.math.BigDecimal.valueOf(10))\n                .build());\n    }\n}\n\n@lombok.Data\n@lombok.Builder\nclass StockChange {\n    private String itemCode;\n    private String changeType;\n    private java.math.BigDecimal quantity;\n}\n</code></pre> MrpProgressPublisher.java\uff08\u30a4\u30d9\u30f3\u30c8\u30d1\u30d6\u30ea\u30c3\u30b7\u30e3\u30fc\uff09 <pre><code>package com.example.production.infrastructure.graphql.subscription;\n\nimport org.springframework.stereotype.Component;\nimport reactor.core.publisher.Flux;\nimport reactor.core.publisher.Sinks;\n\nimport java.util.concurrent.ConcurrentHashMap;\n\n/**\n * MRP \u9032\u6357\u30a4\u30d9\u30f3\u30c8\u30d1\u30d6\u30ea\u30c3\u30b7\u30e3\u30fc\n */\n@Component\npublic class MrpProgressPublisher {\n\n    private final ConcurrentHashMap&lt;String, Sinks.Many&lt;MrpProgress&gt;&gt; sinks =\n        new ConcurrentHashMap&lt;&gt;();\n\n    /**\n     * \u9032\u6357\u3092\u8cfc\u8aad\n     */\n    public Flux&lt;MrpProgress&gt; subscribe(String executionId) {\n        Sinks.Many&lt;MrpProgress&gt; sink = sinks.computeIfAbsent(\n            executionId,\n            k -&gt; Sinks.many().multicast().onBackpressureBuffer()\n        );\n        return sink.asFlux();\n    }\n\n    /**\n     * \u9032\u6357\u3092\u767a\u884c\n     */\n    public void publish(String executionId, MrpProgress progress) {\n        Sinks.Many&lt;MrpProgress&gt; sink = sinks.get(executionId);\n        if (sink != null) {\n            sink.tryEmitNext(progress);\n        }\n    }\n\n    /**\n     * \u5b8c\u4e86\n     */\n    public void complete(String executionId) {\n        Sinks.Many&lt;MrpProgress&gt; sink = sinks.remove(executionId);\n        if (sink != null) {\n            sink.tryEmitComplete();\n        }\n    }\n}\n\n@lombok.Data\n@lombok.Builder\nclass MrpProgress {\n    private String executionId;\n    private String phase;\n    private int current;\n    private int total;\n    private String message;\n}\n</code></pre>"},{"location":"article/study/study4-4/#49","title":"\u7b2c49\u7ae0\uff1a\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3068\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","text":""},{"location":"article/study/study4-4/#491","title":"49.1 \u30b0\u30ed\u30fc\u30d0\u30eb\u4f8b\u5916\u30cf\u30f3\u30c9\u30e9","text":"GraphQLExceptionHandler.java <pre><code>package com.example.production.infrastructure.graphql;\n\nimport com.example.production.domain.exception.*;\nimport graphql.GraphQLError;\nimport graphql.GraphqlErrorBuilder;\nimport graphql.schema.DataFetchingEnvironment;\nimport org.springframework.graphql.execution.DataFetcherExceptionResolverAdapter;\nimport org.springframework.graphql.execution.ErrorType;\nimport org.springframework.stereotype.Component;\n\n/**\n * GraphQL \u30b0\u30ed\u30fc\u30d0\u30eb\u4f8b\u5916\u30cf\u30f3\u30c9\u30e9\n */\n@Component\npublic class GraphQLExceptionHandler extends DataFetcherExceptionResolverAdapter {\n\n    @Override\n    protected GraphQLError resolveToSingleError(Throwable ex, DataFetchingEnvironment env) {\n        if (ex instanceof ItemNotFoundException) {\n            return GraphqlErrorBuilder.newError(env)\n                .errorType(ErrorType.NOT_FOUND)\n                .message(ex.getMessage())\n                .build();\n        }\n\n        if (ex instanceof DuplicateItemException) {\n            return GraphqlErrorBuilder.newError(env)\n                .errorType(ErrorType.BAD_REQUEST)\n                .message(ex.getMessage())\n                .build();\n        }\n\n        if (ex instanceof OrderAlreadyConfirmedException) {\n            return GraphqlErrorBuilder.newError(env)\n                .errorType(ErrorType.BAD_REQUEST)\n                .message(ex.getMessage())\n                .build();\n        }\n\n        if (ex instanceof IllegalArgumentException) {\n            return GraphqlErrorBuilder.newError(env)\n                .errorType(ErrorType.BAD_REQUEST)\n                .message(ex.getMessage())\n                .build();\n        }\n\n        // \u672a\u77e5\u306e\u30a8\u30e9\u30fc\n        return GraphqlErrorBuilder.newError(env)\n            .errorType(ErrorType.INTERNAL_ERROR)\n            .message(\"\u5185\u90e8\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\")\n            .build();\n    }\n}\n</code></pre>"},{"location":"article/study/study4-4/#492","title":"49.2 \u5165\u529b\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3","text":"ValidationExceptionHandler.java <pre><code>package com.example.production.infrastructure.graphql.validation;\n\nimport graphql.GraphQLError;\nimport graphql.GraphqlErrorBuilder;\nimport graphql.schema.DataFetchingEnvironment;\nimport org.springframework.graphql.data.method.annotation.GraphQlExceptionHandler;\nimport org.springframework.graphql.execution.ErrorType;\nimport org.springframework.stereotype.Controller;\n\nimport jakarta.validation.ConstraintViolation;\nimport jakarta.validation.ConstraintViolationException;\nimport java.util.List;\nimport java.util.stream.Collectors;\n\n/**\n * \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u4f8b\u5916\u30cf\u30f3\u30c9\u30e9\n */\n@Controller\npublic class ValidationExceptionHandler {\n\n    @GraphQlExceptionHandler\n    public List&lt;GraphQLError&gt; handleValidation(\n            ConstraintViolationException ex,\n            DataFetchingEnvironment env) {\n\n        return ex.getConstraintViolations().stream()\n            .map(violation -&gt; toGraphQLError(violation, env))\n            .collect(Collectors.toList());\n    }\n\n    private GraphQLError toGraphQLError(\n            ConstraintViolation&lt;?&gt; violation,\n            DataFetchingEnvironment env) {\n        return GraphqlErrorBuilder.newError(env)\n            .errorType(ErrorType.BAD_REQUEST)\n            .message(String.format(\"%s: %s\",\n                violation.getPropertyPath(),\n                violation.getMessage()))\n            .build();\n    }\n}\n</code></pre>"},{"location":"article/study/study4-4/#493","title":"49.3 \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb","text":"application.yml\uff08GraphQL \u8ffd\u52a0\u8a2d\u5b9a\uff09 <pre><code>spring:\n  graphql:\n    path: /graphql\n    graphiql:\n      enabled: true              # \u958b\u767a\u6642\u306b GraphiQL UI \u3092\u6709\u52b9\u5316\n      path: /graphiql\n    websocket:\n      path: /graphql             # Subscription \u7528 WebSocket\n    schema:\n      locations: classpath:graphql/\n      printer:\n        enabled: true            # \u30b9\u30ad\u30fc\u30de\u51fa\u529b\n\n# \u65e2\u5b58\u306e\u8a2d\u5b9a\u306f\u305d\u306e\u307e\u307e\n  datasource:\n    url: jdbc:postgresql://localhost:5432/production\n    username: postgres\n    password: postgres\n\nmybatis:\n  mapper-locations: classpath:mapper/*.xml\n</code></pre>"},{"location":"article/study/study4-4/#494-graphql-playground","title":"49.4 GraphQL Playground \u304b\u3089\u306e\u547c\u3073\u51fa\u3057","text":"<pre><code># \u54c1\u76ee\u53d6\u5f97\nquery {\n  item(itemCode: \"PROD-001\") {\n    itemCode\n    itemName\n    category\n    leadTime\n    bom {\n      childItemCode\n      requiredQuantity\n      childItem {\n        itemName\n      }\n    }\n  }\n}\n\n# \u54c1\u76ee\u4e00\u89a7\uff08\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\uff09\nquery {\n  items(category: PRODUCT, page: 0, size: 10) {\n    edges {\n      node {\n        itemCode\n        itemName\n      }\n    }\n    pageInfo {\n      totalElements\n      hasNextPage\n    }\n  }\n}\n\n# \u54c1\u76ee\u767b\u9332\nmutation {\n  createItem(input: {\n    itemCode: \"NEW-001\"\n    itemName: \"\u65b0\u898f\u88fd\u54c1\"\n    category: PRODUCT\n    leadTime: 7\n  }) {\n    itemCode\n    itemName\n  }\n}\n\n# MRP \u9032\u6357\u8cfc\u8aad\nsubscription {\n  mrpProgress(executionId: \"exec-123\") {\n    phase\n    current\n    total\n    message\n  }\n}\n</code></pre>"},{"location":"article/study/study4-4/#495-graphql-vs-rest-vs-grpc","title":"49.5 GraphQL vs REST vs gRPC \u306e\u4f7f\u3044\u5206\u3051","text":"\u7528\u9014 \u63a8\u5968 \u7406\u7531 \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9 API GraphQL \u67d4\u8edf\u306a\u30c7\u30fc\u30bf\u53d6\u5f97\u3001Over-fetching \u9632\u6b62 \u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea GraphQL \u5e2f\u57df\u5236\u9650\u3001\u5fc5\u8981\u306a\u30c7\u30fc\u30bf\u306e\u307f\u53d6\u5f97 \u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u9593 gRPC \u9ad8\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3001\u578b\u5b89\u5168 \u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u9023\u643a REST \u5e83\u304f\u666e\u53ca\u3001\u30b7\u30f3\u30d7\u30eb \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u66f4\u65b0 GraphQL Subscription / gRPC Streaming \u30cd\u30a4\u30c6\u30a3\u30d6\u30b5\u30dd\u30fc\u30c8 \u30d0\u30c3\u30c1\u51e6\u7406 gRPC \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u52b9\u7387"},{"location":"article/study/study4-4/#_2","title":"\u307e\u3068\u3081","text":"<p>\u672c\u7814\u7a76\u3067\u306f\u3001GraphQL \u306b\u3088\u308b\u751f\u7523\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 API \u3092\u5b9f\u88c5\u3057\u307e\u3057\u305f\u3002</p>"},{"location":"article/study/study4-4/#api","title":"API \u30b5\u30fc\u30d0\u30fc\u7248\u3068\u306e\u6bd4\u8f03","text":"\u89b3\u70b9 REST API\uff08\u7b2c32\u7ae0\uff09 gRPC\uff08\u7814\u7a762\uff09 GraphQL\uff08\u672c\u7814\u7a76\uff09 \u30d7\u30ed\u30c8\u30b3\u30eb HTTP/1.1 + JSON HTTP/2 + Protobuf HTTP + JSON \u30b9\u30ad\u30fc\u30de OpenAPI\uff08\u4efb\u610f\uff09 .proto\uff08\u5fc5\u9808\uff09 .graphqls\uff08\u5fc5\u9808\uff09 \u30c7\u30fc\u30bf\u53d6\u5f97 \u56fa\u5b9a\u30ec\u30b9\u30dd\u30f3\u30b9 \u56fa\u5b9a\u30ec\u30b9\u30dd\u30f3\u30b9 \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u6307\u5b9a \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 \u8907\u6570 \u8907\u6570 \u5358\u4e00 \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0 WebSocket \u5225\u5b9f\u88c5 \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0 Subscription \u30c9\u30e1\u30a4\u30f3\u5c64 \u5171\u6709 \u5171\u6709 \u5171\u6709 \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64 \u5171\u6709 \u5171\u6709 \u5171\u6709 Input Adapter REST Controller gRPC Service GraphQL Resolver"},{"location":"article/study/study4-4/#graphql","title":"\u5b9f\u88c5\u3057\u305f GraphQL \u64cd\u4f5c","text":"\u64cd\u4f5c\u30bf\u30a4\u30d7 \u64cd\u4f5c\u540d \u8aac\u660e Query item, items \u54c1\u76ee\u53d6\u5f97 bomTree, whereUsed BOM \u5c55\u958b\u30fb\u9006\u5c55\u958b purchaseOrder, purchaseOrders \u767a\u6ce8\u53d6\u5f97 Mutation createItem, updateItem, deleteItem \u54c1\u76ee CRUD createPurchaseOrder, confirmPurchaseOrder \u767a\u6ce8\u64cd\u4f5c recordReceiving \u5165\u8377\u767b\u9332 executeMrp MRP \u5b9f\u884c Subscription mrpProgress MRP \u9032\u6357\u901a\u77e5 orderStatusChanged \u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\u5909\u66f4 stockChanged \u5728\u5eab\u5909\u52d5"},{"location":"article/study/study4-4/#_3","title":"\u6280\u8853\u30b9\u30bf\u30c3\u30af","text":"<ul> <li>Spring for GraphQL: Spring Boot \u7d71\u5408</li> <li>GraphQL Java: GraphQL \u5b9f\u884c\u30a8\u30f3\u30b8\u30f3</li> <li>Extended Scalars: Date, BigDecimal \u7b49\u306e\u30ab\u30b9\u30bf\u30e0\u578b</li> <li>DataLoader: N+1 \u554f\u984c\u5bfe\u7b56</li> <li>WebSocket: Subscription \u30b5\u30dd\u30fc\u30c8</li> </ul>"},{"location":"article/study/study4-4/#graphql_1","title":"GraphQL \u3092\u9078\u629e\u3059\u3079\u304d\u5834\u9762","text":"<ol> <li>\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u4e3b\u5c0e\u306e\u958b\u767a: \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u30c7\u30fc\u30bf\u5f62\u72b6\u3092\u6c7a\u5b9a</li> <li>\u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea: \u5e2f\u57df\u5236\u9650\u4e0b\u3067\u306e\u52b9\u7387\u7684\u306a\u30c7\u30fc\u30bf\u53d6\u5f97</li> <li>\u8907\u96d1\u306a\u95a2\u9023\u30c7\u30fc\u30bf: 1\u56de\u306e\u30af\u30a8\u30ea\u3067\u95a2\u9023\u30c7\u30fc\u30bf\u3092\u53d6\u5f97</li> <li>\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u66f4\u65b0: Subscription \u3067\u30d7\u30c3\u30b7\u30e5\u901a\u77e5</li> <li>API \u7d71\u5408: \u8907\u6570\u306e\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3092\u5358\u4e00\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3067\u63d0\u4f9b</li> </ol> <p>\u76ee\u6b21\u3078\u623b\u308b</p>"},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/","title":"Java \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u74b0\u5883\u69cb\u7bc9\u30ac\u30a4\u30c9","text":""},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#_1","title":"\u6982\u8981","text":"<p>\u672c\u30ac\u30a4\u30c9\u306f\u3001Java \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u958b\u767a\u74b0\u5883\u3092\u30bc\u30ed\u304b\u3089\u69cb\u7bc9\u3057\u3001\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u306e\u4e09\u7a2e\u306e\u795e\u5668\uff08\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u3001\u30c6\u30b9\u30c6\u30a3\u30f3\u30b0\u3001\u81ea\u52d5\u5316\uff09\u3092\u5b9f\u8df5\u3059\u308b\u305f\u3081\u306e\u624b\u9806\u66f8\u3067\u3059\u3002</p>"},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#_2","title":"\u524d\u63d0\u6761\u4ef6","text":"<ul> <li>Java 17 \u4ee5\u964d\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068</li> <li>Git \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068</li> <li>IntelliJ IDEA \u307e\u305f\u306f VS Code \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068\uff08\u63a8\u5968\uff09</li> </ul>"},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#_3","title":"\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u306e\u4e09\u7a2e\u306e\u795e\u5668","text":""},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#1","title":"1. \u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406","text":""},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#git","title":"Git \u306e\u57fa\u672c\u8a2d\u5b9a","text":"<pre><code># \u30e6\u30fc\u30b6\u30fc\u8a2d\u5b9a\ngit config --global user.name \"Your Name\"\ngit config --global user.email \"your.email@example.com\"\n\n# \u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u521d\u671f\u5316\ngit init\n\n# .gitignore \u306e\u4f5c\u6210\necho \"build/\" &gt;&gt; .gitignore\necho \".gradle/\" &gt;&gt; .gitignore\necho \"*.class\" &gt;&gt; .gitignore\necho \".idea/\" &gt;&gt; .gitignore\necho \"*.iml\" &gt;&gt; .gitignore\n</code></pre>"},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#angular","title":"\u30b3\u30df\u30c3\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8\u898f\u7d04\uff08Angular \u30eb\u30fc\u30eb\uff09","text":"<pre><code>&lt;\u30bf\u30a4\u30d7&gt;(&lt;\u30b9\u30b3\u30fc\u30d7&gt;): &lt;\u30bf\u30a4\u30c8\u30eb&gt;\n&lt;\u7a7a\u884c&gt;\n&lt;\u30dc\u30c7\u30a3&gt;\n&lt;\u7a7a\u884c&gt;\n&lt;\u30d5\u30c3\u30bf&gt;\n</code></pre> <p>\u30bf\u30a4\u30d7\u306e\u7a2e\u985e\uff1a - <code>feat</code>: \u65b0\u6a5f\u80fd\u306e\u8ffd\u52a0 - <code>fix</code>: \u30d0\u30b0\u4fee\u6b63 - <code>docs</code>: \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u5909\u66f4\u306e\u307f - <code>style</code>: \u30b3\u30fc\u30c9\u306b\u5f71\u97ff\u3092\u4e0e\u3048\u306a\u3044\u5909\u66f4\uff08\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u7b49\uff09 - <code>refactor</code>: \u6a5f\u80fd\u8ffd\u52a0\u3067\u3082\u30d0\u30b0\u4fee\u6b63\u3067\u3082\u306a\u3044\u30b3\u30fc\u30c9\u5909\u66f4 - <code>perf</code>: \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u6539\u5584\u3059\u308b\u30b3\u30fc\u30c9\u5909\u66f4 - <code>test</code>: \u30c6\u30b9\u30c8\u306e\u8ffd\u52a0\u307e\u305f\u306f\u4fee\u6b63 - <code>chore</code>: \u30d3\u30eb\u30c9\u30d7\u30ed\u30bb\u30b9\u3084\u30c4\u30fc\u30eb\u306e\u5909\u66f4</p> <p>\u4f8b\uff1a <pre><code>git commit -m 'feat: FizzBuzz\u6a5f\u80fd\u306e\u5b9f\u88c5'\ngit commit -m 'refactor: \u30e1\u30bd\u30c3\u30c9\u306e\u62bd\u51fa'\ngit commit -m 'chore: \u9759\u7684\u30b3\u30fc\u30c9\u89e3\u6790\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7'\n</code></pre></p>"},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#2","title":"2. \u30c6\u30b9\u30c6\u30a3\u30f3\u30b0","text":""},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#junit-5-assertj","title":"JUnit 5 \u3068 AssertJ \u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"<p>Gradle \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u521d\u671f\u5316\uff1a</p> <pre><code>./gradlew init --type java-application\n</code></pre> <p><code>build.gradle</code> \u306e\u57fa\u672c\u8a2d\u5b9a\uff1a</p> <pre><code>plugins {\n    id 'java'\n    id 'application'\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    // JUnit 5\n    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.10.1'\n    testImplementation 'org.junit.jupiter:junit-jupiter-params:5.10.1'\n    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.10.1'\n\n    // AssertJ\n    testImplementation 'org.assertj:assertj-core:3.24.2'\n}\n\ntest {\n    useJUnitPlatform()\n}\n\napplication {\n    mainClass = 'App'\n}\n</code></pre>"},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#_4","title":"\u30c6\u30b9\u30c8\u306e\u5b9f\u884c","text":"<pre><code># \u30c6\u30b9\u30c8\u306e\u5b9f\u884c\n./gradlew test\n\n# \u7d99\u7d9a\u7684\u30c6\u30b9\u30c8\u5b9f\u884c\uff08\u30d5\u30a1\u30a4\u30eb\u5909\u66f4\u76e3\u8996\uff09\n./gradlew test --continuous\n</code></pre>"},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#3","title":"3. \u81ea\u52d5\u5316","text":""},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#gradle","title":"\u5b8c\u5168\u306a Gradle \u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"<p><code>build.gradle</code> \u306e\u5b8c\u5168\u7248\uff1a</p> <pre><code>plugins {\n    id 'java'\n    id 'application'\n    id 'jacoco'\n    id 'checkstyle'\n    id 'pmd'\n    id 'com.github.spotbugs' version '6.0.7'\n    id 'org.gradle.test-retry' version '1.5.6'\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    // \u30c6\u30b9\u30c8\u95a2\u9023\n    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.10.1'\n    testImplementation 'org.junit.jupiter:junit-jupiter-params:5.10.1'\n    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.10.1'\n    testImplementation 'org.assertj:assertj-core:3.24.2'\n\n    // SpotBugs\u95a2\u9023\n    spotbugsPlugins 'com.h3xstream.findsecbugs:findsecbugs-plugin:1.12.0'\n}\n\napplication {\n    mainClass = 'App'\n}\n\ntest {\n    useJUnitPlatform()\n\n    // \u30c6\u30b9\u30c8\u5931\u6557\u6642\u306e\u30ea\u30c8\u30e9\u30a4\u8a2d\u5b9a\n    retry {\n        maxRetries = 3\n        maxFailures = 20\n        failOnPassedAfterRetry = false\n    }\n\n    // \u30c6\u30b9\u30c8\u30ed\u30b0\u8a2d\u5b9a\n    testLogging {\n        events \"passed\", \"skipped\", \"failed\"\n        exceptionFormat \"full\"\n    }\n}\n\n// JaCoCo\uff08\u30b3\u30fc\u30c9\u30ab\u30d0\u30ec\u30c3\u30b8\uff09\u8a2d\u5b9a\njacoco {\n    toolVersion = \"0.8.11\"\n}\n\njacocoTestReport {\n    dependsOn test\n    reports {\n        xml.required = false\n        csv.required = false\n        html.outputLocation = layout.buildDirectory.dir('jacocoHtml')\n    }\n}\n\n// PMD \u8a2d\u5b9a\npmd {\n    consoleOutput = true\n    toolVersion = \"6.55.0\"\n    ruleSetFiles = files(\"config/pmd/ruleset.xml\")\n    ruleSets = []\n}\n\n// \u30ab\u30b9\u30bf\u30e0\u30bf\u30b9\u30af\uff1aTDD\u7528\u306e\u7d99\u7d9a\u7684\u30c6\u30b9\u30c8\u5b9f\u884c\ntask tdd(type: Test) {\n    useJUnitPlatform()\n    testLogging {\n        events \"passed\", \"skipped\", \"failed\"\n        exceptionFormat \"full\"\n    }\n    outputs.upToDateWhen { false }\n}\n\n// \u30ab\u30b9\u30bf\u30e0\u30bf\u30b9\u30af\uff1a\u54c1\u8cea\u30c1\u30a7\u30c3\u30af\u5168\u5b9f\u884c\ntask qualityCheck {\n    dependsOn 'checkstyleMain', 'checkstyleTest', 'pmdMain', 'pmdTest', 'spotbugsMain', 'spotbugsTest'\n    description 'Run all quality checks'\n    group 'verification'\n}\n\n// \u30ab\u30b9\u30bf\u30e0\u30bf\u30b9\u30af\uff1a\u3059\u3079\u3066\u306e\u30c1\u30a7\u30c3\u30af\u3068\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\ntask fullCheck {\n    dependsOn 'test', 'qualityCheck', 'jacocoTestReport'\n    description 'Run all tests and quality checks'\n    group 'verification'\n}\n\n// \u30d5\u30a1\u30a4\u30eb\u5909\u66f4\u76e3\u8996\u30bf\u30b9\u30af\ntask watchTest {\n    doLast {\n        println \"Watching for file changes...\"\n        println \"Run: ./gradlew test --continuous\"\n        println \"Or use your IDE's auto-test feature\"\n    }\n}\n</code></pre>"},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#_5","title":"\u9759\u7684\u30b3\u30fc\u30c9\u89e3\u6790\u30c4\u30fc\u30eb","text":""},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#checkstyle","title":"Checkstyle \u306e\u8a2d\u5b9a","text":"<p><code>config/checkstyle/checkstyle.xml</code> \u3092\u4f5c\u6210\uff1a</p> <pre><code>mkdir -p config/checkstyle\n</code></pre> <pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;!DOCTYPE module PUBLIC\n        \"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN\"\n        \"https://checkstyle.org/dtds/configuration_1_3.dtd\"&gt;\n\n&lt;module name=\"Checker\"&gt;\n    &lt;property name=\"charset\" value=\"UTF-8\"/&gt;\n\n    &lt;!-- \u30d5\u30a1\u30a4\u30eb\u30ec\u30d9\u30eb\u306e\u30c1\u30a7\u30c3\u30af --&gt;\n    &lt;module name=\"FileTabCharacter\"&gt;\n        &lt;property name=\"eachLine\" value=\"true\"/&gt;\n    &lt;/module&gt;\n\n    &lt;!-- TreeWalker\u306b\u3088\u308bAST\u89e3\u6790 --&gt;\n    &lt;module name=\"TreeWalker\"&gt;\n        &lt;!-- \u30a4\u30f3\u30c7\u30f3\u30c8 --&gt;\n        &lt;module name=\"Indentation\"&gt;\n            &lt;property name=\"basicOffset\" value=\"4\"/&gt;\n        &lt;/module&gt;\n\n        &lt;!-- \u547d\u540d\u898f\u5247 --&gt;\n        &lt;module name=\"TypeName\"/&gt;\n        &lt;module name=\"MethodName\"/&gt;\n        &lt;module name=\"VariableName\"/&gt;\n        &lt;module name=\"ConstantName\"/&gt;\n\n        &lt;!-- \u305d\u306e\u4ed6 --&gt;\n        &lt;module name=\"EmptyStatement\"/&gt;\n        &lt;module name=\"EqualsHashCode\"/&gt;\n        &lt;module name=\"MagicNumber\"&gt;\n            &lt;property name=\"ignoreHashCodeMethod\" value=\"true\"/&gt;\n            &lt;property name=\"ignoreAnnotation\" value=\"true\"/&gt;\n        &lt;/module&gt;\n\n        &lt;!-- \u5faa\u74b0\u8907\u96d1\u5ea6\u306e\u30c1\u30a7\u30c3\u30af --&gt;\n        &lt;module name=\"CyclomaticComplexity\"&gt;\n            &lt;property name=\"max\" value=\"7\"/&gt;\n            &lt;property name=\"switchBlockAsSingleDecisionPoint\" value=\"false\"/&gt;\n        &lt;/module&gt;\n    &lt;/module&gt;\n&lt;/module&gt;\n</code></pre>"},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#pmd","title":"PMD \u306e\u8a2d\u5b9a","text":"<p><code>config/pmd/ruleset.xml</code> \u3092\u4f5c\u6210\uff1a</p> <pre><code>mkdir -p config/pmd\n</code></pre> <pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;ruleset name=\"Custom Rules\"\n         xmlns=\"http://pmd.sourceforge.net/ruleset/2.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://pmd.sourceforge.net/ruleset/2.0.0\n         https://pmd.sourceforge.io/ruleset_2_0_0.xsd\"&gt;\n\n    &lt;description&gt;\u30ab\u30b9\u30bf\u30e0 PMD \u30eb\u30fc\u30eb\u30bb\u30c3\u30c8&lt;/description&gt;\n\n    &lt;!-- \u57fa\u672c\u30eb\u30fc\u30eb\u30bb\u30c3\u30c8 --&gt;\n    &lt;rule ref=\"category/java/bestpractices.xml\"&gt;\n        &lt;exclude name=\"JUnitTestContainsTooManyAsserts\"/&gt;\n    &lt;/rule&gt;\n\n    &lt;rule ref=\"category/java/codestyle.xml\"&gt;\n        &lt;exclude name=\"AtLeastOneConstructor\"/&gt;\n        &lt;exclude name=\"CommentDefaultAccessModifier\"/&gt;\n    &lt;/rule&gt;\n\n    &lt;rule ref=\"category/java/design.xml\"&gt;\n        &lt;!-- \u5faa\u74b0\u8907\u96d1\u5ea6\u30927\u306b\u5236\u9650 --&gt;\n        &lt;exclude name=\"CyclomaticComplexity\"/&gt;\n    &lt;/rule&gt;\n\n    &lt;!-- \u5faa\u74b0\u8907\u96d1\u5ea6\u306e\u30ab\u30b9\u30bf\u30e0\u8a2d\u5b9a --&gt;\n    &lt;rule ref=\"category/java/design.xml/CyclomaticComplexity\"&gt;\n        &lt;properties&gt;\n            &lt;property name=\"classReportLevel\" value=\"80\"/&gt;\n            &lt;property name=\"methodReportLevel\" value=\"7\"/&gt;\n            &lt;property name=\"cycloOptions\" value=\"\"/&gt;\n        &lt;/properties&gt;\n    &lt;/rule&gt;\n\n    &lt;!-- \u8a8d\u77e5\u8907\u96d1\u5ea6\u306e\u8a2d\u5b9a --&gt;\n    &lt;rule ref=\"category/java/design.xml/CognitiveComplexity\"&gt;\n        &lt;properties&gt;\n            &lt;property name=\"reportLevel\" value=\"7\"/&gt;\n        &lt;/properties&gt;\n    &lt;/rule&gt;\n\n    &lt;rule ref=\"category/java/errorprone.xml\"&gt;\n        &lt;exclude name=\"BeanMembersShouldSerialize\"/&gt;\n    &lt;/rule&gt;\n\n    &lt;rule ref=\"category/java/performance.xml\"/&gt;\n\n    &lt;rule ref=\"category/java/security.xml\"/&gt;\n&lt;/ruleset&gt;\n</code></pre> <p>build.gradle \u306b PMD \u8a2d\u5b9a\u3092\u8ffd\u52a0\uff1a</p> <pre><code>// PMD \u8a2d\u5b9a\npmd {\n    consoleOutput = true\n    toolVersion = \"6.55.0\"\n    ruleSetFiles = files(\"config/pmd/ruleset.xml\")\n    ruleSets = []\n}\n</code></pre> <p>PMD \u306f\u30ab\u30b9\u30bf\u30e0\u8a2d\u5b9a\u3067\u4ee5\u4e0b\u3092\u30c1\u30a7\u30c3\u30af\uff1a - \u30de\u30b8\u30c3\u30af\u30ca\u30f3\u30d0\u30fc\u306e\u4f7f\u7528 - \u7a7a\u306e catch \u30d6\u30ed\u30c3\u30af - \u5faa\u74b0\u8907\u96d1\u5ea6\u304c 7 \u3092\u8d85\u3048\u308b\u30e1\u30bd\u30c3\u30c9 - \u8a8d\u77e5\u8907\u96d1\u5ea6\u304c 7 \u3092\u8d85\u3048\u308b\u30e1\u30bd\u30c3\u30c9 - \u4e0d\u8981\u306a\u30b3\u30fc\u30c9</p>"},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#spotbugs","title":"SpotBugs \u306e\u8a2d\u5b9a\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u3092\u4f7f\u7528\uff09","text":"<p>SpotBugs \u306f\u4ee5\u4e0b\u306e\u30d0\u30b0\u30d1\u30bf\u30fc\u30f3\u3092\u691c\u51fa\uff1a - Null \u30dd\u30a4\u30f3\u30bf\u53c2\u7167 - \u30ea\u30bd\u30fc\u30b9\u30ea\u30fc\u30af - \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8106\u5f31\u6027 - \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u554f\u984c</p>"},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#_6","title":"\u30bf\u30b9\u30af\u30e9\u30f3\u30ca\u30fc\u30b3\u30de\u30f3\u30c9\u4e00\u89a7","text":""},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#_7","title":"\u57fa\u672c\u30b3\u30de\u30f3\u30c9","text":"<pre><code># \u4f9d\u5b58\u95a2\u4fc2\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n./gradlew build\n\n# \u30c6\u30b9\u30c8\u306e\u5b9f\u884c\n./gradlew test\n\n# TDD\u30e2\u30fc\u30c9\u3067\u30c6\u30b9\u30c8\u5b9f\u884c\n./gradlew tdd\n\n# \u7d99\u7d9a\u7684\u30c6\u30b9\u30c8\u5b9f\u884c\n./gradlew test --continuous\n</code></pre>"},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#_8","title":"\u54c1\u8cea\u30c1\u30a7\u30c3\u30af\u30b3\u30de\u30f3\u30c9","text":"<pre><code># Checkstyle\u5b9f\u884c\n./gradlew checkstyleMain\n./gradlew checkstyleTest\n\n# PMD\u5b9f\u884c\n./gradlew pmdMain\n./gradlew pmdTest\n\n# SpotBugs\u5b9f\u884c\n./gradlew spotbugsMain\n./gradlew spotbugsTest\n\n# \u3059\u3079\u3066\u306e\u54c1\u8cea\u30c1\u30a7\u30c3\u30af\u5b9f\u884c\n./gradlew qualityCheck\n</code></pre>"},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#_9","title":"\u30ab\u30d0\u30ec\u30c3\u30b8\u6e2c\u5b9a","text":"<pre><code># \u30c6\u30b9\u30c8\u5b9f\u884c\u3068\u30ab\u30d0\u30ec\u30c3\u30b8\u30ec\u30dd\u30fc\u30c8\u751f\u6210\n./gradlew test jacocoTestReport\n\n# \u30ec\u30dd\u30fc\u30c8\u306f build/jacocoHtml/index.html \u3067\u78ba\u8a8d\n</code></pre>"},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#_10","title":"\u7d71\u5408\u30b3\u30de\u30f3\u30c9","text":"<pre><code># \u3059\u3079\u3066\u306e\u30c6\u30b9\u30c8\u3068\u54c1\u8cea\u30c1\u30a7\u30c3\u30af\u3092\u5b9f\u884c\n./gradlew fullCheck\n\n# \u30bf\u30b9\u30af\u4e00\u89a7\u306e\u8868\u793a\n./gradlew tasks --group verification\n</code></pre>"},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#_11","title":"\u958b\u767a\u30d5\u30ed\u30fc","text":""},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#1_1","title":"1. \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u521d\u671f\u5316","text":"<pre><code># \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4f5c\u6210\nmkdir my-java-project\ncd my-java-project\n\n# Git \u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u521d\u671f\u5316\ngit init\n\n# Gradle \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u521d\u671f\u5316\n./gradlew init --type java-application\n\n# \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u914d\u7f6e\uff08\u4e0a\u8a18\u306e build.gradle\u3001checkstyle.xml\u3001PMD ruleset.xml\uff09\n\n# \u4f9d\u5b58\u95a2\u4fc2\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n./gradlew build\n\n# \u521d\u671f\u30b3\u30df\u30c3\u30c8\ngit add .\ngit commit -m 'chore: \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u521d\u671f\u5316'\n</code></pre>"},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#2-tdd","title":"2. TDD \u30b5\u30a4\u30af\u30eb\u306e\u5b9f\u8df5","text":"<pre><code># \u7d99\u7d9a\u7684\u30c6\u30b9\u30c8\u5b9f\u884c\u3092\u958b\u59cb\n./gradlew test --continuous\n\n# \u5225\u30bf\u30fc\u30df\u30ca\u30eb\u3067\u958b\u767a\u3092\u9032\u3081\u308b\n# 1. \u5931\u6557\u3059\u308b\u30c6\u30b9\u30c8\u3092\u66f8\u304f\uff08Red\uff09\n# 2. \u30c6\u30b9\u30c8\u3092\u901a\u3059\u6700\u5c0f\u9650\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u304f\uff08Green\uff09\n# 3. \u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\uff08Refactor\uff09\n\n# \u54c1\u8cea\u30c1\u30a7\u30c3\u30af\n./gradlew qualityCheck\n\n# \u30b3\u30df\u30c3\u30c8\ngit add .\ngit commit -m 'feat: \u65b0\u6a5f\u80fd\u306e\u5b9f\u88c5'\n</code></pre>"},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#3_1","title":"3. \u30ab\u30d0\u30ec\u30c3\u30b8\u78ba\u8a8d","text":"<pre><code># \u30c6\u30b9\u30c8\u3068\u30ab\u30d0\u30ec\u30c3\u30b8\u30ec\u30dd\u30fc\u30c8\u751f\u6210\n./gradlew test jacocoTestReport\n\n# \u30d6\u30e9\u30a6\u30b6\u3067\u30ec\u30dd\u30fc\u30c8\u3092\u78ba\u8a8d\nopen build/jacocoHtml/index.html  # macOS\nstart build/jacocoHtml/index.html # Windows\n</code></pre>"},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#ide","title":"IDE \u7d71\u5408","text":""},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#intellij-idea","title":"IntelliJ IDEA","text":"<ol> <li>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u958b\u304f</li> <li><code>File</code> \u2192 <code>Settings</code> \u2192 <code>Build, Execution, Deployment</code> \u2192 <code>Build Tools</code> \u2192 <code>Gradle</code></li> <li><code>Build and run using</code> \u3092 <code>Gradle</code> \u306b\u8a2d\u5b9a</li> <li><code>Run tests using</code> \u3092 <code>Gradle</code> \u306b\u8a2d\u5b9a</li> </ol> <p>\u81ea\u52d5\u30c6\u30b9\u30c8\u5b9f\u884c\u306e\u8a2d\u5b9a\uff1a - <code>Run</code> \u2192 <code>Edit Configurations</code> - <code>+</code> \u2192 <code>Gradle</code> - <code>Tasks</code> \u306b <code>test --continuous</code> \u3092\u8a2d\u5b9a</p>"},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#vs-code","title":"VS Code","text":"<p>\u5fc5\u8981\u306a\u62e1\u5f35\u6a5f\u80fd\uff1a - Extension Pack for Java - Gradle for Java - Test Runner for Java</p> <p><code>settings.json</code> \u306b\u8ffd\u52a0\uff1a <pre><code>{\n    \"java.test.runner\": \"junit\",\n    \"java.test.config\": {\n        \"workingDirectory\": \"${workspaceFolder}\"\n    }\n}\n</code></pre></p>"},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#_12","title":"\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0","text":""},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#gradle-wrapper","title":"Gradle Wrapper \u304c\u52d5\u4f5c\u3057\u306a\u3044\u5834\u5408","text":"<pre><code># Gradle Wrapper \u306e\u518d\u751f\u6210\ngradle wrapper --gradle-version=8.5\n\n# \u5b9f\u884c\u6a29\u9650\u306e\u4ed8\u4e0e\uff08Unix\u7cfb\uff09\nchmod +x gradlew\n</code></pre>"},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#_13","title":"\u30c6\u30b9\u30c8\u304c\u898b\u3064\u304b\u3089\u306a\u3044\u5834\u5408","text":"<ul> <li>\u30c6\u30b9\u30c8\u30af\u30e9\u30b9\u540d\u304c <code>*Test.java</code> \u3067\u7d42\u308f\u3063\u3066\u3044\u308b\u304b\u78ba\u8a8d</li> <li>\u30c6\u30b9\u30c8\u30e1\u30bd\u30c3\u30c9\u306b <code>@Test</code> \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u304c\u3042\u308b\u304b\u78ba\u8a8d</li> <li><code>src/test/java</code> \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u914d\u4e0b\u306b\u30c6\u30b9\u30c8\u30af\u30e9\u30b9\u304c\u3042\u308b\u304b\u78ba\u8a8d</li> </ul>"},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#_14","title":"\u9759\u7684\u89e3\u6790\u30c4\u30fc\u30eb\u306e\u30a8\u30e9\u30fc\u3092\u7121\u8996\u3057\u305f\u3044\u5834\u5408","text":"<pre><code>// Checkstyle \u3092\u7121\u8996\n// CHECKSTYLE:OFF\n\u554f\u984c\u306e\u3042\u308b\u30b3\u30fc\u30c9\n// CHECKSTYLE:ON\n\n// PMD \u3092\u7121\u8996\n@SuppressWarnings(\"PMD.MethodNamingConventions\")\npublic void my_method() { }\n\n// SpotBugs \u3092\u7121\u8996\n@SuppressFBWarnings(\"NP_NULL_ON_SOME_PATH\")\npublic void method() { }\n</code></pre>"},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#_15","title":"\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","text":"<ol> <li>\u30b3\u30df\u30c3\u30c8\u306f\u5c0f\u3055\u304f\u983b\u7e41\u306b</li> <li>\u6a5f\u80fd\u5358\u4f4d\u3067\u30b3\u30df\u30c3\u30c8</li> <li> <p>\u30c6\u30b9\u30c8\u304c\u901a\u308b\u72b6\u614b\u3067\u30b3\u30df\u30c3\u30c8</p> </li> <li> <p>\u30c6\u30b9\u30c8\u30d5\u30a1\u30fc\u30b9\u30c8</p> </li> <li>\u5b9f\u88c5\u524d\u306b\u30c6\u30b9\u30c8\u3092\u66f8\u304f</li> <li> <p>\u30c6\u30b9\u30c8\u304c\u5931\u6557\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304b\u3089\u5b9f\u88c5</p> </li> <li> <p>\u7d99\u7d9a\u7684\u306a\u54c1\u8cea\u30c1\u30a7\u30c3\u30af</p> </li> <li>\u30b3\u30df\u30c3\u30c8\u524d\u306b <code>./gradlew qualityCheck</code> \u3092\u5b9f\u884c</li> <li>\u30ab\u30d0\u30ec\u30c3\u30b8 80% \u4ee5\u4e0a\u3092\u76ee\u6a19</li> <li> <p>\u5faa\u74b0\u8907\u96d1\u5ea6\u3092 7 \u4ee5\u4e0b\u306b\u7dad\u6301</p> </li> <li> <p>\u81ea\u52d5\u5316\u306e\u6d3b\u7528</p> </li> <li><code>./gradlew test --continuous</code> \u3092\u5e38\u306b\u8d77\u52d5</li> <li> <p>IDE \u306e\u81ea\u52d5\u30c6\u30b9\u30c8\u6a5f\u80fd\u3092\u6d3b\u7528</p> </li> <li> <p>\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u306e\u7fd2\u6163</p> </li> <li>\u30c6\u30b9\u30c8\u304c\u901a\u3063\u305f\u3089\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0</li> <li>\u91cd\u8907\u30b3\u30fc\u30c9\u306e\u6392\u9664</li> <li> <p>\u610f\u56f3\u304c\u660e\u78ba\u306a\u30b3\u30fc\u30c9</p> </li> <li> <p>\u8907\u96d1\u5ea6\u306e\u7ba1\u7406</p> </li> <li>\u30e1\u30bd\u30c3\u30c9\u306e\u5faa\u74b0\u8907\u96d1\u5ea6\u306f 7 \u4ee5\u4e0b\u3092\u7dad\u6301</li> <li>\u8907\u96d1\u306a\u30ed\u30b8\u30c3\u30af\u306f\u5c0f\u3055\u306a\u30e1\u30bd\u30c3\u30c9\u306b\u5206\u5272</li> <li>\u65e9\u671f\u30ea\u30bf\u30fc\u30f3\u3084\u30ac\u30fc\u30c9\u7bc0\u3092\u6d3b\u7528\u3057\u3066\u8907\u96d1\u5ea6\u3092\u524a\u6e1b</li> </ol>"},{"location":"reference/Java%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#_16","title":"\u307e\u3068\u3081","text":"<p>\u3053\u306e\u30ac\u30a4\u30c9\u306b\u5f93\u3046\u3053\u3068\u3067\u3001Java \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u958b\u767a\u306b\u5fc5\u8981\u306a\u74b0\u5883\u304c\u6574\u3044\u3001\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u306e\u4e09\u7a2e\u306e\u795e\u5668\u3092\u5b9f\u8df5\u3067\u304d\u307e\u3059\u3002\u7d99\u7d9a\u7684\u306b\u30c6\u30b9\u30c8\u3092\u66f8\u304d\u3001\u54c1\u8cea\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3001\u81ea\u52d5\u5316\u3092\u6d3b\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u52d5\u4f5c\u3059\u308b\u304d\u308c\u3044\u306a\u30b3\u30fc\u30c9 \u3092\u7dad\u6301\u3057\u7d9a\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/","title":"TypeScript \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u74b0\u5883\u69cb\u7bc9\u30ac\u30a4\u30c9","text":""},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#_1","title":"\u6982\u8981","text":"<p>\u672c\u30ac\u30a4\u30c9\u306f\u3001TypeScript \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u958b\u767a\u74b0\u5883\u3092\u30bc\u30ed\u304b\u3089\u69cb\u7bc9\u3057\u3001\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u306e\u4e09\u7a2e\u306e\u795e\u5668\uff08\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u3001\u30c6\u30b9\u30c6\u30a3\u30f3\u30b0\u3001\u81ea\u52d5\u5316\uff09\u3092\u5b9f\u8df5\u3059\u308b\u305f\u3081\u306e\u624b\u9806\u66f8\u3067\u3059\u3002\u30c6\u30b9\u30c8\u99c6\u52d5\u958b\u767a\uff08TDD\uff09\u306b\u3088\u308a\u300c\u52d5\u4f5c\u3059\u308b\u304d\u308c\u3044\u306a\u30b3\u30fc\u30c9\u300d\u3092\u7d99\u7d9a\u7684\u306b\u4f5c\u6210\u3067\u304d\u308b\u958b\u767a\u74b0\u5883\u3092\u6574\u5099\u3057\u307e\u3059\u3002</p>"},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#_2","title":"\u524d\u63d0\u6761\u4ef6","text":"<ul> <li>Node.js 18 \u4ee5\u964d\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068</li> <li>npm \u307e\u305f\u306f yarn \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068</li> <li>Git \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068</li> <li>VS Code \u307e\u305f\u306f WebStorm \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068\uff08\u63a8\u5968\uff09</li> </ul>"},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#_3","title":"\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u306e\u4e09\u7a2e\u306e\u795e\u5668","text":""},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#1","title":"1. \u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406","text":""},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#git","title":"Git \u306e\u57fa\u672c\u8a2d\u5b9a","text":"<pre><code># \u30e6\u30fc\u30b6\u30fc\u8a2d\u5b9a\ngit config --global user.name \"Your Name\"\ngit config --global user.email \"your.email@example.com\"\n\n# \u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u521d\u671f\u5316\ngit init\n\n# .gitignore \u306e\u4f5c\u6210\necho \"node_modules/\" &gt;&gt; .gitignore\necho \"dist/\" &gt;&gt; .gitignore\necho \"coverage/\" &gt;&gt; .gitignore\necho \".env\" &gt;&gt; .gitignore\necho \".DS_Store\" &gt;&gt; .gitignore\n</code></pre>"},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#conventional-commits","title":"\u30b3\u30df\u30c3\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8\u898f\u7d04\uff08Conventional Commits\uff09","text":"<pre><code>&lt;\u30bf\u30a4\u30d7&gt;(&lt;\u30b9\u30b3\u30fc\u30d7&gt;): &lt;\u30bf\u30a4\u30c8\u30eb&gt;\n&lt;\u7a7a\u884c&gt;\n&lt;\u30dc\u30c7\u30a3&gt;\n&lt;\u7a7a\u884c&gt;\n&lt;\u30d5\u30c3\u30bf&gt;\n</code></pre> <p>\u30bf\u30a4\u30d7\u306e\u7a2e\u985e\uff1a - <code>feat</code>: \u65b0\u6a5f\u80fd\u306e\u8ffd\u52a0 - <code>fix</code>: \u30d0\u30b0\u4fee\u6b63 - <code>docs</code>: \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u5909\u66f4\u306e\u307f - <code>style</code>: \u30b3\u30fc\u30c9\u306b\u5f71\u97ff\u3092\u4e0e\u3048\u306a\u3044\u5909\u66f4\uff08\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u7b49\uff09 - <code>refactor</code>: \u6a5f\u80fd\u8ffd\u52a0\u3067\u3082\u30d0\u30b0\u4fee\u6b63\u3067\u3082\u306a\u3044\u30b3\u30fc\u30c9\u5909\u66f4 - <code>perf</code>: \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u6539\u5584\u3059\u308b\u30b3\u30fc\u30c9\u5909\u66f4 - <code>test</code>: \u30c6\u30b9\u30c8\u306e\u8ffd\u52a0\u3084\u4fee\u6b63 - <code>chore</code>: \u30d3\u30eb\u30c9\u30d7\u30ed\u30bb\u30b9\u3084\u30c4\u30fc\u30eb\u3001\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u5909\u66f4</p> <p>\u4f8b\uff1a <pre><code>git commit -m 'feat: \u30e6\u30fc\u30b6\u30fc\u8a8d\u8a3c\u6a5f\u80fd\u3092\u8ffd\u52a0'\ngit commit -m 'fix: \u30ed\u30b0\u30a4\u30f3\u6642\u306e\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\u3092\u4fee\u6b63'\ngit commit -m 'refactor: FizzBuzz \u30af\u30e9\u30b9\u306e\u30e1\u30bd\u30c3\u30c9\u62bd\u51fa'\n</code></pre></p>"},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#2","title":"2. \u30c6\u30b9\u30c6\u30a3\u30f3\u30b0","text":""},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#_4","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u521d\u671f\u5316","text":"<pre><code># \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u521d\u671f\u5316\nnpm init -y\n\n# TypeScript \u306e\u8a2d\u5b9a\nnpm install -D typescript @types/node\nnpx tsc --init\n</code></pre>"},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#_5","title":"\u30c6\u30b9\u30c8\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"<pre><code># Vitest \u3068\u30c6\u30b9\u30c8\u95a2\u9023\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nnpm install -D vitest @vitest/coverage-v8 @types/node\n</code></pre>"},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#packagejson","title":"package.json \u306e\u8a2d\u5b9a","text":"<pre><code>{\n  \"name\": \"typescript-app\",\n  \"private\": true,\n  \"version\": \"0.0.0\",\n  \"type\": \"module\",\n  \"scripts\": {\n    \"dev\": \"vite\",\n    \"build\": \"tsc &amp;&amp; vite build\",\n    \"preview\": \"vite preview\",\n    \"test\": \"vitest run\",\n    \"test:watch\": \"vitest\",\n    \"test:coverage\": \"vitest run --coverage\",\n    \"lint\": \"eslint . --ext .ts,.tsx\",\n    \"lint:fix\": \"eslint . --ext .ts,.tsx --fix\",\n    \"format\": \"prettier --write .\",\n    \"format:check\": \"prettier --check .\",\n    \"gulp\": \"gulp\",\n    \"watch\": \"gulp watch\",\n    \"guard\": \"gulp guard\",\n    \"check\": \"gulp checkAndFix\",\n    \"commit\": \"git add . &amp;&amp; git commit\",\n    \"setup\": \"npm install &amp;&amp; npm run check\"\n  }\n}\n</code></pre>"},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#_6","title":"\u30c6\u30b9\u30c8\u306e\u57fa\u672c\u69cb\u9020","text":"<pre><code>// src/fizz-buzz.ts\nexport class FizzBuzz {\n  private static readonly MAX_NUMBER = 100\n\n  public static generate(number: number): string {\n    const isFizz = number % 3 === 0\n    const isBuzz = number % 5 === 0\n\n    if (isFizz &amp;&amp; isBuzz) return 'FizzBuzz'\n    if (isFizz) return 'Fizz'\n    if (isBuzz) return 'Buzz'\n\n    return number.toString()\n  }\n\n  public static generateList(): string[] {\n    return Array.from({ length: this.MAX_NUMBER }, (_, i) =&gt; this.generate(i + 1))\n  }\n}\n</code></pre> <pre><code>// src/fizz-buzz.test.ts\nimport { describe, it, expect } from 'vitest'\nimport { FizzBuzz } from './fizz-buzz'\n\ndescribe('FizzBuzz', () =&gt; {\n  describe('\u4e09\u306e\u500d\u6570\u306e\u5834\u5408', () =&gt; {\n    it('3\u3092\u6e21\u3057\u305f\u3089\u6587\u5b57\u5217Fizz\u3092\u8fd4\u3059', () =&gt; {\n      expect(FizzBuzz.generate(3)).toBe('Fizz')\n    })\n  })\n\n  describe('\u4e94\u306e\u500d\u6570\u306e\u5834\u5408', () =&gt; {\n    it('5\u3092\u6e21\u3057\u305f\u3089\u6587\u5b57\u5217Buzz\u3092\u8fd4\u3059', () =&gt; {\n      expect(FizzBuzz.generate(5)).toBe('Buzz')\n    })\n  })\n\n  describe('\u4e09\u3068\u4e94\u306e\u500d\u6570\u306e\u5834\u5408', () =&gt; {\n    it('15\u3092\u6e21\u3057\u305f\u3089\u6587\u5b57\u5217FizzBuzz\u3092\u8fd4\u3059', () =&gt; {\n      expect(FizzBuzz.generate(15)).toBe('FizzBuzz')\n    })\n  })\n})\n</code></pre>"},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#tdd","title":"TDD \u306e\u30b5\u30a4\u30af\u30eb","text":"<pre><code># Red: \u5931\u6557\u3059\u308b\u30c6\u30b9\u30c8\u3092\u66f8\u304f\nnpm run test\n\n# Green: \u30c6\u30b9\u30c8\u3092\u901a\u3059\u6700\u5c0f\u9650\u306e\u5b9f\u88c5\n# \u30b3\u30fc\u30c9\u3092\u4fee\u6b63\n\n# Refactor: \u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\nnpm run test\n\n# \u30b3\u30df\u30c3\u30c8\ngit add .\ngit commit -m 'feat: FizzBuzz \u57fa\u672c\u6a5f\u80fd\u3092\u5b9f\u88c5'\n</code></pre>"},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#3","title":"3. \u81ea\u52d5\u5316","text":""},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#eslint","title":"\u9759\u7684\u30b3\u30fc\u30c9\u89e3\u6790\uff08ESLint\uff09","text":"<pre><code># ESLint \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nnpm install -D eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin eslint-config-prettier eslint-plugin-prettier\n</code></pre>"},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#eslintconfigjs","title":"eslint.config.js \u306e\u8a2d\u5b9a","text":"<pre><code>export default [\n  {\n    files: ['**/*.ts', '**/*.tsx'],\n    languageOptions: {\n      parser: '@typescript-eslint/parser',\n      parserOptions: {\n        ecmaVersion: 2020,\n        sourceType: 'module'\n      }\n    },\n    plugins: {\n      '@typescript-eslint': require('@typescript-eslint/eslint-plugin'),\n      'prettier': require('eslint-plugin-prettier')\n    },\n    rules: {\n      // \u57fa\u672c\u7684\u306a\u30eb\u30fc\u30eb\n      '@typescript-eslint/no-unused-vars': 'error',\n      '@typescript-eslint/no-explicit-any': 'warn',\n\n      // \u5faa\u74b0\u7684\u8907\u96d1\u5ea6\u306e\u5236\u9650\uff087\u4ee5\u4e0b\u3092\u63a8\u5968\uff09\n      'complexity': ['error', { max: 7 }],\n\n      // Prettier \u7d71\u5408\n      'prettier/prettier': 'error'\n    }\n  },\n  {\n    files: ['**/*.test.{ts,tsx}'],\n    rules: {\n      '@typescript-eslint/no-unused-expressions': 'off',\n      '@typescript-eslint/no-unused-vars': 'warn'\n    }\n  }\n]\n</code></pre>"},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#prettier","title":"\u30b3\u30fc\u30c9\u30d5\u30a9\u30fc\u30de\u30c3\u30bf\uff08Prettier\uff09","text":"<pre><code># Prettier \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nnpm install -D prettier eslint-config-prettier eslint-plugin-prettier\n</code></pre>"},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#prettierrc","title":".prettierrc \u306e\u8a2d\u5b9a","text":"<pre><code>{\n  \"semi\": false,\n  \"singleQuote\": true,\n  \"tabWidth\": 2,\n  \"trailingComma\": \"es5\",\n  \"printWidth\": 100,\n  \"endOfLine\": \"lf\"\n}\n</code></pre>"},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#_7","title":"\u30b3\u30fc\u30c9\u30ab\u30d0\u30ec\u30c3\u30b8","text":"<p>Vitest \u306b\u7d44\u307f\u8fbc\u307e\u308c\u305f\u30ab\u30d0\u30ec\u30c3\u30b8\u6a5f\u80fd\u3092\u4f7f\u7528\uff1a</p> <pre><code># \u30ab\u30d0\u30ec\u30c3\u30b8\u306e\u5b9f\u884c\nnpm run test:coverage\n</code></pre>"},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#vitestconfigts","title":"vitest.config.ts \u306e\u8a2d\u5b9a","text":"<pre><code>import { defineConfig } from 'vitest/config'\n\nexport default defineConfig({\n  test: {\n    coverage: {\n      reporter: ['text', 'html', 'json'],\n      reportsDirectory: 'coverage',\n      exclude: [\n        'node_modules/**',\n        'dist/**',\n        '**/*.test.ts',\n        '**/*.config.js',\n        '**/*.config.ts',\n        'src/main.ts'\n      ],\n      all: true,\n      thresholds: {\n        global: {\n          branches: 80,\n          functions: 80,\n          lines: 80,\n          statements: 80\n        }\n      }\n    }\n  }\n})\n</code></pre>"},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#gulp","title":"\u30bf\u30b9\u30af\u30e9\u30f3\u30ca\u30fc\uff08Gulp\uff09","text":"<pre><code># Gulp \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nnpm install -D gulp gulp-shell\n</code></pre>"},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#gulpfilejs","title":"gulpfile.js \u306e\u8a2d\u5b9a","text":"<pre><code>import { watch, series } from 'gulp'\nimport shell from 'gulp-shell'\n\n// \u57fa\u672c\u30bf\u30b9\u30af\nexport const test = shell.task(['npm run test'])\nexport const coverage = shell.task(['npm run test:coverage'])\nexport const lint = shell.task(['npm run lint'])\nexport const lintFix = shell.task(['npm run lint:fix'])\nexport const format = shell.task(['npm run format'])\nexport const formatCheck = shell.task(['npm run format:check'])\nexport const build = shell.task(['npm run build'])\nexport const dev = shell.task(['npm run dev'])\n\n// \u8907\u5408\u30bf\u30b9\u30af\nexport const checkAndFix = series(lintFix, format, test)\n\n// \u30d5\u30a1\u30a4\u30eb\u76e3\u8996\u30bf\u30b9\u30af\uff08Guard\u6a5f\u80fd\uff09\nexport function guard() {\n  console.log('\ud83d\udd0d Guard is watching for file changes...')\n  console.log('Files will be automatically linted, formatted, and tested on change.')\n  watch('src/**/*.ts', series(lintFix, format, test))\n  watch('**/*.test.ts', series(test))\n}\n\n// \u30d5\u30a1\u30a4\u30eb\u76e3\u8996\u30bf\u30b9\u30af\nexport function watchFiles() {\n  watch('src/**/*.ts', series(formatCheck, lint, test))\n  watch('**/*.test.ts', series(test))\n}\n\n// \u30c7\u30d5\u30a9\u30eb\u30c8\u30bf\u30b9\u30af\nexport default series(checkAndFix, guard)\n\n// \u30a6\u30a9\u30c3\u30c1\u30bf\u30b9\u30af\u306e\u30a8\u30a4\u30ea\u30a2\u30b9\nexport { watchFiles as watch }\n</code></pre>"},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#_8","title":"\u958b\u767a\u30ef\u30fc\u30af\u30d5\u30ed\u30fc","text":""},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#1_1","title":"1. \u74b0\u5883\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"<pre><code># \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u521d\u671f\u5316\nnpm init -y\n\n# \u4f9d\u5b58\u95a2\u4fc2\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nnpm install\n\n# \u521d\u671f\u30c1\u30a7\u30c3\u30af\u5b9f\u884c\nnpm run setup\n</code></pre>"},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#2_1","title":"2. \u958b\u767a\u306e\u958b\u59cb","text":"<pre><code># Guard \u3092\u8d77\u52d5\uff08\u81ea\u52d5\u30c6\u30b9\u30c8\u30fb\u30ea\u30f3\u30c8\u30fb\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\uff09\nnpm run guard\n\n# \u5225\u30bf\u30fc\u30df\u30ca\u30eb\u3067\u958b\u767a\u30b5\u30fc\u30d0\u30fc\u3092\u8d77\u52d5\nnpm run dev\n</code></pre>"},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#3-tdd","title":"3. TDD \u30b5\u30a4\u30af\u30eb\u306e\u5b9f\u8df5","text":"<ol> <li> <p>Red: \u5931\u6557\u3059\u308b\u30c6\u30b9\u30c8\u3092\u4f5c\u6210    <pre><code># \u30c6\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\u30fb\u7de8\u96c6\n# Guard \u304c\u81ea\u52d5\u3067\u30c6\u30b9\u30c8\u5b9f\u884c\u3057\u3001\u5931\u6557\u3092\u78ba\u8a8d\n</code></pre></p> </li> <li> <p>Green: \u30c6\u30b9\u30c8\u3092\u901a\u3059\u6700\u5c0f\u9650\u306e\u5b9f\u88c5    <pre><code># \u5b9f\u88c5\u30b3\u30fc\u30c9\u3092\u4f5c\u6210\n# Guard \u304c\u81ea\u52d5\u3067\u30c6\u30b9\u30c8\u5b9f\u884c\u3057\u3001\u6210\u529f\u3092\u78ba\u8a8d\n</code></pre></p> </li> <li> <p>Refactor: \u30b3\u30fc\u30c9\u3092\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0    <pre><code># \u30b3\u30fc\u30c9\u3092\u6539\u5584\n# Guard \u304c\u81ea\u52d5\u3067\u30ea\u30f3\u30c8\u30fb\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u30fb\u30c6\u30b9\u30c8\u5b9f\u884c\n</code></pre></p> </li> <li> <p>Commit: \u4f5c\u696d\u3092\u30b3\u30df\u30c3\u30c8    <pre><code>git add .\ngit commit -m 'feat: \u65b0\u6a5f\u80fd\u3092\u5b9f\u88c5'\n</code></pre></p> </li> </ol>"},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#4","title":"4. \u54c1\u8cea\u30c1\u30a7\u30c3\u30af","text":"<pre><code># \u5168\u4f53\u7684\u306a\u54c1\u8cea\u30c1\u30a7\u30c3\u30af\nnpm run check\n\n# \u30ab\u30d0\u30ec\u30c3\u30b8\u78ba\u8a8d\nnpm run test:coverage\n\n# \u9759\u7684\u89e3\u6790\nnpm run lint\n\n# \u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u30c1\u30a7\u30c3\u30af\nnpm run format:check\n</code></pre>"},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#_9","title":"\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","text":""},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#1_2","title":"1. \u30c6\u30b9\u30c8\u6226\u7565","text":"<ul> <li>\u5358\u4f53\u30c6\u30b9\u30c8: \u5404\u6a5f\u80fd\u306e\u52d5\u4f5c\u3092\u691c\u8a3c</li> <li>\u7d71\u5408\u30c6\u30b9\u30c8: \u8907\u6570\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u9593\u306e\u5354\u8abf\u3092\u691c\u8a3c</li> <li>E2E \u30c6\u30b9\u30c8: \u30e6\u30fc\u30b6\u30fc\u306e\u8996\u70b9\u304b\u3089\u5168\u4f53\u7684\u306a\u52d5\u4f5c\u3092\u691c\u8a3c</li> </ul>"},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#2_2","title":"2. \u30b3\u30fc\u30c9\u54c1\u8cea","text":"<ul> <li>\u5faa\u74b0\u7684\u8907\u96d1\u5ea6: 7\u4ee5\u4e0b\u3092\u7dad\u6301</li> <li>\u30c6\u30b9\u30c8\u30ab\u30d0\u30ec\u30c3\u30b8: 80%\u4ee5\u4e0a\u3092\u76ee\u6a19</li> <li>ESLint \u30eb\u30fc\u30eb: \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u5fdc\u3058\u3066\u30ab\u30b9\u30bf\u30de\u30a4\u30ba</li> </ul>"},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#3_1","title":"3. \u7d99\u7d9a\u7684\u6539\u5584","text":"<ul> <li>\u5b9a\u671f\u7684\u306a\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0: \u6280\u8853\u7684\u8ca0\u50b5\u306e\u84c4\u7a4d\u3092\u9632\u3050</li> <li>\u30b3\u30fc\u30c9\u30ec\u30d3\u30e5\u30fc: \u30c1\u30fc\u30e0\u5168\u4f53\u306e\u30b3\u30fc\u30c9\u54c1\u8cea\u5411\u4e0a</li> <li>\u30c4\u30fc\u30eb\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8: \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3068\u6027\u80fd\u306e\u7dad\u6301</li> </ul>"},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#_10","title":"\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0","text":""},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#_11","title":"\u3088\u304f\u3042\u308b\u554f\u984c\u3068\u89e3\u6c7a\u6cd5","text":""},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#1_3","title":"1. \u30c6\u30b9\u30c8\u304c\u5b9f\u884c\u3055\u308c\u306a\u3044","text":"<pre><code># node_modules \u3092\u518d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nrm -rf node_modules package-lock.json\nnpm install\n\n# \u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u30af\u30ea\u30a2\nnpm cache clean --force\n</code></pre>"},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#2-eslint","title":"2. ESLint \u30a8\u30e9\u30fc\u304c\u767a\u751f","text":"<pre><code># \u81ea\u52d5\u4fee\u6b63\u3092\u8a66\u884c\nnpm run lint:fix\n\n# \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u78ba\u8a8d\ncat eslint.config.js\n</code></pre>"},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#3-typescript","title":"3. TypeScript \u30b3\u30f3\u30d1\u30a4\u30eb\u30a8\u30e9\u30fc","text":"<pre><code># TypeScript \u8a2d\u5b9a\u3092\u78ba\u8a8d\ncat tsconfig.json\n\n# \u578b\u5b9a\u7fa9\u3092\u518d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nnpm install -D @types/node\n</code></pre>"},{"location":"reference/TypeScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/#_12","title":"\u53c2\u8003\u8cc7\u6599","text":"<ul> <li>Conventional Commits</li> <li>Vitest \u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8</li> <li>ESLint \u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8</li> <li>Prettier \u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8</li> <li>TypeScript \u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8</li> </ul> <p>\u3053\u306e\u30ac\u30a4\u30c9\u306b\u5f93\u3063\u3066\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b\u3053\u3068\u3067\u3001\u52b9\u7387\u7684\u3067\u54c1\u8cea\u306e\u9ad8\u3044 TypeScript \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u958b\u767a\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/","title":"UI\u8a2d\u8a08\u30ac\u30a4\u30c9","text":""},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#uiooux","title":"\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u6307\u5411UI\u8a2d\u8a08\uff08OOUX\uff09","text":""},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_1","title":"\u57fa\u672c\u7406\u5ff5","text":"<p>\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u6307\u5411UI\u8a2d\u8a08\u306f\u3001\u30e6\u30fc\u30b6\u30fc\u304c\u64cd\u4f5c\u3059\u308b\u300c\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u300d\u3092\u4e2d\u5fc3\u306bUI\u3092\u8a2d\u8a08\u3059\u308b\u3053\u3068\u3067\u3001\u3088\u308a\u76f4\u611f\u7684\u3067\u7406\u89e3\u3057\u3084\u3059\u3044\u30e6\u30fc\u30b6\u30fc\u30a8\u30af\u30b9\u30da\u30ea\u30a8\u30f3\u30b9\u3092\u63d0\u4f9b\u3059\u308b\u8a2d\u8a08\u624b\u6cd5\u3067\u3059\u3002</p>"},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#4","title":"4\u3064\u306e\u4e3b\u8981\u539f\u5247","text":""},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#1","title":"1. \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u7279\u5b9a","text":"<ul> <li>\u30e6\u30fc\u30b6\u30fc\u304c\u30b7\u30b9\u30c6\u30e0\u5185\u3067\u64cd\u4f5c\u3059\u308b\u4e3b\u8981\u306a\u300c\u30e2\u30ce\u300d\u3092\u7279\u5b9a</li> <li>\u540d\u8a5e\u3067\u8868\u73fe\u3067\u304d\u308b\u3082\u306e\uff08\u4f8b\uff1a\u751f\u5f92\u3001\u6559\u54e1\u3001\u90e8\u3001\u30a4\u30d9\u30f3\u30c8\u3001\u6587\u66f8\u3001\u5546\u54c1\u306a\u3069\uff09</li> <li>\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\u3068\u5bc6\u63a5\u306b\u95a2\u9023</li> </ul>"},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#2","title":"2. \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u9593\u306e\u95a2\u4fc2\u306e\u5b9a\u7fa9","text":"<ul> <li>\u7279\u5b9a\u3055\u308c\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u4e92\u3044\u306b\u3069\u306e\u3088\u3046\u306b\u95a2\u9023\u3057\u3066\u3044\u308b\u304b\u3092\u660e\u78ba\u5316</li> <li>\u95a2\u4fc2\u306e\u7a2e\u985e\uff1a</li> <li>\u4e00\u5bfe\u4e00\uff081:1\uff09</li> <li>\u4e00\u5bfe\u591a\uff081:N\uff09</li> <li>\u591a\u5bfe\u591a\uff08M:N\uff09</li> <li>\u96c6\u7d04\u30fb\u30b3\u30f3\u30dd\u30b8\u30b7\u30e7\u30f3</li> </ul>"},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#3","title":"3. \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30a2\u30af\u30b7\u30e7\u30f3\u306e\u5b9a\u7fa9","text":"<ul> <li>\u5404\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u3057\u3066\u30e6\u30fc\u30b6\u30fc\u304c\u3069\u306e\u3088\u3046\u306a\u64cd\u4f5c\u3092\u5b9f\u884c\u3067\u304d\u308b\u304b\u3092\u5b9a\u7fa9</li> <li>\u57fa\u672c\u7684\u306aCRUD\u64cd\u4f5c\uff1a</li> <li>Create\uff08\u4f5c\u6210\uff09</li> <li>Read\uff08\u8aad\u307f\u53d6\u308a\uff09</li> <li>Update\uff08\u66f4\u65b0\uff09</li> <li>Delete\uff08\u524a\u9664\uff09</li> <li>\u30c9\u30e1\u30a4\u30f3\u56fa\u6709\u306e\u30a2\u30af\u30b7\u30e7\u30f3</li> </ul>"},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#4_1","title":"4. \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u5c5e\u6027\u306e\u5b9a\u7fa9","text":"<ul> <li>\u5404\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u3069\u306e\u3088\u3046\u306a\u60c5\u5831\uff08\u5c5e\u6027\uff09\u3092\u6301\u3063\u3066\u3044\u308b\u304b\u3092\u5b9a\u7fa9</li> <li>\u8868\u793a\u3059\u3079\u304d\u5c5e\u6027\u306e\u512a\u5148\u9806\u4f4d</li> <li>\u7de8\u96c6\u53ef\u80fd\u306a\u5c5e\u6027\u306e\u7bc4\u56f2</li> </ul>"},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#ui_1","title":"UI\u69cb\u9020\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_2","title":"\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u30d3\u30e5\u30fc","text":"<p>\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u4e00\u89a7\u3092\u8868\u793a\u3059\u308b\u30d3\u30e5\u30fc\u30d1\u30bf\u30fc\u30f3</p> <p></p> <p>\u7279\u5fb4\uff1a - \u8907\u6570\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4e00\u89a7\u8868\u793a - \u691c\u7d22\u30fb\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u6a5f\u80fd - \u65b0\u898f\u4f5c\u6210\u306e\u30a8\u30f3\u30c8\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8 - \u500b\u5225\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3078\u306e navigation</p>"},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_3","title":"\u30b7\u30f3\u30b0\u30eb\u30d3\u30e5\u30fc","text":"<p>\u500b\u5225\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u8a73\u7d30\u3092\u8868\u793a\u3059\u308b\u30d3\u30e5\u30fc\u30d1\u30bf\u30fc\u30f3</p> <p></p> <p>\u7279\u5fb4\uff1a - \u5358\u4e00\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u8a73\u7d30\u60c5\u5831\u8868\u793a - \u7de8\u96c6\u30fb\u524a\u9664\u306a\u3069\u306e\u30a2\u30af\u30b7\u30e7\u30f3 - \u95a2\u9023\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3078\u306e\u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3 - \u30e2\u30fc\u30c9\u5207\u308a\u66ff\u3048\uff08\u8868\u793a\u21d4\u7de8\u96c6\uff09</p>"},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_4","title":"\u30ec\u30a4\u30a2\u30a6\u30c8\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_5","title":"\u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3\u914d\u7f6e","text":""},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_6","title":"\u5de6\u30b5\u30a4\u30c9\u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3","text":""},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_7","title":"\u30c8\u30c3\u30d7\u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3","text":""},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_8","title":"\u30d3\u30e5\u30fc\u914d\u7f6e\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_9","title":"\u5358\u4e00\u30e1\u30a4\u30f3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8","text":"<ul> <li>\u753b\u9762\u30922\u3064\u306e\u30da\u30a4\u30f3\u306b\u5206\u5272</li> <li>\u5de6\uff1a\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u30d3\u30e5\u30fc\u3001\u53f3\uff1a\u30b7\u30f3\u30b0\u30eb\u30d3\u30e5\u30fc</li> </ul>"},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_10","title":"\u30bf\u30d6\u5f0f\u5207\u308a\u66ff\u3048","text":"<ul> <li>\u30bf\u30d6\u3067\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u30d3\u30e5\u30fc\u3068\u30b7\u30f3\u30b0\u30eb\u30d3\u30e5\u30fc\u3092\u5207\u308a\u66ff\u3048</li> </ul>"},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_11","title":"\u30e2\u30fc\u30c0\u30eb\u5f0f","text":"<ul> <li>\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u30d3\u30e5\u30fc\u3092\u30d9\u30fc\u30b9\u306b\u3001\u30b7\u30f3\u30b0\u30eb\u30d3\u30e5\u30fc\u3092\u30e2\u30fc\u30c0\u30eb\u3067\u8868\u793a</li> </ul>"},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_12","title":"\u30a2\u30af\u30b7\u30e7\u30f3\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#create","title":"Create\uff08\u4f5c\u6210\uff09\u30a2\u30af\u30b7\u30e7\u30f3","text":""},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_13","title":"\u30d6\u30e9\u30f3\u30af\u30d1\u30bf\u30fc\u30f3","text":"<pre><code>// \u7a7a\u306e\u30d5\u30a9\u30fc\u30e0\u3092\u8868\u793a\u3057\u3066\u65b0\u898f\u4f5c\u6210\nconst createStudent = () =&gt; {\n  return {\n    id: null,\n    name: '',\n    class: '',\n    clubs: [],\n    relatedStudents: []\n  };\n};\n</code></pre>"},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_14","title":"\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d1\u30bf\u30fc\u30f3","text":"<pre><code>// \u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3092\u6301\u3064\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089\u4f5c\u6210\nconst createStudentFromTemplate = (template) =&gt; {\n  return {\n    ...template,\n    id: generateNewId(),\n    name: '',\n    createdAt: new Date()\n  };\n};\n</code></pre>"},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#update","title":"Update\uff08\u66f4\u65b0\uff09\u30a2\u30af\u30b7\u30e7\u30f3","text":""},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_15","title":"\u30e2\u30fc\u30c9\u30ec\u30b9\u30a8\u30c7\u30a3\u30c3\u30c8\u30d1\u30bf\u30fc\u30f3","text":"<pre><code>// \u540c\u4e00\u753b\u9762\u3067\u8868\u793a\u3068\u7de8\u96c6\u3092\u5207\u308a\u66ff\u3048\nconst toggleEditMode = (student, isEditing) =&gt; {\n  if (isEditing) {\n    return renderEditForm(student);\n  } else {\n    return renderDisplayView(student);\n  }\n};\n</code></pre>"},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_16","title":"\u30a4\u30f3\u30e9\u30a4\u30f3\u30a8\u30c7\u30a3\u30c3\u30c8\u30d1\u30bf\u30fc\u30f3","text":"<pre><code>// \u9805\u76ee\u3054\u3068\u306b\u76f4\u63a5\u7de8\u96c6\u53ef\u80fd\nconst renderInlineEdit = (property, value) =&gt; {\n  return `\n    &lt;div class=\"inline-edit\" data-property=\"${property}\"&gt;\n      &lt;span class=\"display\"&gt;${value}&lt;/span&gt;\n      &lt;input class=\"edit\" value=\"${value}\" style=\"display:none\"&gt;\n    &lt;/div&gt;\n  `;\n};\n</code></pre>"},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#delete","title":"Delete\uff08\u524a\u9664\uff09\u30a2\u30af\u30b7\u30e7\u30f3","text":""},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_17","title":"\u30e2\u30fc\u30c0\u30eb\u78ba\u8a8d\u30d1\u30bf\u30fc\u30f3","text":"<pre><code>const deleteWithConfirmation = (student) =&gt; {\n  const confirmed = confirm(`${student.name}\u3092\u524a\u9664\u3057\u307e\u3059\u304b\uff1f`);\n  if (confirmed) {\n    deleteStudent(student.id);\n    refreshView();\n  }\n};\n</code></pre>"},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_18","title":"\u30bd\u30d5\u30c8\u30c7\u30ea\u30fc\u30c8\u30d1\u30bf\u30fc\u30f3","text":"<pre><code>const softDelete = (student) =&gt; {\n  student.deletedAt = new Date();\n  student.isActive = false;\n  updateStudent(student);\n};\n</code></pre>"},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_19","title":"\u5b9f\u88c5\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3","text":""},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_20","title":"\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u8a2d\u8a08","text":""},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_21","title":"\u8cac\u4efb\u306e\u5206\u96e2","text":"<pre><code>// \u274c \u60aa\u3044\u4f8b\uff1a\u3059\u3079\u3066\u304c\u6df7\u5728\nconst StudentComponent = () =&gt; {\n  // \u30c7\u30fc\u30bf\u53d6\u5f97\u3001\u72b6\u614b\u7ba1\u7406\u3001UI\u63cf\u753b\u304c\u3059\u3079\u3066\u6df7\u5728\n};\n\n// \u2705 \u826f\u3044\u4f8b\uff1a\u8cac\u4efb\u3092\u5206\u96e2\nconst StudentContainer = () =&gt; {\n  // \u30c7\u30fc\u30bf\u53d6\u5f97\u3068\u72b6\u614b\u7ba1\u7406\n};\n\nconst StudentView = ({ students, onAction }) =&gt; {\n  // UI\u63cf\u753b\u306e\u307f\n};\n</code></pre>"},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_22","title":"\u72b6\u614b\u7ba1\u7406\u30d1\u30bf\u30fc\u30f3","text":"<pre><code>// \u72b6\u614b\u306e\u69cb\u9020\u5316\nconst studentState = {\n  collection: {\n    items: [],\n    loading: false,\n    filter: '',\n    sortBy: 'name'\n  },\n  selected: {\n    item: null,\n    mode: 'READ' // READ, EDIT, CREATE\n  }\n};\n</code></pre>"},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_23","title":"\u30a2\u30af\u30bb\u30b7\u30d3\u30ea\u30c6\u30a3\u8003\u616e\u4e8b\u9805","text":""},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_24","title":"\u30ad\u30fc\u30dc\u30fc\u30c9\u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3","text":"<pre><code>// \u30d5\u30a9\u30fc\u30ab\u30b9\u7ba1\u7406\nconst handleKeyDown = (event) =&gt; {\n  switch (event.key) {\n    case 'Enter':\n      selectItem();\n      break;\n    case 'Escape':\n      cancelEdit();\n      break;\n    case 'ArrowDown':\n      moveToNextItem();\n      break;\n  }\n};\n</code></pre>"},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_25","title":"\u30b9\u30af\u30ea\u30fc\u30f3\u30ea\u30fc\u30c0\u30fc\u5bfe\u5fdc","text":"<pre><code>&lt;!-- \u30bb\u30de\u30f3\u30c6\u30a3\u30c3\u30af\u306aHTML\u69cb\u9020 --&gt;\n&lt;main role=\"main\"&gt;\n  &lt;section aria-label=\"\u5b66\u751f\u4e00\u89a7\"&gt;\n    &lt;h1&gt;\u5b66\u751f&lt;/h1&gt;\n    &lt;ul role=\"list\"&gt;\n      &lt;li role=\"listitem\" tabindex=\"0\"&gt;\n        &lt;span aria-label=\"\u5b66\u751f\u540d\"&gt;\u7530\u4e2d\u592a\u90ce&lt;/span&gt;\n      &lt;/li&gt;\n    &lt;/ul&gt;\n  &lt;/section&gt;\n&lt;/main&gt;\n</code></pre>"},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_26","title":"\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6700\u9069\u5316","text":""},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_27","title":"\u4eee\u60f3\u5316","text":"<pre><code>// \u5927\u91cf\u30c7\u30fc\u30bf\u306e\u8868\u793a\u6700\u9069\u5316\nconst VirtualizedList = ({ items, itemHeight = 50 }) =&gt; {\n  const [scrollTop, setScrollTop] = useState(0);\n  const containerHeight = 400;\n\n  const visibleStart = Math.floor(scrollTop / itemHeight);\n  const visibleEnd = Math.min(\n    visibleStart + Math.ceil(containerHeight / itemHeight),\n    items.length\n  );\n\n  return (\n    &lt;div style={{ height: containerHeight, overflow: 'auto' }}&gt;\n      {items.slice(visibleStart, visibleEnd).map(renderItem)}\n    &lt;/div&gt;\n  );\n};\n</code></pre>"},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_28","title":"\u9045\u5ef6\u8aad\u307f\u8fbc\u307f","text":"<pre><code>// \u95a2\u9023\u30c7\u30fc\u30bf\u306e\u6bb5\u968e\u7684\u8aad\u307f\u8fbc\u307f\nconst loadStudentDetails = async (studentId) =&gt; {\n  const student = await fetchStudent(studentId);\n  // \u57fa\u672c\u60c5\u5831\u3092\u307e\u305a\u8868\u793a\n\n  const [clubs, relatedStudents] = await Promise.all([\n    fetchStudentClubs(studentId),\n    fetchRelatedStudents(studentId)\n  ]);\n  // \u95a2\u9023\u60c5\u5831\u3092\u5f8c\u304b\u3089\u8ffd\u52a0\n};\n</code></pre>"},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_29","title":"\u54c1\u8cea\u4fdd\u8a3c","text":""},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_30","title":"\u30c6\u30b9\u30c8\u6226\u7565","text":""},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_31","title":"\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8","text":"<pre><code>describe('StudentComponent', () =&gt; {\n  test('should display student list', () =&gt; {\n    const students = [{ id: 1, name: '\u7530\u4e2d\u592a\u90ce' }];\n    render(&lt;StudentComponent students={students} /&gt;);\n    expect(screen.getByText('\u7530\u4e2d\u592a\u90ce')).toBeInTheDocument();\n  });\n\n  test('should handle create action', () =&gt; {\n    const onCreateMock = jest.fn();\n    render(&lt;StudentComponent onCreate={onCreateMock} /&gt;);\n    fireEvent.click(screen.getByText('\u65b0\u898f'));\n    expect(onCreateMock).toHaveBeenCalled();\n  });\n});\n</code></pre>"},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_32","title":"\u7d71\u5408\u30c6\u30b9\u30c8","text":"<pre><code>describe('Student CRUD flow', () =&gt; {\n  test('should complete full CRUD cycle', async () =&gt; {\n    // Create\n    await createStudent({ name: '\u7530\u4e2d\u592a\u90ce' });\n    expect(await findByText('\u7530\u4e2d\u592a\u90ce')).toBeInTheDocument();\n\n    // Read\n    fireEvent.click(await findByText('\u7530\u4e2d\u592a\u90ce'));\n    expect(await findByText('\u8a73\u7d30\u60c5\u5831')).toBeInTheDocument();\n\n    // Update\n    fireEvent.click(await findByText('\u7de8\u96c6'));\n    fireEvent.change(getByDisplayValue('\u7530\u4e2d\u592a\u90ce'), { \n      target: { value: '\u7530\u4e2d\u6b21\u90ce' } \n    });\n    fireEvent.click(await findByText('\u4fdd\u5b58'));\n    expect(await findByText('\u7530\u4e2d\u6b21\u90ce')).toBeInTheDocument();\n\n    // Delete\n    fireEvent.click(await findByText('\u524a\u9664'));\n    fireEvent.click(await findByText('\u78ba\u8a8d'));\n    expect(queryByText('\u7530\u4e2d\u6b21\u90ce')).not.toBeInTheDocument();\n  });\n});\n</code></pre>"},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_33","title":"\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0","text":""},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_34","title":"\u30e6\u30fc\u30b6\u30fc\u30d5\u30ec\u30f3\u30c9\u30ea\u30fc\u306a\u30a8\u30e9\u30fc\u8868\u793a","text":"<pre><code>const ErrorBoundary = ({ children }) =&gt; {\n  const [hasError, setHasError] = useState(false);\n  const [error, setError] = useState(null);\n\n  if (hasError) {\n    return (\n      &lt;div className=\"error-container\"&gt;\n        &lt;h2&gt;\u7533\u3057\u8a33\u3054\u3056\u3044\u307e\u305b\u3093&lt;/h2&gt;\n        &lt;p&gt;\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002&lt;/p&gt;\n        &lt;button onClick={() =&gt; window.location.reload()}&gt;\n          \u30da\u30fc\u30b8\u3092\u518d\u8aad\u307f\u8fbc\u307f\n        &lt;/button&gt;\n      &lt;/div&gt;\n    );\n  }\n\n  return children;\n};\n</code></pre>"},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_35","title":"\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3","text":"<pre><code>const validateStudent = (student) =&gt; {\n  const errors = {};\n\n  if (!student.name?.trim()) {\n    errors.name = '\u540d\u524d\u306f\u5fc5\u9808\u3067\u3059';\n  }\n\n  if (student.name?.length &gt; 100) {\n    errors.name = '\u540d\u524d\u306f100\u6587\u5b57\u4ee5\u5185\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044';\n  }\n\n  if (!student.class) {\n    errors.class = '\u7d44\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044';\n  }\n\n  return {\n    isValid: Object.keys(errors).length === 0,\n    errors\n  };\n};\n</code></pre>"},{"location":"reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_36","title":"\u307e\u3068\u3081","text":"<p>\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u6307\u5411UI\u8a2d\u8a08\u306f\u3001\u30e6\u30fc\u30b6\u30fc\u306b\u3068\u3063\u3066\u76f4\u611f\u7684\u3067\u7406\u89e3\u3057\u3084\u3059\u3044\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u69cb\u7bc9\u3059\u308b\u305f\u3081\u306e\u5f37\u529b\u306a\u624b\u6cd5\u3067\u3059\u30024\u3064\u306e\u4e3b\u8981\u539f\u5247\u306b\u5f93\u3063\u3066\u8a2d\u8a08\u3059\u308b\u3053\u3068\u3067\u3001\u4e00\u8cab\u6027\u304c\u3042\u308a\u3001\u4fdd\u5b88\u6027\u306e\u9ad8\u3044UI\u3092\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002</p> <p>\u91cd\u8981\u306a\u30dd\u30a4\u30f3\u30c8\uff1a - \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u4e2d\u5fc3\u306e\u8a2d\u8a08\u601d\u8003 - \u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u30fb\u30b7\u30f3\u30b0\u30eb\u30d3\u30e5\u30fc\u306e\u9069\u5207\u306a\u4f7f\u3044\u5206\u3051 - \u30a2\u30af\u30b7\u30e7\u30f3\u30d1\u30bf\u30fc\u30f3\u306e\u7d71\u4e00 - \u30a2\u30af\u30bb\u30b7\u30d3\u30ea\u30c6\u30a3\u3068\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u8003\u616e - \u5305\u62ec\u7684\u306a\u30c6\u30b9\u30c8\u6226\u7565</p>"},{"location":"reference/%E3%82%88%E3%81%84%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%81%A8%E3%81%AF/","title":"\u3088\u3044\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3068\u306f","text":""},{"location":"reference/%E3%82%88%E3%81%84%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%81%A8%E3%81%AF/#_2","title":"\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u76ee\u7684","text":"<ul> <li>\u554f\u984c\u89e3\u6c7a: </li> <li>\u5358\u306a\u308b\u300c\u52d5\u304f\u30d7\u30ed\u30b0\u30e9\u30e0\u300d\u3067\u306f\u306a\u304f\u554f\u984c\u3092\u89e3\u6c7a\u3059\u308b\u3082\u306e</li> <li>\u672c\u8cea\u7684\u306a\u76ee\u7684:</li> <li>\u30e6\u30fc\u30b6\u30fc\u306e\u554f\u984c\u89e3\u6c7a: \u8ab2\u984c\u3084\u4e0d\u4fbf\u3092\u89e3\u6d88</li> <li>\u30d3\u30b8\u30cd\u30b9\u4fa1\u5024\u306e\u5275\u51fa: \u7d44\u7e54\u3084\u30d3\u30b8\u30cd\u30b9\u306b\u5229\u76ca\u3092\u3082\u305f\u3089\u3059</li> <li>\u52b9\u7387\u5316\u3068\u81ea\u52d5\u5316: \u6642\u9593\u3084\u52b4\u529b\u3092\u7bc0\u7d04</li> <li>\u30a4\u30ce\u30d9\u30fc\u30b7\u30e7\u30f3\u306e\u5b9f\u73fe: \u65b0\u3057\u3044\u4f53\u9a13\u3084\u53ef\u80fd\u6027\u3092\u63d0\u4f9b</li> </ul>"},{"location":"reference/%E3%82%88%E3%81%84%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%81%A8%E3%81%AF/#_3","title":"\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u4fa1\u5024","text":"<ul> <li>\u6a5f\u80fd\u6027: \u30e6\u30fc\u30b6\u30fc\u306e\u554f\u984c\u3092\u3061\u3083\u3093\u3068\u89e3\u6c7a\u3067\u304d\u308b\u304b</li> <li>\u4f7f\u3044\u3084\u3059\u3055: \u512a\u308c\u305f\u6a5f\u80fd\u3067\u3082\u4f7f\u3044\u306b\u304f\u3051\u308c\u3070\u610f\u5473\u304c\u306a\u3044</li> <li>\u4fe1\u983c\u6027: \u5b89\u5b9a\u3057\u3066\u52d5\u4f5c\u3059\u308b\u304b</li> <li>\u4fdd\u5b88\u6027: \u9577\u671f\u9593\u306b\u308f\u305f\u3063\u3066\u6539\u5584\u30fb\u7dad\u6301\u3067\u304d\u308b\u304b</li> </ul>"},{"location":"reference/%E3%82%88%E3%81%84%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%81%A8%E3%81%AF/#_4","title":"\u3088\u3044\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u5fc5\u8981\u5341\u5206\u6761\u4ef6","text":"<p>\u5909\u66f4\u3092\u697d\u306b\u5b89\u5168\u306b\u3067\u304d\u3066\u5f79\u306b\u7acb\u3064\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3067\u3042\u308b\u3053\u3068\u304c\u5fc5\u8981\u5341\u5206\u6761\u4ef6\u3067\u3042\u308b\u3002 \u5909\u66f4\u3092\u697d\u306b\u5b89\u5168\u306b\u3067\u304d\u3066\u5f79\u306b\u7acb\u3064\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3067\u3042\u308c\u3070\u3088\u3044\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3067\u3042\u308b\u3002</p> <p>\u5909\u66f4\u3092\u697d\u306b\u5b89\u5168\u306b\u3067\u304d\u306a\u304f\u3066\u3082\u5f79\u306b\u7acb\u3064\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306f\u3042\u308b\u306e\u3067\u306f\u306a\u3044\u304b\uff1f</p>"},{"location":"reference/%E3%82%88%E3%81%84%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%81%A8%E3%81%AF/#_5","title":"\u3088\u3044\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u5185\u90e8\u8981\u56e0\u3068\u5916\u90e8\u8981\u56e0","text":""},{"location":"reference/%E3%82%88%E3%81%84%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%81%A8%E3%81%AF/#_6","title":"\u5185\u90e8\u8981\u56e0","text":"<p>\u5185\u90e8\u8981\u56e0:\u81ea\u5206\u3067\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u3067\u304d\u308b\u90e8\u5206</p>"},{"location":"reference/%E3%82%88%E3%81%84%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%81%A8%E3%81%AF/#_7","title":"\u5916\u90e8\u8981\u56e0","text":"<p>\u5916\u90e8\u8981\u56e0:\u81ea\u5206\u3067\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u3067\u304d\u306a\u3044\u90e8\u5206</p>"},{"location":"reference/%E3%82%88%E3%81%84%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%81%A8%E3%81%AF/#_8","title":"\u3060\u3081\u306a\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2","text":""},{"location":"reference/%E3%82%88%E3%81%84%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%81%A8%E3%81%AF/#_9","title":"\u3078\u308d\u3078\u308d\u30b9\u30af\u30e9\u30e0","text":"<p>\u3078\u308d\u3078\u308d\u30b9\u30af\u30e9\u30e0\u304c\u7d9a\u304f\u3068\u3001\u30c1\u30fc\u30e0\u306f\u75b2\u5f0a\u3057\u3001\u9867\u5ba2\u6e80\u8db3\u5ea6\u306f\u4f4e\u4e0b\u3057\u3001\u6280\u8853\u7684\u8ca0\u50b5\u304c\u84c4\u7a4d\u3059\u308b\u3002\u000b\u30b9\u30af\u30e9\u30e0\u306e\u540d\u3092\u501f\u308a\u305f\u5358\u306a\u308b\u300c\u73fe\u4ee3\u7684\u306a\u643e\u53d6\u30b7\u30b9\u30c6\u30e0\u300d\u306b\u306a\u308a\u304b\u306d\u306a\u3044\u3002\u000b\u7d50\u5c40\u3001\u30a2\u30b8\u30e3\u30a4\u30eb\u306e\u898b\u304b\u3051\u3060\u3051\u3067\u672c\u8cea\u3092\u7406\u89e3\u3057\u3066\u3044\u306a\u3044\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u306e\u81ea\u5df1\u6e80\u8db3\u3060\u3051\u304c\u6b8b\u308b\u3002</p>"},{"location":"reference/%E3%82%88%E3%81%84%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%81%A8%E3%81%AF/#_10","title":"\u52d5\u4f5c\u3059\u308b\u304d\u308c\u3044\u306a\u30b4\u30df","text":"<p>\u6280\u8853\u7684\u306b\u306f\u5b8c\u74a7\u306a\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u3088\u3046\u306b\u898b\u3048\u308b\u304c\u3001\u8ab0\u3082\u4f7f\u308f\u306a\u3044\u305f\u3060\u306e\u30b4\u30df\u000b</p>"},{"location":"reference/%E3%82%88%E3%81%84%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%81%A8%E3%81%AF/#_11","title":"\u3088\u3044\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2","text":"<p>\u672c\u5f53\u306b\u826f\u3044\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u4f5c\u308b\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u30d0\u30e9\u30f3\u30b9\u304c\u5fc5\u8981\uff1a</p> <ol> <li>\u6280\u8853\u7684\u306a\u5353\u8d8a\u6027 - \u30b3\u30fc\u30c9\u306e\u54c1\u8cea\u3001\u4fdd\u5b88\u6027\u3001\u62e1\u5f35\u6027</li> <li>\u30d3\u30b8\u30cd\u30b9\u4fa1\u5024 - \u5e02\u5834\u30cb\u30fc\u30ba\u3001\u53ce\u76ca\u5275\u51fa\u3001\u7af6\u4e89\u512a\u4f4d\u6027\u000b</li> <li>\u30e6\u30fc\u30b6\u30fc\u4e2d\u5fc3\u8a2d\u8a08 - \u4f7f\u3044\u3084\u3059\u3055\u3001\u554f\u984c\u89e3\u6c7a\u529b\u000b4. \u5065\u5168\u306a\u30c1\u30fc\u30e0\u6587\u5316 - \u5fc3\u7406\u7684\u5b89\u5168\u6027\u3001\u81ea\u5df1\u7d44\u7e54\u5316\u3001\u7d99\u7d9a\u7684\u6539\u5584</li> </ol>"},{"location":"reference/%E3%82%88%E3%81%84%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%81%A8%E3%81%AF/#_12","title":"\u3088\u3044\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u4f5c\u308b\u305f\u3081\u306e\u898f\u5f8b","text":""},{"location":"reference/%E3%82%88%E3%81%84%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%81%A8%E3%81%AF/#_13","title":"\u898f\u5f8b\u3068\u306f","text":"<p>\u201d\u898f\u5f8b\u3068\u306f\u300c\u672c\u8cea\u7684\u306a\u90e8\u5206\u300d\u3068\u300c\u4efb\u610f\u306e\u90e8\u5206\u300d\u3067\u69cb\u6210\u3055\u308c\u308b\u4e00\u9023\u306e\u30eb\u30fc\u30eb\u3067\u3042\u308b\u3002\u201d \u00a0Clean Craftsmanship\u3000\u898f\u5f8b\u3001\u57fa\u6e96\u3001\u502b\u7406 (\u30a2\u30b9\u30ad\u30fc\u30c9\u30ef\u30f3\u30b4)</p> <p>\u672c\u8cea\u7684\u306a\u90e8\u5206\u30fb\u30fb\u30fb\u3088\u3044\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u4f5c\u308b\u30d1\u30ef\u30fc\u3092\u4e0e\u3048\u308b \u4efb\u610f\u306e\u90e8\u5206\u30fb\u30fb\u30fb\u3088\u3044\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u4f5c\u308b\u305f\u3081\u306b\u5f93\u3046\u30d7\u30e9\u30af\u30c6\u30a3\u30b9</p>"},{"location":"reference/%E3%82%88%E3%81%84%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%81%A8%E3%81%AF/#3p","title":"\u30bd\u30d5\u30c8\u30a6\u30a8\u30a2\u958b\u767a\u306e3P(\u30d7\u30ea\u30f3\u30b7\u30d1\u30eb\u30fb\u30d1\u30bf\u30fc\u30f3\u30fb\u30d7\u30e9\u30af\u30c6\u30a3\u30b9)","text":"<ul> <li>SOLID\u539f\u5247: \u5358\u4e00\u8cac\u4efb\u3001\u958b\u653e\u9589\u9396\u3001\u30ea\u30b9\u30b3\u30d5\u306e\u7f6e\u63db\u3001\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u5206\u96e2\u3001\u4f9d\u5b58\u6027\u9006\u8ee2</li> <li>\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3: \u518d\u5229\u7528\u53ef\u80fd\u306a\u8a2d\u8a08\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3</li> <li>\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30d1\u30bf\u30fc\u30f3\uff1a\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3067\u767a\u751f\u3059\u308b\u554f\u984c\u306e\u89e3\u6c7a\u7b56</li> <li>\u30c9\u30e1\u30a4\u30f3\u99c6\u52d5\u8a2d\u8a08: \u30d3\u30b8\u30cd\u30b9\u30c9\u30e1\u30a4\u30f3\u306b\u7126\u70b9\u3092\u5f53\u3066\u305f\u8a2d\u8a08</li> <li>\u30c6\u30b9\u30c8\u99c6\u52d5\u958b\u767a: \u30c6\u30b9\u30c8\u3092\u5148\u306b\u66f8\u3044\u3066\u304b\u3089\u5b9f\u88c5</li> <li>\u7d99\u7d9a\u7684\u30c7\u30ea\u30d0\u30ea\u30fc: \u5c0f\u3055\u306a\u5909\u66f4\u3092\u983b\u7e41\u306b\u30ea\u30ea\u30fc\u30b9</li> </ul>"},{"location":"reference/%E3%82%88%E3%81%84%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%81%A8%E3%81%AF/#_14","title":"\u30b5\u30fc\u30af\u30eb\u30aa\u30d6\u30e9\u30a4\u30d5","text":""},{"location":"reference/%E3%82%88%E3%81%84%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%81%A8%E3%81%AF/#_15","title":"\u30d3\u30b8\u30cd\u30b9\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","text":""},{"location":"reference/%E3%82%88%E3%81%84%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%81%A8%E3%81%AF/#_16","title":"\u30c1\u30fc\u30e0\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","text":""},{"location":"reference/%E3%82%88%E3%81%84%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%81%A8%E3%81%AF/#_17","title":"\u30c6\u30af\u30cb\u30ab\u30eb\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","text":""},{"location":"reference/%E3%82%88%E3%81%84%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%81%A8%E3%81%AF/#_18","title":"\u62e1\u5f35\u30b5\u30fc\u30af\u30eb\u30aa\u30d6\u30e9\u30a4\u30d5","text":""},{"location":"reference/%E3%82%88%E3%81%84%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%81%A8%E3%81%AF/#_19","title":"\u7d50\u8ad6","text":"<p>\u77ed\u671f\u7684\u306b\u306f\u5909\u66f4\u3092\u697d\u306b\u5b89\u5168\u306b\u3067\u304d\u306a\u304f\u3066\u3082\u5f79\u306b\u7acb\u3064\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u4f5c\u308b\u3053\u3068\u306f\u3067\u304d\u308b\u3002 \u3057\u304b\u3057\u3001\u6642\u9593\u306e\u7d4c\u904e\u30fb\u5916\u90e8\u74b0\u5883\u306e\u5909\u5316\u3068\u3068\u3082\u306b\u5909\u66f4\u3092\u697d\u306b\u5b89\u5168\u306b\u3067\u304d\u306a\u3044\u305f\u3081\u5f79\u306b\u7acb\u3064\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3067\u306a\u304f\u306a\u308b\u3002 \u5909\u66f4\u3092\u697d\u306b\u5b89\u5168\u306b\u3067\u304d\u3066\u5f79\u306b\u7acb\u3064\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3067\u3042\u308b\u3053\u3068\u304c\u5fc5\u8981\u5341\u5206\u6761\u4ef6\u3067\u3042\u308b\u3002 \u4e0a\u8a18\u306e\u6761\u4ef6\u3092\u6e80\u305f\u3057\u5916\u90e8\u74b0\u5883\u306e\u5909\u5316\u306b\u9069\u5fdc\u3057\u7d9a\u3051\u308b\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3053\u305d\u3088\u3044\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3067\u3042\u308b\u3002 \u3088\u3063\u3066\u3001\u826f\u3044\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3068\u306f\u5909\u66f4\u3092\u697d\u306b\u5b89\u5168\u306b\u3067\u304d\u3066\u5f79\u306b\u7acb\u3064\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3067\u3042\u308b\u3002</p>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/","title":"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u8a2d\u8a08\u30ac\u30a4\u30c9","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_2","title":"\u6982\u8981","text":"<p>\u672c\u30ac\u30a4\u30c9\u306f\u3001\u30b7\u30b9\u30c6\u30e0\u958b\u767a\u306b\u304a\u3051\u308b\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u8a2d\u8a08\u306e\u6307\u91dd\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3067\u306f\u696d\u52d9\u9818\u57df\u306e\u7279\u6027\u3068\u30c7\u30fc\u30bf\u69cb\u9020\u306e\u8907\u96d1\u3055\u306b\u57fa\u3065\u3044\u305f\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30d1\u30bf\u30fc\u30f3\u306e\u9078\u629e\u3092\u3001\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u3067\u306f\u73fe\u4ee3\u7684\u306aWeb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u958b\u767a\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002</p>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_3","title":"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u8a2d\u8a08\u306e\u539f\u5247","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_4","title":"\u57fa\u672c\u65b9\u91dd","text":"<ul> <li>\u30e2\u30ce\u30ec\u30dd\u69cb\u6210: \u5358\u4e00\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30fb\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3092\u7d71\u5408\u7ba1\u7406</li> <li>\u95a2\u5fc3\u4e8b\u306e\u5206\u96e2: \u660e\u78ba\u306a\u8cac\u52d9\u5206\u96e2\u306b\u3088\u308b\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u6027\u5411\u4e0a</li> <li>\u4f9d\u5b58\u95a2\u4fc2\u306e\u65b9\u5411\u6027: \u5916\u5074\u304b\u3089\u5185\u5074\uff08\u30c9\u30e1\u30a4\u30f3\uff09\u3078\u306e\u5358\u65b9\u5411\u4f9d\u5b58</li> <li>\u30c6\u30b9\u30c8\u3057\u3084\u3059\u3044\u8a2d\u8a08: \u5404\u5c64\u304c\u72ec\u7acb\u3057\u3066\u30c6\u30b9\u30c8\u53ef\u80fd\u306a\u69cb\u9020</li> </ul>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_5","title":"\u5168\u4f53\u69cb\u6210","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_6","title":"\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u8cac\u52d9","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_7","title":"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_8","title":"\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9","text":"<ul> <li>UI/UX: \u30e6\u30fc\u30b6\u30fc\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u30fb\u30e6\u30fc\u30b6\u30fc\u4f53\u9a13</li> <li>\u72b6\u614b\u7ba1\u7406: \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u72b6\u614b\u3068\u30b5\u30fc\u30d0\u30fc\u72b6\u614b\u306e\u7ba1\u7406</li> <li>API\u9023\u643a: \u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3068\u306e\u30c7\u30fc\u30bf\u901a\u4fe1</li> <li>\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0: \u52b9\u7387\u7684\u306a\u753b\u9762\u63cf\u753b\u3068\u30e6\u30fc\u30b6\u30fc\u30a4\u30f3\u30bf\u30e9\u30af\u30b7\u30e7\u30f3</li> </ul>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_9","title":"\u30d0\u30c3\u30af\u30a8\u30f3\u30c9","text":"<ul> <li>\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af: \u696d\u52d9\u30eb\u30fc\u30eb\u30fb\u5236\u7d04\u306e\u5b9f\u88c5</li> <li>\u30c7\u30fc\u30bf\u6c38\u7d9a\u5316: \u30c7\u30fc\u30bf\u306e\u4fdd\u5b58\u30fb\u53d6\u5f97\u30fb\u66f4\u65b0\u30fb\u524a\u9664</li> <li>\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3: \u8a8d\u8a3c\u30fb\u8a8d\u53ef\u30fb\u30c7\u30fc\u30bf\u4fdd\u8b77</li> <li>\u5916\u90e8\u30b7\u30b9\u30c6\u30e0\u9023\u643a: API\u30fb\u30e1\u30c3\u30bb\u30fc\u30b8\u30f3\u30b0\u30fb\u30d5\u30a1\u30a4\u30eb\u51e6\u7406</li> </ul>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_10","title":"\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3","text":"<ul> <li>\u30cd\u30c3\u30c8\u30ef\u30fc\u30af: \u8ca0\u8377\u5206\u6563\u30fbDNS\u30fbCDN</li> <li>\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3: \u30db\u30b9\u30c6\u30a3\u30f3\u30b0: \u30b5\u30fc\u30d0\u30fc\u30fb\u30b3\u30f3\u30c6\u30ca\u7ba1\u7406</li> </ul>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_11","title":"\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_12","title":"\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30d1\u30bf\u30fc\u30f3\u9078\u629e\u30d5\u30ed\u30fc","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_13","title":"\u5224\u65ad\u57fa\u6e96","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_14","title":"\u696d\u52d9\u9818\u57df\u30ab\u30c6\u30b4\u30ea\u30fc","text":"\u30ab\u30c6\u30b4\u30ea\u30fc \u7279\u5fb4 \u4f8b \u4e2d\u6838\u306e\u696d\u52d9\u9818\u57df \u7d44\u7e54\u306e\u7af6\u4e89\u512a\u4f4d\u6027\u3092\u6c7a\u5b9a\u3059\u308b\u9818\u57df \u5546\u54c1\u7ba1\u7406\u3001\u9867\u5ba2\u7ba1\u7406\u3001\u53d7\u6ce8\u51e6\u7406 \u88dc\u5b8c\u3001\u4e00\u822c\u3068\u306e\u9023\u643a \u4e2d\u6838\u3092\u652f\u63f4\u3059\u308b\u88dc\u52a9\u7684\u306a\u9818\u57df \u30ec\u30dd\u30fc\u30c8\u51fa\u529b\u3001\u30d0\u30c3\u30c1\u51e6\u7406\u3001\u5916\u90e8\u9023\u643a"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_15","title":"\u30c7\u30fc\u30bf\u69cb\u9020\u306e\u8907\u96d1\u3055","text":"\u8907\u96d1\u3055 \u5224\u5b9a\u57fa\u6e96 \u8907\u96d1 \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u9593\u306e\u95a2\u4fc2\u304c\u591a\u304f\u3001\u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u304c\u8907\u96d1 \u30b7\u30f3\u30d7\u30eb \u5358\u7d14\u306aCRUD\u64cd\u4f5c\u304c\u4e2d\u5fc3\u3001\u95a2\u4fc2\u6027\u304c\u5c11\u306a\u3044"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_16","title":"\u7279\u6b8a\u8981\u4ef6","text":"<ul> <li>\u91d1\u984d\u3092\u6271\u3046: \u4f1a\u8a08\u30fb\u6c7a\u6e08\u30fb\u91d1\u878d\u95a2\u9023\u306e\u51e6\u7406</li> <li>\u5206\u6790: \u5927\u91cf\u30c7\u30fc\u30bf\u306e\u96c6\u8a08\u30fb\u5206\u6790\u51e6\u7406</li> <li>\u76e3\u67fb\u8a18\u9332\u304c\u5fc5\u8981: \u30b3\u30f3\u30d7\u30e9\u30a4\u30a2\u30f3\u30b9\u30fb\u898f\u5236\u5bfe\u5fdc</li> </ul>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_17","title":"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30d1\u30bf\u30fc\u30f3\u8a73\u7d30","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#1","title":"1. \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30b9\u30af\u30ea\u30d7\u30c8\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_18","title":"\u9069\u7528\u5834\u9762","text":"<ul> <li>\u696d\u52d9\u9818\u57df: \u88dc\u5b8c\u30fb\u4e00\u822c\u3068\u306e\u9023\u643a</li> <li>\u30c7\u30fc\u30bf\u69cb\u9020: \u30b7\u30f3\u30d7\u30eb</li> <li>\u30b7\u30b9\u30c6\u30e0\u898f\u6a21: \u5c0f\u898f\u6a21</li> </ul>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_19","title":"\u7279\u5fb4","text":"<p>\u30e1\u30ea\u30c3\u30c8: - \u5b9f\u88c5\u304c\u76f4\u611f\u7684\u3067\u308f\u304b\u308a\u3084\u3059\u3044 - \u958b\u767a\u901f\u5ea6\u304c\u65e9\u3044 - \u5c0f\u898f\u6a21\u30c1\u30fc\u30e0\u3067\u3082\u6271\u3044\u3084\u3059\u3044</p> <p>\u30c7\u30e1\u30ea\u30c3\u30c8: - \u30b3\u30fc\u30c9\u306e\u91cd\u8907\u304c\u767a\u751f\u3057\u3084\u3059\u3044 - \u5927\u898f\u6a21\u5316\u3059\u308b\u3068\u4fdd\u5b88\u304c\u56f0\u96e3 - \u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u304c\u6563\u5728\u3059\u308b</p>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_20","title":"\u5b9f\u88c5\u6307\u91dd","text":"<pre><code>// \u4f8b\uff1a\u4f1a\u8b70\u5ba4\u4e88\u7d04\u51e6\u7406\npublic class ReservationService {\n    public void makeReservation(ReservationRequest request) {\n        // 1. \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\n        validateRequest(request);\n\n        // 2. \u91cd\u8907\u30c1\u30a7\u30c3\u30af\n        checkConflicts(request);\n\n        // 3. \u4e88\u7d04\u4f5c\u6210\n        createReservation(request);\n\n        // 4. \u901a\u77e5\u9001\u4fe1\n        sendNotification(request);\n    }\n}\n</code></pre>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#2","title":"2. \u30a2\u30af\u30c6\u30a3\u30d6\u30ec\u30b3\u30fc\u30c9\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_21","title":"\u9069\u7528\u5834\u9762","text":"<ul> <li>\u696d\u52d9\u9818\u57df: \u88dc\u5b8c\u30fb\u4e00\u822c\u3068\u306e\u9023\u643a</li> <li>\u30c7\u30fc\u30bf\u69cb\u9020: \u8907\u96d1</li> <li>\u30b7\u30b9\u30c6\u30e0\u898f\u6a21: \u4e2d\u898f\u6a21</li> </ul>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_22","title":"\u7279\u5fb4","text":"<p>\u30e1\u30ea\u30c3\u30c8: - \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u5bfe\u5fdc\u304c\u660e\u78ba - ORM\u3068\u306e\u76f8\u6027\u304c\u826f\u3044 - \u7406\u89e3\u3057\u3084\u3059\u3044\u69cb\u9020</p> <p>\u30c7\u30e1\u30ea\u30c3\u30c8: - \u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u3068\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u304c\u5bc6\u7d50\u5408 - \u30c6\u30b9\u30c8\u304c\u56f0\u96e3 - \u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\u304c\u8584\u304f\u306a\u308b\u50be\u5411</p>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_23","title":"\u5b9f\u88c5\u6307\u91dd","text":"<pre><code>// \u4f8b\uff1a\u4e88\u7d04\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n@Entity\npublic class Reservation {\n    @Id\n    private Long id;\n    private Long userId;\n    private Long roomId;\n    private LocalDateTime startTime;\n    private LocalDateTime endTime;\n\n    // \u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3092\u542b\u3080\n    public void cancel() {\n        if (canCancel()) {\n            this.status = CANCELLED;\n            this.save();\n        }\n    }\n\n    public boolean canCancel() {\n        return startTime.isAfter(LocalDateTime.now().plusHours(2));\n    }\n}\n</code></pre>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#3","title":"3. \u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_24","title":"\u9069\u7528\u5834\u9762","text":"<ul> <li>\u696d\u52d9\u9818\u57df: \u4e2d\u6838\u306e\u696d\u52d9\u9818\u57df</li> <li>\u7279\u6b8a\u8981\u4ef6: \u91d1\u984d\u3092\u6271\u308f\u306a\u3044\u3001\u76e3\u67fb\u8a18\u9332\u4e0d\u8981</li> <li>\u30b7\u30b9\u30c6\u30e0\u898f\u6a21: \u4e2d\u898f\u6a21\u301c\u5927\u898f\u6a21</li> </ul>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_25","title":"\u7279\u5fb4","text":"<p>\u30e1\u30ea\u30c3\u30c8: - \u30ea\u30c3\u30c1\u306a\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb - \u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u306e\u96c6\u7d04 - \u9ad8\u3044\u4fdd\u5b88\u6027\u30fb\u62e1\u5f35\u6027 - \u30c6\u30b9\u30c8\u5bb9\u6613\u6027</p> <p>\u30c7\u30e1\u30ea\u30c3\u30c8: - \u521d\u671f\u306e\u5b66\u7fd2\u30b3\u30b9\u30c8\u304c\u9ad8\u3044 - \u8a2d\u8a08\u306e\u8907\u96d1\u3055 - \u958b\u767a\u901f\u5ea6\u304c\u9045\u3044\u5834\u5408\u304c\u3042\u308b</p>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_26","title":"\u5b9f\u88c5\u6307\u91dd","text":"<pre><code>// \u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\u4f8b\npublic class Reservation {\n    private ReservationId id;\n    private UserId userId;\n    private MeetingRoomId roomId;\n    private TimeSlot timeSlot;\n    private ReservationStatus status;\n\n    // \u30d5\u30a1\u30af\u30c8\u30ea\u30fc\u30e1\u30bd\u30c3\u30c9\n    public static Reservation create(UserId userId, MeetingRoomId roomId, TimeSlot timeSlot) {\n        validateTimeSlot(timeSlot);\n        return new Reservation(ReservationId.generate(), userId, roomId, timeSlot, CONFIRMED);\n    }\n\n    // \u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\n    public void cancel(CancellationPolicy policy) {\n        if (!policy.canCancel(this.timeSlot)) {\n            throw new CancellationNotAllowedException();\n        }\n        this.status = CANCELLED;\n    }\n}\n</code></pre>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#4","title":"4. \u30a4\u30d9\u30f3\u30c8\u5c65\u6b74\u5f0f\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_27","title":"\u9069\u7528\u5834\u9762","text":"<ul> <li>\u696d\u52d9\u9818\u57df: \u4e2d\u6838\u306e\u696d\u52d9\u9818\u57df</li> <li>\u7279\u6b8a\u8981\u4ef6: \u91d1\u984d\u3092\u6271\u3046\u3001\u5206\u6790\u30fb\u76e3\u67fb\u8a18\u9332\u304c\u5fc5\u8981</li> <li>\u30b7\u30b9\u30c6\u30e0\u898f\u6a21: \u5927\u898f\u6a21</li> </ul>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_28","title":"\u7279\u5fb4","text":"<p>\u30e1\u30ea\u30c3\u30c8: - \u5b8c\u5168\u306a\u76e3\u67fb\u8a3c\u8de1 - \u6642\u7cfb\u5217\u5206\u6790\u304c\u53ef\u80fd - \u9ad8\u3044\u30b9\u30b1\u30fc\u30e9\u30d3\u30ea\u30c6\u30a3 - \u8907\u96d1\u306a\u30af\u30a8\u30ea\u306b\u5bfe\u5fdc</p> <p>\u30c7\u30e1\u30ea\u30c3\u30c8: - \u5b9f\u88c5\u306e\u8907\u96d1\u3055 - \u9ad8\u3044\u5b66\u7fd2\u30b3\u30b9\u30c8 - \u7d50\u679c\u6574\u5408\u6027\u306e\u8003\u616e\u304c\u5fc5\u8981</p>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_29","title":"\u5b9f\u88c5\u6307\u91dd","text":"<pre><code>// \u30a4\u30d9\u30f3\u30c8\u4f8b\npublic class ReservationCreatedEvent extends DomainEvent {\n    private final ReservationId reservationId;\n    private final UserId userId;\n    private final MeetingRoomId roomId;\n    private final TimeSlot timeSlot;\n    private final LocalDateTime occurredAt;\n}\n\n// \u96c6\u7d04\u4f8b\npublic class ReservationAggregate {\n    private ReservationId id;\n    private List&lt;DomainEvent&gt; changes = new ArrayList&lt;&gt;();\n\n    public void create(UserId userId, MeetingRoomId roomId, TimeSlot timeSlot) {\n        var event = new ReservationCreatedEvent(id, userId, roomId, timeSlot, LocalDateTime.now());\n        apply(event);\n    }\n\n    private void apply(DomainEvent event) {\n        changes.add(event);\n        // \u72b6\u614b\u66f4\u65b0\u30ed\u30b8\u30c3\u30af\n    }\n}\n</code></pre>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_30","title":"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30b9\u30bf\u30a4\u30eb\u8a73\u7d30","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#1-3","title":"1. \u30ec\u30a4\u30e4\u30fc\u30c9\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff083\u5c64\uff09","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_31","title":"\u9069\u7528\u5834\u9762","text":"<ul> <li>\u6c38\u7d9a\u5316\u30e2\u30c7\u30eb: \u5358\u4e00</li> <li>\u30b7\u30b9\u30c6\u30e0\u7279\u6027: \u6a19\u6e96\u7684\u306a\u30a8\u30f3\u30bf\u30fc\u30d7\u30e9\u30a4\u30ba\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3</li> </ul>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_32","title":"\u69cb\u9020","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_33","title":"\u5b9f\u88c5\u6307\u91dd","text":"<pre><code>// \u30d7\u30ec\u30bc\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u5c64\n@RestController\npublic class ReservationController {\n    private final ReservationService service;\n\n    @PostMapping(\"/reservations\")\n    public ResponseEntity&lt;Reservation&gt; create(@RequestBody CreateReservationRequest request) {\n        var reservation = service.createReservation(request);\n        return ResponseEntity.ok(reservation);\n    }\n}\n\n// \u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u5c64\n@Service\npublic class ReservationService {\n    private final ReservationRepository repository;\n\n    public Reservation createReservation(CreateReservationRequest request) {\n        // \u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u5b9f\u884c\n        var reservation = new Reservation(request);\n        return repository.save(reservation);\n    }\n}\n\n// \u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u5c64\n@Repository\npublic interface ReservationRepository extends JpaRepository&lt;Reservation, Long&gt; {\n    List&lt;Reservation&gt; findByUserId(Long userId);\n}\n</code></pre>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#2-4","title":"2. \u30ec\u30a4\u30e4\u30fc\u30c9\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff084\u5c64\uff09","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_34","title":"\u9069\u7528\u5834\u9762","text":"<ul> <li>\u6c38\u7d9a\u5316\u30e2\u30c7\u30eb: \u8907\u6570</li> <li>\u30b7\u30b9\u30c6\u30e0\u7279\u6027: \u5927\u898f\u6a21\u30a8\u30f3\u30bf\u30fc\u30d7\u30e9\u30a4\u30ba\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3</li> </ul>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_35","title":"\u69cb\u9020","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_36","title":"\u30ec\u30a4\u30e4\u30fc\u8cac\u52d9","text":"\u30ec\u30a4\u30e4\u30fc \u8cac\u52d9 \u30d7\u30ec\u30bc\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3 HTTP\u8981\u6c42/\u5fdc\u7b54\u3001\u5165\u529b\u691c\u8a3c\u3001\u8a8d\u8a3c \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3 \u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u5236\u5fa1\u3001\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u5883\u754c \u30c9\u30e1\u30a4\u30f3 \u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u3001\u4e0d\u5909\u6761\u4ef6\u3001\u30c9\u30e1\u30a4\u30f3\u30b5\u30fc\u30d3\u30b9 \u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3 \u5916\u90e8\u30b7\u30b9\u30c6\u30e0\u9023\u643a\u3001\u6c38\u7d9a\u5316\u3001\u6280\u8853\u7684\u95a2\u5fc3\u4e8b"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#3_1","title":"3. \u30dd\u30fc\u30c8\u3068\u30a2\u30c0\u30d7\u30bf\u30fc\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\uff09","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_37","title":"\u9069\u7528\u5834\u9762","text":"<ul> <li>\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb: \u3042\u308a</li> <li>\u6c38\u7d9a\u5316\u30e2\u30c7\u30eb: \u5358\u4e00</li> <li>\u30b7\u30b9\u30c6\u30e0\u7279\u6027: \u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u3001\u9ad8\u3044\u30c6\u30b9\u30c8\u5bb9\u6613\u6027\u304c\u8981\u6c42\u3055\u308c\u308b</li> </ul>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_38","title":"\u69cb\u9020","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_39","title":"\u5b9f\u88c5\u6307\u91dd","text":"<pre><code>// \u5165\u529b\u30dd\u30fc\u30c8\uff08\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\uff09\npublic interface CreateReservationUseCase {\n    ReservationId execute(CreateReservationCommand command);\n}\n\n// \u51fa\u529b\u30dd\u30fc\u30c8\uff08\u30ea\u30dd\u30b8\u30c8\u30ea\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff09\npublic interface ReservationRepository {\n    void save(Reservation reservation);\n    Optional&lt;Reservation&gt; findById(ReservationId id);\n}\n\n// \u30c9\u30e1\u30a4\u30f3\u30b5\u30fc\u30d3\u30b9\uff08\u5b9f\u88c5\uff09\n@Service\npublic class ReservationService implements CreateReservationUseCase {\n    private final ReservationRepository repository;\n\n    @Override\n    public ReservationId execute(CreateReservationCommand command) {\n        var reservation = Reservation.create(command);\n        repository.save(reservation);\n        return reservation.getId();\n    }\n}\n\n// \u30a2\u30c0\u30d7\u30bf\u30fc\uff08\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\uff09\n@Repository\npublic class JpaReservationRepository implements ReservationRepository {\n    private final SpringDataReservationRepository jpaRepository;\n\n    @Override\n    public void save(Reservation reservation) {\n        var entity = toEntity(reservation);\n        jpaRepository.save(entity);\n    }\n}\n</code></pre>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#4-cqrs","title":"4. CQRS\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_40","title":"\u9069\u7528\u5834\u9762","text":"<ul> <li>\u6c38\u7d9a\u5316\u30e2\u30c7\u30eb: \u8907\u6570</li> <li>\u7279\u6b8a\u8981\u4ef6: \u30a4\u30d9\u30f3\u30c8\u5c65\u6b74\u5f0f\u3001\u9ad8\u30b9\u30b1\u30fc\u30e9\u30d3\u30ea\u30c6\u30a3</li> <li>\u30b7\u30b9\u30c6\u30e0\u7279\u6027: \u8907\u96d1\u306a\u30af\u30a8\u30ea\u8981\u4ef6\u3001\u8aad\u307f\u66f8\u304d\u5206\u96e2</li> </ul>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_41","title":"\u69cb\u9020","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_42","title":"\u5b9f\u88c5\u6307\u91dd","text":"<pre><code>// \u30b3\u30de\u30f3\u30c9\u5074\n@CommandHandler\npublic class CreateReservationHandler {\n    private final ReservationWriteRepository writeRepository;\n    private final EventBus eventBus;\n\n    public void handle(CreateReservationCommand command) {\n        var reservation = new ReservationAggregate(command);\n        writeRepository.save(reservation);\n\n        var events = reservation.getUncommittedEvents();\n        eventBus.publishAll(events);\n    }\n}\n\n// \u30af\u30a8\u30ea\u5074\n@QueryHandler\npublic class ReservationQueryHandler {\n    private final ReservationReadRepository readRepository;\n\n    public List&lt;ReservationView&gt; handle(FindReservationsByUserQuery query) {\n        return readRepository.findByUserId(query.getUserId());\n    }\n}\n\n// \u30a4\u30d9\u30f3\u30c8\u30cf\u30f3\u30c9\u30e9\u30fc\uff08\u30d7\u30ed\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u66f4\u65b0\uff09\n@EventHandler\npublic class ReservationProjectionHandler {\n    private final ReservationReadRepository readRepository;\n\n    public void on(ReservationCreatedEvent event) {\n        var view = new ReservationView(event);\n        readRepository.save(view);\n    }\n}\n</code></pre>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_43","title":"\u30c6\u30b9\u30c8\u6226\u7565\u3068\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u95a2\u4fc2","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_44","title":"\u30d4\u30e9\u30df\u30c3\u30c9\u5f62\u30c6\u30b9\u30c8\uff08\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\u30fb\u30a4\u30d9\u30f3\u30c8\u5c65\u6b74\u5f0f\uff09","text":"<p>\u7279\u5fb4: - \u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u4e2d\u5fc3\uff0880%\uff09 - \u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\u306e\u5fb9\u5e95\u691c\u8a3c - \u9ad8\u54c1\u8cea\u306a\u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u5b9f\u88c5</p>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_45","title":"\u30c0\u30a4\u30e4\u30e2\u30f3\u30c9\u5f62\u30c6\u30b9\u30c8\uff08\u30a2\u30af\u30c6\u30a3\u30d6\u30ec\u30b3\u30fc\u30c9\uff09","text":"<p>\u7279\u5fb4: - \u7d71\u5408\u30c6\u30b9\u30c8\u4e2d\u5fc3\uff0860%\uff09 - \u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u30ed\u30b8\u30c3\u30af\u306e\u91cd\u70b9\u691c\u8a3c - ORM\u3068\u306e\u9023\u643a\u78ba\u8a8d</p>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_46","title":"\u9006\u30d4\u30e9\u30df\u30c3\u30c9\u5f62\u30c6\u30b9\u30c8\uff08\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30b9\u30af\u30ea\u30d7\u30c8\uff09","text":"<p>\u7279\u5fb4: - E2E\u30c6\u30b9\u30c8\u4e2d\u5fc3\uff0870%\uff09 - \u30a8\u30f3\u30c9\u30c4\u30fc\u30a8\u30f3\u30c9\u306e\u52d5\u4f5c\u78ba\u8a8d - \u30b7\u30ca\u30ea\u30aa\u30d9\u30fc\u30b9\u306e\u691c\u8a3c</p>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_47","title":"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u8a55\u4fa1\u57fa\u6e96","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_48","title":"\u54c1\u8cea\u5c5e\u6027\u8a55\u4fa1\u30de\u30c8\u30ea\u30c3\u30af\u30b9","text":"\u54c1\u8cea\u5c5e\u6027 \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30b9\u30af\u30ea\u30d7\u30c8 \u30a2\u30af\u30c6\u30a3\u30d6\u30ec\u30b3\u30fc\u30c9 \u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb \u30a4\u30d9\u30f3\u30c8\u5c65\u6b74\u5f0f\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb \u958b\u767a\u901f\u5ea6 \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50 \u2b50 \u4fdd\u5b88\u6027 \u2b50\u2b50 \u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50 \u30c6\u30b9\u30c8\u5bb9\u6613\u6027 \u2b50\u2b50 \u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50 \u30b9\u30b1\u30fc\u30e9\u30d3\u30ea\u30c6\u30a3 \u2b50\u2b50 \u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 \u8907\u96d1\u3055\u5bfe\u5fdc \u2b50 \u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 \u76e3\u67fb\u8981\u4ef6 \u2b50 \u2b50\u2b50 \u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_49","title":"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30b9\u30bf\u30a4\u30eb\u8a55\u4fa1\u30de\u30c8\u30ea\u30c3\u30af\u30b9","text":"\u54c1\u8cea\u5c5e\u6027 \u30ec\u30a4\u30e4\u30fc\u30c93\u5c64 \u30ec\u30a4\u30e4\u30fc\u30c94\u5c64 \u30dd\u30fc\u30c8\u3068\u30a2\u30c0\u30d7\u30bf\u30fc CQRS \u5b66\u7fd2\u5bb9\u6613\u6027 \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50 \u2b50\u2b50 \u30c6\u30b9\u30c8\u5bb9\u6613\u6027 \u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50 \u95a2\u5fc3\u4e8b\u5206\u96e2 \u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9 \u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 \u30b9\u30b1\u30fc\u30e9\u30d3\u30ea\u30c6\u30a3 \u2b50\u2b50 \u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 \u9032\u5316\u6027 \u2b50\u2b50 \u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_50","title":"\u5b9f\u88c5\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#1_1","title":"1. \u4f9d\u5b58\u95a2\u4fc2\u7ba1\u7406","text":"<pre><code>// \u2705 \u826f\u3044\u4f8b\uff1a\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306b\u4f9d\u5b58\npublic class ReservationService {\n    private final ReservationRepository repository; // \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\n    private final NotificationService notificationService; // \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\n}\n\n// \u274c \u60aa\u3044\u4f8b\uff1a\u5177\u8c61\u30af\u30e9\u30b9\u306b\u4f9d\u5b58\npublic class ReservationService {\n    private final JpaReservationRepository repository; // \u5177\u8c61\u30af\u30e9\u30b9\n    private final EmailService emailService; // \u5177\u8c61\u30af\u30e9\u30b9\n}\n</code></pre>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#2_1","title":"2. \u30ec\u30a4\u30e4\u30fc\u5206\u96e2","text":"<pre><code>// \u2705 \u826f\u3044\u4f8b\uff1a\u9069\u5207\u306a\u30ec\u30a4\u30e4\u30fc\u5206\u96e2\n@RestController\npublic class ReservationController {\n    @PostMapping(\"/reservations\")\n    public ResponseEntity&lt;ReservationResponse&gt; create(@RequestBody CreateReservationRequest request) {\n        // \u30d7\u30ec\u30bc\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u5c64\u306e\u8cac\u52d9\u306e\u307f\n        var command = toCommand(request);\n        var result = useCase.execute(command);\n        return ResponseEntity.ok(toResponse(result));\n    }\n}\n\n// \u274c \u60aa\u3044\u4f8b\uff1a\u30ec\u30a4\u30e4\u30fc\u9055\u53cd\n@RestController\npublic class ReservationController {\n    @PostMapping(\"/reservations\")\n    public ResponseEntity&lt;ReservationResponse&gt; create(@RequestBody CreateReservationRequest request) {\n        // \u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3092\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306b\u8a18\u8ff0\uff08\u30ec\u30a4\u30e4\u30fc\u9055\u53cd\uff09\n        if (request.getStartTime().isBefore(LocalDateTime.now().plusHours(2))) {\n            throw new ValidationException(\"2\u6642\u9593\u524d\u307e\u3067\u306e\u4e88\u7d04\u304c\u5fc5\u8981\u3067\u3059\");\n        }\n        // ...\n    }\n}\n</code></pre>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#3_2","title":"3. \u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0","text":"<pre><code>// \u2705 \u826f\u3044\u4f8b\uff1a\u9069\u5207\u306a\u30a8\u30e9\u30fc\u4f1d\u64ad\npublic class ReservationService {\n    public ReservationId createReservation(CreateReservationCommand command) {\n        try {\n            var reservation = Reservation.create(command);\n            repository.save(reservation);\n            return reservation.getId();\n        } catch (DomainException e) {\n            // \u30c9\u30e1\u30a4\u30f3\u4f8b\u5916\u306f\u9069\u5207\u306b\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\n            throw new ReservationException(\"\u4e88\u7d04\u4f5c\u6210\u306b\u5931\u6557\u3057\u307e\u3057\u305f\", e);\n        }\n    }\n}\n\n// \u274c \u60aa\u3044\u4f8b\uff1a\u4f8b\u5916\u306e\u96a0\u853d\npublic class ReservationService {\n    public ReservationId createReservation(CreateReservationCommand command) {\n        try {\n            var reservation = Reservation.create(command);\n            repository.save(reservation);\n            return reservation.getId();\n        } catch (Exception e) {\n            // \u3059\u3079\u3066\u306e\u4f8b\u5916\u3092\u96a0\u853d\uff08\u554f\u984c\u306e\u7279\u5b9a\u304c\u56f0\u96e3\uff09\n            return null;\n        }\n    }\n}\n</code></pre>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_51","title":"\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_52","title":"\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u6c7a\u5b9a\u30d5\u30ed\u30fc","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_53","title":"\u4e3b\u8981\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u6c7a\u5b9a\u30dd\u30a4\u30f3\u30c8","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_54","title":"\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u8a2d\u8a08\u539f\u5247","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_55","title":"\u826f\u3044\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u6c7a\u5b9a","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#1_2","title":"1. \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u9020","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_56","title":"\u6a19\u6e96\u7684\u306a\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u9020","text":"<pre><code>src/\n\u251c\u2500\u2500 components/       # (1) \u5171\u901aUI\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\n\u2502   \u251c\u2500\u2500 ui/          # \u57fa\u672cUI\u30d1\u30fc\u30c4\uff08Button, Input, Modal\u7b49\uff09\n\u2502   \u2514\u2500\u2500 layout/      # \u30ec\u30a4\u30a2\u30a6\u30c8\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\n\u251c\u2500\u2500 config/          # (2) \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\n\u2502   \u251c\u2500\u2500 constants.ts # \u5b9a\u6570\u5b9a\u7fa9\n\u2502   \u251c\u2500\u2500 env.ts       # \u74b0\u5883\u5909\u6570\u7ba1\u7406\n\u2502   \u2514\u2500\u2500 api.ts       # API\u8a2d\u5b9a\n\u251c\u2500\u2500 features/        # (3) \u30d5\u30a3\u30fc\u30c1\u30e3\u30fc\u5358\u4f4d\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\n\u2502   \u251c\u2500\u2500 auth/        # \u8a8d\u8a3c\u6a5f\u80fd\n\u2502   \u251c\u2500\u2500 reservation/ # \u4e88\u7d04\u6a5f\u80fd\n\u2502   \u2514\u2500\u2500 meeting-room/# \u4f1a\u8b70\u5ba4\u7ba1\u7406\u6a5f\u80fd\n\u251c\u2500\u2500 layouts/         # (4) \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30ec\u30a4\u30a2\u30a6\u30c8\n\u2502   \u251c\u2500\u2500 AppLayout.tsx\n\u2502   \u251c\u2500\u2500 AuthLayout.tsx\n\u2502   \u2514\u2500\u2500 DashboardLayout.tsx\n\u251c\u2500\u2500 lib/             # (5) \u5916\u90e8\u30e9\u30a4\u30d6\u30e9\u30ea\u8a2d\u5b9a\u30fb\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\n\u2502   \u251c\u2500\u2500 auth.ts      # \u8a8d\u8a3c\u30e9\u30a4\u30d6\u30e9\u30ea\u8a2d\u5b9a\n\u2502   \u251c\u2500\u2500 api-client.ts# API \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\n\u2502   \u2514\u2500\u2500 utils.ts     # \u30d8\u30eb\u30d1\u30fc\u95a2\u6570\n\u251c\u2500\u2500 pages/           # (6) \u30da\u30fc\u30b8\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\uff08\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\uff09\n\u2502   \u251c\u2500\u2500 LoginPage.tsx\n\u2502   \u251c\u2500\u2500 DashboardPage.tsx\n\u2502   \u2514\u2500\u2500 ReservationPage.tsx\n\u251c\u2500\u2500 providers/       # (7) Context Provider\n\u2502   \u251c\u2500\u2500 AuthProvider.tsx\n\u2502   \u251c\u2500\u2500 ThemeProvider.tsx\n\u2502   \u2514\u2500\u2500 AppProviders.tsx\n\u251c\u2500\u2500 stores/          # (8) \u72b6\u614b\u7ba1\u7406\n\u2502   \u251c\u2500\u2500 authStore.ts\n\u2502   \u251c\u2500\u2500 uiStore.ts\n\u2502   \u2514\u2500\u2500 index.ts\n\u251c\u2500\u2500 testing/         # (9) \u30c6\u30b9\u30c8\u7528\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\n\u2502   \u251c\u2500\u2500 setup.ts     # \u30c6\u30b9\u30c8\u74b0\u5883\u8a2d\u5b9a\n\u2502   \u251c\u2500\u2500 mocks/       # \u30e2\u30c3\u30af\u30c7\u30fc\u30bf\n\u2502   \u2514\u2500\u2500 utils.ts     # \u30c6\u30b9\u30c8\u30d8\u30eb\u30d1\u30fc\n\u251c\u2500\u2500 types/           # (10) TypeScript\u578b\u5b9a\u7fa9\n\u2502   \u251c\u2500\u2500 api.ts       # API\u578b\u5b9a\u7fa9\n\u2502   \u251c\u2500\u2500 auth.ts      # \u8a8d\u8a3c\u95a2\u9023\u578b\n\u2502   \u2514\u2500\u2500 common.ts    # \u5171\u901a\u578b\u5b9a\u7fa9\n\u2514\u2500\u2500 utils/           # (11) \u6c4e\u7528\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u95a2\u6570\n    \u251c\u2500\u2500 format.ts    # \u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u95a2\u6570\n    \u251c\u2500\u2500 validation.ts# \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\n    \u2514\u2500\u2500 date.ts      # \u65e5\u4ed8\u64cd\u4f5c\n</code></pre>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_57","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u898f\u6a21\u306b\u3088\u308b\u4f7f\u3044\u5206\u3051","text":"<p>\u5c0f\u898f\u6a21\u30d7\u30ed\u30b8\u30a7\u30af\u30c8 (\u30b7\u30f3\u30d7\u30eb\u69cb\u9020): <pre><code>src/\n\u251c\u2500\u2500 components/      # UI \u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\n\u251c\u2500\u2500 pages/           # \u30da\u30fc\u30b8\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8  \n\u251c\u2500\u2500 hooks/           # \u30ab\u30b9\u30bf\u30e0\u30d5\u30c3\u30af\n\u251c\u2500\u2500 utils/           # \u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\n\u251c\u2500\u2500 types/           # \u578b\u5b9a\u7fa9\n\u2514\u2500\u2500 config/          # \u8a2d\u5b9a\n</code></pre></p> <p>\u5927\u898f\u6a21\u30d7\u30ed\u30b8\u30a7\u30af\u30c8 (\u30d5\u30eb\u69cb\u9020): \u4e0a\u8a18\u306e\u6a19\u6e9611\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\u3092\u4f7f\u7528</p>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#2_2","title":"2. \u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u8a2d\u8a08","text":"<ul> <li>\u5c0f\u3055\u306a\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8: \u5358\u4e00\u8cac\u4efb\u306e\u539f\u5247\u306b\u5f93\u3063\u305f\u5206\u5272</li> <li>\u95a2\u5fc3\u4e8b\u306e\u5206\u96e2: UI\u30fb\u30ed\u30b8\u30c3\u30af\u30fb\u72b6\u614b\u7ba1\u7406\u306e\u660e\u78ba\u306a\u5206\u96e2</li> <li>\u518d\u5229\u7528\u6027: \u6c4e\u7528\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u9069\u5207\u306a\u62bd\u8c61\u5316</li> </ul>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#3_3","title":"3. \u72b6\u614b\u7ba1\u7406\u6226\u7565","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#4_1","title":"4. \u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u6226\u7565","text":"\u6226\u7565 \u9069\u7528\u5834\u9762 \u7279\u5fb4 \u4f8b SPA \u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u30fb\u7ba1\u7406\u753b\u9762 \u9ad8\u3044\u30a4\u30f3\u30bf\u30e9\u30af\u30c6\u30a3\u30d3\u30c6\u30a3 React SSR SEO\u91cd\u8981\u30fb\u9ad8\u66f4\u65b0\u983b\u5ea6 \u521d\u671f\u8868\u793a\u9ad8\u901f\u30fbSEO\u5bfe\u5fdc Next.js SSG SEO\u91cd\u8981\u30fb\u4f4e\u66f4\u65b0\u983b\u5ea6 \u6700\u9ad8\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9 Gatsby"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_58","title":"\u60aa\u3044\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u6c7a\u5b9a","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_59","title":"\u274c \u907f\u3051\u308b\u3079\u304d\u8a2d\u8a08","text":"<ol> <li> <p>\u30d5\u30e9\u30c3\u30c8\u306a\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u9020 <pre><code>src/\n\u251c\u2500\u2500 LoginPage.tsx     # \u7ba1\u7406\u56f0\u96e3\n\u251c\u2500\u2500 Button.tsx        # \u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u5206\u985e\u306a\u3057\n\u251c\u2500\u2500 UserService.ts    # \u30ed\u30b8\u30c3\u30af\u6563\u5728\n\u251c\u2500\u2500 constants.ts      # \u8a2d\u5b9a\u7ba1\u7406\u306a\u3057  \n\u251c\u2500\u2500 utils.ts          # \u76ee\u7684\u4e0d\u660e\n\u251c\u2500\u2500 types.ts          # \u578b\u5b9a\u7fa9\u6df7\u5728\n\u2514\u2500\u2500 ...               # \u6570\u5341\u500b\u306e\u30d5\u30a1\u30a4\u30eb\uff08\u5f79\u5272\u4e0d\u660e\uff09\n</code></pre></p> </li> <li> <p>\u4e0d\u9069\u5207\u306a\u8cac\u52d9\u5206\u6563 <pre><code>src/\n\u251c\u2500\u2500 components/       # \u5168\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u6df7\u5728\n\u2502   \u251c\u2500\u2500 LoginPage.tsx # \u30da\u30fc\u30b8\u306a\u306e\u306bcomponents\u5185\n\u2502   \u251c\u2500\u2500 Button.tsx    # UI\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\n\u2502   \u251c\u2500\u2500 AuthProvider.tsx # Provider\u306a\u306e\u306bcomponents\u5185\n\u2502   \u2514\u2500\u2500 authStore.ts  # \u30b9\u30c8\u30a2\u306a\u306e\u306bcomponents\u5185\n\u2514\u2500\u2500 utils/            # \u4f55\u3067\u3082\u5165\u308c\u308b\u5834\u6240\n    \u251c\u2500\u2500 api.ts        # API\u8a2d\u5b9a\n    \u251c\u2500\u2500 constants.ts  # \u5b9a\u6570\n    \u251c\u2500\u2500 types.ts      # \u578b\u5b9a\u7fa9\n    \u2514\u2500\u2500 validation.ts # \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\n</code></pre></p> </li> <li> <p>\u5de8\u5927\u3067\u5bc6\u7d50\u5408\u306a\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8 <pre><code>// \u274c \u60aa\u3044\u4f8b\nfunction MegaComponent() {\n  // 500\u884c\u4ee5\u4e0a\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\n  // \u8907\u6570\u306e\u8cac\u52d9\u3092\u6301\u3064\n  // \u30c6\u30b9\u30c8\u304c\u56f0\u96e3\n}\n</code></pre></p> </li> <li> <p>\u4e0d\u9069\u5207\u306a\u72b6\u614b\u7ba1\u7406 <pre><code>// \u274c \u60aa\u3044\u4f8b\uff1a\u3059\u3079\u3066\u3092\u30b0\u30ed\u30fc\u30d0\u30eb\u72b6\u614b\u306b\nconst globalState = {\n  user: {},\n  reservations: [],\n  modalOpen: false,     // UI\u72b6\u614b\u3082\u30b0\u30ed\u30fc\u30d0\u30eb\u5316\n  buttonColor: 'blue'   // \u4e00\u6642\u7684\u306a\u72b6\u614b\u3082\u30b0\u30ed\u30fc\u30d0\u30eb\u5316\n}\n</code></pre></p> </li> <li> <p>\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306e\u8efd\u8996 <pre><code>// \u274c \u60aa\u3044\u4f8b\uff1a\u5165\u529b\u5024\u306e\u30b5\u30cb\u30bf\u30a4\u30b8\u30f3\u30b0\u4e0d\u5099\nfunction UserInput({ input }) {\n  return &lt;div dangerouslySetInnerHTML={{__html: input}} /&gt;\n}\n</code></pre></p> </li> </ol>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_60","title":"\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#1_3","title":"1. \u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u8a2d\u8a08\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#containerpresentational","title":"Container/Presentational \u30d1\u30bf\u30fc\u30f3","text":"<pre><code>// \u30d5\u30a1\u30a4\u30eb\u914d\u7f6e\u4f8b\nsrc/\n\u251c\u2500\u2500 features/reservation/\n\u2502   \u251c\u2500\u2500 components/\n\u2502   \u2502   \u251c\u2500\u2500 ReservationContainer.tsx    # Container\n\u2502   \u2502   \u2514\u2500\u2500 ReservationList.tsx         # Presentational  \n\u2502   \u251c\u2500\u2500 hooks/\n\u2502   \u2502   \u2514\u2500\u2500 useReservations.ts          # Custom Hook\n\u2502   \u2514\u2500\u2500 types/\n\u2502       \u2514\u2500\u2500 reservation.ts              # \u578b\u5b9a\u7fa9\n</code></pre> <pre><code>// \u2705 Container: \u30ed\u30b8\u30c3\u30af\u62c5\u5f53 (features/reservation/components/ReservationContainer.tsx)\nimport { useReservations } from '../hooks/useReservations';\nimport { ReservationList } from './ReservationList';\n\nexport function ReservationContainer() {\n  const { reservations, loading, createReservation } = useReservations();\n  const handleCreate = useCallback((data) =&gt; {\n    createReservation(data);\n  }, [createReservation]);\n\n  return (\n    &lt;ReservationList\n      reservations={reservations}\n      loading={loading}\n      onCreate={handleCreate}\n    /&gt;\n  );\n}\n\n// \u2705 Presentational: UI\u62c5\u5f53 (features/reservation/components/ReservationList.tsx)\nimport { LoadingSpinner } from '@/components/ui/LoadingSpinner';\nimport { CreateButton } from '@/components/ui/CreateButton';\nimport type { Reservation } from '../types/reservation';\n\ninterface Props {\n  reservations: Reservation[];\n  loading: boolean;\n  onCreate: (data: CreateReservationData) =&gt; void;\n}\n\nexport function ReservationList({ reservations, loading, onCreate }: Props) {\n  if (loading) return &lt;LoadingSpinner /&gt;;\n\n  return (\n    &lt;div&gt;\n      {reservations.map(reservation =&gt; \n        &lt;ReservationItem key={reservation.id} data={reservation} /&gt;\n      )}\n      &lt;CreateButton onClick={onCreate} /&gt;\n    &lt;/div&gt;\n  );\n}\n</code></pre>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#custom-hooks","title":"Custom Hooks \u30d1\u30bf\u30fc\u30f3","text":"<pre><code>// \u2705 \u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u306e\u5206\u96e2\nfunction useReservation() {\n  const [reservations, setReservations] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  const createReservation = useCallback(async (data) =&gt; {\n    setLoading(true);\n    try {\n      const result = await api.createReservation(data);\n      setReservations(prev =&gt; [...prev, result]);\n    } catch (error) {\n      handleError(error);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  return { reservations, loading, createReservation };\n}\n</code></pre>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#2_3","title":"2. \u72b6\u614b\u7ba1\u7406\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#context-reducer","title":"Context + Reducer \u30d1\u30bf\u30fc\u30f3","text":"<pre><code>// \u2705 \u72b6\u614b\u3068\u30a2\u30af\u30b7\u30e7\u30f3\u306e\u578b\u5b89\u5168\u306a\u7ba1\u7406\ninterface AppState {\n  user: User | null;\n  theme: 'light' | 'dark';\n}\n\ntype AppAction = \n  | { type: 'SET_USER'; payload: User }\n  | { type: 'SET_THEME'; payload: 'light' | 'dark' };\n\nfunction appReducer(state: AppState, action: AppAction): AppState {\n  switch (action.type) {\n    case 'SET_USER':\n      return { ...state, user: action.payload };\n    case 'SET_THEME':\n      return { ...state, theme: action.payload };\n    default:\n      return state;\n  }\n}\n\nconst AppContext = createContext&lt;{\n  state: AppState;\n  dispatch: Dispatch&lt;AppAction&gt;;\n} | null&gt;(null);\n</code></pre>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#3_4","title":"3. \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6700\u9069\u5316\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_61","title":"\u9045\u5ef6\u8aad\u307f\u8fbc\u307f","text":"<pre><code>// \u2705 \u30b3\u30fc\u30c9\u5206\u5272\nconst ReservationPage = lazy(() =&gt; import('./pages/ReservationPage'));\nconst UserManagementPage = lazy(() =&gt; import('./pages/UserManagementPage'));\n\nfunction App() {\n  return (\n    &lt;Router&gt;\n      &lt;Suspense fallback={&lt;LoadingSpinner /&gt;}&gt;\n        &lt;Routes&gt;\n          &lt;Route path=\"/reservations\" element={&lt;ReservationPage /&gt;} /&gt;\n          &lt;Route path=\"/users\" element={&lt;UserManagementPage /&gt;} /&gt;\n        &lt;/Routes&gt;\n      &lt;/Suspense&gt;\n    &lt;/Router&gt;\n  );\n}\n</code></pre>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_62","title":"\u30e1\u30e2\u5316","text":"<pre><code>// \u2705 \u9069\u5207\u306a\u30e1\u30e2\u5316\nconst ExpensiveList = memo(function ExpensiveList({ items, filter }) {\n  const filteredItems = useMemo(\n    () =&gt; items.filter(item =&gt; item.type === filter),\n    [items, filter]\n  );\n\n  return (\n    &lt;ul&gt;\n      {filteredItems.map(item =&gt; \n        &lt;ExpensiveListItem key={item.id} item={item} /&gt;\n      )}\n    &lt;/ul&gt;\n  );\n});\n</code></pre>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_63","title":"\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u54c1\u8cea\u4fdd\u8a3c","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#1-typescript","title":"1. TypeScript\u6d3b\u7528","text":"<pre><code>// \u2705 \u578b\u5b89\u5168\u306aAPI\u547c\u3073\u51fa\u3057\ninterface CreateReservationRequest {\n  roomId: string;\n  startTime: string;\n  endTime: string;\n  purpose: string;\n}\n\ninterface ReservationResponse {\n  id: string;\n  status: 'confirmed' | 'pending' | 'cancelled';\n  createdAt: string;\n}\n\nasync function createReservation(\n  request: CreateReservationRequest\n): Promise&lt;ReservationResponse&gt; {\n  const response = await fetch('/api/reservations', {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(request)\n  });\n\n  if (!response.ok) {\n    throw new Error('\u4e88\u7d04\u4f5c\u6210\u306b\u5931\u6557\u3057\u307e\u3057\u305f');\n  }\n\n  return response.json();\n}\n</code></pre>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#2_4","title":"2. \u30c6\u30b9\u30c8\u6226\u7565","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_64","title":"\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8","text":"<pre><code>// \u2705 Custom Hooks\u306e\u30c6\u30b9\u30c8\nimport { renderHook, act } from '@testing-library/react';\nimport { useReservation } from './useReservation';\n\ntest('should create reservation successfully', async () =&gt; {\n  const { result } = renderHook(() =&gt; useReservation());\n\n  await act(async () =&gt; {\n    await result.current.createReservation({\n      roomId: '1',\n      startTime: '2024-01-01T10:00:00Z',\n      endTime: '2024-01-01T11:00:00Z',\n      purpose: '\u30df\u30fc\u30c6\u30a3\u30f3\u30b0'\n    });\n  });\n\n  expect(result.current.reservations).toHaveLength(1);\n});\n</code></pre>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_65","title":"\u7d71\u5408\u30c6\u30b9\u30c8","text":"<pre><code>// \u2705 \u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u7d71\u5408\u30c6\u30b9\u30c8\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport { ReservationForm } from './ReservationForm';\n\ntest('should submit reservation form', async () =&gt; {\n  const mockOnSubmit = jest.fn();\n\n  render(&lt;ReservationForm onSubmit={mockOnSubmit} /&gt;);\n\n  fireEvent.change(screen.getByLabelText('\u4f1a\u8b70\u5ba4'), { \n    target: { value: '\u4f1a\u8b70\u5ba4A' } \n  });\n  fireEvent.click(screen.getByText('\u4e88\u7d04\u3059\u308b'));\n\n  await waitFor(() =&gt; {\n    expect(mockOnSubmit).toHaveBeenCalledWith(\n      expect.objectContaining({\n        roomName: '\u4f1a\u8b70\u5ba4A'\n      })\n    );\n  });\n});\n</code></pre>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_66","title":"\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u79fb\u884c\u6226\u7565","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_67","title":"\u6bb5\u968e\u7684\u79fb\u884c\u30a2\u30d7\u30ed\u30fc\u30c1","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_68","title":"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u79fb\u884c\u6226\u7565","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_69","title":"\u6bb5\u968e\u7684\u79fb\u884c\u30a2\u30d7\u30ed\u30fc\u30c1","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_70","title":"\u79fb\u884c\u6642\u306e\u6ce8\u610f\u70b9","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_71","title":"\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u79fb\u884c","text":"<ol> <li>\u6bb5\u968e\u7684\u79fb\u884c: \u30d3\u30c3\u30b0\u30d0\u30f3\u79fb\u884c\u306f\u907f\u3051\u3001\u30e2\u30b8\u30e5\u30fc\u30eb\u5358\u4f4d\u3067\u5b9f\u65bd</li> <li>\u5f8c\u65b9\u4e92\u63db\u6027: \u65e2\u5b58\u306eAPI\u3084\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306e\u7dad\u6301</li> <li>\u30c7\u30fc\u30bf\u6574\u5408\u6027: \u79fb\u884c\u671f\u9593\u4e2d\u306e\u30c7\u30fc\u30bf\u540c\u671f\u6226\u7565</li> <li>\u30c6\u30b9\u30c8\u30ab\u30d0\u30ec\u30c3\u30b8: \u79fb\u884c\u524d\u5f8c\u3067\u306e\u30c6\u30b9\u30c8\u54c1\u8cea\u7dad\u6301</li> <li>\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u76e3\u8996: \u79fb\u884c\u306b\u3088\u308b\u6027\u80fd\u52a3\u5316\u306e\u65e9\u671f\u691c\u77e5</li> </ol>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_72","title":"\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u79fb\u884c","text":"<ol> <li>\u30d5\u30a3\u30fc\u30c1\u30e3\u30fc\u30d5\u30e9\u30b0: \u65b0\u65e7\u6a5f\u80fd\u306e\u6bb5\u968e\u7684\u5207\u308a\u66ff\u3048</li> <li>\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u79fb\u884c: \u30c7\u30b6\u30a4\u30f3\u30b7\u30b9\u30c6\u30e0\u306e\u7d71\u4e00</li> <li>\u72b6\u614b\u7ba1\u7406\u79fb\u884c: \u30c7\u30fc\u30bf\u30d5\u30ed\u30fc\u306e\u4e00\u8cab\u6027\u7dad\u6301</li> <li>\u30d0\u30f3\u30c9\u30eb\u30b5\u30a4\u30ba\u76e3\u8996: \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u52a3\u5316\u9632\u6b62</li> <li>\u30d6\u30e9\u30a6\u30b6\u4e92\u63db\u6027: \u30b5\u30dd\u30fc\u30c8\u5bfe\u8c61\u30d6\u30e9\u30a6\u30b6\u3067\u306e\u52d5\u4f5c\u78ba\u8a8d</li> </ol>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_73","title":"\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_74","title":"\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u8a2d\u8a08\u306e\u539f\u5247","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_75","title":"\u57fa\u672c\u65b9\u91dd","text":"<ul> <li>Infrastructure as Code (IaC): \u30a4\u30f3\u30d5\u30e9\u306e\u8a2d\u5b9a\u3092\u30b3\u30fc\u30c9\u5316\u3057\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406</li> <li>\u81ea\u52d5\u5316: \u30c7\u30d7\u30ed\u30a4\u30fb\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u30fb\u5fa9\u65e7\u306e\u81ea\u52d5\u5316</li> <li>\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u3068\u30aa\u30d6\u30b6\u30fc\u30d0\u30d3\u30ea\u30c6\u30a3: \u30b7\u30b9\u30c6\u30e0\u72b6\u614b\u306e\u53ef\u8996\u5316\u3068\u8ffd\u8de1</li> <li>\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30d5\u30a1\u30fc\u30b9\u30c8: \u8a2d\u8a08\u6bb5\u968e\u304b\u3089\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8003\u616e</li> <li>\u30b3\u30b9\u30c8\u6700\u9069\u5316: \u30ea\u30bd\u30fc\u30b9\u5229\u7528\u306e\u52b9\u7387\u5316\u3068\u30b3\u30b9\u30c8\u7ba1\u7406</li> </ul>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_76","title":"\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#1_4","title":"1. \u30e2\u30ce\u30ea\u30b7\u30c3\u30af\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_77","title":"\u9069\u7528\u5834\u9762","text":"<ul> <li>\u30b7\u30b9\u30c6\u30e0\u898f\u6a21: \u5c0f\u898f\u6a21\u301c\u4e2d\u898f\u6a21</li> <li>\u30c1\u30fc\u30e0\u898f\u6a21: \u5c0f\u898f\u6a21\u30c1\u30fc\u30e0</li> <li>\u7279\u6027: \u5358\u4e00\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3001\u30b7\u30f3\u30d7\u30eb\u306a\u30c7\u30d7\u30ed\u30a4</li> </ul>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_78","title":"\u69cb\u9020","text":"<p>\u30e1\u30ea\u30c3\u30c8: - \u30b7\u30f3\u30d7\u30eb\u306a\u69cb\u6210 - \u4f4e\u3044\u904b\u7528\u30b3\u30b9\u30c8 - \u30c7\u30d7\u30ed\u30a4\u304c\u5bb9\u6613</p> <p>\u30c7\u30e1\u30ea\u30c3\u30c8: - \u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u306e\u67d4\u8edf\u6027\u304c\u4f4e\u3044 - \u5358\u4e00\u969c\u5bb3\u70b9 - \u5927\u898f\u6a21\u5316\u6642\u306e\u5236\u7d04</p>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#2_5","title":"2. \u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_79","title":"\u9069\u7528\u5834\u9762","text":"<ul> <li>\u30b7\u30b9\u30c6\u30e0\u898f\u6a21: \u5927\u898f\u6a21</li> <li>\u30c1\u30fc\u30e0\u898f\u6a21: \u8907\u6570\u30c1\u30fc\u30e0</li> <li>\u7279\u6027: \u72ec\u7acb\u3057\u305f\u30b5\u30fc\u30d3\u30b9\u3001\u9ad8\u3044\u30b9\u30b1\u30fc\u30e9\u30d3\u30ea\u30c6\u30a3</li> </ul>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_80","title":"\u69cb\u9020","text":"<p>\u30e1\u30ea\u30c3\u30c8: - \u72ec\u7acb\u3057\u305f\u30c7\u30d7\u30ed\u30a4\u3068\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0 - \u6280\u8853\u30b9\u30bf\u30c3\u30af\u306e\u67d4\u8edf\u6027 - \u969c\u5bb3\u306e\u5c40\u6240\u5316</p> <p>\u30c7\u30e1\u30ea\u30c3\u30c8: - \u8907\u96d1\u306a\u904b\u7528 - \u5206\u6563\u30b7\u30b9\u30c6\u30e0\u306e\u8ab2\u984c - \u30c7\u30d0\u30c3\u30b0\u306e\u56f0\u96e3\u3055</p>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#3_5","title":"3. \u30b3\u30f3\u30c6\u30ca\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_81","title":"\u9069\u7528\u5834\u9762","text":"<ul> <li>\u30c7\u30d7\u30ed\u30a4\u983b\u5ea6: \u9ad8\u983b\u5ea6</li> <li>\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u8981\u4ef6: \u52d5\u7684\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0</li> <li>\u7279\u6027: Kubernetes\u3001Docker\u7b49\u306e\u30b3\u30f3\u30c6\u30ca\u6280\u8853</li> </ul>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_82","title":"\u69cb\u9020","text":"<p>\u30e1\u30ea\u30c3\u30c8: - \u81ea\u52d5\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0 - \u9ad8\u53ef\u7528\u6027 - \u30ea\u30bd\u30fc\u30b9\u52b9\u7387\u5316</p> <p>\u30c7\u30e1\u30ea\u30c3\u30c8: - \u9ad8\u3044\u5b66\u7fd2\u30b3\u30b9\u30c8 - \u8907\u96d1\u306a\u8a2d\u5b9a - \u904b\u7528\u306e\u8907\u96d1\u3055</p>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#4_2","title":"4. \u30b5\u30fc\u30d0\u30fc\u30ec\u30b9\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_83","title":"\u9069\u7528\u5834\u9762","text":"<ul> <li>\u8ca0\u8377\u30d1\u30bf\u30fc\u30f3: \u5909\u52d5\u304c\u5927\u304d\u3044</li> <li>\u5b9f\u884c\u983b\u5ea6: \u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u3001\u30d0\u30fc\u30b9\u30c8\u578b</li> <li>\u7279\u6027: AWS Lambda\u3001Azure Functions\u7b49</li> </ul>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_84","title":"\u69cb\u9020","text":"<p>\u30e1\u30ea\u30c3\u30c8: - \u5b8c\u5168\u306a\u30b5\u30fc\u30d0\u30fc\u7ba1\u7406\u4e0d\u8981 - \u81ea\u52d5\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0 - \u5f93\u91cf\u8ab2\u91d1</p> <p>\u30c7\u30e1\u30ea\u30c3\u30c8: - \u30b3\u30fc\u30eb\u30c9\u30b9\u30bf\u30fc\u30c8 - \u30d9\u30f3\u30c0\u30fc\u30ed\u30c3\u30af\u30a4\u30f3 - \u30ed\u30fc\u30ab\u30eb\u30c6\u30b9\u30c8\u306e\u56f0\u96e3\u3055</p>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_85","title":"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_86","title":"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u69cb\u6210\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_87","title":"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8a2d\u8a08\u306e\u8981\u70b9","text":"\u8981\u7d20 \u8003\u616e\u4e8b\u9805 \u8ca0\u8377\u5206\u6563 \u30ed\u30fc\u30c9\u30d0\u30e9\u30f3\u30b5\u30fc\u306b\u3088\u308b\u8907\u6570\u30b5\u30fc\u30d0\u30fc\u3078\u306e\u5206\u6563 \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3 \u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3001WAF\u3001DDoS\u5bfe\u7b56 \u53ef\u7528\u6027 \u5197\u9577\u5316\u3001\u30d5\u30a7\u30a4\u30eb\u30aa\u30fc\u30d0\u30fc \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9 CDN\u3001\u30ad\u30e3\u30c3\u30b7\u30f3\u30b0\u3001\u5e2f\u57df\u5e45"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_88","title":"\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u6226\u7565","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#vs","title":"\u5782\u76f4\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0 vs \u6c34\u5e73\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_89","title":"\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u6226\u7565\u306e\u9078\u629e","text":"\u6226\u7565 \u30e1\u30ea\u30c3\u30c8 \u30c7\u30e1\u30ea\u30c3\u30c8 \u9069\u7528\u5834\u9762 \u5782\u76f4\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0 \u30b7\u30f3\u30d7\u30eb\u3001\u30c7\u30fc\u30bf\u6574\u5408\u6027\u4fdd\u6301 \u7269\u7406\u7684\u4e0a\u9650\u3001\u30c0\u30a6\u30f3\u30bf\u30a4\u30e0 \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3001\u30ec\u30ac\u30b7\u30fc\u30b7\u30b9\u30c6\u30e0 \u6c34\u5e73\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0 \u67d4\u8edf\u6027\u3001\u9ad8\u53ef\u7528\u6027 \u8907\u96d1\u306a\u8a2d\u8a08\u3001\u30c7\u30fc\u30bf\u5206\u6563 Web\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3001\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_90","title":"\u30aa\u30fc\u30c8\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_91","title":"\u76e3\u8996\u3068\u30ed\u30b0\u7ba1\u7406","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_92","title":"\u76e3\u8996\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_93","title":"\u76e3\u8996\u5bfe\u8c61\u3068\u6307\u6a19","text":"\u30ab\u30c6\u30b4\u30ea \u76e3\u8996\u9805\u76ee \u91cd\u8981\u6307\u6a19 \u30a4\u30f3\u30d5\u30e9 CPU\u3001\u30e1\u30e2\u30ea\u3001\u30c7\u30a3\u30b9\u30af\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af \u4f7f\u7528\u7387\u3001\u30ec\u30b9\u30dd\u30f3\u30b9\u6642\u9593 \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3 \u30ec\u30b9\u30dd\u30f3\u30b9\u30bf\u30a4\u30e0\u3001\u30a8\u30e9\u30fc\u7387\u3001\u30b9\u30eb\u30fc\u30d7\u30c3\u30c8 \u30ec\u30a4\u30c6\u30f3\u30b7\u3001\u6210\u529f\u7387 \u30d3\u30b8\u30cd\u30b9 \u30a2\u30af\u30c6\u30a3\u30d6\u30e6\u30fc\u30b6\u30fc\u6570\u3001\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u6570 \u30b3\u30f3\u30d0\u30fc\u30b8\u30e7\u30f3\u7387\u3001\u5229\u7528\u72b6\u6cc1"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_94","title":"\u30ed\u30b0\u7ba1\u7406\u6226\u7565","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_95","title":"\u30ed\u30b0\u30ec\u30d9\u30eb\u306e\u5b9a\u7fa9","text":"<pre><code>// \u2705 \u9069\u5207\u306a\u30ed\u30b0\u30ec\u30d9\u30eb\u306e\u4f7f\u7528\npublic class ReservationService {\n    private static final Logger logger = LoggerFactory.getLogger(ReservationService.class);\n\n    public void createReservation(ReservationRequest request) {\n        logger.debug(\"\u4e88\u7d04\u4f5c\u6210\u958b\u59cb: {}\", request);\n\n        try {\n            var reservation = processReservation(request);\n            logger.info(\"\u4e88\u7d04\u4f5c\u6210\u6210\u529f: reservationId={}\", reservation.getId());\n        } catch (BusinessException e) {\n            logger.warn(\"\u4e88\u7d04\u4f5c\u6210\u5931\u6557\uff08\u30d3\u30b8\u30cd\u30b9\u30a8\u30e9\u30fc\uff09: {}\", e.getMessage());\n            throw e;\n        } catch (Exception e) {\n            logger.error(\"\u4e88\u7d04\u4f5c\u6210\u5931\u6557\uff08\u30b7\u30b9\u30c6\u30e0\u30a8\u30e9\u30fc\uff09\", e);\n            throw new SystemException(\"\u4e88\u7d04\u4f5c\u6210\u51e6\u7406\u3067\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\", e);\n        }\n    }\n}\n</code></pre>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_96","title":"\u30ed\u30b0\u306e\u96c6\u7d04\u3068\u5206\u6790","text":"<ul> <li>\u96c6\u7d04: Fluentd\u3001Logstash\u7b49\u3067\u30ed\u30b0\u3092\u96c6\u7d04</li> <li>\u4fdd\u5b58: Elasticsearch\u3001S3\u7b49\u3067\u9577\u671f\u4fdd\u5b58</li> <li>\u5206\u6790: Kibana\u3001CloudWatch Insights\u7b49\u3067\u53ef\u8996\u5316\u30fb\u5206\u6790</li> </ul>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_97","title":"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_98","title":"\u591a\u5c64\u9632\u5fa1\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_99","title":"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","text":"\u9818\u57df \u5bfe\u7b56 \u5b9f\u88c5\u4f8b \u30cd\u30c3\u30c8\u30ef\u30fc\u30af \u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3001WAF\u3001DDoS\u5bfe\u7b56 AWS WAF, CloudFlare \u8a8d\u8a3c\u30fb\u8a8d\u53ef \u591a\u8981\u7d20\u8a8d\u8a3c\u3001OAuth2.0\u3001RBAC Auth0, Keycloak \u30c7\u30fc\u30bf\u4fdd\u8b77 \u6697\u53f7\u5316\uff08\u4fdd\u7ba1\u6642\u30fb\u8ee2\u9001\u6642\uff09\u3001\u30de\u30b9\u30ad\u30f3\u30b0 TLS/SSL, AES-256 \u76e3\u67fb \u30a2\u30af\u30bb\u30b9\u30ed\u30b0\u3001\u5909\u66f4\u5c65\u6b74\u3001\u30b3\u30f3\u30d7\u30e9\u30a4\u30a2\u30f3\u30b9 CloudTrail, \u76e3\u67fb\u30ed\u30b0"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_100","title":"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5b9f\u88c5\u4f8b","text":"<pre><code>// \u2705 \u30bb\u30ad\u30e5\u30a2\u306a\u5b9f\u88c5\n@RestController\n@RequestMapping(\"/api/reservations\")\npublic class ReservationController {\n\n    @PostMapping\n    @PreAuthorize(\"hasRole('USER')\")  // \u8a8d\u53ef\u30c1\u30a7\u30c3\u30af\n    public ResponseEntity&lt;Reservation&gt; create(\n            @Valid @RequestBody CreateReservationRequest request) {  // \u5165\u529b\u691c\u8a3c\n\n        // SQL\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u5bfe\u7b56\uff08PreparedStatement\u4f7f\u7528\uff09\n        var reservation = reservationService.createReservation(request);\n\n        // \u76e3\u67fb\u30ed\u30b0\u8a18\u9332\n        auditService.log(\"RESERVATION_CREATED\", reservation.getId());\n\n        return ResponseEntity.ok(reservation);\n    }\n}\n</code></pre>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_101","title":"\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3068\u707d\u5bb3\u5fa9\u65e7","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_102","title":"\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u6226\u7565","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#rporto","title":"RPO/RTO\u5b9a\u7fa9","text":"\u6307\u6a19 \u610f\u5473 \u76ee\u6a19\u5024\u4f8b RPO (Recovery Point Objective) \u30c7\u30fc\u30bf\u640d\u5931\u8a31\u5bb9\u6642\u9593 1\u6642\u9593\u4ee5\u5185 RTO (Recovery Time Objective) \u30b5\u30fc\u30d3\u30b9\u5fa9\u65e7\u76ee\u6a19\u6642\u9593 4\u6642\u9593\u4ee5\u5185"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_103","title":"\u30c7\u30a3\u30b6\u30b9\u30bf\u30ea\u30ab\u30d0\u30ea\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#1_5","title":"1. \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\uff06\u30ea\u30b9\u30c8\u30a2","text":"<ul> <li>RPO: \u6570\u6642\u9593\u301c1\u65e5</li> <li>RTO: \u6570\u6642\u9593\u301c1\u65e5</li> <li>\u30b3\u30b9\u30c8: \u4f4e</li> <li>\u7528\u9014: \u975e\u91cd\u8981\u30b7\u30b9\u30c6\u30e0</li> </ul>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#2_6","title":"2. \u30d1\u30a4\u30ed\u30c3\u30c8\u30e9\u30a4\u30c8","text":"<ul> <li>RPO: \u6570\u5206\u301c\u6570\u6642\u9593</li> <li>RTO: 1\u6642\u9593\u4ee5\u5185</li> <li>\u30b3\u30b9\u30c8: \u4e2d</li> <li>\u7528\u9014: \u30d3\u30b8\u30cd\u30b9\u7d99\u7d9a\u6027\u304c\u91cd\u8981</li> </ul>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#3_6","title":"3. \u30a6\u30a9\u30fc\u30e0\u30b9\u30bf\u30f3\u30d0\u30a4","text":"<ul> <li>RPO: \u6570\u79d2\u301c\u6570\u5206</li> <li>RTO: \u6570\u5206</li> <li>\u30b3\u30b9\u30c8: \u9ad8</li> <li>\u7528\u9014: \u9ad8\u53ef\u7528\u6027\u8981\u6c42\u30b7\u30b9\u30c6\u30e0</li> </ul>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#4_3","title":"4. \u30de\u30eb\u30c1\u30b5\u30a4\u30c8\u30a2\u30af\u30c6\u30a3\u30d6/\u30a2\u30af\u30c6\u30a3\u30d6","text":"<ul> <li>RPO: \u30bc\u30ed</li> <li>RTO: \u30bc\u30ed\uff08\u81ea\u52d5\u30d5\u30a7\u30a4\u30eb\u30aa\u30fc\u30d0\u30fc\uff09</li> <li>\u30b3\u30b9\u30c8: \u975e\u5e38\u306b\u9ad8</li> <li>\u7528\u9014: \u30df\u30c3\u30b7\u30e7\u30f3\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u30b7\u30b9\u30c6\u30e0</li> </ul>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#infrastructure-as-code-iac","title":"Infrastructure as Code (IaC)","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#iac","title":"IaC\u30c4\u30fc\u30eb\u306e\u9078\u629e","text":"\u30c4\u30fc\u30eb \u7279\u5fb4 \u9069\u7528\u5834\u9762 Terraform \u30de\u30eb\u30c1\u30af\u30e9\u30a6\u30c9\u5bfe\u5fdc\u3001\u5ba3\u8a00\u7684 \u30af\u30e9\u30a6\u30c9\u6a2a\u65ad\u7684\u306a\u30a4\u30f3\u30d5\u30e9\u7ba1\u7406 CloudFormation AWS\u7279\u5316\u3001AWS\u30b5\u30fc\u30d3\u30b9\u3068\u306e\u7d71\u5408 AWS\u5c02\u7528\u74b0\u5883 Ansible \u69cb\u6210\u7ba1\u7406\u3001\u624b\u7d9a\u304d\u578b \u30b5\u30fc\u30d0\u30fc\u8a2d\u5b9a\u7ba1\u7406 Pulumi \u6c4e\u7528\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9e\u4f7f\u7528 \u8907\u96d1\u306a\u30ed\u30b8\u30c3\u30af\u8981\u6c42\u6642"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#iacterraform","title":"IaC\u5b9f\u88c5\u4f8b\uff08Terraform\uff09","text":"<pre><code># \u2705 VPC\u5b9a\u7fa9\nresource \"aws_vpc\" \"main\" {\n  cidr_block           = \"10.0.0.0/16\"\n  enable_dns_hostnames = true\n  enable_dns_support   = true\n\n  tags = {\n    Name        = \"main-vpc\"\n    Environment = var.environment\n  }\n}\n\n# \u2705 \u30b5\u30d6\u30cd\u30c3\u30c8\u5b9a\u7fa9\nresource \"aws_subnet\" \"public\" {\n  count                   = 2\n  vpc_id                  = aws_vpc.main.id\n  cidr_block              = \"10.0.${count.index}.0/24\"\n  availability_zone       = data.aws_availability_zones.available.names[count.index]\n  map_public_ip_on_launch = true\n\n  tags = {\n    Name = \"public-subnet-${count.index + 1}\"\n  }\n}\n\n# \u2705 \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b0\u30eb\u30fc\u30d7\nresource \"aws_security_group\" \"web\" {\n  name        = \"web-sg\"\n  description = \"Security group for web servers\"\n  vpc_id      = aws_vpc.main.id\n\n  ingress {\n    from_port   = 443\n    to_port     = 443\n    protocol    = \"tcp\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n  }\n\n  egress {\n    from_port   = 0\n    to_port     = 0\n    protocol    = \"-1\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n  }\n}\n</code></pre>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#cicd","title":"CI/CD\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#cicd_1","title":"CI/CD\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_104","title":"\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u6226\u7565","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_105","title":"\u30d6\u30eb\u30fc\u30b0\u30ea\u30fc\u30f3\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8","text":"<p>\u30e1\u30ea\u30c3\u30c8: - \u5373\u5ea7\u306b\u30ed\u30fc\u30eb\u30d0\u30c3\u30af\u53ef\u80fd - \u30bc\u30ed\u30c0\u30a6\u30f3\u30bf\u30a4\u30e0 - \u672c\u756a\u74b0\u5883\u3067\u306e\u691c\u8a3c</p> <p>\u30c7\u30e1\u30ea\u30c3\u30c8: - \u30ea\u30bd\u30fc\u30b9\u304c2\u500d\u5fc5\u8981 - \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u79fb\u884c\u306e\u8907\u96d1\u3055</p>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_106","title":"\u30ab\u30ca\u30ea\u30a2\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8","text":"<p>\u30e1\u30ea\u30c3\u30c8: - \u30ea\u30b9\u30af\u6700\u5c0f\u5316 - \u6bb5\u968e\u7684\u306a\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8 - \u554f\u984c\u306e\u65e9\u671f\u767a\u898b</p> <p>\u30c7\u30e1\u30ea\u30c3\u30c8: - \u8907\u96d1\u306a\u7ba1\u7406 - \u30d0\u30fc\u30b8\u30e7\u30f3\u6df7\u5728\u671f\u9593</p>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_107","title":"\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u8a55\u4fa1\u57fa\u6e96","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_108","title":"\u54c1\u8cea\u5c5e\u6027\u8a55\u4fa1\u30de\u30c8\u30ea\u30c3\u30af\u30b9","text":"\u54c1\u8cea\u5c5e\u6027 \u30e2\u30ce\u30ea\u30b7\u30c3\u30af \u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9 \u30b3\u30f3\u30c6\u30ca \u30b5\u30fc\u30d0\u30fc\u30ec\u30b9 \u904b\u7528\u8907\u96d1\u6027 \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50 \u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50 \u30b9\u30b1\u30fc\u30e9\u30d3\u30ea\u30c6\u30a3 \u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 \u30b3\u30b9\u30c8\u52b9\u7387 \u2b50\u2b50\u2b50 \u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 \u30c7\u30d7\u30ed\u30a4\u901f\u5ea6 \u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 \u53ef\u7528\u6027 \u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50 \u76e3\u8996\u30fb\u30c7\u30d0\u30c3\u30b0 \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50 \u2b50\u2b50\u2b50 \u2b50\u2b50"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_109","title":"\u30b3\u30b9\u30c8\u6700\u9069\u5316\u6226\u7565","text":"\u6226\u7565 \u5b9f\u88c5\u65b9\u6cd5 \u524a\u6e1b\u52b9\u679c \u30ea\u30bd\u30fc\u30b9\u6700\u9069\u5316 \u9069\u5207\u306a\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30b5\u30a4\u30ba\u9078\u629e 20-40% \u4e88\u7d04\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9 \u9577\u671f\u30b3\u30df\u30c3\u30c8\u30e1\u30f3\u30c8\u3067\u5272\u5f15 40-60% \u30b9\u30dd\u30c3\u30c8\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9 \u4f59\u5270\u30ea\u30bd\u30fc\u30b9\u306e\u6d3b\u7528 70-90% \u30aa\u30fc\u30c8\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0 \u9700\u8981\u306b\u5fdc\u3058\u305f\u81ea\u52d5\u8abf\u6574 30-50% \u30b9\u30c8\u30ec\u30fc\u30b8\u6700\u9069\u5316 \u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u7ba1\u7406\u3001\u5727\u7e2e 30-60%"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_110","title":"\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u79fb\u884c\u6226\u7565","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_111","title":"\u30af\u30e9\u30a6\u30c9\u79fb\u884c\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_112","title":"\u79fb\u884c\u6642\u306e\u6ce8\u610f\u70b9","text":"<ol> <li>\u6bb5\u968e\u7684\u79fb\u884c: \u3059\u3079\u3066\u3092\u4e00\u5ea6\u306b\u79fb\u884c\u305b\u305a\u3001\u6bb5\u968e\u7684\u306b\u5b9f\u65bd</li> <li>\u30d1\u30a4\u30ed\u30c3\u30c8\u30d7\u30ed\u30b8\u30a7\u30af\u30c8: \u5c0f\u898f\u6a21\u30b7\u30b9\u30c6\u30e0\u3067\u5148\u884c\u691c\u8a3c</li> <li>\u30c7\u30fc\u30bf\u79fb\u884c\u8a08\u753b: \u30c7\u30fc\u30bf\u306e\u6574\u5408\u6027\u3068\u30c0\u30a6\u30f3\u30bf\u30a4\u30e0\u6700\u5c0f\u5316</li> <li>\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3: \u30af\u30e9\u30a6\u30c9\u74b0\u5883\u3067\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8981\u4ef6\u78ba\u8a8d</li> <li>\u30b3\u30b9\u30c8\u7ba1\u7406: \u79fb\u884c\u30b3\u30b9\u30c8\u3068\u904b\u7528\u30b3\u30b9\u30c8\u306e\u53ef\u8996\u5316</li> </ol>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_113","title":"\u307e\u3068\u3081","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_114","title":"\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u9078\u629e\u306e\u6307\u91dd","text":"<ol> <li>\u696d\u52d9\u30c9\u30e1\u30a4\u30f3\u306e\u7406\u89e3: \u4e2d\u6838\u696d\u52d9\u3068\u88dc\u5b8c\u696d\u52d9\u306e\u660e\u78ba\u306a\u8b58\u5225</li> <li>\u30c7\u30fc\u30bf\u8907\u96d1\u6027\u306e\u8a55\u4fa1: \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u95a2\u4fc2\u3068\u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u306e\u8907\u96d1\u3055</li> <li>\u975e\u6a5f\u80fd\u8981\u4ef6\u306e\u8003\u616e: \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3001\u30b9\u30b1\u30fc\u30e9\u30d3\u30ea\u30c6\u30a3\u3001\u76e3\u67fb\u8981\u4ef6</li> <li>\u30c1\u30fc\u30e0\u80fd\u529b\u306e\u8a55\u4fa1: \u6280\u8853\u7684\u7fd2\u719f\u5ea6\u3068\u5b66\u7fd2\u610f\u6b32</li> <li>\u9577\u671f\u6226\u7565\u306e\u6574\u5408: \u5c06\u6765\u7684\u306a\u62e1\u5f35\u6027\u3068\u4fdd\u5b88\u6027\u306e\u78ba\u4fdd</li> </ol>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_115","title":"\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u9078\u629e\u306e\u6307\u91dd","text":"<ol> <li>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u898f\u6a21: \u5c0f\u898f\u6a21\u30fb\u4e2d\u898f\u6a21\u30fb\u5927\u898f\u6a21\u306b\u5fdc\u3058\u305f\u69cb\u9020\u8a2d\u8a08</li> <li>\u30e6\u30fc\u30b6\u30fc\u4f53\u9a13\u8981\u4ef6: SEO\u30fb\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30fb\u30a4\u30f3\u30bf\u30e9\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u306e\u512a\u5148\u9806\u4f4d</li> <li>\u72b6\u614b\u7ba1\u7406\u8907\u96d1\u6027: \u30c7\u30fc\u30bf\u30d5\u30ed\u30fc\u30fb\u66f4\u65b0\u983b\u5ea6\u30fb\u5171\u6709\u7bc4\u56f2\u306e\u5206\u6790</li> <li>\u30c1\u30fc\u30e0\u69cb\u6210: \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u5c02\u4efb\u30fb\u30d5\u30eb\u30b9\u30bf\u30c3\u30af\u30fbQA\u30a8\u30f3\u30b8\u30cb\u30a2\u306e\u6709\u7121</li> <li>\u6280\u8853\u7684\u5236\u7d04: \u30d6\u30e9\u30a6\u30b6\u30b5\u30dd\u30fc\u30c8\u30fb\u65e2\u5b58\u30b7\u30b9\u30c6\u30e0\u30fb\u904b\u7528\u74b0\u5883</li> </ol>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_116","title":"\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u9078\u629e\u306e\u6307\u91dd","text":"<ol> <li>\u30b7\u30b9\u30c6\u30e0\u898f\u6a21\u3068\u30c8\u30e9\u30d5\u30a3\u30c3\u30af: \u4e88\u60f3\u3055\u308c\u308b\u8ca0\u8377\u30fb\u6210\u9577\u7387\u30fb\u30d4\u30fc\u30af\u6642\u306e\u8981\u4ef6\u5206\u6790</li> <li>\u53ef\u7528\u6027\u8981\u4ef6: SLA\u30fb\u30c0\u30a6\u30f3\u30bf\u30a4\u30e0\u8a31\u5bb9\u5ea6\u30fb\u707d\u5bb3\u5fa9\u65e7\u8981\u4ef6\u306e\u5b9a\u7fa9</li> <li>\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8981\u4ef6: \u30b3\u30f3\u30d7\u30e9\u30a4\u30a2\u30f3\u30b9\u30fb\u30c7\u30fc\u30bf\u4fdd\u8b77\u30fb\u76e3\u67fb\u8981\u4ef6\u306e\u8a55\u4fa1</li> <li>\u904b\u7528\u4f53\u5236: \u30c1\u30fc\u30e0\u306e\u6280\u8853\u529b\u30fb\u904b\u7528\u8ca0\u8377\u30fb\u81ea\u52d5\u5316\u30ec\u30d9\u30eb\u306e\u8003\u616e</li> <li>\u30b3\u30b9\u30c8\u5236\u7d04: \u521d\u671f\u6295\u8cc7\u30fb\u904b\u7528\u30b3\u30b9\u30c8\u30fb\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u30b3\u30b9\u30c8\u306e\u30d0\u30e9\u30f3\u30b9</li> </ol>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_117","title":"\u6210\u529f\u8981\u56e0","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_118","title":"\u30d0\u30c3\u30af\u30a8\u30f3\u30c9","text":"<ul> <li>\u9069\u5207\u306a\u30d1\u30bf\u30fc\u30f3\u9078\u629e: \u696d\u52d9\u7279\u6027\u306b\u5fdc\u3058\u305f\u6700\u9069\u306a\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u63a1\u7528</li> <li>\u6bb5\u968e\u7684\u306a\u5b9f\u88c5: \u5c0f\u3055\u304f\u59cb\u3081\u3066\u7d99\u7d9a\u7684\u306b\u6539\u5584</li> <li>\u54c1\u8cea\u306e\u4f5c\u308a\u8fbc\u307f: \u30c6\u30b9\u30c8\u30d5\u30a1\u30fc\u30b9\u30c8\u30fb\u7d99\u7d9a\u7684\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3</li> <li>\u30c9\u30e1\u30a4\u30f3\u99c6\u52d5\u8a2d\u8a08: \u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u306e\u9069\u5207\u306a\u8868\u73fe\u3068\u5206\u96e2</li> </ul>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_119","title":"\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9","text":"<ul> <li>\u9069\u5207\u306a\u6280\u8853\u9078\u629e: \u8981\u4ef6\u306b\u5fdc\u3058\u305f\u30e9\u30a4\u30d6\u30e9\u30ea\u30fb\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306e\u9078\u5b9a</li> <li>\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u8a2d\u8a08: \u518d\u5229\u7528\u6027\u3068\u4fdd\u5b88\u6027\u3092\u4e21\u7acb\u3057\u305f\u8a2d\u8a08</li> <li>\u72b6\u614b\u7ba1\u7406\u6226\u7565: \u30b9\u30b1\u30fc\u30eb\u306b\u5fdc\u3058\u305f\u9069\u5207\u306a\u72b6\u614b\u7ba1\u7406\u624b\u6cd5\u306e\u63a1\u7528</li> <li>\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6700\u9069\u5316: \u30e6\u30fc\u30b6\u30fc\u4f53\u9a13\u3092\u91cd\u8996\u3057\u305f\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8a2d\u8a08</li> </ul>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_120","title":"\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3","text":"<ul> <li>\u81ea\u52d5\u5316\u306e\u5fb9\u5e95: IaC \u306b\u3088\u308b\u30a4\u30f3\u30d5\u30e9\u7ba1\u7406\u3068\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u306e\u81ea\u52d5\u5316</li> <li>\u76e3\u8996\u3068\u30aa\u30d6\u30b6\u30fc\u30d0\u30d3\u30ea\u30c6\u30a3: \u5305\u62ec\u7684\u306a\u76e3\u8996\u4f53\u5236\u3068\u554f\u984c\u306e\u65e9\u671f\u691c\u77e5</li> <li>\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306e\u7d44\u307f\u8fbc\u307f: \u8a2d\u8a08\u6bb5\u968e\u304b\u3089\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5bfe\u7b56\u5b9f\u88c5</li> <li>\u30b3\u30b9\u30c8\u6700\u9069\u5316: \u30ea\u30bd\u30fc\u30b9\u5229\u7528\u306e\u7d99\u7d9a\u7684\u306a\u898b\u76f4\u3057\u3068\u6700\u9069\u5316</li> </ul>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_121","title":"\u7d71\u5408\u7684\u6210\u529f\u8981\u56e0","text":"<ul> <li>\u30c1\u30fc\u30e0\u6559\u80b2: \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u539f\u5247\u306e\u5171\u6709\u3068\u5b9f\u8df5</li> <li>\u7d99\u7d9a\u7684\u6539\u5584: \u5b9a\u671f\u7684\u306a\u8a2d\u8a08\u898b\u76f4\u3057\u3068\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0</li> <li>\u54c1\u8cea\u6587\u5316: \u81ea\u52d5\u30c6\u30b9\u30c8\u30fb\u30b3\u30fc\u30c9\u30ec\u30d3\u30e5\u30fc\u30fb\u9759\u7684\u89e3\u6790\u306e\u5fb9\u5e95</li> <li>\u6bb5\u968e\u7684\u79fb\u884c: \u30ea\u30b9\u30af\u3092\u6700\u5c0f\u5316\u3057\u305f\u6f38\u9032\u7684\u306a\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u6539\u5584</li> </ul>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_122","title":"\u5b9f\u8df5\u30dd\u30a4\u30f3\u30c8","text":""},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_123","title":"\u958b\u767a\u521d\u671f","text":"<ol> <li>\u8981\u4ef6\u306b\u57fa\u3065\u304f\u6280\u8853\u9078\u629e: \u904e\u5ea6\u306a\u6280\u8853\u3088\u308a\u8981\u4ef6\u9069\u5408\u6027\u3092\u91cd\u8996</li> <li>\u30d7\u30ed\u30c8\u30bf\u30a4\u30d7\u958b\u767a: \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u59a5\u5f53\u6027\u306e\u65e9\u671f\u691c\u8a3c</li> <li>\u30c1\u30fc\u30e0\u5408\u610f\u5f62\u6210: \u6280\u8853\u9078\u629e\u306e\u80cc\u666f\u3068\u7406\u7531\u306e\u5171\u6709</li> </ol>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_124","title":"\u958b\u767a\u4e2d\u671f","text":"<ol> <li>\u7d99\u7d9a\u7684\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0: \u8a2d\u8a08\u8ca0\u50b5\u306e\u65e9\u671f\u89e3\u6d88</li> <li>\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u76e3\u8996: \u54c1\u8cea\u30e1\u30c8\u30ea\u30af\u30b9\u306b\u57fa\u3065\u304f\u6539\u5584</li> <li>\u30c6\u30b9\u30c8\u30ab\u30d0\u30ec\u30c3\u30b8: \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u5909\u66f4\u306b\u5bfe\u3059\u308b\u5b89\u5168\u6027\u78ba\u4fdd</li> </ol>"},{"location":"reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_125","title":"\u904b\u7528\u671f","text":"<ol> <li>\u76e3\u8996\u30fb\u30e1\u30c8\u30ea\u30af\u30b9: \u5b9f\u88c5\u306e\u52b9\u679c\u6e2c\u5b9a\u3068\u6539\u5584\u6307\u91dd</li> <li>\u6280\u8853\u7684\u8ca0\u50b5\u7ba1\u7406: \u8a08\u753b\u7684\u306a\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u6539\u5584</li> <li>\u30b9\u30b1\u30fc\u30e9\u30d3\u30ea\u30c6\u30a3\u5bfe\u5fdc: \u6210\u9577\u306b\u5fdc\u3058\u305f\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u9032\u5316</li> </ol> <p>\u826f\u3044\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306f\u3001\u30b7\u30b9\u30c6\u30e0\u306e\u9577\u671f\u7684\u6210\u529f\u306e\u57fa\u76e4\u3068\u306a\u308a\u307e\u3059\u3002\u672c\u30ac\u30a4\u30c9\u3092\u53c2\u8003\u306b\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30fb\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u305d\u308c\u305e\u308c\u306e\u7279\u6027\u3092\u7406\u89e3\u3057\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u6700\u9069\u306a\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u9078\u629e\u30fb\u5b9f\u88c5\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/","title":"\u30a4\u30f3\u30d5\u30e9\u8a2d\u8a08\u30ac\u30a4\u30c9","text":""},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#1","title":"1. \u6982\u8981","text":""},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#11","title":"1.1 \u76ee\u7684","text":"<p>Infrastructure as Code (IaC) \u306b\u3088\u308b\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u306e\u8a2d\u8a08\u30fb\u69cb\u7bc9\u30fb\u7ba1\u7406\u306b\u304a\u3051\u308b\u898f\u5f8b\u3068\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u3092\u5b9a\u7fa9\u3059\u308b\u3002</p>"},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#12","title":"1.2 \u5bfe\u8c61\u30b7\u30b9\u30c6\u30e0","text":"<ul> <li>\u30b7\u30b9\u30c6\u30e0\u540d: \u4f1a\u8b70\u5ba4\u4e88\u7d04\u30b7\u30b9\u30c6\u30e0</li> <li>\u30af\u30e9\u30a6\u30c9\u57fa\u76e4: AWS</li> <li>IaC \u30c4\u30fc\u30eb: Terraform</li> <li>\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3: \u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3</li> </ul>"},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#13","title":"1.3 \u57fa\u672c\u539f\u5247","text":""},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#2","title":"2. \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u9020","text":""},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#21","title":"2.1 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020","text":""},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#22","title":"2.2 \u547d\u540d\u898f\u5247","text":""},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#221","title":"2.2.1 \u30ea\u30bd\u30fc\u30b9\u547d\u540d","text":"<pre><code>\u547d\u540d\u30d1\u30bf\u30fc\u30f3: \"{project}-{environment}-{service}-{resource}\"\n\n\u4f8b:\n  - VPC: \"meeting-room-prod-vpc\"\n  - Subnet: \"meeting-room-prod-public-subnet-1a\"\n  - Security Group: \"meeting-room-prod-web-sg\"\n  - RDS: \"meeting-room-prod-postgres-primary\"\n  - ALB: \"meeting-room-prod-app-alb\"\n</code></pre>"},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#222-terraform","title":"2.2.2 Terraform \u30d5\u30a1\u30a4\u30eb\u547d\u540d","text":"<pre><code>\u6a19\u6e96\u30d5\u30a1\u30a4\u30eb\u69cb\u6210:\n  - main.tf: \u30e1\u30a4\u30f3\u306e\u69cb\u6210\u5b9a\u7fa9\n  - variables.tf: \u5165\u529b\u5909\u6570\u5b9a\u7fa9\n  - outputs.tf: \u51fa\u529b\u5024\u5b9a\u7fa9\n  - versions.tf: \u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u30d0\u30fc\u30b8\u30e7\u30f3\u6307\u5b9a\n  - locals.tf: \u30ed\u30fc\u30ab\u30eb\u5909\u6570\u5b9a\u7fa9 (\u5fc5\u8981\u306b\u5fdc\u3058\u3066)\n  - data.tf: \u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u5b9a\u7fa9 (\u5fc5\u8981\u306b\u5fdc\u3058\u3066)\n</code></pre>"},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#3","title":"3. \u30e2\u30b8\u30e5\u30fc\u30eb\u8a2d\u8a08","text":""},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#31","title":"3.1 \u30e2\u30b8\u30e5\u30fc\u30eb\u5316\u306e\u539f\u5247","text":""},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#32","title":"3.2 \u4f1a\u8b70\u5ba4\u4e88\u7d04\u30b7\u30b9\u30c6\u30e0 \u30e2\u30b8\u30e5\u30fc\u30eb\u69cb\u6210","text":""},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#321","title":"3.2.1 \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30e2\u30b8\u30e5\u30fc\u30eb","text":"<pre><code># modules/networking/vpc/main.tf\nresource \"aws_vpc\" \"main\" {\n  cidr_block           = var.vpc_cidr\n  enable_dns_hostnames = true\n  enable_dns_support   = true\n\n  tags = merge(var.tags, {\n    Name = \"${var.name_prefix}-vpc\"\n  })\n}\n\nresource \"aws_subnet\" \"public\" {\n  count = length(var.public_subnet_cidrs)\n\n  vpc_id                  = aws_vpc.main.id\n  cidr_block              = var.public_subnet_cidrs[count.index]\n  availability_zone       = var.availability_zones[count.index]\n  map_public_ip_on_launch = true\n\n  tags = merge(var.tags, {\n    Name = \"${var.name_prefix}-public-subnet-${count.index + 1}\"\n    Type = \"Public\"\n  })\n}\n\nresource \"aws_subnet\" \"private\" {\n  count = length(var.private_subnet_cidrs)\n\n  vpc_id            = aws_vpc.main.id\n  cidr_block        = var.private_subnet_cidrs[count.index]\n  availability_zone = var.availability_zones[count.index]\n\n  tags = merge(var.tags, {\n    Name = \"${var.name_prefix}-private-subnet-${count.index + 1}\"\n    Type = \"Private\"\n  })\n}\n\nresource \"aws_internet_gateway\" \"main\" {\n  vpc_id = aws_vpc.main.id\n\n  tags = merge(var.tags, {\n    Name = \"${var.name_prefix}-igw\"\n  })\n}\n\nresource \"aws_nat_gateway\" \"main\" {\n  count = var.enable_nat_gateway ? length(aws_subnet.public) : 0\n\n  allocation_id = aws_eip.nat[count.index].id\n  subnet_id     = aws_subnet.public[count.index].id\n\n  tags = merge(var.tags, {\n    Name = \"${var.name_prefix}-nat-gw-${count.index + 1}\"\n  })\n\n  depends_on = [aws_internet_gateway.main]\n}\n\nresource \"aws_eip\" \"nat\" {\n  count = var.enable_nat_gateway ? length(aws_subnet.public) : 0\n\n  domain = \"vpc\"\n\n  tags = merge(var.tags, {\n    Name = \"${var.name_prefix}-nat-eip-${count.index + 1}\"\n  })\n\n  depends_on = [aws_internet_gateway.main]\n}\n</code></pre>"},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#322","title":"3.2.2 \u30b3\u30f3\u30d4\u30e5\u30fc\u30c8\u30e2\u30b8\u30e5\u30fc\u30eb","text":"<pre><code># modules/compute/web-app/main.tf\nresource \"aws_launch_template\" \"main\" {\n  name_prefix   = \"${var.name_prefix}-lt\"\n  image_id      = var.ami_id\n  instance_type = var.instance_type\n  key_name      = var.key_name\n\n  vpc_security_group_ids = [aws_security_group.web.id]\n\n  user_data = base64encode(templatefile(\"${path.module}/user_data.sh\", {\n    database_url = var.database_url\n    app_version  = var.app_version\n    environment  = var.environment\n  }))\n\n  tag_specifications {\n    resource_type = \"instance\"\n    tags = merge(var.tags, {\n      Name = \"${var.name_prefix}-instance\"\n    })\n  }\n\n  lifecycle {\n    create_before_destroy = true\n    precondition {\n      condition     = contains([\"t3.micro\", \"t3.small\", \"t3.medium\"], var.instance_type)\n      error_message = \"Instance type must be t3.micro, t3.small, or t3.medium for cost optimization.\"\n    }\n  }\n}\n\nresource \"aws_autoscaling_group\" \"main\" {\n  name             = \"${var.name_prefix}-asg\"\n  vpc_zone_identifier = var.subnet_ids\n  target_group_arns   = [aws_lb_target_group.main.arn]\n  health_check_type   = \"ELB\"\n  health_check_grace_period = 300\n\n  min_size         = var.min_size\n  max_size         = var.max_size\n  desired_capacity = var.desired_capacity\n\n  launch_template {\n    id      = aws_launch_template.main.id\n    version = \"$Latest\"\n  }\n\n  instance_refresh {\n    strategy = \"Rolling\"\n    preferences {\n      min_healthy_percentage = 50\n      instance_warmup        = 300\n    }\n  }\n\n  tag {\n    key                 = \"Name\"\n    value               = \"${var.name_prefix}-asg\"\n    propagate_at_launch = false\n  }\n\n  dynamic \"tag\" {\n    for_each = var.tags\n    content {\n      key                 = tag.key\n      value               = tag.value\n      propagate_at_launch = true\n    }\n  }\n\n  lifecycle {\n    create_before_destroy = true\n    postcondition {\n      condition     = length(self.availability_zones) &gt; 1\n      error_message = \"Auto Scaling Group must span multiple AZs for high availability.\"\n    }\n  }\n}\n\nresource \"aws_lb\" \"main\" {\n  name               = \"${var.name_prefix}-alb\"\n  internal           = false\n  load_balancer_type = \"application\"\n  security_groups    = [aws_security_group.alb.id]\n  subnets            = var.subnet_ids\n\n  enable_deletion_protection = var.environment == \"prod\" ? true : false\n\n  tags = merge(var.tags, {\n    Name = \"${var.name_prefix}-alb\"\n  })\n}\n\nresource \"aws_lb_target_group\" \"main\" {\n  name     = \"${var.name_prefix}-tg\"\n  port     = 8080\n  protocol = \"HTTP\"\n  vpc_id   = var.vpc_id\n\n  health_check {\n    enabled             = true\n    healthy_threshold   = 2\n    unhealthy_threshold = 2\n    timeout             = 5\n    interval            = 30\n    path                = \"/health\"\n    matcher             = \"200\"\n    port                = \"traffic-port\"\n    protocol            = \"HTTP\"\n  }\n\n  tags = merge(var.tags, {\n    Name = \"${var.name_prefix}-tg\"\n  })\n}\n\nresource \"aws_lb_listener\" \"main\" {\n  load_balancer_arn = aws_lb.main.arn\n  port              = \"80\"\n  protocol          = \"HTTP\"\n\n  default_action {\n    type             = \"forward\"\n    target_group_arn = aws_lb_target_group.main.arn\n  }\n}\n</code></pre>"},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#323","title":"3.2.3 \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30e2\u30b8\u30e5\u30fc\u30eb","text":"<pre><code># modules/database/postgresql/main.tf\nresource \"aws_db_subnet_group\" \"main\" {\n  name       = \"${var.name_prefix}-db-subnet-group\"\n  subnet_ids = var.subnet_ids\n\n  tags = merge(var.tags, {\n    Name = \"${var.name_prefix}-db-subnet-group\"\n  })\n}\n\nresource \"aws_db_parameter_group\" \"main\" {\n  family = \"postgres15\"\n  name   = \"${var.name_prefix}-db-params\"\n\n  parameter {\n    name  = \"log_statement\"\n    value = \"all\"\n  }\n\n  parameter {\n    name  = \"log_min_duration_statement\"\n    value = \"1000\"\n  }\n\n  tags = merge(var.tags, {\n    Name = \"${var.name_prefix}-db-params\"\n  })\n}\n\nresource \"aws_db_instance\" \"main\" {\n  identifier = \"${var.name_prefix}-db\"\n\n  allocated_storage     = var.allocated_storage\n  max_allocated_storage = var.max_allocated_storage\n  storage_type          = \"gp3\"\n  storage_encrypted     = true\n\n  engine         = \"postgres\"\n  engine_version = \"15.4\"\n  instance_class = var.instance_class\n\n  db_name  = var.database_name\n  username = var.database_username\n  password = var.database_password\n\n  db_subnet_group_name   = aws_db_subnet_group.main.name\n  vpc_security_group_ids = [aws_security_group.database.id]\n  parameter_group_name   = aws_db_parameter_group.main.name\n\n  backup_retention_period = var.backup_retention_period\n  backup_window          = var.backup_window\n  maintenance_window     = var.maintenance_window\n\n  skip_final_snapshot       = var.environment != \"prod\"\n  final_snapshot_identifier = var.environment == \"prod\" ? \"${var.name_prefix}-db-final-snapshot\" : null\n\n  deletion_protection = var.environment == \"prod\" ? true : false\n\n  performance_insights_enabled = var.environment == \"prod\" ? true : false\n  monitoring_interval         = var.environment == \"prod\" ? 60 : 0\n\n  tags = merge(var.tags, {\n    Name = \"${var.name_prefix}-db\"\n  })\n\n  lifecycle {\n    prevent_destroy = false\n    precondition {\n      condition     = var.allocated_storage &gt;= 20\n      error_message = \"Database must have at least 20GB of storage.\"\n    }\n  }\n}\n\nresource \"aws_db_instance\" \"replica\" {\n  count = var.create_replica ? 1 : 0\n\n  identifier = \"${var.name_prefix}-db-replica\"\n\n  replicate_source_db = aws_db_instance.main.identifier\n  instance_class      = var.replica_instance_class\n\n  skip_final_snapshot = true\n  deletion_protection = false\n\n  tags = merge(var.tags, {\n    Name = \"${var.name_prefix}-db-replica\"\n  })\n}\n</code></pre>"},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#33","title":"3.3 \u5165\u529b\u691c\u8a3c\u3068\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3","text":"<pre><code># modules/compute/web-app/variables.tf\nvariable \"instance_type\" {\n  description = \"EC2 instance type\"\n  type        = string\n\n  validation {\n    condition = contains([\n      \"t3.micro\", \"t3.small\", \"t3.medium\", \"t3.large\",\n      \"m5.large\", \"m5.xlarge\", \"m5.2xlarge\"\n    ], var.instance_type)\n    error_message = \"Instance type must be a supported type for this application.\"\n  }\n}\n\nvariable \"min_size\" {\n  description = \"Minimum number of instances in ASG\"\n  type        = number\n\n  validation {\n    condition     = var.min_size &gt; 0\n    error_message = \"Minimum size must be greater than 0 to avoid outages.\"\n  }\n\n  validation {\n    condition     = var.min_size &lt;= 10\n    error_message = \"Minimum size must be 10 or fewer for cost control.\"\n  }\n}\n\nvariable \"environment\" {\n  description = \"Environment name\"\n  type        = string\n\n  validation {\n    condition     = contains([\"dev\", \"stage\", \"prod\"], var.environment)\n    error_message = \"Environment must be one of: dev, stage, prod.\"\n  }\n}\n\nvariable \"vpc_cidr\" {\n  description = \"CIDR block for VPC\"\n  type        = string\n\n  validation {\n    condition     = can(cidrhost(var.vpc_cidr, 0))\n    error_message = \"VPC CIDR must be a valid CIDR block.\"\n  }\n}\n</code></pre>"},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#4","title":"4. \u74b0\u5883\u7ba1\u7406","text":""},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#41","title":"4.1 \u74b0\u5883\u5206\u96e2\u6226\u7565","text":""},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#42","title":"4.2 \u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u7ba1\u7406","text":"<pre><code># environments/global/variables.tf\nlocals {\n  project_name = \"meeting-room\"\n\n  common_tags = {\n    Project     = local.project_name\n    ManagedBy   = \"terraform\"\n    Owner       = \"platform-team\"\n    Repository  = \"meeting-room-infrastructure\"\n  }\n\n  environments = {\n    dev = {\n      name                = \"dev\"\n      instance_type       = \"t3.micro\"\n      min_size           = 1\n      max_size           = 2\n      desired_capacity   = 1\n      db_instance_class  = \"db.t3.micro\"\n      backup_retention   = 7\n      multi_az          = false\n      create_replica    = false\n    }\n\n    stage = {\n      name                = \"stage\"\n      instance_type       = \"t3.small\"\n      min_size           = 2\n      max_size           = 4\n      desired_capacity   = 2\n      db_instance_class  = \"db.t3.small\"\n      backup_retention   = 7\n      multi_az          = true\n      create_replica    = false\n    }\n\n    prod = {\n      name                = \"prod\"\n      instance_type       = \"t3.medium\"\n      min_size           = 2\n      max_size           = 8\n      desired_capacity   = 4\n      db_instance_class  = \"db.r6g.large\"\n      backup_retention   = 30\n      multi_az          = true\n      create_replica    = true\n    }\n  }\n\n  vpc_configs = {\n    dev = {\n      vpc_cidr             = \"10.0.0.0/16\"\n      public_subnet_cidrs  = [\"10.0.1.0/24\", \"10.0.2.0/24\"]\n      private_subnet_cidrs = [\"10.0.3.0/24\", \"10.0.4.0/24\"]\n      availability_zones   = [\"ap-northeast-1a\", \"ap-northeast-1c\"]\n    }\n\n    stage = {\n      vpc_cidr             = \"10.1.0.0/16\"\n      public_subnet_cidrs  = [\"10.1.1.0/24\", \"10.1.2.0/24\"]\n      private_subnet_cidrs = [\"10.1.3.0/24\", \"10.1.4.0/24\"]\n      availability_zones   = [\"ap-northeast-1a\", \"ap-northeast-1c\"]\n    }\n\n    prod = {\n      vpc_cidr             = \"10.2.0.0/16\"\n      public_subnet_cidrs  = [\"10.2.1.0/24\", \"10.2.2.0/24\"]\n      private_subnet_cidrs = [\"10.2.3.0/24\", \"10.2.4.0/24\"]\n      availability_zones   = [\"ap-northeast-1a\", \"ap-northeast-1c\"]\n    }\n  }\n}\n\noutput \"project_config\" {\n  value = {\n    name        = local.project_name\n    tags        = local.common_tags\n    environments = local.environments\n    vpc_configs = local.vpc_configs\n  }\n}\n</code></pre>"},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#43","title":"4.3 \u74b0\u5883\u56fa\u6709\u306e\u69cb\u6210","text":"<pre><code># environments/prod/main.tf\nterraform {\n  required_version = \"&gt;= 1.0\"\n\n  backend \"s3\" {\n    bucket         = \"meeting-room-terraform-state\"\n    key            = \"prod/terraform.tfstate\"\n    region         = \"ap-northeast-1\"\n    dynamodb_table = \"meeting-room-terraform-locks\"\n    encrypt        = true\n  }\n\n  required_providers {\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \"~&gt; 5.0\"\n    }\n  }\n}\n\nprovider \"aws\" {\n  region = \"ap-northeast-1\"\n\n  default_tags {\n    tags = local.common_tags\n  }\n}\n\n# \u30b0\u30ed\u30fc\u30d0\u30eb\u8a2d\u5b9a\u306e\u8aad\u307f\u8fbc\u307f\ndata \"terraform_remote_state\" \"global\" {\n  backend = \"s3\"\n\n  config = {\n    bucket = \"meeting-room-terraform-state\"\n    key    = \"global/terraform.tfstate\"\n    region = \"ap-northeast-1\"\n  }\n}\n\nlocals {\n  environment = \"prod\"\n  global_config = data.terraform_remote_state.global.outputs.project_config\n  env_config = local.global_config.environments[local.environment]\n  vpc_config = local.global_config.vpc_configs[local.environment]\n  common_tags = merge(local.global_config.tags, {\n    Environment = local.environment\n  })\n  name_prefix = \"${local.global_config.name}-${local.environment}\"\n}\n\n# \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30e2\u30b8\u30e5\u30fc\u30eb\nmodule \"vpc\" {\n  source = \"../../modules/networking/vpc\"\n\n  name_prefix = local.name_prefix\n\n  vpc_cidr             = local.vpc_config.vpc_cidr\n  public_subnet_cidrs  = local.vpc_config.public_subnet_cidrs\n  private_subnet_cidrs = local.vpc_config.private_subnet_cidrs\n  availability_zones   = local.vpc_config.availability_zones\n\n  enable_nat_gateway = true\n\n  tags = local.common_tags\n}\n\n# \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30e2\u30b8\u30e5\u30fc\u30eb\nmodule \"database\" {\n  source = \"../../modules/database/postgresql\"\n\n  name_prefix = local.name_prefix\n\n  subnet_ids = module.vpc.private_subnet_ids\n  vpc_id     = module.vpc.vpc_id\n\n  instance_class      = local.env_config.db_instance_class\n  allocated_storage   = 100\n  max_allocated_storage = 1000\n\n  database_name     = \"meetingroom\"\n  database_username = local.db_credentials.username\n  database_password = local.db_credentials.password\n\n  backup_retention_period = local.env_config.backup_retention\n  multi_az               = local.env_config.multi_az\n  create_replica         = local.env_config.create_replica\n\n  environment = local.environment\n  tags        = local.common_tags\n}\n\n# Web\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30e2\u30b8\u30e5\u30fc\u30eb\nmodule \"web_app\" {\n  source = \"../../modules/compute/web-app\"\n\n  name_prefix = local.name_prefix\n\n  vpc_id     = module.vpc.vpc_id\n  subnet_ids = module.vpc.public_subnet_ids\n\n  instance_type    = local.env_config.instance_type\n  min_size         = local.env_config.min_size\n  max_size         = local.env_config.max_size\n  desired_capacity = local.env_config.desired_capacity\n\n  database_url = \"postgresql://${local.db_credentials.username}:${local.db_credentials.password}@${module.database.endpoint}/meetingroom\"\n  app_version  = var.app_version\n\n  environment = local.environment\n  tags        = local.common_tags\n\n  depends_on = [module.database]\n}\n\n# Secrets Manager\u304b\u3089\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a8d\u8a3c\u60c5\u5831\u53d6\u5f97\ndata \"aws_secretsmanager_secret_version\" \"db_credentials\" {\n  secret_id = \"${local.name_prefix}-db-credentials\"\n}\n\nlocals {\n  db_credentials = jsondecode(data.aws_secretsmanager_secret_version.db_credentials.secret_string)\n}\n</code></pre>"},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#5","title":"5. \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u8a08","text":""},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#51","title":"5.1 \u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u7ba1\u7406","text":"<pre><code># modules/security/secrets-manager/main.tf\nresource \"aws_secretsmanager_secret\" \"db_credentials\" {\n  name        = \"${var.name_prefix}-db-credentials\"\n  description = \"Database credentials for ${var.name_prefix}\"\n\n  recovery_window_in_days = var.environment == \"prod\" ? 30 : 0\n\n  tags = merge(var.tags, {\n    Name = \"${var.name_prefix}-db-credentials\"\n    Type = \"Database\"\n  })\n}\n\nresource \"aws_secretsmanager_secret_version\" \"db_credentials\" {\n  secret_id = aws_secretsmanager_secret.db_credentials.id\n\n  secret_string = jsonencode({\n    username = var.database_username\n    password = var.database_password\n  })\n\n  lifecycle {\n    ignore_changes = [secret_string]\n  }\n}\n\n# \u81ea\u52d5\u30ed\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\uff08\u672c\u756a\u74b0\u5883\u306e\u307f\uff09\nresource \"aws_secretsmanager_secret_rotation\" \"db_credentials\" {\n  count = var.environment == \"prod\" ? 1 : 0\n\n  secret_id           = aws_secretsmanager_secret.db_credentials.id\n  rotation_lambda_arn = var.rotation_lambda_arn\n\n  rotation_rules {\n    automatically_after_days = 30\n  }\n}\n</code></pre>"},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#52-iam","title":"5.2 IAM \u30ed\u30fc\u30eb\u8a2d\u8a08","text":"<pre><code># modules/security/iam/main.tf\n# EC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u7528\u306eIAM\u30ed\u30fc\u30eb\nresource \"aws_iam_role\" \"ec2_role\" {\n  name = \"${var.name_prefix}-ec2-role\"\n\n  assume_role_policy = jsonencode({\n    Version = \"2012-10-17\"\n    Statement = [\n      {\n        Action = \"sts:AssumeRole\"\n        Effect = \"Allow\"\n        Principal = {\n          Service = \"ec2.amazonaws.com\"\n        }\n      }\n    ]\n  })\n\n  tags = var.tags\n}\n\n# Secrets Manager\u8aad\u307f\u53d6\u308a\u6a29\u9650\nresource \"aws_iam_policy\" \"secrets_manager_policy\" {\n  name = \"${var.name_prefix}-secrets-manager-policy\"\n\n  policy = jsonencode({\n    Version = \"2012-10-17\"\n    Statement = [\n      {\n        Effect = \"Allow\"\n        Action = [\n          \"secretsmanager:GetSecretValue\",\n          \"secretsmanager:DescribeSecret\"\n        ]\n        Resource = [\n          \"arn:aws:secretsmanager:${var.region}:${var.account_id}:secret:${var.name_prefix}-db-credentials*\"\n        ]\n      }\n    ]\n  })\n}\n\nresource \"aws_iam_role_policy_attachment\" \"secrets_manager_attachment\" {\n  policy_arn = aws_iam_policy.secrets_manager_policy.arn\n  role       = aws_iam_role.ec2_role.name\n}\n\n# CloudWatch Logs\u6a29\u9650\nresource \"aws_iam_policy\" \"cloudwatch_logs_policy\" {\n  name = \"${var.name_prefix}-cloudwatch-logs-policy\"\n\n  policy = jsonencode({\n    Version = \"2012-10-17\"\n    Statement = [\n      {\n        Effect = \"Allow\"\n        Action = [\n          \"logs:CreateLogGroup\",\n          \"logs:CreateLogStream\",\n          \"logs:PutLogEvents\",\n          \"logs:DescribeLogStreams\"\n        ]\n        Resource = [\n          \"arn:aws:logs:${var.region}:${var.account_id}:log-group:/aws/ec2/${var.name_prefix}*\"\n        ]\n      }\n    ]\n  })\n}\n\nresource \"aws_iam_role_policy_attachment\" \"cloudwatch_logs_attachment\" {\n  policy_arn = aws_iam_policy.cloudwatch_logs_policy.arn\n  role       = aws_iam_role.ec2_role.name\n}\n\nresource \"aws_iam_instance_profile\" \"ec2_profile\" {\n  name = \"${var.name_prefix}-ec2-profile\"\n  role = aws_iam_role.ec2_role.name\n\n  tags = var.tags\n}\n</code></pre>"},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#53","title":"5.3 \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b0\u30eb\u30fc\u30d7\u8a2d\u8a08","text":"<pre><code># modules/security/security-groups/main.tf\n# ALB\u7528\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b0\u30eb\u30fc\u30d7\nresource \"aws_security_group\" \"alb\" {\n  name_prefix = \"${var.name_prefix}-alb-\"\n  vpc_id      = var.vpc_id\n\n  ingress {\n    description = \"HTTP\"\n    from_port   = 80\n    to_port     = 80\n    protocol    = \"tcp\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n  }\n\n  ingress {\n    description = \"HTTPS\"\n    from_port   = 443\n    to_port     = 443\n    protocol    = \"tcp\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n  }\n\n  egress {\n    description = \"All outbound\"\n    from_port   = 0\n    to_port     = 0\n    protocol    = \"-1\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n  }\n\n  tags = merge(var.tags, {\n    Name = \"${var.name_prefix}-alb-sg\"\n    Type = \"LoadBalancer\"\n  })\n\n  lifecycle {\n    create_before_destroy = true\n  }\n}\n\n# Web\u5c64\u7528\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b0\u30eb\u30fc\u30d7\nresource \"aws_security_group\" \"web\" {\n  name_prefix = \"${var.name_prefix}-web-\"\n  vpc_id      = var.vpc_id\n\n  ingress {\n    description     = \"HTTP from ALB\"\n    from_port       = 8080\n    to_port         = 8080\n    protocol        = \"tcp\"\n    security_groups = [aws_security_group.alb.id]\n  }\n\n  ingress {\n    description = \"SSH\"\n    from_port   = 22\n    to_port     = 22\n    protocol    = \"tcp\"\n    cidr_blocks = [var.vpc_cidr]\n  }\n\n  egress {\n    description = \"All outbound\"\n    from_port   = 0\n    to_port     = 0\n    protocol    = \"-1\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n  }\n\n  tags = merge(var.tags, {\n    Name = \"${var.name_prefix}-web-sg\"\n    Type = \"WebServer\"\n  })\n\n  lifecycle {\n    create_before_destroy = true\n  }\n}\n\n# \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u7528\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b0\u30eb\u30fc\u30d7\nresource \"aws_security_group\" \"database\" {\n  name_prefix = \"${var.name_prefix}-db-\"\n  vpc_id      = var.vpc_id\n\n  ingress {\n    description     = \"PostgreSQL from Web\"\n    from_port       = 5432\n    to_port         = 5432\n    protocol        = \"tcp\"\n    security_groups = [aws_security_group.web.id]\n  }\n\n  tags = merge(var.tags, {\n    Name = \"${var.name_prefix}-db-sg\"\n    Type = \"Database\"\n  })\n\n  lifecycle {\n    create_before_destroy = true\n  }\n}\n</code></pre>"},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#6","title":"6. \u76e3\u8996\u30fb\u30ed\u30ae\u30f3\u30b0","text":""},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#61-cloudwatch","title":"6.1 CloudWatch \u76e3\u8996","text":"<pre><code># modules/monitoring/cloudwatch/main.tf\n# ALB\u76e3\u8996\nresource \"aws_cloudwatch_metric_alarm\" \"alb_response_time\" {\n  alarm_name          = \"${var.name_prefix}-alb-response-time\"\n  comparison_operator = \"GreaterThanThreshold\"\n  evaluation_periods  = \"2\"\n  metric_name         = \"TargetResponseTime\"\n  namespace           = \"AWS/ApplicationELB\"\n  period              = \"300\"\n  statistic           = \"Average\"\n  threshold           = \"2.0\"\n  alarm_description   = \"This metric monitors ALB response time\"\n  alarm_actions       = [aws_sns_topic.alerts.arn]\n\n  dimensions = {\n    LoadBalancer = var.alb_arn_suffix\n  }\n\n  tags = var.tags\n}\n\nresource \"aws_cloudwatch_metric_alarm\" \"alb_healthy_hosts\" {\n  alarm_name          = \"${var.name_prefix}-alb-healthy-hosts\"\n  comparison_operator = \"LessThanThreshold\"\n  evaluation_periods  = \"2\"\n  metric_name         = \"HealthyHostCount\"\n  namespace           = \"AWS/ApplicationELB\"\n  period              = \"300\"\n  statistic           = \"Average\"\n  threshold           = \"1\"\n  alarm_description   = \"This metric monitors healthy host count\"\n  alarm_actions       = [aws_sns_topic.alerts.arn]\n\n  dimensions = {\n    TargetGroup  = var.target_group_arn_suffix\n    LoadBalancer = var.alb_arn_suffix\n  }\n\n  tags = var.tags\n}\n\n# \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u76e3\u8996\nresource \"aws_cloudwatch_metric_alarm\" \"database_cpu\" {\n  alarm_name          = \"${var.name_prefix}-db-cpu\"\n  comparison_operator = \"GreaterThanThreshold\"\n  evaluation_periods  = \"2\"\n  metric_name         = \"CPUUtilization\"\n  namespace           = \"AWS/RDS\"\n  period              = \"300\"\n  statistic           = \"Average\"\n  threshold           = \"80\"\n  alarm_description   = \"This metric monitors database CPU utilization\"\n  alarm_actions       = [aws_sns_topic.alerts.arn]\n\n  dimensions = {\n    DBInstanceIdentifier = var.db_instance_id\n  }\n\n  tags = var.tags\n}\n\nresource \"aws_cloudwatch_metric_alarm\" \"database_connections\" {\n  alarm_name          = \"${var.name_prefix}-db-connections\"\n  comparison_operator = \"GreaterThanThreshold\"\n  evaluation_periods  = \"2\"\n  metric_name         = \"DatabaseConnections\"\n  namespace           = \"AWS/RDS\"\n  period              = \"300\"\n  statistic           = \"Average\"\n  threshold           = \"80\"\n  alarm_description   = \"This metric monitors database connection count\"\n  alarm_actions       = [aws_sns_topic.alerts.arn]\n\n  dimensions = {\n    DBInstanceIdentifier = var.db_instance_id\n  }\n\n  tags = var.tags\n}\n\n# SNS\u901a\u77e5\u8a2d\u5b9a\nresource \"aws_sns_topic\" \"alerts\" {\n  name = \"${var.name_prefix}-alerts\"\n\n  tags = var.tags\n}\n\nresource \"aws_sns_topic_subscription\" \"email_alerts\" {\n  count = length(var.alert_email_addresses)\n\n  topic_arn = aws_sns_topic.alerts.arn\n  protocol  = \"email\"\n  endpoint  = var.alert_email_addresses[count.index]\n}\n\n# \u30ab\u30b9\u30bf\u30e0\u30e1\u30c8\u30ea\u30af\u30b9\nresource \"aws_cloudwatch_log_group\" \"app_logs\" {\n  name              = \"/aws/ec2/${var.name_prefix}/application\"\n  retention_in_days = var.log_retention_days\n\n  tags = var.tags\n}\n\nresource \"aws_cloudwatch_log_group\" \"access_logs\" {\n  name              = \"/aws/ec2/${var.name_prefix}/access\"\n  retention_in_days = var.log_retention_days\n\n  tags = var.tags\n}\n</code></pre>"},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#7","title":"7. \u30c6\u30b9\u30c8\u6226\u7565","text":""},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#71","title":"7.1 \u5358\u4f53\u30c6\u30b9\u30c8","text":"<pre><code>// test/unit/vpc_test.go\npackage test\n\nimport (\n    \"testing\"\n\n    \"github.com/gruntwork-io/terratest/modules/terraform\"\n    \"github.com/stretchr/testify/assert\"\n)\n\nfunc TestVPCModule(t *testing.T) {\n    t.Parallel()\n\n    terraformOptions := terraform.WithDefaultRetryableErrors(t, &amp;terraform.Options{\n        TerraformDir: \"../modules/networking/vpc\",\n        Vars: map[string]interface{}{\n            \"name_prefix\": \"test-vpc\",\n            \"vpc_cidr\":    \"10.0.0.0/16\",\n            \"public_subnet_cidrs\": []string{\n                \"10.0.1.0/24\",\n                \"10.0.2.0/24\",\n            },\n            \"private_subnet_cidrs\": []string{\n                \"10.0.3.0/24\",\n                \"10.0.4.0/24\",\n            },\n            \"availability_zones\": []string{\n                \"ap-northeast-1a\",\n                \"ap-northeast-1c\",\n            },\n            \"enable_nat_gateway\": true,\n            \"tags\": map[string]string{\n                \"Test\":        \"true\",\n                \"Environment\": \"test\",\n            },\n        },\n    })\n\n    defer terraform.Destroy(t, terraformOptions)\n    terraform.InitAndApply(t, terraformOptions)\n\n    // \u51fa\u529b\u5024\u306e\u691c\u8a3c\n    vpcId := terraform.Output(t, terraformOptions, \"vpc_id\")\n    assert.NotEmpty(t, vpcId, \"VPC ID should not be empty\")\n\n    publicSubnetIds := terraform.OutputList(t, terraformOptions, \"public_subnet_ids\")\n    assert.Len(t, publicSubnetIds, 2, \"Should create 2 public subnets\")\n\n    privateSubnetIds := terraform.OutputList(t, terraformOptions, \"private_subnet_ids\")\n    assert.Len(t, privateSubnetIds, 2, \"Should create 2 private subnets\")\n}\n</code></pre>"},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#72","title":"7.2 \u7d71\u5408\u30c6\u30b9\u30c8","text":"<pre><code>// test/integration/full_stack_test.go\npackage test\n\nimport (\n    \"fmt\"\n    \"testing\"\n    \"time\"\n\n    http_helper \"github.com/gruntwork-io/terratest/modules/http-helper\"\n    \"github.com/gruntwork-io/terratest/modules/random\"\n    \"github.com/gruntwork-io/terratest/modules/terraform\"\n    test_structure \"github.com/gruntwork-io/terratest/modules/test-structure\"\n)\n\nconst envDir = \"../environments/stage\"\n\nfunc TestFullStackDeployment(t *testing.T) {\n    t.Parallel()\n\n    // \u30b9\u30c6\u30fc\u30b8\u30d9\u30fc\u30b9\u306e\u30c6\u30b9\u30c8\u5b9f\u884c\n    defer test_structure.RunTestStage(t, \"cleanup\", func() {\n        terraformOptions := test_structure.LoadTerraformOptions(t, envDir)\n        terraform.Destroy(t, terraformOptions)\n    })\n\n    test_structure.RunTestStage(t, \"deploy\", func() {\n        uniqueId := random.UniqueId()\n        terraformOptions := &amp;terraform.Options{\n            TerraformDir: envDir,\n            Vars: map[string]interface{}{\n                \"app_version\":        \"test-\" + uniqueId,\n                \"integration_test\":   true,\n                \"environment_suffix\": uniqueId,\n            },\n        }\n\n        test_structure.SaveTerraformOptions(t, envDir, terraformOptions)\n        terraform.InitAndApply(t, terraformOptions)\n    })\n\n    test_structure.RunTestStage(t, \"validate\", func() {\n        terraformOptions := test_structure.LoadTerraformOptions(t, envDir)\n\n        // ALB \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u53d6\u5f97\n        albDnsName := terraform.Output(t, terraformOptions, \"alb_dns_name\")\n        url := fmt.Sprintf(\"http://%s\", albDnsName)\n\n        // \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\n        http_helper.HttpGetWithRetryWithCustomValidation(\n            t,\n            fmt.Sprintf(\"%s/health\", url),\n            nil,\n            30,\n            10*time.Second,\n            func(statusCode int, body string) bool {\n                return statusCode == 200\n            },\n        )\n\n        // \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u6a5f\u80fd\u30c6\u30b9\u30c8\n        http_helper.HttpGetWithRetryWithCustomValidation(\n            t,\n            fmt.Sprintf(\"%s/api/meeting-rooms\", url),\n            nil,\n            10,\n            5*time.Second,\n            func(statusCode int, body string) bool {\n                return statusCode == 200\n            },\n        )\n    })\n}\n</code></pre>"},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#73","title":"7.3 \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30c6\u30b9\u30c8","text":"<pre><code>// test/security/security_test.go\npackage test\n\nimport (\n    \"testing\"\n\n    \"github.com/gruntwork-io/terratest/modules/terraform\"\n    \"github.com/stretchr/testify/assert\"\n)\n\nfunc TestSecurityConfiguration(t *testing.T) {\n    t.Parallel()\n\n    terraformOptions := terraform.WithDefaultRetryableErrors(t, &amp;terraform.Options{\n        TerraformDir: \"../environments/prod\",\n        PlanFilePath: \"./tfplan\",\n    })\n\n    // terraform plan \u306e\u5b9f\u884c\n    terraform.InitAndPlan(t, terraformOptions)\n    plan := terraform.ShowWithStruct(t, terraformOptions)\n\n    // \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a\u306e\u691c\u8a3c\n    t.Run(\"Database encryption\", func(t *testing.T) {\n        dbInstances := plan.ResourcesByType[\"aws_db_instance\"]\n        for _, instance := range dbInstances {\n            storageEncrypted := instance.AttributeValues[\"storage_encrypted\"]\n            assert.True(t, storageEncrypted.(bool), \"Database storage should be encrypted\")\n        }\n    })\n\n    t.Run(\"Security group rules\", func(t *testing.T) {\n        securityGroups := plan.ResourcesByType[\"aws_security_group\"]\n        for _, sg := range securityGroups {\n            ingress := sg.AttributeValues[\"ingress\"].([]interface{})\n            for _, rule := range ingress {\n                ruleMap := rule.(map[string]interface{})\n                cidrBlocks := ruleMap[\"cidr_blocks\"].([]interface{})\n\n                // 0.0.0.0/0 \u304b\u3089\u306eSSH\u63a5\u7d9a\u3092\u7981\u6b62\n                if ruleMap[\"from_port\"].(float64) == 22 {\n                    assert.NotContains(t, cidrBlocks, \"0.0.0.0/0\", \n                        \"SSH should not be open to the world\")\n                }\n            }\n        }\n    })\n\n    t.Run(\"Deletion protection\", func(t *testing.T) {\n        dbInstances := plan.ResourcesByType[\"aws_db_instance\"]\n        for _, instance := range dbInstances {\n            if instance.AttributeValues[\"identifier\"].(string) == \"meeting-room-prod-db\" {\n                deletionProtection := instance.AttributeValues[\"deletion_protection\"]\n                assert.True(t, deletionProtection.(bool), \n                    \"Production database should have deletion protection enabled\")\n            }\n        }\n    })\n}\n</code></pre>"},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#8-cicd","title":"8. CI/CD \u7d71\u5408","text":""},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#81-github-actions","title":"8.1 GitHub Actions \u30ef\u30fc\u30af\u30d5\u30ed\u30fc","text":"<pre><code># .github/workflows/terraform.yml\nname: Terraform Infrastructure\n\non:\n  push:\n    branches: [main, develop]\n    paths: ['terraform/**']\n  pull_request:\n    branches: [main]\n    paths: ['terraform/**']\n\nenv:\n  TF_VERSION: 1.5.0\n  TF_IN_AUTOMATION: true\n\npermissions:\n  id-token: write\n  contents: read\n  pull-requests: write\n\njobs:\n  validate:\n    name: Validate Terraform\n    runs-on: ubuntu-latest\n\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v4\n\n      - name: Setup Terraform\n        uses: hashicorp/setup-terraform@v3\n        with:\n          terraform_version: ${{ env.TF_VERSION }}\n\n      - name: Terraform Format Check\n        run: terraform fmt -check -recursive ./terraform/\n\n      - name: Terraform Validate\n        run: |\n          find ./terraform -name \"*.tf\" -path \"*/modules/*\" -execdir terraform init -backend=false \\;\n          find ./terraform -name \"*.tf\" -path \"*/modules/*\" -execdir terraform validate \\;\n\n  plan:\n    name: Plan Infrastructure\n    runs-on: ubuntu-latest\n    if: github.event_name == 'pull_request'\n    needs: [validate]\n\n    strategy:\n      matrix:\n        environment: [dev, stage]\n\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v4\n\n      - name: Configure AWS credentials\n        uses: aws-actions/configure-aws-credentials@v4\n        with:\n          role-to-assume: ${{ secrets.AWS_ROLE_TO_ASSUME }}\n          role-session-name: terraform-${{ matrix.environment }}\n          aws-region: ap-northeast-1\n\n      - name: Setup Terraform\n        uses: hashicorp/setup-terraform@v3\n        with:\n          terraform_version: ${{ env.TF_VERSION }}\n\n      - name: Terraform Init\n        working-directory: ./terraform/environments/${{ matrix.environment }}\n        run: terraform init\n\n      - name: Terraform Plan\n        working-directory: ./terraform/environments/${{ matrix.environment }}\n        run: |\n          terraform plan -out=tfplan -var=\"app_version=${{ github.sha }}\"\n          terraform show -no-color tfplan &gt; plan.txt\n\n      - name: Comment PR with Plan\n        uses: actions/github-script@v7\n        with:\n          script: |\n            const fs = require('fs');\n            const plan = fs.readFileSync('./terraform/environments/${{ matrix.environment }}/plan.txt', 'utf8');\n            const truncatedPlan = plan.length &gt; 65000 ? plan.substring(0, 65000) + \"\\n...truncated\" : plan;\n\n            github.rest.issues.createComment({\n              issue_number: context.issue.number,\n              owner: context.repo.owner,\n              repo: context.repo.repo,\n              body: `## Terraform Plan (${{ matrix.environment }})\n\n              \\`\\`\\`\n              ${truncatedPlan}\n              \\`\\`\\`\n              `\n            });\n\n  deploy-dev:\n    name: Deploy to Development\n    runs-on: ubuntu-latest\n    if: github.ref == 'refs/heads/develop'\n    needs: [validate]\n    environment: development\n\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v4\n\n      - name: Configure AWS credentials\n        uses: aws-actions/configure-aws-credentials@v4\n        with:\n          role-to-assume: ${{ secrets.AWS_ROLE_TO_ASSUME }}\n          role-session-name: terraform-dev\n          aws-region: ap-northeast-1\n\n      - name: Setup Terraform\n        uses: hashicorp/setup-terraform@v3\n        with:\n          terraform_version: ${{ env.TF_VERSION }}\n\n      - name: Terraform Init\n        working-directory: ./terraform/environments/dev\n        run: terraform init\n\n      - name: Terraform Apply\n        working-directory: ./terraform/environments/dev\n        run: terraform apply -auto-approve -var=\"app_version=${{ github.sha }}\"\n\n  deploy-stage:\n    name: Deploy to Staging\n    runs-on: ubuntu-latest\n    if: github.ref == 'refs/heads/main'\n    needs: [validate]\n    environment: staging\n\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v4\n\n      - name: Configure AWS credentials\n        uses: aws-actions/configure-aws-credentials@v4\n        with:\n          role-to-assume: ${{ secrets.AWS_ROLE_TO_ASSUME }}\n          role-session-name: terraform-stage\n          aws-region: ap-northeast-1\n\n      - name: Setup Terraform\n        uses: hashicorp/setup-terraform@v3\n        with:\n          terraform_version: ${{ env.TF_VERSION }}\n\n      - name: Terraform Init\n        working-directory: ./terraform/environments/stage\n        run: terraform init\n\n      - name: Terraform Apply\n        working-directory: ./terraform/environments/stage\n        run: terraform apply -auto-approve -var=\"app_version=${{ github.sha }}\"\n\n  deploy-prod:\n    name: Deploy to Production\n    runs-on: ubuntu-latest\n    if: github.ref == 'refs/heads/main'\n    needs: [deploy-stage]\n    environment: production\n\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v4\n\n      - name: Configure AWS credentials\n        uses: aws-actions/configure-aws-credentials@v4\n        with:\n          role-to-assume: ${{ secrets.AWS_ROLE_TO_ASSUME }}\n          role-session-name: terraform-prod\n          aws-region: ap-northeast-1\n\n      - name: Setup Terraform\n        uses: hashicorp/setup-terraform@v3\n        with:\n          terraform_version: ${{ env.TF_VERSION }}\n\n      - name: Terraform Init\n        working-directory: ./terraform/environments/prod\n        run: terraform init\n\n      - name: Terraform Plan\n        working-directory: ./terraform/environments/prod\n        run: terraform plan -out=tfplan -var=\"app_version=${{ github.sha }}\"\n\n      - name: Manual Approval Required\n        run: |\n          echo \"Production deployment requires manual approval\"\n          echo \"Review the plan and approve in GitHub Actions\"\n\n      - name: Terraform Apply\n        working-directory: ./terraform/environments/prod\n        run: terraform apply tfplan\n</code></pre>"},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#82-oidc","title":"8.2 OIDC \u8a2d\u5b9a","text":"<pre><code># terraform/iam-oidc/main.tf\nresource \"aws_iam_openid_connect_provider\" \"github\" {\n  url = \"https://token.actions.githubusercontent.com\"\n\n  client_id_list = [\n    \"sts.amazonaws.com\",\n  ]\n\n  thumbprint_list = [\n    \"6938fd4d98bab03faadb97b34396831e3780aea1\",\n    \"1c58a3a8518e8759bf075b76b750d4f2df264fcd\"\n  ]\n\n  tags = {\n    Name      = \"github-actions-oidc\"\n    ManagedBy = \"terraform\"\n  }\n}\n\nresource \"aws_iam_role\" \"github_actions\" {\n  name = \"github-actions-terraform\"\n\n  assume_role_policy = jsonencode({\n    Version = \"2012-10-17\"\n    Statement = [\n      {\n        Action = \"sts:AssumeRoleWithWebIdentity\"\n        Effect = \"Allow\"\n        Principal = {\n          Federated = aws_iam_openid_connect_provider.github.arn\n        }\n        Condition = {\n          StringEquals = {\n            \"token.actions.githubusercontent.com:aud\" = \"sts.amazonaws.com\"\n          }\n          StringLike = {\n            \"token.actions.githubusercontent.com:sub\" = \"repo:organization/meeting-room-infrastructure:*\"\n          }\n        }\n      }\n    ]\n  })\n\n  tags = {\n    Name      = \"github-actions-terraform\"\n    ManagedBy = \"terraform\"\n  }\n}\n\nresource \"aws_iam_role_policy\" \"github_actions_terraform\" {\n  name = \"terraform-permissions\"\n  role = aws_iam_role.github_actions.id\n\n  policy = jsonencode({\n    Version = \"2012-10-17\"\n    Statement = [\n      {\n        Effect = \"Allow\"\n        Action = [\n          \"ec2:*\",\n          \"rds:*\",\n          \"elasticloadbalancing:*\",\n          \"autoscaling:*\",\n          \"iam:*\",\n          \"s3:*\",\n          \"dynamodb:*\",\n          \"secretsmanager:*\",\n          \"logs:*\",\n          \"cloudwatch:*\",\n          \"sns:*\"\n        ]\n        Resource = \"*\"\n      }\n    ]\n  })\n}\n</code></pre>"},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#9","title":"9. \u30b3\u30b9\u30c8\u6700\u9069\u5316","text":""},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#91","title":"9.1 \u30ea\u30bd\u30fc\u30b9\u6700\u9069\u5316","text":"<pre><code># modules/cost-optimization/spot-instances/main.tf\nresource \"aws_launch_template\" \"spot\" {\n  name_prefix = \"${var.name_prefix}-spot-\"\n\n  image_id      = var.ami_id\n  instance_type = var.instance_type\n  key_name      = var.key_name\n\n  vpc_security_group_ids = var.security_group_ids\n\n  instance_market_options {\n    market_type = \"spot\"\n    spot_options {\n      spot_instance_type = \"one-time\"\n      max_price         = var.spot_price\n    }\n  }\n\n  user_data = var.user_data\n\n  tag_specifications {\n    resource_type = \"instance\"\n    tags = merge(var.tags, {\n      Name = \"${var.name_prefix}-spot-instance\"\n    })\n  }\n\n  lifecycle {\n    create_before_destroy = true\n  }\n}\n\nresource \"aws_autoscaling_group\" \"spot\" {\n  name = \"${var.name_prefix}-spot-asg\"\n\n  vpc_zone_identifier = var.subnet_ids\n  target_group_arns   = var.target_group_arns\n  health_check_type   = \"ELB\"\n\n  min_size         = var.min_size\n  max_size         = var.max_size\n  desired_capacity = var.desired_capacity\n\n  mixed_instances_policy {\n    launch_template {\n      launch_template_specification {\n        launch_template_id = aws_launch_template.spot.id\n        version           = \"$Latest\"\n      }\n    }\n\n    instances_distribution {\n      on_demand_base_capacity                  = var.on_demand_base_capacity\n      on_demand_percentage_above_base_capacity = var.on_demand_percentage\n      spot_allocation_strategy                 = \"diversified\"\n      spot_instance_pools                      = 4\n    }\n  }\n\n  tag {\n    key                 = \"Name\"\n    value               = \"${var.name_prefix}-spot-asg\"\n    propagate_at_launch = false\n  }\n}\n</code></pre>"},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#92","title":"9.2 \u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0\u3068\u81ea\u52d5\u5316","text":"<pre><code># modules/scheduling/auto-shutdown/main.tf\nresource \"aws_lambda_function\" \"auto_shutdown\" {\n  filename         = \"auto_shutdown.zip\"\n  function_name    = \"${var.name_prefix}-auto-shutdown\"\n  role            = aws_iam_role.lambda_role.arn\n  handler         = \"lambda_function.lambda_handler\"\n  runtime         = \"python3.9\"\n  timeout         = 300\n\n  source_code_hash = data.archive_file.auto_shutdown_zip.output_base64sha256\n\n  environment {\n    variables = {\n      ENVIRONMENT = var.environment\n      TAG_KEY     = \"AutoShutdown\"\n      TAG_VALUE   = \"enabled\"\n    }\n  }\n\n  tags = var.tags\n}\n\nresource \"aws_cloudwatch_event_rule\" \"auto_shutdown_schedule\" {\n  count = var.environment == \"dev\" ? 1 : 0\n\n  name                = \"${var.name_prefix}-auto-shutdown\"\n  description         = \"Schedule for auto shutdown of development resources\"\n  schedule_expression = \"cron(0 18 ? * MON-FRI *)\"  # \u5e73\u65e518\u6642\n\n  tags = var.tags\n}\n\nresource \"aws_cloudwatch_event_target\" \"lambda_target\" {\n  count = var.environment == \"dev\" ? 1 : 0\n\n  rule      = aws_cloudwatch_event_rule.auto_shutdown_schedule[0].name\n  target_id = \"AutoShutdownTarget\"\n  arn       = aws_lambda_function.auto_shutdown.arn\n}\n\nresource \"aws_lambda_permission\" \"allow_cloudwatch\" {\n  count = var.environment == \"dev\" ? 1 : 0\n\n  statement_id  = \"AllowExecutionFromCloudWatch\"\n  action        = \"lambda:InvokeFunction\"\n  function_name = aws_lambda_function.auto_shutdown.function_name\n  principal     = \"events.amazonaws.com\"\n  source_arn    = aws_cloudwatch_event_rule.auto_shutdown_schedule[0].arn\n}\n</code></pre>"},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#10","title":"10. \u707d\u5bb3\u5bfe\u7b56\u30fb\u5197\u9577\u5316","text":""},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#101-az","title":"10.1 \u30de\u30eb\u30c1 AZ \u69cb\u6210","text":""},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#102","title":"10.2 \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u6226\u7565","text":"<pre><code># modules/backup/automated-backup/main.tf\nresource \"aws_backup_vault\" \"main\" {\n  name        = \"${var.name_prefix}-backup-vault\"\n  kms_key_arn = aws_kms_key.backup.arn\n\n  tags = var.tags\n}\n\nresource \"aws_kms_key\" \"backup\" {\n  description             = \"KMS key for backup vault encryption\"\n  deletion_window_in_days = 30\n\n  tags = merge(var.tags, {\n    Name = \"${var.name_prefix}-backup-kms\"\n  })\n}\n\nresource \"aws_backup_plan\" \"main\" {\n  name = \"${var.name_prefix}-backup-plan\"\n\n  rule {\n    rule_name         = \"daily_backup\"\n    target_vault_name = aws_backup_vault.main.name\n    schedule          = \"cron(0 2 ? * * *)\"  # \u6bce\u65e5\u5348\u524d2\u6642\n\n    lifecycle {\n      cold_storage_after = 30\n      delete_after       = 120\n    }\n\n    recovery_point_tags = merge(var.tags, {\n      BackupType = \"Daily\"\n    })\n  }\n\n  rule {\n    rule_name         = \"weekly_backup\"\n    target_vault_name = aws_backup_vault.main.name\n    schedule          = \"cron(0 2 ? * SUN *)\"  # \u6bce\u9031\u65e5\u66dc\u65e5\u5348\u524d2\u6642\n\n    lifecycle {\n      cold_storage_after = 30\n      delete_after       = 365\n    }\n\n    recovery_point_tags = merge(var.tags, {\n      BackupType = \"Weekly\"\n    })\n  }\n\n  tags = var.tags\n}\n\nresource \"aws_backup_selection\" \"database\" {\n  iam_role_arn = aws_iam_role.backup.arn\n  name         = \"${var.name_prefix}-db-backup-selection\"\n  plan_id      = aws_backup_plan.main.id\n\n  resources = [\n    var.rds_db_instance_arn\n  ]\n\n  condition {\n    string_equals {\n      key   = \"aws:ResourceTag/Environment\"\n      value = var.environment\n    }\n  }\n}\n</code></pre>"},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#11_1","title":"11. \u307e\u3068\u3081","text":""},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#111","title":"11.1 \u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9 \u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8","text":"<pre><code>\u30a4\u30f3\u30d5\u30e9\u30b3\u30fc\u30c9\u54c1\u8cea:\n  - [ ] \u3059\u3079\u3066\u306e\u30ea\u30bd\u30fc\u30b9\u304c\u30b3\u30fc\u30c9\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\n  - [ ] \u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u3055\u308c\u3066\u3044\u308b\n  - [ ] \u9069\u5207\u306a\u30b3\u30e1\u30f3\u30c8\u3068\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u3042\u308b\n  - [ ] \u547d\u540d\u898f\u5247\u306b\u5f93\u3063\u3066\u3044\u308b\n\n\u30e2\u30b8\u30e5\u30fc\u30eb\u8a2d\u8a08:\n  - [ ] \u5358\u4e00\u8cac\u4efb\u306e\u539f\u5247\u306b\u5f93\u3063\u3066\u3044\u308b\n  - [ ] \u518d\u5229\u7528\u53ef\u80fd\u306a\u8a2d\u8a08\u306b\u306a\u3063\u3066\u3044\u308b\n  - [ ] \u5165\u529b\u691c\u8a3c\u304c\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b\n  - [ ] \u9069\u5207\u306a\u51fa\u529b\u5024\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\n\n\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3:\n  - [ ] \u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u7ba1\u7406\u304c\u9069\u5207\u306b\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b\n  - [ ] IAM\u6a29\u9650\u304c\u6700\u5c0f\u6a29\u9650\u306b\u306a\u3063\u3066\u3044\u308b\n  - [ ] \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b0\u30eb\u30fc\u30d7\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\n  - [ ] \u6697\u53f7\u5316\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\n\n\u904b\u7528:\n  - [ ] \u76e3\u8996\u30fb\u30a2\u30e9\u30fc\u30c8\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\n  - [ ] \u30ed\u30b0\u53ce\u96c6\u304c\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b\n  - [ ] \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u6226\u7565\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\n  - [ ] \u707d\u5bb3\u5bfe\u7b56\u304c\u8003\u616e\u3055\u308c\u3066\u3044\u308b\n\n\u30c6\u30b9\u30c8:\n  - [ ] \u5358\u4f53\u30c6\u30b9\u30c8\u304c\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b\n  - [ ] \u7d71\u5408\u30c6\u30b9\u30c8\u304c\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b\n  - [ ] \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30c6\u30b9\u30c8\u304c\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b\n  - [ ] CI/CD\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u304c\u69cb\u7bc9\u3055\u308c\u3066\u3044\u308b\n</code></pre>"},{"location":"reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#112","title":"11.2 \u7d99\u7d9a\u7684\u6539\u5584","text":"<p>\u3053\u306e\u30a4\u30f3\u30d5\u30e9\u8a2d\u8a08\u30ac\u30a4\u30c9\u306b\u5f93\u3046\u3053\u3068\u3067\u3001\u4f1a\u8b70\u5ba4\u4e88\u7d04\u30b7\u30b9\u30c6\u30e0\u306e\u5b89\u5168\u3067\u52b9\u7387\u7684\u306a\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u3092\u69cb\u7bc9\u30fb\u904b\u7528\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"reference/%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%88%E3%83%AA%E3%83%BC%E3%83%A0%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/","title":"\u30a8\u30af\u30b9\u30c8\u30ea\u30fc\u30e0\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0","text":""},{"location":"reference/%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%88%E3%83%AA%E3%83%BC%E3%83%A0%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/#1-xp","title":"1. XP\u3068\u306f\u4f55\u304b","text":"<p>XP\u3068\u306f\u3001\u4ee5\u524d\u306f\u3046\u307e\u304f\u3044\u3063\u3066\u3044\u305f\u304b\u3082\u3057\u308c\u306a\u3044\u304c\u3001\u4eca\u3067\u306f\u6700\u9ad8\u306e\u4ed5\u4e8b\u306e\u90aa\u9b54\u306b\u306a\u3063\u3066\u3044\u308b\u7fd2\u6163\u3084\u30d1\u30bf\u30fc\u30f3\u3092\u624b\u653e\u3059\u3053\u3068\u3060\u3002</p> <ul> <li> <p>\u52b9\u679c\u306e\u3042\u308b\u7fd2\u6163\u3092\u9078\u3073\u53d6\u308b\u3053\u3068   \u52b9\u679c\u306e\u306a\u3044\u6280\u8853\u7684\u30fb\u793e\u4f1a\u7684\u306a\u53e4\u3044\u7fd2\u6163\u3092\u6368\u3066\u3001\u52b9\u679c\u7684\u306a\u65b0\u3057\u3044\u7fd2\u6163\u3092\u63a1\u7528\u3059\u308b\u3002</p> </li> <li> <p>\u4eca\u65e5\u3084\u308b\u3079\u304d\u3053\u3068\u3092\u7406\u89e3\u3059\u308b\u3053\u3068   \u30c1\u30fc\u30e0\u3084\u500b\u4eba\u304c\u3084\u308b\u3079\u304d\u3053\u3068\u3092\u6b63\u78ba\u306b\u628a\u63e1\u3057\u3001\u76ee\u6a19\u9054\u6210\u306b\u3064\u306a\u3052\u308b\u3002</p> </li> <li> <p>\u81ea\u5df1\u8a55\u4fa1   \u30c1\u30fc\u30e0\u306e\u76ee\u6a19\u306b\u8ca2\u732e\u3057\u305f\u81ea\u5206\u306e\u6210\u679c\u3092\u8a55\u4fa1\u3057\u3001\u81ea\u5df1\u6210\u9577\u306b\u3064\u306a\u3052\u308b\u3002</p> </li> <li> <p>\u4eba\u9593\u3068\u3057\u3066\u306e\u6b32\u6c42\u3092\u6e80\u305f\u3059\u3053\u3068   \u958b\u767a\u3092\u901a\u3058\u3066\u9054\u6210\u611f\u3084\u5354\u8abf\u306a\u3069\u3001\u4eba\u9593\u7684\u6b32\u6c42\u3092\u6e80\u305f\u3059\u3002</p> </li> </ul>"},{"location":"reference/%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%88%E3%83%AA%E3%83%BC%E3%83%A0%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/#2-values","title":"2. \u4fa1\u5024\uff08Values\uff09","text":"<p>\u4fa1\u5024\u3068\u306f\u3001\u3042\u308b\u72b6\u6cc1\u306b\u304a\u3051\u308b\u597d\u304d\u5acc\u3044\u306e\u6839\u6e90\u306b\u3042\u308b\u3082\u306e\u3060\u3002</p> <ul> <li> <p>\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3   \u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u3001\u30c1\u30fc\u30e0\u611f\u899a\u3084\u52b9\u679c\u7684\u306a\u5354\u529b\u95a2\u4fc2\u3092\u751f\u307f\u51fa\u3059\u305f\u3081\u306b\u91cd\u8981\u306a\u3082\u306e\u3067\u3042\u308b\u3002\u3060\u304c\u3001\u52b9\u679c\u7684\u306a\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u306b\u5fc5\u8981\u306a\u306e\u306f\u3001\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u3060\u3051\u3067\u306f\u306a\u3044\u3002</p> </li> <li> <p>\u30b7\u30f3\u30d7\u30ea\u30b7\u30c6\u30a3\uff08\u5358\u7d14\u3055\uff09   \u4fa1\u5024\u306f\u3001\u304a\u4e92\u3044\u306b\u30d0\u30e9\u30f3\u30b9\u3092\u53d6\u308a\u5408\u3063\u305f\u308a\u3001\u30b5\u30dd\u30fc\u30c8\u3057\u3042\u3063\u305f\u308a\u3059\u308b\u3082\u306e\u3067\u3042\u308b\u3002   \u305f\u3068\u3048\u3070\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u3088\u3063\u3066\u3001\u73fe\u72b6\u306e\u89b3\u70b9\u304b\u3089\u306f\u5fc5\u8981\u304c\u306a\u3044\u3001\u3042\u308b\u3044\u306f\u6642\u9593\u7684\u7336\u4e88\u304c\u3042\u308b\u8981\u4ef6\u3092\u524a\u9664\u3059\u308c\u3070\u3001\u305d\u308c\u304c\u30b7\u30f3\u30d7\u30ea\u30b7\u30c6\u30a3\u306e\u9054\u6210\u306b\u3064\u306a\u304c\u308b\u3002 \u3000\u30b7\u30f3\u30d7\u30ea\u30b7\u30c6\u30a3\u3092\u9054\u6210\u3059\u308c\u3070\u3001\u5fc5\u8981\u306a\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u3082\u5c11\u306a\u304f\u306a\u308b\u3002</p> </li> <li> <p>\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af   \u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u306f\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u6b20\u304b\u305b\u306a\u3044\u3002\u300c\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306f\u554f\u984c\u306b\u306a\u308b\u304b\u306a\uff1f\u300d\u300c\u308f\u304b\u3089\u306a\u3044\u306d\u3002\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6e2c\u5b9a\u7528\u306e\u30d7\u30ed\u30c8\u30bf\u30a4\u30d7\u3092\u4f5c\u3063\u3066\u78ba\u8a8d\u3057\u3066\u307f\u3088\u3046\u300d\u3002 \u3000\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u306f\u30b7\u30f3\u30d7\u30ea\u30b7\u30c6\u30a3\u306b\u3082\u5f71\u97ff\u3059\u308b\u3002\uff13\u3064\u306e\u89e3\u6c7a\u7b56\u306e\u4e2d\u3067\u3001\u3069\u308c\u304c\u6700\u3082\u30b7\u30f3\u30d7\u30eb\u306b\u306a\u308b\u3060\u308d\u3046\u304b\uff1f\u305d\u3093\u306a\u3068\u304d\u306f\u3001\uff13\u3064\u3059\u3079\u3066\u3092\u8a66\u3057\u3066\u78ba\u8a8d\u3057\u3066\u307f\u3088\u3046\u3002 \u3000\u540c\u3058\u3082\u306e\u30923\u56de\u5b9f\u88c5\u3059\u308b\u306e\u306f\u30e0\u30c0\u306b\u601d\u3048\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002\u3060\u304c\u3001\u30b7\u30f3\u30d7\u30ea\u30b7\u30c6\u30a3\u304c\u5099\u308f\u3063\u305f\u7d0d\u5f97\u3067\u304d\u308b\u89e3\u6c7a\u5dee\u306b\u305f\u3069\u308a\u7740\u304f\u306b\u306f\u3001\u3053\u3046\u3059\u308b\u306e\u304c\u6700\u3082\u52b9\u7387\u7684\u306a\u65b9\u6cd5\u3060\u308d\u3046\u3002 \u3000\u305d\u308c\u3068\u540c\u6642\u306b\u3001\u30b7\u30b9\u30c6\u30e0\u304c\u30b7\u30f3\u30d7\u30eb\u306b\u306a\u308c\u3070\u3001\u305d\u306e\u5206\u3060\u3051\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u3092\u53d7\u3051\u53d6\u308b\u3053\u3068\u3082\u7c21\u5358\u306b\u306a\u308b\u3002</p> </li> <li> <p>\u52c7\u6c17 \u52c7\u6c17\u306e\u307f\u3067\u306f\u5371\u967a\u3060\u304c\u3001\u4ed6\u306e\u4fa1\u5024\u3068\u5408\u308f\u305b\u308c\u3070\u5f37\u529b\u3060\u3002\u52c7\u6c17\u3092\u6301\u3063\u3066\u771f\u5b9f\u3092\u8a9e\u308c\u3070\uff08\u305f\u3068\u3048\u305d\u308c\u304c\u4e0d\u6109\u5feb\u306a\u3053\u3068\u3067\u3042\u3063\u3066\u3082\uff09\u3001\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u3084\u4fe1\u983c\u304c\u5f37\u5316\u3055\u308c\u3066\u3044\u304f\u3002   \u3046\u307e\u304f\u3044\u304b\u306a\u3044\u53ef\u6c7a\u7b56\u3092\u6368\u3066\u3066\u3001\u52c7\u6c17\u3092\u6301\u3063\u3066\u65b0\u3057\u3044\u89e3\u6c7a\u7b56\u3092\u898b\u3064\u3051\u308c\u3070\u3001\u30b7\u30f3\u30d7\u30ea\u30b7\u30c6\u30a3\u304c\u4fc3\u9032\u3055\u308c\u308b\u3002   \u52c7\u6c17\u3092\u6301\u3063\u3066\u73fe\u5b9f\u306e\u5177\u4f53\u7684\u306a\u7b54\u3048\u3092\u6c42\u3081\u308c\u3070\u3001\u305d\u3053\u304b\u3089\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u304c\u751f\u307e\u308c\u308b\u3002</p> </li> <li> <p>\u30ea\u30b9\u30da\u30af\u30c8   \u30c1\u30fc\u30e0\u30e1\u30f3\u30d0\u30fc\u304c\u304a\u4e92\u3044\u306b\u95a2\u5fc3\u304c\u306a\u304f\u3001\u4f55\u3092\u3057\u3066\u3044\u308b\u304b\u3092\u6c17\u306b\u3082\u3068\u3081\u306a\u3044\u3088\u3046\u3067\u3042\u308c\u3070\u3001XP\u306f\u3046\u307e\u304f\u3044\u304b\u306a\u3044\u3002 \u3000\u30c1\u30fc\u30e0\u30e1\u30f3\u30d0\u30fc\u304c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u5927\u5207\u306b\u3057\u305f\u3044\u306e\u3067\u3042\u308c\u3070\u3001\u4f55\u3092\u3057\u305f\u3068\u3053\u308d\u3067\u6551\u3048\u308b\u306f\u305a\u3082\u306a\u3044\u3002</p> </li> <li> <p>\u305d\u306e\u4ed6\u306e\u4fa1\u5024   \u6700\u3082\u91cd\u8981\u306a\u306e\u306f\u3001\u30c1\u30fc\u30e0\u306e\u632f\u308b\u821e\u3044\u3092\u30c1\u30fc\u30e0\u306e\u4fa1\u5024\u306b\u5408\u308f\u305b\u308b\u3053\u3068\u3067\u3042\u308b\u3002\u305d\u3046\u3059\u308c\u3070\u3001\u8907\u6570\u306e\u4fa1\u5024\u3092\u540c\u6642\u306b\u7dad\u6301\u3059\u308b\u7121\u99c4\u3092\u6700\u5c0f\u5316\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002</p> </li> </ul>"},{"location":"reference/%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%88%E3%83%AA%E3%83%BC%E3%83%A0%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/#3-principles","title":"3. \u539f\u5247\uff08Principles\uff09","text":"<p>\u539f\u5247\u306f\u3001\u305d\u306e\u5206\u91ce\u306b\u7279\u5316\u3057\u305f\u6d3b\u52d5\u306e\u6307\u91dd\u3067\u3042\u308b\u3002</p> <ul> <li> <p>\u4eba\u9593\u6027   XP\u306e\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u306b\u306f\u3001\u30d3\u30b8\u30cd\u30b9\u30cb\u30fc\u30ba\u3068\u500b\u4eba\u306e\u6b32\u6c42\u306e\u4e21\u65b9\u3092\u6e80\u305f\u3059\u3082\u306e\u3092\u9078\u3093\u3067\u3044\u308b\u3002</p> </li> <li> <p>\u7d4c\u6e08\u6027   \u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u306b\u5f71\u97ff\u3092\u4e0e\u3048\u308b\u7d4c\u6e08\u6027\u306b\u306f\uff12\u3064\u306e\u5074\u9762\u304c\u3042\u308b\u3002\u8ca8\u5e63\u306e\u30bf\u30a4\u30e0\u30d0\u30ea\u30e5\u30fc\u3068\u3001\u30b7\u30b9\u30c6\u30e0\u3084\u30c1\u30fc\u30e0\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u30d0\u30ea\u30e5\u30fc\u3060\u3002   \u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u306e\u5834\u5408\u306f\u3001\u65e9\u3081\u306b\u304a\u91d1\u3092\u7a3c\u304e\u3001\u3042\u3068\u3067\u304a\u91d1\u3092\u4f7f\u3046\u307b\u3046\u304c\u30d0\u30ea\u30e5\u30fc\u304c\u9ad8\u3044\u3002   \u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u306e\u7d4c\u6e08\u6027\u306e\u3082\u3046\u3072\u3068\u3064\u306e\u6e90\u6cc9\u306f\u3001\u5c06\u6765\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u30d0\u30ea\u30e5\u30fc\u3067\u3042\u308b\u3002\u305f\u3068\u3048\u3070\u3001\u30e1\u30c7\u30a3\u30a2\u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u958b\u767a\u3057\u305f\u3068\u3057\u3088\u3046\u3002   \u305d\u308c\u3092\u4ed6\u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0\u306e\u30bf\u30b9\u30af\u306b\u3082\u518d\u5229\u7528\u3067\u304d\u305f\u3068\u3059\u308c\u3070\u3001\u672c\u6765\u306e\u76ee\u7684\u3060\u3051\u306b\u4f7f\u3046\u3088\u308a\u3082\u30d0\u30ea\u30e5\u30fc\u304c\u9ad8\u3044\u3002 </p> </li> <li> <p>\u76f8\u4e92\u5229\u76ca   \u3042\u3089\u3086\u308b\u6d3b\u52d5\u306f\u3001\u95a2\u4fc2\u8005\u5168\u54e1\u306e\u5229\u76ca\u306b\u306a\u3089\u306a\u3051\u308c\u3070\u3044\u3051\u306a\u3044\u3002\u76f8\u4e92\u5229\u76ca\u3068\u306f\u3001\u6700\u3082\u91cd\u8981\u3067\u3042\u308a\u3001\u6700\u3082\u5b9f\u884c\u304c\u96e3\u3057\u3044XP\u306e\u539f\u5247\u3067\u3042\u308b\u3002</p> </li> <li> <p>\u81ea\u5df1\u76f8\u4f3c\u6027   \u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u306b\u3082\u540c\u3058\u539f\u5247\u304c\u5f53\u3066\u306f\u307e\u308b\u3002\u898f\u6a21\u304c\u9055\u3063\u3066\u3044\u3066\u3082\u3001\u89e3\u6c7a\u7b56\u306e\u69cb\u9020\u3092\u65b0\u3057\u3044\u6587\u8108\u306b\u30b3\u30d4\u30fc\u3057\u3088\u3046\u3068\u3059\u308b\u304b\u3089\u3060\u3002   \u305f\u3068\u3048\u3070\u3001\u5148\u306b\u5931\u6557\u3059\u308b\u30c6\u30b9\u30c8\u3092\u66f8\u3044\u3066\u304b\u3089\u3001\u305d\u308c\u3092\u52d5\u304b\u3059\u3068\u3044\u3046\u958b\u767a\u306e\u57fa\u672c\u7684\u306a\u30ea\u30ba\u30e0\u304c\u3042\u308b\u3002\u3053\u306e\u30ea\u30ba\u30e0\u306f\u3042\u3089\u3086\u308b\u898f\u6a21\u4f5c\u7528\u3059\u308b\u3002   \u56db\u534a\u671f\u5358\u4f4d\u3067\u306f\u3001\u6271\u3044\u305f\u3044\u30c6\u30fc\u30de\u3092\u30c6\u30fc\u30de\u3092\u4e00\u89a7\u306b\u3057\u3066\u3001\u30b9\u30c8\u30fc\u30ea\u30fc\u3092\u4f7f\u3063\u3066\u53d6\u308a\u7d44\u3093\u3067\u3044\u304f\u3002\u9031\u5358\u4f4d\u3067\u306f\u3001\u6271\u3044\u305f\u3044\u30b9\u30c8\u30fc\u30ea\u30fc\u3092\u4e00\u89a7\u306b\u3057\u3066\u3001\u30b9\u30c8\u30fc\u30ea\u30fc\u3092\u8868\u3059\u30c6\u30b9\u30c8\u3092\u3092\u66f8\u3044\u3066\u3001\u305d\u308c\u3092\u52d5\u304b\u3059\u3088\u3046\u306b\u3059\u308b\u3002   \u6570\u6642\u9593\u5358\u4f4d\u3067\u306f\u3001\u66f8\u304b\u306a\u3051\u308c\u3070\u3044\u3051\u306a\u3044\u30c6\u30b9\u30c8\u3092\u4e00\u89a7\u306b\u3057\u3066\u3001\u30c6\u30b9\u30c8\u3092\u66f8\u3044\u3066\u3001\u52d5\u304b\u3057\u3066\u3001\u5225\u306e\u30c6\u30b9\u30c8\u3092\u66f8\u3044\u3066\u3001\u305d\u306e\u4e21\u65b9\u3092\u52d5\u304b\u3057\u3066\u3001\u3053\u308c\u3092\u30c6\u30b9\u30c8\u306e\u4e00\u89a7\u304c\u7d42\u308f\u308b\u307e\u3067\u7e70\u308a\u8fd4\u3059\u3002</p> </li> <li> <p>\u6539\u5584   XP\u306e\u30dd\u30a4\u30f3\u30c8\u306f\u3001\u6539\u5584\u306b\u3088\u3063\u3066\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u306e\u9ad8\u307f\u3092\u76ee\u6307\u3059\u3053\u3068\u3060\u3002\u6539\u5584\u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u3067\u306f\u3001\u660e\u65e5\u3092\u3088\u308a\u3088\u304f\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u306a\u6c17\u3065\u304d\u3084\u7406\u89e3\u3092\u8ffd\u3044\u6c42\u3081\u306a\u304c\u3089\u3001\u4eca\u65e5\u3067\u304d\u308b\u6700\u9ad8\u306e\u3053\u3068\u3092\u3084\u308b\u3002   \u5b8c\u74a7\u306b\u306a\u308b\u306e\u3092\u5f85\u3063\u3066\u304b\u3089\u59cb\u3081\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u3002</p> </li> <li> <p>\u591a\u69d8\u6027   \u591a\u69d8\u6027\u306f\u30c1\u30fc\u30e0\u5168\u4f53\u306e\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u3067\u8868\u73fe\u3055\u308c\u3066\u3044\u308b\u3002\u3053\u306e\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u306f\u3001\u591a\u7a2e\u591a\u69d8\u306a\u30b9\u30ad\u30eb\u3084\u8996\u70b9\u3092\u6301\u3063\u305f\u4eba\u305f\u3061\u3092\u30c1\u30fc\u30e0\u306b\u307e\u3068\u3081\u308b\u3068\u3044\u3046\u3082\u306e\u3060\u3002 \u3000\u7570\u306a\u308b\u8996\u70b9\u3092\u6301\u3063\u305f\u4eba\u305f\u3061\u304c\u3001\u3055\u307e\u3056\u307e\u306a\u8a08\u753b\u30b5\u30a4\u30af\u30eb\u3092\u4f7f\u3044\u3001\u6642\u9593\u5185\u306b\u6700\u3082\u30d0\u30ea\u30e5\u30fc\u306e\u9ad8\u3044\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u4f5c\u308a\u51fa\u3059\u3068\u3044\u3046\u76ee\u7684\u3092\u9054\u6210\u3059\u308b\u306e\u3067\u3042\u308b\u3002</p> </li> <li> <p>\u3075\u308a\u304b\u3048\u308a   \u512a\u308c\u305f\u30c1\u30fc\u30e0\u306f\u5358\u306b\u4ed5\u4e8b\u3092\u3057\u3066\u3044\u308b\u3060\u3051\u3067\u306f\u306a\u3044\u3002\u3069\u3046\u3084\u3063\u3066\u4ed5\u4e8b\u3092\u3057\u3066\u3044\u308b\u306e\u304b\u3001\u306a\u305c\u4ed5\u4e8b\u3092\u3057\u3066\u3044\u308b\u306e\u304b\u3092\u8003\u3048\u3066\u3044\u308b\u3002\u306a\u305c\u6210\u529f\u3057\u305f\u306e\u304b\u3001\u306a\u305c\u5931\u6557\u3057\u305f\u306e\u304b\u3092\u5206\u6790\u3057\u3066\u3044\u308b\u3002 \u3000\u81ea\u5206\u305f\u3061\u306e\u30df\u30b9\u3092\u96a0\u305d\u3046\u3068\u3057\u306a\u3044\u3002\u305d\u308c\u3092\u660e\u3089\u304b\u306b\u3057\u3066\u3001\u305d\u3053\u304b\u3089\u5b66\u307c\u3046\u3068\u3059\u308b\u306e\u3067\u3042\u308b\u3002\u5076\u7136\u306b\u512a\u79c0\u306b\u306a\u308c\u308b\u4eba\u306a\u3069\u3044\u306a\u3044\u306e\u3060\u3002</p> </li> <li> <p>\u6d41\u308c   \u6d41\u308c\u306e\u539f\u5247\u3067\u306f\u3001\u6539\u5584\u306e\u305f\u3081\u306b\u5c0f\u3055\u306a\u30d0\u30ea\u30e5\u30fc\u3092\u4f55\u5ea6\u3082\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3053\u3068\u3092\u63d0\u5531\u3057\u3066\u3044\u308b\u3002</p> </li> <li> <p>\u6a5f\u4f1a   XP\u306e\u5b9f\u8df5\u3092\u59cb\u3081\u308b\u3068\u3001\u5fc5\u305a\u554f\u984c\u306b\u76f4\u9762\u3059\u308b\u3002\u30a8\u30af\u30b9\u30c8\u30ea\u30fc\u30e0\u306b\u306a\u308b\u3068\u3044\u3046\u306e\u306f\u3001\u305d\u308c\u305e\u308c\u306e\u554f\u984c\u3092\u500b\u4eba\u306e\u6210\u9577\u3001\u4eba\u9593\u95a2\u4fc2\u306e\u6df1\u5316\u3001\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u6539\u5584\u306a\u3069\u306e\u6a5f\u4f1a\u306b\u610f\u8b58\u7684\u306b\u5909\u63db\u3059\u308b\u3053\u3068\u3067\u3042\u308b\u3002</p> </li> <li> <p>\u5197\u9577\u6027   \u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u306e\u91cd\u8981\u3067\u56f0\u96e3\u306a\u554f\u984c\u306f\u3001\u8907\u6570\u306e\u65b9\u6cd5\u3067\u89e3\u6c7a\u3059\u3079\u304d\u3067\u3042\u308b\u3002\u3072\u3068\u3064\u306e\u89e3\u6c7a\u7b56\u304c\u5b8c\u5168\u306b\u5931\u6557\u3057\u3066\u3082\u3001\u305d\u306e\u4ed6\u306e\u89e3\u6c7a\u7b56\u3067\u60e8\u4e8b\u3092\u98df\u3044\u6b62\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u304b\u3089\u3060\u3002 \u3000\u5197\u9577\u306b\u30b3\u30b9\u30c8\u304c\u304b\u304b\u308b\u3068\u3057\u3066\u3082\u3001\u60e8\u4e8b\u304b\u3089\u6551\u308f\u308c\u308b\u306a\u3089\u305d\u306e\u30b3\u30b9\u30c8\u306f\u652f\u6255\u3046\u306b\u5024\u3059\u308b\u3002</p> </li> <li> <p>\u5931\u6557   \u3046\u307e\u304f\u6210\u529f\u3067\u304d\u306a\u3051\u308c\u3070\u3001\u5931\u6557\u3057\u3088\u3046\u3002\u4f55\u3092\u3059\u3079\u304d\u304b\u308f\u304b\u3089\u306a\u3044\u3068\u304d\u306b\u306f\u3001\u5931\u6557\u306e\u30ea\u30b9\u30af\u3092\u53d7\u3051\u5165\u308c\u308b\u3053\u3068\u304c\u6210\u529f\u306b\u3064\u306a\u304c\u308b\u6700\u77ed\u3067\u78ba\u5b9f\u306a\u9053\u3067\u3042\u308b\u3002</p> </li> <li> <p>\u54c1\u8cea   \u54c1\u8cea\u304c\u5fc3\u914d\u3060\u304b\u3089\u3068\u3044\u3063\u3066\u3001\u4f55\u3082\u3057\u306a\u3044\u3053\u3068\u306e\u8a00\u3044\u8a33\u306b\u3057\u3066\u306f\u3044\u3051\u306a\u3044\u3002\u304d\u308c\u3044\u306b\u5b9f\u88c5\u3059\u308b\u65b9\u6cd5\u304c\u308f\u304b\u3089\u306a\u3051\u308c\u3070\u3001\u3067\u304d\u308b\u9650\u308a\u306e\u3053\u3068\u3092\u3059\u308c\u3070\u3044\u3044\u3002\u304d\u308c\u3044\u3060\u304c\u6642\u9593\u306e\u304b\u304b\u308b\u65b9\u6cd5\u3092\u77e5\u3063\u3066\u3044\u308c\u3070\u3001\u4eca\u306e\u6642\u9593\u3067\u3067\u304d\u308b\u304b\u304e\u308a\u306e\u3053\u3068\u3092\u3059\u308c\u3070\u3044\u3044\u3002   \u305d\u3057\u3066\u3001\u3042\u3068\u304b\u3089\u304d\u308c\u3044\u306a\u65b9\u6cd5\u3067\u5b8c\u6210\u3055\u305b\u308b\u306e\u3060\u3002\u3053\u3046\u3057\u305f\u3084\u308a\u65b9\u306f\u3001\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u9032\u5316\u3055\u305b\u308b\u3068\u304d\u306b\u3082\u3088\u304f\u4f7f\u3046\u3002</p> </li> <li> <p>\u30d9\u30a4\u30d3\u30fc\u30b9\u30c6\u30c3\u30d7   \u5927\u304d\u306a\u5909\u66f4\u304c\u5931\u6557\u3057\u3066\u30c1\u30fc\u30e0\u304c\u30e0\u30c0\u306b\u5f8c\u9000\u3059\u308b\u3088\u308a\u3082\u3001\u5c0f\u3055\u306a\u30b9\u30c6\u30c3\u30d7\u306e\u30aa\u30fc\u30d0\u30d8\u30c3\u30c9\u306e\u307b\u3046\u304c\u5c0f\u3055\u3044\u3002   \u30d9\u30a4\u30d3\u30fc\u30b9\u30c6\u30c3\u30d7\u306f\u30c6\u30b9\u30c8\u30d5\u30a1\u30fc\u30b9\u30c8\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3084\u7d99\u7d9a\u7684\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306a\u3069\u306e\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u3067\u8868\u73fe\u3055\u308c\u3066\u3044\u308b\u3002</p> </li> <li> <p>\u8cac\u4efb\u306e\u5f15\u304d\u53d7\u3051   \u8cac\u4efb\u306f\u5272\u308a\u5f53\u3066\u308b\u3082\u306e\u3067\u306f\u306a\u304f\u3001\u5f15\u304d\u53d7\u3051\u308b\u3053\u3068\u3057\u304b\u3067\u304d\u306a\u3044\u3002\u8ab0\u304b\u304c\u3042\u306a\u305f\u306b\u8cac\u4efb\u3092\u62c5\u308f\u305b\u3088\u3046\u3068\u3057\u3066\u3082\u3001\u8cac\u4efb\u3092\u6301\u3064\u304b\u3069\u3046\u304b\u3092\u9078\u3076\u306e\u306f\u3042\u306a\u305f\u3067\u3042\u308b\u3002</p> </li> </ul>"},{"location":"reference/%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%88%E3%83%AA%E3%83%BC%E3%83%A0%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/#4-practices","title":"4. \u30d7\u30e9\u30af\u30c6\u30a3\u30b9\uff08Practices\uff09","text":"<p> \u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u306f\u3001\u65e5\u5e38\u7684\u306a\u53d6\u308a\u7d44\u307f\u3067\u3042\u308b\u3002</p>"},{"location":"reference/%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%88%E3%83%AA%E3%83%BC%E3%83%A0%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/#41-primary-practices","title":"4.1 \u4e3b\u8981\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\uff08Primary Practices\uff09","text":"<p>\u3042\u306a\u305f\u304c\u4ed6\u306b\u3084\u3063\u3066\u3044\u308b\u3082\u306e\u3068\u306f\u7121\u95a2\u4fc2\u306b\u5f79\u306b\u7acb\u3064\u3082\u306e\u3067\u3042\u308b\u3002 \u3059\u3050\u306b\u6539\u5584\u306b\u3064\u306a\u304c\u308a\u3001\u3069\u308c\u304b\u3089\u3067\u3082\u5b89\u5168\u306b\u59cb\u3081\u3089\u308c\u308b\u3002</p> <ul> <li> <p>\u5168\u54e1\u540c\u5e2d \u30c1\u30fc\u30e0\u5168\u4f53\u304c\u5165\u308c\u308b\u5341\u5206\u306a\u5e83\u3055\u306e\u30aa\u30fc\u30d7\u30f3\u30b9\u30da\u30fc\u30b9\u3067\u958b\u767a\u3059\u308b\u3053\u3068\u3002\u8fd1\u304f\u306b\u5c0f\u3055\u306a\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u7a7a\u9593\u3092\u7528\u610f\u3059\u308b\u304b\u3001\u5225\u306e\u5834\u6240\u3067\u30d7\u30e9\u30a4\u30d0\u30b7\u30fc\u3092\u78ba\u4fdd\u3067\u304d\u308b\u3088\u3046\u306b\u52b4\u50cd\u6642\u9593\u3092\u5236\u9650\u3059\u308b\u306a\u3069\u3057\u3066\u3001\u30c1\u30fc\u30e0\u30e1\u30f3\u30d0\u30fc\u306e\u30d7\u30e9\u30a4\u30d0\u30b7\u30fc\u3084\u300c\u81ea\u5206\u3060\u3051\u306e\u300d\u30b9\u30da\u30fc\u30b9\u3068\u3044\u3063\u305f\u6b32\u6c42\u3092\u6e80\u305f\u305b\u308b\u3088\u3046\u306b\u3059\u308b\u3053\u3068\u3002</p> </li> <li> <p>\u30c1\u30fc\u30e0\u5168\u4f53   \u30c1\u30fc\u30e0\u306e\u5168\u4f53\u611f\u3002\u3064\u307e\u308a\u3001\u6210\u529f\u306b\u5fc5\u8981\u306a\u3059\u3079\u3066\u306e\u8cc7\u6e90\u306e\u6e96\u5099\u3092\u6574\u3048\u308b\u3053\u3068\u304c\u3001\u3053\u306e\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u306e\u76ee\u7684\u3067\u3042\u308b\u3002\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u5065\u5168\u6027\u306e\u305f\u3081\u306b\u7dbf\u5bc6\u306a\u3084\u308a\u3068\u308a\u304c\u5fc5\u8981\u306a\u3068\u3053\u308d\u3067\u306f\u3001\u6a5f\u80fd\u5358\u4f4d\u3067\u306f\u306a\u304f\u3001\u30c1\u30fc\u30e0\u5358\u4f4d\u3067\u3084\u308a\u53d6\u308a\u3059\u3079\u304d\u3060\u3002</p> </li> <li> <p>\u60c5\u5831\u6e80\u8f09\u306e\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9    \u4ed5\u4e8b\u306e\u5185\u5bb9\u304c\u308f\u304b\u308b\u3088\u3046\u306a\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9\u3092\u3064\u304f\u308b\u3053\u3068\u3002\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u95a2\u5fc3\u306e\u3042\u308b\u4eba\u304c\u30c1\u30fc\u30e0\u306e\u30b9\u30da\u30fc\u30b9\u3092\u898b\u305f\u3068\u304d\u306b\u300115\u79d2\u3067\u72b6\u6cc1\u3092\u628a\u63e1\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u3079\u304d\u3067\u3042\u308b\u3002   \u3055\u3089\u306b\u8fd1\u3065\u3044\u3066\u898b\u305f\u3068\u304d\u306b\u306f\u3001\u62b1\u3048\u3066\u3044\u308b\u554f\u984c\u3084\u6f5c\u5728\u7684\u306a\u554f\u984c\u306b\u95a2\u3059\u308b\u8a73\u3057\u3044\u60c5\u5831\u3092\u5165\u624b\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u3053\u3046\u3002</p> </li> <li> <p>\u3044\u304d\u3044\u304d\u3068\u3057\u305f\u4ed5\u4e8b   \u751f\u7523\u7684\u306b\u306a\u308c\u308b\u6642\u9593\u3060\u3051\u50cd\u304f\u3053\u3068\u3002\u7121\u7406\u306a\u304f\u7d9a\u3051\u3089\u308c\u308b\u6642\u9593\u3060\u3051\u50cd\u304f\u3053\u3068\u3002\u610f\u5473\u3082\u306a\u304f\u71c3\u3048\u3066\u304d\u3066\u3057\u307e\u3044\u3001\u6b21\u306e\uff12\u65e5\u9593\u306e\u4f5c\u696d\u304c\u53f0\u7121\u3057\u306b\u306a\u308c\u3070\u3001\u3042\u306a\u305f\u306b\u3068\u3063\u3066\u3082\u30c1\u30fc\u30e0\u306b\u3068\u3063\u3066\u3082\u3088\u308d\u3057\u304f\u306a\u3044\u3002</p> </li> <li> <p>\u30da\u30a2\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0   \u30da\u30a2\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3068\u306f\u30012\u4eba\u3067\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\uff08\u304a\u3088\u3073\u5206\u6790\u3001\u8a2d\u8a08\u3001\u30c6\u30b9\u30c8\uff09\u3068\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u6539\u826f\u3092\u540c\u6642\u306b\u884c\u3046\u3084\u308a\u3068\u308a\u306e\u3053\u3068\u3067\u3042\u308b\u3002\u30da\u30a2\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u3053\u3068\u3092\u3059\u308b\u3002</p> </li> <li>\u304a\u4e92\u3044\u306b\u30bf\u30b9\u30af\u306b\u96c6\u4e2d\u3059\u308b\u3002</li> <li>\u30b7\u30b9\u30c6\u30e0\u306e\u6539\u826f\u306b\u3064\u3044\u3066\u610f\u898b\u3092\u51fa\u3057\u5408\u3046\u3002</li> <li>\u30a2\u30a4\u30c7\u30a2\u3092\u660e\u78ba\u306b\u3059\u308b\u3002</li> <li>\u30d1\u30fc\u30c8\u30ca\u30fc\u304c\u30cf\u30de\u3063\u305f\u3089\u4e3b\u5c0e\u6a29\u3092\u63e1\u308a\u3001\u76f8\u624b\u306e\u5931\u671b\u611f\u3092\u8efd\u6e1b\u3055\u305b\u308b\u3002</li> <li> <p>\u304a\u4e92\u3044\u306b\u30c1\u30fc\u30e0\u306e\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u306e\u8aac\u660e\u8cac\u4efb\u3092\u679c\u305f\u305b\u308b\u3088\u3046\u306b\u3059\u308b\u3002</p> </li> <li> <p>\u30b9\u30c8\u30fc\u30ea\u30fc   \u9867\u5ba2\u306b\u898b\u3048\u308b\u6a5f\u80fd\u306e\u5358\u4f4d\u3092\u4f7f\u3063\u3066\u8a08\u753b\u3059\u308b\u3053\u3068\u3002\u305f\u3068\u3048\u3070\u3001\u300c\u3053\u308c\u307e\u3067\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u30bf\u30a4\u30e0\u30675\u500d\u306e\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u3092\u51e6\u7406\u3059\u308b\u300d\u300c\u3088\u304f\u4f7f\u3046\u756a\u53f7\u306b2\u30af\u30ea\u30c3\u30af\u306e\u77ed\u7e2e\u3092\u63d0\u4f9b\u3059\u308b\u300d\u306a\u3069\u3060\u3002 \u3000\u30b9\u30c8\u30fc\u30ea\u30fc\u304c\u66f8\u3051\u305f\u3089\u3001\u5fc5\u8981\u306a\u958b\u767a\u5de5\u7a0b\u3092\u3059\u3050\u306b\u898b\u7a4d\u3082\u308b\u3053\u3068\u3002XP\u30b9\u30bf\u30a4\u30eb\u306e\u8a08\u753b\u3065\u304f\u308a\u306e\u7279\u5fb4\u306f\u3001\u30b9\u30c8\u30fc\u30ea\u30fc\u3092\u66f8\u3044\u305f\u3089\u3059\u3050\u306b\u898b\u7a4d\u3082\u308b\u3053\u3068\u3060\u3002\u3053\u3046\u3059\u308b\u3053\u3068\u3067\u3001\u6700\u5c0f\u306e\u6295\u8cc7\u3067\u6700\u5927\u306e\u30ea\u30bf\u30fc\u30f3\u3092\u5f97\u308b\u65b9\u6cd5\u3092\u8003\u3048\u3089\u308c\u308b\u3002</p> </li> <li> <p>\u9031\u6b21\u30b5\u30a4\u30af\u30eb   1\u9031\u9593\u5206\u306e\u4ed5\u4e8b\u306e\u8a08\u753b\u3092\u307e\u3068\u3081\u3066\u7acb\u3066\u308b\u3053\u3068\u3002\u305d\u3057\u3066\u3001\u9031\u306e\u306f\u3058\u3081\u306b\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u5165\u308c\u308b\u3053\u3068\u3002\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u3053\u3068\u3092\u884c\u3046\u3002</p> </li> <li>\u5148\u9031\u306e\u9032\u6357\u304c\u671f\u5f85\u3057\u3066\u3044\u305f\u9032\u6357\u3068\u5408\u81f4\u3057\u3066\u3044\u308b\u304b\u306a\u3069\u3001\u3053\u308c\u307e\u3067\u306e\u9032\u6357\u72b6\u6cc1\u3092\u30ec\u30d3\u30e5\u30fc\u3059\u308b\u3002</li> <li>\u4eca\u9031\u5b9f\u88c5\u3059\u308b1\u9031\u9593\u5206\u306e\u30b9\u30c8\u30fc\u30ea\u30fc\u3092\u9867\u5ba2\u306b\u9078\u3093\u3067\u3082\u3089\u3046\u3002</li> <li> <p>\u30b9\u30c8\u30fc\u30ea\u30fc\u3092\u30bf\u30b9\u30af\u306b\u5206\u89e3\u3059\u308b\u3002\u30c1\u30fc\u30e0\u30e1\u30f3\u30d0\u30fc\u306f\u30bf\u30b9\u30af\u306b\u30b5\u30a4\u30f3\u30a2\u30c3\u30d7\u3057\u3066\u3001\u305d\u308c\u305e\u308c\u306e\u30bf\u30b9\u30af\u3092\u898b\u7a4d\u3082\u308b\u3002</p> </li> <li> <p>\u56db\u534a\u671f\u30b5\u30a4\u30af\u30eb   \u56db\u534a\u671f\u5206\u306e\u8a08\u753b\u3092\u307e\u3068\u3081\u3066\u7acb\u3066\u308b\u3053\u3068\u3002\u56db\u534a\u671f\u306b\u4e00\u5ea6\u306f\u3001\u30c1\u30fc\u30e0\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3001\u9032\u6357\u3001\u5927\u304d\u306a\u30b4\u30fc\u30eb\u306e\u8abf\u6574\u306b\u3064\u3044\u3066\u3001\u3075\u308a\u304b\u3048\u308b\u3053\u3068\u3002\u56db\u534a\u671f\u306e\u8a08\u753b\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u3053\u3068\u3092\u884c\u3046\u3002</p> </li> <li>\u30dc\u30c8\u30eb\u30cd\u30c3\u30af\u3092\u7279\u5b9a\u3059\u308b\uff08\u7279\u306b\u30c1\u30fc\u30e0\u306e\u5916\u5074\u3067\u5236\u5fa1\u3055\u308c\u3066\u3044\u308b\u3082\u306e\uff09\u3002</li> <li>\u4fee\u6b63\u4f5c\u696d\u306b\u7740\u624b\u3059\u308b\u3002</li> <li>\u56db\u534a\u671f\u306e\u30c6\u30fc\u30de\u3092\u8a08\u753b\u3059\u308b\u3002</li> <li>\u30c6\u30fc\u30de\u306b\u53d6\u308a\u7d44\u3080\u305f\u3081\u306e\u56db\u534a\u671f\u5206\u306e\u30b9\u30c8\u30fc\u30ea\u30fc\u3092\u9078\u629e\u3059\u308b\u3002</li> <li> <p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u7d44\u7e54\u306b\u9069\u5408\u3055\u305b\u308b\u5168\u4f53\u50cf\u306b\u96c6\u4e2d\u3059\u308b\u3002</p> </li> <li> <p>\u3086\u3068\u308a   \u3069\u306e\u3088\u3046\u306a\u8a08\u753b\u306b\u3082\u3001\u9045\u308c\u305f\u3068\u304d\u306b\u5916\u305b\u308b\u3088\u3046\u306a\u91cd\u8981\u5ea6\u306e\u4f4e\u3044\u30bf\u30b9\u30af\u3092\u542b\u3081\u308b\u3053\u3068\u3002\u3042\u3068\u304b\u3089\u30b9\u30c8\u30fc\u30ea\u30fc\u3092\u8ffd\u52a0\u3057\u305f\u308a\u3001\u7d04\u675f\u3088\u308a\u591a\u304f\u306e\u30b9\u30c8\u30fc\u30ea\u30fc\u3092\u30c7\u30ea\u30d0\u30ea\u30fc\u3057\u305f\u308a\u3059\u308b\u306e\u306f\u3001\u3044\u3064\u3067\u3082\u3067\u304d\u308b\u3002   \u4e0d\u4fe1\u611f\u3092\u62b1\u304b\u308c\u305f\u308a\u3001\u7d04\u675f\u3092\u7834\u3063\u305f\u308a\u3057\u305f\u3068\u304d\u306f\u3001\u3084\u308b\u3079\u304d\u3053\u3068\u3092\u304d\u3061\u3093\u3068\u679c\u305f\u3059\u3053\u3068\u304c\u91cd\u8981\u3060\u3002\u5c11\u3057\u3067\u3082\u3084\u308b\u3079\u304d\u3053\u3068\u3092\u679c\u305f\u305b\u3070\u3001\u4eba\u9593\u95a2\u4fc2\u306e\u518d\u69cb\u7bc9\u306b\u3064\u306a\u304c\u308b\u306f\u305a\u3067\u3042\u308b\u3002</p> </li> <li> <p>10\u5206\u30d3\u30eb\u30c9   \u81ea\u52d5\u7684\u306b\u30b7\u30b9\u30c6\u30e0\u5168\u4f53\u3092\u30d3\u30eb\u30c9\u3057\u3066\u3001\u3059\u3079\u3066\u306e\u30c6\u30b9\u30c8\u309210\u5206\u4ee5\u5185\u306b\u5b9f\u884c\u3055\u305b\u308b\u3053\u3068\u3002\u30d3\u30eb\u30c9\u306b10\u5206\u4ee5\u4e0a\u304b\u304b\u308b\u3088\u3046\u3060\u3068\u4f7f\u7528\u983b\u5ea6\u304c\u6e1b\u308a\u3001\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u306e\u6a5f\u4f1a\u304c\u5931\u308f\u308c\u3066\u3057\u307e\u3046\u3002</p> </li> <li> <p>\u7d99\u7d9a\u7684\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3   \u6570\u6642\u9593\u4ee5\u5185\u306b\u5909\u66f4\u7b87\u6240\u306e\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3068\u30c6\u30b9\u30c8\u3092\u3059\u308b\u3053\u3068\u3002\u30c1\u30fc\u30e0\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3068\u306f\u3001\u5206\u5272\u7d71\u6cbb\u306e\u554f\u984c\u3067\u306f\u306a\u3044\u3002\u5206\u5272\u3001\u7d71\u6cbb\u3001\u7d50\u5408\uff08\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff09\u306e\u554f\u984c\u3067\u3042\u308b\u3002</p> </li> <li> <p>\u30c6\u30b9\u30c8\u30d5\u30a1\u30fc\u30b9\u30c8\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0   \u30b3\u30fc\u30c9\u3092\u5909\u66f4\u3059\u308b\u524d\u306b\u3001\u5931\u6557\u3059\u308b\u81ea\u52d5\u30c6\u30b9\u30c8\u3092\u66f8\u304f\u3053\u3068\u3002\u30c6\u30b9\u30c8\u30d5\u30a1\u30fc\u30b9\u30c8\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u591a\u304f\u306e\u554f\u984c\u3092\u4e00\u5ea6\u306b\u89e3\u6c7a\u3059\u308b\u3002</p> </li> <li>\u30b9\u30b3\u30fc\u30d7\u30af\u30ea\u30fc\u30d7 - \u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306b\u5922\u4e2d\u306b\u306a\u3063\u3066\u6211\u3092\u5fd8\u308c\u3066\u3057\u307e\u3046\u3068\u3001\u300c\u5ff5\u306e\u305f\u3081\u300d\u306b\u4f59\u8a08\u306a\u30b3\u30fc\u30c9\u3092\u8ffd\u52a0\u3057\u304c\u3061\u3067\u3042\u308b\u3002\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u3042\u308b\u3079\u304d\u59ff\u3092\u660e\u78ba\u306b\u5ba2\u89b3\u7684\u306b\u8a18\u8ff0\u3059\u308c\u3070\u3001\u672c\u6765\u306e\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u306b\u96c6\u4e2d\u3067\u304d\u308b\u3002\u3069\u3046\u3057\u3066\u3082\u30b3\u30fc\u30c9\u3092\u8ffd\u52a0\u3057\u305f\u3044\u306a\u3089\u3001\u624b\u5143\u306e\u4f5c\u696d\u3092\u7d42\u3048\u305f\u3042\u3068\u306b\u5225\u306e\u30c6\u30b9\u30c8\u3092\u66f8\u304f\u3088\u3046\u306b\u3057\u3088\u3046\u3002</li> <li>\u7d50\u5408\u5ea6\u3068\u51dd\u96c6\u5ea6 - \u30c6\u30b9\u30c8\u3092\u66f8\u304f\u306e\u304c\u96e3\u3057\u3051\u308c\u3070\u3001\u30c6\u30b9\u30c8\u306e\u554f\u984c\u3067\u306f\u306a\u304f\u3001\u8a2d\u8a08\u306b\u554f\u984c\u304c\u3042\u308b\u306e\u3060\u308d\u3046\u3002\u758e\u7d50\u5408\u3067\u51dd\u96c6\u5ea6\u306e\u9ad8\u3044\u30b3\u30fc\u30c9\u306f\u3001\u30c6\u30b9\u30c8\u3057\u3084\u3059\u3044\u3002</li> <li>\u4fe1\u983c - \u52d5\u304b\u306a\u3044\u30b3\u30fc\u30c9\u306e\u4f5c\u8005\u3092\u4fe1\u983c\u3059\u308b\u306e\u306f\u96e3\u3057\u3044\u3002\u52d5\u304f\u304d\u308c\u3044\u306a\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u3001\u81ea\u52d5\u30c6\u30b9\u30c8\u3067\u610f\u56f3\u3092\u793a\u305b\u3070\u3001\u30c1\u30fc\u30e0\u30e1\u30a4\u30c8\u304b\u3089\u4fe1\u983c\u3092\u5f97\u3089\u308c\u308b\u306f\u305a\u3060\u3002</li> <li> <p>\u30ea\u30ba\u30e0 - \u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u3092\u3059\u308b\u3068\u4f55\u6642\u9593\u3082\u3055\u307e\u3088\u3044\u304c\u3061\u3067\u3042\u308b\u3002\u30c6\u30b9\u30c8\u30d5\u30a1\u30fc\u30b9\u30c8\u3067\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3059\u308c\u3070\u3001\u6b21\u306b\u4f55\u3092\u3059\u3079\u304d\u304b\uff08\u5225\u306e\u30c6\u30b9\u30c8\u3092\u66f8\u3051\u3070\u3044\u3044\u306e\u304b\u3001\u305d\u308c\u3068\u3082\u5931\u6557\u3057\u305f\u30c6\u30b9\u30c8\u3092\u4fee\u6b63\u3059\u308c\u3070\u3044\u3044\u306e\u304b\uff09\u304c\u660e\u78ba\u306b\u306a\u308b\u3002\u305d\u3057\u3066\u3001\u305d\u308c\u306f\u81ea\u7136\u3067\u52b9\u7387\u7684\u306a\u958b\u767a\u306e\u30ea\u30ba\u30e0\uff08\u30c6\u30b9\u30c8\u3001\u30b3\u30fc\u30c9\u3001\u30ea\u30d5\u30a1\u30af\u30bf\u3001\u30c6\u30b9\u30c8\u3001\u30b3\u30fc\u30c9\u3001\u30ea\u30d5\u30a1\u30af\u30bf\uff09\u306a\u3063\u3066\u3044\u304f\u3002</p> </li> <li> <p>\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30bf\u30eb\u306a\u8a2d\u8a08   \u30b7\u30b9\u30c6\u30e0\u306e\u8a2d\u8a08\u306b\u6bce\u65e5\u624b\u3092\u5165\u308c\u308b\u3053\u3068\u3002\u30b7\u30b9\u30c6\u30e0\u306e\u8a2d\u8a08\u306f\u3001\u305d\u306e\u65e5\u306e\u30b7\u30b9\u30c6\u30e0\u306e\u30cb\u30fc\u30ba\u306b\u3046\u307e\u304f\u5408\u81f4\u3055\u305b\u308b\u3053\u3068\u3002\u6700\u9069\u3060\u3068\u601d\u308f\u308c\u308b\u8a2d\u8a08\u304c\u7406\u89e3\u3067\u304d\u306a\u304f\u306a\u3063\u3066\u304d\u305f\u3089\u3001\u5c11\u3057\u3060\u304c\u7740\u5b9f\u306b\u3001\u81ea\u5206\u306e\u7406\u89e3\u3067\u304d\u308b\u8a2d\u8a08\u306b\u623b\u3057\u3066\u3044\u304f\u3053\u3068\u3002   \u5c0f\u3055\u304f\u3066\u5b89\u5168\u306a\u30b9\u30c6\u30c3\u30d7\u3067\u7a3c\u50cd\u4e2d\u306e\u30b7\u30b9\u30c6\u30e0\u3092\u5909\u66f4\u3059\u308b\u7d4c\u9a13\u3092\u8e0f\u307f\u91cd\u306d\u3066\u3044\u304f\u3068\u3001\u8a2d\u8a08\u306b\u304b\u3051\u308b\u52b4\u529b\u3092\u9045\u5ef6\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\u305d\u3046\u3059\u308c\u3070\u3001\u30b7\u30b9\u30c6\u30e0\u306f\u30b7\u30f3\u30d7\u30eb\u306b\u306a\u308a\u3001\u9032\u6357\u306f\u65e9\u304f\u306a\u308a\u3001\u30c6\u30b9\u30c8\u304c\u66f8\u304d\u3084\u3059\u304f\u306a\u308b\u3002\u30b7\u30b9\u30c6\u30e0\u304c\u5c0f\u3055\u304f\u306a\u308b\u306e\u3067\u3001\u30c1\u30fc\u30e0\u306e\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u3082\u8efd\u6e1b\u3067\u304d\u308b\u3002</p> </li> </ul>"},{"location":"reference/%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%88%E3%83%AA%E3%83%BC%E3%83%A0%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/#42-corollary-practices","title":"4.2 \u5c0e\u51fa\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\uff08Corollary Practices\uff09","text":"<p>\u5148\u306b\u4e3b\u8981\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u3092\u7fd2\u5f97\u3057\u3066\u304a\u304b\u306a\u3051\u308c\u3070\u96e3\u3057\u3044\u3060\u308d\u3046</p> <ul> <li> <p>\u672c\u7269\u306e\u9867\u5ba2\u53c2\u52a0   \u3042\u306a\u305f\u306e\u30b7\u30b9\u30c6\u30e0\u306b\u3088\u3063\u3066\u751f\u6d3b\u3084\u30d3\u30b8\u30cd\u30b9\u306b\u5f71\u97ff\u3092\u53d7\u3051\u308b\u4eba\u3092\u30c1\u30fc\u30e0\u306e\u4e00\u54e1\u306b\u3059\u308b\u3053\u3068\u3002\u660e\u78ba\u306a\u30d3\u30b8\u30e7\u30f3\u3092\u6301\u3063\u305f\u9867\u5ba2\u3067\u3042\u308c\u3070\u3001\u56db\u534a\u671f\u3084\u9031\u5358\u4f4d\u306e\u8a08\u753b\u3065\u304f\u308a\u306b\u53c2\u52a0\u3067\u304d\u308b\u3002   \u305d\u3046\u3057\u305f\u9867\u5ba2\u306f\u81ea\u7531\u306b\u4f7f\u3048\u308b\u4e88\u7b97\u3092\u6301\u3063\u3066\u3044\u308b\u3053\u3068\u3082\u3042\u308b\u3002\u4e88\u7b97\u306f\u958b\u767a\u3067\u5229\u7528\u53ef\u80fd\u306a\u30ad\u30e3\u30d1\u30b7\u30c6\u30a3\u30fc\u306e\u4e00\u90e8\u3060\u3002\u7af6\u5408\u4ed6\u793e\u3088\u308a\u534a\u5e74\u3082\u65e9\u304f\u554f\u984c\u306b\u6c17\u3065\u304f\u3088\u3046\u306a\u9867\u5ba2\u3067\u3042\u308c\u3070\u3001\u305d\u306e\u9867\u5ba2\u304c\u5fc5\u8981\u3068\u3059\u308b\u30b7\u30b9\u30c6\u30e0\u3092\u69cb\u7bc9\u3059\u308b\u3053\u3068\u306b\u3088\u3063\u3066\u3001\u3042\u306a\u305f\u306e\u7af6\u5408\u4ed6\u793e\u306b\u5bfe\u3059\u308b\u512a\u4f4d\u6027\u306b\u3082\u3064\u306a\u304c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u3002</p> </li> <li> <p>\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30bf\u30eb\u306a\u30c7\u30d7\u30ed\u30a4   \u30ec\u30ac\u30b7\u30fc\u30b7\u30b9\u30c6\u30e0\u3092\u30ea\u30d7\u30ec\u30fc\u30b9\u3059\u308b\u3068\u304d\u306f\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u521d\u671f\u6bb5\u968e\u304b\u3089\u5c11\u3057\u305a\u3064\u5f15\u7d99\u304e\u3092\u3059\u308b\u3053\u3068\u3002</p> </li> <li> <p>\u30c1\u30fc\u30e0\u306e\u7d99\u7d9a   \u512a\u79c0\u306a\u30c1\u30fc\u30e0\u306f\u7d99\u7d9a\u3055\u305b\u308b\u3053\u3068\u3002\u5927\u304d\u306a\u7d44\u7e54\u306f\u3001\u30d2\u30c8\u3092\u30e2\u30ce\u306b\u62bd\u8c61\u5316\u3059\u308b\u50be\u5411\u304c\u3042\u308b\u3002\u4e92\u63db\u6027\u306e\u3042\u308b\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u30e6\u30cb\u30c3\u30c8\u3060\u3068\u8003\u3048\u3066\u3044\u308b\u306e\u3060\u3002\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u30d0\u30ea\u30e5\u30fc\u306f\u3001\u307f\u3093\u306a\u304c\u77e5\u3063\u3066\u3044\u308b\u3053\u3068\u3084\u884c\u3063\u3066\u3044\u308b\u3053\u3068\u3060\u3051\u3067\u306a\u304f\u3001\u4eba\u9593\u95a2\u4fc2\u3084\u307f\u3093\u306a\u3067\u4e00\u7dd2\u306b\u6210\u3057\u9042\u3052\u308b\u3053\u3068\u306b\u3088\u3063\u3066\u3082\u751f\u307f\u51fa\u3055\u308c\u308b\u3002   \u8981\u54e1\u8a08\u753b\u306e\u554f\u984c\u3092\u5358\u7d14\u5316\u3059\u308b\u305f\u3081\u3060\u3051\u306b\u3001\u4eba\u9593\u95a2\u4fc2\u3084\u4fe1\u983c\u306e\u5927\u5207\u3055\u3092\u7121\u8996\u3059\u308b\u306e\u306f\u7d4c\u6e08\u7684\u3067\u306f\u306a\u3044\u3002</p> </li> <li> <p>\u30c1\u30fc\u30e0\u306e\u7e2e\u5c0f   \u30c1\u30fc\u30e0\u306e\u80fd\u529b\u304c\u9ad8\u307e\u3063\u305f\u3089\u3001\u4ed5\u4e8b\u91cf\u3092\u7dad\u6301\u3057\u306a\u304c\u3089\u5c11\u3057\u3065\u3064\u30c1\u30fc\u30e0\u306e\u898f\u6a21\u3092\u7e2e\u5c0f\u3059\u308b\u3053\u3068\u3002</p> </li> <li> <p>\u6839\u672c\u539f\u56e0\u5206\u6790   \u958b\u767a\u5f8c\u306b\u6b20\u9665\u304c\u898b\u3064\u304b\u308b\u305f\u3073\u306b\u3001\u6b20\u9665\u3068\u305d\u306e\u539f\u56e0\u3092\u53d6\u308a\u9664\u304f\u3053\u3068\u3002\u6b20\u9665\u306e\u518d\u767a\u9632\u6b62\u3060\u3051\u3067\u306f\u306a\u304f\u3001\u540c\u3058\u7a2e\u985e\u306e\u904e\u3061\u3092\u30c1\u30fc\u30e0\u304c\u4e8c\u5ea6\u3068\u72af\u3055\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u3053\u3068\u304c\u76ee\u7684\u3060\u3002   \u4ee5\u4e0b\u306f\u3001\u6b20\u9665\u306b\u5bfe\u51e6\u3059\u308b\u305f\u3081\u306eXP\u306e\u30d7\u30ed\u30bb\u30b9\u3067\u3042\u308b\u3002</p> </li> <li>\u6b20\u9665\u3092\u5b9f\u8a3c\u3059\u308b\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30eb\u306e\u81ea\u52d5\u30c6\u30b9\u30c8\u3092\u66f8\u304f\u3002\u305d\u3053\u306b\u306f\u671f\u5f85\u3059\u308b\u6319\u52d5\u3082\u542b\u3081\u3066\u304a\u304f\u3002\u3053\u308c\u306f\u3001\u9867\u5ba2\u3001\u9867\u5ba2\u30b5\u30dd\u30fc\u30c8\u3001\u958b\u767a\u8005\u304c\u884c\u3048\u308b\u3002</li> <li>\u7d50\u679c\u3092\u518d\u73fe\u3059\u308b\u6700\u5c0f\u9650\u306e\u30b9\u30b3\u30fc\u30d7\u3067\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u3092\u66f8\u304f\u3002</li> <li>\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u304c\u52d5\u304f\u3088\u3046\u306b\u30b7\u30b9\u30c6\u30e0\u3092\u4fee\u6b63\u3059\u308b\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u30b7\u30b9\u30c6\u30e0\u30c6\u30b9\u30c8\u3082\u30d1\u30b9\u3059\u308b\u306f\u305a\u3060\u3002\u30d1\u30b9\u3057\u306a\u3051\u308c\u3070\u30012\u3078\u623b\u308b\u3002</li> <li> <p>\u6b20\u9665\u3092\u4fee\u6b63\u51fa\u6765\u305f\u3089\u3001\u306a\u305c\u6b20\u9665\u304c\u751f\u307f\u51fa\u3055\u308c\u305f\u306e\u304b\u3001\u306a\u305c\u767a\u898b\u3067\u304d\u306a\u304b\u3063\u305f\u306e\u304b\u3092\u898b\u6975\u3081\u308b\u3002\u4eca\u5f8c\u306f\u540c\u69d8\u306e\u6b20\u9665\u304c\u518d\u767a\u3057\u306a\u3044\u3088\u3046\u306b\u3001\u5fc5\u8981\u306a\u5909\u66f4\u3092\u52a0\u3048\u308b\u3002</p> </li> <li> <p>\u30b3\u30fc\u30c9\u306e\u5171\u6709   \u30c1\u30fc\u30e0\u306e\u8ab0\u3082\u304c\u3001\u30b7\u30b9\u30c6\u30e0\u306e\u3042\u3089\u3086\u308b\u90e8\u5206\u3092\u3044\u3064\u3067\u3082\u6539\u5584\u3067\u304d\u308b\u3002\u30b7\u30b9\u30c6\u30e0\u306b\u554f\u984c\u304c\u3042\u308a\u3001\u305d\u306e\u4fee\u6b63\u304c\u73fe\u5728\u4f5c\u696d\u4e2d\u306e\u30b9\u30b3\u30fc\u30d7\u306e\u7bc4\u56f2\u5185\u306a\u306e\u3067\u3042\u308c\u3070\u3001\u9060\u616e\u305b\u305a\u306b\u4fee\u6b63\u3059\u3079\u304d\u3067\u3042\u308b\u3002</p> </li> <li> <p>\u30b3\u30fc\u30c9\u3068\u30c6\u30b9\u30c8   \u30b3\u30fc\u30c9\u3068\u30c6\u30b9\u30c8\u3060\u3051\u3092\u6c38\u7d9a\u7684\u306a\u4f5c\u6210\u7269\u3068\u3057\u3066\u4fdd\u5b88\u3059\u308b\u3053\u3068\u3002\u305d\u306e\u4ed6\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3064\u3044\u3066\u306f\u3001\u30b3\u30fc\u30c9\u3068\u30c6\u30b9\u30c8\u304b\u3089\u751f\u6210\u3059\u308b\u3053\u3068\u3002\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u91cd\u8981\u306a\u5c65\u6b74\u306e\u7dad\u6301\u306b\u3064\u3044\u3066\u306f\u3001\u793e\u4f1a\u7684\u306a\u4ed5\u7d44\u307f\u306b\u4efb\u305b\u308b\u3053\u3068\u3002</p> </li> <li> <p>\u5358\u4e00\u306e\u30b3\u30fc\u30c9\u30d9\u30fc\u30b9   \u30b3\u30fc\u30c9\u306e\u6d41\u308c\u306f\u4e00\u3064\u3060\u3051\u3067\u3042\u308b\u3002\u4e00\u6642\u7684\u306a\u30d6\u30e9\u30f3\u30c1\u3067\u958b\u767a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u304c\u3001\u6570\u6642\u9593\u4ee5\u4e0a\u3082\u7dad\u6301\u3057\u3066\u306f\u3044\u3051\u306a\u3044\u3002</p> </li> <li> <p>\u30c7\u30a4\u30ea\u30fc\u30c7\u30d7\u30ed\u30a4   \u65b0\u3057\u3044\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u6bce\u6669\u30d7\u30ed\u30c0\u30af\u30b7\u30e7\u30f3\u306b\u53cd\u6620\u3059\u308b\u3053\u3068\u3002\u30d7\u30ed\u30b0\u30e9\u30de\u30fc\u306e\u624b\u5143\u306b\u3042\u308b\u3082\u306e\u3068\u30d7\u30ed\u30c0\u30af\u30b7\u30e7\u30f3\u306b\u3042\u308b\u3082\u306e\u304c\u9055\u3046\u306e\u306f\u30ea\u30b9\u30af\u3060\u3002\u30d7\u30ed\u30b0\u30e9\u30de\u30fc\u306e\u610f\u601d\u6c7a\u5b9a\u306b\u3064\u306a\u304c\u308b\u6b63\u78ba\u306a\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u304c\u5f97\u3089\u308c\u306a\u3044\u5371\u967a\u6027\u304c\u3042\u308b\u3002</p> </li> <li> <p>\u4ea4\u6e09\u306b\u3088\u308b\u30b9\u30b3\u30fc\u30d7\u5951\u7d04   \u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u306e\u5951\u7d04\u3067\u306f\u3001\u671f\u9593\u3001\u8cbb\u7528\u3001\u54c1\u8cea\u3092\u56fa\u5b9a\u3059\u308b\u3053\u3068\u3002\u30b7\u30b9\u30c6\u30e0\u306e\u660e\u78ba\u306a\u30b9\u30b3\u30fc\u30d7\u306b\u3064\u3044\u3066\u306f\u3001\u7d99\u7d9a\u7684\u306b\u4ea4\u6e09\u3092\u6c42\u3081\u308b\u3053\u3068\u3002\u9577\u671f\u7684\u306a\u3072\u3068\u3064\u306e\u5951\u7d04\u3067\u306f\u306a\u304f\u3001\u77ed\u671f\u591a\u5c90\u306a\u5951\u7d04\u3092\u3044\u304f\u3064\u3082\u7d50\u3076\u3088\u3046\u306b\u3057\u3066\u3001\u30ea\u30b9\u30af\u3092\u6e1b\u3089\u3059\u3053\u3068\u3002</p> </li> <li> <p>\u5229\u7528\u90fd\u5ea6\u8ab2\u91d1   \u5229\u7528\u90fd\u5ea6\u8ab2\u91d1\u30b7\u30b9\u30c6\u30e0\u304c\u3042\u308c\u3070\u3001\u30b7\u30b9\u30c6\u30e0\u304c\u5229\u7528\u3055\u308c\u308b\u305f\u3073\u306b\u304a\u91d1\u3092\u8acb\u6c42\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\u304a\u91d1\u306f\u7a76\u6975\u306e\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u3060\u3002\u304a\u91d1\u306b\u306f\u5b9f\u4f53\u304c\u3042\u308a\u3001\u3053\u308c\u304b\u3089\u81ea\u5206\u3067\u4f7f\u3046\u3053\u3068\u3082\u3067\u304d\u308b\u3002\u304a\u91d1\u306e\u6d41\u308c\u3092\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u306b\u76f4\u63a5\u63a5\u7d9a\u3059\u308c\u3070\u3001\u6539\u5584\u3092\u63a8\u9032\u3059\u308b\u305f\u3081\u306e\u6b63\u78ba\u3067\u30bf\u30a4\u30e0\u30ea\u30fc\u306a\u60c5\u5831\u3092\u5f97\u3089\u308c\u308b\u306f\u305a\u3060\u3002</p> </li> </ul>"},{"location":"reference/%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%88%E3%83%AA%E3%83%BC%E3%83%A0%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/#5-xp","title":"5. XP\u30c1\u30fc\u30e0\u5168\u4f53","text":"<ul> <li> <p>\u30c6\u30b9\u30bf\u30fc   XP\u30c1\u30fc\u30e0\u306e\u30c6\u30b9\u30bf\u30fc\u306f\u3001\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30eb\u306e\u81ea\u52d5\u30c6\u30b9\u30c8\u306e\u9078\u629e\u3084\u8a18\u8ff0\u306b\u3064\u3044\u3066\u958b\u767a\u524d\u306b\u9867\u5ba2\u3092\u652f\u63f4\u3057\u305f\u308a\u3001\u30d7\u30ed\u30b0\u30e9\u30de\u30fc\u306b\u30c6\u30b9\u30c8\u6280\u6cd5\u3092\u30b3\u30fc\u30c1\u3057\u305f\u308a\u3059\u308b\u3002</p> </li> <li> <p>\u30a4\u30f3\u30bf\u30e9\u30af\u30b7\u30e7\u30f3\u30c7\u30b6\u30a4\u30ca\u30fc   XP\u30c1\u30fc\u30e0\u306e\u30a4\u30f3\u30bf\u30e9\u30af\u30b7\u30e7\u30f3\u30c7\u30b6\u30a4\u30ca\u30fc\u306f\u3001\u30b7\u30b9\u30c6\u30e0\u5168\u4f53\u306e\u30e1\u30bf\u30d5\u30a1\u30fc\u3092\u9078\u3093\u3060\u308a\u3001\u30b9\u30c8\u30fc\u30ea\u30fc\u3092\u66f8\u3044\u305f\u308a\u3001\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u305f\u30b7\u30b9\u30c6\u30e0\u306e\u5229\u7528\u72b6\u6cc1\u3092\u8a55\u4fa1\u3057\u3066\u3001\u65b0\u3057\u3044\u30b9\u30c8\u30fc\u30ea\u30fc\u306e\u6a5f\u4f1a\u3092\u898b\u3064\u3051\u305f\u308a\u3059\u308b\u3002   XP\u30c1\u30fc\u30e0\u3067\u306f\u3001\u30a4\u30f3\u30bf\u30af\u30e9\u30af\u30b7\u30e7\u30f3\u30c7\u30b6\u30a4\u30ca\u30fc\u306f\u9867\u5ba2\u3068\u4e00\u7dd2\u306b\u50cd\u3044\u3066\u3001\u30b9\u30c8\u30fc\u30ea\u30fc\u306e\u8a18\u8ff0\u3084\u660e\u78ba\u5316\u3092\u652f\u63f4\u3059\u308b\u3002</p> </li> <li> <p>\u30a2\u30fc\u30ad\u30c6\u30af\u30c8   XP\u30c1\u30fc\u30e0\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c8\u306f\u3001\u5927\u898f\u6a21\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u306e\u8abf\u67fb\u3084\u5b9f\u65bd\u3092\u3057\u305f\u308a\u3001\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u30b9\u30c8\u30ec\u30b9\u3092\u4e0e\u3048\u308b\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30eb\u306e\u30c6\u30b9\u30c8\u3092\u66f8\u3044\u305f\u308a\u3001\u30b9\u30c8\u30fc\u30ea\u30fc\u3092\u5b9f\u88c5\u3057\u305f\u308a\u3059\u308b\u3002   XP\u30c1\u30fc\u30e0\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c8\u306e\u3082\u3046\u3072\u3068\u3064\u306e\u4ed5\u4e8b\u306f\u3001\u30b7\u30b9\u30c6\u30e0\u306e\u5206\u5272\u3060\u3002\u5206\u5272\u306f\u4e8b\u524d\u306b\u884c\u3046\u4e00\u5ea6\u304d\u308a\u306e\u30bf\u30b9\u30af\u3067\u306f\u306a\u3044\u3002XP\u30c1\u30fc\u30e0\u306f\u7d71\u6cbb\u5206\u5272\u3092\u884c\u3046\u3002\u5206\u5272\u7d71\u6cbb\u3067\u306f\u306a\u3044\u3002\u3064\u307e\u308a\u3001\u5c0f\u3055\u306a\u30c1\u30fc\u30e0\u3067\u5c0f\u3055\u306a\u30b7\u30b9\u30c6\u30e0\u3092\u4f5c\u3063\u3066\u304b\u3089\u3001\u81ea\u7136\u306a\u5207\u308c\u76ee\u3092\u898b\u3064\u3051\u3001\u6bd4\u8f03\u7684\u72ec\u7acb\u3057\u305f\u5358\u4f4d\u306b\u5206\u5272\u3057\u3066\u3001\u30b7\u30b9\u30c6\u30e0\u3092\u62e1\u5f35\u3059\u308b\u306e\u3067\u3042\u308b\u3002</p> </li> <li> <p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30de\u30cd\u30fc\u30b8\u30e3\u30fc   XP\u30c1\u30fc\u30e0\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u306f\u3001\u30c1\u30fc\u30e0\u5185\u306e\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u5186\u6ed1\u306b\u3057\u305f\u308a\u3001\u9867\u5ba2\u3001\u30b5\u30d7\u30e9\u30a4\u30e4\u30fc\u3001\u305d\u306e\u4ed6\u306e\u30c1\u30fc\u30e0\u5916\u306e\u7d44\u7e54\u3068\u306e\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u8abf\u6574\u3057\u305f\u308a\u3059\u308b\u3002</p> </li> <li> <p>\u30d7\u30ed\u30c0\u30af\u30c8\u30de\u30cd\u30fc\u30b8\u30e3\u30fc   XP\u306e\u30d7\u30ed\u30c0\u30af\u30c8\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u306f\u3001\u30b9\u30c8\u30fc\u30ea\u30fc\u3092\u66f8\u3044\u305f\u308a\u3001\u56db\u534a\u671f\u30b5\u30a4\u30af\u30eb\u306e\u30c6\u30fc\u30de\u3084\u30b9\u30c8\u30fc\u30ea\u30fc\u3092\u9078\u629e\u3057\u305f\u308a\u3001\u9031\u6b21\u30b5\u30a4\u30af\u30eb\u306e\u30b9\u30c8\u30fc\u30ea\u30fc\u3092\u9078\u629e\u3057\u305f\u308a\u3001\u5b9f\u88c5\u306b\u3088\u3063\u3066\u660e\u3089\u304b\u306b\u306a\u3063\u305f\u30b9\u30c8\u30fc\u30ea\u30fc\u306e\u3042\u3044\u307e\u3044\u306a\u90e8\u5206\u306e\u8cea\u554f\u306b\u7b54\u3048\u305f\u308a\u3059\u308b\u3002</p> </li> <li> <p>\u7d4c\u55b6\u5e79\u90e8   \u7d4c\u55b6\u5e79\u90e8\u306f\u3001XP\u30c1\u30fc\u30e0\u306b\u52c7\u6c17\u3001\u81ea\u4fe1\u3001\u8aac\u660e\u8cac\u4efb\u3092\u63d0\u4f9b\u3059\u308b\u3002</p> </li> <li> <p>\u30c6\u30af\u30cb\u30ab\u30eb\u30e9\u30a4\u30bf\u30fc   XP\u30c1\u30fc\u30e0\u306b\u304a\u3051\u308b\u30c6\u30af\u30cb\u30ab\u30eb\u30d1\u30d6\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5f79\u5272\u306f\u3001\u30d5\u30a3\u30fc\u30c1\u30e3\u30fc\u306e\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u3092\u65e9\u671f\u306b\u63d0\u4f9b\u3057\u305f\u308a\u3001\u30e6\u30fc\u30b6\u30fc\u3068\u306e\u5bc6\u63a5\u306a\u95a2\u4fc2\u3092\u7bc9\u3044\u305f\u308a\u3059\u308b\u3053\u3068\u3067\u3042\u308b\u3002</p> </li> <li> <p>\u30e6\u30fc\u30b6\u30fc   XP\u30c1\u30fc\u30e0\u306e\u30e6\u30fc\u30b6\u30fc\u306f\u3001\u958b\u767a\u4e2d\u306b\u30b9\u30c8\u30fc\u30ea\u30fc\u306e\u8a18\u8ff0\u3084\u9078\u629e\u306e\u652f\u63f4\u3092\u3057\u305f\u308a\u3001\u5c02\u9580\u9818\u57df\u306e\u610f\u601d\u6c7a\u5b9a\u3092\u3057\u305f\u308a\u3059\u308b\u3002\u69cb\u7bc9\u4e2d\u306e\u30b7\u30b9\u30c6\u30e0\u3068\u985e\u4f3c\u3057\u305f\u30b7\u30b9\u30c6\u30e0\u306b\u95a2\u3059\u308b\u5e45\u5e83\u3044\u77e5\u8b58\u3084\u7d4c\u9a13\u3092\u3082\u3063\u3066\u3044\u305f\u308a\u3001\u30b7\u30b9\u30c6\u30e0\u3092\u5b9f\u969b\u306b\u5229\u7528\u3059\u308b\u30e6\u30fc\u30b6\u30fc\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u3068\u306e\u5f37\u3044\u95a2\u4fc2\u6027\u3092\u6301\u3063\u3066\u3044\u305f\u308a\u3059\u308c\u3070\u3001\u305d\u306e\u30e6\u30fc\u30b6\u30fc\u306f\u975e\u5e38\u306b\u5927\u5207\u306a\u5b58\u5728\u3060\u3002</p> </li> <li> <p>\u30d7\u30ed\u30b0\u30e9\u30de\u30fc   XP\u30c1\u30fc\u30e0\u306e\u30d7\u30ed\u30b0\u30e9\u30de\u30fc\u306f\u3001\u30b9\u30c8\u30fc\u30ea\u30fc\u3084\u30bf\u30b9\u30af\u3092\u898b\u7a4d\u3082\u3063\u305f\u308a\u3001\u30b9\u30c8\u30fc\u30ea\u30fc\u3092\u30bf\u30b9\u30af\u306b\u5206\u89e3\u3057\u305f\u308a\u3001\u30c6\u30b9\u30c8\u3092\u66f8\u3044\u305f\u308a\u3001\u30d5\u30a3\u30fc\u30c1\u30e3\u30fc\u3092\u5b9f\u88c5\u3059\u308b\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u305f\u308a\u3001\u9000\u5c48\u306a\u958b\u767a\u30d7\u30ed\u30bb\u30b9\u3092\u81ea\u52d5\u5316\u3057\u305f\u308a\u3001\u30b7\u30b9\u30c6\u30e0\u306e\u8a2d\u8a08\u3092\u5c11\u3057\u3065\u3064\u6539\u5584\u3057\u305f\u308a\u3059\u308b\u3002</p> </li> <li> <p>\u4eba\u4e8b   XP\u30c1\u30fc\u30e0\u306e\u30e1\u30f3\u30d0\u30fc\u3092\u500b\u4eba\u3068\u3057\u3066\u8a55\u4fa1\u3059\u308b\u3068\u3044\u3063\u3066\u3082\u3001XP\u9069\u7528\u524d\u306e\u8a55\u4fa1\u306e\u4ed5\u65b9\u3092\u5927\u304d\u304f\u5909\u3048\u308b\u5fc5\u8981\u306f\u306a\u3044\u3002\u4ee5\u4e0b\u306f\u3001XP\u306b\u304a\u3051\u308b\u91cd\u8981\u6027\u306e\u9ad8\u3044\u5f93\u696d\u54e1\u3060\u3002</p> </li> <li>\u30ea\u30b9\u30da\u30af\u30c8\u3092\u6301\u3063\u3066\u884c\u52d5\u3067\u304d\u308b\u3002</li> <li>\u4ed6\u4eba\u3068\u3046\u307e\u304f\u3084\u308c\u308b\u3002</li> <li>\u30a4\u30cb\u30b7\u30a2\u30c1\u30d6\u3092\u3068\u308c\u308b\u3002</li> <li> <p>\u7d04\u675f\u3057\u305f\u3082\u306e\u30c7\u30ea\u30d0\u30ea\u30fc\u3067\u304d\u308b\u3002</p> </li> <li> <p>\u305d\u306e\u4ed6\u306e\u5f79\u5272   \u5fc5\u8981\u306b\u5fdc\u3058\u305f\u8ffd\u52a0\u5f79\u5272\u3002</p> </li> </ul>"},{"location":"reference/%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%88%E3%83%AA%E3%83%BC%E3%83%A0%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/#6","title":"6. \u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8","text":""},{"location":"reference/%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%88%E3%83%AA%E3%83%BC%E3%83%A0%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/#_1","title":"\u4e3b\u8981\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","text":"<ul> <li> \u3044\u304d\u3044\u304d\u3068\u3057\u305f\u4ed5\u4e8b</li> <li>\u751f\u7523\u7684\u306b\u306a\u308c\u308b\u6642\u9593\u3060\u3051\u50cd\u3044\u3066\u3044\u307e\u3059\u304b\uff1f</li> </ul>"},{"location":"reference/%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%88%E3%83%AA%E3%83%BC%E3%83%A0%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/#_2","title":"\u8a08\u753b","text":"<ul> <li> \u9031\u6b21\u30b5\u30a4\u30af\u30eb</li> <li>1\u9031\u9593\u5206\u306e\u8a08\u753b\u3092\u4f5c\u6210\u3057\u3001\u9032\u6357\u3092\u30ec\u30d3\u30e5\u30fc\u3057\u3066\u3044\u307e\u3059\u304b\uff1f</li> <li> <p>\u30b9\u30c8\u30fc\u30ea\u30fc\u3092\u30bf\u30b9\u30af\u306b\u5206\u89e3\u3057\u3066\u3044\u307e\u3059\u304b\uff1f</p> </li> <li> <p> \u56db\u534a\u671f\u30b5\u30a4\u30af\u30eb</p> </li> <li>\u30c1\u30fc\u30e0\u306e\u9032\u6357\u3084\u30dc\u30c8\u30eb\u30cd\u30c3\u30af\u3092\u30ec\u30d3\u30e5\u30fc\u3057\u3066\u3044\u307e\u3059\u304b\uff1f</li> <li> <p>\u56db\u534a\u671f\u3054\u3068\u306e\u8a08\u753b\u30c6\u30fc\u30de\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u304b\uff1f</p> </li> <li> <p> \u30b9\u30c8\u30fc\u30ea\u30fc</p> </li> <li> <p>\u30b9\u30c8\u30fc\u30ea\u30fc\u5358\u4f4d\u3067\u9867\u5ba2\u306b\u6a5f\u80fd\u3092\u63d0\u6848\u3057\u3066\u3044\u307e\u3059\u304b\uff1f</p> </li> <li> <p> \u3086\u3068\u308a</p> </li> <li>\u8a08\u753b\u306b\u91cd\u8981\u5ea6\u306e\u4f4e\u3044\u30bf\u30b9\u30af\u3092\u542b\u3081\u3001\u4f59\u88d5\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u304b\uff1f</li> </ul>"},{"location":"reference/%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%88%E3%83%AA%E3%83%BC%E3%83%A0%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/#_3","title":"\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0","text":"<ul> <li> \u30c6\u30b9\u30c8\u30d5\u30a1\u30fc\u30b9\u30c8\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0</li> <li> <p>\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u524d\u306b\u5931\u6557\u3059\u308b\u30c6\u30b9\u30c8\u3092\u66f8\u304f\u7fd2\u6163\u304c\u3042\u308a\u307e\u3059\u304b\uff1f</p> </li> <li> <p> \u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30bf\u30eb\u306a\u8a2d\u8a08</p> </li> <li> <p>\u5c0f\u3055\u3044\u624b\u9806\u3067\u30b7\u30b9\u30c6\u30e0\u306e\u8a2d\u8a08\u30fb\u6539\u5584\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u304b\uff1f</p> </li> <li> <p> \u30da\u30a2\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0</p> </li> <li>2\u4eba\u3067\u30a2\u30a4\u30c7\u30a2\u3092\u5171\u6709\u3057\u306a\u304c\u3089\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u3044\u307e\u3059\u304b\uff1f</li> </ul>"},{"location":"reference/%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%88%E3%83%AA%E3%83%BC%E3%83%A0%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/#_4","title":"\u5168\u54e1\u540c\u5e2d","text":"<ul> <li> \u30c1\u30fc\u30e0\u5168\u4f53</li> <li> <p>\u5fc5\u8981\u306a\u30b9\u30ad\u30eb\u3084\u30ea\u30bd\u30fc\u30b9\u3092\u30c1\u30fc\u30e0\u5168\u4f53\u3067\u5171\u6709\u3057\u3066\u3044\u307e\u3059\u304b\uff1f</p> </li> <li> <p> \u60c5\u5831\u6e80\u8f09\u306e\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9</p> </li> <li>\u5916\u90e8\u306e\u8a2a\u554f\u8005\u304c15\u79d2\u3067\u72b6\u6cc1\u3092\u628a\u63e1\u3067\u304d\u308b\u3088\u3046\u306b\u60c5\u5831\u3092\u53ef\u8996\u5316\u3057\u3066\u3044\u307e\u3059\u304b\uff1f</li> </ul>"},{"location":"reference/%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%88%E3%83%AA%E3%83%BC%E3%83%A0%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/#_5","title":"\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3","text":"<ul> <li> 10\u5206\u30d3\u30eb\u30c9</li> <li> <p>\u3059\u3079\u3066\u306e\u30c6\u30b9\u30c8\u3092\u542b\u3080\u30d3\u30eb\u30c9\u304c10\u5206\u4ee5\u5185\u306b\u5b8c\u4e86\u3057\u307e\u3059\u304b\uff1f</p> </li> <li> <p> \u7d99\u7d9a\u7684\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3</p> </li> <li>\u6570\u6642\u9593\u304a\u304d\u306b\u5909\u66f4\u3092\u30de\u30fc\u30b8\u3057\u3066\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u3066\u3044\u307e\u3059\u304b\uff1f</li> </ul>"},{"location":"reference/%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%88%E3%83%AA%E3%83%BC%E3%83%A0%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/#_6","title":"\u5c0e\u51fa\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","text":""},{"location":"reference/%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%88%E3%83%AA%E3%83%BC%E3%83%A0%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/#_7","title":"\u30d3\u30b8\u30cd\u30b9","text":"<ul> <li> \u4ea4\u6e09\u306b\u3088\u308b\u30b9\u30b3\u30fc\u30d7\u5951\u7d04</li> <li> <p>\u30b9\u30b3\u30fc\u30d7\u3092\u67d4\u8edf\u306b\u4ea4\u6e09\u3057\u306a\u304c\u3089\u5951\u7d04\u5185\u5bb9\u3092\u9032\u3081\u3066\u3044\u307e\u3059\u304b\uff1f</p> </li> <li> <p> \u5229\u7528\u90fd\u5ea6\u8ab2\u91d1</p> </li> <li> <p>\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u304c\u4f7f\u7528\u3055\u308c\u308b\u305f\u3073\u306b\u8ab2\u91d1\u30e2\u30c7\u30eb\u3092\u53d6\u308a\u5165\u308c\u3066\u3044\u307e\u3059\u304b\uff1f</p> </li> <li> <p> \u30c7\u30a4\u30ea\u30fc\u30c7\u30d7\u30ed\u30a4</p> </li> <li>\u6bce\u65e5\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u30d7\u30ed\u30c0\u30af\u30b7\u30e7\u30f3\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u3044\u307e\u3059\u304b\uff1f</li> </ul>"},{"location":"reference/%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%88%E3%83%AA%E3%83%BC%E3%83%A0%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/#_8","title":"\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30bf\u30eb\u306a\u30c7\u30d7\u30ed\u30a4","text":"<ul> <li> \u5f90\u3005\u306b\u30ec\u30ac\u30b7\u30fc\u30b7\u30b9\u30c6\u30e0\u306e\u30ea\u30d7\u30ec\u30fc\u30b9\u3092\u9032\u3081\u3066\u3044\u307e\u3059\u304b\uff1f</li> </ul>"},{"location":"reference/%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%88%E3%83%AA%E3%83%BC%E3%83%A0%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/#_9","title":"\u30c1\u30fc\u30e0","text":"<ul> <li> \u6839\u672c\u539f\u56e0\u5206\u6790</li> <li> <p>\u30d0\u30b0\u306e\u539f\u56e0\u3092\u8abf\u67fb\u3057\u3001\u518d\u767a\u9632\u6b62\u7b56\u3092\u8b1b\u3058\u3066\u3044\u307e\u3059\u304b\uff1f</p> </li> <li> <p> \u672c\u7269\u306e\u9867\u5ba2\u53c2\u52a0</p> </li> <li> <p>\u9867\u5ba2\u304c\u8a08\u753b\u4f5c\u6210\u3084\u6539\u5584\u306b\u53c2\u52a0\u3057\u3066\u3044\u307e\u3059\u304b\uff1f</p> </li> <li> <p> \u30c1\u30fc\u30e0\u306e\u7d99\u7d9a</p> </li> <li> <p>\u30c1\u30fc\u30e0\u30e1\u30f3\u30d0\u30fc\u304c\u4e00\u8cab\u6027\u3092\u6301\u3063\u3066\u5354\u529b\u3057\u3066\u3044\u307e\u3059\u304b\uff1f</p> </li> <li> <p> \u30c1\u30fc\u30e0\u306e\u7e2e\u5c0f</p> </li> <li>\u30c1\u30fc\u30e0\u304c\u6210\u9577\u3057\u305f\u6bb5\u968e\u3067\u898f\u6a21\u3092\u7e2e\u5c0f\u3057\u3066\u52b9\u7387\u5316\u3057\u3066\u3044\u307e\u3059\u304b\uff1f</li> </ul>"},{"location":"reference/%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%88%E3%83%AA%E3%83%BC%E3%83%A0%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/#_10","title":"\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0","text":"<ul> <li> \u30b3\u30fc\u30c9\u306e\u5171\u6709</li> <li> <p>\u30e1\u30f3\u30d0\u30fc\u5168\u54e1\u304c\u30b7\u30b9\u30c6\u30e0\u306e\u4efb\u610f\u306e\u90e8\u5206\u3092\u6539\u5584\u3067\u304d\u307e\u3059\u304b\uff1f</p> </li> <li> <p> \u30b3\u30fc\u30c9\u3068\u30c6\u30b9\u30c8</p> </li> <li> <p>\u6c38\u7d9a\u3059\u308b\u4f5c\u6210\u7269\u3068\u3057\u3066\u30b3\u30fc\u30c9\u3068\u30c6\u30b9\u30c8\u306e\u307f\u3092\u4fdd\u5b88\u3057\u3066\u3044\u307e\u3059\u304b\uff1f</p> </li> <li> <p> \u5358\u4e00\u306e\u30b3\u30fc\u30c9\u30d9\u30fc\u30b9</p> </li> <li>\u30d6\u30e9\u30f3\u30c1\u3092\u77ed\u671f\u9593\u3067\u7ba1\u7406\u3057\u3001\u30b3\u30fc\u30c9\u306e\u4e2d\u5fc3\u30e9\u30a4\u30f3\u3092\u4fdd\u3063\u3066\u3044\u307e\u3059\u304b\uff1f</li> </ul>"},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/","title":"\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u3068\u30c6\u30b9\u30c8\u30ac\u30a4\u30c9","text":""},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#_2","title":"\u6982\u8981","text":"<p>\u3053\u306e\u30ac\u30a4\u30c9\u306f\u3001\u958b\u767a\u30ac\u30a4\u30c9\u306e\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u3068\u30c6\u30b9\u30c8\u90e8\u5206\u3092\u8a73\u7d30\u5316\u3057\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u3059\u3002TDD\uff08\u30c6\u30b9\u30c8\u99c6\u52d5\u958b\u767a\uff09\u3092\u4e2d\u6838\u3068\u3057\u305f\u5b9f\u88c5\u30d7\u30ed\u30bb\u30b9\u306e\u5177\u4f53\u7684\u306a\u624b\u9806\u3068\u3001\u54c1\u8cea\u3092\u7dad\u6301\u3059\u308b\u305f\u3081\u306e\u898f\u5f8b\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002</p>"},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#_3","title":"\u57fa\u672c\u539f\u5247","text":""},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#tddtest-driven-development","title":"TDD\uff08Test-Driven Development\uff09\u306e\u4e09\u3064\u306e\u539f\u5247","text":"<ol> <li>\u5931\u6557\u3059\u308b\u30c6\u30b9\u30c8\u3092\u66f8\u304f\u307e\u3067\u3001\u30d7\u30ed\u30c0\u30af\u30b7\u30e7\u30f3\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u306f\u306a\u3089\u306a\u3044</li> <li>\u5931\u6557\u3059\u308b\u30c6\u30b9\u30c8\u306f\u3001\u5931\u6557\u3059\u308b\u306e\u306b\u5341\u5206\u306a\u3060\u3051\u66f8\u304f</li> <li>\u73fe\u5728\u5931\u6557\u3057\u3066\u3044\u308b\u30c6\u30b9\u30c8\u3092\u6210\u529f\u3055\u305b\u308b\u4ee5\u4e0a\u306e\u30d7\u30ed\u30c0\u30af\u30b7\u30e7\u30f3\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u306f\u306a\u3089\u306a\u3044</li> </ol>"},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#red-green-refactor","title":"Red-Green-Refactor \u30b5\u30a4\u30af\u30eb","text":""},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#_4","title":"\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u958b\u767a\u30d5\u30ed\u30fc","text":""},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#_5","title":"\u5168\u4f53\u30d7\u30ed\u30bb\u30b9","text":""},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#_6","title":"\u30a2\u30d7\u30ed\u30fc\u30c1\u6226\u7565","text":""},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#vs","title":"\u30a4\u30f3\u30b5\u30a4\u30c9\u30a2\u30a6\u30c8 vs \u30a2\u30a6\u30c8\u30b5\u30a4\u30c9\u30a4\u30f3","text":""},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#_7","title":"\u30a4\u30f3\u30b5\u30a4\u30c9\u30a2\u30a6\u30c8\u30a2\u30d7\u30ed\u30fc\u30c1","text":""},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#_8","title":"\u30a2\u30a6\u30c8\u30b5\u30a4\u30c9\u30a4\u30f3\u30a2\u30d7\u30ed\u30fc\u30c1","text":""},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#tdd","title":"TDD\u5b9f\u88c5\u306e\u8a73\u7d30\u624b\u9806","text":""},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#1-todo","title":"1. TODO\u4f5c\u6210","text":"<pre><code>## TODO\u30ea\u30b9\u30c8\u306e\u4f8b\n\n- [ ] \u30e6\u30fc\u30b6\u30fc\u767b\u9332\u6a5f\u80fd\n  - [ ] User\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u4f5c\u6210\n    - [ ] \u5fc5\u9808\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u691c\u8a3c\n    - [ ] \u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306e\u5f62\u5f0f\u691c\u8a3c\n    - [ ] \u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u5f37\u5ea6\u30c1\u30a7\u30c3\u30af\n  - [ ] UserRepository\u306e\u5b9f\u88c5\n    - [ ] save()\u30e1\u30bd\u30c3\u30c9\n    - [ ] findByEmail()\u30e1\u30bd\u30c3\u30c9\n    - [ ] existsByEmail()\u30e1\u30bd\u30c3\u30c9\n  - [ ] UserService\u306e\u5b9f\u88c5\n    - [ ] register()\u30e1\u30bd\u30c3\u30c9\n    - [ ] \u91cd\u8907\u30c1\u30a7\u30c3\u30af\n    - [ ] \u30d1\u30b9\u30ef\u30fc\u30c9\u30cf\u30c3\u30b7\u30e5\u5316\n  - [ ] UserController\u306e\u5b9f\u88c5\n    - [ ] POST /users \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\n    - [ ] \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\n    - [ ] \u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\n</code></pre>"},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#2-red","title":"2. Red \u30d5\u30a7\u30fc\u30ba\uff08\u5931\u6557\u3059\u308b\u30c6\u30b9\u30c8\u3092\u66f8\u304f\uff09","text":"<pre><code>// UserTest.java\n@Test\nvoid \u30e6\u30fc\u30b6\u30fc\u4f5c\u6210\u6642\u306b\u5fc5\u9808\u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u691c\u8a3c\u3055\u308c\u308b() {\n    // Given\n    String email = \"test@example.com\";\n    String password = \"SecurePass123!\";\n    String name = \"\u5c71\u7530\u592a\u90ce\";\n\n    // When\n    User user = new User(email, password, name);\n\n    // Then\n    assertThat(user.getEmail()).isEqualTo(email);\n    assertThat(user.getName()).isEqualTo(name);\n    // \u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u30cf\u30c3\u30b7\u30e5\u5316\u3055\u308c\u3066\u3044\u308b\n    assertThat(user.getPassword()).isNotEqualTo(password);\n}\n\n@Test\nvoid \u7121\u52b9\u306a\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3067\u4f8b\u5916\u304c\u767a\u751f\u3059\u308b() {\n    // Given\n    String invalidEmail = \"invalid-email\";\n\n    // When/Then\n    assertThrows(IllegalArgumentException.class, () -&gt; {\n        new User(invalidEmail, \"password\", \"name\");\n    });\n}\n</code></pre>"},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#3-green","title":"3. Green \u30d5\u30a7\u30fc\u30ba\uff08\u6700\u5c0f\u9650\u306e\u5b9f\u88c5\uff09","text":"<pre><code>// User.java\npublic class User {\n    private String email;\n    private String password;\n    private String name;\n\n    public User(String email, String password, String name) {\n        if (!isValidEmail(email)) {\n            throw new IllegalArgumentException(\"\u7121\u52b9\u306a\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\");\n        }\n        this.email = email;\n        this.password = hashPassword(password);\n        this.name = name;\n    }\n\n    private boolean isValidEmail(String email) {\n        return email != null &amp;&amp; email.contains(\"@\");\n    }\n\n    private String hashPassword(String password) {\n        // \u7c21\u5358\u306a\u30cf\u30c3\u30b7\u30e5\u5316\u306e\u5b9f\u88c5\uff08\u5f8c\u3067\u6539\u5584\uff09\n        return \"hashed_\" + password;\n    }\n\n    // getters...\n}\n</code></pre>"},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#4-refactor","title":"4. Refactor \u30d5\u30a7\u30fc\u30ba\uff08\u8a2d\u8a08\u6539\u5584\uff09","text":"<pre><code>// User.java (\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u5f8c)\npublic class User {\n    private final Email email;\n    private final Password password;\n    private final Name name;\n\n    public User(String email, String password, String name) {\n        this.email = new Email(email);\n        this.password = new Password(password);\n        this.name = new Name(name);\n    }\n\n    // getters...\n}\n\n// Email.java (\u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8)\npublic class Email {\n    private static final Pattern VALID_EMAIL_PATTERN =\n        Pattern.compile(\"^[A-Za-z0-9+_.-]+@[A-Za-z0-9.-]+\\\\.[A-Za-z]{2,}$\");\n\n    private final String value;\n\n    public Email(String value) {\n        if (value == null || !VALID_EMAIL_PATTERN.matcher(value).matches()) {\n            throw new IllegalArgumentException(\"\u7121\u52b9\u306a\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9: \" + value);\n        }\n        this.value = value;\n    }\n\n    public String getValue() {\n        return value;\n    }\n}\n\n// Password.java (\u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8)\npublic class Password {\n    private static final int MIN_LENGTH = 8;\n    private final String hashedValue;\n\n    public Password(String rawPassword) {\n        validate(rawPassword);\n        this.hashedValue = BCrypt.hashpw(rawPassword, BCrypt.gensalt());\n    }\n\n    private void validate(String password) {\n        if (password == null || password.length() &lt; MIN_LENGTH) {\n            throw new IllegalArgumentException(\n                \"\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\" + MIN_LENGTH + \"\u6587\u5b57\u4ee5\u4e0a\u5fc5\u8981\u3067\u3059\"\n            );\n        }\n    }\n\n    public boolean matches(String rawPassword) {\n        return BCrypt.checkpw(rawPassword, hashedValue);\n    }\n}\n</code></pre>"},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#_9","title":"\u54c1\u8cea\u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8","text":""},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#_10","title":"\u30b3\u30df\u30c3\u30c8\u524d\u306e\u5fc5\u9808\u78ba\u8a8d\u4e8b\u9805","text":"<pre><code># 1. \u30c6\u30b9\u30c8\u5b9f\u884c\n./gradlew test  # \u307e\u305f\u306f npm test\n\n# 2. \u30b3\u30fc\u30c9\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\n./gradlew spotlessApply  # \u307e\u305f\u306f npm run format\n\n# 3. \u9759\u7684\u89e3\u6790\n./gradlew check  # \u307e\u305f\u306f npm run lint\n\n# 4. \u30d3\u30eb\u30c9\u78ba\u8a8d\n./gradlew build  # \u307e\u305f\u306f npm run build\n\n# 5. \u30ab\u30d0\u30ec\u30c3\u30b8\u78ba\u8a8d\n./gradlew jacocoTestReport  # \u307e\u305f\u306f npm run test:coverage\n</code></pre>"},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#_11","title":"\u54c1\u8cea\u57fa\u6e96","text":"\u9805\u76ee \u57fa\u6e96 \u5fc5\u9808/\u63a8\u5968 \u30c6\u30b9\u30c8\u30ab\u30d0\u30ec\u30c3\u30b8 80%\u4ee5\u4e0a \u5fc5\u9808 \u5faa\u74b0\u7684\u8907\u96d1\u5ea6 10\u4ee5\u4e0b \u5fc5\u9808 \u30e1\u30bd\u30c3\u30c9\u306e\u884c\u6570 20\u884c\u4ee5\u4e0b \u63a8\u5968 \u30af\u30e9\u30b9\u306e\u884c\u6570 200\u884c\u4ee5\u4e0b \u63a8\u5968 \u91cd\u8907\u30b3\u30fc\u30c9 0% \u5fc5\u9808 \u30b3\u30f3\u30d1\u30a4\u30e9\u8b66\u544a 0\u500b \u5fc5\u9808 Linter\u8b66\u544a 0\u500b \u5fc5\u9808"},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#_12","title":"\u30b3\u30df\u30c3\u30c8\u898f\u7d04","text":""},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#_13","title":"\u30b3\u30df\u30c3\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8\u30d5\u30a9\u30fc\u30de\u30c3\u30c8","text":"<pre><code>&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;\n\n&lt;body&gt;\n\n&lt;footer&gt;\n</code></pre>"},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#_14","title":"\u30bf\u30a4\u30d7\u4e00\u89a7","text":"\u30bf\u30a4\u30d7 \u8aac\u660e \u4f8b feat \u65b0\u6a5f\u80fd\u8ffd\u52a0 <code>feat(auth): \u30e6\u30fc\u30b6\u30fc\u8a8d\u8a3c\u6a5f\u80fd\u3092\u8ffd\u52a0</code> fix \u30d0\u30b0\u4fee\u6b63 <code>fix(api): NullPointerException\u3092\u4fee\u6b63</code> docs \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u5909\u66f4 <code>docs(readme): \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\u3092\u66f4\u65b0</code> style \u30b3\u30fc\u30c9\u30b9\u30bf\u30a4\u30eb\u5909\u66f4 <code>style: \u30a4\u30f3\u30c7\u30f3\u30c8\u3092\u4fee\u6b63</code> refactor \u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0 <code>refactor(user): User\u30af\u30e9\u30b9\u3092\u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5206\u5272</code> test \u30c6\u30b9\u30c8\u8ffd\u52a0\u30fb\u4fee\u6b63 <code>test(user): \u30e6\u30fc\u30b6\u30fc\u767b\u9332\u306e\u30c6\u30b9\u30c8\u3092\u8ffd\u52a0</code> chore \u30d3\u30eb\u30c9\u30fb\u30c4\u30fc\u30eb\u5909\u66f4 <code>chore(gradle): \u4f9d\u5b58\u95a2\u4fc2\u3092\u66f4\u65b0</code>"},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#_15","title":"\u30b3\u30df\u30c3\u30c8\u5358\u4f4d","text":"<ul> <li>1\u30b3\u30df\u30c3\u30c8 = 1\u8ad6\u7406\u7684\u5909\u66f4</li> <li>TODO\u30ea\u30b9\u30c8\u306e\u9805\u76ee\u5358\u4f4d\u3067\u30b3\u30df\u30c3\u30c8</li> <li>Red-Green-Refactor\u30b5\u30a4\u30af\u30eb\u5b8c\u4e86\u6642\u306b\u30b3\u30df\u30c3\u30c8</li> <li>\u30d3\u30eb\u30c9\u304c\u901a\u308b\u72b6\u614b\u3067\u30b3\u30df\u30c3\u30c8</li> </ul>"},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#_16","title":"\u30c6\u30b9\u30c8\u306e\u7a2e\u985e\u3068\u6226\u7565","text":""},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#_17","title":"\u30c6\u30b9\u30c8\u30d4\u30e9\u30df\u30c3\u30c9","text":""},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#_18","title":"\u30c6\u30b9\u30c8\u4f5c\u6210\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","text":""},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#1-aaa-arrange-act-assert","title":"1. AAA \u30d1\u30bf\u30fc\u30f3\uff08Arrange-Act-Assert\uff09","text":"<pre><code>@Test\nvoid \u5546\u54c1\u306e\u5728\u5eab\u304c\u6e1b\u5c11\u3059\u308b() {\n    // Arrange\uff08\u6e96\u5099\uff09\n    Product product = new Product(\"\u5546\u54c1A\", 10);\n    int orderQuantity = 3;\n\n    // Act\uff08\u5b9f\u884c\uff09\n    product.reduceStock(orderQuantity);\n\n    // Assert\uff08\u691c\u8a3c\uff09\n    assertThat(product.getStock()).isEqualTo(7);\n}\n</code></pre>"},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#2","title":"2. \u30c6\u30b9\u30c8\u306e\u547d\u540d\u898f\u5247","text":"<pre><code>// \u30d1\u30bf\u30fc\u30f31: \u65e5\u672c\u8a9e\u3067\u306e\u8aac\u660e\u7684\u306a\u540d\u524d\n@Test\nvoid \u5728\u5eab\u304c\u4e0d\u8db3\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u6ce8\u6587\u3067\u304d\u306a\u3044() { }\n\n// \u30d1\u30bf\u30fc\u30f32: Given-When-Then\u5f62\u5f0f\n@Test\nvoid given\u5728\u5eab10\u500b_when15\u500b\u6ce8\u6587_then\u5728\u5eab\u4e0d\u8db3\u4f8b\u5916() { }\n\n// \u30d1\u30bf\u30fc\u30f33: \u30e1\u30bd\u30c3\u30c9\u540d_\u6761\u4ef6_\u671f\u5f85\u7d50\u679c\n@Test\nvoid reduceStock_\u5728\u5eab\u4e0d\u8db3_IllegalStateException() { }\n</code></pre>"},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#3","title":"3. \u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u6e96\u5099","text":"<pre><code>// \u30c6\u30b9\u30c8\u30d5\u30a3\u30af\u30b9\u30c1\u30e3\u306e\u4f7f\u7528\npublic class UserTestFixture {\n    public static User createDefaultUser() {\n        return new User(\n            \"test@example.com\",\n            \"password123\",\n            \"\u30c6\u30b9\u30c8\u30e6\u30fc\u30b6\u30fc\"\n        );\n    }\n\n    public static User createUserWithEmail(String email) {\n        return new User(\n            email,\n            \"password123\",\n            \"\u30c6\u30b9\u30c8\u30e6\u30fc\u30b6\u30fc\"\n        );\n    }\n}\n</code></pre>"},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#_19","title":"\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#_20","title":"\u3088\u304f\u4f7f\u3046\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u624b\u6cd5","text":"\u30d1\u30bf\u30fc\u30f3 \u9069\u7528\u5834\u9762 \u4f8b \u30e1\u30bd\u30c3\u30c9\u62bd\u51fa \u9577\u3044\u30e1\u30bd\u30c3\u30c9\u306e\u5206\u5272 \u691c\u8a3c\u30ed\u30b8\u30c3\u30af\u3092\u5225\u30e1\u30bd\u30c3\u30c9\u3078 \u5909\u6570\u62bd\u51fa \u8907\u96d1\u306a\u5f0f\u306e\u7c21\u7565\u5316 \u8a08\u7b97\u7d50\u679c\u3092\u4e00\u6642\u5909\u6570\u3078 \u30af\u30e9\u30b9\u62bd\u51fa \u8cac\u52d9\u306e\u5206\u96e2 \u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u62bd\u51fa \u30e1\u30bd\u30c3\u30c9\u79fb\u52d5 \u9069\u5207\u306a\u30af\u30e9\u30b9\u3078\u306e\u914d\u7f6e \u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u30e1\u30bd\u30c3\u30c9\u306e\u79fb\u52d5 \u6761\u4ef6\u8a18\u8ff0\u306e\u5206\u89e3 \u8907\u96d1\u306a\u6761\u4ef6\u5f0f\u306e\u6574\u7406 if\u6587\u306e\u6761\u4ef6\u3092\u30e1\u30bd\u30c3\u30c9\u5316 \u30eb\u30fc\u30d7\u306e\u5206\u5272 \u5358\u4e00\u8cac\u4efb\u306e\u539f\u5247\u9069\u7528 \u7570\u306a\u308b\u51e6\u7406\u3092\u5225\u30eb\u30fc\u30d7\u3078"},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#_21","title":"\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u5b9f\u65bd\u306e\u30bf\u30a4\u30df\u30f3\u30b0","text":"<ol> <li>Rule of Three\uff083\u56de\u30eb\u30fc\u30eb\uff09</li> <li>1\u56de\u76ee: \u305d\u306e\u307e\u307e\u5b9f\u88c5</li> <li>2\u56de\u76ee: \u91cd\u8907\u306b\u6c17\u3065\u304f\u304c\u6211\u6162</li> <li> <p>3\u56de\u76ee: \u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u5b9f\u65bd</p> </li> <li> <p>\u30b3\u30fc\u30c9\u306e\u81ed\u3044\uff08Code Smells\uff09\u3092\u691c\u77e5\u3057\u305f\u3068\u304d</p> </li> <li>\u9577\u3059\u304e\u308b\u30e1\u30bd\u30c3\u30c9\uff0820\u884c\u4ee5\u4e0a\uff09</li> <li>\u5927\u304d\u3059\u304e\u308b\u30af\u30e9\u30b9\uff08200\u884c\u4ee5\u4e0a\uff09</li> <li>\u9577\u3059\u304e\u308b\u30d1\u30e9\u30e1\u30fc\u30bf\u30ea\u30b9\u30c8\uff084\u500b\u4ee5\u4e0a\uff09</li> <li>\u30c7\u30fc\u30bf\u306e\u7fa4\u308c\uff08\u540c\u3058\u5f15\u6570\u306e\u7d44\u307f\u5408\u308f\u305b\uff09</li> <li>\u30b9\u30a4\u30c3\u30c1\u6587\u306e\u91cd\u8907</li> </ol>"},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#_22","title":"\u7d99\u7d9a\u7684\u306a\u6539\u5584","text":""},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#_23","title":"\u3075\u308a\u304b\u3048\u308a\u3067\u306e\u78ba\u8a8d\u9805\u76ee","text":"<pre><code>## \u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u3075\u308a\u304b\u3048\u308a\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\n\n### Keep\uff08\u7d99\u7d9a\u3059\u308b\u3053\u3068\uff09\n- [ ] TDD\u30b5\u30a4\u30af\u30eb\u306e\u5b9f\u8df5\n- [ ] \u30b3\u30fc\u30c9\u30ec\u30d3\u30e5\u30fc\u306e\u5b9f\u65bd\n- [ ] \u54c1\u8cea\u57fa\u6e96\u306e\u7dad\u6301\n\n### Problem\uff08\u554f\u984c\u70b9\uff09\n- [ ] \u30c6\u30b9\u30c8\u4f5c\u6210\u306b\u6642\u9593\u304c\u304b\u304b\u3063\u305f\u7b87\u6240\n- [ ] \u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u304c\u4e0d\u5341\u5206\u306a\u7b87\u6240\n- [ ] \u6280\u8853\u7684\u8ca0\u50b5\u306e\u767a\u751f\u7b87\u6240\n\n### Try\uff08\u6b21\u306b\u8a66\u3059\u3053\u3068\uff09\n- [ ] \u65b0\u3057\u3044\u30c6\u30b9\u30c8\u624b\u6cd5\u306e\u5c0e\u5165\n- [ ] \u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u306e\u81ea\u52d5\u5316\n- [ ] \u54c1\u8cea\u30e1\u30c8\u30ea\u30af\u30b9\u306e\u6539\u5584\n\n### \u6570\u5024\u6307\u6a19\n- \u30c6\u30b9\u30c8\u30ab\u30d0\u30ec\u30c3\u30b8: ___%\n- \u30d3\u30eb\u30c9\u6210\u529f\u7387: ___%\n- \u30d0\u30b0\u767a\u751f\u7387: ___\u4ef6/\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\n- \u5e73\u5747\u30b5\u30a4\u30af\u30eb\u30bf\u30a4\u30e0: ___\u6642\u9593\n</code></pre>"},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#_24","title":"\u6280\u8853\u7684\u8ca0\u50b5\u306e\u7ba1\u7406","text":""},{"location":"reference/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89/#_25","title":"\u307e\u3068\u3081","text":"<p>\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u3068\u30c6\u30b9\u30c8\u306f\u3001\u3088\u3044\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u4f5c\u308b\u305f\u3081\u306e\u6700\u3082\u57fa\u672c\u7684\u3067\u91cd\u8981\u306a\u6d3b\u52d5\u3067\u3059\u3002TDD\u3092\u4e2d\u5fc3\u3068\u3057\u305f\u3053\u308c\u3089\u306e\u898f\u5f8b\u3092\u5b88\u308b\u3053\u3068\u3067\uff1a</p> <ol> <li>\u54c1\u8cea\u306e\u4f5c\u308a\u8fbc\u307f - \u30d0\u30b0\u306e\u65e9\u671f\u767a\u898b\u3068\u4fee\u6b63</li> <li>\u8a2d\u8a08\u306e\u6539\u5584 - \u7d99\u7d9a\u7684\u306a\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0</li> <li>\u5909\u66f4\u5bb9\u6613\u6027 - \u30c6\u30b9\u30c8\u306b\u3088\u308b\u5b89\u5168\u7db2</li> <li>\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u6027 - \u30c6\u30b9\u30c8\u304c\u4ed5\u69d8\u66f8\u3068\u3057\u3066\u6a5f\u80fd</li> </ol> <p>\u3053\u308c\u3089\u306e\u5b9f\u8df5\u306b\u3088\u308a\u3001\u300c\u5909\u66f4\u3092\u697d\u306b\u5b89\u5168\u306b\u3067\u304d\u3066\u5f79\u306b\u7acb\u3064\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u300d\u306e\u5b9f\u73fe\u3092\u76ee\u6307\u3057\u307e\u3059\u3002</p>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/","title":"\u30c6\u30b9\u30c8\u6226\u7565\u30ac\u30a4\u30c9","text":""},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_2","title":"\u6982\u8981","text":"<p>\u3088\u3044\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u4f5c\u308b\u305f\u3081\u306e\u30c6\u30b9\u30c8\u6226\u7565\u306b\u3064\u3044\u3066\u8aac\u660e\u3059\u308b\u3002\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30d1\u30bf\u30fc\u30f3\u306b\u5fdc\u3058\u305f\u9069\u5207\u306a\u30c6\u30b9\u30c8\u6226\u7565\u3092\u9078\u629e\u3057\u3001\u5909\u66f4\u3092\u697d\u306b\u5b89\u5168\u306b\u3067\u304d\u3066\u5f79\u306b\u7acb\u3064\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u5b9f\u73fe\u3092\u76ee\u6307\u3059\u3002</p>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_3","title":"\u30c6\u30b9\u30c8\u6226\u7565\u306e\u57fa\u672c\u539f\u5247","text":""},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_4","title":"\u3088\u3044\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3068\u30c6\u30b9\u30c8","text":"<p>\u5909\u66f4\u3092\u697d\u306b\u5b89\u5168\u306b\u3067\u304d\u3066\u5f79\u306b\u7acb\u3064\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u4f5c\u308b\u305f\u3081\u3001\u30c6\u30b9\u30c8\u306f\u4ee5\u4e0b\u306e\u4fa1\u5024\u3092\u63d0\u4f9b\u3059\u308b\uff1a</p> <ol> <li>\u5b89\u5168\u306a\u5909\u66f4: \u65e2\u5b58\u6a5f\u80fd\u3092\u7834\u58ca\u3059\u308b\u3053\u3068\u306a\u304f\u65b0\u6a5f\u80fd\u3092\u8ffd\u52a0</li> <li>\u8a2d\u8a08\u306e\u6539\u5584: \u30c6\u30b9\u30bf\u30d6\u30eb\u306a\u30b3\u30fc\u30c9\u306f\u826f\u3044\u8a2d\u8a08\u306e\u6307\u6a19</li> <li>\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8: \u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u306f\u5b9f\u884c\u53ef\u80fd\u306a\u4ed5\u69d8\u66f8</li> <li>\u54c1\u8cea\u306e\u4fdd\u8a3c: \u30d0\u30b0\u306e\u65e9\u671f\u767a\u898b\u3068\u4e88\u9632</li> </ol>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#tdd","title":"\u30c6\u30b9\u30c8\u99c6\u52d5\u958b\u767a\uff08TDD\uff09","text":""},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#tdd-3","title":"TDD \u306e 3 \u3064\u306e\u6cd5\u5247","text":"<ol> <li>\u5931\u6557\u3059\u308b\u5358\u4f53\u30c6\u30b9\u30c8\u3092\u66f8\u304f\u307e\u3067\u30d7\u30ed\u30c0\u30af\u30b7\u30e7\u30f3\u30b3\u30fc\u30c9\u3092\u66f8\u304b\u306a\u3044</li> <li>\u30b3\u30f3\u30d1\u30a4\u30eb\u304c\u901a\u3089\u306a\u3044\u3001\u307e\u305f\u306f\u5931\u6557\u3059\u308b\u7bc4\u56f2\u3092\u8d85\u3048\u3066\u5358\u4f53\u30c6\u30b9\u30c8\u3092\u66f8\u304b\u306a\u3044</li> <li>\u73fe\u5728\u5931\u6557\u3057\u3066\u3044\u308b\u5358\u4f53\u30c6\u30b9\u30c8\u3092\u901a\u3059\u4ee5\u4e0a\u306b\u30d7\u30ed\u30c0\u30af\u30b7\u30e7\u30f3\u30b3\u30fc\u30c9\u3092\u66f8\u304b\u306a\u3044</li> </ol>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_5","title":"\u30c6\u30b9\u30c8\u5f62\u614b\u3068\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30d1\u30bf\u30fc\u30f3","text":"<p>\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30d1\u30bf\u30fc\u30f3\u306b\u5fdc\u3058\u3066\u3001\u6700\u9069\u306a\u30c6\u30b9\u30c8\u5f62\u614b\u3092\u9078\u629e\u3059\u308b\u3002</p>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_6","title":"\u30d4\u30e9\u30df\u30c3\u30c9\u5f62\u30c6\u30b9\u30c8","text":""},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_7","title":"\u9069\u7528\u5bfe\u8c61","text":"<ul> <li>\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\u30d1\u30bf\u30fc\u30f3</li> <li>\u30a4\u30d9\u30f3\u30c8\u5c65\u6b74\u5f0f</li> <li>\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3</li> </ul>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_8","title":"\u7279\u5fb4","text":"<ul> <li>\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u306b\u91cd\u70b9: \u9ad8\u54c1\u8cea\u306a\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u306e\u691c\u8a3c</li> <li>\u9ad8\u901f\u306a\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af: \u7d20\u65e9\u3044\u30c6\u30b9\u30c8\u5b9f\u884c</li> <li>\u4fdd\u5b88\u30b3\u30b9\u30c8\u304c\u4f4e\u3044: \u30b7\u30f3\u30d7\u30eb\u3067\u7406\u89e3\u3057\u3084\u3059\u3044\u30c6\u30b9\u30c8</li> </ul>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_9","title":"\u5b9f\u88c5\u4f8b","text":"<p>\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\u306e\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8 <pre><code>@Test\nvoid \u4e88\u7d04\u3092\u30ad\u30e3\u30f3\u30bb\u30eb\u3067\u304d\u308b() {\n    // Given\n    TimeSlot futureTimeSlot = createFutureTimeSlot();\n    Reservation reservation = Reservation.create(\n        UserId.generate(), RoomId.generate(), \n        new ReservationTitle(\"\u4f1a\u8b70\"), new Purpose(\"\u5b9a\u4f8b\u4f1a\u8b70\"), futureTimeSlot);\n\n    // When\n    reservation.cancel();\n\n    // Then\n    assertThat(reservation.getStatus()).isEqualTo(ReservationStatus.CANCELLED);\n}\n\n@Test\nvoid \u958b\u59cb2\u6642\u9593\u524d\u3092\u904e\u304e\u305f\u4e88\u7d04\u306f\u30ad\u30e3\u30f3\u30bb\u30eb\u3067\u304d\u306a\u3044() {\n    // Given\n    TimeSlot pastTimeSlot = createPastTimeSlot();\n    Reservation reservation = Reservation.create(\n        UserId.generate(), RoomId.generate(),\n        new ReservationTitle(\"\u4f1a\u8b70\"), new Purpose(\"\u5b9a\u4f8b\u4f1a\u8b70\"), pastTimeSlot);\n\n    // When &amp; Then\n    assertThatThrownBy(reservation::cancel)\n        .isInstanceOf(IllegalStateException.class)\n        .hasMessageContaining(\"2\u6642\u9593\u524d\u307e\u3067\");\n}\n</code></pre></p>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_10","title":"\u30c0\u30a4\u30e4\u30e2\u30f3\u30c9\u5f62\u30c6\u30b9\u30c8","text":""},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_11","title":"\u9069\u7528\u5bfe\u8c61","text":"<ul> <li>\u30a2\u30af\u30c6\u30a3\u30d6\u30ec\u30b3\u30fc\u30c9\u30d1\u30bf\u30fc\u30f3</li> <li>\u30ec\u30a4\u30e4\u30fc\u30c9\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff08\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4e2d\u5fc3\uff09</li> </ul>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_12","title":"\u7279\u5fb4","text":"<ul> <li>\u7d71\u5408\u30c6\u30b9\u30c8\u306b\u91cd\u70b9: \u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u30ed\u30b8\u30c3\u30af\u306e\u691c\u8a3c</li> <li>\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30c6\u30b9\u30c8: \u5b9f\u969b\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u64cd\u4f5c\u3092\u542b\u3080</li> <li>\u4e2d\u7a0b\u5ea6\u306e\u5b9f\u884c\u901f\u5ea6: \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30a2\u30af\u30bb\u30b9\u3092\u542b\u3080\u305f\u3081</li> </ul>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_13","title":"\u5b9f\u88c5\u4f8b","text":"<p>\u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u5c64\u306e\u7d71\u5408\u30c6\u30b9\u30c8 <pre><code>@SpringBootTest\n@Testcontainers\n@Transactional\nclass ReservationRepositoryTest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:15\");\n\n    @Autowired\n    private ReservationRepository reservationRepository;\n\n    @Test\n    void \u4e88\u7d04\u3092\u4fdd\u5b58\u3057\u3066\u53d6\u5f97\u3067\u304d\u308b() {\n        // Given\n        Reservation reservation = createTestReservation();\n\n        // When\n        reservationRepository.save(reservation);\n        Optional&lt;Reservation&gt; found = reservationRepository.findById(reservation.getId());\n\n        // Then\n        assertThat(found).isPresent();\n        assertThat(found.get().getTitle()).isEqualTo(reservation.getTitle());\n    }\n\n    @Test\n    void \u30a2\u30af\u30c6\u30a3\u30d6\u306a\u4e88\u7d04\u306e\u307f\u53d6\u5f97\u3055\u308c\u308b() {\n        // Given\n        Reservation activeReservation = createActiveReservation();\n        Reservation cancelledReservation = createCancelledReservation();\n        reservationRepository.save(activeReservation);\n        reservationRepository.save(cancelledReservation);\n\n        // When\n        List&lt;Reservation&gt; activeReservations = reservationRepository.findActiveByUserId(\n            activeReservation.getUserId());\n\n        // Then\n        assertThat(activeReservations).hasSize(1);\n        assertThat(activeReservations.get(0).getId()).isEqualTo(activeReservation.getId());\n    }\n}\n</code></pre></p>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_14","title":"\u9006\u30d4\u30e9\u30df\u30c3\u30c9\u5f62\u30c6\u30b9\u30c8","text":""},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_15","title":"\u9069\u7528\u5bfe\u8c61","text":"<ul> <li>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30b9\u30af\u30ea\u30d7\u30c8\u30d1\u30bf\u30fc\u30f3</li> <li>\u5358\u7d14\u306aCRUD\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3</li> </ul>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_16","title":"\u7279\u5fb4","text":"<ul> <li>E2E\u30c6\u30b9\u30c8\u306b\u91cd\u70b9: \u30a8\u30f3\u30c9\u30c4\u30fc\u30a8\u30f3\u30c9\u306e\u52d5\u4f5c\u691c\u8a3c</li> <li>\u30e6\u30fc\u30b6\u30fc\u8996\u70b9: \u5b9f\u969b\u306e\u30e6\u30fc\u30b6\u30fc\u64cd\u4f5c\u3092\u30b7\u30df\u30e5\u30ec\u30fc\u30c8</li> <li>\u4f4e\u901f\u3060\u304c\u5305\u62ec\u7684: \u5168\u4f53\u7684\u306a\u52d5\u4f5c\u3092\u4fdd\u8a3c</li> </ul>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_17","title":"\u5b9f\u88c5\u4f8b","text":"<p>E2E\u30c6\u30b9\u30c8\uff08Selenium WebDriver\u4f7f\u7528\uff09 <pre><code>@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n@Testcontainers\nclass ReservationE2ETest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:15\");\n\n    @Autowired\n    private TestRestTemplate restTemplate;\n\n    private WebDriver driver;\n\n    @BeforeEach\n    void setUp() {\n        driver = new ChromeDriver();\n    }\n\n    @Test\n    void \u4f1a\u8b70\u5ba4\u3092\u691c\u7d22\u3057\u3066\u4e88\u7d04\u3067\u304d\u308b() {\n        // Given - \u30e6\u30fc\u30b6\u30fc\u304c\u30ed\u30b0\u30a4\u30f3\u6e08\u307f\n        loginAsTestUser();\n\n        // When - \u4f1a\u8b70\u5ba4\u691c\u7d22\u30da\u30fc\u30b8\u306b\u30a2\u30af\u30bb\u30b9\n        driver.get(\"http://localhost:\" + port + \"/rooms/search\");\n\n        // \u691c\u7d22\u6761\u4ef6\u3092\u5165\u529b\n        driver.findElement(By.id(\"capacity\")).sendKeys(\"10\");\n        driver.findElement(By.id(\"date\")).sendKeys(\"2024-12-01\");\n        driver.findElement(By.id(\"startTime\")).sendKeys(\"10:00\");\n        driver.findElement(By.id(\"endTime\")).sendKeys(\"12:00\");\n        driver.findElement(By.id(\"searchButton\")).click();\n\n        // \u691c\u7d22\u7d50\u679c\u304b\u3089\u4f1a\u8b70\u5ba4\u3092\u9078\u629e\n        WebElement roomCard = driver.findElement(By.className(\"room-card\"));\n        roomCard.findElement(By.className(\"reserve-button\")).click();\n\n        // \u4e88\u7d04\u60c5\u5831\u3092\u5165\u529b\n        driver.findElement(By.id(\"title\")).sendKeys(\"\u5b9a\u4f8b\u4f1a\u8b70\");\n        driver.findElement(By.id(\"purpose\")).sendKeys(\"\u9031\u6b21\u5b9a\u4f8b\u4f1a\u8b70\");\n        driver.findElement(By.id(\"submitButton\")).click();\n\n        // Then - \u4e88\u7d04\u5b8c\u4e86\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308b\n        WebElement successMessage = driver.findElement(By.className(\"success-message\"));\n        assertThat(successMessage.getText()).contains(\"\u4e88\u7d04\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\");\n    }\n\n    @Test\n    void \u4e88\u7d04\u3092\u30ad\u30e3\u30f3\u30bb\u30eb\u3067\u304d\u308b() {\n        // Given - \u4e8b\u524d\u306b\u4e88\u7d04\u3092\u4f5c\u6210\n        createTestReservation();\n        loginAsTestUser();\n\n        // When - \u30de\u30a4\u4e88\u7d04\u30da\u30fc\u30b8\u306b\u30a2\u30af\u30bb\u30b9\n        driver.get(\"http://localhost:\" + port + \"/my-reservations\");\n\n        // \u4e88\u7d04\u3092\u30ad\u30e3\u30f3\u30bb\u30eb\n        WebElement reservationCard = driver.findElement(By.className(\"reservation-card\"));\n        reservationCard.findElement(By.className(\"cancel-button\")).click();\n\n        // \u78ba\u8a8d\u30c0\u30a4\u30a2\u30ed\u30b0\u3067OK\n        driver.switchTo().alert().accept();\n\n        // Then - \u30ad\u30e3\u30f3\u30bb\u30eb\u6e08\u307f\u8868\u793a\u306b\u306a\u308b\n        WebElement status = reservationCard.findElement(By.className(\"status\"));\n        assertThat(status.getText()).isEqualTo(\"\u30ad\u30e3\u30f3\u30bb\u30eb\u6e08\u307f\");\n    }\n}\n</code></pre></p>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_18","title":"\u4f1a\u8b70\u5ba4\u4e88\u7d04\u30b7\u30b9\u30c6\u30e0\u306e\u30c6\u30b9\u30c8\u6226\u7565","text":""},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_19","title":"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3068\u30c6\u30b9\u30c8\u6226\u7565\u306e\u9078\u629e","text":"<p>\u4f1a\u8b70\u5ba4\u4e88\u7d04\u30b7\u30b9\u30c6\u30e0\u306f\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\u30d1\u30bf\u30fc\u30f3\u3068\u30d8\u30ad\u30b5\u30b4\u30ca\u30eb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u63a1\u7528\u3059\u308b\u305f\u3081\u3001\u30d4\u30e9\u30df\u30c3\u30c9\u5f62\u30c6\u30b9\u30c8\u304c\u6700\u9069\u3002</p> <p></p>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_20","title":"\u30c6\u30b9\u30c8\u30ec\u30d9\u30eb\u5225\u306e\u8a73\u7d30\u6226\u7565","text":""},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#180","title":"\u30ec\u30d9\u30eb1\uff1a\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\uff0880%\uff09","text":"<p>\u5bfe\u8c61\uff1a\u30c9\u30e1\u30a4\u30f3\u5c64\u306e\u5404\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8</p> <p>\u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30c6\u30b9\u30c8 <pre><code>class TimeSlotTest {\n    @Test\n    void \u6709\u52b9\u306a\u6642\u9593\u67a0\u3067\u4f5c\u6210\u3067\u304d\u308b() {\n        LocalDateTime start = LocalDateTime.of(2024, 1, 1, 10, 0);\n        LocalDateTime end = LocalDateTime.of(2024, 1, 1, 12, 0);\n\n        assertThatCode(() -&gt; new TimeSlot(start, end))\n            .doesNotThrowAnyException();\n    }\n\n    @Test\n    void \u55b6\u696d\u6642\u9593\u5916\u306f\u4f8b\u5916\u304c\u767a\u751f\u3059\u308b() {\n        LocalDateTime start = LocalDateTime.of(2024, 1, 1, 7, 0);  // \u55b6\u696d\u6642\u9593\u524d\n        LocalDateTime end = LocalDateTime.of(2024, 1, 1, 9, 0);\n\n        assertThatThrownBy(() -&gt; new TimeSlot(start, end))\n            .isInstanceOf(IllegalArgumentException.class)\n            .hasMessageContaining(\"\u55b6\u696d\u6642\u9593\u5185\");\n    }\n\n    @ParameterizedTest\n    @CsvSource({\n        \"10:00, 12:00, 11:00, 13:00, true\",   // \u91cd\u8907\u3042\u308a\n        \"10:00, 12:00, 12:00, 14:00, false\",  // \u91cd\u8907\u306a\u3057\uff08\u5883\u754c\uff09\n        \"10:00, 12:00, 14:00, 16:00, false\"   // \u91cd\u8907\u306a\u3057\uff08\u96e2\u308c\u3066\u3044\u308b\uff09\n    })\n    void \u6642\u9593\u67a0\u306e\u91cd\u8907\u5224\u5b9a\u304c\u6b63\u3057\u3044(String start1, String end1, String start2, String end2, boolean expected) {\n        TimeSlot slot1 = createTimeSlot(start1, end1);\n        TimeSlot slot2 = createTimeSlot(start2, end2);\n\n        assertThat(slot1.overlaps(slot2)).isEqualTo(expected);\n    }\n}\n</code></pre></p> <p>\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u30c6\u30b9\u30c8 <pre><code>class ReservationTest {\n    @Test\n    void \u4e88\u7d04\u4f5c\u6210\u6642\u306f\u78ba\u5b9a\u72b6\u614b\u306b\u306a\u308b() {\n        Reservation reservation = createValidReservation();\n\n        assertThat(reservation.getStatus()).isEqualTo(ReservationStatus.CONFIRMED);\n        assertThat(reservation.getId()).isNotNull();\n        assertThat(reservation.getCreatedAt()).isBeforeOrEqualTo(LocalDateTime.now());\n    }\n\n    @Test\n    void \u5909\u66f4\u53ef\u80fd\u306a\u4e88\u7d04\u306f\u30bf\u30a4\u30c8\u30eb\u3092\u5909\u66f4\u3067\u304d\u308b() {\n        Reservation reservation = createFutureReservation();\n        ReservationTitle newTitle = new ReservationTitle(\"\u65b0\u3057\u3044\u30bf\u30a4\u30c8\u30eb\");\n\n        reservation.changeTitle(newTitle);\n\n        assertThat(reservation.getTitle()).isEqualTo(newTitle);\n    }\n\n    @Test\n    void \u958b\u59cb2\u6642\u9593\u524d\u3092\u904e\u304e\u305f\u4e88\u7d04\u306f\u5909\u66f4\u3067\u304d\u306a\u3044() {\n        Reservation reservation = createNearFutureReservation(); // 1\u6642\u9593\u5f8c\u958b\u59cb\n\n        assertThatThrownBy(() -&gt; reservation.changeTitle(new ReservationTitle(\"\u65b0\u30bf\u30a4\u30c8\u30eb\")))\n            .isInstanceOf(IllegalStateException.class)\n            .hasMessageContaining(\"2\u6642\u9593\u524d\u307e\u3067\");\n    }\n\n    @Test\n    void \u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u305f\u4e88\u7d04\u306f\u518d\u30ad\u30e3\u30f3\u30bb\u30eb\u3067\u304d\u306a\u3044() {\n        Reservation reservation = createValidReservation();\n        reservation.cancel(); // \u4e00\u5ea6\u30ad\u30e3\u30f3\u30bb\u30eb\n\n        assertThatThrownBy(reservation::cancel)\n            .isInstanceOf(IllegalStateException.class);\n    }\n}\n</code></pre></p> <p>\u30c9\u30e1\u30a4\u30f3\u30b5\u30fc\u30d3\u30b9\u306e\u30c6\u30b9\u30c8 <pre><code>@ExtendWith(MockitoExtension.class)\nclass ConflictCheckerTest {\n    @Mock\n    private ReservationRepository reservationRepository;\n\n    private ConflictChecker conflictChecker;\n\n    @BeforeEach\n    void setUp() {\n        conflictChecker = new ConflictChecker(reservationRepository);\n    }\n\n    @Test\n    void \u91cd\u8907\u3059\u308b\u4e88\u7d04\u304c\u306a\u3044\u5834\u5408\u306ffalse\u3092\u8fd4\u3059() {\n        // Given\n        RoomId roomId = RoomId.generate();\n        TimeSlot newTimeSlot = createTimeSlot(\"10:00\", \"12:00\");\n\n        when(reservationRepository.findActiveByRoomId(roomId))\n            .thenReturn(Collections.emptyList());\n\n        // When\n        boolean hasConflict = conflictChecker.hasConflict(roomId, newTimeSlot);\n\n        // Then\n        assertThat(hasConflict).isFalse();\n    }\n\n    @Test\n    void \u5b8c\u5168\u306b\u91cd\u8907\u3059\u308b\u5834\u5408\u306ftrue\u3092\u8fd4\u3059() {\n        // Given\n        RoomId roomId = RoomId.generate();\n        TimeSlot newTimeSlot = createTimeSlot(\"10:00\", \"12:00\");\n        Reservation existingReservation = createReservationWithTimeSlot(\"10:00\", \"12:00\");\n\n        when(reservationRepository.findActiveByRoomId(roomId))\n            .thenReturn(List.of(existingReservation));\n\n        // When\n        boolean hasConflict = conflictChecker.hasConflict(roomId, newTimeSlot);\n\n        // Then\n        assertThat(hasConflict).isTrue();\n    }\n\n    @Test\n    void \u90e8\u5206\u7684\u306b\u91cd\u8907\u3059\u308b\u5834\u5408\u306ftrue\u3092\u8fd4\u3059() {\n        // Given\n        RoomId roomId = RoomId.generate();\n        TimeSlot newTimeSlot = createTimeSlot(\"10:00\", \"12:00\");\n        Reservation existingReservation = createReservationWithTimeSlot(\"11:00\", \"13:00\");\n\n        when(reservationRepository.findActiveByRoomId(roomId))\n            .thenReturn(List.of(existingReservation));\n\n        // When\n        boolean hasConflict = conflictChecker.hasConflict(roomId, newTimeSlot);\n\n        // Then\n        assertThat(hasConflict).isTrue();\n    }\n}\n</code></pre></p>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#215","title":"\u30ec\u30d9\u30eb2\uff1a\u7d71\u5408\u30c6\u30b9\u30c8\uff0815%\uff09","text":"<p>\u5bfe\u8c61\uff1a\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\u3068\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u5c64\u306e\u9023\u643a</p> <p>\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306e\u7d71\u5408\u30c6\u30b9\u30c8 <pre><code>@SpringBootTest\n@Testcontainers\n@Transactional\nclass CreateReservationUseCaseIntegrationTest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:15\");\n\n    @Autowired\n    private CreateReservationUseCase createReservationUseCase;\n\n    @Autowired\n    private UserRepository userRepository;\n\n    @Autowired\n    private RoomRepository roomRepository;\n\n    @Autowired\n    private ReservationRepository reservationRepository;\n\n    @Test\n    void \u6709\u52b9\u306a\u6761\u4ef6\u3067\u4e88\u7d04\u3092\u4f5c\u6210\u3067\u304d\u308b() {\n        // Given\n        User user = createAndSaveTestUser();\n        Room room = createAndSaveTestRoom();\n\n        CreateReservationCommand command = CreateReservationCommand.builder()\n            .userId(user.getId())\n            .roomId(room.getId())\n            .title(\"\u5b9a\u4f8b\u4f1a\u8b70\")\n            .purpose(\"\u9031\u6b21\u5b9a\u4f8b\u4f1a\u8b70\")\n            .startTime(LocalDateTime.now().plusDays(1).withHour(10).withMinute(0))\n            .endTime(LocalDateTime.now().plusDays(1).withHour(12).withMinute(0))\n            .build();\n\n        // When\n        ReservationId reservationId = createReservationUseCase.execute(command);\n\n        // Then\n        assertThat(reservationId).isNotNull();\n\n        Optional&lt;Reservation&gt; savedReservation = reservationRepository.findById(reservationId);\n        assertThat(savedReservation).isPresent();\n        assertThat(savedReservation.get().getUserId()).isEqualTo(user.getId());\n        assertThat(savedReservation.get().getRoomId()).isEqualTo(room.getId());\n        assertThat(savedReservation.get().getStatus()).isEqualTo(ReservationStatus.CONFIRMED);\n    }\n\n    @Test\n    void \u91cd\u8907\u3059\u308b\u6642\u9593\u5e2f\u306e\u4e88\u7d04\u306f\u5931\u6557\u3059\u308b() {\n        // Given\n        User user = createAndSaveTestUser();\n        Room room = createAndSaveTestRoom();\n\n        // \u65e2\u5b58\u306e\u4e88\u7d04\u3092\u4f5c\u6210\n        LocalDateTime startTime = LocalDateTime.now().plusDays(1).withHour(10).withMinute(0);\n        LocalDateTime endTime = LocalDateTime.now().plusDays(1).withHour(12).withMinute(0);\n        createAndSaveReservation(user.getId(), room.getId(), startTime, endTime);\n\n        // \u91cd\u8907\u3059\u308b\u65b0\u3057\u3044\u4e88\u7d04\n        CreateReservationCommand command = CreateReservationCommand.builder()\n            .userId(UserId.generate())\n            .roomId(room.getId())\n            .startTime(startTime.plusMinutes(30)) // 30\u5206\u5f8c\u958b\u59cb\uff08\u91cd\u8907\uff09\n            .endTime(endTime.plusMinutes(30))\n            .title(\"\u5225\u306e\u4f1a\u8b70\")\n            .purpose(\"\u5225\u306e\u7528\u9014\")\n            .build();\n\n        // When &amp; Then\n        assertThatThrownBy(() -&gt; createReservationUseCase.execute(command))\n            .isInstanceOf(ReservationConflictException.class);\n    }\n\n    @Test\n    void \u540c\u6642\u4e88\u7d04\u6570\u5236\u9650\u3092\u8d85\u3048\u308b\u5834\u5408\u306f\u5931\u6557\u3059\u308b() {\n        // Given\n        User user = createAndSaveTestUser();\n\n        // \u30e6\u30fc\u30b6\u30fc\u306b\u65e2\u306b3\u4ef6\u306e\u4e88\u7d04\u3092\u4f5c\u6210\uff08\u4e0a\u9650\u307e\u3067\uff09\n        createMaxReservationsForUser(user.getId());\n\n        CreateReservationCommand command = CreateReservationCommand.builder()\n            .userId(user.getId())\n            .roomId(RoomId.generate())\n            .startTime(LocalDateTime.now().plusDays(2).withHour(10).withMinute(0))\n            .endTime(LocalDateTime.now().plusDays(2).withHour(12).withMinute(0))\n            .title(\"4\u4ef6\u76ee\u306e\u4e88\u7d04\")\n            .purpose(\"\u5236\u9650\u8d85\u904e\u30c6\u30b9\u30c8\")\n            .build();\n\n        // When &amp; Then\n        assertThatThrownBy(() -&gt; createReservationUseCase.execute(command))\n            .isInstanceOf(ReservationLimitExceededException.class);\n    }\n}\n</code></pre></p> <p>\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u7d71\u5408\u30c6\u30b9\u30c8 <pre><code>@DataJpaTest\n@Testcontainers\nclass ReservationRepositoryIntegrationTest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:15\");\n\n    @Autowired\n    private TestEntityManager entityManager;\n\n    @Autowired\n    private ReservationRepository reservationRepository;\n\n    @Test\n    void \u30a2\u30af\u30c6\u30a3\u30d6\u306a\u4e88\u7d04\u306e\u307f\u53d6\u5f97\u3055\u308c\u308b() {\n        // Given\n        UserId userId = UserId.generate();\n        RoomId roomId = RoomId.generate();\n\n        Reservation activeReservation = createReservation(userId, roomId, ReservationStatus.CONFIRMED);\n        Reservation cancelledReservation = createReservation(userId, roomId, ReservationStatus.CANCELLED);\n        Reservation completedReservation = createReservation(userId, roomId, ReservationStatus.COMPLETED);\n\n        entityManager.persistAndFlush(activeReservation);\n        entityManager.persistAndFlush(cancelledReservation);\n        entityManager.persistAndFlush(completedReservation);\n\n        // When\n        List&lt;Reservation&gt; activeReservations = reservationRepository.findActiveByUserId(userId);\n\n        // Then\n        assertThat(activeReservations).hasSize(1);\n        assertThat(activeReservations.get(0).getId()).isEqualTo(activeReservation.getId());\n    }\n\n    @Test\n    void \u6307\u5b9a\u65e5\u6642\u7bc4\u56f2\u306e\u4e88\u7d04\u304c\u53d6\u5f97\u3055\u308c\u308b() {\n        // Given\n        RoomId roomId = RoomId.generate();\n        LocalDate targetDate = LocalDate.of(2024, 1, 15);\n\n        Reservation targetDateReservation = createReservationOnDate(roomId, targetDate);\n        Reservation otherDateReservation = createReservationOnDate(roomId, targetDate.plusDays(1));\n\n        entityManager.persistAndFlush(targetDateReservation);\n        entityManager.persistAndFlush(otherDateReservation);\n\n        // When\n        List&lt;Reservation&gt; reservations = reservationRepository.findActiveByRoomIdAndDate(roomId, targetDate);\n\n        // Then\n        assertThat(reservations).hasSize(1);\n        assertThat(reservations.get(0).getId()).isEqualTo(targetDateReservation.getId());\n    }\n}\n</code></pre></p>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#3e2e5","title":"\u30ec\u30d9\u30eb3\uff1aE2E\u30c6\u30b9\u30c8\uff085%\uff09","text":"<p>\u5bfe\u8c61\uff1a\u30b7\u30b9\u30c6\u30e0\u5168\u4f53\u306e\u30e6\u30fc\u30b6\u30fc\u30b7\u30ca\u30ea\u30aa</p> <p>API\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306eE2E\u30c6\u30b9\u30c8 <pre><code>@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n@Testcontainers\n@AutoConfigureMockMvc\nclass ReservationApiE2ETest {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:15\");\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @Autowired\n    private ObjectMapper objectMapper;\n\n    @Test\n    @WithMockUser(roles = \"MEMBER\")\n    void \u4e88\u7d04\u4f5c\u6210\u304b\u3089\u78ba\u8a8d\u307e\u3067\u306e\u4e00\u9023\u306e\u6d41\u308c() throws Exception {\n        // Given - \u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u3092\u6e96\u5099\n        setupTestData();\n\n        // When 1 - \u5229\u7528\u53ef\u80fd\u306a\u4f1a\u8b70\u5ba4\u3092\u691c\u7d22\n        MvcResult searchResult = mockMvc.perform(get(\"/api/rooms/search\")\n                .param(\"date\", \"2024-01-15\")\n                .param(\"startTime\", \"10:00\")\n                .param(\"endTime\", \"12:00\")\n                .param(\"minCapacity\", \"5\"))\n            .andExpect(status().isOk())\n            .andReturn();\n\n        List&lt;RoomSearchResult&gt; rooms = objectMapper.readValue(\n            searchResult.getResponse().getContentAsString(), \n            new TypeReference&lt;List&lt;RoomSearchResult&gt;&gt;() {});\n        assertThat(rooms).isNotEmpty();\n\n        // When 2 - \u4f1a\u8b70\u5ba4\u3092\u4e88\u7d04\n        String roomId = rooms.get(0).getRoomId();\n        CreateReservationRequest request = CreateReservationRequest.builder()\n            .roomId(roomId)\n            .title(\"\u5b9a\u4f8b\u4f1a\u8b70\")\n            .purpose(\"\u9031\u6b21\u5b9a\u4f8b\u4f1a\u8b70\")\n            .startTime(LocalDateTime.of(2024, 1, 15, 10, 0))\n            .endTime(LocalDateTime.of(2024, 1, 15, 12, 0))\n            .build();\n\n        MvcResult createResult = mockMvc.perform(post(\"/api/reservations\")\n                .contentType(MediaType.APPLICATION_JSON)\n                .content(objectMapper.writeValueAsString(request)))\n            .andExpect(status().isCreated())\n            .andReturn();\n\n        ReservationResponse createdReservation = objectMapper.readValue(\n            createResult.getResponse().getContentAsString(), \n            ReservationResponse.class);\n\n        // When 3 - \u4f5c\u6210\u3057\u305f\u4e88\u7d04\u3092\u78ba\u8a8d\n        mockMvc.perform(get(\"/api/reservations/\" + createdReservation.getReservationId()))\n            .andExpect(status().isOk())\n            .andExpect(jsonPath(\"$.title\").value(\"\u5b9a\u4f8b\u4f1a\u8b70\"))\n            .andExpect(jsonPath(\"$.status\").value(\"CONFIRMED\"))\n            .andExpect(jsonPath(\"$.roomId\").value(roomId));\n\n        // When 4 - \u30e6\u30fc\u30b6\u30fc\u306e\u4e88\u7d04\u4e00\u89a7\u3092\u78ba\u8a8d\n        mockMvc.perform(get(\"/api/reservations/my\"))\n            .andExpected(status().isOk())\n            .andExpect(jsonPath(\"$\").isArray())\n            .andExpect(jsonPath(\"$[0].reservationId\").value(createdReservation.getReservationId()));\n    }\n\n    @Test\n    @WithMockUser(roles = \"MEMBER\")\n    void \u4e88\u7d04\u30ad\u30e3\u30f3\u30bb\u30eb\u306e\u4e00\u9023\u306e\u6d41\u308c() throws Exception {\n        // Given - \u4e8b\u524d\u306b\u4e88\u7d04\u3092\u4f5c\u6210\n        String reservationId = createTestReservation();\n\n        // When 1 - \u4e88\u7d04\u3092\u30ad\u30e3\u30f3\u30bb\u30eb\n        mockMvc.perform(delete(\"/api/reservations/\" + reservationId))\n            .andExpected(status().isNoContent());\n\n        // Then - \u30ad\u30e3\u30f3\u30bb\u30eb\u72b6\u614b\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\n        mockMvc.perform(get(\"/api/reservations/\" + reservationId))\n            .andExpected(status().isOk())\n            .andExpect(jsonPath(\"$.status\").value(\"CANCELLED\"));\n    }\n\n    @Test\n    @WithMockUser(roles = \"MEMBER\")\n    void \u91cd\u8907\u4e88\u7d04\u306e\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0() throws Exception {\n        // Given - \u65e2\u5b58\u306e\u4e88\u7d04\u3092\u4f5c\u6210\n        createTestReservationAt(LocalDateTime.of(2024, 1, 15, 10, 0));\n\n        // When - \u91cd\u8907\u3059\u308b\u6642\u9593\u3067\u4e88\u7d04\u3092\u8a66\u884c\n        CreateReservationRequest request = CreateReservationRequest.builder()\n            .roomId(\"test-room-id\")\n            .title(\"\u91cd\u8907\u3059\u308b\u4f1a\u8b70\")\n            .purpose(\"\u91cd\u8907\u30c6\u30b9\u30c8\")\n            .startTime(LocalDateTime.of(2024, 1, 15, 11, 0)) // 1\u6642\u9593\u5f8c\u958b\u59cb\uff08\u91cd\u8907\uff09\n            .endTime(LocalDateTime.of(2024, 1, 15, 13, 0))\n            .build();\n\n        // Then - \u9069\u5207\u306a\u30a8\u30e9\u30fc\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u8fd4\u3055\u308c\u308b\n        mockMvc.perform(post(\"/api/reservations\")\n                .contentType(MediaType.APPLICATION_JSON)\n                .content(objectMapper.writeValueAsString(request)))\n            .andExpect(status().isConflict())\n            .andExpect(jsonPath(\"$.error\").value(\"RESERVATION_CONFLICT\"))\n            .andExpect(jsonPath(\"$.message\").value(\"\u6307\u5b9a\u6642\u9593\u306f\u65e2\u306b\u4e88\u7d04\u3055\u308c\u3066\u3044\u307e\u3059\"));\n    }\n}\n</code></pre></p>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_21","title":"\u30c6\u30b9\u30c8\u5b9f\u884c\u6226\u7565","text":""},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#ci","title":"\u7d99\u7d9a\u7684\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff08CI\uff09","text":""},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_22","title":"\u30c6\u30b9\u30c8\u5b9f\u884c\u6642\u9593\u306e\u76ee\u6a19","text":"<ul> <li>\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8: 30\u79d2\u4ee5\u5185</li> <li>\u7d71\u5408\u30c6\u30b9\u30c8: 2\u5206\u4ee5\u5185  </li> <li>E2E\u30c6\u30b9\u30c8: 10\u5206\u4ee5\u5185</li> <li>\u5168\u30c6\u30b9\u30c8: 15\u5206\u4ee5\u5185</li> </ul>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_23","title":"\u4e26\u5217\u5b9f\u884c\u6226\u7565","text":"<pre><code># .github/workflows/test.yml\nname: Test\non: [push, pull_request]\n\njobs:\n  unit-tests:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      - uses: actions/setup-java@v3\n        with:\n          java-version: '21'\n      - run: ./mvnw test -Dtest=\"**/*Test\" # \u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u306e\u307f\n\n  integration-tests:\n    runs-on: ubuntu-latest\n    needs: unit-tests\n    steps:\n      - uses: actions/checkout@v3\n      - uses: actions/setup-java@v3\n        with:\n          java-version: '21'\n      - run: ./mvnw test -Dtest=\"**/*IntegrationTest\"\n\n  e2e-tests:\n    runs-on: ubuntu-latest\n    needs: integration-tests\n    steps:\n      - uses: actions/checkout@v3\n      - uses: actions/setup-java@v3\n        with:\n          java-version: '21'\n      - run: ./mvnw test -Dtest=\"**/*E2ETest\"\n</code></pre>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_24","title":"\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u7ba1\u7406","text":""},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_25","title":"\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u6226\u7565","text":""},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_26","title":"\u30c6\u30b9\u30c8\u30d5\u30a3\u30af\u30b9\u30c1\u30e3","text":"<p>Object Mother \u30d1\u30bf\u30fc\u30f3 <pre><code>public class ReservationFixture {\n\n    public static Reservation validReservation() {\n        return Reservation.create(\n            UserFixture.defaultUserId(),\n            RoomFixture.defaultRoomId(),\n            new ReservationTitle(\"\u5b9a\u4f8b\u4f1a\u8b70\"),\n            new Purpose(\"\u9031\u6b21\u5b9a\u4f8b\u4f1a\u8b70\"),\n            TimeSlotFixture.tomorrowMorning()\n        );\n    }\n\n    public static Reservation reservationStartingAt(LocalDateTime startTime) {\n        return Reservation.create(\n            UserFixture.defaultUserId(),\n            RoomFixture.defaultRoomId(),\n            new ReservationTitle(\"\u4f1a\u8b70\"),\n            new Purpose(\"\u30c6\u30b9\u30c8\u7528\"),\n            new TimeSlot(startTime, startTime.plusHours(2))\n        );\n    }\n\n    public static Reservation pastReservation() {\n        return Reservation.create(\n            UserFixture.defaultUserId(),\n            RoomFixture.defaultRoomId(),\n            new ReservationTitle(\"\u904e\u53bb\u306e\u4f1a\u8b70\"),\n            new Purpose(\"\u904e\u53bb\u306e\u30c6\u30b9\u30c8\"),\n            TimeSlotFixture.yesterday()\n        );\n    }\n}\n\npublic class TimeSlotFixture {\n\n    public static TimeSlot tomorrowMorning() {\n        LocalDateTime start = LocalDateTime.now().plusDays(1).withHour(10).withMinute(0);\n        return new TimeSlot(start, start.plusHours(2));\n    }\n\n    public static TimeSlot yesterday() {\n        LocalDateTime start = LocalDateTime.now().minusDays(1).withHour(10).withMinute(0);\n        return new TimeSlot(start, start.plusHours(2));\n    }\n\n    public static TimeSlot nextWeek() {\n        LocalDateTime start = LocalDateTime.now().plusWeeks(1).withHour(14).withMinute(0);\n        return new TimeSlot(start, start.plusHours(3));\n    }\n}\n</code></pre></p>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_27","title":"\u30c6\u30b9\u30c8\u30d3\u30eb\u30c0\u30fc\u30d1\u30bf\u30fc\u30f3","text":"<pre><code>public class ReservationTestDataBuilder {\n    private UserId userId = UserFixture.defaultUserId();\n    private RoomId roomId = RoomFixture.defaultRoomId();\n    private ReservationTitle title = new ReservationTitle(\"\u30c6\u30b9\u30c8\u4f1a\u8b70\");\n    private Purpose purpose = new Purpose(\"\u30c6\u30b9\u30c8\u7528\u9014\");\n    private TimeSlot timeSlot = TimeSlotFixture.tomorrowMorning();\n\n    public ReservationTestDataBuilder withUserId(UserId userId) {\n        this.userId = userId;\n        return this;\n    }\n\n    public ReservationTestDataBuilder withRoomId(RoomId roomId) {\n        this.roomId = roomId;\n        return this;\n    }\n\n    public ReservationTestDataBuilder withTitle(String title) {\n        this.title = new ReservationTitle(title);\n        return this;\n    }\n\n    public ReservationTestDataBuilder withTimeSlot(TimeSlot timeSlot) {\n        this.timeSlot = timeSlot;\n        return this;\n    }\n\n    public ReservationTestDataBuilder startingAt(LocalDateTime startTime) {\n        this.timeSlot = new TimeSlot(startTime, startTime.plusHours(2));\n        return this;\n    }\n\n    public Reservation build() {\n        return Reservation.create(userId, roomId, title, purpose, timeSlot);\n    }\n}\n\n// \u4f7f\u7528\u4f8b\n@Test\nvoid \u7279\u5b9a\u306e\u6761\u4ef6\u3067\u306e\u30c6\u30b9\u30c8() {\n    Reservation reservation = new ReservationTestDataBuilder()\n        .withTitle(\"\u91cd\u8981\u306a\u4f1a\u8b70\")\n        .startingAt(LocalDateTime.of(2024, 1, 15, 14, 0))\n        .build();\n\n    // \u30c6\u30b9\u30c8\u5b9f\u884c...\n}\n</code></pre>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_28","title":"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30c6\u30b9\u30c8\u3067\u306e\u30c7\u30fc\u30bf\u7ba1\u7406","text":""},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#testcontainers","title":"Testcontainers \u306b\u3088\u308b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u74b0\u5883","text":"<pre><code>@SpringBootTest\n@Testcontainers\npublic abstract class DatabaseTestBase {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(\"postgres:15\")\n        .withDatabaseName(\"testdb\")\n        .withUsername(\"test\")\n        .withPassword(\"test\")\n        .withInitScript(\"test-schema.sql\");\n\n    @DynamicPropertySource\n    static void configureProperties(DynamicPropertyRegistry registry) {\n        registry.add(\"spring.datasource.url\", postgres::getJdbcUrl);\n        registry.add(\"spring.datasource.username\", postgres::getUsername);\n        registry.add(\"spring.datasource.password\", postgres::getPassword);\n    }\n}\n</code></pre>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_29","title":"\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30ca\u30eb\u30c6\u30b9\u30c8","text":"<pre><code>@SpringBootTest\n@Transactional\n@Rollback\nclass TransactionalIntegrationTest extends DatabaseTestBase {\n\n    @Test\n    void \u30c7\u30fc\u30bf\u5909\u66f4\u30c6\u30b9\u30c8() {\n        // \u30c6\u30b9\u30c8\u5185\u3067\u306e\u30c7\u30fc\u30bf\u5909\u66f4\u306f\u81ea\u52d5\u3067\u30ed\u30fc\u30eb\u30d0\u30c3\u30af\u3055\u308c\u308b\n        User user = new User(/* ... */);\n        userRepository.save(user);\n\n        // \u30c6\u30b9\u30c8\u5b9f\u884c...\n    }\n}\n</code></pre>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_30","title":"\u30e2\u30c3\u30af\u3068\u30b9\u30bf\u30d6\u306e\u6d3b\u7528","text":""},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_31","title":"\u30e2\u30c3\u30ad\u30f3\u30b0\u6226\u7565","text":""},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_32","title":"\u4f9d\u5b58\u95a2\u4fc2\u306e\u5206\u96e2","text":"<pre><code>@ExtendWith(MockitoExtension.class)\nclass CreateReservationUseCaseTest {\n\n    @Mock private UserRepository userRepository;\n    @Mock private RoomRepository roomRepository;\n    @Mock private ReservationRepository reservationRepository;\n    @Mock private ConflictChecker conflictChecker;\n    @Mock private ReservationLimitChecker limitChecker;\n\n    @InjectMocks\n    private CreateReservationService useCase;\n\n    @Test\n    void \u6b63\u5e38\u306a\u4e88\u7d04\u4f5c\u6210() {\n        // Given\n        User user = UserFixture.activeMember();\n        Room room = RoomFixture.availableRoom();\n\n        when(userRepository.findById(any(UserId.class))).thenReturn(Optional.of(user));\n        when(roomRepository.findById(any(RoomId.class))).thenReturn(Optional.of(room));\n        when(conflictChecker.hasConflict(any(), any())).thenReturn(false);\n        when(limitChecker.canUserMakeReservation(any())).thenReturn(true);\n\n        // When\n        ReservationId result = useCase.execute(createValidCommand());\n\n        // Then\n        assertThat(result).isNotNull();\n        verify(reservationRepository).save(any(Reservation.class));\n    }\n}\n</code></pre>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_33","title":"\u5916\u90e8\u30b7\u30b9\u30c6\u30e0\u306e\u30e2\u30c3\u30af","text":"<pre><code>@TestConfiguration\npublic class TestExternalSystemConfig {\n\n    @Bean\n    @Primary\n    public EmailService mockEmailService() {\n        return Mockito.mock(EmailService.class);\n    }\n\n    @Bean  \n    @Primary\n    public NotificationService mockNotificationService() {\n        return Mockito.mock(NotificationService.class);\n    }\n}\n</code></pre>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_34","title":"\u6027\u80fd\u30c6\u30b9\u30c8","text":""},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_35","title":"\u6027\u80fd\u30c6\u30b9\u30c8\u6226\u7565","text":""},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#jmeter","title":"JMeter \u306b\u3088\u308b\u8ca0\u8377\u30c6\u30b9\u30c8","text":"<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;jmeterTestPlan version=\"1.2\"&gt;\n  &lt;TestPlan testname=\"\u4f1a\u8b70\u5ba4\u4e88\u7d04\u30b7\u30b9\u30c6\u30e0\u8ca0\u8377\u30c6\u30b9\u30c8\"&gt;\n    &lt;ThreadGroup testname=\"\u4e88\u7d04\u4f5c\u6210\u8ca0\u8377\u30c6\u30b9\u30c8\"&gt;\n      &lt;stringProp name=\"ThreadGroup.num_threads\"&gt;100&lt;/stringProp&gt;\n      &lt;stringProp name=\"ThreadGroup.ramp_time\"&gt;60&lt;/stringProp&gt;\n      &lt;stringProp name=\"ThreadGroup.duration\"&gt;300&lt;/stringProp&gt;\n\n      &lt;HTTPSamplerProxy testname=\"\u4e88\u7d04\u4f5c\u6210API\"&gt;\n        &lt;stringProp name=\"HTTPSampler.path\"&gt;/api/reservations&lt;/stringProp&gt;\n        &lt;stringProp name=\"HTTPSampler.method\"&gt;POST&lt;/stringProp&gt;\n        &lt;elementProp name=\"HTTPsampler.Arguments\" elementType=\"Arguments\"&gt;\n          &lt;collectionProp&gt;\n            &lt;elementProp name=\"\" elementType=\"HTTPArgument\"&gt;\n              &lt;stringProp name=\"Argument.value\"&gt;{\n                \"roomId\": \"${roomId}\",\n                \"title\": \"\u8ca0\u8377\u30c6\u30b9\u30c8\u4e88\u7d04\",\n                \"startTime\": \"${startTime}\",\n                \"endTime\": \"${endTime}\"\n              }&lt;/stringProp&gt;\n            &lt;/elementProp&gt;\n          &lt;/collectionProp&gt;\n        &lt;/elementProp&gt;\n      &lt;/HTTPSamplerProxy&gt;\n    &lt;/ThreadGroup&gt;\n  &lt;/TestPlan&gt;\n&lt;/jmeterTestPlan&gt;\n</code></pre>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#junit","title":"JUnit \u306b\u3088\u308b\u6027\u80fd\u30c6\u30b9\u30c8","text":"<pre><code>@Test\n@Timeout(value = 100, unit = TimeUnit.MILLISECONDS)\nvoid \u91cd\u8907\u30c1\u30a7\u30c3\u30af\u306f100ms\u4ee5\u5185\u306b\u5b8c\u4e86\u3059\u308b() {\n    // Given - \u5927\u91cf\u306e\u4e88\u7d04\u30c7\u30fc\u30bf\u3092\u6e96\u5099\n    RoomId roomId = RoomId.generate();\n    setupLargeReservationDataset(roomId, 1000);\n\n    // When\n    TimeSlot newTimeSlot = TimeSlotFixture.tomorrowMorning();\n    boolean hasConflict = conflictChecker.hasConflict(roomId, newTimeSlot);\n\n    // Then - \u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306b\u3088\u308a100ms\u4ee5\u5185\u306b\u5b8c\u4e86\u3059\u308b\u3053\u3068\u3092\u691c\u8a3c\n    assertThat(hasConflict).isFalse();\n}\n\n@ParameterizedTest\n@ValueSource(ints = {10, 50, 100, 500, 1000})\nvoid \u4e88\u7d04\u6570\u306b\u95a2\u4fc2\u306a\u304f\u691c\u7d22\u6027\u80fd\u304c\u4e00\u5b9a(int reservationCount) {\n    // Given\n    RoomId roomId = RoomId.generate();\n    setupReservationDataset(roomId, reservationCount);\n\n    // When - \u5b9f\u884c\u6642\u9593\u3092\u8a08\u6e2c\n    long startTime = System.nanoTime();\n    List&lt;Reservation&gt; results = reservationRepository.findActiveByRoomId(roomId);\n    long endTime = System.nanoTime();\n\n    // Then - \u5b9f\u884c\u6642\u9593\u304c\u4e88\u7d04\u6570\u306b\u6bd4\u4f8b\u3057\u3066\u5897\u52a0\u3057\u306a\u3044\u3053\u3068\u3092\u691c\u8a3c\n    long executionTimeMs = (endTime - startTime) / 1_000_000;\n    assertThat(executionTimeMs).isLessThan(50); // 50ms\u4ee5\u5185\n    assertThat(results).hasSize(reservationCount);\n}\n</code></pre>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_36","title":"\u30ab\u30d0\u30ec\u30c3\u30b8\u6226\u7565","text":""},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_37","title":"\u30b3\u30fc\u30c9\u30ab\u30d0\u30ec\u30c3\u30b8\u76ee\u6a19","text":"<ul> <li>\u30c9\u30e1\u30a4\u30f3\u5c64: 90%\u4ee5\u4e0a</li> <li>\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64: 85%\u4ee5\u4e0a  </li> <li>\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u5c64: 70%\u4ee5\u4e0a</li> <li>\u5168\u4f53: 80%\u4ee5\u4e0a</li> </ul>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#jacoco","title":"JaCoCo\u8a2d\u5b9a","text":"<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n    &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;0.8.8&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;prepare-agent&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n        &lt;execution&gt;\n            &lt;id&gt;report&lt;/id&gt;\n            &lt;phase&gt;test&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;report&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n        &lt;execution&gt;\n            &lt;id&gt;check&lt;/id&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;check&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;rules&gt;\n                    &lt;rule&gt;\n                        &lt;element&gt;PACKAGE&lt;/element&gt;\n                        &lt;limits&gt;\n                            &lt;limit&gt;\n                                &lt;counter&gt;LINE&lt;/counter&gt;\n                                &lt;value&gt;COVEREDRATIO&lt;/value&gt;\n                                &lt;minimum&gt;0.80&lt;/minimum&gt;\n                            &lt;/limit&gt;\n                        &lt;/limits&gt;\n                    &lt;/rule&gt;\n                    &lt;rule&gt;\n                        &lt;element&gt;CLASS&lt;/element&gt;\n                        &lt;includes&gt;\n                            &lt;include&gt;com.example.domain.*&lt;/include&gt;\n                        &lt;/includes&gt;\n                        &lt;limits&gt;\n                            &lt;limit&gt;\n                                &lt;counter&gt;LINE&lt;/counter&gt;\n                                &lt;value&gt;COVEREDRATIO&lt;/value&gt;\n                                &lt;minimum&gt;0.90&lt;/minimum&gt;\n                            &lt;/limit&gt;\n                        &lt;/limits&gt;\n                    &lt;/rule&gt;\n                &lt;/rules&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#mutation-testing","title":"\u5909\u7570\u30c6\u30b9\u30c8\uff08Mutation Testing\uff09","text":"<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.pitest&lt;/groupId&gt;\n    &lt;artifactId&gt;pitest-maven&lt;/artifactId&gt;\n    &lt;version&gt;1.9.0&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;targetClasses&gt;\n            &lt;param&gt;com.example.domain.*&lt;/param&gt;\n        &lt;/targetClasses&gt;\n        &lt;targetTests&gt;\n            &lt;param&gt;com.example.domain.*Test&lt;/param&gt;\n        &lt;/targetTests&gt;\n        &lt;mutators&gt;\n            &lt;mutator&gt;STRONGER&lt;/mutator&gt;\n        &lt;/mutators&gt;\n        &lt;mutationThreshold&gt;75&lt;/mutationThreshold&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_38","title":"\u307e\u3068\u3081","text":""},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_39","title":"\u30c6\u30b9\u30c8\u6226\u7565\u306e\u8981\u70b9","text":"<ol> <li>\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u5fdc\u3058\u305f\u9069\u5207\u306a\u6226\u7565\u9078\u629e</li> <li>\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb \u2192 \u30d4\u30e9\u30df\u30c3\u30c9\u5f62\u30c6\u30b9\u30c8</li> <li>\u30a2\u30af\u30c6\u30a3\u30d6\u30ec\u30b3\u30fc\u30c9 \u2192 \u30c0\u30a4\u30e4\u30e2\u30f3\u30c9\u5f62\u30c6\u30b9\u30c8</li> <li> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30b9\u30af\u30ea\u30d7\u30c8 \u2192 \u9006\u30d4\u30e9\u30df\u30c3\u30c9\u5f62\u30c6\u30b9\u30c8</p> </li> <li> <p>TDD \u306b\u3088\u308b\u54c1\u8cea\u5411\u4e0a</p> </li> <li>Red-Green-Refactor \u30b5\u30a4\u30af\u30eb</li> <li>\u30c6\u30b9\u30c8\u30d5\u30a1\u30fc\u30b9\u30c8\u306b\u3088\u308b\u8a2d\u8a08\u6539\u5584</li> <li> <p>\u7d99\u7d9a\u7684\u306a\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0</p> </li> <li> <p>\u52b9\u7387\u7684\u306a\u30c6\u30b9\u30c8\u5b9f\u884c</p> </li> <li>\u9ad8\u901f\u306a\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u30eb\u30fc\u30d7</li> <li>\u4e26\u5217\u5b9f\u884c\u306b\u3088\u308b\u6642\u9593\u77ed\u7e2e</li> <li> <p>CI/CD \u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u3068\u306e\u7d71\u5408</p> </li> <li> <p>\u9069\u5207\u306a\u30c6\u30b9\u30c8\u7bc4\u56f2</p> </li> <li>\u30c9\u30e1\u30a4\u30f3\u5c64\u3078\u306e\u91cd\u70b9\u7684\u306a\u6295\u8cc7</li> <li>\u5916\u90e8\u4f9d\u5b58\u306e\u9069\u5207\u306a\u5206\u96e2</li> <li>\u5b9f\u7528\u7684\u306a\u30ab\u30d0\u30ec\u30c3\u30b8\u76ee\u6a19</li> </ol>"},{"location":"reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/#_40","title":"\u7d99\u7d9a\u7684\u6539\u5584","text":"<p>\u30c6\u30b9\u30c8\u6226\u7565\u306f\u7d99\u7d9a\u7684\u306b\u898b\u76f4\u3057\u3001\u6539\u5584\u3057\u3066\u3044\u304f\u3002\u4ee5\u4e0b\u306e\u6307\u6a19\u3067\u30c6\u30b9\u30c8\u306e\u52b9\u679c\u3092\u6e2c\u5b9a\uff1a</p> <ul> <li>\u6b20\u9665\u691c\u51fa\u7387: \u30c6\u30b9\u30c8\u3067\u767a\u898b\u3067\u304d\u308b\u6b20\u9665\u306e\u5272\u5408</li> <li>\u56de\u5e30\u30c6\u30b9\u30c8\u52b9\u7387: \u30ea\u30b0\u30ec\u30c3\u30b7\u30e7\u30f3\u306e\u65e9\u671f\u767a\u898b</li> <li>\u958b\u767a\u901f\u5ea6: \u30c6\u30b9\u30c8\u306b\u3088\u308b\u958b\u767a\u30b9\u30d4\u30fc\u30c9\u3078\u306e\u5f71\u97ff</li> <li>\u4fdd\u5b88\u6027: \u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u81ea\u4f53\u306e\u4fdd\u5b88\u3057\u3084\u3059\u3055</li> </ul> <p>\u5909\u66f4\u3092\u697d\u306b\u5b89\u5168\u306b\u3067\u304d\u3066\u5f79\u306b\u7acb\u3064\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u5b9f\u73fe\u3059\u308b\u305f\u3081\u3001\u30c6\u30b9\u30c8\u306f\u54c1\u8cea\u4fdd\u8a3c\u306e\u624b\u6bb5\u3067\u3042\u308b\u3068\u540c\u6642\u306b\u3001\u8a2d\u8a08\u6539\u5584\u306e\u30c4\u30fc\u30eb\u3068\u3057\u3066\u6d3b\u7528\u3059\u308b\u3002</p>"},{"location":"reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/","title":"\u30c7\u30fc\u30bf\u30e2\u30c7\u30eb\u8a2d\u8a08\u30ac\u30a4\u30c9","text":""},{"location":"reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_2","title":"\u306f\u3058\u3081\u306b","text":"<p>\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u57fa\u76e4\u3068\u306a\u308b\u91cd\u8981\u306a\u6d3b\u52d5\u3067\u3059\u3002\u3053\u306e\u30ac\u30a4\u30c9\u3067\u306f\u3001\u30c6\u30b9\u30c8\u99c6\u52d5\u958b\u767a\uff08TDD\uff09\u306e\u539f\u5247\u3092\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\u306b\u5fdc\u7528\u3057\u3001\u8981\u6c42\u306e\u5909\u5316\u306b\u67d4\u8edf\u306b\u5bfe\u5fdc\u3067\u304d\u308b\u5805\u7262\u306a\u30c7\u30fc\u30bf\u30e2\u30c7\u30eb\u3092\u6bb5\u968e\u7684\u306b\u69cb\u7bc9\u3059\u308b\u65b9\u6cd5\u8ad6\u3092\u8aac\u660e\u3057\u307e\u3059\u3002</p> <p>\u5f93\u6765\u306e\u300c\u6700\u521d\u306b\u5b8c\u74a7\u306aER\u56f3\u3092\u63cf\u304f\u300d\u30a2\u30d7\u30ed\u30fc\u30c1\u3067\u306f\u306a\u304f\u3001\u5c0f\u3055\u306a\u8981\u6c42\u304b\u3089\u59cb\u3081\u3066\u5f90\u3005\u306b\u30c7\u30fc\u30bf\u30e2\u30c7\u30eb\u3092\u80b2\u3066\u3066\u3044\u304f\u5b9f\u8df5\u7684\u306a\u30a2\u30d7\u30ed\u30fc\u30c1\u3092\u63a8\u5968\u3057\u307e\u3059\u3002</p>"},{"location":"reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#tdd","title":"TDD\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\u306e\u57fa\u672c\u539f\u5247","text":""},{"location":"reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#tdd_1","title":"\u306a\u305cTDD\u3067\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\uff1f","text":"<ol> <li>\u8981\u6c42\u304c\u660e\u78ba\u306b\u306a\u308b: \u30c6\u30b9\u30c8\u3068\u3044\u3046\u5f62\u3067\u3001\u305d\u306e\u6642\u70b9\u3067\u5fc5\u8981\u306a\u30c7\u30fc\u30bf\u8981\u6c42\u3092\u5177\u4f53\u7684\u306b\u5b9a\u7fa9\u3057\u307e\u3059</li> <li>\u8a2d\u8a08\u304c\u30b7\u30f3\u30d7\u30eb\u306b\u4fdd\u305f\u308c\u308b: \u4eca\u5fc5\u8981\u306a\u3053\u3068\u3060\u3051\u3092\u5b9f\u88c5\u3059\u308b\u305f\u3081\u3001\u904e\u5270\u306a\u8a2d\u8a08\u3092\u9632\u304e\u307e\u3059</li> <li>\u5909\u66f4\u306b\u5f37\u304f\u306a\u308b: \u30c6\u30b9\u30c8\u304c\u65e2\u5b58\u306e\u8981\u6c42\u3092\u5b88\u308b\u305f\u3081\u3001\u5b89\u5fc3\u3057\u3066\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\uff08\u8a2d\u8a08\u6539\u5584\uff09\u3092\u884c\u3048\u307e\u3059</li> </ol>"},{"location":"reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#tdd_2","title":"TDD\u30b5\u30a4\u30af\u30eb","text":""},{"location":"reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_3","title":"\u8a2d\u8a08\u30d7\u30ed\u30bb\u30b9","text":""},{"location":"reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#1-red","title":"1. \u30ec\u30c3\u30c9\uff08Red\uff09\uff1a\u8981\u6c42\u3092\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3067\u8868\u73fe","text":"<p>\u307e\u305a\u3001\u300c\u3069\u306e\u3088\u3046\u306a\u30c7\u30fc\u30bf\u3092\u3001\u3069\u306e\u3088\u3046\u306b\u6271\u3044\u305f\u3044\u304b\u300d\u3092\u5177\u4f53\u7684\u306a\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3067\u793a\u3057\u307e\u3059\u3002</p> <pre><code>describe(\"\u90e8\u9580\u30de\u30b9\u30bf\", () =&gt; {\n  test(\"\u90e8\u9580\u3092\u767b\u9332\u3067\u304d\u308b\", async () =&gt; {\n    // 1. \u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\n    await prisma.department.create({ data: departments[0] });\n    // 2. \u53d6\u5f97\u3057\u305f\u30c7\u30fc\u30bf\u304c\u671f\u5f85\u901a\u308a\u304b\u691c\u8a3c\n    const result = await prisma.department.findMany();\n    expect(result).toEqual(departments);\n  });\n\n  test(\"\u90e8\u9580\u3092\u66f4\u65b0\u3067\u304d\u308b\", async () =&gt; {\n    const expected = { ...departments[0], name: \"\u66f4\u65b0\u90e8\u7f72\" };\n    await prisma.department.update({\n      where: { deptCode_startDate: { \n        deptCode: departments[0].deptCode, \n        startDate: departments[0].startDate \n      }},\n      data: { name: \"\u66f4\u65b0\u90e8\u7f72\" },\n    });\n    const result = await prisma.department.findUnique({ \n      where: { deptCode_startDate: { \n        deptCode: departments[0].deptCode, \n        startDate: departments[0].startDate \n      }}\n    });\n    expect(result).toEqual(expected);\n  });\n});\n</code></pre>"},{"location":"reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#2-green","title":"2. \u30b0\u30ea\u30fc\u30f3\uff08Green\uff09\uff1a\u6700\u5c0f\u9650\u306e\u30b9\u30ad\u30fc\u30de\u5b9a\u7fa9","text":"<p>\u30c6\u30b9\u30c8\u3092\u30d1\u30b9\u3055\u305b\u308b\u305f\u3081\u306e\u6700\u5c0f\u9650\u306e\u30b9\u30ad\u30fc\u30de\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002</p> <pre><code>model Department {\n  deptCode   String    @map(\"\u90e8\u9580\u30b3\u30fc\u30c9\") @db.VarChar(6)\n  startDate  DateTime  @default(dbgenerated(\"CURRENT_DATE\")) @map(\"\u958b\u59cb\u65e5\") @db.Timestamp(6)\n  endDate    DateTime? @default(dbgenerated(\"'2100-12-31 00:00:00'::timestamp without time zone\")) @map(\"\u7d42\u4e86\u65e5\") @db.Timestamp(6)\n  name       String?   @map(\"\u90e8\u9580\u540d\") @db.VarChar(40)\n  layer      Int       @default(0) @map(\"\u7d44\u7e54\u968e\u5c64\")\n  psth       String    @map(\"\u90e8\u9580\u30d1\u30b9\") @db.VarChar(100)\n  lowestType Int       @default(0) @map(\"\u6700\u4e0b\u5c64\u533a\u5206\")\n  slitYn     Int       @default(1) @map(\"\u4f1d\u7968\u5165\u529b\u53ef\u5426\")\n  createDate DateTime  @default(dbgenerated(\"CURRENT_DATE\")) @map(\"\u4f5c\u6210\u65e5\u6642\") @db.Timestamp(6)\n  creator    String?   @map(\"\u4f5c\u6210\u8005\u540d\") @db.VarChar(12)\n  updateDate DateTime  @default(dbgenerated(\"CURRENT_DATE\")) @map(\"\u66f4\u65b0\u65e5\u6642\") @db.Timestamp(6)\n  updater    String?   @map(\"\u66f4\u65b0\u8005\u540d\") @db.VarChar(12)\n\n  // \u5c65\u6b74\u7ba1\u7406\u306e\u305f\u3081\u3001\u90e8\u9580\u30b3\u30fc\u30c9\u3068\u9069\u7528\u958b\u59cb\u65e5\u3067\u8907\u5408\u4e3b\u30ad\u30fc\n  @@id([deptCode, startDate], map: \"pk_department\")\n  @@map(\"\u90e8\u9580\u30de\u30b9\u30bf\")\n}\n</code></pre>"},{"location":"reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#3-refactorer","title":"3. \u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\uff08Refactor\uff09\uff1aER\u56f3\u3067\u8a2d\u8a08\u3092\u53ef\u8996\u5316\u30fb\u6539\u5584","text":"<p>\u30c6\u30b9\u30c8\u304c\u30d1\u30b9\u3057\u305f\u72b6\u614b\u3067\u3001\u8a2d\u8a08\u3092ER\u56f3\u3067\u53ef\u8996\u5316\u3057\u3001\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u6539\u5584\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_4","title":"\u8a2d\u8a08\u30d1\u30bf\u30fc\u30f3\u3068\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","text":""},{"location":"reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#1","title":"1. \u30de\u30b9\u30bf\u30c7\u30fc\u30bf\u306e\u8a2d\u8a08","text":""},{"location":"reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_5","title":"\u5c65\u6b74\u7ba1\u7406","text":"<ul> <li>\u7d44\u7e54\u5909\u66f4\u306a\u3069\u3067\u540c\u3058\u30b3\u30fc\u30c9\u3067\u3082\u671f\u9593\u304c\u7570\u306a\u308b\u30c7\u30fc\u30bf\u3092\u7ba1\u7406\u3059\u308b\u5834\u5408\u306f\u8907\u5408\u4e3b\u30ad\u30fc\u3092\u4f7f\u7528</li> <li><code>{\u30b3\u30fc\u30c9, \u958b\u59cb\u65e5}</code>\u306e\u7d44\u307f\u5408\u308f\u305b\u3092\u4e3b\u30ad\u30fc\u3068\u3059\u308b</li> </ul>"},{"location":"reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_6","title":"\u547d\u540d\u898f\u5247","text":"<ul> <li>\u30c6\u30fc\u30d6\u30eb\u540d\uff1a\u696d\u52d9\u4e0a\u306e\u610f\u5473\u3092\u8868\u3059\u65e5\u672c\u8a9e\u540d</li> <li>\u30ab\u30e9\u30e0\u540d\uff1a\u82f1\u8a9e\u540d\uff08\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30ec\u30d9\u30eb\uff09\u3068\u65e5\u672c\u8a9e\u540d\uff08\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30ec\u30d9\u30eb\uff09\u306e\u5bfe\u5fdc</li> </ul>"},{"location":"reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#2","title":"2. \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u306e\u8a2d\u8a08","text":""},{"location":"reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_7","title":"\u30d8\u30c3\u30c0\u30fb\u660e\u7d30\u30d1\u30bf\u30fc\u30f3","text":"<p>\u4e00\u56de\u306e\u53d6\u5f15\u306b\u8907\u6570\u306e\u9805\u76ee\u304c\u542b\u307e\u308c\u308b\u5834\u5408\u3001\u30d8\u30c3\u30c0\u30c6\u30fc\u30d6\u30eb\u3068\u660e\u7d30\u30c6\u30fc\u30d6\u30eb\u306b\u5206\u96e2\u3057\u307e\u3059\u3002</p> <pre><code>model Order {\n  orderNo      String        @id @map(\"\u53d7\u6ce8\u756a\u53f7\") @db.VarChar(10)\n  orderDate    DateTime      @default(dbgenerated(\"CURRENT_DATE\")) @map(\"\u53d7\u6ce8\u65e5\")\n  custCode     String        @map(\"\u9867\u5ba2\u30b3\u30fc\u30c9\") @db.VarChar(8)\n  orderDetails OrderDetail[]\n  @@map(\"\u53d7\u6ce8\u30c7\u30fc\u30bf\")\n}\n\nmodel OrderDetail {\n  orderNo    String @map(\"\u53d7\u6ce8\u756a\u53f7\") @db.VarChar(10)\n  soRowNo    Int    @map(\"\u53d7\u6ce8\u884c\u756a\u53f7\")\n  prodCode   String @map(\"\u5546\u54c1\u30b3\u30fc\u30c9\") @db.VarChar(16)\n  quantity   Int    @default(1) @map(\"\u53d7\u6ce8\u6570\u91cf\")\n  order      Order  @relation(fields: [orderNo], references: [orderNo])\n\n  @@id([orderNo, soRowNo])\n  @@map(\"\u53d7\u6ce8\u30c7\u30fc\u30bf\u660e\u7d30\")\n}\n</code></pre>"},{"location":"reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#3","title":"3. \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u30b7\u30c3\u30d7\u306e\u8a2d\u8a08","text":""},{"location":"reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_8","title":"\u30d1\u30fc\u30c6\u30a3\u30e2\u30c7\u30eb","text":"<p>\u53d6\u5f15\u5148\u306e\u3088\u3046\u306b\u8907\u6570\u306e\u5f79\u5272\u3092\u6301\u3064\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306f\u3001\u5171\u901a\u90e8\u5206\uff08Party\uff09\u3068\u5f79\u5272\u7279\u5316\u90e8\u5206\uff08Role\uff09\u306b\u5206\u96e2\u3057\u307e\u3059\u3002</p> <pre><code>// \u5171\u901a\u60c5\u5831\nmodel Company {\n  compCode  String     @id @map(\"\u53d6\u5f15\u5148\u30b3\u30fc\u30c9\") @db.VarChar(8)\n  name      String     @map(\"\u53d6\u5f15\u5148\u540d\") @db.VarChar(40)\n  customers Customer[]\n  suppliers Supplier[]\n  @@map(\"\u53d6\u5f15\u5148\u30de\u30b9\u30bf\")\n}\n\n// \u9867\u5ba2\u3068\u3057\u3066\u306e\u5f79\u5272\u60c5\u5831\nmodel Customer {\n  custCode   String  @map(\"\u9867\u5ba2\u30b3\u30fc\u30c9\") @db.VarChar(8)\n  custSubNo  Int     @map(\"\u9867\u5ba2\u679d\u756a\")\n  arCode     String  @map(\"\u8acb\u6c42\u5148\u30b3\u30fc\u30c9\") @db.VarChar(8)\n  company    Company @relation(fields: [custCode], references: [compCode])\n  @@id([custCode, custSubNo])\n  @@map(\"\u9867\u5ba2\u30de\u30b9\u30bf\")\n}\n\n// \u4ed5\u5165\u5148\u3068\u3057\u3066\u306e\u5f79\u5272\u60c5\u5831\nmodel Supplier {\n  supCode   String  @map(\"\u4ed5\u5165\u5148\u30b3\u30fc\u30c9\") @db.VarChar(8)\n  supSubNo  Int     @map(\"\u4ed5\u5165\u5148\u679d\u756a\")\n  company   Company @relation(fields: [supCode], references: [compCode])\n  @@id([supCode, supSubNo])\n  @@map(\"\u4ed5\u5165\u5148\u30de\u30b9\u30bf\")\n}\n</code></pre>"},{"location":"reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_9","title":"\u30c6\u30b9\u30c8\u6226\u7565","text":""},{"location":"reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#1_1","title":"1. \u30de\u30b9\u30bf\u30c7\u30fc\u30bf\u306e\u30c6\u30b9\u30c8","text":"<pre><code>describe(\"\u30de\u30b9\u30bf\u30c7\u30fc\u30bf\", () =&gt; {\n  beforeAll(async () =&gt; {\n    // \u30c6\u30b9\u30c8\u524d\u306b\u30c7\u30fc\u30bf\u3092\u30af\u30ea\u30a2\n    await prisma.department.deleteMany();\n  });\n\n  test(\"CRUD\u64cd\u4f5c\u304c\u6b63\u5e38\u306b\u52d5\u4f5c\u3059\u308b\", async () =&gt; {\n    // Create\n    await prisma.department.create({ data: testData });\n\n    // Read\n    const result = await prisma.department.findMany();\n    expect(result).toEqual([testData]);\n\n    // Update\n    await prisma.department.update({\n      where: { id: testData.id },\n      data: { name: \"\u66f4\u65b0\u5f8c\u306e\u540d\u524d\" }\n    });\n\n    // Delete\n    await prisma.department.delete({ where: { id: testData.id } });\n    const empty = await prisma.department.findMany();\n    expect(empty).toEqual([]);\n  });\n});\n</code></pre>"},{"location":"reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#2_1","title":"2. \u95a2\u9023\u30c7\u30fc\u30bf\u306e\u30c6\u30b9\u30c8","text":"<pre><code>describe(\"\u95a2\u9023\u30c7\u30fc\u30bf\", () =&gt; {\n  test(\"\u95a2\u9023\u3059\u308b\u30c7\u30fc\u30bf\u3092\u4e00\u62ec\u3067\u53d6\u5f97\u3067\u304d\u308b\", async () =&gt; {\n    // \u95a2\u9023\u3059\u308b\u30de\u30b9\u30bf\u3092\u5148\u306b\u767b\u9332\n    await prisma.$transaction(async (prisma) =&gt; {\n      await prisma.department.createMany({ data: departments });\n      await prisma.employee.createMany({ data: employees });\n    });\n\n    // \u95a2\u9023\u30c7\u30fc\u30bf\u3092\u542b\u3081\u3066\u53d6\u5f97\n    const result = await prisma.department.findMany({\n      include: { employees: true }\n    });\n\n    expect(result[0].employees).toHaveLength(expectedEmployeeCount);\n  });\n});\n</code></pre>"},{"location":"reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_10","title":"\u6bb5\u968e\u7684\u306a\u767a\u5c55\u30d7\u30ed\u30bb\u30b9","text":""},{"location":"reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#1_2","title":"\u30d5\u30a7\u30fc\u30ba1\uff1a\u57fa\u672c\u30de\u30b9\u30bf","text":"<ol> <li>\u90e8\u9580\u30fb\u793e\u54e1</li> <li>\u5546\u54c1\u30fb\u5546\u54c1\u5206\u985e</li> <li>\u53d6\u5f15\u5148\uff08Company, Customer, Supplier\uff09</li> </ol>"},{"location":"reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#2_2","title":"\u30d5\u30a7\u30fc\u30ba2\uff1a\u57fa\u672c\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3","text":"<ol> <li>\u53d7\u6ce8\u30fb\u53d7\u6ce8\u660e\u7d30</li> <li>\u58f2\u4e0a\u30fb\u58f2\u4e0a\u660e\u7d30</li> </ol>"},{"location":"reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#3_1","title":"\u30d5\u30a7\u30fc\u30ba3\uff1a\u8abf\u9054\u30d7\u30ed\u30bb\u30b9","text":"<ol> <li>\u767a\u6ce8\u30fb\u767a\u6ce8\u660e\u7d30</li> <li>\u4ed5\u5165\u30fb\u4ed5\u5165\u660e\u7d30</li> <li>\u5728\u5eab\u7ba1\u7406</li> </ol>"},{"location":"reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#4","title":"\u30d5\u30a7\u30fc\u30ba4\uff1a\u8ca1\u52d9\u30d7\u30ed\u30bb\u30b9","text":"<ol> <li>\u8acb\u6c42\u30fb\u8acb\u6c42\u660e\u7d30</li> <li>\u5165\u91d1\u7ba1\u7406</li> <li>\u652f\u6255\u7ba1\u7406</li> </ol>"},{"location":"reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#5","title":"\u30d5\u30a7\u30fc\u30ba5\uff1a\u88dc\u52a9\u6a5f\u80fd","text":"<ol> <li>\u4e0e\u4fe1\u7ba1\u7406</li> <li>\u81ea\u52d5\u63a1\u756a</li> <li>\u305d\u306e\u4ed6\u904b\u7528\u652f\u63f4\u6a5f\u80fd</li> </ol>"},{"location":"reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_11","title":"\u5171\u901a\u8a2d\u8a08\u539f\u5247","text":""},{"location":"reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#1_3","title":"1. \u76e3\u67fb\u8a3c\u8de1\u306e\u8a2d\u8a08","text":"<p>\u3059\u3079\u3066\u306e\u30c6\u30fc\u30d6\u30eb\u306b\u4ee5\u4e0b\u306e\u30ab\u30e9\u30e0\u3092\u542b\u3081\u307e\u3059\uff1a</p> <pre><code>createDate DateTime @default(dbgenerated(\"CURRENT_DATE\")) @map(\"\u4f5c\u6210\u65e5\u6642\") @db.Timestamp(6)\ncreator    String?  @map(\"\u4f5c\u6210\u8005\u540d\") @db.VarChar(12)\nupdateDate DateTime @default(dbgenerated(\"CURRENT_DATE\")) @map(\"\u66f4\u65b0\u65e5\u6642\") @db.Timestamp(6)\nupdater    String?  @map(\"\u66f4\u65b0\u8005\u540d\") @db.VarChar(12)\n</code></pre>"},{"location":"reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#2-vs","title":"2. \u8ad6\u7406\u524a\u9664vs\u7269\u7406\u524a\u9664","text":"<ul> <li>\u30de\u30b9\u30bf\u30c7\u30fc\u30bf\uff1a\u8ad6\u7406\u524a\u9664\uff08\u524a\u9664\u30d5\u30e9\u30b0\uff09</li> <li>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\uff1a\u7269\u7406\u524a\u9664\u307e\u305f\u306f\u5c65\u6b74\u4fdd\u6301</li> </ul>"},{"location":"reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#3_2","title":"3. \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8003\u616e","text":"<ul> <li>\u691c\u7d22\u983b\u5ea6\u306e\u9ad8\u3044\u30ab\u30e9\u30e0\u306b\u306f\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u8a2d\u5b9a</li> <li>\u5927\u91cf\u30c7\u30fc\u30bf\u304c\u4e88\u60f3\u3055\u308c\u308b\u30c6\u30fc\u30d6\u30eb\u306f\u5206\u5272\u3092\u691c\u8a0e</li> <li>\u96c6\u8a08\u7528\u306e\u30b5\u30de\u30ea\u30c6\u30fc\u30d6\u30eb\u3092\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u4f5c\u6210</li> </ul>"},{"location":"reference/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_12","title":"\u307e\u3068\u3081","text":"<p>TDD\u30a2\u30d7\u30ed\u30fc\u30c1\u306b\u3088\u308b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\u3067\u306f\uff1a</p> <ol> <li>\u5c0f\u3055\u304f\u59cb\u3081\u308b: \u5b8c\u74a7\u306a\u521d\u671f\u8a2d\u8a08\u3092\u76ee\u6307\u3055\u305a\u3001\u6700\u5c0f\u9650\u306e\u8981\u6c42\u304b\u3089\u958b\u59cb</li> <li>\u30c6\u30b9\u30c8\u30d5\u30a1\u30fc\u30b9\u30c8: \u8981\u6c42\u3092\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3067\u660e\u78ba\u306b\u5b9a\u7fa9</li> <li>\u6bb5\u968e\u7684\u6539\u5584: \u30c6\u30b9\u30c8\u306b\u5b88\u3089\u308c\u306a\u304c\u3089\u7d99\u7d9a\u7684\u306b\u30b9\u30ad\u30fc\u30de\u3092\u6539\u5584</li> <li>\u53ef\u8996\u5316: ER\u56f3\u3067\u8a2d\u8a08\u306e\u5168\u4f53\u50cf\u3092\u628a\u63e1</li> <li>\u4e00\u8cab\u6027: \u547d\u540d\u898f\u5247\u3084\u8a2d\u8a08\u30d1\u30bf\u30fc\u30f3\u3092\u7d71\u4e00</li> </ol> <p>\u3053\u306e\u30a2\u30d7\u30ed\u30fc\u30c1\u306b\u3088\u308a\u3001\u5909\u5316\u3059\u308b\u8981\u6c42\u306b\u67d4\u8edf\u306b\u5bfe\u5fdc\u3057\u306a\u304c\u3089\u3001\u4fdd\u5b88\u6027\u306e\u9ad8\u3044\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u8a08\u3092\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/","title":"\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\u8a2d\u8a08\u30ac\u30a4\u30c9","text":""},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_2","title":"\u6982\u8981","text":"<p>\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\u8a2d\u8a08\u306f\u3001\u30d3\u30b8\u30cd\u30b9\u30c9\u30e1\u30a4\u30f3\u306e\u77e5\u8b58\u3092\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306b\u8868\u73fe\u3059\u308b\u305f\u3081\u306e\u4e2d\u6838\u7684\u306a\u8a2d\u8a08\u624b\u6cd5\u3067\u3059\u3002 \u30dc\u30c8\u30e0\u30a2\u30c3\u30d7\u30a2\u30d7\u30ed\u30fc\u30c1\u3092\u63a1\u7528\u3057\u3001\u5c0f\u3055\u306a\u30d1\u30bf\u30fc\u30f3\u304b\u3089\u59cb\u3081\u3066\u6bb5\u968e\u7684\u306b\u30b7\u30b9\u30c6\u30e0\u5168\u4f53\u3092\u69cb\u7bc9\u3057\u3066\u3044\u304d\u307e\u3059\u3002</p>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_3","title":"\u8a2d\u8a08\u539f\u5247","text":""},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_4","title":"\u3088\u3044\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u6761\u4ef6","text":"<p>\u5909\u66f4\u3092\u697d\u306b\u5b89\u5168\u306b\u3067\u304d\u3066\u5f79\u306b\u7acb\u3064\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3067\u3042\u308b\u3053\u3068\u3002</p>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_5","title":"\u57fa\u672c\u7684\u306a\u8a2d\u8a08\u65b9\u91dd","text":"<ol> <li>\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3092\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\u306b\u96c6\u7d04</li> <li>\u4f9d\u5b58\u95a2\u4fc2\u3092\u9069\u5207\u306b\u7ba1\u7406</li> <li>\u30c6\u30b9\u30bf\u30d3\u30ea\u30c6\u30a3\u3092\u78ba\u4fdd</li> <li>\u5c0f\u3055\u304f\u59cb\u3081\u3066\u6bb5\u968e\u7684\u306b\u62e1\u5f35</li> </ol>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_6","title":"\u30e2\u30c7\u30ea\u30f3\u30b0\u8981\u7d20","text":"<p>\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\u306e\u57fa\u672c\u69cb\u6210\u8981\u7d20\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\uff1a</p> <p></p>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#value-object","title":"\u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\uff08Value Object\uff09","text":""},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_7","title":"\u7279\u5fb4","text":"<ol> <li>\u4e0d\u5909\u6027: \u4e00\u5ea6\u4f5c\u6210\u3055\u308c\u305f\u3089\u72b6\u614b\u3092\u5909\u66f4\u3067\u304d\u306a\u3044</li> <li>\u5024\u306b\u3088\u308b\u7b49\u4fa1\u6027: \u5c5e\u6027\u304c\u540c\u3058\u306a\u3089\u540c\u3058\u30aa\u30d6\u30b8\u30a7\u30af\u30c8</li> <li>\u4ea4\u63db\u53ef\u80fd: \u5024\u3092\u5909\u66f4\u3059\u308b\u4ee3\u308f\u308a\u306b\u5225\u306e\u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u4ea4\u63db</li> </ol>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_8","title":"\u5b9f\u88c5\u4f8b","text":"<pre><code>public class FullName {\n    private final String familyName;\n    private final String firstName;\n\n    public FullName(String familyName, String firstName) {\n        if (familyName == null || firstName == null) {\n            throw new IllegalArgumentException(\"\u540d\u524d\u306f\u5fc5\u9808\u3067\u3059\");\n        }\n        this.familyName = familyName;\n        this.firstName = firstName;\n    }\n\n    public String getFamilyName() {\n        return familyName;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    @Override\n    public boolean equals(Object obj) {\n        if (this == obj) return true;\n        if (obj == null || getClass() != obj.getClass()) return false;\n        FullName fullName = (FullName) obj;\n        return Objects.equals(familyName, fullName.familyName) &amp;&amp;\n               Objects.equals(firstName, fullName.firstName);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(familyName, firstName);\n    }\n\n    @Override\n    public String toString() {\n        return familyName + \" \" + firstName;\n    }\n}\n</code></pre>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_9","title":"\u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u5229\u70b9","text":"<ol> <li>\u5b58\u5728\u3057\u306a\u3044\u5024\u3092\u5b58\u5728\u3055\u305b\u306a\u3044: \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30ed\u30b8\u30c3\u30af\u306e\u96c6\u7d04</li> <li>\u8aa4\u3063\u305f\u4ee3\u5165\u3092\u9632\u3050: \u578b\u5b89\u5168\u6027\u306e\u5411\u4e0a</li> <li>\u632f\u308b\u821e\u3044\u3092\u6301\u3064: \u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\u306e\u8868\u73fe</li> </ol>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_10","title":"\u8a2d\u8a08\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3","text":"<ul> <li>\u30d7\u30ea\u30df\u30c6\u30a3\u30d6\u578b\u3078\u306e\u904e\u5ea6\u306a\u4f9d\u5b58\u3092\u907f\u3051\u308b</li> <li>\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u306f\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u5b9f\u88c5</li> <li>\u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u3092\u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u96c6\u7d04</li> </ul>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#entity","title":"\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\uff08Entity\uff09","text":""},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_11","title":"\u7279\u5fb4","text":"<ol> <li>\u53ef\u5909\u6027: \u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u4e2d\u306b\u72b6\u614b\u3092\u5909\u66f4\u53ef\u80fd</li> <li>\u540c\u4e00\u6027: \u8b58\u5225\u5b50\u306b\u3088\u308b\u533a\u5225</li> <li>\u7d99\u7d9a\u6027: \u5c5e\u6027\u304c\u5909\u308f\u3063\u3066\u3082\u540c\u4e00\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3</li> </ol>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_12","title":"\u5b9f\u88c5\u4f8b","text":"<pre><code>public class User {\n    private final UserId id;\n    private FullName name;\n    private Email email;\n\n    public User(UserId id, FullName name, Email email) {\n        this.id = Objects.requireNonNull(id);\n        this.name = Objects.requireNonNull(name);\n        this.email = Objects.requireNonNull(email);\n    }\n\n    public UserId getId() {\n        return id;\n    }\n\n    public FullName getName() {\n        return name;\n    }\n\n    public void changeName(FullName name) {\n        this.name = Objects.requireNonNull(name);\n    }\n\n    public Email getEmail() {\n        return email;\n    }\n\n    public void changeEmail(Email email) {\n        this.email = Objects.requireNonNull(email);\n    }\n\n    @Override\n    public boolean equals(Object obj) {\n        if (this == obj) return true;\n        if (obj == null || getClass() != obj.getClass()) return false;\n        User user = (User) obj;\n        return Objects.equals(id, user.id);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(id);\n    }\n}\n</code></pre>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_13","title":"\u8a2d\u8a08\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3","text":"<ul> <li>\u8b58\u5225\u5b50\u306f\u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3067\u5b9f\u88c5</li> <li>\u7b49\u4fa1\u6027\u6bd4\u8f03\u306f\u8b58\u5225\u5b50\u306e\u307f\u3067\u884c\u3046</li> <li>\u72b6\u614b\u5909\u66f4\u30e1\u30bd\u30c3\u30c9\u306b\u306f\u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u3092\u7d44\u307f\u8fbc\u3080</li> </ul>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#domain-service","title":"\u30c9\u30e1\u30a4\u30f3\u30b5\u30fc\u30d3\u30b9\uff08Domain Service\uff09","text":""},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_14","title":"\u4f7f\u7528\u3059\u308b\u5834\u9762","text":"<ol> <li>\u8907\u6570\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306b\u8de8\u308b\u30ed\u30b8\u30c3\u30af</li> <li>\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3084\u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5c5e\u3055\u306a\u3044\u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb</li> <li>\u8a08\u7b97\u3084\u5909\u63db\u30ed\u30b8\u30c3\u30af</li> </ol>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_15","title":"\u5b9f\u88c5\u4f8b","text":"<pre><code>public class UserService {\n    private final UserRepository userRepository;\n\n    public UserService(UserRepository userRepository) {\n        this.userRepository = userRepository;\n    }\n\n    public boolean isDuplicated(User user) {\n        User duplicatedUser = userRepository.findByName(user.getName());\n        return duplicatedUser != null &amp;&amp; !duplicatedUser.getId().equals(user.getId());\n    }\n\n    public boolean canChangeEmail(User user, Email newEmail) {\n        User existingUser = userRepository.findByEmail(newEmail);\n        return existingUser == null || existingUser.getId().equals(user.getId());\n    }\n}\n</code></pre>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_16","title":"\u8a2d\u8a08\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3","text":"<ul> <li>\u72b6\u614b\u3092\u6301\u305f\u306a\u3044</li> <li>\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3084\u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u512a\u5148\u3057\u3001\u5fc5\u8981\u306a\u5834\u5408\u306e\u307f\u4f7f\u7528</li> <li>\u660e\u78ba\u306a\u8cac\u4efb\u3092\u6301\u3064</li> </ul>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#factory","title":"\u30d5\u30a1\u30af\u30c8\u30ea\uff08Factory\uff09","text":""},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_17","title":"\u4f7f\u7528\u3059\u308b\u5834\u9762","text":"<ol> <li>\u8907\u96d1\u306a\u751f\u6210\u30ed\u30b8\u30c3\u30af</li> <li>\u4f9d\u5b58\u95a2\u4fc2\u306e\u6ce8\u5165\u304c\u5fc5\u8981</li> <li>\u72ec\u81ea\u306e\u63a1\u756a\u30b7\u30b9\u30c6\u30e0</li> </ol>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_18","title":"\u5b9f\u88c5\u4f8b","text":"<pre><code>public interface UserFactory {\n    User createUser(FullName name, Email email);\n}\n\npublic class UserFactoryImpl implements UserFactory {\n    private final UserIdGenerator idGenerator;\n\n    public UserFactoryImpl(UserIdGenerator idGenerator) {\n        this.idGenerator = idGenerator;\n    }\n\n    @Override\n    public User createUser(FullName name, Email email) {\n        UserId id = idGenerator.nextId();\n        return new User(id, name, email);\n    }\n}\n</code></pre>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_19","title":"\u8a2d\u8a08\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3","text":"<ul> <li>\u8907\u96d1\u306a\u751f\u6210\u30ed\u30b8\u30c3\u30af\u3092\u30ab\u30d7\u30bb\u30eb\u5316</li> <li>\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u5b9a\u7fa9\u3057\u3066\u30c6\u30b9\u30bf\u30d3\u30ea\u30c6\u30a3\u3092\u78ba\u4fdd</li> <li>\u30ea\u30dd\u30b8\u30c8\u30ea\u3068\u30d5\u30a1\u30af\u30c8\u30ea\u306e\u8cac\u4efb\u3092\u660e\u78ba\u306b\u5206\u96e2</li> </ul>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#aggregate","title":"\u96c6\u7d04\uff08Aggregate\uff09","text":""},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_20","title":"\u6982\u5ff5","text":"<p>\u96c6\u7d04\u306f\u95a2\u9023\u3059\u308b\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3068\u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u96c6\u5408\u3067\u3001\u30c7\u30fc\u30bf\u5909\u66f4\u306e\u5358\u4f4d\u3092\u8868\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_21","title":"\u96c6\u7d04\u306e\u8a2d\u8a08\u539f\u5247","text":"<ol> <li>\u96c6\u7d04\u30eb\u30fc\u30c8\u306e\u307f\u304c\u5916\u90e8\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9</li> <li>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u5883\u754c\u3068\u4e00\u81f4</li> <li>\u6574\u5408\u6027\u306e\u5883\u754c\u3092\u8868\u73fe</li> </ol>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_22","title":"\u5b9f\u88c5\u4f8b","text":"<pre><code>public class Circle {\n    private final CircleId id;\n    private final UserId ownerId;\n    private CircleName name;\n    private List&lt;UserId&gt; memberIds;\n    private static final int MAX_MEMBERS = 30;\n\n    public Circle(CircleId id, UserId ownerId, CircleName name) {\n        this.id = Objects.requireNonNull(id);\n        this.ownerId = Objects.requireNonNull(ownerId);\n        this.name = Objects.requireNonNull(name);\n        this.memberIds = new ArrayList&lt;&gt;();\n    }\n\n    public void join(User user) {\n        if (memberIds.size() &gt;= MAX_MEMBERS) {\n            throw new IllegalStateException(\"\u30b5\u30fc\u30af\u30eb\u306e\u6700\u5927\u4eba\u6570\u306f\" + MAX_MEMBERS + \"\u4eba\u3067\u3059\");\n        }\n        if (memberIds.contains(user.getId())) {\n            throw new IllegalStateException(\"\u65e2\u306b\u53c2\u52a0\u6e08\u307f\u3067\u3059\");\n        }\n        memberIds.add(user.getId());\n    }\n\n    public void leave(UserId userId) {\n        if (!memberIds.contains(userId)) {\n            throw new IllegalStateException(\"\u53c2\u52a0\u3057\u3066\u3044\u307e\u305b\u3093\");\n        }\n        memberIds.remove(userId);\n    }\n\n    public boolean isMember(UserId userId) {\n        return memberIds.contains(userId);\n    }\n\n    public int getMemberCount() {\n        return memberIds.size();\n    }\n\n    public List&lt;UserId&gt; getMemberIds() {\n        return new ArrayList&lt;&gt;(memberIds); // \u9632\u5fa1\u7684\u30b3\u30d4\u30fc\n    }\n\n    // \u30a2\u30af\u30bb\u30b5\u30e1\u30bd\u30c3\u30c9\n    public CircleId getId() { return id; }\n    public UserId getOwnerId() { return ownerId; }\n    public CircleName getName() { return name; }\n}\n</code></pre>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_23","title":"\u8a2d\u8a08\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3","text":"<ul> <li>\u5c0f\u3055\u304f\u4fdd\u3064: \u5fc5\u8981\u6700\u5c0f\u9650\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u307f\u542b\u3081\u308b</li> <li>\u6574\u5408\u6027\u5883\u754c\u3092\u660e\u78ba\u306b\u3059\u308b</li> <li>\u96c6\u7d04\u30eb\u30fc\u30c8\u4ee5\u5916\u3078\u306e\u76f4\u63a5\u30a2\u30af\u30bb\u30b9\u3092\u7981\u6b62</li> </ul>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#repository","title":"\u30ea\u30dd\u30b8\u30c8\u30ea\uff08Repository\uff09","text":""},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_24","title":"\u6982\u5ff5","text":"<p>\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u6c38\u7d9a\u5316\u3092\u62bd\u8c61\u5316\u3057\u3001\u30c9\u30e1\u30a4\u30f3\u5c64\u3092\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u5c64\u304b\u3089\u72ec\u7acb\u3055\u305b\u307e\u3059\u3002</p>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_25","title":"\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u8a2d\u8a08","text":"<pre><code>public interface UserRepository {\n    User findById(UserId id);\n    User findByEmail(Email email);\n    List&lt;User&gt; findAll();\n    void save(User user);\n    void delete(User user);\n    UserId nextIdentity(); // \u30aa\u30d7\u30b7\u30e7\u30f3: \u63a1\u756a\u6a5f\u80fd\n}\n</code></pre>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_26","title":"\u5b9f\u88c5\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3","text":"<ol> <li>\u96c6\u7d04\u6bce\u306b\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4f5c\u6210</li> <li>\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306f\u30c9\u30e1\u30a4\u30f3\u5c64\u306b\u914d\u7f6e</li> <li>\u5b9f\u88c5\u306f\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u5c64\u306b\u914d\u7f6e</li> </ol>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_27","title":"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9","text":""},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_28","title":"\u8cac\u4efb","text":"<ol> <li>\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\u306e\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3</li> <li>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u7ba1\u7406</li> <li>DTO\u5909\u63db</li> </ol>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_29","title":"\u5b9f\u88c5\u4f8b","text":"<pre><code>@Service\n@Transactional\npublic class UserApplicationService {\n    private final UserRepository userRepository;\n    private final UserService userService;\n    private final UserFactory userFactory;\n\n    public UserApplicationService(\n            UserRepository userRepository,\n            UserService userService,\n            UserFactory userFactory) {\n        this.userRepository = userRepository;\n        this.userService = userService;\n        this.userFactory = userFactory;\n    }\n\n    public UserData registerUser(String familyName, String firstName, String email) {\n        FullName name = new FullName(familyName, firstName);\n        Email emailAddr = new Email(email);\n\n        User user = userFactory.createUser(name, emailAddr);\n\n        if (userService.isDuplicated(user)) {\n            throw new IllegalArgumentException(\"\u91cd\u8907\u3059\u308b\u30e6\u30fc\u30b6\u30fc\u3067\u3059\");\n        }\n\n        userRepository.save(user);\n\n        return new UserData(\n            user.getId().getValue(),\n            user.getName().toString(),\n            user.getEmail().getValue()\n        );\n    }\n\n    public void updateUserName(String userId, String familyName, String firstName) {\n        UserId id = new UserId(userId);\n        User user = userRepository.findById(id);\n\n        if (user == null) {\n            throw new IllegalArgumentException(\"\u30e6\u30fc\u30b6\u30fc\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\");\n        }\n\n        FullName newName = new FullName(familyName, firstName);\n        user.changeName(newName);\n\n        userRepository.save(user);\n    }\n}\n</code></pre>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_30","title":"\u30c6\u30b9\u30c8\u6226\u7565","text":""},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_31","title":"\u5358\u4f53\u30c6\u30b9\u30c8\u306e\u65b9\u91dd","text":"<ol> <li>\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\u306e\u5358\u4f53\u30c6\u30b9\u30c8</li> <li>\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u306e\u7d71\u5408\u30c6\u30b9\u30c8</li> <li>\u30a4\u30f3\u30e1\u30e2\u30ea\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u3088\u308b\u30c6\u30b9\u30bf\u30d3\u30ea\u30c6\u30a3\u78ba\u4fdd</li> </ol>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_32","title":"\u30c6\u30b9\u30c8\u5b9f\u88c5\u4f8b","text":"<pre><code>class UserTest {\n    @Test\n    void \u540d\u524d\u3092\u5909\u66f4\u3067\u304d\u308b() {\n        // Given\n        UserId id = new UserId(\"user-001\");\n        FullName originalName = new FullName(\"\u7530\u4e2d\", \"\u592a\u90ce\");\n        Email email = new Email(\"tanaka@example.com\");\n        User user = new User(id, originalName, email);\n\n        // When\n        FullName newName = new FullName(\"\u9234\u6728\", \"\u592a\u90ce\");\n        user.changeName(newName);\n\n        // Then\n        assertThat(user.getName()).isEqualTo(newName);\n    }\n\n    @Test\n    void \u540c\u4e00\u6027\u306f\u8b58\u5225\u5b50\u3067\u5224\u5b9a\u3055\u308c\u308b() {\n        // Given\n        UserId id = new UserId(\"user-001\");\n        FullName name1 = new FullName(\"\u7530\u4e2d\", \"\u592a\u90ce\");\n        FullName name2 = new FullName(\"\u9234\u6728\", \"\u592a\u90ce\");\n        Email email = new Email(\"tanaka@example.com\");\n\n        // When\n        User user1 = new User(id, name1, email);\n        User user2 = new User(id, name2, email);\n\n        // Then\n        assertThat(user1).isEqualTo(user2);\n    }\n}\n</code></pre>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_33","title":"\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u7ba1\u7406","text":""},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_34","title":"\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u5883\u754c","text":"<p>\u96c6\u7d04\u304c\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306e\u5883\u754c\u3068\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_35","title":"\u5b9f\u88c5\u65b9\u6cd5","text":"<ol> <li>\u5ba3\u8a00\u7684\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\uff08\u63a8\u5968\uff09</li> </ol> <pre><code>@Service\n@Transactional\npublic class CircleApplicationService {\n    public void createCircle(String ownerId, String circleName) {\n        // \u81ea\u52d5\u7684\u306b\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u7ba1\u7406\u3055\u308c\u308b\n    }\n}\n</code></pre> <ol> <li>\u30d7\u30ed\u30b0\u30e9\u30de\u30c6\u30a3\u30c3\u30af\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3</li> </ol> <pre><code>@Service\npublic class CircleApplicationService {\n    private final PlatformTransactionManager transactionManager;\n\n    public void createCircle(String ownerId, String circleName) {\n        TransactionTemplate template = new TransactionTemplate(transactionManager);\n        template.execute(status -&gt; {\n            // \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u5185\u306e\u51e6\u7406\n            return null;\n        });\n    }\n}\n</code></pre>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_36","title":"\u5b9f\u88c5\u6bb5\u968e\u3068\u30a2\u30d7\u30ed\u30fc\u30c1","text":""},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_37","title":"\u30a4\u30f3\u30b5\u30a4\u30c9\u30a2\u30a6\u30c8\u30a2\u30d7\u30ed\u30fc\u30c1","text":"<p>\u30c7\u30fc\u30bf\u30e2\u30c7\u30eb\u304b\u3089\u5b9f\u88c5\u3092\u958b\u59cb\u3059\u308b\u5834\u5408\uff1a</p> <p></p>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_38","title":"\u30a2\u30a6\u30c8\u30b5\u30a4\u30c9\u30a4\u30f3\u30a2\u30d7\u30ed\u30fc\u30c1","text":"<p>UI\u304b\u3089\u5b9f\u88c5\u3092\u958b\u59cb\u3059\u308b\u5834\u5408\uff1a</p> <p></p>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_39","title":"\u307e\u3068\u3081","text":""},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_40","title":"\u5b9f\u88c5\u6642\u306e\u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8","text":"<ul> <li> \u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u4e0d\u5909\u3067\u9069\u5207\u306a\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u6301\u3064</li> <li> \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306f\u8b58\u5225\u5b50\u306b\u3088\u308b\u7b49\u4fa1\u6027\u6bd4\u8f03\u3092\u884c\u3046</li> <li> \u30c9\u30e1\u30a4\u30f3\u30b5\u30fc\u30d3\u30b9\u306f\u72b6\u614b\u3092\u6301\u305f\u306a\u3044</li> <li> \u96c6\u7d04\u306f\u6574\u5408\u6027\u306e\u5883\u754c\u3092\u9069\u5207\u306b\u8868\u73fe\u3057\u3066\u3044\u308b</li> <li> \u30ea\u30dd\u30b8\u30c8\u30ea\u306f\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u308b</li> <li> \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u306b\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u304c\u6f0f\u308c\u3066\u3044\u306a\u3044</li> <li> \u9069\u5207\u306a\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u5883\u754c\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b</li> <li> \u30c6\u30b9\u30c8\u304c\u5145\u5b9f\u3057\u3066\u3044\u308b</li> </ul>"},{"location":"reference/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/#_41","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>\u3053\u306e\u30ac\u30a4\u30c9\u3067\u8aac\u660e\u3057\u305f\u30d1\u30bf\u30fc\u30f3\u3092\u7fd2\u5f97\u3057\u305f\u5f8c\u306f\u3001\u4ee5\u4e0b\u306e\u5b66\u7fd2\u3092\u63a8\u5968\u3057\u307e\u3059\uff1a</p> <ol> <li>\u6226\u7565\u7684\u8a2d\u8a08: \u5883\u754c\u4ed8\u3051\u3089\u308c\u305f\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3001\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30de\u30c3\u30d7</li> <li>\u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3: \u30c9\u30e1\u30a4\u30f3\u30a4\u30d9\u30f3\u30c8\u3001\u30a4\u30d9\u30f3\u30c8\u30bd\u30fc\u30b7\u30f3\u30b0</li> <li>CQRS: \u30b3\u30de\u30f3\u30c9\u30af\u30a8\u30ea\u8cac\u4efb\u5206\u96e2</li> <li>\u5b9f\u8df5\u7684\u306a\u8a2d\u8a08: \u30ec\u30ac\u30b7\u30fc\u30b3\u30fc\u30c9\u306e\u6539\u5584\u3001\u6bb5\u968e\u7684\u306a\u5c0e\u5165</li> </ol> <p>\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\u8a2d\u8a08\u306f\u7d99\u7d9a\u7684\u306a\u6539\u5584\u304c\u91cd\u8981\u3067\u3059\u3002\u5c0f\u3055\u304f\u59cb\u3081\u3066\u3001\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u3092\u5f97\u306a\u304c\u3089\u6bb5\u968e\u7684\u306b\u6d17\u7df4\u3057\u3066\u3044\u304f\u3053\u3068\u3092\u5fc3\u304c\u3051\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/","title":"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u4f5c\u6210\u30ac\u30a4\u30c9","text":""},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#_2","title":"\u306f\u3058\u3081\u306b","text":"<p>\u3053\u306e\u30ac\u30a4\u30c9\u306f\u3001XP\u30d7\u30ed\u30b0\u30e9\u30de\u5411\u3051\u306e\u5b9f\u7528\u7684\u306a\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u4f5c\u6210\u624b\u6cd5\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306f\u30b7\u30b9\u30c6\u30e0\u306e\u632f\u308b\u821e\u3044\u306b\u95a2\u3059\u308b\u5229\u5bb3\u95a2\u4fc2\u8005\u3068\u306e\u5951\u7d04\u3067\u3042\u308a\u3001\u30a2\u30b8\u30e3\u30a4\u30eb\u958b\u767a\u306b\u304a\u3044\u3066\u3082\u8981\u6c42\u3092\u660e\u78ba\u5316\u3059\u308b\u91cd\u8981\u306a\u30c4\u30fc\u30eb\u3067\u3059\u3002</p>"},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#_3","title":"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306e\u57fa\u672c\u6982\u5ff5","text":""},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#_4","title":"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u3068\u306f","text":"<p>\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306f\u3001\u30b7\u30b9\u30c6\u30e0\u306e\u632f\u308b\u821e\u3044\u306b\u95a2\u3059\u308b\u5229\u5bb3\u95a2\u4fc2\u8005\u9593\u306e\u5951\u7d04\u3092\u8868\u73fe\u3059\u308b\u3082\u306e\u3067\u3059\u3002</p> <p></p>"},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#xp","title":"XP\u3068\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9","text":"<p>XP\u306e\u30e6\u30fc\u30b6\u30fc\u30b9\u30c8\u30fc\u30ea\u30fc\u3068\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306e\u95a2\u4fc2\uff1a</p> <ul> <li>\u30e6\u30fc\u30b6\u30fc\u30b9\u30c8\u30fc\u30ea\u30fc\uff1a\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u5358\u4f4d\u306e\u5c0f\u3055\u306a\u8981\u6c42</li> <li>\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u6982\u8981\uff1a\u30e6\u30fc\u30b6\u30fc\u30b9\u30c8\u30fc\u30ea\u30fc\u3092\u307e\u3068\u3081\u305f\u6a5f\u80fd\u7fa4</li> <li>\u5b8c\u5168\u5f62\u5f0f\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\uff1a\u8a73\u7d30\u306a\u632f\u308b\u821e\u3044\u306e\u5b9a\u7fa9</li> </ul>"},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#1-3","title":"1. \u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306e3\u3064\u306e\u30ec\u30d9\u30eb","text":""},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#_5","title":"\u30ec\u30d9\u30eb\u306e\u968e\u5c64\u69cb\u9020","text":""},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#_6","title":"\u30ec\u30d9\u30eb\u5224\u5b9a\u306e\u8cea\u554f","text":"<p>\u30e6\u30fc\u30b6\u30fc\u76ee\u7684\u30ec\u30d9\u30eb\u306e\u5224\u5b9a - \u4e3b\u30a2\u30af\u30bf\u30fc\u306f\u3053\u308c\u3092\u5b9f\u884c\u3057\u305f\u5f8c\u3067\u6e80\u8db3\u3057\u3066\u7acb\u3061\u53bb\u308c\u308b\u304b\uff1f - \u3053\u308c\u306f1\u56de\u306e\u4f5c\u696d\u30bb\u30c3\u30b7\u30e7\u30f3\u3067\u5b8c\u4e86\u3059\u308b\u304b\uff1f</p> <p>\u8981\u7d04\u30ec\u30d9\u30eb\u306e\u5224\u5b9a - \u8907\u6570\u306e\u30e6\u30fc\u30b6\u30fc\u76ee\u7684\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u304b\uff1f - \u6642\u9593\u3092\u304b\u3051\u3066\u5b9f\u884c\u3055\u308c\u308b\u9577\u3044\u30d7\u30ed\u30bb\u30b9\u304b\uff1f</p> <p>\u30b5\u30d6\u6a5f\u80fd\u30ec\u30d9\u30eb\u306e\u5224\u5b9a - \u3053\u308c\u3060\u3051\u3067\u306f\u76ee\u7684\u304c\u9054\u6210\u3055\u308c\u306a\u3044\u304b\uff1f - \u4ed6\u306e\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u304b\u3089\u547c\u3073\u51fa\u3055\u308c\u308b\u5171\u901a\u51e6\u7406\u304b\uff1f</p>"},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#2","title":"2. \u30b9\u30b3\u30fc\u30d7\u306e\u5b9a\u7fa9","text":""},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#_7","title":"\u8a2d\u8a08\u30b9\u30b3\u30fc\u30d7\u306e\u7a2e\u985e","text":""},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#inout","title":"In/Out\u30ea\u30b9\u30c8\u306e\u4f5c\u6210","text":"<p>\u30b9\u30b3\u30fc\u30d7\u3092\u660e\u78ba\u306b\u3059\u308b\u305f\u3081\u306b\u3001\u4f55\u304c\u7bc4\u56f2\u5185\u3067\u4f55\u304c\u7bc4\u56f2\u5916\u304b\u3092\u6574\u7406\uff1a</p> \u30c8\u30d4\u30c3\u30af In Out \u5099\u8003 \u30e6\u30fc\u30b6\u30fc\u8a8d\u8a3c \u2713 \u30b7\u30b9\u30c6\u30e0\u3067\u5b9f\u88c5 \u6c7a\u6e08\u51e6\u7406 \u2713 \u5916\u90e8\u30b5\u30fc\u30d3\u30b9\u5229\u7528 \u5728\u5eab\u7ba1\u7406 \u2713 \u30b3\u30a2\u6a5f\u80fd \u914d\u9001\u624b\u914d \u2713 \u7269\u6d41\u4f1a\u793eAPI \u30ec\u30dd\u30fc\u30c8\u751f\u6210 \u2713 \u7ba1\u7406\u6a5f\u80fd"},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#3","title":"3. \u30a2\u30af\u30bf\u30fc\u306e\u8b58\u5225","text":""},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#_8","title":"\u30a2\u30af\u30bf\u30fc\u5206\u6790\u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8","text":""},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#_9","title":"\u30a2\u30af\u30bf\u30fc\u30fb\u76ee\u7684\u30ea\u30b9\u30c8","text":"<p>\u512a\u5148\u5ea6\u4ed8\u304d\u3067\u30a2\u30af\u30bf\u30fc\u306e\u76ee\u7684\u3092\u6574\u7406\uff1a</p> \u30a2\u30af\u30bf\u30fc \u76ee\u7684 \u30ec\u30d9\u30eb \u512a\u5148\u5ea6 \u983b\u5ea6 \u8cfc\u5165\u8005 \u5546\u54c1\u3092\u691c\u7d22\u3059\u308b \ud83c\udf0a \u9ad8 100\u56de/\u65e5 \u8cfc\u5165\u8005 \u6ce8\u6587\u3059\u308b \ud83c\udf0a \u9ad8 50\u56de/\u65e5 \u8cfc\u5165\u8005 \u6ce8\u6587\u5c65\u6b74\u3092\u78ba\u8a8d\u3059\u308b \ud83c\udf0a \u4e2d 20\u56de/\u65e5 \u7ba1\u7406\u8005 \u5728\u5eab\u3092\u66f4\u65b0\u3059\u308b \ud83c\udf0a \u9ad8 30\u56de/\u65e5 \u7ba1\u7406\u8005 \u30ec\u30dd\u30fc\u30c8\u3092\u751f\u6210\u3059\u308b \u2601\ufe0f \u4e2d 5\u56de/\u65e5 \u30b7\u30b9\u30c6\u30e0 \u5728\u5eab\u3092\u81ea\u52d5\u88dc\u5145\u3059\u308b \ud83c\udf0a \u9ad8 10\u56de/\u65e5"},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#4","title":"4. \u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u8a18\u8ff0\u30d7\u30ed\u30bb\u30b9","text":""},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#_10","title":"\u6bb5\u968e\u7684\u8a73\u7d30\u5316\u30a2\u30d7\u30ed\u30fc\u30c1","text":""},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#12","title":"12\u30b9\u30c6\u30c3\u30d7\u306e\u4f5c\u6210\u30d7\u30ed\u30bb\u30b9","text":"<ol> <li>\u30b7\u30b9\u30c6\u30e0\u306e\u30b9\u30b3\u30fc\u30d7\u3068\u5883\u754c\u3092\u8b58\u5225</li> <li>\u4e3b\u30a2\u30af\u30bf\u30fc\u306e\u4e00\u89a7\u4f5c\u6210</li> <li>\u30e6\u30fc\u30b6\u30fc\u76ee\u7684\u306e\u6d17\u3044\u51fa\u3057</li> <li>\u8981\u7d04\u30ec\u30d9\u30eb\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306e\u4f5c\u6210</li> <li>\u8981\u7d04\u30ec\u30d9\u30eb\u306e\u898b\u76f4\u3057\u3068\u7d71\u5408</li> <li>\u8a73\u7d30\u5316\u3059\u308b\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306e\u9078\u629e</li> <li>\u5229\u5bb3\u95a2\u4fc2\u8005\u3068\u4fdd\u8a3c\u306e\u5b9a\u7fa9</li> <li>\u4e3b\u6210\u529f\u30b7\u30ca\u30ea\u30aa\u306e\u8a18\u8ff0</li> <li>\u4f8b\u5916\u6761\u4ef6\u306e\u6d17\u3044\u51fa\u3057</li> <li>\u62e1\u5f35\u51e6\u7406\u30b9\u30c6\u30c3\u30d7\u306e\u8a18\u8ff0</li> <li>\u8907\u96d1\u306a\u30d5\u30ed\u30fc\u306e\u5206\u5272\u3068\u7d71\u5408</li> <li>\u5168\u4f53\u306e\u6574\u7406\u3068\u898b\u76f4\u3057</li> </ol>"},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#5","title":"5. \u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8","text":""},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#_11","title":"\u5b8c\u5168\u5f62\u5f0f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8","text":"<pre><code># UC-[\u756a\u53f7]: [\u30b9\u30b3\u30fc\u30d7\u30a2\u30a4\u30b3\u30f3][\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u540d][\u30ec\u30d9\u30eb\u30a2\u30a4\u30b3\u30f3]\n\n**\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8**: [\u4e00\u822c\u7684\u306b\u8d77\u304d\u308b\u6761\u4ef6\u3084\u72b6\u6cc1\u306e\u8aac\u660e]\n\n**\u30b9\u30b3\u30fc\u30d7**: [\u8a2d\u8a08\u5bfe\u8c61\u30b7\u30b9\u30c6\u30e0]\n\n**\u30ec\u30d9\u30eb**: [\u8981\u7d04/\u30e6\u30fc\u30b6\u30fc\u76ee\u7684/\u30b5\u30d6\u6a5f\u80fd]\n\n**\u4e3b\u30a2\u30af\u30bf\u30fc**: [\u76ee\u7684\u3092\u6301\u3064\u30a2\u30af\u30bf\u30fc]\n\n**\u5229\u5bb3\u95a2\u4fc2\u8005\u3068\u5229\u76ca**:\n\n- [\u5229\u5bb3\u95a2\u4fc2\u80051]: [\u305d\u306e\u5229\u76ca]\n- [\u5229\u5bb3\u95a2\u4fc2\u80052]: [\u305d\u306e\u5229\u76ca]\n\n**\u4e8b\u524d\u6761\u4ef6**: \n\n- [\u3059\u3067\u306b\u771f\u3067\u3042\u308b\u3068\u60f3\u5b9a\u3057\u3066\u3044\u308b\u72b6\u614b]\n\n**\u30c8\u30ea\u30ac\u30fc**: [\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u3092\u958b\u59cb\u3059\u308b\u30a4\u30d9\u30f3\u30c8]\n\n**\u6700\u4f4e\u4fdd\u8a3c**: [\u5931\u6557\u6642\u3067\u3082\u5b88\u3089\u308c\u308b\u5229\u76ca]\n\n**\u6210\u529f\u6642\u4fdd\u8a3c**: [\u6210\u529f\u6642\u306b\u9054\u6210\u3055\u308c\u308b\u72b6\u614b]\n\n**\u4e3b\u6210\u529f\u30b7\u30ca\u30ea\u30aa**:\n\n1. [\u30a2\u30af\u30bf\u30fc]\u304c[\u30a2\u30af\u30b7\u30e7\u30f3]\u3059\u308b\n2. \u30b7\u30b9\u30c6\u30e0\u304c[\u51e6\u7406]\u3059\u308b\n3. ...\n\n**\u62e1\u5f35**:\n\n- 1a. [\u6761\u4ef6]: \n    - 1a1. [\u4ee3\u66ff\u51e6\u7406]\n- 2-4a. [\u3044\u3064\u3067\u3082\u767a\u751f\u3059\u308b\u6761\u4ef6]:\n    - 2-4a1. [\u51e6\u7406]\n\n**\u6280\u8853\u304a\u3088\u3073\u30c7\u30fc\u30bf\u306e\u30d0\u30ea\u30a8\u30fc\u30b7\u30e7\u30f3**:\n\n- \u30b9\u30c6\u30c3\u30d71: [\u30d0\u30ea\u30a8\u30fc\u30b7\u30e7\u30f3]\n</code></pre>"},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#xp_1","title":"\u7565\u5f0f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\uff08XP\u5411\u3051\uff09","text":"<pre><code># [\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u540d]\n\n**\u4e3b\u30a2\u30af\u30bf\u30fc**: [\u30a2\u30af\u30bf\u30fc\u540d]\n**\u30b9\u30b3\u30fc\u30d7**: [\u30b7\u30b9\u30c6\u30e0\u540d]\n**\u30ec\u30d9\u30eb**: [\u30ec\u30d9\u30eb]\n\n[\u4e3b\u6210\u529f\u30b7\u30ca\u30ea\u30aa\u3092\u6bb5\u843d\u5f62\u5f0f\u3067\u8a18\u8ff0\u3002\u30b7\u30b9\u30c6\u30e0\u306e\u632f\u308b\u821e\u3044\u3068\n\u30a2\u30af\u30bf\u30fc\u306e\u76f8\u4e92\u4f5c\u7528\u3092\u81ea\u7136\u306a\u6587\u7ae0\u3067\u8868\u73fe]\n\n[\u4ee3\u66ff\u30d1\u30b9\u3084\u4f8b\u5916\u51e6\u7406\u3092\u6bb5\u843d\u5f62\u5f0f\u3067\u8a18\u8ff0]\n\n**\u983b\u5ea6**: [\u5b9f\u884c\u983b\u5ea6]\n</code></pre>"},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#_12","title":"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u6982\u8981\uff08\u30e6\u30fc\u30b6\u30fc\u30b9\u30c8\u30fc\u30ea\u30fc\u5f62\u5f0f\uff09","text":"<pre><code># [\u6a5f\u80fd\u540d]\n\n**\u3068\u3057\u3066**: [\u30a2\u30af\u30bf\u30fc]\n**\u3057\u305f\u3044**: [\u76ee\u7684/\u6a5f\u80fd]\n**\u306a\u305c\u306a\u3089**: [\u30d3\u30b8\u30cd\u30b9\u4fa1\u5024]\n\n**\u53d7\u5165\u6761\u4ef6**:\n- [ ] [\u6761\u4ef61]\n- [ ] [\u6761\u4ef62]\n</code></pre>"},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#6","title":"6. \u30b7\u30ca\u30ea\u30aa\u306e\u66f8\u304d\u65b9","text":""},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#_13","title":"\u826f\u3044\u30b9\u30c6\u30c3\u30d7\u306e\u66f8\u304d\u65b9","text":""},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#_14","title":"\u30b9\u30c6\u30c3\u30d7\u8a18\u8ff0\u306e\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3","text":"<p>\u3084\u308b\u3079\u304d\u3053\u3068 - \u2705 \u30a2\u30af\u30bf\u30fc\u306e\u610f\u56f3\u3092\u8868\u73fe\u3059\u308b - \u2705 \u300c\u8ab0\u304c\u4f55\u3092\u3059\u308b\u300d\u3092\u660e\u78ba\u306b\u3059\u308b - \u2705 \u6210\u529f\u3059\u308b\u76ee\u7684\u3068\u3057\u3066\u8a18\u8ff0\u3059\u308b - \u2705 \u60c5\u5831\u306e\u6d41\u308c\u3092\u660e\u78ba\u306b\u3059\u308b</p> <p>\u907f\u3051\u308b\u3079\u304d\u3053\u3068 - \u274c UI\u306e\u8a73\u7d30\u3092\u8a18\u8ff0\u3059\u308b - \u274c \u300c\u30c1\u30a7\u30c3\u30af\u3059\u308b\u300d\u3067\u306f\u306a\u304f\u300c\u78ba\u8a8d\u3059\u308b\u300d - \u274c \u5b9f\u88c5\u306e\u8a73\u7d30\u306b\u8e0f\u307f\u8fbc\u3080 - \u274c IF\u6587\u3092\u4f7f\u3046\uff08\u62e1\u5f35\u306b\u8a18\u8f09\uff09</p>"},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#_15","title":"\u30b9\u30c6\u30c3\u30d7\u6570\u306e\u76ee\u5b89","text":""},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#7","title":"7. \u62e1\u5f35\u306e\u8a18\u8ff0","text":""},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#_16","title":"\u62e1\u5f35\u6761\u4ef6\u306e\u8b58\u5225","text":""},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#_17","title":"\u62e1\u5f35\u306e\u8a18\u8ff0\u5f62\u5f0f","text":"<pre><code>**\u4e3b\u6210\u529f\u30b7\u30ca\u30ea\u30aa**:\n\n1. \u30e6\u30fc\u30b6\u30fc\u304c\u5546\u54c1\u3092\u9078\u629e\u3059\u308b\n2. \u30b7\u30b9\u30c6\u30e0\u304c\u5728\u5eab\u3092\u78ba\u8a8d\u3059\u308b\n3. \u30e6\u30fc\u30b6\u30fc\u304c\u6570\u91cf\u3092\u6307\u5b9a\u3059\u308b\n4. \u30b7\u30b9\u30c6\u30e0\u304c\u5408\u8a08\u91d1\u984d\u3092\u8a08\u7b97\u3059\u308b\n5. \u30e6\u30fc\u30b6\u30fc\u304c\u6ce8\u6587\u3092\u78ba\u5b9a\u3059\u308b\n\n**\u62e1\u5f35**:\n\n- 2a. \u5728\u5eab\u304c\u306a\u3044:\n    - 2a1. \u30b7\u30b9\u30c6\u30e0\u304c\u5728\u5eab\u306a\u3057\u3092\u901a\u77e5\u3059\u308b\n    - 2a2. \u30e6\u30fc\u30b6\u30fc\u304c\u5225\u306e\u5546\u54c1\u3092\u9078\u629e\u3059\u308b\uff08\u30b9\u30c6\u30c3\u30d71\u3078\uff09\n\n- 3a. \u6570\u91cf\u304c\u5728\u5eab\u3092\u8d85\u3048\u308b:\n    - 3a1. \u30b7\u30b9\u30c6\u30e0\u304c\u5229\u7528\u53ef\u80fd\u6570\u91cf\u3092\u8868\u793a\u3059\u308b\n    - 3a2. \u30e6\u30fc\u30b6\u30fc\u304c\u6570\u91cf\u3092\u8abf\u6574\u3059\u308b\n\n- *a. \u30e6\u30fc\u30b6\u30fc\u304c\u30ad\u30e3\u30f3\u30bb\u30eb:\n    - *a1. \u30b7\u30b9\u30c6\u30e0\u304c\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u7834\u68c4\u3059\u308b\n    - *a2. \u7d42\u4e86\n</code></pre>"},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#8","title":"8. \u30c7\u30fc\u30bf\u8a18\u8ff0\u306e\u7cbe\u5ea6","text":""},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#3_1","title":"3\u6bb5\u968e\u306e\u30c7\u30fc\u30bf\u7cbe\u5ea6","text":""},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#9","title":"9. \u54c1\u8cea\u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8","text":""},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#_18","title":"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u5168\u4f53\u306e\u30c1\u30a7\u30c3\u30af\u9805\u76ee","text":"\u30ab\u30c6\u30b4\u30ea \u30c1\u30a7\u30c3\u30af\u9805\u76ee \u2713 \u30bf\u30a4\u30c8\u30eb \u52d5\u8a5e\u53e5\u3067\u76ee\u7684\u3092\u8868\u73fe\u3057\u3066\u3044\u308b\u304b \u25a1 \u30b7\u30b9\u30c6\u30e0\u304c\u9054\u6210\u53ef\u80fd\u306a\u76ee\u7684\u304b \u25a1 \u30b9\u30b3\u30fc\u30d7 \u660e\u78ba\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u304b \u25a1 \u30d6\u30e9\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u3068\u3057\u3066\u6271\u3063\u3066\u3044\u308b\u304b \u25a1 \u30ec\u30d9\u30eb \u9069\u5207\u306a\u30ec\u30d9\u30eb\u304c\u9078\u629e\u3055\u308c\u3066\u3044\u308b\u304b \u25a1 \u5185\u5bb9\u304c\u30ec\u30d9\u30eb\u3068\u4e00\u81f4\u3057\u3066\u3044\u308b\u304b \u25a1 \u4e3b\u30a2\u30af\u30bf\u30fc \u632f\u308b\u821e\u3044\u3092\u6301\u3063\u3066\u3044\u308b\u304b \u25a1 \u30b7\u30b9\u30c6\u30e0\u3078\u306e\u660e\u78ba\u306a\u76ee\u7684\u304c\u3042\u308b\u304b \u25a1 \u4e8b\u524d\u6761\u4ef6 \u5fc5\u9808\u304b\u3064\u691c\u8a3c\u53ef\u80fd\u304b \u25a1 \u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u5185\u3067\u518d\u30c1\u30a7\u30c3\u30af\u3057\u3066\u3044\u306a\u3044\u304b \u25a1 \u4fdd\u8a3c \u5229\u5bb3\u95a2\u4fc2\u8005\u306e\u5229\u76ca\u304c\u5b88\u3089\u308c\u3066\u3044\u308b\u304b \u25a1 \u6210\u529f\u6642\u306b\u76ee\u7684\u304c\u9054\u6210\u3055\u308c\u308b\u304b \u25a1 \u30b7\u30ca\u30ea\u30aa 3\u301c9\u30b9\u30c6\u30c3\u30d7\u306b\u53ce\u307e\u3063\u3066\u3044\u308b\u304b \u25a1 \u30c8\u30ea\u30ac\u30fc\u304b\u3089\u4fdd\u8a3c\u307e\u3067\u9032\u3093\u3067\u3044\u308b\u304b \u25a1"},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#_19","title":"\u30b9\u30c6\u30c3\u30d7\u8a18\u8ff0\u306e\u30c1\u30a7\u30c3\u30af\u9805\u76ee","text":"<ul> <li>\u25a1 \u6210\u529f\u3059\u308b\u76ee\u7684\u3068\u3057\u3066\u8868\u73fe\u3055\u308c\u3066\u3044\u308b\u304b</li> <li>\u25a1 \u30a2\u30af\u30bf\u30fc\u304c\u660e\u78ba\u304b</li> <li>\u25a1 \u610f\u56f3\u304c\u660e\u78ba\u304b</li> <li>\u25a1 UI\u8a2d\u8a08\u3092\u542b\u3093\u3067\u3044\u306a\u3044\u304b</li> <li>\u25a1 \u60c5\u5831\u306e\u6d41\u308c\u304c\u660e\u78ba\u304b</li> <li>\u25a1 \u300c\u78ba\u8a8d\u3059\u308b\u300d\u3092\u4f7f\u3063\u3066\u3044\u308b\u304b\uff08\u300c\u30c1\u30a7\u30c3\u30af\u3059\u308b\u300d\u3067\u306f\u306a\u304f\uff09</li> </ul>"},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#10-xp","title":"10. XP\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u306e\u6d3b\u7528","text":""},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#_20","title":"\u30e6\u30fc\u30b6\u30fc\u30b9\u30c8\u30fc\u30ea\u30fc\u3068\u306e\u9023\u643a","text":""},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#_21","title":"\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u8a08\u753b\u3067\u306e\u5229\u7528","text":"<ol> <li>\u30ea\u30ea\u30fc\u30b9\u8a08\u753b\u6642</li> <li>\u8981\u7d04\u30ec\u30d9\u30eb\u306e\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u3067\u5168\u4f53\u50cf\u3092\u628a\u63e1</li> <li> <p>\u5927\u307e\u304b\u306a\u898f\u6a21\u898b\u7a4d\u3082\u308a</p> </li> <li> <p>\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u8a08\u753b\u6642</p> </li> <li>\u30e6\u30fc\u30b6\u30fc\u76ee\u7684\u30ec\u30d9\u30eb\u3092\u30b9\u30c8\u30fc\u30ea\u30fc\u306b\u5206\u89e3</li> <li> <p>\u8a73\u7d30\u306a\u898b\u7a4d\u3082\u308a\u3068\u512a\u5148\u9806\u4f4d\u4ed8\u3051</p> </li> <li> <p>\u5b9f\u88c5\u6642</p> </li> <li>\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u3092\u8a2d\u8a08\u30ac\u30a4\u30c9\u3068\u3057\u3066\u5229\u7528</li> <li>\u53d7\u5165\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u306e\u57fa\u6e96</li> </ol>"},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#_22","title":"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u304b\u3089\u6a5f\u80fd\u30ea\u30b9\u30c8\u3078","text":"<pre><code>## UC-001: \u5546\u54c1\u3092\u6ce8\u6587\u3059\u308b\n\n### \u62bd\u51fa\u3055\u308c\u305f\u6a5f\u80fd\u30ea\u30b9\u30c8\n\n| ID | \u6a5f\u80fd | \u512a\u5148\u5ea6 | \u30b9\u30c8\u30fc\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8 |\n|----|------|--------|------------------|\n| F1.1 | \u5546\u54c1\u691c\u7d22\u6a5f\u80fd | \u5fc5\u9808 | 3 |\n| F1.2 | \u30ab\u30fc\u30c8\u8ffd\u52a0\u6a5f\u80fd | \u5fc5\u9808 | 2 |\n| F1.3 | \u5728\u5eab\u78ba\u8a8d\u6a5f\u80fd | \u5fc5\u9808 | 3 |\n| F1.4 | \u914d\u9001\u5148\u5165\u529b\u6a5f\u80fd | \u5fc5\u9808 | 2 |\n| F1.5 | \u652f\u6255\u3044\u51e6\u7406\u6a5f\u80fd | \u5fc5\u9808 | 5 |\n| F1.6 | \u6ce8\u6587\u78ba\u8a8d\u30e1\u30fc\u30eb\u9001\u4fe1 | \u91cd\u8981 | 2 |\n| F1.7 | \u6ce8\u6587\u5c65\u6b74\u4fdd\u5b58 | \u91cd\u8981 | 1 |\n</code></pre>"},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#11","title":"11. \u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u3078\u306e\u5909\u63db","text":""},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#_23","title":"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u30d9\u30fc\u30b9\u306e\u30c6\u30b9\u30c8\u8a2d\u8a08","text":""},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#_24","title":"\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8","text":"<pre><code>## \u30c6\u30b9\u30c8\u30b1\u30fc\u30b9: [\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u540d]_[\u30d1\u30b9]\n\n**\u57fa\u306b\u306a\u308b\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9**: UC-XXX\n**\u30c6\u30b9\u30c8\u30d1\u30b9**: \u4e3b\u6210\u529f\u30b7\u30ca\u30ea\u30aa/\u62e1\u5f35XX\n\n**\u4e8b\u524d\u6761\u4ef6**:\n- [\u30b7\u30b9\u30c6\u30e0\u306e\u521d\u671f\u72b6\u614b]\n- [\u5fc5\u8981\u306a\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf]\n\n**\u5165\u529b**:\n1. [\u5165\u529b\u30c7\u30fc\u30bf1]\n2. [\u5165\u529b\u30c7\u30fc\u30bf2]\n\n**\u671f\u5f85\u7d50\u679c**:\n- [\u671f\u5f85\u3055\u308c\u308b\u51fa\u529b]\n- [\u671f\u5f85\u3055\u308c\u308b\u72b6\u614b\u5909\u5316]\n- [\u671f\u5f85\u3055\u308c\u308b\u526f\u4f5c\u7528]\n\n**\u4e8b\u5f8c\u6761\u4ef6**:\n- [\u30b7\u30b9\u30c6\u30e0\u306e\u6700\u7d42\u72b6\u614b]\n</code></pre>"},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#12_1","title":"12. \u3088\u304f\u3042\u308b\u554f\u984c\u3068\u5bfe\u7b56","text":""},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#_25","title":"\u554f\u984c\u30d1\u30bf\u30fc\u30f3\u3068\u89e3\u6c7a\u7b56","text":"\u554f\u984c \u75c7\u72b6 \u89e3\u6c7a\u7b56 \u30b9\u30b3\u30fc\u30d7\u4e0d\u660e\u78ba \u8981\u6c42\u304c\u5897\u3048\u7d9a\u3051\u308b In/Out\u30ea\u30b9\u30c8\u4f5c\u6210 \u30ec\u30d9\u30eb\u6df7\u5728 \u30b9\u30c6\u30c3\u30d7\u304c\u4e0d\u5747\u4e00 \u30ec\u30d9\u30eb\u30a2\u30a4\u30b3\u30f3\u4f7f\u7528 UI\u8a18\u8ff0 \u5b9f\u88c5\u306b\u4f9d\u5b58 \u610f\u56f3\u306e\u8a18\u8ff0\u306b\u5909\u66f4 \u9577\u3059\u304e\u308b 10\u30b9\u30c6\u30c3\u30d7\u4ee5\u4e0a \u30b5\u30d6\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u5206\u5272 \u66d6\u6627\u306a\u8a18\u8ff0 \u89e3\u91c8\u304c\u8907\u6570 \u5177\u4f53\u4f8b\u306e\u8ffd\u52a0 \u4fdd\u8a3c\u306a\u3057 \u76ee\u7684\u304c\u4e0d\u660e \u5229\u5bb3\u95a2\u4fc2\u8005\u5206\u6790"},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#_26","title":"\u30a2\u30f3\u30c1\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#_27","title":"\u307e\u3068\u3081","text":""},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#_28","title":"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u4f5c\u6210\u306e\u539f\u5247","text":"<ol> <li>\u8aad\u307f\u3084\u3059\u3055\u512a\u5148</li> <li>\u5b8c\u74a7\u3055\u3088\u308a\u7406\u89e3\u3057\u3084\u3059\u3055</li> <li> <p>\u81ea\u7136\u306a\u8a00\u8449\u3067\u8a18\u8ff0</p> </li> <li> <p>\u6bb5\u968e\u7684\u8a73\u7d30\u5316</p> </li> <li>\u5e83\u304f\u6d45\u304f\u304b\u3089\u59cb\u3081\u308b</li> <li> <p>\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u6df1\u5800\u308a</p> </li> <li> <p>\u9069\u5207\u306a\u30ec\u30d9\u30eb\u9078\u629e</p> </li> <li>\u30e6\u30fc\u30b6\u30fc\u76ee\u7684\u3092\u4e2d\u5fc3\u306b</li> <li> <p>\u30b5\u30d6\u6a5f\u80fd\u306f\u6700\u5c0f\u9650\u306b</p> </li> <li> <p>XP\u3068\u306e\u7d71\u5408</p> </li> <li>\u30e6\u30fc\u30b6\u30fc\u30b9\u30c8\u30fc\u30ea\u30fc\u3068\u9023\u643a</li> <li>\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u8a08\u753b\u3067\u6d3b\u7528</li> <li>\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u306e\u57fa\u6e96</li> </ol>"},{"location":"reference/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E4%BD%9C%E6%88%90%E3%82%AC%E3%82%A4%E3%83%89/#_29","title":"\u30af\u30a4\u30c3\u30af\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9","text":"<p>\u30a2\u30a4\u30b3\u30f3\u51e1\u4f8b - \ud83c\udfe2 \u7d44\u7e54\u30b9\u30b3\u30fc\u30d7 - \ud83d\udcbb \u30b7\u30b9\u30c6\u30e0\u30b9\u30b3\u30fc\u30d7 - \ud83d\udcbe \u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u30b9\u30b3\u30fc\u30d7 - \u2601\ufe0f \u8981\u7d04\u30ec\u30d9\u30eb - \ud83c\udf0a \u30e6\u30fc\u30b6\u30fc\u76ee\u7684\u30ec\u30d9\u30eb - \ud83d\udc1f \u30b5\u30d6\u6a5f\u80fd\u30ec\u30d9\u30eb</p> <p>\u8a18\u8ff0\u306e\u9ec4\u91d1\u5f8b - 3\u301c9\u30b9\u30c6\u30c3\u30d7 - \u30a2\u30af\u30bf\u30fc\u306e\u610f\u56f3\u3092\u8a18\u8ff0 - UI\u8a73\u7d30\u306f\u66f8\u304b\u306a\u3044 - \u6210\u529f\u3059\u308b\u76ee\u7684\u3068\u3057\u3066\u8868\u73fe</p> <p>\u3053\u306e\u30ac\u30a4\u30c9\u3092\u53c2\u8003\u306b\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u9069\u3057\u305f\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u3092\u4f5c\u6210\u3057\u3001XP\u958b\u767a\u30d7\u30ed\u30bb\u30b9\u306b\u7d71\u5408\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/","title":"\u30ea\u30ea\u30fc\u30b9\u30fb\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u8a08\u753b\u30ac\u30a4\u30c9","text":""},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#_2","title":"\u306f\u3058\u3081\u306b","text":"<p>\u3053\u306e\u30ac\u30a4\u30c9\u306f\u3001XP\u30d7\u30ed\u30b0\u30e9\u30de\u5411\u3051\u306e\u30ea\u30ea\u30fc\u30b9\u8a08\u753b\u3068\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u8a08\u753b\u306e\u5b9f\u7528\u7684\u306a\u4f5c\u6210\u624b\u6cd5\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002\u30a2\u30b8\u30e3\u30a4\u30eb\u306a\u898b\u7a4d\u3082\u308a\u3068\u8a08\u753b\u3065\u304f\u308a\u306e\u539f\u5247\u306b\u57fa\u3065\u304d\u3001\u73fe\u5834\u3067\u5373\u5ea7\u306b\u6d3b\u7528\u3067\u304d\u308b\u5177\u4f53\u7684\u306a\u30b9\u30c6\u30c3\u30d7\u3068\u30c4\u30fc\u30eb\u3092\u542b\u3093\u3067\u3044\u307e\u3059\u3002</p>"},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#_3","title":"\u8a08\u753b\u306e\u57fa\u672c\u6982\u5ff5","text":""},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#_4","title":"\u30a2\u30b8\u30e3\u30a4\u30eb\u306a\u8a08\u753b\u3065\u304f\u308a\u306e\u539f\u5247","text":"<ul> <li>\u8a08\u753b\u3088\u308a\u3082\u8a08\u753b\u3065\u304f\u308a\u3092\u91cd\u8996\uff1a\u8a08\u753b\u306f\u751f\u304d\u305f\u6587\u66f8\u3068\u3057\u3066\u7d99\u7d9a\u7684\u306b\u66f4\u65b0</li> <li>\u5909\u5316\u3092\u4fc3\u9032\uff1a\u8981\u4ef6\u3084\u72b6\u6cc1\u306e\u5909\u5316\u306b\u67d4\u8edf\u306b\u5bfe\u5fdc</li> <li>\u30d5\u30a3\u30fc\u30c1\u30e3\u4e2d\u5fc3\uff1a\u9867\u5ba2\u4fa1\u5024\u3092\u63d0\u4f9b\u3059\u308b\u30d5\u30a3\u30fc\u30c1\u30e3\u3092\u8a08\u753b\u306e\u5358\u4f4d\u306b</li> </ul>"},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#_5","title":"\u30a2\u30b8\u30e3\u30a4\u30eb\u306a\u8a08\u753b\u3065\u304f\u308a\u30d7\u30ed\u30bb\u30b9","text":""},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#1","title":"1. \u30ea\u30ea\u30fc\u30b9\u8a08\u753b\u4f5c\u6210\u30d7\u30ed\u30bb\u30b9","text":""},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#11","title":"1.1 \u30ea\u30ea\u30fc\u30b9\u8a08\u753b\u306e\u76ee\u7684","text":"<p>\u30ea\u30ea\u30fc\u30b9\u8a08\u753b\u306f\u300c\u3044\u3064\u3069\u308c\u3060\u3051\u306e\u6210\u679c\u304c\u51fa\u305b\u308b\u304b\u300d\u3092\u5224\u65ad\u3059\u308b\u3053\u3068\u3067\u3059\u3002</p>"},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#12","title":"1.2 \u30ea\u30ea\u30fc\u30b9\u8a08\u753b\u4f5c\u6210\u624b\u9806","text":""},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#1_1","title":"\u30b9\u30c6\u30c3\u30d71\uff1a\u6e80\u8db3\u6761\u4ef6\u306e\u6c7a\u5b9a","text":"<p>\u30d7\u30ed\u30c0\u30af\u30c8\u30aa\u30fc\u30ca\u30fc\u3068\u5354\u529b\u3057\u3066\u4ee5\u4e0b\u3092\u5b9a\u7fa9\uff1a</p> <ul> <li>\u30b9\u30b3\u30fc\u30d7\uff1a\u3069\u3093\u306a\u30d5\u30a3\u30fc\u30c1\u30e3\u3092\u542b\u3080\u304b</li> <li>\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\uff1a\u3044\u3064\u307e\u3067\u306b\u5b8c\u6210\u3055\u305b\u308b\u304b</li> <li>\u30ea\u30bd\u30fc\u30b9\uff1a\u3069\u306e\u3088\u3046\u306a\u30c1\u30fc\u30e0\u69cb\u6210\u3067\u958b\u767a\u3059\u308b\u304b</li> </ul>"},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#2","title":"\u30b9\u30c6\u30c3\u30d72\uff1a\u30e6\u30fc\u30b6\u30fc\u30b9\u30c8\u30fc\u30ea\u30fc\u306e\u898b\u7a4d\u3082\u308a","text":"<p>\u30b9\u30c8\u30fc\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\u6cd5\u3092\u63a8\u5968</p> <pre><code># \u898b\u7a4d\u3082\u308a\u30b9\u30b1\u30fc\u30eb\u4f8b\n- 1, 2, 3, 5, 8, 13, 20, 40, 100\n\n# \u30d7\u30e9\u30f3\u30cb\u30f3\u30b0\u30dd\u30fc\u30ab\u30fc\u306e\u9032\u3081\u65b9\n1. \u30b9\u30c8\u30fc\u30ea\u30fc\u3092\u8aad\u307f\u4e0a\u3052\u3001\u8cea\u7591\u5fdc\u7b54\n2. \u5168\u54e1\u304c\u540c\u6642\u306b\u30dd\u30a4\u30f3\u30c8\u30ab\u30fc\u30c9\u3092\u63d0\u793a\n3. \u6700\u5927\u5024\u3068\u6700\u5c0f\u5024\u306e\u4eba\u304c\u7406\u7531\u3092\u8aac\u660e\n4. \u5408\u610f\u306b\u81f3\u308b\u307e\u3067\u8b70\u8ad6\u30fb\u518d\u898b\u7a4d\u3082\u308a\n</code></pre>"},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#3","title":"\u30b9\u30c6\u30c3\u30d73\uff1a\u30d9\u30ed\u30b7\u30c6\u30a3\u306e\u898b\u7a4d\u3082\u308a","text":"<p>\u65b0\u30c1\u30fc\u30e0\u306e\u5834\u5408 - \u4ee3\u8868\u7684\u306a\u30b9\u30c8\u30fc\u30ea\u30fc\u3092\u30bf\u30b9\u30af\u306b\u5206\u89e3 - \u7406\u60f3\u6642\u9593\u3067\u898b\u7a4d\u3082\u308a - \u30c1\u30fc\u30e0\u306e\u4f5c\u696d\u53ef\u80fd\u6642\u9593\uff081\u65e54-6\u6642\u9593\uff09\u3068\u7167\u5408</p> <p>\u65e2\u5b58\u30c1\u30fc\u30e0\u306e\u5834\u5408 - \u904e\u53bb3-8\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u5e73\u5747\u5024\u3092\u4f7f\u7528 - \u4ee5\u4e0b\u304c\u540c\u3058\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\uff1a   - \u6280\u8853\u30b9\u30bf\u30c3\u30af   - \u30c1\u30fc\u30e0\u30e1\u30f3\u30d0\u30fc   - \u696d\u52d9\u5206\u91ce   - \u958b\u767a\u74b0\u5883</p>"},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#4","title":"\u30b9\u30c6\u30c3\u30d74\uff1a\u512a\u5148\u9806\u4f4d\u306e\u6c7a\u5b9a","text":"<p>4\u3064\u306e\u8a55\u4fa1\u8ef8</p> <ol> <li>\u91d1\u92ad\u4fa1\u5024\uff1a\u65b0\u898f\u58f2\u4e0a\u3001\u52b9\u7387\u5316\u52b9\u679c</li> <li>\u30b3\u30b9\u30c8\uff1a\u958b\u767a\u30fb\u904b\u7528\u30fb\u30b5\u30dd\u30fc\u30c8\u30b3\u30b9\u30c8</li> <li>\u77e5\u8b58\u7fd2\u5f97\uff1a\u30d7\u30ed\u30c0\u30af\u30c8\u30ca\u30ec\u30c3\u30b8\u30fb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30ca\u30ec\u30c3\u30b8</li> <li>\u30ea\u30b9\u30af\u8efd\u6e1b\uff1a\u6280\u8853\u7684\u30fb\u30d3\u30b8\u30cd\u30b9\u7684\u30ea\u30b9\u30af\u306e\u4f4e\u6e1b</li> </ol>"},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#13","title":"1.3 \u30ea\u30ea\u30fc\u30b9\u8a08\u753b\u306e\u66f4\u65b0","text":"<ul> <li>\u5404\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u958b\u59cb\u6642\u306b\u898b\u76f4\u3057</li> <li>\u30d9\u30ed\u30b7\u30c6\u30a3\u306e\u5b9f\u7e3e\u5024\u3067\u8abf\u6574</li> <li>\u30b9\u30b3\u30fc\u30d7\u5909\u66f4\u306e\u53cd\u6620</li> </ul>"},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#2_1","title":"2. \u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u8a08\u753b\u4f5c\u6210\u30d7\u30ed\u30bb\u30b9","text":""},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#21","title":"2.1 \u30ea\u30ea\u30fc\u30b9\u8a08\u753b\u3068\u306e\u9055\u3044","text":"\u9805\u76ee \u30ea\u30ea\u30fc\u30b9\u8a08\u753b \u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u8a08\u753b \u5bfe\u8c61\u671f\u9593 3-6\u30f6\u6708 1-4\u9031\u9593 \u69cb\u6210\u8981\u7d20 \u30e6\u30fc\u30b6\u30fc\u30b9\u30c8\u30fc\u30ea\u30fc \u30bf\u30b9\u30af \u898b\u7a4d\u5358\u4f4d \u30b9\u30c8\u30fc\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8/\u7406\u60f3\u65e5 \u7406\u60f3\u6642\u9593"},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#22","title":"2.2 \u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u8a08\u753b\u4f5c\u6210\u624b\u9806","text":""},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#_6","title":"\u30b3\u30df\u30c3\u30c8\u30e1\u30f3\u30c8\u99c6\u52d5\u65b9\u5f0f\uff08\u63a8\u5968\uff09","text":""},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#1_2","title":"\u30b9\u30c6\u30c3\u30d71\uff1a\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u30b4\u30fc\u30eb\u306e\u8a2d\u5b9a","text":"<ul> <li>1-2\u884c\u3067\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u3067\u9054\u6210\u3059\u308b\u3053\u3068\u3092\u8a18\u8ff0</li> <li>\u30c1\u30fc\u30e0\u5168\u54e1\u304c\u7406\u89e3\u3067\u304d\u308b\u660e\u78ba\u306a\u76ee\u6a19</li> <li>\u30d5\u30a3\u30fc\u30c1\u30e3\u306e\u4fa1\u5024\u306b\u7126\u70b9\u3092\u5f53\u3066\u308b</li> </ul>"},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#2_2","title":"\u30b9\u30c6\u30c3\u30d72\uff1a\u30b9\u30c8\u30fc\u30ea\u30fc\u306e\u30bf\u30b9\u30af\u5206\u89e3","text":"<p>\u826f\u3044\u30bf\u30b9\u30af\u306e\u7279\u5fb4 - 4-16\u7406\u60f3\u6642\u9593\u3067\u5b8c\u4e86\u53ef\u80fd - \u5177\u4f53\u7684\u3067\u5b9f\u884c\u53ef\u80fd - \u6e2c\u5b9a\u53ef\u80fd\uff08\u5b8c\u4e86/\u672a\u5b8c\u4e86\u304c\u5224\u65ad\u53ef\u80fd\uff09</p> <p>\u30bf\u30b9\u30af\u306e\u7a2e\u985e - \u958b\u767a\u30bf\u30b9\u30af\uff08\u8a2d\u8a08\u3001\u5b9f\u88c5\u3001\u5358\u4f53\u30c6\u30b9\u30c8\uff09 - \u7d71\u5408\u30bf\u30b9\u30af\uff08\u30b7\u30b9\u30c6\u30e0\u7d71\u5408\u3001\u7d71\u5408\u30c6\u30b9\u30c8\uff09 - \u305d\u306e\u4ed6\uff08\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u4f5c\u6210\u3001\u74b0\u5883\u69cb\u7bc9\uff09 - \u30b9\u30d1\u30a4\u30af\uff08\u8abf\u67fb\u30fb\u691c\u8a3c\u30bf\u30b9\u30af\uff09</p>"},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#3_1","title":"\u30b9\u30c6\u30c3\u30d73\uff1a\u7406\u60f3\u6642\u9593\u3067\u306e\u898b\u7a4d\u3082\u308a","text":"<pre><code># \u7406\u60f3\u6642\u9593\u306e\u539f\u5247\n- \u5272\u308a\u8fbc\u307f\u3084\u4f1a\u8b70\u3092\u9664\u3044\u305f\u7d14\u7c8b\u306a\u4f5c\u696d\u6642\u9593\n- \u500b\u4eba\u5dee\u306f\u8003\u616e\u3057\u306a\u3044\uff08\u30c1\u30fc\u30e0\u5e73\u5747\u3067\u8003\u3048\u308b\uff09\n- 1\u3064\u306e\u5024\u3067\u898b\u7a4d\u3082\u308b\uff08\u5e45\u3092\u6301\u305f\u305b\u306a\u3044\uff09\n\n# \u898b\u7a4d\u3082\u308a\u306e\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3\n- 1-2\u6642\u9593\uff1a\u7b80\u5355\u306a\u4fee\u6b63\u3001\u8a2d\u5b9a\u5909\u66f4\n- 4-8\u6642\u9593\uff1a\u6a19\u6e96\u7684\u306a\u6a5f\u80fd\u5b9f\u88c5\n- 12-16\u6642\u9593\uff1a\u8907\u96d1\u306a\u6a5f\u80fd\u3001\u65b0\u6280\u8853\u306e\u7fd2\u5f97\u3092\u4f34\u3046\n</code></pre>"},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#23","title":"2.3 \u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u5b9f\u884c","text":""},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#_7","title":"\u30c7\u30a4\u30ea\u30fc\u30b9\u30bf\u30f3\u30c9\u30a2\u30c3\u30d7","text":"<p>\u6bce\u65e5\u306e\u9032\u6357\u78ba\u8a8d\u3067\u4ee5\u4e0b\u3092\u5171\u6709\uff1a - \u6628\u65e5\u3084\u3063\u305f\u3053\u3068 - \u4eca\u65e5\u3084\u308b\u3053\u3068 - \u969c\u5bb3\u30fb\u30d6\u30ed\u30c3\u30ab\u30fc</p>"},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#_8","title":"\u30bf\u30b9\u30af\u30dc\u30fc\u30c9\u306e\u6d3b\u7528","text":"<pre><code># \u30bf\u30b9\u30af\u30dc\u30fc\u30c9\u69cb\u6210\n| TODO | \u4f5c\u696d\u4e2d | \u30ec\u30d3\u30e5\u30fc | \u5b8c\u4e86 |\n|------|--------|----------|------|\n| \u30bf\u30b9\u30af1 | \u30bf\u30b9\u30af2 | \u30bf\u30b9\u30af3 | \u30bf\u30b9\u30af4 |\n</code></pre>"},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#3_2","title":"3. \u898b\u7a4d\u3082\u308a\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","text":""},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#31-vs","title":"3.1 \u30b9\u30c8\u30fc\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8 vs \u7406\u60f3\u65e5","text":"<p>\u30b9\u30c8\u30fc\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\u306e\u5229\u70b9 - \u7d14\u7c8b\u306a\u898f\u6a21\u306e\u898b\u7a4d\u3082\u308a - \u30c1\u30fc\u30e0\u30b9\u30ad\u30eb\u5411\u4e0a\u306b\u3088\u308b\u518d\u898b\u7a4d\u3082\u308a\u304c\u4e0d\u8981 - \u30c1\u30fc\u30e0\u6a2a\u65ad\u3067\u306e\u6bd4\u8f03\u304c\u53ef\u80fd - \u76f8\u5bfe\u898b\u7a4d\u3082\u308a\u3067\u7cbe\u5ea6\u304c\u9ad8\u3044</p> <p>\u7406\u60f3\u65e5\u306e\u5229\u70b9 - \u521d\u5fc3\u8005\u306b\u7406\u89e3\u3057\u3084\u3059\u3044 - \u6642\u9593\u611f\u899a\u3068\u306e\u5bfe\u5fdc\u304c\u76f4\u611f\u7684</p>"},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#32","title":"3.2 \u898b\u7a4d\u3082\u308a\u7cbe\u5ea6\u306e\u5411\u4e0a","text":"<p>\u4e0d\u78ba\u5b9f\u6027\u30b3\u30fc\u30f3\u306e\u6d3b\u7528</p> <p></p> <p>\u898b\u7a4d\u3082\u308a\u306e\u6539\u5584\u65b9\u6cd5 - \u904e\u53bb\u306e\u5b9f\u7e3e\u30c7\u30fc\u30bf\u3092\u84c4\u7a4d - \u898b\u7a4d\u3082\u308a\u3068\u5b9f\u7e3e\u306e\u5dee\u5206\u3092\u5206\u6790 - \u30c1\u30fc\u30e0\u3067\u898b\u7a4d\u3082\u308a\u57fa\u6e96\u3092\u7d71\u4e00</p>"},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#33","title":"3.3 \u518d\u898b\u7a4d\u3082\u308a\u306e\u30bf\u30a4\u30df\u30f3\u30b0","text":"<p>\u4ee5\u4e0b\u306e\u5834\u5408\u306b\u518d\u898b\u7a4d\u3082\u308a\u3092\u5b9f\u65bd\uff1a - \u30b9\u30c8\u30fc\u30ea\u30fc\u306e\u76f8\u5bfe\u7684\u306a\u5927\u304d\u3055\u304c\u5909\u308f\u3063\u305f - \u65b0\u3057\u3044\u6280\u8853\u30fb\u696d\u52d9\u77e5\u8b58\u3092\u7fd2\u5f97\u3057\u305f - \u30c1\u30fc\u30e0\u69cb\u6210\u304c\u5927\u304d\u304f\u5909\u308f\u3063\u305f</p> <p>\u6ce8\u610f\uff1a\u9032\u6357\u306e\u9045\u308c\u306e\u307f\u3067\u306f\u518d\u898b\u7a4d\u3082\u308a\u3057\u306a\u3044</p>"},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#4_1","title":"4. \u9032\u6357\u7ba1\u7406\u3068\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0","text":""},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#40","title":"4.0 \u5168\u4f53\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u7ba1\u7406","text":"<p>\u30ea\u30ea\u30fc\u30b9\u5168\u4f53\u306e\u30ac\u30f3\u30c8\u30c1\u30e3\u30fc\u30c8</p> <pre><code>gantt\n    title \u30ea\u30ea\u30fc\u30b9\u8a08\u753b\u5168\u4f53\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\uff086\u30f6\u6708\uff09\n    dateFormat  YYYY-MM-DD\n\n    section \u30ea\u30ea\u30fc\u30b91\n    \u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f31\uff08\u8a08\u753b\u30fb\u74b0\u5883\u69cb\u7bc9\uff09     :done,    iter1, 2024-01-01, 2w\n    \u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f32\uff08\u57fa\u672c\u6a5f\u80fd\u958b\u767a\uff09       :done,    iter2, after iter1, 2w\n    \u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f33\uff08\u30b3\u30a2\u6a5f\u80fd\u5b9f\u88c5\uff09       :active,  iter3, after iter2, 2w\n    \u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f34\uff08\u7d71\u5408\u30fb\u6539\u5584\uff09         :         iter4, after iter3, 2w\n\n    section \u30ea\u30ea\u30fc\u30b92\n    \u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f35\uff08\u65b0\u6a5f\u80fd\u958b\u767a\uff09         :         iter5, after iter4, 2w\n    \u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f36\uff08\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6539\u5584\uff09  :         iter6, after iter5, 2w\n    \u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f37\uff08UI/UX\u6539\u5584\uff09         :         iter7, after iter6, 2w\n    \u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f38\uff08\u30d0\u30b0\u4fee\u6b63\u30fb\u5b89\u5b9a\u5316\uff09    :         iter8, after iter7, 2w\n\n    section \u30ea\u30ea\u30fc\u30b93\n    \u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f39\uff08\u62e1\u5f35\u6a5f\u80fd\u958b\u767a\uff09       :         iter9, after iter8, 2w\n    \u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f310\uff08\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5f37\u5316\uff09   :         iter10, after iter9, 2w\n    \u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f311\uff08\u6700\u7d42\u7d71\u5408\uff09          :         iter11, after iter10, 2w\n    \u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f312\uff08\u30ea\u30ea\u30fc\u30b9\u6e96\u5099\uff09      :crit,    iter12, after iter11, 2w\n\n    section \u30de\u30a4\u30eb\u30b9\u30c8\u30fc\u30f3\n    \u30ea\u30ea\u30fc\u30b91.0\uff08MVP\uff09                  :milestone, m1, after iter4, 0d\n    \u30ea\u30ea\u30fc\u30b92.0\uff08\u6a5f\u80fd\u62e1\u5f35\u7248\uff09             :milestone, m2, after iter8, 0d\n    \u30ea\u30ea\u30fc\u30b93.0\uff08\u5b8c\u6210\u7248\uff09                :milestone, m3, after iter12, 0d</code></pre> <p>\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u5185\u306e\u30b9\u30c8\u30fc\u30ea\u30fc\u9032\u6357\u30ac\u30f3\u30c8\u30c1\u30e3\u30fc\u30c8</p> <pre><code>gantt\n    title \u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f33\u306e\u8a73\u7d30\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\uff082\u9031\u9593\uff09\n    dateFormat  YYYY-MM-DD\n    axisFormat  %m/%d\n\n    section \u30e6\u30fc\u30b6\u30fc\u7ba1\u7406\n    \u30ed\u30b0\u30a4\u30f3\u6a5f\u80fd            :done,    story1, 2024-02-01, 3d\n    \u30e6\u30fc\u30b6\u30fc\u767b\u9332            :active,  story2, after story1, 2d\n    \u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8       :         story3, after story2, 2d\n\n    section \u5546\u54c1\u7ba1\u7406\n    \u5546\u54c1\u4e00\u89a7\u8868\u793a            :done,    story4, 2024-02-01, 2d\n    \u5546\u54c1\u8a73\u7d30\u8868\u793a            :active,  story5, after story4, 2d\n    \u5546\u54c1\u691c\u7d22\u6a5f\u80fd            :         story6, after story5, 3d\n\n    section \u6ce8\u6587\u51e6\u7406\n    \u30ab\u30fc\u30c8\u6a5f\u80fd              :         story7, 2024-02-05, 3d\n    \u6ce8\u6587\u78ba\u8a8d\u753b\u9762            :         story8, after story7, 2d\n    \u6c7a\u6e08\u51e6\u7406                :crit,    story9, after story8, 2d\n\n    section \u5171\u901a\u30bf\u30b9\u30af\n    \u30c7\u30a4\u30ea\u30fc\u30b9\u30bf\u30f3\u30c9\u30a2\u30c3\u30d7   :daily,   2024-02-01, 10d\n    \u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u30ec\u30d3\u30e5\u30fc   :milestone, review, 2024-02-14, 0d</code></pre>"},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#41","title":"4.1 \u30d9\u30ed\u30b7\u30c6\u30a3\u306e\u8a08\u7b97","text":"<p>\u30aa\u30fc\u30eb\u30fb\u30aa\u30a2\u30fb\u30ca\u30c3\u30b7\u30f3\u30b0\u65b9\u5f0f - \u5b8c\u5168\u306b\u5b8c\u4e86\u3057\u305f\u30b9\u30c8\u30fc\u30ea\u30fc\u306e\u307f\u30dd\u30a4\u30f3\u30c8\u52a0\u7b97 - \u672a\u5b8c\u4e86\u30b9\u30c8\u30fc\u30ea\u30fc\u306f\u30bc\u30ed\u30dd\u30a4\u30f3\u30c8</p> <pre><code>xychart-beta\n    title \"\u30d9\u30ed\u30b7\u30c6\u30a3\u63a8\u79fb\"\n    x-axis [\"\u30a4\u30c61\", \"\u30a4\u30c62\", \"\u30a4\u30c63\", \"\u30a4\u30c64\", \"\u30a4\u30c65\", \"\u30a4\u30c66\"]\n    y-axis \"\u30b9\u30c8\u30fc\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\" 0 --&gt; 25\n    bar [15, 18, 14, 19, 17, 20]\n    line [17, 17, 17, 17, 17, 17]</code></pre>"},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#42","title":"4.2 \u30d0\u30fc\u30f3\u30c0\u30a6\u30f3\u30c1\u30e3\u30fc\u30c8","text":"<p>\u30ea\u30ea\u30fc\u30b9\u30d0\u30fc\u30f3\u30c0\u30a6\u30f3\u30c1\u30e3\u30fc\u30c8</p> <pre><code>xychart-beta\n    title \"\u30ea\u30ea\u30fc\u30b9\u30d0\u30fc\u30f3\u30c0\u30a6\u30f3\u30c1\u30e3\u30fc\u30c8\"\n    x-axis [\"\u30a4\u30c61\", \"\u30a4\u30c62\", \"\u30a4\u30c63\", \"\u30a4\u30c64\", \"\u30a4\u30c65\", \"\u30a4\u30c66\"]\n    y-axis \"\u6b8b\u30b9\u30c8\u30fc\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\" 0 --&gt; 100\n    line [80, 65, 48, 30, 15, 0]</code></pre> <p>\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u30d0\u30fc\u30f3\u30c0\u30a6\u30f3\u30c1\u30e3\u30fc\u30c8</p> <pre><code>xychart-beta\n    title \"\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u30d0\u30fc\u30f3\u30c0\u30a6\u30f3\u30c1\u30e3\u30fc\u30c8\"\n    x-axis [\"1\u65e5\u76ee\", \"2\u65e5\u76ee\", \"3\u65e5\u76ee\", \"4\u65e5\u76ee\", \"5\u65e5\u76ee\", \"6\u65e5\u76ee\", \"7\u65e5\u76ee\", \"8\u65e5\u76ee\", \"9\u65e5\u76ee\", \"10\u65e5\u76ee\"]\n    y-axis \"\u6b8b\u308a\u7406\u60f3\u6642\u9593\" 0 --&gt; 80\n    line [80, 75, 68, 60, 50, 38, 25, 15, 8, 0]</code></pre>"},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#43","title":"4.3 \u30d1\u30fc\u30ad\u30f3\u30b0\u30ed\u30c3\u30c8\u30c1\u30e3\u30fc\u30c8","text":"<p>\u30c6\u30fc\u30de\u5358\u4f4d\u3067\u306e\u9032\u6357\u53ef\u8996\u5316</p> <p></p>"},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#5","title":"5. \u30ea\u30b9\u30af\u30de\u30cd\u30b8\u30e1\u30f3\u30c8","text":""},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#51","title":"5.1 \u30d0\u30c3\u30d5\u30a1\u8a08\u753b","text":"<p>\u30d5\u30a3\u30fc\u30c1\u30e3\u30d0\u30c3\u30d5\u30a1 - \u91cd\u8981\u5ea6\u306e\u4f4e\u3044\u30d5\u30a3\u30fc\u30c1\u30e3\u309230%\u7a0b\u5ea6\u7528\u610f - \u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u9045\u5ef6\u6642\u306b\u524a\u9664\u5bfe\u8c61\u3068\u3059\u308b</p> <p>\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u30d0\u30c3\u30d5\u30a1 - \u5404\u30b9\u30c8\u30fc\u30ea\u30fc\u306e50%\u898b\u7a4d\u3082\u308a\u306890%\u898b\u7a4d\u3082\u308a\u306e\u5dee\u306e\u5e73\u65b9\u306e\u5408\u8a08\u306e\u5e73\u65b9\u6839 - \u4e0d\u78ba\u5b9f\u6027\u306b\u5bfe\u3059\u308b\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u7684\u4f59\u88d5</p>"},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#52","title":"5.2 \u8907\u6570\u30c1\u30fc\u30e0\u9593\u306e\u8abf\u6574","text":"<p>\u5171\u901a\u898b\u7a4d\u3082\u308a\u57fa\u6e96\u306e\u78ba\u7acb - \u5168\u30c1\u30fc\u30e0\u5171\u901a\u306e\u30b9\u30c8\u30fc\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\u30b9\u30b1\u30fc\u30eb - \u57fa\u6e96\u30b9\u30c8\u30fc\u30ea\u30fc\u306e\u5171\u6709\u3068\u5408\u610f</p> <p>\u79fb\u52d5\u3059\u308b\u5148\u8aad\u307f\u7bc4\u56f2 - \u4eca\u5f8c2-3\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u8a08\u753b\u3092\u4e8b\u524d\u5171\u6709 - \u30c1\u30fc\u30e0\u9593\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u65e9\u671f\u306b\u7279\u5b9a</p>"},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#6","title":"6. \u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3","text":""},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#61","title":"6.1 \u30b9\u30c6\u30fc\u30af\u30db\u30eb\u30c0\u30fc\u3078\u306e\u5831\u544a","text":"<p>3\u3064\u306e\u30d9\u30ed\u30b7\u30c6\u30a3\u5024\u3067\u4e88\u6e2c - \u76f4\u8fd1\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\uff1a\u6700\u65b0\u72b6\u6cc1 - \u5e73\u5747\uff1a\u9577\u671f\u30c8\u30ec\u30f3\u30c9 - \u30ef\u30fc\u30b9\u30c83\u5e73\u5747\uff1a\u6700\u60aa\u30b1\u30fc\u30b9</p>"},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#62","title":"6.2 \u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u7d42\u4e86\u5831\u544a","text":"<pre><code># \u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u7d42\u4e86\u5831\u544a\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\n\n## \u57fa\u672c\u60c5\u5831\n- \u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3: \u7b2cX\u56de\n- \u671f\u9593: YYYY/MM/DD - YYYY/MM/DD  \n- \u4f5c\u696d\u65e5\u6570: X\u65e5\n\n## \u6210\u679c\n| \u30b9\u30c8\u30fc\u30ea\u30fc | \u72b6\u614b | \u30dd\u30a4\u30f3\u30c8 |\n|-----------|------|----------|\n| \u30b9\u30c8\u30fc\u30ea\u30fcA | \u5b8c\u4e86 | 5 |\n| \u30b9\u30c8\u30fc\u30ea\u30fcB | \u5b8c\u4e86 | 3 |\n| \u30b9\u30c8\u30fc\u30ea\u30fcC | \u672a\u5b8c\u4e86 | 0 |\n\n## \u6307\u6a19\n- \u4eca\u56de\u30d9\u30ed\u30b7\u30c6\u30a3: X\u30dd\u30a4\u30f3\u30c8\n- \u5e73\u5747\u30d9\u30ed\u30b7\u30c6\u30a3: Y\u30dd\u30a4\u30f3\u30c8\n- \u6b21\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u4e88\u5b9a: Z\u30dd\u30a4\u30f3\u30c8\n\n## \u3075\u308a\u304b\u3048\u308a\n### \u3088\u304b\u3063\u305f\u3053\u3068\n- ...\n\n### \u6539\u5584\u70b9  \n- ...\n\n### \u30a2\u30af\u30b7\u30e7\u30f3\n- ...\n</code></pre>"},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#7","title":"7. \u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8","text":""},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#_9","title":"\u30ea\u30ea\u30fc\u30b9\u8a08\u753b\u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8","text":"<ul> <li> \u30d7\u30ed\u30c0\u30af\u30c8\u30aa\u30fc\u30ca\u30fc\u306e\u6e80\u8db3\u6761\u4ef6\u304c\u660e\u78ba</li> <li> \u5168\u30b9\u30c8\u30fc\u30ea\u30fc\u306b\u30b9\u30c8\u30fc\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\u3092\u8a2d\u5b9a</li> <li> \u512a\u5148\u9806\u4f4d\u304c\u660e\u78ba\uff08\u4fa1\u5024\u30fb\u30b3\u30b9\u30c8\u30fb\u77e5\u8b58\u30fb\u30ea\u30b9\u30af\u3067\u8a55\u4fa1\uff09</li> <li> \u30d9\u30ed\u30b7\u30c6\u30a3\u898b\u7a4d\u3082\u308a\u304c\u59a5\u5f53\uff08\u904e\u53bb\u5b9f\u7e3e\u307e\u305f\u306f\u8a73\u7d30\u898b\u7a4d\u3082\u308a\u30d9\u30fc\u30b9\uff09</li> <li> \u30ea\u30b9\u30af\u30d0\u30c3\u30d5\u30a1\u3092\u8003\u616e</li> <li> \u5404\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u76ee\u6a19\u304c\u660e\u78ba</li> </ul>"},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#_10","title":"\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u8a08\u753b\u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8","text":"<ul> <li> \u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u30b4\u30fc\u30eb\u304c1-2\u884c\u3067\u8868\u73fe</li> <li> \u5168\u30b9\u30c8\u30fc\u30ea\u30fc\u3092\u30bf\u30b9\u30af\u306b\u5206\u89e3</li> <li> \u5404\u30bf\u30b9\u30af\u304c4-16\u7406\u60f3\u6642\u9593</li> <li> \u30c1\u30fc\u30e0\u5168\u54e1\u304c\u30b3\u30df\u30c3\u30c8</li> <li> \u30bf\u30b9\u30af\u30dc\u30fc\u30c9\u3092\u6e96\u5099</li> <li> \u30c7\u30a4\u30ea\u30fc\u30b9\u30bf\u30f3\u30c9\u30a2\u30c3\u30d7\u306e\u6642\u9593\u3092\u8a2d\u5b9a</li> </ul>"},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#_11","title":"\u898b\u7a4d\u3082\u308a\u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8","text":"<ul> <li> \u76f8\u5bfe\u898b\u7a4d\u3082\u308a\u3092\u5b9f\u65bd\uff08\u30d7\u30e9\u30f3\u30cb\u30f3\u30b0\u30dd\u30fc\u30ab\u30fc\u306a\u3069\uff09</li> <li> \u898b\u7a4d\u3082\u308a\u30b9\u30b1\u30fc\u30eb\u3092\u7d71\u4e00</li> <li> \u5168\u54e1\u53c2\u52a0\u3067\u898b\u7a4d\u3082\u308a</li> <li> \u898b\u7a4d\u3082\u308a\u6839\u62e0\u3092\u5171\u6709</li> <li> \u4e0d\u78ba\u5b9f\u6027\u3092\u8003\u616e\u3057\u305f\u5e45\u3092\u8a2d\u5b9a</li> </ul>"},{"location":"reference/%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%A8%88%E7%94%BB%E3%82%AC%E3%82%A4%E3%83%89/#_12","title":"\u307e\u3068\u3081","text":"<p>\u3053\u306e\u30ac\u30a4\u30c9\u306b\u5f93\u3046\u3053\u3068\u3067\u3001XP\u30c1\u30fc\u30e0\u306f\u52b9\u679c\u7684\u306a\u30ea\u30ea\u30fc\u30b9\u8a08\u753b\u3068\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u8a08\u753b\u3092\u4f5c\u6210\u3067\u304d\u307e\u3059\u3002\u91cd\u8981\u306a\u306e\u306f\uff1a</p> <ol> <li>\u7d99\u7d9a\u7684\u306a\u6539\u5584\uff1a\u8a08\u753b\u306f\u751f\u304d\u305f\u6587\u66f8\u3068\u3057\u3066\u66f4\u65b0\u3057\u7d9a\u3051\u308b</li> <li>\u30c1\u30fc\u30e0\u5168\u4f53\u3067\u306e\u5408\u610f\uff1a\u898b\u7a4d\u3082\u308a\u3068\u8a08\u753b\u3092\u30c1\u30fc\u30e0\u5168\u54e1\u3067\u4f5c\u6210</li> <li>\u4fa1\u5024\u5fd7\u5411\uff1a\u9867\u5ba2\u4fa1\u5024\u3092\u6700\u5927\u5316\u3059\u308b\u512a\u5148\u9806\u4f4d\u4ed8\u3051</li> <li>\u900f\u660e\u6027\uff1a\u9032\u6357\u3068\u8ab2\u984c\u3092\u5e38\u306b\u30aa\u30fc\u30d7\u30f3\u306b\u5171\u6709</li> </ol> <p>\u5b9a\u671f\u7684\u306b\u3053\u306e\u30ac\u30a4\u30c9\u3092\u898b\u76f4\u3057\u3001\u30c1\u30fc\u30e0\u306e\u72b6\u6cc1\u306b\u5408\u308f\u305b\u3066\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/","title":"\u8981\u4ef6\u5b9a\u7fa9\u30ac\u30a4\u30c9 - RDRA\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u89e3\u8aac","text":""},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_1","title":"\u6982\u8981","text":"<p>\u672c\u30ac\u30a4\u30c9\u3067\u306f\u3001\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u30b7\u30c3\u30d7\u99c6\u52d5\u8981\u4ef6\u5206\u6790(RDRA)\u3092\u4f7f\u3063\u305f\u8981\u4ef6\u5b9a\u7fa9\u306e\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002RDRA\u306f\u6c7a\u3081\u3089\u308c\u305f\u30a2\u30a4\u30b3\u30f3\u3092\u4f7f\u3044\u3001\u30a2\u30a4\u30b3\u30f3\u3068\u30a2\u30a4\u30b3\u30f3\u3001\u30a2\u30a4\u30b3\u30f3\u3068\u56f3\u3092\u95a2\u9023\u3065\u3051\u3001\u30a2\u30a4\u30b3\u30f3\u3067\u8868\u73fe\u3055\u308c\u305f\u30e2\u30c7\u30eb\u8981\u7d20\u3068\u95a2\u9023\u306e\u3064\u306a\u304c\u308a\u304b\u3089\u8981\u4ef6\u3092\u8aac\u660e\u3059\u308b\u8efd\u91cf\u306a\u8981\u4ef6\u5206\u6790\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u3059\u3002</p>"},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#rdra","title":"RDRA\u7528\u8a9e\u89e3\u8aac","text":""},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_2","title":"\u57fa\u672c\u6982\u5ff5","text":"<ul> <li>RDRA\uff08\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u30b7\u30c3\u30d7\u99c6\u52d5\u8981\u4ef6\u5206\u6790\uff09: Relationship Driven Requirements Analysis\u306e\u7565\u3002\u6c7a\u3081\u3089\u308c\u305f\u30a2\u30a4\u30b3\u30f3\u3068\u30e2\u30c7\u30eb\u8981\u7d20\u306e\u95a2\u9023\u304b\u3089\u8981\u4ef6\u3092\u8aac\u660e\u3059\u308b\u624b\u6cd5</li> <li>\u30e2\u30c7\u30eb\u8981\u7d20: RDRA\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u5404\u7a2e\u306e\u30a2\u30a4\u30b3\u30f3\uff08\u30a2\u30af\u30bf\u30fc\u3001\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u3001\u60c5\u5831\u306a\u3069\uff09</li> <li>\u95a2\u9023\uff08\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u30b7\u30c3\u30d7\uff09: \u30e2\u30c7\u30eb\u8981\u7d20\u540c\u58eb\u3092\u7d50\u3076\u7dda\u3084\u77e2\u5370\u3067\u8868\u73fe\u3055\u308c\u308b\u95a2\u4fc2\u6027</li> <li>\u30c8\u30ec\u30fc\u30b5\u30d3\u30ea\u30c6\u30a3: \u8981\u4ef6\u306e\u8ffd\u8de1\u53ef\u80fd\u6027\u3002\u4e0a\u4f4d\u306e\u8981\u6c42\u304b\u3089\u4e0b\u4f4d\u306e\u5b9f\u88c5\u307e\u3067\u95a2\u9023\u3092\u8ffd\u3048\u308b\u3053\u3068</li> </ul>"},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_3","title":"\u30b7\u30b9\u30c6\u30e0\u69cb\u6210\u8981\u7d20","text":"<ul> <li>\u30b7\u30b9\u30c6\u30e0\u4fa1\u5024: \u30b7\u30b9\u30c6\u30e0\u304c\u63d0\u4f9b\u3059\u308b\u4fa1\u5024\u3092\u5b9a\u7fa9\u3059\u308b\u9818\u57df</li> <li>\u30b7\u30b9\u30c6\u30e0\u5916\u90e8\u74b0\u5883: \u30b7\u30b9\u30c6\u30e0\u3092\u53d6\u308a\u5dfb\u304f\u696d\u52d9\u3084\u74b0\u5883\u3092\u5b9a\u7fa9\u3059\u308b\u9818\u57df  </li> <li>\u30b7\u30b9\u30c6\u30e0\u5883\u754c: \u30b7\u30b9\u30c6\u30e0\u3068\u30e6\u30fc\u30b6\u30fc\u30fb\u5916\u90e8\u30b7\u30b9\u30c6\u30e0\u3068\u306e\u63a5\u70b9\u3092\u5b9a\u7fa9\u3059\u308b\u9818\u57df</li> <li>\u30b7\u30b9\u30c6\u30e0: \u30b7\u30b9\u30c6\u30e0\u5185\u90e8\u306e\u60c5\u5831\u69cb\u9020\u3068\u72b6\u614b\u3092\u5b9a\u7fa9\u3059\u308b\u9818\u57df</li> </ul>"},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_4","title":"\u30a2\u30af\u30bf\u30fc\u30fb\u4e3b\u4f53","text":"<ul> <li>\u30a2\u30af\u30bf\u30fc: \u30b7\u30b9\u30c6\u30e0\u3068\u95a2\u308f\u308b\u4eba\u3084\u5916\u90e8\u30b7\u30b9\u30c6\u30e0\u3002\u5229\u7528\u8005\u3001\u7ba1\u7406\u8005\u3001\u5916\u90e8\u30b7\u30b9\u30c6\u30e0\u306a\u3069</li> <li>\u5229\u7528\u8005: \u30b7\u30b9\u30c6\u30e0\u3092\u76f4\u63a5\u4f7f\u7528\u3059\u308b\u4eba</li> <li>\u95a2\u4fc2\u8005\uff08\u30b9\u30c6\u30fc\u30af\u30db\u30eb\u30c0\u30fc\uff09: \u30b7\u30b9\u30c6\u30e0\u306b\u95a2\u308f\u308b\u5168\u3066\u306e\u4eba\u3084\u7d44\u7e54</li> <li>\u5916\u90e8\u30b7\u30b9\u30c6\u30e0: \u9023\u643a\u5bfe\u8c61\u3068\u306a\u308b\u4ed6\u306e\u30b7\u30b9\u30c6\u30e0\u3084\u30b5\u30fc\u30d3\u30b9</li> </ul>"},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_5","title":"\u696d\u52d9\u30fb\u30d7\u30ed\u30bb\u30b9","text":"<ul> <li>\u696d\u52d9: \u7d44\u7e54\u304c\u884c\u3046\u4e00\u9023\u306e\u6d3b\u52d5\u3084\u4f5c\u696d</li> <li>\u30d3\u30b8\u30cd\u30b9\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\uff08BUC\uff09: \u696d\u52d9\u3092\u69cb\u6210\u3059\u308b\u5177\u4f53\u7684\u306a\u4f5c\u696d\u5358\u4f4d</li> <li>\u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3: BUC\u3092\u69cb\u6210\u3059\u308b\u3088\u308a\u8a73\u7d30\u306a\u4f5c\u696d\u9805\u76ee</li> <li>\u696d\u52d9\u30d5\u30ed\u30fc: \u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u306e\u6642\u7cfb\u5217\u3067\u306e\u6d41\u308c</li> <li>\u5229\u7528\u30b7\u30fc\u30f3: \u30b7\u30b9\u30c6\u30e0\u304c\u5229\u7528\u3055\u308c\u308b\u5177\u4f53\u7684\u306a\u5834\u9762\u3084\u72b6\u6cc1</li> </ul>"},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_6","title":"\u8981\u4ef6\u30fb\u4ed5\u69d8","text":"<ul> <li>\u8981\u6c42: \u30b9\u30c6\u30fc\u30af\u30db\u30eb\u30c0\u30fc\u304c \u30b7\u30b9\u30c6\u30e0\u306b\u5bfe\u3057\u3066\u671b\u3080\u3053\u3068</li> <li>\u8981\u4ef6: \u8981\u6c42\u3092\u5b9f\u73fe\u3059\u308b\u305f\u3081\u306b\u30b7\u30b9\u30c6\u30e0\u304c\u6e80\u305f\u3059\u3079\u304d\u6761\u4ef6</li> <li>\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\uff08UC\uff09: \u30b7\u30b9\u30c6\u30e0\u304c\u63d0\u4f9b\u3059\u308b\u6a5f\u80fd\u306e\u5358\u4f4d</li> <li>\u6a5f\u80fd\u8981\u4ef6: \u30b7\u30b9\u30c6\u30e0\u304c\u5b9f\u73fe\u3059\u3079\u304d\u6a5f\u80fd\u306b\u95a2\u3059\u308b\u8981\u4ef6</li> <li>\u975e\u6a5f\u80fd\u8981\u4ef6: \u6027\u80fd\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3001\u904b\u7528\u6027\u306a\u3069\u30b7\u30b9\u30c6\u30e0\u54c1\u8cea\u306b\u95a2\u3059\u308b\u8981\u4ef6</li> </ul>"},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_7","title":"\u30b7\u30b9\u30c6\u30e0\u5883\u754c\u8981\u7d20","text":"<ul> <li>\u753b\u9762: \u30e6\u30fc\u30b6\u30fc\u3068\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u8868\u3059\u5883\u754c\u8981\u7d20</li> <li>\u5e33\u7968: \u51fa\u529b\u3055\u308c\u308b\u6587\u66f8\u3084\u5831\u544a\u66f8</li> <li>\u30a4\u30d9\u30f3\u30c8: \u5916\u90e8\u30b7\u30b9\u30c6\u30e0\u3068\u306e\u30c7\u30fc\u30bf\u4ea4\u63db\u306e\u304d\u3063\u304b\u3051</li> <li>\u30d7\u30ed\u30c8\u30b3\u30eb: \u30b7\u30b9\u30c6\u30e0\u9593\u306e\u901a\u4fe1\u624b\u9806\u3084\u898f\u7d04</li> </ul>"},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_8","title":"\u5185\u90e8\u69cb\u9020\u8981\u7d20","text":"<ul> <li>\u60c5\u5831\uff08\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\uff09: \u30b7\u30b9\u30c6\u30e0\u304c\u7ba1\u7406\u3059\u308b\u30c7\u30fc\u30bf\u306e\u5358\u4f4d</li> <li>\u72b6\u614b: \u60c5\u5831\u304c\u53d6\u308a\u3046\u308b\u72b6\u6cc1\u3084\u6bb5\u968e</li> <li>\u72b6\u614b\u9077\u79fb: \u3042\u308b\u72b6\u614b\u304b\u3089\u5225\u306e\u72b6\u614b\u3078\u306e\u5909\u5316</li> <li>\u95a2\u9023: \u60c5\u5831\u540c\u58eb\u306e\u95a2\u4fc2\u6027\uff081\u5bfe1\u30011\u5bfe\u591a\u3001\u591a\u5bfe\u591a\u306a\u3069\uff09</li> </ul>"},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_9","title":"\u6761\u4ef6\u30fb\u5236\u7d04","text":"<ul> <li>\u30d0\u30ea\u30a8\u30fc\u30b7\u30e7\u30f3: \u30d3\u30b8\u30cd\u30b9\u4e0a\u91cd\u8981\u306a\u533a\u5206\u3084\u7a2e\u5225\uff08\u9867\u5ba2\u7a2e\u5225\u3001\u5546\u54c1\u5206\u985e\u306a\u3069\uff09</li> <li>\u6761\u4ef6: \u30b7\u30b9\u30c6\u30e0\u306e\u52d5\u4f5c\u3092\u6c7a\u5b9a\u3059\u308b\u5224\u5b9a\u57fa\u6e96</li> <li>\u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb: \u696d\u52d9\u4e0a\u5b88\u308b\u3079\u304d\u898f\u5247\u3084\u5236\u7d04</li> <li>\u5236\u7d04: \u30b7\u30b9\u30c6\u30e0\u304c\u6e80\u305f\u3059\u3079\u304d\u6280\u8853\u7684\u30fb\u696d\u52d9\u7684\u306a\u5236\u9650\u4e8b\u9805</li> </ul>"},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_10","title":"\u4f5c\u696d\u30d7\u30ed\u30bb\u30b9\u7528\u8a9e","text":"<ul> <li>\u6d17\u3044\u51fa\u3057: \u5fc5\u8981\u306a\u8981\u7d20\u3092\u7db2\u7f85\u7684\u306b\u62bd\u51fa\u3059\u308b\u4f5c\u696d</li> <li>\u95a2\u4fc2\u3065\u3051: \u8981\u7d20\u9593\u306e\u95a2\u9023\u3092\u660e\u78ba\u306b\u3059\u308b\u4f5c\u696d  </li> <li>\u7cbe\u7dfb\u5316: \u7c97\u3044\u5b9a\u7fa9\u3092\u3088\u308a\u8a73\u7d30\u3067\u6b63\u78ba\u306b\u3057\u3066\u3044\u304f\u4f5c\u696d</li> <li>\u6574\u5408\u6027: \u5404\u8981\u7d20\u30fb\u56f3\u306e\u9593\u3067\u77db\u76fe\u304c\u306a\u3044\u3053\u3068</li> <li>\u7db2\u7f85\u6027: \u5fc5\u8981\u306a\u8981\u7d20\u304c\u6f0f\u308c\u306a\u304f\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3053\u3068</li> <li>\u8868\u73fe\u529b: \u95a2\u4fc2\u8005\u304c\u7406\u89e3\u3057\u3084\u3059\u304f\u8868\u73fe\u3055\u308c\u3066\u3044\u308b\u3053\u3068</li> </ul>"},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#rdra_1","title":"RDRA\u306e\u5168\u4f53\u69cb\u9020","text":""},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#3","title":"\u8981\u4ef6\u5b9a\u7fa9\u306e3\u30d5\u30a7\u30fc\u30ba\u30a2\u30d7\u30ed\u30fc\u30c1","text":""},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#9","title":"9\u30b9\u30c6\u30c3\u30d7\u8a73\u7d30\u30ef\u30fc\u30af\u30d5\u30ed\u30fc","text":""},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#1","title":"\u30d5\u30a7\u30fc\u30ba1: \u8b70\u8ad6\u306e\u30d9\u30fc\u30b9\u3092\u4f5c\u308b","text":""},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#step1","title":"Step1: \u51fa\u767a\u70b9\u3092\u660e\u3089\u304b\u306b\u3059\u308b","text":""},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#step2","title":"Step2: \u30b9\u30b3\u30fc\u30d7\u306e\u628a\u63e1","text":""},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#step3","title":"Step3: \u30b7\u30b9\u30c6\u30e0\u3067\u6271\u3046\u60c5\u5831\u306e\u660e\u793a","text":""},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#step4","title":"Step4: \u30b7\u30b9\u30c6\u30e0\u3067\u7ba1\u7406\u3059\u308b\u72b6\u614b\u306e\u660e\u793a","text":""},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#2","title":"\u30d5\u30a7\u30fc\u30ba2: \u8981\u4ef6\u3092\u7d44\u307f\u7acb\u3066\u308b","text":""},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#3_1","title":"\u30d5\u30a7\u30fc\u30ba3: \u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u3067\u4ed5\u69d8\u5316\u53ef\u80fd\u306b\u3059\u308b","text":""},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#step7-9","title":"Step7-9: \u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u8a73\u7d30\u5316","text":""},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_11","title":"\u5404\u56f3\u306e\u4f5c\u6210\u9806\u5e8f\u3068\u30c8\u30ec\u30fc\u30b5\u30d3\u30ea\u30c6\u30a3","text":""},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_12","title":"\u671f\u9593\u914d\u5206\u3068\u5de5\u6570\u306e\u76ee\u5b89","text":""},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#plantumlrdra","title":"PlantUML\u3067\u306eRDRA\u56f3\u4f5c\u6210\u30ac\u30a4\u30c9","text":""},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_13","title":"\u30a2\u30a4\u30b3\u30f3\u5bfe\u5fdc\u8868","text":""},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#plantuml","title":"PlantUML\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u4f8b","text":""},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_14","title":"\u30b7\u30b9\u30c6\u30e0\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u56f3","text":""},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_15","title":"\u8981\u6c42\u30e2\u30c7\u30eb\u56f3","text":""},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_16","title":"\u30d3\u30b8\u30cd\u30b9\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u56f3","text":""},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_17","title":"\u30d3\u30b8\u30cd\u30b9\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u56f3","text":""},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_18","title":"\u696d\u52d9\u30d5\u30ed\u30fc\u56f3","text":""},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_19","title":"\u5229\u7528\u30b7\u30fc\u30f3\u56f3","text":""},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_20","title":"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u8907\u5408\u56f3","text":""},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_21","title":"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u8907\u5408\u56f3 + \u696d\u52d9\u30d5\u30ed\u30fc","text":""},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_22","title":"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u8907\u5408\u56f3 + \u5229\u7528\u30b7\u30fc\u30f3","text":""},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_23","title":"\u60c5\u5831\u30e2\u30c7\u30eb\u56f3","text":""},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_24","title":"\u72b6\u614b\u30e2\u30c7\u30eb\u56f3","text":""},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_25","title":"\u307e\u3068\u3081","text":"<p>RDRA\u3092\u4f7f\u3063\u305f\u8981\u4ef6\u5b9a\u7fa9\u306f\u4ee5\u4e0b\u306e\u7279\u5fb4\u304c\u3042\u308a\u307e\u3059\uff1a</p> <ol> <li>\u6bb5\u968e\u7684\u6d17\u7df4: 3\u30d5\u30a7\u30fc\u30ba\u3067\u5f90\u3005\u306b\u7cbe\u5ea6\u3092\u4e0a\u3052\u308b</li> <li>\u7db2\u7f85\u6027: \u30b7\u30b9\u30c6\u30e0\u4fa1\u5024\u304b\u3089\u6bb5\u968e\u7684\u306b\u8981\u7d20\u3092\u5c0e\u51fa</li> <li>\u6574\u5408\u6027: \u56f3\u9593\u306e\u95a2\u9023\u6027\u3067\u6574\u5408\u6027\u3092\u4fdd\u8a3c</li> <li>\u8868\u73fe\u529b: \u8996\u899a\u7684\u306a\u30c0\u30a4\u30a2\u30b0\u30e9\u30e0\u3067\u5171\u901a\u7406\u89e3\u3092\u4fc3\u9032</li> <li>\u30c8\u30ec\u30fc\u30b5\u30d3\u30ea\u30c6\u30a3: \u5168\u3066\u306e\u8981\u7d20\u304c\u95a2\u9023\u3065\u3051\u3089\u308c\u3066\u3044\u308b</li> </ol> <p>\u3053\u306e\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u306b\u5f93\u3046\u3053\u3068\u3067\u3001\u77ed\u6642\u9593\u3067\u7cbe\u5ea6\u306e\u9ad8\u3044\u8981\u4ef6\u5b9a\u7fa9\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002PlantUML\u3092\u6d3b\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u30c6\u30ad\u30b9\u30c8\u30d9\u30fc\u30b9\u3067\u306e\u7ba1\u7406\u3068\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u304c\u5bb9\u6613\u306b\u306a\u308a\u3001\u30c1\u30fc\u30e0\u958b\u767a\u306b\u3082\u9069\u7528\u3057\u3084\u3059\u304f\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"reference/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_26","title":"\u53c2\u8003\u6587\u732e","text":"<ul> <li>RDRA2.0 \u30cf\u30f3\u30c9\u30d6\u30c3\u30af</li> <li>PlantUML\u516c\u5f0f\u30b5\u30a4\u30c8: https://plantuml.com/ja/</li> </ul>"},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/","title":"\u904b\u7528\u8981\u4ef6\u5b9a\u7fa9\u30ac\u30a4\u30c9","text":""},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_2","title":"\u904b\u7528\u8981\u4ef6\u306e\u6982\u8981","text":"<p>\u904b\u7528\u8981\u4ef6\u3068\u306f\u3001\u30b7\u30b9\u30c6\u30e0\u304c\u672c\u756a\u74b0\u5883\u3067\u7a3c\u50cd\u3059\u308b\u969b\u306b\u5fc5\u8981\u3068\u306a\u308b\u8981\u4ef6\u306e\u3053\u3068\u3067\u3059\u3002\u3053\u308c\u306b\u306f\u76e3\u8996\u3001\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3001\u904b\u7528\u624b\u9806\u306a\u3069\u304c\u542b\u307e\u308c\u307e\u3059\u3002\u3088\u3044\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u5b9f\u73fe\u3059\u308b\u305f\u3081\u306b\u3001\u958b\u767a\u6bb5\u968e\u304b\u3089\u904b\u7528\u6027\u3092\u8003\u616e\u3057\u305f\u8a2d\u8a08\u30fb\u5b9f\u88c5\u304c\u91cd\u8981\u3067\u3059\u3002</p>"},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_3","title":"\u904b\u7528\u8981\u4ef6\u306e\u7a2e\u985e","text":""},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_4","title":"\u76e3\u8996\u8981\u4ef6","text":""},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_5","title":"\u30b7\u30b9\u30c6\u30e0\u76e3\u8996","text":"<ul> <li>\u30ea\u30bd\u30fc\u30b9\u76e3\u8996: CPU\u3001\u30e1\u30e2\u30ea\u3001\u30c7\u30a3\u30b9\u30af\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u4f7f\u7528\u7387</li> <li>\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u76e3\u8996: \u30ec\u30b9\u30dd\u30f3\u30b9\u6642\u9593\u3001\u30b9\u30eb\u30fc\u30d7\u30c3\u30c8</li> <li>\u53ef\u7528\u6027\u76e3\u8996: \u30b5\u30fc\u30d3\u30b9\u7a3c\u50cd\u72b6\u6cc1\u3001\u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af</li> <li>\u30a8\u30e9\u30fc\u76e3\u8996: \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\u3001\u30b7\u30b9\u30c6\u30e0\u30a8\u30e9\u30fc</li> </ul>"},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_6","title":"\u30d3\u30b8\u30cd\u30b9\u76e3\u8996","text":"<ul> <li>KPI \u76e3\u8996: \u30d3\u30b8\u30cd\u30b9\u91cd\u8981\u6307\u6a19\u306e\u8ffd\u8de1</li> <li>SLA \u76e3\u8996: \u30b5\u30fc\u30d3\u30b9\u30ec\u30d9\u30eb\u5408\u610f\u306e\u76e3\u8996</li> <li>\u30e6\u30fc\u30b6\u30fc\u884c\u52d5\u76e3\u8996: \u30a2\u30af\u30bb\u30b9\u30d1\u30bf\u30fc\u30f3\u3001\u5229\u7528\u72b6\u6cc1</li> </ul>"},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_7","title":"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u76e3\u8996","text":"<ul> <li>\u4e0d\u6b63\u30a2\u30af\u30bb\u30b9\u691c\u77e5: \u7570\u5e38\u306a\u30a2\u30af\u30bb\u30b9\u30d1\u30bf\u30fc\u30f3\u306e\u691c\u77e5</li> <li>\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8\u76e3\u8996: \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u95a2\u9023\u30ed\u30b0\u306e\u76e3\u8996</li> <li>\u8106\u5f31\u6027\u76e3\u8996: \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30ea\u30b9\u30af\u306e\u7d99\u7d9a\u7684\u76e3\u8996</li> </ul>"},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_8","title":"\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30fb\u30ea\u30ab\u30d0\u30ea\u8981\u4ef6","text":""},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_9","title":"\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u8981\u4ef6","text":"<ul> <li>\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u983b\u5ea6: \u65e5\u6b21\u3001\u9031\u6b21\u3001\u6708\u6b21\u30d0\u30c3\u30af\u30a2\u30c3\u30d7</li> <li>\u4fdd\u5b58\u671f\u9593: \u30c7\u30fc\u30bf\u4fdd\u6301\u30dd\u30ea\u30b7\u30fc\u306b\u57fa\u3065\u304f\u4fdd\u5b58\u671f\u9593</li> <li>\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u7bc4\u56f2: \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3001\u30d5\u30a1\u30a4\u30eb\u3001\u30b7\u30b9\u30c6\u30e0\u8a2d\u5b9a</li> <li>\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u691c\u8a3c: \u5b9a\u671f\u7684\u306a\u30ea\u30b9\u30c8\u30a2\u30c6\u30b9\u30c8</li> </ul>"},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_10","title":"\u30ea\u30ab\u30d0\u30ea\u8981\u4ef6","text":"<ul> <li>RTO (Recovery Time Objective): \u5fa9\u65e7\u6642\u9593\u76ee\u6a19</li> <li>RPO (Recovery Point Objective): \u5fa9\u65e7\u30dd\u30a4\u30f3\u30c8\u76ee\u6a19  </li> <li>\u30ea\u30ab\u30d0\u30ea\u624b\u9806: \u6bb5\u968e\u7684\u306a\u5fa9\u65e7\u30d7\u30ed\u30bb\u30b9</li> <li>\u30c7\u30fc\u30bf\u6574\u5408\u6027: \u30ea\u30ab\u30d0\u30ea\u5f8c\u306e\u30c7\u30fc\u30bf\u4e00\u8cab\u6027\u78ba\u4fdd</li> </ul>"},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_11","title":"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u904b\u7528\u8981\u4ef6","text":""},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_12","title":"\u30a2\u30af\u30bb\u30b9\u7ba1\u7406","text":"<ul> <li>\u8a8d\u8a3c\u30b7\u30b9\u30c6\u30e0: \u591a\u8981\u7d20\u8a8d\u8a3c\u3001SSO \u9023\u643a</li> <li>\u30a2\u30ab\u30a6\u30f3\u30c8\u7ba1\u7406: \u30e6\u30fc\u30b6\u30fc\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u7ba1\u7406</li> <li>\u6a29\u9650\u7ba1\u7406: \u6700\u5c0f\u6a29\u9650\u306e\u539f\u5247\u3001\u5b9a\u671f\u7684\u306a\u6a29\u9650\u898b\u76f4\u3057</li> </ul>"},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_13","title":"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u76e3\u67fb","text":"<ul> <li>\u30a2\u30af\u30bb\u30b9\u30ed\u30b0: \u3059\u3079\u3066\u306e\u30a2\u30af\u30bb\u30b9\u306e\u8a18\u9332\u30fb\u76e3\u67fb</li> <li>\u64cd\u4f5c\u30ed\u30b0: \u91cd\u8981\u306a\u64cd\u4f5c\u306e\u8ffd\u8de1\u53ef\u80fd\u6027</li> <li>\u8a2d\u5b9a\u5909\u66f4: \u30b7\u30b9\u30c6\u30e0\u8a2d\u5b9a\u5909\u66f4\u306e\u8a18\u9332\u30fb\u627f\u8a8d</li> </ul>"},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_14","title":"\u8105\u5a01\u5bfe\u5fdc","text":"<ul> <li>\u30a4\u30f3\u30b7\u30c7\u30f3\u30c8\u5bfe\u5fdc: \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u4e8b\u6545\u5bfe\u5fdc\u624b\u9806</li> <li>\u8106\u5f31\u6027\u7ba1\u7406: \u5b9a\u671f\u7684\u306a\u8106\u5f31\u6027\u30b9\u30ad\u30e3\u30f3\u30fb\u5bfe\u5fdc</li> <li>\u30d1\u30c3\u30c1\u7ba1\u7406: \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30d1\u30c3\u30c1\u306e\u8a08\u753b\u7684\u9069\u7528</li> </ul>"},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_15","title":"\u904b\u7528\u624b\u9806\u30fb\u4fdd\u5b88\u8981\u4ef6","text":""},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_16","title":"\u65e5\u5e38\u904b\u7528","text":"<ul> <li>\u76e3\u8996\u4f53\u5236: 24\u6642\u9593365\u65e5\u76e3\u8996\u4f53\u5236</li> <li>\u30a2\u30e9\u30fc\u30c8\u5bfe\u5fdc: \u91cd\u8981\u5ea6\u306b\u5fdc\u3058\u305f\u30a8\u30b9\u30ab\u30ec\u30fc\u30b7\u30e7\u30f3</li> <li>\u5b9a\u671f\u70b9\u691c: \u30b7\u30b9\u30c6\u30e0\u7a3c\u50cd\u72b6\u6cc1\u306e\u5b9a\u671f\u78ba\u8a8d</li> </ul>"},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_17","title":"\u5909\u66f4\u7ba1\u7406","text":"<ul> <li>\u30ea\u30ea\u30fc\u30b9\u624b\u9806: \u672c\u756a\u30ea\u30ea\u30fc\u30b9\u306e\u6a19\u6e96\u624b\u9806</li> <li>\u30ed\u30fc\u30eb\u30d0\u30c3\u30af\u624b\u9806: \u554f\u984c\u767a\u751f\u6642\u306e\u5207\u308a\u623b\u3057\u624b\u9806</li> <li>\u5909\u66f4\u627f\u8a8d: \u5909\u66f4\u306b\u5bfe\u3059\u308b\u627f\u8a8d\u30d7\u30ed\u30bb\u30b9</li> </ul>"},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_18","title":"\u4fdd\u5b88\u7ba1\u7406","text":"<ul> <li>\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u8a08\u753b: \u8a08\u753b\u7684\u306a\u30b7\u30b9\u30c6\u30e0\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9</li> <li>\u5bb9\u91cf\u7ba1\u7406: \u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u91cf\u306e\u76e3\u8996\u30fb\u62e1\u5f35\u8a08\u753b</li> <li>\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u7ba1\u7406: \u30b7\u30b9\u30c6\u30e0\u66f4\u6539\u30fb\u5ec3\u6b62\u8a08\u753b</li> </ul>"},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_19","title":"\u904b\u7528\u8981\u4ef6\u5b9a\u7fa9\u306e\u30d7\u30ed\u30bb\u30b9","text":""},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#1","title":"1. \u73fe\u72b6\u5206\u6790","text":"<ul> <li>\u65e2\u5b58\u904b\u7528: \u73fe\u5728\u306e\u904b\u7528\u624b\u9806\u30fb\u4f53\u5236\u306e\u8abf\u67fb</li> <li>\u8ab2\u984c\u8b58\u5225: \u904b\u7528\u4e0a\u306e\u554f\u984c\u70b9\u30fb\u6539\u5584\u70b9\u306e\u62bd\u51fa</li> <li>\u30d9\u30f3\u30c1\u30de\u30fc\u30af: \u4ed6\u30b7\u30b9\u30c6\u30e0\u30fb\u696d\u754c\u6a19\u6e96\u3068\u306e\u6bd4\u8f03</li> </ul>"},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#2","title":"2. \u8981\u4ef6\u5b9a\u7fa9","text":"<ul> <li>\u30b5\u30fc\u30d3\u30b9\u30ec\u30d9\u30eb\u5b9a\u7fa9: SLA\u3001SLO\u3001SLI \u306e\u8a2d\u5b9a</li> <li>\u904b\u7528\u30dd\u30ea\u30b7\u30fc: \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3001\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u7b49\u306e\u30dd\u30ea\u30b7\u30fc</li> <li>\u6280\u8853\u8981\u4ef6: \u76e3\u8996\u30c4\u30fc\u30eb\u3001\u904b\u7528\u30c4\u30fc\u30eb\u306e\u8981\u4ef6</li> </ul>"},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#3","title":"3. \u904b\u7528\u8a2d\u8a08","text":"<ul> <li>\u76e3\u8996\u8a2d\u8a08: \u76e3\u8996\u9805\u76ee\u30fb\u95be\u5024\u30fb\u30a2\u30e9\u30fc\u30c8\u8a2d\u8a08</li> <li>\u624b\u9806\u66f8\u4f5c\u6210: \u904b\u7528\u624b\u9806\u66f8\u30fb\u969c\u5bb3\u5bfe\u5fdc\u624b\u9806\u66f8</li> <li>\u4f53\u5236\u8a2d\u8a08: \u904b\u7528\u4f53\u5236\u30fb\u5f79\u5272\u5206\u62c5\u30fb\u30a8\u30b9\u30ab\u30ec\u30fc\u30b7\u30e7\u30f3</li> </ul>"},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#4","title":"4. \u904b\u7528\u6e96\u5099","text":"<ul> <li>\u74b0\u5883\u6e96\u5099: \u76e3\u8996\u74b0\u5883\u30fb\u904b\u7528\u30c4\u30fc\u30eb\u74b0\u5883\u69cb\u7bc9</li> <li>\u624b\u9806\u66f8\u6574\u5099: \u904b\u7528\u624b\u9806\u66f8\u30fb\u30de\u30cb\u30e5\u30a2\u30eb\u4f5c\u6210</li> <li>\u904b\u7528\u8a13\u7df4: \u969c\u5bb3\u5bfe\u5fdc\u8a13\u7df4\u30fb\u624b\u9806\u78ba\u8a8d</li> </ul>"},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_20","title":"\u904b\u7528\u8981\u4ef6\u306e\u54c1\u8cea\u57fa\u6e96","text":""},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#smart","title":"SMART \u539f\u5247","text":"<p>\u904b\u7528\u8981\u4ef6\u306f SMART \u539f\u5247\u306b\u5f93\u3063\u3066\u5b9a\u7fa9\u3057\u307e\u3059\uff1a</p> <ul> <li>Specific (\u5177\u4f53\u7684): \u66d6\u6627\u3055\u306e\u306a\u3044\u660e\u78ba\u306a\u8981\u4ef6</li> <li>Measurable (\u6e2c\u5b9a\u53ef\u80fd): \u6570\u5024\u3067\u6e2c\u5b9a\u53ef\u80fd\u306a\u8981\u4ef6  </li> <li>Achievable (\u9054\u6210\u53ef\u80fd): \u73fe\u5b9f\u7684\u306b\u9054\u6210\u53ef\u80fd\u306a\u8981\u4ef6</li> <li>Relevant (\u95a2\u9023\u6027): \u30d3\u30b8\u30cd\u30b9\u76ee\u6a19\u306b\u95a2\u9023\u3057\u305f\u8981\u4ef6</li> <li>Time-bound (\u671f\u9650): \u660e\u78ba\u306a\u671f\u9650\u30fb\u983b\u5ea6\u3092\u6301\u3064\u8981\u4ef6</li> </ul>"},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_21","title":"\u30b5\u30fc\u30d3\u30b9\u30ec\u30d9\u30eb\u5b9a\u7fa9","text":""},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#sli-service-level-indicator","title":"SLI (Service Level Indicator)","text":"<ul> <li>\u53ef\u7528\u6027: \u30b7\u30b9\u30c6\u30e0\u7a3c\u50cd\u7387</li> <li>\u30ec\u30b9\u30dd\u30f3\u30b9\u6642\u9593: API\u30fb\u753b\u9762\u5fdc\u7b54\u6642\u9593</li> <li>\u30a8\u30e9\u30fc\u7387: \u30a8\u30e9\u30fc\u767a\u751f\u7387</li> </ul>"},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#slo-service-level-objective","title":"SLO (Service Level Objective)","text":"<ul> <li>\u76ee\u6a19\u8a2d\u5b9a: \u5177\u4f53\u7684\u306a\u6570\u5024\u76ee\u6a19</li> <li>\u6e2c\u5b9a\u671f\u9593: \u6708\u6b21\u30fb\u56db\u534a\u671f\u30fb\u5e74\u6b21</li> <li>\u30a8\u30e9\u30fc\u30d0\u30b8\u30a7\u30c3\u30c8: \u8a31\u5bb9\u30a8\u30e9\u30fc\u7bc4\u56f2</li> </ul>"},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#sla-service-level-agreement","title":"SLA (Service Level Agreement)","text":"<ul> <li>\u9867\u5ba2\u5408\u610f: \u30b5\u30fc\u30d3\u30b9\u63d0\u4f9b\u306e\u5408\u610f\u4e8b\u9805</li> <li>\u88dc\u511f\u6761\u9805: SLA \u672a\u9054\u6210\u6642\u306e\u5bfe\u5fdc</li> <li>\u514d\u8cac\u6761\u9805: \u8cac\u4efb\u7bc4\u56f2\u306e\u660e\u78ba\u5316</li> </ul>"},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_22","title":"\u904b\u7528\u8981\u4ef6\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","text":""},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#1_1","title":"1. \u904b\u7528\u6027\u3092\u8003\u616e\u3057\u305f\u8a2d\u8a08","text":"<ul> <li>Observability: \u30b7\u30b9\u30c6\u30e0\u306e\u5185\u90e8\u72b6\u614b\u3092\u5916\u90e8\u304b\u3089\u89b3\u6e2c\u53ef\u80fd\u306b</li> <li>Graceful Degradation: \u6bb5\u968e\u7684\u306a\u6a5f\u80fd\u7e2e\u9000</li> <li>Circuit Breaker: \u969c\u5bb3\u306e\u9023\u9396\u9632\u6b62\u6a5f\u80fd</li> <li>Health Check: \u30b7\u30b9\u30c6\u30e0\u72b6\u614b\u78ba\u8a8d\u6a5f\u80fd</li> </ul>"},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#2_1","title":"2. \u81ea\u52d5\u5316\u306e\u63a8\u9032","text":"<ul> <li>\u30c7\u30d7\u30ed\u30a4\u81ea\u52d5\u5316: CI/CD \u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u69cb\u7bc9</li> <li>\u76e3\u8996\u81ea\u52d5\u5316: \u81ea\u52d5\u30a2\u30e9\u30fc\u30c8\u30fb\u81ea\u52d5\u5fa9\u65e7</li> <li>\u30c6\u30b9\u30c8\u81ea\u52d5\u5316: \u904b\u7528\u30c6\u30b9\u30c8\u306e\u81ea\u52d5\u5b9f\u884c</li> </ul>"},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#3_1","title":"3. \u30a4\u30f3\u30b7\u30c7\u30f3\u30c8\u7ba1\u7406","text":"<ul> <li>\u65e9\u671f\u691c\u77e5: \u76e3\u8996\u306b\u3088\u308b\u8fc5\u901f\u306a\u554f\u984c\u767a\u898b</li> <li>\u8fc5\u901f\u5bfe\u5fdc: \u660e\u78ba\u306a\u5bfe\u5fdc\u624b\u9806\u30fb\u4f53\u5236</li> <li>\u5b66\u7fd2\u6587\u5316: \u30dd\u30b9\u30c8\u30e2\u30fc\u30c6\u30e0\u306b\u3088\u308b\u7d99\u7d9a\u6539\u5584</li> </ul>"},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#4_1","title":"4. \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30d5\u30a1\u30fc\u30b9\u30c8","text":"<ul> <li>Zero Trust: \u3059\u3079\u3066\u306e\u30a2\u30af\u30bb\u30b9\u3092\u691c\u8a3c</li> <li>\u6700\u5c0f\u6a29\u9650: \u5fc5\u8981\u6700\u5c0f\u9650\u306e\u6a29\u9650\u4ed8\u4e0e</li> <li>\u591a\u5c64\u9632\u5fa1: \u8907\u6570\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5bfe\u7b56</li> <li>\u7d99\u7d9a\u76e3\u8996: 24\u6642\u9593\u4f53\u5236\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u76e3\u8996</li> </ul>"},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_23","title":"\u904b\u7528\u8981\u4ef6\u306e\u7ba1\u7406\u30fb\u6539\u5584","text":""},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_24","title":"\u7d99\u7d9a\u7684\u6539\u5584","text":"<ul> <li>\u5b9a\u671f\u30ec\u30d3\u30e5\u30fc: \u904b\u7528\u72b6\u6cc1\u30fb\u8ab2\u984c\u306e\u5b9a\u671f\u78ba\u8a8d</li> <li>KPI \u6e2c\u5b9a: \u904b\u7528\u52b9\u7387\u30fb\u54c1\u8cea\u6307\u6a19\u306e\u6e2c\u5b9a</li> <li>\u6539\u5584\u8a08\u753b: \u7d99\u7d9a\u7684\u306a\u904b\u7528\u6539\u5584</li> </ul>"},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_25","title":"\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u7ba1\u7406","text":"<ul> <li>\u624b\u9806\u66f8\u66f4\u65b0: \u6700\u65b0\u72b6\u614b\u306e\u7dad\u6301\u30fb\u7248\u6570\u7ba1\u7406</li> <li>\u77e5\u8b58\u5171\u6709: \u904b\u7528\u30ca\u30ec\u30c3\u30b8\u306e\u7d44\u7e54\u5185\u5171\u6709</li> <li>\u6559\u80b2\u30fb\u8a13\u7df4: \u904b\u7528\u30b9\u30ad\u30eb\u306e\u7d99\u7d9a\u7684\u5411\u4e0a</li> </ul>"},{"location":"reference/%E9%81%8B%E7%94%A8%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_26","title":"\u307e\u3068\u3081","text":"<p>\u904b\u7528\u8981\u4ef6\u306f\u3001\u30b7\u30b9\u30c6\u30e0\u306e\u9577\u671f\u7684\u306a\u6210\u529f\u306b\u76f4\u7d50\u3059\u308b\u91cd\u8981\u306a\u8981\u4ef6\u3067\u3059\u3002\u958b\u767a\u521d\u671f\u304b\u3089\u904b\u7528\u6027\u3092\u8003\u616e\u3057\u3001\u7d99\u7d9a\u7684\u306b\u6539\u5584\u3057\u3066\u3044\u304f\u3053\u3068\u3067\u3001\u300c\u5909\u66f4\u3092\u697d\u306b\u5b89\u5168\u306b\u3067\u304d\u3066\u5f79\u306b\u7acb\u3064\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u300d\u306e\u5b9f\u73fe\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002</p> <p>\u3088\u3044\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u4f5c\u308b\u305f\u3081\u306b\u306f\u3001\u6a5f\u80fd\u8981\u4ef6\u3068\u540c\u7b49\u306b\u904b\u7528\u8981\u4ef6\u3092\u91cd\u8996\u3057\u3001\u958b\u767a\u30fb\u904b\u7528\u304c\u4e00\u4f53\u3068\u306a\u3063\u3066\u53d6\u308a\u7d44\u3080\u3053\u3068\u304c\u91cd\u8981\u3067\u3059\u3002</p>"},{"location":"reference/%E9%96%8B%E7%99%BA%E3%82%AC%E3%82%A4%E3%83%89/","title":"\u958b\u767a\u30ac\u30a4\u30c9","text":""},{"location":"reference/%E9%96%8B%E7%99%BA%E3%82%AC%E3%82%A4%E3%83%89/#_2","title":"\u958b\u767a\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb","text":"<p>\u5206\u6790\u3067\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u6a5f\u80fd\u3084\u6027\u80fd\u3001\u54c1\u8cea\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3001\u904b\u7528\u3001\u4fdd\u5b88\u306a\u3069\u306e\u8981\u4ef6\u3092\u307e\u3068\u3081\u308b\u6d3b\u52d5\u3092\u884c\u3044\u307e\u3059\u3002 \u958b\u767a\u3067\u306f\u8981\u4ef6\u3092\u6e80\u305f\u3059\u305f\u3081\u306e\u8a2d\u8a08\u3001\u5b9f\u88c5\u3001\u30c6\u30b9\u30c8\u306a\u3069\u306e\u6d3b\u52d5\u3092\u884c\u3044\u307e\u3059\u3002 \u904b\u7528\u3067\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u904b\u7528\u3001\u4fdd\u5b88\u3001\u6539\u5584\u306a\u3069\u306e\u6d3b\u52d5\u3092\u884c\u3044\u307e\u3059\u3002 \u69cb\u7bc9\u3067\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u74b0\u5883\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002 \u914d\u7f6e\u3067\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30d3\u30eb\u30c9\u3068\u30c7\u30d7\u30ed\u30a4\u3092\u884c\u3044\u307e\u3059\u3002 \u3053\u308c\u3089\u306e\u6d3b\u52d5\u306f\u76f8\u4e92\u306b\u5f71\u97ff\u3057\u5408\u3044\u3001\u9023\u643a\u3057\u3066\u884c\u308f\u308c\u308b\u305f\u3081\u3001\u305d\u308c\u305e\u308c\u306e\u6d3b\u52d5\u306b\u304a\u3044\u3066\u3001\u958b\u767a\u8005\u304c\u5b88\u308b\u3079\u304d\u898f\u5247\u3084\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3\u3092\u307e\u3068\u3081\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p></p> <p>\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u958b\u767a\u306f\u3001\u30a2\u30b8\u30e3\u30a4\u30eb\u958b\u767a\u624b\u6cd5\uff08XP\uff09\u306b\u57fa\u3065\u3044\u3066\u9032\u3081\u307e\u3059\u3002</p> <p>\u8a73\u7d30\u306f \u30a8\u30af\u30b9\u30c8\u30ea\u30fc\u30e0\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0 \u3092\u53c2\u7167\u3002</p>"},{"location":"reference/%E9%96%8B%E7%99%BA%E3%82%AC%E3%82%A4%E3%83%89/#_3","title":"\u5206\u6790","text":""},{"location":"reference/%E9%96%8B%E7%99%BA%E3%82%AC%E3%82%A4%E3%83%89/#_4","title":"\u8981\u4ef6\u5b9a\u7fa9","text":"<p>\u8981\u4ef6\u5b9a\u7fa9\u306e\u8a73\u7d30\u306f\u8981\u4ef6\u5b9a\u7fa9\u30ac\u30a4\u30c9\u3092\u53c2\u7167</p>"},{"location":"reference/%E9%96%8B%E7%99%BA%E3%82%AC%E3%82%A4%E3%83%89/#_5","title":"\u6a5f\u80fd\u8981\u4ef6","text":""},{"location":"reference/%E9%96%8B%E7%99%BA%E3%82%AC%E3%82%A4%E3%83%89/#_6","title":"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u8a2d\u8a08","text":"<p>\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u8a2d\u8a08\u306e\u8a73\u7d30\u306f \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u8a2d\u8a08\u30ac\u30a4\u30c9 \u3092\u53c2\u7167</p>"},{"location":"reference/%E9%96%8B%E7%99%BA%E3%82%AC%E3%82%A4%E3%83%89/#_7","title":"\u30c7\u30fc\u30bf\u30e2\u30c7\u30eb\u8a2d\u8a08","text":"<p>\u30c7\u30fc\u30bf\u30e2\u30c7\u30eb\u8a2d\u8a08\u306e\u8a73\u7d30\u306f \u30c7\u30fc\u30bf\u30e2\u30c7\u30eb\u8a2d\u8a08\u30ac\u30a4\u30c9 \u3092\u53c2\u7167</p>"},{"location":"reference/%E9%96%8B%E7%99%BA%E3%82%AC%E3%82%A4%E3%83%89/#_8","title":"\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\u8a2d\u8a08","text":"<p>\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\u8a2d\u8a08\u306e\u8a73\u7d30\u306f \u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\u8a2d\u8a08\u30ac\u30a4\u30c9 \u3092\u53c2\u7167</p>"},{"location":"reference/%E9%96%8B%E7%99%BA%E3%82%AC%E3%82%A4%E3%83%89/#ui","title":"UI\u8a2d\u8a08","text":"<p>UI\u8a2d\u8a08\u306e\u8a73\u7d30\u306f UI\u8a2d\u8a08\u30ac\u30a4\u30c9 \u3092\u53c2\u7167</p>"},{"location":"reference/%E9%96%8B%E7%99%BA%E3%82%AC%E3%82%A4%E3%83%89/#_9","title":"\u975e\u6a5f\u80fd\u8981\u4ef6","text":"<p>\u975e\u6a5f\u80fd\u8981\u4ef6\u306e\u8a73\u7d30\u306f \u975e\u6a5f\u80fd\u8981\u4ef6\u30ac\u30a4\u30c9 \u3092\u53c2\u7167</p>"},{"location":"reference/%E9%96%8B%E7%99%BA%E3%82%AC%E3%82%A4%E3%83%89/#_10","title":"\u30c6\u30b9\u30c8\u6226\u7565","text":"<p>\u30c6\u30b9\u30c8\u6226\u7565\u306e\u8a73\u7d30\u306f \u30c6\u30b9\u30c8\u6226\u7565\u30ac\u30a4\u30c9 \u3092\u53c2\u7167</p>"},{"location":"reference/%E9%96%8B%E7%99%BA%E3%82%AC%E3%82%A4%E3%83%89/#_11","title":"\u975e\u6a5f\u80fd\u8981\u4ef6\u5b9a\u7fa9","text":"<p>\u975e\u6a5f\u80fd\u8981\u4ef6\u5b9a\u7fa9\u306f \u975e\u6a5f\u80fd\u8981\u4ef6\u5b9a\u7fa9\u30ac\u30a4\u30c9 \u3092\u53c2\u7167</p>"},{"location":"reference/%E9%96%8B%E7%99%BA%E3%82%AC%E3%82%A4%E3%83%89/#_12","title":"\u904b\u7528\u8981\u4ef6\u5b9a\u7fa9","text":"<p>\u904b\u7528\u8981\u4ef6\u5b9a\u7fa9\u306f \u904b\u7528\u8981\u4ef6\u5b9a\u7fa9\u30ac\u30a4\u30c9 \u3092\u53c2\u7167</p>"},{"location":"reference/%E9%96%8B%E7%99%BA%E3%82%AC%E3%82%A4%E3%83%89/#_13","title":"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u30fb\u30e6\u30fc\u30b6\u30fc\u30b9\u30c8\u30fc\u30ea\u30fc","text":"<p>\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u30fb\u30e6\u30fc\u30b6\u30fc\u30b9\u30c8\u30fc\u30ea\u30fc\u306e\u8a73\u7d30\u306f\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u4f5c\u6210\u30ac\u30a4\u30c9\u3092\u53c2\u7167</p>"},{"location":"reference/%E9%96%8B%E7%99%BA%E3%82%AC%E3%82%A4%E3%83%89/#_14","title":"\u30ea\u30ea\u30fc\u30b9\u8a08\u753b","text":"<p>\u8a08\u753b\u3065\u304f\u308a\u306e\u8a73\u7d30\u306f \u30ea\u30ea\u30fc\u30b9\u30fb\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u8a08\u753b\u30ac\u30a4\u30c9  \u3092\u53c2\u7167\u3002</p>"},{"location":"reference/%E9%96%8B%E7%99%BA%E3%82%AC%E3%82%A4%E3%83%89/#_15","title":"\u958b\u767a","text":"<p>\u958b\u767a\u306e\u8a73\u7d30\u306f \u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u3068\u30c6\u30b9\u30c8\u30ac\u30a4\u30c9 \u3092\u53c2\u7167</p>"},{"location":"reference/%E9%96%8B%E7%99%BA%E3%82%AC%E3%82%A4%E3%83%89/#_16","title":"\u904b\u7528","text":""},{"location":"reference/%E9%96%8B%E7%99%BA%E3%82%AC%E3%82%A4%E3%83%89/#_17","title":"\u69cb\u7bc9\u30fb\u914d\u7f6e","text":""},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/","title":"\u975e\u6a5f\u80fd\u8981\u4ef6\u5b9a\u7fa9\u30ac\u30a4\u30c9","text":""},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_2","title":"\u6982\u8981","text":"<p>\u3088\u3044\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u4f5c\u308b\u305f\u3081\u306e\u975e\u6a5f\u80fd\u8981\u4ef6\u5b9a\u7fa9\u306b\u3064\u3044\u3066\u8aac\u660e\u3059\u308b\u3002\u5909\u66f4\u3092\u697d\u306b\u5b89\u5168\u306b\u3067\u304d\u3066\u5f79\u306b\u7acb\u3064\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u5b9f\u73fe\u3059\u308b\u305f\u3081\u3001\u54c1\u8cea\u5c5e\u6027\u3092\u660e\u78ba\u306b\u5b9a\u7fa9\u3057\u3001\u6e2c\u5b9a\u53ef\u80fd\u306a\u6307\u6a19\u3092\u8a2d\u5b9a\u3059\u308b\u3002</p>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_3","title":"\u975e\u6a5f\u80fd\u8981\u4ef6\u306e\u57fa\u672c\u539f\u5247","text":""},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_4","title":"\u3088\u3044\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3068\u975e\u6a5f\u80fd\u8981\u4ef6","text":"<p>\u5909\u66f4\u3092\u697d\u306b\u5b89\u5168\u306b\u3067\u304d\u3066\u5f79\u306b\u7acb\u3064\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u4f5c\u308b\u305f\u3081\u3001\u975e\u6a5f\u80fd\u8981\u4ef6\u306f\u4ee5\u4e0b\u306e\u4fa1\u5024\u3092\u63d0\u4f9b\u3059\u308b\uff1a</p> <ol> <li>\u5b89\u5168\u306a\u5909\u66f4: \u30b7\u30b9\u30c6\u30e0\u304c\u5b89\u5b9a\u3057\u3066\u52d5\u4f5c\u3057\u7d9a\u3051\u308b\u4fe1\u983c\u6027</li> <li>\u697d\u306a\u5909\u66f4: \u4fdd\u5b88\u6027\u3068\u62e1\u5f35\u6027\u306b\u3088\u308a\u5909\u66f4\u30b3\u30b9\u30c8\u3092\u6700\u5c0f\u5316</li> <li>\u5f79\u306b\u7acb\u3064: \u30e6\u30fc\u30b6\u30d3\u30ea\u30c6\u30a3\u3068\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306b\u3088\u308b\u4fa1\u5024\u63d0\u4f9b</li> <li>\u7d99\u7d9a\u7684\u4fa1\u5024: \u53ef\u7528\u6027\u3068\u904b\u7528\u6027\u306b\u3088\u308b\u9577\u671f\u7684\u306a\u4fa1\u5024\u7dad\u6301</li> </ol>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_5","title":"\u975e\u6a5f\u80fd\u8981\u4ef6\u306e\u91cd\u8981\u6027","text":""},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#isoiec-25010","title":"ISO/IEC 25010 \u54c1\u8cea\u30e2\u30c7\u30eb","text":""},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_6","title":"\u30b7\u30b9\u30c6\u30e0\u30fb\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u54c1\u8cea\u30e2\u30c7\u30eb","text":""},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_7","title":"\u54c1\u8cea\u7279\u6027\u306e\u8a73\u7d30","text":""},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#functional-suitability","title":"\u6a5f\u80fd\u9069\u5408\u6027\uff08Functional Suitability\uff09","text":"<ul> <li>\u6a5f\u80fd\u5b8c\u5168\u6027: \u6307\u5b9a\u3055\u308c\u305f\u30bf\u30b9\u30af\u3068\u76ee\u6a19\u3092\u30ab\u30d0\u30fc\u3059\u308b\u6a5f\u80fd\u306e\u5ea6\u5408\u3044</li> <li>\u6a5f\u80fd\u6b63\u78ba\u6027: \u6b63\u78ba\u306a\u7d50\u679c\u3092\u63d0\u4f9b\u3059\u308b\u6a5f\u80fd\u306e\u5ea6\u5408\u3044</li> <li>\u6a5f\u80fd\u9069\u5207\u6027: \u6307\u5b9a\u3055\u308c\u305f\u30bf\u30b9\u30af\u3068\u76ee\u6a19\u3092\u4fc3\u9032\u3059\u308b\u6a5f\u80fd\u306e\u5ea6\u5408\u3044</li> </ul>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#performance-efficiency","title":"\u6027\u80fd\u52b9\u7387\u6027\uff08Performance Efficiency\uff09","text":"<ul> <li>\u6642\u9593\u52b9\u7387\u6027: \u5fdc\u7b54\u6642\u9593\u3001\u51e6\u7406\u6642\u9593\u3001\u30b9\u30eb\u30fc\u30d7\u30c3\u30c8</li> <li>\u8cc7\u6e90\u52b9\u7387\u6027: CPU\u3001\u30e1\u30e2\u30ea\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3001\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u4f7f\u7528\u91cf</li> <li>\u5bb9\u91cf\u6e80\u8db3\u6027: \u6700\u5927\u9650\u754c\u5024\uff08\u30e6\u30fc\u30b6\u30fc\u6570\u3001\u30c7\u30fc\u30bf\u91cf\u306a\u3069\uff09</li> </ul>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#compatibility","title":"\u4e92\u63db\u6027\uff08Compatibility\uff09","text":"<ul> <li>\u5171\u5b58\u6027: \u4ed6\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3068\u5171\u901a\u74b0\u5883\u3067\u30ea\u30bd\u30fc\u30b9\u3092\u5171\u6709\u3059\u308b\u5ea6\u5408\u3044</li> <li>\u76f8\u4e92\u904b\u7528\u6027: \u4ed6\u306e\u30b7\u30b9\u30c6\u30e0\u3068\u60c5\u5831\u4ea4\u63db\u3057\u6a5f\u80fd\u3092\u5229\u7528\u3059\u308b\u5ea6\u5408\u3044</li> </ul>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#usability","title":"\u4f7f\u7528\u6027\uff08Usability\uff09","text":"<ul> <li>\u9069\u5207\u5ea6\u8a8d\u8b58\u6027: \u30e6\u30fc\u30b6\u30fc\u304c\u9069\u5207\u6027\u3092\u8a8d\u8b58\u3059\u308b\u5ea6\u5408\u3044</li> <li>\u7fd2\u5f97\u6027: \u5b66\u7fd2\u306e\u3057\u3084\u3059\u3055</li> <li>\u904b\u7528\u6027: \u64cd\u4f5c\u30fb\u5236\u5fa1\u306e\u3057\u3084\u3059\u3055</li> <li>\u30e6\u30fc\u30b6\u30fc\u30a8\u30e9\u30fc\u9632\u6b62\u6027: \u30a8\u30e9\u30fc\u3092\u9632\u8b77\u3059\u308b\u5ea6\u5408\u3044</li> <li>UI\u5feb\u7f8e\u6027: \u6e80\u8db3\u611f\u3092\u4e0e\u3048\u308b\u5ea6\u5408\u3044</li> <li>\u30a2\u30af\u30bb\u30b7\u30d3\u30ea\u30c6\u30a3: \u5e45\u5e83\u3044\u30e6\u30fc\u30b6\u30fc\u304c\u4f7f\u7528\u3067\u304d\u308b\u5ea6\u5408\u3044</li> </ul>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#reliability","title":"\u4fe1\u983c\u6027\uff08Reliability\uff09","text":"<ul> <li>\u6210\u719f\u6027: \u901a\u5e38\u904b\u7528\u4e0b\u3067\u4fe1\u983c\u6027\u8981\u6c42\u3092\u6e80\u8db3\u3059\u308b\u5ea6\u5408\u3044</li> <li>\u53ef\u7528\u6027: \u904b\u7528\u53ef\u80fd\u3067\u5229\u7528\u3067\u304d\u308b\u5ea6\u5408\u3044</li> <li>\u969c\u5bb3\u8a31\u5bb9\u6027: \u969c\u5bb3\u306b\u3082\u304b\u304b\u308f\u3089\u305a\u52d5\u4f5c\u3059\u308b\u5ea6\u5408\u3044</li> <li>\u56de\u5fa9\u6027: \u969c\u5bb3\u5f8c\u306b\u56de\u5fa9\u3057\u5f71\u97ff\u30c7\u30fc\u30bf\u3092\u5fa9\u65e7\u3059\u308b\u5ea6\u5408\u3044</li> </ul>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#security","title":"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\uff08Security\uff09","text":"<ul> <li>\u6a5f\u5bc6\u6027: \u8a8d\u53ef\u3055\u308c\u305f\u3082\u306e\u306e\u307f\u304c\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u5ea6\u5408\u3044</li> <li>\u5b8c\u5168\u6027: \u30c7\u30fc\u30bf\u3084\u8a08\u7b97\u65b9\u6cd5\u3078\u306e\u4e0d\u6b63\u30a2\u30af\u30bb\u30b9\u3092\u9632\u3050\u5ea6\u5408\u3044</li> <li>\u5426\u8a8d\u9632\u6b62\u6027: \u30a2\u30af\u30b7\u30e7\u30f3\u3084\u4e8b\u8c61\u304c\u8d77\u304d\u305f\u3053\u3068\u3092\u8a3c\u660e\u3059\u308b\u5ea6\u5408\u3044</li> <li>\u8cac\u4efb\u8ffd\u8de1\u6027: \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u4e00\u610f\u306b\u8ffd\u8de1\u3059\u308b\u5ea6\u5408\u3044</li> <li>\u771f\u6b63\u6027: \u4e3b\u5f35\u3055\u308c\u305f\u30a2\u30a4\u30c7\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u8a3c\u660e\u3059\u308b\u5ea6\u5408\u3044</li> </ul>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#maintainability","title":"\u4fdd\u5b88\u6027\uff08Maintainability\uff09","text":"<ul> <li>\u30e2\u30b8\u30e5\u30fc\u30eb\u6027: \u69cb\u6210\u8981\u7d20\u3078\u306e\u5909\u66f4\u304c\u4ed6\u306b\u4e0e\u3048\u308b\u5f71\u97ff\u304c\u6700\u5c0f\u9650\u306e\u5ea6\u5408\u3044</li> <li>\u518d\u5229\u7528\u6027: \u4ed6\u306e\u30b7\u30b9\u30c6\u30e0\u3067\u5229\u7528\u3067\u304d\u308b\u5ea6\u5408\u3044</li> <li>\u89e3\u6790\u6027: \u5909\u66f4\u306e\u5f71\u97ff\u3092\u8a55\u4fa1\u3059\u308b\u5ea6\u5408\u3044</li> <li>\u4fee\u6b63\u6027: \u6b20\u9665\u9664\u53bb\u3084\u6539\u5584\u3092\u52b9\u679c\u7684\u304b\u3064\u52b9\u7387\u7684\u306b\u884c\u3048\u308b\u5ea6\u5408\u3044</li> <li>\u8a66\u9a13\u6027: \u30c6\u30b9\u30c8\u57fa\u6e96\u3092\u78ba\u7acb\u3057\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3059\u308b\u5ea6\u5408\u3044</li> </ul>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#portability","title":"\u79fb\u690d\u6027\uff08Portability\uff09","text":"<ul> <li>\u9069\u5fdc\u6027: \u7570\u306a\u308b\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u30fb\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u74b0\u5883\u306b\u9069\u5fdc\u3059\u308b\u5ea6\u5408\u3044</li> <li>\u8a2d\u7f6e\u6027: \u6307\u5b9a\u3055\u308c\u305f\u74b0\u5883\u306b\u8a2d\u7f6e\u3059\u308b\u5ea6\u5408\u3044</li> <li>\u7f6e\u63db\u6027: \u540c\u3058\u76ee\u7684\u306e\u4ed6\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3068\u7f6e\u304d\u63db\u3048\u308b\u5ea6\u5408\u3044</li> </ul>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_8","title":"\u975e\u6a5f\u80fd\u8981\u4ef6\u306e\u5206\u985e","text":""},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#furps","title":"FURPS+ \u30e2\u30c7\u30eb","text":""},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_9","title":"\u4f1a\u8b70\u5ba4\u4e88\u7d04\u30b7\u30b9\u30c6\u30e0\u306e\u975e\u6a5f\u80fd\u8981\u4ef6\u5206\u985e","text":""},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#performance-requirements","title":"\u6027\u80fd\u8981\u4ef6\uff08Performance Requirements\uff09","text":"<ul> <li>\u5fdc\u7b54\u6642\u9593: \u30e6\u30fc\u30b6\u30fc\u30a2\u30af\u30b7\u30e7\u30f3\u306b\u5bfe\u3059\u308b\u30ec\u30b9\u30dd\u30f3\u30b9\u6642\u9593</li> <li>\u30b9\u30eb\u30fc\u30d7\u30c3\u30c8: \u540c\u6642\u51e6\u7406\u53ef\u80fd\u306a\u4e88\u7d04\u6570\u30fb\u30e6\u30fc\u30b6\u30fc\u6570</li> <li>\u5bb9\u91cf: \u4fdd\u5b58\u53ef\u80fd\u306a\u30c7\u30fc\u30bf\u91cf\u3001\u30b5\u30dd\u30fc\u30c8\u3059\u308b\u30e6\u30fc\u30b6\u30fc\u6570</li> </ul>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#availability-reliability-requirements","title":"\u53ef\u7528\u6027\u30fb\u4fe1\u983c\u6027\u8981\u4ef6\uff08Availability &amp; Reliability Requirements\uff09","text":"<ul> <li>\u7a3c\u50cd\u7387: \u30b7\u30b9\u30c6\u30e0\u304c\u5229\u7528\u53ef\u80fd\u306a\u6642\u9593\u306e\u5272\u5408</li> <li>\u969c\u5bb3\u56de\u5fa9: \u30b7\u30b9\u30c6\u30e0\u969c\u5bb3\u304b\u3089\u306e\u56de\u5fa9\u6642\u9593</li> <li>\u30c7\u30fc\u30bf\u4fdd\u8b77: \u30c7\u30fc\u30bf\u306e\u640d\u5931\u9632\u6b62\u3068\u30d0\u30c3\u30af\u30a2\u30c3\u30d7</li> </ul>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#security-requirements","title":"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8981\u4ef6\uff08Security Requirements\uff09","text":"<ul> <li>\u8a8d\u8a3c\u30fb\u8a8d\u53ef: \u30e6\u30fc\u30b6\u30fc\u8b58\u5225\u3068\u30a2\u30af\u30bb\u30b9\u5236\u5fa1</li> <li>\u30c7\u30fc\u30bf\u4fdd\u8b77: \u500b\u4eba\u60c5\u5831\u30fb\u6a5f\u5bc6\u60c5\u5831\u306e\u4fdd\u8b77</li> <li>\u76e3\u67fb: \u30a2\u30af\u30bb\u30b9\u30ed\u30b0\u3068\u64cd\u4f5c\u5c65\u6b74\u306e\u8a18\u9332</li> </ul>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#usability-requirements","title":"\u4f7f\u7528\u6027\u8981\u4ef6\uff08Usability Requirements\uff09","text":"<ul> <li>\u64cd\u4f5c\u6027: \u76f4\u611f\u7684\u3067\u4f7f\u3044\u3084\u3059\u3044\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9</li> <li>\u30a2\u30af\u30bb\u30b7\u30d3\u30ea\u30c6\u30a3: \u591a\u69d8\u306a\u30e6\u30fc\u30b6\u30fc\u3078\u306e\u5bfe\u5fdc</li> <li>\u5fdc\u7b54\u6027: \u30ec\u30b9\u30dd\u30f3\u30b7\u30d6\u30c7\u30b6\u30a4\u30f3\u3068\u5feb\u9069\u306a\u64cd\u4f5c\u611f</li> </ul>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#maintainability-scalability-requirements","title":"\u4fdd\u5b88\u6027\u30fb\u62e1\u5f35\u6027\u8981\u4ef6\uff08Maintainability &amp; Scalability Requirements\uff09","text":"<ul> <li>\u4fdd\u5b88\u6027: \u30b3\u30fc\u30c9\u306e\u7406\u89e3\u3057\u3084\u3059\u3055\u3068\u5909\u66f4\u5bb9\u6613\u6027</li> <li>\u62e1\u5f35\u6027: \u6a5f\u80fd\u8ffd\u52a0\u3068\u30e6\u30fc\u30b6\u30fc\u5897\u52a0\u3078\u306e\u5bfe\u5fdc</li> <li>\u76e3\u8996\u6027: \u30b7\u30b9\u30c6\u30e0\u72b6\u614b\u306e\u628a\u63e1\u3068\u554f\u984c\u306e\u65e9\u671f\u767a\u898b</li> </ul>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#compatibility-portability-requirements","title":"\u4e92\u63db\u6027\u30fb\u79fb\u690d\u6027\u8981\u4ef6\uff08Compatibility &amp; Portability Requirements\uff09","text":"<ul> <li>\u30d6\u30e9\u30a6\u30b6\u4e92\u63db\u6027: \u8907\u6570\u30d6\u30e9\u30a6\u30b6\u3067\u306e\u52d5\u4f5c\u4fdd\u8a3c</li> <li>\u30c7\u30d0\u30a4\u30b9\u5bfe\u5fdc: PC\u3001\u30bf\u30d6\u30ec\u30c3\u30c8\u3001\u30b9\u30de\u30fc\u30c8\u30d5\u30a9\u30f3\u5bfe\u5fdc</li> <li>\u30b7\u30b9\u30c6\u30e0\u9023\u643a: \u65e2\u5b58\u30b7\u30b9\u30c6\u30e0\u3068\u306e\u9023\u643a\u80fd\u529b</li> </ul>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_10","title":"\u4f1a\u8b70\u5ba4\u4e88\u7d04\u30b7\u30b9\u30c6\u30e0\u306e\u975e\u6a5f\u80fd\u8981\u4ef6\u8a73\u7d30","text":""},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#1-performance-requirements","title":"1. \u6027\u80fd\u8981\u4ef6\uff08Performance Requirements\uff09","text":""},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#11","title":"1.1 \u5fdc\u7b54\u6642\u9593\u8981\u4ef6","text":"<p>\u6e2c\u5b9a\u65b9\u6cd5: <pre><code>// \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u6027\u80fd\u6e2c\u5b9a\nconst observer = new PerformanceObserver((list) =&gt; {\n  list.getEntries().forEach((entry) =&gt; {\n    console.log(`${entry.name}: ${entry.duration}ms`);\n  });\n});\nobserver.observe({ entryTypes: ['navigation', 'measure'] });\n\n// API\u5fdc\u7b54\u6642\u9593\u6e2c\u5b9a\nconst startTime = performance.now();\nawait fetch('/api/reservations');\nconst endTime = performance.now();\nconsole.log(`API\u5fdc\u7b54\u6642\u9593: ${endTime - startTime}ms`);\n</code></pre></p> <p>\u5b9f\u88c5\u4f8b: <pre><code>// \u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u6027\u80fd\u76e3\u8996\n@RestController\n@Timed // Micrometer \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\npublic class ReservationController {\n\n    @GetMapping(\"/reservations\")\n    @Timed(name = \"reservation.search\", description = \"\u4e88\u7d04\u691c\u7d22\u51e6\u7406\u6642\u9593\")\n    public ResponseEntity&lt;List&lt;ReservationResponse&gt;&gt; searchReservations(\n            @RequestParam ReservationSearchCriteria criteria) {\n        // \u51e6\u7406\u5b9f\u88c5\n    }\n}\n\n// \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30af\u30a8\u30ea\u6700\u9069\u5316\n@Repository\npublic class ReservationRepository {\n\n    @Query(value = \"\"\"\n        SELECT r FROM Reservation r \n        WHERE r.roomId = :roomId \n        AND r.startTime &gt;= :startDate \n        AND r.endTime &lt;= :endDate \n        AND r.status IN ('CONFIRMED', 'PENDING')\n        \"\"\")\n    List&lt;Reservation&gt; findActiveByRoomAndDateRange(\n        @Param(\"roomId\") UUID roomId,\n        @Param(\"startDate\") LocalDateTime startDate,\n        @Param(\"endDate\") LocalDateTime endDate);\n}\n</code></pre></p>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#12","title":"1.2 \u30b9\u30eb\u30fc\u30d7\u30c3\u30c8\u8981\u4ef6","text":"<ul> <li>\u540c\u6642\u30e6\u30fc\u30b6\u30fc\u6570: 100\u540d\uff08\u30d4\u30fc\u30af\u6642200\u540d\u307e\u3067\u5bfe\u5fdc\uff09</li> <li>\u4e88\u7d04\u51e6\u7406\u80fd\u529b: \u6bce\u79d210\u4ef6\u306e\u4e88\u7d04\u51e6\u7406</li> <li>\u30c7\u30fc\u30bf\u5bb9\u91cf: \u5e74\u959310,000\u4ef6\u306e\u4e88\u7d04\u30c7\u30fc\u30bf\u30015\u5e74\u9593\u4fdd\u6301</li> </ul> <pre><code>// \u8ca0\u8377\u30c6\u30b9\u30c8\u8a2d\u5b9a\u4f8b\n@Test\n@LoadTest(users = 100, duration = 300) // 100\u30e6\u30fc\u30b6\u30fc\u30015\u5206\u9593\nvoid \u4e88\u7d04\u4f5c\u6210\u306e\u8ca0\u8377\u30c6\u30b9\u30c8() {\n    CreateReservationRequest request = createTestRequest();\n\n    ResponseEntity&lt;ReservationResponse&gt; response = restTemplate.postForEntity(\n        \"/api/reservations\", request, ReservationResponse.class);\n\n    assertThat(response.getStatusCode()).isEqualTo(HttpStatus.CREATED);\n    assertThat(response.getBody().getReservationId()).isNotNull();\n}\n</code></pre>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#2-availability-reliability-requirements","title":"2. \u53ef\u7528\u6027\u30fb\u4fe1\u983c\u6027\u8981\u4ef6\uff08Availability &amp; Reliability Requirements\uff09","text":""},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#21","title":"2.1 \u7a3c\u50cd\u7387\u8981\u4ef6","text":"<p>\u5b9f\u88c5\u4f8b: <pre><code># Docker Compose \u3067\u306e\u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\nservices:\n  app:\n    image: meeting-room-app:latest\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:8080/actuator/health\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n      start_period: 60s\n    restart: unless-stopped\n\n  database:\n    image: postgres:15\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U ${POSTGRES_USER}\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n</code></pre></p> <pre><code>// Spring Boot Actuator \u306b\u3088\u308b\u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\n@Component\npublic class DatabaseHealthIndicator implements HealthIndicator {\n\n    private final DataSource dataSource;\n\n    @Override\n    public Health health() {\n        try (Connection connection = dataSource.getConnection()) {\n            if (connection.isValid(1)) {\n                return Health.up()\n                    .withDetail(\"database\", \"Available\")\n                    .withDetail(\"validationQuery\", \"SELECT 1\")\n                    .build();\n            }\n        } catch (SQLException e) {\n            return Health.down(e)\n                .withDetail(\"database\", \"Unavailable\")\n                .build();\n        }\n        return Health.down()\n            .withDetail(\"database\", \"Unknown\")\n            .build();\n    }\n}\n</code></pre>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#22","title":"2.2 \u969c\u5bb3\u8a31\u5bb9\u6027","text":"<pre><code>// Circuit Breaker \u30d1\u30bf\u30fc\u30f3\u5b9f\u88c5\n@Component\npublic class ExternalServiceClient {\n\n    private final CircuitBreaker circuitBreaker;\n\n    public ExternalServiceClient() {\n        this.circuitBreaker = CircuitBreaker.ofDefaults(\"externalService\");\n        circuitBreaker.getEventPublisher()\n            .onStateTransition(event -&gt; \n                log.info(\"Circuit breaker state transition: {}\", event));\n    }\n\n    public Optional&lt;String&gt; callExternalService(String request) {\n        return circuitBreaker.executeSupplier(() -&gt; {\n            // \u5916\u90e8\u30b5\u30fc\u30d3\u30b9\u547c\u3073\u51fa\u3057\n            return externalServiceCall(request);\n        });\n    }\n}\n\n// \u518d\u8a66\u884c\u6a5f\u80fd\n@Retryable(\n    value = {DataAccessException.class},\n    maxAttempts = 3,\n    backoff = @Backoff(delay = 1000, multiplier = 2)\n)\npublic Reservation saveReservation(Reservation reservation) {\n    return reservationRepository.save(reservation);\n}\n</code></pre>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#3-security-requirements","title":"3. \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8981\u4ef6\uff08Security Requirements\uff09","text":""},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#31","title":"3.1 \u8a8d\u8a3c\u30fb\u8a8d\u53ef\u8981\u4ef6","text":"<p>\u5b9f\u88c5\u4f8b: <pre><code>// JWT \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a\n@Configuration\n@EnableWebSecurity\n@EnableMethodSecurity\npublic class SecurityConfig {\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        return http\n            .csrf(csrf -&gt; csrf.disable())\n            .sessionManagement(session -&gt; \n                session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n            .authorizeHttpRequests(auth -&gt; auth\n                .requestMatchers(\"/api/auth/**\").permitAll()\n                .requestMatchers(HttpMethod.GET, \"/api/rooms\").hasAnyRole(\"USER\", \"ADMIN\")\n                .requestMatchers(\"/api/reservations/**\").hasAnyRole(\"USER\", \"ADMIN\")\n                .requestMatchers(\"/api/admin/**\").hasRole(\"ADMIN\")\n                .anyRequest().authenticated())\n            .oauth2ResourceServer(oauth2 -&gt; oauth2\n                .jwt(jwt -&gt; jwt.jwtAuthenticationConverter(jwtAuthConverter())))\n            .build();\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder(12); // \u5f37\u5ea612\n    }\n}\n\n// \u8a8d\u53ef\u5236\u5fa1\n@PreAuthorize(\"hasRole('ADMIN') or @reservationSecurityService.canAccessReservation(#reservationId, authentication.name)\")\npublic ReservationResponse getReservation(@PathVariable String reservationId) {\n    // \u5b9f\u88c5\n}\n\n// \u76e3\u67fb\u30ed\u30b0\n@EventListener\npublic class AuditEventListener {\n\n    @Async\n    @EventListener\n    public void handleAuditEvent(AuditEvent event) {\n        AuditLog auditLog = AuditLog.builder()\n            .userId(event.getPrincipal())\n            .action(event.getType())\n            .resource(event.getData().toString())\n            .timestamp(LocalDateTime.now())\n            .ipAddress(getClientIpAddress())\n            .userAgent(getUserAgent())\n            .build();\n\n        auditLogRepository.save(auditLog);\n    }\n}\n</code></pre></p>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#32","title":"3.2 \u30c7\u30fc\u30bf\u6697\u53f7\u5316","text":"<pre><code>// \u500b\u4eba\u60c5\u5831\u6697\u53f7\u5316\n@Entity\n@Table(name = \"users\")\npublic class User {\n\n    @Id\n    private UUID id;\n\n    @Column(name = \"username\")\n    private String username;\n\n    @Convert(converter = EncryptedStringConverter.class)\n    @Column(name = \"email\")\n    private String email; // \u6697\u53f7\u5316\u4fdd\u5b58\n\n    @Convert(converter = EncryptedStringConverter.class)\n    @Column(name = \"full_name\")\n    private String fullName; // \u6697\u53f7\u5316\u4fdd\u5b58\n\n    @Column(name = \"password_hash\")\n    private String passwordHash; // BCrypt \u30cf\u30c3\u30b7\u30e5\n}\n\n// \u6697\u53f7\u5316\u30b3\u30f3\u30d0\u30fc\u30bf\u30fc\n@Component\npublic class EncryptedStringConverter implements AttributeConverter&lt;String, String&gt; {\n\n    @Autowired\n    private AESEncryptionService encryptionService;\n\n    @Override\n    public String convertToDatabaseColumn(String attribute) {\n        return attribute == null ? null : encryptionService.encrypt(attribute);\n    }\n\n    @Override\n    public String convertToEntityAttribute(String dbData) {\n        return dbData == null ? null : encryptionService.decrypt(dbData);\n    }\n}\n</code></pre>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#4-usability-requirements","title":"4. \u4f7f\u7528\u6027\u8981\u4ef6\uff08Usability Requirements\uff09","text":""},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#41","title":"4.1 \u30e6\u30fc\u30b6\u30d3\u30ea\u30c6\u30a3\u8981\u4ef6","text":"<p>\u5b9f\u88c5\u4f8b: <pre><code>// \u30a2\u30af\u30bb\u30b7\u30d3\u30ea\u30c6\u30a3\u5bfe\u5fdc\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\ninterface ReservationFormProps {\n  onSubmit: (data: ReservationFormData) =&gt; void;\n}\n\nexport const ReservationForm: React.FC&lt;ReservationFormProps&gt; = ({ onSubmit }) =&gt; {\n  return (\n    &lt;form onSubmit={handleSubmit} role=\"form\" aria-label=\"\u4f1a\u8b70\u5ba4\u4e88\u7d04\u30d5\u30a9\u30fc\u30e0\"&gt;\n      &lt;fieldset&gt;\n        &lt;legend&gt;\u4e88\u7d04\u60c5\u5831&lt;/legend&gt;\n\n        &lt;div className=\"form-group\"&gt;\n          &lt;label htmlFor=\"room-select\" className=\"required\"&gt;\n            \u4f1a\u8b70\u5ba4\u9078\u629e\n          &lt;/label&gt;\n          &lt;select\n            id=\"room-select\"\n            aria-required=\"true\"\n            aria-describedby=\"room-help\"\n            {...register('roomId', { required: '\u4f1a\u8b70\u5ba4\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044' })}\n          &gt;\n            &lt;option value=\"\"&gt;\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044&lt;/option&gt;\n            {rooms.map(room =&gt; (\n              &lt;option key={room.id} value={room.id}&gt;\n                {room.name} (\u53ce\u5bb9\u4eba\u6570: {room.capacity}\u540d)\n              &lt;/option&gt;\n            ))}\n          &lt;/select&gt;\n          &lt;div id=\"room-help\" className=\"help-text\"&gt;\n            \u5e0c\u671b\u3059\u308b\u4f1a\u8b70\u5ba4\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\n          &lt;/div&gt;\n          {errors.roomId &amp;&amp; (\n            &lt;div role=\"alert\" className=\"error-message\"&gt;\n              {errors.roomId.message}\n            &lt;/div&gt;\n          )}\n        &lt;/div&gt;\n\n        &lt;div className=\"form-group\"&gt;\n          &lt;label htmlFor=\"date-input\" className=\"required\"&gt;\n            \u5229\u7528\u65e5\n          &lt;/label&gt;\n          &lt;input\n            type=\"date\"\n            id=\"date-input\"\n            aria-required=\"true\"\n            min={new Date().toISOString().split('T')[0]}\n            {...register('date', { required: '\u5229\u7528\u65e5\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044' })}\n          /&gt;\n        &lt;/div&gt;\n\n        &lt;button \n          type=\"submit\" \n          disabled={isSubmitting}\n          aria-describedby=\"submit-help\"\n        &gt;\n          {isSubmitting ? '\u4e88\u7d04\u4e2d...' : '\u4e88\u7d04\u3059\u308b'}\n        &lt;/button&gt;\n        &lt;div id=\"submit-help\" className=\"help-text\"&gt;\n          \u5165\u529b\u5185\u5bb9\u3092\u78ba\u8a8d\u3057\u3066\u4e88\u7d04\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\n        &lt;/div&gt;\n      &lt;/fieldset&gt;\n    &lt;/form&gt;\n  );\n};\n\n// \u30ec\u30b9\u30dd\u30f3\u30b7\u30d6\u30c7\u30b6\u30a4\u30f3\nconst ReservationCard = styled.div`\n  padding: 1rem;\n  border: 1px solid #e2e8f0;\n  border-radius: 0.5rem;\n\n  @media (min-width: 768px) {\n    padding: 1.5rem;\n    display: grid;\n    grid-template-columns: 1fr auto;\n    gap: 1rem;\n  }\n\n  @media (min-width: 1024px) {\n    padding: 2rem;\n  }\n`;\n</code></pre></p>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#42","title":"4.2 \u30e6\u30fc\u30b6\u30fc\u30a8\u30af\u30b9\u30da\u30ea\u30a8\u30f3\u30b9\u6307\u6a19","text":"<pre><code>// Core Web Vitals \u6e2c\u5b9a\nimport { getCLS, getFID, getFCP, getLCP, getTTFB } from 'web-vitals';\n\nfunction sendToAnalytics(metric) {\n  // \u5206\u6790\u30c4\u30fc\u30eb\u3078\u306e\u9001\u4fe1\n  analytics.track('Performance Metric', {\n    name: metric.name,\n    value: metric.value,\n    rating: metric.rating\n  });\n}\n\n// \u5404\u6307\u6a19\u306e\u6e2c\u5b9a\ngetCLS(sendToAnalytics); // Cumulative Layout Shift &lt; 0.1\ngetFID(sendToAnalytics); // First Input Delay &lt; 100ms\ngetFCP(sendToAnalytics); // First Contentful Paint &lt; 1.8s\ngetLCP(sendToAnalytics); // Largest Contentful Paint &lt; 2.5s\ngetTTFB(sendToAnalytics); // Time to First Byte &lt; 0.8s\n\n// \u30e6\u30fc\u30b6\u30fc\u884c\u52d5\u5206\u6790\nconst trackUserInteraction = (action, element, duration) =&gt; {\n  analytics.track('User Interaction', {\n    action,\n    element,\n    duration,\n    timestamp: new Date().toISOString(),\n    userId: getCurrentUserId()\n  });\n};\n\n// \u4e88\u7d04\u30d7\u30ed\u30bb\u30b9\u5206\u6790\nconst reservationFlowTracking = {\n  searchStart: () =&gt; trackUserInteraction('search_start', 'room_search', 0),\n  searchComplete: (duration) =&gt; trackUserInteraction('search_complete', 'room_search', duration),\n  reservationStart: () =&gt; trackUserInteraction('reservation_start', 'reservation_form', 0),\n  reservationComplete: (duration) =&gt; trackUserInteraction('reservation_complete', 'reservation_form', duration),\n  reservationAbandoned: (step, duration) =&gt; trackUserInteraction('reservation_abandoned', step, duration)\n};\n</code></pre>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#5-maintainability-scalability-requirements","title":"5. \u4fdd\u5b88\u6027\u30fb\u62e1\u5f35\u6027\u8981\u4ef6\uff08Maintainability &amp; Scalability Requirements\uff09","text":""},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#51","title":"5.1 \u4fdd\u5b88\u6027\u8981\u4ef6","text":"<p>\u5b9f\u88c5\u4f8b: <pre><code>// \u69cb\u9020\u5316\u30ed\u30b0\n@RestController\n@Slf4j\npublic class ReservationController {\n\n    @PostMapping(\"/reservations\")\n    public ResponseEntity&lt;ReservationResponse&gt; createReservation(\n            @RequestBody CreateReservationRequest request,\n            HttpServletRequest httpRequest) {\n\n        MDC.put(\"userId\", getCurrentUserId());\n        MDC.put(\"correlationId\", UUID.randomUUID().toString());\n        MDC.put(\"ipAddress\", getClientIpAddress(httpRequest));\n\n        try {\n            log.info(\"Creating reservation: roomId={}, startTime={}\", \n                request.getRoomId(), request.getStartTime());\n\n            ReservationId reservationId = createReservationUseCase.execute(\n                mapToCommand(request));\n\n            log.info(\"Reservation created successfully: reservationId={}\", reservationId);\n\n            return ResponseEntity.status(HttpStatus.CREATED)\n                .body(ReservationResponse.from(reservationId));\n\n        } catch (Exception e) {\n            log.error(\"Failed to create reservation\", e);\n            throw e;\n        } finally {\n            MDC.clear();\n        }\n    }\n}\n\n// \u30e1\u30c8\u30ea\u30af\u30b9\u53ce\u96c6\n@Component\n@Service\npublic class ReservationMetricsService {\n\n    private final MeterRegistry meterRegistry;\n    private final Counter reservationCreatedCounter;\n    private final Counter reservationFailedCounter;\n    private final Timer reservationProcessingTimer;\n\n    public ReservationMetricsService(MeterRegistry meterRegistry) {\n        this.meterRegistry = meterRegistry;\n        this.reservationCreatedCounter = Counter.builder(\"reservation.created\")\n            .description(\"Created reservations count\")\n            .register(meterRegistry);\n        this.reservationFailedCounter = Counter.builder(\"reservation.failed\")\n            .description(\"Failed reservations count\")\n            .register(meterRegistry);\n        this.reservationProcessingTimer = Timer.builder(\"reservation.processing\")\n            .description(\"Reservation processing time\")\n            .register(meterRegistry);\n    }\n\n    public void recordReservationCreated() {\n        reservationCreatedCounter.increment();\n    }\n\n    public void recordReservationFailed(String reason) {\n        reservationFailedCounter.increment(Tags.of(\"reason\", reason));\n    }\n\n    public Timer.Sample startProcessingTimer() {\n        return Timer.start(meterRegistry);\n    }\n}\n</code></pre></p>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#52","title":"5.2 \u62e1\u5f35\u6027\u8981\u4ef6","text":"<pre><code>// \u6c34\u5e73\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u5bfe\u5fdc\n@Configuration\n@EnableCaching\npublic class CacheConfig {\n\n    @Bean\n    public CacheManager cacheManager() {\n        RedisCacheManager.Builder builder = RedisCacheManager\n            .RedisCacheManagerBuilder\n            .fromConnectionFactory(jedisConnectionFactory())\n            .cacheDefaults(cacheConfiguration());\n\n        return builder.build();\n    }\n\n    private RedisCacheConfiguration cacheConfiguration() {\n        return RedisCacheConfiguration.defaultCacheConfig()\n            .entryTtl(Duration.ofMinutes(10))\n            .serializeKeysWith(RedisSerializationContext.SerializationPair\n                .fromSerializer(new StringRedisSerializer()))\n            .serializeValuesWith(RedisSerializationContext.SerializationPair\n                .fromSerializer(new GenericJackson2JsonRedisSerializer()));\n    }\n}\n\n// \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\n@Entity\n@Table(name = \"reservations\")\n@PartitionKey(\"DATE(start_time)\") // \u65e5\u4ed8\u306b\u3088\u308b\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\npublic class ReservationEntity {\n    // \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u5b9a\u7fa9\n}\n\n// \u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u5316\u306e\u6e96\u5099\n@FeignClient(name = \"notification-service\", url = \"${services.notification.url}\")\npublic interface NotificationServiceClient {\n\n    @PostMapping(\"/notifications\")\n    ResponseEntity&lt;Void&gt; sendNotification(@RequestBody NotificationRequest request);\n}\n</code></pre>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#6-operational-requirements","title":"6. \u904b\u7528\u8981\u4ef6\uff08Operational Requirements\uff09","text":""},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#61","title":"6.1 \u76e3\u8996\u30fb\u904b\u7528\u8981\u4ef6","text":"<pre><code># Kubernetes \u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u8a2d\u5b9a\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: meeting-room-app\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: meeting-room-app\n  template:\n    spec:\n      containers:\n      - name: app\n        image: meeting-room-app:latest\n        ports:\n        - containerPort: 8080\n        resources:\n          requests:\n            memory: \"512Mi\"\n            cpu: \"500m\"\n          limits:\n            memory: \"1Gi\"\n            cpu: \"1000m\"\n        livenessProbe:\n          httpGet:\n            path: /actuator/health/liveness\n            port: 8080\n          initialDelaySeconds: 60\n          periodSeconds: 30\n        readinessProbe:\n          httpGet:\n            path: /actuator/health/readiness\n            port: 8080\n          initialDelaySeconds: 30\n          periodSeconds: 10\n        env:\n        - name: JAVA_OPTS\n          value: \"-Xms512m -Xmx1g -XX:+UseG1GC\"\n        - name: SPRING_PROFILES_ACTIVE\n          value: \"production\"\n</code></pre> <pre><code>// \u30ab\u30b9\u30bf\u30e0\u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\n@Component\npublic class ReservationSystemHealthIndicator implements HealthIndicator {\n\n    private final ReservationRepository reservationRepository;\n    private final NotificationServiceClient notificationService;\n\n    @Override\n    public Health health() {\n        Health.Builder status = Health.up();\n\n        try {\n            // \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u63a5\u7d9a\u78ba\u8a8d\n            long activeReservationsCount = reservationRepository.countActiveReservations();\n            status.withDetail(\"database\", Map.of(\n                \"status\", \"UP\",\n                \"activeReservations\", activeReservationsCount\n            ));\n\n            // \u5916\u90e8\u30b5\u30fc\u30d3\u30b9\u63a5\u7d9a\u78ba\u8a8d\n            boolean notificationServiceUp = checkNotificationService();\n            status.withDetail(\"notificationService\", Map.of(\n                \"status\", notificationServiceUp ? \"UP\" : \"DOWN\"\n            ));\n\n            // \u30b7\u30b9\u30c6\u30e0\u30ea\u30bd\u30fc\u30b9\u78ba\u8a8d\n            status.withDetail(\"system\", getSystemMetrics());\n\n        } catch (Exception e) {\n            return Health.down(e).build();\n        }\n\n        return status.build();\n    }\n\n    private Map&lt;String, Object&gt; getSystemMetrics() {\n        Runtime runtime = Runtime.getRuntime();\n        long maxMemory = runtime.maxMemory();\n        long totalMemory = runtime.totalMemory();\n        long freeMemory = runtime.freeMemory();\n\n        return Map.of(\n            \"memory.max\", maxMemory,\n            \"memory.total\", totalMemory,\n            \"memory.free\", freeMemory,\n            \"memory.used\", totalMemory - freeMemory,\n            \"processors\", runtime.availableProcessors()\n        );\n    }\n}\n</code></pre>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_11","title":"\u975e\u6a5f\u80fd\u8981\u4ef6\u306e\u6e2c\u5b9a\u3068\u691c\u8a3c","text":""},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#1","title":"1. \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30c6\u30b9\u30c8","text":"<pre><code>// JMeter \u8ca0\u8377\u30c6\u30b9\u30c8\u30b7\u30ca\u30ea\u30aa\n@Test\npublic class PerformanceTest {\n\n    @LoadTest(\n        users = 100,\n        rampUp = 60,  // 60\u79d2\u3067100\u30e6\u30fc\u30b6\u30fc\u307e\u3067\u5897\u52a0\n        duration = 300 // 5\u5206\u9593\u5b9f\u884c\n    )\n    public void \u4e88\u7d04\u4f5c\u6210\u8ca0\u8377\u30c6\u30b9\u30c8() {\n        // \u4e88\u7d04\u4f5c\u6210API\u306e\u8ca0\u8377\u30c6\u30b9\u30c8\n        given()\n            .contentType(ContentType.JSON)\n            .body(createReservationRequest())\n        .when()\n            .post(\"/api/reservations\")\n        .then()\n            .statusCode(201)\n            .time(lessThan(2000L)); // 2\u79d2\u4ee5\u5185\n    }\n\n    @PerformanceTest\n    @JvmOptions({\"-Xms1g\", \"-Xmx2g\", \"-XX:+UseG1GC\"})\n    public void \u30e1\u30e2\u30ea\u4f7f\u7528\u91cf\u30c6\u30b9\u30c8() {\n        // \u30e1\u30e2\u30ea\u4f7f\u7528\u91cf\u3068GC\u306e\u5f71\u97ff\u3092\u6e2c\u5b9a\n        for (int i = 0; i &lt; 10000; i++) {\n            createAndProcessReservation();\n        }\n\n        // \u30e1\u30e2\u30ea\u4f7f\u7528\u91cf\u3092\u78ba\u8a8d\n        assertThat(getUsedMemoryMB()).isLessThan(1500); // 1.5GB\u4ee5\u4e0b\n        assertThat(getGcPauseTimeMs()).isLessThan(100); // GC\u505c\u6b62\u6642\u9593100ms\u4ee5\u4e0b\n    }\n}\n</code></pre>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#2","title":"2. \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30c6\u30b9\u30c8","text":"<pre><code>// \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30c6\u30b9\u30c8\n@SpringBootTest\n@AutoConfigureMockMvc\npublic class SecurityTest {\n\n    @Test\n    public void \u8a8d\u8a3c\u306a\u3057\u3067\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068401\u30a8\u30e9\u30fc() throws Exception {\n        mockMvc.perform(get(\"/api/reservations\"))\n            .andExpect(status().isUnauthorized());\n    }\n\n    @Test\n    public void \u7121\u52b9\u306aJWT\u30c8\u30fc\u30af\u30f3\u3067401\u30a8\u30e9\u30fc() throws Exception {\n        mockMvc.perform(get(\"/api/reservations\")\n                .header(\"Authorization\", \"Bearer invalid-token\"))\n            .andExpected(status().isUnauthorized());\n    }\n\n    @Test\n    @WithMockUser(roles = \"USER\")\n    public void \u7ba1\u7406\u8005\u6a29\u9650\u306a\u3057\u3067\u7ba1\u7406API\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068403\u30a8\u30e9\u30fc() throws Exception {\n        mockMvc.perform(get(\"/api/admin/users\"))\n            .andExpect(status().isForbidden());\n    }\n\n    @Test\n    public void SQL\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u653b\u6483\u3092\u30d6\u30ed\u30c3\u30af() throws Exception {\n        String maliciousInput = \"'; DROP TABLE users; --\";\n\n        mockMvc.perform(get(\"/api/reservations\")\n                .param(\"search\", maliciousInput))\n            .andExpect(status().isBadRequest())\n            .andExpect(jsonPath(\"$.error\").value(\"INVALID_INPUT\"));\n    }\n}\n</code></pre>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#3","title":"3. \u30e6\u30fc\u30b6\u30d3\u30ea\u30c6\u30a3\u30c6\u30b9\u30c8","text":"<pre><code>// Cypress E2E\u30c6\u30b9\u30c8\ndescribe('\u4e88\u7d04\u4f5c\u6210\u30d5\u30ed\u30fc', () =&gt; {\n  it('\u65b0\u898f\u30e6\u30fc\u30b6\u30fc\u3067\u30822\u5206\u4ee5\u5185\u306b\u4e88\u7d04\u5b8c\u4e86\u3067\u304d\u308b', () =&gt; {\n    const startTime = Date.now();\n\n    cy.visit('/login');\n    cy.get('[data-cy=username]').type('newuser@example.com');\n    cy.get('[data-cy=password]').type('password123');\n    cy.get('[data-cy=login-button]').click();\n\n    // \u4f1a\u8b70\u5ba4\u691c\u7d22\n    cy.get('[data-cy=room-search]').click();\n    cy.get('[data-cy=capacity-filter]').select('10');\n    cy.get('[data-cy=date-picker]').type('2024-12-01');\n    cy.get('[data-cy=search-button]').click();\n\n    // \u4e88\u7d04\u4f5c\u6210\n    cy.get('[data-cy=room-card]').first().click();\n    cy.get('[data-cy=time-slot]').contains('10:00-12:00').click();\n    cy.get('[data-cy=purpose]').type('\u5b9a\u4f8b\u4f1a\u8b70');\n    cy.get('[data-cy=reserve-button]').click();\n\n    // \u5b8c\u4e86\u78ba\u8a8d\n    cy.get('[data-cy=success-message]').should('be.visible');\n\n    const endTime = Date.now();\n    const duration = (endTime - startTime) / 1000; // \u79d2\u63db\u7b97\n\n    expect(duration).to.be.lessThan(120); // 2\u5206\u4ee5\u5185\n  });\n\n  it('\u30a2\u30af\u30bb\u30b7\u30d3\u30ea\u30c6\u30a3\u57fa\u6e96\u3092\u6e80\u305f\u3059', () =&gt; {\n    cy.visit('/reservations');\n    cy.injectAxe(); // axe-core \u30e9\u30a4\u30d6\u30e9\u30ea\n\n    cy.checkA11y(null, {\n      rules: {\n        'color-contrast': { enabled: true },\n        'keyboard-navigation': { enabled: true },\n        'focus-management': { enabled: true }\n      }\n    });\n  });\n});\n</code></pre>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#4","title":"4. \u7d99\u7d9a\u7684\u76e3\u8996","text":"<pre><code># Prometheus \u76e3\u8996\u30eb\u30fc\u30eb\ngroups:\n- name: meeting-room-system\n  rules:\n  - alert: HighResponseTime\n    expr: histogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m])) &gt; 2\n    for: 2m\n    labels:\n      severity: warning\n    annotations:\n      summary: \"API\u5fdc\u7b54\u6642\u9593\u304c\u9045\u5ef6\"\n      description: \"95\u30d1\u30fc\u30bb\u30f3\u30bf\u30a4\u30eb\u306e\u5fdc\u7b54\u6642\u9593\u304c2\u79d2\u3092\u8d85\u3048\u3066\u3044\u307e\u3059\"\n\n  - alert: HighErrorRate\n    expr: rate(http_requests_total{status=~\"5..\"}[5m]) &gt; 0.05\n    for: 1m\n    labels:\n      severity: critical\n    annotations:\n      summary: \"\u30a8\u30e9\u30fc\u7387\u304c\u9ad8\u3044\"\n      description: \"5xx \u30a8\u30e9\u30fc\u306e\u767a\u751f\u7387\u304c5%\u3092\u8d85\u3048\u3066\u3044\u307e\u3059\"\n\n  - alert: DatabaseConnectionFailure\n    expr: health_database_status != 1\n    for: 30s\n    labels:\n      severity: critical\n    annotations:\n      summary: \"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u63a5\u7d9a\u5931\u6557\"\n      description: \"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3078\u306e\u63a5\u7d9a\u304c\u5931\u6557\u3057\u3066\u3044\u307e\u3059\"\n</code></pre>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_12","title":"\u975e\u6a5f\u80fd\u8981\u4ef6\u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u7ba1\u7406","text":""},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#1_1","title":"1. \u8981\u4ef6\u5b9a\u7fa9\u30d5\u30a7\u30fc\u30ba","text":"<ul> <li>\u30b9\u30c6\u30fc\u30af\u30db\u30eb\u30c0\u30fc\u7279\u5b9a</li> <li>\u54c1\u8cea\u5c5e\u6027\u306e\u512a\u5148\u9806\u4f4d\u4ed8\u3051</li> <li>\u6e2c\u5b9a\u53ef\u80fd\u306a\u76ee\u6a19\u5024\u8a2d\u5b9a</li> <li>\u691c\u8a3c\u65b9\u6cd5\u306e\u6c7a\u5b9a</li> <li>\u53d7\u3051\u5165\u308c\u57fa\u6e96\u306e\u5408\u610f</li> </ul>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#2_1","title":"2. \u8a2d\u8a08\u30fb\u5b9f\u88c5\u30d5\u30a7\u30fc\u30ba","text":"<ul> <li>\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u8a2d\u8a08\u3078\u306e\u53cd\u6620</li> <li>\u975e\u6a5f\u80fd\u8981\u4ef6\u3092\u6e80\u305f\u3059\u6280\u8853\u9078\u629e</li> <li>\u6e2c\u5b9a\u30fb\u76e3\u8996\u6a5f\u80fd\u306e\u5b9f\u88c5</li> <li>\u30c6\u30b9\u30c8\u6226\u7565\u3078\u306e\u7d44\u307f\u8fbc\u307f</li> </ul>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#3_1","title":"3. \u30c6\u30b9\u30c8\u30fb\u691c\u8a3c\u30d5\u30a7\u30fc\u30ba","text":"<ul> <li>\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30c6\u30b9\u30c8\u5b9f\u884c</li> <li>\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30c6\u30b9\u30c8\u5b9f\u884c</li> <li>\u30e6\u30fc\u30b6\u30d3\u30ea\u30c6\u30a3\u30c6\u30b9\u30c8\u5b9f\u884c</li> <li>\u53d7\u3051\u5165\u308c\u57fa\u6e96\u306e\u691c\u8a3c</li> <li>\u6539\u5584\u70b9\u306e\u7279\u5b9a\u3068\u5bfe\u7b56</li> </ul>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#4_1","title":"4. \u904b\u7528\u30d5\u30a7\u30fc\u30ba","text":"<ul> <li>\u76e3\u8996\u30b7\u30b9\u30c6\u30e0\u69cb\u7bc9</li> <li>SLA\u306e\u8a2d\u5b9a</li> <li>\u5b9a\u671f\u7684\u306a\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6e2c\u5b9a</li> <li>\u30e6\u30fc\u30b6\u30fc\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u53ce\u96c6</li> <li>\u7d99\u7d9a\u7684\u6539\u5584</li> </ul>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_13","title":"\u307e\u3068\u3081","text":""},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_14","title":"\u975e\u6a5f\u80fd\u8981\u4ef6\u5b9a\u7fa9\u306e\u8981\u70b9","text":"<ol> <li>\u54c1\u8cea\u5c5e\u6027\u306e\u660e\u78ba\u5316</li> <li>ISO/IEC 25010 \u306b\u57fa\u3065\u304f\u4f53\u7cfb\u7684\u306a\u5206\u985e</li> <li>\u6e2c\u5b9a\u53ef\u80fd\u306a\u76ee\u6a19\u5024\u306e\u8a2d\u5b9a</li> <li> <p>\u30b9\u30c6\u30fc\u30af\u30db\u30eb\u30c0\u30fc\u3068\u306e\u5408\u610f\u5f62\u6210</p> </li> <li> <p>\u5b9f\u88c5\u3068\u691c\u8a3c\u306e\u7d71\u5408</p> </li> <li>\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u8a2d\u8a08\u3078\u306e\u53cd\u6620</li> <li>\u81ea\u52d5\u30c6\u30b9\u30c8\u306b\u3088\u308b\u7d99\u7d9a\u7684\u691c\u8a3c</li> <li> <p>\u904b\u7528\u76e3\u8996\u3068\u306e\u9023\u643a</p> </li> <li> <p>\u7d99\u7d9a\u7684\u6539\u5584</p> </li> <li>\u5b9f\u904b\u7528\u30c7\u30fc\u30bf\u306b\u57fa\u3065\u304f\u8a55\u4fa1</li> <li>\u30e6\u30fc\u30b6\u30fc\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u306e\u6d3b\u7528</li> <li> <p>\u6280\u8853\u9032\u6b69\u306b\u5fdc\u3058\u305f\u8981\u4ef6\u898b\u76f4\u3057</p> </li> <li> <p>\u30ea\u30b9\u30af\u7ba1\u7406</p> </li> <li>\u54c1\u8cea\u5c5e\u6027\u9593\u306e\u30c8\u30ec\u30fc\u30c9\u30aa\u30d5\u306e\u8a8d\u8b58</li> <li>\u512a\u5148\u9806\u4f4d\u306b\u57fa\u3065\u304f\u6bb5\u968e\u7684\u5b9f\u88c5</li> <li>\u65e9\u671f\u306e\u554f\u984c\u767a\u898b\u3068\u5bfe\u7b56</li> </ol>"},{"location":"reference/%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9%E3%82%AC%E3%82%A4%E3%83%89/#_15","title":"\u975e\u6a5f\u80fd\u8981\u4ef6\u304c\u3082\u305f\u3089\u3059\u4fa1\u5024","text":"<p>\u77ed\u671f\u7684\u4fa1\u5024: - \u30b7\u30b9\u30c6\u30e0\u306e\u5b89\u5b9a\u6027\u3068\u4fe1\u983c\u6027\u306e\u78ba\u4fdd - \u30e6\u30fc\u30b6\u30fc\u6e80\u8db3\u5ea6\u306e\u5411\u4e0a - \u904b\u7528\u30b3\u30b9\u30c8\u306e\u524a\u6e1b</p> <p>\u9577\u671f\u7684\u4fa1\u5024: - \u4fdd\u5b88\u6027\u306b\u3088\u308b\u958b\u767a\u52b9\u7387\u306e\u7dad\u6301 - \u62e1\u5f35\u6027\u306b\u3088\u308b\u4e8b\u696d\u6210\u9577\u3078\u306e\u5bfe\u5fdc - \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306b\u3088\u308b\u30ea\u30b9\u30af\u56de\u907f</p> <p>\u975e\u6a5f\u80fd\u8981\u4ef6\u306f\u3001\u5909\u66f4\u3092\u697d\u306b\u5b89\u5168\u306b\u3067\u304d\u3066\u5f79\u306b\u7acb\u3064\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u5b9f\u73fe\u3059\u308b\u305f\u3081\u306e\u57fa\u76e4\u3067\u3042\u308b\u3002\u9069\u5207\u306a\u5b9a\u7fa9\u3068\u7d99\u7d9a\u7684\u306a\u7ba1\u7406\u306b\u3088\u308a\u3001\u6301\u7d9a\u7684\u306a\u4fa1\u5024\u63d0\u4f9b\u3092\u53ef\u80fd\u306b\u3059\u308b\u3002</p>"},{"location":"template/","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d","text":""},{"location":"template/#_2","title":"\u6982\u8981","text":""},{"location":"template/#_3","title":"\u76ee\u7684","text":""},{"location":"template/#_4","title":"\u524d\u63d0","text":"\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2 \u30d0\u30fc\u30b8\u30e7\u30f3 \u5099\u8003 nodejs 12.12.0"},{"location":"template/#_5","title":"\u69cb\u6210","text":"<ul> <li>\u69cb\u7bc9</li> <li>\u914d\u7f6e</li> <li>\u904b\u7528</li> <li>\u958b\u767a</li> </ul>"},{"location":"template/#_6","title":"\u8a73\u7d30","text":""},{"location":"template/#qick-start","title":"Qick Start","text":"<pre><code>npm install\nnpm start\n</code></pre>"},{"location":"template/#_7","title":"\u69cb\u7bc9","text":"<pre><code>npm init -y\nnpm install --save-dev browser-sync jest @babel/core @babel/cli @babel/preset-env @babel/register\n</code></pre> <p>\u2b06 back to top</p>"},{"location":"template/#_8","title":"\u914d\u7f6e","text":"<p>\u2b06 back to top</p>"},{"location":"template/#_9","title":"\u904b\u7528","text":"<p>\u2b06 back to top</p>"},{"location":"template/#_10","title":"\u958b\u767a","text":"<p>\u2b06 back to top</p>"},{"location":"template/#_11","title":"\u53c2\u7167","text":""},{"location":"template/ADR/","title":"Sample","text":"<p>\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u6c7a\u5b9a\u306e\u7c21\u5358\u306a\u8aac\u660e</p> <p>\u65e5\u4ed8: 2025-02-26</p>"},{"location":"template/ADR/#_1","title":"\u30b9\u30c6\u30fc\u30bf\u30b9","text":"<p>2025-02-26 \u63d0\u6848\u3055\u308c\u307e\u3057\u305f</p>"},{"location":"template/ADR/#_2","title":"\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8","text":"<p>\u3053\u306e\u6c7a\u5b9a\u3092\u884c\u3063\u305f\u72b6\u6cc1</p>"},{"location":"template/ADR/#_3","title":"\u6c7a\u5b9a","text":"<p>\u6c7a\u5b9a\u3068\u305d\u306e\u6839\u62e0</p>"},{"location":"template/ADR/#_4","title":"\u5f71\u97ff","text":"<p>\u3053\u306e\u6c7a\u5b9a\u306b\u3088\u308b\u5f71\u97ff</p>"},{"location":"template/ADR/#_5","title":"\u30b3\u30d7\u30e9\u30a4\u30a2\u30f3\u30b9","text":"<p>\u3053\u306e\u6c7a\u5b9a\u304c\u9075\u5b88\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u65b9\u6cd5</p>"},{"location":"template/ADR/#_6","title":"\u5099\u8003","text":"<p>\u3053\u306e\u6c7a\u5b9a\u306e\u30e1\u30bf\u30c7\u30fc\u30bf\uff08\u8457\u8005\u306a\u3069\uff09</p>"},{"location":"template/%E3%81%BE%E3%81%9A%E3%81%93%E3%82%8C%E3%82%92%E8%AA%AD%E3%82%82%E3%81%86%E3%83%AA%E3%82%B9%E3%83%88/","title":"\u307e\u305a\u3053\u308c\u3092\u8aad\u3082\u3046\u30ea\u30b9\u30c8","text":"<ul> <li>\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u56f3 - \u60c5\u52e2\u3092\u3064\u304b\u3080\u3002</li> <li>\u30a4\u30f3\u30bb\u30d7\u30b7\u30e7\u30f3\u30c7\u30c3\u30ad - \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u6700\u521d\u306e\u9031\u306b\u4f5c\u6210\u3055\u308c\u305f\u3002\u3053\u3053\u306b\u3042\u308b\u3082\u306e\u306e\u5927\u90e8\u5206\u306f\u5909\u66f4\u3055\u308c\u305f\u304c\u3001\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u6211\u3005\u304c\u306a\u305c\u3053\u306e\u30b7\u30b9\u30c6\u30e0\u3092\u69cb\u7bc9\u3057\u3066\u3044\u308b\u304b\u3092\u793a\u3057\u3066\u3044\u308b\u3002</li> <li>\u30e6\u30fc\u30b6\u30fc\u30b9\u30c8\u30fc\u30ea\u30fc - \u30e6\u30fc\u30b6\u30fc\u306e\u8996\u70b9\u304b\u3089\u30b7\u30b9\u30c6\u30e0\u306e\u8981\u4ef6\u3092\u307e\u3068\u3081\u308b\u3002\u30e6\u30fc\u30b6\u30fc\u304c\u4f55\u3092\u6c42\u3081\u3066\u3044\u308b\u304b\u3092\u7406\u89e3\u3059\u308b\u305f\u3081\u306b\u91cd\u8981\u3002</li> <li>\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9 - \u30b7\u30b9\u30c6\u30e0\u306e\u6a5f\u80fd\u3092\u8868\u3059\u3002\u30b7\u30b9\u30c6\u30e0\u304c\u4f55\u3092\u3059\u308b\u304b\u3092\u7406\u89e3\u3059\u308b\u306e\u306b\u5fc5\u8981\u3002</li> <li>\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 - \u30b7\u30b9\u30c6\u30e0\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u793a\u3059\u3002\u30b7\u30b9\u30c6\u30e0\u306e\u5168\u4f53\u50cf\u3092\u628a\u63e1\u3059\u308b\u305f\u3081\u306b\u91cd\u8981\u3002</li> <li>\u8a2d\u8a08\u30ad\u30e5\u30e1\u30f3\u30c8 - \u30b7\u30b9\u30c6\u30e0\u306e\u8a2d\u8a08\u306b\u95a2\u3059\u308b\u8a73\u7d30\u3092\u307e\u3068\u3081\u308b\u3002\u5177\u4f53\u7684\u306a\u5b9f\u88c5\u65b9\u6cd5\u3084\u6280\u8853\u9078\u5b9a\u3092\u8a18\u9332\u3059\u308b\u3002</li> <li>\u958b\u767a\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 - \u958b\u767a\u306e\u5177\u4f53\u7684\u306a\u624b\u9806\u3084\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3\u3092\u307e\u3068\u3081\u308b\u3002</li> <li>\u904b\u7528\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 - \u30b7\u30b9\u30c6\u30e0\u306e\u904b\u7528\u306b\u95a2\u3059\u308b\u60c5\u5831\u3092\u63d0\u4f9b\u3059\u308b\u3002\u904b\u7528\u30c1\u30fc\u30e0\u304c\u30b7\u30b9\u30c6\u30e0\u3092\u7ba1\u7406\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u3002</li> <li>\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u6c7a\u5b9a\u30ed\u30b0 - \u30b7\u30b9\u30c6\u30e0\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u95a2\u3059\u308b\u91cd\u8981\u306a\u6c7a\u5b9a\u3092\u8a18\u9332\u3059\u308b\u3002\u5c06\u6765\u306e\u53c2\u7167\u3084\u8aac\u660e\u306b\u5f79\u7acb\u3064\u3002</li> <li>\u65e5\u8a8c - \u958b\u767a\u306e\u9032\u6357\u3084\u554f\u984c\u70b9\u3092\u8a18\u9332\u3059\u308b\u3002\u958b\u767a\u306e\u5c65\u6b74\u3092\u8ffd\u3046\u305f\u3081\u306b\u91cd\u8981\u3002</li> </ul>"},{"location":"template/%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E5%AE%8C%E4%BA%86%E5%A0%B1%E5%91%8A%E6%9B%B8/","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u6982\u8981","text":""},{"location":"template/%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E5%AE%8C%E4%BA%86%E5%A0%B1%E5%91%8A%E6%9B%B8/#_2","title":"\u65e5\u7a0b","text":"<ul> <li>\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u958b\u59cb\u65e5</li> <li>\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u7d42\u4e86\u65e5</li> <li>\u4f5c\u696d\u65e5\u6570</li> </ul>"},{"location":"template/%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E5%AE%8C%E4%BA%86%E5%A0%B1%E5%91%8A%E6%9B%B8/#_3","title":"\u8981\u54e1","text":"\u540d\u524d \u4e88\u5b9a\u4f5c\u696d\u65e5\u6570 \u5b9f\u7e3e\u4f5c\u696d\u65e5\u6570 A 5 5"},{"location":"template/%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E5%AE%8C%E4%BA%86%E5%A0%B1%E5%91%8A%E6%9B%B8/#_4","title":"\u6307\u6a19","text":""},{"location":"template/%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E5%AE%8C%E4%BA%86%E5%A0%B1%E5%91%8A%E6%9B%B8/#_5","title":"\u30ca\u30a4\u30c8\u30ea\u30fc\u30d3\u30eb\u30c9\u7d50\u679c","text":"\u65e5\u4ed8 \u7d50\u679c 9\u67081\u65e5(\u6708) Build failed"},{"location":"template/%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E5%AE%8C%E4%BA%86%E5%A0%B1%E5%91%8A%E6%9B%B8/#_6","title":"\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u30d0\u30fc\u30f3\u30c0\u30a6\u30f3","text":"<pre><code>xychart-beta\n    title \"\u30ea\u30ea\u30fc\u30b9\u30d0\u30fc\u30f3\u30c0\u30a6\u30f3\u30c1\u30e3\u30fc\u30c8\"\n    x-axis [\"\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f31\", \"\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f32\", \"\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f33\", \"\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f34\", \"\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f35\", \"\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f36\"]\n    y-axis \"\u6b8b\u30b9\u30c8\u30fc\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\" 0 --&gt; 120\n    line [100, 82, 65, 48, 30, 0]\n    line [100, 85, 72, 60, 42, 10]</code></pre>"},{"location":"template/%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E5%AE%8C%E4%BA%86%E5%A0%B1%E5%91%8A%E6%9B%B8/#_7","title":"\u30d9\u30ed\u30b7\u30c6\u30a3","text":"<pre><code>xychart-beta\n    title \"\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u5225\u30d9\u30ed\u30b7\u30c6\u30a3\"\n    x-axis [\"\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f31\", \"\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f32\", \"\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f33\", \"\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f34\", \"\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f35\", \"\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f36\", \"\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f37\", \"\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f38\"]\n    y-axis \"\u5b8c\u4e86\u3057\u305f\u30b9\u30c8\u30fc\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\" 0 --&gt; 25\n    bar [15, 18, 14, 16, 19, 17, 20, 21]\n    line [17.5, 17.5, 17.5, 17.5, 17.5, 17.5, 17.5, 17.5]\n    line [20.5, 20.5, 20.5, 20.5, 20.5, 20.5, 20.5, 20.5]</code></pre>"},{"location":"template/%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E5%AE%8C%E4%BA%86%E5%A0%B1%E5%91%8A%E6%9B%B8/#_8","title":"\u5b9f\u65bd\u5185\u5bb9\u3068\u8a55\u4fa1","text":"\u30b9\u30c8\u30fc\u30ea\u30fc \u7d50\u679c \u4e88\u5b9a\u30dd\u30a4\u30f3\u30c8 \u30d9\u30ed\u30b7\u30c6\u30a3\u52a0\u7b97\u30dd\u30a4\u30f3\u30c8 \u30e6\u30fc\u30b6\u30fc\u3068\u3057\u3066\u3001\u79c1\u306f... \u5b8c\u4e86 5 5 \u30e6\u30fc\u30b6\u30fc\u3068\u3057\u3066\u3001\u79c1\u306f... \u5b8c\u4e86 3 3 \u30e6\u30fc\u30b6\u30fc\u3068\u3057\u3066\u3001\u79c1\u306f... \u5b8c\u4e86 8 8 \u5408\u8a08 16 16"},{"location":"template/%E3%82%A4%E3%83%86%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E5%AE%8C%E4%BA%86%E5%A0%B1%E5%91%8A%E6%9B%B8/#_9","title":"\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u30ec\u30d3\u30e5\u30fc","text":"\u30a2\u30af\u30b7\u30e7\u30f3\u30a2\u30a4\u30c6\u30e0 \u62c5\u5f53 \u30e6\u30fc\u30b6\u30fc\u3068\u3057\u3066\u3001\u79c1\u306f...\u306e\u30ec\u30d3\u30e5\u30fc A"},{"location":"template/%E3%82%A4%E3%83%B3%E3%82%BB%E3%83%97%E3%82%B7%E3%83%A7%E3%83%B3%E3%83%87%E3%83%83%E3%82%AD/","title":"\u30a4\u30f3\u30bb\u30d7\u30b7\u30e7\u30f3\u30c7\u30c3\u30ad","text":"<ul> <li> \u306a\u305c\u3084\u308b\u306e\u304b\uff1f \u89e3\u6c7a\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u308b\u554f\u984c\u3092\u7c21\u6f54\u304b\u3064\u660e\u78ba\u306b\u8aac\u660e\u3057\u3088\u3046\u3002</li> <li> \u3069\u3093\u306a\u30d3\u30b8\u30e7\u30f3\u306a\u306e\u304b\uff1f \u4e00\u3064\u76ee\u306e\u554f\u3044\u306b\u7b54\u3048\u308b\u3053\u3068\u3067\u5171\u6709\u3055\u308c\u305f\u554f\u984c\u3092\u3001\u63d0\u6848\u3055\u308c\u305f\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30b7\u30b9\u30c6\u30e0\u304c\u3069\u306e\u3088\u3046\u306b\u89e3\u6c7a\u3059\u308b\u304b\u3092\u7c21\u6f54\u306b\u8aac\u660e\u3059\u308b\u3002</li> <li> \u3069\u3093\u306a\u4fa1\u5024\u3092\u3082\u305f\u3089\u3059\u306e\u304b\uff1f \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30d3\u30b8\u30cd\u30b9\u76ee\u6a19\u3092\u4e00\u89a7\u306b\u3059\u308b\u3002</li> <li> \u30b9\u30b3\u30fc\u30d7\u306e\u7bc4\u56f2\u306f\u3069\u3053\u304b\uff1f \u73fe\u72b6\u3001\u30b9\u30b3\u30fc\u30d7\u5185\u306b\u3042\u308b\u3053\u3068\u304c\u5206\u304b\u3063\u3066\u3044\u308b\u6700\u3082\u512a\u5148\u9806\u4f4d\u306e\u9ad8\u3044\u6a5f\u80fd\u8981\u6c42\u3092\u4e00\u89a7\u306b\u3059\u308b\u3002\u3053\u308c\u306f\u901a\u5e38\u3001\u5fc5\u9808\u79d1\u76ee\u3068\u306a\u308b\u3002\u307e\u305f\u3001\u30b9\u30b3\u30fc\u30d7\u5916\u306e\u30d5\u30a3\u30fc\u30c1\u30e3\u3001\u30b9\u30b3\u30fc\u30d7\u304c\u307e\u3060\u6c7a\u307e\u3063\u3066\u3044\u306a\u3044\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u4e0a\u91cd\u8981\u6027\u3092\u6301\u3064\u6a5f\u80fd\u3082\u4e00\u89a7\u306b\u3059\u308b\u3002</li> <li> \u4e3b\u306a\u30b9\u30c6\u30fc\u30af\u30db\u30eb\u30c0\u30fc\u306f\uff1f \u4e3b\u306a\u30b9\u30c6\u30fc\u30af\u30db\u30eb\u30c0\u30fc\u3068\u305d\u306e\u4e3b\u306a\u95a2\u5fc3\u4e8b\u3092\u4e00\u89a7\u306b\u3059\u308b\u3002</li> <li> \u57fa\u672c\u7684\u306a\u89e3\u6c7a\u7b56\u306f\u3069\u306e\u3088\u3046\u306a\u3082\u306e\u306b\u306a\u308b\u304b\uff1f \u6982\u5ff5\u7684\u306a\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u30b9\u30b1\u30c3\u30c1\u3092\u5171\u6709\u3059\u308b\u3002</li> <li> \u4e3b\u306a\u30ea\u30b9\u30af\u306f\u4f55\u304b\uff1f\uff08\u3053\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u5931\u6557\u3059\u308b\u3068\u3057\u305f\u3089\u3001\u3069\u3093\u306a\u7406\u7531\u304b\u3089\u304b\uff09</li> <li> \u3069\u306e\u304f\u3089\u3044\u4f5c\u696d\u304c\u3042\u308a\u3001\u8cbb\u7528\u306f\u3044\u304f\u3089\u304b\uff1f \u30b9\u30b3\u30fc\u30d7\u3068\u6982\u5ff5\u4e0a\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u3064\u3044\u3066\u5206\u304b\u3063\u3066\u3044\u308b\u3053\u3068\u304b\u3089\u3001\u4f5c\u696d\u3092\u5b8c\u4e86\u3059\u308b\u306e\u306b\u304b\u304b\u308b\u304a\u3088\u305d\u306e\u4f5c\u696d\u91cf\u3068\u30b3\u30b9\u30c8\u3092\u898b\u7a4d\u3082\u308b\u3002\u30c1\u30fc\u30e0\u30b5\u30a4\u30ba\u3068\u30b9\u30ad\u30eb\u30bb\u30c3\u30c8\u306b\u3064\u3044\u3066\u4eee\u5b9a\u3057\u305f\u3053\u3068\u3092\u3059\u3079\u3066\u4e00\u89a7\u306b\u3059\u308b\u3002</li> <li> \u30c8\u30ec\u30fc\u30c9\u30aa\u30d5\u306b\u3069\u3046\u5411\u304d\u5408\u3046\u304b\uff1f \u96e3\u3057\u3044\u5224\u65ad\u3092\u4e0b\u3059\u3053\u3068\u306b\u306a\u308b\u524d\u306b\u3001\u91cd\u8981\u306a\u30c8\u30ec\u30fc\u30c9\u30aa\u30d5\u306b\u3064\u3044\u3066\u7387\u76f4\u306b\u8a71\u3057\u5408\u3046\u3002\u4ee3\u8868\u7684\u306a4\u3064\u306e\u8981\u7d20\u300c\u6642\u9593\u300d\u300c\u4e88\u7b97\u300d\u300c\u54c1\u8cea\u300d\u300c\u30b9\u30b3\u30fc\u30d7\u300d\u306b\u3064\u3044\u3066\u8a71\u305d\u3046\u3002\u7279\u306b\u5bfe\u7acb\u3059\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u5834\u5408\u306f\u3001\u8208\u5473\u6df1\u3044\u54c1\u8cea\u7279\u6027\u3084\u512a\u5148\u9806\u4f4d\u306e\u9ad8\u3044\u54c1\u8cea\u7279\u6027\u306b\u3064\u3044\u3066\u3082\u8a71\u3057\u5408\u304a\u3046\u3002</li> <li> \u521d\u56de\u30ea\u30ea\u30fc\u30b9\u304c\u53ef\u80fd\u306b\u306a\u308b\u306e\u306f\u3044\u3064\u304b\uff1f \u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u63d0\u4f9b\u3059\u308b\u306e\u306b\u304b\u304b\u308b\u671f\u9593\u306e\u898b\u8fbc\u307f\u3092\u30b9\u30c6\u30fc\u30af\u30db\u30eb\u30c0\u30fc\u306b\u4f1d\u3048\u308b\u3002\u3053\u306e\u898b\u7a4d\u306f\u3001\u91cd\u8981\u306a\u30de\u30a4\u30eb\u30b9\u30c8\u30fc\u30f3\u306b\u3064\u3044\u3066\u4f1a\u8a71\u3092\u59cb\u3081\u308b\u6a5f\u4f1a\u3068\u306a\u308b\u3002\u5206\u304b\u3063\u3066\u3044\u308b\u4f5c\u696d\u306e\u30bf\u30a4\u30e0\u30e9\u30a4\u30f3\u306e\u30c9\u30e9\u30d5\u30c8\u3084\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092\u4f5c\u6210\u3059\u308b\u3002\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u306f\u5b8c\u74a7\u3067\u3042\u308b\u5fc5\u8981\u306f\u306a\u304f\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u9032\u3080\u306b\u3064\u308c\u3066\u5909\u66f4\u3055\u308c\u308b\u3079\u304d\u3060\u3002</li> </ul>"},{"location":"template/%E5%AE%8C%E5%85%A8%E5%BD%A2%E5%BC%8F%E3%81%AE%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9/","title":"\u5b8c\u5168\u5f62\u5f0f\u306e\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8","text":""},{"location":"template/%E5%AE%8C%E5%85%A8%E5%BD%A2%E5%BC%8F%E3%81%AE%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9/#uc00n","title":"UC00N:&lt;\u8a2d\u8a08\u30b9\u30b3\u30fc\u30d7\u30a2\u30a4\u30b3\u30f3&gt;&lt;\u52d5\u4f5c\u3092\u793a\u3059\u77ed\u3044\u52d5\u8a5e\u53e5\u3067\u76ee\u7684\u304c\u308f\u304b\u308b\u540d\u524d\u3092\u4ed8\u3051\u308b&gt;&lt;\u76ee\u7684\u30ec\u30d9\u30eb\u30a2\u30a4\u30b3\u30f3&gt;","text":"<p>\u4f7f\u7528\u6642\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8:&lt;\u5fc5\u8981\u3067\u3042\u308c\u3070\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u3082\u3046\u5c11\u3057\u9577\u304f\u8a18\u8ff0\u3059\u308b\u3002\u4e00\u822c\u7684\u306b\u8d77\u304d\u308b\u6761\u4ef6&gt;</p> <p>\u30b9\u30b3\u30fc\u30d7:&lt;\u8a2d\u8a08\u30b9\u30b3\u30fc\u30d7\u3002\u30d6\u30e9\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u3060\u3068\u8003\u3048\u3089\u308c\u3066\u3044\u308b\u8a2d\u8a08\u5bfe\u8c61\u30b7\u30b9\u30c6\u30e0\u3002\u4f01\u696d\u3001\u30b7\u30b9\u30c6\u30e0\u3001\u30b5\u30d6\u30b7\u30b9\u30c6\u30e0\u306e\u3044\u305a\u308c\u304b&gt;</p> <p>\u30ec\u30d9\u30eb:&lt;\u8981\u7d04\u3001\u30e6\u30fc\u30b6\u30fc\u76ee\u7684\u3001\u30b5\u30d6\u6a5f\u80fd\u306e\u3044\u305a\u308c\u304b&gt;</p> <p>\u4e3b\u30a2\u30af\u30bf\u30fc:&lt;\u4e3b\u30a2\u30af\u30bf\u30fc\u306e\u30ed\u30fc\u30eb\u540d\u307e\u305f\u306f\u8aac\u660e&gt;</p> <p>\u5229\u5bb3\u95a2\u4fc2\u8005\u3068\u5229\u76ca:&lt;\u305d\u306e\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306b\u95a2\u3059\u308b\u5229\u5bb3\u95a2\u4fc2\u8005\u3068\u4e3b\u306a\u5229\u76ca&gt;</p> <p>\u4e8b\u524d\u6761\u4ef6:&lt;\u3059\u3067\u306b\u305d\u3046\u306a\u3063\u3066\u3044\u308b\u3068\u60f3\u5b9a\u3057\u3066\u3044\u308b\u72b6\u614b&gt;</p> <ul> <li>xxxxx</li> <li>xxxxx</li> <li>xxxxx</li> </ul> <p>\u6700\u4f4e\u4fdd\u8a3c:&lt;\u3069\u306e\u3088\u3046\u306b\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u304c\u7d42\u4e86\u3057\u305f\u3068\u3057\u3066\u3082\u5b88\u3089\u308c\u308b\u5229\u76ca&gt;</p> <p>\u6210\u529f\u4fdd\u8a3c\u6642:&lt;\u76ee\u7684\u304c\u9054\u6210\u3055\u308c\u305f\u3068\u304d\u306e\u72b6\u614b&gt;</p> <p>\u30c8\u30ea\u30ac\u30fc:&lt;\u4f55\u304c\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u3092\u958b\u767a\u3059\u308b\u304b\u3002\u6642\u9593\u30a4\u30d9\u30f3\u30c8\u306e\u5834\u5408\u3082\u3042\u308b&gt;</p> <p>\u4e3b\u6210\u529f\u30b7\u30ca\u30ea\u30aa:</p> <p>&lt;\u30c8\u30ea\u30ac\u30fc\u304b\u3089\u76ee\u7684\u306e\u9054\u6210\u3001\u4e8b\u5f8c\u51e6\u7406\u307e\u3067\u306e\u30b7\u30ca\u30ea\u30aa\u306e\u30b9\u30c6\u30c3\u30d7\u3092\u3053\u3053\u306b\u8a18\u8ff0\u3059\u308b&gt; &lt;\u30b9\u30c6\u30c3\u30d7\u756a\u53f7&gt;&lt;\u30a2\u30af\u30b7\u30e7\u30f3\u8a18\u8ff0&gt;</p> <p>\u62e1\u5f35:</p> <p>&lt;\u62e1\u5f35\u30921\u3064\u305a\u3064\u3053\u3053\u306b\u8a18\u8ff0\u3059\u308b\u3002\u305d\u308c\u305e\u308c\u3067\u4e3b\u6210\u529f\u30b7\u30ca\u30ea\u30aa\u306e\u30b9\u30c6\u30c3\u30d7\u3092\u53c2\u7167\u3059\u308b&gt; - &lt;\u5909\u66f4\u3055\u308c\u305f\u30b9\u30c6\u30c3\u30d7&gt;&lt;\u6761\u4ef6&gt;:&lt;\u30a2\u30af\u30b7\u30e7\u30f3\u307e\u305f\u306f\u30b5\u30d6\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9&gt; - &lt;\u5909\u66f4\u3055\u308c\u305f\u30b9\u30c6\u30c3\u30d7&gt;&lt;\u6761\u4ef6&gt;:&lt;\u30a2\u30af\u30b7\u30e7\u30f3\u307e\u305f\u306f\u30b5\u30d6\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9&gt;</p> <p>\u6280\u8853\u304a\u3088\u3073\u30c7\u30fc\u30bf\u306e\u30d0\u30ea\u30a8\u30fc\u30b7\u30e7\u30f3\u30ea\u30b9\u30c8:</p> <p>&lt;\u7d50\u679c\u3068\u3057\u3066\u30b7\u30ca\u30ea\u30aa\u306e\u5206\u5c90\u304c\u8d77\u304d\u308b\u30d0\u30ea\u30a8\u30fc\u30b7\u30e7\u30f3\u3092\u3053\u3053\u306b\u8a18\u8ff0\u3059\u308b&gt; &lt;\u30b9\u30c6\u30c3\u30d7\u756a\u53f7\u307e\u305f\u306f\u30d0\u30ea\u30a8\u30fc\u30b7\u30e7\u30f3\u756a\u53f7&gt;&lt;\u30d0\u30ea\u30a8\u30fc\u30b7\u30e7\u30f3\u306e\u30ea\u30b9\u30c8&gt; &lt;\u30b9\u30c6\u30c3\u30d7\u756a\u53f7\u307e\u305f\u306f\u30d0\u30ea\u30a8\u30fc\u30b7\u30e7\u30f3\u756a\u53f7&gt;&lt;\u30d0\u30ea\u30a8\u30fc\u30b7\u30e7\u30f3\u306e\u30ea\u30b9\u30c8&gt;</p> <p>\u95a2\u9023\u60c5\u5831:</p> <p>&lt;\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u5fc5\u8981\u306a\u95a2\u9023\u60c5\u5831\u3092\u4f55\u3067\u3082\u8a18\u8ff0\u3059\u308b&gt;</p> <ul> <li>\u8a2d\u8a08\u30b9\u30b3\u30fc\u30d7\u30a2\u30a4\u30b3\u30f3</li> <li>\u4f01\u696d\u306f\ud83c\udfe2\u3092\u4f7f\u3046</li> <li>\u30b7\u30b9\u30c6\u30e0\u306f\ud83d\udda5\ufe0f\u3092\u4f7f\u3046</li> <li> <p>\u30b5\u30d6\u30b7\u30b9\u30c6\u30e0\u306f\ud83d\udcbe\u3092\u4f7f\u3046</p> </li> <li> <p>\u76ee\u7684\u30ec\u30d9\u30eb\u30a2\u30a4\u30b3\u30f3</p> </li> <li>\u8981\u7d04\u30ec\u30d9\u30eb\u306f\u2601\ufe0f\u3092\u4f7f\u3046</li> <li>\u30e6\u30fc\u30b6\u30fc\u76ee\u7684\u30ec\u30d9\u30eb\u306f\ud83c\udf0a\u3092\u4f7f\u3046</li> <li>\u30b5\u30d6\u6a5f\u80fd\u30ec\u30d9\u30eb\u306f\ud83d\udc1f\u3092\u4f7f\u3046</li> </ul>"},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/","title":"\u8981\u4ef6\u5b9a\u7fa9 - [\u30b7\u30b9\u30c6\u30e0\u540d]","text":""},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#_1","title":"\u30b7\u30b9\u30c6\u30e0\u4fa1\u5024","text":""},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#_2","title":"\u30b7\u30b9\u30c6\u30e0\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8","text":""},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#_3","title":"\u8981\u6c42\u30e2\u30c7\u30eb","text":""},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#_4","title":"\u30b7\u30b9\u30c6\u30e0\u5916\u90e8\u74b0\u5883","text":""},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#_5","title":"\u30d3\u30b8\u30cd\u30b9\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8","text":""},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#_6","title":"\u30d3\u30b8\u30cd\u30b9\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9","text":""},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#1","title":"[\u696d\u52d91\u540d]","text":""},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#2","title":"[\u696d\u52d92\u540d]","text":""},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#_7","title":"\u696d\u52d9\u30d5\u30ed\u30fc","text":""},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#buc1","title":"[BUC\u540d1]\u306e\u696d\u52d9\u30d5\u30ed\u30fc","text":""},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#buc2","title":"[BUC\u540d2]\u306e\u696d\u52d9\u30d5\u30ed\u30fc","text":""},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#_8","title":"\u5229\u7528\u30b7\u30fc\u30f3","text":""},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#buc1_1","title":"[BUC\u540d1]\u306e\u5229\u7528\u30b7\u30fc\u30f3","text":""},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#buc2_1","title":"[BUC\u540d2]\u306e\u5229\u7528\u30b7\u30fc\u30f3","text":""},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#_9","title":"\u30d0\u30ea\u30a8\u30fc\u30b7\u30e7\u30f3\u30fb\u6761\u4ef6","text":""},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#1_1","title":"[\u5206\u985e\u8ef81\u540d]","text":"[\u5206\u985e\u540d] \u8aac\u660e [\u5206\u985e\u50241] [\u5206\u985e\u50241\u306e\u8aac\u660e] [\u5206\u985e\u50242] [\u5206\u985e\u50242\u306e\u8aac\u660e] [\u5206\u985e\u50243] [\u5206\u985e\u50243\u306e\u8aac\u660e]"},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#2_1","title":"[\u5206\u985e\u8ef82\u540d]","text":"[\u5206\u985e\u540d] \u8aac\u660e [\u5206\u985e\u50241] [\u5206\u985e\u50241\u306e\u8aac\u660e] [\u5206\u985e\u50242] [\u5206\u985e\u50242\u306e\u8aac\u660e]"},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#3","title":"[\u5206\u985e\u8ef83\u540d]","text":"[\u5206\u985e\u540d] \u8aac\u660e [\u5206\u985e\u50241] [\u5206\u985e\u50241\u306e\u8aac\u660e] [\u5206\u985e\u50242] [\u5206\u985e\u50242\u306e\u8aac\u660e] [\u5206\u985e\u50243] [\u5206\u985e\u50243\u306e\u8aac\u660e]"},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#_10","title":"\u30b7\u30b9\u30c6\u30e0\u5883\u754c","text":""},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#_11","title":"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u8907\u5408\u56f3","text":""},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#buc1_2","title":"[BUC\u540d1]","text":""},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#buc2_2","title":"[BUC\u540d2]","text":""},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#_12","title":"\u30b7\u30b9\u30c6\u30e0","text":""},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#_13","title":"\u60c5\u5831\u30e2\u30c7\u30eb","text":""},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#_14","title":"\u72b6\u614b\u30e2\u30c7\u30eb","text":""},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#1_2","title":"[\u60c5\u5831\u540d1]\u306e\u72b6\u614b\u9077\u79fb","text":""},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#2_2","title":"[\u60c5\u5831\u540d2]\u306e\u72b6\u614b\u9077\u79fb","text":""},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#_15","title":"\u8a18\u5165\u30ac\u30a4\u30c9","text":""},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#1_3","title":"1. \u30b7\u30b9\u30c6\u30e0\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u56f3\u306e\u8a18\u5165\u65b9\u6cd5","text":"<ul> <li>[\u30b7\u30b9\u30c6\u30e0\u540d]: \u958b\u767a\u5bfe\u8c61\u30b7\u30b9\u30c6\u30e0\u306e\u540d\u524d</li> <li>[\u30a2\u30af\u30bf\u30fc\u540d]: \u30b7\u30b9\u30c6\u30e0\u3092\u5229\u7528\u3059\u308b\u4eba\u3084\u7d44\u7e54</li> <li>[\u5916\u90e8\u30b7\u30b9\u30c6\u30e0\u540d]: \u9023\u643a\u3059\u308b\u5916\u90e8\u30b7\u30b9\u30c6\u30e0\u3084\u30b5\u30fc\u30d3\u30b9</li> <li>\u30b7\u30b9\u30c6\u30e0\u306e\u76ee\u7684\u3068\u30d3\u30b8\u30e7\u30f3: \u30b7\u30b9\u30c6\u30e0\u304c\u89e3\u6c7a\u3059\u308b\u8ab2\u984c\u3068\u63d0\u4f9b\u4fa1\u5024\u3092\u7c21\u6f54\u306b\u8a18\u8ff0</li> </ul>"},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#2_3","title":"2. \u8981\u6c42\u30e2\u30c7\u30eb\u56f3\u306e\u8a18\u5165\u65b9\u6cd5","text":"<ul> <li>[\u30a2\u30af\u30bf\u30fc\u306e\u8981\u6c42]: \u5404\u30a2\u30af\u30bf\u30fc\u304c\u30b7\u30b9\u30c6\u30e0\u306b\u6c42\u3081\u308b\u3053\u3068</li> <li>[\u6d3e\u751f\u8981\u6c42]: \u8907\u6570\u306e\u8981\u6c42\u304b\u3089\u5c0e\u51fa\u3055\u308c\u308b\u5177\u4f53\u7684\u306a\u8981\u4ef6</li> <li>\u8981\u6c42\u306f\u300c\u301c\u3057\u305f\u3044\u300d\u5f62\u5f0f\u3067\u8a18\u8ff0</li> <li>\u6d3e\u751f\u8981\u6c42\u306f\u300c\u301c\u3067\u304d\u308b\u3053\u3068\u300d\u5f62\u5f0f\u3067\u8a18\u8ff0</li> </ul>"},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#3_1","title":"3. \u30d3\u30b8\u30cd\u30b9\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u56f3\u306e\u8a18\u5165\u65b9\u6cd5","text":"<ul> <li>[\u7d44\u7e54\u540d]: \u30b7\u30b9\u30c6\u30e0\u3092\u5229\u7528\u3059\u308b\u7d44\u7e54\u5168\u4f53</li> <li>[\u90e8\u9580\u540d]: \u7d44\u7e54\u5185\u306e\u5404\u90e8\u9580</li> <li>[\u696d\u52d9\u540d]: \u5404\u90e8\u9580\u3067\u884c\u308f\u308c\u308b\u696d\u52d9</li> <li>[\u696d\u52d9\u8cc7\u7523]: \u696d\u52d9\u3067\u6271\u3046\u91cd\u8981\u306a\u7269\u7406\u7684\u30fb\u60c5\u5831\u7684\u8cc7\u7523</li> <li>[\u5916\u90e8\u7d44\u7e54]: \u9023\u643a\u3059\u308b\u5916\u90e8\u306e\u7d44\u7e54\u3084\u30b7\u30b9\u30c6\u30e0</li> </ul>"},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#4","title":"4. \u30d3\u30b8\u30cd\u30b9\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u56f3\u306e\u8a18\u5165\u65b9\u6cd5","text":"<ul> <li>[BUC\u540d]: \u30d3\u30b8\u30cd\u30b9\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\uff08\u696d\u52d9\u306e\u4f5c\u696d\u5358\u4f4d\uff09</li> <li>\u696d\u52d9\u3092\u5b9f\u884c\u3059\u308b\u5834\u6240\u3084\u7d44\u7e54\u3092agent\u3067\u8868\u73fe</li> <li>\u696d\u52d9\u3067\u6271\u3046\u8cc7\u7523\u3092artifact\u3067\u8868\u73fe</li> <li>BUC\u306f\u52d5\u8a5e\u5f62\u3067\u8a18\u8ff0\uff08\u4f8b\uff1a\u300c\u5546\u54c1\u3092\u767b\u9332\u3059\u308b\u300d\uff09</li> </ul>"},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#5","title":"5. \u696d\u52d9\u30d5\u30ed\u30fc\u56f3\u306e\u8a18\u5165\u65b9\u6cd5","text":"<ul> <li>[\u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u540d]: BUC\u3092\u69cb\u6210\u3059\u308b\u5177\u4f53\u7684\u306a\u4f5c\u696d</li> <li>[\u30d5\u30a7\u30fc\u30ba\u540d]: \u4f5c\u696d\u306e\u307e\u3068\u307e\u308a\u3084\u30b0\u30eb\u30fc\u30d7</li> <li>[\u5224\u5b9a\u6761\u4ef6]: \u696d\u52d9\u306e\u5206\u5c90\u70b9\u3067\u306e\u5224\u5b9a\u57fa\u6e96</li> <li>\u30ec\u30fc\u30f3\uff08|\u30a2\u30af\u30bf\u30fc|\uff09\u3067\u30a2\u30af\u30bf\u30fc\u3054\u3068\u306e\u8cac\u4efb\u3092\u660e\u78ba\u5316</li> <li>partition\u3067\u4f5c\u696d\u30d5\u30a7\u30fc\u30ba\u3092\u6574\u7406</li> <li>split/split again\u3067\u4e26\u884c\u51e6\u7406\u3084\u6761\u4ef6\u5206\u5c90\u3092\u8868\u73fe</li> <li>\u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u306f\u52d5\u8a5e\u5f62\u3067\u8a18\u8ff0</li> </ul>"},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#6","title":"6. \u5229\u7528\u30b7\u30fc\u30f3\u56f3\u306e\u8a18\u5165\u65b9\u6cd5","text":"<ul> <li>[\u5229\u7528\u30b7\u30fc\u30f3\u540d]: \u30b7\u30b9\u30c6\u30e0\u304c\u5229\u7528\u3055\u308c\u308b\u5177\u4f53\u7684\u306a\u5834\u9762</li> <li>\u5229\u7528\u30b7\u30fc\u30f3\u306e\u8aac\u660e: \u80cc\u666f\u3001\u76ee\u7684\u3001\u671f\u5f85\u52b9\u679c\u3001\u5236\u7d04\u6761\u4ef6</li> <li>frame\u3067\u5229\u7528\u30b7\u30fc\u30f3\u3092\u30b0\u30eb\u30fc\u30d7\u5316</li> <li>note\u3067\u8a73\u7d30\u306a\u8aac\u660e\u3092\u4ed8\u52a0</li> <li>\u5229\u7528\u30b7\u30fc\u30f3\u304b\u3089UC\u3078\u306e\u95a2\u9023\u3092\u660e\u793a</li> <li>\u30b9\u30c6\u30fc\u30af\u30db\u30eb\u30c0\u30fc\u306e\u8996\u70b9\u3067\u8a18\u8ff0</li> </ul>"},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#7","title":"7. \u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u8907\u5408\u56f3\u306e\u8a18\u5165\u65b9\u6cd5","text":"<ul> <li>[UC\u540d]: \u30b7\u30b9\u30c6\u30e0\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\uff08\u30b7\u30b9\u30c6\u30e0\u6a5f\u80fd\uff09</li> <li>[\u753b\u9762\u540d]: \u30e6\u30fc\u30b6\u30fc\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff08boundary\uff09</li> <li>[\u60c5\u5831\u540d]: \u30b7\u30b9\u30c6\u30e0\u304c\u7ba1\u7406\u3059\u308b\u30c7\u30fc\u30bf\uff08entity\uff09</li> <li>[\u6761\u4ef6\u540d]: \u30b7\u30b9\u30c6\u30e0\u306e\u52d5\u4f5c\u6761\u4ef6\uff08control\uff09</li> <li>[\u30a4\u30d9\u30f3\u30c8\u540d]: \u5916\u90e8\u3068\u306e\u9023\u643a\u70b9\uff08interface\uff09</li> <li>[\u5229\u7528\u30b7\u30fc\u30f3\u540d]: UC\u304c\u5b9f\u884c\u3055\u308c\u308b\u5177\u4f53\u7684\u306a\u5834\u9762\uff08frame\uff09</li> </ul>"},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#8","title":"8. \u60c5\u5831\u30e2\u30c7\u30eb\u56f3\u306e\u8a18\u5165\u65b9\u6cd5","text":"<ul> <li>[\u60c5\u5831\u540d]: \u30b7\u30b9\u30c6\u30e0\u304c\u7ba1\u7406\u3059\u308b\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3</li> <li>\u95a2\u9023\u7dda\u3067\u60c5\u5831\u9593\u306e\u95a2\u4fc2\u3092\u8868\u73fe</li> <li>\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u7fa4\u3054\u3068\u306b\u30b3\u30e1\u30f3\u30c8\u3067\u5206\u985e</li> <li>\u30d3\u30b8\u30cd\u30b9\u6982\u5ff5\u3092\u305d\u306e\u307e\u307e\u60c5\u5831\u540d\u306b\u4f7f\u7528</li> </ul>"},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#9","title":"9. \u72b6\u614b\u30e2\u30c7\u30eb\u56f3\u306e\u8a18\u5165\u65b9\u6cd5","text":"<ul> <li>[\u72b6\u614b\u540d]: \u60c5\u5831\u304c\u53d6\u308a\u3046\u308b\u72b6\u614b</li> <li>[UC\u540d]: \u72b6\u614b\u3092\u5909\u66f4\u3059\u308b\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9</li> <li>\u8907\u5408\u72b6\u614b\u306f state {} \u3067\u8868\u73fe</li> <li>\u5404\u72b6\u614b\u306b\u306fnote\u3067\u8aac\u660e\u3092\u4ed8\u52a0</li> <li>\u72b6\u614b\u540d\u306f\u540d\u8a5e\u5f62\u3067\u8a18\u8ff0</li> </ul>"},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#10","title":"10. \u30d0\u30ea\u30a8\u30fc\u30b7\u30e7\u30f3\u30fb\u6761\u4ef6\u306e\u8a18\u5165\u65b9\u6cd5","text":"<ul> <li>[\u5206\u985e\u8ef8\u540d]: \u30d3\u30b8\u30cd\u30b9\u4e0a\u91cd\u8981\u306a\u533a\u5206\u306e\u8ef8</li> <li>[\u5206\u985e\u5024]: \u5404\u8ef8\u3067\u306e\u5177\u4f53\u7684\u306a\u5024</li> <li>\u30b7\u30b9\u30c6\u30e0\u306e\u52d5\u4f5c\u3092\u5de6\u53f3\u3059\u308b\u91cd\u8981\u306a\u533a\u5206\u3092\u5b9a\u7fa9</li> <li>\u5c06\u6765\u306e\u62e1\u5f35\u6027\u3092\u8003\u616e\u3057\u305f\u5206\u985e\u3092\u8a2d\u5b9a</li> </ul>"},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#11","title":"11. \u8a18\u5165\u6642\u306e\u6ce8\u610f\u70b9","text":"<ol> <li>\u6bb5\u968e\u7684\u8a73\u7d30\u5316: \u6700\u521d\u306f\u5927\u307e\u304b\u306b\u8a18\u5165\u3057\u3001\u5f90\u3005\u306b\u8a73\u7d30\u5316</li> <li>\u4e00\u8cab\u6027\u306e\u78ba\u4fdd: \u56f3\u9593\u3067\u306e\u7528\u8a9e\u7d71\u4e00\u3068\u95a2\u9023\u6027\u306e\u6574\u5408\u6027</li> <li>\u30b9\u30c6\u30fc\u30af\u30db\u30eb\u30c0\u30fc\u8996\u70b9: \u696d\u52d9\u62c5\u5f53\u8005\u304c\u7406\u89e3\u3067\u304d\u308b\u7528\u8a9e\u3092\u4f7f\u7528</li> <li>\u30c8\u30ec\u30fc\u30b5\u30d3\u30ea\u30c6\u30a3: \u4e0a\u4f4d\u8981\u6c42\u304b\u3089\u4e0b\u4f4d\u5b9f\u88c5\u307e\u3067\u306e\u8ffd\u8de1\u53ef\u80fd\u6027</li> <li>\u9069\u5207\u306a\u62bd\u8c61\u5316\u30ec\u30d9\u30eb: \u8a2d\u8a08\u8a73\u7d30\u3067\u306f\u306a\u304f\u8981\u4ef6\u30ec\u30d9\u30eb\u3067\u8a18\u8ff0</li> </ol>"},{"location":"template/%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9/#12-plantuml","title":"12. PlantUML\u8a18\u6cd5\u306e\u57fa\u672c","text":"<ul> <li><code>actor</code>: \u4eba\u3084\u7d44\u7e54</li> <li><code>usecase</code>: \u30b7\u30b9\u30c6\u30e0\u3084\u696d\u52d9</li> <li><code>agent</code>: \u5916\u90e8\u30b7\u30b9\u30c6\u30e0\u3084\u5834\u6240</li> <li><code>entity</code>: \u60c5\u5831\u3084\u30c7\u30fc\u30bf</li> <li><code>boundary</code>: \u753b\u9762\u3084\u5165\u51fa\u529b</li> <li><code>control</code>: \u6761\u4ef6\u3084\u5236\u5fa1</li> <li><code>interface</code>: \u30a4\u30d9\u30f3\u30c8\u3084\u901a\u4fe1</li> <li><code>frame</code>: \u5229\u7528\u30b7\u30fc\u30f3\u3084\u30b0\u30eb\u30fc\u30d7\u5316</li> <li><code>artifact</code>: \u7269\u7406\u7684\u8cc7\u7523\u3084\u6210\u679c\u7269</li> <li><code>note</code>: \u8aac\u660e\u6587</li> </ul> <p>\u3053\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f7f\u7528\u3057\u3066\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u56fa\u6709\u306e\u8981\u4ef6\u5b9a\u7fa9\u66f8\u3092\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"template/%E8%A8%AD%E8%A8%88/","title":"\u8a2d\u8a08","text":""},{"location":"template/%E8%A8%AD%E8%A8%88/#_1","title":"\u30e6\u30fc\u30b6\u30fc\u30b9\u30c8\u30fc\u30ea\u30fc","text":"<ul> <li>\u7ba1\u7406\u8005\u3068\u3057\u3066\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b</li> <li>\u30e6\u30fc\u30b6\u30fc\u3068\u3057\u3066\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b</li> </ul>"},{"location":"template/%E8%A8%AD%E8%A8%88/#todo","title":"TODO\u30ea\u30b9\u30c8","text":"<ul> <li> \u8a8d\u8a3cAPI\u3092\u4f5c\u6210\u3059\u308b</li> <li> \u30ed\u30b0\u30a4\u30f3\u753b\u9762\u3092\u4f5c\u6210\u3059\u308b</li> <li> \u30db\u30fc\u30e0\u753b\u9762\u3092\u4f5c\u6210\u3059\u308b</li> </ul>"},{"location":"template/%E8%A8%AD%E8%A8%88/#_2","title":"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9","text":""},{"location":"template/%E8%A8%AD%E8%A8%88/#_3","title":"\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb","text":""},{"location":"template/%E8%A8%AD%E8%A8%88/#_4","title":"\u30c7\u30fc\u30bf\u30e2\u30c7\u30eb","text":""},{"location":"template/%E8%A8%AD%E8%A8%88/#_5","title":"\u30e6\u30fc\u30b6\u30fc\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9","text":""},{"location":"template/%E8%A8%AD%E8%A8%88/#_6","title":"\u30d3\u30e5\u30fc","text":""},{"location":"template/%E8%A8%AD%E8%A8%88/#_7","title":"\u30e2\u30c7\u30eb","text":""},{"location":"template/%E8%A8%AD%E8%A8%88/#_8","title":"\u30a4\u30f3\u30bf\u30e9\u30af\u30b7\u30e7\u30f3","text":""}]}