
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="基幹業務システム（販売管理・財務会計・生産管理）のデータベース設計を体系的に解説">
      
      
        <meta name="author" content="k2works">
      
      
      
        <link rel="prev" href="../chapter27/">
      
      
        <link rel="next" href="../chapter29/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>第28章 在庫管理の設計 - 実践データベース設計：基幹業務システム編</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../docs/mkdocs/assets/css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#28" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="実践データベース設計：基幹業務システム編" class="md-header__button md-logo" aria-label="実践データベース設計：基幹業務システム編" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            実践データベース設計：基幹業務システム編
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              第28章 在庫管理の設計
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/k2works/practical-database-design" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    practical-database-design
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
  実践データベース設計

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="実践データベース設計：基幹業務システム編" class="md-nav__button md-logo" aria-label="実践データベース設計：基幹業務システム編" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    実践データベース設計：基幹業務システム編
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/k2works/practical-database-design" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    practical-database-design
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    実践データベース設計
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    実践データベース設計
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../techstack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    技術スタック
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../outline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    アウトライン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    執筆ワークフロー
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ops/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    運用ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6" >
        
          
          <label class="md-nav__link" for="__nav_1_6" id="__nav_1_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    デプロイ
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    デプロイ
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy-sms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SMS デモデプロイ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy-fas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FAS デモデプロイ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_7" >
        
          
          <label class="md-nav__link" for="__nav_1_7" id="__nav_1_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第1部 基幹業務システムの全体像
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    第1部 基幹業務システムの全体像
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1/chapter01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第1章 基幹業務システムとは
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1/chapter02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第2章 基幹業務システムの業務領域
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1/chapter03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第3章 業務フローの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_8" >
        
          
          <label class="md-nav__link" for="__nav_1_8" id="__nav_1_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第2部 販売管理システム
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    第2部 販売管理システム
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第4章 販売管理システムの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第5章 マスタ情報の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第6章 受注・出荷・売上の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter07/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第7章 債権管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter08/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第8章 調達管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter09/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第9章 在庫管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第10章 債務管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第11章 共通処理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第12章 販売管理データ設計（B社事例）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第13章 APIサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_9" >
        
          
          <label class="md-nav__link" for="__nav_1_9" id="__nav_1_9_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第3部 財務会計システム
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    第3部 財務会計システム
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第14章 財務会計システムの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第15章 勘定科目の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter16/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第16章 仕訳の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter17/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第17章 自動仕訳の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter18/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第18章 勘定科目残高の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter19/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第19章 赤黒とログの設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter20/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第20章 財務会計データ設計（D社事例）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter21/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第21章 APIサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_10" checked>
        
          
          <label class="md-nav__link" for="__nav_1_10" id="__nav_1_10_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第4部 生産管理システム
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_10_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    第4部 生産管理システム
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter22/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第22章 生産管理システムの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter23/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第23章 マスタ情報の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter24/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第24章 生産計画の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter25/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第25章 購買管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter26/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第26章 外注委託管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter27/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第27章 工程管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    第28章 在庫管理の設計
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    第28章 在庫管理の設計
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        概要
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#281-db" class="md-nav__link">
    <span class="md-ellipsis">
      
        28.1 在庫情報の DB 設計
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="28.1 在庫情報の DB 設計">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        在庫管理の概念
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        スキーマ設計
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#java" class="md-nav__link">
    <span class="md-ellipsis">
      
        Java エンティティの定義
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Java エンティティの定義">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enum" class="md-nav__link">
    <span class="md-ellipsis">
      
        在庫状態 Enum
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        場所マスタ・在庫情報エンティティ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        在庫操作リクエスト
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mybatis-mapper" class="md-nav__link">
    <span class="md-ellipsis">
      
        MyBatis Mapper
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        在庫サービスの実装
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tdd" class="md-nav__link">
    <span class="md-ellipsis">
      
        TDD: 在庫情報のテスト
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#282-db" class="md-nav__link">
    <span class="md-ellipsis">
      
        28.2 払出業務の DB 設計
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="28.2 払出業務の DB 設計">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        払出業務の流れ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        払出指示・払出データのスキーマ設計
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#java_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Java エンティティの定義（払出）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        払出サービスの実装
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#283-db" class="md-nav__link">
    <span class="md-ellipsis">
      
        28.3 棚卸業務の DB 設計
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="28.3 棚卸業務の DB 設計">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        棚卸業務の流れ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        棚卸データのスキーマ設計
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#java_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Java エンティティの定義（棚卸）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        棚卸サービスの実装
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mybatis-mapper_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        MyBatis Mapper（棚卸）
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#284" class="md-nav__link">
    <span class="md-ellipsis">
      
        28.4 リレーションと楽観ロックの設計
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="28.4 リレーションと楽観ロックの設計">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mybatis-resultmap" class="md-nav__link">
    <span class="md-ellipsis">
      
        MyBatis ネストした ResultMap によるリレーション設定
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MyBatis ネストした ResultMap によるリレーション設定">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resultmap" class="md-nav__link">
    <span class="md-ellipsis">
      
        棚卸データのネスト ResultMap（明細・調整・品目を含む）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resultmap_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        払出データのネスト ResultMap（明細・品目・場所を含む）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        リレーション設定のポイント
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        楽観ロックの実装
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="楽観ロックの実装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flyway" class="md-nav__link">
    <span class="md-ellipsis">
      
        Flyway マイグレーション: バージョンカラム追加
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        エンティティへのバージョンフィールド追加
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mybatis-mapper_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        MyBatis Mapper: 楽観ロック対応の在庫更新
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#repository" class="md-nav__link">
    <span class="md-ellipsis">
      
        Repository 実装: 楽観ロック対応
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tdd_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        TDD: 楽観ロックのテスト
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      
        同時払出処理のシーケンス図
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      
        在庫管理向け楽観ロックのベストプラクティス
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#285" class="md-nav__link">
    <span class="md-ellipsis">
      
        28.5 まとめ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="28.5 まとめ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      
        学んだこと
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#er-28" class="md-nav__link">
    <span class="md-ellipsis">
      
        ER 図（第28章）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#28_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        テーブル一覧（第28章）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enum-28" class="md-nav__link">
    <span class="md-ellipsis">
      
        ENUM 一覧（第28章）
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第29章 品質管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter30/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第30章 製造原価管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter31/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第31章 生産管理データ設計（E社事例）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter32/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第32章 APIサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_11" >
        
          
          <label class="md-nav__link" for="__nav_1_11" id="__nav_1_11_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第5部 エンタープライズインテグレーション
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    第5部 エンタープライズインテグレーション
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter33.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第33章 システム統合の概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter34.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第34章 メッセージングパターン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter35.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第35章 システム間連携パターン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter36.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第36章 マスタデータ管理（MDM）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter37.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第37章 イベント駆動アーキテクチャ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter38.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第38章 API設計とサービス連携
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter39.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第39章 データ連携の実装パターン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_12" >
        
          
          <label class="md-nav__link" for="__nav_1_12" id="__nav_1_12_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 販売管理システム実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 販売管理システム実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study2-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究1 モノリスサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study2-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究2 JavaFXデスクトップアプリケーションの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study2-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究3 gRPCサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study2-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究4 GraphQLサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_13" >
        
          
          <label class="md-nav__link" for="__nav_1_13" id="__nav_1_13_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 財務会計システム実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_13">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 財務会計システム実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study3-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究1 モノリスサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study3-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究2 JavaFXデスクトップアプリケーションの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study3-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究3 gRPCサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study3-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究4 GraphQLサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_14" >
        
          
          <label class="md-nav__link" for="__nav_1_14" id="__nav_1_14_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 生産管理システム実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_14">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 生産管理システム実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study4-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究1 モノリスサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study4-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究2 JavaFXデスクトップアプリケーションの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study4-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究3 gRPCサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study4-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究4 GraphQLサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_15" >
        
          
          <label class="md-nav__link" for="__nav_1_15" id="__nav_1_15_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 財務会計システムORM実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_15">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 財務会計システムORM実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter14-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第14章 財務会計システムの全体像【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter15-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第15章 勘定科目の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter16-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第16章 仕訳の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter17-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第17章 自動仕訳の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter18-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第18章 勘定科目残高の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter19-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第19章 赤黒とログの設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter20-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第20章 財務会計データ設計（D社事例）【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter21-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第21章 APIサービスの実装【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_16" >
        
          
          <label class="md-nav__link" for="__nav_1_16" id="__nav_1_16_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    付録
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_16">
            <span class="md-nav__icon md-icon"></span>
            
  
    付録
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/er-diagrams.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    A 全体ER図
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/table-definitions.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    B テーブル定義一覧
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/glossary.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    C 用語集
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_17" >
        
          
          <label class="md-nav__link" for="__nav_1_17" id="__nav_1_17_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    データベース
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_17">
            <span class="md-nav__icon md-icon"></span>
            
  
    データベース
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../assets/schemaspy-output/sms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SchemaSpy ER図（SMS）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="28">第28章：在庫管理の設計<a class="headerlink" href="#28" title="Permanent link">&para;</a></h1>
<h2 id="_1">概要<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>本章では、生産管理システムにおける在庫管理の設計を解説します。在庫情報の管理、払出業務、棚卸業務を実装します。</p>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkFDVElWSVRZIiBoZWlnaHQ9IjYzOHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NDU0cHg7aGVpZ2h0OjYzOHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDQ1NCA2MzgiIHdpZHRoPSI0NTRweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjIzMTI7JiMyNDIzNTsmIzMxNjQ5OyYjMjk3MDI7JiMxMjM5ODsmIzIwMzAxOyYjMzI2MjI7JiMxMjM4OTsmIzEyMzY5OzwvdGl0bGU+PGRlZnMvPjxnPjxnIGNsYXNzPSJ0aXRsZSIgZGF0YS1zb3VyY2UtbGluZT0iMSI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyNS45OTk1IiB4PSIxNjIuODg4NSIgeT0iMzIuOTk1MSI+JiMyMjMxMjsmIzI0MjM1OyYjMzE2NDk7JiMyOTcwMjsmIzEyMzk4OyYjMjAzMDE7JiMzMjYyMjsmIzEyMzg5OyYjMTIzNjk7PC90ZXh0PjwvZz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjIwLjk1MzEiIHN0eWxlPSJzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI0MjEuNzc2NSIgeD0iMTUiIHk9IjUwLjA0MiIvPjxlbGxpcHNlIGN4PSI1Ni45OTk4IiBjeT0iODUuOTk1MSIgZmlsbD0iIzIyMjIyMiIgcng9IjEwIiByeT0iMTAiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MTsiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNDQuMDAwMiIgeD0iMzQuOTk5NyIgeT0iMTE1Ljk5NTEiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNC4wMDAyIiB4PSI0NC45OTk3IiB5PSIxMzcuMTMzOCI+JiMyMDgzNzsmIzMzNjU1OzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNDQuMDAwMiIgeD0iMzQuOTk5NyIgeT0iMTY5Ljk2MzkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNC4wMDAyIiB4PSI0NC45OTk3IiB5PSIxOTEuMTAyNSI+JiMyMTQ2MzsmIzIwODM3OzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNDQuMDAwMiIgeD0iMzQuOTk5NyIgeT0iMjIzLjkzMjYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNC4wMDAyIiB4PSI0NC45OTk3IiB5PSIyNDUuMDcxMyI+JiMyNjkwODsmIzIxNDU0OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHgxPSIxNSIgeDI9IjE1IiB5MT0iNTAuMDQyIiB5Mj0iNjI2Ljg2MjMiLz48cGF0aCBkPSJNMTkwLjk5OTksMjc0Ljc1MjkgTDE5MC45OTk5LDI5MC44ODU3IEwxNzAuOTk5OSwyOTQuODg1NyBMMTkwLjk5OTksMjk4Ljg4NTcgTDE5MC45OTk5LDMxNS4wMTg2IEEwLDAgMCAwIDAgMTkwLjk5OTksMzE1LjAxODYgTDM0Ny45MTYxLDMxNS4wMTg2IEEwLDAgMCAwIDAgMzQ3LjkxNjEsMzE1LjAxODYgTDM0Ny45MTYxLDI4NC43NTI5IEwzMzcuOTE2MSwyNzQuNzUyOSBMMTkwLjk5OTksMjc0Ljc1MjkgQTAsMCAwIDAgMCAxOTAuOTk5OSwyNzQuNzUyOSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTMzNy45MTYxLDI3NC43NTI5IEwzMzcuOTE2MSwyODQuNzUyOSBMMzQ3LjkxNjEsMjg0Ljc1MjkgTDMzNy45MTYxLDI3NC43NTI5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzUuOTE2MSIgeD0iMTk2Ljk5OTkiIHk9IjI5MS44MTk4Ij4mIzIyNTgwOyYjMjUxNTI7IHggJiMyMTY5NzsmIzMwNDQ2OyB4ICYjMjIzMTI7JiMyNDIzNTsmIzI5MzY2OyYjMjQ5MDc7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjM5IiB4PSIxOTYuOTk5OSIgeT0iMzA2Ljk1MjYiPiYjMTIzOTE7JiMzMTY0OTsmIzI5NzAyOzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNjguMDAwNCIgeD0iMTAyLjk5OTYiIHk9IjI3Ny45MDE0Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDguMDAwNCIgeD0iMTEyLjk5OTYiIHk9IjI5OS4wNCI+JiMyMjMxMjsmIzI0MjM1OyYjMjI2Nzk7JiMyMTE1Mjs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjY4LjAwMDQiIHg9IjEwMi45OTk2IiB5PSIzODguOTg3MyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ4LjAwMDQiIHg9IjExMi45OTk2IiB5PSI0MTAuMTI2Ij4mIzIyMzEyOyYjMjQyMzU7JiMyODE4NzsmIzIzNTY5OzwvdGV4dD48cGF0aCBkPSJNMTkwLjk5OTksNTU1LjMxMTUgTDE5MC45OTk5LDU2My44Nzc5IEwxNzAuOTk5OSw1NjcuODc3OSBMMTkwLjk5OTksNTcxLjg3NzkgTDE5MC45OTk5LDU4MC40NDQzIEEwLDAgMCAwIDAgMTkwLjk5OTksNTgwLjQ0NDMgTDI2NCw1ODAuNDQ0MyBBMCwwIDAgMCAwIDI2NCw1ODAuNDQ0MyBMMjY0LDU2NS4zMTE1IEwyNTQsNTU1LjMxMTUgTDE5MC45OTk5LDU1NS4zMTE1IEEwLDAgMCAwIDAgMTkwLjk5OTksNTU1LjMxMTUiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0yNTQsNTU1LjMxMTUgTDI1NCw1NjUuMzExNSBMMjY0LDU2NS4zMTE1IEwyNTQsNTU1LjMxMTUiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjUyLjAwMDEiIHg9IjE5Ni45OTk5IiB5PSI1NzIuMzc4NCI+JiMzNTA2OTsmIzIxNjk3OyYjMjA4Mzc7JiMyNDIzNTs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjY4LjAwMDQiIHg9IjEwMi45OTk2IiB5PSI1NTAuODkzNiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ4LjAwMDQiIHg9IjExMi45OTk2IiB5PSI1NzIuMDMyMiI+JiMyMjMxMjsmIzI0MjM1OyYjMjI2Nzk7JiMyMTE1Mjs8L3RleHQ+PGVsbGlwc2UgY3g9IjEzNi45OTk4IiBjeT0iNjE1Ljg2MjMiIGZpbGw9Im5vbmUiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMyMjIyMjI7c3Ryb2tlLXdpZHRoOjE7Ii8+PGVsbGlwc2UgY3g9IjEzNi45OTk4IiBjeT0iNjE1Ljg2MjMiIGZpbGw9IiMyMjIyMjIiIHJ4PSI2IiByeT0iNiIgc3R5bGU9InN0cm9rZTojMjIyMjIyO3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9Ijk2Ljk5OTYiIHgyPSI5Ni45OTk2IiB5MT0iNTAuMDQyIiB5Mj0iNjI2Ljg2MjMiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNDQuMDAwMiIgeD0iMzcyLjkxNTgiIHk9IjMzNS4wMTg2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjQuMDAwMiIgeD0iMzgyLjkxNTgiIHk9IjM1Ni4xNTcyIj4mIzI1MTczOyYjMjA5ODY7PC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0NC4wMDAyIiB4PSIzNzIuOTE1OCIgeT0iNDQyLjk1NjEiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNC4wMDAyIiB4PSIzODIuOTE1OCIgeT0iNDY0LjA5NDciPiYjMzUwNjk7JiMzNjg5Njs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQ0LjAwMDIiIHg9IjM3Mi45MTU4IiB5PSI0OTYuOTI0OCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI0LjAwMDIiIHg9IjM4Mi45MTU4IiB5PSI1MTguMDYzNSI+JiMyMzQzNjsmIzI1MTA0OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHgxPSIzNTIuOTE2MSIgeDI9IjM1Mi45MTYxIiB5MT0iNTAuMDQyIiB5Mj0iNjI2Ljg2MjMiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHgxPSI0MzQuOTE1NiIgeDI9IjQzNC45MTU2IiB5MT0iNTAuMDQyIiB5Mj0iNjI2Ljg2MjMiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNTYuOTk5OCIgeDI9IjU2Ljk5OTgiIHkxPSI5NS45OTUxIiB5Mj0iMTE1Ljk5NTEiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjUyLjk5OTgsMTA1Ljk5NTEsNTYuOTk5OCwxMTUuOTk1MSw2MC45OTk4LDEwNS45OTUxLDU2Ljk5OTgsMTA5Ljk5NTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNTYuOTk5OCIgeDI9IjU2Ljk5OTgiIHkxPSIxNDkuOTYzOSIgeTI9IjE2OS45NjM5Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI1Mi45OTk4LDE1OS45NjM5LDU2Ljk5OTgsMTY5Ljk2MzksNjAuOTk5OCwxNTkuOTYzOSw1Ni45OTk4LDE2My45NjM5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjU2Ljk5OTgiIHgyPSI1Ni45OTk4IiB5MT0iMjAzLjkzMjYiIHkyPSIyMjMuOTMyNiIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNTIuOTk5OCwyMTMuOTMyNiw1Ni45OTk4LDIyMy45MzI2LDYwLjk5OTgsMjEzLjkzMjYsNTYuOTk5OCwyMTcuOTMyNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMzYuOTk5OCIgeDI9IjEzNi45OTk4IiB5MT0iNTg0Ljg2MjMiIHkyPSI2MDQuODYyMyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTMyLjk5OTgsNTk0Ljg2MjMsMTM2Ljk5OTgsNjA0Ljg2MjMsMTQwLjk5OTgsNTk0Ljg2MjMsMTM2Ljk5OTgsNTk4Ljg2MjMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzk0LjkxNTkiIHgyPSIzOTQuOTE1OSIgeTE9IjQ3Ni45MjQ4IiB5Mj0iNDk2LjkyNDgiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjM5MC45MTU5LDQ4Ni45MjQ4LDM5NC45MTU5LDQ5Ni45MjQ4LDM5OC45MTU5LDQ4Ni45MjQ4LDM5NC45MTU5LDQ5MC45MjQ4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjU2Ljk5OTgiIHgyPSI1Ni45OTk4IiB5MT0iMjU3LjkwMTQiIHkyPSIyNjIuOTAxNCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI1Ni45OTk4IiB4Mj0iMTM2Ljk5OTgiIHkxPSIyNjIuOTAxNCIgeTI9IjI2Mi45MDE0Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEzNi45OTk4IiB4Mj0iMTM2Ljk5OTgiIHkxPSIyNjIuOTAxNCIgeTI9IjI3Ny45MDE0Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMzIuOTk5OCwyNjcuOTAxNCwxMzYuOTk5OCwyNzcuOTAxNCwxNDAuOTk5OCwyNjcuOTAxNCwxMzYuOTk5OCwyNzEuOTAxNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMzYuOTk5OCIgeDI9IjEzNi45OTk4IiB5MT0iMzExLjg3MDEiIHkyPSIzMjAuMDE4NiIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMzYuOTk5OCIgeDI9IjM5NC45MTU5IiB5MT0iMzIwLjAxODYiIHkyPSIzMjAuMDE4NiIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzOTQuOTE1OSIgeDI9IjM5NC45MTU5IiB5MT0iMzIwLjAxODYiIHkyPSIzMzUuMDE4NiIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzkwLjkxNTksMzI1LjAxODYsMzk0LjkxNTksMzM1LjAxODYsMzk4LjkxNTksMzI1LjAxODYsMzk0LjkxNTksMzI5LjAxODYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzk0LjkxNTkiIHgyPSIzOTQuOTE1OSIgeTE9IjM2OC45ODczIiB5Mj0iMzczLjk4NzMiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzk0LjkxNTkiIHgyPSIxMzYuOTk5OCIgeTE9IjM3My45ODczIiB5Mj0iMzczLjk4NzMiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTM2Ljk5OTgiIHgyPSIxMzYuOTk5OCIgeTE9IjM3My45ODczIiB5Mj0iMzg4Ljk4NzMiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjEzMi45OTk4LDM3OC45ODczLDEzNi45OTk4LDM4OC45ODczLDE0MC45OTk4LDM3OC45ODczLDEzNi45OTk4LDM4Mi45ODczIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEzNi45OTk4IiB4Mj0iMTM2Ljk5OTgiIHkxPSI0MjIuOTU2MSIgeTI9IjQyNy45NTYxIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEzNi45OTk4IiB4Mj0iMzk0LjkxNTkiIHkxPSI0MjcuOTU2MSIgeTI9IjQyNy45NTYxIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjM5NC45MTU5IiB4Mj0iMzk0LjkxNTkiIHkxPSI0MjcuOTU2MSIgeTI9IjQ0Mi45NTYxIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIzOTAuOTE1OSw0MzIuOTU2MSwzOTQuOTE1OSw0NDIuOTU2MSwzOTguOTE1OSw0MzIuOTU2MSwzOTQuOTE1OSw0MzYuOTU2MSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzOTQuOTE1OSIgeDI9IjM5NC45MTU5IiB5MT0iNTMwLjg5MzYiIHkyPSI1MzUuODkzNiIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzOTQuOTE1OSIgeDI9IjEzNi45OTk4IiB5MT0iNTM1Ljg5MzYiIHkyPSI1MzUuODkzNiIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMzYuOTk5OCIgeDI9IjEzNi45OTk4IiB5MT0iNTM1Ljg5MzYiIHkyPSI1NTAuODkzNiIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTMyLjk5OTgsNTQwLjg5MzYsMTM2Ljk5OTgsNTUwLjg5MzYsMTQwLjk5OTgsNTQwLjg5MzYsMTM2Ljk5OTgsNTQ0Ljg5MzYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3MS45OTk2IiB4PSIyMCIgeT0iNjYuNzUiPiYjMzYwOTI7JiMzNjAyMzsmIzMxNjQ5OyYjMjk3MDI7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE4IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjcxLjk5OTYiIHg9IjE4OC45NTgiIHk9IjY2Ljc1Ij4mIzIyMzEyOyYjMjQyMzU7JiMzMTY0OTsmIzI5NzAyOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3MS45OTk2IiB4PSIzNTcuOTE2MSIgeT0iNjYuNzUiPiYjMjQwMzc7JiMzMTI0MzsmIzMxNjQ5OyYjMjk3MDI7PC90ZXh0Pjw/cGxhbnR1bWwtc3JjIEF5YWlvS2JMVTNmZG5URFRndi1sTV9YeUdqbFpuZExGemxPLXR4bGtTVUZJbnVxSmtSWGdOY3BVeXNCSlRlWGkzTFRuSU05SDJQVkxxelFiQnRndE1tQ1BfVEUxUjIzWnNQOHZKX2x4aDg0UWE4c2gwUWUwU3Z5a2Nsd3FRdTRyTHJ2LUlRZjJLTVB3SGVjTG1qQzVNdnZyRFlYS0Ezb1R0Rlh5elplRzB3QXJRemtwcmt3T2xDVURvbzZjVzBwVGxsSnZZY3d1ZVN5d2Zwdmp0dU5KamNTeFBaX1RDRDRRS3otQm5OalZEWW0wa05qVHB4RUUySUd2NXdXTnc1MldSdTdvTkMyMG8yeTAwMDAwPz48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<hr />
<h2 id="281-db">28.1 在庫情報の DB 設計<a class="headerlink" href="#281-db" title="Permanent link">&para;</a></h2>
<h3 id="_2">在庫管理の概念<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<p>在庫情報は「場所コード × 品目コード」で一意に管理されます。さらに在庫状態（合格・不良・未検査）ごとの数量を保持します。</p>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjQwMnB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MzIwcHg7aGVpZ2h0OjQwMnB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDMyMCA0MDIiIHdpZHRoPSIzMjBweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjIzMTI7JiMyNDIzNTsmIzI0NzczOyYjMjI1Nzc7JiMxMjM5ODsmIzI3MDgzOyYjMzY4OTY7PC90aXRsZT48ZGVmcy8+PGc+PGcgY2xhc3M9InRpdGxlIiBkYXRhLXNvdXJjZS1saW5lPSIxIj48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTcuOTk5NiIgeD0iMTA0LjQwMzYiIHk9IjIyLjk5NTEiPiYjMjIzMTI7JiMyNDIzNTsmIzI0NzczOyYjMjI1Nzc7JiMxMjM5ODsmIzI3MDgzOyYjMzY4OTY7PC90ZXh0PjwvZz48IS0tY2xhc3Mgc3RvY2stLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJzdG9jayIgZGF0YS1zb3VyY2UtbGluZT0iMyIgaWQ9ImVudDAwMDIiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTYyLjA3ODEiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEyOC42MDcxIiB4PSI5OSIgeT0iNDQuMjk2OSIvPjxlbGxpcHNlIGN4PSIxMzIuMjczMyIgY3k9IjYwLjI5NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTEzNi4zODI3LDY2LjI5NjkgTDEyOC42NjM5LDY2LjI5NjkgTDEyOC42NjM5LDUzLjkwNjMgTDEzNi4zODI3LDUzLjkwNjMgTDEzNi4zODI3LDU2LjA2MjUgTDEzMS4xMTcxLDU2LjA2MjUgTDEzMS4xMTcxLDU4LjczNDQgTDEzNS44ODI3LDU4LjczNDQgTDEzNS44ODI3LDYwLjg5MDYgTDEzMS4xMTcxLDYwLjg5MDYgTDEzMS4xMTcxLDY0LjE0MDYgTDEzNi4zODI3LDY0LjE0MDYgTDEzNi4zODI3LDY2LjI5NjkgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSIxNTAuMzM0IiB5PSI2NS4xNDM2Ij4mIzIyMzEyOyYjMjQyMzU7JiMyNDc3MzsmIzIyNTc3OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxMDAiIHgyPSIyMjYuNjA3MSIgeTE9Ijc2LjI5NjkiIHkyPSI3Ni4yOTY5Ii8+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJJRV9NQU5EQVRPUlkiPjxlbGxpcHNlIGN4PSIxMTAiIGN5PSI4OS45NDUzIiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDcuOTA2MyIgeD0iMTE5IiB5PSI5My4yOTIiPklEIFtQS108L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEwMCIgeDI9IjIyNi42MDcxIiB5MT0iMTAwLjU5MzgiIHkyPSIxMDAuNTkzOCIvPjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iSUVfTUFOREFUT1JZIj48ZWxsaXBzZSBjeD0iMTEwIiBjeT0iMTE0LjI0MjIiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDIuNjA3MSIgeD0iMTE5IiB5PSIxMTcuNTg4OSI+JiMyMjU4MDsmIzI1MTUyOyYjMTI0Njc7JiMxMjU0MDsmIzEyNDg5OyBbRktdPC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iSUVfTUFOREFUT1JZIj48ZWxsaXBzZSBjeD0iMTEwIiBjeT0iMTMwLjUzOTEiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDIuNjA3MSIgeD0iMTE5IiB5PSIxMzMuODg1NyI+JiMyMTY5NzsmIzMwNDQ2OyYjMTI0Njc7JiMxMjU0MDsmIzEyNDg5OyBbRktdPC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iSUVfTUFOREFUT1JZIj48ZWxsaXBzZSBjeD0iMTEwIiBjeT0iMTQ2LjgzNTkiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSIxMTkiIHk9IjE1MC4xODI2Ij4mIzIyMzEyOyYjMjQyMzU7JiMyNTk2ODsmIzM3MzI3OzwvdGV4dD48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IklFX01BTkRBVE9SWSI+PGVsbGlwc2UgY3g9IjExMCIgY3k9IjE2My4xMzI4IiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDEuOTk5OCIgeD0iMTE5IiB5PSIxNjYuNDc5NSI+JiMyMTUxMjsmIzI2Njg0OyYjMjU5Njg7PC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iSUVfTUFOREFUT1JZIj48ZWxsaXBzZSBjeD0iMTEwIiBjeT0iMTc5LjQyOTciIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MS45OTk4IiB4PSIxMTkiIHk9IjE4Mi43NzY0Ij4mIzE5OTgxOyYjMzMzOTE7JiMyNTk2ODs8L3RleHQ+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJJRV9NQU5EQVRPUlkiPjxlbGxpcHNlIGN4PSIxMTAiIGN5PSIxOTUuNzI2NiIgZmlsbD0iIzAwMDAwMCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjExOSIgeT0iMTk5LjA3MzIiPiYjMjY0MTA7JiMyNjkwODsmIzI2NjE5OyYjMjU5Njg7PC90ZXh0PjwvZz48IS0tY2xhc3MgbG9jYXRpb24tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJsb2NhdGlvbiIgZGF0YS1zb3VyY2UtbGluZT0iMTQiIGlkPSJlbnQwMDAzIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjEyOS40ODQ0IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNDIuNjA3MSIgeD0iNyIgeT0iMjY2LjM3NjkiLz48ZWxsaXBzZSBjeD0iNDAuMjczMyIgY3k9IjI4Mi4zNzY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik00NC4zODI3LDI4OC4zNzY5IEwzNi42NjM5LDI4OC4zNzY5IEwzNi42NjM5LDI3NS45ODYzIEw0NC4zODI3LDI3NS45ODYzIEw0NC4zODI3LDI3OC4xNDI1IEwzOS4xMTcxLDI3OC4xNDI1IEwzOS4xMTcxLDI4MC44MTQ0IEw0My44ODI3LDI4MC44MTQ0IEw0My44ODI3LDI4Mi45NzA2IEwzOS4xMTcxLDI4Mi45NzA2IEwzOS4xMTcxLDI4Ni4yMjA2IEw0NC4zODI3LDI4Ni4yMjA2IEw0NC4zODI3LDI4OC4zNzY5IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iNTguMzM0IiB5PSIyODcuMjIzNiI+JiMyMjU4MDsmIzI1MTUyOyYjMTI1MTA7JiMxMjQ3MzsmIzEyNDc5OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI4IiB4Mj0iMTQ4LjYwNzEiIHkxPSIyOTguMzc2OSIgeTI9IjI5OC4zNzY5Ii8+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJJRV9NQU5EQVRPUlkiPjxlbGxpcHNlIGN4PSIxOCIgY3k9IjMxMi4wMjUzIiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAyLjk5NjgiIHg9IjI3IiB5PSIzMTUuMzcyIj4mIzIyNTgwOyYjMjUxNTI7JiMxMjQ2NzsmIzEyNTQwOyYjMTI0ODk7IFtQS108L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjgiIHgyPSIxNDguNjA3MSIgeTE9IjMyMi42NzM4IiB5Mj0iMzIyLjY3MzgiLz48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IklFX01BTkRBVE9SWSI+PGVsbGlwc2UgY3g9IjE4IiBjeT0iMzM2LjMyMjIiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MS45OTk4IiB4PSIyNyIgeT0iMzM5LjY2ODkiPiYjMjI1ODA7JiMyNTE1MjsmIzIxNTE3OzwvdGV4dD48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IklFX01BTkRBVE9SWSI+PGVsbGlwc2UgY3g9IjE4IiBjeT0iMzUyLjYxOTEiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ny45OTk2IiB4PSIyNyIgeT0iMzU1Ljk2NTciPiYjMjI1ODA7JiMyNTE1MjsmIzMxMjc4OyYjMzkwMDY7JiMxMjQ2NzsmIzEyNTQwOyYjMTI0ODk7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNi42MDcxIiB4PSIyNyIgeT0iMzcyLjI2MjYiPiYjMjE0NjI7JiMyNDM0MTsmIzIwODA4OyYjMTI0Njc7JiMxMjU0MDsmIzEyNDg5OyBbRktdPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwMi42MDcxIiB4PSIyNyIgeT0iMzg4LjU1OTUiPiYjMzcwOTY7JiMzODI3MjsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsgW0ZLXTwvdGV4dD48L2c+PCEtLWNsYXNzIGl0ZW0tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJpdGVtIiBkYXRhLXNvdXJjZS1saW5lPSIyMyIgaWQ9ImVudDAwMDQiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTEzLjE4NzUiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEyOC45OTY4IiB4PSIxODQuODEiIHk9IjI3NC41MTY5Ii8+PGVsbGlwc2UgY3g9IjIxMS45NTg3IiBjeT0iMjkwLjUxNjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTIxNi4wNjgxLDI5Ni41MTY5IEwyMDguMzQ5MywyOTYuNTE2OSBMMjA4LjM0OTMsMjg0LjEyNjMgTDIxNi4wNjgxLDI4NC4xMjYzIEwyMTYuMDY4MSwyODYuMjgyNSBMMjEwLjgwMjQsMjg2LjI4MjUgTDIxMC44MDI0LDI4OC45NTQ0IEwyMTUuNTY4MSwyODguOTU0NCBMMjE1LjU2ODEsMjkxLjExMDYgTDIxMC44MDI0LDI5MS4xMTA2IEwyMTAuODAyNCwyOTQuMzYwNiBMMjE2LjA2ODEsMjk0LjM2MDYgTDIxNi4wNjgxLDI5Ni41MTY5IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iMjI4LjY1ODQiIHk9IjI5NS4zNjM2Ij4mIzIxNjk3OyYjMzA0NDY7JiMxMjUxMDsmIzEyNDczOyYjMTI0Nzk7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjE4NS44MSIgeDI9IjMxMi44MDY4IiB5MT0iMzA2LjUxNjkiIHkyPSIzMDYuNTE2OSIvPjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iSUVfTUFOREFUT1JZIj48ZWxsaXBzZSBjeD0iMTk1LjgxIiBjeT0iMzIwLjE2NTMiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDIuOTk2OCIgeD0iMjA0LjgxIiB5PSIzMjMuNTEyIj4mIzIxNjk3OyYjMzA0NDY7JiMxMjQ2NzsmIzEyNTQwOyYjMTI0ODk7IFtQS108L3RleHQ+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJJRV9NQU5EQVRPUlkiPjxlbGxpcHNlIGN4PSIxOTUuODEiIGN5PSIzMzYuNDYyMiIgZmlsbD0iIzAwMDAwMCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwMi45OTY4IiB4PSIyMDQuODEiIHk9IjMzOS44MDg5Ij4mIzM2OTY5OyYjMjk5OTI7JiMzODI4MzsmIzIyOTg3OyYjMjYwODU7IFtQS108L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE4NS44MSIgeDI9IjMxMi44MDY4IiB5MT0iMzQ3LjExMDYiIHkyPSIzNDcuMTEwNiIvPjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iSUVfTUFOREFUT1JZIj48ZWxsaXBzZSBjeD0iMTk1LjgxIiBjeT0iMzYwLjc1OTEiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNy45OTk5IiB4PSIyMDQuODEiIHk9IjM2NC4xMDU3Ij4mIzIxNjk3OyYjMjE1MTc7PC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iSUVfTUFOREFUT1JZIj48ZWxsaXBzZSBjeD0iMTk1LjgxIiBjeT0iMzc3LjA1NTkiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSIyMDQuODEiIHk9IjM4MC40MDI2Ij4mIzIxNjk3OyYjMzA0NDY7JiMyMTMwNjsmIzIwOTk4OzwvdGV4dD48L2c+PCEtLWxpbmsgc3RvY2sgdG8gbG9jYXRpb24tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwMiIgZGF0YS1lbnRpdHktMj0iZW50MDAwMyIgZGF0YS1saW5rLXR5cGU9ImNyb3dmb290IiBkYXRhLXNvdXJjZS1saW5lPSIzMSIgaWQ9ImxuazUiPjxwYXRoIGNvZGVMaW5lPSIzMSIgZD0iTTEyMi45MDQ1LDIyMy4xOTEzIEMxMTQuNjg0NSwyNDIuOTExMyAxMTUuOTg4OSwyMzkuNzUzMSAxMDguMTI4OSwyNTguNjAzMSIgZmlsbD0ibm9uZSIgaWQ9InN0b2NrLWxvY2F0aW9uIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEyNi43NTIiIHgyPSIxMjQuMjkxOSIgeTE9IjIxMy45NjEiIHkyPSIyMDQuMjY4NCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMjYuNzUyIiB4Mj0iMTM1LjM2ODEiIHkxPSIyMTMuOTYxIiB5Mj0iMjA4Ljg4NTQiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTI2Ljc1MiIgeDI9IjEyOS44MyIgeTE9IjIxMy45NjEiIHkyPSIyMDYuNTc2OSIvPjxlbGxpcHNlIGN4PSIxMjQuNDQzNSIgY3k9IjIxOS40OTkyIiBmaWxsPSJub25lIiByeD0iNCIgcnk9IjQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTEwLjI4MTMiIHgyPSIxMDIuODk3NSIgeTE9IjI2My44MzQ0IiB5Mj0iMjYwLjc1NTUiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTExLjQzNTkiIHgyPSIxMDQuMDUyMSIgeTE9IjI2MS4wNjU1IiB5Mj0iMjU3Ljk4NjYiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTA4LjEyODkiIHgyPSIxMDUuMDUiIHkxPSIyNTguNjAzMSIgeTI9IjI2NS45ODY5Ii8+PC9nPjwhLS1saW5rIHN0b2NrIHRvIGl0ZW0tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwMiIgZGF0YS1lbnRpdHktMj0iZW50MDAwNCIgZGF0YS1saW5rLXR5cGU9ImNyb3dmb290IiBkYXRhLXNvdXJjZS1saW5lPSIzMiIgaWQ9ImxuazYiPjxwYXRoIGNvZGVMaW5lPSIzMiIgZD0iTTIwNC4xNjc1LDIyMy4xNjExIEMyMTMuNzA3NSwyNDUuNzcxMSAyMTMuNzcwNSwyNDUuOTE1OSAyMjIuNTcwNSwyNjYuNzc1OSIgZmlsbD0ibm9uZSIgaWQ9InN0b2NrLWl0ZW0iIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjAwLjI4IiB4Mj0iMTkxLjY0MTkiIHkxPSIyMTMuOTQ3NiIgeTI9IjIwOC45MDk0Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjIwMC4yOCIgeDI9IjIwMi42OTgxIiB5MT0iMjEzLjk0NzYiIHkyPSIyMDQuMjQ0NCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyMDAuMjgiIHgyPSIxOTcuMTciIHkxPSIyMTMuOTQ3NiIgeTI9IjIwNi41NzY5Ii8+PGVsbGlwc2UgY3g9IjIwMi42MTI1IiBjeT0iMjE5LjQ3NTciIGZpbGw9Im5vbmUiIHJ4PSI0IiByeT0iNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyMjcuODEwNyIgeDI9IjIyMC40Mzk4IiB5MT0iMjY4LjkwNjYiIHkyPSIyNzIuMDE2MiIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyMjYuNjQ0NyIgeDI9IjIxOS4yNzM3IiB5MT0iMjY2LjE0MjUiIHkyPSIyNjkuMjUyIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjIyMi41NzA1IiB4Mj0iMjI1LjY4IiB5MT0iMjY2Ljc3NTkiIHkyPSIyNzQuMTQ2OSIvPjwvZz48P3BsYW50dW1sLXNyYyBBeWFpb0tiTFUzZmRuVERUZ3Z5cmpwdlRpRjVudXhmZG94alZEWXBXdWFoREF5YWlnTEhHR2ZQTUthV2lMWVdrb0tfRUxnWmNxYkJtVDU2ODNsMkV2VEJMMU5BVUJqWm9oQkZYU1RGY255cng3WlR0QWFJeDBNTTBtZkNSZHl6VVhvYUNDTk5nWGZWal9JM2tYOHZkMl9PMGtLM3NhbnN6QnBoTkd6WkZ2Z253amNKRWlfY3hHVG5ROTRUMUI2a1V6eFhmdi1FY19NMXR2VUdkOXZQYXZrVTFkT1JYNlpIdEZmdEcyc1NfTng3a3ZTOXZTQkxTSl9rZEZUcXB6TWJoMXZnaE5wUWxVM2FEdE9WOFplOXU1U0xIY0lNZmtIMDdlT1QzMDNXU05aUWtWM3U1UTZwdHEtTlRwd09sSE5SZHY0UWU4eTR3ZF9SaVVqaEgxaDhFNGx3ci1SZ3dESkxtSndFQVdjbTUwMDAwPz48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_3">スキーマ設計<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<details>
<summary>DDL: 場所マスタ・倉庫マスタ・在庫情報</summary>

<div class="highlight"><pre><span></span><code><span class="c1">-- V17__create_inventory_tables.sql</span>

<span class="c1">-- 場所マスタ</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;場所マスタ&quot;</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="ss">&quot;場所コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;場所名&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;場所種類コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;取引先コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;部門コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;適用開始日&quot;</span><span class="w"> </span><span class="nb">DATE</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;作成日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;更新日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;FK_場所_取引先&quot;</span><span class="w"> </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;取引先コード&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;取引先マスタ&quot;</span><span class="p">(</span><span class="ss">&quot;取引先コード&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;FK_場所_部門&quot;</span><span class="w"> </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;部門コード&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;部門マスタ&quot;</span><span class="p">(</span><span class="ss">&quot;部門コード&quot;</span><span class="p">)</span>
<span class="p">);</span>

<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;場所マスタ&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;場所マスタ&#39;</span><span class="p">;</span>
<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="ss">&quot;場所マスタ&quot;</span><span class="p">.</span><span class="ss">&quot;場所コード&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;場所コード&#39;</span><span class="p">;</span>
<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="ss">&quot;場所マスタ&quot;</span><span class="p">.</span><span class="ss">&quot;場所名&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;場所名&#39;</span><span class="p">;</span>
<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="ss">&quot;場所マスタ&quot;</span><span class="p">.</span><span class="ss">&quot;場所種類コード&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;場所種類コード（倉庫/製造ライン等）&#39;</span><span class="p">;</span>

<span class="c1">-- 倉庫マスタ</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;倉庫マスタ&quot;</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="ss">&quot;倉庫コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;倉庫区分&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;倉庫名&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;部門コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;作成日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;更新日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span>
<span class="p">);</span>

<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;倉庫マスタ&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;倉庫マスタ&#39;</span><span class="p">;</span>
<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="ss">&quot;倉庫マスタ&quot;</span><span class="p">.</span><span class="ss">&quot;倉庫コード&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;倉庫コード&#39;</span><span class="p">;</span>
<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="ss">&quot;倉庫マスタ&quot;</span><span class="p">.</span><span class="ss">&quot;倉庫区分&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;倉庫区分&#39;</span><span class="p">;</span>
<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="ss">&quot;倉庫マスタ&quot;</span><span class="p">.</span><span class="ss">&quot;倉庫名&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;倉庫名&#39;</span><span class="p">;</span>

<span class="c1">-- 在庫情報</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;在庫情報&quot;</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="ss">&quot;ID&quot;</span><span class="w"> </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;場所コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;品目コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;在庫数量&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;合格数&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;不良数&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;未検査数&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;作成日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;更新日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;UK_在庫_場所_品目&quot;</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;場所コード&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;品目コード&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;FK_在庫_場所&quot;</span><span class="w"> </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;場所コード&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;場所マスタ&quot;</span><span class="p">(</span><span class="ss">&quot;場所コード&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;FK_在庫_品目&quot;</span><span class="w"> </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;品目コード&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;品目マスタ&quot;</span><span class="p">(</span><span class="ss">&quot;品目コード&quot;</span><span class="p">)</span>
<span class="p">);</span>

<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;在庫情報&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;在庫情報&#39;</span><span class="p">;</span>
<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="ss">&quot;在庫情報&quot;</span><span class="p">.</span><span class="ss">&quot;ID&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;サロゲートキー&#39;</span><span class="p">;</span>
<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="ss">&quot;在庫情報&quot;</span><span class="p">.</span><span class="ss">&quot;場所コード&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;場所コード&#39;</span><span class="p">;</span>
<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="ss">&quot;在庫情報&quot;</span><span class="p">.</span><span class="ss">&quot;品目コード&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;品目コード&#39;</span><span class="p">;</span>
<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="ss">&quot;在庫情報&quot;</span><span class="p">.</span><span class="ss">&quot;在庫数量&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;総在庫数量&#39;</span><span class="p">;</span>
<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="ss">&quot;在庫情報&quot;</span><span class="p">.</span><span class="ss">&quot;合格数&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;合格品数量&#39;</span><span class="p">;</span>
<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="ss">&quot;在庫情報&quot;</span><span class="p">.</span><span class="ss">&quot;不良数&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;不良品数量&#39;</span><span class="p">;</span>
<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="ss">&quot;在庫情報&quot;</span><span class="p">.</span><span class="ss">&quot;未検査数&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;未検査品数量&#39;</span><span class="p">;</span>

<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;IDX_在庫_場所&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;在庫情報&quot;</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;場所コード&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;IDX_在庫_品目&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;在庫情報&quot;</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;品目コード&quot;</span><span class="p">);</span>
</code></pre></div>

</details>

<h3 id="java">Java エンティティの定義<a class="headerlink" href="#java" title="Permanent link">&para;</a></h3>
<h4 id="enum">在庫状態 Enum<a class="headerlink" href="#enum" title="Permanent link">&para;</a></h4>
<details>
<summary>Enum: StockStatus（在庫状態）</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/domain/model/inventory/StockStatus.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.domain.model.inventory</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 在庫状態</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">enum</span><span class="w"> </span><span class="n">StockStatus</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">PASSED</span><span class="p">(</span><span class="s">&quot;合格&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">DEFECTIVE</span><span class="p">(</span><span class="s">&quot;不良&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">UNINSPECTED</span><span class="p">(</span><span class="s">&quot;未検査&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">displayName</span><span class="p">;</span>

<span class="w">    </span><span class="n">StockStatus</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">displayName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">displayName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">displayName</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getDisplayName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">displayName</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">StockStatus</span><span class="w"> </span><span class="nf">fromDisplayName</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">displayName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">StockStatus</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">values</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">status</span><span class="p">.</span><span class="na">displayName</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">displayName</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">status</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;Unknown display name: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">displayName</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h4 id="_4">場所マスタ・在庫情報エンティティ<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h4>
<details>
<summary>Entity: Location（場所マスタ）</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/domain/model/inventory/Location.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.domain.model.inventory</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 場所マスタエンティティ</span>
<span class="cm"> */</span>
<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Location</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">locationCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">locationName</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">locationTypeCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">supplierCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">departmentCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">effectiveDate</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">createdAt</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">updatedAt</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Location</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">locationCode</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">locationName</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">locationTypeCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">locationCode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">locationCode</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">locationName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">locationName</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">locationTypeCode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">locationTypeCode</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>Entity: Stock（在庫情報）</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/domain/model/inventory/Stock.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.domain.model.inventory</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 在庫情報エンティティ</span>
<span class="cm"> */</span>
<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Stock</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">locationCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">stockQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">passedQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">defectiveQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">uninspectedQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">createdAt</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">updatedAt</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Stock</span><span class="w"> </span><span class="nf">empty</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">locationCode</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Stock</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">locationCode</span><span class="p">(</span><span class="n">locationCode</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">itemCode</span><span class="p">(</span><span class="n">itemCode</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">stockQuantity</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">passedQuantity</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">defectiveQuantity</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">uninspectedQuantity</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h4 id="_5">在庫操作リクエスト<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h4>
<details>
<summary>DTO: StockChangeRequest・StockStatusChangeRequest</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/domain/model/inventory/StockChangeRequest.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.domain.model.inventory</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 在庫増減リクエスト</span>
<span class="cm"> */</span>
<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">StockChangeRequest</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">locationCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">quantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">StockStatus</span><span class="w"> </span><span class="n">stockStatus</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/domain/model/inventory/StockStatusChangeRequest.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.domain.model.inventory</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 在庫状態変更リクエスト</span>
<span class="cm"> */</span>
<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">StockStatusChangeRequest</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">locationCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">quantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">StockStatus</span><span class="w"> </span><span class="n">fromStatus</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">StockStatus</span><span class="w"> </span><span class="n">toStatus</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>Exception: InsufficientStockException</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/domain/model/inventory/InsufficientStockException.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.domain.model.inventory</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 在庫不足例外</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">InsufficientStockException</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">RuntimeException</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">InsufficientStockException</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">message</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="mybatis-mapper">MyBatis Mapper<a class="headerlink" href="#mybatis-mapper" title="Permanent link">&para;</a></h3>
<details>
<summary>Mapper XML: StockMapper.xml</summary>

<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="cp">&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
<span class="cp">        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span>
<span class="nt">&lt;mapper</span><span class="w"> </span><span class="na">namespace=</span><span class="s">&quot;com.example.production.infrastructure.persistence.mapper.StockMapper&quot;</span><span class="nt">&gt;</span>

<span class="w">    </span><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;StockResultMap&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;com.example.production.domain.model.inventory.Stock&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;ID&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;locationCode&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;場所コード&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;itemCode&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;品目コード&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;stockQuantity&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;在庫数量&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;passedQuantity&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;合格数&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;defectiveQuantity&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;不良数&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;uninspectedQuantity&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;未検査数&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;createdAt&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;作成日時&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;updatedAt&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;更新日時&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/resultMap&gt;</span>

<span class="w">    </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;findByLocationAndItem&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;StockResultMap&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>SELECT<span class="w"> </span>*<span class="w"> </span>FROM<span class="w"> </span>&quot;在庫情報&quot;
<span class="w">        </span>WHERE<span class="w"> </span>&quot;場所コード&quot;<span class="w"> </span>=<span class="w"> </span>#{locationCode}
<span class="w">          </span>AND<span class="w"> </span>&quot;品目コード&quot;<span class="w"> </span>=<span class="w"> </span>#{itemCode}
<span class="w">    </span><span class="nt">&lt;/select&gt;</span>

<span class="w">    </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;findByLocation&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;StockResultMap&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>SELECT<span class="w"> </span>*<span class="w"> </span>FROM<span class="w"> </span>&quot;在庫情報&quot;
<span class="w">        </span>WHERE<span class="w"> </span>&quot;場所コード&quot;<span class="w"> </span>=<span class="w"> </span>#{locationCode}
<span class="w">    </span><span class="nt">&lt;/select&gt;</span>

<span class="w">    </span><span class="nt">&lt;insert</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;insert&quot;</span><span class="w"> </span><span class="na">useGeneratedKeys=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="na">keyProperty=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">keyColumn=</span><span class="s">&quot;ID&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>INSERT<span class="w"> </span>INTO<span class="w"> </span>&quot;在庫情報&quot;<span class="w"> </span>(
<span class="w">            </span>&quot;場所コード&quot;,<span class="w"> </span>&quot;品目コード&quot;,<span class="w"> </span>&quot;在庫数量&quot;,
<span class="w">            </span>&quot;合格数&quot;,<span class="w"> </span>&quot;不良数&quot;,<span class="w"> </span>&quot;未検査数&quot;
<span class="w">        </span>)<span class="w"> </span>VALUES<span class="w"> </span>(
<span class="w">            </span>#{locationCode},<span class="w"> </span>#{itemCode},<span class="w"> </span>#{stockQuantity},
<span class="w">            </span>#{passedQuantity},<span class="w"> </span>#{defectiveQuantity},<span class="w"> </span>#{uninspectedQuantity}
<span class="w">        </span>)
<span class="w">    </span><span class="nt">&lt;/insert&gt;</span>

<span class="w">    </span><span class="nt">&lt;update</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;increaseByStatus&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>UPDATE<span class="w"> </span>&quot;在庫情報&quot;
<span class="w">        </span>SET<span class="w"> </span>&quot;在庫数量&quot;<span class="w"> </span>=<span class="w"> </span>&quot;在庫数量&quot;<span class="w"> </span>+<span class="w"> </span>#{quantity},
<span class="w">            </span><span class="nt">&lt;choose&gt;</span>
<span class="w">                </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;status == &#39;PASSED&#39;&quot;</span><span class="nt">&gt;</span>
<span class="w">                    </span>&quot;合格数&quot;<span class="w"> </span>=<span class="w"> </span>&quot;合格数&quot;<span class="w"> </span>+<span class="w"> </span>#{quantity}
<span class="w">                </span><span class="nt">&lt;/when&gt;</span>
<span class="w">                </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;status == &#39;DEFECTIVE&#39;&quot;</span><span class="nt">&gt;</span>
<span class="w">                    </span>&quot;不良数&quot;<span class="w"> </span>=<span class="w"> </span>&quot;不良数&quot;<span class="w"> </span>+<span class="w"> </span>#{quantity}
<span class="w">                </span><span class="nt">&lt;/when&gt;</span>
<span class="w">                </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;status == &#39;UNINSPECTED&#39;&quot;</span><span class="nt">&gt;</span>
<span class="w">                    </span>&quot;未検査数&quot;<span class="w"> </span>=<span class="w"> </span>&quot;未検査数&quot;<span class="w"> </span>+<span class="w"> </span>#{quantity}
<span class="w">                </span><span class="nt">&lt;/when&gt;</span>
<span class="w">            </span><span class="nt">&lt;/choose&gt;</span>,
<span class="w">            </span>&quot;更新日時&quot;<span class="w"> </span>=<span class="w"> </span>CURRENT_TIMESTAMP
<span class="w">        </span>WHERE<span class="w"> </span>&quot;場所コード&quot;<span class="w"> </span>=<span class="w"> </span>#{locationCode}
<span class="w">          </span>AND<span class="w"> </span>&quot;品目コード&quot;<span class="w"> </span>=<span class="w"> </span>#{itemCode}
<span class="w">    </span><span class="nt">&lt;/update&gt;</span>

<span class="w">    </span><span class="nt">&lt;update</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;decreaseByStatus&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>UPDATE<span class="w"> </span>&quot;在庫情報&quot;
<span class="w">        </span>SET<span class="w"> </span>&quot;在庫数量&quot;<span class="w"> </span>=<span class="w"> </span>&quot;在庫数量&quot;<span class="w"> </span>-<span class="w"> </span>#{quantity},
<span class="w">            </span><span class="nt">&lt;choose&gt;</span>
<span class="w">                </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;status == &#39;PASSED&#39;&quot;</span><span class="nt">&gt;</span>
<span class="w">                    </span>&quot;合格数&quot;<span class="w"> </span>=<span class="w"> </span>&quot;合格数&quot;<span class="w"> </span>-<span class="w"> </span>#{quantity}
<span class="w">                </span><span class="nt">&lt;/when&gt;</span>
<span class="w">                </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;status == &#39;DEFECTIVE&#39;&quot;</span><span class="nt">&gt;</span>
<span class="w">                    </span>&quot;不良数&quot;<span class="w"> </span>=<span class="w"> </span>&quot;不良数&quot;<span class="w"> </span>-<span class="w"> </span>#{quantity}
<span class="w">                </span><span class="nt">&lt;/when&gt;</span>
<span class="w">                </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;status == &#39;UNINSPECTED&#39;&quot;</span><span class="nt">&gt;</span>
<span class="w">                    </span>&quot;未検査数&quot;<span class="w"> </span>=<span class="w"> </span>&quot;未検査数&quot;<span class="w"> </span>-<span class="w"> </span>#{quantity}
<span class="w">                </span><span class="nt">&lt;/when&gt;</span>
<span class="w">            </span><span class="nt">&lt;/choose&gt;</span>,
<span class="w">            </span>&quot;更新日時&quot;<span class="w"> </span>=<span class="w"> </span>CURRENT_TIMESTAMP
<span class="w">        </span>WHERE<span class="w"> </span>&quot;場所コード&quot;<span class="w"> </span>=<span class="w"> </span>#{locationCode}
<span class="w">          </span>AND<span class="w"> </span>&quot;品目コード&quot;<span class="w"> </span>=<span class="w"> </span>#{itemCode}
<span class="w">    </span><span class="nt">&lt;/update&gt;</span>

<span class="w">    </span><span class="nt">&lt;update</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;changeStatus&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>UPDATE<span class="w"> </span>&quot;在庫情報&quot;
<span class="w">        </span>SET
<span class="w">            </span><span class="nt">&lt;choose&gt;</span>
<span class="w">                </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;fromStatus == &#39;PASSED&#39;&quot;</span><span class="nt">&gt;</span>
<span class="w">                    </span>&quot;合格数&quot;<span class="w"> </span>=<span class="w"> </span>&quot;合格数&quot;<span class="w"> </span>-<span class="w"> </span>#{quantity}
<span class="w">                </span><span class="nt">&lt;/when&gt;</span>
<span class="w">                </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;fromStatus == &#39;DEFECTIVE&#39;&quot;</span><span class="nt">&gt;</span>
<span class="w">                    </span>&quot;不良数&quot;<span class="w"> </span>=<span class="w"> </span>&quot;不良数&quot;<span class="w"> </span>-<span class="w"> </span>#{quantity}
<span class="w">                </span><span class="nt">&lt;/when&gt;</span>
<span class="w">                </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;fromStatus == &#39;UNINSPECTED&#39;&quot;</span><span class="nt">&gt;</span>
<span class="w">                    </span>&quot;未検査数&quot;<span class="w"> </span>=<span class="w"> </span>&quot;未検査数&quot;<span class="w"> </span>-<span class="w"> </span>#{quantity}
<span class="w">                </span><span class="nt">&lt;/when&gt;</span>
<span class="w">            </span><span class="nt">&lt;/choose&gt;</span>,
<span class="w">            </span><span class="nt">&lt;choose&gt;</span>
<span class="w">                </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;toStatus == &#39;PASSED&#39;&quot;</span><span class="nt">&gt;</span>
<span class="w">                    </span>&quot;合格数&quot;<span class="w"> </span>=<span class="w"> </span>&quot;合格数&quot;<span class="w"> </span>+<span class="w"> </span>#{quantity}
<span class="w">                </span><span class="nt">&lt;/when&gt;</span>
<span class="w">                </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;toStatus == &#39;DEFECTIVE&#39;&quot;</span><span class="nt">&gt;</span>
<span class="w">                    </span>&quot;不良数&quot;<span class="w"> </span>=<span class="w"> </span>&quot;不良数&quot;<span class="w"> </span>+<span class="w"> </span>#{quantity}
<span class="w">                </span><span class="nt">&lt;/when&gt;</span>
<span class="w">                </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;toStatus == &#39;UNINSPECTED&#39;&quot;</span><span class="nt">&gt;</span>
<span class="w">                    </span>&quot;未検査数&quot;<span class="w"> </span>=<span class="w"> </span>&quot;未検査数&quot;<span class="w"> </span>+<span class="w"> </span>#{quantity}
<span class="w">                </span><span class="nt">&lt;/when&gt;</span>
<span class="w">            </span><span class="nt">&lt;/choose&gt;</span>,
<span class="w">            </span>&quot;更新日時&quot;<span class="w"> </span>=<span class="w"> </span>CURRENT_TIMESTAMP
<span class="w">        </span>WHERE<span class="w"> </span>&quot;場所コード&quot;<span class="w"> </span>=<span class="w"> </span>#{locationCode}
<span class="w">          </span>AND<span class="w"> </span>&quot;品目コード&quot;<span class="w"> </span>=<span class="w"> </span>#{itemCode}
<span class="w">    </span><span class="nt">&lt;/update&gt;</span>

<span class="w">    </span><span class="nt">&lt;update</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;update&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>UPDATE<span class="w"> </span>&quot;在庫情報&quot;
<span class="w">        </span>SET<span class="w"> </span>&quot;在庫数量&quot;<span class="w"> </span>=<span class="w"> </span>#{stockQuantity},
<span class="w">            </span>&quot;合格数&quot;<span class="w"> </span>=<span class="w"> </span>#{passedQuantity},
<span class="w">            </span>&quot;不良数&quot;<span class="w"> </span>=<span class="w"> </span>#{defectiveQuantity},
<span class="w">            </span>&quot;未検査数&quot;<span class="w"> </span>=<span class="w"> </span>#{uninspectedQuantity},
<span class="w">            </span>&quot;更新日時&quot;<span class="w"> </span>=<span class="w"> </span>CURRENT_TIMESTAMP
<span class="w">        </span>WHERE<span class="w"> </span>&quot;場所コード&quot;<span class="w"> </span>=<span class="w"> </span>#{locationCode}
<span class="w">          </span>AND<span class="w"> </span>&quot;品目コード&quot;<span class="w"> </span>=<span class="w"> </span>#{itemCode}
<span class="w">    </span><span class="nt">&lt;/update&gt;</span>

<span class="nt">&lt;/mapper&gt;</span>
</code></pre></div>

</details>

<details>
<summary>Mapper Interface: StockMapper</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/infrastructure/persistence/mapper/StockMapper.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.persistence.mapper</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.inventory.Stock</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.ibatis.annotations.Mapper</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.ibatis.annotations.Param</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="nd">@Mapper</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">StockMapper</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Stock</span><span class="w"> </span><span class="nf">findByLocationAndItem</span><span class="p">(</span>
<span class="w">            </span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;locationCode&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">locationCode</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;itemCode&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">);</span>

<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Stock</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByLocation</span><span class="p">(</span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;locationCode&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">locationCode</span><span class="p">);</span>

<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">insert</span><span class="p">(</span><span class="n">Stock</span><span class="w"> </span><span class="n">stock</span><span class="p">);</span>

<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">increaseByStatus</span><span class="p">(</span>
<span class="w">            </span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;locationCode&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">locationCode</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;itemCode&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;quantity&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">quantity</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;status&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">status</span><span class="p">);</span>

<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">decreaseByStatus</span><span class="p">(</span>
<span class="w">            </span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;locationCode&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">locationCode</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;itemCode&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;quantity&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">quantity</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;status&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">status</span><span class="p">);</span>

<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">changeStatus</span><span class="p">(</span>
<span class="w">            </span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;locationCode&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">locationCode</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;itemCode&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;quantity&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">quantity</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;fromStatus&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">fromStatus</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;toStatus&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">toStatus</span><span class="p">);</span>

<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="n">Stock</span><span class="w"> </span><span class="n">stock</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="_6">在庫サービスの実装<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<details>
<summary>Service: InventoryService</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/application/service/InventoryService.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.application.service</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.inventory.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.persistence.mapper.StockMapper</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Service</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.transaction.annotation.Transactional</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Optional</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 在庫管理サービス</span>
<span class="cm"> */</span>
<span class="nd">@Service</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">InventoryService</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">StockMapper</span><span class="w"> </span><span class="n">stockMapper</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 在庫を取得する</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Stock</span><span class="w"> </span><span class="nf">getStock</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">locationCode</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Optional</span><span class="p">.</span><span class="na">ofNullable</span><span class="p">(</span><span class="n">stockMapper</span><span class="p">.</span><span class="na">findByLocationAndItem</span><span class="p">(</span><span class="n">locationCode</span><span class="p">,</span><span class="w"> </span><span class="n">itemCode</span><span class="p">))</span>
<span class="w">                </span><span class="p">.</span><span class="na">orElse</span><span class="p">(</span><span class="n">Stock</span><span class="p">.</span><span class="na">empty</span><span class="p">(</span><span class="n">locationCode</span><span class="p">,</span><span class="w"> </span><span class="n">itemCode</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 在庫を増加する</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">increaseStock</span><span class="p">(</span><span class="n">StockChangeRequest</span><span class="w"> </span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Stock</span><span class="w"> </span><span class="n">stock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stockMapper</span><span class="p">.</span><span class="na">findByLocationAndItem</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getLocationCode</span><span class="p">(),</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getItemCode</span><span class="p">());</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">stock</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// 新規作成</span>
<span class="w">            </span><span class="n">Stock</span><span class="w"> </span><span class="n">newStock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Stock</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">locationCode</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getLocationCode</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">itemCode</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getItemCode</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">stockQuantity</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getQuantity</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">passedQuantity</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getStockStatus</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">StockStatus</span><span class="p">.</span><span class="na">PASSED</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getQuantity</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">defectiveQuantity</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getStockStatus</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">StockStatus</span><span class="p">.</span><span class="na">DEFECTIVE</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getQuantity</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">uninspectedQuantity</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getStockStatus</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">StockStatus</span><span class="p">.</span><span class="na">UNINSPECTED</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getQuantity</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">            </span><span class="n">stockMapper</span><span class="p">.</span><span class="na">insert</span><span class="p">(</span><span class="n">newStock</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// 更新</span>
<span class="w">            </span><span class="n">stockMapper</span><span class="p">.</span><span class="na">increaseByStatus</span><span class="p">(</span>
<span class="w">                    </span><span class="n">request</span><span class="p">.</span><span class="na">getLocationCode</span><span class="p">(),</span>
<span class="w">                    </span><span class="n">request</span><span class="p">.</span><span class="na">getItemCode</span><span class="p">(),</span>
<span class="w">                    </span><span class="n">request</span><span class="p">.</span><span class="na">getQuantity</span><span class="p">(),</span>
<span class="w">                    </span><span class="n">request</span><span class="p">.</span><span class="na">getStockStatus</span><span class="p">().</span><span class="na">name</span><span class="p">()</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 在庫を減少する</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">decreaseStock</span><span class="p">(</span><span class="n">StockChangeRequest</span><span class="w"> </span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Stock</span><span class="w"> </span><span class="n">stock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getStock</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getLocationCode</span><span class="p">(),</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getItemCode</span><span class="p">());</span>
<span class="w">        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">currentQuantity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getQuantityByStatus</span><span class="p">(</span><span class="n">stock</span><span class="p">,</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getStockStatus</span><span class="p">());</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">currentQuantity</span><span class="p">.</span><span class="na">compareTo</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getQuantity</span><span class="p">())</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">InsufficientStockException</span><span class="p">(</span><span class="s">&quot;在庫が不足しています&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">stockMapper</span><span class="p">.</span><span class="na">decreaseByStatus</span><span class="p">(</span>
<span class="w">                </span><span class="n">request</span><span class="p">.</span><span class="na">getLocationCode</span><span class="p">(),</span>
<span class="w">                </span><span class="n">request</span><span class="p">.</span><span class="na">getItemCode</span><span class="p">(),</span>
<span class="w">                </span><span class="n">request</span><span class="p">.</span><span class="na">getQuantity</span><span class="p">(),</span>
<span class="w">                </span><span class="n">request</span><span class="p">.</span><span class="na">getStockStatus</span><span class="p">().</span><span class="na">name</span><span class="p">()</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 在庫状態を変更する</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">changeStockStatus</span><span class="p">(</span><span class="n">StockStatusChangeRequest</span><span class="w"> </span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Stock</span><span class="w"> </span><span class="n">stock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getStock</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getLocationCode</span><span class="p">(),</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getItemCode</span><span class="p">());</span>
<span class="w">        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">currentQuantity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getQuantityByStatus</span><span class="p">(</span><span class="n">stock</span><span class="p">,</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getFromStatus</span><span class="p">());</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">currentQuantity</span><span class="p">.</span><span class="na">compareTo</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getQuantity</span><span class="p">())</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">InsufficientStockException</span><span class="p">(</span>
<span class="w">                    </span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;%sの在庫が不足しています&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getFromStatus</span><span class="p">().</span><span class="na">getDisplayName</span><span class="p">())</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">stockMapper</span><span class="p">.</span><span class="na">changeStatus</span><span class="p">(</span>
<span class="w">                </span><span class="n">request</span><span class="p">.</span><span class="na">getLocationCode</span><span class="p">(),</span>
<span class="w">                </span><span class="n">request</span><span class="p">.</span><span class="na">getItemCode</span><span class="p">(),</span>
<span class="w">                </span><span class="n">request</span><span class="p">.</span><span class="na">getQuantity</span><span class="p">(),</span>
<span class="w">                </span><span class="n">request</span><span class="p">.</span><span class="na">getFromStatus</span><span class="p">().</span><span class="na">name</span><span class="p">(),</span>
<span class="w">                </span><span class="n">request</span><span class="p">.</span><span class="na">getToStatus</span><span class="p">().</span><span class="na">name</span><span class="p">()</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="nf">getQuantityByStatus</span><span class="p">(</span><span class="n">Stock</span><span class="w"> </span><span class="n">stock</span><span class="p">,</span><span class="w"> </span><span class="n">StockStatus</span><span class="w"> </span><span class="n">status</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">status</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">PASSED</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">stock</span><span class="p">.</span><span class="na">getPassedQuantity</span><span class="p">();</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">DEFECTIVE</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">stock</span><span class="p">.</span><span class="na">getDefectiveQuantity</span><span class="p">();</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">UNINSPECTED</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">stock</span><span class="p">.</span><span class="na">getUninspectedQuantity</span><span class="p">();</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="tdd">TDD: 在庫情報のテスト<a class="headerlink" href="#tdd" title="Permanent link">&para;</a></h3>
<details>
<summary>Test: StockTest</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/test/java/com/example/production/domain/model/inventory/StockTest.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.domain.model.inventory</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.application.service.InventoryService</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.persistence.mapper.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.mybatis.spring.boot.test.autoconfigure.MybatisTest</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.boot.test.autoconfigure.jdbc.AutoConfigureTestDatabase</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.context.annotation.Import</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.test.context.DynamicPropertyRegistry</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.test.context.DynamicPropertySource</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.containers.PostgreSQLContainer</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.junit.jupiter.Container</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.junit.jupiter.Testcontainers</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>

<span class="kn">import static</span><span class="w"> </span><span class="nn">org.assertj.core.api.Assertions.*</span><span class="p">;</span>

<span class="nd">@MybatisTest</span>
<span class="nd">@AutoConfigureTestDatabase</span><span class="p">(</span><span class="n">replace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AutoConfigureTestDatabase</span><span class="p">.</span><span class="na">Replace</span><span class="p">.</span><span class="na">NONE</span><span class="p">)</span>
<span class="nd">@Testcontainers</span>
<span class="nd">@Import</span><span class="p">({</span><span class="n">InventoryService</span><span class="p">.</span><span class="na">class</span><span class="p">})</span>
<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;在庫情報&quot;</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">StockTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Container</span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="n">PostgreSQLContainer</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PostgreSQLContainer</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="s">&quot;postgres:15&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withDatabaseName</span><span class="p">(</span><span class="s">&quot;testdb&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withUsername</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withPassword</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="nd">@DynamicPropertySource</span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configureProperties</span><span class="p">(</span><span class="n">DynamicPropertyRegistry</span><span class="w"> </span><span class="n">registry</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.datasource.url&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">postgres</span><span class="p">::</span><span class="n">getJdbcUrl</span><span class="p">);</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.datasource.username&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">postgres</span><span class="p">::</span><span class="n">getUsername</span><span class="p">);</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.datasource.password&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">postgres</span><span class="p">::</span><span class="n">getPassword</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">InventoryService</span><span class="w"> </span><span class="n">inventoryService</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">StockMapper</span><span class="w"> </span><span class="n">stockMapper</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;在庫の参照&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">StockReferenceTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;場所と品目で在庫を取得できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldGetStockByLocationAndItem</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Act</span>
<span class="w">            </span><span class="n">Stock</span><span class="w"> </span><span class="n">stock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventoryService</span><span class="p">.</span><span class="na">getStock</span><span class="p">(</span><span class="s">&quot;WH001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;PROD001&quot;</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Assert</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">stock</span><span class="p">).</span><span class="na">isNotNull</span><span class="p">();</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">stock</span><span class="p">.</span><span class="na">getStockQuantity</span><span class="p">()).</span><span class="na">isEqualByComparingTo</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;100&quot;</span><span class="p">));</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">stock</span><span class="p">.</span><span class="na">getPassedQuantity</span><span class="p">()).</span><span class="na">isEqualByComparingTo</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;95&quot;</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;存在しない在庫は0として返す&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldReturnZeroForNonExistentStock</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Act</span>
<span class="w">            </span><span class="n">Stock</span><span class="w"> </span><span class="n">stock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventoryService</span><span class="p">.</span><span class="na">getStock</span><span class="p">(</span><span class="s">&quot;WH001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;NONEXISTENT&quot;</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Assert</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">stock</span><span class="p">.</span><span class="na">getStockQuantity</span><span class="p">()).</span><span class="na">isEqualByComparingTo</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;在庫の増減&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">StockChangeTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;在庫を増加できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldIncreaseStock</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Act</span>
<span class="w">            </span><span class="n">inventoryService</span><span class="p">.</span><span class="na">increaseStock</span><span class="p">(</span><span class="n">StockChangeRequest</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">locationCode</span><span class="p">(</span><span class="s">&quot;WH001&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">itemCode</span><span class="p">(</span><span class="s">&quot;PROD001&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">quantity</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;50&quot;</span><span class="p">))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">stockStatus</span><span class="p">(</span><span class="n">StockStatus</span><span class="p">.</span><span class="na">PASSED</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">());</span>

<span class="w">            </span><span class="c1">// Assert</span>
<span class="w">            </span><span class="n">Stock</span><span class="w"> </span><span class="n">stock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventoryService</span><span class="p">.</span><span class="na">getStock</span><span class="p">(</span><span class="s">&quot;WH001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;PROD001&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">stock</span><span class="p">.</span><span class="na">getStockQuantity</span><span class="p">()).</span><span class="na">isEqualByComparingTo</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;150&quot;</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;在庫以上の数量を減少しようとするとエラー&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldThrowExceptionWhenDecreasingMoreThanStock</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Act &amp; Assert</span>
<span class="w">            </span><span class="n">assertThatThrownBy</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">inventoryService</span><span class="p">.</span><span class="na">decreaseStock</span><span class="p">(</span><span class="n">StockChangeRequest</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">locationCode</span><span class="p">(</span><span class="s">&quot;WH001&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">itemCode</span><span class="p">(</span><span class="s">&quot;PROD001&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">quantity</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;200&quot;</span><span class="p">))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">stockStatus</span><span class="p">(</span><span class="n">StockStatus</span><span class="p">.</span><span class="na">PASSED</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">()))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">isInstanceOf</span><span class="p">(</span><span class="n">InsufficientStockException</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">hasMessageContaining</span><span class="p">(</span><span class="s">&quot;在庫が不足しています&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;在庫状態の変更&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">StockStatusChangeTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;未検査から合格への状態変更ができる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldChangeStatusFromUninspectedToPassed</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Arrange</span>
<span class="w">            </span><span class="n">Stock</span><span class="w"> </span><span class="n">initialStock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventoryService</span><span class="p">.</span><span class="na">getStock</span><span class="p">(</span><span class="s">&quot;WH001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;PROD001&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">initialUninspected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">initialStock</span><span class="p">.</span><span class="na">getUninspectedQuantity</span><span class="p">();</span>
<span class="w">            </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">initialPassed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">initialStock</span><span class="p">.</span><span class="na">getPassedQuantity</span><span class="p">();</span>

<span class="w">            </span><span class="c1">// Act</span>
<span class="w">            </span><span class="n">inventoryService</span><span class="p">.</span><span class="na">changeStockStatus</span><span class="p">(</span><span class="n">StockStatusChangeRequest</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">locationCode</span><span class="p">(</span><span class="s">&quot;WH001&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">itemCode</span><span class="p">(</span><span class="s">&quot;PROD001&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">quantity</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;2&quot;</span><span class="p">))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">fromStatus</span><span class="p">(</span><span class="n">StockStatus</span><span class="p">.</span><span class="na">UNINSPECTED</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">toStatus</span><span class="p">(</span><span class="n">StockStatus</span><span class="p">.</span><span class="na">PASSED</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">());</span>

<span class="w">            </span><span class="c1">// Assert</span>
<span class="w">            </span><span class="n">Stock</span><span class="w"> </span><span class="n">stock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventoryService</span><span class="p">.</span><span class="na">getStock</span><span class="p">(</span><span class="s">&quot;WH001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;PROD001&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">stock</span><span class="p">.</span><span class="na">getUninspectedQuantity</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">isEqualByComparingTo</span><span class="p">(</span><span class="n">initialUninspected</span><span class="p">.</span><span class="na">subtract</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;2&quot;</span><span class="p">)));</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">stock</span><span class="p">.</span><span class="na">getPassedQuantity</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">isEqualByComparingTo</span><span class="p">(</span><span class="n">initialPassed</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;2&quot;</span><span class="p">)));</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h2 id="282-db">28.2 払出業務の DB 設計<a class="headerlink" href="#282-db" title="Permanent link">&para;</a></h2>
<h3 id="_7">払出業務の流れ<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<p>払出業務は、製造に必要な材料を倉庫から製造ラインへ供給する業務です。</p>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkFDVElWSVRZIiBoZWlnaHQ9IjU4MnB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NjE1cHg7aGVpZ2h0OjU4MnB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDYxNSA1ODIiIHdpZHRoPSI2MTVweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjUxNzM7JiMyMDk4NjsmIzI2OTg5OyYjMjEyMDk7JiMxMjM5ODsmIzI3OTY5OyYjMTI0Mjg7PC90aXRsZT48ZGVmcy8+PGc+PGcgY2xhc3M9InRpdGxlIiBkYXRhLXNvdXJjZS1saW5lPSIxIj48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTcuOTk5NiIgeD0iMjU3LjQzMTIiIHk9IjMyLjk5NTEiPiYjMjUxNzM7JiMyMDk4NjsmIzI2OTg5OyYjMjEyMDk7JiMxMjM5ODsmIzI3OTY5OyYjMTI0Mjg7PC90ZXh0PjwvZz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjIwLjk1MzEiIHN0eWxlPSJzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI1ODIuODYyMSIgeD0iMTUiIHk9IjUwLjA0MiIvPjxlbGxpcHNlIGN4PSI2MS4wMDAyIiBjeT0iODUuOTk1MSIgZmlsbD0iIzIyMjIyMiIgcng9IjEwIiByeT0iMTAiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMTIxLjAwMDUsMTEyLjg0NjcgTDEyMS4wMDA1LDEyOC45Nzk1IEwxMDEuMDAwNSwxMzIuOTc5NSBMMTIxLjAwMDUsMTM2Ljk3OTUgTDEyMS4wMDA1LDE1My4xMTIzIEEwLDAgMCAwIDAgMTIxLjAwMDUsMTUzLjExMjMgTDIzMy4wMDA2LDE1My4xMTIzIEEwLDAgMCAwIDAgMjMzLjAwMDYsMTUzLjExMjMgTDIzMy4wMDA2LDEyMi44NDY3IEwyMjMuMDAwNiwxMTIuODQ2NyBMMTIxLjAwMDUsMTEyLjg0NjcgQTAsMCAwIDAgMCAxMjEuMDAwNSwxMTIuODQ2NyIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTIyMy4wMDA2LDExMi44NDY3IEwyMjMuMDAwNiwxMjIuODQ2NyBMMjMzLjAwMDYsMTIyLjg0NjcgTDIyMy4wMDA2LDExMi44NDY3IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS4zNjcyIiB4PSIxMjcuMDAwNSIgeT0iMTI5LjkxMzYiPkJPTSYjMjM2Mzc7JiMzODI4MzsmIzEyMzkxOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5MS4wMDAxIiB4PSIxMjcuMDAwNSIgeT0iMTQ1LjA0NjQiPiYjMjQ1MTc7JiMzNTIwMTsmIzM3MDk2OyYjMjY0NDg7JiMxMjQzNDsmIzI5MzA1OyYjMjM0NTA7PC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI4MC4wMDA1IiB4PSIyMSIgeT0iMTE1Ljk5NTEiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2MC4wMDA1IiB4PSIzMSIgeT0iMTM3LjEzMzgiPiYjMTI0NTg7JiMxMjU0MDsmIzEyNDgwOyYjMjQ3NzM7JiMyMjU3Nzs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB4MT0iMTUiIHgyPSIxNSIgeTE9IjUwLjA0MiIgeTI9IjU3MC45MjQ4Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjY4LjAwMDQiIHg9IjMzNC4wMDEiIHk9IjE3My4xMTIzIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDguMDAwNCIgeD0iMzQ0LjAwMSIgeT0iMTk0LjI1MSI+JiMyNTE3MzsmIzIwOTg2OyYjMjUzNTE7JiMzMTAzNDs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE4NS4zNjQ1IiB4PSIyNzUuMzE4OSIgeT0iMjI3LjA4MTEiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNjUuMzY0NSIgeD0iMjg1LjMxODkiIHk9IjI0OC4yMTk3Ij4mIzI1MTczOyYjMjA5ODY7JiMyNTM1MTsmIzMxMDM0OyYjMjYzNjA7KCYjMTI1MDA7JiMxMjQ4MzsmIzEyNDYxOyYjMTI1MzE7JiMxMjQ2NDsmIzEyNTIyOyYjMTI0NzM7JiMxMjQ4ODspPC90ZXh0PjxyZWN0IGZpbGw9IiM1NTU1NTUiIGhlaWdodD0iNiIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojNTU1NTU1O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjI0OC4wMDEyIiB4PSIyNDQuMDAwNiIgeT0iMjgxLjA0OTgiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTA0LjAwMDYiIHg9IjI1Ni4wMDA2IiB5PSIzMDcuMDQ5OCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg0LjAwMDYiIHg9IjI2Ni4wMDA2IiB5PSIzMjguMTg4NSI+JiMzNzA5NjsmIzIxNjk3OyYjMTI1MDA7JiMxMjQ4MzsmIzEyNDYxOyYjMTI1MzE7JiMxMjQ2NDs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjkyLjAwMDUiIHg9IjM4OC4wMDEyIiB5PSIzMDcuMDQ5OCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjcyLjAwMDUiIHg9IjM5OC4wMDEyIiB5PSIzMjguMTg4NSI+JiMyNTE3MzsmIzIwOTg2OyYjMjM0NTU7JiMzMjMxODsmIzM1MzUyOyYjMzc2ODI7PC90ZXh0PjxyZWN0IGZpbGw9IiM1NTU1NTUiIGhlaWdodD0iNiIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojNTU1NTU1O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjI0OC4wMDEyIiB4PSIyNDQuMDAwNiIgeT0iMzYxLjAxODYiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNDQuMDAwMiIgeD0iMzQ2LjAwMTEiIHk9IjM4Ny4wMTg2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjQuMDAwMiIgeD0iMzU2LjAwMTEiIHk9IjQwOC4xNTcyIj4mIzI1MTczOyYjMjA5ODY7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjIzOC4wMDA2IiB4Mj0iMjM4LjAwMDYiIHkxPSI1MC4wNDIiIHkyPSI1NzAuOTI0OCIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI2OC4wMDA0IiB4PSI1MTMuMDAxMyIgeT0iNDQwLjk4NzMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0OC4wMDA0IiB4PSI1MjMuMDAxMyIgeT0iNDYyLjEyNiI+JiMzNzA5NjsmIzIxNjk3OyYjMjE0NjM7JiMzODkzNjs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjY4LjAwMDQiIHg9IjUxMy4wMDEzIiB5PSI0OTQuOTU2MSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ4LjAwMDQiIHg9IjUyMy4wMDEzIiB5PSI1MTYuMDk0NyI+JiMzNTA2OTsmIzM2ODk2OyYjMjAzMTY7JiMyNjk4OTs8L3RleHQ+PGVsbGlwc2UgY3g9IjU0Ny4wMDE1IiBjeT0iNTU5LjkyNDgiIGZpbGw9Im5vbmUiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMyMjIyMjI7c3Ryb2tlLXdpZHRoOjE7Ii8+PGVsbGlwc2UgY3g9IjU0Ny4wMDE1IiBjeT0iNTU5LjkyNDgiIGZpbGw9IiMyMjIyMjIiIHJ4PSI2IiByeT0iNiIgc3R5bGU9InN0cm9rZTojMjIyMjIyO3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjQ5Ni4wMDE4IiB4Mj0iNDk2LjAwMTgiIHkxPSI1MC4wNDIiIHkyPSI1NzAuOTI0OCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjU5Ni4wMDEyIiB4Mj0iNTk2LjAwMTIiIHkxPSI1MC4wNDIiIHkyPSI1NzAuOTI0OCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI2MS4wMDAyIiB4Mj0iNjEuMDAwMiIgeTE9Ijk1Ljk5NTEiIHkyPSIxMTUuOTk1MSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNTcuMDAwMiwxMDUuOTk1MSw2MS4wMDAyLDExNS45OTUxLDY1LjAwMDIsMTA1Ljk5NTEsNjEuMDAwMiwxMDkuOTk1MSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzNjguMDAxMiIgeDI9IjM2OC4wMDEyIiB5MT0iMjA3LjA4MTEiIHkyPSIyMjcuMDgxMSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzY0LjAwMTIsMjE3LjA4MTEsMzY4LjAwMTIsMjI3LjA4MTEsMzcyLjAwMTIsMjE3LjA4MTEsMzY4LjAwMTIsMjIxLjA4MTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzA4LjAwMDkiIHgyPSIzMDguMDAwOSIgeTE9IjI4Ny4wNDk4IiB5Mj0iMzA3LjA0OTgiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjMwNC4wMDA5LDI5Ny4wNDk4LDMwOC4wMDA5LDMwNy4wNDk4LDMxMi4wMDA5LDI5Ny4wNDk4LDMwOC4wMDA5LDMwMS4wNDk4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjQzNC4wMDE1IiB4Mj0iNDM0LjAwMTUiIHkxPSIyODcuMDQ5OCIgeTI9IjMwNy4wNDk4Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI0MzAuMDAxNSwyOTcuMDQ5OCw0MzQuMDAxNSwzMDcuMDQ5OCw0MzguMDAxNSwyOTcuMDQ5OCw0MzQuMDAxNSwzMDEuMDQ5OCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMDguMDAwOSIgeDI9IjMwOC4wMDA5IiB5MT0iMzQxLjAxODYiIHkyPSIzNjEuMDE4NiIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzA0LjAwMDksMzUxLjAxODYsMzA4LjAwMDksMzYxLjAxODYsMzEyLjAwMDksMzUxLjAxODYsMzA4LjAwMDksMzU1LjAxODYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDM0LjAwMTUiIHgyPSI0MzQuMDAxNSIgeTE9IjM0MS4wMTg2IiB5Mj0iMzYxLjAxODYiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjQzMC4wMDE1LDM1MS4wMTg2LDQzNC4wMDE1LDM2MS4wMTg2LDQzOC4wMDE1LDM1MS4wMTg2LDQzNC4wMDE1LDM1NS4wMTg2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjM2OC4wMDEyIiB4Mj0iMzY4LjAwMTIiIHkxPSIyNjEuMDQ5OCIgeTI9IjI4MS4wNDk4Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIzNjQuMDAxMiwyNzEuMDQ5OCwzNjguMDAxMiwyODEuMDQ5OCwzNzIuMDAxMiwyNzEuMDQ5OCwzNjguMDAxMiwyNzUuMDQ5OCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzNjguMDAxMiIgeDI9IjM2OC4wMDEyIiB5MT0iMzY3LjAxODYiIHkyPSIzODcuMDE4NiIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzY0LjAwMTIsMzc3LjAxODYsMzY4LjAwMTIsMzg3LjAxODYsMzcyLjAwMTIsMzc3LjAxODYsMzY4LjAwMTIsMzgxLjAxODYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNTQ3LjAwMTUiIHgyPSI1NDcuMDAxNSIgeTE9IjQ3NC45NTYxIiB5Mj0iNDk0Ljk1NjEiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjU0My4wMDE1LDQ4NC45NTYxLDU0Ny4wMDE1LDQ5NC45NTYxLDU1MS4wMDE1LDQ4NC45NTYxLDU0Ny4wMDE1LDQ4OC45NTYxIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjU0Ny4wMDE1IiB4Mj0iNTQ3LjAwMTUiIHkxPSI1MjguOTI0OCIgeTI9IjU0OC45MjQ4Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI1NDMuMDAxNSw1MzguOTI0OCw1NDcuMDAxNSw1NDguOTI0OCw1NTEuMDAxNSw1MzguOTI0OCw1NDcuMDAxNSw1NDIuOTI0OCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI2MS4wMDAyIiB4Mj0iNjEuMDAwMiIgeTE9IjE0OS45NjM5IiB5Mj0iMTU4LjExMjMiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNjEuMDAwMiIgeDI9IjM2OC4wMDEyIiB5MT0iMTU4LjExMjMiIHkyPSIxNTguMTEyMyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzNjguMDAxMiIgeDI9IjM2OC4wMDEyIiB5MT0iMTU4LjExMjMiIHkyPSIxNzMuMTEyMyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzY0LjAwMTIsMTYzLjExMjMsMzY4LjAwMTIsMTczLjExMjMsMzcyLjAwMTIsMTYzLjExMjMsMzY4LjAwMTIsMTY3LjExMjMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzY4LjAwMTIiIHgyPSIzNjguMDAxMiIgeTE9IjQyMC45ODczIiB5Mj0iNDI1Ljk4NzMiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzY4LjAwMTIiIHgyPSI1NDcuMDAxNSIgeTE9IjQyNS45ODczIiB5Mj0iNDI1Ljk4NzMiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNTQ3LjAwMTUiIHgyPSI1NDcuMDAxNSIgeTE9IjQyNS45ODczIiB5Mj0iNDQwLjk4NzMiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjU0My4wMDE1LDQzMC45ODczLDU0Ny4wMDE1LDQ0MC45ODczLDU1MS4wMDE1LDQzMC45ODczLDU0Ny4wMDE1LDQzNC45ODczIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTgiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODkuOTk5NSIgeD0iODEuNTAwNSIgeT0iNjYuNzUiPiYjMjk5ODM7JiMyOTk4NzsmIzMxNjQ5OyYjMjk3MDI7JiMzNzA5Njs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTgiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzEuOTk5NiIgeD0iMzMxLjAwMTQiIHk9IjY2Ljc1Ij4mIzM2MDM5OyYjMjY0NDg7JiMyMDQ4OTsmIzI0MjM1OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4OS45OTk1IiB4PSI1MDEuMDAxOCIgeT0iNjYuNzUiPiYjMzUwNjk7JiMzNjg5NjsmIzEyNTIxOyYjMTI0NTI7JiMxMjUzMTs8L3RleHQ+PD9wbGFudHVtbC1zcmMgTlAzREppOTA1OE50eW5IVHdZa3FFX1Y2NXQzSm44Z0RmWkxiYmJzcUN1N1FxNElZSFY0bHI4MkE2MWdIYzAwSFZQWmhkTWRWbWI3ZkdmVnRkZEUtVXRBZkpHeWlKU0dUWjFSWVJlb2oybVhweUhlMkltWm5QVGdKUUxfY2p4QlRCRmRHOXRMZ1VmSmVtNFIwdHUwN1daU21jblo0U1FjYlVOUGpaLWhRbmpPY0paaGJNR2wyWHNxN0ZuaDVWUVoydWdPRHg0SjZTeW1sNVJnT0hjZzNHT29COXZfZWdtUDk5MFNCdS15ZWhjUGhtNUZXN0RXTy0xSk9DXzBIaTNkbWV0TTNhNXROc29Vd2tlMmR1Si1WeUlEZ1Bpc3FkR2dBVUtfRXRlalhqcW5VTGhoYng5MUFEaHd4elBUYmEwNV8xM1BHOEItWXVfNXZjTkxMbExfM3ZfOVFsS201d2pHel8wODA/PjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_8">払出指示・払出データのスキーマ設計<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjQxOXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MzgxcHg7aGVpZ2h0OjQxOXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDM4MSA0MTkiIHdpZHRoPSIzODFweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjUxNzM7JiMyMDk4NjsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsmIzEyMzk4OyYjMjcwODM7JiMzNjg5Njs8L3RpdGxlPjxkZWZzLz48Zz48ZyBjbGFzcz0idGl0bGUiIGRhdGEtc291cmNlLWxpbmU9IjEiPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTEuOTk5NSIgeD0iMTI3LjY2NzYiIHk9IjIyLjk5NTEiPiYjMjUxNzM7JiMyMDk4NjsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsmIzEyMzk4OyYjMjcwODM7JiMzNjg5Njs8L3RleHQ+PC9nPjwhLS1jbGFzcyBpc3N1ZV9pbnN0cnVjdGlvbi0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Imlzc3VlX2luc3RydWN0aW9uIiBkYXRhLXNvdXJjZS1saW5lPSIzIiBpZD0iZW50MDAwMiI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMjkuNDg0NCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTgwLjMzNDYiIHg9IjciIHk9IjYwLjU5NjkiLz48ZWxsaXBzZSBjeD0iNDQuNjUwOCIgY3k9Ijc2LjU5NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTQ4Ljc2MDEsODIuNTk2OSBMNDEuMDQxNCw4Mi41OTY5IEw0MS4wNDE0LDcwLjIwNjMgTDQ4Ljc2MDEsNzAuMjA2MyBMNDguNzYwMSw3Mi4zNjI1IEw0My40OTQ1LDcyLjM2MjUgTDQzLjQ5NDUsNzUuMDM0NCBMNDguMjYwMSw3NS4wMzQ0IEw0OC4yNjAxLDc3LjE5MDYgTDQzLjQ5NDUsNzcuMTkwNiBMNDMuNDk0NSw4MC40NDA2IEw0OC43NjAxLDgwLjQ0MDYgTDQ4Ljc2MDEsODIuNTk2OSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk3Ljk5OTYiIHg9IjYzLjY4NDMiIHk9IjgxLjQ0MzYiPiYjMjUxNzM7JiMyMDk4NjsmIzI1MzUxOyYjMzEwMzQ7JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjgiIHgyPSIxODYuMzM0NiIgeTE9IjkyLjU5NjkiIHkyPSI5Mi41OTY5Ii8+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJJRV9NQU5EQVRPUlkiPjxlbGxpcHNlIGN4PSIxOCIgY3k9IjEwNi4yNDUzIiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDcuOTA2MyIgeD0iMjciIHk9IjEwOS41OTIiPklEIFtQS108L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjgiIHgyPSIxODYuMzM0NiIgeTE9IjExNi44OTM4IiB5Mj0iMTE2Ljg5MzgiLz48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IklFX01BTkRBVE9SWSI+PGVsbGlwc2UgY3g9IjE4IiBjeT0iMTMwLjU0MjIiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTQuMzM0NiIgeD0iMjciIHk9IjEzMy44ODg5Ij4mIzI1MTczOyYjMjA5ODY7JiMyNTM1MTsmIzMxMDM0OyYjMzAwNTg7JiMyMTQ5NTsgW1VOSVFVRV08L3RleHQ+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJJRV9NQU5EQVRPUlkiPjxlbGxpcHNlIGN4PSIxOCIgY3k9IjE0Ni44MzkxIiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAyLjYwNzEiIHg9IjI3IiB5PSIxNTAuMTg1NyI+JiMxMjQ1ODsmIzEyNTQwOyYjMTI0ODA7JiMzMDA1ODsmIzIxNDk1OyBbRktdPC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iSUVfTUFOREFUT1JZIj48ZWxsaXBzZSBjeD0iMTgiIGN5PSIxNjMuMTM1OSIgZmlsbD0iIzAwMDAwMCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjI3IiB5PSIxNjYuNDgyNiI+JiMyNTE3MzsmIzIwOTg2OyYjMjUzNTE7JiMzMTAzNDsmIzI2MDg1OzwvdGV4dD48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IklFX01BTkRBVE9SWSI+PGVsbGlwc2UgY3g9IjE4IiBjeT0iMTc5LjQzMjgiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDIuNjA3MSIgeD0iMjciIHk9IjE4Mi43Nzk1Ij4mIzIyNTgwOyYjMjUxNTI7JiMxMjQ2NzsmIzEyNTQwOyYjMTI0ODk7IFtGS108L3RleHQ+PC9nPjwhLS1jbGFzcyBpc3N1ZV9pbnN0cnVjdGlvbl9kZXRhaWwtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJpc3N1ZV9pbnN0cnVjdGlvbl9kZXRhaWwiIGRhdGEtc291cmNlLWxpbmU9IjEyIiBpZD0iZW50MDAwMyI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxNDUuNzgxMyIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTU3Ljk5OTUiIHg9IjE4LjE3IiB5PSIyNjYuMzc2OSIvPjxlbGxpcHNlIGN4PSIzMy4xNyIgY3k9IjI4Mi4zNzY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0zNy4yNzk0LDI4OC4zNzY5IEwyOS41NjA2LDI4OC4zNzY5IEwyOS41NjA2LDI3NS45ODYzIEwzNy4yNzk0LDI3NS45ODYzIEwzNy4yNzk0LDI3OC4xNDI1IEwzMi4wMTM4LDI3OC4xNDI1IEwzMi4wMTM4LDI4MC44MTQ0IEwzNi43Nzk0LDI4MC44MTQ0IEwzNi43Nzk0LDI4Mi45NzA2IEwzMi4wMTM4LDI4Mi45NzA2IEwzMi4wMTM4LDI4Ni4yMjA2IEwzNy4yNzk0LDI4Ni4yMjA2IEwzNy4yNzk0LDI4OC4zNzY5IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTI1Ljk5OTUiIHg9IjQ3LjE3IiB5PSIyODcuMjIzNiI+JiMyNTE3MzsmIzIwOTg2OyYjMjUzNTE7JiMzMTAzNDsmIzI2MTI2OyYjMzIwNDg7JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjE5LjE3IiB4Mj0iMTc1LjE2OTUiIHkxPSIyOTguMzc2OSIgeTI9IjI5OC4zNzY5Ii8+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJJRV9NQU5EQVRPUlkiPjxlbGxpcHNlIGN4PSIyOS4xNyIgY3k9IjMxMi4wMjUzIiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDcuOTA2MyIgeD0iMzguMTciIHk9IjMxNS4zNzIiPklEIFtQS108L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE5LjE3IiB4Mj0iMTc1LjE2OTUiIHkxPSIzMjIuNjczOCIgeTI9IjMyMi42NzM4Ii8+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJJRV9NQU5EQVRPUlkiPjxlbGxpcHNlIGN4PSIyOS4xNyIgY3k9IjMzNi4zMjIyIiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTE2LjYwNzEiIHg9IjM4LjE3IiB5PSIzMzkuNjY4OSI+JiMyNTE3MzsmIzIwOTg2OyYjMjUzNTE7JiMzMTAzNDsmIzMwMDU4OyYjMjE0OTU7IFtGS108L3RleHQ+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJJRV9NQU5EQVRPUlkiPjxlbGxpcHNlIGN4PSIyOS4xNyIgY3k9IjM1Mi42MTkxIiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iMzguMTciIHk9IjM1NS45NjU3Ij4mIzI1MTczOyYjMjA5ODY7JiMzNDg5MjsmIzMwMDU4OyYjMjE0OTU7PC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iSUVfTUFOREFUT1JZIj48ZWxsaXBzZSBjeD0iMjkuMTciIGN5PSIzNjguOTE1OSIgZmlsbD0iIzAwMDAwMCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwMi42MDcxIiB4PSIzOC4xNyIgeT0iMzcyLjI2MjYiPiYjMjE2OTc7JiMzMDQ0NjsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsgW0ZLXTwvdGV4dD48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IklFX01BTkRBVE9SWSI+PGVsbGlwc2UgY3g9IjI5LjE3IiBjeT0iMzg1LjIxMjgiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNy45OTk5IiB4PSIzOC4xNyIgeT0iMzg4LjU1OTUiPiYjMjQwMzc7JiMzODkxODs8L3RleHQ+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJJRV9NQU5EQVRPUlkiPjxlbGxpcHNlIGN4PSIyOS4xNyIgY3k9IjQwMS41MDk3IiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iMzguMTciIHk9IjQwNC44NTY0Ij4mIzI1MTczOyYjMjA5ODY7JiMyNTk2ODsmIzM3MzI3OzwvdGV4dD48L2c+PCEtLWNsYXNzIGlzc3VlLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iaXNzdWUiIGRhdGEtc291cmNlLWxpbmU9IjIyIiBpZD0iZW50MDAwNCI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxNjIuMDc4MSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTUyLjMzNDciIHg9IjIyMiIgeT0iNDQuMjk2OSIvPjxlbGxpcHNlIGN4PSIyNTkuNjUwOCIgY3k9IjYwLjI5NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTI2My43NjAxLDY2LjI5NjkgTDI1Ni4wNDE0LDY2LjI5NjkgTDI1Ni4wNDE0LDUzLjkwNjMgTDI2My43NjAxLDUzLjkwNjMgTDI2My43NjAxLDU2LjA2MjUgTDI1OC40OTQ1LDU2LjA2MjUgTDI1OC40OTQ1LDU4LjczNDQgTDI2My4yNjAxLDU4LjczNDQgTDI2My4yNjAxLDYwLjg5MDYgTDI1OC40OTQ1LDYwLjg5MDYgTDI1OC40OTQ1LDY0LjE0MDYgTDI2My43NjAxLDY0LjE0MDYgTDI2My43NjAxLDY2LjI5NjkgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSIyNzguNjg0MyIgeT0iNjUuMTQzNiI+JiMyNTE3MzsmIzIwOTg2OyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyMjMiIHgyPSIzNzMuMzM0NyIgeTE9Ijc2LjI5NjkiIHkyPSI3Ni4yOTY5Ii8+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJJRV9NQU5EQVRPUlkiPjxlbGxpcHNlIGN4PSIyMzMiIGN5PSI4OS45NDUzIiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDcuOTA2MyIgeD0iMjQyIiB5PSI5My4yOTIiPklEIFtQS108L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjIyMyIgeDI9IjM3My4zMzQ3IiB5MT0iMTAwLjU5MzgiIHkyPSIxMDAuNTkzOCIvPjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iSUVfTUFOREFUT1JZIj48ZWxsaXBzZSBjeD0iMjMzIiBjeT0iMTE0LjI0MjIiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjYuMzM0NyIgeD0iMjQyIiB5PSIxMTcuNTg4OSI+JiMyNTE3MzsmIzIwOTg2OyYjMzAwNTg7JiMyMTQ5NTsgW1VOSVFVRV08L3RleHQ+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJJRV9NQU5EQVRPUlkiPjxlbGxpcHNlIGN4PSIyMzMiIGN5PSIxMzAuNTM5MSIgZmlsbD0iIzAwMDAwMCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNi42MDcxIiB4PSIyNDIiIHk9IjEzMy44ODU3Ij4mIzIwMzE2OyYjMjY5ODk7JiMyNTM1MTsmIzMxMDM0OyYjMzAwNTg7JiMyMTQ5NTsgW0ZLXTwvdGV4dD48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IklFX01BTkRBVE9SWSI+PGVsbGlwc2UgY3g9IjIzMyIgY3k9IjE0Ni44MzU5IiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjcuOTk5OSIgeD0iMjQyIiB5PSIxNTAuMTgyNiI+JiMyNDAzNzsmIzM4OTE4OzwvdGV4dD48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IklFX01BTkRBVE9SWSI+PGVsbGlwc2UgY3g9IjIzMyIgY3k9IjE2My4xMzI4IiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAyLjYwNzEiIHg9IjI0MiIgeT0iMTY2LjQ3OTUiPiYjMjI1ODA7JiMyNTE1MjsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsgW0ZLXTwvdGV4dD48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IklFX01BTkRBVE9SWSI+PGVsbGlwc2UgY3g9IjIzMyIgY3k9IjE3OS40Mjk3IiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDEuOTk5OCIgeD0iMjQyIiB5PSIxODIuNzc2NCI+JiMyNTE3MzsmIzIwOTg2OyYjMjYwODU7PC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iSUVfTUFOREFUT1JZIj48ZWxsaXBzZSBjeD0iMjMzIiBjeT0iMTk1LjcyNjYiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTEuOTk5NSIgeD0iMjQyIiB5PSIxOTkuMDczMiI+JiMyNTE3MzsmIzIwOTg2OyYjMjUyODU7JiMyNDQwMzsmIzMyNzczOyYjMTI0Njc7JiMxMjU0MDsmIzEyNDg5OzwvdGV4dD48L2c+PCEtLWNsYXNzIGlzc3VlX2RldGFpbC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Imlzc3VlX2RldGFpbCIgZGF0YS1zb3VyY2UtbGluZT0iMzMiIGlkPSJlbnQwMDA1Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjEyOS40ODQ0IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMjkuOTk5NiIgeD0iMjMzLjE3IiB5PSIyNzQuNTI2OSIvPjxlbGxpcHNlIGN4PSIyNDguMTciIGN5PSIyOTAuNTI2OSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMjUyLjI3OTQsMjk2LjUyNjkgTDI0NC41NjA2LDI5Ni41MjY5IEwyNDQuNTYwNiwyODQuMTM2MyBMMjUyLjI3OTQsMjg0LjEzNjMgTDI1Mi4yNzk0LDI4Ni4yOTI1IEwyNDcuMDEzOCwyODYuMjkyNSBMMjQ3LjAxMzgsMjg4Ljk2NDQgTDI1MS43Nzk0LDI4OC45NjQ0IEwyNTEuNzc5NCwyOTEuMTIwNiBMMjQ3LjAxMzgsMjkxLjEyMDYgTDI0Ny4wMTM4LDI5NC4zNzA2IEwyNTIuMjc5NCwyOTQuMzcwNiBMMjUyLjI3OTQsMjk2LjUyNjkgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ny45OTk2IiB4PSIyNjIuMTciIHk9IjI5NS4zNzM2Ij4mIzI1MTczOyYjMjA5ODY7JiMyNjEyNjsmIzMyMDQ4OyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyMzQuMTciIHgyPSIzNjIuMTY5NiIgeTE9IjMwNi41MjY5IiB5Mj0iMzA2LjUyNjkiLz48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IklFX01BTkRBVE9SWSI+PGVsbGlwc2UgY3g9IjI0NC4xNyIgY3k9IjMyMC4xNzUzIiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDcuOTA2MyIgeD0iMjUzLjE3IiB5PSIzMjMuNTIyIj5JRCBbUEtdPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyMzQuMTciIHgyPSIzNjIuMTY5NiIgeTE9IjMzMC44MjM4IiB5Mj0iMzMwLjgyMzgiLz48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IklFX01BTkRBVE9SWSI+PGVsbGlwc2UgY3g9IjI0NC4xNyIgY3k9IjM0NC40NzIyIiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODguNjA3MiIgeD0iMjUzLjE3IiB5PSIzNDcuODE4OSI+JiMyNTE3MzsmIzIwOTg2OyYjMzAwNTg7JiMyMTQ5NTsgW0ZLXTwvdGV4dD48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IklFX01BTkRBVE9SWSI+PGVsbGlwc2UgY3g9IjI0NC4xNyIgY3k9IjM2MC43NjkxIiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iMjUzLjE3IiB5PSIzNjQuMTE1NyI+JiMyNTE3MzsmIzIwOTg2OyYjMzQ4OTI7JiMzMDA1ODsmIzIxNDk1OzwvdGV4dD48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IklFX01BTkRBVE9SWSI+PGVsbGlwc2UgY3g9IjI0NC4xNyIgY3k9IjM3Ny4wNjU5IiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAyLjYwNzEiIHg9IjI1My4xNyIgeT0iMzgwLjQxMjYiPiYjMjE2OTc7JiMzMDQ0NjsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsgW0ZLXTwvdGV4dD48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IklFX01BTkRBVE9SWSI+PGVsbGlwc2UgY3g9IjI0NC4xNyIgY3k9IjM5My4zNjI4IiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDEuOTk5OCIgeD0iMjUzLjE3IiB5PSIzOTYuNzA5NSI+JiMyNTE3MzsmIzIwOTg2OyYjMjU5Njg7PC90ZXh0PjwvZz48IS0tbGluayBpc3N1ZV9pbnN0cnVjdGlvbiB0byBpc3N1ZV9pbnN0cnVjdGlvbl9kZXRhaWwtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwMiIgZGF0YS1lbnRpdHktMj0iZW50MDAwMyIgZGF0YS1saW5rLXR5cGU9ImNyb3dmb290IiBkYXRhLXNvdXJjZS1saW5lPSI0MiIgaWQ9ImxuazYiPjxwYXRoIGNvZGVMaW5lPSI0MiIgZD0iTTk3LjE3LDE5OC40OTY5IEM5Ny4xNywyMjIuMzc2OSA5Ny4xNywyMzMuNjI2OSA5Ny4xNywyNTguMTY2OSIgZmlsbD0ibm9uZSIgaWQ9Imlzc3VlX2luc3RydWN0aW9uLWlzc3VlX2luc3RydWN0aW9uX2RldGFpbCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI5My4xNyIgeDI9IjEwMS4xNyIgeTE9IjE5NC40OTY5IiB5Mj0iMTk0LjQ5NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iOTMuMTciIHgyPSIxMDEuMTciIHkxPSIxOTcuNDk2OSIgeTI9IjE5Ny40OTY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9Ijk3LjE3IiB4Mj0iOTcuMTciIHkxPSIxOTguNDk2OSIgeTI9IjE5MC40OTY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9Ijk3LjE3IiB4Mj0iMTAzLjE3IiB5MT0iMjU4LjE2NjkiIHkyPSIyNjYuMTY2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI5Ny4xNyIgeDI9IjkxLjE3IiB5MT0iMjU4LjE2NjkiIHkyPSIyNjYuMTY2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI5Ny4xNyIgeDI9Ijk3LjE3IiB5MT0iMjU4LjE2NjkiIHkyPSIyNjYuMTY2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMDEuMTciIHgyPSI5My4xNyIgeTE9IjI1Ni4xNjY5IiB5Mj0iMjU2LjE2NjkiLz48L2c+PCEtLWxpbmsgaXNzdWUgdG8gaXNzdWVfZGV0YWlsLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDQiIGRhdGEtZW50aXR5LTI9ImVudDAwMDUiIGRhdGEtbGluay10eXBlPSJjcm93Zm9vdCIgZGF0YS1zb3VyY2UtbGluZT0iNDMiIGlkPSJsbms3Ij48cGF0aCBjb2RlTGluZT0iNDMiIGQ9Ik0yOTguMTcsMjE0Ljc1NjkgQzI5OC4xNywyMzcuMDA2OSAyOTguMTcsMjQ0Ljg1NjkgMjk4LjE3LDI2Ni4wNDY5IiBmaWxsPSJub25lIiBpZD0iaXNzdWUtaXNzdWVfZGV0YWlsIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjI5NC4xNyIgeDI9IjMwMi4xNyIgeTE9IjIxMC43NTY5IiB5Mj0iMjEwLjc1NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjk0LjE3IiB4Mj0iMzAyLjE3IiB5MT0iMjEzLjc1NjkiIHkyPSIyMTMuNzU2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyOTguMTciIHgyPSIyOTguMTciIHkxPSIyMTQuNzU2OSIgeTI9IjIwNi43NTY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjI5OC4xNyIgeDI9IjMwNC4xNyIgeTE9IjI2Ni4wNDY5IiB5Mj0iMjc0LjA0NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjk4LjE3IiB4Mj0iMjkyLjE3IiB5MT0iMjY2LjA0NjkiIHkyPSIyNzQuMDQ2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyOTguMTciIHgyPSIyOTguMTciIHkxPSIyNjYuMDQ2OSIgeTI9IjI3NC4wNDY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjMwMi4xNyIgeDI9IjI5NC4xNyIgeTE9IjI2NC4wNDY5IiB5Mj0iMjY0LjA0NjkiLz48L2c+PD9wbGFudHVtbC1zcmMgQXlhaW9LYkxVRE92ek1keGhpVkR4Ty1SenBua3NsLXVTVHNwdlRxbDZuUG1TUU5jYk1JTUwyZWVHTEd5d3NiX2xXSVhKYWFYaUxXWGl4WXVEM0stQ3ctdWZBV3FrSUdwRnEtWGNhakJtVEQ1OEpoMEV2UEJMblY4R1RSeVZFZ2dmX3RSNVE5M19KbTNHcnJaV1JBRmNyUTFaNmprVzRjdlVTVVlRTmVzVkliR3ZFYzJCU3l3Nm51dFJHT2h4dUdlaENOa25jU3AtZnZsc0szMGZWNGZnSU05Y0pkNEVIWlBMSXlNemEyNEdRd1F0Rlh5elplcUxtNjVqb3p6a1EwRE9UUkszSV9SLXA1VFl5TTVrOW8zNk45RnppdnZqZEdqRGNWMlJTU1FQZDE3V09DTG9rdmtWUmZ0eWVrNkxoWFFCNDZCQ3IzbjFvSVBHR1dGRVAxQkM5RFBKT3NrUmFxcnBiWTV3NDFMMVA0MTAwMDA/PjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<details>
<summary>DDL: 払出指示データ・払出データ</summary>

<div class="highlight"><pre><span></span><code><span class="c1">-- V18__create_issue_tables.sql</span>

<span class="c1">-- 払出指示データ</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;払出指示データ&quot;</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="ss">&quot;ID&quot;</span><span class="w"> </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;払出指示番号&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;オーダ番号&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;払出指示日&quot;</span><span class="w"> </span><span class="nb">DATE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;場所コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;備考&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">500</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;作成日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;更新日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;FK_払出指示_オーダ&quot;</span><span class="w"> </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;オーダ番号&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;オーダ情報&quot;</span><span class="p">(</span><span class="ss">&quot;オーダNO&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;FK_払出指示_場所&quot;</span><span class="w"> </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;場所コード&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;場所マスタ&quot;</span><span class="p">(</span><span class="ss">&quot;場所コード&quot;</span><span class="p">)</span>
<span class="p">);</span>

<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;払出指示データ&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;払出指示データ&#39;</span><span class="p">;</span>

<span class="c1">-- 払出指示明細データ</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;払出指示明細データ&quot;</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="ss">&quot;ID&quot;</span><span class="w"> </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;払出指示番号&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;払出行番号&quot;</span><span class="w"> </span><span class="nb">INT</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;品目コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;工順&quot;</span><span class="w"> </span><span class="nb">INT</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;払出数量&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;作成日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;更新日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;UK_払出指示明細&quot;</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;払出指示番号&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;払出行番号&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;FK_払出指示明細_払出指示&quot;</span><span class="w"> </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;払出指示番号&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;払出指示データ&quot;</span><span class="p">(</span><span class="ss">&quot;払出指示番号&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;FK_払出指示明細_品目&quot;</span><span class="w"> </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;品目コード&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;品目マスタ&quot;</span><span class="p">(</span><span class="ss">&quot;品目コード&quot;</span><span class="p">)</span>
<span class="p">);</span>

<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;払出指示明細データ&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;払出指示明細データ&#39;</span><span class="p">;</span>

<span class="c1">-- 払出データ</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;払出データ&quot;</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="ss">&quot;ID&quot;</span><span class="w"> </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;払出番号&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;作業指示番号&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;工順&quot;</span><span class="w"> </span><span class="nb">INT</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;場所コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;払出日&quot;</span><span class="w"> </span><span class="nb">DATE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;払出担当者コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;作成日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;更新日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;FK_払出_場所&quot;</span><span class="w"> </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;場所コード&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;場所マスタ&quot;</span><span class="p">(</span><span class="ss">&quot;場所コード&quot;</span><span class="p">)</span>
<span class="p">);</span>

<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;払出データ&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;払出データ&#39;</span><span class="p">;</span>

<span class="c1">-- 払出明細データ</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;払出明細データ&quot;</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="ss">&quot;ID&quot;</span><span class="w"> </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;払出番号&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;払出行番号&quot;</span><span class="w"> </span><span class="nb">INT</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;品目コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;払出数&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;作成日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;更新日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;UK_払出明細&quot;</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;払出番号&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;払出行番号&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;FK_払出明細_払出&quot;</span><span class="w"> </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;払出番号&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;払出データ&quot;</span><span class="p">(</span><span class="ss">&quot;払出番号&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;FK_払出明細_品目&quot;</span><span class="w"> </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;品目コード&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;品目マスタ&quot;</span><span class="p">(</span><span class="ss">&quot;品目コード&quot;</span><span class="p">)</span>
<span class="p">);</span>

<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;払出明細データ&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;払出明細データ&#39;</span><span class="p">;</span>

<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;IDX_払出指示_オーダ&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;払出指示データ&quot;</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;オーダ番号&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;IDX_払出指示_場所&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;払出指示データ&quot;</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;場所コード&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;IDX_払出_作業指示&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;払出データ&quot;</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;作業指示番号&quot;</span><span class="p">);</span>
</code></pre></div>

</details>

<h3 id="java_1">Java エンティティの定義（払出）<a class="headerlink" href="#java_1" title="Permanent link">&para;</a></h3>
<details>
<summary>Entity: IssueInstruction・IssueInstructionDetail</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/domain/model/inventory/IssueInstruction.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.domain.model.inventory</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 払出指示データエンティティ</span>
<span class="cm"> */</span>
<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">IssueInstruction</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">instructionNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">orderNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">instructionDate</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">locationCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">remarks</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">createdAt</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">updatedAt</span><span class="p">;</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">IssueInstructionDetail</span><span class="o">&gt;</span><span class="w"> </span><span class="n">details</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/domain/model/inventory/IssueInstructionDetail.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.domain.model.inventory</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 払出指示明細データエンティティ</span>
<span class="cm"> */</span>
<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">IssueInstructionDetail</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">instructionNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">lineNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">routingSequence</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">issueQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">createdAt</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">updatedAt</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>Entity: Issue・IssueDetail</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/domain/model/inventory/Issue.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.domain.model.inventory</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 払出データエンティティ</span>
<span class="cm"> */</span>
<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Issue</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">issueNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">workOrderNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">routingSequence</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">locationCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">issueDate</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">issuerCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">createdAt</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">updatedAt</span><span class="p">;</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">IssueDetail</span><span class="o">&gt;</span><span class="w"> </span><span class="n">details</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/domain/model/inventory/IssueDetail.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.domain.model.inventory</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 払出明細データエンティティ</span>
<span class="cm"> */</span>
<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">IssueDetail</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">issueNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">lineNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">issueQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">createdAt</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">updatedAt</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="_9">払出サービスの実装<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<details>
<summary>Service: IssueService</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/application/service/IssueService.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.application.service</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.inventory.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.persistence.mapper.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Service</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.transaction.annotation.Transactional</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.Year</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.stream.IntStream</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 払出サービス</span>
<span class="cm"> */</span>
<span class="nd">@Service</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">IssueService</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">IssueInstructionMapper</span><span class="w"> </span><span class="n">instructionMapper</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">IssueMapper</span><span class="w"> </span><span class="n">issueMapper</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">InventoryService</span><span class="w"> </span><span class="n">inventoryService</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 払出指示を作成する</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">IssueInstruction</span><span class="w"> </span><span class="nf">createIssueInstruction</span><span class="p">(</span><span class="n">IssueInstructionRequest</span><span class="w"> </span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">instructionNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">generateInstructionNumber</span><span class="p">();</span>

<span class="w">        </span><span class="n">IssueInstruction</span><span class="w"> </span><span class="n">instruction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">IssueInstruction</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">instructionNumber</span><span class="p">(</span><span class="n">instructionNumber</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">orderNumber</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getOrderNumber</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">instructionDate</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getInstructionDate</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">locationCode</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getLocationCode</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">        </span><span class="n">instructionMapper</span><span class="p">.</span><span class="na">insert</span><span class="p">(</span><span class="n">instruction</span><span class="p">);</span>

<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">IssueInstructionDetail</span><span class="o">&gt;</span><span class="w"> </span><span class="n">details</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">IntStream</span><span class="p">.</span><span class="na">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getDetails</span><span class="p">().</span><span class="na">size</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">mapToObj</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">IssueInstructionDetailRequest</span><span class="w"> </span><span class="n">detailReq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getDetails</span><span class="p">().</span><span class="na">get</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="n">IssueInstructionDetail</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                            </span><span class="p">.</span><span class="na">instructionNumber</span><span class="p">(</span><span class="n">instructionNumber</span><span class="p">)</span>
<span class="w">                            </span><span class="p">.</span><span class="na">lineNumber</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">                            </span><span class="p">.</span><span class="na">itemCode</span><span class="p">(</span><span class="n">detailReq</span><span class="p">.</span><span class="na">getItemCode</span><span class="p">())</span>
<span class="w">                            </span><span class="p">.</span><span class="na">routingSequence</span><span class="p">(</span><span class="n">detailReq</span><span class="p">.</span><span class="na">getRoutingSequence</span><span class="p">())</span>
<span class="w">                            </span><span class="p">.</span><span class="na">issueQuantity</span><span class="p">(</span><span class="n">detailReq</span><span class="p">.</span><span class="na">getIssueQuantity</span><span class="p">())</span>
<span class="w">                            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">                </span><span class="p">})</span>
<span class="w">                </span><span class="p">.</span><span class="na">toList</span><span class="p">();</span>

<span class="w">        </span><span class="n">details</span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">instructionMapper</span><span class="p">::</span><span class="n">insertDetail</span><span class="p">);</span>

<span class="w">        </span><span class="n">instruction</span><span class="p">.</span><span class="na">setDetails</span><span class="p">(</span><span class="n">details</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">instruction</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 払出を実行する</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Issue</span><span class="w"> </span><span class="nf">executeIssue</span><span class="p">(</span><span class="n">IssueExecuteRequest</span><span class="w"> </span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">locationCode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getLocationCode</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// 在庫チェック</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">IssueDetailRequest</span><span class="w"> </span><span class="n">detail</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getDetails</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Stock</span><span class="w"> </span><span class="n">stock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventoryService</span><span class="p">.</span><span class="na">getStock</span><span class="p">(</span><span class="n">locationCode</span><span class="p">,</span><span class="w"> </span><span class="n">detail</span><span class="p">.</span><span class="na">getItemCode</span><span class="p">());</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">stock</span><span class="p">.</span><span class="na">getPassedQuantity</span><span class="p">().</span><span class="na">compareTo</span><span class="p">(</span><span class="n">detail</span><span class="p">.</span><span class="na">getIssueQuantity</span><span class="p">())</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">InsufficientStockException</span><span class="p">(</span><span class="s">&quot;在庫が不足しています: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">detail</span><span class="p">.</span><span class="na">getItemCode</span><span class="p">());</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">issueNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">generateIssueNumber</span><span class="p">();</span>

<span class="w">        </span><span class="n">Issue</span><span class="w"> </span><span class="n">issue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Issue</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">issueNumber</span><span class="p">(</span><span class="n">issueNumber</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">workOrderNumber</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getWorkOrderNumber</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">routingSequence</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getRoutingSequence</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">locationCode</span><span class="p">(</span><span class="n">locationCode</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">issueDate</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getIssueDate</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">issuerCode</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getIssuerCode</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">        </span><span class="n">issueMapper</span><span class="p">.</span><span class="na">insert</span><span class="p">(</span><span class="n">issue</span><span class="p">);</span>

<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">IssueDetail</span><span class="o">&gt;</span><span class="w"> </span><span class="n">details</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">IntStream</span><span class="p">.</span><span class="na">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getDetails</span><span class="p">().</span><span class="na">size</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">mapToObj</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">IssueDetailRequest</span><span class="w"> </span><span class="n">detailReq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getDetails</span><span class="p">().</span><span class="na">get</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="n">IssueDetail</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                            </span><span class="p">.</span><span class="na">issueNumber</span><span class="p">(</span><span class="n">issueNumber</span><span class="p">)</span>
<span class="w">                            </span><span class="p">.</span><span class="na">lineNumber</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">                            </span><span class="p">.</span><span class="na">itemCode</span><span class="p">(</span><span class="n">detailReq</span><span class="p">.</span><span class="na">getItemCode</span><span class="p">())</span>
<span class="w">                            </span><span class="p">.</span><span class="na">issueQuantity</span><span class="p">(</span><span class="n">detailReq</span><span class="p">.</span><span class="na">getIssueQuantity</span><span class="p">())</span>
<span class="w">                            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">                </span><span class="p">})</span>
<span class="w">                </span><span class="p">.</span><span class="na">toList</span><span class="p">();</span>

<span class="w">        </span><span class="n">details</span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">issueMapper</span><span class="p">::</span><span class="n">insertDetail</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// 在庫を減少</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">IssueDetailRequest</span><span class="w"> </span><span class="n">detail</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getDetails</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">inventoryService</span><span class="p">.</span><span class="na">decreaseStock</span><span class="p">(</span><span class="n">StockChangeRequest</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">locationCode</span><span class="p">(</span><span class="n">locationCode</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">itemCode</span><span class="p">(</span><span class="n">detail</span><span class="p">.</span><span class="na">getItemCode</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">quantity</span><span class="p">(</span><span class="n">detail</span><span class="p">.</span><span class="na">getIssueQuantity</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">stockStatus</span><span class="p">(</span><span class="n">StockStatus</span><span class="p">.</span><span class="na">PASSED</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">issue</span><span class="p">.</span><span class="na">setDetails</span><span class="p">(</span><span class="n">details</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">issue</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">generateInstructionNumber</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">year</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Year</span><span class="p">.</span><span class="na">now</span><span class="p">().</span><span class="na">getValue</span><span class="p">();</span>
<span class="w">        </span><span class="kt">long</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">instructionMapper</span><span class="p">.</span><span class="na">countByYear</span><span class="p">(</span><span class="n">year</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;IS-%d-%04d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">generateIssueNumber</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">year</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Year</span><span class="p">.</span><span class="na">now</span><span class="p">().</span><span class="na">getValue</span><span class="p">();</span>
<span class="w">        </span><span class="kt">long</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">issueMapper</span><span class="p">.</span><span class="na">countByYear</span><span class="p">(</span><span class="n">year</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;PO-%d-%04d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h2 id="283-db">28.3 棚卸業務の DB 設計<a class="headerlink" href="#283-db" title="Permanent link">&para;</a></h2>
<h3 id="_10">棚卸業務の流れ<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<p>棚卸業務は、帳簿在庫と実際の在庫を照合し、差異を調整する業務です。</p>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkFDVElWSVRZIiBoZWlnaHQ9IjkwM3B4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NTAwcHg7aGVpZ2h0OjkwM3B4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDUwMCA5MDMiIHdpZHRoPSI1MDBweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjY4NDI7JiMyMTM2ODsmIzI2OTg5OyYjMjEyMDk7JiMxMjM5ODsmIzI3OTY5OyYjMTI0Mjg7PC90aXRsZT48ZGVmcy8+PGc+PGcgY2xhc3M9InRpdGxlIiBkYXRhLXNvdXJjZS1saW5lPSIxIj48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTcuOTk5NiIgeD0iMTk5LjYxMzUiIHk9IjMyLjk5NTEiPiYjMjY4NDI7JiMyMTM2ODsmIzI2OTg5OyYjMjEyMDk7JiMxMjM5ODsmIzI3OTY5OyYjMTI0Mjg7PC90ZXh0PjwvZz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjIwLjk1MzEiIHN0eWxlPSJzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI0NjcuMjI2NSIgeD0iMTUiIHk9IjUwLjA0MiIvPjxlbGxpcHNlIGN4PSIxOTMuMDAwOSIgY3k9Ijg1Ljk5NTEiIGZpbGw9IiMyMjIyMjIiIHJ4PSIxMCIgcnk9IjEwIiBzdHlsZT0ic3Ryb2tlOiMyMjIyMjI7c3Ryb2tlLXdpZHRoOjE7Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjY4LjAwMDQiIHg9IjE1OS4wMDA3IiB5PSIxMTUuOTk1MSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ4LjAwMDQiIHg9IjE2OS4wMDA3IiB5PSIxMzcuMTMzOCI+JiMyMjMxMjsmIzI0MjM1OyYjMjQ3NzM7JiMyMjU3Nzs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjgwLjAwMDUiIHg9IjE1My4wMDA3IiB5PSIxNjkuOTYzOSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYwLjAwMDUiIHg9IjE2My4wMDA3IiB5PSIxOTEuMTAyNSI+JiMyNjg0MjsmIzIxMzY4OyYjMzQ5MjA7JiMzMDMzMDsmIzM0ODkyOzwvdGV4dD48cmVjdCBmaWxsPSIjNTU1NTU1IiBoZWlnaHQ9IjYiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzU1NTU1NTtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIzMzIuMDAxNyIgeD0iMjEiIHk9IjIyMy45MzI2Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEwNC4wMDA2IiB4PSIzMyIgeT0iMjQ5LjkzMjYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4NC4wMDA2IiB4PSI0MyIgeT0iMjcxLjA3MTMiPiYjMjY4NDI7JiMyMTM2ODsmIzM0OTIwOyYjNjUyODg7JiMzNjAzOTsmIzI2NDQ4OyYjNjUyODk7PC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMDQuMDAwNiIgeD0iMTU5LjAwMDciIHk9IjI0OS45MzI2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODQuMDAwNiIgeD0iMTY5LjAwMDciIHk9IjI3MS4wNzEzIj4mIzI2ODQyOyYjMjEzNjg7JiMzNDkyMDsmIzY1Mjg4OyYjMjAxODE7JiMyNTQ5OTsmIzY1Mjg5OzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNjguMDAwNCIgeD0iMjczLjAwMTQiIHk9IjI0OS45MzI2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDguMDAwNCIgeD0iMjgzLjAwMTQiIHk9IjI3MS4wNzEzIj4mIzI0MTE1OyYjMzE4MDc7JiMyMjMxMjsmIzI0MjM1OzwvdGV4dD48cmVjdCBmaWxsPSIjNTU1NTU1IiBoZWlnaHQ9IjYiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzU1NTU1NTtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIzMzIuMDAxNyIgeD0iMjEiIHk9IjMwMy45MDE0Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjkyLjAwMDUiIHg9IjE0Ny4wMDA2IiB5PSI0MzcuODM4OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjcyLjAwMDUiIHg9IjE1Ny4wMDA2IiB5PSI0NTguOTc3NSI+JiMyMzQ1NTsmIzI2ODQyOyYjMzIwODA7JiMyNjUyNDsmIzIwODM3OyYjMjExNDc7PC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI2OC4wMDA0IiB4PSIxNTkuMDAwNyIgeT0iNDkxLjgwNzYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0OC4wMDA0IiB4PSIxNjkuMDAwNyIgeT0iNTEyLjk0NjMiPiYjMjQwNDY7JiMzMDA2NDsmIzIwOTk4OyYjMjY1MTI7PC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI2OC4wMDA0IiB4PSIxNTkuMDAwNyIgeT0iNTk0LjE3ODciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0OC4wMDA0IiB4PSIxNjkuMDAwNyIgeT0iNjE1LjMxNzQiPiYjMjIzMTI7JiMyNDIzNTsmIzM1NTE5OyYjMjU5NzI7PC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI5Mi4wMDA1IiB4PSIxNDcuMDAwNiIgeT0iNjYzLjE0NzUiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3Mi4wMDA1IiB4PSIxNTcuMDAwNiIgeT0iNjg0LjI4NjEiPiYjMzU1MTk7JiMyNTk3MjsmIzI5NzAyOyYjMzAwMDE7JiMzNTM1MjsmIzM3NjgyOzwvdGV4dD48cG9seWdvbiBmaWxsPSIjRjFGMUYxIiBwb2ludHM9IjE2OC4wODE5LDU0NS43NzY0LDIxNy45Miw1NDUuNzc2NCwyMjkuOTIsNTU3Ljc3NjQsMjE3LjkyLDU2OS43NzY0LDE2OC4wODE5LDU2OS43NzY0LDE1Ni4wODE5LDU1Ny43NzY0LDE2OC4wODE5LDU0NS43NzY0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxOS4wMDgzIiB4PSIxOTcuMDAwOSIgeT0iNTc5Ljk4NjgiPnllczwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0OS44MzgxIiB4PSIxNjguMDgxOSIgeT0iNTYxLjU4NDUiPiYjMjQwNDY7JiMzMDA2NDsmIzEyMzU0OyYjMTI0MjY7PzwvdGV4dD48cG9seWdvbiBmaWxsPSIjRjFGMUYxIiBwb2ludHM9IjE5My4wMDA5LDcxNy4xMTYyLDIwNS4wMDA5LDcyOS4xMTYyLDE5My4wMDA5LDc0MS4xMTYyLDE4MS4wMDA5LDcyOS4xMTYyLDE5My4wMDA5LDcxNy4xMTYyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNjguMDAwNCIgeD0iMTU5LjAwMDciIHk9Ijc2MS4xMTYyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDguMDAwNCIgeD0iMTY5LjAwMDciIHk9Ijc4Mi4yNTQ5Ij4mIzI2ODQyOyYjMjEzNjg7JiMzMDkwNjsmIzIzNDUwOzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iOTIuMDAwNSIgeD0iMTQ3LjAwMDYiIHk9IjgxNS4wODUiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3Mi4wMDA1IiB4PSIxNTcuMDAwNiIgeT0iODM2LjIyMzYiPiYjMjIzMTI7JiMyNDIzNTsmIzI0NzczOyYjMjI1Nzc7JiMyNjM1NjsmIzI2MDMyOzwvdGV4dD48ZWxsaXBzZSBjeD0iMTkzLjAwMDkiIGN5PSI4ODAuMDUzNyIgZmlsbD0ibm9uZSIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MTsiLz48ZWxsaXBzZSBjeD0iMTkzLjAwMDkiIGN5PSI4ODAuMDUzNyIgZmlsbD0iIzIyMjIyMiIgcng9IjYiIHJ5PSI2IiBzdHlsZT0ic3Ryb2tlOiMyMjIyMjI7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB4MT0iMTUiIHgyPSIxNSIgeTE9IjUwLjA0MiIgeTI9Ijg5MS4wNTM3Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjY4LjAwMDQiIHg9IjM4NS42ODM1IiB5PSIzMjkuOTAxNCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ4LjAwMDQiIHg9IjM5NS42ODM1IiB5PSIzNTEuMDQiPiYjMjM0NTU7JiMyMjMyMDsmIzI2ODQyOyYjMjEzNjg7PC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMTMuMzYzOSIgeD0iMzYzLjAwMTciIHk9IjM4My44NzAxIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTMuMzYzOSIgeD0iMzczLjAwMTciIHk9IjQwNS4wMDg4Ij4mIzI2ODQyOyYjMjEzNjg7JiMzNDkyMDsoJiMyMzQ1NTsmIzI2ODQyOyYjMzUzNTI7JiMyMDgzNzspPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjM1Ny4wMDE3IiB4Mj0iMzU3LjAwMTciIHkxPSI1MC4wNDIiIHkyPSI4OTEuMDUzNyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjQ4MC4zNjU3IiB4Mj0iNDgwLjM2NTciIHkxPSI1MC4wNDIiIHkyPSI4OTEuMDUzNyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxOTMuMDAwOSIgeDI9IjE5My4wMDA5IiB5MT0iOTUuOTk1MSIgeTI9IjExNS45OTUxIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxODkuMDAwOSwxMDUuOTk1MSwxOTMuMDAwOSwxMTUuOTk1MSwxOTcuMDAwOSwxMDUuOTk1MSwxOTMuMDAwOSwxMDkuOTk1MSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxOTMuMDAwOSIgeDI9IjE5My4wMDA5IiB5MT0iMTQ5Ljk2MzkiIHkyPSIxNjkuOTYzOSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTg5LjAwMDksMTU5Ljk2MzksMTkzLjAwMDksMTY5Ljk2MzksMTk3LjAwMDksMTU5Ljk2MzksMTkzLjAwMDksMTYzLjk2MzkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iODUuMDAwMyIgeDI9Ijg1LjAwMDMiIHkxPSIyMjkuOTMyNiIgeTI9IjI0OS45MzI2Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI4MS4wMDAzLDIzOS45MzI2LDg1LjAwMDMsMjQ5LjkzMjYsODkuMDAwMywyMzkuOTMyNiw4NS4wMDAzLDI0My45MzI2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjIxMS4wMDExIiB4Mj0iMjExLjAwMTEiIHkxPSIyMjkuOTMyNiIgeTI9IjI0OS45MzI2Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyMDcuMDAxMSwyMzkuOTMyNiwyMTEuMDAxMSwyNDkuOTMyNiwyMTUuMDAxMSwyMzkuOTMyNiwyMTEuMDAxMSwyNDMuOTMyNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMDcuMDAxNiIgeDI9IjMwNy4wMDE2IiB5MT0iMjI5LjkzMjYiIHkyPSIyNDkuOTMyNiIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzAzLjAwMTYsMjM5LjkzMjYsMzA3LjAwMTYsMjQ5LjkzMjYsMzExLjAwMTYsMjM5LjkzMjYsMzA3LjAwMTYsMjQzLjkzMjYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iODUuMDAwMyIgeDI9Ijg1LjAwMDMiIHkxPSIyODMuOTAxNCIgeTI9IjMwMy45MDE0Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI4MS4wMDAzLDI5My45MDE0LDg1LjAwMDMsMzAzLjkwMTQsODkuMDAwMywyOTMuOTAxNCw4NS4wMDAzLDI5Ny45MDE0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjIxMS4wMDExIiB4Mj0iMjExLjAwMTEiIHkxPSIyODMuOTAxNCIgeTI9IjMwMy45MDE0Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyMDcuMDAxMSwyOTMuOTAxNCwyMTEuMDAxMSwzMDMuOTAxNCwyMTUuMDAxMSwyOTMuOTAxNCwyMTEuMDAxMSwyOTcuOTAxNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMDcuMDAxNiIgeDI9IjMwNy4wMDE2IiB5MT0iMjgzLjkwMTQiIHkyPSIzMDMuOTAxNCIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzAzLjAwMTYsMjkzLjkwMTQsMzA3LjAwMTYsMzAzLjkwMTQsMzExLjAwMTYsMjkzLjkwMTQsMzA3LjAwMTYsMjk3LjkwMTQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTkzLjAwMDkiIHgyPSIxOTMuMDAwOSIgeTE9IjIwMy45MzI2IiB5Mj0iMjIzLjkzMjYiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE4OS4wMDA5LDIxMy45MzI2LDE5My4wMDA5LDIyMy45MzI2LDE5Ny4wMDA5LDIxMy45MzI2LDE5My4wMDA5LDIxNy45MzI2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE5My4wMDA5IiB4Mj0iMTkzLjAwMDkiIHkxPSI0NzEuODA3NiIgeTI9IjQ5MS44MDc2Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxODkuMDAwOSw0ODEuODA3NiwxOTMuMDAwOSw0OTEuODA3NiwxOTcuMDAwOSw0ODEuODA3NiwxOTMuMDAwOSw0ODUuODA3NiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxOTMuMDAwOSIgeDI9IjE5My4wMDA5IiB5MT0iNjI4LjE0NzUiIHkyPSI2NjMuMTQ3NSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTg5LjAwMDksNjUzLjE0NzUsMTkzLjAwMDksNjYzLjE0NzUsMTk3LjAwMDksNjUzLjE0NzUsMTkzLjAwMDksNjU3LjE0NzUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTkzLjAwMDkiIHgyPSIxOTMuMDAwOSIgeTE9IjU2OS43NzY0IiB5Mj0iNTk0LjE3ODciLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE4OS4wMDA5LDU4NC4xNzg3LDE5My4wMDA5LDU5NC4xNzg3LDE5Ny4wMDA5LDU4NC4xNzg3LDE5My4wMDA5LDU4OC4xNzg3IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjIyOS45MiIgeDI9IjI0OS4wMDEyIiB5MT0iNTU3Ljc3NjQiIHkyPSI1NTcuNzc2NCIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjQ1LjAwMTIsNjM1LjY0NzUsMjQ5LjAwMTIsNjQ1LjY0NzUsMjUzLjAwMTIsNjM1LjY0NzUsMjQ5LjAwMTIsNjM5LjY0NzUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjQ5LjAwMTIiIHgyPSIyNDkuMDAxMiIgeTE9IjU1Ny43NzY0IiB5Mj0iNzI5LjExNjIiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjQ5LjAwMTIiIHgyPSIyMDUuMDAwOSIgeTE9IjcyOS4xMTYyIiB5Mj0iNzI5LjExNjIiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjIxNS4wMDA5LDcyNS4xMTYyLDIwNS4wMDA5LDcyOS4xMTYyLDIxNS4wMDA5LDczMy4xMTYyLDIxMS4wMDA5LDcyOS4xMTYyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE5My4wMDA5IiB4Mj0iMTkzLjAwMDkiIHkxPSI2OTcuMTE2MiIgeTI9IjcxNy4xMTYyIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxODkuMDAwOSw3MDcuMTE2MiwxOTMuMDAwOSw3MTcuMTE2MiwxOTcuMDAwOSw3MDcuMTE2MiwxOTMuMDAwOSw3MTEuMTE2MiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxOTMuMDAwOSIgeDI9IjE5My4wMDA5IiB5MT0iNTI1Ljc3NjQiIHkyPSI1NDUuNzc2NCIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTg5LjAwMDksNTM1Ljc3NjQsMTkzLjAwMDksNTQ1Ljc3NjQsMTk3LjAwMDksNTM1Ljc3NjQsMTkzLjAwMDksNTM5Ljc3NjQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTkzLjAwMDkiIHgyPSIxOTMuMDAwOSIgeTE9Ijc0MS4xMTYyIiB5Mj0iNzYxLjExNjIiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE4OS4wMDA5LDc1MS4xMTYyLDE5My4wMDA5LDc2MS4xMTYyLDE5Ny4wMDA5LDc1MS4xMTYyLDE5My4wMDA5LDc1NS4xMTYyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE5My4wMDA5IiB4Mj0iMTkzLjAwMDkiIHkxPSI3OTUuMDg1IiB5Mj0iODE1LjA4NSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTg5LjAwMDksODA1LjA4NSwxOTMuMDAwOSw4MTUuMDg1LDE5Ny4wMDA5LDgwNS4wODUsMTkzLjAwMDksODA5LjA4NSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxOTMuMDAwOSIgeDI9IjE5My4wMDA5IiB5MT0iODQ5LjA1MzciIHkyPSI4NjkuMDUzNyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTg5LjAwMDksODU5LjA1MzcsMTkzLjAwMDksODY5LjA1MzcsMTk3LjAwMDksODU5LjA1MzcsMTkzLjAwMDksODYzLjA1MzciIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDE5LjY4MzciIHgyPSI0MTkuNjgzNyIgeTE9IjM2My44NzAxIiB5Mj0iMzgzLjg3MDEiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjQxNS42ODM3LDM3My44NzAxLDQxOS42ODM3LDM4My44NzAxLDQyMy42ODM3LDM3My44NzAxLDQxOS42ODM3LDM3Ny44NzAxIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE5My4wMDA5IiB4Mj0iMTkzLjAwMDkiIHkxPSIzMDkuOTAxNCIgeTI9IjMxNC45MDE0Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE5My4wMDA5IiB4Mj0iNDE5LjY4MzciIHkxPSIzMTQuOTAxNCIgeTI9IjMxNC45MDE0Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjQxOS42ODM3IiB4Mj0iNDE5LjY4MzciIHkxPSIzMTQuOTAxNCIgeTI9IjMyOS45MDE0Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI0MTUuNjgzNywzMTkuOTAxNCw0MTkuNjgzNywzMjkuOTAxNCw0MjMuNjgzNywzMTkuOTAxNCw0MTkuNjgzNywzMjMuOTAxNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0MTkuNjgzNyIgeDI9IjQxOS42ODM3IiB5MT0iNDE3LjgzODkiIHkyPSI0MjIuODM4OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0MTkuNjgzNyIgeDI9IjE5My4wMDA5IiB5MT0iNDIyLjgzODkiIHkyPSI0MjIuODM4OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxOTMuMDAwOSIgeDI9IjE5My4wMDA5IiB5MT0iNDIyLjgzODkiIHkyPSI0MzcuODM4OSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTg5LjAwMDksNDI3LjgzODksMTkzLjAwMDksNDM3LjgzODksMTk3LjAwMDksNDI3LjgzODksMTkzLjAwMDksNDMxLjgzODkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4OS45OTk1IiB4PSIxNDEuMDAxMSIgeT0iNjYuNzUiPiYjMjk5ODM7JiMyOTk4NzsmIzMxNjQ5OyYjMjk3MDI7JiMzNzA5Njs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTgiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzEuOTk5NiIgeD0iMzgyLjY4MzkiIHk9IjY2Ljc1Ij4mIzM2MDM5OyYjMjY0NDg7JiMyMDQ4OTsmIzI0MjM1OzwvdGV4dD48P3BsYW50dW1sLXNyYyBSTDNWSmU5RzZCeV9KeTRibDg5U3oybmlHUjRRRGs2Y1pPbDBRTWhLazgyTUdYZXZEclFCT1VmcXZFUjNxN1NFTmxhQVZUbDlKTFR0dnRvX2x6emR3VFFiQWozbjBFdk5URjgxVF90SW9VWjJBTHNGNDlpNThuUUNNUE9tbHhyamZaT25CUUxYYUhoNEFISmxqRGMyYndiQ1FiblU5SWRoNXJOWW9LSWhEb3VFbmhqcmZ2aFRxY1Rfai12b0s1M0U1RHF1ZmRuX1hWR1gtYUUxck9wYjZ2eHVZd1o2QVBSWmJkM0pIUzE2TlpRMkVFVTZYdnI0MUYxSmZLX0djYVpvVnJsTEU4S2pWM2dDYUdNejIxcldjUjRtWHF3UjNkc0t3UGVXeWI3ZmtBTlJFdjQ0d3JtcjFGNVFEUU56SVFndDNHdGRBRU9GMzYzMTVBRXR0Z1RDaUJRa2FOcXJ6YmYwRGYyRlpxY1pFTnRDQ1NzcXdiU18/PjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_11">棚卸データのスキーマ設計<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjQzNXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MzU5cHg7aGVpZ2h0OjQzNXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDM1OSA0MzUiIHdpZHRoPSIzNTlweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjY4NDI7JiMyMTM2ODsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsmIzEyMzk4OyYjMjcwODM7JiMzNjg5Njs8L3RpdGxlPjxkZWZzLz48Zz48ZyBjbGFzcz0idGl0bGUiIGRhdGEtc291cmNlLWxpbmU9IjEiPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTEuOTk5NSIgeD0iMTE2LjU4MjUiIHk9IjIyLjk5NTEiPiYjMjY4NDI7JiMyMTM2ODsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsmIzEyMzk4OyYjMjcwODM7JiMzNjg5Njs8L3RleHQ+PC9nPjwhLS1jbGFzcyBzdG9ja3Rha2luZy0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9InN0b2NrdGFraW5nIiBkYXRhLXNvdXJjZS1saW5lPSIzIiBpZD0iZW50MDAwMiI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMjkuNDg0NCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTUyLjMzNDciIHg9IjkwLjgzIiB5PSI0NC4yOTY5Ii8+PGVsbGlwc2UgY3g9IjEyOC40ODA4IiBjeT0iNjAuMjk2OSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMTMyLjU5MDEsNjYuMjk2OSBMMTI0Ljg3MTQsNjYuMjk2OSBMMTI0Ljg3MTQsNTMuOTA2MyBMMTMyLjU5MDEsNTMuOTA2MyBMMTMyLjU5MDEsNTYuMDYyNSBMMTI3LjMyNDUsNTYuMDYyNSBMMTI3LjMyNDUsNTguNzM0NCBMMTMyLjA5MDEsNTguNzM0NCBMMTMyLjA5MDEsNjAuODkwNiBMMTI3LjMyNDUsNjAuODkwNiBMMTI3LjMyNDUsNjQuMTQwNiBMMTMyLjU5MDEsNjQuMTQwNiBMMTMyLjU5MDEsNjYuMjk2OSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjE0Ny41MTQzIiB5PSI2NS4xNDM2Ij4mIzI2ODQyOyYjMjEzNjg7JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjkxLjgzIiB4Mj0iMjQyLjE2NDciIHkxPSI3Ni4yOTY5IiB5Mj0iNzYuMjk2OSIvPjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iSUVfTUFOREFUT1JZIj48ZWxsaXBzZSBjeD0iMTAxLjgzIiBjeT0iODkuOTQ1MyIgZmlsbD0iIzAwMDAwMCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ3LjkwNjMiIHg9IjExMC44MyIgeT0iOTMuMjkyIj5JRCBbUEtdPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI5MS44MyIgeDI9IjI0Mi4xNjQ3IiB5MT0iMTAwLjU5MzgiIHkyPSIxMDAuNTkzOCIvPjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iSUVfTUFOREFUT1JZIj48ZWxsaXBzZSBjeD0iMTAxLjgzIiBjeT0iMTE0LjI0MjIiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjYuMzM0NyIgeD0iMTEwLjgzIiB5PSIxMTcuNTg4OSI+JiMyNjg0MjsmIzIxMzY4OyYjMzAwNTg7JiMyMTQ5NTsgW1VOSVFVRV08L3RleHQ+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJJRV9NQU5EQVRPUlkiPjxlbGxpcHNlIGN4PSIxMDEuODMiIGN5PSIxMzAuNTM5MSIgZmlsbD0iIzAwMDAwMCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwMi42MDcxIiB4PSIxMTAuODMiIHk9IjEzMy44ODU3Ij4mIzIyNTgwOyYjMjUxNTI7JiMxMjQ2NzsmIzEyNTQwOyYjMTI0ODk7IFtGS108L3RleHQ+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJJRV9NQU5EQVRPUlkiPjxlbGxpcHNlIGN4PSIxMDEuODMiIGN5PSIxNDYuODM1OSIgZmlsbD0iIzAwMDAwMCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQxLjk5OTgiIHg9IjExMC44MyIgeT0iMTUwLjE4MjYiPiYjMjY4NDI7JiMyMTM2ODsmIzI2MDg1OzwvdGV4dD48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IklFX01BTkRBVE9SWSI+PGVsbGlwc2UgY3g9IjEwMS44MyIgY3k9IjE2My4xMzI4IiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iMTEwLjgzIiB5PSIxNjYuNDc5NSI+JiMxMjQ3MzsmIzEyNDg2OyYjMTI1NDA7JiMxMjQ3OTsmIzEyNDczOzwvdGV4dD48L2c+PCEtLWNsYXNzIHN0b2NrdGFraW5nX2RldGFpbC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9InN0b2NrdGFraW5nX2RldGFpbCIgZGF0YS1zb3VyY2UtbGluZT0iMTIiIGlkPSJlbnQwMDAzIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjE2Mi4wNzgxIiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMjkuOTk5NiIgeD0iNyIgeT0iMjUwLjA4NjkiLz48ZWxsaXBzZSBjeD0iMjIiIGN5PSIyNjYuMDg2OSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMjYuMTA5NCwyNzIuMDg2OSBMMTguMzkwNiwyNzIuMDg2OSBMMTguMzkwNiwyNTkuNjk2MyBMMjYuMTA5NCwyNTkuNjk2MyBMMjYuMTA5NCwyNjEuODUyNSBMMjAuODQzOCwyNjEuODUyNSBMMjAuODQzOCwyNjQuNTI0NCBMMjUuNjA5NCwyNjQuNTI0NCBMMjUuNjA5NCwyNjYuNjgwNiBMMjAuODQzOCwyNjYuNjgwNiBMMjAuODQzOCwyNjkuOTMwNiBMMjYuMTA5NCwyNjkuOTMwNiBMMjYuMTA5NCwyNzIuMDg2OSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk3Ljk5OTYiIHg9IjM2IiB5PSIyNzAuOTMzNiI+JiMyNjg0MjsmIzIxMzY4OyYjMjYxMjY7JiMzMjA0ODsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iOCIgeDI9IjEzNS45OTk2IiB5MT0iMjgyLjA4NjkiIHkyPSIyODIuMDg2OSIvPjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iSUVfTUFOREFUT1JZIj48ZWxsaXBzZSBjeD0iMTgiIGN5PSIyOTUuNzM1MyIgZmlsbD0iIzAwMDAwMCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ3LjkwNjMiIHg9IjI3IiB5PSIyOTkuMDgyIj5JRCBbUEtdPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI4IiB4Mj0iMTM1Ljk5OTYiIHkxPSIzMDYuMzgzOCIgeTI9IjMwNi4zODM4Ii8+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJJRV9NQU5EQVRPUlkiPjxlbGxpcHNlIGN4PSIxOCIgY3k9IjMyMC4wMzIyIiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODguNjA3MiIgeD0iMjciIHk9IjMyMy4zNzg5Ij4mIzI2ODQyOyYjMjEzNjg7JiMzMDA1ODsmIzIxNDk1OyBbRktdPC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iSUVfTUFOREFUT1JZIj48ZWxsaXBzZSBjeD0iMTgiIGN5PSIzMzYuMzI5MSIgZmlsbD0iIzAwMDAwMCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjI3IiB5PSIzMzkuNjc1NyI+JiMyNjg0MjsmIzIxMzY4OyYjMzQ4OTI7JiMzMDA1ODsmIzIxNDk1OzwvdGV4dD48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IklFX01BTkRBVE9SWSI+PGVsbGlwc2UgY3g9IjE4IiBjeT0iMzUyLjYyNTkiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDIuNjA3MSIgeD0iMjciIHk9IjM1NS45NzI2Ij4mIzIxNjk3OyYjMzA0NDY7JiMxMjQ2NzsmIzEyNTQwOyYjMTI0ODk7IFtGS108L3RleHQ+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJJRV9NQU5EQVRPUlkiPjxlbGxpcHNlIGN4PSIxOCIgY3k9IjM2OC45MjI4IiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iMjciIHk9IjM3Mi4yNjk1Ij4mIzI0MTE1OyYjMzE4MDc7JiMyNTk2ODsmIzM3MzI3OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSIyNyIgeT0iMzg4LjU2NjQiPiYjMjM0NTU7JiMyNjg0MjsmIzI1OTY4OyYjMzczMjc7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjI3IiB5PSI0MDQuODYzMiI+JiMyNDA0NjsmIzMwMDY0OyYjMjU5Njg7JiMzNzMyNzs8L3RleHQ+PC9nPjwhLS1jbGFzcyBzdG9ja19hZGp1c3RtZW50LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0ic3RvY2tfYWRqdXN0bWVudCIgZGF0YS1zb3VyY2UtbGluZT0iMjMiIGlkPSJlbnQwMDA0Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjE5NC42NzE5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxODAuMzM0NiIgeD0iMTcxLjgzIiB5PSIyMzMuNzg2OSIvPjxlbGxpcHNlIGN4PSIyMDkuNDgwOCIgY3k9IjI0OS43ODY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0yMTMuNTkwMSwyNTUuNzg2OSBMMjA1Ljg3MTQsMjU1Ljc4NjkgTDIwNS44NzE0LDI0My4zOTYzIEwyMTMuNTkwMSwyNDMuMzk2MyBMMjEzLjU5MDEsMjQ1LjU1MjUgTDIwOC4zMjQ1LDI0NS41NTI1IEwyMDguMzI0NSwyNDguMjI0NCBMMjEzLjA5MDEsMjQ4LjIyNDQgTDIxMy4wOTAxLDI1MC4zODA2IEwyMDguMzI0NSwyNTAuMzgwNiBMMjA4LjMyNDUsMjUzLjYzMDYgTDIxMy41OTAxLDI1My42MzA2IEwyMTMuNTkwMSwyNTUuNzg2OSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk3Ljk5OTYiIHg9IjIyOC41MTQzIiB5PSIyNTQuNjMzNiI+JiMyMjMxMjsmIzI0MjM1OyYjMzU1MTk7JiMyNTk3MjsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMTcyLjgzIiB4Mj0iMzUxLjE2NDYiIHkxPSIyNjUuNzg2OSIgeTI9IjI2NS43ODY5Ii8+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJJRV9NQU5EQVRPUlkiPjxlbGxpcHNlIGN4PSIxODIuODMiIGN5PSIyNzkuNDM1MyIgZmlsbD0iIzAwMDAwMCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ3LjkwNjMiIHg9IjE5MS44MyIgeT0iMjgyLjc4MiI+SUQgW1BLXTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTcyLjgzIiB4Mj0iMzUxLjE2NDYiIHkxPSIyOTAuMDgzOCIgeTI9IjI5MC4wODM4Ii8+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJJRV9NQU5EQVRPUlkiPjxlbGxpcHNlIGN4PSIxODIuODMiIGN5PSIzMDMuNzMyMiIgZmlsbD0iIzAwMDAwMCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1NC4zMzQ2IiB4PSIxOTEuODMiIHk9IjMwNy4wNzg5Ij4mIzIyMzEyOyYjMjQyMzU7JiMzNTUxOTsmIzI1OTcyOyYjMzAwNTg7JiMyMTQ5NTsgW1VOSVFVRV08L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODguNjA3MiIgeD0iMTkxLjgzIiB5PSIzMjMuMzc1NyI+JiMyNjg0MjsmIzIxMzY4OyYjMzAwNTg7JiMyMTQ5NTsgW0ZLXTwvdGV4dD48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IklFX01BTkRBVE9SWSI+PGVsbGlwc2UgY3g9IjE4Mi44MyIgY3k9IjMzNi4zMjU5IiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAyLjYwNzEiIHg9IjE5MS44MyIgeT0iMzM5LjY3MjYiPiYjMjE2OTc7JiMzMDQ0NjsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsgW0ZLXTwvdGV4dD48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IklFX01BTkRBVE9SWSI+PGVsbGlwc2UgY3g9IjE4Mi44MyIgY3k9IjM1Mi42MjI4IiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAyLjYwNzEiIHg9IjE5MS44MyIgeT0iMzU1Ljk2OTUiPiYjMjI1ODA7JiMyNTE1MjsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsgW0ZLXTwvdGV4dD48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IklFX01BTkRBVE9SWSI+PGVsbGlwc2UgY3g9IjE4Mi44MyIgY3k9IjM2OC45MTk3IiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDEuOTk5OCIgeD0iMTkxLjgzIiB5PSIzNzIuMjY2NCI+JiMzNTUxOTsmIzI1OTcyOyYjMjYwODU7PC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iSUVfTUFOREFUT1JZIj48ZWxsaXBzZSBjeD0iMTgyLjgzIiBjeT0iMzg1LjIxNjYiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTEuOTk5NSIgeD0iMTkxLjgzIiB5PSIzODguNTYzMiI+JiMzNTUxOTsmIzI1OTcyOyYjMjUyODU7JiMyNDQwMzsmIzMyNzczOyYjMTI0Njc7JiMxMjU0MDsmIzEyNDg5OzwvdGV4dD48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IklFX01BTkRBVE9SWSI+PGVsbGlwc2UgY3g9IjE4Mi44MyIgY3k9IjQwMS41MTM0IiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDEuOTk5OCIgeD0iMTkxLjgzIiB5PSI0MDQuODYwMSI+JiMzNTUxOTsmIzI1OTcyOyYjMjU5Njg7PC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iSUVfTUFOREFUT1JZIj48ZWxsaXBzZSBjeD0iMTgyLjgzIiBjeT0iNDE3LjgxMDMiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSIxOTEuODMiIHk9IjQyMS4xNTciPiYjMjk3MDI7JiMzMDAwMTsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTs8L3RleHQ+PC9nPjwhLS1saW5rIHN0b2NrdGFraW5nIHRvIHN0b2NrdGFraW5nX2RldGFpbC0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDAyIiBkYXRhLWVudGl0eS0yPSJlbnQwMDAzIiBkYXRhLWxpbmstdHlwZT0iY3Jvd2Zvb3QiIGRhdGEtc291cmNlLWxpbmU9IjM2IiBpZD0ibG5rNSI+PHBhdGggY29kZUxpbmU9IjM2IiBkPSJNMTM2LjIyMDQsMTgxLjM0MjIgQzEyNS45ODA0LDIwNS4wNzIyIDEyMC41NzAxLDIxNy42MDE4IDEwOS43ODAxLDI0Mi42MDE4IiBmaWxsPSJub25lIiBpZD0ic3RvY2t0YWtpbmctc3RvY2t0YWtpbmdfZGV0YWlsIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEzNC4xMzI1IiB4Mj0iMTQxLjQ3NzgiIHkxPSIxNzYuMDg0NyIgeTI9IjE3OS4yNTQzIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEzMi45NDM5IiB4Mj0iMTQwLjI4OTIiIHkxPSIxNzguODM5MiIgeTI9IjE4Mi4wMDg4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEzNi4yMjA0IiB4Mj0iMTM5LjM5IiB5MT0iMTgxLjM0MjIiIHkyPSIxNzMuOTk2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMDkuNzgwMSIgeDI9IjExMi4xMTg4IiB5MT0iMjQyLjYwMTgiIHkyPSIyNTIuMzI0NSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMDkuNzgwMSIgeDI9IjEwMS4xMDEyIiB5MT0iMjQyLjYwMTgiIHkyPSIyNDcuNTY5MyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMDkuNzgwMSIgeDI9IjEwNi42MSIgeTE9IjI0Mi42MDE4IiB5Mj0iMjQ5Ljk0NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTE0LjI0NTIiIHgyPSIxMDYuOTAwMSIgeTE9IjI0Mi4zNTA2IiB5Mj0iMjM5LjE4MDUiLz48L2c+PCEtLWxpbmsgc3RvY2t0YWtpbmcgdG8gc3RvY2tfYWRqdXN0bWVudC0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDAyIiBkYXRhLWVudGl0eS0yPSJlbnQwMDA0IiBkYXRhLWxpbmstdHlwZT0iY3Jvd2Zvb3QiIGRhdGEtc291cmNlLWxpbmU9IjM3IiBpZD0ibG5rNiI+PHBhdGggY29kZUxpbmU9IjM3IiBkPSJNMTk3Ljc4MDQsMTgxLjM0MTkgQzIwNS44MzA0LDE5OS45OTE5IDIwNC41MDMxLDE5Ni45NDIyIDIxMy4yMjMxLDIxNy4xMzIyIiBmaWxsPSJub25lIiBpZD0ic3RvY2t0YWtpbmctc3RvY2tfYWRqdXN0bWVudCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxOTIuNTIyNyIgeDI9IjE5OS44Njc3IiB5MT0iMTc5LjI1NDUiIHkyPSIxNzYuMDg0MiIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxOTMuNzExNiIgeDI9IjIwMS4wNTY2IiB5MT0iMTgyLjAwODkiIHkyPSIxNzguODM4NiIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxOTcuNzgwNCIgeDI9IjE5NC42MSIgeTE9IjE4MS4zNDE5IiB5Mj0iMTczLjk5NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjE3LjE4OCIgeDI9IjIyNS44NjgyIiB5MT0iMjI2LjMxMjYiIHkyPSIyMzEuMjc3OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyMTcuMTg4IiB4Mj0iMjE0Ljg1MTgiIHkxPSIyMjYuMzEyNiIgeTI9IjIzNi4wMzU5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjIxNy4xODgiIHgyPSIyMjAuMzYiIHkxPSIyMjYuMzEyNiIgeTI9IjIzMy42NTY5Ii8+PGVsbGlwc2UgY3g9IjIxNC44MDkiIGN5PSIyMjAuODA0NCIgZmlsbD0ibm9uZSIgcng9IjQiIHJ5PSI0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjw/cGxhbnR1bWwtc3JjIEF5YWlvS2JMVUJQdXJqRlU3Ty1Sc255dHh0ZFNqRnpudXhmZG94alZEWXBXdWFoREF5YWlnTEhHR2JFWGY5MU9oNTFTYWYtU05QQU9kUGNOaGIzRGZRTld3UThHN1UwVG93TWgyLUgwRDNvVmtrZmZfdFE1dzUwX3B5MUdycllXLURDNU12dnJEWm5rc1dtb2dCYko4VGhERW5Ra19EZHFmSzNzdXdRVFp2bFJlNHZmc2liTFktd0NQcEZ3ZGNfUFdEQ255SWNmOU9jUEVPSlNYNnBuWXVLejQ2Nkcyb1N0RmYtejNpRTVKdFRpVmh2WF94RWY2cndzenRDek5KU1ZnMTc2c1J4ay1UR0RLMHdJT3ZfRU1WNXFyLWVOZ3UyUWpjMW5SN25ZSWJQZlNLYWtLM2NjS3Y3cmVXU1lEY19XU1pKc3E4UU8ybWJqQUJreHpVZFVvSXlRTWs1ZzRMOUpEbTNQcG9VcUZQLW80STRCejJUb19EVkt3RWhNTDZFOTFHbkwtVEtPdFdTMD8+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<details>
<summary>DDL: 棚卸データ・在庫調整データ</summary>

<div class="highlight"><pre><span></span><code><span class="c1">-- V19__create_stocktaking_tables.sql</span>

<span class="c1">-- 棚卸ステータス ENUM</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TYPE</span><span class="w"> </span><span class="ss">&quot;棚卸ステータス&quot;</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">ENUM</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;発行済&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;入力済&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;確定&#39;</span><span class="p">);</span>

<span class="c1">-- 棚卸データ</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;棚卸データ&quot;</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="ss">&quot;ID&quot;</span><span class="w"> </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;棚卸番号&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;場所コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;棚卸日&quot;</span><span class="w"> </span><span class="nb">DATE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;ステータス&quot;</span><span class="w"> </span><span class="ss">&quot;棚卸ステータス&quot;</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="s1">&#39;発行済&#39;</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;作成日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;更新日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span>
<span class="p">);</span>

<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;棚卸データ&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;棚卸データ&#39;</span><span class="p">;</span>

<span class="c1">-- 棚卸明細データ</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;棚卸明細データ&quot;</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="ss">&quot;ID&quot;</span><span class="w"> </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;棚卸番号&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;棚卸行番号&quot;</span><span class="w"> </span><span class="nb">INT</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;品目コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;帳簿数量&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;実棚数量&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;差異数量&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;UK_棚卸明細&quot;</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;棚卸番号&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;棚卸行番号&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;FK_棚卸明細_棚卸&quot;</span><span class="w"> </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;棚卸番号&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;棚卸データ&quot;</span><span class="p">(</span><span class="ss">&quot;棚卸番号&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;FK_棚卸明細_品目&quot;</span><span class="w"> </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;品目コード&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;品目マスタ&quot;</span><span class="p">(</span><span class="ss">&quot;品目コード&quot;</span><span class="p">)</span>
<span class="p">);</span>

<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;棚卸明細データ&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;棚卸明細データ&#39;</span><span class="p">;</span>

<span class="c1">-- 在庫調整データ</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;在庫調整データ&quot;</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="ss">&quot;ID&quot;</span><span class="w"> </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;在庫調整番号&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;棚卸番号&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;品目コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;場所コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;調整日&quot;</span><span class="w"> </span><span class="nb">DATE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;調整担当者コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;調整数&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;理由コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;作成日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;更新日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;FK_在庫調整_棚卸&quot;</span><span class="w"> </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;棚卸番号&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;棚卸データ&quot;</span><span class="p">(</span><span class="ss">&quot;棚卸番号&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;FK_在庫調整_品目&quot;</span><span class="w"> </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;品目コード&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;品目マスタ&quot;</span><span class="p">(</span><span class="ss">&quot;品目コード&quot;</span><span class="p">)</span>
<span class="p">);</span>

<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;在庫調整データ&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;在庫調整データ&#39;</span><span class="p">;</span>
<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="ss">&quot;在庫調整データ&quot;</span><span class="p">.</span><span class="ss">&quot;調整数&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;調整数（+/-）&#39;</span><span class="p">;</span>

<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;IDX_棚卸_場所&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;棚卸データ&quot;</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;場所コード&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;IDX_棚卸_日付&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;棚卸データ&quot;</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;棚卸日&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;IDX_在庫調整_棚卸&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;在庫調整データ&quot;</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;棚卸番号&quot;</span><span class="p">);</span>
</code></pre></div>

</details>

<h3 id="java_2">Java エンティティの定義（棚卸）<a class="headerlink" href="#java_2" title="Permanent link">&para;</a></h3>
<details>
<summary>Enum: StocktakingStatus</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/domain/model/inventory/StocktakingStatus.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.domain.model.inventory</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 棚卸ステータス</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">enum</span><span class="w"> </span><span class="n">StocktakingStatus</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">ISSUED</span><span class="p">(</span><span class="s">&quot;発行済&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">ENTERED</span><span class="p">(</span><span class="s">&quot;入力済&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">CONFIRMED</span><span class="p">(</span><span class="s">&quot;確定&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">displayName</span><span class="p">;</span>

<span class="w">    </span><span class="n">StocktakingStatus</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">displayName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">displayName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">displayName</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getDisplayName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">displayName</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">StocktakingStatus</span><span class="w"> </span><span class="nf">fromDisplayName</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">displayName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">StocktakingStatus</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">values</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">status</span><span class="p">.</span><span class="na">displayName</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">displayName</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">status</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;Unknown display name: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">displayName</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>TypeHandler: StocktakingStatusTypeHandler</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/infrastructure/persistence/StocktakingStatusTypeHandler.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.persistence</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.inventory.StocktakingStatus</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.ibatis.type.BaseTypeHandler</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.ibatis.type.JdbcType</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.ibatis.type.MappedTypes</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.sql.CallableStatement</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.sql.PreparedStatement</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.sql.ResultSet</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.sql.SQLException</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 棚卸ステータスのTypeHandler</span>
<span class="cm"> */</span>
<span class="nd">@MappedTypes</span><span class="p">(</span><span class="n">StocktakingStatus</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">StocktakingStatusTypeHandler</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">BaseTypeHandler</span><span class="o">&lt;</span><span class="n">StocktakingStatus</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setNonNullParameter</span><span class="p">(</span><span class="n">PreparedStatement</span><span class="w"> </span><span class="n">ps</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">,</span>
<span class="w">                                    </span><span class="n">StocktakingStatus</span><span class="w"> </span><span class="n">parameter</span><span class="p">,</span><span class="w"> </span><span class="n">JdbcType</span><span class="w"> </span><span class="n">jdbcType</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">SQLException</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">ps</span><span class="p">.</span><span class="na">setString</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">parameter</span><span class="p">.</span><span class="na">getDisplayName</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">StocktakingStatus</span><span class="w"> </span><span class="nf">getNullableResult</span><span class="p">(</span><span class="n">ResultSet</span><span class="w"> </span><span class="n">rs</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">columnName</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">SQLException</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rs</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="n">columnName</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">StocktakingStatus</span><span class="p">.</span><span class="na">fromDisplayName</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">StocktakingStatus</span><span class="w"> </span><span class="nf">getNullableResult</span><span class="p">(</span><span class="n">ResultSet</span><span class="w"> </span><span class="n">rs</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">columnIndex</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">SQLException</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rs</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="n">columnIndex</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">StocktakingStatus</span><span class="p">.</span><span class="na">fromDisplayName</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">StocktakingStatus</span><span class="w"> </span><span class="nf">getNullableResult</span><span class="p">(</span><span class="n">CallableStatement</span><span class="w"> </span><span class="n">cs</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">columnIndex</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">SQLException</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cs</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="n">columnIndex</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">StocktakingStatus</span><span class="p">.</span><span class="na">fromDisplayName</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>Entity: Stocktaking・StocktakingDetail・StockAdjustment</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/domain/model/inventory/Stocktaking.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.domain.model.inventory</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 棚卸データエンティティ</span>
<span class="cm"> */</span>
<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Stocktaking</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">stocktakingNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">locationCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">stocktakingDate</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">StocktakingStatus</span><span class="w"> </span><span class="n">status</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">createdAt</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">updatedAt</span><span class="p">;</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">StocktakingDetail</span><span class="o">&gt;</span><span class="w"> </span><span class="n">details</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/domain/model/inventory/StocktakingDetail.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.domain.model.inventory</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 棚卸明細データエンティティ</span>
<span class="cm"> */</span>
<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">StocktakingDetail</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">stocktakingNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">lineNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">bookQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">actualQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">differenceQuantity</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/domain/model/inventory/StockAdjustment.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.domain.model.inventory</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 在庫調整データエンティティ</span>
<span class="cm"> */</span>
<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">StockAdjustment</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">adjustmentNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">stocktakingNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">locationCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">adjustmentDate</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">adjusterCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">adjustmentQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">reasonCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">createdAt</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">updatedAt</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="_12">棚卸サービスの実装<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h3>
<details>
<summary>Service: StocktakingService</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/application/service/StocktakingService.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.application.service</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.inventory.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.persistence.mapper.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Service</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.transaction.annotation.Transactional</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.Year</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.UUID</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.stream.IntStream</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 棚卸サービス</span>
<span class="cm"> */</span>
<span class="nd">@Service</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">StocktakingService</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">StocktakingMapper</span><span class="w"> </span><span class="n">stocktakingMapper</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">StockMapper</span><span class="w"> </span><span class="n">stockMapper</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">StockAdjustmentMapper</span><span class="w"> </span><span class="n">adjustmentMapper</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 棚卸表を発行する</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Stocktaking</span><span class="w"> </span><span class="nf">issueStocktakingSheet</span><span class="p">(</span><span class="n">StocktakingIssueRequest</span><span class="w"> </span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Stock</span><span class="o">&gt;</span><span class="w"> </span><span class="n">stocks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stockMapper</span><span class="p">.</span><span class="na">findByLocation</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getLocationCode</span><span class="p">());</span>

<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">stocktakingNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">generateStocktakingNumber</span><span class="p">();</span>

<span class="w">        </span><span class="n">Stocktaking</span><span class="w"> </span><span class="n">stocktaking</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Stocktaking</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">stocktakingNumber</span><span class="p">(</span><span class="n">stocktakingNumber</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">locationCode</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getLocationCode</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">stocktakingDate</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getStocktakingDate</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">status</span><span class="p">(</span><span class="n">StocktakingStatus</span><span class="p">.</span><span class="na">ISSUED</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">        </span><span class="n">stocktakingMapper</span><span class="p">.</span><span class="na">insert</span><span class="p">(</span><span class="n">stocktaking</span><span class="p">);</span>

<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">StocktakingDetail</span><span class="o">&gt;</span><span class="w"> </span><span class="n">details</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">IntStream</span><span class="p">.</span><span class="na">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">stocks</span><span class="p">.</span><span class="na">size</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">mapToObj</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">Stock</span><span class="w"> </span><span class="n">stock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stocks</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="n">StocktakingDetail</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                            </span><span class="p">.</span><span class="na">stocktakingNumber</span><span class="p">(</span><span class="n">stocktakingNumber</span><span class="p">)</span>
<span class="w">                            </span><span class="p">.</span><span class="na">lineNumber</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">                            </span><span class="p">.</span><span class="na">itemCode</span><span class="p">(</span><span class="n">stock</span><span class="p">.</span><span class="na">getItemCode</span><span class="p">())</span>
<span class="w">                            </span><span class="p">.</span><span class="na">bookQuantity</span><span class="p">(</span><span class="n">stock</span><span class="p">.</span><span class="na">getStockQuantity</span><span class="p">())</span>
<span class="w">                            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">                </span><span class="p">})</span>
<span class="w">                </span><span class="p">.</span><span class="na">toList</span><span class="p">();</span>

<span class="w">        </span><span class="n">details</span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">stocktakingMapper</span><span class="p">::</span><span class="n">insertDetail</span><span class="p">);</span>

<span class="w">        </span><span class="n">stocktaking</span><span class="p">.</span><span class="na">setDetails</span><span class="p">(</span><span class="n">details</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">stocktaking</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 実棚数量を入力する</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Stocktaking</span><span class="w"> </span><span class="nf">inputActualCount</span><span class="p">(</span><span class="n">ActualCountInputRequest</span><span class="w"> </span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Stocktaking</span><span class="w"> </span><span class="n">stocktaking</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stocktakingMapper</span><span class="p">.</span><span class="na">findByStocktakingNumber</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getStocktakingNumber</span><span class="p">());</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">stocktaking</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;棚卸データが見つかりません&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">StocktakingDetail</span><span class="o">&gt;</span><span class="w"> </span><span class="n">existingDetails</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stocktakingMapper</span><span class="p">.</span><span class="na">findDetailsByStocktakingNumber</span><span class="p">(</span>
<span class="w">                </span><span class="n">request</span><span class="p">.</span><span class="na">getStocktakingNumber</span><span class="p">());</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">ActualCountDetailRequest</span><span class="w"> </span><span class="n">inputDetail</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getDetails</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">existingDetails</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">d</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="na">getItemCode</span><span class="p">().</span><span class="na">equals</span><span class="p">(</span><span class="n">inputDetail</span><span class="p">.</span><span class="na">getItemCode</span><span class="p">()))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">findFirst</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">ifPresent</span><span class="p">(</span><span class="n">detail</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inputDetail</span><span class="p">.</span><span class="na">getActualQuantity</span><span class="p">()</span>
<span class="w">                                </span><span class="p">.</span><span class="na">subtract</span><span class="p">(</span><span class="n">detail</span><span class="p">.</span><span class="na">getBookQuantity</span><span class="p">());</span>

<span class="w">                        </span><span class="n">stocktakingMapper</span><span class="p">.</span><span class="na">updateDetail</span><span class="p">(</span>
<span class="w">                                </span><span class="n">detail</span><span class="p">.</span><span class="na">getId</span><span class="p">(),</span>
<span class="w">                                </span><span class="n">inputDetail</span><span class="p">.</span><span class="na">getActualQuantity</span><span class="p">(),</span>
<span class="w">                                </span><span class="n">difference</span>
<span class="w">                        </span><span class="p">);</span>
<span class="w">                    </span><span class="p">});</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">stocktakingMapper</span><span class="p">.</span><span class="na">updateStatus</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getStocktakingNumber</span><span class="p">(),</span><span class="w"> </span><span class="n">StocktakingStatus</span><span class="p">.</span><span class="na">ENTERED</span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">stocktakingMapper</span><span class="p">.</span><span class="na">findByStocktakingNumberWithDetails</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getStocktakingNumber</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 棚卸を確定する</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Stocktaking</span><span class="w"> </span><span class="nf">confirmStocktaking</span><span class="p">(</span><span class="n">StocktakingConfirmRequest</span><span class="w"> </span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Stocktaking</span><span class="w"> </span><span class="n">stocktaking</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stocktakingMapper</span><span class="p">.</span><span class="na">findByStocktakingNumberWithDetails</span><span class="p">(</span>
<span class="w">                </span><span class="n">request</span><span class="p">.</span><span class="na">getStocktakingNumber</span><span class="p">());</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">stocktaking</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;棚卸データが見つかりません&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// 差異がある明細について在庫調整</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">StocktakingDetail</span><span class="w"> </span><span class="n">detail</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">stocktaking</span><span class="p">.</span><span class="na">getDetails</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">detail</span><span class="p">.</span><span class="na">getDifferenceQuantity</span><span class="p">();</span>

<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">difference</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">difference</span><span class="p">.</span><span class="na">compareTo</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="c1">// 在庫を調整</span>
<span class="w">                </span><span class="n">Stock</span><span class="w"> </span><span class="n">stock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stockMapper</span><span class="p">.</span><span class="na">findByLocationAndItem</span><span class="p">(</span>
<span class="w">                        </span><span class="n">stocktaking</span><span class="p">.</span><span class="na">getLocationCode</span><span class="p">(),</span><span class="w"> </span><span class="n">detail</span><span class="p">.</span><span class="na">getItemCode</span><span class="p">());</span>

<span class="w">                </span><span class="n">stock</span><span class="p">.</span><span class="na">setStockQuantity</span><span class="p">(</span><span class="n">stock</span><span class="p">.</span><span class="na">getStockQuantity</span><span class="p">().</span><span class="na">add</span><span class="p">(</span><span class="n">difference</span><span class="p">));</span>
<span class="w">                </span><span class="n">stock</span><span class="p">.</span><span class="na">setPassedQuantity</span><span class="p">(</span><span class="n">stock</span><span class="p">.</span><span class="na">getPassedQuantity</span><span class="p">().</span><span class="na">add</span><span class="p">(</span><span class="n">difference</span><span class="p">));</span>
<span class="w">                </span><span class="n">stockMapper</span><span class="p">.</span><span class="na">update</span><span class="p">(</span><span class="n">stock</span><span class="p">);</span>

<span class="w">                </span><span class="c1">// 在庫調整履歴を記録</span>
<span class="w">                </span><span class="n">StockAdjustment</span><span class="w"> </span><span class="n">adjustment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StockAdjustment</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                        </span><span class="p">.</span><span class="na">adjustmentNumber</span><span class="p">(</span><span class="n">UUID</span><span class="p">.</span><span class="na">randomUUID</span><span class="p">().</span><span class="na">toString</span><span class="p">().</span><span class="na">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">))</span>
<span class="w">                        </span><span class="p">.</span><span class="na">stocktakingNumber</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getStocktakingNumber</span><span class="p">())</span>
<span class="w">                        </span><span class="p">.</span><span class="na">itemCode</span><span class="p">(</span><span class="n">detail</span><span class="p">.</span><span class="na">getItemCode</span><span class="p">())</span>
<span class="w">                        </span><span class="p">.</span><span class="na">locationCode</span><span class="p">(</span><span class="n">stocktaking</span><span class="p">.</span><span class="na">getLocationCode</span><span class="p">())</span>
<span class="w">                        </span><span class="p">.</span><span class="na">adjustmentDate</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">now</span><span class="p">())</span>
<span class="w">                        </span><span class="p">.</span><span class="na">adjusterCode</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getAdjusterCode</span><span class="p">())</span>
<span class="w">                        </span><span class="p">.</span><span class="na">adjustmentQuantity</span><span class="p">(</span><span class="n">difference</span><span class="p">)</span>
<span class="w">                        </span><span class="p">.</span><span class="na">reasonCode</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getAdjustmentReasonCode</span><span class="p">())</span>
<span class="w">                        </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">                </span><span class="n">adjustmentMapper</span><span class="p">.</span><span class="na">insert</span><span class="p">(</span><span class="n">adjustment</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// 棚卸を確定</span>
<span class="w">        </span><span class="n">stocktakingMapper</span><span class="p">.</span><span class="na">updateStatus</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getStocktakingNumber</span><span class="p">(),</span><span class="w"> </span><span class="n">StocktakingStatus</span><span class="p">.</span><span class="na">CONFIRMED</span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">stocktakingMapper</span><span class="p">.</span><span class="na">findByStocktakingNumberWithDetails</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getStocktakingNumber</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">generateStocktakingNumber</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">year</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Year</span><span class="p">.</span><span class="na">now</span><span class="p">().</span><span class="na">getValue</span><span class="p">();</span>
<span class="w">        </span><span class="kt">long</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stocktakingMapper</span><span class="p">.</span><span class="na">countByYear</span><span class="p">(</span><span class="n">year</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;ST-%d-%04d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="mybatis-mapper_1">MyBatis Mapper（棚卸）<a class="headerlink" href="#mybatis-mapper_1" title="Permanent link">&para;</a></h3>
<details>
<summary>Mapper XML: StocktakingMapper.xml</summary>

<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="cp">&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
<span class="cp">        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span>
<span class="nt">&lt;mapper</span><span class="w"> </span><span class="na">namespace=</span><span class="s">&quot;com.example.production.infrastructure.persistence.mapper.StocktakingMapper&quot;</span><span class="nt">&gt;</span>

<span class="w">    </span><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;StocktakingResultMap&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;com.example.production.domain.model.inventory.Stocktaking&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;ID&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;stocktakingNumber&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;棚卸番号&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;locationCode&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;場所コード&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;stocktakingDate&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;棚卸日&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;status&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;ステータス&quot;</span>
<span class="w">                </span><span class="na">typeHandler=</span><span class="s">&quot;com.example.production.infrastructure.persistence.StocktakingStatusTypeHandler&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;createdAt&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;作成日時&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;updatedAt&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;更新日時&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/resultMap&gt;</span>

<span class="w">    </span><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;StocktakingWithDetailsResultMap&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;com.example.production.domain.model.inventory.Stocktaking&quot;</span>
<span class="w">               </span><span class="na">extends=</span><span class="s">&quot;StocktakingResultMap&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;collection</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;details&quot;</span><span class="w"> </span><span class="na">ofType=</span><span class="s">&quot;com.example.production.domain.model.inventory.StocktakingDetail&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;detail_ID&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;stocktakingNumber&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;detail_棚卸番号&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;lineNumber&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;棚卸行番号&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;itemCode&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;detail_品目コード&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;bookQuantity&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;帳簿数量&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;actualQuantity&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;実棚数量&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;differenceQuantity&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;差異数量&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/collection&gt;</span>
<span class="w">    </span><span class="nt">&lt;/resultMap&gt;</span>

<span class="w">    </span><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;StocktakingDetailResultMap&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;com.example.production.domain.model.inventory.StocktakingDetail&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;ID&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;stocktakingNumber&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;棚卸番号&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;lineNumber&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;棚卸行番号&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;itemCode&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;品目コード&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;bookQuantity&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;帳簿数量&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;actualQuantity&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;実棚数量&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;differenceQuantity&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;差異数量&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/resultMap&gt;</span>

<span class="w">    </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;findByStocktakingNumber&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;StocktakingResultMap&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>SELECT<span class="w"> </span>*<span class="w"> </span>FROM<span class="w"> </span>&quot;棚卸データ&quot;
<span class="w">        </span>WHERE<span class="w"> </span>&quot;棚卸番号&quot;<span class="w"> </span>=<span class="w"> </span>#{stocktakingNumber}
<span class="w">    </span><span class="nt">&lt;/select&gt;</span>

<span class="w">    </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;findByStocktakingNumberWithDetails&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;StocktakingWithDetailsResultMap&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>SELECT
<span class="w">            </span>s.&quot;ID&quot;,<span class="w"> </span>s.&quot;棚卸番号&quot;,<span class="w"> </span>s.&quot;場所コード&quot;,<span class="w"> </span>s.&quot;棚卸日&quot;,<span class="w"> </span>s.&quot;ステータス&quot;,
<span class="w">            </span>s.&quot;作成日時&quot;,<span class="w"> </span>s.&quot;更新日時&quot;,
<span class="w">            </span>d.&quot;ID&quot;<span class="w"> </span>AS<span class="w"> </span>detail_ID,<span class="w"> </span>d.&quot;棚卸番号&quot;<span class="w"> </span>AS<span class="w"> </span>&quot;detail_棚卸番号&quot;,
<span class="w">            </span>d.&quot;棚卸行番号&quot;,<span class="w"> </span>d.&quot;品目コード&quot;<span class="w"> </span>AS<span class="w"> </span>&quot;detail_品目コード&quot;,
<span class="w">            </span>d.&quot;帳簿数量&quot;,<span class="w"> </span>d.&quot;実棚数量&quot;,<span class="w"> </span>d.&quot;差異数量&quot;
<span class="w">        </span>FROM<span class="w"> </span>&quot;棚卸データ&quot;<span class="w"> </span>s
<span class="w">        </span>LEFT<span class="w"> </span>JOIN<span class="w"> </span>&quot;棚卸明細データ&quot;<span class="w"> </span>d<span class="w"> </span>ON<span class="w"> </span>s.&quot;棚卸番号&quot;<span class="w"> </span>=<span class="w"> </span>d.&quot;棚卸番号&quot;
<span class="w">        </span>WHERE<span class="w"> </span>s.&quot;棚卸番号&quot;<span class="w"> </span>=<span class="w"> </span>#{stocktakingNumber}
<span class="w">        </span>ORDER<span class="w"> </span>BY<span class="w"> </span>d.&quot;棚卸行番号&quot;
<span class="w">    </span><span class="nt">&lt;/select&gt;</span>

<span class="w">    </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;findDetailsByStocktakingNumber&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;StocktakingDetailResultMap&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>SELECT<span class="w"> </span>*<span class="w"> </span>FROM<span class="w"> </span>&quot;棚卸明細データ&quot;
<span class="w">        </span>WHERE<span class="w"> </span>&quot;棚卸番号&quot;<span class="w"> </span>=<span class="w"> </span>#{stocktakingNumber}
<span class="w">        </span>ORDER<span class="w"> </span>BY<span class="w"> </span>&quot;棚卸行番号&quot;
<span class="w">    </span><span class="nt">&lt;/select&gt;</span>

<span class="w">    </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;countByYear&quot;</span><span class="w"> </span><span class="na">resultType=</span><span class="s">&quot;long&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>SELECT<span class="w"> </span>COUNT(*)<span class="w"> </span>FROM<span class="w"> </span>&quot;棚卸データ&quot;
<span class="w">        </span>WHERE<span class="w"> </span>&quot;棚卸番号&quot;<span class="w"> </span>LIKE<span class="w"> </span>&#39;ST-&#39;<span class="w"> </span>||<span class="w"> </span>#{year}<span class="w"> </span>||<span class="w"> </span>&#39;-%&#39;
<span class="w">    </span><span class="nt">&lt;/select&gt;</span>

<span class="w">    </span><span class="nt">&lt;insert</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;insert&quot;</span><span class="w"> </span><span class="na">useGeneratedKeys=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="na">keyProperty=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">keyColumn=</span><span class="s">&quot;ID&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>INSERT<span class="w"> </span>INTO<span class="w"> </span>&quot;棚卸データ&quot;<span class="w"> </span>(
<span class="w">            </span>&quot;棚卸番号&quot;,<span class="w"> </span>&quot;場所コード&quot;,<span class="w"> </span>&quot;棚卸日&quot;,<span class="w"> </span>&quot;ステータス&quot;
<span class="w">        </span>)<span class="w"> </span>VALUES<span class="w"> </span>(
<span class="w">            </span>#{stocktakingNumber},<span class="w"> </span>#{locationCode},<span class="w"> </span>#{stocktakingDate},
<span class="w">            </span>#{status,<span class="w"> </span>typeHandler=com.example.production.infrastructure.persistence.StocktakingStatusTypeHandler}
<span class="w">        </span>)
<span class="w">    </span><span class="nt">&lt;/insert&gt;</span>

<span class="w">    </span><span class="nt">&lt;insert</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;insertDetail&quot;</span><span class="w"> </span><span class="na">useGeneratedKeys=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="na">keyProperty=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">keyColumn=</span><span class="s">&quot;ID&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>INSERT<span class="w"> </span>INTO<span class="w"> </span>&quot;棚卸明細データ&quot;<span class="w"> </span>(
<span class="w">            </span>&quot;棚卸番号&quot;,<span class="w"> </span>&quot;棚卸行番号&quot;,<span class="w"> </span>&quot;品目コード&quot;,<span class="w"> </span>&quot;帳簿数量&quot;
<span class="w">        </span>)<span class="w"> </span>VALUES<span class="w"> </span>(
<span class="w">            </span>#{stocktakingNumber},<span class="w"> </span>#{lineNumber},<span class="w"> </span>#{itemCode},<span class="w"> </span>#{bookQuantity}
<span class="w">        </span>)
<span class="w">    </span><span class="nt">&lt;/insert&gt;</span>

<span class="w">    </span><span class="nt">&lt;update</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;updateDetail&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>UPDATE<span class="w"> </span>&quot;棚卸明細データ&quot;
<span class="w">        </span>SET<span class="w"> </span>&quot;実棚数量&quot;<span class="w"> </span>=<span class="w"> </span>#{actualQuantity},
<span class="w">            </span>&quot;差異数量&quot;<span class="w"> </span>=<span class="w"> </span>#{differenceQuantity}
<span class="w">        </span>WHERE<span class="w"> </span>&quot;ID&quot;<span class="w"> </span>=<span class="w"> </span>#{id}
<span class="w">    </span><span class="nt">&lt;/update&gt;</span>

<span class="w">    </span><span class="nt">&lt;update</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;updateStatus&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>UPDATE<span class="w"> </span>&quot;棚卸データ&quot;
<span class="w">        </span>SET<span class="w"> </span>&quot;ステータス&quot;<span class="w"> </span>=<span class="w"> </span>#{status,<span class="w"> </span>typeHandler=com.example.production.infrastructure.persistence.StocktakingStatusTypeHandler},
<span class="w">            </span>&quot;更新日時&quot;<span class="w"> </span>=<span class="w"> </span>CURRENT_TIMESTAMP
<span class="w">        </span>WHERE<span class="w"> </span>&quot;棚卸番号&quot;<span class="w"> </span>=<span class="w"> </span>#{stocktakingNumber}
<span class="w">    </span><span class="nt">&lt;/update&gt;</span>

<span class="nt">&lt;/mapper&gt;</span>
</code></pre></div>

</details>

<hr />
<h2 id="284">28.4 リレーションと楽観ロックの設計<a class="headerlink" href="#284" title="Permanent link">&para;</a></h2>
<h3 id="mybatis-resultmap">MyBatis ネストした ResultMap によるリレーション設定<a class="headerlink" href="#mybatis-resultmap" title="Permanent link">&para;</a></h3>
<p>在庫管理では、棚卸データ→棚卸明細→在庫調整、払出データ→払出明細といった親子関係があります。MyBatis でこれらの関係を効率的に取得するためのリレーション設定を実装します。</p>
<h4 id="resultmap">棚卸データのネスト ResultMap（明細・調整・品目を含む）<a class="headerlink" href="#resultmap" title="Permanent link">&para;</a></h4>
<details>
<summary>StocktakingMapper.xml（リレーション設定）</summary>

<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="cp">&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
<span class="cp">        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span>

<span class="cm">&lt;!-- src/main/resources/mapper/StocktakingMapper.xml --&gt;</span>
<span class="nt">&lt;mapper</span><span class="w"> </span><span class="na">namespace=</span><span class="s">&quot;com.example.production.infrastructure.persistence.mapper.StocktakingMapper&quot;</span><span class="nt">&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- 棚卸データ with 明細・調整・品目 ResultMap --&gt;</span>
<span class="w">    </span><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;stocktakingFullResultMap&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;com.example.production.domain.model.inventory.Stocktaking&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;st_id&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;stocktakingNumber&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;st_棚卸番号&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;locationCode&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;st_場所コード&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;stocktakingDate&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;st_棚卸日&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;status&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;st_ステータス&quot;</span>
<span class="w">                </span><span class="na">typeHandler=</span><span class="s">&quot;com.example.production.infrastructure.persistence.StocktakingStatusTypeHandler&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;version&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;st_バージョン&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;createdAt&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;st_作成日時&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;updatedAt&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;st_更新日時&quot;</span><span class="nt">/&gt;</span>

<span class="w">        </span><span class="cm">&lt;!-- 場所マスタとの N:1 関連 --&gt;</span>
<span class="w">        </span><span class="nt">&lt;association</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;location&quot;</span><span class="w"> </span><span class="na">javaType=</span><span class="s">&quot;com.example.production.domain.model.inventory.Location&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;locationCode&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;l_場所コード&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;locationName&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;l_場所名&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;locationTypeCode&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;l_場所種類コード&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/association&gt;</span>

<span class="w">        </span><span class="cm">&lt;!-- 棚卸明細との 1:N 関連 --&gt;</span>
<span class="w">        </span><span class="nt">&lt;collection</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;details&quot;</span><span class="w"> </span><span class="na">ofType=</span><span class="s">&quot;com.example.production.domain.model.inventory.StocktakingDetail&quot;</span>
<span class="w">                    </span><span class="na">resultMap=</span><span class="s">&quot;stocktakingDetailNestedResultMap&quot;</span><span class="nt">/&gt;</span>

<span class="w">        </span><span class="cm">&lt;!-- 在庫調整との 1:N 関連 --&gt;</span>
<span class="w">        </span><span class="nt">&lt;collection</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;adjustments&quot;</span><span class="w"> </span><span class="na">ofType=</span><span class="s">&quot;com.example.production.domain.model.inventory.StockAdjustment&quot;</span>
<span class="w">                    </span><span class="na">resultMap=</span><span class="s">&quot;stockAdjustmentNestedResultMap&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/resultMap&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- 棚卸明細のネスト ResultMap（品目マスタを含む） --&gt;</span>
<span class="w">    </span><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;stocktakingDetailNestedResultMap&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;com.example.production.domain.model.inventory.StocktakingDetail&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;sd_id&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;stocktakingNumber&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;sd_棚卸番号&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;lineNumber&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;sd_棚卸行番号&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;itemCode&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;sd_品目コード&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;bookQuantity&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;sd_帳簿数量&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;actualQuantity&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;sd_実棚数量&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;differenceQuantity&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;sd_差異数量&quot;</span><span class="nt">/&gt;</span>

<span class="w">        </span><span class="cm">&lt;!-- 品目マスタとの N:1 関連 --&gt;</span>
<span class="w">        </span><span class="nt">&lt;association</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;item&quot;</span><span class="w"> </span><span class="na">javaType=</span><span class="s">&quot;com.example.production.domain.model.item.Item&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;itemCode&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;i_品目コード&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;itemName&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;i_品目名&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/association&gt;</span>
<span class="w">    </span><span class="nt">&lt;/resultMap&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- 在庫調整のネスト ResultMap --&gt;</span>
<span class="w">    </span><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;stockAdjustmentNestedResultMap&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;com.example.production.domain.model.inventory.StockAdjustment&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;sa_id&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;adjustmentNumber&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;sa_在庫調整番号&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;stocktakingNumber&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;sa_棚卸番号&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;itemCode&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;sa_品目コード&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;locationCode&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;sa_場所コード&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;adjustmentDate&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;sa_調整日&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;adjusterCode&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;sa_調整担当者コード&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;adjustmentQuantity&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;sa_調整数&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;reasonCode&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;sa_理由コード&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/resultMap&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- JOIN による一括取得クエリ --&gt;</span>
<span class="w">    </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;findFullByStocktakingNumber&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;stocktakingFullResultMap&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>SELECT
<span class="w">            </span>st.&quot;ID&quot;<span class="w"> </span>AS<span class="w"> </span>st_id,
<span class="w">            </span>st.&quot;棚卸番号&quot;<span class="w"> </span>AS<span class="w"> </span>st_棚卸番号,
<span class="w">            </span>st.&quot;場所コード&quot;<span class="w"> </span>AS<span class="w"> </span>st_場所コード,
<span class="w">            </span>st.&quot;棚卸日&quot;<span class="w"> </span>AS<span class="w"> </span>st_棚卸日,
<span class="w">            </span>st.&quot;ステータス&quot;<span class="w"> </span>AS<span class="w"> </span>st_ステータス,
<span class="w">            </span>st.&quot;バージョン&quot;<span class="w"> </span>AS<span class="w"> </span>st_バージョン,
<span class="w">            </span>st.&quot;作成日時&quot;<span class="w"> </span>AS<span class="w"> </span>st_作成日時,
<span class="w">            </span>st.&quot;更新日時&quot;<span class="w"> </span>AS<span class="w"> </span>st_更新日時,
<span class="w">            </span>l.&quot;場所コード&quot;<span class="w"> </span>AS<span class="w"> </span>l_場所コード,
<span class="w">            </span>l.&quot;場所名&quot;<span class="w"> </span>AS<span class="w"> </span>l_場所名,
<span class="w">            </span>l.&quot;場所種類コード&quot;<span class="w"> </span>AS<span class="w"> </span>l_場所種類コード,
<span class="w">            </span>sd.&quot;ID&quot;<span class="w"> </span>AS<span class="w"> </span>sd_id,
<span class="w">            </span>sd.&quot;棚卸番号&quot;<span class="w"> </span>AS<span class="w"> </span>sd_棚卸番号,
<span class="w">            </span>sd.&quot;棚卸行番号&quot;<span class="w"> </span>AS<span class="w"> </span>sd_棚卸行番号,
<span class="w">            </span>sd.&quot;品目コード&quot;<span class="w"> </span>AS<span class="w"> </span>sd_品目コード,
<span class="w">            </span>sd.&quot;帳簿数量&quot;<span class="w"> </span>AS<span class="w"> </span>sd_帳簿数量,
<span class="w">            </span>sd.&quot;実棚数量&quot;<span class="w"> </span>AS<span class="w"> </span>sd_実棚数量,
<span class="w">            </span>sd.&quot;差異数量&quot;<span class="w"> </span>AS<span class="w"> </span>sd_差異数量,
<span class="w">            </span>i.&quot;品目コード&quot;<span class="w"> </span>AS<span class="w"> </span>i_品目コード,
<span class="w">            </span>i.&quot;品目名&quot;<span class="w"> </span>AS<span class="w"> </span>i_品目名,
<span class="w">            </span>sa.&quot;ID&quot;<span class="w"> </span>AS<span class="w"> </span>sa_id,
<span class="w">            </span>sa.&quot;在庫調整番号&quot;<span class="w"> </span>AS<span class="w"> </span>sa_在庫調整番号,
<span class="w">            </span>sa.&quot;棚卸番号&quot;<span class="w"> </span>AS<span class="w"> </span>sa_棚卸番号,
<span class="w">            </span>sa.&quot;品目コード&quot;<span class="w"> </span>AS<span class="w"> </span>sa_品目コード,
<span class="w">            </span>sa.&quot;場所コード&quot;<span class="w"> </span>AS<span class="w"> </span>sa_場所コード,
<span class="w">            </span>sa.&quot;調整日&quot;<span class="w"> </span>AS<span class="w"> </span>sa_調整日,
<span class="w">            </span>sa.&quot;調整担当者コード&quot;<span class="w"> </span>AS<span class="w"> </span>sa_調整担当者コード,
<span class="w">            </span>sa.&quot;調整数&quot;<span class="w"> </span>AS<span class="w"> </span>sa_調整数,
<span class="w">            </span>sa.&quot;理由コード&quot;<span class="w"> </span>AS<span class="w"> </span>sa_理由コード
<span class="w">        </span>FROM<span class="w"> </span>&quot;棚卸データ&quot;<span class="w"> </span>st
<span class="w">        </span>LEFT<span class="w"> </span>JOIN<span class="w"> </span>&quot;場所マスタ&quot;<span class="w"> </span>l<span class="w"> </span>ON<span class="w"> </span>st.&quot;場所コード&quot;<span class="w"> </span>=<span class="w"> </span>l.&quot;場所コード&quot;
<span class="w">        </span>LEFT<span class="w"> </span>JOIN<span class="w"> </span>&quot;棚卸明細データ&quot;<span class="w"> </span>sd<span class="w"> </span>ON<span class="w"> </span>st.&quot;棚卸番号&quot;<span class="w"> </span>=<span class="w"> </span>sd.&quot;棚卸番号&quot;
<span class="w">        </span>LEFT<span class="w"> </span>JOIN<span class="w"> </span>&quot;品目マスタ&quot;<span class="w"> </span>i<span class="w"> </span>ON<span class="w"> </span>sd.&quot;品目コード&quot;<span class="w"> </span>=<span class="w"> </span>i.&quot;品目コード&quot;
<span class="w">        </span>LEFT<span class="w"> </span>JOIN<span class="w"> </span>&quot;在庫調整データ&quot;<span class="w"> </span>sa<span class="w"> </span>ON<span class="w"> </span>st.&quot;棚卸番号&quot;<span class="w"> </span>=<span class="w"> </span>sa.&quot;棚卸番号&quot;
<span class="w">        </span>WHERE<span class="w"> </span>st.&quot;棚卸番号&quot;<span class="w"> </span>=<span class="w"> </span>#{stocktakingNumber}
<span class="w">        </span>ORDER<span class="w"> </span>BY<span class="w"> </span>sd.&quot;棚卸行番号&quot;
<span class="w">    </span><span class="nt">&lt;/select&gt;</span>

<span class="nt">&lt;/mapper&gt;</span>
</code></pre></div>

</details>

<h4 id="resultmap_1">払出データのネスト ResultMap（明細・品目・場所を含む）<a class="headerlink" href="#resultmap_1" title="Permanent link">&para;</a></h4>
<details>
<summary>IssueMapper.xml（リレーション設定）</summary>

<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="cp">&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
<span class="cp">        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span>

<span class="cm">&lt;!-- src/main/resources/mapper/IssueMapper.xml --&gt;</span>
<span class="nt">&lt;mapper</span><span class="w"> </span><span class="na">namespace=</span><span class="s">&quot;com.example.production.infrastructure.persistence.mapper.IssueMapper&quot;</span><span class="nt">&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- 払出データ with 明細・品目・場所 ResultMap --&gt;</span>
<span class="w">    </span><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;issueWithDetailsResultMap&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;com.example.production.domain.model.inventory.Issue&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;is_id&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;issueNumber&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;is_払出番号&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;workOrderNumber&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;is_作業指示番号&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;routingSequence&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;is_工順&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;locationCode&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;is_場所コード&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;issueDate&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;is_払出日&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;issuerCode&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;is_払出担当者コード&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;createdAt&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;is_作成日時&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;updatedAt&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;is_更新日時&quot;</span><span class="nt">/&gt;</span>

<span class="w">        </span><span class="cm">&lt;!-- 場所マスタとの N:1 関連 --&gt;</span>
<span class="w">        </span><span class="nt">&lt;association</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;location&quot;</span><span class="w"> </span><span class="na">javaType=</span><span class="s">&quot;com.example.production.domain.model.inventory.Location&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;locationCode&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;l_場所コード&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;locationName&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;l_場所名&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/association&gt;</span>

<span class="w">        </span><span class="cm">&lt;!-- 払出明細との 1:N 関連 --&gt;</span>
<span class="w">        </span><span class="nt">&lt;collection</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;details&quot;</span><span class="w"> </span><span class="na">ofType=</span><span class="s">&quot;com.example.production.domain.model.inventory.IssueDetail&quot;</span>
<span class="w">                    </span><span class="na">resultMap=</span><span class="s">&quot;issueDetailNestedResultMap&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/resultMap&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- 払出明細のネスト ResultMap（品目マスタを含む） --&gt;</span>
<span class="w">    </span><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;issueDetailNestedResultMap&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;com.example.production.domain.model.inventory.IssueDetail&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;id_id&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;issueNumber&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;id_払出番号&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;lineNumber&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;id_払出行番号&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;itemCode&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;id_品目コード&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;issueQuantity&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;id_払出数&quot;</span><span class="nt">/&gt;</span>

<span class="w">        </span><span class="cm">&lt;!-- 品目マスタとの N:1 関連 --&gt;</span>
<span class="w">        </span><span class="nt">&lt;association</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;item&quot;</span><span class="w"> </span><span class="na">javaType=</span><span class="s">&quot;com.example.production.domain.model.item.Item&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;itemCode&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;i_品目コード&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;itemName&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;i_品目名&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/association&gt;</span>
<span class="w">    </span><span class="nt">&lt;/resultMap&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- JOIN による一括取得クエリ --&gt;</span>
<span class="w">    </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;findWithDetailsByIssueNumber&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;issueWithDetailsResultMap&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>SELECT
<span class="w">            </span>is_.&quot;ID&quot;<span class="w"> </span>AS<span class="w"> </span>is_id,
<span class="w">            </span>is_.&quot;払出番号&quot;<span class="w"> </span>AS<span class="w"> </span>is_払出番号,
<span class="w">            </span>is_.&quot;作業指示番号&quot;<span class="w"> </span>AS<span class="w"> </span>is_作業指示番号,
<span class="w">            </span>is_.&quot;工順&quot;<span class="w"> </span>AS<span class="w"> </span>is_工順,
<span class="w">            </span>is_.&quot;場所コード&quot;<span class="w"> </span>AS<span class="w"> </span>is_場所コード,
<span class="w">            </span>is_.&quot;払出日&quot;<span class="w"> </span>AS<span class="w"> </span>is_払出日,
<span class="w">            </span>is_.&quot;払出担当者コード&quot;<span class="w"> </span>AS<span class="w"> </span>is_払出担当者コード,
<span class="w">            </span>is_.&quot;作成日時&quot;<span class="w"> </span>AS<span class="w"> </span>is_作成日時,
<span class="w">            </span>is_.&quot;更新日時&quot;<span class="w"> </span>AS<span class="w"> </span>is_更新日時,
<span class="w">            </span>l.&quot;場所コード&quot;<span class="w"> </span>AS<span class="w"> </span>l_場所コード,
<span class="w">            </span>l.&quot;場所名&quot;<span class="w"> </span>AS<span class="w"> </span>l_場所名,
<span class="w">            </span>id.&quot;ID&quot;<span class="w"> </span>AS<span class="w"> </span>id_id,
<span class="w">            </span>id.&quot;払出番号&quot;<span class="w"> </span>AS<span class="w"> </span>id_払出番号,
<span class="w">            </span>id.&quot;払出行番号&quot;<span class="w"> </span>AS<span class="w"> </span>id_払出行番号,
<span class="w">            </span>id.&quot;品目コード&quot;<span class="w"> </span>AS<span class="w"> </span>id_品目コード,
<span class="w">            </span>id.&quot;払出数&quot;<span class="w"> </span>AS<span class="w"> </span>id_払出数,
<span class="w">            </span>i.&quot;品目コード&quot;<span class="w"> </span>AS<span class="w"> </span>i_品目コード,
<span class="w">            </span>i.&quot;品目名&quot;<span class="w"> </span>AS<span class="w"> </span>i_品目名
<span class="w">        </span>FROM<span class="w"> </span>&quot;払出データ&quot;<span class="w"> </span>is_
<span class="w">        </span>LEFT<span class="w"> </span>JOIN<span class="w"> </span>&quot;場所マスタ&quot;<span class="w"> </span>l<span class="w"> </span>ON<span class="w"> </span>is_.&quot;場所コード&quot;<span class="w"> </span>=<span class="w"> </span>l.&quot;場所コード&quot;
<span class="w">        </span>LEFT<span class="w"> </span>JOIN<span class="w"> </span>&quot;払出明細データ&quot;<span class="w"> </span>id<span class="w"> </span>ON<span class="w"> </span>is_.&quot;払出番号&quot;<span class="w"> </span>=<span class="w"> </span>id.&quot;払出番号&quot;
<span class="w">        </span>LEFT<span class="w"> </span>JOIN<span class="w"> </span>&quot;品目マスタ&quot;<span class="w"> </span>i<span class="w"> </span>ON<span class="w"> </span>id.&quot;品目コード&quot;<span class="w"> </span>=<span class="w"> </span>i.&quot;品目コード&quot;
<span class="w">        </span>WHERE<span class="w"> </span>is_.&quot;払出番号&quot;<span class="w"> </span>=<span class="w"> </span>#{issueNumber}
<span class="w">        </span>ORDER<span class="w"> </span>BY<span class="w"> </span>id.&quot;払出行番号&quot;
<span class="w">    </span><span class="nt">&lt;/select&gt;</span>

<span class="nt">&lt;/mapper&gt;</span>
</code></pre></div>

</details>

<h4 id="_13">リレーション設定のポイント<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>設定項目</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;collection&gt;</code></td>
<td>1:N 関連のマッピング（棚卸→明細、棚卸→調整、払出→明細）</td>
</tr>
<tr>
<td><code>&lt;association&gt;</code></td>
<td>N:1 関連のマッピング（棚卸→場所、明細→品目）</td>
</tr>
<tr>
<td><code>&lt;id&gt;</code></td>
<td>主キーの識別（MyBatis が重複排除に使用）</td>
</tr>
<tr>
<td>エイリアス（AS）</td>
<td>カラム名の重複を避けるプレフィックス（<code>st_</code>, <code>sd_</code>, <code>sa_</code>, <code>is_</code>, <code>id_</code> など）</td>
</tr>
<tr>
<td><code>ORDER BY</code></td>
<td>コレクションの順序を保証（行番号順）</td>
</tr>
</tbody>
</table>
<h3 id="_14">楽観ロックの実装<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h3>
<p>在庫管理では、複数の業務（払出、入荷、棚卸調整）が同時に在庫を更新する可能性があります。データの整合性を保つために楽観ロックを実装します。</p>
<h4 id="flyway">Flyway マイグレーション: バージョンカラム追加<a class="headerlink" href="#flyway" title="Permanent link">&para;</a></h4>
<details>
<summary>V020__add_inventory_version_columns.sql</summary>

<div class="highlight"><pre><span></span><code><span class="c1">-- src/main/resources/db/migration/V020__add_inventory_version_columns.sql</span>

<span class="c1">-- 在庫情報テーブルにバージョンカラムを追加</span>
<span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;在庫情報&quot;</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="ss">&quot;バージョン&quot;</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">;</span>

<span class="c1">-- 棚卸データテーブルにバージョンカラムを追加</span>
<span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;棚卸データ&quot;</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="ss">&quot;バージョン&quot;</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">;</span>

<span class="c1">-- コメント追加</span>
<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="ss">&quot;在庫情報&quot;</span><span class="p">.</span><span class="ss">&quot;バージョン&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;楽観ロック用バージョン番号&#39;</span><span class="p">;</span>
<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="ss">&quot;棚卸データ&quot;</span><span class="p">.</span><span class="ss">&quot;バージョン&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;楽観ロック用バージョン番号&#39;</span><span class="p">;</span>
</code></pre></div>

</details>

<h4 id="_15">エンティティへのバージョンフィールド追加<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h4>
<details>
<summary>Stock.java（バージョンフィールド追加）</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/domain/model/inventory/Stock.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.domain.model.inventory</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 在庫情報エンティティ</span>
<span class="cm"> */</span>
<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Stock</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">locationCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">stockQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">passedQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">defectiveQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">uninspectedQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">createdAt</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">updatedAt</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// 楽観ロック用バージョン</span>
<span class="w">    </span><span class="nd">@Builder.Default</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Stock</span><span class="w"> </span><span class="nf">empty</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">locationCode</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Stock</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">locationCode</span><span class="p">(</span><span class="n">locationCode</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">itemCode</span><span class="p">(</span><span class="n">itemCode</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">stockQuantity</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">passedQuantity</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">defectiveQuantity</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">uninspectedQuantity</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 指定状態の在庫が払出可能かチェック</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">canIssue</span><span class="p">(</span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">quantity</span><span class="p">,</span><span class="w"> </span><span class="n">StockStatus</span><span class="w"> </span><span class="n">status</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getQuantityByStatus</span><span class="p">(</span><span class="n">status</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">available</span><span class="p">.</span><span class="na">compareTo</span><span class="p">(</span><span class="n">quantity</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 状態別の数量を取得</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="nf">getQuantityByStatus</span><span class="p">(</span><span class="n">StockStatus</span><span class="w"> </span><span class="n">status</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">status</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">PASSED</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">passedQuantity</span><span class="p">;</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">DEFECTIVE</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">defectiveQuantity</span><span class="p">;</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">UNINSPECTED</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">uninspectedQuantity</span><span class="p">;</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h4 id="mybatis-mapper_2">MyBatis Mapper: 楽観ロック対応の在庫更新<a class="headerlink" href="#mybatis-mapper_2" title="Permanent link">&para;</a></h4>
<p>在庫管理では、複数の業務が同時に在庫を更新する可能性があるため、増減時に楽観ロックを適用します。</p>
<details>
<summary>StockMapper.xml（楽観ロック対応 UPDATE）</summary>

<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- 在庫増加（楽観ロック対応） --&gt;</span>
<span class="nt">&lt;update</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;increaseByStatusWithOptimisticLock&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span>UPDATE<span class="w"> </span>&quot;在庫情報&quot;
<span class="w">    </span>SET<span class="w"> </span>&quot;在庫数量&quot;<span class="w"> </span>=<span class="w"> </span>&quot;在庫数量&quot;<span class="w"> </span>+<span class="w"> </span>#{quantity},
<span class="w">        </span><span class="nt">&lt;choose&gt;</span>
<span class="w">            </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;status == &#39;PASSED&#39;&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span>&quot;合格数&quot;<span class="w"> </span>=<span class="w"> </span>&quot;合格数&quot;<span class="w"> </span>+<span class="w"> </span>#{quantity}
<span class="w">            </span><span class="nt">&lt;/when&gt;</span>
<span class="w">            </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;status == &#39;DEFECTIVE&#39;&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span>&quot;不良数&quot;<span class="w"> </span>=<span class="w"> </span>&quot;不良数&quot;<span class="w"> </span>+<span class="w"> </span>#{quantity}
<span class="w">            </span><span class="nt">&lt;/when&gt;</span>
<span class="w">            </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;status == &#39;UNINSPECTED&#39;&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span>&quot;未検査数&quot;<span class="w"> </span>=<span class="w"> </span>&quot;未検査数&quot;<span class="w"> </span>+<span class="w"> </span>#{quantity}
<span class="w">            </span><span class="nt">&lt;/when&gt;</span>
<span class="w">        </span><span class="nt">&lt;/choose&gt;</span>,
<span class="w">        </span>&quot;更新日時&quot;<span class="w"> </span>=<span class="w"> </span>CURRENT_TIMESTAMP,
<span class="w">        </span>&quot;バージョン&quot;<span class="w"> </span>=<span class="w"> </span>&quot;バージョン&quot;<span class="w"> </span>+<span class="w"> </span>1
<span class="w">    </span>WHERE<span class="w"> </span>&quot;場所コード&quot;<span class="w"> </span>=<span class="w"> </span>#{locationCode}
<span class="w">      </span>AND<span class="w"> </span>&quot;品目コード&quot;<span class="w"> </span>=<span class="w"> </span>#{itemCode}
<span class="w">      </span>AND<span class="w"> </span>&quot;バージョン&quot;<span class="w"> </span>=<span class="w"> </span>#{version}
<span class="nt">&lt;/update&gt;</span>

<span class="cm">&lt;!-- 在庫減少（楽観ロック + 在庫チェック） --&gt;</span>
<span class="nt">&lt;update</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;decreaseByStatusWithOptimisticLock&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span>UPDATE<span class="w"> </span>&quot;在庫情報&quot;
<span class="w">    </span>SET<span class="w"> </span>&quot;在庫数量&quot;<span class="w"> </span>=<span class="w"> </span>&quot;在庫数量&quot;<span class="w"> </span>-<span class="w"> </span>#{quantity},
<span class="w">        </span><span class="nt">&lt;choose&gt;</span>
<span class="w">            </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;status == &#39;PASSED&#39;&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span>&quot;合格数&quot;<span class="w"> </span>=<span class="w"> </span>&quot;合格数&quot;<span class="w"> </span>-<span class="w"> </span>#{quantity}
<span class="w">            </span><span class="nt">&lt;/when&gt;</span>
<span class="w">            </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;status == &#39;DEFECTIVE&#39;&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span>&quot;不良数&quot;<span class="w"> </span>=<span class="w"> </span>&quot;不良数&quot;<span class="w"> </span>-<span class="w"> </span>#{quantity}
<span class="w">            </span><span class="nt">&lt;/when&gt;</span>
<span class="w">            </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;status == &#39;UNINSPECTED&#39;&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span>&quot;未検査数&quot;<span class="w"> </span>=<span class="w"> </span>&quot;未検査数&quot;<span class="w"> </span>-<span class="w"> </span>#{quantity}
<span class="w">            </span><span class="nt">&lt;/when&gt;</span>
<span class="w">        </span><span class="nt">&lt;/choose&gt;</span>,
<span class="w">        </span>&quot;更新日時&quot;<span class="w"> </span>=<span class="w"> </span>CURRENT_TIMESTAMP,
<span class="w">        </span>&quot;バージョン&quot;<span class="w"> </span>=<span class="w"> </span>&quot;バージョン&quot;<span class="w"> </span>+<span class="w"> </span>1
<span class="w">    </span>WHERE<span class="w"> </span>&quot;場所コード&quot;<span class="w"> </span>=<span class="w"> </span>#{locationCode}
<span class="w">      </span>AND<span class="w"> </span>&quot;品目コード&quot;<span class="w"> </span>=<span class="w"> </span>#{itemCode}
<span class="w">      </span>AND<span class="w"> </span>&quot;バージョン&quot;<span class="w"> </span>=<span class="w"> </span>#{version}
<span class="w">      </span>AND<span class="w"> </span><span class="nt">&lt;choose&gt;</span>
<span class="w">            </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;status == &#39;PASSED&#39;&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span>&quot;合格数&quot;<span class="w"> </span>&gt;=<span class="w"> </span>#{quantity}
<span class="w">            </span><span class="nt">&lt;/when&gt;</span>
<span class="w">            </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;status == &#39;DEFECTIVE&#39;&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span>&quot;不良数&quot;<span class="w"> </span>&gt;=<span class="w"> </span>#{quantity}
<span class="w">            </span><span class="nt">&lt;/when&gt;</span>
<span class="w">            </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;status == &#39;UNINSPECTED&#39;&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span>&quot;未検査数&quot;<span class="w"> </span>&gt;=<span class="w"> </span>#{quantity}
<span class="w">            </span><span class="nt">&lt;/when&gt;</span>
<span class="w">        </span><span class="nt">&lt;/choose&gt;</span>
<span class="nt">&lt;/update&gt;</span>

<span class="cm">&lt;!-- 在庫調整（楽観ロック対応・プラスマイナス両対応） --&gt;</span>
<span class="nt">&lt;update</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;adjustWithOptimisticLock&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span>UPDATE<span class="w"> </span>&quot;在庫情報&quot;
<span class="w">    </span>SET<span class="w"> </span>&quot;在庫数量&quot;<span class="w"> </span>=<span class="w"> </span>&quot;在庫数量&quot;<span class="w"> </span>+<span class="w"> </span>#{adjustmentQuantity},
<span class="w">        </span>&quot;合格数&quot;<span class="w"> </span>=<span class="w"> </span>&quot;合格数&quot;<span class="w"> </span>+<span class="w"> </span>#{adjustmentQuantity},
<span class="w">        </span>&quot;更新日時&quot;<span class="w"> </span>=<span class="w"> </span>CURRENT_TIMESTAMP,
<span class="w">        </span>&quot;バージョン&quot;<span class="w"> </span>=<span class="w"> </span>&quot;バージョン&quot;<span class="w"> </span>+<span class="w"> </span>1
<span class="w">    </span>WHERE<span class="w"> </span>&quot;場所コード&quot;<span class="w"> </span>=<span class="w"> </span>#{locationCode}
<span class="w">      </span>AND<span class="w"> </span>&quot;品目コード&quot;<span class="w"> </span>=<span class="w"> </span>#{itemCode}
<span class="w">      </span>AND<span class="w"> </span>&quot;バージョン&quot;<span class="w"> </span>=<span class="w"> </span>#{version}
<span class="w">      </span>AND<span class="w"> </span>(&quot;合格数&quot;<span class="w"> </span>+<span class="w"> </span>#{adjustmentQuantity})<span class="w"> </span>&gt;=<span class="w"> </span>0
<span class="nt">&lt;/update&gt;</span>

<span class="cm">&lt;!-- バージョン取得 --&gt;</span>
<span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;findVersionByLocationAndItem&quot;</span><span class="w"> </span><span class="na">resultType=</span><span class="s">&quot;java.lang.Integer&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span>SELECT<span class="w"> </span>&quot;バージョン&quot;<span class="w"> </span>FROM<span class="w"> </span>&quot;在庫情報&quot;
<span class="w">    </span>WHERE<span class="w"> </span>&quot;場所コード&quot;<span class="w"> </span>=<span class="w"> </span>#{locationCode}
<span class="w">      </span>AND<span class="w"> </span>&quot;品目コード&quot;<span class="w"> </span>=<span class="w"> </span>#{itemCode}
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>

</details>

<h4 id="repository">Repository 実装: 楽観ロック対応<a class="headerlink" href="#repository" title="Permanent link">&para;</a></h4>
<details>
<summary>StockRepositoryImpl.java（楽観ロック対応）</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/infrastructure/persistence/repository/StockRepositoryImpl.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.persistence.repository</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.application.port.out.StockRepository</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.exception.OptimisticLockException</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.inventory.InsufficientStockException</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.inventory.Stock</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.inventory.StockStatus</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.persistence.mapper.StockMapper</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Repository</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.transaction.annotation.Transactional</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Optional</span><span class="p">;</span>

<span class="nd">@Repository</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">StockRepositoryImpl</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">StockRepository</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">StockMapper</span><span class="w"> </span><span class="n">mapper</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">increase</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">locationCode</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">version</span><span class="p">,</span>
<span class="w">                        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">quantity</span><span class="p">,</span><span class="w"> </span><span class="n">StockStatus</span><span class="w"> </span><span class="n">status</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">updatedCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapper</span><span class="p">.</span><span class="na">increaseByStatusWithOptimisticLock</span><span class="p">(</span>
<span class="w">                </span><span class="n">locationCode</span><span class="p">,</span><span class="w"> </span><span class="n">itemCode</span><span class="p">,</span><span class="w"> </span><span class="n">quantity</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="p">.</span><span class="na">name</span><span class="p">(),</span><span class="w"> </span><span class="n">version</span><span class="p">);</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">updatedCount</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">handleOptimisticLockFailure</span><span class="p">(</span><span class="n">locationCode</span><span class="p">,</span><span class="w"> </span><span class="n">itemCode</span><span class="p">,</span><span class="w"> </span><span class="n">version</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">decrease</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">locationCode</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">version</span><span class="p">,</span>
<span class="w">                        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">quantity</span><span class="p">,</span><span class="w"> </span><span class="n">StockStatus</span><span class="w"> </span><span class="n">status</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">updatedCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapper</span><span class="p">.</span><span class="na">decreaseByStatusWithOptimisticLock</span><span class="p">(</span>
<span class="w">                </span><span class="n">locationCode</span><span class="p">,</span><span class="w"> </span><span class="n">itemCode</span><span class="p">,</span><span class="w"> </span><span class="n">quantity</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="p">.</span><span class="na">name</span><span class="p">(),</span><span class="w"> </span><span class="n">version</span><span class="p">);</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">updatedCount</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// 在庫不足か楽観ロック失敗かを判定</span>
<span class="w">            </span><span class="n">Integer</span><span class="w"> </span><span class="n">currentVersion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapper</span><span class="p">.</span><span class="na">findVersionByLocationAndItem</span><span class="p">(</span><span class="n">locationCode</span><span class="p">,</span><span class="w"> </span><span class="n">itemCode</span><span class="p">);</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">currentVersion</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;在庫情報が見つかりません&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">currentVersion</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">version</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">OptimisticLockException</span><span class="p">(</span><span class="s">&quot;在庫&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">locationCode</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;:&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">itemCode</span><span class="p">,</span>
<span class="w">                        </span><span class="n">version</span><span class="p">,</span><span class="w"> </span><span class="n">currentVersion</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="c1">// バージョンは一致しているので在庫不足</span>
<span class="w">                </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">InsufficientStockException</span><span class="p">(</span>
<span class="w">                        </span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;在庫が不足しています: %s (場所: %s)&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">itemCode</span><span class="p">,</span><span class="w"> </span><span class="n">locationCode</span><span class="p">));</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">adjust</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">locationCode</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">version</span><span class="p">,</span>
<span class="w">                      </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">adjustmentQuantity</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">updatedCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapper</span><span class="p">.</span><span class="na">adjustWithOptimisticLock</span><span class="p">(</span>
<span class="w">                </span><span class="n">locationCode</span><span class="p">,</span><span class="w"> </span><span class="n">itemCode</span><span class="p">,</span><span class="w"> </span><span class="n">adjustmentQuantity</span><span class="p">,</span><span class="w"> </span><span class="n">version</span><span class="p">);</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">updatedCount</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Integer</span><span class="w"> </span><span class="n">currentVersion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapper</span><span class="p">.</span><span class="na">findVersionByLocationAndItem</span><span class="p">(</span><span class="n">locationCode</span><span class="p">,</span><span class="w"> </span><span class="n">itemCode</span><span class="p">);</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">currentVersion</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;在庫情報が見つかりません&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">currentVersion</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">version</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">OptimisticLockException</span><span class="p">(</span><span class="s">&quot;在庫&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">locationCode</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;:&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">itemCode</span><span class="p">,</span>
<span class="w">                        </span><span class="n">version</span><span class="p">,</span><span class="w"> </span><span class="n">currentVersion</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">InsufficientStockException</span><span class="p">(</span><span class="s">&quot;調整後の在庫がマイナスになります&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">handleOptimisticLockFailure</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">locationCode</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">expectedVersion</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Integer</span><span class="w"> </span><span class="n">currentVersion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapper</span><span class="p">.</span><span class="na">findVersionByLocationAndItem</span><span class="p">(</span><span class="n">locationCode</span><span class="p">,</span><span class="w"> </span><span class="n">itemCode</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">currentVersion</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;在庫情報が見つかりません&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">OptimisticLockException</span><span class="p">(</span><span class="s">&quot;在庫&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">locationCode</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;:&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">itemCode</span><span class="p">,</span>
<span class="w">                    </span><span class="n">expectedVersion</span><span class="p">,</span><span class="w"> </span><span class="n">currentVersion</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Stock</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByLocationAndItem</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">locationCode</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Optional</span><span class="p">.</span><span class="na">ofNullable</span><span class="p">(</span><span class="n">mapper</span><span class="p">.</span><span class="na">findByLocationAndItem</span><span class="p">(</span><span class="n">locationCode</span><span class="p">,</span><span class="w"> </span><span class="n">itemCode</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h4 id="tdd_1">TDD: 楽観ロックのテスト<a class="headerlink" href="#tdd_1" title="Permanent link">&para;</a></h4>
<details>
<summary>StockRepositoryOptimisticLockTest.java</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/test/java/com/example/production/infrastructure/persistence/repository/StockRepositoryOptimisticLockTest.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.persistence.repository</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.application.port.out.StockRepository</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.exception.OptimisticLockException</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.inventory.InsufficientStockException</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.inventory.Stock</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.inventory.StockStatus</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.testsetup.BaseIntegrationTest</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>

<span class="kn">import static</span><span class="w"> </span><span class="nn">org.assertj.core.api.Assertions.*</span><span class="p">;</span>

<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;在庫リポジトリ - 楽観ロック&quot;</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">StockRepositoryOptimisticLockTest</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">BaseIntegrationTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">StockRepository</span><span class="w"> </span><span class="n">stockRepository</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@BeforeEach</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setUp</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// テストデータのセットアップ（在庫: 100個）</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;在庫減少の楽観ロック&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">DecreaseOptimisticLocking</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;同じバージョンで在庫を減少できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">canDecreaseStockWithSameVersion</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Arrange</span>
<span class="w">            </span><span class="n">Stock</span><span class="w"> </span><span class="n">stock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stockRepository</span><span class="p">.</span><span class="na">findByLocationAndItem</span><span class="p">(</span><span class="s">&quot;WH001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;PROD001&quot;</span><span class="p">).</span><span class="na">get</span><span class="p">();</span>
<span class="w">            </span><span class="n">Integer</span><span class="w"> </span><span class="n">initialVersion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stock</span><span class="p">.</span><span class="na">getVersion</span><span class="p">();</span>

<span class="w">            </span><span class="c1">// Act</span>
<span class="w">            </span><span class="n">stockRepository</span><span class="p">.</span><span class="na">decrease</span><span class="p">(</span><span class="s">&quot;WH001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;PROD001&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">initialVersion</span><span class="p">,</span>
<span class="w">                    </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;10&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">StockStatus</span><span class="p">.</span><span class="na">PASSED</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Assert</span>
<span class="w">            </span><span class="kd">var</span><span class="w"> </span><span class="n">updated</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stockRepository</span><span class="p">.</span><span class="na">findByLocationAndItem</span><span class="p">(</span><span class="s">&quot;WH001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;PROD001&quot;</span><span class="p">).</span><span class="na">get</span><span class="p">();</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">updated</span><span class="p">.</span><span class="na">getPassedQuantity</span><span class="p">()).</span><span class="na">isEqualByComparingTo</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;90&quot;</span><span class="p">));</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">updated</span><span class="p">.</span><span class="na">getVersion</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">initialVersion</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;異なるバージョンで減少すると楽観ロック例外が発生する&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">throwsExceptionWhenVersionMismatch</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Arrange</span>
<span class="w">            </span><span class="n">Stock</span><span class="w"> </span><span class="n">stock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stockRepository</span><span class="p">.</span><span class="na">findByLocationAndItem</span><span class="p">(</span><span class="s">&quot;WH001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;PROD001&quot;</span><span class="p">).</span><span class="na">get</span><span class="p">();</span>
<span class="w">            </span><span class="n">Integer</span><span class="w"> </span><span class="n">initialVersion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stock</span><span class="p">.</span><span class="na">getVersion</span><span class="p">();</span>

<span class="w">            </span><span class="c1">// 払出Aが実行（成功）</span>
<span class="w">            </span><span class="n">stockRepository</span><span class="p">.</span><span class="na">decrease</span><span class="p">(</span><span class="s">&quot;WH001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;PROD001&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">initialVersion</span><span class="p">,</span>
<span class="w">                    </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;10&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">StockStatus</span><span class="p">.</span><span class="na">PASSED</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Act &amp; Assert: 払出Bが古いバージョンで実行（失敗）</span>
<span class="w">            </span><span class="n">assertThatThrownBy</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">stockRepository</span><span class="p">.</span><span class="na">decrease</span><span class="p">(</span><span class="s">&quot;WH001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;PROD001&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="n">initialVersion</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;5&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">StockStatus</span><span class="p">.</span><span class="na">PASSED</span><span class="p">))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">isInstanceOf</span><span class="p">(</span><span class="n">OptimisticLockException</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">hasMessageContaining</span><span class="p">(</span><span class="s">&quot;他のユーザーによって更新されています&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;在庫不足の場合は在庫不足例外が発生する&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">throwsExceptionWhenInsufficientStock</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Arrange</span>
<span class="w">            </span><span class="n">Stock</span><span class="w"> </span><span class="n">stock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stockRepository</span><span class="p">.</span><span class="na">findByLocationAndItem</span><span class="p">(</span><span class="s">&quot;WH001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;PROD001&quot;</span><span class="p">).</span><span class="na">get</span><span class="p">();</span>

<span class="w">            </span><span class="c1">// Act &amp; Assert: 在庫以上を減少しようとする</span>
<span class="w">            </span><span class="n">assertThatThrownBy</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">stockRepository</span><span class="p">.</span><span class="na">decrease</span><span class="p">(</span><span class="s">&quot;WH001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;PROD001&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="n">stock</span><span class="p">.</span><span class="na">getVersion</span><span class="p">(),</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;200&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">StockStatus</span><span class="p">.</span><span class="na">PASSED</span><span class="p">))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">isInstanceOf</span><span class="p">(</span><span class="n">InsufficientStockException</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">hasMessageContaining</span><span class="p">(</span><span class="s">&quot;在庫が不足しています&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;在庫調整の楽観ロック&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">AdjustOptimisticLocking</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;棚卸調整で在庫を増減できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">canAdjustStockFromStocktaking</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Arrange</span>
<span class="w">            </span><span class="n">Stock</span><span class="w"> </span><span class="n">stock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stockRepository</span><span class="p">.</span><span class="na">findByLocationAndItem</span><span class="p">(</span><span class="s">&quot;WH001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;PROD001&quot;</span><span class="p">).</span><span class="na">get</span><span class="p">();</span>
<span class="w">            </span><span class="n">Integer</span><span class="w"> </span><span class="n">initialVersion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stock</span><span class="p">.</span><span class="na">getVersion</span><span class="p">();</span>
<span class="w">            </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">initialQuantity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stock</span><span class="p">.</span><span class="na">getPassedQuantity</span><span class="p">();</span>

<span class="w">            </span><span class="c1">// Act: プラス調整</span>
<span class="w">            </span><span class="n">stockRepository</span><span class="p">.</span><span class="na">adjust</span><span class="p">(</span><span class="s">&quot;WH001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;PROD001&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">initialVersion</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;5&quot;</span><span class="p">));</span>

<span class="w">            </span><span class="c1">// Assert</span>
<span class="w">            </span><span class="kd">var</span><span class="w"> </span><span class="n">updated</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stockRepository</span><span class="p">.</span><span class="na">findByLocationAndItem</span><span class="p">(</span><span class="s">&quot;WH001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;PROD001&quot;</span><span class="p">).</span><span class="na">get</span><span class="p">();</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">updated</span><span class="p">.</span><span class="na">getPassedQuantity</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">isEqualByComparingTo</span><span class="p">(</span><span class="n">initialQuantity</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;5&quot;</span><span class="p">)));</span>

<span class="w">            </span><span class="c1">// Act: マイナス調整</span>
<span class="w">            </span><span class="n">stockRepository</span><span class="p">.</span><span class="na">adjust</span><span class="p">(</span><span class="s">&quot;WH001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;PROD001&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">updated</span><span class="p">.</span><span class="na">getVersion</span><span class="p">(),</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;-3&quot;</span><span class="p">));</span>

<span class="w">            </span><span class="c1">// Assert</span>
<span class="w">            </span><span class="kd">var</span><span class="w"> </span><span class="n">final_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stockRepository</span><span class="p">.</span><span class="na">findByLocationAndItem</span><span class="p">(</span><span class="s">&quot;WH001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;PROD001&quot;</span><span class="p">).</span><span class="na">get</span><span class="p">();</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">final_</span><span class="p">.</span><span class="na">getPassedQuantity</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">isEqualByComparingTo</span><span class="p">(</span><span class="n">initialQuantity</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;2&quot;</span><span class="p">)));</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="_16">同時払出処理のシーケンス図<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h3>
<p>払出処理では、同一品目の在庫を複数の作業者が同時に払い出す可能性があります。</p>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IlNFUVVFTkNFIiBoZWlnaHQ9IjEzNDVweCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSIgc3R5bGU9IndpZHRoOjEwMDFweDtoZWlnaHQ6MTM0NXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDEwMDEgMTM0NSIgd2lkdGg9IjEwMDFweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjE1MTY7JiMyNjE3ODsmIzI1MTczOyYjMjA5ODY7JiMyMDk2NjsmIzI5NzAyOyYjMTI0NzE7JiMxMjU0MDsmIzEyNDY1OyYjMTI1MzE7JiMxMjQ3MzsmIzY1Mjg4OyYjMjcwMDU7JiMzNTI1MTsmIzEyNTI1OyYjMTI0ODM7JiMxMjQ2MzsmIzIzNTUwOyYjMjQ1NDA7JiM2NTI4OTs8L3RpdGxlPjxkZWZzLz48Zz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjc5Ljk5ODgiIHg9IjM1Ni41NjEzIiB5PSIyNy45OTUxIj4mIzIxNTE2OyYjMjYxNzg7JiMyNTE3MzsmIzIwOTg2OyYjMjA5NjY7JiMyOTcwMjsmIzEyNDcxOyYjMTI1NDA7JiMxMjQ2NTsmIzEyNTMxOyYjMTI0NzM7JiM2NTI4ODsmIzI3MDA1OyYjMzUyNTE7JiMxMjUyNTsmIzEyNDgzOyYjMTI0NjM7JiMyMzU1MDsmIzI0NTQwOyYjNjUyODk7PC90ZXh0PjxnPjx0aXRsZT5Jc3N1ZVNlcnZpY2U8L3RpdGxlPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iNzEyLjMyMDMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMCIgeD0iMzQwLjg1NjciIHk9IjE5Mi44NTk0Ii8+PC9nPjxnPjx0aXRsZT5Jc3N1ZVNlcnZpY2U8L3RpdGxlPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMzEyLjQ2MDkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMCIgeD0iMzQ1Ljg1NjciIHk9IjMzOC41MjM0Ii8+PC9nPjxnPjx0aXRsZT5Jc3N1ZVNlcnZpY2U8L3RpdGxlPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjc3LjMyODEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMCIgeD0iMzQwLjg1NjciIHk9Ijk2OS40NDUzIi8+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudC1saWZlbGluZSIgZGF0YS1lbnRpdHktdWlkPSJwYXJ0MSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uQSIgaWQ9InBhcnQxLWxpZmVsaW5lIj48Zz48dGl0bGU+Li4uQTwvdGl0bGU+PHJlY3QgZmlsbD0iIzAwMDAwMCIgZmlsbC1vcGFjaXR5PSIwLjAwMDAwIiBoZWlnaHQ9IjExNDYuMTc5NyIgd2lkdGg9IjgiIHg9IjI5Ljc4ODUiIHk9IjExOC41OTM4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7c3Ryb2tlLWRhc2hhcnJheTo1LDU7IiB4MT0iMzMiIHgyPSIzMyIgeTE9IjExOC41OTM4IiB5Mj0iMTI2NC43NzM0Ii8+PC9nPjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQtbGlmZWxpbmUiIGRhdGEtZW50aXR5LXVpZD0icGFydDIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Ii4uLkIiIGlkPSJwYXJ0Mi1saWZlbGluZSI+PGc+PHRpdGxlPi4uLkI8L3RpdGxlPjxyZWN0IGZpbGw9IiMwMDAwMDAiIGZpbGwtb3BhY2l0eT0iMC4wMDAwMCIgaGVpZ2h0PSIxMTQ2LjE3OTciIHdpZHRoPSI4IiB4PSI5Ny4zNzkxIiB5PSIxMTguNTkzOCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41O3N0cm9rZS1kYXNoYXJyYXk6NSw1OyIgeDE9IjEwMC41NzciIHgyPSIxMDAuNTc3IiB5MT0iMTE4LjU5MzgiIHkyPSIxMjY0Ljc3MzQiLz48L2c+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudC1saWZlbGluZSIgZGF0YS1lbnRpdHktdWlkPSJwYXJ0MyIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iU2VydmljZSIgaWQ9InBhcnQzLWxpZmVsaW5lIj48Zz48dGl0bGU+SXNzdWVTZXJ2aWNlPC90aXRsZT48cmVjdCBmaWxsPSIjMDAwMDAwIiBmaWxsLW9wYWNpdHk9IjAuMDAwMDAiIGhlaWdodD0iMTE0Ni4xNzk3IiB3aWR0aD0iOCIgeD0iMzQxLjg1NjciIHk9IjExOC41OTM4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7c3Ryb2tlLWRhc2hhcnJheTo1LDU7IiB4MT0iMzQ0Ljg4NDYiIHgyPSIzNDQuODg0NiIgeTE9IjExOC41OTM4IiB5Mj0iMTI2NC43NzM0Ii8+PC9nPjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQtbGlmZWxpbmUiIGRhdGEtZW50aXR5LXVpZD0icGFydDQiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IlN0b2NrUmVwbyIgaWQ9InBhcnQ0LWxpZmVsaW5lIj48Zz48dGl0bGU+U3RvY2tSZXBvc2l0b3J5PC90aXRsZT48cmVjdCBmaWxsPSIjMDAwMDAwIiBmaWxsLW9wYWNpdHk9IjAuMDAwMDAiIGhlaWdodD0iMTE0Ni4xNzk3IiB3aWR0aD0iOCIgeD0iNTczLjk1NDQiIHk9IjExOC41OTM4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7c3Ryb2tlLWRhc2hhcnJheTo1LDU7IiB4MT0iNTc3LjA0NTIiIHgyPSI1NzcuMDQ1MiIgeTE9IjExOC41OTM4IiB5Mj0iMTI2NC43NzM0Ii8+PC9nPjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQtbGlmZWxpbmUiIGRhdGEtZW50aXR5LXVpZD0icGFydDUiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IlN0b2NrVGFibGUiIGlkPSJwYXJ0NS1saWZlbGluZSI+PGc+PHRpdGxlPi4uLi48L3RpdGxlPjxyZWN0IGZpbGw9IiMwMDAwMDAiIGZpbGwtb3BhY2l0eT0iMC4wMDAwMCIgaGVpZ2h0PSIxMTQ2LjE3OTciIHdpZHRoPSI4IiB4PSI5NTQuMTIxNSIgeT0iMTE4LjU5MzgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTtzdHJva2UtZGFzaGFycmF5OjUsNTsiIHgxPSI5NTcuMTIxNiIgeDI9Ijk1Ny4xMjE2IiB5MT0iMTE4LjU5MzgiIHkyPSIxMjY0Ljc3MzQiLz48L2c+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudCBwYXJ0aWNpcGFudC1oZWFkIiBkYXRhLWVudGl0eS11aWQ9InBhcnQxIiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi5BIiBpZD0icGFydDEtaGVhZCI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTEuNTc3IiB4PSI1IiB5PSIxMTUuMjkyIj4mIzIwMzE2OyYjMjY5ODk7JiMzMjc3MztBPC90ZXh0PjxlbGxpcHNlIGN4PSIzMy43ODg1IiBjeT0iNTAuNzk2OSIgZmlsbD0iI0UyRTJGMCIgcng9IjgiIHJ5PSI4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNMzMuNzg4NSw1OC43OTY5IEwzMy43ODg1LDg1Ljc5NjkgTTIwLjc4ODUsNjYuNzk2OSBMNDYuNzg4NSw2Ni43OTY5IE0zMy43ODg1LDg1Ljc5NjkgTDIwLjc4ODUsMTAwLjc5NjkgTTMzLjc4ODUsODUuNzk2OSBMNDYuNzg4NSwxMDAuNzk2OSIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudCBwYXJ0aWNpcGFudC10YWlsIiBkYXRhLWVudGl0eS11aWQ9InBhcnQxIiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi5BIiBpZD0icGFydDEtdGFpbCI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTEuNTc3IiB4PSI1IiB5PSIxMjc2Ljc2ODYiPiYjMjAzMTY7JiMyNjk4OTsmIzMyNzczO0E8L3RleHQ+PGVsbGlwc2UgY3g9IjMzLjc4ODUiIGN5PSIxMjg4LjU3MDMiIGZpbGw9IiNFMkUyRjAiIHJ4PSI4IiByeT0iOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTMzLjc4ODUsMTI5Ni41NzAzIEwzMy43ODg1LDEzMjMuNTcwMyBNMjAuNzg4NSwxMzA0LjU3MDMgTDQ2Ljc4ODUsMTMwNC41NzAzIE0zMy43ODg1LDEzMjMuNTcwMyBMMjAuNzg4NSwxMzM4LjU3MDMgTTMzLjc4ODUsMTMyMy41NzAzIEw0Ni43ODg1LDEzMzguNTcwMyIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudCBwYXJ0aWNpcGFudC1oZWFkIiBkYXRhLWVudGl0eS11aWQ9InBhcnQyIiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi5CIiBpZD0icGFydDItaGVhZCI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTEuNjA0MyIgeD0iNzIuNTc3IiB5PSIxMTUuMjkyIj4mIzIwMzE2OyYjMjY5ODk7JiMzMjc3MztCPC90ZXh0PjxlbGxpcHNlIGN4PSIxMDEuMzc5MSIgY3k9IjUwLjc5NjkiIGZpbGw9IiNFMkUyRjAiIHJ4PSI4IiByeT0iOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTEwMS4zNzkxLDU4Ljc5NjkgTDEwMS4zNzkxLDg1Ljc5NjkgTTg4LjM3OTEsNjYuNzk2OSBMMTE0LjM3OTEsNjYuNzk2OSBNMTAxLjM3OTEsODUuNzk2OSBMODguMzc5MSwxMDAuNzk2OSBNMTAxLjM3OTEsODUuNzk2OSBMMTE0LjM3OTEsMTAwLjc5NjkiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQgcGFydGljaXBhbnQtdGFpbCIgZGF0YS1lbnRpdHktdWlkPSJwYXJ0MiIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uQiIgaWQ9InBhcnQyLXRhaWwiPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjUxLjYwNDMiIHg9IjcyLjU3NyIgeT0iMTI3Ni43Njg2Ij4mIzIwMzE2OyYjMjY5ODk7JiMzMjc3MztCPC90ZXh0PjxlbGxpcHNlIGN4PSIxMDEuMzc5MSIgY3k9IjEyODguNTcwMyIgZmlsbD0iI0UyRTJGMCIgcng9IjgiIHJ5PSI4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNMTAxLjM3OTEsMTI5Ni41NzAzIEwxMDEuMzc5MSwxMzIzLjU3MDMgTTg4LjM3OTEsMTMwNC41NzAzIEwxMTQuMzc5MSwxMzA0LjU3MDMgTTEwMS4zNzkxLDEzMjMuNTcwMyBMODguMzc5MSwxMzM4LjU3MDMgTTEwMS4zNzkxLDEzMjMuNTcwMyBMMTE0LjM3OTEsMTMzOC41NzAzIiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48L2c+PGcgY2xhc3M9InBhcnRpY2lwYW50IHBhcnRpY2lwYW50LWhlYWQiIGRhdGEtZW50aXR5LXVpZD0icGFydDMiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IlNlcnZpY2UiIGlkPSJwYXJ0My1oZWFkIj48cmVjdCBmaWxsPSIjRTJFMkYwIiBoZWlnaHQ9IjMwLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEwMS45NDQzIiB4PSIyOTQuODg0NiIgeT0iODcuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg3Ljk0NDMiIHg9IjMwMS44ODQ2IiB5PSIxMDcuMjkyIj5Jc3N1ZVNlcnZpY2U8L3RleHQ+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudCBwYXJ0aWNpcGFudC10YWlsIiBkYXRhLWVudGl0eS11aWQ9InBhcnQzIiBkYXRhLXF1YWxpZmllZC1uYW1lPSJTZXJ2aWNlIiBpZD0icGFydDMtdGFpbCI+PHJlY3QgZmlsbD0iI0UyRTJGMCIgaGVpZ2h0PSIzMC4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMDEuOTQ0MyIgeD0iMjk0Ljg4NDYiIHk9IjEyNjMuNzczNCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg3Ljk0NDMiIHg9IjMwMS44ODQ2IiB5PSIxMjgzLjc2ODYiPklzc3VlU2VydmljZTwvdGV4dD48L2c+PGcgY2xhc3M9InBhcnRpY2lwYW50IHBhcnRpY2lwYW50LWhlYWQiIGRhdGEtZW50aXR5LXVpZD0icGFydDQiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IlN0b2NrUmVwbyIgaWQ9InBhcnQ0LWhlYWQiPjxyZWN0IGZpbGw9IiNFMkUyRjAiIGhlaWdodD0iMzAuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTI3LjgxODQiIHg9IjUxNC4wNDUyIiB5PSI4Ny4yOTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTEzLjgxODQiIHg9IjUyMS4wNDUyIiB5PSIxMDcuMjkyIj5TdG9ja1JlcG9zaXRvcnk8L3RleHQ+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudCBwYXJ0aWNpcGFudC10YWlsIiBkYXRhLWVudGl0eS11aWQ9InBhcnQ0IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJTdG9ja1JlcG8iIGlkPSJwYXJ0NC10YWlsIj48cmVjdCBmaWxsPSIjRTJFMkYwIiBoZWlnaHQ9IjMwLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEyNy44MTg0IiB4PSI1MTQuMDQ1MiIgeT0iMTI2My43NzM0Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTEzLjgxODQiIHg9IjUyMS4wNDUyIiB5PSIxMjgzLjc2ODYiPlN0b2NrUmVwb3NpdG9yeTwvdGV4dD48L2c+PGcgY2xhc3M9InBhcnRpY2lwYW50IHBhcnRpY2lwYW50LWhlYWQiIGRhdGEtZW50aXR5LXVpZD0icGFydDUiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IlN0b2NrVGFibGUiIGlkPSJwYXJ0NS1oZWFkIj48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSI5MjcuMTIxNiIgeT0iMTE1LjI5MiI+JiMyMjMxMjsmIzI0MjM1OyYjMjQ3NzM7JiMyMjU3Nzs8L3RleHQ+PHBhdGggZD0iTTk0MC4xMjE1LDY2LjI5NjkgQzk0MC4xMjE1LDU2LjI5NjkgOTU4LjEyMTUsNTYuMjk2OSA5NTguMTIxNSw1Ni4yOTY5IEM5NTguMTIxNSw1Ni4yOTY5IDk3Ni4xMjE1LDU2LjI5NjkgOTc2LjEyMTUsNjYuMjk2OSBMOTc2LjEyMTUsOTIuMjk2OSBDOTc2LjEyMTUsMTAyLjI5NjkgOTU4LjEyMTUsMTAyLjI5NjkgOTU4LjEyMTUsMTAyLjI5NjkgQzk1OC4xMjE1LDEwMi4yOTY5IDk0MC4xMjE1LDEwMi4yOTY5IDk0MC4xMjE1LDkyLjI5NjkgTDk0MC4xMjE1LDY2LjI5NjkiIGZpbGw9IiNFMkUyRjAiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik05NDAuMTIxNSw2Ni4yOTY5IEM5NDAuMTIxNSw3Ni4yOTY5IDk1OC4xMjE1LDc2LjI5NjkgOTU4LjEyMTUsNzYuMjk2OSBDOTU4LjEyMTUsNzYuMjk2OSA5NzYuMTIxNSw3Ni4yOTY5IDk3Ni4xMjE1LDY2LjI5NjkiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQgcGFydGljaXBhbnQtdGFpbCIgZGF0YS1lbnRpdHktdWlkPSJwYXJ0NSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iU3RvY2tUYWJsZSIgaWQ9InBhcnQ1LXRhaWwiPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjkyNy4xMjE2IiB5PSIxMjc2Ljc2ODYiPiYjMjIzMTI7JiMyNDIzNTsmIzI0NzczOyYjMjI1Nzc7PC90ZXh0PjxwYXRoIGQ9Ik05NDAuMTIxNSwxMjkwLjA3MDMgQzk0MC4xMjE1LDEyODAuMDcwMyA5NTguMTIxNSwxMjgwLjA3MDMgOTU4LjEyMTUsMTI4MC4wNzAzIEM5NTguMTIxNSwxMjgwLjA3MDMgOTc2LjEyMTUsMTI4MC4wNzAzIDk3Ni4xMjE1LDEyOTAuMDcwMyBMOTc2LjEyMTUsMTMxNi4wNzAzIEM5NzYuMTIxNSwxMzI2LjA3MDMgOTU4LjEyMTUsMTMyNi4wNzAzIDk1OC4xMjE1LDEzMjYuMDcwMyBDOTU4LjEyMTUsMTMyNi4wNzAzIDk0MC4xMjE1LDEzMjYuMDcwMyA5NDAuMTIxNSwxMzE2LjA3MDMgTDk0MC4xMjE1LDEyOTAuMDcwMyIgZmlsbD0iI0UyRTJGMCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTk0MC4xMjE1LDEyOTAuMDcwMyBDOTQwLjEyMTUsMTMwMC4wNzAzIDk1OC4xMjE1LDEzMDAuMDcwMyA5NTguMTIxNSwxMzAwLjA3MDMgQzk1OC4xMjE1LDEzMDAuMDcwMyA5NzYuMTIxNSwxMzAwLjA3MDMgOTc2LjEyMTUsMTI5MC4wNzAzIiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48L2c+PGc+PHRpdGxlPklzc3VlU2VydmljZTwvdGl0bGU+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSI3MTIuMzIwMyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjEwIiB4PSIzNDAuODU2NyIgeT0iMTkyLjg1OTQiLz48L2c+PGc+PHRpdGxlPklzc3VlU2VydmljZTwvdGl0bGU+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIzMTIuNDYwOSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjEwIiB4PSIzNDUuODU2NyIgeT0iMzM4LjUyMzQiLz48L2c+PGc+PHRpdGxlPklzc3VlU2VydmljZTwvdGl0bGU+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyNzcuMzI4MSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjEwIiB4PSIzNDAuODU2NyIgeT0iOTY5LjQ0NTMiLz48L2c+PHJlY3QgZmlsbD0iI0VFRUVFRSIgaGVpZ2h0PSIzIiBzdHlsZT0ic3Ryb2tlOiNFRUVFRUU7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iOTk0LjEyMTMiIHg9IjAiIHk9IjE0OS4xNjAyIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9IjAiIHgyPSI5OTQuMTIxMyIgeTE9IjE0OS4xNjAyIiB5Mj0iMTQ5LjE2MDIiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMCIgeDI9Ijk5NC4xMjEzIiB5MT0iMTUyLjE2MDIiIHkyPSIxNTIuMTYwMiIvPjxyZWN0IGZpbGw9IiNFRUVFRUUiIGhlaWdodD0iMjMuMTMyOCIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyOyIgd2lkdGg9IjM1NC43MjMzIiB4PSIzMTkuNjk5IiB5PSIxMzguNTkzOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIzMzYuMTk3NCIgeD0iMzI1LjY5OSIgeT0iMTU0LjY2MDYiPiYjMjE1MTY7JiMyNjE3ODsmIzI1MTczOyYjMjA5ODY7JiMxMjQ3MTsmIzEyNDkwOyYjMTI1MjI7JiMxMjQ1ODsmIzY1Mjg4O1dIMDAxLCBQUk9EMDAxOiAmIzIyMzEyOyYjMjQyMzU7MTAwJiMyMDQ5MTsmIzY1Mjg5OzwvdGV4dD48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1lbnRpdHktMT0icGFydDEiIGRhdGEtZW50aXR5LTI9InBhcnQzIiBpZD0ibXNnMSI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIzMjguODU2NywxODguODU5NCwzMzguODU2NywxOTIuODU5NCwzMjguODU2NywxOTYuODU5NCwzMzIuODU2NywxOTIuODU5NCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMy43ODg1IiB4Mj0iMzM0Ljg1NjciIHkxPSIxOTIuODU5NCIgeTI9IjE5Mi44NTk0Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjE1LjQ3NzYiIHg9IjQwLjc4ODUiIHk9IjE4Ny43OTM1Ij4mIzI1MTczOyYjMjA5ODY7KFdIMDAxLCBQUk9EMDAxLCAmIzI1OTY4OyYjMzczMjc7PTMwKTwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtZW50aXR5LTE9InBhcnQzIiBkYXRhLWVudGl0eS0yPSJwYXJ0NCIgaWQ9Im1zZzIiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNTY1Ljk1NDQsMjE3Ljk5MjIsNTc1Ljk1NDQsMjIxLjk5MjIsNTY1Ljk1NDQsMjI1Ljk5MjIsNTY5Ljk1NDQsMjIxLjk5MjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzUwLjg1NjciIHgyPSI1NzEuOTU0NCIgeTE9IjIyMS45OTIyIiB5Mj0iMjIxLjk5MjIiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNjEuNjI0IiB4PSIzNTcuODU2NyIgeT0iMjE2LjkyNjMiPmZpbmRCeUxvY2F0aW9uQW5kSXRlbSgpPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1lbnRpdHktMT0icGFydDQiIGRhdGEtZW50aXR5LTI9InBhcnQ1IiBpZD0ibXNnMyI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI5NDYuMTIxNSwyNDcuMTI1LDk1Ni4xMjE1LDI1MS4xMjUsOTQ2LjEyMTUsMjU1LjEyNSw5NTAuMTIxNSwyNTEuMTI1IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjU3Ny45NTQ0IiB4Mj0iOTUyLjEyMTUiIHkxPSIyNTEuMTI1IiB5Mj0iMjUxLjEyNSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjM1Ni4xNjcxIiB4PSI1ODQuOTU0NCIgeT0iMjQ2LjA1OTEiPlNFTEVDVCAuLi4gV0hFUkUgJiMyMjU4MDsmIzI1MTUyOz0nV0gwMDEnIEFORCAmIzIxNjk3OyYjMzA0NDY7PSdQUk9EMDAxJzwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtZW50aXR5LTE9InBhcnQ1IiBkYXRhLWVudGl0eS0yPSJwYXJ0NCIgaWQ9Im1zZzQiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNTg4Ljk1NDQsMjc2LjI1NzgsNTc4Ljk1NDQsMjgwLjI1NzgsNTg4Ljk1NDQsMjg0LjI1NzgsNTg0Ljk1NDQsMjgwLjI1NzgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheToyLDI7IiB4MT0iNTgyLjk1NDQiIHgyPSI5NTcuMTIxNSIgeTE9IjI4MC4yNTc4IiB5Mj0iMjgwLjI1NzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNzIuODkxMiIgeD0iNTk0Ljk1NDQiIHk9IjI3NS4xOTE5Ij4mIzIyMzEyOyYjMjQyMzU7KCYjMjU5Njg7JiMzNzMyNzs9MTAwLCB2ZXJzaW9uPTEpPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1lbnRpdHktMT0icGFydDQiIGRhdGEtZW50aXR5LTI9InBhcnQzIiBpZD0ibXNnNSI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIzNjEuODU2NywzMDUuMzkwNiwzNTEuODU2NywzMDkuMzkwNiwzNjEuODU2NywzMTMuMzkwNiwzNTcuODU2NywzMDkuMzkwNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjIsMjsiIHgxPSIzNTUuODU2NyIgeDI9IjU3Ni45NTQ0IiB5MT0iMzA5LjM5MDYiIHkyPSIzMDkuMzkwNiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwMi45MjA5IiB4PSIzNjcuODU2NyIgeT0iMzA0LjMyNDciPiYjMjIzMTI7JiMyNDIzNTsodmVyc2lvbj0xKTwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtZW50aXR5LTE9InBhcnQyIiBkYXRhLWVudGl0eS0yPSJwYXJ0MyIgaWQ9Im1zZzYiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzMzLjg1NjcsMzM0LjUyMzQsMzQzLjg1NjcsMzM4LjUyMzQsMzMzLjg1NjcsMzQyLjUyMzQsMzM3Ljg1NjcsMzM4LjUyMzQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTAxLjM3OTEiIHgyPSIzMzkuODU2NyIgeTE9IjMzOC41MjM0IiB5Mj0iMzM4LjUyMzQiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMTUuNDc3NiIgeD0iMTA4LjM3OTEiIHk9IjMzMy40NTc1Ij4mIzI1MTczOyYjMjA5ODY7KFdIMDAxLCBQUk9EMDAxLCAmIzI1OTY4OyYjMzczMjc7PTIwKTwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtZW50aXR5LTE9InBhcnQzIiBkYXRhLWVudGl0eS0yPSJwYXJ0NCIgaWQ9Im1zZzciPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNTY1Ljk1NDQsMzYzLjY1NjMsNTc1Ljk1NDQsMzY3LjY1NjMsNTY1Ljk1NDQsMzcxLjY1NjMsNTY5Ljk1NDQsMzY3LjY1NjMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzU1Ljg1NjciIHgyPSI1NzEuOTU0NCIgeTE9IjM2Ny42NTYzIiB5Mj0iMzY3LjY1NjMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNjEuNjI0IiB4PSIzNjIuODU2NyIgeT0iMzYyLjU5MDMiPmZpbmRCeUxvY2F0aW9uQW5kSXRlbSgpPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1lbnRpdHktMT0icGFydDQiIGRhdGEtZW50aXR5LTI9InBhcnQ1IiBpZD0ibXNnOCI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI5NDYuMTIxNSwzOTIuNzg5MSw5NTYuMTIxNSwzOTYuNzg5MSw5NDYuMTIxNSw0MDAuNzg5MSw5NTAuMTIxNSwzOTYuNzg5MSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI1NzcuOTU0NCIgeDI9Ijk1Mi4xMjE1IiB5MT0iMzk2Ljc4OTEiIHkyPSIzOTYuNzg5MSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ4Ljk0MDQiIHg9IjU4NC45NTQ0IiB5PSIzOTEuNzIzMSI+U0VMRUNUPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1lbnRpdHktMT0icGFydDUiIGRhdGEtZW50aXR5LTI9InBhcnQ0IiBpZD0ibXNnOSI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI1ODguOTU0NCw0MjEuOTIxOSw1NzguOTU0NCw0MjUuOTIxOSw1ODguOTU0NCw0MjkuOTIxOSw1ODQuOTU0NCw0MjUuOTIxOSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjIsMjsiIHgxPSI1ODIuOTU0NCIgeDI9Ijk1Ny4xMjE1IiB5MT0iNDI1LjkyMTkiIHkyPSI0MjUuOTIxOSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE3Mi44OTEyIiB4PSI1OTQuOTU0NCIgeT0iNDIwLjg1NiI+JiMyMjMxMjsmIzI0MjM1OygmIzI1OTY4OyYjMzczMjc7PTEwMCwgdmVyc2lvbj0xKTwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtZW50aXR5LTE9InBhcnQ0IiBkYXRhLWVudGl0eS0yPSJwYXJ0MyIgaWQ9Im1zZzEwIj48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjM2Ni44NTY3LDQ1MS4wNTQ3LDM1Ni44NTY3LDQ1NS4wNTQ3LDM2Ni44NTY3LDQ1OS4wNTQ3LDM2Mi44NTY3LDQ1NS4wNTQ3IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6MiwyOyIgeDE9IjM2MC44NTY3IiB4Mj0iNTc2Ljk1NDQiIHkxPSI0NTUuMDU0NyIgeTI9IjQ1NS4wNTQ3Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAyLjkyMDkiIHg9IjM3Mi44NTY3IiB5PSI0NDkuOTg4OCI+JiMyMjMxMjsmIzI0MjM1Oyh2ZXJzaW9uPTEpPC90ZXh0PjwvZz48cGF0aCBkPSJNNiw0NjguMDU0NyBMNiw0OTMuMDU0NyBMOTg1LDQ5My4wNTQ3IEw5ODUsNDc4LjA1NDcgTDk3NSw0NjguMDU0NyBMNiw0NjguMDU0NyIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTk3NSw0NjguMDU0NyBMOTc1LDQ3OC4wNTQ3IEw5ODUsNDc4LjA1NDcgTDk3NSw0NjguMDU0NyIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTEyLjg5MzIiIHg9IjQzNC42MTQxIiB5PSI0ODUuMTIxNiI+JiMyMDMxNjsmIzI2OTg5OyYjMzI3NzM7QSYjMTIzNjQ7JiMyMDgwODsmIzEyMzk1OyYjMjYzNTY7JiMyNjAzMjs8L3RleHQ+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtZW50aXR5LTE9InBhcnQzIiBkYXRhLWVudGl0eS0yPSJwYXJ0NCIgaWQ9Im1zZzExIj48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjU2NS45NTQ0LDUxNS4zMjAzLDU3NS45NTQ0LDUxOS4zMjAzLDU2NS45NTQ0LDUyMy4zMjAzLDU2OS45NTQ0LDUxOS4zMjAzIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjM1NS44NTY3IiB4Mj0iNTcxLjk1NDQiIHkxPSI1MTkuMzIwMyIgeTI9IjUxOS4zMjAzIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTk4LjA5NzciIHg9IjM2Mi44NTY3IiB5PSI1MTQuMjU0NCI+ZGVjcmVhc2UodmVyc2lvbj0xLCAmIzI1OTY4OyYjMzczMjc7PTMwKTwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtZW50aXR5LTE9InBhcnQ0IiBkYXRhLWVudGl0eS0yPSJwYXJ0NSIgaWQ9Im1zZzEyIj48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9Ijk0Ni4xMjE1LDU1OS41ODU5LDk1Ni4xMjE1LDU2My41ODU5LDk0Ni4xMjE1LDU2Ny41ODU5LDk1MC4xMjE1LDU2My41ODU5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjU3Ny45NTQ0IiB4Mj0iOTUyLjEyMTUiIHkxPSI1NjMuNTg1OSIgeTI9IjU2My41ODU5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjc2LjA1OTciIHg9IjU4NC45NTQ0IiB5PSI1NDMuMzg3MiI+VVBEQVRFIFNFVCAmIzIxNTEyOyYjMjY2ODQ7JiMyNTk2ODsgLT0gMzAsICYjMTI0OTY7JiMxMjU0MDsmIzEyNDcyOyYjMTI1MTk7JiMxMjUzMTsgKz0gMTwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNjcuMTM0OSIgeD0iNTg0Ljk1NDQiIHk9IjU1OC41MiI+V0hFUkUgJiMxMjQ5NjsmIzEyNTQwOyYjMTI0NzI7JiMxMjUxOTsmIzEyNTMxOyA9IDEgQU5EICYjMjE1MTI7JiMyNjY4NDsmIzI1OTY4OyAmZ3Q7PSAzMDwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtZW50aXR5LTE9InBhcnQ1IiBkYXRhLWVudGl0eS0yPSJwYXJ0NCIgaWQ9Im1zZzEzIj48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjU4OC45NTQ0LDU4OC43MTg4LDU3OC45NTQ0LDU5Mi43MTg4LDU4OC45NTQ0LDU5Ni43MTg4LDU4NC45NTQ0LDU5Mi43MTg4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6MiwyOyIgeDE9IjU4Mi45NTQ0IiB4Mj0iOTU3LjEyMTUiIHkxPSI1OTIuNzE4OCIgeTI9IjU5Mi43MTg4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTQuNTIyOSIgeD0iNTk0Ljk1NDQiIHk9IjU4Ny42NTI4Ij4xIHJvdyB1cGRhdGVkPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1lbnRpdHktMT0icGFydDQiIGRhdGEtZW50aXR5LTI9InBhcnQzIiBpZD0ibXNnMTQiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzY2Ljg1NjcsNjE3Ljg1MTYsMzU2Ljg1NjcsNjIxLjg1MTYsMzY2Ljg1NjcsNjI1Ljg1MTYsMzYyLjg1NjcsNjIxLjg1MTYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheToyLDI7IiB4MT0iMzYwLjg1NjciIHgyPSI1NzYuOTU0NCIgeTE9IjYyMS44NTE2IiB5Mj0iNjIxLjg1MTYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNiIgeD0iMzcyLjg1NjciIHk9IjYxNi43ODU2Ij4mIzI1MTA0OyYjMjExNTE7PC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1lbnRpdHktMT0icGFydDMiIGRhdGEtZW50aXR5LTI9InBhcnQxIiBpZD0ibXNnMTUiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNDQuNzg4NSw2NDYuOTg0NCwzNC43ODg1LDY1MC45ODQ0LDQ0Ljc4ODUsNjU0Ljk4NDQsNDAuNzg4NSw2NTAuOTg0NCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjIsMjsiIHgxPSIzOC43ODg1IiB4Mj0iMzM5Ljg1NjciIHkxPSI2NTAuOTg0NCIgeTI9IjY1MC45ODQ0Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTI5LjA1NDMiIHg9IjUwLjc4ODUiIHk9IjY0NS45MTg1Ij4mIzI1MTczOyYjMjA5ODY7JiMyMzQzNjsmIzIwMTAyOyYjNjUyODg7JiMyNzUzMTs6IDcwJiMyMDQ5MTsmIzY1Mjg5OzwvdGV4dD48L2c+PHBhdGggZD0iTTYsNjYzLjk4NDQgTDYsNjg4Ljk4NDQgTDk4NSw2ODguOTg0NCBMOTg1LDY3My45ODQ0IEw5NzUsNjYzLjk4NDQgTDYsNjYzLjk4NDQiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik05NzUsNjYzLjk4NDQgTDk3NSw2NzMuOTg0NCBMOTg1LDY3My45ODQ0IEw5NzUsNjYzLjk4NDQiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIwMy45MTg3IiB4PSIzODkuMTAxMyIgeT0iNjgxLjA1MTMiPiYjMjAzMTY7JiMyNjk4OTsmIzMyNzczO0ImIzEyMzk4OyYjMjYzNTY7JiMyNjAzMjsmIzY1Mjg4OyYjMjcwMDU7JiMzNTI1MTsmIzEyNTI1OyYjMTI0ODM7JiMxMjQ2MzsmIzIyODMzOyYjMjU5NDM7JiM2NTI4OTs8L3RleHQ+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtZW50aXR5LTE9InBhcnQzIiBkYXRhLWVudGl0eS0yPSJwYXJ0NCIgaWQ9Im1zZzE2Ij48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjU2NS45NTQ0LDcxMS4yNSw1NzUuOTU0NCw3MTUuMjUsNTY1Ljk1NDQsNzE5LjI1LDU2OS45NTQ0LDcxNS4yNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzNTAuODU2NyIgeDI9IjU3MS45NTQ0IiB5MT0iNzE1LjI1IiB5Mj0iNzE1LjI1Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTk4LjA5NzciIHg9IjM1Ny44NTY3IiB5PSI3MTAuMTg0MSI+ZGVjcmVhc2UodmVyc2lvbj0xLCAmIzI1OTY4OyYjMzczMjc7PTIwKTwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtZW50aXR5LTE9InBhcnQ0IiBkYXRhLWVudGl0eS0yPSJwYXJ0NSIgaWQ9Im1zZzE3Ij48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9Ijk0Ni4xMjE1LDc1NS41MTU2LDk1Ni4xMjE1LDc1OS41MTU2LDk0Ni4xMjE1LDc2My41MTU2LDk1MC4xMjE1LDc1OS41MTU2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjU3Ny45NTQ0IiB4Mj0iOTUyLjEyMTUiIHkxPSI3NTkuNTE1NiIgeTI9Ijc1OS41MTU2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjc2LjA1OTciIHg9IjU4NC45NTQ0IiB5PSI3MzkuMzE2OSI+VVBEQVRFIFNFVCAmIzIxNTEyOyYjMjY2ODQ7JiMyNTk2ODsgLT0gMjAsICYjMTI0OTY7JiMxMjU0MDsmIzEyNDcyOyYjMTI1MTk7JiMxMjUzMTsgKz0gMTwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNjcuMTM0OSIgeD0iNTg0Ljk1NDQiIHk9Ijc1NC40NDk3Ij5XSEVSRSAmIzEyNDk2OyYjMTI1NDA7JiMxMjQ3MjsmIzEyNTE5OyYjMTI1MzE7ID0gMSBBTkQgJiMyMTUxMjsmIzI2Njg0OyYjMjU5Njg7ICZndDs9IDIwPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1lbnRpdHktMT0icGFydDUiIGRhdGEtZW50aXR5LTI9InBhcnQ0IiBpZD0ibXNnMTgiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNTg4Ljk1NDQsNzg0LjY0ODQsNTc4Ljk1NDQsNzg4LjY0ODQsNTg4Ljk1NDQsNzkyLjY0ODQsNTg0Ljk1NDQsNzg4LjY0ODQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheToyLDI7IiB4MT0iNTgyLjk1NDQiIHgyPSI5NTcuMTIxNSIgeTE9Ijc4OC42NDg0IiB5Mj0iNzg4LjY0ODQiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDEuMjk1OSIgeD0iNTk0Ljk1NDQiIHk9Ijc4My41ODI1Ij4wIHJvd3MgdXBkYXRlZDwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtZW50aXR5LTE9InBhcnQ0IiBkYXRhLWVudGl0eS0yPSJwYXJ0NSIgaWQ9Im1zZzE5Ij48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9Ijk0Ni4xMjE1LDgxMy43ODEzLDk1Ni4xMjE1LDgxNy43ODEzLDk0Ni4xMjE1LDgyMS43ODEzLDk1MC4xMjE1LDgxNy43ODEzIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjU3Ny45NTQ0IiB4Mj0iOTUyLjEyMTUiIHkxPSI4MTcuNzgxMyIgeTI9IjgxNy43ODEzIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTE4LjA3MjgiIHg9IjU4NC45NTQ0IiB5PSI4MTIuNzE1MyI+U0VMRUNUICYjMTI0OTY7JiMxMjU0MDsmIzEyNDcyOyYjMTI1MTk7JiMxMjUzMTs8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLWVudGl0eS0xPSJwYXJ0NSIgZGF0YS1lbnRpdHktMj0icGFydDQiIGlkPSJtc2cyMCI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI1ODguOTU0NCw4NDIuOTE0MSw1NzguOTU0NCw4NDYuOTE0MSw1ODguOTU0NCw4NTAuOTE0MSw1ODQuOTU0NCw4NDYuOTE0MSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjIsMjsiIHgxPSI1ODIuOTU0NCIgeDI9Ijk1Ny4xMjE1IiB5MT0iODQ2LjkxNDEiIHkyPSI4NDYuOTE0MSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY2Ljc3NzMiIHg9IjU5NC45NTQ0IiB5PSI4NDEuODQ4MSI+dmVyc2lvbj0yPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1lbnRpdHktMT0icGFydDQiIGRhdGEtZW50aXR5LTI9InBhcnQzIiBpZD0ibXNnMjEiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzYxLjg1NjcsODcyLjA0NjksMzUxLjg1NjcsODc2LjA0NjksMzYxLjg1NjcsODgwLjA0NjksMzU3Ljg1NjcsODc2LjA0NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheToyLDI7IiB4MT0iMzU1Ljg1NjciIHgyPSI1NzYuOTU0NCIgeTE9Ijg3Ni4wNDY5IiB5Mj0iODc2LjA0NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNjAuMTc2OCIgeD0iMzY3Ljg1NjciIHk9Ijg3MC45ODEiPk9wdGltaXN0aWNMb2NrRXhjZXB0aW9uPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1lbnRpdHktMT0icGFydDMiIGRhdGEtZW50aXR5LTI9InBhcnQyIiBpZD0ibXNnMjIiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTEyLjM3OTEsOTAxLjE3OTcsMTAyLjM3OTEsOTA1LjE3OTcsMTEyLjM3OTEsOTA5LjE3OTcsMTA4LjM3OTEsOTA1LjE3OTciIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheToyLDI7IiB4MT0iMTA2LjM3OTEiIHgyPSIzNDQuODU2NyIgeTE9IjkwNS4xNzk3IiB5Mj0iOTA1LjE3OTciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzguNTEyNCIgeD0iMTE4LjM3OTEiIHk9IjkwMC4xMTM4Ij4mIzEyNDU2OyYjMTI1MjE7JiMxMjU0MDs6ICYjMjAxODI7JiMxMjM5ODsmIzI1MTczOyYjMjA5ODY7JiMxMjM5MjsmIzMxNDc4OyYjMjE1MTI7PC90ZXh0PjwvZz48cGF0aCBkPSJNMzQsOTE4LjE3OTcgTDM0LDk0My4xNzk3IEwxNjcsOTQzLjE3OTcgTDE2Nyw5MjguMTc5NyBMMTU3LDkxOC4xNzk3IEwzNCw5MTguMTc5NyIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTE1Nyw5MTguMTc5NyBMMTU3LDkyOC4xNzk3IEwxNjcsOTI4LjE3OTcgTDE1Nyw5MTguMTc5NyIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTEyLjkxODYiIHg9IjQwIiB5PSI5MzUuMjQ2NiI+JiMyMDMxNjsmIzI2OTg5OyYjMzI3NzM7QiYjMTIzOTk7JiMxMjUyMjsmIzEyNDg4OyYjMTI1MjE7JiMxMjQ1Mjs8L3RleHQ+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtZW50aXR5LTE9InBhcnQyIiBkYXRhLWVudGl0eS0yPSJwYXJ0MyIgaWQ9Im1zZzIzIj48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjMyOC44NTY3LDk2NS40NDUzLDMzOC44NTY3LDk2OS40NDUzLDMyOC44NTY3LDk3My40NDUzLDMzMi44NTY3LDk2OS40NDUzIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEwMS4zNzkxIiB4Mj0iMzM0Ljg1NjciIHkxPSI5NjkuNDQ1MyIgeTI9Ijk2OS40NDUzIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjE1LjQ3NzYiIHg9IjEwOC4zNzkxIiB5PSI5NjQuMzc5NCI+JiMyNTE3MzsmIzIwOTg2OyhXSDAwMSwgUFJPRDAwMSwgJiMyNTk2ODsmIzM3MzI3Oz0yMCk8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLWVudGl0eS0xPSJwYXJ0MyIgZGF0YS1lbnRpdHktMj0icGFydDQiIGlkPSJtc2cyNCI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI1NjUuOTU0NCw5OTQuNTc4MSw1NzUuOTU0NCw5OTguNTc4MSw1NjUuOTU0NCwxMDAyLjU3ODEsNTY5Ljk1NDQsOTk4LjU3ODEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzUwLjg1NjciIHgyPSI1NzEuOTU0NCIgeTE9Ijk5OC41NzgxIiB5Mj0iOTk4LjU3ODEiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNjEuNjI0IiB4PSIzNTcuODU2NyIgeT0iOTkzLjUxMjIiPmZpbmRCeUxvY2F0aW9uQW5kSXRlbSgpPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1lbnRpdHktMT0icGFydDQiIGRhdGEtZW50aXR5LTI9InBhcnQ1IiBpZD0ibXNnMjUiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iOTQ2LjEyMTUsMTAyMy43MTA5LDk1Ni4xMjE1LDEwMjcuNzEwOSw5NDYuMTIxNSwxMDMxLjcxMDksOTUwLjEyMTUsMTAyNy43MTA5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjU3Ny45NTQ0IiB4Mj0iOTUyLjEyMTUiIHkxPSIxMDI3LjcxMDkiIHkyPSIxMDI3LjcxMDkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0OC45NDA0IiB4PSI1ODQuOTU0NCIgeT0iMTAyMi42NDUiPlNFTEVDVDwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtZW50aXR5LTE9InBhcnQ1IiBkYXRhLWVudGl0eS0yPSJwYXJ0NCIgaWQ9Im1zZzI2Ij48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjU4OC45NTQ0LDEwNTIuODQzOCw1NzguOTU0NCwxMDU2Ljg0MzgsNTg4Ljk1NDQsMTA2MC44NDM4LDU4NC45NTQ0LDEwNTYuODQzOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjIsMjsiIHgxPSI1ODIuOTU0NCIgeDI9Ijk1Ny4xMjE1IiB5MT0iMTA1Ni44NDM4IiB5Mj0iMTA1Ni44NDM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTY0LjYyMDIiIHg9IjU5NC45NTQ0IiB5PSIxMDUxLjc3NzgiPiYjMjIzMTI7JiMyNDIzNTsoJiMyNTk2ODsmIzM3MzI3Oz03MCwgdmVyc2lvbj0yKTwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtZW50aXR5LTE9InBhcnQ0IiBkYXRhLWVudGl0eS0yPSJwYXJ0MyIgaWQ9Im1zZzI3Ij48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjM2MS44NTY3LDEwODEuOTc2NiwzNTEuODU2NywxMDg1Ljk3NjYsMzYxLjg1NjcsMTA4OS45NzY2LDM1Ny44NTY3LDEwODUuOTc2NiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjIsMjsiIHgxPSIzNTUuODU2NyIgeDI9IjU3Ni45NTQ0IiB5MT0iMTA4NS45NzY2IiB5Mj0iMTA4NS45NzY2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAyLjkyMDkiIHg9IjM2Ny44NTY3IiB5PSIxMDgwLjkxMDYiPiYjMjIzMTI7JiMyNDIzNTsodmVyc2lvbj0yKTwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtZW50aXR5LTE9InBhcnQzIiBkYXRhLWVudGl0eS0yPSJwYXJ0NCIgaWQ9Im1zZzI4Ij48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjU2NS45NTQ0LDExMTEuMTA5NCw1NzUuOTU0NCwxMTE1LjEwOTQsNTY1Ljk1NDQsMTExOS4xMDk0LDU2OS45NTQ0LDExMTUuMTA5NCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzNTAuODU2NyIgeDI9IjU3MS45NTQ0IiB5MT0iMTExNS4xMDk0IiB5Mj0iMTExNS4xMDk0Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTk4LjA5NzciIHg9IjM1Ny44NTY3IiB5PSIxMTEwLjA0MzUiPmRlY3JlYXNlKHZlcnNpb249MiwgJiMyNTk2ODsmIzM3MzI3Oz0yMCk8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLWVudGl0eS0xPSJwYXJ0NCIgZGF0YS1lbnRpdHktMj0icGFydDUiIGlkPSJtc2cyOSI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI5NDYuMTIxNSwxMTU1LjM3NSw5NTYuMTIxNSwxMTU5LjM3NSw5NDYuMTIxNSwxMTYzLjM3NSw5NTAuMTIxNSwxMTU5LjM3NSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI1NzcuOTU0NCIgeDI9Ijk1Mi4xMjE1IiB5MT0iMTE1OS4zNzUiIHkyPSIxMTU5LjM3NSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI3Ni4wNTk3IiB4PSI1ODQuOTU0NCIgeT0iMTEzOS4xNzYzIj5VUERBVEUgU0VUICYjMjE1MTI7JiMyNjY4NDsmIzI1OTY4OyAtPSAyMCwgJiMxMjQ5NjsmIzEyNTQwOyYjMTI0NzI7JiMxMjUxOTsmIzEyNTMxOyArPSAxPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI2Ny4xMzQ5IiB4PSI1ODQuOTU0NCIgeT0iMTE1NC4zMDkxIj5XSEVSRSAmIzEyNDk2OyYjMTI1NDA7JiMxMjQ3MjsmIzEyNTE5OyYjMTI1MzE7ID0gMiBBTkQgJiMyMTUxMjsmIzI2Njg0OyYjMjU5Njg7ICZndDs9IDIwPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1lbnRpdHktMT0icGFydDUiIGRhdGEtZW50aXR5LTI9InBhcnQ0IiBpZD0ibXNnMzAiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNTg4Ljk1NDQsMTE4NC41MDc4LDU3OC45NTQ0LDExODguNTA3OCw1ODguOTU0NCwxMTkyLjUwNzgsNTg0Ljk1NDQsMTE4OC41MDc4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6MiwyOyIgeDE9IjU4Mi45NTQ0IiB4Mj0iOTU3LjEyMTUiIHkxPSIxMTg4LjUwNzgiIHkyPSIxMTg4LjUwNzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5NC41MjI5IiB4PSI1OTQuOTU0NCIgeT0iMTE4My40NDE5Ij4xIHJvdyB1cGRhdGVkPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1lbnRpdHktMT0icGFydDQiIGRhdGEtZW50aXR5LTI9InBhcnQzIiBpZD0ibXNnMzEiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzYxLjg1NjcsMTIxMy42NDA2LDM1MS44NTY3LDEyMTcuNjQwNiwzNjEuODU2NywxMjIxLjY0MDYsMzU3Ljg1NjcsMTIxNy42NDA2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6MiwyOyIgeDE9IjM1NS44NTY3IiB4Mj0iNTc2Ljk1NDQiIHkxPSIxMjE3LjY0MDYiIHkyPSIxMjE3LjY0MDYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNiIgeD0iMzY3Ljg1NjciIHk9IjEyMTIuNTc0NyI+JiMyNTEwNDsmIzIxMTUxOzwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtZW50aXR5LTE9InBhcnQzIiBkYXRhLWVudGl0eS0yPSJwYXJ0MiIgaWQ9Im1zZzMyIj48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjExMi4zNzkxLDEyNDIuNzczNCwxMDIuMzc5MSwxMjQ2Ljc3MzQsMTEyLjM3OTEsMTI1MC43NzM0LDEwOC4zNzkxLDEyNDYuNzczNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjIsMjsiIHgxPSIxMDYuMzc5MSIgeDI9IjM0NC44NTY3IiB5MT0iMTI0Ni43NzM0IiB5Mj0iMTI0Ni43NzM0Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTI5LjA1NDMiIHg9IjExOC4zNzkxIiB5PSIxMjQxLjcwNzUiPiYjMjUxNzM7JiMyMDk4NjsmIzIzNDM2OyYjMjAxMDI7JiM2NTI4ODsmIzI3NTMxOzogNTAmIzIwNDkxOyYjNjUyODk7PC90ZXh0PjwvZz48P3BsYW50dW1sLXNyYyByTEpWSnpmRzY3dGxOXzc1NXAwMzBwTUIyS2JEdzIzSG40bVpCQnhpZlBReGY1NGZlVE5ERHNZM2U5QUNQQzVicU1HLWc3Q0lHUUJQM3VWUjd0RXpySnR2Qi1vTTBnS0MyQ3BEUDR6alJoLVUtdnJwbGstZWFoZ0NXMUpvblpsRHMyb0l4Mk45N2pxS0RoM3M2VWlyaDVNblZld3JodFVyZDc1dVROanFabExKaEVqT2d2M0FUXzlaeHd3c29KMjJnQ2Y5a0J4UUNtdkZSckVQT0VTMXBvSTRmMmc5S2FBOGdwMG9oSVloQThBSVF2QThIYTFHZUY3a2g4Z2VpaFdxWm5BbzhiNm1UUWttVVNSNDE1TE81MUc0OHNKbGM1b00zM3Izemdqc0tMSE9ONE9DbXQ0RVFkTElNcldfbVRlOVBSR212VkZ2RkowdEZua1lCbTZtZUZtLTdxYmpLc0IwU0duWmltQmxQQkZKMDVYdVJZVTIxdXBZc1NfaVFzeFNEc2ZnOEFxOUFjZ25RcHBoQzRxVTBOV1huTUZ5LWVtaTJnZWFudUZuc0JJQUxqb1pKQWthTEwtZDU4MThVMlJ5OTBmWk9zRW1DMU1VM21GUGxwMHNLdm9odGVpQldhejNHRHdhUnRSQmRBbEhidWtuMFMzaGxEX1l4NnVxSmhieE8wcWI1VGVCdnRUcXFTdy15TERSZVFxSkZ1SEV4M19Od0c2T25zTlFsNG5Gc1pSMHF6dzlWT3BKVVBCOXVOSjlzQnFtVGl3TzdiblpJNG1ZRWpwc0RPeDl3YWR2c0xtZTYwckp2YjR3ekpiWmxxUF8wWXk3dXZHUXJXbHJWVncyekd6cWZVNEgxX3hkU01rMkVoX0hKek9PakswY0pQMC1NbGVYQVItNHJHSFRJbkpoZlBzSEF2Mmp6cFBkLWlzTWZaYWdmOW9fbGptbXV3UXk3TzI5blllb0NWSlJkMG1YRjhfSlBLbG9CWmJzSzNNQVItaXZEaEdSeDktdW1WdUREelgtUmxYQ0R2SGtUZElEYWV1Qi1tMHQ1TTF4TUpvUktBS0xJUTRmSlpUckFWbkFIMGJwTlJqeHBXUzBReVRPX3FYbGZzUHpzcDVUaWQ4d1ZObkotYUc5My1leHhwSXhPYVF5ZFpFWGpPRl9Gdmljc2dBOTdKSVFwQ0IxdmZienc3YmNYdnBkVXdTQnRwclQ3bFRFYnJ5MD8+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_17">在庫管理向け楽観ロックのベストプラクティス<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>ポイント</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>在庫チェック併用</strong></td>
<td><code>AND 合格数 &gt;= #{quantity}</code> で在庫不足と楽観ロック失敗を同時に検出</td>
</tr>
<tr>
<td><strong>エラー原因の特定</strong></td>
<td>更新失敗時はバージョン比較で楽観ロックか在庫不足かを判定</td>
</tr>
<tr>
<td><strong>リトライ戦略</strong></td>
<td>楽観ロック失敗時は最新在庫を再取得して再試行</td>
</tr>
<tr>
<td><strong>バッチ処理の考慮</strong></td>
<td>大量払出はバッチサイズを小さくして競合を軽減</td>
</tr>
<tr>
<td><strong>調整の双方向対応</strong></td>
<td>棚卸調整は <code>+#{adjustmentQuantity}</code> でプラス・マイナス両対応</td>
</tr>
<tr>
<td><strong>マイナス在庫防止</strong></td>
<td>調整時も <code>合格数 + #{adjustmentQuantity} &gt;= 0</code> でチェック</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="285">28.5 まとめ<a class="headerlink" href="#285" title="Permanent link">&para;</a></h2>
<p>本章では、在庫管理の設計について学びました。</p>
<h3 id="_18">学んだこと<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>在庫情報の設計</strong></li>
<li>場所コード × 品目コードでの一意管理</li>
<li>在庫状態（合格・不良・未検査）ごとの数量管理</li>
<li>
<p>在庫増減・状態変更の実装</p>
</li>
<li>
<p><strong>払出業務の設計</strong></p>
</li>
<li>払出指示から払出実行までのフロー</li>
<li>BOM との連携による自動展開</li>
<li>
<p>在庫との連動</p>
</li>
<li>
<p><strong>棚卸業務の設計</strong></p>
</li>
<li>棚卸表発行から確定までのフロー</li>
<li>帳簿在庫と実棚在庫の差異分析</li>
<li>在庫調整履歴の記録</li>
</ol>
<h3 id="er-28">ER 図（第28章）<a class="headerlink" href="#er-28" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjQxOXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6OTY2cHg7aGVpZ2h0OjQxOXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDk2NiA0MTkiIHdpZHRoPSI5NjZweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjIzMTI7JiMyNDIzNTsmIzMxNjQ5OyYjMjk3MDI7JiMxMjM5ODtFUiYjMjIyNTk7PC90aXRsZT48ZGVmcy8+PGc+PGcgY2xhc3M9InRpdGxlIiBkYXRhLXNvdXJjZS1saW5lPSIxIj48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA0LjM0MzQiIHg9IjQyNC4xMzUyIiB5PSIyMi45OTUxIj4mIzIyMzEyOyYjMjQyMzU7JiMzMTY0OTsmIzI5NzAyOyYjMTIzOTg7RVImIzIyMjU5OzwvdGV4dD48L2c+PCEtLWNsYXNzID8/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uIiBkYXRhLXNvdXJjZS1saW5lPSI1IiBpZD0iZW50MDAwMiI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxNDUuNzgxMyIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTc0LjAxODIiIHg9IjciIHk9IjQ0LjI5NjkiLz48ZWxsaXBzZSBjeD0iNjEuNzU5MiIgY3k9IjYwLjI5NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTY1Ljg2ODYsNjYuMjk2OSBMNTguMTQ5OSw2Ni4yOTY5IEw1OC4xNDk5LDUzLjkwNjMgTDY1Ljg2ODYsNTMuOTA2MyBMNjUuODY4Niw1Ni4wNjI1IEw2MC42MDMsNTYuMDYyNSBMNjAuNjAzLDU4LjczNDQgTDY1LjM2ODYsNTguNzM0NCBMNjUuMzY4Niw2MC44OTA2IEw2MC42MDMsNjAuODkwNiBMNjAuNjAzLDY0LjE0MDYgTDY1Ljg2ODYsNjQuMTQwNiBMNjUuODY4Niw2Ni4yOTY5IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iODIuMjU5MiIgeT0iNjUuMTQzNiI+JiMyMjMxMjsmIzI0MjM1OyYjMjQ3NzM7JiMyMjU3Nzs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iOCIgeDI9IjE4MC4wMTgyIiB5MT0iNzYuMjk2OSIgeTI9Ijc2LjI5NjkiLz48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IklFX01BTkRBVE9SWSI+PGVsbGlwc2UgY3g9IjE4IiBjeT0iODkuOTQ1MyIgZmlsbD0iIzAwMDAwMCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0OC4wMTgyIiB4PSIyNyIgeT0iOTMuMjkyIj4mIzIyNTgwOyYjMjUxNTI7JiMxMjQ2NzsmIzEyNTQwOyYjMTI0ODk7ICYjMTcxO1BLJiMxODc7ICYjMTcxO0ZLJiMxODc7PC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iSUVfTUFOREFUT1JZIj48ZWxsaXBzZSBjeD0iMTgiIGN5PSIxMDYuMjQyMiIgZmlsbD0iIzAwMDAwMCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0OC4wMTgyIiB4PSIyNyIgeT0iMTA5LjU4ODkiPiYjMjE2OTc7JiMzMDQ0NjsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsgJiMxNzE7UEsmIzE4NzsgJiMxNzE7RksmIzE4Nzs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjgiIHgyPSIxODAuMDE4MiIgeTE9IjExNi44OTA2IiB5Mj0iMTE2Ljg5MDYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSIxMyIgeT0iMTMzLjg4NTciPiYjMjIzMTI7JiMyNDIzNTsmIzI1OTY4OyYjMzczMjc7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQxLjk5OTgiIHg9IjEzIiB5PSIxNTAuMTgyNiI+JiMyMTUxMjsmIzI2Njg0OyYjMjU5Njg7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQxLjk5OTgiIHg9IjEzIiB5PSIxNjYuNDc5NSI+JiMxOTk4MTsmIzMzMzkxOyYjMjU5Njg7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjEzIiB5PSIxODIuNzc2NCI+JiMyNjQxMDsmIzI2OTA4OyYjMjY2MTk7JiMyNTk2ODs8L3RleHQ+PC9nPjwhLS1jbGFzcyA/Pz8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMTUiIGlkPSJlbnQwMDAzIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjExMy4xODc1IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNDkuMjAzNyIgeD0iMjE2LjQxIiB5PSI2MC41OTY5Ii8+PGVsbGlwc2UgY3g9IjI0MC4wNTE5IiBjeT0iNzYuNTk2OSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMjQ0LjE2MTIsODIuNTk2OSBMMjM2LjQ0MjUsODIuNTk2OSBMMjM2LjQ0MjUsNzAuMjA2MyBMMjQ0LjE2MTIsNzAuMjA2MyBMMjQ0LjE2MTIsNzIuMzYyNSBMMjM4Ljg5NTYsNzIuMzYyNSBMMjM4Ljg5NTYsNzUuMDM0NCBMMjQzLjY2MTIsNzUuMDM0NCBMMjQzLjY2MTIsNzcuMTkwNiBMMjM4Ljg5NTYsNzcuMTkwNiBMMjM4Ljg5NTYsODAuNDQwNiBMMjQ0LjE2MTIsODAuNDQwNiBMMjQ0LjE2MTIsODIuNTk2OSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk3Ljk5OTYiIHg9IjI1NS45NzIzIiB5PSI4MS40NDM2Ij4mIzI1MTczOyYjMjA5ODY7JiMyNTM1MTsmIzMxMDM0OyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyMTcuNDEiIHgyPSIzNjQuNjEzNyIgeTE9IjkyLjU5NjkiIHkyPSI5Mi41OTY5Ii8+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJJRV9NQU5EQVRPUlkiPjxlbGxpcHNlIGN4PSIyMjcuNDEiIGN5PSIxMDYuMjQ1MyIgZmlsbD0iIzAwMDAwMCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyMy4yMDM3IiB4PSIyMzYuNDEiIHk9IjEwOS41OTIiPiYjMjUxNzM7JiMyMDk4NjsmIzI1MzUxOyYjMzEwMzQ7JiMzMDA1ODsmIzIxNDk1OyAmIzE3MTtQSyYjMTg3OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjE3LjQxIiB4Mj0iMzY0LjYxMzciIHkxPSIxMTYuODkzOCIgeTI9IjExNi44OTM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA4LjgxNDEiIHg9IjIyMi40MSIgeT0iMTMzLjg4ODkiPiYjMTI0NTg7JiMxMjU0MDsmIzEyNDgwOyYjMzAwNTg7JiMyMTQ5NTsgJiMxNzE7RksmIzE4Nzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iMjIyLjQxIiB5PSIxNTAuMTg1NyI+JiMyNTE3MzsmIzIwOTg2OyYjMjUzNTE7JiMzMTAzNDsmIzI2MDg1OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDguODE0MSIgeD0iMjIyLjQxIiB5PSIxNjYuNDgyNiI+JiMyMjU4MDsmIzI1MTUyOyYjMTI0Njc7JiMxMjU0MDsmIzEyNDg5OyAmIzE3MTtGSyYjMTg3OzwvdGV4dD48L2c+PCEtLWNsYXNzID8/Pz8/Pz8/Py0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Ii4uLi4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMjMiIGlkPSJlbnQwMDA0Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjEyOS40ODQ0IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxODguMDE4MiIgeD0iMTk3IiB5PSIyNjYuMzc2OSIvPjxlbGxpcHNlIGN4PSIyMjUuNTA4NCIgY3k9IjI4Mi4zNzY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0yMjkuNjE3OCwyODguMzc2OSBMMjIxLjg5OTEsMjg4LjM3NjkgTDIyMS44OTkxLDI3NS45ODYzIEwyMjkuNjE3OCwyNzUuOTg2MyBMMjI5LjYxNzgsMjc4LjE0MjUgTDIyNC4zNTIyLDI3OC4xNDI1IEwyMjQuMzUyMiwyODAuODE0NCBMMjI5LjExNzgsMjgwLjgxNDQgTDIyOS4xMTc4LDI4Mi45NzA2IEwyMjQuMzUyMiwyODIuOTcwNiBMMjI0LjM1MjIsMjg2LjIyMDYgTDIyOS42MTc4LDI4Ni4yMjA2IEwyMjkuNjE3OCwyODguMzc2OSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyNS45OTk1IiB4PSIyNDIuNTEwMyIgeT0iMjg3LjIyMzYiPiYjMjUxNzM7JiMyMDk4NjsmIzI1MzUxOyYjMzEwMzQ7JiMyNjEyNjsmIzMyMDQ4OyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxOTgiIHgyPSIzODQuMDE4MiIgeTE9IjI5OC4zNzY5IiB5Mj0iMjk4LjM3NjkiLz48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IklFX01BTkRBVE9SWSI+PGVsbGlwc2UgY3g9IjIwOCIgY3k9IjMxMi4wMjUzIiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTYyLjAxODIiIHg9IjIxNyIgeT0iMzE1LjM3MiI+JiMyNTE3MzsmIzIwOTg2OyYjMjUzNTE7JiMzMTAzNDsmIzMwMDU4OyYjMjE0OTU7ICYjMTcxO1BLJiMxODc7ICYjMTcxO0ZLJiMxODc7PC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iSUVfTUFOREFUT1JZIj48ZWxsaXBzZSBjeD0iMjA4IiBjeT0iMzI4LjMyMjIiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDkuMjAzOCIgeD0iMjE3IiB5PSIzMzEuNjY4OSI+JiMyNTE3MzsmIzIwOTg2OyYjMzQ4OTI7JiMzMDA1ODsmIzIxNDk1OyAmIzE3MTtQSyYjMTg3OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTk4IiB4Mj0iMzg0LjAxODIiIHkxPSIzMzguOTcwNiIgeTI9IjMzOC45NzA2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA4LjgxNDEiIHg9IjIwMyIgeT0iMzU1Ljk2NTciPiYjMjE2OTc7JiMzMDQ0NjsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsgJiMxNzE7RksmIzE4Nzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjcuOTk5OSIgeD0iMjAzIiB5PSIzNzIuMjYyNiI+JiMyNDAzNzsmIzM4OTE4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSIyMDMiIHk9IjM4OC41NTk1Ij4mIzI1MTczOyYjMjA5ODY7JiMyNTk2ODsmIzM3MzI3OzwvdGV4dD48L2c+PCEtLWNsYXNzID8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjMyIiBpZD0iZW50MDAwNSI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxNDUuNzgxMyIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTM0LjgxNDEiIHg9IjQzMi42IiB5PSI0NC4yOTY5Ii8+PGVsbGlwc2UgY3g9IjQ2Mi4zNjY1IiBjeT0iNjAuMjk2OSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNNDY2LjQ3NTksNjYuMjk2OSBMNDU4Ljc1NzEsNjYuMjk2OSBMNDU4Ljc1NzEsNTMuOTA2MyBMNDY2LjQ3NTksNTMuOTA2MyBMNDY2LjQ3NTksNTYuMDYyNSBMNDYxLjIxMDIsNTYuMDYyNSBMNDYxLjIxMDIsNTguNzM0NCBMNDY1Ljk3NTksNTguNzM0NCBMNDY1Ljk3NTksNjAuODkwNiBMNDYxLjIxMDIsNjAuODkwNiBMNDYxLjIxMDIsNjQuMTQwNiBMNDY2LjQ3NTksNjQuMTQwNiBMNDY2LjQ3NTksNjYuMjk2OSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjQ3OS42NDc5IiB5PSI2NS4xNDM2Ij4mIzI1MTczOyYjMjA5ODY7JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjQzMy42IiB4Mj0iNTY2LjQxNDEiIHkxPSI3Ni4yOTY5IiB5Mj0iNzYuMjk2OSIvPjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iSUVfTUFOREFUT1JZIj48ZWxsaXBzZSBjeD0iNDQzLjYiIGN5PSI4OS45NDUzIiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTUuMjAzOSIgeD0iNDUyLjYiIHk9IjkzLjI5MiI+JiMyNTE3MzsmIzIwOTg2OyYjMzAwNTg7JiMyMTQ5NTsgJiMxNzE7UEsmIzE4Nzs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjQzMy42IiB4Mj0iNTY2LjQxNDEiIHkxPSIxMDAuNTkzOCIgeTI9IjEwMC41OTM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTIyLjgxNDEiIHg9IjQzOC42IiB5PSIxMTcuNTg4OSI+JiMyMDMxNjsmIzI2OTg5OyYjMjUzNTE7JiMzMTAzNDsmIzMwMDU4OyYjMjE0OTU7ICYjMTcxO0ZLJiMxODc7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI3Ljk5OTkiIHg9IjQzOC42IiB5PSIxMzMuODg1NyI+JiMyNDAzNzsmIzM4OTE4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDguODE0MSIgeD0iNDM4LjYiIHk9IjE1MC4xODI2Ij4mIzIyNTgwOyYjMjUxNTI7JiMxMjQ2NzsmIzEyNTQwOyYjMTI0ODk7ICYjMTcxO0ZLJiMxODc7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQxLjk5OTgiIHg9IjQzOC42IiB5PSIxNjYuNDc5NSI+JiMyNTE3MzsmIzIwOTg2OyYjMjYwODU7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExMS45OTk1IiB4PSI0MzguNiIgeT0iMTgyLjc3NjQiPiYjMjUxNzM7JiMyMDk4NjsmIzI1Mjg1OyYjMjQ0MDM7JiMzMjc3MzsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTs8L3RleHQ+PC9nPjwhLS1jbGFzcyA/Pz8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iNDIiIGlkPSJlbnQwMDA2Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjExMy4xODc1IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNjAuMDE4MyIgeD0iNDIwIiB5PSIyNzQuNTI2OSIvPjxlbGxpcHNlIGN4PSI0NDguNTA4NCIgY3k9IjI5MC41MjY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik00NTIuNjE3OCwyOTYuNTI2OSBMNDQ0Ljg5OTEsMjk2LjUyNjkgTDQ0NC44OTkxLDI4NC4xMzYzIEw0NTIuNjE3OCwyODQuMTM2MyBMNDUyLjYxNzgsMjg2LjI5MjUgTDQ0Ny4zNTIyLDI4Ni4yOTI1IEw0NDcuMzUyMiwyODguOTY0NCBMNDUyLjExNzgsMjg4Ljk2NDQgTDQ1Mi4xMTc4LDI5MS4xMjA2IEw0NDcuMzUyMiwyOTEuMTIwNiBMNDQ3LjM1MjIsMjk0LjM3MDYgTDQ1Mi42MTc4LDI5NC4zNzA2IEw0NTIuNjE3OCwyOTYuNTI2OSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk3Ljk5OTYiIHg9IjQ2NS41MTAzIiB5PSIyOTUuMzczNiI+JiMyNTE3MzsmIzIwOTg2OyYjMjYxMjY7JiMzMjA0ODsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iNDIxIiB4Mj0iNTc5LjAxODMiIHkxPSIzMDYuNTI2OSIgeTI9IjMwNi41MjY5Ii8+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJJRV9NQU5EQVRPUlkiPjxlbGxpcHNlIGN4PSI0MzEiIGN5PSIzMjAuMTc1MyIgZmlsbD0iIzAwMDAwMCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzNC4wMTgzIiB4PSI0NDAiIHk9IjMyMy41MjIiPiYjMjUxNzM7JiMyMDk4NjsmIzMwMDU4OyYjMjE0OTU7ICYjMTcxO1BLJiMxODc7ICYjMTcxO0ZLJiMxODc7PC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iSUVfTUFOREFUT1JZIj48ZWxsaXBzZSBjeD0iNDMxIiBjeT0iMzM2LjQ3MjIiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDkuMjAzOCIgeD0iNDQwIiB5PSIzMzkuODE4OSI+JiMyNTE3MzsmIzIwOTg2OyYjMzQ4OTI7JiMzMDA1ODsmIzIxNDk1OyAmIzE3MTtQSyYjMTg3OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDIxIiB4Mj0iNTc5LjAxODMiIHkxPSIzNDcuMTIwNiIgeTI9IjM0Ny4xMjA2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA4LjgxNDEiIHg9IjQyNiIgeT0iMzY0LjExNTciPiYjMjE2OTc7JiMzMDQ0NjsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsgJiMxNzE7RksmIzE4Nzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDEuOTk5OCIgeD0iNDI2IiB5PSIzODAuNDEyNiI+JiMyNTE3MzsmIzIwOTg2OyYjMjU5Njg7PC90ZXh0PjwvZz48IS0tY2xhc3MgPz8/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iNTAiIGlkPSJlbnQwMDA3Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjExMy4xODc1IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMjEuMjAzOSIgeD0iNzI5LjQxIiB5PSI2MC41OTY5Ii8+PGVsbGlwc2UgY3g9Ijc1My4wNTE5IiBjeT0iNzYuNTk2OSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNNzU3LjE2MTIsODIuNTk2OSBMNzQ5LjQ0MjUsODIuNTk2OSBMNzQ5LjQ0MjUsNzAuMjA2MyBMNzU3LjE2MTIsNzAuMjA2MyBMNzU3LjE2MTIsNzIuMzYyNSBMNzUxLjg5NTYsNzIuMzYyNSBMNzUxLjg5NTYsNzUuMDM0NCBMNzU2LjY2MTIsNzUuMDM0NCBMNzU2LjY2MTIsNzcuMTkwNiBMNzUxLjg5NTYsNzcuMTkwNiBMNzUxLjg5NTYsODAuNDQwNiBMNzU3LjE2MTIsODAuNDQwNiBMNzU3LjE2MTIsODIuNTk2OSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9Ijc2OC45NzIzIiB5PSI4MS40NDM2Ij4mIzI2ODQyOyYjMjEzNjg7JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjczMC40MSIgeDI9Ijg0OS42MTM5IiB5MT0iOTIuNTk2OSIgeTI9IjkyLjU5NjkiLz48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IklFX01BTkRBVE9SWSI+PGVsbGlwc2UgY3g9Ijc0MC40MSIgY3k9IjEwNi4yNDUzIiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTUuMjAzOSIgeD0iNzQ5LjQxIiB5PSIxMDkuNTkyIj4mIzI2ODQyOyYjMjEzNjg7JiMzMDA1ODsmIzIxNDk1OyAmIzE3MTtQSyYjMTg3OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNzMwLjQxIiB4Mj0iODQ5LjYxMzkiIHkxPSIxMTYuODkzOCIgeTI9IjExNi44OTM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA4LjgxNDEiIHg9IjczNS40MSIgeT0iMTMzLjg4ODkiPiYjMjI1ODA7JiMyNTE1MjsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsgJiMxNzE7RksmIzE4Nzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDEuOTk5OCIgeD0iNzM1LjQxIiB5PSIxNTAuMTg1NyI+JiMyNjg0MjsmIzIxMzY4OyYjMjYwODU7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjczNS40MSIgeT0iMTY2LjQ4MjYiPiYjMTI0NzM7JiMxMjQ4NjsmIzEyNTQwOyYjMTI0Nzk7JiMxMjQ3Mzs8L3RleHQ+PC9nPjwhLS1jbGFzcyA/Pz8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iNTgiIGlkPSJlbnQwMDA4Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjE0NS43ODEzIiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNjAuMDE4MyIgeD0iNjE1IiB5PSIyNTguMjI2OSIvPjxlbGxpcHNlIGN4PSI2NDMuNTA4NCIgY3k9IjI3NC4yMjY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik02NDcuNjE3OCwyODAuMjI2OSBMNjM5Ljg5OTEsMjgwLjIyNjkgTDYzOS44OTkxLDI2Ny44MzYzIEw2NDcuNjE3OCwyNjcuODM2MyBMNjQ3LjYxNzgsMjY5Ljk5MjUgTDY0Mi4zNTIyLDI2OS45OTI1IEw2NDIuMzUyMiwyNzIuNjY0NCBMNjQ3LjExNzgsMjcyLjY2NDQgTDY0Ny4xMTc4LDI3NC44MjA2IEw2NDIuMzUyMiwyNzQuODIwNiBMNjQyLjM1MjIsMjc4LjA3MDYgTDY0Ny42MTc4LDI3OC4wNzA2IEw2NDcuNjE3OCwyODAuMjI2OSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk3Ljk5OTYiIHg9IjY2MC41MTAzIiB5PSIyNzkuMDczNiI+JiMyNjg0MjsmIzIxMzY4OyYjMjYxMjY7JiMzMjA0ODsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iNjE2IiB4Mj0iNzc0LjAxODMiIHkxPSIyOTAuMjI2OSIgeTI9IjI5MC4yMjY5Ii8+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJJRV9NQU5EQVRPUlkiPjxlbGxpcHNlIGN4PSI2MjYiIGN5PSIzMDMuODc1MyIgZmlsbD0iIzAwMDAwMCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzNC4wMTgzIiB4PSI2MzUiIHk9IjMwNy4yMjIiPiYjMjY4NDI7JiMyMTM2ODsmIzMwMDU4OyYjMjE0OTU7ICYjMTcxO1BLJiMxODc7ICYjMTcxO0ZLJiMxODc7PC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iSUVfTUFOREFUT1JZIj48ZWxsaXBzZSBjeD0iNjI2IiBjeT0iMzIwLjE3MjIiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDkuMjAzOCIgeD0iNjM1IiB5PSIzMjMuNTE4OSI+JiMyNjg0MjsmIzIxMzY4OyYjMzQ4OTI7JiMzMDA1ODsmIzIxNDk1OyAmIzE3MTtQSyYjMTg3OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNjE2IiB4Mj0iNzc0LjAxODMiIHkxPSIzMzAuODIwNiIgeTI9IjMzMC44MjA2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA4LjgxNDEiIHg9IjYyMSIgeT0iMzQ3LjgxNTciPiYjMjE2OTc7JiMzMDQ0NjsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsgJiMxNzE7RksmIzE4Nzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iNjIxIiB5PSIzNjQuMTEyNiI+JiMyNDExNTsmIzMxODA3OyYjMjU5Njg7JiMzNzMyNzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iNjIxIiB5PSIzODAuNDA5NSI+JiMyMzQ1NTsmIzI2ODQyOyYjMjU5Njg7JiMzNzMyNzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iNjIxIiB5PSIzOTYuNzA2NCI+JiMyNDA0NjsmIzMwMDY0OyYjMjU5Njg7JiMzNzMyNzs8L3RleHQ+PC9nPjwhLS1jbGFzcyA/Pz8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iNjgiIGlkPSJlbnQwMDA5Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjE2Mi4wNzgxIiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNDkuMjAzNyIgeD0iODEwLjQxIiB5PSIyNTAuMDc2OSIvPjxlbGxpcHNlIGN4PSI4MzQuMDUxOSIgY3k9IjI2Ni4wNzY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik04MzguMTYxMiwyNzIuMDc2OSBMODMwLjQ0MjUsMjcyLjA3NjkgTDgzMC40NDI1LDI1OS42ODYzIEw4MzguMTYxMiwyNTkuNjg2MyBMODM4LjE2MTIsMjYxLjg0MjUgTDgzMi44OTU2LDI2MS44NDI1IEw4MzIuODk1NiwyNjQuNTE0NCBMODM3LjY2MTIsMjY0LjUxNDQgTDgzNy42NjEyLDI2Ni42NzA2IEw4MzIuODk1NiwyNjYuNjcwNiBMODMyLjg5NTYsMjY5LjkyMDYgTDgzOC4xNjEyLDI2OS45MjA2IEw4MzguMTYxMiwyNzIuMDc2OSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk3Ljk5OTYiIHg9Ijg0OS45NzIzIiB5PSIyNzAuOTIzNiI+JiMyMjMxMjsmIzI0MjM1OyYjMzU1MTk7JiMyNTk3MjsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iODExLjQxIiB4Mj0iOTU4LjYxMzciIHkxPSIyODIuMDc2OSIgeTI9IjI4Mi4wNzY5Ii8+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJJRV9NQU5EQVRPUlkiPjxlbGxpcHNlIGN4PSI4MjEuNDEiIGN5PSIyOTUuNzI1MyIgZmlsbD0iIzAwMDAwMCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyMy4yMDM3IiB4PSI4MzAuNDEiIHk9IjI5OS4wNzIiPiYjMjIzMTI7JiMyNDIzNTsmIzM1NTE5OyYjMjU5NzI7JiMzMDA1ODsmIzIxNDk1OyAmIzE3MTtQSyYjMTg3OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iODExLjQxIiB4Mj0iOTU4LjYxMzciIHkxPSIzMDYuMzczOCIgeTI9IjMwNi4zNzM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTQuODE0MiIgeD0iODE2LjQxIiB5PSIzMjMuMzY4OSI+JiMyNjg0MjsmIzIxMzY4OyYjMzAwNTg7JiMyMTQ5NTsgJiMxNzE7RksmIzE4Nzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA4LjgxNDEiIHg9IjgxNi40MSIgeT0iMzM5LjY2NTciPiYjMjE2OTc7JiMzMDQ0NjsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsgJiMxNzE7RksmIzE4Nzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA4LjgxNDEiIHg9IjgxNi40MSIgeT0iMzU1Ljk2MjYiPiYjMjI1ODA7JiMyNTE1MjsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsgJiMxNzE7RksmIzE4Nzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDEuOTk5OCIgeD0iODE2LjQxIiB5PSIzNzIuMjU5NSI+JiMzNTUxOTsmIzI1OTcyOyYjMjYwODU7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQxLjk5OTgiIHg9IjgxNi40MSIgeT0iMzg4LjU1NjQiPiYjMzU1MTk7JiMyNTk3MjsmIzI1OTY4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSI4MTYuNDEiIHk9IjQwNC44NTMyIj4mIzI5NzAyOyYjMzAwMDE7JiMxMjQ2NzsmIzEyNTQwOyYjMTI0ODk7PC90ZXh0PjwvZz48IS0tbGluayA/Pz8/Pz8/IHRvID8/Pz8/Pz8/Py0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDAzIiBkYXRhLWVudGl0eS0yPSJlbnQwMDA0IiBkYXRhLWxpbmstdHlwZT0iY3Jvd2Zvb3QiIGRhdGEtc291cmNlLWxpbmU9Ijc5IiBpZD0ibG5rMTAiPjxwYXRoIGNvZGVMaW5lPSI3OSIgZD0iTTI5MS4wMSwxODIuMjM2OSBDMjkxLjAxLDIxMC40NTY5IDI5MS4wMSwyMTguNjU2OSAyOTEuMDEsMjQ3LjkwNjkiIGZpbGw9Im5vbmUiIGlkPSImIzI1MTczOyYjMjA5ODY7JiMyNTM1MTsmIzMxMDM0OyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5Oy0mIzI1MTczOyYjMjA5ODY7JiMyNTM1MTsmIzMxMDM0OyYjMjYxMjY7JiMzMjA0ODsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjg3LjAxIiB4Mj0iMjk1LjAxIiB5MT0iMTc4LjIzNjkiIHkyPSIxNzguMjM2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyODcuMDEiIHgyPSIyOTUuMDEiIHkxPSIxODEuMjM2OSIgeTI9IjE4MS4yMzY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjI5MS4wMSIgeDI9IjI5MS4wMSIgeTE9IjE4Mi4yMzY5IiB5Mj0iMTc0LjIzNjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjkxLjAxIiB4Mj0iMjk3LjAxIiB5MT0iMjU3LjkwNjkiIHkyPSIyNjUuOTA2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyOTEuMDEiIHgyPSIyODUuMDEiIHkxPSIyNTcuOTA2OSIgeTI9IjI2NS45MDY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjI5MS4wMSIgeDI9IjI5MS4wMSIgeTE9IjI1Ny45MDY5IiB5Mj0iMjY1LjkwNjkiLz48ZWxsaXBzZSBjeD0iMjkxLjAxIiBjeT0iMjUxLjkwNjkiIGZpbGw9Im5vbmUiIHJ4PSI0IiByeT0iNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayA/Pz8/PyB0byA/Pz8/Pz8/LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDUiIGRhdGEtZW50aXR5LTI9ImVudDAwMDYiIGRhdGEtbGluay10eXBlPSJjcm93Zm9vdCIgZGF0YS1zb3VyY2UtbGluZT0iODAiIGlkPSJsbmsxMSI+PHBhdGggY29kZUxpbmU9IjgwIiBkPSJNNTAwLjAxLDE5OC41MDY5IEM1MDAuMDEsMjI1Ljg0NjkgNTAwLjAxLDIzMC40NDY5IDUwMC4wMSwyNTYuMDk2OSIgZmlsbD0ibm9uZSIgaWQ9IiYjMjUxNzM7JiMyMDk4NjsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTstJiMyNTE3MzsmIzIwOTg2OyYjMjYxMjY7JiMzMjA0ODsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDk2LjAxIiB4Mj0iNTA0LjAxIiB5MT0iMTk0LjUwNjkiIHkyPSIxOTQuNTA2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0OTYuMDEiIHgyPSI1MDQuMDEiIHkxPSIxOTcuNTA2OSIgeTI9IjE5Ny41MDY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjUwMC4wMSIgeDI9IjUwMC4wMSIgeTE9IjE5OC41MDY5IiB5Mj0iMTkwLjUwNjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNTAwLjAxIiB4Mj0iNTA2LjAxIiB5MT0iMjY2LjA5NjkiIHkyPSIyNzQuMDk2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI1MDAuMDEiIHgyPSI0OTQuMDEiIHkxPSIyNjYuMDk2OSIgeTI9IjI3NC4wOTY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjUwMC4wMSIgeDI9IjUwMC4wMSIgeTE9IjI2Ni4wOTY5IiB5Mj0iMjc0LjA5NjkiLz48ZWxsaXBzZSBjeD0iNTAwLjAxIiBjeT0iMjYwLjA5NjkiIGZpbGw9Im5vbmUiIHJ4PSI0IiByeT0iNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayA/Pz8/PyB0byA/Pz8/Pz8/LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDciIGRhdGEtZW50aXR5LTI9ImVudDAwMDgiIGRhdGEtbGluay10eXBlPSJjcm93Zm9vdCIgZGF0YS1zb3VyY2UtbGluZT0iODEiIGlkPSJsbmsxMiI+PHBhdGggY29kZUxpbmU9IjgxIiBkPSJNNzUyLjIxLDE4Mi4yMzY5IEM3NTIuMjEsMjA3Ljk3NjkgNzUyLjIxLDIxMi42OTY5IDc1Mi4yMSwyNDAuMTA2OSIgZmlsbD0ibm9uZSIgaWQ9IiYjMjY4NDI7JiMyMTM2ODsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTstJiMyNjg0MjsmIzIxMzY4OyYjMjYxMjY7JiMzMjA0ODsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNzQ4LjIxIiB4Mj0iNzU2LjIxIiB5MT0iMTc4LjIzNjkiIHkyPSIxNzguMjM2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI3NDguMjEiIHgyPSI3NTYuMjEiIHkxPSIxODEuMjM2OSIgeTI9IjE4MS4yMzY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9Ijc1Mi4yMSIgeDI9Ijc1Mi4yMSIgeTE9IjE4Mi4yMzY5IiB5Mj0iMTc0LjIzNjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNzUyLjIxIiB4Mj0iNzU4LjIxIiB5MT0iMjUwLjEwNjkiIHkyPSIyNTguMTA2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI3NTIuMjEiIHgyPSI3NDYuMjEiIHkxPSIyNTAuMTA2OSIgeTI9IjI1OC4xMDY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9Ijc1Mi4yMSIgeDI9Ijc1Mi4yMSIgeTE9IjI1MC4xMDY5IiB5Mj0iMjU4LjEwNjkiLz48ZWxsaXBzZSBjeD0iNzUyLjIxIiBjeT0iMjQ0LjEwNjkiIGZpbGw9Im5vbmUiIHJ4PSI0IiByeT0iNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayA/Pz8/PyB0byA/Pz8/Pz8/LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDciIGRhdGEtZW50aXR5LTI9ImVudDAwMDkiIGRhdGEtbGluay10eXBlPSJjcm93Zm9vdCIgZGF0YS1zb3VyY2UtbGluZT0iODIiIGlkPSJsbmsxMyI+PHBhdGggY29kZUxpbmU9IjgyIiBkPSJNODMwLjUxLDE4Mi4yMzY5IEM4MzAuNTEsMjA1LjM4NjkgODMwLjUxLDIwNi41NDY5IDgzMC41MSwyMzEuNzA2OSIgZmlsbD0ibm9uZSIgaWQ9IiYjMjY4NDI7JiMyMTM2ODsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTstJiMyMjMxMjsmIzI0MjM1OyYjMzU1MTk7JiMyNTk3MjsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iODI2LjUxIiB4Mj0iODM0LjUxIiB5MT0iMTc4LjIzNjkiIHkyPSIxNzguMjM2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI4MjYuNTEiIHgyPSI4MzQuNTEiIHkxPSIxODEuMjM2OSIgeTI9IjE4MS4yMzY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjgzMC41MSIgeDI9IjgzMC41MSIgeTE9IjE4Mi4yMzY5IiB5Mj0iMTc0LjIzNjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iODMwLjUxIiB4Mj0iODM2LjUxIiB5MT0iMjQxLjcwNjkiIHkyPSIyNDkuNzA2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI4MzAuNTEiIHgyPSI4MjQuNTEiIHkxPSIyNDEuNzA2OSIgeTI9IjI0OS43MDY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjgzMC41MSIgeDI9IjgzMC41MSIgeTE9IjI0MS43MDY5IiB5Mj0iMjQ5LjcwNjkiLz48ZWxsaXBzZSBjeD0iODMwLjUxIiBjeT0iMjM1LjcwNjkiIGZpbGw9Im5vbmUiIHJ4PSI0IiByeT0iNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48P3BsYW50dW1sLXNyYyBoTEhESmk5MDVEeEZBUmVzd0dxOEV6c3VDVHcwSEhFOTIwSXg4TTAyRDgyRDgySk9RQkc5OUs5WVFnbWJhODA4dUoxYlBpZWpkNHZCQlB0TVFFOWd0bEp6VkRfeHZoc0FRSjRaUzUxeldPak5SMG5tanM1TFpTREotM0cxdUY4eWRTc2QyZ2FCQmZGRTJjOG5CdDJ2V2RZTTBxMzhZY2Nud0FLWGdHd3JDTFMyMW5wS2ZhWWtNQk05OUlxaklVT0lZUEZaUDk4U0gtSG1fQnFnVlpCWV8zbUZsOGdBa01yczBFblU4c3I5QmMwcFJ6bG9rc0NYTEtUMzVWS19kU2tMcG1KOTJjbWtLQWs5WG1qQlFaaGJRc2pBQVVaMVlXdXhDbV9MV1JEZ0VjTEl5SnNLSTMwN3RPeTBzbk9EWXVQNzN4VHVRbHdJbkJTcVJlV3pRMzRhTVQ1ZTJmb0RqYmZabnpMTEJDbWVZV0xKVnhESXFVV2pIMnU4NFRFLVhxcHF5UW9SRWJwcng0aFRac0dMWWpOY2xySm52R1hZRnBfMnpabzRJaC1uTE1EUWZUNUVnclJqbXY4UVJZNVlDb1lIN1I5T1dHd2Z5b19sRmZ6V1N4clI0UURGMmtta0NtQ2g5WkNBeGF4UEVpY1B4WENCVVhadTQ2aU5FdVBJajZma09LU3Jwb0FsR2R1bS02d3lEbzdIa3Jpa3l0b2t6RERjV1YyQ3h3VTRXcUQzaTBrRVVoTXV1NFdibG0wMD8+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<h3 id="28_1">テーブル一覧（第28章）<a class="headerlink" href="#28_1" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>テーブル名（日本語）</th>
<th>Java エンティティ</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>場所マスタ</td>
<td>Location</td>
<td>場所（倉庫・ライン等）の定義</td>
</tr>
<tr>
<td>倉庫マスタ</td>
<td>Warehouse</td>
<td>倉庫の定義</td>
</tr>
<tr>
<td>在庫情報</td>
<td>Stock</td>
<td>場所×品目の在庫数量</td>
</tr>
<tr>
<td>払出指示データ</td>
<td>IssueInstruction</td>
<td>払出指示情報</td>
</tr>
<tr>
<td>払出指示明細データ</td>
<td>IssueInstructionDetail</td>
<td>払出指示の明細</td>
</tr>
<tr>
<td>払出データ</td>
<td>Issue</td>
<td>払出実績</td>
</tr>
<tr>
<td>払出明細データ</td>
<td>IssueDetail</td>
<td>払出実績の明細</td>
</tr>
<tr>
<td>棚卸データ</td>
<td>Stocktaking</td>
<td>棚卸ヘッダ</td>
</tr>
<tr>
<td>棚卸明細データ</td>
<td>StocktakingDetail</td>
<td>棚卸明細</td>
</tr>
<tr>
<td>在庫調整データ</td>
<td>StockAdjustment</td>
<td>在庫調整履歴</td>
</tr>
</tbody>
</table>
<h3 id="enum-28">ENUM 一覧（第28章）<a class="headerlink" href="#enum-28" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>DB ENUM 型（日本語）</th>
<th>Java Enum</th>
<th>値</th>
</tr>
</thead>
<tbody>
<tr>
<td>棚卸ステータス</td>
<td>StocktakingStatus</td>
<td>発行済→ISSUED, 入力済→ENTERED, 確定→CONFIRMED</td>
</tr>
<tr>
<td>-</td>
<td>StockStatus</td>
<td>合格→PASSED, 不良→DEFECTIVE, 未検査→UNINSPECTED</td>
</tr>
</tbody>
</table>
<hr />
<p><a href="../chapter27/">← 第27章：工程管理の設計</a> | <a href="../chapter29/">第29章：品質管理の設計 →</a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://github.com/k2works/practical-database-design" target="_blank" rel="noopener" title="GitHub Repository" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "search.suggest", "search.highlight"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
      
        <script src="../../../docs/assets/js/extra.js"></script>
      
    
  </body>
</html>