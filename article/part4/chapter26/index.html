
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="基幹業務システム（販売管理・財務会計・生産管理）のデータベース設計を体系的に解説">
      
      
        <meta name="author" content="k2works">
      
      
      
        <link rel="prev" href="../chapter25/">
      
      
        <link rel="next" href="../chapter27/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>第26章 外注委託管理の設計 - 実践データベース設計：基幹業務システム編</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../docs/mkdocs/assets/css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#26" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="実践データベース設計：基幹業務システム編" class="md-header__button md-logo" aria-label="実践データベース設計：基幹業務システム編" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            実践データベース設計：基幹業務システム編
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              第26章 外注委託管理の設計
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/k2works/practical-database-design" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    practical-database-design
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
  実践データベース設計

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="実践データベース設計：基幹業務システム編" class="md-nav__button md-logo" aria-label="実践データベース設計：基幹業務システム編" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    実践データベース設計：基幹業務システム編
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/k2works/practical-database-design" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    practical-database-design
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    実践データベース設計
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    実践データベース設計
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../techstack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    技術スタック
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../outline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    アウトライン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    執筆ワークフロー
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5" >
        
          
          <label class="md-nav__link" for="__nav_1_5" id="__nav_1_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第1部 基幹業務システムの全体像
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    第1部 基幹業務システムの全体像
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1/chapter01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第1章 基幹業務システムとは
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1/chapter02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第2章 基幹業務システムの業務領域
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1/chapter03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第3章 業務フローの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6" >
        
          
          <label class="md-nav__link" for="__nav_1_6" id="__nav_1_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第2部 販売管理システム
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    第2部 販売管理システム
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第4章 販売管理システムの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第5章 マスタ情報の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第6章 受注・出荷・売上の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter07/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第7章 債権管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter08/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第8章 調達管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter09/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第9章 在庫管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第10章 債務管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第11章 共通処理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第12章 販売管理データ設計（B社事例）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第13章 APIサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_7" >
        
          
          <label class="md-nav__link" for="__nav_1_7" id="__nav_1_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第3部 財務会計システム
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    第3部 財務会計システム
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第14章 財務会計システムの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第15章 勘定科目の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter16/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第16章 仕訳の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter17/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第17章 自動仕訳の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter18/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第18章 勘定科目残高の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter19/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第19章 赤黒とログの設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter20/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第20章 財務会計データ設計（D社事例）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter21/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第21章 APIサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_8" checked>
        
          
          <label class="md-nav__link" for="__nav_1_8" id="__nav_1_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第4部 生産管理システム
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    第4部 生産管理システム
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter22/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第22章 生産管理システムの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter23/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第23章 マスタ情報の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter24/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第24章 生産計画の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter25/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第25章 購買管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    第26章 外注委託管理の設計
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    第26章 外注委託管理の設計
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#261" class="md-nav__link">
    <span class="md-ellipsis">
      
        26.1 外注委託業務の理解
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="26.1 外注委託業務の理解">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        外注委託とは
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        有償支給と無償支給
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        外注委託の業務フロー
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#262-db" class="md-nav__link">
    <span class="md-ellipsis">
      
        26.2 外注委託の DB 設計
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="26.2 外注委託の DB 設計">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        外注オーダの構造
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        支給関連のスキーマ設計
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        発注データとの紐付け
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        支給金額の計算（有償支給の場合）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#java" class="md-nav__link">
    <span class="md-ellipsis">
      
        Java エンティティの定義
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#typehandler" class="md-nav__link">
    <span class="md-ellipsis">
      
        TypeHandler の実装
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mybatis-mapper-xml" class="md-nav__link">
    <span class="md-ellipsis">
      
        MyBatis Mapper XML
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mapper" class="md-nav__link">
    <span class="md-ellipsis">
      
        Mapper インターフェース
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        支給サービスの実装
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        コマンドクラス
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tdd" class="md-nav__link">
    <span class="md-ellipsis">
      
        TDD: 支給データの登録テスト
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#263" class="md-nav__link">
    <span class="md-ellipsis">
      
        26.3 消費業務の設計
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="26.3 消費業務の設計">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        消費関連のスキーマ設計
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        入荷受入データとの紐付け
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        消費率の計算
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#java_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Java エンティティの定義
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mybatis-mapper-xml_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        MyBatis Mapper XML
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mapper_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Mapper インターフェース
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        消費サービスの実装
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        コマンドクラス
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tdd_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        TDD: 消費データのテスト
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#264" class="md-nav__link">
    <span class="md-ellipsis">
      
        26.4 外注委託ワークフロー
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="26.4 外注委託ワークフロー">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        外注委託の全体フロー
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      
        外注委託ワークフローサービス
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dto" class="md-nav__link">
    <span class="md-ellipsis">
      
        コマンド・DTO クラス
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      
        有償支給と無償支給の会計処理の違い
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      
        まとめ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="まとめ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      
        学んだこと
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      
        テーブル一覧
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enum" class="md-nav__link">
    <span class="md-ellipsis">
      
        ENUM 一覧
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter27/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第27章 工程管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter28/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第28章 在庫管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第29章 品質管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter30/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第30章 製造原価管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter31/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第31章 生産管理データ設計（E社事例）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter32/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第32章 APIサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_9" >
        
          
          <label class="md-nav__link" for="__nav_1_9" id="__nav_1_9_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第5部 エンタープライズインテグレーション
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    第5部 エンタープライズインテグレーション
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter33.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第33章 システム統合の概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter34.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第34章 メッセージングパターン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter35.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第35章 システム間連携パターン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter36.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第36章 マスタデータ管理（MDM）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter37.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第37章 イベント駆動アーキテクチャ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter38.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第38章 API設計とサービス連携
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter39.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第39章 データ連携の実装パターン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_10" >
        
          
          <label class="md-nav__link" for="__nav_1_10" id="__nav_1_10_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 販売管理システム実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 販売管理システム実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study2-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究1 モノリスサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study2-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究2 JavaFXデスクトップアプリケーションの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study2-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究3 gRPCサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study2-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究4 GraphQLサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_11" >
        
          
          <label class="md-nav__link" for="__nav_1_11" id="__nav_1_11_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 財務会計システム実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 財務会計システム実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study3-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究1 モノリスサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study3-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究2 JavaFXデスクトップアプリケーションの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study3-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究3 gRPCサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study3-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究4 GraphQLサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_12" >
        
          
          <label class="md-nav__link" for="__nav_1_12" id="__nav_1_12_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 生産管理システム実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 生産管理システム実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study4-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究1 モノリスサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study4-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究2 JavaFXデスクトップアプリケーションの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study4-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究3 gRPCサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study4-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究4 GraphQLサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_13" >
        
          
          <label class="md-nav__link" for="__nav_1_13" id="__nav_1_13_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 財務会計システムORM実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_13">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 財務会計システムORM実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter14-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第14章 財務会計システムの全体像【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter15-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第15章 勘定科目の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter16-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第16章 仕訳の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter17-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第17章 自動仕訳の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter18-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第18章 勘定科目残高の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter19-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第19章 赤黒とログの設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter20-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第20章 財務会計データ設計（D社事例）【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter21-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第21章 APIサービスの実装【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_14" >
        
          
          <label class="md-nav__link" for="__nav_1_14" id="__nav_1_14_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    付録
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_14">
            <span class="md-nav__icon md-icon"></span>
            
  
    付録
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/er-diagrams.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    A 全体ER図
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/table-definitions.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    B テーブル定義一覧
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/glossary.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    C 用語集
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_15" >
        
          
          <label class="md-nav__link" for="__nav_1_15" id="__nav_1_15_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    データベース
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_15">
            <span class="md-nav__icon md-icon"></span>
            
  
    データベース
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../assets/schemaspy-output/sms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SchemaSpy ER図（SMS）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="26">第26章：外注委託管理の設計<a class="headerlink" href="#26" title="Permanent link">&para;</a></h1>
<p>本章では、外注委託業務の DB 設計を解説します。自社で製造できない工程を外部の委託先に依頼し、材料を支給して加工してもらう業務フローをデータベースで表現します。</p>
<hr />
<h2 id="261">26.1 外注委託業務の理解<a class="headerlink" href="#261" title="Permanent link">&para;</a></h2>
<p>外注委託は、自社の生産能力を補完し、専門的な加工を外部に依頼するための重要な業務です。</p>
<h3 id="_1">外注委託とは<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkFDVElWSVRZIiBoZWlnaHQ9IjUyNXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MzI2cHg7aGVpZ2h0OjUyNXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDMyNiA1MjUiIHdpZHRoPSIzMjZweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjI4MDY7JiMzNzA5NjsmIzIyOTk2OyYjMzUzNTE7JiMxMjM5ODsmIzIwMzYzOzwvdGl0bGU+PGRlZnMvPjxnPjxnIGNsYXNzPSJ0aXRsZSIgZGF0YS1zb3VyY2UtbGluZT0iMSI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgzLjk5OTYiIHg9IjExOS45MzA2IiB5PSIzMi45OTUxIj4mIzIyODA2OyYjMzcwOTY7JiMyMjk5NjsmIzM1MzUxOyYjMTIzOTg7JiMyMDM2Mzs8L3RleHQ+PC9nPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMjAuOTUzMSIgc3R5bGU9InN0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjI5My44NjA3IiB4PSIxNSIgeT0iNTAuMDQyIi8+PGVsbGlwc2UgY3g9IjEwMy4wMDAzIiBjeT0iODUuOTk1MSIgZmlsbD0iIzIyMjIyMiIgcng9IjEwIiByeT0iMTAiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MTsiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNTYuMDAwMyIgeD0iNzUuMDAwMSIgeT0iMTE1Ljk5NTEiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIzNi4wMDAzIiB4PSI4NS4wMDAxIiB5PSIxMzcuMTMzOCI+JiMyMTQwNzsmIzI2NDQ4OyYjMjYwMDk7PC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI2OC4wMDA0IiB4PSI2OS4wMDAxIiB5PSIxNjkuOTYzOSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ4LjAwMDQiIHg9Ijc5LjAwMDEiIHk9IjE5MS4xMDI1Ij4mIzEyNTAzOyYjMTI1MjQ7JiMxMjQ3MzsmIzIxNjk3OzwvdGV4dD48cmVjdCBmaWxsPSIjNTU1NTU1IiBoZWlnaHQ9IjYiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzU1NTU1NTtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxNjQuMDAwNSIgeD0iMjEiIHk9IjMzMS44NzAxIi8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQ0LjAwMDIiIHg9IjMzIiB5PSIzNTcuODcwMSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI0LjAwMDIiIHg9IjQzIiB5PSIzNzkuMDA4OCI+JiMzNzA5NjsmIzIxNjk3OzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNjguMDAwNCIgeD0iMTA1LjAwMDIiIHk9IjM1Ny44NzAxIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDguMDAwNCIgeD0iMTE1LjAwMDIiIHk9IjM3OS4wMDg4Ij4mIzEyNTEzOyYjMTI0ODM7JiMxMjQ2MTsmIzIxNjk3OzwvdGV4dD48cmVjdCBmaWxsPSIjNTU1NTU1IiBoZWlnaHQ9IjYiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzU1NTU1NTtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxNjQuMDAwNSIgeD0iMjEiIHk9IjQxMS44Mzg5Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQ0LjAwMDIiIHg9IjgxLjAwMDIiIHk9IjQzNy44Mzg5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjQuMDAwMiIgeD0iOTEuMDAwMiIgeT0iNDU4Ljk3NzUiPiYjMzUwNjk7JiMyMTY5Nzs8L3RleHQ+PGVsbGlwc2UgY3g9IjEwMy4wMDAzIiBjeT0iNTAyLjgwNzYiIGZpbGw9Im5vbmUiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMyMjIyMjI7c3Ryb2tlLXdpZHRoOjE7Ii8+PGVsbGlwc2UgY3g9IjEwMy4wMDAzIiBjeT0iNTAyLjgwNzYiIGZpbGw9IiMyMjIyMjIiIHJ4PSI2IiByeT0iNiIgc3R5bGU9InN0cm9rZTojMjIyMjIyO3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjE1IiB4Mj0iMTUiIHkxPSI1MC4wNDIiIHkyPSI1MTMuODA3NiIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI2OC4wMDA0IiB4PSIyMTUiIHk9IjIyMy45MzI2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDguMDAwNCIgeD0iMjI1IiB5PSIyNDUuMDcxMyI+JiMxMjUwMzsmIzEyNTI0OyYjMTI0NzM7JiMyMTY5Nzs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjY4LjAwMDQiIHg9IjIxNSIgeT0iMjc3LjkwMTQiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0OC4wMDA0IiB4PSIyMjUiIHk9IjI5OS4wNCI+JiMxMjUxMzsmIzEyNDgzOyYjMTI0NjE7JiMyMTY5Nzs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB4MT0iMTg5LjAwMDUiIHgyPSIxODkuMDAwNSIgeTE9IjUwLjA0MiIgeTI9IjUxMy44MDc2Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB4MT0iMzA2Ljk5OTkiIHgyPSIzMDYuOTk5OSIgeTE9IjUwLjA0MiIgeTI9IjUxMy44MDc2Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEwMy4wMDAzIiB4Mj0iMTAzLjAwMDMiIHkxPSI5NS45OTUxIiB5Mj0iMTE1Ljk5NTEiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9Ijk5LjAwMDMsMTA1Ljk5NTEsMTAzLjAwMDMsMTE1Ljk5NTEsMTA3LjAwMDMsMTA1Ljk5NTEsMTAzLjAwMDMsMTA5Ljk5NTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTAzLjAwMDMiIHgyPSIxMDMuMDAwMyIgeTE9IjE0OS45NjM5IiB5Mj0iMTY5Ljk2MzkiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9Ijk5LjAwMDMsMTU5Ljk2MzksMTAzLjAwMDMsMTY5Ljk2MzksMTA3LjAwMDMsMTU5Ljk2MzksMTAzLjAwMDMsMTYzLjk2MzkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNTUuMDAwMSIgeDI9IjU1LjAwMDEiIHkxPSIzMzcuODcwMSIgeTI9IjM1Ny44NzAxIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI1MS4wMDAxLDM0Ny44NzAxLDU1LjAwMDEsMzU3Ljg3MDEsNTkuMDAwMSwzNDcuODcwMSw1NS4wMDAxLDM1MS44NzAxIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEzOS4wMDA0IiB4Mj0iMTM5LjAwMDQiIHkxPSIzMzcuODcwMSIgeTI9IjM1Ny44NzAxIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMzUuMDAwNCwzNDcuODcwMSwxMzkuMDAwNCwzNTcuODcwMSwxNDMuMDAwNCwzNDcuODcwMSwxMzkuMDAwNCwzNTEuODcwMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI1NS4wMDAxIiB4Mj0iNTUuMDAwMSIgeTE9IjM5MS44Mzg5IiB5Mj0iNDExLjgzODkiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjUxLjAwMDEsNDAxLjgzODksNTUuMDAwMSw0MTEuODM4OSw1OS4wMDAxLDQwMS44Mzg5LDU1LjAwMDEsNDA1LjgzODkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTM5LjAwMDQiIHgyPSIxMzkuMDAwNCIgeTE9IjM5MS44Mzg5IiB5Mj0iNDExLjgzODkiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjEzNS4wMDA0LDQwMS44Mzg5LDEzOS4wMDA0LDQxMS44Mzg5LDE0My4wMDA0LDQwMS44Mzg5LDEzOS4wMDA0LDQwNS44Mzg5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEwMy4wMDAzIiB4Mj0iMTAzLjAwMDMiIHkxPSI0MTcuODM4OSIgeTI9IjQzNy44Mzg5Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI5OS4wMDAzLDQyNy44Mzg5LDEwMy4wMDAzLDQzNy44Mzg5LDEwNy4wMDAzLDQyNy44Mzg5LDEwMy4wMDAzLDQzMS44Mzg5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEwMy4wMDAzIiB4Mj0iMTAzLjAwMDMiIHkxPSI0NzEuODA3NiIgeTI9IjQ5MS44MDc2Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI5OS4wMDAzLDQ4MS44MDc2LDEwMy4wMDAzLDQ5MS44MDc2LDEwNy4wMDAzLDQ4MS44MDc2LDEwMy4wMDAzLDQ4NS44MDc2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjI0OS4wMDAyIiB4Mj0iMjQ5LjAwMDIiIHkxPSIyNTcuOTAxNCIgeTI9IjI3Ny45MDE0Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyNDUuMDAwMiwyNjcuOTAxNCwyNDkuMDAwMiwyNzcuOTAxNCwyNTMuMDAwMiwyNjcuOTAxNCwyNDkuMDAwMiwyNzEuOTAxNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMDMuMDAwMyIgeDI9IjEwMy4wMDAzIiB5MT0iMjAzLjkzMjYiIHkyPSIyMDguOTMyNiIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMDMuMDAwMyIgeDI9IjI0OS4wMDAyIiB5MT0iMjA4LjkzMjYiIHkyPSIyMDguOTMyNiIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyNDkuMDAwMiIgeDI9IjI0OS4wMDAyIiB5MT0iMjA4LjkzMjYiIHkyPSIyMjMuOTMyNiIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjQ1LjAwMDIsMjEzLjkzMjYsMjQ5LjAwMDIsMjIzLjkzMjYsMjUzLjAwMDIsMjEzLjkzMjYsMjQ5LjAwMDIsMjE3LjkzMjYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjQ5LjAwMDIiIHgyPSIyNDkuMDAwMiIgeTE9IjMxMS44NzAxIiB5Mj0iMzE2Ljg3MDEiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjQ5LjAwMDIiIHgyPSIxMDMuMDAwMyIgeTE9IjMxNi44NzAxIiB5Mj0iMzE2Ljg3MDEiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTAzLjAwMDMiIHgyPSIxMDMuMDAwMyIgeTE9IjMxNi44NzAxIiB5Mj0iMzMxLjg3MDEiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9Ijk5LjAwMDMsMzIxLjg3MDEsMTAzLjAwMDMsMzMxLjg3MDEsMTA3LjAwMDMsMzIxLjg3MDEsMTAzLjAwMDMsMzI1Ljg3MDEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3MS45OTk2IiB4PSI2Ni4wMDA1IiB5PSI2Ni43NSI+JiMzMzI1ODsmIzMxMDM4OyYjMjQwMzc7JiMyMjU4MDs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTgiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA3Ljk5OTQiIHg9IjE5NC4wMDA1IiB5PSI2Ni43NSI+JiMyMjgwNjsmIzM3MDk2OyYjMjI5OTY7JiMzNTM1MTsmIzI0MDM3OyYjMjI1ODA7PC90ZXh0PjwhLS1TUkM9W0F5YWlvS2JMVUJmYXNpbGM1Sy1OSnRjbk9saFpuZExGemRMcFNUTXlRNV9yVkNjLWZ6a05GYnNtZk9RaGsySW5nOEpCd2NkVl82VHA5cG9SRGpFUW8tZm55X0o3cE1pVUQtcnlFaGRIY2dpNnNIMk9CWkdyR0V4Mm55dERadmxNR2hJV01mNk1OdkpEUEdLbzBvRzl1WWFhZllUY3ZnNWgweWthdmdMbU1Sck9sMVNpS2JvSU5tMDBdLS0+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<p>外注委託には以下の特徴があります：</p>
<table>
<thead>
<tr>
<th>特徴</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>専門加工の委託</strong></td>
<td>メッキ、熱処理、塗装など専門設備が必要な工程を委託</td>
</tr>
<tr>
<td><strong>生産能力の補完</strong></td>
<td>繁忙期の生産量増加への対応</td>
</tr>
<tr>
<td><strong>コスト最適化</strong></td>
<td>内製と外注のコスト比較による最適な生産配分</td>
</tr>
</tbody>
</table>
<h3 id="_2">有償支給と無償支給<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<p>外注委託における材料の支給方法には2種類あります。</p>
<table>
<thead>
<tr>
<th>支給方式</th>
<th>説明</th>
<th>会計処理</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>有償支給</strong></td>
<td>材料を売却扱いで支給</td>
<td>売上計上後、加工品を仕入れ</td>
</tr>
<tr>
<td><strong>無償支給</strong></td>
<td>材料を無償で貸与</td>
<td>在庫のまま、加工賃のみ支払い</td>
</tr>
</tbody>
</table>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkFDVElWSVRZIiBoZWlnaHQ9IjU0NXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NTI0cHg7aGVpZ2h0OjU0NXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDUyNCA1NDUiIHdpZHRoPSI1MjRweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjYzNzc7JiMyMDc2NzsmIzI1OTAzOyYjMzIxMDI7JiMxMjM5MjsmIzI4OTYxOyYjMjA3Njc7JiMyNTkwMzsmIzMyMTAyOyYjMTIzOTg7JiMzNjk0OTsmIzEyMzU2OzwvdGl0bGU+PGRlZnMvPjxnPjxnIGNsYXNzPSJ0aXRsZSIgZGF0YS1zb3VyY2UtbGluZT0iMSI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE2Ny45OTkzIiB4PSIxNzYuOTMxNyIgeT0iMzIuOTk1MSI+JiMyNjM3NzsmIzIwNzY3OyYjMjU5MDM7JiMzMjEwMjsmIzEyMzkyOyYjMjg5NjE7JiMyMDc2NzsmIzI1OTAzOyYjMzIxMDI7JiMxMjM5ODsmIzM2OTQ5OyYjMTIzNTY7PC90ZXh0PjwvZz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjIwLjk1MzEiIHN0eWxlPSJzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI0OTEuODYyNiIgeD0iMTUiIHk9IjUwLjA0MiIvPjxyZWN0IGZpbGw9IiNBREQ4RTYiIGhlaWdodD0iNDgzLjc2NTYiIHN0eWxlPSJzdHJva2U6I0FERDhFNjtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIyMzIuMDAwOSIgeD0iMTUiIHk9IjUwLjA0MiIvPjxlbGxpcHNlIGN4PSI4NS4wMDA0IiBjeT0iODUuOTk1MSIgZmlsbD0iIzIyMjIyMiIgcng9IjEwIiByeT0iMTAiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMTY5LjAwMDgsMTIwLjQxMzEgTDE2OS4wMDA4LDEyOC45Nzk1IEwxNDkuMDAwOCwxMzIuOTc5NSBMMTY5LjAwMDgsMTM2Ljk3OTUgTDE2OS4wMDA4LDE0NS41NDU5IEEwLDAgMCAwIDAgMTY5LjAwMDgsMTQ1LjU0NTkgTDI0Mi4wMDA5LDE0NS41NDU5IEEwLDAgMCAwIDAgMjQyLjAwMDksMTQ1LjU0NTkgTDI0Mi4wMDA5LDEzMC40MTMxIEwyMzIuMDAwOSwxMjAuNDEzMSBMMTY5LjAwMDgsMTIwLjQxMzEgQTAsMCAwIDAgMCAxNjkuMDAwOCwxMjAuNDEzMSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTIzMi4wMDA5LDEyMC40MTMxIEwyMzIuMDAwOSwxMzAuNDEzMSBMMjQyLjAwMDksMTMwLjQxMzEgTDIzMi4wMDA5LDEyMC40MTMxIiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1Mi4wMDAxIiB4PSIxNzUuMDAwOCIgeT0iMTM3LjQ4Ij4mIzIyNzcwOyYjMTk5Nzg7JiMzNTMzNjsmIzE5OTc4OzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTI4LjAwMDgiIHg9IjIxIiB5PSIxMTUuOTk1MSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwOC4wMDA4IiB4PSIzMSIgeT0iMTM3LjEzMzgiPiYjMjY0NDg7JiMyNjAwOTsmIzEyNDM0OyYjMjI4MDY7JiMyNzg4MDsmIzIwODA4OyYjMTIzOTU7JiMyMjc3MDsmIzIxMzY0OzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iOTIuMDAwNSIgeD0iMzkuMDAwMSIgeT0iMTY5Ljk2MzkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3Mi4wMDA1IiB4PSI0OS4wMDAxIiB5PSIxOTEuMTAyNSI+JiMyMjgwNjsmIzI3ODgwOyYjMjA4MDg7JiMxMjM5MTsmIzIxMTUyOyYjMjQwMzc7PC90ZXh0PjxwYXRoIGQ9Ik0xNTEuMDAwNywyMjguMzUwNiBMMTUxLjAwMDcsMjM2LjkxNyBMMTMxLjAwMDcsMjQwLjkxNyBMMTUxLjAwMDcsMjQ0LjkxNyBMMTUxLjAwMDcsMjUzLjQ4MzQgQTAsMCAwIDAgMCAxNTEuMDAwNywyNTMuNDgzNCBMMjI0LjAwMDcsMjUzLjQ4MzQgQTAsMCAwIDAgMCAyMjQuMDAwNywyNTMuNDgzNCBMMjI0LjAwMDcsMjM4LjM1MDYgTDIxNC4wMDA3LDIyOC4zNTA2IEwxNTEuMDAwNywyMjguMzUwNiBBMCwwIDAgMCAwIDE1MS4wMDA3LDIyOC4zNTA2IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNMjE0LjAwMDcsMjI4LjM1MDYgTDIxNC4wMDA3LDIzOC4zNTA2IEwyMjQuMDAwNywyMzguMzUwNiBMMjE0LjAwMDcsMjI4LjM1MDYiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjUyLjAwMDEiIHg9IjE1Ny4wMDA3IiB5PSIyNDUuNDE3NSI+JiMyMDE4MTsmIzIwODM3OyYjMzUzMzY7JiMxOTk3ODs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjkyLjAwMDUiIHg9IjM5LjAwMDEiIHk9IjIyMy45MzI2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzIuMDAwNSIgeD0iNDkuMDAwMSIgeT0iMjQ1LjA3MTMiPiYjMjExNTI7JiMyNDAzNzsmIzIxNjk3OyYjMTI0MzQ7JiMzNjA5MjsmIzIwODM3OzwvdGV4dD48ZWxsaXBzZSBjeD0iODUuMDAwNCIgY3k9IjI4OC45MDE0IiBmaWxsPSJub25lIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMjIyMjIyO3N0cm9rZS13aWR0aDoxOyIvPjxlbGxpcHNlIGN4PSI4NS4wMDA0IiBjeT0iMjg4LjkwMTQiIGZpbGw9IiMyMjIyMjIiIHJ4PSI2IiByeT0iNiIgc3R5bGU9InN0cm9rZTojMjIyMjIyO3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjE1IiB4Mj0iMTUiIHkxPSI1MC4wNDIiIHkyPSI1MzMuODA3NiIvPjxyZWN0IGZpbGw9IiM5MEVFOTAiIGhlaWdodD0iNDgzLjc2NTYiIHN0eWxlPSJzdHJva2U6IzkwRUU5MDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIyNTguMDAwOSIgeD0iMjQ3LjAwMDkiIHk9IjUwLjA0MiIvPjxlbGxpcHNlIGN4PSIzMTcuMDAxMyIgY3k9IjMxOS45MDE0IiBmaWxsPSIjMjIyMjIyIiByeD0iMTAiIHJ5PSIxMCIgc3R5bGU9InN0cm9rZTojMjIyMjIyO3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik00MDEuMDAxNywzNTQuMzE5MyBMNDAxLjAwMTcsMzYyLjg4NTcgTDM4MS4wMDE3LDM2Ni44ODU3IEw0MDEuMDAxNywzNzAuODg1NyBMNDAxLjAwMTcsMzc5LjQ1MjEgQTAsMCAwIDAgMCA0MDEuMDAxNywzNzkuNDUyMSBMNTAwLjAwMTgsMzc5LjQ1MjEgQTAsMCAwIDAgMCA1MDAuMDAxOCwzNzkuNDUyMSBMNTAwLjAwMTgsMzY0LjMxOTMgTDQ5MC4wMDE4LDM1NC4zMTkzIEw0MDEuMDAxNywzNTQuMzE5MyBBMCwwIDAgMCAwIDQwMS4wMDE3LDM1NC4zMTkzIiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNNDkwLjAwMTgsMzU0LjMxOTMgTDQ5MC4wMDE4LDM2NC4zMTkzIEw1MDAuMDAxOCwzNjQuMzE5MyBMNDkwLjAwMTgsMzU0LjMxOTMiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc4LjAwMDEiIHg9IjQwNy4wMDE3IiB5PSIzNzEuMzg2MiI+JiMyMjMxMjsmIzI0MjM1OyYjMzEyMjc7JiMyMTIwNTsmIzEyMzk4OyYjMTI0MTU7PC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMjguMDAwOCIgeD0iMjUzLjAwMDkiIHk9IjM0OS45MDE0Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA4LjAwMDgiIHg9IjI2My4wMDA5IiB5PSIzNzEuMDQiPiYjMjY0NDg7JiMyNjAwOTsmIzEyNDM0OyYjMjI4MDY7JiMyNzg4MDsmIzIwODA4OyYjMTIzOTU7JiMzNjAyNDsmIzE5OTgyOzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iOTIuMDAwNSIgeD0iMjcxLjAwMSIgeT0iNDAzLjg3MDEiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3Mi4wMDA1IiB4PSIyODEuMDAxIiB5PSI0MjUuMDA4OCI+JiMyMjgwNjsmIzI3ODgwOyYjMjA4MDg7JiMxMjM5MTsmIzIxMTUyOyYjMjQwMzc7PC90ZXh0PjxwYXRoIGQ9Ik0zODMuMDAxNiw0NjIuMjU2OCBMMzgzLjAwMTYsNDcwLjgyMzIgTDM2My4wMDE2LDQ3NC44MjMyIEwzODMuMDAxNiw0NzguODIzMiBMMzgzLjAwMTYsNDg3LjM4OTYgQTAsMCAwIDAgMCAzODMuMDAxNiw0ODcuMzg5NiBMNDk1LjAwMTcsNDg3LjM4OTYgQTAsMCAwIDAgMCA0OTUuMDAxNyw0ODcuMzg5NiBMNDk1LjAwMTcsNDcyLjI1NjggTDQ4NS4wMDE3LDQ2Mi4yNTY4IEwzODMuMDAxNiw0NjIuMjU2OCBBMCwwIDAgMCAwIDM4My4wMDE2LDQ2Mi4yNTY4IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNNDg1LjAwMTcsNDYyLjI1NjggTDQ4NS4wMDE3LDQ3Mi4yNTY4IEw0OTUuMDAxNyw0NzIuMjU2OCBMNDg1LjAwMTcsNDYyLjI1NjgiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjkxLjAwMDEiIHg9IjM4OS4wMDE2IiB5PSI0NzkuMzIzNyI+JiMyMTE1MjsmIzI0MDM3OyYjMzYwMzU7JiMxMjM5ODsmIzEyNDE1OyYjMzUzMzY7JiMxOTk3ODs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjkyLjAwMDUiIHg9IjI3MS4wMDEiIHk9IjQ1Ny44Mzg5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzIuMDAwNSIgeD0iMjgxLjAwMSIgeT0iNDc4Ljk3NzUiPiYjMjExNTI7JiMyNDAzNzsmIzIxNjk3OyYjMTI0MzQ7JiMyMTQ2MzsmIzIwODM3OzwvdGV4dD48ZWxsaXBzZSBjeD0iMzE3LjAwMTMiIGN5PSI1MjIuODA3NiIgZmlsbD0ibm9uZSIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MTsiLz48ZWxsaXBzZSBjeD0iMzE3LjAwMTMiIGN5PSI1MjIuODA3NiIgZmlsbD0iIzIyMjIyMiIgcng9IjYiIHJ5PSI2IiBzdHlsZT0ic3Ryb2tlOiMyMjIyMjI7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB4MT0iMjQ3LjAwMDkiIHgyPSIyNDcuMDAwOSIgeTE9IjUwLjA0MiIgeTI9IjUzMy44MDc2Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB4MT0iNTA1LjAwMTgiIHgyPSI1MDUuMDAxOCIgeTE9IjUwLjA0MiIgeTI9IjUzMy44MDc2Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9Ijg1LjAwMDQiIHgyPSI4NS4wMDA0IiB5MT0iOTUuOTk1MSIgeTI9IjExNS45OTUxIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI4MS4wMDA0LDEwNS45OTUxLDg1LjAwMDQsMTE1Ljk5NTEsODkuMDAwNCwxMDUuOTk1MSw4NS4wMDA0LDEwOS45OTUxIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9Ijg1LjAwMDQiIHgyPSI4NS4wMDA0IiB5MT0iMTQ5Ljk2MzkiIHkyPSIxNjkuOTYzOSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iODEuMDAwNCwxNTkuOTYzOSw4NS4wMDA0LDE2OS45NjM5LDg5LjAwMDQsMTU5Ljk2MzksODUuMDAwNCwxNjMuOTYzOSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI4NS4wMDA0IiB4Mj0iODUuMDAwNCIgeTE9IjIwMy45MzI2IiB5Mj0iMjIzLjkzMjYiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjgxLjAwMDQsMjEzLjkzMjYsODUuMDAwNCwyMjMuOTMyNiw4OS4wMDA0LDIxMy45MzI2LDg1LjAwMDQsMjE3LjkzMjYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iODUuMDAwNCIgeDI9Ijg1LjAwMDQiIHkxPSIyNTcuOTAxNCIgeTI9IjI3Ny45MDE0Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI4MS4wMDA0LDI2Ny45MDE0LDg1LjAwMDQsMjc3LjkwMTQsODkuMDAwNCwyNjcuOTAxNCw4NS4wMDA0LDI3MS45MDE0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjMxNy4wMDEzIiB4Mj0iMzE3LjAwMTMiIHkxPSIzMjkuOTAxNCIgeTI9IjM0OS45MDE0Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIzMTMuMDAxMywzMzkuOTAxNCwzMTcuMDAxMywzNDkuOTAxNCwzMjEuMDAxMywzMzkuOTAxNCwzMTcuMDAxMywzNDMuOTAxNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMTcuMDAxMyIgeDI9IjMxNy4wMDEzIiB5MT0iMzgzLjg3MDEiIHkyPSI0MDMuODcwMSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzEzLjAwMTMsMzkzLjg3MDEsMzE3LjAwMTMsNDAzLjg3MDEsMzIxLjAwMTMsMzkzLjg3MDEsMzE3LjAwMTMsMzk3Ljg3MDEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzE3LjAwMTMiIHgyPSIzMTcuMDAxMyIgeTE9IjQzNy44Mzg5IiB5Mj0iNDU3LjgzODkiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjMxMy4wMDEzLDQ0Ny44Mzg5LDMxNy4wMDEzLDQ1Ny44Mzg5LDMyMS4wMDEzLDQ0Ny44Mzg5LDMxNy4wMDEzLDQ1MS44Mzg5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjMxNy4wMDEzIiB4Mj0iMzE3LjAwMTMiIHkxPSI0OTEuODA3NiIgeTI9IjUxMS44MDc2Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIzMTMuMDAxMyw1MDEuODA3NiwzMTcuMDAxMyw1MTEuODA3NiwzMjEuMDAxMyw1MDEuODA3NiwzMTcuMDAxMyw1MDUuODA3NiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE4IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjcxLjk5OTYiIHg9Ijk1LjAwMDciIHk9IjY2Ljc1Ij4mIzI2Mzc3OyYjMjA3Njc7JiMyNTkwMzsmIzMyMTAyOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3MS45OTk2IiB4PSIzNDAuMDAxNiIgeT0iNjYuNzUiPiYjMjg5NjE7JiMyMDc2NzsmIzI1OTAzOyYjMzIxMDI7PC90ZXh0PjwhLS1TUkM9W0F5YWlvS2JMVTNRZHlzZEJfNlRKclpfVmtrbm51dWhkQkdrSGtFalVEYXZ6dERaMm5MTVp4OUVQZGI3WWI1RVFNZUVpZXVRaGsySW5nOEpCd2pkUzJTLWNwTnBTREVkZmFjZEZEZ3p1c2pobms3N3JxeU1SZGxQa2lVUkFvb3o5TElXMjZNMmIwMUh4aWdGaG5PZUU4Q2JiWFFIdy1URWsxSy10QnhLNjJlOFBKb1N0MGVyeGlOZEZxelFiZzRPeXNKcUxBME9yZWhXYWxtM2tGbFVZckRJeTZjR191N1ZXWXFxeGRrcGVHdEZXZDFMRlR3ci1sZHB0cXN3V3R6U3pSam5GWDNFVnphXzdTMlA0X2lOY1BlV2ZJRXU1MDAwMF0tLT48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_3">外注委託の業務フロー<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkFDVElWSVRZIiBoZWlnaHQ9IjkzMnB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6OTg5cHg7aGVpZ2h0OjkzMnB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDk4OSA5MzIiIHdpZHRoPSI5ODlweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjI4MDY7JiMyNzg4MDsmIzIyOTk2OyYjMzUzNTE7JiMxMjM5ODsmIzI2OTg5OyYjMjEyMDk7JiMxMjUwMTsmIzEyNTI1OyYjMTI1NDA7PC90aXRsZT48ZGVmcy8+PGc+PGcgY2xhc3M9InRpdGxlIiBkYXRhLXNvdXJjZS1saW5lPSIxIj48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM5Ljk5OTQiIHg9IjQyMy4yMDYiIHk9IjMyLjk5NTEiPiYjMjI4MDY7JiMyNzg4MDsmIzIyOTk2OyYjMzUzNTE7JiMxMjM5ODsmIzI2OTg5OyYjMjEyMDk7JiMxMjUwMTsmIzEyNTI1OyYjMTI1NDA7PC90ZXh0PjwvZz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjIwLjk1MzEiIHN0eWxlPSJzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI5NTYuNDExMyIgeD0iMTUiIHk9IjUwLjA0MiIvPjxlbGxpcHNlIGN4PSI2MS4wMDAyIiBjeT0iODUuOTk1MSIgZmlsbD0iIzIyMjIyMiIgcng9IjEwIiByeT0iMTAiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMTIxLjAwMDUsMTEyLjg0NjcgTDEyMS4wMDA1LDEyOC45Nzk1IEwxMDEuMDAwNSwxMzIuOTc5NSBMMTIxLjAwMDUsMTM2Ljk3OTUgTDEyMS4wMDA1LDE1My4xMTIzIEEwLDAgMCAwIDAgMTIxLjAwMDUsMTUzLjExMjMgTDI0Ni4wMDA2LDE1My4xMTIzIEEwLDAgMCAwIDAgMjQ2LjAwMDYsMTUzLjExMjMgTDI0Ni4wMDA2LDEyMi44NDY3IEwyMzYuMDAwNiwxMTIuODQ2NyBMMTIxLjAwMDUsMTEyLjg0NjcgQTAsMCAwIDAgMCAxMjEuMDAwNSwxMTIuODQ2NyIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTIzNi4wMDA2LDExMi44NDY3IEwyMzYuMDAwNiwxMjIuODQ2NyBMMjQ2LjAwMDYsMTIyLjg0NjcgTDIzNi4wMDA2LDExMi44NDY3IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5MS4wMDAxIiB4PSIxMjcuMDAwNSIgeT0iMTI5LjkxMzYiPiYjMzUwNjk7JiMzNjg5NjsmIzEyNDU4OyYjMTI1NDA7JiMxMjQ4MDsmIzEyMzYzOyYjMTI0MjU7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwNC4wMDAxIiB4PSIxMjcuMDAwNSIgeT0iMTQ1LjA0NjQiPiYjMjI4MDY7JiMyNzg4MDsmIzEyNDU4OyYjMTI1NDA7JiMxMjQ4MDsmIzEyNDM0OyYjMjk5ODM7JiMyNTEwNDs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjgwLjAwMDUiIHg9IjIxIiB5PSIxMTUuOTk1MSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYwLjAwMDUiIHg9IjMxIiB5PSIxMzcuMTMzOCI+JiMxMjQ1ODsmIzEyNTQwOyYjMTI0ODA7JiMyNDc3MzsmIzIyNTc3OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHgxPSIxNSIgeDI9IjE1IiB5MT0iNTAuMDQyIiB5Mj0iOTIwLjczNzMiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNjguMDAwNCIgeD0iNDA3LjAwMSIgeT0iMTczLjExMjMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0OC4wMDA0IiB4PSI0MTcuMDAxIiB5PSIxOTQuMjUxIj4mIzMwMzMwOyYjMjc4ODA7JiMyMDMxNjsmIzI1MTA0OzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iODAuMDAwNSIgeD0iNDAxLjAwMSIgeT0iMjI3LjA4MTEiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2MC4wMDA1IiB4PSI0MTEuMDAxIiB5PSIyNDguMjE5NyI+JiMyNzg4MDsmIzI1OTkxOyYjMjYzNjA7JiMzMDMzMDsmIzM0ODkyOzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNjguMDAwNCIgeD0iMjc1LjAwMDciIHk9Ijc1Ni43OTk4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDguMDAwNCIgeD0iMjg1LjAwMDciIHk9Ijc3Ny45Mzg1Ij4mIzI2OTA4OyYjMjE0NTQ7JiMyMDk2NjsmIzI5NzAyOzwvdGV4dD48cGF0aCBkPSJNMzgxLjAwMTIsODE1LjE4NjUgTDM4MS4wMDEyLDgyMy43NTI5IEwzNjEuMDAxMiw4MjcuNzUyOSBMMzgxLjAwMTIsODMxLjc1MjkgTDM4MS4wMDEyLDg0MC4zMTkzIEEwLDAgMCAwIDAgMzgxLjAwMTIsODQwLjMxOTMgTDUxOS4wMDE0LDg0MC4zMTkzIEEwLDAgMCAwIDAgNTE5LjAwMTQsODQwLjMxOTMgTDUxOS4wMDE0LDgyNS4xODY1IEw1MDkuMDAxNCw4MTUuMTg2NSBMMzgxLjAwMTIsODE1LjE4NjUgQTAsMCAwIDAgMCAzODEuMDAxMiw4MTUuMTg2NSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTUwOS4wMDE0LDgxNS4xODY1IEw1MDkuMDAxNCw4MjUuMTg2NSBMNTE5LjAwMTQsODI1LjE4NjUgTDUwOS4wMDE0LDgxNS4xODY1IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTcuMDAwMSIgeD0iMzg3LjAwMTIiIHk9IjgzMi4yNTM0Ij4mIzI1OTAzOyYjMzIxMDI7JiMyMTY5NzsmIzEyMzk4OyYjMjgwNDA7JiMzNjAyNzsmIzEyNDM0OyYjMzUzNTI7JiMzNzY4Mjs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEwNC4wMDA2IiB4PSIyNTcuMDAwNiIgeT0iODEwLjc2ODYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4NC4wMDA2IiB4PSIyNjcuMDAwNiIgeT0iODMxLjkwNzIiPiYjMjgwNDA7JiMzNjAyNzsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsmIzIwMzE2OyYjMjUxMDQ7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjI1MS4wMDA2IiB4Mj0iMjUxLjAwMDYiIHkxPSI1MC4wNDIiIHkyPSI5MjAuNzM3MyIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI4MC4wMDA1IiB4PSI1MzYuMDAxNCIgeT0iMjgxLjA0OTgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2MC4wMDA1IiB4PSI1NDYuMDAxNCIgeT0iMzAyLjE4ODUiPiYjMjU5MDM7JiMzMjEwMjsmIzIxNjk3OyYjMjgzMTA7JiMyMDYzMzs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjkyLjAwMDUiIHg9IjUzMC4wMDE0IiB5PSIzMzUuMDE4NiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjcyLjAwMDUiIHg9IjU0MC4wMDE0IiB5PSIzNTYuMTU3MiI+JiMyNTkwMzsmIzMyMTAyOyYjMjAyNTM7JiMzMTA4MDsmIzIwMzE2OyYjMjUxMDQ7PC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI4MC4wMDA1IiB4PSI1MzYuMDAxNCIgeT0iMzg4Ljk4NzMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2MC4wMDA1IiB4PSI1NDYuMDAxNCIgeT0iNDEwLjEyNiI+JiMyNTkwMzsmIzMyMTAyOyYjMjE2OTc7JiMyMDk4NjsmIzMzNjU1OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHgxPSI1MjQuMDAxNCIgeDI9IjUyNC4wMDE0IiB5MT0iNTAuMDQyIiB5Mj0iOTIwLjczNzMiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iODAuMDAwNSIgeD0iNjMyLjAwMTkiIHk9IjQ0Mi45NTYxIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjAuMDAwNSIgeD0iNjQyLjAwMTkiIHk9IjQ2NC4wOTQ3Ij4mIzI1OTAzOyYjMzIxMDI7JiMyMTY5NzsmIzIxNDYzOyYjMzg5MzY7PC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI2OC4wMDA0IiB4PSI2MzguMDAyIiB5PSI0OTYuOTI0OCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ4LjAwMDQiIHg9IjY0OC4wMDIiIHk9IjUxOC4wNjM1Ij4mIzIxMTUyOyYjMjQwMzc7JiMyMDMxNjsmIzI2OTg5OzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iODAuMDAwNSIgeD0iNjMyLjAwMTkiIHk9IjU1MC44OTM2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjAuMDAwNSIgeD0iNjQyLjAwMTkiIHk9IjU3Mi4wMzIyIj4mIzIzNDM2OyYjMjUxMDQ7JiMyMTY5NzsmIzIwOTg2OyYjMzM2NTU7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjYyNi4wMDE5IiB4Mj0iNjI2LjAwMTkiIHkxPSI1MC4wNDIiIHkyPSI5MjAuNzM3MyIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI2OC4wMDA0IiB4PSI3MjQuMDAyIiB5PSI2MDQuODYyMyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ4LjAwMDQiIHg9IjczNC4wMDIiIHk9IjYyNi4wMDEiPiYjMjA4Mzc7JiMzMzY1NTsmIzIxNDYzOyYjMjA4Mzc7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjcxNi4wMDI0IiB4Mj0iNzE2LjAwMjQiIHkxPSI1MC4wNDIiIHkyPSI5MjAuNzM3MyIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI2OC4wMDA0IiB4PSI4MTMuOTI5MiIgeT0iNjU4LjgzMTEiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0OC4wMDA0IiB4PSI4MjMuOTI5MiIgeT0iNjc5Ljk2OTciPiYjMjE0NjM7JiMyMDgzNzsmIzI2OTA4OyYjMjY2MTk7PC90ZXh0Pjxwb2x5Z29uIGZpbGw9IiNGMUYxRjEiIHBvaW50cz0iODM0LjAxMDIsNzEyLjc5OTgsODYxLjg0ODUsNzEyLjc5OTgsODczLjg0ODUsNzI0Ljc5OTgsODYxLjg0ODUsNzM2Ljc5OTgsODM0LjAxMDIsNzM2Ljc5OTgsODIyLjAxMDIsNzI0Ljc5OTgsODM0LjAxMDIsNzEyLjc5OTgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI3LjgzODIiIHg9IjgzNC4wMTAyIiB5PSI3MjguNjA3OSI+JiMyMTUxMjsmIzI2Njg0Oz88L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTkuMDA4MyIgeD0iODAzLjAwMTkiIHk9IjcyMi4yMDU2Ij55ZXM8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMuNzAxNyIgeD0iODczLjg0ODUiIHk9IjcyMi4yMDU2Ij5ubzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNjguMDAwNCIgeD0iODk3LjU1MDEiIHk9Ijc1Ni43OTk4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDguMDAwNCIgeD0iOTA3LjU1MDEiIHk9Ijc3Ny45Mzg1Ij4mIzE5OTgxOyYjMzMzOTE7JiMyMDk2NjsmIzI5NzAyOzwvdGV4dD48cG9seWdvbiBmaWxsPSIjRjFGMUYxIiBwb2ludHM9Ijg0Ny45Mjk0LDg1NC43MzczLDg1OS45Mjk0LDg2Ni43MzczLDg0Ny45Mjk0LDg3OC43MzczLDgzNS45Mjk0LDg2Ni43MzczLDg0Ny45Mjk0LDg1NC43MzczIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48ZWxsaXBzZSBjeD0iODQ3LjkyOTQiIGN5PSI5MDkuNzM3MyIgZmlsbD0ibm9uZSIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MTsiLz48ZWxsaXBzZSBjeD0iODQ3LjkyOTQiIGN5PSI5MDkuNzM3MyIgZmlsbD0iIzIyMjIyMiIgcng9IjYiIHJ5PSI2IiBzdHlsZT0ic3Ryb2tlOiMyMjIyMjI7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB4MT0iNzk4LjAwMTkiIHgyPSI3OTguMDAxOSIgeTE9IjUwLjA0MiIgeTI9IjkyMC43MzczIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB4MT0iOTY5LjU1MDUiIHgyPSI5NjkuNTUwNSIgeTE9IjUwLjA0MiIgeTI9IjkyMC43MzczIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjYxLjAwMDIiIHgyPSI2MS4wMDAyIiB5MT0iOTUuOTk1MSIgeTI9IjExNS45OTUxIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI1Ny4wMDAyLDEwNS45OTUxLDYxLjAwMDIsMTE1Ljk5NTEsNjUuMDAwMiwxMDUuOTk1MSw2MS4wMDAyLDEwOS45OTUxIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjQ0MS4wMDEyIiB4Mj0iNDQxLjAwMTIiIHkxPSIyMDcuMDgxMSIgeTI9IjIyNy4wODExIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI0MzcuMDAxMiwyMTcuMDgxMSw0NDEuMDAxMiwyMjcuMDgxMSw0NDUuMDAxMiwyMTcuMDgxMSw0NDEuMDAxMiwyMjEuMDgxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMDkuMDAwOSIgeDI9IjMwOS4wMDA5IiB5MT0iNzkwLjc2ODYiIHkyPSI4MTAuNzY4NiIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzA1LjAwMDksODAwLjc2ODYsMzA5LjAwMDksODEwLjc2ODYsMzEzLjAwMDksODAwLjc2ODYsMzA5LjAwMDksODA0Ljc2ODYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNTc2LjAwMTYiIHgyPSI1NzYuMDAxNiIgeTE9IjMxNS4wMTg2IiB5Mj0iMzM1LjAxODYiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjU3Mi4wMDE2LDMyNS4wMTg2LDU3Ni4wMDE2LDMzNS4wMTg2LDU4MC4wMDE2LDMyNS4wMTg2LDU3Ni4wMDE2LDMyOS4wMTg2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjU3Ni4wMDE2IiB4Mj0iNTc2LjAwMTYiIHkxPSIzNjguOTg3MyIgeTI9IjM4OC45ODczIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI1NzIuMDAxNiwzNzguOTg3Myw1NzYuMDAxNiwzODguOTg3Myw1ODAuMDAxNiwzNzguOTg3Myw1NzYuMDAxNiwzODIuOTg3MyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI2NzIuMDAyMSIgeDI9IjY3Mi4wMDIxIiB5MT0iNDc2LjkyNDgiIHkyPSI0OTYuOTI0OCIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNjY4LjAwMjEsNDg2LjkyNDgsNjcyLjAwMjEsNDk2LjkyNDgsNjc2LjAwMjEsNDg2LjkyNDgsNjcyLjAwMjEsNDkwLjkyNDgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNjcyLjAwMjEiIHgyPSI2NzIuMDAyMSIgeTE9IjUzMC44OTM2IiB5Mj0iNTUwLjg5MzYiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjY2OC4wMDIxLDU0MC44OTM2LDY3Mi4wMDIxLDU1MC44OTM2LDY3Ni4wMDIxLDU0MC44OTM2LDY3Mi4wMDIxLDU0NC44OTM2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9Ijg3My44NDg1IiB4Mj0iOTMxLjU1MDMiIHkxPSI3MjQuNzk5OCIgeTI9IjcyNC43OTk4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjkzMS41NTAzIiB4Mj0iOTMxLjU1MDMiIHkxPSI3MjQuNzk5OCIgeTI9Ijc1Ni43OTk4Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI5MjcuNTUwMyw3NDYuNzk5OCw5MzEuNTUwMyw3NTYuNzk5OCw5MzUuNTUwMyw3NDYuNzk5OCw5MzEuNTUwMyw3NTAuNzk5OCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI5MzEuNTUwMyIgeDI9IjkzMS41NTAzIiB5MT0iNzkwLjc2ODYiIHkyPSI4NjYuNzM3MyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI5MzEuNTUwMyIgeDI9Ijg1OS45Mjk0IiB5MT0iODY2LjczNzMiIHkyPSI4NjYuNzM3MyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iODY5LjkyOTQsODYyLjczNzMsODU5LjkyOTQsODY2LjczNzMsODY5LjkyOTQsODcwLjczNzMsODY1LjkyOTQsODY2LjczNzMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iODQ3LjkyOTQiIHgyPSI4NDcuOTI5NCIgeTE9IjY5Mi43OTk4IiB5Mj0iNzEyLjc5OTgiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9Ijg0My45Mjk0LDcwMi43OTk4LDg0Ny45Mjk0LDcxMi43OTk4LDg1MS45Mjk0LDcwMi43OTk4LDg0Ny45Mjk0LDcwNi43OTk4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9Ijg0Ny45Mjk0IiB4Mj0iODQ3LjkyOTQiIHkxPSI4NzguNzM3MyIgeTI9Ijg5OC43MzczIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI4NDMuOTI5NCw4ODguNzM3Myw4NDcuOTI5NCw4OTguNzM3Myw4NTEuOTI5NCw4ODguNzM3Myw4NDcuOTI5NCw4OTIuNzM3MyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI2MS4wMDAyIiB4Mj0iNjEuMDAwMiIgeTE9IjE0OS45NjM5IiB5Mj0iMTU4LjExMjMiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNjEuMDAwMiIgeDI9IjQ0MS4wMDEyIiB5MT0iMTU4LjExMjMiIHkyPSIxNTguMTEyMyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0NDEuMDAxMiIgeDI9IjQ0MS4wMDEyIiB5MT0iMTU4LjExMjMiIHkyPSIxNzMuMTEyMyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNDM3LjAwMTIsMTYzLjExMjMsNDQxLjAwMTIsMTczLjExMjMsNDQ1LjAwMTIsMTYzLjExMjMsNDQxLjAwMTIsMTY3LjExMjMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDQxLjAwMTIiIHgyPSI0NDEuMDAxMiIgeTE9IjI2MS4wNDk4IiB5Mj0iMjY2LjA0OTgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDQxLjAwMTIiIHgyPSI1NzYuMDAxNiIgeTE9IjI2Ni4wNDk4IiB5Mj0iMjY2LjA0OTgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNTc2LjAwMTYiIHgyPSI1NzYuMDAxNiIgeTE9IjI2Ni4wNDk4IiB5Mj0iMjgxLjA0OTgiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjU3Mi4wMDE2LDI3MS4wNDk4LDU3Ni4wMDE2LDI4MS4wNDk4LDU4MC4wMDE2LDI3MS4wNDk4LDU3Ni4wMDE2LDI3NS4wNDk4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjU3Ni4wMDE2IiB4Mj0iNTc2LjAwMTYiIHkxPSI0MjIuOTU2MSIgeTI9IjQyNy45NTYxIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjU3Ni4wMDE2IiB4Mj0iNjcyLjAwMjEiIHkxPSI0MjcuOTU2MSIgeTI9IjQyNy45NTYxIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjY3Mi4wMDIxIiB4Mj0iNjcyLjAwMjEiIHkxPSI0MjcuOTU2MSIgeTI9IjQ0Mi45NTYxIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI2NjguMDAyMSw0MzIuOTU2MSw2NzIuMDAyMSw0NDIuOTU2MSw2NzYuMDAyMSw0MzIuOTU2MSw2NzIuMDAyMSw0MzYuOTU2MSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI2NzIuMDAyMSIgeDI9IjY3Mi4wMDIxIiB5MT0iNTg0Ljg2MjMiIHkyPSI1ODkuODYyMyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI2NzIuMDAyMSIgeDI9Ijc1OC4wMDIyIiB5MT0iNTg5Ljg2MjMiIHkyPSI1ODkuODYyMyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI3NTguMDAyMiIgeDI9Ijc1OC4wMDIyIiB5MT0iNTg5Ljg2MjMiIHkyPSI2MDQuODYyMyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNzU0LjAwMjIsNTk0Ljg2MjMsNzU4LjAwMjIsNjA0Ljg2MjMsNzYyLjAwMjIsNTk0Ljg2MjMsNzU4LjAwMjIsNTk4Ljg2MjMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNzU4LjAwMjIiIHgyPSI3NTguMDAyMiIgeTE9IjYzOC44MzExIiB5Mj0iNjQzLjgzMTEiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNzU4LjAwMjIiIHgyPSI4NDcuOTI5NCIgeTE9IjY0My44MzExIiB5Mj0iNjQzLjgzMTEiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iODQ3LjkyOTQiIHgyPSI4NDcuOTI5NCIgeTE9IjY0My44MzExIiB5Mj0iNjU4LjgzMTEiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9Ijg0My45Mjk0LDY0OC44MzExLDg0Ny45Mjk0LDY1OC44MzExLDg1MS45Mjk0LDY0OC44MzExLDg0Ny45Mjk0LDY1Mi44MzExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjgyMi4wMTAyIiB4Mj0iMzA5LjAwMDkiIHkxPSI3MjQuNzk5OCIgeTI9IjcyNC43OTk4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjMwOS4wMDA5IiB4Mj0iMzA5LjAwMDkiIHkxPSI3MjQuNzk5OCIgeTI9Ijc1Ni43OTk4Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIzMDUuMDAwOSw3NDYuNzk5OCwzMDkuMDAwOSw3NTYuNzk5OCwzMTMuMDAwOSw3NDYuNzk5OCwzMDkuMDAwOSw3NTAuNzk5OCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMDkuMDAwOSIgeDI9IjMwOS4wMDA5IiB5MT0iODQ0LjczNzMiIHkyPSI4NjYuNzM3MyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMDkuMDAwOSIgeDI9IjgzNS45Mjk0IiB5MT0iODY2LjczNzMiIHkyPSI4NjYuNzM3MyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iODI1LjkyOTQsODYyLjczNzMsODM1LjkyOTQsODY2LjczNzMsODI1LjkyOTQsODcwLjczNzMsODI5LjkyOTQsODY2LjczNzMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4OS45OTk1IiB4PSI4OC4wMDA2IiB5PSI2Ni43NSI+JiMyOTk4MzsmIzI5OTg3OyYjMzE2NDk7JiMyOTcwMjsmIzM3MDk2OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1My45OTk3IiB4PSIzNjAuNTAxMSIgeT0iNjYuNzUiPiYjMzYwOTI7JiMzNjAyMzsmIzM3MDk2OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1My45OTk3IiB4PSI1NDguMDAxOCIgeT0iNjYuNzUiPiYjMjI4MDY7JiMyNzg4MDsmIzM3MDk2OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1My45OTk3IiB4PSI2NDQuMDAyMyIgeT0iNjYuNzUiPiYjMjI5OTY7JiMzNTM1MTsmIzIwODA4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3MS45OTk2IiB4PSI3MjEuMDAyNCIgeT0iNjYuNzUiPiYjMzYwMzk7JiMyNjQ0ODsmIzIwNDg5OyYjMjQyMzU7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE4IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg5Ljk5OTUiIHg9IjgzOC43NzY1IiB5PSI2Ni43NSI+JiMyMTY5NzsmIzM2MDc0OyYjMzE2NDk7JiMyOTcwMjsmIzM3MDk2OzwvdGV4dD48IS0tU1JDPVtSUDdEUWk5MDQ4M2xVT2VTekhOWWVJX0lJdzZuMlhBQnZiQm1lMGFzTWhLNkpWc1hZWDZEYkhRTDZiZWJIbGVtd3NwTWotV2E4TFFYanpzUFJ4eFBjUE5KU2FSYU9UZ1h6WHBVMzNSbGFqQUlNV2tlek9kd0dqRzVLTHNFQXRaNm8zQ2N0ZEJpd096N1RMeFd5bDlESmtPNGVobVpHREdZTFNqV1ZZT3VBSWtCVjJ2emJ2ODVkYXRzbnc5dkdhWWZIZkpnakhHcy1taWhCUkpKWWV2amNFc296SVBlODdYejF4NzNWZTJmMTJWV2NOT3EtaGg1RTFsTjRxWTdlZjJjbmloeGNhNnhIOXFFQUZyNDUzY3VHeXl3aXFHT1EwdmhSMDlCQzNNS0EtU01RN1FGUFd5QnVDYzRaVU5OTW1sX2tnb1p3QUFVc0hlVHdiMmlXbEUxMllYUmNDMXdGMEp3VGVkUHhzVVI0eThTZEd4ZVE4VDRFaWQ3R0F6R3F4c0F5dDlBYkZaT1d2WUZOb3UzUU1XLVdwUDNZcF82VHVNalRxSkxfMUtnRno1dXZ5aV9aVUJfUHVXaEJKUmw3VWpoSmlwYUhKdWNQVUZfRlUtbVJSM2dBY2ViSWhWZjk4VlZkUnRfMUcwMF0tLT48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<hr />
<h2 id="262-db">26.2 外注委託の DB 設計<a class="headerlink" href="#262-db" title="Permanent link">&para;</a></h2>
<h3 id="_4">外注オーダの構造<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p>外注オーダは、通常の購買発注と同じテーブル構造を使用します。発注データと発注明細データに外注委託用の情報を追加する形で管理します。</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjgxNnB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MTY3cHg7aGVpZ2h0OjgxNnB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDE2NyA4MTYiIHdpZHRoPSIxNjdweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjI4MDY7JiMyNzg4MDsmIzIyOTk2OyYjMzUzNTE7JiMxMjM5ODsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsmIzI3MDgzOyYjMzY4OTY7PC90aXRsZT48ZGVmcy8+PGc+PGcgY2xhc3M9InRpdGxlIiBkYXRhLXNvdXJjZS1saW5lPSIxIj48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM5Ljk5OTQiIHg9IjEwIiB5PSIyMi45OTUxIj4mIzIyODA2OyYjMjc4ODA7JiMyMjk5NjsmIzM1MzUxOyYjMTIzOTg7JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7JiMyNzA4MzsmIzM2ODk2OzwvdGV4dD48L2c+PCEtLWNsYXNzIHBvLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9InBvIiBkYXRhLXNvdXJjZS1saW5lPSIzIiBkYXRhLXVpZD0iZW50MDAwMiIgaWQ9ImVudGl0eV9wbyI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMTMuMTg3NSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTI4LjYwNzEiIHg9IjIyLjY5OTUiIHk9IjQ0LjI5NjkiLz48ZWxsaXBzZSBjeD0iNDkuNjcyOCIgY3k9IjYwLjI5NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTUzLjc4MjIsNjYuMjk2OSBMNDYuMDYzNCw2Ni4yOTY5IEw0Ni4wNjM0LDUzLjkwNjMgTDUzLjc4MjIsNTMuOTA2MyBMNTMuNzgyMiw1Ni4wNjI1IEw0OC41MTY1LDU2LjA2MjUgTDQ4LjUxNjUsNTguNzM0NCBMNTMuMjgyMiw1OC43MzQ0IEw1My4yODIyLDYwLjg5MDYgTDQ4LjUxNjUsNjAuODkwNiBMNDguNTE2NSw2NC4xNDA2IEw1My43ODIyLDY0LjE0MDYgTDUzLjc4MjIsNjYuMjk2OSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjY2LjMzMzUiIHk9IjY1LjE0MzYiPiYjMzAzMzA7JiMyNzg4MDsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMjMuNjk5NSIgeDI9IjE1MC4zMDY1IiB5MT0iNzYuMjk2OSIgeTI9Ijc2LjI5NjkiLz48ZWxsaXBzZSBjeD0iMzMuNjk5NSIgY3k9Ijg5Ljk0NTMiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg4Ljk5NjgiIHg9IjQyLjY5OTUiIHk9IjkzLjI5MiI+JiMzMDMzMDsmIzI3ODgwOyYjMzAwNTg7JiMyMTQ5NTsgW1BLXTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjMuNjk5NSIgeDI9IjE1MC4zMDY1IiB5MT0iMTAwLjU5MzgiIHkyPSIxMDAuNTkzOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNi42MDcxIiB4PSIyOC42OTk1IiB5PSIxMTcuNTg4OSI+JiMyMTQ2MjsmIzI0MzQxOyYjMjA4MDg7JiMxMjQ2NzsmIzEyNTQwOyYjMTI0ODk7IFtGS108L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDEuOTk5OCIgeD0iMjguNjk5NSIgeT0iMTMzLjg4NTciPiYjMzAzMzA7JiMyNzg4MDsmIzI2MDg1OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSIyOC42OTk1IiB5PSIxNTAuMTgyNiI+JiMxMjQ3MzsmIzEyNDg2OyYjMTI1NDA7JiMxMjQ3OTsmIzEyNDczOzwvdGV4dD48L2c+PCEtLWNsYXNzIHBvZC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJwb2QiIGRhdGEtc291cmNlLWxpbmU9IjExIiBkYXRhLXVpZD0iZW50MDAwMyIgaWQ9ImVudGl0eV9wb2QiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTI5LjQ4NDQiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEzNi42ODA0IiB4PSIxOC42NTk1IiB5PSIyMzQuNDc2OSIvPjxlbGxpcHNlIGN4PSIzNi42NjU5IiBjeT0iMjUwLjQ3NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTQwLjc3NTIsMjU2LjQ3NjkgTDMzLjA1NjUsMjU2LjQ3NjkgTDMzLjA1NjUsMjQ0LjA4NjMgTDQwLjc3NTIsMjQ0LjA4NjMgTDQwLjc3NTIsMjQ2LjI0MjUgTDM1LjUwOTYsMjQ2LjI0MjUgTDM1LjUwOTYsMjQ4LjkxNDQgTDQwLjI3NTIsMjQ4LjkxNDQgTDQwLjI3NTIsMjUxLjA3MDYgTDM1LjUwOTYsMjUxLjA3MDYgTDM1LjUwOTYsMjU0LjMyMDYgTDQwLjc3NTIsMjU0LjMyMDYgTDQwLjc3NTIsMjU2LjQ3NjkgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ny45OTk2IiB4PSI1MS4zMzQiIHk9IjI1NS4zMjM2Ij4mIzMwMzMwOyYjMjc4ODA7JiMyNjEyNjsmIzMyMDQ4OyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxOS42NTk1IiB4Mj0iMTU0LjMzOTkiIHkxPSIyNjYuNDc2OSIgeTI9IjI2Ni40NzY5Ii8+PGVsbGlwc2UgY3g9IjI5LjY1OTUiIGN5PSIyODAuMTI1MyIgZmlsbD0iIzAwMDAwMCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTEwLjY4MDQiIHg9IjM4LjY1OTUiIHk9IjI4My40NzIiPiYjMzAzMzA7JiMyNzg4MDsmIzMwMDU4OyYjMjE0OTU7IFtQSyxGS108L3RleHQ+PGVsbGlwc2UgY3g9IjI5LjY1OTUiIGN5PSIyOTYuNDIyMiIgZmlsbD0iIzAwMDAwMCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAyLjk5NjgiIHg9IjM4LjY1OTUiIHk9IjI5OS43Njg5Ij4mIzMwMzMwOyYjMjc4ODA7JiMzNDg5MjsmIzMwMDU4OyYjMjE0OTU7IFtQS108L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE5LjY1OTUiIHgyPSIxNTQuMzM5OSIgeTE9IjMwNy4wNzA2IiB5Mj0iMzA3LjA3MDYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDIuNjA3MSIgeD0iMjQuNjU5NSIgeT0iMzI0LjA2NTciPiYjMjE2OTc7JiMzMDQ0NjsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsgW0ZLXTwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSIyNC42NTk1IiB5PSIzNDAuMzYyNiI+JiMzMDMzMDsmIzI3ODgwOyYjMjU5Njg7JiMzNzMyNzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iMjQuNjU5NSIgeT0iMzU2LjY1OTUiPiYjMzAzMzA7JiMyNzg4MDsmIzIxMzM2OyYjMjAzODU7PC90ZXh0PjwvZz48IS0tY2xhc3Mgc3VwLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9InN1cCIgZGF0YS1zb3VyY2UtbGluZT0iMjAiIGRhdGEtdWlkPSJlbnQwMDA0IiBpZD0iZW50aXR5X3N1cCI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxNDUuNzgxMyIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTI4LjYwNzEiIHg9IjIyLjY5OTUiIHk9IjQ0MC45NjY5Ii8+PGVsbGlwc2UgY3g9IjQ5LjY3MjgiIGN5PSI0NTYuOTY2OSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNNTMuNzgyMiw0NjIuOTY2OSBMNDYuMDYzNCw0NjIuOTY2OSBMNDYuMDYzNCw0NTAuNTc2MyBMNTMuNzgyMiw0NTAuNTc2MyBMNTMuNzgyMiw0NTIuNzMyNSBMNDguNTE2NSw0NTIuNzMyNSBMNDguNTE2NSw0NTUuNDA0NCBMNTMuMjgyMiw0NTUuNDA0NCBMNTMuMjgyMiw0NTcuNTYwNiBMNDguNTE2NSw0NTcuNTYwNiBMNDguNTE2NSw0NjAuODEwNiBMNTMuNzgyMiw0NjAuODEwNiBMNTMuNzgyMiw0NjIuOTY2OSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjY2LjMzMzUiIHk9IjQ2MS44MTM2Ij4mIzI1OTAzOyYjMzIxMDI7JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjIzLjY5OTUiIHgyPSIxNTAuMzA2NSIgeTE9IjQ3Mi45NjY5IiB5Mj0iNDcyLjk2NjkiLz48ZWxsaXBzZSBjeD0iMzMuNjk5NSIgY3k9IjQ4Ni42MTUzIiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4OC45OTY4IiB4PSI0Mi42OTk1IiB5PSI0ODkuOTYyIj4mIzI1OTAzOyYjMzIxMDI7JiMzMDA1ODsmIzIxNDk1OyBbUEtdPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyMy42OTk1IiB4Mj0iMTUwLjMwNjUiIHkxPSI0OTcuMjYzOCIgeTI9IjQ5Ny4yNjM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODguNjA3MiIgeD0iMjguNjk5NSIgeT0iNTE0LjI1ODkiPiYjMzAzMzA7JiMyNzg4MDsmIzMwMDU4OyYjMjE0OTU7IFtGS108L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAyLjYwNzEiIHg9IjI4LjY5OTUiIHk9IjUzMC41NTU3Ij4mIzMwMzMwOyYjMjc4ODA7JiMzNDg5MjsmIzMwMDU4OyYjMjE0OTU7IFtGS108L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTE2LjYwNzEiIHg9IjI4LjY5OTUiIHk9IjU0Ni44NTI2Ij4mIzIxNDYyOyYjMjQzNDE7JiMyMDgwODsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsgW0ZLXTwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MS45OTk4IiB4PSIyOC42OTk1IiB5PSI1NjMuMTQ5NSI+JiMyNTkwMzsmIzMyMTAyOyYjMjYwODU7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjI4LjY5OTUiIHk9IjU3OS40NDY0Ij4mIzI1OTAzOyYjMzIxMDI7JiMyMTMwNjsmIzIwOTk4OzwvdGV4dD48L2c+PCEtLWNsYXNzIHN1cGQtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0ic3VwZCIgZGF0YS1zb3VyY2UtbGluZT0iMzAiIGRhdGEtdWlkPSJlbnQwMDA1IiBpZD0iZW50aXR5X3N1cGQiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTQ1Ljc4MTMiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEzNi42ODA0IiB4PSIxOC42NTk1IiB5PSI2NjMuNzQ2OSIvPjxlbGxpcHNlIGN4PSIzNi42NjU5IiBjeT0iNjc5Ljc0NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTQwLjc3NTIsNjg1Ljc0NjkgTDMzLjA1NjUsNjg1Ljc0NjkgTDMzLjA1NjUsNjczLjM1NjMgTDQwLjc3NTIsNjczLjM1NjMgTDQwLjc3NTIsNjc1LjUxMjUgTDM1LjUwOTYsNjc1LjUxMjUgTDM1LjUwOTYsNjc4LjE4NDQgTDQwLjI3NTIsNjc4LjE4NDQgTDQwLjI3NTIsNjgwLjM0MDYgTDM1LjUwOTYsNjgwLjM0MDYgTDM1LjUwOTYsNjgzLjU5MDYgTDQwLjc3NTIsNjgzLjU5MDYgTDQwLjc3NTIsNjg1Ljc0NjkgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ny45OTk2IiB4PSI1MS4zMzQiIHk9IjY4NC41OTM2Ij4mIzI1OTAzOyYjMzIxMDI7JiMyNjEyNjsmIzMyMDQ4OyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxOS42NTk1IiB4Mj0iMTU0LjMzOTkiIHkxPSI2OTUuNzQ2OSIgeTI9IjY5NS43NDY5Ii8+PGVsbGlwc2UgY3g9IjI5LjY1OTUiIGN5PSI3MDkuMzk1MyIgZmlsbD0iIzAwMDAwMCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTEwLjY4MDQiIHg9IjM4LjY1OTUiIHk9IjcxMi43NDIiPiYjMjU5MDM7JiMzMjEwMjsmIzMwMDU4OyYjMjE0OTU7IFtQSyxGS108L3RleHQ+PGVsbGlwc2UgY3g9IjI5LjY1OTUiIGN5PSI3MjUuNjkyMiIgZmlsbD0iIzAwMDAwMCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAyLjk5NjgiIHg9IjM4LjY1OTUiIHk9IjcyOS4wMzg5Ij4mIzI1OTAzOyYjMzIxMDI7JiMzNDg5MjsmIzMwMDU4OyYjMjE0OTU7IFtQS108L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE5LjY1OTUiIHgyPSIxNTQuMzM5OSIgeTE9IjczNi4zNDA2IiB5Mj0iNzM2LjM0MDYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDIuNjA3MSIgeD0iMjQuNjU5NSIgeT0iNzUzLjMzNTciPiYjMjE2OTc7JiMzMDQ0NjsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsgW0ZLXTwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MS45OTk4IiB4PSIyNC42NTk1IiB5PSI3NjkuNjMyNiI+JiMyNTkwMzsmIzMyMTAyOyYjMjU5Njg7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjI0LjY1OTUiIHk9Ijc4NS45Mjk1Ij4mIzI1OTAzOyYjMzIxMDI7JiMyMTMzNjsmIzIwMzg1OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSIyNC42NTk1IiB5PSI4MDIuMjI2NCI+JiMyNTkwMzsmIzMyMTAyOyYjMzczMjk7JiMzODk4OTs8L3RleHQ+PC9nPjwhLS1saW5rIHBvIHRvIHBvZC0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJwbyIgZGF0YS1lbnRpdHktMj0icG9kIiBkYXRhLXNvdXJjZS1saW5lPSI0MCIgZGF0YS11aWQ9ImxuazYiIGlkPSJsaW5rX3BvX3BvZCI+PHBhdGggY29kZUxpbmU9IjQwIiBkPSJNODYuOTk5NSwxNjUuODg2OSBDODYuOTk5NSwxODkuNjg2OSA4Ni45OTk1LDE5MS41NzY5IDg2Ljk5OTUsMjE2LjE4NjkiIGZpbGw9Im5vbmUiIGlkPSJwby1wb2QiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iODIuOTk5NSIgeDI9IjkwLjk5OTUiIHkxPSIxNjEuODg2OSIgeTI9IjE2MS44ODY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjgyLjk5OTUiIHgyPSI5MC45OTk1IiB5MT0iMTY0Ljg4NjkiIHkyPSIxNjQuODg2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI4Ni45OTk1IiB4Mj0iODYuOTk5NSIgeTE9IjE2NS44ODY5IiB5Mj0iMTU3Ljg4NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iODYuOTk5NSIgeDI9IjkyLjk5OTUiIHkxPSIyMjYuMTg2OSIgeTI9IjIzNC4xODY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9Ijg2Ljk5OTUiIHgyPSI4MC45OTk1IiB5MT0iMjI2LjE4NjkiIHkyPSIyMzQuMTg2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI4Ni45OTk1IiB4Mj0iODYuOTk5NSIgeTE9IjIyNi4xODY5IiB5Mj0iMjM0LjE4NjkiLz48ZWxsaXBzZSBjeD0iODYuOTk5NSIgY3k9IjIyMC4xODY5IiBmaWxsPSJub25lIiByeD0iNCIgcnk9IjQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS4wMjc4IiB4PSI4Ny45OTk1IiB5PSIyMDAuNTQzOCI+Y29udGFpbnM8L3RleHQ+PC9nPjwhLS1saW5rIHBvZCB0byBzdXAtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0icG9kIiBkYXRhLWVudGl0eS0yPSJzdXAiIGRhdGEtc291cmNlLWxpbmU9IjQxIiBkYXRhLXVpZD0ibG5rNyIgaWQ9ImxpbmtfcG9kX3N1cCI+PHBhdGggY29kZUxpbmU9IjQxIiBkPSJNODYuOTk5NSwzNzIuMzA2OSBDODYuOTk5NSwzOTYuMzk2OSA4Ni45OTk1LDM5Ny45MzY5IDg2Ljk5OTUsNDIyLjcxNjkiIGZpbGw9Im5vbmUiIGlkPSJwb2Qtc3VwIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjgyLjk5OTUiIHgyPSI5MC45OTk1IiB5MT0iMzY4LjMwNjkiIHkyPSIzNjguMzA2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI4Mi45OTk1IiB4Mj0iOTAuOTk5NSIgeTE9IjM3MS4zMDY5IiB5Mj0iMzcxLjMwNjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iODYuOTk5NSIgeDI9Ijg2Ljk5OTUiIHkxPSIzNzIuMzA2OSIgeTI9IjM2NC4zMDY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9Ijg2Ljk5OTUiIHgyPSI5Mi45OTk1IiB5MT0iNDMyLjcxNjkiIHkyPSI0NDAuNzE2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI4Ni45OTk1IiB4Mj0iODAuOTk5NSIgeTE9IjQzMi43MTY5IiB5Mj0iNDQwLjcxNjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iODYuOTk5NSIgeDI9Ijg2Ljk5OTUiIHkxPSI0MzIuNzE2OSIgeTI9IjQ0MC43MTY5Ii8+PGVsbGlwc2UgY3g9Ijg2Ljk5OTUiIGN5PSI0MjYuNzE2OSIgZmlsbD0ibm9uZSIgcng9IjQiIHJ5PSI0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjYiIHg9Ijg3Ljk5OTUiIHk9IjQwNy4wMzM4Ij4mIzI1OTAzOyYjMzIxMDI7PC90ZXh0PjwvZz48IS0tbGluayBzdXAgdG8gc3VwZC0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJzdXAiIGRhdGEtZW50aXR5LTI9InN1cGQiIGRhdGEtc291cmNlLWxpbmU9IjQyIiBkYXRhLXVpZD0ibG5rOCIgaWQ9Imxpbmtfc3VwX3N1cGQiPjxwYXRoIGNvZGVMaW5lPSI0MiIgZD0iTTg2Ljk5OTUsNTk1LjE0NjkgQzg2Ljk5OTUsNjE5LjY2NjkgODYuOTk5NSw2MjEuMDU2OSA4Ni45OTk1LDY0NS41NTY5IiBmaWxsPSJub25lIiBpZD0ic3VwLXN1cGQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iODIuOTk5NSIgeDI9IjkwLjk5OTUiIHkxPSI1OTEuMTQ2OSIgeTI9IjU5MS4xNDY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjgyLjk5OTUiIHgyPSI5MC45OTk1IiB5MT0iNTk0LjE0NjkiIHkyPSI1OTQuMTQ2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI4Ni45OTk1IiB4Mj0iODYuOTk5NSIgeTE9IjU5NS4xNDY5IiB5Mj0iNTg3LjE0NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iODYuOTk5NSIgeDI9IjkyLjk5OTUiIHkxPSI2NTUuNTU2OSIgeTI9IjY2My41NTY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9Ijg2Ljk5OTUiIHgyPSI4MC45OTk1IiB5MT0iNjU1LjU1NjkiIHkyPSI2NjMuNTU2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI4Ni45OTk1IiB4Mj0iODYuOTk5NSIgeTE9IjY1NS41NTY5IiB5Mj0iNjYzLjU1NjkiLz48ZWxsaXBzZSBjeD0iODYuOTk5NSIgY3k9IjY0OS41NTY5IiBmaWxsPSJub25lIiByeD0iNCIgcnk9IjQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS4wMjc4IiB4PSI4Ny45OTk1IiB5PSI2MjkuODEzOCI+Y29udGFpbnM8L3RleHQ+PC9nPjwhLS1TUkM9W0F5YWlvS2JMVUJmYXNoRkRBdnVrZF85WW5WSjdaVWlVRHhTX1JqeHBrNmRfaS1OVEJuaU1TNzZidmZMYWJiR2dBM3NWa0drZTNZd2pmOTFPaDUyR2hyM0RmUUswYU5lLVRUTkpfa3FBcUc3VWlMb3drYm5GLXdTenRKRnJRTWw3dXdSRDgydERkR2hIUmEwZllFOWRxdlRvRk14US1SWXYzTThTYUNyTFlzeFBpbmJ6cHhUaUdCU28xUWtURVkycE9TOGw1bFFXa3NQb3VfRlB3eDB4UFVnNmItdHpLQ3hKdFhiRnpZcjRUaWdwQVVrVlJyczZ3ZVpZcVdBbThvMW9RNVFYa1duWDN2QVpHOEF1bVdUWTlZWHk4QW9kRlJrVVRoSFhrV1hSdTAzVGJPQkxPVDNHV0dXSjZKZkdRd1BrVzNhNDRaR0dwaWxzWUl5TnplOVMxS20zREpNd2tsZEx1QVluS2FaRXBvajlwQ21odlc5bmVKQVd5QkEyc2l1NXVZMzRhUkswMDAwMF0tLT48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_5">支給関連のスキーマ設計<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<details>
<summary>DDL: 支給関連テーブル</summary>

<div class="highlight"><pre><span></span><code><span class="c1">-- V011__create_supply_tables.sql</span>

<span class="c1">-- 支給区分</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TYPE</span><span class="w"> </span><span class="err">支給区分</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">ENUM</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;有償支給&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;無償支給&#39;</span><span class="p">);</span>

<span class="c1">-- 支給データ</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;支給データ&quot;</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="ss">&quot;ID&quot;</span><span class="w"> </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;支給番号&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;発注番号&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;発注行番号&quot;</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;取引先コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;支給日&quot;</span><span class="w"> </span><span class="nb">DATE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;支給担当者コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;支給区分&quot;</span><span class="w"> </span><span class="err">支給区分</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="s1">&#39;無償支給&#39;</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;備考&quot;</span><span class="w"> </span><span class="nb">TEXT</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;作成日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;作成者&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;更新日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;更新者&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;fk_支給データ_発注明細&quot;</span>
<span class="w">        </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;発注番号&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;発注行番号&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;発注明細データ&quot;</span><span class="p">(</span><span class="ss">&quot;発注番号&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;発注行番号&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;fk_支給データ_取引先&quot;</span>
<span class="w">        </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;取引先コード&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;取引先マスタ&quot;</span><span class="p">(</span><span class="ss">&quot;取引先コード&quot;</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">-- 支給明細データ</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;支給明細データ&quot;</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="ss">&quot;ID&quot;</span><span class="w"> </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;支給番号&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;支給行番号&quot;</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;品目コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;支給数&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;支給単価&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;支給金額&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;備考&quot;</span><span class="w"> </span><span class="nb">TEXT</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;作成日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;更新日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;fk_支給明細_支給&quot;</span>
<span class="w">        </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;支給番号&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;支給データ&quot;</span><span class="p">(</span><span class="ss">&quot;支給番号&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;fk_支給明細_品目&quot;</span>
<span class="w">        </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;品目コード&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;品目マスタ&quot;</span><span class="p">(</span><span class="ss">&quot;品目コード&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="k">UNIQUE</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;支給番号&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;支給行番号&quot;</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">-- インデックス</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_支給データ_発注番号&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;支給データ&quot;</span><span class="p">(</span><span class="ss">&quot;発注番号&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;発注行番号&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_支給データ_取引先コード&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;支給データ&quot;</span><span class="p">(</span><span class="ss">&quot;取引先コード&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_支給データ_支給日&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;支給データ&quot;</span><span class="p">(</span><span class="ss">&quot;支給日&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_支給明細_品目コード&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;支給明細データ&quot;</span><span class="p">(</span><span class="ss">&quot;品目コード&quot;</span><span class="p">);</span>
</code></pre></div>

</details>

<h3 id="_6">発注データとの紐付け<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<p>支給データは発注明細データと紐付けられます。1つの発注明細に対して、複数の支給が発生する場合があります（分割支給）。</p>
<h3 id="_7">支給金額の計算（有償支給の場合）<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<p>有償支給の場合、支給金額は以下の計算式で算出されます：</p>
<div class="highlight"><pre><span></span><code>支給金額 = 支給数 × 支給単価
</code></pre></div>
<p>無償支給の場合も金額は計算されますが、会計処理が異なります。</p>
<h3 id="java">Java エンティティの定義<a class="headerlink" href="#java" title="Permanent link">&para;</a></h3>
<details>
<summary>支給区分 Enum</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/domain/model/subcontract/SupplyType.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.domain.model.subcontract</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Getter</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>

<span class="nd">@Getter</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">enum</span><span class="w"> </span><span class="n">SupplyType</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">PAID</span><span class="p">(</span><span class="s">&quot;有償支給&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">FREE</span><span class="p">(</span><span class="s">&quot;無償支給&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">displayName</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">SupplyType</span><span class="w"> </span><span class="nf">fromDisplayName</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">displayName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">SupplyType</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">values</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">type</span><span class="p">.</span><span class="na">displayName</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">displayName</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">type</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;Unknown supply type: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">displayName</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>支給データエンティティ</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/domain/model/subcontract/Supply.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.domain.model.subcontract</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.master.Supplier</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.purchase.PurchaseOrderDetail</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Builder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Supply</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">supplyNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">purchaseOrderNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">lineNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">supplierCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">supplyDate</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">supplierPersonCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">SupplyType</span><span class="w"> </span><span class="n">supplyType</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">remarks</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">createdAt</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">createdBy</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">updatedAt</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">updatedBy</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// リレーション</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">PurchaseOrderDetail</span><span class="w"> </span><span class="n">purchaseOrderDetail</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Supplier</span><span class="w"> </span><span class="n">supplier</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">SupplyDetail</span><span class="o">&gt;</span><span class="w"> </span><span class="n">details</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>支給明細データエンティティ</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/domain/model/subcontract/SupplyDetail.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.domain.model.subcontract</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.item.Item</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Builder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>

<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SupplyDetail</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">supplyNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">lineNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">quantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">unitPrice</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">amount</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">remarks</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">createdAt</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">updatedAt</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// リレーション</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Supply</span><span class="w"> </span><span class="n">supply</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Item</span><span class="w"> </span><span class="n">item</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="typehandler">TypeHandler の実装<a class="headerlink" href="#typehandler" title="Permanent link">&para;</a></h3>
<details>
<summary>SupplyTypeTypeHandler</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/infrastructure/persistence/SupplyTypeTypeHandler.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.persistence</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.subcontract.SupplyType</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.ibatis.type.BaseTypeHandler</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.ibatis.type.JdbcType</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.ibatis.type.MappedTypes</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.sql.CallableStatement</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.sql.PreparedStatement</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.sql.ResultSet</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.sql.SQLException</span><span class="p">;</span>

<span class="nd">@MappedTypes</span><span class="p">(</span><span class="n">SupplyType</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SupplyTypeTypeHandler</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">BaseTypeHandler</span><span class="o">&lt;</span><span class="n">SupplyType</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setNonNullParameter</span><span class="p">(</span><span class="n">PreparedStatement</span><span class="w"> </span><span class="n">ps</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">SupplyType</span><span class="w"> </span><span class="n">parameter</span><span class="p">,</span><span class="w"> </span><span class="n">JdbcType</span><span class="w"> </span><span class="n">jdbcType</span><span class="p">)</span>
<span class="w">            </span><span class="kd">throws</span><span class="w"> </span><span class="n">SQLException</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">ps</span><span class="p">.</span><span class="na">setString</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">parameter</span><span class="p">.</span><span class="na">getDisplayName</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">SupplyType</span><span class="w"> </span><span class="nf">getNullableResult</span><span class="p">(</span><span class="n">ResultSet</span><span class="w"> </span><span class="n">rs</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">columnName</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">SQLException</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rs</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="n">columnName</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">SupplyType</span><span class="p">.</span><span class="na">fromDisplayName</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">SupplyType</span><span class="w"> </span><span class="nf">getNullableResult</span><span class="p">(</span><span class="n">ResultSet</span><span class="w"> </span><span class="n">rs</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">columnIndex</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">SQLException</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rs</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="n">columnIndex</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">SupplyType</span><span class="p">.</span><span class="na">fromDisplayName</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">SupplyType</span><span class="w"> </span><span class="nf">getNullableResult</span><span class="p">(</span><span class="n">CallableStatement</span><span class="w"> </span><span class="n">cs</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">columnIndex</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">SQLException</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cs</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="n">columnIndex</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">SupplyType</span><span class="p">.</span><span class="na">fromDisplayName</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="mybatis-mapper-xml">MyBatis Mapper XML<a class="headerlink" href="#mybatis-mapper-xml" title="Permanent link">&para;</a></h3>
<details>
<summary>SupplyMapper.xml</summary>

<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- src/main/resources/com/example/production/infrastructure/persistence/mapper/SupplyMapper.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="cp">&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
<span class="cp">        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span>
<span class="nt">&lt;mapper</span><span class="w"> </span><span class="na">namespace=</span><span class="s">&quot;com.example.production.infrastructure.persistence.mapper.SupplyMapper&quot;</span><span class="nt">&gt;</span>

<span class="w">    </span><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;SupplyResultMap&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;com.example.production.domain.model.subcontract.Supply&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;ID&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;supplyNumber&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;支給番号&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;purchaseOrderNumber&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;発注番号&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;lineNumber&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;発注行番号&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;supplierCode&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;取引先コード&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;supplyDate&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;支給日&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;supplierPersonCode&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;支給担当者コード&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;supplyType&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;支給区分&quot;</span>
<span class="w">                </span><span class="na">typeHandler=</span><span class="s">&quot;com.example.production.infrastructure.persistence.SupplyTypeTypeHandler&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;remarks&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;備考&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;createdAt&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;作成日時&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;createdBy&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;作成者&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;updatedAt&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;更新日時&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;updatedBy&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;更新者&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/resultMap&gt;</span>

<span class="w">    </span><span class="nt">&lt;insert</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;insert&quot;</span><span class="w"> </span><span class="na">useGeneratedKeys=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="na">keyProperty=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">keyColumn=</span><span class="s">&quot;ID&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>INSERT<span class="w"> </span>INTO<span class="w"> </span>&quot;支給データ&quot;<span class="w"> </span>(
<span class="w">            </span>&quot;支給番号&quot;,<span class="w"> </span>&quot;発注番号&quot;,<span class="w"> </span>&quot;発注行番号&quot;,<span class="w"> </span>&quot;取引先コード&quot;,
<span class="w">            </span>&quot;支給日&quot;,<span class="w"> </span>&quot;支給担当者コード&quot;,<span class="w"> </span>&quot;支給区分&quot;,<span class="w"> </span>&quot;備考&quot;,<span class="w"> </span>&quot;作成者&quot;
<span class="w">        </span>)<span class="w"> </span>VALUES<span class="w"> </span>(
<span class="w">            </span>#{supplyNumber},
<span class="w">            </span>#{purchaseOrderNumber},
<span class="w">            </span>#{lineNumber},
<span class="w">            </span>#{supplierCode},
<span class="w">            </span>#{supplyDate},
<span class="w">            </span>#{supplierPersonCode},
<span class="w">            </span>#{supplyType,<span class="w"> </span>typeHandler=com.example.production.infrastructure.persistence.SupplyTypeTypeHandler}::支給区分,
<span class="w">            </span>#{remarks},
<span class="w">            </span>#{createdBy}
<span class="w">        </span>)
<span class="w">    </span><span class="nt">&lt;/insert&gt;</span>

<span class="w">    </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;findBySupplyNumber&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;SupplyResultMap&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>SELECT<span class="w"> </span>*<span class="w"> </span>FROM<span class="w"> </span>&quot;支給データ&quot;<span class="w"> </span>WHERE<span class="w"> </span>&quot;支給番号&quot;<span class="w"> </span>=<span class="w"> </span>#{supplyNumber}
<span class="w">    </span><span class="nt">&lt;/select&gt;</span>

<span class="w">    </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;findByPurchaseOrderDetail&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;SupplyResultMap&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>SELECT<span class="w"> </span>*<span class="w"> </span>FROM<span class="w"> </span>&quot;支給データ&quot;
<span class="w">        </span>WHERE<span class="w"> </span>&quot;発注番号&quot;<span class="w"> </span>=<span class="w"> </span>#{purchaseOrderNumber}<span class="w"> </span>AND<span class="w"> </span>&quot;発注行番号&quot;<span class="w"> </span>=<span class="w"> </span>#{lineNumber}
<span class="w">    </span><span class="nt">&lt;/select&gt;</span>

<span class="w">    </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;findLatestSupplyNumber&quot;</span><span class="w"> </span><span class="na">resultType=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>SELECT<span class="w"> </span>&quot;支給番号&quot;<span class="w"> </span>FROM<span class="w"> </span>&quot;支給データ&quot;
<span class="w">        </span>WHERE<span class="w"> </span>&quot;支給番号&quot;<span class="w"> </span>LIKE<span class="w"> </span>#{prefix}
<span class="w">        </span>ORDER<span class="w"> </span>BY<span class="w"> </span>&quot;支給番号&quot;<span class="w"> </span>DESC
<span class="w">        </span>LIMIT<span class="w"> </span>1
<span class="w">    </span><span class="nt">&lt;/select&gt;</span>

<span class="w">    </span><span class="nt">&lt;delete</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;deleteAll&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>DELETE<span class="w"> </span>FROM<span class="w"> </span>&quot;支給データ&quot;
<span class="w">    </span><span class="nt">&lt;/delete&gt;</span>
<span class="nt">&lt;/mapper&gt;</span>
</code></pre></div>

</details>

<details>
<summary>SupplyDetailMapper.xml</summary>

<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- src/main/resources/com/example/production/infrastructure/persistence/mapper/SupplyDetailMapper.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="cp">&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
<span class="cp">        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span>
<span class="nt">&lt;mapper</span><span class="w"> </span><span class="na">namespace=</span><span class="s">&quot;com.example.production.infrastructure.persistence.mapper.SupplyDetailMapper&quot;</span><span class="nt">&gt;</span>

<span class="w">    </span><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;SupplyDetailResultMap&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;com.example.production.domain.model.subcontract.SupplyDetail&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;ID&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;supplyNumber&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;支給番号&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;lineNumber&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;支給行番号&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;itemCode&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;品目コード&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;quantity&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;支給数&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;unitPrice&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;支給単価&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;amount&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;支給金額&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;remarks&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;備考&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;createdAt&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;作成日時&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;updatedAt&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;更新日時&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/resultMap&gt;</span>

<span class="w">    </span><span class="nt">&lt;insert</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;insert&quot;</span><span class="w"> </span><span class="na">useGeneratedKeys=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="na">keyProperty=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">keyColumn=</span><span class="s">&quot;ID&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>INSERT<span class="w"> </span>INTO<span class="w"> </span>&quot;支給明細データ&quot;<span class="w"> </span>(
<span class="w">            </span>&quot;支給番号&quot;,<span class="w"> </span>&quot;支給行番号&quot;,<span class="w"> </span>&quot;品目コード&quot;,<span class="w"> </span>&quot;支給数&quot;,<span class="w"> </span>&quot;支給単価&quot;,<span class="w"> </span>&quot;支給金額&quot;,<span class="w"> </span>&quot;備考&quot;
<span class="w">        </span>)<span class="w"> </span>VALUES<span class="w"> </span>(
<span class="w">            </span>#{supplyNumber},
<span class="w">            </span>#{lineNumber},
<span class="w">            </span>#{itemCode},
<span class="w">            </span>#{quantity},
<span class="w">            </span>#{unitPrice},
<span class="w">            </span>#{amount},
<span class="w">            </span>#{remarks}
<span class="w">        </span>)
<span class="w">    </span><span class="nt">&lt;/insert&gt;</span>

<span class="w">    </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;findBySupplyNumber&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;SupplyDetailResultMap&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>SELECT<span class="w"> </span>*<span class="w"> </span>FROM<span class="w"> </span>&quot;支給明細データ&quot;
<span class="w">        </span>WHERE<span class="w"> </span>&quot;支給番号&quot;<span class="w"> </span>=<span class="w"> </span>#{supplyNumber}
<span class="w">        </span>ORDER<span class="w"> </span>BY<span class="w"> </span>&quot;支給行番号&quot;
<span class="w">    </span><span class="nt">&lt;/select&gt;</span>

<span class="w">    </span><span class="nt">&lt;delete</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;deleteAll&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>DELETE<span class="w"> </span>FROM<span class="w"> </span>&quot;支給明細データ&quot;
<span class="w">    </span><span class="nt">&lt;/delete&gt;</span>
<span class="nt">&lt;/mapper&gt;</span>
</code></pre></div>

</details>

<h3 id="mapper">Mapper インターフェース<a class="headerlink" href="#mapper" title="Permanent link">&para;</a></h3>
<details>
<summary>SupplyMapper</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/infrastructure/persistence/mapper/SupplyMapper.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.persistence.mapper</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.subcontract.Supply</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.ibatis.annotations.Mapper</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.ibatis.annotations.Param</span><span class="p">;</span>

<span class="nd">@Mapper</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">SupplyMapper</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">insert</span><span class="p">(</span><span class="n">Supply</span><span class="w"> </span><span class="n">supply</span><span class="p">);</span>
<span class="w">    </span><span class="n">Supply</span><span class="w"> </span><span class="nf">findBySupplyNumber</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">supplyNumber</span><span class="p">);</span>
<span class="w">    </span><span class="n">Supply</span><span class="w"> </span><span class="nf">findByPurchaseOrderDetail</span><span class="p">(</span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;purchaseOrderNumber&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">purchaseOrderNumber</span><span class="p">,</span>
<span class="w">                                     </span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;lineNumber&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">lineNumber</span><span class="p">);</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="nf">findLatestSupplyNumber</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">prefix</span><span class="p">);</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">deleteAll</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>SupplyDetailMapper</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/infrastructure/persistence/mapper/SupplyDetailMapper.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.persistence.mapper</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.subcontract.SupplyDetail</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.ibatis.annotations.Mapper</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="nd">@Mapper</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">SupplyDetailMapper</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">insert</span><span class="p">(</span><span class="n">SupplyDetail</span><span class="w"> </span><span class="n">detail</span><span class="p">);</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">SupplyDetail</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findBySupplyNumber</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">supplyNumber</span><span class="p">);</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">deleteAll</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="_8">支給サービスの実装<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<details>
<summary>SupplyService</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/application/service/SupplyService.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.application.service</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.application.port.in.command.SupplyCreateCommand</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.application.port.in.command.SupplyDetailCommand</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.subcontract.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.persistence.mapper.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Service</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.transaction.annotation.Transactional</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.format.DateTimeFormatter</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.ArrayList</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="nd">@Service</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SupplyService</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">SupplyMapper</span><span class="w"> </span><span class="n">supplyMapper</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">SupplyDetailMapper</span><span class="w"> </span><span class="n">supplyDetailMapper</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 支給番号を生成する</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">generateSupplyNumber</span><span class="p">(</span><span class="n">LocalDate</span><span class="w"> </span><span class="n">supplyDate</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;SUP-&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">supplyDate</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="n">DateTimeFormatter</span><span class="p">.</span><span class="na">ofPattern</span><span class="p">(</span><span class="s">&quot;yyyyMM&quot;</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;-&quot;</span><span class="p">;</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">latestNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">supplyMapper</span><span class="p">.</span><span class="na">findLatestSupplyNumber</span><span class="p">(</span><span class="n">prefix</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;%&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">sequence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">latestNumber</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">currentSequence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Integer</span><span class="p">.</span><span class="na">parseInt</span><span class="p">(</span><span class="n">latestNumber</span><span class="p">.</span><span class="na">substring</span><span class="p">(</span><span class="n">latestNumber</span><span class="p">.</span><span class="na">length</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">4</span><span class="p">));</span>
<span class="w">            </span><span class="n">sequence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">currentSequence</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">prefix</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;%04d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">sequence</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 支給データを作成する</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Supply</span><span class="w"> </span><span class="nf">createSupply</span><span class="p">(</span><span class="n">SupplyCreateCommand</span><span class="w"> </span><span class="n">command</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">supplyNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">generateSupplyNumber</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getSupplyDate</span><span class="p">());</span>
<span class="w">        </span><span class="n">SupplyType</span><span class="w"> </span><span class="n">supplyType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">command</span><span class="p">.</span><span class="na">getSupplyType</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">command</span><span class="p">.</span><span class="na">getSupplyType</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">SupplyType</span><span class="p">.</span><span class="na">FREE</span><span class="p">;</span>

<span class="w">        </span><span class="c1">// 支給ヘッダを作成</span>
<span class="w">        </span><span class="n">Supply</span><span class="w"> </span><span class="n">supply</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Supply</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">supplyNumber</span><span class="p">(</span><span class="n">supplyNumber</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">purchaseOrderNumber</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getPurchaseOrderNumber</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">lineNumber</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getLineNumber</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">supplierCode</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getSupplierCode</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">supplyDate</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getSupplyDate</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">supplierPersonCode</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getSupplierPersonCode</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">supplyType</span><span class="p">(</span><span class="n">supplyType</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">remarks</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getRemarks</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">        </span><span class="n">supplyMapper</span><span class="p">.</span><span class="na">insert</span><span class="p">(</span><span class="n">supply</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// 支給明細を作成</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">SupplyDetail</span><span class="o">&gt;</span><span class="w"> </span><span class="n">details</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">detailLineNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">SupplyDetailCommand</span><span class="w"> </span><span class="n">detailCommand</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">command</span><span class="p">.</span><span class="na">getDetails</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">detailLineNumber</span><span class="o">++</span><span class="p">;</span>

<span class="w">            </span><span class="n">SupplyDetail</span><span class="w"> </span><span class="n">detail</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SupplyDetail</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">supplyNumber</span><span class="p">(</span><span class="n">supplyNumber</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">lineNumber</span><span class="p">(</span><span class="n">detailLineNumber</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">itemCode</span><span class="p">(</span><span class="n">detailCommand</span><span class="p">.</span><span class="na">getItemCode</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">quantity</span><span class="p">(</span><span class="n">detailCommand</span><span class="p">.</span><span class="na">getQuantity</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">unitPrice</span><span class="p">(</span><span class="n">detailCommand</span><span class="p">.</span><span class="na">getUnitPrice</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">amount</span><span class="p">(</span><span class="n">detailCommand</span><span class="p">.</span><span class="na">getQuantity</span><span class="p">().</span><span class="na">multiply</span><span class="p">(</span><span class="n">detailCommand</span><span class="p">.</span><span class="na">getUnitPrice</span><span class="p">()))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">remarks</span><span class="p">(</span><span class="n">detailCommand</span><span class="p">.</span><span class="na">getRemarks</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">            </span><span class="n">supplyDetailMapper</span><span class="p">.</span><span class="na">insert</span><span class="p">(</span><span class="n">detail</span><span class="p">);</span>

<span class="w">            </span><span class="n">details</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">detail</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">supply</span><span class="p">.</span><span class="na">setDetails</span><span class="p">(</span><span class="n">details</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">supply</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 支給番号で検索する</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Supply</span><span class="w"> </span><span class="nf">findBySupplyNumber</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">supplyNumber</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Supply</span><span class="w"> </span><span class="n">supply</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">supplyMapper</span><span class="p">.</span><span class="na">findBySupplyNumber</span><span class="p">(</span><span class="n">supplyNumber</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">supply</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">supply</span><span class="p">.</span><span class="na">setDetails</span><span class="p">(</span><span class="n">supplyDetailMapper</span><span class="p">.</span><span class="na">findBySupplyNumber</span><span class="p">(</span><span class="n">supplyNumber</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">supply</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="_9">コマンドクラス<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<details>
<summary>SupplyCreateCommand</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/application/port/in/command/SupplyCreateCommand.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.application.port.in.command</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.subcontract.SupplyType</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Builder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SupplyCreateCommand</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">purchaseOrderNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">lineNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">supplierCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">supplyDate</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">supplierPersonCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">SupplyType</span><span class="w"> </span><span class="n">supplyType</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">remarks</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">SupplyDetailCommand</span><span class="o">&gt;</span><span class="w"> </span><span class="n">details</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>SupplyDetailCommand</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/application/port/in/command/SupplyDetailCommand.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.application.port.in.command</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Builder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>

<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SupplyDetailCommand</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">quantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">unitPrice</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">remarks</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="tdd">TDD: 支給データの登録テスト<a class="headerlink" href="#tdd" title="Permanent link">&para;</a></h3>
<details>
<summary>SupplyServiceTest</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/test/java/com/example/production/application/service/SupplyServiceTest.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.application.service</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.item.Item</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.item.ItemCategory</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.master.Supplier</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.purchase.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.subcontract.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.persistence.mapper.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.mybatis.spring.boot.test.autoconfigure.MybatisTest</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.boot.test.autoconfigure.jdbc.AutoConfigureTestDatabase</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.context.annotation.Import</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.test.context.DynamicPropertyRegistry</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.test.context.DynamicPropertySource</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.containers.PostgreSQLContainer</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.junit.jupiter.Container</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.junit.jupiter.Testcontainers</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="kn">import static</span><span class="w"> </span><span class="nn">org.assertj.core.api.Assertions.*</span><span class="p">;</span>

<span class="nd">@MybatisTest</span>
<span class="nd">@AutoConfigureTestDatabase</span><span class="p">(</span><span class="n">replace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AutoConfigureTestDatabase</span><span class="p">.</span><span class="na">Replace</span><span class="p">.</span><span class="na">NONE</span><span class="p">)</span>
<span class="nd">@Import</span><span class="p">({</span><span class="n">SupplyService</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">PurchaseOrderService</span><span class="p">.</span><span class="na">class</span><span class="p">})</span>
<span class="nd">@Testcontainers</span>
<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;支給業務&quot;</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">SupplyServiceTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Container</span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="n">PostgreSQLContainer</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PostgreSQLContainer</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="s">&quot;postgres:15&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withDatabaseName</span><span class="p">(</span><span class="s">&quot;testdb&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withUsername</span><span class="p">(</span><span class="s">&quot;testuser&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withPassword</span><span class="p">(</span><span class="s">&quot;testpass&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="nd">@DynamicPropertySource</span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configureProperties</span><span class="p">(</span><span class="n">DynamicPropertyRegistry</span><span class="w"> </span><span class="n">registry</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.datasource.url&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">postgres</span><span class="p">::</span><span class="n">getJdbcUrl</span><span class="p">);</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.datasource.username&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">postgres</span><span class="p">::</span><span class="n">getUsername</span><span class="p">);</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.datasource.password&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">postgres</span><span class="p">::</span><span class="n">getPassword</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">SupplyService</span><span class="w"> </span><span class="n">supplyService</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">PurchaseOrderService</span><span class="w"> </span><span class="n">purchaseOrderService</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ItemMapper</span><span class="w"> </span><span class="n">itemMapper</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">SupplierMapper</span><span class="w"> </span><span class="n">supplierMapper</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">UnitPriceMapper</span><span class="w"> </span><span class="n">unitPriceMapper</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">SupplyMapper</span><span class="w"> </span><span class="n">supplyMapper</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">SupplyDetailMapper</span><span class="w"> </span><span class="n">supplyDetailMapper</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">PurchaseOrderMapper</span><span class="w"> </span><span class="n">purchaseOrderMapper</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">PurchaseOrderDetailMapper</span><span class="w"> </span><span class="n">purchaseOrderDetailMapper</span><span class="p">;</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">PurchaseOrder</span><span class="w"> </span><span class="n">testPurchaseOrder</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@BeforeEach</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setUp</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">supplyDetailMapper</span><span class="p">.</span><span class="na">deleteAll</span><span class="p">();</span>
<span class="w">        </span><span class="n">supplyMapper</span><span class="p">.</span><span class="na">deleteAll</span><span class="p">();</span>
<span class="w">        </span><span class="n">purchaseOrderDetailMapper</span><span class="p">.</span><span class="na">deleteAll</span><span class="p">();</span>
<span class="w">        </span><span class="n">purchaseOrderMapper</span><span class="p">.</span><span class="na">deleteAll</span><span class="p">();</span>
<span class="w">        </span><span class="n">unitPriceMapper</span><span class="p">.</span><span class="na">deleteAll</span><span class="p">();</span>
<span class="w">        </span><span class="n">supplierMapper</span><span class="p">.</span><span class="na">deleteAll</span><span class="p">();</span>
<span class="w">        </span><span class="n">itemMapper</span><span class="p">.</span><span class="na">deleteAll</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// マスタデータの準備</span>
<span class="w">        </span><span class="n">Supplier</span><span class="w"> </span><span class="n">supplier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Supplier</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">supplierCode</span><span class="p">(</span><span class="s">&quot;SUB-001&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">effectiveFrom</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2025</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span>
<span class="w">                </span><span class="p">.</span><span class="na">supplierName</span><span class="p">(</span><span class="s">&quot;株式会社メッキ工業&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">        </span><span class="n">supplierMapper</span><span class="p">.</span><span class="na">insert</span><span class="p">(</span><span class="n">supplier</span><span class="p">);</span>

<span class="w">        </span><span class="n">Item</span><span class="w"> </span><span class="n">parentItem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Item</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">itemCode</span><span class="p">(</span><span class="s">&quot;PLATED-001&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">effectiveFrom</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2025</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span>
<span class="w">                </span><span class="p">.</span><span class="na">itemName</span><span class="p">(</span><span class="s">&quot;メッキ加工品&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">itemCategory</span><span class="p">(</span><span class="n">ItemCategory</span><span class="p">.</span><span class="na">SEMI_PRODUCT</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">        </span><span class="n">itemMapper</span><span class="p">.</span><span class="na">insert</span><span class="p">(</span><span class="n">parentItem</span><span class="p">);</span>

<span class="w">        </span><span class="n">Item</span><span class="w"> </span><span class="n">supplyItem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Item</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">itemCode</span><span class="p">(</span><span class="s">&quot;PRESS-001&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">effectiveFrom</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2025</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span>
<span class="w">                </span><span class="p">.</span><span class="na">itemName</span><span class="p">(</span><span class="s">&quot;プレス部品&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">itemCategory</span><span class="p">(</span><span class="n">ItemCategory</span><span class="p">.</span><span class="na">PART</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">        </span><span class="n">itemMapper</span><span class="p">.</span><span class="na">insert</span><span class="p">(</span><span class="n">supplyItem</span><span class="p">);</span>

<span class="w">        </span><span class="n">unitPriceMapper</span><span class="p">.</span><span class="na">insert</span><span class="p">(</span><span class="n">UnitPrice</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">itemCode</span><span class="p">(</span><span class="s">&quot;PLATED-001&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">supplierCode</span><span class="p">(</span><span class="s">&quot;SUB-001&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">effectiveFrom</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2025</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span>
<span class="w">                </span><span class="p">.</span><span class="na">unitPrice</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;500&quot;</span><span class="p">))</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">());</span>

<span class="w">        </span><span class="c1">// テスト用発注を作成</span>
<span class="w">        </span><span class="n">PurchaseOrderCreateInput</span><span class="w"> </span><span class="n">poInput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PurchaseOrderCreateInput</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">supplierCode</span><span class="p">(</span><span class="s">&quot;SUB-001&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">orderDate</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2025</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">))</span>
<span class="w">                </span><span class="p">.</span><span class="na">details</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">                        </span><span class="n">PurchaseOrderDetailInput</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                                </span><span class="p">.</span><span class="na">itemCode</span><span class="p">(</span><span class="s">&quot;PLATED-001&quot;</span><span class="p">)</span>
<span class="w">                                </span><span class="p">.</span><span class="na">orderQuantity</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;100&quot;</span><span class="p">))</span>
<span class="w">                                </span><span class="p">.</span><span class="na">expectedReceivingDate</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2025</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">25</span><span class="p">))</span>
<span class="w">                                </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
<span class="w">                </span><span class="p">))</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">        </span><span class="n">testPurchaseOrder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">purchaseOrderService</span><span class="p">.</span><span class="na">createPurchaseOrder</span><span class="p">(</span><span class="n">poInput</span><span class="p">);</span>
<span class="w">        </span><span class="n">purchaseOrderService</span><span class="p">.</span><span class="na">confirmPurchaseOrder</span><span class="p">(</span><span class="n">testPurchaseOrder</span><span class="p">.</span><span class="na">getPurchaseOrderNumber</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;支給データ作成&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">SupplyCreation</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;発注に紐づく支給データを作成できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">canCreateSupplyFromPurchaseOrder</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Act</span>
<span class="w">            </span><span class="n">SupplyCreateCommand</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SupplyCreateCommand</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">purchaseOrderNumber</span><span class="p">(</span><span class="n">testPurchaseOrder</span><span class="p">.</span><span class="na">getPurchaseOrderNumber</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">lineNumber</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">supplierCode</span><span class="p">(</span><span class="s">&quot;SUB-001&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">supplyDate</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2025</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">16</span><span class="p">))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">supplierPersonCode</span><span class="p">(</span><span class="s">&quot;EMP001&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">supplyType</span><span class="p">(</span><span class="n">SupplyType</span><span class="p">.</span><span class="na">FREE</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">details</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">                            </span><span class="n">SupplyDetailCommand</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                                    </span><span class="p">.</span><span class="na">itemCode</span><span class="p">(</span><span class="s">&quot;PRESS-001&quot;</span><span class="p">)</span>
<span class="w">                                    </span><span class="p">.</span><span class="na">quantity</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;100&quot;</span><span class="p">))</span>
<span class="w">                                    </span><span class="p">.</span><span class="na">unitPrice</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;200&quot;</span><span class="p">))</span>
<span class="w">                                    </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
<span class="w">                    </span><span class="p">))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">            </span><span class="n">Supply</span><span class="w"> </span><span class="n">supply</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">supplyService</span><span class="p">.</span><span class="na">createSupply</span><span class="p">(</span><span class="n">input</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Assert</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">supply</span><span class="p">).</span><span class="na">isNotNull</span><span class="p">();</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">supply</span><span class="p">.</span><span class="na">getSupplyNumber</span><span class="p">()).</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;SUP-&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">supply</span><span class="p">.</span><span class="na">getSupplierCode</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;SUB-001&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">supply</span><span class="p">.</span><span class="na">getSupplyType</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">SupplyType</span><span class="p">.</span><span class="na">FREE</span><span class="p">);</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">supply</span><span class="p">.</span><span class="na">getDetails</span><span class="p">()).</span><span class="na">hasSize</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">supply</span><span class="p">.</span><span class="na">getDetails</span><span class="p">().</span><span class="na">get</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="na">getQuantity</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">isEqualByComparingTo</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;100&quot;</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;有償支給を作成できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">canCreatePaidSupply</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Act</span>
<span class="w">            </span><span class="n">SupplyCreateCommand</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SupplyCreateCommand</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">purchaseOrderNumber</span><span class="p">(</span><span class="n">testPurchaseOrder</span><span class="p">.</span><span class="na">getPurchaseOrderNumber</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">lineNumber</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">supplierCode</span><span class="p">(</span><span class="s">&quot;SUB-001&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">supplyDate</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2025</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">16</span><span class="p">))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">supplierPersonCode</span><span class="p">(</span><span class="s">&quot;EMP001&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">supplyType</span><span class="p">(</span><span class="n">SupplyType</span><span class="p">.</span><span class="na">PAID</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">details</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">                            </span><span class="n">SupplyDetailCommand</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                                    </span><span class="p">.</span><span class="na">itemCode</span><span class="p">(</span><span class="s">&quot;PRESS-001&quot;</span><span class="p">)</span>
<span class="w">                                    </span><span class="p">.</span><span class="na">quantity</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;100&quot;</span><span class="p">))</span>
<span class="w">                                    </span><span class="p">.</span><span class="na">unitPrice</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;200&quot;</span><span class="p">))</span>
<span class="w">                                    </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
<span class="w">                    </span><span class="p">))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">            </span><span class="n">Supply</span><span class="w"> </span><span class="n">supply</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">supplyService</span><span class="p">.</span><span class="na">createSupply</span><span class="p">(</span><span class="n">input</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Assert</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">supply</span><span class="p">.</span><span class="na">getSupplyType</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">SupplyType</span><span class="p">.</span><span class="na">PAID</span><span class="p">);</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">supply</span><span class="p">.</span><span class="na">getDetails</span><span class="p">().</span><span class="na">get</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="na">getAmount</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">isEqualByComparingTo</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;20000&quot;</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h2 id="263">26.3 消費業務の設計<a class="headerlink" href="#263" title="Permanent link">&para;</a></h2>
<p>外注先が支給品を加工して納品した際、支給した材料がどれだけ消費されたかを記録します。</p>
<h3 id="_10">消費関連のスキーマ設計<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjU2MXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MTUwcHg7aGVpZ2h0OjU2MXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDE1MCA1NjEiIHdpZHRoPSIxNTBweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjgwNDA7JiMzNjAyNzsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsmIzEyMzk4OyYjMzgzMDY7JiMzNjg5OTs8L3RpdGxlPjxkZWZzLz48Zz48ZyBjbGFzcz0idGl0bGUiIGRhdGEtc291cmNlLWxpbmU9IjEiPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTEuOTk5NSIgeD0iMTIuMzQwNSIgeT0iMjIuOTk1MSI+JiMyODA0MDsmIzM2MDI3OyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OyYjMTIzOTg7JiMzODMwNjsmIzM2ODk5OzwvdGV4dD48L2c+PCEtLWNsYXNzIHJjdi0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJyY3YiIGRhdGEtc291cmNlLWxpbmU9IjMiIGRhdGEtdWlkPSJlbnQwMDAyIiBpZD0iZW50aXR5X3JjdiI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMjkuNDg0NCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTI5Ljk5OTYiIHg9IjEwLjM0IiB5PSI0NC4yOTY5Ii8+PGVsbGlwc2UgY3g9IjI1LjM0IiBjeT0iNjAuMjk2OSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMjkuNDQ5NCw2Ni4yOTY5IEwyMS43MzA2LDY2LjI5NjkgTDIxLjczMDYsNTMuOTA2MyBMMjkuNDQ5NCw1My45MDYzIEwyOS40NDk0LDU2LjA2MjUgTDI0LjE4MzgsNTYuMDYyNSBMMjQuMTgzOCw1OC43MzQ0IEwyOC45NDk0LDU4LjczNDQgTDI4Ljk0OTQsNjAuODkwNiBMMjQuMTgzOCw2MC44OTA2IEwyNC4xODM4LDY0LjE0MDYgTDI5LjQ0OTQsNjQuMTQwNiBMMjkuNDQ5NCw2Ni4yOTY5IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTcuOTk5NiIgeD0iMzkuMzQiIHk9IjY1LjE0MzYiPiYjMjA4Mzc7JiMzMzY1NTsmIzIxNDYzOyYjMjA4Mzc7JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjExLjM0IiB4Mj0iMTM5LjMzOTYiIHkxPSI3Ni4yOTY5IiB5Mj0iNzYuMjk2OSIvPjxlbGxpcHNlIGN4PSIyMS4zNCIgY3k9Ijg5Ljk0NTMiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg4Ljk5NjgiIHg9IjMwLjM0IiB5PSI5My4yOTIiPiYjMjA4Mzc7JiMzMzY1NTsmIzMwMDU4OyYjMjE0OTU7IFtQS108L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjExLjM0IiB4Mj0iMTM5LjMzOTYiIHkxPSIxMDAuNTkzOCIgeTI9IjEwMC41OTM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODguNjA3MiIgeD0iMTYuMzQiIHk9IjExNy41ODg5Ij4mIzMwMzMwOyYjMjc4ODA7JiMzMDA1ODsmIzIxNDk1OyBbRktdPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwMi42MDcxIiB4PSIxNi4zNCIgeT0iMTMzLjg4NTciPiYjMzAzMzA7JiMyNzg4MDsmIzM0ODkyOyYjMzAwNTg7JiMyMTQ5NTsgW0ZLXTwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MS45OTk4IiB4PSIxNi4zNCIgeT0iMTUwLjE4MjYiPiYjMjA4Mzc7JiMzMzY1NTsmIzI2MDg1OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSIxNi4zNCIgeT0iMTY2LjQ3OTUiPiYjMjA4Mzc7JiMzMzY1NTsmIzI1OTY4OyYjMzczMjc7PC90ZXh0PjwvZz48IS0tY2xhc3MgY29uLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9ImNvbiIgZGF0YS1zb3VyY2UtbGluZT0iMTIiIGRhdGEtdWlkPSJlbnQwMDAzIiBpZD0iZW50aXR5X2NvbiI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMTMuMTg3NSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTI4LjYwNzEiIHg9IjExLjA0IiB5PSIyNTAuNzc2OSIvPjxlbGxpcHNlIGN4PSIzOC4wMTMzIiBjeT0iMjY2Ljc3NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTQyLjEyMjcsMjcyLjc3NjkgTDM0LjQwMzksMjcyLjc3NjkgTDM0LjQwMzksMjYwLjM4NjMgTDQyLjEyMjcsMjYwLjM4NjMgTDQyLjEyMjcsMjYyLjU0MjUgTDM2Ljg1NzEsMjYyLjU0MjUgTDM2Ljg1NzEsMjY1LjIxNDQgTDQxLjYyMjcsMjY1LjIxNDQgTDQxLjYyMjcsMjY3LjM3MDYgTDM2Ljg1NzEsMjY3LjM3MDYgTDM2Ljg1NzEsMjcwLjYyMDYgTDQyLjEyMjcsMjcwLjYyMDYgTDQyLjEyMjcsMjcyLjc3NjkgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSI1NC42NzQiIHk9IjI3MS42MjM2Ij4mIzI4MDQwOyYjMzYwMjc7JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjEyLjA0IiB4Mj0iMTM4LjY0NzEiIHkxPSIyODIuNzc2OSIgeTI9IjI4Mi43NzY5Ii8+PGVsbGlwc2UgY3g9IjIyLjA0IiBjeT0iMjk2LjQyNTMiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg4Ljk5NjgiIHg9IjMxLjA0IiB5PSIyOTkuNzcyIj4mIzI4MDQwOyYjMzYwMjc7JiMzMDA1ODsmIzIxNDk1OyBbUEtdPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMi4wNCIgeDI9IjEzOC42NDcxIiB5MT0iMzA3LjA3MzgiIHkyPSIzMDcuMDczOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg4LjYwNzIiIHg9IjE3LjA0IiB5PSIzMjQuMDY4OSI+JiMyMDgzNzsmIzMzNjU1OyYjMzAwNTg7JiMyMTQ5NTsgW0ZLXTwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MS45OTk4IiB4PSIxNy4wNCIgeT0iMzQwLjM2NTciPiYjMjgwNDA7JiMzNjAyNzsmIzI2MDg1OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTYuNjA3MSIgeD0iMTcuMDQiIHk9IjM1Ni42NjI2Ij4mIzIxNDYyOyYjMjQzNDE7JiMyMDgwODsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsgW0ZLXTwvdGV4dD48L2c+PCEtLWNsYXNzIGNvbmQtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iY29uZCIgZGF0YS1zb3VyY2UtbGluZT0iMjAiIGRhdGEtdWlkPSJlbnQwMDA0IiBpZD0iZW50aXR5X2NvbmQiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTEzLjE4NzUiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEzNi42ODA0IiB4PSI3IiB5PSI0NDAuOTY2OSIvPjxlbGxpcHNlIGN4PSIyNS4wMDY0IiBjeT0iNDU2Ljk2NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTI5LjExNTgsNDYyLjk2NjkgTDIxLjM5Nyw0NjIuOTY2OSBMMjEuMzk3LDQ1MC41NzYzIEwyOS4xMTU4LDQ1MC41NzYzIEwyOS4xMTU4LDQ1Mi43MzI1IEwyMy44NTAxLDQ1Mi43MzI1IEwyMy44NTAxLDQ1NS40MDQ0IEwyOC42MTU4LDQ1NS40MDQ0IEwyOC42MTU4LDQ1Ny41NjA2IEwyMy44NTAxLDQ1Ny41NjA2IEwyMy44NTAxLDQ2MC44MTA2IEwyOS4xMTU4LDQ2MC44MTA2IEwyOS4xMTU4LDQ2Mi45NjY5IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTcuOTk5NiIgeD0iMzkuNjc0NSIgeT0iNDYxLjgxMzYiPiYjMjgwNDA7JiMzNjAyNzsmIzI2MTI2OyYjMzIwNDg7JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjgiIHgyPSIxNDIuNjgwNCIgeTE9IjQ3Mi45NjY5IiB5Mj0iNDcyLjk2NjkiLz48ZWxsaXBzZSBjeD0iMTgiIGN5PSI0ODYuNjE1MyIgZmlsbD0iIzAwMDAwMCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTEwLjY4MDQiIHg9IjI3IiB5PSI0ODkuOTYyIj4mIzI4MDQwOyYjMzYwMjc7JiMzMDA1ODsmIzIxNDk1OyBbUEssRktdPC90ZXh0PjxlbGxpcHNlIGN4PSIxOCIgY3k9IjUwMi45MTIyIiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDIuOTk2OCIgeD0iMjciIHk9IjUwNi4yNTg5Ij4mIzI4MDQwOyYjMzYwMjc7JiMzNDg5MjsmIzMwMDU4OyYjMjE0OTU7IFtQS108L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjgiIHgyPSIxNDIuNjgwNCIgeTE9IjUxMy41NjA2IiB5Mj0iNTEzLjU2MDYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDIuNjA3MSIgeD0iMTMiIHk9IjUzMC41NTU3Ij4mIzIxNjk3OyYjMzA0NDY7JiMxMjQ2NzsmIzEyNTQwOyYjMTI0ODk7IFtGS108L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iMTMiIHk9IjU0Ni44NTI2Ij4mIzI4MDQwOyYjMzYwMjc7JiMyNTk2ODsmIzM3MzI3OzwvdGV4dD48L2c+PCEtLWxpbmsgcmN2IHRvIGNvbi0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJyY3YiIGRhdGEtZW50aXR5LTI9ImNvbiIgZGF0YS1zb3VyY2UtbGluZT0iMjgiIGRhdGEtdWlkPSJsbms1IiBpZD0ibGlua19yY3ZfY29uIj48cGF0aCBjb2RlTGluZT0iMjgiIGQ9Ik03NS4zNCwxODIuMDU2OSBDNzUuMzQsMjA2LjY3NjkgNzUuMzQsMjA4LjU2NjkgNzUuMzQsMjMyLjM3NjkiIGZpbGw9Im5vbmUiIGlkPSJyY3YtY29uIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjcxLjM0IiB4Mj0iNzkuMzQiIHkxPSIxNzguMDU2OSIgeTI9IjE3OC4wNTY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjcxLjM0IiB4Mj0iNzkuMzQiIHkxPSIxODEuMDU2OSIgeTI9IjE4MS4wNTY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9Ijc1LjM0IiB4Mj0iNzUuMzQiIHkxPSIxODIuMDU2OSIgeTI9IjE3NC4wNTY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9Ijc1LjM0IiB4Mj0iODEuMzQiIHkxPSIyNDIuMzc2OSIgeTI9IjI1MC4zNzY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9Ijc1LjM0IiB4Mj0iNjkuMzQiIHkxPSIyNDIuMzc2OSIgeTI9IjI1MC4zNzY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9Ijc1LjM0IiB4Mj0iNzUuMzQiIHkxPSIyNDIuMzc2OSIgeTI9IjI1MC4zNzY5Ii8+PGVsbGlwc2UgY3g9Ijc1LjM0IiBjeT0iMjM2LjM3NjkiIGZpbGw9Im5vbmUiIHJ4PSI0IiByeT0iNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjUyLjAwMDEiIHg9Ijc2LjM0IiB5PSIyMTYuODQzOCI+JiMyODA0MDsmIzM2MDI3OyYjMzUzNTI7JiMzNzY4Mjs8L3RleHQ+PC9nPjwhLS1saW5rIGNvbiB0byBjb25kLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImNvbiIgZGF0YS1lbnRpdHktMj0iY29uZCIgZGF0YS1zb3VyY2UtbGluZT0iMjkiIGRhdGEtdWlkPSJsbms2IiBpZD0ibGlua19jb25fY29uZCI+PHBhdGggY29kZUxpbmU9IjI5IiBkPSJNNzUuMzQsMzcyLjMyNjkgQzc1LjM0LDM5Ni4zNzY5IDc1LjM0LDM5OC40MzY5IDc1LjM0LDQyMi40OTY5IiBmaWxsPSJub25lIiBpZD0iY29uLWNvbmQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNzEuMzQiIHgyPSI3OS4zNCIgeTE9IjM2OC4zMjY5IiB5Mj0iMzY4LjMyNjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNzEuMzQiIHgyPSI3OS4zNCIgeTE9IjM3MS4zMjY5IiB5Mj0iMzcxLjMyNjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNzUuMzQiIHgyPSI3NS4zNCIgeTE9IjM3Mi4zMjY5IiB5Mj0iMzY0LjMyNjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNzUuMzQiIHgyPSI4MS4zNCIgeTE9IjQzMi40OTY5IiB5Mj0iNDQwLjQ5NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNzUuMzQiIHgyPSI2OS4zNCIgeTE9IjQzMi40OTY5IiB5Mj0iNDQwLjQ5NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNzUuMzQiIHgyPSI3NS4zNCIgeTE9IjQzMi40OTY5IiB5Mj0iNDQwLjQ5NjkiLz48ZWxsaXBzZSBjeD0iNzUuMzQiIGN5PSI0MjYuNDk2OSIgZmlsbD0ibm9uZSIgcng9IjQiIHJ5PSI0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuMDI3OCIgeD0iNzYuMzQiIHk9IjQwNy4wMzM4Ij5jb250YWluczwvdGV4dD48L2c+PCEtLVNSQz1bQXlhaW9LYkxVQlFqdXlNY3RPLVJzbnl0eHRkU2pGem51eGdOcW5RelI1WkNuUE1RTHY5UEtnY1d6Qkhyd09sVXhLX3hmbUNQUzdMQTJlZDUyYU45UEdoTE41ZUE0MU5GZnd2d3NoelQ4SmgwRXZQQkx2VmgtU25UcHBRbFcwY3cwR0tYOFl5TXpZMEJHbEctY3h1S25mZ3d1TUx4RnJTam1kdXE1dTlqSml4RjB6aUNhS0VwNlRLdjg0aVdvaTJNejR6eGtjVmdxelFFbnFzUkdVT3JUcTlLT0RadFI0UlZ5b3FSQzZuRG1NZ2ozaVc4YzMySTFzNEVjanB1VkZPd0Qxa1hyaTJ6Mm1oQ2NYZlR0Vm5naUUtaU9BUWpjRjZvUG5DTkkwV1hjbUFLMWI4YllQYnZuRzAwXS0tPjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<details>
<summary>DDL: 消費関連テーブル</summary>

<div class="highlight"><pre><span></span><code><span class="c1">-- V012__create_consumption_tables.sql</span>

<span class="c1">-- 消費データ</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;消費データ&quot;</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="ss">&quot;ID&quot;</span><span class="w"> </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;消費番号&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;入荷番号&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;消費日&quot;</span><span class="w"> </span><span class="nb">DATE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;取引先コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;備考&quot;</span><span class="w"> </span><span class="nb">TEXT</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;作成日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;作成者&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;更新日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;更新者&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;fk_消費データ_入荷&quot;</span>
<span class="w">        </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;入荷番号&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;入荷受入データ&quot;</span><span class="p">(</span><span class="ss">&quot;入荷番号&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;fk_消費データ_取引先&quot;</span>
<span class="w">        </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;取引先コード&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;取引先マスタ&quot;</span><span class="p">(</span><span class="ss">&quot;取引先コード&quot;</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">-- 消費明細データ</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;消費明細データ&quot;</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="ss">&quot;ID&quot;</span><span class="w"> </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;消費番号&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;消費行番号&quot;</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;品目コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;消費数量&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;備考&quot;</span><span class="w"> </span><span class="nb">TEXT</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;作成日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;更新日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;fk_消費明細_消費&quot;</span>
<span class="w">        </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;消費番号&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;消費データ&quot;</span><span class="p">(</span><span class="ss">&quot;消費番号&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;fk_消費明細_品目&quot;</span>
<span class="w">        </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;品目コード&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;品目マスタ&quot;</span><span class="p">(</span><span class="ss">&quot;品目コード&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="k">UNIQUE</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;消費番号&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;消費行番号&quot;</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">-- インデックス</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_消費データ_入荷番号&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;消費データ&quot;</span><span class="p">(</span><span class="ss">&quot;入荷番号&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_消費データ_取引先コード&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;消費データ&quot;</span><span class="p">(</span><span class="ss">&quot;取引先コード&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_消費データ_消費日&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;消費データ&quot;</span><span class="p">(</span><span class="ss">&quot;消費日&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_消費明細_品目コード&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;消費明細データ&quot;</span><span class="p">(</span><span class="ss">&quot;品目コード&quot;</span><span class="p">);</span>
</code></pre></div>

</details>

<h3 id="_11">入荷受入データとの紐付け<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<p>消費データは入荷受入データと紐付けられます。外注先から加工品が入荷した時点で、支給した材料の消費量を記録します。</p>
<h3 id="_12">消費率の計算<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h3>
<p>消費率（歩留まり率）は以下の計算式で算出されます：</p>
<div class="highlight"><pre><span></span><code>消費率 = 消費数量 ÷ 支給数量
</code></pre></div>
<p>この値は品質管理や原価計算において重要な指標となります。</p>
<h3 id="java_1">Java エンティティの定義<a class="headerlink" href="#java_1" title="Permanent link">&para;</a></h3>
<details>
<summary>消費データエンティティ</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/domain/model/subcontract/Consumption.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.domain.model.subcontract</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.master.Supplier</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.purchase.Receiving</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Builder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Consumption</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">consumptionNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">receivingNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">consumptionDate</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">supplierCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">remarks</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">createdAt</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">createdBy</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">updatedAt</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">updatedBy</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// リレーション</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Receiving</span><span class="w"> </span><span class="n">receiving</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Supplier</span><span class="w"> </span><span class="n">supplier</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">ConsumptionDetail</span><span class="o">&gt;</span><span class="w"> </span><span class="n">details</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>消費明細データエンティティ</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/domain/model/subcontract/ConsumptionDetail.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.domain.model.subcontract</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.item.Item</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Builder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>

<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ConsumptionDetail</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">consumptionNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">lineNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">quantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">remarks</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">createdAt</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">updatedAt</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// リレーション</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Consumption</span><span class="w"> </span><span class="n">consumption</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Item</span><span class="w"> </span><span class="n">item</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="mybatis-mapper-xml_1">MyBatis Mapper XML<a class="headerlink" href="#mybatis-mapper-xml_1" title="Permanent link">&para;</a></h3>
<details>
<summary>ConsumptionMapper.xml</summary>

<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- src/main/resources/com/example/production/infrastructure/persistence/mapper/ConsumptionMapper.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="cp">&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
<span class="cp">        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span>
<span class="nt">&lt;mapper</span><span class="w"> </span><span class="na">namespace=</span><span class="s">&quot;com.example.production.infrastructure.persistence.mapper.ConsumptionMapper&quot;</span><span class="nt">&gt;</span>

<span class="w">    </span><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;ConsumptionResultMap&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;com.example.production.domain.model.subcontract.Consumption&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;ID&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;consumptionNumber&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;消費番号&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;receivingNumber&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;入荷番号&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;consumptionDate&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;消費日&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;supplierCode&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;取引先コード&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;remarks&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;備考&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;createdAt&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;作成日時&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;createdBy&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;作成者&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;updatedAt&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;更新日時&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;updatedBy&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;更新者&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/resultMap&gt;</span>

<span class="w">    </span><span class="nt">&lt;insert</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;insert&quot;</span><span class="w"> </span><span class="na">useGeneratedKeys=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="na">keyProperty=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">keyColumn=</span><span class="s">&quot;ID&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>INSERT<span class="w"> </span>INTO<span class="w"> </span>&quot;消費データ&quot;<span class="w"> </span>(
<span class="w">            </span>&quot;消費番号&quot;,<span class="w"> </span>&quot;入荷番号&quot;,<span class="w"> </span>&quot;消費日&quot;,<span class="w"> </span>&quot;取引先コード&quot;,<span class="w"> </span>&quot;備考&quot;,<span class="w"> </span>&quot;作成者&quot;
<span class="w">        </span>)<span class="w"> </span>VALUES<span class="w"> </span>(
<span class="w">            </span>#{consumptionNumber},
<span class="w">            </span>#{receivingNumber},
<span class="w">            </span>#{consumptionDate},
<span class="w">            </span>#{supplierCode},
<span class="w">            </span>#{remarks},
<span class="w">            </span>#{createdBy}
<span class="w">        </span>)
<span class="w">    </span><span class="nt">&lt;/insert&gt;</span>

<span class="w">    </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;findByConsumptionNumber&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;ConsumptionResultMap&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>SELECT<span class="w"> </span>*<span class="w"> </span>FROM<span class="w"> </span>&quot;消費データ&quot;<span class="w"> </span>WHERE<span class="w"> </span>&quot;消費番号&quot;<span class="w"> </span>=<span class="w"> </span>#{consumptionNumber}
<span class="w">    </span><span class="nt">&lt;/select&gt;</span>

<span class="w">    </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;findByReceivingNumber&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;ConsumptionResultMap&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>SELECT<span class="w"> </span>*<span class="w"> </span>FROM<span class="w"> </span>&quot;消費データ&quot;<span class="w"> </span>WHERE<span class="w"> </span>&quot;入荷番号&quot;<span class="w"> </span>=<span class="w"> </span>#{receivingNumber}
<span class="w">    </span><span class="nt">&lt;/select&gt;</span>

<span class="w">    </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;findLatestConsumptionNumber&quot;</span><span class="w"> </span><span class="na">resultType=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>SELECT<span class="w"> </span>&quot;消費番号&quot;<span class="w"> </span>FROM<span class="w"> </span>&quot;消費データ&quot;
<span class="w">        </span>WHERE<span class="w"> </span>&quot;消費番号&quot;<span class="w"> </span>LIKE<span class="w"> </span>#{prefix}
<span class="w">        </span>ORDER<span class="w"> </span>BY<span class="w"> </span>&quot;消費番号&quot;<span class="w"> </span>DESC
<span class="w">        </span>LIMIT<span class="w"> </span>1
<span class="w">    </span><span class="nt">&lt;/select&gt;</span>

<span class="w">    </span><span class="nt">&lt;delete</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;deleteAll&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>DELETE<span class="w"> </span>FROM<span class="w"> </span>&quot;消費データ&quot;
<span class="w">    </span><span class="nt">&lt;/delete&gt;</span>
<span class="nt">&lt;/mapper&gt;</span>
</code></pre></div>

</details>

<details>
<summary>ConsumptionDetailMapper.xml</summary>

<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- src/main/resources/com/example/production/infrastructure/persistence/mapper/ConsumptionDetailMapper.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="cp">&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
<span class="cp">        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span>
<span class="nt">&lt;mapper</span><span class="w"> </span><span class="na">namespace=</span><span class="s">&quot;com.example.production.infrastructure.persistence.mapper.ConsumptionDetailMapper&quot;</span><span class="nt">&gt;</span>

<span class="w">    </span><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;ConsumptionDetailResultMap&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;com.example.production.domain.model.subcontract.ConsumptionDetail&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;ID&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;consumptionNumber&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;消費番号&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;lineNumber&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;消費行番号&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;itemCode&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;品目コード&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;quantity&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;消費数量&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;remarks&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;備考&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;createdAt&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;作成日時&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;updatedAt&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;更新日時&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/resultMap&gt;</span>

<span class="w">    </span><span class="nt">&lt;insert</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;insert&quot;</span><span class="w"> </span><span class="na">useGeneratedKeys=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="na">keyProperty=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">keyColumn=</span><span class="s">&quot;ID&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>INSERT<span class="w"> </span>INTO<span class="w"> </span>&quot;消費明細データ&quot;<span class="w"> </span>(
<span class="w">            </span>&quot;消費番号&quot;,<span class="w"> </span>&quot;消費行番号&quot;,<span class="w"> </span>&quot;品目コード&quot;,<span class="w"> </span>&quot;消費数量&quot;,<span class="w"> </span>&quot;備考&quot;
<span class="w">        </span>)<span class="w"> </span>VALUES<span class="w"> </span>(
<span class="w">            </span>#{consumptionNumber},
<span class="w">            </span>#{lineNumber},
<span class="w">            </span>#{itemCode},
<span class="w">            </span>#{quantity},
<span class="w">            </span>#{remarks}
<span class="w">        </span>)
<span class="w">    </span><span class="nt">&lt;/insert&gt;</span>

<span class="w">    </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;findByConsumptionNumber&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;ConsumptionDetailResultMap&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>SELECT<span class="w"> </span>*<span class="w"> </span>FROM<span class="w"> </span>&quot;消費明細データ&quot;
<span class="w">        </span>WHERE<span class="w"> </span>&quot;消費番号&quot;<span class="w"> </span>=<span class="w"> </span>#{consumptionNumber}
<span class="w">        </span>ORDER<span class="w"> </span>BY<span class="w"> </span>&quot;消費行番号&quot;
<span class="w">    </span><span class="nt">&lt;/select&gt;</span>

<span class="w">    </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;sumByPurchaseOrderAndItem&quot;</span><span class="w"> </span><span class="na">resultType=</span><span class="s">&quot;java.math.BigDecimal&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>SELECT<span class="w"> </span>COALESCE(SUM(cd.&quot;消費数量&quot;),<span class="w"> </span>0)
<span class="w">        </span>FROM<span class="w"> </span>&quot;消費明細データ&quot;<span class="w"> </span>cd
<span class="w">        </span>JOIN<span class="w"> </span>&quot;消費データ&quot;<span class="w"> </span>c<span class="w"> </span>ON<span class="w"> </span>cd.&quot;消費番号&quot;<span class="w"> </span>=<span class="w"> </span>c.&quot;消費番号&quot;
<span class="w">        </span>JOIN<span class="w"> </span>&quot;入荷受入データ&quot;<span class="w"> </span>r<span class="w"> </span>ON<span class="w"> </span>c.&quot;入荷番号&quot;<span class="w"> </span>=<span class="w"> </span>r.&quot;入荷番号&quot;
<span class="w">        </span>WHERE<span class="w"> </span>r.&quot;発注番号&quot;<span class="w"> </span>=<span class="w"> </span>#{purchaseOrderNumber}
<span class="w">          </span>AND<span class="w"> </span>r.&quot;発注行番号&quot;<span class="w"> </span>=<span class="w"> </span>#{lineNumber}
<span class="w">          </span>AND<span class="w"> </span>cd.&quot;品目コード&quot;<span class="w"> </span>=<span class="w"> </span>#{itemCode}
<span class="w">    </span><span class="nt">&lt;/select&gt;</span>

<span class="w">    </span><span class="nt">&lt;delete</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;deleteAll&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>DELETE<span class="w"> </span>FROM<span class="w"> </span>&quot;消費明細データ&quot;
<span class="w">    </span><span class="nt">&lt;/delete&gt;</span>
<span class="nt">&lt;/mapper&gt;</span>
</code></pre></div>

</details>

<h3 id="mapper_1">Mapper インターフェース<a class="headerlink" href="#mapper_1" title="Permanent link">&para;</a></h3>
<details>
<summary>ConsumptionMapper</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/infrastructure/persistence/mapper/ConsumptionMapper.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.persistence.mapper</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.subcontract.Consumption</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.ibatis.annotations.Mapper</span><span class="p">;</span>

<span class="nd">@Mapper</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">ConsumptionMapper</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">insert</span><span class="p">(</span><span class="n">Consumption</span><span class="w"> </span><span class="n">consumption</span><span class="p">);</span>
<span class="w">    </span><span class="n">Consumption</span><span class="w"> </span><span class="nf">findByConsumptionNumber</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">consumptionNumber</span><span class="p">);</span>
<span class="w">    </span><span class="n">Consumption</span><span class="w"> </span><span class="nf">findByReceivingNumber</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">receivingNumber</span><span class="p">);</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="nf">findLatestConsumptionNumber</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">prefix</span><span class="p">);</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">deleteAll</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>ConsumptionDetailMapper</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/infrastructure/persistence/mapper/ConsumptionDetailMapper.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.persistence.mapper</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.subcontract.ConsumptionDetail</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.ibatis.annotations.Mapper</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.ibatis.annotations.Param</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="nd">@Mapper</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">ConsumptionDetailMapper</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">insert</span><span class="p">(</span><span class="n">ConsumptionDetail</span><span class="w"> </span><span class="n">detail</span><span class="p">);</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">ConsumptionDetail</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByConsumptionNumber</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">consumptionNumber</span><span class="p">);</span>
<span class="w">    </span><span class="n">BigDecimal</span><span class="w"> </span><span class="nf">sumByPurchaseOrderAndItem</span><span class="p">(</span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;purchaseOrderNumber&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">purchaseOrderNumber</span><span class="p">,</span>
<span class="w">                                         </span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;lineNumber&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">lineNumber</span><span class="p">,</span>
<span class="w">                                         </span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;itemCode&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">);</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">deleteAll</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="_13">消費サービスの実装<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h3>
<details>
<summary>ConsumptionService</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/application/service/ConsumptionService.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.application.service</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.application.port.in.command.ConsumptionCreateCommand</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.application.port.in.command.ConsumptionDetailCommand</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.purchase.Receiving</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.subcontract.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.persistence.mapper.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Service</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.transaction.annotation.Transactional</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.RoundingMode</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.format.DateTimeFormatter</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.ArrayList</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="nd">@Service</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ConsumptionService</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">ConsumptionMapper</span><span class="w"> </span><span class="n">consumptionMapper</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">ConsumptionDetailMapper</span><span class="w"> </span><span class="n">consumptionDetailMapper</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">ReceivingMapper</span><span class="w"> </span><span class="n">receivingMapper</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">SupplyMapper</span><span class="w"> </span><span class="n">supplyMapper</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">SupplyDetailMapper</span><span class="w"> </span><span class="n">supplyDetailMapper</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 消費番号を生成する</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">generateConsumptionNumber</span><span class="p">(</span><span class="n">LocalDate</span><span class="w"> </span><span class="n">consumptionDate</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;CON-&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">consumptionDate</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="n">DateTimeFormatter</span><span class="p">.</span><span class="na">ofPattern</span><span class="p">(</span><span class="s">&quot;yyyyMM&quot;</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;-&quot;</span><span class="p">;</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">latestNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">consumptionMapper</span><span class="p">.</span><span class="na">findLatestConsumptionNumber</span><span class="p">(</span><span class="n">prefix</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;%&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">sequence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">latestNumber</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">currentSequence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Integer</span><span class="p">.</span><span class="na">parseInt</span><span class="p">(</span><span class="n">latestNumber</span><span class="p">.</span><span class="na">substring</span><span class="p">(</span><span class="n">latestNumber</span><span class="p">.</span><span class="na">length</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">4</span><span class="p">));</span>
<span class="w">            </span><span class="n">sequence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">currentSequence</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">prefix</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;%04d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">sequence</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 消費データを作成する</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Consumption</span><span class="w"> </span><span class="nf">createConsumption</span><span class="p">(</span><span class="n">ConsumptionCreateCommand</span><span class="w"> </span><span class="n">command</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 入荷データの取得</span>
<span class="w">        </span><span class="n">Receiving</span><span class="w"> </span><span class="n">receiving</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">receivingMapper</span><span class="p">.</span><span class="na">findByReceivingNumber</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getReceivingNumber</span><span class="p">());</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">receiving</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;Receiving not found: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">command</span><span class="p">.</span><span class="na">getReceivingNumber</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// 関連する支給データを取得</span>
<span class="w">        </span><span class="n">Supply</span><span class="w"> </span><span class="n">supply</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">supplyMapper</span><span class="p">.</span><span class="na">findByPurchaseOrderDetail</span><span class="p">(</span>
<span class="w">                </span><span class="n">receiving</span><span class="p">.</span><span class="na">getPurchaseOrderNumber</span><span class="p">(),</span><span class="w"> </span><span class="n">receiving</span><span class="p">.</span><span class="na">getLineNumber</span><span class="p">());</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">supply</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;Supply not found for receiving: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">command</span><span class="p">.</span><span class="na">getReceivingNumber</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">SupplyDetail</span><span class="o">&gt;</span><span class="w"> </span><span class="n">supplyDetails</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">supplyDetailMapper</span><span class="p">.</span><span class="na">findBySupplyNumber</span><span class="p">(</span><span class="n">supply</span><span class="p">.</span><span class="na">getSupplyNumber</span><span class="p">());</span>

<span class="w">        </span><span class="c1">// 消費数量のバリデーション</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">ConsumptionDetailCommand</span><span class="w"> </span><span class="n">detailCommand</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">command</span><span class="p">.</span><span class="na">getDetails</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">SupplyDetail</span><span class="w"> </span><span class="n">supplyDetail</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">supplyDetails</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">supplyDetail</span><span class="p">.</span><span class="na">getItemCode</span><span class="p">().</span><span class="na">equals</span><span class="p">(</span><span class="n">detailCommand</span><span class="p">.</span><span class="na">getItemCode</span><span class="p">()))</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">detailCommand</span><span class="p">.</span><span class="na">getQuantity</span><span class="p">().</span><span class="na">compareTo</span><span class="p">(</span><span class="n">supplyDetail</span><span class="p">.</span><span class="na">getQuantity</span><span class="p">())</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalStateException</span><span class="p">(</span><span class="s">&quot;Consumption quantity exceeds supply quantity&quot;</span><span class="p">);</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">consumptionNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">generateConsumptionNumber</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getConsumptionDate</span><span class="p">());</span>

<span class="w">        </span><span class="c1">// 消費ヘッダを作成</span>
<span class="w">        </span><span class="n">Consumption</span><span class="w"> </span><span class="n">consumption</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Consumption</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">consumptionNumber</span><span class="p">(</span><span class="n">consumptionNumber</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">receivingNumber</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getReceivingNumber</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">consumptionDate</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getConsumptionDate</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">supplierCode</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getSupplierCode</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">remarks</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getRemarks</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">        </span><span class="n">consumptionMapper</span><span class="p">.</span><span class="na">insert</span><span class="p">(</span><span class="n">consumption</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// 消費明細を作成</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">ConsumptionDetail</span><span class="o">&gt;</span><span class="w"> </span><span class="n">details</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">lineNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">ConsumptionDetailCommand</span><span class="w"> </span><span class="n">detailCommand</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">command</span><span class="p">.</span><span class="na">getDetails</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">lineNumber</span><span class="o">++</span><span class="p">;</span>

<span class="w">            </span><span class="n">ConsumptionDetail</span><span class="w"> </span><span class="n">detail</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ConsumptionDetail</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">consumptionNumber</span><span class="p">(</span><span class="n">consumptionNumber</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">lineNumber</span><span class="p">(</span><span class="n">lineNumber</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">itemCode</span><span class="p">(</span><span class="n">detailCommand</span><span class="p">.</span><span class="na">getItemCode</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">quantity</span><span class="p">(</span><span class="n">detailCommand</span><span class="p">.</span><span class="na">getQuantity</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">remarks</span><span class="p">(</span><span class="n">detailCommand</span><span class="p">.</span><span class="na">getRemarks</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">            </span><span class="n">consumptionDetailMapper</span><span class="p">.</span><span class="na">insert</span><span class="p">(</span><span class="n">detail</span><span class="p">);</span>

<span class="w">            </span><span class="n">details</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">detail</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">consumption</span><span class="p">.</span><span class="na">setDetails</span><span class="p">(</span><span class="n">details</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">consumption</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 消費率を計算する</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="nf">calculateConsumptionRate</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">supplyNumber</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Supply</span><span class="w"> </span><span class="n">supply</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">supplyMapper</span><span class="p">.</span><span class="na">findBySupplyNumber</span><span class="p">(</span><span class="n">supplyNumber</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">supply</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;Supply not found: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">supplyNumber</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">SupplyDetail</span><span class="o">&gt;</span><span class="w"> </span><span class="n">supplyDetails</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">supplyDetailMapper</span><span class="p">.</span><span class="na">findBySupplyNumber</span><span class="p">(</span><span class="n">supplyNumber</span><span class="p">);</span>
<span class="w">        </span><span class="n">SupplyDetail</span><span class="w"> </span><span class="n">targetDetail</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">supplyDetails</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">d</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="na">getItemCode</span><span class="p">().</span><span class="na">equals</span><span class="p">(</span><span class="n">itemCode</span><span class="p">))</span>
<span class="w">                </span><span class="p">.</span><span class="na">findFirst</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">orElseThrow</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;Supply detail not found: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">itemCode</span><span class="p">));</span>

<span class="w">        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">supplyQuantity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">targetDetail</span><span class="p">.</span><span class="na">getQuantity</span><span class="p">();</span>

<span class="w">        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">totalConsumption</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">consumptionDetailMapper</span><span class="p">.</span><span class="na">sumByPurchaseOrderAndItem</span><span class="p">(</span>
<span class="w">                </span><span class="n">supply</span><span class="p">.</span><span class="na">getPurchaseOrderNumber</span><span class="p">(),</span>
<span class="w">                </span><span class="n">supply</span><span class="p">.</span><span class="na">getLineNumber</span><span class="p">(),</span>
<span class="w">                </span><span class="n">itemCode</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">totalConsumption</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">totalConsumption</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">totalConsumption</span><span class="p">.</span><span class="na">divide</span><span class="p">(</span><span class="n">supplyQuantity</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">RoundingMode</span><span class="p">.</span><span class="na">HALF_UP</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="_14">コマンドクラス<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h3>
<details>
<summary>ConsumptionCreateCommand</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/application/port/in/command/ConsumptionCreateCommand.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.application.port.in.command</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Builder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ConsumptionCreateCommand</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">receivingNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">consumptionDate</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">supplierCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">remarks</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">ConsumptionDetailCommand</span><span class="o">&gt;</span><span class="w"> </span><span class="n">details</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>ConsumptionDetailCommand</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/application/port/in/command/ConsumptionDetailCommand.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.application.port.in.command</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Builder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>

<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ConsumptionDetailCommand</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">quantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">remarks</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="tdd_1">TDD: 消費データのテスト<a class="headerlink" href="#tdd_1" title="Permanent link">&para;</a></h3>
<details>
<summary>ConsumptionServiceTest</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/test/java/com/example/production/application/service/ConsumptionServiceTest.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.application.service</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.subcontract.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.mybatis.spring.boot.test.autoconfigure.MybatisTest</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.boot.test.autoconfigure.jdbc.AutoConfigureTestDatabase</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.context.annotation.Import</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.test.context.DynamicPropertyRegistry</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.test.context.DynamicPropertySource</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.containers.PostgreSQLContainer</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.junit.jupiter.Container</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.junit.jupiter.Testcontainers</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="kn">import static</span><span class="w"> </span><span class="nn">org.assertj.core.api.Assertions.*</span><span class="p">;</span>

<span class="nd">@MybatisTest</span>
<span class="nd">@AutoConfigureTestDatabase</span><span class="p">(</span><span class="n">replace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AutoConfigureTestDatabase</span><span class="p">.</span><span class="na">Replace</span><span class="p">.</span><span class="na">NONE</span><span class="p">)</span>
<span class="nd">@Import</span><span class="p">({</span><span class="n">ConsumptionService</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">SupplyService</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">ReceivingService</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">PurchaseOrderService</span><span class="p">.</span><span class="na">class</span><span class="p">})</span>
<span class="nd">@Testcontainers</span>
<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;消費業務&quot;</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">ConsumptionServiceTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Container</span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="n">PostgreSQLContainer</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PostgreSQLContainer</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="s">&quot;postgres:15&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withDatabaseName</span><span class="p">(</span><span class="s">&quot;testdb&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withUsername</span><span class="p">(</span><span class="s">&quot;testuser&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withPassword</span><span class="p">(</span><span class="s">&quot;testpass&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="nd">@DynamicPropertySource</span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configureProperties</span><span class="p">(</span><span class="n">DynamicPropertyRegistry</span><span class="w"> </span><span class="n">registry</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.datasource.url&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">postgres</span><span class="p">::</span><span class="n">getJdbcUrl</span><span class="p">);</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.datasource.username&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">postgres</span><span class="p">::</span><span class="n">getUsername</span><span class="p">);</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.datasource.password&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">postgres</span><span class="p">::</span><span class="n">getPassword</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ConsumptionService</span><span class="w"> </span><span class="n">consumptionService</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// テストデータ準備は省略</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;消費データ作成&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">ConsumptionCreation</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;入荷時に支給品の消費を記録できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">canRecordConsumptionOnReceiving</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Arrange: 事前に支給・入荷データを作成（省略）</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">receivingNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;RCV-202501-0001&quot;</span><span class="p">;</span>

<span class="w">            </span><span class="c1">// Act</span>
<span class="w">            </span><span class="n">ConsumptionCreateCommand</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ConsumptionCreateCommand</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">receivingNumber</span><span class="p">(</span><span class="n">receivingNumber</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">consumptionDate</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2025</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">26</span><span class="p">))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">supplierCode</span><span class="p">(</span><span class="s">&quot;SUB-001&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">details</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">                            </span><span class="n">ConsumptionDetailCommand</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                                    </span><span class="p">.</span><span class="na">itemCode</span><span class="p">(</span><span class="s">&quot;PRESS-001&quot;</span><span class="p">)</span>
<span class="w">                                    </span><span class="p">.</span><span class="na">quantity</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;95&quot;</span><span class="p">))</span>
<span class="w">                                    </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
<span class="w">                    </span><span class="p">))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">            </span><span class="n">Consumption</span><span class="w"> </span><span class="n">consumption</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">consumptionService</span><span class="p">.</span><span class="na">createConsumption</span><span class="p">(</span><span class="n">input</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Assert</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">consumption</span><span class="p">).</span><span class="na">isNotNull</span><span class="p">();</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">consumption</span><span class="p">.</span><span class="na">getConsumptionNumber</span><span class="p">()).</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;CON-&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">consumption</span><span class="p">.</span><span class="na">getDetails</span><span class="p">()).</span><span class="na">hasSize</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">consumption</span><span class="p">.</span><span class="na">getDetails</span><span class="p">().</span><span class="na">get</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="na">getQuantity</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">isEqualByComparingTo</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;95&quot;</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;消費数量は支給数量を超えてはならない&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">cannotConsumeMoreThanSupplied</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Arrange</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">receivingNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;RCV-202501-0001&quot;</span><span class="p">;</span>

<span class="w">            </span><span class="c1">// Act &amp; Assert</span>
<span class="w">            </span><span class="n">ConsumptionCreateCommand</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ConsumptionCreateCommand</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">receivingNumber</span><span class="p">(</span><span class="n">receivingNumber</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">consumptionDate</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2025</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">26</span><span class="p">))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">supplierCode</span><span class="p">(</span><span class="s">&quot;SUB-001&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">details</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">                            </span><span class="n">ConsumptionDetailCommand</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                                    </span><span class="p">.</span><span class="na">itemCode</span><span class="p">(</span><span class="s">&quot;PRESS-001&quot;</span><span class="p">)</span>
<span class="w">                                    </span><span class="p">.</span><span class="na">quantity</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;150&quot;</span><span class="p">))</span>
<span class="w">                                    </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
<span class="w">                    </span><span class="p">))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">            </span><span class="n">assertThatThrownBy</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">consumptionService</span><span class="p">.</span><span class="na">createConsumption</span><span class="p">(</span><span class="n">input</span><span class="p">))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">isInstanceOf</span><span class="p">(</span><span class="n">IllegalStateException</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">hasMessageContaining</span><span class="p">(</span><span class="s">&quot;exceeds supply quantity&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;消費率の計算&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">ConsumptionRateCalculation</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;支給に対する消費率を計算できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">canCalculateConsumptionRate</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Arrange: 消費データを作成（省略）</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">supplyNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;SUP-202501-0001&quot;</span><span class="p">;</span>

<span class="w">            </span><span class="c1">// Act</span>
<span class="w">            </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">rate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">consumptionService</span><span class="p">.</span><span class="na">calculateConsumptionRate</span><span class="p">(</span><span class="n">supplyNumber</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;PRESS-001&quot;</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Assert: 95/100 = 0.95</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">rate</span><span class="p">).</span><span class="na">isEqualByComparingTo</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;0.95&quot;</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h2 id="264">26.4 外注委託ワークフロー<a class="headerlink" href="#264" title="Permanent link">&para;</a></h2>
<h3 id="_15">外注委託の全体フロー<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkFDVElWSVRZIiBoZWlnaHQ9IjU5MHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NDIxcHg7aGVpZ2h0OjU5MHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDQyMSA1OTAiIHdpZHRoPSI0MjFweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjI4MDY7JiMyNzg4MDsmIzIyOTk2OyYjMzUzNTE7JiMxMjUyNzsmIzEyNTQwOyYjMTI0NjM7JiMxMjUwMTsmIzEyNTI1OyYjMTI1NDA7PC90aXRsZT48ZGVmcy8+PGc+PGcgY2xhc3M9InRpdGxlIiBkYXRhLXNvdXJjZS1saW5lPSIxIj48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM5Ljk5OTQiIHg9IjEzOS40NDciIHk9IjMyLjk5NTEiPiYjMjI4MDY7JiMyNzg4MDsmIzIyOTk2OyYjMzUzNTE7JiMxMjUyNzsmIzEyNTQwOyYjMTI0NjM7JiMxMjUwMTsmIzEyNTI1OyYjMTI1NDA7PC90ZXh0PjwvZz48ZWxsaXBzZSBjeD0iMTY4LjAwMDQiIGN5PSI1Ny4yOTY5IiBmaWxsPSIjMjIyMjIyIiByeD0iMTAiIHJ5PSIxMCIgc3R5bGU9InN0cm9rZTojMjIyMjIyO3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0yMjIuMDAwNiw4NC4xNDg0IEwyMjIuMDAwNiwxMDAuMjgxMyBMMjAyLjAwMDYsMTA0LjI4MTMgTDIyMi4wMDA2LDEwOC4yODEzIEwyMjIuMDAwNiwxMjQuNDE0MSBBMCwwIDAgMCAwIDIyMi4wMDA2LDEyNC40MTQxIEw0MDkuODkzNCwxMjQuNDE0MSBBMCwwIDAgMCAwIDQwOS44OTM0LDEyNC40MTQxIEw0MDkuODkzNCw5NC4xNDg0IEwzOTkuODkzNCw4NC4xNDg0IEwyMjIuMDAwNiw4NC4xNDg0IEEwLDAgMCAwIDAgMjIyLjAwMDYsODQuMTQ4NCIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTM5OS44OTM0LDg0LjE0ODQgTDM5OS44OTM0LDk0LjE0ODQgTDQwOS44OTM0LDk0LjE0ODQgTDM5OS44OTM0LDg0LjE0ODQiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwNC4wMDAxIiB4PSIyMjguMDAwNiIgeT0iMTAxLjIxNTMiPiYjMzAzMzA7JiMyNzg4MDsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsmIzEyNDM0OyYjMjAzMTY7JiMyNTEwNDs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTY2Ljg5MjgiIHg9IjIyOC4wMDA2IiB5PSIxMTYuMzQ4MSI+JiMxMjQ3MzsmIzEyNDg2OyYjMTI1NDA7JiMxMjQ3OTsmIzEyNDczOyYjNjUzMDY7JiMyMDMxNjsmIzI1MTA0OyYjMjAwMTM7JiM4NTk0OyYjMzAzMzA7JiMyNzg4MDsmIzI4MTY4OzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNjguMDAwNCIgeD0iMTM0LjAwMDMiIHk9Ijg3LjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0OC4wMDA0IiB4PSIxNDQuMDAwMyIgeT0iMTA4LjQzNTUiPiYjMzAzMzA7JiMyNzg4MDsmIzIwMzE2OyYjMjUxMDQ7PC90ZXh0PjxwYXRoIGQ9Ik0yMjguMDAwNywxNDEuMjY1NiBMMjI4LjAwMDcsMTU3LjM5ODQgTDIwOC4wMDA3LDE2MS4zOTg0IEwyMjguMDAwNywxNjUuMzk4NCBMMjI4LjAwMDcsMTgxLjUzMTMgQTAsMCAwIDAgMCAyMjguMDAwNywxODEuNTMxMyBMMzUzLjAwMDgsMTgxLjUzMTMgQTAsMCAwIDAgMCAzNTMuMDAwOCwxODEuNTMxMyBMMzUzLjAwMDgsMTUxLjI2NTYgTDM0My4wMDA4LDE0MS4yNjU2IEwyMjguMDAwNywxNDEuMjY1NiBBMCwwIDAgMCAwIDIyOC4wMDA3LDE0MS4yNjU2IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNMzQzLjAwMDgsMTQxLjI2NTYgTDM0My4wMDA4LDE1MS4yNjU2IEwzNTMuMDAwOCwxNTEuMjY1NiBMMzQzLjAwMDgsMTQxLjI2NTYiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwNC4wMDAxIiB4PSIyMzQuMDAwNyIgeT0iMTU4LjMzMjUiPiYjMjU5MDM7JiMzMjEwMjsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsmIzEyNDM0OyYjMjAzMTY7JiMyNTEwNDs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTEuMDAwMSIgeD0iMjM0LjAwMDciIHk9IjE3My40NjUzIj4mIzI1OTAzOyYjMzIxMDI7JiMyNjEyNjsmIzMyMDQ4OyYjMTI0MzQ7JiMzMDMzMTsmIzM3NjgyOzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iODAuMDAwNSIgeD0iMTI4LjAwMDIiIHk9IjE0NC40MTQxIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjAuMDAwNSIgeD0iMTM4LjAwMDIiIHk9IjE2NS41NTI3Ij4mIzI1OTAzOyYjMzIxMDI7JiMyMTY5NzsmIzIwOTg2OyYjMzM2NTU7PC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI5Mi4wMDA1IiB4PSIxMjIuMDAwMiIgeT0iMjAxLjUzMTMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3Mi4wMDA1IiB4PSIxMzIuMDAwMiIgeT0iMjIyLjY2OTkiPiYjMjI4MDY7JiMyNzg4MDsmIzIwODA4OyYjMTIzOTE7JiMyMTE1MjsmIzI0MDM3OzwvdGV4dD48cGF0aCBkPSJNMjI4LjAwMDcsMjUyLjM1MTYgTDIyOC4wMDA3LDI2OC40ODQ0IEwyMDguMDAwNywyNzIuNDg0NCBMMjI4LjAwMDcsMjc2LjQ4NDQgTDIyOC4wMDA3LDI5Mi42MTcyIEEwLDAgMCAwIDAgMjI4LjAwMDcsMjkyLjYxNzIgTDM3OS4wMDA4LDI5Mi42MTcyIEEwLDAgMCAwIDAgMzc5LjAwMDgsMjkyLjYxNzIgTDM3OS4wMDA4LDI2Mi4zNTE2IEwzNjkuMDAwOCwyNTIuMzUxNiBMMjI4LjAwMDcsMjUyLjM1MTYgQTAsMCAwIDAgMCAyMjguMDAwNywyNTIuMzUxNiIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTM2OS4wMDA4LDI1Mi4zNTE2IEwzNjkuMDAwOCwyNjIuMzUxNiBMMzc5LjAwMDgsMjYyLjM1MTYgTDM2OS4wMDA4LDI1Mi4zNTE2IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzAuMDAwMiIgeD0iMjM0LjAwMDciIHk9IjI2OS40MTg1Ij4mIzIwODM3OyYjMzM2NTU7JiMyMTQ2MzsmIzIwODM3OyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OyYjMTI0MzQ7JiMyMDMxNjsmIzI1MTA0OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5MS4wMDAxIiB4PSIyMzQuMDAwNyIgeT0iMjg0LjU1MTMiPiYjMjA4Mzc7JiMzMzY1NTsmIzI1OTY4OyYjMzczMjc7JiMxMjQzNDsmIzM1MzUyOyYjMzc2ODI7PC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI4MC4wMDA1IiB4PSIxMjguMDAwMiIgeT0iMjU1LjUiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2MC4wMDA1IiB4PSIxMzguMDAwMiIgeT0iMjc2LjYzODciPiYjMjExNTI7JiMyNDAzNzsmIzIxNjk3OyYjMjA4Mzc7JiMzMzY1NTs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjY4LjAwMDQiIHg9IjEzNC4wMDAzIiB5PSIzMTIuNjE3MiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ4LjAwMDQiIHg9IjE0NC4wMDAzIiB5PSIzMzMuNzU1OSI+JiMyMTQ2MzsmIzIwODM3OyYjMjY5MDg7JiMyNjYxOTs8L3RleHQ+PHBvbHlnb24gZmlsbD0iI0YxRjFGMSIgcG9pbnRzPSIxNTQuMDgxMywzNjYuNTg1OSwxODEuOTE5NSwzNjYuNTg1OSwxOTMuOTE5NSwzNzguNTg1OSwxODEuOTE5NSwzOTAuNTg1OSwxNTQuMDgxMywzOTAuNTg1OSwxNDIuMDgxMywzNzguNTg1OSwxNTQuMDgxMywzNjYuNTg1OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjcuODM4MiIgeD0iMTU0LjA4MTMiIHk9IjM4Mi4zOTQiPiYjMjE1MTI7JiMyNjY4NDs/PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE5LjAwODMiIHg9IjEyMy4wNzMiIHk9IjM3NS45OTE3Ij55ZXM8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMuNzAxNyIgeD0iMTkzLjkxOTUiIHk9IjM3NS45OTE3Ij5ubzwvdGV4dD48cGF0aCBkPSJNOTkuMDAwNCw0MDAuNTg1OSBMOTkuMDAwNCw0MTYuNzE4OCBMNzkuMDAwNCw0MjAuNzE4OCBMOTkuMDAwNCw0MjQuNzE4OCBMOTkuMDAwNCw0NDAuODUxNiBBMCwwIDAgMCAwIDk5LjAwMDQsNDQwLjg1MTYgTDIyNC4wMDA1LDQ0MC44NTE2IEEwLDAgMCAwIDAgMjI0LjAwMDUsNDQwLjg1MTYgTDIyNC4wMDA1LDQxMC41ODU5IEwyMTQuMDAwNSw0MDAuNTg1OSBMOTkuMDAwNCw0MDAuNTg1OSBBMCwwIDAgMCAwIDk5LjAwMDQsNDAwLjU4NTkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0yMTQuMDAwNSw0MDAuNTg1OSBMMjE0LjAwMDUsNDEwLjU4NTkgTDIyNC4wMDA1LDQxMC41ODU5IEwyMTQuMDAwNSw0MDAuNTg1OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA0LjAwMDEiIHg9IjEwNS4wMDA0IiB5PSI0MTcuNjUyOCI+JiMyNjkwODsmIzIxNDU0OyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OyYjMTI0MzQ7JiMyMDMxNjsmIzI1MTA0OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5MS4wMDAxIiB4PSIxMDUuMDAwNCIgeT0iNDMyLjc4NTYiPiYjMjY5MDg7JiMyMTQ1NDsmIzM3MzI5OyYjMzg5ODk7JiMxMjQzNDsmIzM1MzM2OyYjMzE2Mzk7PC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI2OC4wMDA0IiB4PSIxMSIgeT0iNDAzLjczNDQiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0OC4wMDA0IiB4PSIyMSIgeT0iNDI0Ljg3MyI+JiMyNjkwODsmIzIxNDU0OyYjMjA5NjY7JiMyOTcwMjs8L3RleHQ+PHBhdGggZD0iTTk5LjAwMDQsNDY3LjE0ODQgTDk5LjAwMDQsNDgzLjI4MTMgTDc5LjAwMDQsNDg3LjI4MTMgTDk5LjAwMDQsNDkxLjI4MTMgTDk5LjAwMDQsNTA3LjQxNDEgQTAsMCAwIDAgMCA5OS4wMDA0LDUwNy40MTQxIEwyMzcuMDAwNSw1MDcuNDE0MSBBMCwwIDAgMCAwIDIzNy4wMDA1LDUwNy40MTQxIEwyMzcuMDAwNSw0NzcuMTQ4NCBMMjI3LjAwMDUsNDY3LjE0ODQgTDk5LjAwMDQsNDY3LjE0ODQgQTAsMCAwIDAgMCA5OS4wMDA0LDQ2Ny4xNDg0IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNMjI3LjAwMDUsNDY3LjE0ODQgTDIyNy4wMDA1LDQ3Ny4xNDg0IEwyMzcuMDAwNSw0NzcuMTQ4NCBMMjI3LjAwMDUsNDY3LjE0ODQiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwNC4wMDAxIiB4PSIxMDUuMDAwNCIgeT0iNDg0LjIxNTMiPiYjMjgwNDA7JiMzNjAyNzsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsmIzEyNDM0OyYjMjAzMTY7JiMyNTEwNDs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTE3LjAwMDEiIHg9IjEwNS4wMDA0IiB5PSI0OTkuMzQ4MSI+JiMyNTkwMzsmIzMyMTAyOyYjMjE2OTc7JiMxMjM5ODsmIzI4MDQwOyYjMzYwMjc7JiMxMjQzNDsmIzM1MzUyOyYjMzc2ODI7PC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI2OC4wMDA0IiB4PSIxMSIgeT0iNDcwLjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0OC4wMDA0IiB4PSIyMSIgeT0iNDkxLjQzNTUiPiYjMjgwNDA7JiMzNjAyNzsmIzM1MzUyOyYjMzc2ODI7PC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI2OC4wMDA0IiB4PSIyNTcuMDAwNSIgeT0iNDAwLjU4NTkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0OC4wMDA0IiB4PSIyNjcuMDAwNSIgeT0iNDIxLjcyNDYiPiYjMTk5ODE7JiMzMzM5MTsmIzIwOTY2OyYjMjk3MDI7PC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI2OC4wMDA0IiB4PSIyNTcuMDAwNSIgeT0iNDYwLjg1MTYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0OC4wMDA0IiB4PSIyNjcuMDAwNSIgeT0iNDgxLjk5MDIiPiYjMzY4MjA7JiMyMTY5NzsmIzIwOTY2OyYjMjk3MDI7PC90ZXh0Pjxwb2x5Z29uIGZpbGw9IiNGMUYxRjEiIHBvaW50cz0iMTY4LjAwMDQsNTEzLjQxNDEsMTgwLjAwMDQsNTI1LjQxNDEsMTY4LjAwMDQsNTM3LjQxNDEsMTU2LjAwMDQsNTI1LjQxNDEsMTY4LjAwMDQsNTEzLjQxNDEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxlbGxpcHNlIGN4PSIxNjguMDAwNCIgY3k9IjU2OC40MTQxIiBmaWxsPSJub25lIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMjIyMjIyO3N0cm9rZS13aWR0aDoxOyIvPjxlbGxpcHNlIGN4PSIxNjguMDAwNCIgY3k9IjU2OC40MTQxIiBmaWxsPSIjMjIyMjIyIiByeD0iNiIgcnk9IjYiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTY4LjAwMDQiIHgyPSIxNjguMDAwNCIgeTE9IjY3LjI5NjkiIHkyPSI4Ny4yOTY5Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxNjQuMDAwNCw3Ny4yOTY5LDE2OC4wMDA0LDg3LjI5NjksMTcyLjAwMDQsNzcuMjk2OSwxNjguMDAwNCw4MS4yOTY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE2OC4wMDA0IiB4Mj0iMTY4LjAwMDQiIHkxPSIxMjEuMjY1NiIgeTI9IjE0NC40MTQxIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxNjQuMDAwNCwxMzQuNDE0MSwxNjguMDAwNCwxNDQuNDE0MSwxNzIuMDAwNCwxMzQuNDE0MSwxNjguMDAwNCwxMzguNDE0MSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxNjguMDAwNCIgeDI9IjE2OC4wMDA0IiB5MT0iMTc4LjM4MjgiIHkyPSIyMDEuNTMxMyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTY0LjAwMDQsMTkxLjUzMTMsMTY4LjAwMDQsMjAxLjUzMTMsMTcyLjAwMDQsMTkxLjUzMTMsMTY4LjAwMDQsMTk1LjUzMTMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTY4LjAwMDQiIHgyPSIxNjguMDAwNCIgeTE9IjIzNS41IiB5Mj0iMjU1LjUiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE2NC4wMDA0LDI0NS41LDE2OC4wMDA0LDI1NS41LDE3Mi4wMDA0LDI0NS41LDE2OC4wMDA0LDI0OS41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE2OC4wMDA0IiB4Mj0iMTY4LjAwMDQiIHkxPSIyODkuNDY4OCIgeTI9IjMxMi42MTcyIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxNjQuMDAwNCwzMDIuNjE3MiwxNjguMDAwNCwzMTIuNjE3MiwxNzIuMDAwNCwzMDIuNjE3MiwxNjguMDAwNCwzMDYuNjE3MiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0NS4wMDAyIiB4Mj0iNDUuMDAwMiIgeTE9IjQzNy43MDMxIiB5Mj0iNDcwLjI5NjkiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjQxLjAwMDIsNDYwLjI5NjksNDUuMDAwMiw0NzAuMjk2OSw0OS4wMDAyLDQ2MC4yOTY5LDQ1LjAwMDIsNDY0LjI5NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjkxLjAwMDciIHgyPSIyOTEuMDAwNyIgeTE9IjQzNC41NTQ3IiB5Mj0iNDYwLjg1MTYiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjI4Ny4wMDA3LDQ1MC44NTE2LDI5MS4wMDA3LDQ2MC44NTE2LDI5NS4wMDA3LDQ1MC44NTE2LDI5MS4wMDA3LDQ1NC44NTE2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE0Mi4wODEzIiB4Mj0iNDUuMDAwMiIgeTE9IjM3OC41ODU5IiB5Mj0iMzc4LjU4NTkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDUuMDAwMiIgeDI9IjQ1LjAwMDIiIHkxPSIzNzguNTg1OSIgeTI9IjQwMy43MzQ0Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI0MS4wMDAyLDM5My43MzQ0LDQ1LjAwMDIsNDAzLjczNDQsNDkuMDAwMiwzOTMuNzM0NCw0NS4wMDAyLDM5Ny43MzQ0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE5My45MTk1IiB4Mj0iMjkxLjAwMDciIHkxPSIzNzguNTg1OSIgeTI9IjM3OC41ODU5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjI5MS4wMDA3IiB4Mj0iMjkxLjAwMDciIHkxPSIzNzguNTg1OSIgeTI9IjQwMC41ODU5Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyODcuMDAwNywzOTAuNTg1OSwyOTEuMDAwNyw0MDAuNTg1OSwyOTUuMDAwNywzOTAuNTg1OSwyOTEuMDAwNywzOTQuNTg1OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0NS4wMDAyIiB4Mj0iNDUuMDAwMiIgeTE9IjUwNC4yNjU2IiB5Mj0iNTI1LjQxNDEiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDUuMDAwMiIgeDI9IjE1Ni4wMDA0IiB5MT0iNTI1LjQxNDEiIHkyPSI1MjUuNDE0MSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTQ2LjAwMDQsNTIxLjQxNDEsMTU2LjAwMDQsNTI1LjQxNDEsMTQ2LjAwMDQsNTI5LjQxNDEsMTUwLjAwMDQsNTI1LjQxNDEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjkxLjAwMDciIHgyPSIyOTEuMDAwNyIgeTE9IjQ5NC44MjAzIiB5Mj0iNTI1LjQxNDEiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjkxLjAwMDciIHgyPSIxODAuMDAwNCIgeTE9IjUyNS40MTQxIiB5Mj0iNTI1LjQxNDEiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE5MC4wMDA0LDUyMS40MTQxLDE4MC4wMDA0LDUyNS40MTQxLDE5MC4wMDA0LDUyOS40MTQxLDE4Ni4wMDA0LDUyNS40MTQxIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE2OC4wMDA0IiB4Mj0iMTY4LjAwMDQiIHkxPSIzNDYuNTg1OSIgeTI9IjM2Ni41ODU5Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxNjQuMDAwNCwzNTYuNTg1OSwxNjguMDAwNCwzNjYuNTg1OSwxNzIuMDAwNCwzNTYuNTg1OSwxNjguMDAwNCwzNjAuNTg1OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxNjguMDAwNCIgeDI9IjE2OC4wMDA0IiB5MT0iNTM3LjQxNDEiIHkyPSI1NTcuNDE0MSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTY0LjAwMDQsNTQ3LjQxNDEsMTY4LjAwMDQsNTU3LjQxNDEsMTcyLjAwMDQsNTQ3LjQxNDEsMTY4LjAwMDQsNTUxLjQxNDEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48IS0tU1JDPVtUTDlCUmk4bTREdHg1NXgyNU0zSGlySWdBUDVHZ0MyUkJmQzhhYk9EZjFHUWc5MUE5TnVSRmc4VkZhZDVOTWhpOUFqVWVPdURLYUZmblhnX0RwRGx0alhPbUdLNFFWLUhsT3hmZzFjRU5NQkNZRTRKZFB5ak9hbnUzNDBQZHZTbTA5Y1dpLTV2a3l5a2l2bWlLOGlPbVA5b2NTVDA0aUdtSFVjTXcwc1AxOFktOWFScldBd19fSVQ5eDVRSmhzZjNiaDZMMVAxdzBVRC1OOEdyUHk3eGEzdmVyRG80elpBWDh4YUpFZjlXeExobURrVGVxRjZZa3lObGhka0I1T2plOHRoUmV5ajFEYVA1NTZqTDFpVFE0ZzlyYm1TZDUyTkRNbEY4aDdDcTdCVUY1S0tid3RWUGl5VXJiMW5DS1NUWUZWeWkzTjRVZ0oxclpTZmZ4aFZWZlZLUURPVTFLcXNRNVNHZml1QThwRmxlbkhSSUxaMXI0b2x5aUNBNTlxVEFqWEo0bF9sWllvM1FUOV9xcm5DZ2IxNUNnS0stejZ2YlhwVXBtejJQU0RpSzNvUWxsNDM5blItY1VGSzNdLS0+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_16">外注委託ワークフローサービス<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h3>
<details>
<summary>SubcontractingWorkflowService</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/application/service/SubcontractingWorkflowService.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.application.service</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.application.port.in.command.SubcontractOrderCommand</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.application.port.out.SubcontractStatus</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.purchase.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.subcontract.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.persistence.mapper.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Service</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.transaction.annotation.Transactional</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.RoundingMode</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.format.DateTimeFormatter</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="nd">@Service</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SubcontractingWorkflowService</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">PurchaseOrderMapper</span><span class="w"> </span><span class="n">purchaseOrderMapper</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">PurchaseOrderDetailMapper</span><span class="w"> </span><span class="n">purchaseOrderDetailMapper</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">SupplyMapper</span><span class="w"> </span><span class="n">supplyMapper</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">SupplyDetailMapper</span><span class="w"> </span><span class="n">supplyDetailMapper</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">ConsumptionDetailMapper</span><span class="w"> </span><span class="n">consumptionDetailMapper</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">UnitPriceMapper</span><span class="w"> </span><span class="n">unitPriceMapper</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 発注番号を生成する</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">generatePurchaseOrderNumber</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;PO-&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">now</span><span class="p">().</span><span class="na">format</span><span class="p">(</span><span class="n">DateTimeFormatter</span><span class="p">.</span><span class="na">ofPattern</span><span class="p">(</span><span class="s">&quot;yyyyMM&quot;</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;-&quot;</span><span class="p">;</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">latestNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">purchaseOrderMapper</span><span class="p">.</span><span class="na">findLatestPurchaseOrderNumber</span><span class="p">(</span><span class="n">prefix</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;%&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">sequence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">latestNumber</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">currentSequence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Integer</span><span class="p">.</span><span class="na">parseInt</span><span class="p">(</span><span class="n">latestNumber</span><span class="p">.</span><span class="na">substring</span><span class="p">(</span><span class="n">latestNumber</span><span class="p">.</span><span class="na">length</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">4</span><span class="p">));</span>
<span class="w">            </span><span class="n">sequence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">currentSequence</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">prefix</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;%04d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">sequence</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 外注発注を作成する</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">PurchaseOrder</span><span class="w"> </span><span class="nf">createSubcontractOrder</span><span class="p">(</span><span class="n">SubcontractOrderCommand</span><span class="w"> </span><span class="n">command</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">purchaseOrderNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">generatePurchaseOrderNumber</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// 単価を取得</span>
<span class="w">        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">unitPrice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">command</span><span class="p">.</span><span class="na">getUnitPrice</span><span class="p">();</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">unitPrice</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">UnitPrice</span><span class="w"> </span><span class="n">priceEntity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">unitPriceMapper</span><span class="p">.</span><span class="na">findEffectiveUnitPrice</span><span class="p">(</span>
<span class="w">                    </span><span class="n">command</span><span class="p">.</span><span class="na">getItemCode</span><span class="p">(),</span><span class="w"> </span><span class="n">command</span><span class="p">.</span><span class="na">getSupplierCode</span><span class="p">(),</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">now</span><span class="p">());</span>
<span class="w">            </span><span class="n">unitPrice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">priceEntity</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">priceEntity</span><span class="p">.</span><span class="na">getUnitPrice</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// 発注ヘッダを作成</span>
<span class="w">        </span><span class="n">PurchaseOrder</span><span class="w"> </span><span class="n">purchaseOrder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PurchaseOrder</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">purchaseOrderNumber</span><span class="p">(</span><span class="n">purchaseOrderNumber</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">orderDate</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">now</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">supplierCode</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getSupplierCode</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">status</span><span class="p">(</span><span class="n">PurchaseOrderStatus</span><span class="p">.</span><span class="na">CREATING</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">        </span><span class="n">purchaseOrderMapper</span><span class="p">.</span><span class="na">insert</span><span class="p">(</span><span class="n">purchaseOrder</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// 発注明細を作成</span>
<span class="w">        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">orderAmount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">command</span><span class="p">.</span><span class="na">getQuantity</span><span class="p">().</span><span class="na">multiply</span><span class="p">(</span><span class="n">unitPrice</span><span class="p">);</span>
<span class="w">        </span><span class="n">PurchaseOrderDetail</span><span class="w"> </span><span class="n">detail</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PurchaseOrderDetail</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">purchaseOrderNumber</span><span class="p">(</span><span class="n">purchaseOrderNumber</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">lineNumber</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">itemCode</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getItemCode</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">orderQuantity</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getQuantity</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">orderUnitPrice</span><span class="p">(</span><span class="n">unitPrice</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">orderAmount</span><span class="p">(</span><span class="n">orderAmount</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">expectedReceivingDate</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getDeliveryDate</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">completedFlag</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">        </span><span class="n">purchaseOrderDetailMapper</span><span class="p">.</span><span class="na">insert</span><span class="p">(</span><span class="n">detail</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// 発注確定</span>
<span class="w">        </span><span class="n">purchaseOrderMapper</span><span class="p">.</span><span class="na">updateStatus</span><span class="p">(</span><span class="n">purchaseOrderNumber</span><span class="p">,</span><span class="w"> </span><span class="n">PurchaseOrderStatus</span><span class="p">.</span><span class="na">ORDERED</span><span class="p">);</span>
<span class="w">        </span><span class="n">purchaseOrder</span><span class="p">.</span><span class="na">setStatus</span><span class="p">(</span><span class="n">PurchaseOrderStatus</span><span class="p">.</span><span class="na">ORDERED</span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">purchaseOrder</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 外注委託状況を取得する</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">SubcontractStatus</span><span class="w"> </span><span class="nf">getSubcontractStatus</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">purchaseOrderNumber</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">PurchaseOrder</span><span class="w"> </span><span class="n">purchaseOrder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">purchaseOrderMapper</span><span class="p">.</span><span class="na">findByPurchaseOrderNumber</span><span class="p">(</span><span class="n">purchaseOrderNumber</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">purchaseOrder</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;Purchase order not found: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">purchaseOrderNumber</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">PurchaseOrderDetail</span><span class="o">&gt;</span><span class="w"> </span><span class="n">details</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">purchaseOrderDetailMapper</span><span class="p">.</span><span class="na">findByPurchaseOrderNumber</span><span class="p">(</span><span class="n">purchaseOrderNumber</span><span class="p">);</span>

<span class="w">        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">suppliedQuantity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">;</span>
<span class="w">        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">consumedQuantity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">;</span>
<span class="w">        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">acceptedQuantity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">;</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">PurchaseOrderDetail</span><span class="w"> </span><span class="n">detail</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">details</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Supply</span><span class="w"> </span><span class="n">supply</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">supplyMapper</span><span class="p">.</span><span class="na">findByPurchaseOrderDetail</span><span class="p">(</span><span class="n">purchaseOrderNumber</span><span class="p">,</span><span class="w"> </span><span class="n">detail</span><span class="p">.</span><span class="na">getLineNumber</span><span class="p">());</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">supply</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">List</span><span class="o">&lt;</span><span class="n">SupplyDetail</span><span class="o">&gt;</span><span class="w"> </span><span class="n">supplyDetails</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">supplyDetailMapper</span><span class="p">.</span><span class="na">findBySupplyNumber</span><span class="p">(</span><span class="n">supply</span><span class="p">.</span><span class="na">getSupplyNumber</span><span class="p">());</span>
<span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">SupplyDetail</span><span class="w"> </span><span class="n">supplyDetail</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">supplyDetails</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">suppliedQuantity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">suppliedQuantity</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">supplyDetail</span><span class="p">.</span><span class="na">getQuantity</span><span class="p">());</span>

<span class="w">                    </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">consumed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">consumptionDetailMapper</span><span class="p">.</span><span class="na">sumByPurchaseOrderAndItem</span><span class="p">(</span>
<span class="w">                            </span><span class="n">purchaseOrderNumber</span><span class="p">,</span><span class="w"> </span><span class="n">detail</span><span class="p">.</span><span class="na">getLineNumber</span><span class="p">(),</span><span class="w"> </span><span class="n">supplyDetail</span><span class="p">.</span><span class="na">getItemCode</span><span class="p">());</span>
<span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">consumed</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="n">consumedQuantity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">consumedQuantity</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">consumed</span><span class="p">);</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">detail</span><span class="p">.</span><span class="na">getAcceptedQuantity</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">acceptedQuantity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">acceptedQuantity</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">detail</span><span class="p">.</span><span class="na">getAcceptedQuantity</span><span class="p">());</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">yieldRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">suppliedQuantity</span><span class="p">.</span><span class="na">compareTo</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                </span><span class="o">?</span><span class="w"> </span><span class="n">consumedQuantity</span><span class="p">.</span><span class="na">divide</span><span class="p">(</span><span class="n">suppliedQuantity</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">RoundingMode</span><span class="p">.</span><span class="na">HALF_UP</span><span class="p">)</span>
<span class="w">                </span><span class="p">:</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">;</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">SubcontractStatus</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">purchaseOrderNumber</span><span class="p">(</span><span class="n">purchaseOrderNumber</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">status</span><span class="p">(</span><span class="n">purchaseOrder</span><span class="p">.</span><span class="na">getStatus</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">suppliedQuantity</span><span class="p">(</span><span class="n">suppliedQuantity</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">consumedQuantity</span><span class="p">(</span><span class="n">consumedQuantity</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">acceptedQuantity</span><span class="p">(</span><span class="n">acceptedQuantity</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">yieldRate</span><span class="p">(</span><span class="n">yieldRate</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="dto">コマンド・DTO クラス<a class="headerlink" href="#dto" title="Permanent link">&para;</a></h3>
<details>
<summary>SubcontractOrderCommand</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/application/port/in/command/SubcontractOrderCommand.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.application.port.in.command</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Builder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>

<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SubcontractOrderCommand</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">supplierCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">deliveryDate</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">quantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">unitPrice</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>SubcontractStatus</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/production/application/port/out/SubcontractStatus.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.application.port.out</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.purchase.PurchaseOrderStatus</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Builder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 外注委託状況DTO</span>
<span class="cm"> */</span>
<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SubcontractStatus</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">purchaseOrderNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">PurchaseOrderStatus</span><span class="w"> </span><span class="n">status</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">suppliedQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">consumedQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">acceptedQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">yieldRate</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="_17">有償支給と無償支給の会計処理の違い<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>処理</th>
<th>有償支給</th>
<th>無償支給</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>支給時</strong></td>
<td>売上計上（材料を売却）</td>
<td>在庫移動のみ</td>
</tr>
<tr>
<td><strong>入荷時</strong></td>
<td>仕入計上（加工品を購入）</td>
<td>加工賃のみ計上</td>
</tr>
<tr>
<td><strong>消費税</strong></td>
<td>売上・仕入両方で課税</td>
<td>加工賃のみ課税</td>
</tr>
<tr>
<td><strong>在庫管理</strong></td>
<td>支給時に在庫減、入荷時に在庫増</td>
<td>在庫は自社のまま</td>
</tr>
</tbody>
</table>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkFDVElWSVRZIiBoZWlnaHQ9IjQ2N3B4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NTkwcHg7aGVpZ2h0OjQ2N3B4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDU5MCA0NjciIHdpZHRoPSI1OTBweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjYzNzc7JiMyMDc2NzsmIzI1OTAzOyYjMzIxMDI7JiMxMjM5MjsmIzI4OTYxOyYjMjA3Njc7JiMyNTkwMzsmIzMyMTAyOyYjMTIzOTg7JiMyMDI1MDsmIzM1MzM2OyYjMjA5NjY7JiMyOTcwMjs8L3RpdGxlPjxkZWZzLz48Zz48ZyBjbGFzcz0idGl0bGUiIGRhdGEtc291cmNlLWxpbmU9IjEiPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxOTUuOTk5MSIgeD0iMTk1LjU3NjMiIHk9IjMyLjk5NTEiPiYjMjYzNzc7JiMyMDc2NzsmIzI1OTAzOyYjMzIxMDI7JiMxMjM5MjsmIzI4OTYxOyYjMjA3Njc7JiMyNTkwMzsmIzMyMTAyOyYjMTIzOTg7JiMyMDI1MDsmIzM1MzM2OyYjMjA5NjY7JiMyOTcwMjs8L3RleHQ+PC9nPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMjAuOTUzMSIgc3R5bGU9InN0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjU1Ny4xNTE3IiB4PSIxNSIgeT0iNTAuMDQyIi8+PHJlY3QgZmlsbD0iI0FERDhFNiIgaGVpZ2h0PSI0MDQuOTg0NCIgc3R5bGU9InN0cm9rZTojQUREOEU2O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjI3MC42NDU0IiB4PSIxNSIgeT0iNTAuMDQyIi8+PGVsbGlwc2UgY3g9Ijg1LjAwMDQiIGN5PSI4NS45OTUxIiBmaWxsPSIjMjIyMjIyIiByeD0iMTAiIHJ5PSIxMCIgc3R5bGU9InN0cm9rZTojMjIyMjIyO3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0xNjkuMDAwOCwxMDUuOTk1MSBMMTY5LjAwMDgsMTI5LjY5NDMgTDE0OS4wMDA4LDEzMy42OTQzIEwxNjkuMDAwOCwxMzcuNjk0MyBMMTY5LjAwMDgsMTYxLjM5MzYgQTAsMCAwIDAgMCAxNjkuMDAwOCwxNjEuMzkzNiBMMjgwLjY0NTQsMTYxLjM5MzYgQTAsMCAwIDAgMCAyODAuNjQ1NCwxNjEuMzkzNiBMMjgwLjY0NTQsMTE1Ljk5NTEgTDI3MC42NDU0LDEwNS45OTUxIEwxNjkuMDAwOCwxMDUuOTk1MSBBMCwwIDAgMCAwIDE2OS4wMDA4LDEwNS45OTUxIiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNMjcwLjY0NTQsMTA1Ljk5NTEgTDI3MC42NDU0LDExNS45OTUxIEwyODAuNjQ1NCwxMTUuOTk1MSBMMjcwLjY0NTQsMTA1Ljk5NTEiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjUyLjAwMDEiIHg9IjE3NS4wMDA4IiB5PSIxMjMuMDYyIj4mIzEyMzA0OyYjMjAxODE7JiMzNTM3OTsmIzEyMzA1OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5MC42NDQ2IiB4PSIxNzUuMDAwOCIgeT0iMTM4LjE5NDgiPiYjMjI3NzA7JiMyNTQ5OTsmIzM3MzI5OyAvICYjMjI3NzA7JiMxOTk3ODsmIzM5NjQwOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5MC42NDQ2IiB4PSIxNzUuMDAwOCIgeT0iMTUzLjMyNzYiPiYjMjI3NzA7JiMxOTk3ODsmIzIxNDA3OyYjMjAzODU7IC8gJiMzNTA2OTsmIzIxNjk3OzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTI4LjAwMDgiIHg9IjIxIiB5PSIxMTYuNzEiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDguMDAwOCIgeD0iMzEiIHk9IjEzNy44NDg2Ij4mIzI2NDQ4OyYjMjYwMDk7JiMxMjQzNDsmIzIyODA2OyYjMjc4ODA7JiMyMDgwODsmIzEyMzk1OyYjMjI3NzA7JiMyMTM2NDs8L3RleHQ+PHBhdGggZD0iTTE1MS4wMDA3LDE3OC4yNDUxIEwxNTEuMDAwNywxOTQuMzc3OSBMMTMxLjAwMDcsMTk4LjM3NzkgTDE1MS4wMDA3LDIwMi4zNzc5IEwxNTEuMDAwNywyMTguNTEwNyBBMCwwIDAgMCAwIDE1MS4wMDA3LDIxOC41MTA3IEwyNjIuNjQ1MywyMTguNTEwNyBBMCwwIDAgMCAwIDI2Mi42NDUzLDIxOC41MTA3IEwyNjIuNjQ1MywxODguMjQ1MSBMMjUyLjY0NTMsMTc4LjI0NTEgTDE1MS4wMDA3LDE3OC4yNDUxIEEwLDAgMCAwIDAgMTUxLjAwMDcsMTc4LjI0NTEiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0yNTIuNjQ1MywxNzguMjQ1MSBMMjUyLjY0NTMsMTg4LjI0NTEgTDI2Mi42NDUzLDE4OC4yNDUxIEwyNTIuNjQ1MywxNzguMjQ1MSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTIuMDAwMSIgeD0iMTU3LjAwMDciIHk9IjE5NS4zMTIiPiYjMTIzMDQ7JiMyMDE4MTsmIzM1Mzc5OyYjMTIzMDU7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjkwLjY0NDYiIHg9IjE1Ny4wMDA3IiB5PSIyMTAuNDQ0OCI+JiMyMDE4MTsmIzIwODM3OyYjMzk2NDA7IC8gJiMzNjAyMzsmIzI1NDk5OyYjMzczMjk7PC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI5Mi4wMDA1IiB4PSIzOS4wMDAxIiB5PSIxODEuMzkzNiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjcyLjAwMDUiIHg9IjQ5LjAwMDEiIHk9IjIwMi41MzIyIj4mIzIxMTUyOyYjMjQwMzc7JiMyMTY5NzsmIzEyNDM0OyYjMzYwOTI7JiMyMDgzNzs8L3RleHQ+PGVsbGlwc2UgY3g9Ijg1LjAwMDQiIGN5PSIyNDkuNTEwNyIgZmlsbD0ibm9uZSIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MTsiLz48ZWxsaXBzZSBjeD0iODUuMDAwNCIgY3k9IjI0OS41MTA3IiBmaWxsPSIjMjIyMjIyIiByeD0iNiIgcnk9IjYiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHgxPSIxNSIgeDI9IjE1IiB5MT0iNTAuMDQyIiB5Mj0iNDU1LjAyNjQiLz48cmVjdCBmaWxsPSIjOTBFRTkwIiBoZWlnaHQ9IjQwNC45ODQ0IiBzdHlsZT0ic3Ryb2tlOiM5MEVFOTA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMjg0LjY0NTQiIHg9IjI4NS42NDU0IiB5PSI1MC4wNDIiLz48ZWxsaXBzZSBjeD0iMzU1LjY0NTkiIGN5PSIyODAuNTEwNyIgZmlsbD0iIzIyMjIyMiIgcng9IjEwIiByeT0iMTAiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNNDM5LjY0NjMsMzAwLjUxMDcgTDQzOS42NDYzLDMyNC4yMSBMNDE5LjY0NjMsMzI4LjIxIEw0MzkuNjQ2MywzMzIuMjEgTDQzOS42NDYzLDM1NS45MDkyIEEwLDAgMCAwIDAgNDM5LjY0NjMsMzU1LjkwOTIgTDU2NC42NDY0LDM1NS45MDkyIEEwLDAgMCAwIDAgNTY0LjY0NjQsMzU1LjkwOTIgTDU2NC42NDY0LDMxMC41MTA3IEw1NTQuNjQ2NCwzMDAuNTEwNyBMNDM5LjY0NjMsMzAwLjUxMDcgQTAsMCAwIDAgMCA0MzkuNjQ2MywzMDAuNTEwNyIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTU1NC42NDY0LDMwMC41MTA3IEw1NTQuNjQ2NCwzMTAuNTEwNyBMNTY0LjY0NjQsMzEwLjUxMDcgTDU1NC42NDY0LDMwMC41MTA3IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1Mi4wMDAxIiB4PSI0NDUuNjQ2MyIgeT0iMzE3LjU3NzYiPiYjMTIzMDQ7JiMyMDE4MTsmIzM1Mzc5OyYjMTIzMDU7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjkwLjY0NDYiIHg9IjQ0NS42NDYzIiB5PSIzMzIuNzEwNCI+JiMzODkyODsmIzEyMzY5OyYjMjY0NDg7JiMyNjAwOTsgLyAmIzM1MDY5OyYjMjE2OTc7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwNC4wMDAxIiB4PSI0NDUuNjQ2MyIgeT0iMzQ3Ljg0MzMiPiYjNjUyODg7JiMzMTAzODsmIzIwODY5OyYjMjUzOTE7JiMyNjM2NzsmIzEyMzk4OyYjMTI0MTU7JiM2NTI4OTs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEyOC4wMDA4IiB4PSIyOTEuNjQ1NCIgeT0iMzExLjIyNTYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDguMDAwOCIgeD0iMzAxLjY0NTQiIHk9IjMzMi4zNjQzIj4mIzI2NDQ4OyYjMjYwMDk7JiMxMjQzNDsmIzIyODA2OyYjMjc4ODA7JiMyMDgwODsmIzEyMzk1OyYjMzYwMjQ7JiMxOTk4Mjs8L3RleHQ+PHBhdGggZD0iTTQyNy42NDYyLDM3Mi43NjA3IEw0MjcuNjQ2MiwzODguODkzNiBMNDA3LjY0NjIsMzkyLjg5MzYgTDQyNy42NDYyLDM5Ni44OTM2IEw0MjcuNjQ2Miw0MTMuMDI2NCBBMCwwIDAgMCAwIDQyNy42NDYyLDQxMy4wMjY0IEw1NjUuMjkwOCw0MTMuMDI2NCBBMCwwIDAgMCAwIDU2NS4yOTA4LDQxMy4wMjY0IEw1NjUuMjkwOCwzODIuNzYwNyBMNTU1LjI5MDgsMzcyLjc2MDcgTDQyNy42NDYyLDM3Mi43NjA3IEEwLDAgMCAwIDAgNDI3LjY0NjIsMzcyLjc2MDciIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik01NTUuMjkwOCwzNzIuNzYwNyBMNTU1LjI5MDgsMzgyLjc2MDcgTDU2NS4yOTA4LDM4Mi43NjA3IEw1NTUuMjkwOCwzNzIuNzYwNyIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTIuMDAwMSIgeD0iNDMzLjY0NjIiIHk9IjM4OS44Mjc2Ij4mIzEyMzA0OyYjMjAxODE7JiMzNTM3OTsmIzEyMzA1OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTYuNjQ0NyIgeD0iNDMzLjY0NjIiIHk9IjQwNC45NjA0Ij4mIzIyODA2OyYjMjc4ODA7JiMyMTE1MjsmIzI0MDM3OyYjMzYwMjc7IC8gJiMzNjAyMzsmIzI1NDk5OyYjMzczMjk7PC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMDQuMDAwNiIgeD0iMzAzLjY0NTUiIHk9IjM3NS45MDkyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODQuMDAwNiIgeD0iMzEzLjY0NTUiIHk9IjM5Ny4wNDc5Ij4mIzIxMTUyOyYjMjQwMzc7JiMzNjAzNTsmIzEyNDM0OyYjMjU5MDM7JiMyNTE3MzsmIzEyMzU2OzwvdGV4dD48ZWxsaXBzZSBjeD0iMzU1LjY0NTkiIGN5PSI0NDQuMDI2NCIgZmlsbD0ibm9uZSIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MTsiLz48ZWxsaXBzZSBjeD0iMzU1LjY0NTkiIGN5PSI0NDQuMDI2NCIgZmlsbD0iIzIyMjIyMiIgcng9IjYiIHJ5PSI2IiBzdHlsZT0ic3Ryb2tlOiMyMjIyMjI7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB4MT0iMjg1LjY0NTQiIHgyPSIyODUuNjQ1NCIgeTE9IjUwLjA0MiIgeTI9IjQ1NS4wMjY0Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB4MT0iNTcwLjI5MDgiIHgyPSI1NzAuMjkwOCIgeTE9IjUwLjA0MiIgeTI9IjQ1NS4wMjY0Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9Ijg1LjAwMDQiIHgyPSI4NS4wMDA0IiB5MT0iOTUuOTk1MSIgeTI9IjExNi43MSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iODEuMDAwNCwxMDYuNzEsODUuMDAwNCwxMTYuNzEsODkuMDAwNCwxMDYuNzEsODUuMDAwNCwxMTAuNzEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iODUuMDAwNCIgeDI9Ijg1LjAwMDQiIHkxPSIxNTAuNjc4NyIgeTI9IjE4MS4zOTM2Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI4MS4wMDA0LDE3MS4zOTM2LDg1LjAwMDQsMTgxLjM5MzYsODkuMDAwNCwxNzEuMzkzNiw4NS4wMDA0LDE3NS4zOTM2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9Ijg1LjAwMDQiIHgyPSI4NS4wMDA0IiB5MT0iMjE1LjM2MjMiIHkyPSIyMzguNTEwNyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iODEuMDAwNCwyMjguNTEwNyw4NS4wMDA0LDIzOC41MTA3LDg5LjAwMDQsMjI4LjUxMDcsODUuMDAwNCwyMzIuNTEwNyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzNTUuNjQ1OSIgeDI9IjM1NS42NDU5IiB5MT0iMjkwLjUxMDciIHkyPSIzMTEuMjI1NiIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzUxLjY0NTksMzAxLjIyNTYsMzU1LjY0NTksMzExLjIyNTYsMzU5LjY0NTksMzAxLjIyNTYsMzU1LjY0NTksMzA1LjIyNTYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzU1LjY0NTkiIHgyPSIzNTUuNjQ1OSIgeTE9IjM0NS4xOTQzIiB5Mj0iMzc1LjkwOTIiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjM1MS42NDU5LDM2NS45MDkyLDM1NS42NDU5LDM3NS45MDkyLDM1OS42NDU5LDM2NS45MDkyLDM1NS42NDU5LDM2OS45MDkyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjM1NS42NDU5IiB4Mj0iMzU1LjY0NTkiIHkxPSI0MDkuODc3OSIgeTI9IjQzMy4wMjY0Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIzNTEuNjQ1OSw0MjMuMDI2NCwzNTUuNjQ1OSw0MzMuMDI2NCwzNTkuNjQ1OSw0MjMuMDI2NCwzNTUuNjQ1OSw0MjcuMDI2NCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE4IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjcxLjk5OTYiIHg9IjExNC4zMjI5IiB5PSI2Ni43NSI+JiMyNjM3NzsmIzIwNzY3OyYjMjU5MDM7JiMzMjEwMjs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTgiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzEuOTk5NiIgeD0iMzkxLjk2ODQiIHk9IjY2Ljc1Ij4mIzI4OTYxOyYjMjA3Njc7JiMyNTkwMzsmIzMyMTAyOzwvdGV4dD48IS0tU1JDPVtWTDNESWlEMDZCcGxLbUh5MEVfcnZpTUJCbzRPajUxSUlUVFIzYnJEc2dIZUlER01qS2ZSLWFFV08yNmZERDNPRmlwY3NzbkVWR0t0MTZuMHFqbGkzWkZwcFUwZ2hpYUkteDEwN3gyTkhWOHpleUhCejU3WC1ITDd4em1wZUpyQmQxUDJzajV2elVlUWR6UGtQUXNlcXIwM053V09MVFlkbXRmbHpFdTk5WnFNVTYyT2JDblh4Q0ZaeVdHZlRJbkJRY1EwUURFOXJydGsxUkpmOGk0cGt2LXNOVWJPNFpXRUUtZHk1VUs4eDQ2eTZHYzJadF9XY0kxUGtQR283dUdncTFkMlFZZS1ISG1GOFoyY3ZINDIyTHhPUGF4LUFlX1JjcExtX1VRbHRQYWdvdWZNdEU1bUZVdzdTTVlOUHdUM1huOHRiLXdCeDI4cGNNb1dQUjI3MVVqbG5USUtSN1VIelJ5WDMtdjVlaFk0TUxyQXowQ3h2YVZiOGR6VE5sS05dLS0+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<hr />
<h2 id="_18">まとめ<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h2>
<p>本章では、外注委託管理（支給から消費まで）の DB 設計と実装について学びました。</p>
<h3 id="_19">学んだこと<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>支給業務の設計</strong></li>
<li>支給データと支給明細データの親子関係</li>
<li>有償支給と無償支給の区別</li>
<li>
<p>発注明細との紐付け</p>
</li>
<li>
<p><strong>消費業務の設計</strong></p>
</li>
<li>入荷時の消費記録</li>
<li>歩留まり率の計算</li>
<li>
<p>支給数量を超えない消費のバリデーション</p>
</li>
<li>
<p><strong>命名規則のパターン</strong></p>
</li>
<li><strong>DB（日本語）</strong>: テーブル名、カラム名、ENUM 型・値は日本語</li>
<li><strong>Java（英語）</strong>: クラス名、フィールド名、enum 値は英語</li>
<li><strong>MyBatis resultMap</strong>: 日本語カラムと英語プロパティのマッピング</li>
<li><strong>TypeHandler</strong>: 日本語 ENUM 値と英語 enum の相互変換</li>
</ol>
<h3 id="_20">テーブル一覧<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>テーブル名（日本語）</th>
<th>Java エンティティ</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>支給データ</td>
<td>Supply</td>
<td>外注先への支給情報</td>
</tr>
<tr>
<td>支給明細データ</td>
<td>SupplyDetail</td>
<td>支給品目の明細</td>
</tr>
<tr>
<td>消費データ</td>
<td>Consumption</td>
<td>支給品の消費報告</td>
</tr>
<tr>
<td>消費明細データ</td>
<td>ConsumptionDetail</td>
<td>消費品目の明細</td>
</tr>
</tbody>
</table>
<h3 id="enum">ENUM 一覧<a class="headerlink" href="#enum" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>DB ENUM 型（日本語）</th>
<th>Java Enum</th>
<th>値</th>
</tr>
</thead>
<tbody>
<tr>
<td>支給区分</td>
<td>SupplyType</td>
<td>有償支給→PAID, 無償支給→FREE</td>
</tr>
</tbody>
</table>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://github.com/k2works/practical-database-design" target="_blank" rel="noopener" title="GitHub Repository" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "search.suggest", "search.highlight"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
      
        <script src="../../../docs/assets/js/extra.js"></script>
      
    
  </body>
</html>