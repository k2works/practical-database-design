
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="基幹業務システム（販売管理・財務会計・生産管理）のデータベース設計を体系的に解説">
      
      
        <meta name="author" content="k2works">
      
      
      
        <link rel="prev" href="../chapter20/">
      
      
        <link rel="next" href="../../part4/chapter22/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>第21章 APIサービスの実装 - 実践データベース設計：基幹業務システム編</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../docs/mkdocs/assets/css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#21api" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="実践データベース設計：基幹業務システム編" class="md-header__button md-logo" aria-label="実践データベース設計：基幹業務システム編" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            実践データベース設計：基幹業務システム編
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              第21章 APIサービスの実装
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/k2works/practical-database-design" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    practical-database-design
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
  実践データベース設計

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="実践データベース設計：基幹業務システム編" class="md-nav__button md-logo" aria-label="実践データベース設計：基幹業務システム編" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    実践データベース設計：基幹業務システム編
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/k2works/practical-database-design" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    practical-database-design
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    実践データベース設計
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    実践データベース設計
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../techstack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    技術スタック
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../outline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    アウトライン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    執筆ワークフロー
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ops/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    運用ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6" >
        
          
          <label class="md-nav__link" for="__nav_1_6" id="__nav_1_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    デプロイ
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    デプロイ
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy-sms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SMS デモデプロイ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy-fas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FAS デモデプロイ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_7" >
        
          
          <label class="md-nav__link" for="__nav_1_7" id="__nav_1_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第1部 基幹業務システムの全体像
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    第1部 基幹業務システムの全体像
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1/chapter01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第1章 基幹業務システムとは
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1/chapter02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第2章 基幹業務システムの業務領域
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1/chapter03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第3章 業務フローの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_8" >
        
          
          <label class="md-nav__link" for="__nav_1_8" id="__nav_1_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第2部 販売管理システム
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    第2部 販売管理システム
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第4章 販売管理システムの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第5章 マスタ情報の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第6章 受注・出荷・売上の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter07/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第7章 債権管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter08/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第8章 調達管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter09/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第9章 在庫管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第10章 債務管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第11章 共通処理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第12章 販売管理データ設計（B社事例）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第13章 APIサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_9" checked>
        
          
          <label class="md-nav__link" for="__nav_1_9" id="__nav_1_9_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第3部 財務会計システム
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_9_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    第3部 財務会計システム
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第14章 財務会計システムの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第15章 勘定科目の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter16/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第16章 仕訳の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter17/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第17章 自動仕訳の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter18/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第18章 勘定科目残高の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter19/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第19章 赤黒とログの設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter20/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第20章 財務会計データ設計（D社事例）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    第21章 APIサービスの実装
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    第21章 APIサービスの実装
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#211" class="md-nav__link">
    <span class="md-ellipsis">
      
        21.1 ヘキサゴナルアーキテクチャの復習
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="21.1 ヘキサゴナルアーキテクチャの復習">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2111-ports-and-adapters" class="md-nav__link">
    <span class="md-ellipsis">
      
        21.1.1 Ports and Adapters パターンの概要
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2112" class="md-nav__link">
    <span class="md-ellipsis">
      
        21.1.2 ドメイン中心設計
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2113" class="md-nav__link">
    <span class="md-ellipsis">
      
        21.1.3 依存性の逆転
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2114" class="md-nav__link">
    <span class="md-ellipsis">
      
        21.1.4 テスト容易性
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#212" class="md-nav__link">
    <span class="md-ellipsis">
      
        21.2 アーキテクチャ構造
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="21.2 アーキテクチャ構造">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2121" class="md-nav__link">
    <span class="md-ellipsis">
      
        21.2.1 パッケージ構成
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2122" class="md-nav__link">
    <span class="md-ellipsis">
      
        21.2.2 各レイヤーの責務
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#213-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        21.3 マスタ API の実装
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="21.3 マスタ API の実装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2131-apicrud" class="md-nav__link">
    <span class="md-ellipsis">
      
        21.3.1 勘定科目マスタ API（CRUD エンドポイント）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2132-tdd-red-green-refactor" class="md-nav__link">
    <span class="md-ellipsis">
      
        21.3.2 TDD による実装（Red-Green-Refactor）
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="21.3.2 TDD による実装（Red-Green-Refactor）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#red" class="md-nav__link">
    <span class="md-ellipsis">
      
        Red: 失敗するテストを書く
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#green" class="md-nav__link">
    <span class="md-ellipsis">
      
        Green: テストを通す最小限の実装
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#refactor-application-service" class="md-nav__link">
    <span class="md-ellipsis">
      
        Refactor: Application Service の実装
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2133-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        21.3.3 補助科目マスタ API
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#214-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        21.4 トランザクション API の実装
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="21.4 トランザクション API の実装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2141-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        21.4.1 仕訳 API
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2142-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        21.4.2 残高照会 API
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2143-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        21.4.3 試算表 API
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#215" class="md-nav__link">
    <span class="md-ellipsis">
      
        21.5 エラーハンドリング
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="21.5 エラーハンドリング">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2151" class="md-nav__link">
    <span class="md-ellipsis">
      
        21.5.1 ドメイン例外の定義
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2152" class="md-nav__link">
    <span class="md-ellipsis">
      
        21.5.2 グローバル例外ハンドラー
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#216-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        21.6 API ドキュメント
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="21.6 API ドキュメント">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2161-openapi-swagger" class="md-nav__link">
    <span class="md-ellipsis">
      
        21.6.1 OpenAPI / Swagger の設定
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2162-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        21.6.2 API ドキュメントへのアクセス
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#217-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        21.7 API インテグレーションテスト
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="21.7 API インテグレーションテスト">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2171" class="md-nav__link">
    <span class="md-ellipsis">
      
        21.7.1 テストコンテナによる統合テスト環境
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2172-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        21.7.2 API エンドポイント一覧
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        まとめ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="まとめ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        設計のポイント
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_10" >
        
          
          <label class="md-nav__link" for="__nav_1_10" id="__nav_1_10_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第4部 生産管理システム
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    第4部 生産管理システム
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter22/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第22章 生産管理システムの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter23/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第23章 マスタ情報の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter24/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第24章 生産計画の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter25/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第25章 購買管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter26/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第26章 外注委託管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter27/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第27章 工程管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter28/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第28章 在庫管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第29章 品質管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter30/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第30章 製造原価管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter31/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第31章 生産管理データ設計（E社事例）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter32/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第32章 APIサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_11" >
        
          
          <label class="md-nav__link" for="__nav_1_11" id="__nav_1_11_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第5部 エンタープライズインテグレーション
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    第5部 エンタープライズインテグレーション
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter33.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第33章 システム統合の概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter34.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第34章 メッセージングパターン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter35.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第35章 システム間連携パターン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter36.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第36章 マスタデータ管理（MDM）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter37.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第37章 イベント駆動アーキテクチャ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter38.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第38章 API設計とサービス連携
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter39.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第39章 データ連携の実装パターン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_12" >
        
          
          <label class="md-nav__link" for="__nav_1_12" id="__nav_1_12_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 販売管理システム実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 販売管理システム実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study2-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究1 モノリスサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study2-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究2 JavaFXデスクトップアプリケーションの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study2-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究3 gRPCサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study2-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究4 GraphQLサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_13" >
        
          
          <label class="md-nav__link" for="__nav_1_13" id="__nav_1_13_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 財務会計システム実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_13">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 財務会計システム実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study3-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究1 モノリスサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study3-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究2 JavaFXデスクトップアプリケーションの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study3-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究3 gRPCサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study3-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究4 GraphQLサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_14" >
        
          
          <label class="md-nav__link" for="__nav_1_14" id="__nav_1_14_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 生産管理システム実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_14">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 生産管理システム実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study4-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究1 モノリスサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study4-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究2 JavaFXデスクトップアプリケーションの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study4-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究3 gRPCサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study4-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究4 GraphQLサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_15" >
        
          
          <label class="md-nav__link" for="__nav_1_15" id="__nav_1_15_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 財務会計システムORM実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_15">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 財務会計システムORM実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter14-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第14章 財務会計システムの全体像【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter15-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第15章 勘定科目の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter16-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第16章 仕訳の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter17-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第17章 自動仕訳の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter18-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第18章 勘定科目残高の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter19-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第19章 赤黒とログの設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter20-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第20章 財務会計データ設計（D社事例）【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter21-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第21章 APIサービスの実装【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_16" >
        
          
          <label class="md-nav__link" for="__nav_1_16" id="__nav_1_16_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    付録
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_16">
            <span class="md-nav__icon md-icon"></span>
            
  
    付録
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/er-diagrams.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    A 全体ER図
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/table-definitions.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    B テーブル定義一覧
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/glossary.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    C 用語集
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_17" >
        
          
          <label class="md-nav__link" for="__nav_1_17" id="__nav_1_17_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    データベース
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_17">
            <span class="md-nav__icon md-icon"></span>
            
  
    データベース
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../assets/schemaspy-output/sms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SchemaSpy ER図（SMS）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="21api">第21章：API サービスの実装<a class="headerlink" href="#21api" title="Permanent link">&para;</a></h1>
<p>本章では、財務会計システムの API サービスを TDD で実装します。ヘキサゴナルアーキテクチャに基づき、勘定科目マスタ API、仕訳 API、残高照会 API を構築します。</p>
<h2 id="211">21.1 ヘキサゴナルアーキテクチャの復習<a class="headerlink" href="#211" title="Permanent link">&para;</a></h2>
<h3 id="2111-ports-and-adapters">21.1.1 Ports and Adapters パターンの概要<a class="headerlink" href="#2111-ports-and-adapters" title="Permanent link">&para;</a></h3>
<p>ヘキサゴナルアーキテクチャ（別名：Ports and Adapters パターン）は、ドメインロジックを外部の技術的関心事から分離するアーキテクチャパターンです。</p>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjU3NHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6Njg5cHg7aGVpZ2h0OjU3NHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDY4OSA1NzQiIHdpZHRoPSI2ODlweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMTI1MDQ7JiMxMjQ2MTsmIzEyNDY5OyYjMTI0Njg7JiMxMjQ5MDsmIzEyNTIzOyYjMTI0NTA7JiMxMjU0MDsmIzEyNDYxOyYjMTI0ODY7JiMxMjQ2MzsmIzEyNDgxOyYjMTI1MTU7PC90aXRsZT48ZGVmcy8+PGc+PGcgY2xhc3M9InRpdGxlIiBkYXRhLXNvdXJjZS1saW5lPSIxIj48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTgxLjk5OTIiIHg9IjI0Ni44ODcyIiB5PSIyMi45OTUxIj4mIzEyNTA0OyYjMTI0NjE7JiMxMjQ2OTsmIzEyNDY4OyYjMTI0OTA7JiMxMjUyMzsmIzEyNDUwOyYjMTI1NDA7JiMxMjQ2MTsmIzEyNDg2OyYjMTI0NjM7JiMxMjQ4MTsmIzEyNTE1OzwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgSW5mcmFzdHJ1Y3R1cmUgKE91dHNpZGUpLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkluZnJhc3RydWN0dXJlIC5PdXRzaWRlLiIgZGF0YS1zb3VyY2UtbGluZT0iOCIgaWQ9ImVudDAwMDIiPjxyZWN0IGZpbGw9IiNGNUY1RjUiIGhlaWdodD0iMTAzLjYiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI0MTkiIHg9IjE5MyIgeT0iNDQuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxODkuNzUyIiB4PSIzMDcuNjI0IiB5PSI1OS4yOTIiPkluZnJhc3RydWN0dXJlIChPdXRzaWRlKTwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgY29yZS0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLXF1YWxpZmllZC1uYW1lPSJjb3JlIiBkYXRhLXNvdXJjZS1saW5lPSIxNCIgaWQ9ImVudDAwMDYiPjxwYXRoIGQ9Ik02LDM4Ni4yODY5IEw1MC41LDIwNC44OTY5IEwzMTcuNSwyMDQuODk2OSBMMzYyLDM4Ni4yODY5IEwzMTcuNSw1NjcuNjc2OSBMNTAuNSw1NjcuNjc2OSBMNiwzODYuMjg2OSIgZmlsbD0iI0U4RjVFOSIgc3R5bGU9InN0cm9rZTojNENBRjUwO3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzAuNDYzOSIgeD0iMTE4Ljc2ODEiIHk9IjIxOS44OTIiPkFwcGxpY2F0aW9uIENvcmU8L3RleHQ+PC9nPjwhLS1lbnRpdHkgd2ViLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iSW5mcmFzdHJ1Y3R1cmUgLk91dHNpZGUuLndlYiIgZGF0YS1zb3VyY2UtbGluZT0iOSIgaWQ9ImVudDAwMDMiPjxyZWN0IGZpbGw9IiNCQkRFRkIiIGhlaWdodD0iNTIuNTkzOCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTExLjU4MTEiIHg9IjIwOS4yMSIgeT0iNzkuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjkxLjU4MTEiIHg9IjIxOS4yMSIgeT0iMTAyLjI5MiI+V2ViIEFkYXB0ZXI8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzMuNTM0MiIgeD0iMjE5LjIxIiB5PSIxMTguNTg4OSI+KFJFU1QgQVBJKTwvdGV4dD48L2c+PCEtLWVudGl0eSBkYi0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkluZnJhc3RydWN0dXJlIC5PdXRzaWRlLi5kYiIgZGF0YS1zb3VyY2UtbGluZT0iMTAiIGlkPSJlbnQwMDA0Ij48cmVjdCBmaWxsPSIjQkJERUZCIiBoZWlnaHQ9IjUyLjU5MzgiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEwMC42MjMiIHg9IjQ5NS42OSIgeT0iNzkuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgwLjYyMyIgeD0iNTA1LjY5IiB5PSIxMDIuMjkyIj5EQiBBZGFwdGVyPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY2LjE0NDUiIHg9IjUwNS42OSIgeT0iMTE4LjU4ODkiPihNeUJhdGlzKTwvdGV4dD48L2c+PCEtLWVudGl0eSBleHQtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJJbmZyYXN0cnVjdHVyZSAuT3V0c2lkZS4uZXh0IiBkYXRhLXNvdXJjZS1saW5lPSIxMSIgaWQ9ImVudDAwMDUiPjxyZWN0IGZpbGw9IiNCQkRFRkIiIGhlaWdodD0iNTIuNTkzOCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTA0LjkyOTciIHg9IjM1NS41NCIgeT0iNzkuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg0LjkyOTciIHg9IjM2NS41NCIgeT0iMTAyLjI5MiI+RXh0ZXJuYWwgQVBJPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY2LjkyMzYiIHg9IjM2NS41NCIgeT0iMTE4LjU4ODkiPigmIzIyODA2OyYjMzcwOTY7JiMzNjg5OTsmIzI1NjU4Oyk8L3RleHQ+PC9nPjwhLS1lbnRpdHkgZG9tYWluLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iY29yZS5kb21haW4iIGRhdGEtc291cmNlLWxpbmU9IjE1IiBpZD0iZW50MDAwNyI+PHJlY3QgZmlsbD0iI0M4RTZDOSIgaGVpZ2h0PSI1Mi41OTM4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNDIuOTIzMyIgeD0iMjkuNTQiIHk9IjQ5MS4wODY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTQuMzI1MiIgeD0iMzkuNTQiIHk9IjUxNC4wODIiPkRvbWFpbjwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjIuOTIzMyIgeD0iMzkuNTQiIHk9IjUzMC4zNzg5Ij4oJiMxMjQ5OTsmIzEyNDcyOyYjMTI0OTM7JiMxMjQ3MzsmIzEyNTI1OyYjMTI0NzI7JiMxMjQ4MzsmIzEyNDYzOyk8L3RleHQ+PC9nPjwhLS1lbnRpdHkgYXBwLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iY29yZS5hcHAiIGRhdGEtc291cmNlLWxpbmU9IjE2IiBpZD0iZW50MDAwOCI+PHJlY3QgZmlsbD0iI0M4RTZDOSIgaGVpZ2h0PSI1Mi41OTM4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMTQuOTIzNSIgeD0iMjA3LjU0IiB5PSIzNzcuNDg2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc4LjIyMzYiIHg9IjIxNy41NCIgeT0iNDAwLjQ4MiI+QXBwbGljYXRpb248L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTQuOTIzNSIgeD0iMjE3LjU0IiB5PSI0MTYuNzc4OSI+KCYjMTI1MTg7JiMxMjU0MDsmIzEyNDczOyYjMTI0NjU7JiMxMjU0MDsmIzEyNDczOyk8L3RleHQ+PC9nPjwhLS1lbnRpdHkgaW5wb3J0LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iY29yZS5pbnBvcnQiIGRhdGEtc291cmNlLWxpbmU9IjE4IiBpZD0iZW50MDAwOSI+PHJlY3QgZmlsbD0iI0ZGRjlDNCIgaGVpZ2h0PSI1Mi41OTM4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMDcuOTcxNyIgeD0iMjExLjAxIiB5PSIyNDcuODk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY4Ljk1NDEiIHg9IjIyMS4wMSIgeT0iMjcwLjg5MiI+SW5wdXQgUG9ydDwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4Ny45NzE3IiB4PSIyMjEuMDEiIHk9IjI4Ny4xODg5Ij4oVXNlQ2FzZSBJRik8L3RleHQ+PC9nPjwhLS1lbnRpdHkgb3V0cG9ydC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9ImNvcmUub3V0cG9ydCIgZGF0YS1zb3VyY2UtbGluZT0iMTkiIGlkPSJlbnQwMDEwIj48cmVjdCBmaWxsPSIjRkZGOUM0IiBoZWlnaHQ9IjUyLjU5MzgiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEyMi42Mjc5IiB4PSIyMDcuNjkiIHk9IjQ5MS4wODY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODEuMzM0IiB4PSIyMTcuNjkiIHk9IjUxNC4wODIiPk91dHB1dCBQb3J0PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwMi42Mjc5IiB4PSIyMTcuNjkiIHk9IjUzMC4zNzg5Ij4oUmVwb3NpdG9yeSBJRik8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkdNTjE3IiBkYXRhLXNvdXJjZS1saW5lPSIzMCIgaWQ9ImVudDAwMTgiPjxwYXRoIGQ9Ik0zODYsMzgzLjY1NjkgTDM4Niw0MjMuOTIyNSBMNTI0LjAwMDEsNDIzLjkyMjUgTDUyNC4wMDAxLDM5My42NTY5IEw1MTQuMDAwMSwzODMuNjU2OSBMMzg2LDM4My42NTY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNNTE0LjAwMDEsMzgzLjY1NjkgTDUxNC4wMDAxLDM5My42NTY5IEw1MjQuMDAwMSwzOTMuNjU2OSBMNTE0LjAwMDEsMzgzLjY1NjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTcuMDAwMSIgeD0iMzkyIiB5PSI0MDAuNzIzOCI+JiMxMjQ4OTsmIzEyNTEzOyYjMTI0NTI7JiMxMjUzMTsmIzEyNTI1OyYjMTI0NzI7JiMxMjQ4MzsmIzEyNDYzOyYjMTIzOTk7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwNC4wMDAxIiB4PSIzOTIiIHk9IjQxNS44NTY2Ij4mIzIyODA2OyYjMzcwOTY7JiMyNTIxNjsmIzM0ODk5OyYjMTIzNjM7JiMxMjQyNTsmIzI5NDIwOyYjMzE0MzU7PC90ZXh0PjwvZz48IS0tbGluayB3ZWIgdG8gaW5wb3J0LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDMiIGRhdGEtZW50aXR5LTI9ImVudDAwMDkiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSIyMiIgaWQ9ImxuazExIj48cGF0aCBkPSJNMjY1LDEzMi4yNjY5IEMyNjUsMTYzLjU2NjkgMjY1LDIxMC4xNzY5IDI2NSwyNDEuNDk2OSIgZmlsbD0ibm9uZSIgaWQ9IndlYi10by1pbnBvcnQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjI2NSwyNDcuNDk2OSwyNjksMjM4LjQ5NjksMjY1LDI0Mi40OTY5LDI2MSwyMzguNDk2OSwyNjUsMjQ3LjQ5NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2NC4yMzE5IiB4PSIyNjYiIHk9IjE3Ni45NjM4Ij5Db250cm9sbGVyPC90ZXh0PjwvZz48IS0tbGluayBpbnBvcnQgdG8gYXBwLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDkiIGRhdGEtZW50aXR5LTI9ImVudDAwMDgiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSIyMyIgaWQ9ImxuazEyIj48cGF0aCBkPSJNMjY1LDMwMC43MDY5IEMyNjUsMzIyLjk1NjkgMjY1LDM0OS4wNzY5IDI2NSwzNzEuMzE2OSIgZmlsbD0ibm9uZSIgaWQ9ImlucG9ydC10by1hcHAiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjI2NSwzNzcuMzE2OSwyNjksMzY4LjMxNjksMjY1LDM3Mi4zMTY5LDI2MSwzNjguMzE2OSwyNjUsMzc3LjMxNjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLWxpbmsgYXBwIHRvIGRvbWFpbi0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDA4IiBkYXRhLWVudGl0eS0yPSJlbnQwMDA3IiBkYXRhLWxpbmstdHlwZT0iZGVwZW5kZW5jeSIgZGF0YS1zb3VyY2UtbGluZT0iMjQiIGlkPSJsbmsxMyI+PHBhdGggZD0iTTIyNy4zOCw0MzAuMzg2OSBDMjAwLjgsNDQ4LjQ2NjkgMTcwLjI5MDUsNDY5LjIzMTUgMTQzLjY5MDUsNDg3LjMzMTUiIGZpbGw9Im5vbmUiIGlkPSJhcHAtdG8tZG9tYWluIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMzguNzMsNDkwLjcwNjksMTQ4LjQyMSw0ODguOTUwOCwxNDIuODYzOCw0ODcuODk0LDE0My45MjA1LDQ4Mi4zMzY4LDEzOC43Myw0OTAuNzA2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayBhcHAgdG8gb3V0cG9ydC0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDA4IiBkYXRhLWVudGl0eS0yPSJlbnQwMDEwIiBkYXRhLWxpbmstdHlwZT0iZGVwZW5kZW5jeSIgZGF0YS1zb3VyY2UtbGluZT0iMjUiIGlkPSJsbmsxNCI+PHBhdGggZD0iTTI2NS45Miw0MzAuMzg2OSBDMjY2LjU3LDQ0OC41MzY5IDI2Ny4yMjQ5LDQ2Ni43ODA3IDI2Ny44NzQ5LDQ4NC45MDA3IiBmaWxsPSJub25lIiBpZD0iYXBwLXRvLW91dHBvcnQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjI2OC4wOSw0OTAuODk2OSwyNzEuNzY0OCw0ODEuNzU5MywyNjcuOTEwOCw0ODUuOTAwMSwyNjMuNzY5OSw0ODIuMDQ2MSwyNjguMDksNDkwLjg5NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLWxpbmsgb3V0cG9ydCB0byBkYi0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDEwIiBkYXRhLWVudGl0eS0yPSJlbnQwMDA0IiBkYXRhLWxpbmstdHlwZT0iZGVwZW5kZW5jeSIgZGF0YS1zb3VyY2UtbGluZT0iMjYiIGlkPSJsbmsxNSI+PHBhdGggZD0iTTMzMC42MSw1MTYuMzE2OSBDMzk1LjA0LDUxMi41NDY5IDQ5My40MSw0OTUuNTQ2OSA1NDIsNDMwLjA4NjkgQzYwOS40NSwzMzkuMjA2OSA1NzQuOTk1NSwxOTYuNzAxOSA1NTYuNDk1NSwxMzcuNzExOSIgZmlsbD0ibm9uZSIgaWQ9Im91dHBvcnQtdG8tZGIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjU1NC43LDEzMS45ODY5LDU1My41NzY1LDE0MS43NzE0LDU1Ni4xOTYyLDEzNi43NTc4LDU2MS4yMDk5LDEzOS4zNzc1LDU1NC43LDEzMS45ODY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAyLjIwMzYiIHg9IjU3OS41NyIgeT0iMzQzLjU1MzgiPlJlcG9zaXRvcnkgSW1wbDwvdGV4dD48L2c+PCEtLWxpbmsgZXh0IHRvIGlucG9ydC0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDA1IiBkYXRhLWVudGl0eS0yPSJlbnQwMDA5IiBkYXRhLWxpbmstdHlwZT0iZGVwZW5kZW5jeSIgZGF0YS1zb3VyY2UtbGluZT0iMjciIGlkPSJsbmsxNiI+PHBhdGggZD0iTTM4OC4yMSwxMzIuMTk2OSBDMzc1LjM2LDE0Ny42NDY5IDM1Ny42LDE2Ni45NjY5IDMzOSwxODAuODk2OSBDMzMyLjY0LDE4NS42NjY5IDMyOSwxODMuNjc2OSAzMjMsMTg4Ljg5NjkgQzMwMy45NywyMDUuNDQ2OSAyOTEuMTQ2NSwyMjQuMzUwMiAyODAuODg2NSwyNDIuNTUwMiIgZmlsbD0ibm9uZSIgaWQ9ImV4dC10by1pbnBvcnQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjI3Ny45NCwyNDcuNzc2OSwyODUuODQ0MiwyNDEuOTAxMiwyODAuMzk1NCwyNDMuNDIxMywyNzguODc1MywyMzcuOTcyNSwyNzcuOTQsMjQ3Ljc3NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLWxpbmsgY29yZSB0byBHTU4xNy0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDA2IiBkYXRhLWVudGl0eS0yPSJlbnQwMDE4IiBkYXRhLWxpbmstdHlwZT0iYXNzb2NpYXRpb24iIGRhdGEtc291cmNlLWxpbmU9IjMwIiBpZD0ibG5rMTkiPjxwYXRoIGQ9Ik0zNjIuMTI5OSwyODUuNDY2NiBDMzYyLjIxMzcsMjg1LjU3MjUgMzYyLjI5ODEsMjg1LjY3OTEgMzYyLjM4MywyODUuNzg2NCBDMzYzLjA2MjMsMjg2LjY0NDUgMzYzLjc3NjQsMjg3LjU0NjUgMzY0LjUyMjcsMjg4LjQ4OTIgQzM3MC40OTI4LDI5Ni4wMzA5IDM3OC41MjU2LDMwNi4xNzg4IDM4Ny4zNTEzLDMxNy4zMjgxIEM0MDUuMDAyNSwzMzkuNjI2OSA0MjUuODI1LDM2NS45MzE5IDQzOS42NiwzODMuNDA2OSIgZmlsbD0ibm9uZSIgaWQ9ImNvcmUtR01OMTciIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjcsNzsiLz48L2c+PD9wbGFudHVtbC1zcmMgUlA1MVFuR241Q1ZsLUhIWHpyOEZYSHd3cWxLV3hDcEVtMXg0S1hLbE5oOHB3SmZxRFhhbzZUbVlHWlMxZUxxQUdhNnlyZk9ZcjU5NDFJai1jdVVqX0hRLXBFb2tBS1drQnlkX3p5X0JfLWJDdnZvMl9HM2MwaW50Q0RfMDdlMHoxX0NIeDJ6dFFELTJrR0d4MU5qMklCY0pZTzhmRGdPbC1PSURmQTJsSVMySWRQNkliS1gzY0tqNXN6NTZ0OGN3OTkwZ3ZNZi1qWHhzdWl1UVVLRTh1ZWJjT2VJbGpXUFlNeDVJZ29oSGJVOXF2TjZib29wYnpyZ3E3TlZTR2RURl9mbUZRSXpiWFVSZ1hMWlBZZnV5ZlJ0RDBRZlBJTF9YTkppOC1iNFMtNFdfeThYN2ttN0pNVGEwd05fcnFHSWJXa05FNjhkVmYtemx4UVZSbFBGaFRweVJaNF9xYWlGRkI1OWV6T2VZcG5BcW5xcWU1UV81MkhQdGx6Mk5Pdk85VDBQeDFFTzdzNENtTHMwbHdqZllxRkZjUVhialhubEhfUjNoNnRabHIydmR6UElrbTduZlllUGRIUjY0eG1QVUw5ZmtJZ0tIVmJSb2E5TVMzazg2bWlkWTFLT1ZuenJtdFNUbUJYd3RuR2pQUGJnZ3RJS2dLVTJwYzhtUm9FaGdtdU5oMHFuNVEyTnBkMmlvRnRGTnMyYm50Umd3LVZMb0VwU2IyX0RRQ2FHZGx1NW5hSEN0YXR6RjRJQWF2ZEdlalBQWkFoVmhBSDJtLXMyRm1QbzJfVWhkM1REQnFhcHYtYzNscF80SEo2VFd6Y3pjZHNfRVB1SUJiM2dwbG0wMD8+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<h3 id="2112">21.1.2 ドメイン中心設計<a class="headerlink" href="#2112" title="Permanent link">&para;</a></h3>
<p>ヘキサゴナルアーキテクチャでは、ドメインロジックがアプリケーションの中心に位置します。外部の技術（Web フレームワーク、データベース、外部 API）は周辺に配置され、ドメインに依存します。</p>
<h3 id="2113">21.1.3 依存性の逆転<a class="headerlink" href="#2113" title="Permanent link">&para;</a></h3>
<p>依存性の方向は常に外側から内側（ドメイン）に向かいます。Output Port（リポジトリインターフェース）を使用することで、ドメインがインフラストラクチャに依存しない設計を実現します。</p>
<h3 id="2114">21.1.4 テスト容易性<a class="headerlink" href="#2114" title="Permanent link">&para;</a></h3>
<p>アーキテクチャの利点をまとめます。</p>
<table>
<thead>
<tr>
<th>利点</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>テスト容易性</strong></td>
<td>ドメインロジックを単独でテスト可能</td>
</tr>
<tr>
<td><strong>技術独立性</strong></td>
<td>DB、フレームワークの変更が容易</td>
</tr>
<tr>
<td><strong>可読性</strong></td>
<td>責務が明確に分離される</td>
</tr>
<tr>
<td><strong>保守性</strong></td>
<td>変更の影響範囲が限定される</td>
</tr>
</tbody>
</table>
<h2 id="212">21.2 アーキテクチャ構造<a class="headerlink" href="#212" title="Permanent link">&para;</a></h2>
<h3 id="2121">21.2.1 パッケージ構成<a class="headerlink" href="#2121" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9Ijc4NHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MjYzNHB4O2hlaWdodDo3ODRweDtiYWNrZ3JvdW5kOiNGRkZGRkY7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAyNjM0IDc4NCIgd2lkdGg9IjI2MzRweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMTI0OTc7JiMxMjQ4MzsmIzEyNDY1OyYjMTI1NDA7JiMxMjQ3MjsmIzI3MDgzOyYjMjUxMDQ7PC90aXRsZT48ZGVmcy8+PGc+PGcgY2xhc3M9InRpdGxlIiBkYXRhLXNvdXJjZS1saW5lPSIxIj48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTcuOTk5NiIgeD0iMTI2MS4wMDAyIiB5PSIyMi45OTUxIj4mIzEyNDk3OyYjMTI0ODM7JiMxMjQ2NTsmIzEyNTQwOyYjMTI0NzI7JiMyNzA4MzsmIzI1MTA0OzwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgY29tLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9ImNvbSIgZGF0YS1zb3VyY2UtbGluZT0iNyIgaWQ9ImVudDAwMDYiPjxwYXRoIGQ9Ik04LjUsNDMuMjk2OSBMNDIuMDA0OSw0My4yOTY5IEEzLjc1LDMuNzUgMCAwIDEgNDQuNTA0OSw0NS43OTY5IEw1MS41MDQ5LDY1LjU5MzggTDI2MjQuNSw2NS41OTM4IEEyLjUsMi41IDAgMCAxIDI2MjcsNjguMDkzOCBMMjYyNyw3NzQuNzk2OSBBMi41LDIuNSAwIDAgMSAyNjI0LjUsNzc3LjI5NjkgTDguNSw3NzcuMjk2OSBBMi41LDIuNSAwIDAgMSA2LDc3NC43OTY5IEw2LDQ1Ljc5NjkgQTIuNSwyLjUgMCAwIDEgOC41LDQzLjI5NjkiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjYiIHgyPSI1MS41MDQ5IiB5MT0iNjUuNTkzOCIgeTI9IjY1LjU5MzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzIuNTA0OSIgeD0iMTAiIHk9IjU4LjI5MiI+Y29tPC90ZXh0PjwvZz48IS0tY2x1c3RlciBleGFtcGxlLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9ImNvbS5leGFtcGxlIiBkYXRhLXNvdXJjZS1saW5lPSI3IiBpZD0iZW50MDAwNyI+PHBhdGggZD0iTTMyLjUsODYuMjk2OSBMMTAwLjM3Niw4Ni4yOTY5IEEzLjc1LDMuNzUgMCAwIDEgMTAyLjg3Niw4OC43OTY5IEwxMDkuODc2LDEwOC41OTM4IEwyNjAwLjUsMTA4LjU5MzggQTIuNSwyLjUgMCAwIDEgMjYwMywxMTEuMDkzOCBMMjYwMyw3NTAuNzk2OSBBMi41LDIuNSAwIDAgMSAyNjAwLjUsNzUzLjI5NjkgTDMyLjUsNzUzLjI5NjkgQTIuNSwyLjUgMCAwIDEgMzAsNzUwLjc5NjkgTDMwLDg4Ljc5NjkgQTIuNSwyLjUgMCAwIDEgMzIuNSw4Ni4yOTY5IiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHgxPSIzMCIgeDI9IjEwOS44NzYiIHkxPSIxMDguNTkzOCIgeTI9IjEwOC41OTM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY2Ljg3NiIgeD0iMzQiIHk9IjEwMS4yOTIiPmV4YW1wbGU8L3RleHQ+PC9nPjwhLS1jbHVzdGVyIGFjY291bnRpbmctLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iY29tLmV4YW1wbGUuYWNjb3VudGluZyIgZGF0YS1zb3VyY2UtbGluZT0iMyIgaWQ9ImVudDAwMDIiPjxwYXRoIGQ9Ik01Ni41LDEyOS4yOTY5IEwxNDQuNTc2MiwxMjkuMjk2OSBBMy43NSwzLjc1IDAgMCAxIDE0Ny4wNzYyLDEzMS43OTY5IEwxNTQuMDc2MiwxNTEuNTkzOCBMMjU3Ni41LDE1MS41OTM4IEEyLjUsMi41IDAgMCAxIDI1NzksMTU0LjA5MzggTDI1NzksNzI2Ljc5NjkgQTIuNSwyLjUgMCAwIDEgMjU3Ni41LDcyOS4yOTY5IEw1Ni41LDcyOS4yOTY5IEEyLjUsMi41IDAgMCAxIDU0LDcyNi43OTY5IEw1NCwxMzEuNzk2OSBBMi41LDIuNSAwIDAgMSA1Ni41LDEyOS4yOTY5IiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHgxPSI1NCIgeDI9IjE1NC4wNzYyIiB5MT0iMTUxLjU5MzgiIHkyPSIxNTEuNTkzOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4Ny4wNzYyIiB4PSI1OCIgeT0iMTQ0LjI5MiI+YWNjb3VudGluZzwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgZG9tYWluLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9ImNvbS5leGFtcGxlLmFjY291bnRpbmcuZG9tYWluIiBkYXRhLXNvdXJjZS1saW5lPSI1IiBpZD0iZW50MDAwMyI+PHBhdGggZD0iTTgwLjUsMjE1LjI5NjkgTDEzOS45NDA0LDIxNS4yOTY5IEEzLjc1LDMuNzUgMCAwIDEgMTQyLjQ0MDQsMjE3Ljc5NjkgTDE0OS40NDA0LDIzNy41OTM4IEw2MDEuNSwyMzcuNTkzOCBBMi41LDIuNSAwIDAgMSA2MDQsMjQwLjA5MzggTDYwNCw2NTQuNzk2OSBBMi41LDIuNSAwIDAgMSA2MDEuNSw2NTcuMjk2OSBMODAuNSw2NTcuMjk2OSBBMi41LDIuNSAwIDAgMSA3OCw2NTQuNzk2OSBMNzgsMjE3Ljc5NjkgQTIuNSwyLjUgMCAwIDEgODAuNSwyMTUuMjk2OSIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB4MT0iNzgiIHgyPSIxNDkuNDQwNCIgeTE9IjIzNy41OTM4IiB5Mj0iMjM3LjU5MzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTguNDQwNCIgeD0iODIiIHk9IjIzMC4yOTIiPmRvbWFpbjwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgbW9kZWwtLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iY29tLmV4YW1wbGUuYWNjb3VudGluZy5kb21haW4ubW9kZWwiIGRhdGEtc291cmNlLWxpbmU9IjYiIGlkPSJlbnQwMDA0Ij48cGF0aCBkPSJNMTA0LjUsMjU4LjI5NjkgTDE1NC4wMjE1LDI1OC4yOTY5IEEzLjc1LDMuNzUgMCAwIDEgMTU2LjUyMTUsMjYwLjc5NjkgTDE2My41MjE1LDI4MC41OTM4IEwzMzUuNSwyODAuNTkzOCBBMi41LDIuNSAwIDAgMSAzMzgsMjgzLjA5MzggTDMzOCw2MzAuNzk2OSBBMi41LDIuNSAwIDAgMSAzMzUuNSw2MzMuMjk2OSBMMTA0LjUsNjMzLjI5NjkgQTIuNSwyLjUgMCAwIDEgMTAyLDYzMC43OTY5IEwxMDIsMjYwLjc5NjkgQTIuNSwyLjUgMCAwIDEgMTA0LjUsMjU4LjI5NjkiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjEwMiIgeDI9IjE2My41MjE1IiB5MT0iMjgwLjU5MzgiIHkyPSIyODAuNTkzOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0OC41MjE1IiB4PSIxMDYiIHk9IjI3My4yOTIiPm1vZGVsPC90ZXh0PjwvZz48IS0tY2x1c3RlciBzZXJ2aWNlLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9ImNvbS5leGFtcGxlLmFjY291bnRpbmcuZG9tYWluLnNlcnZpY2UiIGRhdGEtc291cmNlLWxpbmU9IjExIiBpZD0iZW50MDAxMCI+PHBhdGggZD0iTTM2NC41LDI1OC4yOTY5IEw0MjEuOTUxMiwyNTguMjk2OSBBMy43NSwzLjc1IDAgMCAxIDQyNC40NTEyLDI2MC43OTY5IEw0MzEuNDUxMiwyODAuNTkzOCBMNTc3LjUsMjgwLjU5MzggQTIuNSwyLjUgMCAwIDEgNTgwLDI4My4wOTM4IEw1ODAsMzU0Ljc5NjkgQTIuNSwyLjUgMCAwIDEgNTc3LjUsMzU3LjI5NjkgTDM2NC41LDM1Ny4yOTY5IEEyLjUsMi41IDAgMCAxIDM2MiwzNTQuNzk2OSBMMzYyLDI2MC43OTY5IEEyLjUsMi41IDAgMCAxIDM2NC41LDI1OC4yOTY5IiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHgxPSIzNjIiIHgyPSI0MzEuNDUxMiIgeTE9IjI4MC41OTM4IiB5Mj0iMjgwLjU5MzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTYuNDUxMiIgeD0iMzY2IiB5PSIyNzMuMjkyIj5zZXJ2aWNlPC90ZXh0PjwvZz48IS0tY2x1c3RlciBhcHBsaWNhdGlvbi0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLXF1YWxpZmllZC1uYW1lPSJjb20uZXhhbXBsZS5hY2NvdW50aW5nLmFwcGxpY2F0aW9uIiBkYXRhLXNvdXJjZS1saW5lPSIxNiIgaWQ9ImVudDAwMTIiPjxwYXRoIGQ9Ik02MzAuNSwxNzIuMjk2OSBMNzE5LjQxMDIsMTcyLjI5NjkgQTMuNzUsMy43NSAwIDAgMSA3MjEuOTEwMiwxNzQuNzk2OSBMNzI4LjkxMDIsMTk0LjU5MzggTDE0OTAuNSwxOTQuNTkzOCBBMi41LDIuNSAwIDAgMSAxNDkzLDE5Ny4wOTM4IEwxNDkzLDY1NC43OTY5IEEyLjUsMi41IDAgMCAxIDE0OTAuNSw2NTcuMjk2OSBMNjMwLjUsNjU3LjI5NjkgQTIuNSwyLjUgMCAwIDEgNjI4LDY1NC43OTY5IEw2MjgsMTc0Ljc5NjkgQTIuNSwyLjUgMCAwIDEgNjMwLjUsMTcyLjI5NjkiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjYyOCIgeDI9IjcyOC45MTAyIiB5MT0iMTk0LjU5MzgiIHkyPSIxOTQuNTkzOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4Ny45MTAyIiB4PSI2MzIiIHk9IjE4Ny4yOTIiPmFwcGxpY2F0aW9uPC90ZXh0PjwvZz48IS0tY2x1c3RlciBwb3J0LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9ImNvbS5leGFtcGxlLmFjY291bnRpbmcuYXBwbGljYXRpb24ucG9ydCIgZGF0YS1zb3VyY2UtbGluZT0iMTgiIGlkPSJlbnQwMDE1Ij48cGF0aCBkPSJNNjU0LjUsMjE1LjI5NjkgTDY4OC43MzYzLDIxNS4yOTY5IEEzLjc1LDMuNzUgMCAwIDEgNjkxLjIzNjMsMjE3Ljc5NjkgTDY5OC4yMzYzLDIzNy41OTM4IEwxNDY2LjUsMjM3LjU5MzggQTIuNSwyLjUgMCAwIDEgMTQ2OSwyNDAuMDkzOCBMMTQ2OSwzNzguNzk2OSBBMi41LDIuNSAwIDAgMSAxNDY2LjUsMzgxLjI5NjkgTDY1NC41LDM4MS4yOTY5IEEyLjUsMi41IDAgMCAxIDY1MiwzNzguNzk2OSBMNjUyLDIxNy43OTY5IEEyLjUsMi41IDAgMCAxIDY1NC41LDIxNS4yOTY5IiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHgxPSI2NTIiIHgyPSI2OTguMjM2MyIgeTE9IjIzNy41OTM4IiB5Mj0iMjM3LjU5MzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzMuMjM2MyIgeD0iNjU2IiB5PSIyMzAuMjkyIj5wb3J0PC90ZXh0PjwvZz48IS0tY2x1c3RlciBpbi0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLXF1YWxpZmllZC1uYW1lPSJjb20uZXhhbXBsZS5hY2NvdW50aW5nLmFwcGxpY2F0aW9uLnBvcnQuaW4iIGRhdGEtc291cmNlLWxpbmU9IjE3IiBpZD0iZW50MDAxMyI+PHBhdGggZD0iTTY3OC41LDI1OC4yOTY5IEw2OTQuMjY1NiwyNTguMjk2OSBBMy43NSwzLjc1IDAgMCAxIDY5Ni43NjU2LDI2MC43OTY5IEw3MDMuNzY1NiwyODAuNTkzOCBMMTAzMS41LDI4MC41OTM4IEEyLjUsMi41IDAgMCAxIDEwMzQsMjgzLjA5MzggTDEwMzQsMzU0Ljc5NjkgQTIuNSwyLjUgMCAwIDEgMTAzMS41LDM1Ny4yOTY5IEw2NzguNSwzNTcuMjk2OSBBMi41LDIuNSAwIDAgMSA2NzYsMzU0Ljc5NjkgTDY3NiwyNjAuNzk2OSBBMi41LDIuNSAwIDAgMSA2NzguNSwyNTguMjk2OSIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB4MT0iNjc2IiB4Mj0iNzAzLjc2NTYiIHkxPSIyODAuNTkzOCIgeTI9IjI4MC41OTM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0Ljc2NTYiIHg9IjY4MCIgeT0iMjczLjI5MiI+aW48L3RleHQ+PC9nPjwhLS1jbHVzdGVyIG91dC0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLXF1YWxpZmllZC1uYW1lPSJjb20uZXhhbXBsZS5hY2NvdW50aW5nLmFwcGxpY2F0aW9uLnBvcnQub3V0IiBkYXRhLXNvdXJjZS1saW5lPSIyMSIgaWQ9ImVudDAwMTciPjxwYXRoIGQ9Ik0xMDYwLjUsMjU4LjI5NjkgTDEwODcuNzc3MywyNTguMjk2OSBBMy43NSwzLjc1IDAgMCAxIDEwOTAuMjc3MywyNjAuNzk2OSBMMTA5Ny4yNzczLDI4MC41OTM4IEwxNDQyLjUsMjgwLjU5MzggQTIuNSwyLjUgMCAwIDEgMTQ0NSwyODMuMDkzOCBMMTQ0NSwzNTQuNzk2OSBBMi41LDIuNSAwIDAgMSAxNDQyLjUsMzU3LjI5NjkgTDEwNjAuNSwzNTcuMjk2OSBBMi41LDIuNSAwIDAgMSAxMDU4LDM1NC43OTY5IEwxMDU4LDI2MC43OTY5IEEyLjUsMi41IDAgMCAxIDEwNjAuNSwyNTguMjk2OSIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB4MT0iMTA1OCIgeDI9IjEwOTcuMjc3MyIgeTE9IjI4MC41OTM4IiB5Mj0iMjgwLjU5MzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjYuMjc3MyIgeD0iMTA2MiIgeT0iMjczLjI5MiI+b3V0PC90ZXh0PjwvZz48IS0tY2x1c3RlciBzZXJ2aWNlLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9ImNvbS5leGFtcGxlLmFjY291bnRpbmcuYXBwbGljYXRpb24uc2VydmljZSIgZGF0YS1zb3VyY2UtbGluZT0iMjUiIGlkPSJlbnQwMDIwIj48cGF0aCBkPSJNODE0LjUsNTM0LjI5NjkgTDg3MS45NTEyLDUzNC4yOTY5IEEzLjc1LDMuNzUgMCAwIDEgODc0LjQ1MTIsNTM2Ljc5NjkgTDg4MS40NTEyLDU1Ni41OTM4IEwxMzA1LjUsNTU2LjU5MzggQTIuNSwyLjUgMCAwIDEgMTMwOCw1NTkuMDkzOCBMMTMwOCw2MzAuNzk2OSBBMi41LDIuNSAwIDAgMSAxMzA1LjUsNjMzLjI5NjkgTDgxNC41LDYzMy4yOTY5IEEyLjUsMi41IDAgMCAxIDgxMiw2MzAuNzk2OSBMODEyLDUzNi43OTY5IEEyLjUsMi41IDAgMCAxIDgxNC41LDUzNC4yOTY5IiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHgxPSI4MTIiIHgyPSI4ODEuNDUxMiIgeTE9IjU1Ni41OTM4IiB5Mj0iNTU2LjU5MzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTYuNDUxMiIgeD0iODE2IiB5PSI1NDkuMjkyIj5zZXJ2aWNlPC90ZXh0PjwvZz48IS0tY2x1c3RlciBpbmZyYXN0cnVjdHVyZS0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLXF1YWxpZmllZC1uYW1lPSJjb20uZXhhbXBsZS5hY2NvdW50aW5nLmluZnJhc3RydWN0dXJlIiBkYXRhLXNvdXJjZS1saW5lPSIzMSIgaWQ9ImVudDAwMjMiPjxwYXRoIGQ9Ik0xNTE5LjUsNDA1LjI5NjkgTDE2MzAuOTYxOSw0MDUuMjk2OSBBMy43NSwzLjc1IDAgMCAxIDE2MzMuNDYxOSw0MDcuNzk2OSBMMTY0MC40NjE5LDQyNy41OTM4IEwyNTUyLjUsNDI3LjU5MzggQTIuNSwyLjUgMCAwIDEgMjU1NSw0MzAuMDkzOCBMMjU1NSw3MDIuNzk2OSBBMi41LDIuNSAwIDAgMSAyNTUyLjUsNzA1LjI5NjkgTDE1MTkuNSw3MDUuMjk2OSBBMi41LDIuNSAwIDAgMSAxNTE3LDcwMi43OTY5IEwxNTE3LDQwNy43OTY5IEEyLjUsMi41IDAgMCAxIDE1MTkuNSw0MDUuMjk2OSIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB4MT0iMTUxNyIgeDI9IjE2NDAuNDYxOSIgeTE9IjQyNy41OTM4IiB5Mj0iNDI3LjU5MzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTEwLjQ2MTkiIHg9IjE1MjEiIHk9IjQyMC4yOTIiPmluZnJhc3RydWN0dXJlPC90ZXh0PjwvZz48IS0tY2x1c3RlciBhZGFwdGVyLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9ImNvbS5leGFtcGxlLmFjY291bnRpbmcuaW5mcmFzdHJ1Y3R1cmUuYWRhcHRlciIgZGF0YS1zb3VyY2UtbGluZT0iMzMiIGlkPSJlbnQwMDI2Ij48cGF0aCBkPSJNMTU0My41LDQ0OC4yOTY5IEwxNjA2LjUyOTMsNDQ4LjI5NjkgQTMuNzUsMy43NSAwIDAgMSAxNjA5LjAyOTMsNDUwLjc5NjkgTDE2MTYuMDI5Myw0NzAuNTkzOCBMMjUyOC41LDQ3MC41OTM4IEEyLjUsMi41IDAgMCAxIDI1MzEsNDczLjA5MzggTDI1MzEsNjc4Ljc5NjkgQTIuNSwyLjUgMCAwIDEgMjUyOC41LDY4MS4yOTY5IEwxNTQzLjUsNjgxLjI5NjkgQTIuNSwyLjUgMCAwIDEgMTU0MSw2NzguNzk2OSBMMTU0MSw0NTAuNzk2OSBBMi41LDIuNSAwIDAgMSAxNTQzLjUsNDQ4LjI5NjkiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjE1NDEiIHgyPSIxNjE2LjAyOTMiIHkxPSI0NzAuNTkzOCIgeTI9IjQ3MC41OTM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYyLjAyOTMiIHg9IjE1NDUiIHk9IjQ2My4yOTIiPmFkYXB0ZXI8L3RleHQ+PC9nPjwhLS1jbHVzdGVyIGluLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9ImNvbS5leGFtcGxlLmFjY291bnRpbmcuaW5mcmFzdHJ1Y3R1cmUuYWRhcHRlci5pbiIgZGF0YS1zb3VyY2UtbGluZT0iMzMiIGlkPSJlbnQwMDI3Ij48cGF0aCBkPSJNMTU2Ny41LDQ5MS4yOTY5IEwxNTgzLjI2NTYsNDkxLjI5NjkgQTMuNzUsMy43NSAwIDAgMSAxNTg1Ljc2NTYsNDkzLjc5NjkgTDE1OTIuNzY1Niw1MTMuNTkzOCBMMTk4NS41LDUxMy41OTM4IEEyLjUsMi41IDAgMCAxIDE5ODgsNTE2LjA5MzggTDE5ODgsNjU0Ljc5NjkgQTIuNSwyLjUgMCAwIDEgMTk4NS41LDY1Ny4yOTY5IEwxNTY3LjUsNjU3LjI5NjkgQTIuNSwyLjUgMCAwIDEgMTU2NSw2NTQuNzk2OSBMMTU2NSw0OTMuNzk2OSBBMi41LDIuNSAwIDAgMSAxNTY3LjUsNDkxLjI5NjkiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjE1NjUiIHgyPSIxNTkyLjc2NTYiIHkxPSI1MTMuNTkzOCIgeTI9IjUxMy41OTM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0Ljc2NTYiIHg9IjE1NjkiIHk9IjUwNi4yOTIiPmluPC90ZXh0PjwvZz48IS0tY2x1c3RlciB3ZWItLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iY29tLmV4YW1wbGUuYWNjb3VudGluZy5pbmZyYXN0cnVjdHVyZS5hZGFwdGVyLmluLndlYiIgZGF0YS1zb3VyY2UtbGluZT0iMzIiIGlkPSJlbnQwMDI0Ij48cGF0aCBkPSJNMTU5MS41LDUzNC4yOTY5IEwxNjI0Ljk1MDIsNTM0LjI5NjkgQTMuNzUsMy43NSAwIDAgMSAxNjI3LjQ1MDIsNTM2Ljc5NjkgTDE2MzQuNDUwMiw1NTYuNTkzOCBMMTk2MS41LDU1Ni41OTM4IEEyLjUsMi41IDAgMCAxIDE5NjQsNTU5LjA5MzggTDE5NjQsNjMwLjc5NjkgQTIuNSwyLjUgMCAwIDEgMTk2MS41LDYzMy4yOTY5IEwxNTkxLjUsNjMzLjI5NjkgQTIuNSwyLjUgMCAwIDEgMTU4OSw2MzAuNzk2OSBMMTU4OSw1MzYuNzk2OSBBMi41LDIuNSAwIDAgMSAxNTkxLjUsNTM0LjI5NjkiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjE1ODkiIHgyPSIxNjM0LjQ1MDIiIHkxPSI1NTYuNTkzOCIgeTI9IjU1Ni41OTM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjMyLjQ1MDIiIHg9IjE1OTMiIHk9IjU0OS4yOTIiPndlYjwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgb3V0LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9ImNvbS5leGFtcGxlLmFjY291bnRpbmcuaW5mcmFzdHJ1Y3R1cmUuYWRhcHRlci5vdXQiIGRhdGEtc291cmNlLWxpbmU9IjM3IiBpZD0iZW50MDAzMSI+PHBhdGggZD0iTTIwMTQuNSw0OTEuMjk2OSBMMjA0MS43NzczLDQ5MS4yOTY5IEEzLjc1LDMuNzUgMCAwIDEgMjA0NC4yNzczLDQ5My43OTY5IEwyMDUxLjI3NzMsNTEzLjU5MzggTDI1MDQuNSw1MTMuNTkzOCBBMi41LDIuNSAwIDAgMSAyNTA3LDUxNi4wOTM4IEwyNTA3LDY1NC43OTY5IEEyLjUsMi41IDAgMCAxIDI1MDQuNSw2NTcuMjk2OSBMMjAxNC41LDY1Ny4yOTY5IEEyLjUsMi41IDAgMCAxIDIwMTIsNjU0Ljc5NjkgTDIwMTIsNDkzLjc5NjkgQTIuNSwyLjUgMCAwIDEgMjAxNC41LDQ5MS4yOTY5IiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHgxPSIyMDEyIiB4Mj0iMjA1MS4yNzczIiB5MT0iNTEzLjU5MzgiIHkyPSI1MTMuNTkzOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNi4yNzczIiB4PSIyMDE2IiB5PSI1MDYuMjkyIj5vdXQ8L3RleHQ+PC9nPjwhLS1jbHVzdGVyIHBlcnNpc3RlbmNlLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9ImNvbS5leGFtcGxlLmFjY291bnRpbmcuaW5mcmFzdHJ1Y3R1cmUuYWRhcHRlci5vdXQucGVyc2lzdGVuY2UiIGRhdGEtc291cmNlLWxpbmU9IjM2IiBpZD0iZW50MDAyOSI+PHBhdGggZD0iTTIwMzguNSw1MzQuMjk2OSBMMjEzMS4zMzQsNTM0LjI5NjkgQTMuNzUsMy43NSAwIDAgMSAyMTMzLjgzNCw1MzYuNzk2OSBMMjE0MC44MzQsNTU2LjU5MzggTDI0ODAuNSw1NTYuNTkzOCBBMi41LDIuNSAwIDAgMSAyNDgzLDU1OS4wOTM4IEwyNDgzLDYzMC43OTY5IEEyLjUsMi41IDAgMCAxIDI0ODAuNSw2MzMuMjk2OSBMMjAzOC41LDYzMy4yOTY5IEEyLjUsMi41IDAgMCAxIDIwMzYsNjMwLjc5NjkgTDIwMzYsNTM2Ljc5NjkgQTIuNSwyLjUgMCAwIDEgMjAzOC41LDUzNC4yOTY5IiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHgxPSIyMDM2IiB4Mj0iMjE0MC44MzQiIHkxPSI1NTYuNTkzOCIgeTI9IjU1Ni41OTM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjkxLjgzNCIgeD0iMjA0MCIgeT0iNTQ5LjI5MiI+cGVyc2lzdGVuY2U8L3RleHQ+PC9nPjwhLS1jbGFzcyBBY2NvdW50LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iY29tLmV4YW1wbGUuYWNjb3VudGluZy5kb21haW4ubW9kZWwuQWNjb3VudCIgZGF0YS1zb3VyY2UtbGluZT0iNyIgaWQ9ImVudDAwMDUiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNDgiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9Ijg4Ljc3MjUiIHg9IjExNy42MSIgeT0iMjkzLjI5NjkiLz48ZWxsaXBzZSBjeD0iMTMyLjYxIiBjeT0iMzA5LjI5NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTEzNS41Nzg4LDMxNC45Mzc1IFExMzUuMDAwNiwzMTUuMjM0NCAxMzQuMzYsMzE1LjM3NSBRMTMzLjcxOTQsMzE1LjUzMTMgMTMzLjAxNjMsMzE1LjUzMTMgUTEzMC41MTYzLDMxNS41MzEzIDEyOS4xODgxLDMxMy44OTA2IFExMjcuODc1NiwzMTIuMjM0NCAxMjcuODc1NiwzMDkuMTA5NCBRMTI3Ljg3NTYsMzA1Ljk4NDQgMTI5LjE4ODEsMzA0LjMyODEgUTEzMC41MTYzLDMwMi42NzE5IDEzMy4wMTYzLDMwMi42NzE5IFExMzMuNzE5NCwzMDIuNjcxOSAxMzQuMzYsMzAyLjgyODEgUTEzNS4wMTYzLDMwMi45ODQ0IDEzNS41Nzg4LDMwMy4yODEzIEwxMzUuNTc4OCwzMDYgUTEzNC45NTM4LDMwNS40MjE5IDEzNC4zNiwzMDUuMTU2MyBRMTMzLjc2NjMsMzA0Ljg3NSAxMzMuMTQxMywzMDQuODc1IFExMzEuNzk3NSwzMDQuODc1IDEzMS4xMSwzMDUuOTUzMSBRMTMwLjQyMjUsMzA3LjAxNTYgMTMwLjQyMjUsMzA5LjEwOTQgUTEzMC40MjI1LDMxMS4yMDMxIDEzMS4xMSwzMTIuMjgxMyBRMTMxLjc5NzUsMzEzLjM0MzggMTMzLjE0MTMsMzEzLjM0MzggUTEzMy43NjYzLDMxMy4zNDM4IDEzNC4zNiwzMTMuMDc4MSBRMTM0Ljk1MzgsMzEyLjc5NjkgMTM1LjU3ODgsMzEyLjIxODggTDEzNS41Nzg4LDMxNC45Mzc1IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTYuNzcyNSIgeD0iMTQ2LjYxIiB5PSIzMTQuMTQzNiI+QWNjb3VudDwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxMTguNjEiIHgyPSIyMDUuMzgyNSIgeTE9IjMyNS4yOTY5IiB5Mj0iMzI1LjI5NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxMTguNjEiIHgyPSIyMDUuMzgyNSIgeTE9IjMzMy4yOTY5IiB5Mj0iMzMzLjI5NjkiLz48L2c+PCEtLWNsYXNzIEpvdXJuYWwtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJjb20uZXhhbXBsZS5hY2NvdW50aW5nLmRvbWFpbi5tb2RlbC5Kb3VybmFsIiBkYXRhLXNvdXJjZS1saW5lPSI4IiBpZD0iZW50MDAwOCI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI0OCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iODAuNjY1IiB4PSIyNDEuNjciIHk9IjI5My4yOTY5Ii8+PGVsbGlwc2UgY3g9IjI1Ni42NyIgY3k9IjMwOS4yOTY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0yNTkuNjM4NywzMTQuOTM3NSBRMjU5LjA2MDYsMzE1LjIzNDQgMjU4LjQyLDMxNS4zNzUgUTI1Ny43Nzk0LDMxNS41MzEzIDI1Ny4wNzYyLDMxNS41MzEzIFEyNTQuNTc2MiwzMTUuNTMxMyAyNTMuMjQ4MSwzMTMuODkwNiBRMjUxLjkzNTYsMzEyLjIzNDQgMjUxLjkzNTYsMzA5LjEwOTQgUTI1MS45MzU2LDMwNS45ODQ0IDI1My4yNDgxLDMwNC4zMjgxIFEyNTQuNTc2MiwzMDIuNjcxOSAyNTcuMDc2MiwzMDIuNjcxOSBRMjU3Ljc3OTQsMzAyLjY3MTkgMjU4LjQyLDMwMi44MjgxIFEyNTkuMDc2MiwzMDIuOTg0NCAyNTkuNjM4NywzMDMuMjgxMyBMMjU5LjYzODcsMzA2IFEyNTkuMDEzNywzMDUuNDIxOSAyNTguNDIsMzA1LjE1NjMgUTI1Ny44MjYyLDMwNC44NzUgMjU3LjIwMTIsMzA0Ljg3NSBRMjU1Ljg1NzUsMzA0Ljg3NSAyNTUuMTcsMzA1Ljk1MzEgUTI1NC40ODI1LDMwNy4wMTU2IDI1NC40ODI1LDMwOS4xMDk0IFEyNTQuNDgyNSwzMTEuMjAzMSAyNTUuMTcsMzEyLjI4MTMgUTI1NS44NTc1LDMxMy4zNDM4IDI1Ny4yMDEyLDMxMy4zNDM4IFEyNTcuODI2MiwzMTMuMzQzOCAyNTguNDIsMzEzLjA3ODEgUTI1OS4wMTM3LDMxMi43OTY5IDI1OS42Mzg3LDMxMi4yMTg4IEwyNTkuNjM4NywzMTQuOTM3NSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ4LjY2NSIgeD0iMjcwLjY3IiB5PSIzMTQuMTQzNiI+Sm91cm5hbDwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyNDIuNjciIHgyPSIzMjEuMzM1IiB5MT0iMzI1LjI5NjkiIHkyPSIzMjUuMjk2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjI0Mi42NyIgeDI9IjMyMS4zMzUiIHkxPSIzMzMuMjk2OSIgeTI9IjMzMy4yOTY5Ii8+PC9nPjwhLS1jbGFzcyBCYWxhbmNlLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iY29tLmV4YW1wbGUuYWNjb3VudGluZy5kb21haW4ubW9kZWwuQmFsYW5jZSIgZGF0YS1zb3VyY2UtbGluZT0iOSIgaWQ9ImVudDAwMDkiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNDgiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9Ijg3LjgzNTkiIHg9IjExOC4wOCIgeT0iNTY5LjI5NjkiLz48ZWxsaXBzZSBjeD0iMTMzLjA4IiBjeT0iNTg1LjI5NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTEzNi4wNDg4LDU5MC45Mzc1IFExMzUuNDcwNiw1OTEuMjM0NCAxMzQuODMsNTkxLjM3NSBRMTM0LjE4OTQsNTkxLjUzMTMgMTMzLjQ4NjMsNTkxLjUzMTMgUTEzMC45ODYzLDU5MS41MzEzIDEyOS42NTgxLDU4OS44OTA2IFExMjguMzQ1Niw1ODguMjM0NCAxMjguMzQ1Niw1ODUuMTA5NCBRMTI4LjM0NTYsNTgxLjk4NDQgMTI5LjY1ODEsNTgwLjMyODEgUTEzMC45ODYzLDU3OC42NzE5IDEzMy40ODYzLDU3OC42NzE5IFExMzQuMTg5NCw1NzguNjcxOSAxMzQuODMsNTc4LjgyODEgUTEzNS40ODYzLDU3OC45ODQ0IDEzNi4wNDg4LDU3OS4yODEzIEwxMzYuMDQ4OCw1ODIgUTEzNS40MjM4LDU4MS40MjE5IDEzNC44Myw1ODEuMTU2MyBRMTM0LjIzNjMsNTgwLjg3NSAxMzMuNjExMyw1ODAuODc1IFExMzIuMjY3NSw1ODAuODc1IDEzMS41OCw1ODEuOTUzMSBRMTMwLjg5MjUsNTgzLjAxNTYgMTMwLjg5MjUsNTg1LjEwOTQgUTEzMC44OTI1LDU4Ny4yMDMxIDEzMS41OCw1ODguMjgxMyBRMTMyLjI2NzUsNTg5LjM0MzggMTMzLjYxMTMsNTg5LjM0MzggUTEzNC4yMzYzLDU4OS4zNDM4IDEzNC44Myw1ODkuMDc4MSBRMTM1LjQyMzgsNTg4Ljc5NjkgMTM2LjA0ODgsNTg4LjIxODggTDEzNi4wNDg4LDU5MC45Mzc1IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuODM1OSIgeD0iMTQ3LjA4IiB5PSI1OTAuMTQzNiI+QmFsYW5jZTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxMTkuMDgiIHgyPSIyMDQuOTE1OSIgeTE9IjYwMS4yOTY5IiB5Mj0iNjAxLjI5NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxMTkuMDgiIHgyPSIyMDQuOTE1OSIgeTE9IjYwOS4yOTY5IiB5Mj0iNjA5LjI5NjkiLz48L2c+PCEtLWNsYXNzIEpvdXJuYWxEb21haW5TZXJ2aWNlLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iY29tLmV4YW1wbGUuYWNjb3VudGluZy5kb21haW4uc2VydmljZS5Kb3VybmFsRG9tYWluU2VydmljZSIgZGF0YS1zb3VyY2UtbGluZT0iMTIiIGlkPSJlbnQwMDExIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjQ4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxODYuNzMxNCIgeD0iMzc3LjYzIiB5PSIyOTMuMjk2OSIvPjxlbGxpcHNlIGN4PSIzOTIuNjMiIGN5PSIzMDkuMjk2OSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMzk1LjU5ODgsMzE0LjkzNzUgUTM5NS4wMjA2LDMxNS4yMzQ0IDM5NC4zOCwzMTUuMzc1IFEzOTMuNzM5NCwzMTUuNTMxMyAzOTMuMDM2MywzMTUuNTMxMyBRMzkwLjUzNjMsMzE1LjUzMTMgMzg5LjIwODEsMzEzLjg5MDYgUTM4Ny44OTU2LDMxMi4yMzQ0IDM4Ny44OTU2LDMwOS4xMDk0IFEzODcuODk1NiwzMDUuOTg0NCAzODkuMjA4MSwzMDQuMzI4MSBRMzkwLjUzNjMsMzAyLjY3MTkgMzkzLjAzNjMsMzAyLjY3MTkgUTM5My43Mzk0LDMwMi42NzE5IDM5NC4zOCwzMDIuODI4MSBRMzk1LjAzNjMsMzAyLjk4NDQgMzk1LjU5ODgsMzAzLjI4MTMgTDM5NS41OTg4LDMwNiBRMzk0Ljk3MzgsMzA1LjQyMTkgMzk0LjM4LDMwNS4xNTYzIFEzOTMuNzg2MywzMDQuODc1IDM5My4xNjEzLDMwNC44NzUgUTM5MS44MTc1LDMwNC44NzUgMzkxLjEzLDMwNS45NTMxIFEzOTAuNDQyNSwzMDcuMDE1NiAzOTAuNDQyNSwzMDkuMTA5NCBRMzkwLjQ0MjUsMzExLjIwMzEgMzkxLjEzLDMxMi4yODEzIFEzOTEuODE3NSwzMTMuMzQzOCAzOTMuMTYxMywzMTMuMzQzOCBRMzkzLjc4NjMsMzEzLjM0MzggMzk0LjM4LDMxMy4wNzgxIFEzOTQuOTczOCwzMTIuNzk2OSAzOTUuNTk4OCwzMTIuMjE4OCBMMzk1LjU5ODgsMzE0LjkzNzUgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTQuNzMxNCIgeD0iNDA2LjYzIiB5PSIzMTQuMTQzNiI+Sm91cm5hbERvbWFpblNlcnZpY2U8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMzc4LjYzIiB4Mj0iNTYzLjM2MTQiIHkxPSIzMjUuMjk2OSIgeTI9IjMyNS4yOTY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMzc4LjYzIiB4Mj0iNTYzLjM2MTQiIHkxPSIzMzMuMjk2OSIgeTI9IjMzMy4yOTY5Ii8+PC9nPjwhLS1jbGFzcyBBY2NvdW50VXNlQ2FzZS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9ImNvbS5leGFtcGxlLmFjY291bnRpbmcuYXBwbGljYXRpb24ucG9ydC5pbi5BY2NvdW50VXNlQ2FzZSIgZGF0YS1zb3VyY2UtbGluZT0iMTgiIGlkPSJlbnQwMDE0Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjQ4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNDkuMTg4NSIgeD0iNjkyLjQxIiB5PSIyOTMuMjk2OSIvPjxlbGxpcHNlIGN4PSI3MDcuNDEiIGN5PSIzMDkuMjk2OSIgZmlsbD0iI0I0QTdFNSIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNNzAzLjMzMTksMzA1LjA2MjUgTDcwMy4zMzE5LDMwMi45MDYzIEw3MTAuNzIyNSwzMDIuOTA2MyBMNzEwLjcyMjUsMzA1LjA2MjUgTDcwOC4yNTM4LDMwNS4wNjI1IEw3MDguMjUzOCwzMTMuMTQwNiBMNzEwLjcyMjUsMzEzLjE0MDYgTDcxMC43MjI1LDMxNS4yOTY5IEw3MDMuMzMxOSwzMTUuMjk2OSBMNzAzLjMzMTksMzEzLjE0MDYgTDcwNS44MDA2LDMxMy4xNDA2IEw3MDUuODAwNiwzMDUuMDYyNSBMNzAzLjMzMTksMzA1LjA2MjUgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC1zdHlsZT0iaXRhbGljIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNy4xODg1IiB4PSI3MjEuNDEiIHk9IjMxNC4xNDM2Ij5BY2NvdW50VXNlQ2FzZTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI2OTMuNDEiIHgyPSI4NDAuNTk4NSIgeTE9IjMyNS4yOTY5IiB5Mj0iMzI1LjI5NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI2OTMuNDEiIHgyPSI4NDAuNTk4NSIgeTE9IjMzMy4yOTY5IiB5Mj0iMzMzLjI5NjkiLz48L2c+PCEtLWNsYXNzIEpvdXJuYWxVc2VDYXNlLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iY29tLmV4YW1wbGUuYWNjb3VudGluZy5hcHBsaWNhdGlvbi5wb3J0LmluLkpvdXJuYWxVc2VDYXNlIiBkYXRhLXNvdXJjZS1saW5lPSIxOSIgaWQ9ImVudDAwMTYiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNDgiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE0MS4wODExIiB4PSI4NzYuNDYiIHk9IjI5My4yOTY5Ii8+PGVsbGlwc2UgY3g9Ijg5MS40NiIgY3k9IjMwOS4yOTY5IiBmaWxsPSIjQjRBN0U1IiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik04ODcuMzgxOSwzMDUuMDYyNSBMODg3LjM4MTksMzAyLjkwNjMgTDg5NC43NzI1LDMwMi45MDYzIEw4OTQuNzcyNSwzMDUuMDYyNSBMODkyLjMwMzgsMzA1LjA2MjUgTDg5Mi4zMDM4LDMxMy4xNDA2IEw4OTQuNzcyNSwzMTMuMTQwNiBMODk0Ljc3MjUsMzE1LjI5NjkgTDg4Ny4zODE5LDMxNS4yOTY5IEw4ODcuMzgxOSwzMTMuMTQwNiBMODg5Ljg1MDYsMzEzLjE0MDYgTDg4OS44NTA2LDMwNS4wNjI1IEw4ODcuMzgxOSwzMDUuMDYyNSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXN0eWxlPSJpdGFsaWMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA5LjA4MTEiIHg9IjkwNS40NiIgeT0iMzE0LjE0MzYiPkpvdXJuYWxVc2VDYXNlPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9Ijg3Ny40NiIgeDI9IjEwMTYuNTQxMSIgeTE9IjMyNS4yOTY5IiB5Mj0iMzI1LjI5NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI4NzcuNDYiIHgyPSIxMDE2LjU0MTEiIHkxPSIzMzMuMjk2OSIgeTI9IjMzMy4yOTY5Ii8+PC9nPjwhLS1jbGFzcyBBY2NvdW50UmVwb3NpdG9yeS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9ImNvbS5leGFtcGxlLmFjY291bnRpbmcuYXBwbGljYXRpb24ucG9ydC5vdXQuQWNjb3VudFJlcG9zaXRvcnkiIGRhdGEtc291cmNlLWxpbmU9IjIyIiBpZD0iZW50MDAxOCI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI0OCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTYzLjg0NDciIHg9IjEwNzQuMDgiIHk9IjI5My4yOTY5Ii8+PGVsbGlwc2UgY3g9IjEwODkuMDgiIGN5PSIzMDkuMjk2OSIgZmlsbD0iI0I0QTdFNSIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMTA4NS4wMDE5LDMwNS4wNjI1IEwxMDg1LjAwMTksMzAyLjkwNjMgTDEwOTIuMzkyNSwzMDIuOTA2MyBMMTA5Mi4zOTI1LDMwNS4wNjI1IEwxMDg5LjkyMzgsMzA1LjA2MjUgTDEwODkuOTIzOCwzMTMuMTQwNiBMMTA5Mi4zOTI1LDMxMy4xNDA2IEwxMDkyLjM5MjUsMzE1LjI5NjkgTDEwODUuMDAxOSwzMTUuMjk2OSBMMTA4NS4wMDE5LDMxMy4xNDA2IEwxMDg3LjQ3MDYsMzEzLjE0MDYgTDEwODcuNDcwNiwzMDUuMDYyNSBMMTA4NS4wMDE5LDMwNS4wNjI1IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtc3R5bGU9Iml0YWxpYyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzEuODQ0NyIgeD0iMTEwMy4wOCIgeT0iMzE0LjE0MzYiPkFjY291bnRSZXBvc2l0b3J5PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjEwNzUuMDgiIHgyPSIxMjM2LjkyNDciIHkxPSIzMjUuMjk2OSIgeTI9IjMyNS4yOTY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMTA3NS4wOCIgeDI9IjEyMzYuOTI0NyIgeTE9IjMzMy4yOTY5IiB5Mj0iMzMzLjI5NjkiLz48L2c+PCEtLWNsYXNzIEpvdXJuYWxSZXBvc2l0b3J5LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iY29tLmV4YW1wbGUuYWNjb3VudGluZy5hcHBsaWNhdGlvbi5wb3J0Lm91dC5Kb3VybmFsUmVwb3NpdG9yeSIgZGF0YS1zb3VyY2UtbGluZT0iMjMiIGlkPSJlbnQwMDE5Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjQ4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNTUuNzM3MyIgeD0iMTI3My4xMyIgeT0iMjkzLjI5NjkiLz48ZWxsaXBzZSBjeD0iMTI4OC4xMyIgY3k9IjMwOS4yOTY5IiBmaWxsPSIjQjRBN0U1IiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0xMjg0LjA1MTksMzA1LjA2MjUgTDEyODQuMDUxOSwzMDIuOTA2MyBMMTI5MS40NDI1LDMwMi45MDYzIEwxMjkxLjQ0MjUsMzA1LjA2MjUgTDEyODguOTczOCwzMDUuMDYyNSBMMTI4OC45NzM4LDMxMy4xNDA2IEwxMjkxLjQ0MjUsMzEzLjE0MDYgTDEyOTEuNDQyNSwzMTUuMjk2OSBMMTI4NC4wNTE5LDMxNS4yOTY5IEwxMjg0LjA1MTksMzEzLjE0MDYgTDEyODYuNTIwNiwzMTMuMTQwNiBMMTI4Ni41MjA2LDMwNS4wNjI1IEwxMjg0LjA1MTksMzA1LjA2MjUgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC1zdHlsZT0iaXRhbGljIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyMy43MzczIiB4PSIxMzAyLjEzIiB5PSIzMTQuMTQzNiI+Sm91cm5hbFJlcG9zaXRvcnk8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMTI3NC4xMyIgeDI9IjE0MjcuODY3MyIgeTE9IjMyNS4yOTY5IiB5Mj0iMzI1LjI5NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxMjc0LjEzIiB4Mj0iMTQyNy44NjczIiB5MT0iMzMzLjI5NjkiIHkyPSIzMzMuMjk2OSIvPjwvZz48IS0tY2xhc3MgQWNjb3VudEFwcGxpY2F0aW9uU2VydmljZS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9ImNvbS5leGFtcGxlLmFjY291bnRpbmcuYXBwbGljYXRpb24uc2VydmljZS5BY2NvdW50QXBwbGljYXRpb25TZXJ2aWNlIiBkYXRhLXNvdXJjZS1saW5lPSIyNiIgaWQ9ImVudDAwMjEiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNDgiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjIxOC43MzczIiB4PSI4MjcuNjMiIHk9IjU2OS4yOTY5Ii8+PGVsbGlwc2UgY3g9Ijg0Mi42MyIgY3k9IjU4NS4yOTY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik04NDUuNTk4OCw1OTAuOTM3NSBRODQ1LjAyMDYsNTkxLjIzNDQgODQ0LjM4LDU5MS4zNzUgUTg0My43Mzk0LDU5MS41MzEzIDg0My4wMzYzLDU5MS41MzEzIFE4NDAuNTM2Myw1OTEuNTMxMyA4MzkuMjA4MSw1ODkuODkwNiBRODM3Ljg5NTYsNTg4LjIzNDQgODM3Ljg5NTYsNTg1LjEwOTQgUTgzNy44OTU2LDU4MS45ODQ0IDgzOS4yMDgxLDU4MC4zMjgxIFE4NDAuNTM2Myw1NzguNjcxOSA4NDMuMDM2Myw1NzguNjcxOSBRODQzLjczOTQsNTc4LjY3MTkgODQ0LjM4LDU3OC44MjgxIFE4NDUuMDM2Myw1NzguOTg0NCA4NDUuNTk4OCw1NzkuMjgxMyBMODQ1LjU5ODgsNTgyIFE4NDQuOTczOCw1ODEuNDIxOSA4NDQuMzgsNTgxLjE1NjMgUTg0My43ODYzLDU4MC44NzUgODQzLjE2MTMsNTgwLjg3NSBRODQxLjgxNzUsNTgwLjg3NSA4NDEuMTMsNTgxLjk1MzEgUTg0MC40NDI1LDU4My4wMTU2IDg0MC40NDI1LDU4NS4xMDk0IFE4NDAuNDQyNSw1ODcuMjAzMSA4NDEuMTMsNTg4LjI4MTMgUTg0MS44MTc1LDU4OS4zNDM4IDg0My4xNjEzLDU4OS4zNDM4IFE4NDMuNzg2Myw1ODkuMzQzOCA4NDQuMzgsNTg5LjA3ODEgUTg0NC45NzM4LDU4OC43OTY5IDg0NS41OTg4LDU4OC4yMTg4IEw4NDUuNTk4OCw1OTAuOTM3NSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE4Ni43MzczIiB4PSI4NTYuNjMiIHk9IjU5MC4xNDM2Ij5BY2NvdW50QXBwbGljYXRpb25TZXJ2aWNlPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjgyOC42MyIgeDI9IjEwNDUuMzY3MyIgeTE9IjYwMS4yOTY5IiB5Mj0iNjAxLjI5NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI4MjguNjMiIHgyPSIxMDQ1LjM2NzMiIHkxPSI2MDkuMjk2OSIgeTI9IjYwOS4yOTY5Ii8+PC9nPjwhLS1jbGFzcyBKb3VybmFsQXBwbGljYXRpb25TZXJ2aWNlLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iY29tLmV4YW1wbGUuYWNjb3VudGluZy5hcHBsaWNhdGlvbi5zZXJ2aWNlLkpvdXJuYWxBcHBsaWNhdGlvblNlcnZpY2UiIGRhdGEtc291cmNlLWxpbmU9IjI3IiBpZD0iZW50MDAyMiI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI0OCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMjEwLjYyOTkiIHg9IjEwODEuNjkiIHk9IjU2OS4yOTY5Ii8+PGVsbGlwc2UgY3g9IjEwOTYuNjkiIGN5PSI1ODUuMjk2OSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMTA5OS42NTg4LDU5MC45Mzc1IFExMDk5LjA4MDYsNTkxLjIzNDQgMTA5OC40NCw1OTEuMzc1IFExMDk3Ljc5OTQsNTkxLjUzMTMgMTA5Ny4wOTYzLDU5MS41MzEzIFExMDk0LjU5NjMsNTkxLjUzMTMgMTA5My4yNjgxLDU4OS44OTA2IFExMDkxLjk1NTYsNTg4LjIzNDQgMTA5MS45NTU2LDU4NS4xMDk0IFExMDkxLjk1NTYsNTgxLjk4NDQgMTA5My4yNjgxLDU4MC4zMjgxIFExMDk0LjU5NjMsNTc4LjY3MTkgMTA5Ny4wOTYzLDU3OC42NzE5IFExMDk3Ljc5OTQsNTc4LjY3MTkgMTA5OC40NCw1NzguODI4MSBRMTA5OS4wOTYzLDU3OC45ODQ0IDEwOTkuNjU4OCw1NzkuMjgxMyBMMTA5OS42NTg4LDU4MiBRMTA5OS4wMzM4LDU4MS40MjE5IDEwOTguNDQsNTgxLjE1NjMgUTEwOTcuODQ2Myw1ODAuODc1IDEwOTcuMjIxMyw1ODAuODc1IFExMDk1Ljg3NzUsNTgwLjg3NSAxMDk1LjE5LDU4MS45NTMxIFExMDk0LjUwMjUsNTgzLjAxNTYgMTA5NC41MDI1LDU4NS4xMDk0IFExMDk0LjUwMjUsNTg3LjIwMzEgMTA5NS4xOSw1ODguMjgxMyBRMTA5NS44Nzc1LDU4OS4zNDM4IDEwOTcuMjIxMyw1ODkuMzQzOCBRMTA5Ny44NDYzLDU4OS4zNDM4IDEwOTguNDQsNTg5LjA3ODEgUTEwOTkuMDMzOCw1ODguNzk2OSAxMDk5LjY1ODgsNTg4LjIxODggTDEwOTkuNjU4OCw1OTAuOTM3NSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE3OC42Mjk5IiB4PSIxMTEwLjY5IiB5PSI1OTAuMTQzNiI+Sm91cm5hbEFwcGxpY2F0aW9uU2VydmljZTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxMDgyLjY5IiB4Mj0iMTI5MS4zMTk5IiB5MT0iNjAxLjI5NjkiIHkyPSI2MDEuMjk2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjEwODIuNjkiIHgyPSIxMjkxLjMxOTkiIHkxPSI2MDkuMjk2OSIgeTI9IjYwOS4yOTY5Ii8+PC9nPjwhLS1jbGFzcyBBY2NvdW50Q29udHJvbGxlci0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9ImNvbS5leGFtcGxlLmFjY291bnRpbmcuaW5mcmFzdHJ1Y3R1cmUuYWRhcHRlci5pbi53ZWIuQWNjb3VudENvbnRyb2xsZXIiIGRhdGEtc291cmNlLWxpbmU9IjMzIiBpZD0iZW50MDAyNSI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI0OCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTU3Ljk0NTMiIHg9IjE2MDUuMDMiIHk9IjU2OS4yOTY5Ii8+PGVsbGlwc2UgY3g9IjE2MjAuMDMiIGN5PSI1ODUuMjk2OSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMTYyMi45OTg4LDU5MC45Mzc1IFExNjIyLjQyMDYsNTkxLjIzNDQgMTYyMS43OCw1OTEuMzc1IFExNjIxLjEzOTQsNTkxLjUzMTMgMTYyMC40MzYzLDU5MS41MzEzIFExNjE3LjkzNjMsNTkxLjUzMTMgMTYxNi42MDgxLDU4OS44OTA2IFExNjE1LjI5NTYsNTg4LjIzNDQgMTYxNS4yOTU2LDU4NS4xMDk0IFExNjE1LjI5NTYsNTgxLjk4NDQgMTYxNi42MDgxLDU4MC4zMjgxIFExNjE3LjkzNjMsNTc4LjY3MTkgMTYyMC40MzYzLDU3OC42NzE5IFExNjIxLjEzOTQsNTc4LjY3MTkgMTYyMS43OCw1NzguODI4MSBRMTYyMi40MzYzLDU3OC45ODQ0IDE2MjIuOTk4OCw1NzkuMjgxMyBMMTYyMi45OTg4LDU4MiBRMTYyMi4zNzM4LDU4MS40MjE5IDE2MjEuNzgsNTgxLjE1NjMgUTE2MjEuMTg2Myw1ODAuODc1IDE2MjAuNTYxMyw1ODAuODc1IFExNjE5LjIxNzUsNTgwLjg3NSAxNjE4LjUzLDU4MS45NTMxIFExNjE3Ljg0MjUsNTgzLjAxNTYgMTYxNy44NDI1LDU4NS4xMDk0IFExNjE3Ljg0MjUsNTg3LjIwMzEgMTYxOC41Myw1ODguMjgxMyBRMTYxOS4yMTc1LDU4OS4zNDM4IDE2MjAuNTYxMyw1ODkuMzQzOCBRMTYyMS4xODYzLDU4OS4zNDM4IDE2MjEuNzgsNTg5LjA3ODEgUTE2MjIuMzczOCw1ODguNzk2OSAxNjIyLjk5ODgsNTg4LjIxODggTDE2MjIuOTk4OCw1OTAuOTM3NSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyNS45NDUzIiB4PSIxNjM0LjAzIiB5PSI1OTAuMTQzNiI+QWNjb3VudENvbnRyb2xsZXI8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMTYwNi4wMyIgeDI9IjE3NjEuOTc1MyIgeTE9IjYwMS4yOTY5IiB5Mj0iNjAxLjI5NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxNjA2LjAzIiB4Mj0iMTc2MS45NzUzIiB5MT0iNjA5LjI5NjkiIHkyPSI2MDkuMjk2OSIvPjwvZz48IS0tY2xhc3MgSm91cm5hbENvbnRyb2xsZXItLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJjb20uZXhhbXBsZS5hY2NvdW50aW5nLmluZnJhc3RydWN0dXJlLmFkYXB0ZXIuaW4ud2ViLkpvdXJuYWxDb250cm9sbGVyIiBkYXRhLXNvdXJjZS1saW5lPSIzNCIgaWQ9ImVudDAwMjgiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNDgiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE0OS44Mzc5IiB4PSIxNzk4LjA4IiB5PSI1NjkuMjk2OSIvPjxlbGxpcHNlIGN4PSIxODEzLjA4IiBjeT0iNTg1LjI5NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTE4MTYuMDQ4OCw1OTAuOTM3NSBRMTgxNS40NzA2LDU5MS4yMzQ0IDE4MTQuODMsNTkxLjM3NSBRMTgxNC4xODk0LDU5MS41MzEzIDE4MTMuNDg2Myw1OTEuNTMxMyBRMTgxMC45ODYzLDU5MS41MzEzIDE4MDkuNjU4MSw1ODkuODkwNiBRMTgwOC4zNDU2LDU4OC4yMzQ0IDE4MDguMzQ1Niw1ODUuMTA5NCBRMTgwOC4zNDU2LDU4MS45ODQ0IDE4MDkuNjU4MSw1ODAuMzI4MSBRMTgxMC45ODYzLDU3OC42NzE5IDE4MTMuNDg2Myw1NzguNjcxOSBRMTgxNC4xODk0LDU3OC42NzE5IDE4MTQuODMsNTc4LjgyODEgUTE4MTUuNDg2Myw1NzguOTg0NCAxODE2LjA0ODgsNTc5LjI4MTMgTDE4MTYuMDQ4OCw1ODIgUTE4MTUuNDIzOCw1ODEuNDIxOSAxODE0LjgzLDU4MS4xNTYzIFExODE0LjIzNjMsNTgwLjg3NSAxODEzLjYxMTMsNTgwLjg3NSBRMTgxMi4yNjc1LDU4MC44NzUgMTgxMS41OCw1ODEuOTUzMSBRMTgxMC44OTI1LDU4My4wMTU2IDE4MTAuODkyNSw1ODUuMTA5NCBRMTgxMC44OTI1LDU4Ny4yMDMxIDE4MTEuNTgsNTg4LjI4MTMgUTE4MTIuMjY3NSw1ODkuMzQzOCAxODEzLjYxMTMsNTg5LjM0MzggUTE4MTQuMjM2Myw1ODkuMzQzOCAxODE0LjgzLDU4OS4wNzgxIFExODE1LjQyMzgsNTg4Ljc5NjkgMTgxNi4wNDg4LDU4OC4yMTg4IEwxODE2LjA0ODgsNTkwLjkzNzUgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTcuODM3OSIgeD0iMTgyNy4wOCIgeT0iNTkwLjE0MzYiPkpvdXJuYWxDb250cm9sbGVyPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjE3OTkuMDgiIHgyPSIxOTQ2LjkxNzkiIHkxPSI2MDEuMjk2OSIgeTI9IjYwMS4yOTY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMTc5OS4wOCIgeDI9IjE5NDYuOTE3OSIgeTE9IjYwOS4yOTY5IiB5Mj0iNjA5LjI5NjkiLz48L2c+PCEtLWNsYXNzIEFjY291bnRSZXBvc2l0b3J5SW1wbC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9ImNvbS5leGFtcGxlLmFjY291bnRpbmcuaW5mcmFzdHJ1Y3R1cmUuYWRhcHRlci5vdXQucGVyc2lzdGVuY2UuQWNjb3VudFJlcG9zaXRvcnlJbXBsIiBkYXRhLXNvdXJjZS1saW5lPSIzNyIgaWQ9ImVudDAwMzAiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNDgiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE5NC4zODc3IiB4PSIyMDUxLjgxIiB5PSI1NjkuMjk2OSIvPjxlbGxpcHNlIGN4PSIyMDY2LjgxIiBjeT0iNTg1LjI5NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTIwNjkuNzc4OCw1OTAuOTM3NSBRMjA2OS4yMDA2LDU5MS4yMzQ0IDIwNjguNTYsNTkxLjM3NSBRMjA2Ny45MTk0LDU5MS41MzEzIDIwNjcuMjE2Myw1OTEuNTMxMyBRMjA2NC43MTYzLDU5MS41MzEzIDIwNjMuMzg4MSw1ODkuODkwNiBRMjA2Mi4wNzU2LDU4OC4yMzQ0IDIwNjIuMDc1Niw1ODUuMTA5NCBRMjA2Mi4wNzU2LDU4MS45ODQ0IDIwNjMuMzg4MSw1ODAuMzI4MSBRMjA2NC43MTYzLDU3OC42NzE5IDIwNjcuMjE2Myw1NzguNjcxOSBRMjA2Ny45MTk0LDU3OC42NzE5IDIwNjguNTYsNTc4LjgyODEgUTIwNjkuMjE2Myw1NzguOTg0NCAyMDY5Ljc3ODgsNTc5LjI4MTMgTDIwNjkuNzc4OCw1ODIgUTIwNjkuMTUzOCw1ODEuNDIxOSAyMDY4LjU2LDU4MS4xNTYzIFEyMDY3Ljk2NjMsNTgwLjg3NSAyMDY3LjM0MTMsNTgwLjg3NSBRMjA2NS45OTc1LDU4MC44NzUgMjA2NS4zMSw1ODEuOTUzMSBRMjA2NC42MjI1LDU4My4wMTU2IDIwNjQuNjIyNSw1ODUuMTA5NCBRMjA2NC42MjI1LDU4Ny4yMDMxIDIwNjUuMzEsNTg4LjI4MTMgUTIwNjUuOTk3NSw1ODkuMzQzOCAyMDY3LjM0MTMsNTg5LjM0MzggUTIwNjcuOTY2Myw1ODkuMzQzOCAyMDY4LjU2LDU4OS4wNzgxIFEyMDY5LjE1MzgsNTg4Ljc5NjkgMjA2OS43Nzg4LDU4OC4yMTg4IEwyMDY5Ljc3ODgsNTkwLjkzNzUgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNjIuMzg3NyIgeD0iMjA4MC44MSIgeT0iNTkwLjE0MzYiPkFjY291bnRSZXBvc2l0b3J5SW1wbDwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyMDUyLjgxIiB4Mj0iMjI0NS4xOTc3IiB5MT0iNjAxLjI5NjkiIHkyPSI2MDEuMjk2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjIwNTIuODEiIHgyPSIyMjQ1LjE5NzciIHkxPSI2MDkuMjk2OSIgeTI9IjYwOS4yOTY5Ii8+PC9nPjwhLS1jbGFzcyBKb3VybmFsUmVwb3NpdG9yeUltcGwtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJjb20uZXhhbXBsZS5hY2NvdW50aW5nLmluZnJhc3RydWN0dXJlLmFkYXB0ZXIub3V0LnBlcnNpc3RlbmNlLkpvdXJuYWxSZXBvc2l0b3J5SW1wbCIgZGF0YS1zb3VyY2UtbGluZT0iMzgiIGlkPSJlbnQwMDMyIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjQ4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxODYuMjgwMyIgeD0iMjI4MC44NiIgeT0iNTY5LjI5NjkiLz48ZWxsaXBzZSBjeD0iMjI5NS44NiIgY3k9IjU4NS4yOTY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0yMjk4LjgyODgsNTkwLjkzNzUgUTIyOTguMjUwNiw1OTEuMjM0NCAyMjk3LjYxLDU5MS4zNzUgUTIyOTYuOTY5NCw1OTEuNTMxMyAyMjk2LjI2NjMsNTkxLjUzMTMgUTIyOTMuNzY2Myw1OTEuNTMxMyAyMjkyLjQzODEsNTg5Ljg5MDYgUTIyOTEuMTI1Niw1ODguMjM0NCAyMjkxLjEyNTYsNTg1LjEwOTQgUTIyOTEuMTI1Niw1ODEuOTg0NCAyMjkyLjQzODEsNTgwLjMyODEgUTIyOTMuNzY2Myw1NzguNjcxOSAyMjk2LjI2NjMsNTc4LjY3MTkgUTIyOTYuOTY5NCw1NzguNjcxOSAyMjk3LjYxLDU3OC44MjgxIFEyMjk4LjI2NjMsNTc4Ljk4NDQgMjI5OC44Mjg4LDU3OS4yODEzIEwyMjk4LjgyODgsNTgyIFEyMjk4LjIwMzgsNTgxLjQyMTkgMjI5Ny42MSw1ODEuMTU2MyBRMjI5Ny4wMTYzLDU4MC44NzUgMjI5Ni4zOTEzLDU4MC44NzUgUTIyOTUuMDQ3NSw1ODAuODc1IDIyOTQuMzYsNTgxLjk1MzEgUTIyOTMuNjcyNSw1ODMuMDE1NiAyMjkzLjY3MjUsNTg1LjEwOTQgUTIyOTMuNjcyNSw1ODcuMjAzMSAyMjk0LjM2LDU4OC4yODEzIFEyMjk1LjA0NzUsNTg5LjM0MzggMjI5Ni4zOTEzLDU4OS4zNDM4IFEyMjk3LjAxNjMsNTg5LjM0MzggMjI5Ny42MSw1ODkuMDc4MSBRMjI5OC4yMDM4LDU4OC43OTY5IDIyOTguODI4OCw1ODguMjE4OCBMMjI5OC44Mjg4LDU5MC45Mzc1IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTU0LjI4MDMiIHg9IjIzMDkuODYiIHk9IjU5MC4xNDM2Ij5Kb3VybmFsUmVwb3NpdG9yeUltcGw8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMjI4MS44NiIgeDI9IjI0NjYuMTQwMyIgeTE9IjYwMS4yOTY5IiB5Mj0iNjAxLjI5NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyMjgxLjg2IiB4Mj0iMjQ2Ni4xNDAzIiB5MT0iNjA5LjI5NjkiIHkyPSI2MDkuMjk2OSIvPjwvZz48IS0tcmV2ZXJzZSBsaW5rIEFjY291bnRVc2VDYXNlIHRvIEFjY291bnRBcHBsaWNhdGlvblNlcnZpY2UtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAxNCIgZGF0YS1lbnRpdHktMj0iZW50MDAyMSIgZGF0YS1saW5rLXR5cGU9ImV4dGVuc2lvbiIgZGF0YS1zb3VyY2UtbGluZT0iNDMiIGlkPSJsbmszMyI+PHBhdGggY29kZUxpbmU9IjQzIiBkPSJNNzkwLjk3OTcsMzU2Ljk1MjEgQzgyMy4wOTk3LDQwOC43MjIxIDg5MC40Niw1MTcuMjg2OSA5MjIuNTQsNTY4Ljk5NjkiIGZpbGw9Im5vbmUiIGlkPSJBY2NvdW50VXNlQ2FzZS1iYWNrdG8tQWNjb3VudEFwcGxpY2F0aW9uU2VydmljZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6Nyw3OyIvPjxwb2x5Z29uIGZpbGw9Im5vbmUiIHBvaW50cz0iNzgxLjQ5LDM0MS42NTY5LDc4NS44ODEzLDM2MC4xMTU0LDc5Ni4wNzgyLDM1My43ODg5LDc4MS40OSwzNDEuNjU2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tcmV2ZXJzZSBsaW5rIEFjY291bnRSZXBvc2l0b3J5IHRvIEFjY291bnRSZXBvc2l0b3J5SW1wbC0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDE4IiBkYXRhLWVudGl0eS0yPSJlbnQwMDMwIiBkYXRhLWxpbmstdHlwZT0iZXh0ZW5zaW9uIiBkYXRhLXNvdXJjZS1saW5lPSI0NCIgaWQ9ImxuazM0Ij48cGF0aCBjb2RlTGluZT0iNDQiIGQ9Ik0xMTkzLjM4NjEsMzUzLjY4MjMgQzEyMTIuMzA2MSwzNzAuNDkyMyAxMjI2Ljg0LDM3OS44MTY5IDEyNTYsMzg5LjI5NjkgQzEyOTMuNDEsNDAxLjQ1NjkgMTkyNy45NSwzODEuNTY2OSAxOTY0LDM5Ny4yOTY5IEMyMDQ2LjMzLDQzMy4yMjY5IDIxMDkuNDUsNTI1LjM3NjkgMjEzNS43LDU2OC44ODY5IiBmaWxsPSJub25lIiBpZD0iQWNjb3VudFJlcG9zaXRvcnktYmFja3RvLUFjY291bnRSZXBvc2l0b3J5SW1wbCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6Nyw3OyIvPjxwb2x5Z29uIGZpbGw9Im5vbmUiIHBvaW50cz0iMTE3OS45MywzNDEuNzI2OSwxMTg5LjQwMSwzNTguMTY3NywxMTk3LjM3MTMsMzQ5LjE5NywxMTc5LjkzLDM0MS43MjY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rIEFjY291bnRDb250cm9sbGVyIHRvIEFjY291bnRVc2VDYXNlLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMjUiIGRhdGEtZW50aXR5LTI9ImVudDAwMTQiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSI0NSIgaWQ9ImxuazM1Ij48cGF0aCBjb2RlTGluZT0iNDUiIGQ9Ik0xNjUxLjg5LDU2OS4wMTY5IEMxNTg5LjQyLDUyNS4yODY5IDE0NDUuNTcsNDMyLjE0NjkgMTMwOCwzOTcuMjk2OSBDMTI1OS42MywzODUuMDQ2OSA5MDYuMDgsNDA1LjgxNjkgODU5LDM4OS4yOTY5IEM4MzEuNTksMzc5LjY3NjkgODEwLjE5ODQsMzYyLjYwMyA3OTIuOTc4NCwzNDUuODMzIiBmaWxsPSJub25lIiBpZD0iQWNjb3VudENvbnRyb2xsZXItdG8tQWNjb3VudFVzZUNhc2UiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9Ijc4OC42OCwzNDEuNjQ2OSw3OTIuMzM2OSwzNTAuNzkxNyw3OTIuMjYyLDM0NS4xMzUzLDc5Ny45MTg0LDM0NS4wNjA0LDc4OC42OCwzNDEuNjQ2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayBBY2NvdW50QXBwbGljYXRpb25TZXJ2aWNlIHRvIEFjY291bnRSZXBvc2l0b3J5LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMjEiIGRhdGEtZW50aXR5LTI9ImVudDAwMTgiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSI0NiIgaWQ9ImxuazM2Ij48cGF0aCBjb2RlTGluZT0iNDYiIGQ9Ik05NDkuMzYsNTY4LjkwNjkgQzk3MC4xMiw1MzAuNzM2OSAxMDE0LjYyLDQ1My42NzY5IDEwNjQsMzk3LjI5NjkgQzEwODIuMTcsMzc2LjU0NjkgMTEwMS4xMjYsMzYwLjA1ODggMTExOS44OTYsMzQ1LjI3ODgiIGZpbGw9Im5vbmUiIGlkPSJBY2NvdW50QXBwbGljYXRpb25TZXJ2aWNlLXRvLUFjY291bnRSZXBvc2l0b3J5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMTI0LjYxLDM0MS41NjY5LDExMTUuMDY0NCwzNDMuOTkyMSwxMTIwLjY4MTcsMzQ0LjY2MDEsMTEyMC4wMTM2LDM1MC4yNzc0LDExMjQuNjEsMzQxLjU2NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PD9wbGFudHVtbC1zcmMgVkw5QkppQ201RHB0NTU3dHpHYUdLWWFSTTg5d1c4VnBNYmF1VmZSem1hVUdKUkQxT1dFZE9Dc0UxUlU5cjdFR2FlSk9JVVpJUnBtcFJ5UGNuSGdKZ2RvbG9oQlFWTFJiVHhOeHNkLXl4Yl9VUFpDQnlYUXNjQ21iUEc4VjhCQ1ExS1g5a001YmpsRmFBUllKS1dSQTc2UF9ldW5JcjhVOXJFMXppY29PeFVjSVNjVDBqd1NwcTYwYXBlZ1V4VDdUQU9hemxzTVNfbmZURHNYREE4OGJtNWdqOUIyWVUxREJaYU1wZEpBQ1JXQ0lrdHRNN2JWV0NHMVFlbXVlMVpnS3l3Skc1TGhvWWlhelpoSzJ4NVo0TGNkUG4tWG9IWExDdTc0Rm9jbVNVN1F2dkRuWEwwTWFPRWxid1pSNEZUd0NoNVRhczk3TXc2QkJPNXdDblVmQVg0TmRiTVNxNHU3dy0xVnI5dWdMMXJaSEg4YVY5cGJ2NWs5OEVvRVJZMzFtNjJMRDVlbEp1TV91cm9reXQwbF8wMDAwPz48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<h3 id="2122">21.2.2 各レイヤーの責務<a class="headerlink" href="#2122" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjQ2NnB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MTAyOHB4O2hlaWdodDo0NjZweDtiYWNrZ3JvdW5kOiNGRkZGRkY7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxMDI4IDQ2NiIgd2lkdGg9IjEwMjhweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjE1MDg7JiMyMzY1MjsmIzEyMzk4OyYjMzYwMTI7JiMyMTIwOTs8L3RpdGxlPjxkZWZzLz48Zz48ZyBjbGFzcz0idGl0bGUiIGRhdGEtc291cmNlLWxpbmU9IjEiPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSI0NzIuMDAwMiIgeT0iMjIuOTk1MSI+JiMyMTUwODsmIzIzNjUyOyYjMTIzOTg7JiMzNjAxMjsmIzIxMjA5OzwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgSW5mcmFzdHJ1Y3R1cmUgTGF5ZXIgKEFkYXB0ZXIpLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkluZnJhc3RydWN0dXJlIExheWVyIC5BZGFwdGVyLiIgZGF0YS1zb3VyY2UtbGluZT0iMyIgaWQ9ImVudDAwMDIiPjxyZWN0IGZpbGw9IiNCQkRFRkIiIGhlaWdodD0iMTM4LjQ4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMzQ4IiB4PSIxMjYiIHk9IjMyMS42NzY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI0MC43Mjc1IiB4PSIxNzkuNjM2MiIgeT0iMzM2LjY3MiI+SW5mcmFzdHJ1Y3R1cmUgTGF5ZXIgKEFkYXB0ZXIpPC90ZXh0PjwvZz48IS0tY2x1c3RlciBBcHBsaWNhdGlvbiBMYXllciAoUG9ydCArIFVzZUNhc2UpLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkFwcGxpY2F0aW9uIExheWVyIC5Qb3J0IC4gVXNlQ2FzZS4iIGRhdGEtc291cmNlLWxpbmU9IjkiIGlkPSJlbnQwMDA1Ij48cmVjdCBmaWxsPSIjRkZGOUM0IiBoZWlnaHQ9IjI1My4zOCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjQ2NSIgeD0iNyIgeT0iNDQuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNzcuNDM2NSIgeD0iMTAwLjc4MTciIHk9IjU5LjI5MiI+QXBwbGljYXRpb24gTGF5ZXIgKFBvcnQgKyBVc2VDYXNlKTwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgRG9tYWluIExheWVyLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkRvbWFpbiBMYXllciIgZGF0YS1zb3VyY2UtbGluZT0iMTciIGlkPSJlbnQwMDA5Ij48cmVjdCBmaWxsPSIjQzhFNkM5IiBoZWlnaHQ9IjEyMi4xOSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjUyNiIgeD0iNDk2IiB5PSIxNzUuNDg2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDguODA3NiIgeD0iNzA0LjU5NjIiIHk9IjE5MC40ODIiPkRvbWFpbiBMYXllcjwvdGV4dD48L2c+PCEtLWVudGl0eSBpbl9hZGFwdGVyLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iSW5mcmFzdHJ1Y3R1cmUgTGF5ZXIgLkFkYXB0ZXIuLmluX2FkYXB0ZXIiIGRhdGEtc291cmNlLWxpbmU9IjQiIGlkPSJlbnQwMDAzIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9Ijg3LjQ4NDQiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE0My42MzQ3IiB4PSIzMTQuMTgiIHk9IjM1Ni42NzY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk3Ljk5OTYiIHg9IjMyNC4xOCIgeT0iMzcyLjY3MiI+JiMyMDgzNzsmIzIxMTQ3OyYjMTI0NTA7JiMxMjQ4MDsmIzEyNTAzOyYjMTI0Nzk7JiMxMjU0MDs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTIzLjYzNDciIHg9IjMyNC4xOCIgeT0iMzg4Ljk2ODkiPiYjMTI1Mzk7UkVTVCBDb250cm9sbGVyPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExMS45OTk1IiB4PSIzMjQuMTgiIHk9IjQwNS4yNjU3Ij4mIzEyNTM5OyYjMTI1MjI7JiMxMjQ2MzsmIzEyNDU2OyYjMTI0NzM7JiMxMjQ4ODsmIzIyNzkzOyYjMjU1NjM7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExMS45OTk1IiB4PSIzMjQuMTgiIHk9IjQyMS41NjI2Ij4mIzEyNTM5OyYjMTI1MjQ7JiMxMjQ3MzsmIzEyNTA5OyYjMTI1MzE7JiMxMjQ3MzsmIzI5OTgzOyYjMjUxMDQ7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExMS45OTk1IiB4PSIzMjQuMTgiIHk9IjQzNy44NTk1Ij4mIzEyNTM5OyYjMTI0OTY7JiMxMjUyMjsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3MTsmIzEyNTE5OyYjMTI1MzE7PC90ZXh0PjwvZz48IS0tZW50aXR5IG91dF9hZGFwdGVyLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iSW5mcmFzdHJ1Y3R1cmUgTGF5ZXIgLkFkYXB0ZXIuLm91dF9hZGFwdGVyIiBkYXRhLXNvdXJjZS1saW5lPSI2IiBpZD0iZW50MDAwNCI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI4Ny40ODQ0IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMzcuMDcyMSIgeD0iMTQyLjQ2IiB5PSIzNTYuNjc2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ny45OTk2IiB4PSIxNTIuNDYiIHk9IjM3Mi42NzIiPiYjMjA5ODY7JiMyMTE0NzsmIzEyNDUwOyYjMTI0ODA7JiMxMjUwMzsmIzEyNDc5OyYjMTI1NDA7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNy4wNzIxIiB4PSIxNTIuNDYiIHk9IjM4OC45Njg5Ij4mIzEyNTM5O1JlcG9zaXRvcnkmIzIzNDU1OyYjMzUwMTM7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYyLjM4NDYiIHg9IjE1Mi40NiIgeT0iNDA1LjI2NTciPiYjMTI1Mzk7REImIzI1ODA1OyYjMjAzMTY7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjkyLjE0ODEiIHg9IjE1Mi40NiIgeT0iNDIxLjU2MjYiPiYjMTI1Mzk7JiMyMjgwNjsmIzM3MDk2O0FQSSYjMzY4OTk7JiMyNTY1ODs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iMTUyLjQ2IiB5PSI0MzcuODU5NSI+JiMxMjUzOTsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsmIzIyNzkzOyYjMjU1NjM7PC90ZXh0PjwvZz48IS0tZW50aXR5IGluX3BvcnQtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJBcHBsaWNhdGlvbiBMYXllciAuUG9ydCAuIFVzZUNhc2UuLmluX3BvcnQiIGRhdGEtc291cmNlLWxpbmU9IjEwIiBpZD0iZW50MDAwNiI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI3MS4xODc1IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIyMTAuODY1NyIgeD0iMjIuNTciIHk9Ijc5LjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iMzIuNTciIHk9Ijk1LjI5MiI+JiMyMDgzNzsmIzIxMTQ3OyYjMTI1MDk7JiMxMjU0MDsmIzEyNDg4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxOTAuODY1NyIgeD0iMzIuNTciIHk9IjExMS41ODg5Ij4mIzEyNTM5O1VzZUNhc2UgJiMxMjQ1MjsmIzEyNTMxOyYjMTI0Nzk7JiMxMjU0MDsmIzEyNTAxOyYjMTI0NTU7JiMxMjU0MDsmIzEyNDczOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3Mi4zNTE0IiB4PSIzMi41NyIgeT0iMTI3Ljg4NTciPiYjMTI1Mzk7RFRPJiMyMzQ1MDsmIzMyNjgxOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTYuNzE2MyIgeD0iMzIuNTciIHk9IjE0NC4xODI2Ij4mIzEyNTM5OyYjMTI0Njc7JiMxMjUxMDsmIzEyNTMxOyYjMTI0ODk7LyYjMTI0NjM7JiMxMjQ1NjsmIzEyNTIyOzwvdGV4dD48L2c+PCEtLWVudGl0eSBvdXRfcG9ydC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkFwcGxpY2F0aW9uIExheWVyIC5Qb3J0IC4gVXNlQ2FzZS4ub3V0X3BvcnQiIGRhdGEtc291cmNlLWxpbmU9IjEyIiBpZD0iZW50MDAwNyI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI3MS4xODc1IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIyMjUuNTIxOSIgeD0iMTAxLjI0IiB5PSIyMTAuNDg2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSIxMTEuMjQiIHk9IjIyNi40ODIiPiYjMjA5ODY7JiMyMTE0NzsmIzEyNTA5OyYjMTI1NDA7JiMxMjQ4ODs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjA1LjUyMTkiIHg9IjExMS4yNCIgeT0iMjQyLjc3ODkiPiYjMTI1Mzk7UmVwb3NpdG9yeSAmIzEyNDUyOyYjMTI1MzE7JiMxMjQ3OTsmIzEyNTQwOyYjMTI1MDE7JiMxMjQ1NTsmIzEyNTQwOyYjMTI0NzM7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgzLjk5OTYiIHg9IjExMS4yNCIgeT0iMjU5LjA3NTciPiYjMTI1Mzk7JiMyNzcwNDsmIzMyMTU0OyYjMjEyNzA7JiMyNTI3NzsmIzM1OTM3OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ny45OTk2IiB4PSIxMTEuMjQiIHk9IjI3NS4zNzI2Ij4mIzEyNTM5OyYjMjI4MDY7JiMzNzA5NjsmIzM2ODk5OyYjMjU2NTg7JiMyNTI3NzsmIzM1OTM3OzwvdGV4dD48L2c+PCEtLWVudGl0eSBhcHBfc2VydmljZS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkFwcGxpY2F0aW9uIExheWVyIC5Qb3J0IC4gVXNlQ2FzZS4uYXBwX3NlcnZpY2UiIGRhdGEtc291cmNlLWxpbmU9IjE0IiBpZD0iZW50MDAwOCI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI3MS4xODc1IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxODcuOTk5MyIgeD0iMjY4IiB5PSI3OS4yOTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE2Ny45OTkzIiB4PSIyNzgiIHk9Ijk1LjI5MiI+JiMxMjQ1MDsmIzEyNTAzOyYjMTI1MjI7JiMxMjQ2NTsmIzEyNTQwOyYjMTI0NzE7JiMxMjUxOTsmIzEyNTMxOyYjMTI0Njk7JiMxMjU0MDsmIzEyNDk5OyYjMTI0NzM7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyNS45OTk1IiB4PSIyNzgiIHk9IjExMS41ODg5Ij4mIzEyNTM5OyYjMTI1MTg7JiMxMjU0MDsmIzEyNDczOyYjMTI0NjU7JiMxMjU0MDsmIzEyNDczOyYjMjM0NTU7JiMzNTAxMzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTUzLjk5OTMiIHg9IjI3OCIgeT0iMTI3Ljg4NTciPiYjMTI1Mzk7JiMxMjQ4ODsmIzEyNTIxOyYjMTI1MzE7JiMxMjQ3MDsmIzEyNDYzOyYjMTI0NzE7JiMxMjUxOTsmIzEyNTMxOyYjMjEwNDY7JiMyNDQ4MTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTcuOTk5NiIgeD0iMjc4IiB5PSIxNDQuMTgyNiI+JiMxMjUzOTsmIzEyNDg5OyYjMTI1MTM7JiMxMjQ1MjsmIzEyNTMxOyYjMzU1MTk7JiMyNTk3Mjs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgZW50aXR5LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iRG9tYWluIExheWVyLmVudGl0eSIgZGF0YS1zb3VyY2UtbGluZT0iMTgiIGlkPSJlbnQwMDEwIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjcxLjE4NzUiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEzMS45OTk1IiB4PSI1MTIiIHk9IjIxMC40ODY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgzLjk5OTYiIHg9IjUyMiIgeT0iMjI2LjQ4MiI+JiMxMjQ1NjsmIzEyNTMxOyYjMTI0ODY7JiMxMjQ1MTsmIzEyNDg2OyYjMTI0NTE7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExMS45OTk1IiB4PSI1MjIiIHk9IjI0Mi43Nzg5Ij4mIzEyNTM5OyYjMTI0OTk7JiMxMjQ3MjsmIzEyNDkzOyYjMTI0NzM7JiMxMjUyMzsmIzEyNTQwOyYjMTI1MjM7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjUyMiIgeT0iMjU5LjA3NTciPiYjMTI1Mzk7JiMyOTM2NjsmIzI0OTA3OyYjMzE2NDk7JiMyOTcwMjs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iNTIyIiB5PSIyNzUuMzcyNiI+JiMxMjUzOTsmIzE5OTgxOyYjMjI3OTM7JiMyNjQ2NTsmIzIwMjE0OzwvdGV4dD48L2c+PCEtLWVudGl0eSB2by0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkRvbWFpbiBMYXllci52byIgZGF0YS1zb3VyY2UtbGluZT0iMjAiIGlkPSJlbnQwMDExIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjcxLjE4NzUiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjExNy45OTk2IiB4PSI2NzkiIHk9IjIxMC40ODY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk3Ljk5OTYiIHg9IjY4OSIgeT0iMjI2LjQ4MiI+JiMyMDUxNjsmIzEyNDU4OyYjMTI1MDI7JiMxMjQ3MjsmIzEyNDU1OyYjMTI0NjM7JiMxMjQ4ODs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iNjg5IiB5PSIyNDIuNzc4OSI+JiMxMjUzOTsmIzE5OTgxOyYjMjI3OTM7JiMyNDYxNTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iNjg5IiB5PSIyNTkuMDc1NyI+JiMxMjUzOTsmIzIxNTE2OyYjMjA1MTY7JiMyNDYxNTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iNjg5IiB5PSIyNzUuMzcyNiI+JiMxMjUzOTsmIzMzMjU4OyYjMjQwNDk7JiMyMzQzNjsmIzMyMDgwOyYjMjQ2MTU7PC90ZXh0PjwvZz48IS0tZW50aXR5IGRvbWFpbl9zZXJ2aWNlLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iRG9tYWluIExheWVyLmRvbWFpbl9zZXJ2aWNlIiBkYXRhLXNvdXJjZS1saW5lPSIyMiIgaWQ9ImVudDAwMTIiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNTQuODkwNiIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTczLjk5OTMiIHg9IjgzMiIgeT0iMjE4LjYzNjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTExLjk5OTUiIHg9Ijg0MiIgeT0iMjM0LjYzMiI+JiMxMjQ4OTsmIzEyNTEzOyYjMTI0NTI7JiMxMjUzMTsmIzEyNDY5OyYjMTI1NDA7JiMxMjQ5OTsmIzEyNDczOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTMuOTk5MyIgeD0iODQyIiB5PSIyNTAuOTI4OSI+JiMxMjUzOTsmIzM1MDc5OyYjMjU5Njg7JiMxMjQ1NjsmIzEyNTMxOyYjMTI0ODY7JiMxMjQ1MTsmIzEyNDg2OyYjMTI0NTE7JiMyNTgwNTsmIzIwMzE2OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjUuOTk5NSIgeD0iODQyIiB5PSIyNjcuMjI1NyI+JiMxMjUzOTsmIzEyNDg5OyYjMTI1MTM7JiMxMjQ1MjsmIzEyNTMxOyYjMTI1MjU7JiMxMjQ3MjsmIzEyNDgzOyYjMTI0NjM7PC90ZXh0PjwvZz48IS0tbGluayBpbl9hZGFwdGVyIHRvIGluX3BvcnQtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwMyIgZGF0YS1lbnRpdHktMj0iZW50MDAwNiIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjI1IiBpZD0ibG5rMTMiPjxwYXRoIGQ9Ik0zOTEuNSwzNTYuNTI2OSBDMzk1LjU4LDMwNC4zNTY5IDM5My41OCwyMTcuMTQ2OSAzNDQsMTY3LjQ4NjkgQzMxNC4zMSwxMzcuNzQ2OSAyOTEuOTQsMTU5Ljk1NjkgMjUxLDE1MC40ODY5IEMyNDUuMzgsMTQ5LjE4NjkgMjQ1LjQ1MDMsMTQ5LjI0NDUgMjM5LjY2MDMsMTQ3Ljc5NDUiIGZpbGw9Im5vbmUiIGlkPSJpbl9hZGFwdGVyLXRvLWluX3BvcnQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjIzMy44NCwxNDYuMzM2OSwyNDEuNTk4NywxNTIuNDAzNCwyMzguNjkwMiwxNDcuNTUxNSwyNDMuNTQyMSwxNDQuNjQzMSwyMzMuODQsMTQ2LjMzNjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLWxpbmsgYXBwX3NlcnZpY2UgdG8gb3V0X3BvcnQtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwOCIgZGF0YS1lbnRpdHktMj0iZW50MDAwNyIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjI2IiBpZD0ibG5rMTQiPjxwYXRoIGQ9Ik0zMjEuOTUsMTUwLjg0NjkgQzMwMC44OSwxNjkuMjM2OSAyNzkuNjcxNCwxODcuNzYyNyAyNTguNjAxNCwyMDYuMTQyNyIgZmlsbD0ibm9uZSIgaWQ9ImFwcF9zZXJ2aWNlLXRvLW91dF9wb3J0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyNTQuMDgsMjEwLjA4NjksMjYzLjQ5MTYsMjA3LjE4NDksMjU3Ljg0NzksMjA2LjgwMDEsMjU4LjIzMjcsMjAxLjE1NjMsMjU0LjA4LDIxMC4wODY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rIG91dF9wb3J0IHRvIG91dF9hZGFwdGVyLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDciIGRhdGEtZW50aXR5LTI9ImVudDAwMDQiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSIyNyIgaWQ9ImxuazE1Ij48cGF0aCBkPSJNMjEzLjMxLDI4Mi4wMjY5IEMyMTIuODgsMzA0LjA3NjkgMjEyLjQyNzYsMzI2LjcxOCAyMTEuOTY3NiwzNTAuMTg4IiBmaWxsPSJub25lIiBpZD0ib3V0X3BvcnQtdG8tb3V0X2FkYXB0ZXIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjIxMS44NSwzNTYuMTg2OSwyMTYuMDI1NiwzNDcuMjY3LDIxMS45NDgsMzUxLjE4NzgsMjA4LjAyNzEsMzQ3LjExMDIsMjExLjg1LDM1Ni4xODY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rIGFwcF9zZXJ2aWNlIHRvIGVudGl0eS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDA4IiBkYXRhLWVudGl0eS0yPSJlbnQwMDEwIiBkYXRhLWxpbmstdHlwZT0iZGVwZW5kZW5jeSIgZGF0YS1zb3VyY2UtbGluZT0iMjgiIGlkPSJsbmsxNiI+PHBhdGggZD0iTTQ0MS4zNywxNTAuODY2OSBDNDUxLjg0LDE1Ni4xMjY5IDQ2Mi4yOSwxNjEuNzI2OSA0NzIsMTY3LjQ4NjkgQzQ5My4yOCwxODAuMTA2OSA1MTAuNzg2NCwxOTIuMzQ1MSA1MjkuMzk2NCwyMDYuNDM1MSIgZmlsbD0ibm9uZSIgaWQ9ImFwcF9zZXJ2aWNlLXRvLWVudGl0eSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNTM0LjE4LDIxMC4wNTY5LDUyOS40MTkxLDIwMS40MzUyLDUzMC4xOTM3LDIwNy4wMzg3LDUyNC41OTAxLDIwNy44MTMzLDUzNC4xOCwyMTAuMDU2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayBhcHBfc2VydmljZSB0byBkb21haW5fc2VydmljZS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDA4IiBkYXRhLWVudGl0eS0yPSJlbnQwMDEyIiBkYXRhLWxpbmstdHlwZT0iZGVwZW5kZW5jeSIgZGF0YS1zb3VyY2UtbGluZT0iMjkiIGlkPSJsbmsxNyI+PHBhdGggZD0iTTQ1Ni4xNCwxMjAuOTA2OSBDNTY5LjAxLDEyNy45MDY5IDc1MC44OSwxNDIuNjM2OSA4MTQsMTY3LjQ4NjkgQzg0My4zMiwxNzkuMDI2OSA4NjcuMjU4NiwxOTYuOTI4NiA4ODcuMTI4NiwyMTQuNTI4NiIgZmlsbD0ibm9uZSIgaWQ9ImFwcF9zZXJ2aWNlLXRvLWRvbWFpbl9zZXJ2aWNlIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI4OTEuNjIsMjE4LjUwNjksODg3LjUzNTEsMjA5LjU0NTEsODg3Ljg3NzEsMjE1LjE5MTYsODgyLjIzMDYsMjE1LjUzMzcsODkxLjYyLDIxOC41MDY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjw/cGxhbnR1bWwtc3JjIFZQRlZKWEQxNUNSbC1uSUpVZ0NybjFqWnZDUWFCSkdYQ1A0ZXRmY0dKTGREOWRMdGlucjhZMzZmRXE5ZkFONEoxMkE4ZkJQUUE1WWZJNmR2cnVTdnA2dnYyd1RkanpqaktNeXNpc1RjcGxVVHRwYjM1UGdJMlJWVXl0ZVB0akt3bG14dXlnVEdvOTJKTDU5VllRdG1YRmhJYURCS2M0dElNS0NjWndMdnNJMnRlcEVJSmNOWkpmWlNZaU42blhDbnlZUUtiOG1QNGV2NC1DOHRkankyeW9rbTNCMERDRGwwcFlFSDVvZ21pd1ZacHdQOE41RWZlUUxJaWU0bk81S21WdUF2MnNPQnMxOGx2LW1GTXp4RTBTUXNXSHM5WFZEbm5yd29sMXNoVXVyYkhNZW1KdTFMbjk0bWFUOTRLUVNicnJvZXhvWHgtY3o3aWd3YjVRZVB5eG9zcW9hak83MGlQZy1rTjVyeW5YelVOaHpja3o3OVlVakNvUlBFRk5yTmtVc3dITUxqYmxoSVJtU09IZEt6ZklHYmdjWGczLTJhUGIxb2JwbkZvdDRmQk5TdjlYQTlxVlp6Y25veHJQeUJCZnZWeG1PMWl1bktzaFl4MWNPNTNSTFNfckRGVTZ0SmtUbnBwUGY3bUJ2cUp4RlNGR3lyZ19QZXdTQjkzTEgzZWRyOF96VXIzdmpFT3ZDTnJrdHlIUVRVM0UxcHNSYlhkelFXREZQZDB3VVg3Y21oY0NVZWpJZktGM18wbGhrZ2xRRWpHRkU0Uk0xeFVCNjFyTmZ2LTVBM05uUXo4cGJXSFJVS0poTGpoX3I2SnZBa0p3VGJPcXY5b2FDVDdERFVJdWhORkQ2aC1DRm4xXzdIR0F5R2dVMngyNlI5X1ZmRVhVcWNpMUtTdjdxaVAxenRkN3AzTmJYc1FhTjdNaUowTE5FYkVxdFJuUWtwMWpnSExRaEctSzFsQ2NLbW5UMmxUcENBeGc4c2xxRlV2S3A1UE11TG5FN1VOb1RSdklUck5ZaXVudlE4T1V1dkJHMC1HRUNsaTNsYmhCcnNVQkYybTFDUG9DMS1PQ0xDLTRFZjZNR04xRGpfZXNIYXY5NF9YMDd5NkZUN2ZCVm1leHJkRGRwMzhwT1M3ZEptMW0wMD8+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<h2 id="213-api">21.3 マスタ API の実装<a class="headerlink" href="#213-api" title="Permanent link">&para;</a></h2>
<h3 id="2131-apicrud">21.3.1 勘定科目マスタ API（CRUD エンドポイント）<a class="headerlink" href="#2131-apicrud" title="Permanent link">&para;</a></h3>
<p>勘定科目マスタの API エンドポイントを設計します。</p>
<table>
<thead>
<tr>
<th>メソッド</th>
<th>パス</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>/api/accounts</td>
<td>勘定科目一覧取得</td>
</tr>
<tr>
<td>GET</td>
<td>/api/accounts/{accountCode}</td>
<td>勘定科目取得</td>
</tr>
<tr>
<td>GET</td>
<td>/api/accounts/{accountCode}/hierarchy</td>
<td>科目階層取得</td>
</tr>
<tr>
<td>POST</td>
<td>/api/accounts</td>
<td>勘定科目登録</td>
</tr>
<tr>
<td>PUT</td>
<td>/api/accounts/{accountCode}</td>
<td>勘定科目更新</td>
</tr>
<tr>
<td>DELETE</td>
<td>/api/accounts/{accountCode}</td>
<td>勘定科目削除</td>
</tr>
</tbody>
</table>
<details>
<summary>Output Port（リポジトリインターフェース）</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/accounting/application/port/out/AccountRepository.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.application.port.out</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.account.AccountMaster</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Optional</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">AccountRepository</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 勘定科目コードで検索</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">AccountMaster</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByCode</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">accountCode</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 全件取得</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">AccountMaster</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findAll</span><span class="p">();</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * BSPL区分で検索</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">AccountMaster</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByBsPlType</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">bsPlType</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 科目パスで検索（チルダ連結方式）</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">AccountMaster</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByPathLike</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">pathPattern</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 計上科目のみ取得</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">AccountMaster</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findPostingAccounts</span><span class="p">();</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 保存（新規・更新）</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">save</span><span class="p">(</span><span class="n">AccountMaster</span><span class="w"> </span><span class="n">account</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 削除</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">delete</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">accountCode</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 存在確認</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">exists</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">accountCode</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>Input Port（ユースケースインターフェース）</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/accounting/application/port/in/AccountUseCase.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.application.port.in</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.application.port.in.dto.*</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">AccountUseCase</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 勘定科目を取得</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">AccountResponse</span><span class="w"> </span><span class="nf">getAccount</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">accountCode</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 全勘定科目を取得</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">AccountResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getAllAccounts</span><span class="p">();</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * BS/PL区分で勘定科目を取得</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">AccountResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getAccountsByBsPlType</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">bsPlType</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 科目階層を取得（親科目以下の全科目）</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">AccountResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getAccountHierarchy</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">parentAccountCode</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 計上科目のみ取得</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">AccountResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getPostingAccounts</span><span class="p">();</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 勘定科目を登録</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">AccountResponse</span><span class="w"> </span><span class="nf">createAccount</span><span class="p">(</span><span class="n">CreateAccountCommand</span><span class="w"> </span><span class="n">command</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 勘定科目を更新</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">AccountResponse</span><span class="w"> </span><span class="nf">updateAccount</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">accountCode</span><span class="p">,</span><span class="w"> </span><span class="n">UpdateAccountCommand</span><span class="w"> </span><span class="n">command</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 勘定科目を削除</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">deleteAccount</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">accountCode</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="2132-tdd-red-green-refactor">21.3.2 TDD による実装（Red-Green-Refactor）<a class="headerlink" href="#2132-tdd-red-green-refactor" title="Permanent link">&para;</a></h3>
<h4 id="red">Red: 失敗するテストを書く<a class="headerlink" href="#red" title="Permanent link">&para;</a></h4>
<details>
<summary>Controller テスト</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/test/java/com/example/accounting/infrastructure/adapter/in/web/AccountControllerTest.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.infrastructure.adapter.in.web</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.application.port.in.AccountUseCase</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.application.port.in.dto.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.fasterxml.jackson.databind.ObjectMapper</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.boot.test.mock.mockito.MockBean</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.http.MediaType</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.test.web.servlet.MockMvc</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="kn">import static</span><span class="w"> </span><span class="nn">org.mockito.ArgumentMatchers.*</span><span class="p">;</span>
<span class="kn">import static</span><span class="w"> </span><span class="nn">org.mockito.BDDMockito.*</span><span class="p">;</span>
<span class="kn">import static</span><span class="w"> </span><span class="nn">org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*</span><span class="p">;</span>
<span class="kn">import static</span><span class="w"> </span><span class="nn">org.springframework.test.web.servlet.result.MockMvcResultMatchers.*</span><span class="p">;</span>

<span class="nd">@WebMvcTest</span><span class="p">(</span><span class="n">AccountController</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;勘定科目マスタ API&quot;</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">AccountControllerTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">MockMvc</span><span class="w"> </span><span class="n">mockMvc</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ObjectMapper</span><span class="w"> </span><span class="n">objectMapper</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@MockBean</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">AccountUseCase</span><span class="w"> </span><span class="n">accountUseCase</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;GET /api/accounts/{accountCode}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">GetAccount</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;勘定科目を取得できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">canGetAccount</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Given</span>
<span class="w">            </span><span class="n">AccountResponse</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AccountResponse</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">accountCode</span><span class="p">(</span><span class="s">&quot;11110&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">accountName</span><span class="p">(</span><span class="s">&quot;現金&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">accountShortName</span><span class="p">(</span><span class="s">&quot;現金&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">bsPlType</span><span class="p">(</span><span class="s">&quot;BS&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">dcType</span><span class="p">(</span><span class="s">&quot;借方&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">elementType</span><span class="p">(</span><span class="s">&quot;資産&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">summaryType</span><span class="p">(</span><span class="s">&quot;計上科目&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">            </span><span class="n">given</span><span class="p">(</span><span class="n">accountUseCase</span><span class="p">.</span><span class="na">getAccount</span><span class="p">(</span><span class="s">&quot;11110&quot;</span><span class="p">)).</span><span class="na">willReturn</span><span class="p">(</span><span class="n">response</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// When &amp; Then</span>
<span class="w">            </span><span class="n">mockMvc</span><span class="p">.</span><span class="na">perform</span><span class="p">(</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;/api/accounts/{accountCode}&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;11110&quot;</span><span class="p">))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">status</span><span class="p">().</span><span class="na">isOk</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">jsonPath</span><span class="p">(</span><span class="s">&quot;$.accountCode&quot;</span><span class="p">).</span><span class="na">value</span><span class="p">(</span><span class="s">&quot;11110&quot;</span><span class="p">))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">jsonPath</span><span class="p">(</span><span class="s">&quot;$.accountName&quot;</span><span class="p">).</span><span class="na">value</span><span class="p">(</span><span class="s">&quot;現金&quot;</span><span class="p">))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">jsonPath</span><span class="p">(</span><span class="s">&quot;$.bsPlType&quot;</span><span class="p">).</span><span class="na">value</span><span class="p">(</span><span class="s">&quot;BS&quot;</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;存在しない勘定科目は404を返す&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">notFoundForNonExistent</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Given</span>
<span class="w">            </span><span class="n">given</span><span class="p">(</span><span class="n">accountUseCase</span><span class="p">.</span><span class="na">getAccount</span><span class="p">(</span><span class="s">&quot;99999&quot;</span><span class="p">)).</span><span class="na">willThrow</span><span class="p">(</span>
<span class="w">                    </span><span class="k">new</span><span class="w"> </span><span class="n">AccountNotFoundException</span><span class="p">(</span><span class="s">&quot;99999&quot;</span><span class="p">));</span>

<span class="w">            </span><span class="c1">// When &amp; Then</span>
<span class="w">            </span><span class="n">mockMvc</span><span class="p">.</span><span class="na">perform</span><span class="p">(</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;/api/accounts/{accountCode}&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;99999&quot;</span><span class="p">))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">status</span><span class="p">().</span><span class="na">isNotFound</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;POST /api/accounts&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">CreateAccount</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;勘定科目を登録できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">canCreateAccount</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Given</span>
<span class="w">            </span><span class="n">CreateAccountCommand</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CreateAccountCommand</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">accountCode</span><span class="p">(</span><span class="s">&quot;11150&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">accountName</span><span class="p">(</span><span class="s">&quot;手許現金&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">bsPlType</span><span class="p">(</span><span class="s">&quot;BS&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">dcType</span><span class="p">(</span><span class="s">&quot;借方&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">elementType</span><span class="p">(</span><span class="s">&quot;資産&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">summaryType</span><span class="p">(</span><span class="s">&quot;計上科目&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">            </span><span class="n">AccountResponse</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AccountResponse</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">accountCode</span><span class="p">(</span><span class="s">&quot;11150&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">accountName</span><span class="p">(</span><span class="s">&quot;手許現金&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">bsPlType</span><span class="p">(</span><span class="s">&quot;BS&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">dcType</span><span class="p">(</span><span class="s">&quot;借方&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">            </span><span class="n">given</span><span class="p">(</span><span class="n">accountUseCase</span><span class="p">.</span><span class="na">createAccount</span><span class="p">(</span><span class="n">any</span><span class="p">())).</span><span class="na">willReturn</span><span class="p">(</span><span class="n">response</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// When &amp; Then</span>
<span class="w">            </span><span class="n">mockMvc</span><span class="p">.</span><span class="na">perform</span><span class="p">(</span><span class="n">post</span><span class="p">(</span><span class="s">&quot;/api/accounts&quot;</span><span class="p">)</span>
<span class="w">                            </span><span class="p">.</span><span class="na">contentType</span><span class="p">(</span><span class="n">MediaType</span><span class="p">.</span><span class="na">APPLICATION_JSON</span><span class="p">)</span>
<span class="w">                            </span><span class="p">.</span><span class="na">content</span><span class="p">(</span><span class="n">objectMapper</span><span class="p">.</span><span class="na">writeValueAsString</span><span class="p">(</span><span class="n">command</span><span class="p">)))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">status</span><span class="p">().</span><span class="na">isCreated</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">jsonPath</span><span class="p">(</span><span class="s">&quot;$.accountCode&quot;</span><span class="p">).</span><span class="na">value</span><span class="p">(</span><span class="s">&quot;11150&quot;</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;バリデーションエラーで400を返す&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">badRequestForValidationError</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Given</span>
<span class="w">            </span><span class="n">CreateAccountCommand</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CreateAccountCommand</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">accountCode</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">)</span><span class="w">  </span><span class="c1">// 必須項目が空</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">            </span><span class="c1">// When &amp; Then</span>
<span class="w">            </span><span class="n">mockMvc</span><span class="p">.</span><span class="na">perform</span><span class="p">(</span><span class="n">post</span><span class="p">(</span><span class="s">&quot;/api/accounts&quot;</span><span class="p">)</span>
<span class="w">                            </span><span class="p">.</span><span class="na">contentType</span><span class="p">(</span><span class="n">MediaType</span><span class="p">.</span><span class="na">APPLICATION_JSON</span><span class="p">)</span>
<span class="w">                            </span><span class="p">.</span><span class="na">content</span><span class="p">(</span><span class="n">objectMapper</span><span class="p">.</span><span class="na">writeValueAsString</span><span class="p">(</span><span class="n">command</span><span class="p">)))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">status</span><span class="p">().</span><span class="na">isBadRequest</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h4 id="green">Green: テストを通す最小限の実装<a class="headerlink" href="#green" title="Permanent link">&para;</a></h4>
<details>
<summary>Controller の実装</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/accounting/infrastructure/adapter/in/web/AccountController.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.infrastructure.adapter.in.web</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.application.port.in.AccountUseCase</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.application.port.in.dto.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">io.swagger.v3.oas.annotations.Operation</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">io.swagger.v3.oas.annotations.Parameter</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">io.swagger.v3.oas.annotations.responses.ApiResponse</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">io.swagger.v3.oas.annotations.tags.Tag</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">jakarta.validation.Valid</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.http.HttpStatus</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.http.ResponseEntity</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.web.bind.annotation.*</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="nd">@RestController</span>
<span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/api/accounts&quot;</span><span class="p">)</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="nd">@Tag</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;勘定科目マスタ&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;勘定科目マスタの管理API&quot;</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AccountController</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">AccountUseCase</span><span class="w"> </span><span class="n">accountUseCase</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/{accountCode}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@Operation</span><span class="p">(</span><span class="n">summary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;勘定科目取得&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;勘定科目コードで勘定科目を取得します&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@ApiResponse</span><span class="p">(</span><span class="n">responseCode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;200&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;取得成功&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@ApiResponse</span><span class="p">(</span><span class="n">responseCode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;404&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;勘定科目が存在しない&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">AccountResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getAccount</span><span class="p">(</span>
<span class="w">            </span><span class="nd">@Parameter</span><span class="p">(</span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;勘定科目コード&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="nd">@PathVariable</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">accountCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="n">accountUseCase</span><span class="p">.</span><span class="na">getAccount</span><span class="p">(</span><span class="n">accountCode</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@GetMapping</span>
<span class="w">    </span><span class="nd">@Operation</span><span class="p">(</span><span class="n">summary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;勘定科目一覧取得&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;勘定科目の一覧を取得します&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">AccountResponse</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nf">getAccounts</span><span class="p">(</span>
<span class="w">            </span><span class="nd">@Parameter</span><span class="p">(</span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;BSPL区分（BS/PL）&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="nd">@RequestParam</span><span class="p">(</span><span class="n">required</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">bsPlType</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@Parameter</span><span class="p">(</span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;計上科目のみ&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="nd">@RequestParam</span><span class="p">(</span><span class="n">required</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="n">defaultValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;false&quot;</span><span class="p">)</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">postingOnly</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">AccountResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="n">accounts</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">bsPlType</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">accounts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">accountUseCase</span><span class="p">.</span><span class="na">getAccountsByBsPlType</span><span class="p">(</span><span class="n">bsPlType</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">postingOnly</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">accounts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">accountUseCase</span><span class="p">.</span><span class="na">getPostingAccounts</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">accounts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">accountUseCase</span><span class="p">.</span><span class="na">getAllAccounts</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="n">accounts</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@PostMapping</span>
<span class="w">    </span><span class="nd">@Operation</span><span class="p">(</span><span class="n">summary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;勘定科目登録&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;新規勘定科目を登録します&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@ApiResponse</span><span class="p">(</span><span class="n">responseCode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;201&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;登録成功&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@ApiResponse</span><span class="p">(</span><span class="n">responseCode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;400&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;バリデーションエラー&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">AccountResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">createAccount</span><span class="p">(</span>
<span class="w">            </span><span class="nd">@Valid</span><span class="w"> </span><span class="nd">@RequestBody</span><span class="w"> </span><span class="n">CreateAccountCommand</span><span class="w"> </span><span class="n">command</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">AccountResponse</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">accountUseCase</span><span class="p">.</span><span class="na">createAccount</span><span class="p">(</span><span class="n">command</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">status</span><span class="p">(</span><span class="n">HttpStatus</span><span class="p">.</span><span class="na">CREATED</span><span class="p">).</span><span class="na">body</span><span class="p">(</span><span class="n">response</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@PutMapping</span><span class="p">(</span><span class="s">&quot;/{accountCode}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@Operation</span><span class="p">(</span><span class="n">summary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;勘定科目更新&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;勘定科目を更新します&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">AccountResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">updateAccount</span><span class="p">(</span>
<span class="w">            </span><span class="nd">@PathVariable</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">accountCode</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@Valid</span><span class="w"> </span><span class="nd">@RequestBody</span><span class="w"> </span><span class="n">UpdateAccountCommand</span><span class="w"> </span><span class="n">command</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="n">accountUseCase</span><span class="p">.</span><span class="na">updateAccount</span><span class="p">(</span><span class="n">accountCode</span><span class="p">,</span><span class="w"> </span><span class="n">command</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@DeleteMapping</span><span class="p">(</span><span class="s">&quot;/{accountCode}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@Operation</span><span class="p">(</span><span class="n">summary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;勘定科目削除&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;勘定科目を削除します&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@ApiResponse</span><span class="p">(</span><span class="n">responseCode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;204&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;削除成功&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">deleteAccount</span><span class="p">(</span><span class="nd">@PathVariable</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">accountCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">accountUseCase</span><span class="p">.</span><span class="na">deleteAccount</span><span class="p">(</span><span class="n">accountCode</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">noContent</span><span class="p">().</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h4 id="refactor-application-service">Refactor: Application Service の実装<a class="headerlink" href="#refactor-application-service" title="Permanent link">&para;</a></h4>
<details>
<summary>Application Service</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/accounting/application/service/AccountApplicationService.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.application.service</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.application.port.in.AccountUseCase</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.application.port.in.dto.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.application.port.out.AccountRepository</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.application.port.out.AccountConfigRepository</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.domain.model.account.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Service</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.transaction.annotation.Transactional</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.stream.Collectors</span><span class="p">;</span>

<span class="nd">@Service</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="nd">@Transactional</span><span class="p">(</span><span class="n">readOnly</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AccountApplicationService</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">AccountUseCase</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">AccountRepository</span><span class="w"> </span><span class="n">accountRepository</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">AccountConfigRepository</span><span class="w"> </span><span class="n">accountConfigRepository</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">AccountResponse</span><span class="w"> </span><span class="nf">getAccount</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">accountCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">AccountMaster</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">accountRepository</span><span class="p">.</span><span class="na">findByCode</span><span class="p">(</span><span class="n">accountCode</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">orElseThrow</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AccountNotFoundException</span><span class="p">(</span><span class="n">accountCode</span><span class="p">));</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">AccountResponse</span><span class="p">.</span><span class="na">from</span><span class="p">(</span><span class="n">account</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">AccountResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getAllAccounts</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">accountRepository</span><span class="p">.</span><span class="na">findAll</span><span class="p">().</span><span class="na">stream</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">AccountResponse</span><span class="p">::</span><span class="n">from</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">toList</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">AccountResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getAccountsByBsPlType</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">bsPlType</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">accountRepository</span><span class="p">.</span><span class="na">findByBsPlType</span><span class="p">(</span><span class="n">bsPlType</span><span class="p">).</span><span class="na">stream</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">AccountResponse</span><span class="p">::</span><span class="n">from</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">toList</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">AccountResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getAccountHierarchy</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">parentAccountCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">pathPattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;%&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">parentAccountCode</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;%&quot;</span><span class="p">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">accountRepository</span><span class="p">.</span><span class="na">findByPathLike</span><span class="p">(</span><span class="n">pathPattern</span><span class="p">).</span><span class="na">stream</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">AccountResponse</span><span class="p">::</span><span class="n">from</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">toList</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">AccountResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getPostingAccounts</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">accountRepository</span><span class="p">.</span><span class="na">findPostingAccounts</span><span class="p">().</span><span class="na">stream</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">AccountResponse</span><span class="p">::</span><span class="n">from</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">toList</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">AccountResponse</span><span class="w"> </span><span class="nf">createAccount</span><span class="p">(</span><span class="n">CreateAccountCommand</span><span class="w"> </span><span class="n">command</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">accountRepository</span><span class="p">.</span><span class="na">exists</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getAccountCode</span><span class="p">()))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AccountAlreadyExistsException</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getAccountCode</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">AccountMaster</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AccountMaster</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">accountCode</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getAccountCode</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">accountName</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getAccountName</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">accountShortName</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getAccountShortName</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">bsPlType</span><span class="p">(</span><span class="n">BsPlType</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getBsPlType</span><span class="p">()))</span>
<span class="w">                </span><span class="p">.</span><span class="na">dcType</span><span class="p">(</span><span class="n">AccountDcType</span><span class="p">.</span><span class="na">fromDisplayName</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getDcType</span><span class="p">()))</span>
<span class="w">                </span><span class="p">.</span><span class="na">elementType</span><span class="p">(</span><span class="n">ElementType</span><span class="p">.</span><span class="na">fromDisplayName</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getElementType</span><span class="p">()))</span>
<span class="w">                </span><span class="p">.</span><span class="na">summaryType</span><span class="p">(</span><span class="n">SummaryType</span><span class="p">.</span><span class="na">fromDisplayName</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getSummaryType</span><span class="p">()))</span>
<span class="w">                </span><span class="p">.</span><span class="na">taxCode</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getTaxCode</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">        </span><span class="n">accountRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">account</span><span class="p">);</span>

<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">accountPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">generateAccountPath</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getAccountCode</span><span class="p">(),</span><span class="w"> </span><span class="n">command</span><span class="p">.</span><span class="na">getParentAccountCode</span><span class="p">());</span>
<span class="w">        </span><span class="n">AccountConfig</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AccountConfig</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">accountCode</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getAccountCode</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">accountPath</span><span class="p">(</span><span class="n">accountPath</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">        </span><span class="n">accountConfigRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">config</span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">AccountResponse</span><span class="p">.</span><span class="na">from</span><span class="p">(</span><span class="n">account</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">AccountResponse</span><span class="w"> </span><span class="nf">updateAccount</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">accountCode</span><span class="p">,</span><span class="w"> </span><span class="n">UpdateAccountCommand</span><span class="w"> </span><span class="n">command</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">AccountMaster</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">accountRepository</span><span class="p">.</span><span class="na">findByCode</span><span class="p">(</span><span class="n">accountCode</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">orElseThrow</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AccountNotFoundException</span><span class="p">(</span><span class="n">accountCode</span><span class="p">));</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getAccountName</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">account</span><span class="p">.</span><span class="na">setAccountName</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getAccountName</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getAccountShortName</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">account</span><span class="p">.</span><span class="na">setAccountShortName</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="na">getAccountShortName</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">accountRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">account</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">AccountResponse</span><span class="p">.</span><span class="na">from</span><span class="p">(</span><span class="n">account</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">deleteAccount</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">accountCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">accountRepository</span><span class="p">.</span><span class="na">exists</span><span class="p">(</span><span class="n">accountCode</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AccountNotFoundException</span><span class="p">(</span><span class="n">accountCode</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">accountConfigRepository</span><span class="p">.</span><span class="na">delete</span><span class="p">(</span><span class="n">accountCode</span><span class="p">);</span>
<span class="w">        </span><span class="n">accountRepository</span><span class="p">.</span><span class="na">delete</span><span class="p">(</span><span class="n">accountCode</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">generateAccountPath</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">accountCode</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">parentAccountCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">parentAccountCode</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">parentAccountCode</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">accountCode</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">accountConfigRepository</span><span class="p">.</span><span class="na">findByCode</span><span class="p">(</span><span class="n">parentAccountCode</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">parent</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">parent</span><span class="p">.</span><span class="na">getAccountPath</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;~&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">accountCode</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">orElse</span><span class="p">(</span><span class="n">accountCode</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="2133-api">21.3.3 補助科目マスタ API<a class="headerlink" href="#2133-api" title="Permanent link">&para;</a></h3>
<p>補助科目は勘定科目に紐づく詳細区分で、得意先・仕入先・銀行口座などを管理します。</p>
<table>
<thead>
<tr>
<th>メソッド</th>
<th>パス</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>/api/accounts/{accountCode}/sub-accounts</td>
<td>補助科目一覧取得</td>
</tr>
<tr>
<td>POST</td>
<td>/api/accounts/{accountCode}/sub-accounts</td>
<td>補助科目登録</td>
</tr>
</tbody>
</table>
<h2 id="214-api">21.4 トランザクション API の実装<a class="headerlink" href="#214-api" title="Permanent link">&para;</a></h2>
<h3 id="2141-api">21.4.1 仕訳 API<a class="headerlink" href="#2141-api" title="Permanent link">&para;</a></h3>
<p>仕訳の登録・照会・訂正・取消を行う API を実装します。</p>
<table>
<thead>
<tr>
<th>メソッド</th>
<th>パス</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>/api/journals</td>
<td>仕訳一覧取得</td>
</tr>
<tr>
<td>GET</td>
<td>/api/journals/{journalNumber}</td>
<td>仕訳取得</td>
</tr>
<tr>
<td>POST</td>
<td>/api/journals</td>
<td>仕訳登録</td>
</tr>
<tr>
<td>POST</td>
<td>/api/journals/check-balance</td>
<td>貸借バランスチェック</td>
</tr>
<tr>
<td>POST</td>
<td>/api/journals/{journalNumber}/cancel</td>
<td>仕訳取消（赤黒処理）</td>
</tr>
<tr>
<td>POST</td>
<td>/api/journals/{journalNumber}/correct</td>
<td>仕訳訂正（赤黒処理）</td>
</tr>
</tbody>
</table>
<details>
<summary>仕訳ユースケースインターフェース</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/accounting/application/port/in/JournalUseCase.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.application.port.in</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.application.port.in.dto.*</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">JournalUseCase</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 仕訳を取得</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">JournalResponse</span><span class="w"> </span><span class="nf">getJournal</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">journalNumber</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 日付範囲で仕訳を検索</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getJournalsByDateRange</span><span class="p">(</span><span class="n">LocalDate</span><span class="w"> </span><span class="n">fromDate</span><span class="p">,</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">toDate</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 部門で仕訳を検索</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getJournalsByDepartment</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">departmentCode</span><span class="p">,</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">fromDate</span><span class="p">,</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">toDate</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 仕訳を登録</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">JournalResponse</span><span class="w"> </span><span class="nf">createJournal</span><span class="p">(</span><span class="n">CreateJournalCommand</span><span class="w"> </span><span class="n">command</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 仕訳を取消（赤黒処理）</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">JournalCancellationResult</span><span class="w"> </span><span class="nf">cancelJournal</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">journalNumber</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">reason</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 仕訳を訂正（赤黒処理）</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">JournalCorrectionResult</span><span class="w"> </span><span class="nf">correctJournal</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">journalNumber</span><span class="p">,</span><span class="w"> </span><span class="n">CreateJournalCommand</span><span class="w"> </span><span class="n">correctedData</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">reason</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 貸借バランスをチェック</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">BalanceCheckResult</span><span class="w"> </span><span class="nf">checkBalance</span><span class="p">(</span><span class="n">CreateJournalCommand</span><span class="w"> </span><span class="n">command</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>仕訳 Controller</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/accounting/infrastructure/adapter/in/web/JournalController.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.infrastructure.adapter.in.web</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.application.port.in.JournalUseCase</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.application.port.in.dto.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">io.swagger.v3.oas.annotations.Operation</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">io.swagger.v3.oas.annotations.Parameter</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">io.swagger.v3.oas.annotations.tags.Tag</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">jakarta.validation.Valid</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.format.annotation.DateTimeFormat</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.http.HttpStatus</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.http.ResponseEntity</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.web.bind.annotation.*</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="nd">@RestController</span>
<span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/api/journals&quot;</span><span class="p">)</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="nd">@Tag</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;仕訳&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;仕訳の管理API&quot;</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">JournalController</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">JournalUseCase</span><span class="w"> </span><span class="n">journalUseCase</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/{journalNumber}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@Operation</span><span class="p">(</span><span class="n">summary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;仕訳取得&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;仕訳伝票番号で仕訳を取得します&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">JournalResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getJournal</span><span class="p">(</span>
<span class="w">            </span><span class="nd">@Parameter</span><span class="p">(</span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;仕訳伝票番号&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="nd">@PathVariable</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">journalNumber</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="n">journalUseCase</span><span class="p">.</span><span class="na">getJournal</span><span class="p">(</span><span class="n">journalNumber</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@GetMapping</span>
<span class="w">    </span><span class="nd">@Operation</span><span class="p">(</span><span class="n">summary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;仕訳一覧取得&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;条件を指定して仕訳を検索します&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalResponse</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nf">getJournals</span><span class="p">(</span>
<span class="w">            </span><span class="nd">@Parameter</span><span class="p">(</span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;開始日&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="nd">@RequestParam</span><span class="w"> </span><span class="nd">@DateTimeFormat</span><span class="p">(</span><span class="n">iso</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DateTimeFormat</span><span class="p">.</span><span class="na">ISO</span><span class="p">.</span><span class="na">DATE</span><span class="p">)</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">fromDate</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@Parameter</span><span class="p">(</span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;終了日&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="nd">@RequestParam</span><span class="w"> </span><span class="nd">@DateTimeFormat</span><span class="p">(</span><span class="n">iso</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DateTimeFormat</span><span class="p">.</span><span class="na">ISO</span><span class="p">.</span><span class="na">DATE</span><span class="p">)</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">toDate</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@Parameter</span><span class="p">(</span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;部門コード&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="nd">@RequestParam</span><span class="p">(</span><span class="n">required</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">departmentCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">JournalResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="n">journals</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">departmentCode</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">journals</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">journalUseCase</span><span class="p">.</span><span class="na">getJournalsByDepartment</span><span class="p">(</span><span class="n">departmentCode</span><span class="p">,</span><span class="w"> </span><span class="n">fromDate</span><span class="p">,</span><span class="w"> </span><span class="n">toDate</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">journals</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">journalUseCase</span><span class="p">.</span><span class="na">getJournalsByDateRange</span><span class="p">(</span><span class="n">fromDate</span><span class="p">,</span><span class="w"> </span><span class="n">toDate</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="n">journals</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@PostMapping</span>
<span class="w">    </span><span class="nd">@Operation</span><span class="p">(</span><span class="n">summary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;仕訳登録&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;新規仕訳を登録します&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">JournalResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">createJournal</span><span class="p">(</span>
<span class="w">            </span><span class="nd">@Valid</span><span class="w"> </span><span class="nd">@RequestBody</span><span class="w"> </span><span class="n">CreateJournalCommand</span><span class="w"> </span><span class="n">command</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">JournalResponse</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">journalUseCase</span><span class="p">.</span><span class="na">createJournal</span><span class="p">(</span><span class="n">command</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">status</span><span class="p">(</span><span class="n">HttpStatus</span><span class="p">.</span><span class="na">CREATED</span><span class="p">).</span><span class="na">body</span><span class="p">(</span><span class="n">response</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@PostMapping</span><span class="p">(</span><span class="s">&quot;/check-balance&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@Operation</span><span class="p">(</span><span class="n">summary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;貸借バランスチェック&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;仕訳の貸借バランスをチェックします&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">BalanceCheckResult</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">checkBalance</span><span class="p">(</span>
<span class="w">            </span><span class="nd">@Valid</span><span class="w"> </span><span class="nd">@RequestBody</span><span class="w"> </span><span class="n">CreateJournalCommand</span><span class="w"> </span><span class="n">command</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="n">journalUseCase</span><span class="p">.</span><span class="na">checkBalance</span><span class="p">(</span><span class="n">command</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@PostMapping</span><span class="p">(</span><span class="s">&quot;/{journalNumber}/cancel&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@Operation</span><span class="p">(</span><span class="n">summary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;仕訳取消&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;仕訳を赤黒処理で取消します&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">JournalCancellationResult</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">cancelJournal</span><span class="p">(</span>
<span class="w">            </span><span class="nd">@PathVariable</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">journalNumber</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@RequestParam</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">reason</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="n">journalUseCase</span><span class="p">.</span><span class="na">cancelJournal</span><span class="p">(</span><span class="n">journalNumber</span><span class="p">,</span><span class="w"> </span><span class="n">reason</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@PostMapping</span><span class="p">(</span><span class="s">&quot;/{journalNumber}/correct&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@Operation</span><span class="p">(</span><span class="n">summary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;仕訳訂正&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;仕訳を赤黒処理で訂正します&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">JournalCorrectionResult</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">correctJournal</span><span class="p">(</span>
<span class="w">            </span><span class="nd">@PathVariable</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">journalNumber</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@RequestParam</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">reason</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@Valid</span><span class="w"> </span><span class="nd">@RequestBody</span><span class="w"> </span><span class="n">CreateJournalCommand</span><span class="w"> </span><span class="n">correctedData</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="n">journalUseCase</span><span class="p">.</span><span class="na">correctJournal</span><span class="p">(</span><span class="n">journalNumber</span><span class="p">,</span><span class="w"> </span><span class="n">correctedData</span><span class="p">,</span><span class="w"> </span><span class="n">reason</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="2142-api">21.4.2 残高照会 API<a class="headerlink" href="#2142-api" title="Permanent link">&para;</a></h3>
<p>日次残高・月次残高・部門別残高を照会する API を実装します。</p>
<table>
<thead>
<tr>
<th>メソッド</th>
<th>パス</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>/api/balances/daily</td>
<td>日次残高取得</td>
</tr>
<tr>
<td>GET</td>
<td>/api/balances/monthly</td>
<td>月次残高取得</td>
</tr>
<tr>
<td>GET</td>
<td>/api/balances/accounts/{accountCode}</td>
<td>勘定科目別残高取得</td>
</tr>
<tr>
<td>GET</td>
<td>/api/balances/departments</td>
<td>部門別残高取得</td>
</tr>
</tbody>
</table>
<details>
<summary>残高照会 Controller</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/accounting/infrastructure/adapter/in/web/BalanceController.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.infrastructure.adapter.in.web</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.application.port.in.BalanceUseCase</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.application.port.in.dto.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">io.swagger.v3.oas.annotations.Operation</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">io.swagger.v3.oas.annotations.Parameter</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">io.swagger.v3.oas.annotations.tags.Tag</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.format.annotation.DateTimeFormat</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.http.ResponseEntity</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.web.bind.annotation.*</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="nd">@RestController</span>
<span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/api/balances&quot;</span><span class="p">)</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="nd">@Tag</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;残高照会&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;勘定科目残高の照会API&quot;</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BalanceController</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">BalanceUseCase</span><span class="w"> </span><span class="n">balanceUseCase</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/daily&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@Operation</span><span class="p">(</span><span class="n">summary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;日次残高取得&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;指定日の勘定科目残高を取得します&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">DailyBalanceResponse</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nf">getDailyBalances</span><span class="p">(</span>
<span class="w">            </span><span class="nd">@Parameter</span><span class="p">(</span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;対象日&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="nd">@RequestParam</span><span class="w"> </span><span class="nd">@DateTimeFormat</span><span class="p">(</span><span class="n">iso</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DateTimeFormat</span><span class="p">.</span><span class="na">ISO</span><span class="p">.</span><span class="na">DATE</span><span class="p">)</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">date</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@Parameter</span><span class="p">(</span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;勘定科目コード（省略時は全科目）&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="nd">@RequestParam</span><span class="p">(</span><span class="n">required</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">accountCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="n">balanceUseCase</span><span class="p">.</span><span class="na">getDailyBalances</span><span class="p">(</span><span class="n">date</span><span class="p">,</span><span class="w"> </span><span class="n">accountCode</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/monthly&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@Operation</span><span class="p">(</span><span class="n">summary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;月次残高取得&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;指定月の勘定科目残高を取得します&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">MonthlyBalanceResponse</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nf">getMonthlyBalances</span><span class="p">(</span>
<span class="w">            </span><span class="nd">@Parameter</span><span class="p">(</span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;決算期&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="nd">@RequestParam</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">fiscalYear</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@Parameter</span><span class="p">(</span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;月度&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="nd">@RequestParam</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">month</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="n">balanceUseCase</span><span class="p">.</span><span class="na">getMonthlyBalances</span><span class="p">(</span><span class="n">fiscalYear</span><span class="p">,</span><span class="w"> </span><span class="n">month</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/accounts/{accountCode}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@Operation</span><span class="p">(</span><span class="n">summary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;勘定科目別残高取得&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;勘定科目の期間別残高を取得します&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">AccountBalanceSummary</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getAccountBalanceSummary</span><span class="p">(</span>
<span class="w">            </span><span class="nd">@PathVariable</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">accountCode</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@RequestParam</span><span class="w"> </span><span class="nd">@DateTimeFormat</span><span class="p">(</span><span class="n">iso</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DateTimeFormat</span><span class="p">.</span><span class="na">ISO</span><span class="p">.</span><span class="na">DATE</span><span class="p">)</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">fromDate</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@RequestParam</span><span class="w"> </span><span class="nd">@DateTimeFormat</span><span class="p">(</span><span class="n">iso</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DateTimeFormat</span><span class="p">.</span><span class="na">ISO</span><span class="p">.</span><span class="na">DATE</span><span class="p">)</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">toDate</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="n">balanceUseCase</span><span class="p">.</span><span class="na">getAccountBalanceSummary</span><span class="p">(</span><span class="n">accountCode</span><span class="p">,</span><span class="w"> </span><span class="n">fromDate</span><span class="p">,</span><span class="w"> </span><span class="n">toDate</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/departments&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@Operation</span><span class="p">(</span><span class="n">summary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;部門別残高取得&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;部門別の勘定科目残高を取得します&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">DepartmentBalanceResponse</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nf">getDepartmentBalances</span><span class="p">(</span>
<span class="w">            </span><span class="nd">@RequestParam</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">fiscalYear</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@RequestParam</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">month</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@RequestParam</span><span class="p">(</span><span class="n">required</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">accountCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="n">balanceUseCase</span><span class="p">.</span><span class="na">getDepartmentBalances</span><span class="p">(</span><span class="n">fiscalYear</span><span class="p">,</span><span class="w"> </span><span class="n">month</span><span class="p">,</span><span class="w"> </span><span class="n">accountCode</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="2143-api">21.4.3 試算表 API<a class="headerlink" href="#2143-api" title="Permanent link">&para;</a></h3>
<p>日計表と合計残高試算表を出力する API を実装します。</p>
<details>
<summary>帳票出力 Controller</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/accounting/infrastructure/adapter/in/web/ReportController.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.infrastructure.adapter.in.web</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.application.port.in.BalanceUseCase</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.application.port.in.dto.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">io.swagger.v3.oas.annotations.Operation</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">io.swagger.v3.oas.annotations.tags.Tag</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.format.annotation.DateTimeFormat</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.http.ResponseEntity</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.web.bind.annotation.*</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>

<span class="nd">@RestController</span>
<span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/api/reports&quot;</span><span class="p">)</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="nd">@Tag</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;帳票出力&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;会計帳票の出力API&quot;</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ReportController</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">BalanceUseCase</span><span class="w"> </span><span class="n">balanceUseCase</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/daily-report&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@Operation</span><span class="p">(</span><span class="n">summary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;日計表取得&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;指定日の日計表データを取得します&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">DailyReportResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getDailyReport</span><span class="p">(</span>
<span class="w">            </span><span class="nd">@RequestParam</span><span class="w"> </span><span class="nd">@DateTimeFormat</span><span class="p">(</span><span class="n">iso</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DateTimeFormat</span><span class="p">.</span><span class="na">ISO</span><span class="p">.</span><span class="na">DATE</span><span class="p">)</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">date</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="n">balanceUseCase</span><span class="p">.</span><span class="na">getDailyReport</span><span class="p">(</span><span class="n">date</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/trial-balance&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@Operation</span><span class="p">(</span><span class="n">summary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;合計残高試算表取得&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;指定月の合計残高試算表を取得します&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">TrialBalanceResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getTrialBalance</span><span class="p">(</span>
<span class="w">            </span><span class="nd">@RequestParam</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">fiscalYear</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@RequestParam</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">month</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="n">balanceUseCase</span><span class="p">.</span><span class="na">getTrialBalance</span><span class="p">(</span><span class="n">fiscalYear</span><span class="p">,</span><span class="w"> </span><span class="n">month</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>合計残高試算表レスポンス DTO</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/accounting/application/port/in/dto/TrialBalanceResponse.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.application.port.in.dto</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Builder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TrialBalanceResponse</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">fiscalYear</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">month</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">TrialBalanceLine</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lines</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">TrialBalanceTotals</span><span class="w"> </span><span class="n">totals</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Data</span>
<span class="w">    </span><span class="nd">@Builder</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TrialBalanceLine</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">accountCode</span><span class="p">;</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">accountName</span><span class="p">;</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">bsPlType</span><span class="p">;</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">dcType</span><span class="p">;</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">openingBalance</span><span class="p">;</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">debitAmount</span><span class="p">;</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">creditAmount</span><span class="p">;</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">closingBalance</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Data</span>
<span class="w">    </span><span class="nd">@Builder</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TrialBalanceTotals</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">totalOpeningDebit</span><span class="p">;</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">totalOpeningCredit</span><span class="p">;</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">totalDebit</span><span class="p">;</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">totalCredit</span><span class="p">;</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">totalClosingDebit</span><span class="p">;</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">totalClosingCredit</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h2 id="215">21.5 エラーハンドリング<a class="headerlink" href="#215" title="Permanent link">&para;</a></h2>
<h3 id="2151">21.5.1 ドメイン例外の定義<a class="headerlink" href="#2151" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjIzOXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MTUzNHB4O2hlaWdodDoyMzlweDtiYWNrZ3JvdW5kOiNGRkZGRkY7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxNTM0IDIzOSIgd2lkdGg9IjE1MzRweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMTI0NTY7JiMxMjUyMTsmIzEyNTQwOyYjMzg1NDI7JiMyMzY1Mjs8L3RpdGxlPjxkZWZzLz48Zz48ZyBjbGFzcz0idGl0bGUiIGRhdGEtc291cmNlLWxpbmU9IjEiPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSI3MjUuMjY3MyIgeT0iMjIuOTk1MSI+JiMxMjQ1NjsmIzEyNTIxOyYjMTI1NDA7JiMzODU0MjsmIzIzNjUyOzwvdGV4dD48L2c+PCEtLWNsYXNzIEFjY291bnRpbmdFeGNlcHRpb24tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJBY2NvdW50aW5nRXhjZXB0aW9uIiBkYXRhLXNvdXJjZS1saW5lPSIzIiBpZD0iZW50MDAwMiI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI4MC41OTM4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNzkuNTY3NCIgeD0iNjk3LjA2IiB5PSI0NC4yOTY5Ii8+PGVsbGlwc2UgY3g9IjcxMi4wNiIgY3k9IjYwLjI5NjkiIGZpbGw9IiNBOURDREYiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTcxMi4xNjk0LDU1LjY0MDYgTDcxMS4wMTMxLDYwLjcxODggTDcxMy4zNDEzLDYwLjcxODggTDcxMi4xNjk0LDU1LjY0MDYgWiBNNzEwLjY4NSw1My40MDYzIEw3MTMuNjY5NCw1My40MDYzIEw3MTcuMDI4OCw2NS43OTY5IEw3MTQuNTc1Niw2NS43OTY5IEw3MTMuODEsNjIuNzM0NCBMNzEwLjUyODgsNjIuNzM0NCBMNzA5Ljc3ODgsNjUuNzk2OSBMNzA3LjM0MTMsNjUuNzk2OSBMNzEwLjY4NSw1My40MDYzIFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtc3R5bGU9Iml0YWxpYyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDcuNTY3NCIgeD0iNzI2LjA2IiB5PSI2NS4xNDM2Ij5BY2NvdW50aW5nRXhjZXB0aW9uPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjY5OC4wNiIgeDI9Ijg3NS42Mjc0IiB5MT0iNzYuMjk2OSIgeTI9Ijc2LjI5NjkiLz48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IlBSSVZBVEVfRklFTEQiPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjcwNS4wNiIgeT0iODYuOTQ1MyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjEuMjM1NCIgeD0iNzE3LjA2IiB5PSI5My4yOTIiPmVycm9yQ29kZTogU3RyaW5nPC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFJJVkFURV9GSUVMRCI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iNzA1LjA2IiB5PSIxMDMuMjQyMiIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTMuODY2MiIgeD0iNzE3LjA2IiB5PSIxMDkuNTg4OSI+bWVzc2FnZTogU3RyaW5nPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjY5OC4wNiIgeDI9Ijg3NS42Mjc0IiB5MT0iMTE2Ljg5MDYiIHkyPSIxMTYuODkwNiIvPjwvZz48IS0tY2xhc3MgQWNjb3VudE5vdEZvdW5kRXhjZXB0aW9uLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iQWNjb3VudE5vdEZvdW5kRXhjZXB0aW9uIiBkYXRhLXNvdXJjZS1saW5lPSI4IiBpZD0iZW50MDAwMyI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI0OCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMjI1LjY5NjMiIHg9IjciIHk9IjE4NC44ODY5Ii8+PGVsbGlwc2UgY3g9IjIyIiBjeT0iMjAwLjg4NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTI0Ljk2ODgsMjA2LjUyNzUgUTI0LjM5MDYsMjA2LjgyNDQgMjMuNzUsMjA2Ljk2NSBRMjMuMTA5NCwyMDcuMTIxMyAyMi40MDYzLDIwNy4xMjEzIFExOS45MDYzLDIwNy4xMjEzIDE4LjU3ODEsMjA1LjQ4MDYgUTE3LjI2NTYsMjAzLjgyNDQgMTcuMjY1NiwyMDAuNjk5NCBRMTcuMjY1NiwxOTcuNTc0NCAxOC41NzgxLDE5NS45MTgxIFExOS45MDYzLDE5NC4yNjE5IDIyLjQwNjMsMTk0LjI2MTkgUTIzLjEwOTQsMTk0LjI2MTkgMjMuNzUsMTk0LjQxODEgUTI0LjQwNjMsMTk0LjU3NDQgMjQuOTY4OCwxOTQuODcxMyBMMjQuOTY4OCwxOTcuNTkgUTI0LjM0MzgsMTk3LjAxMTkgMjMuNzUsMTk2Ljc0NjMgUTIzLjE1NjMsMTk2LjQ2NSAyMi41MzEzLDE5Ni40NjUgUTIxLjE4NzUsMTk2LjQ2NSAyMC41LDE5Ny41NDMxIFExOS44MTI1LDE5OC42MDU2IDE5LjgxMjUsMjAwLjY5OTQgUTE5LjgxMjUsMjAyLjc5MzEgMjAuNSwyMDMuODcxMyBRMjEuMTg3NSwyMDQuOTMzOCAyMi41MzEzLDIwNC45MzM4IFEyMy4xNTYzLDIwNC45MzM4IDIzLjc1LDIwNC42NjgxIFEyNC4zNDM4LDIwNC4zODY5IDI0Ljk2ODgsMjAzLjgwODggTDI0Ljk2ODgsMjA2LjUyNzUgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxOTMuNjk2MyIgeD0iMzYiIHk9IjIwNS43MzM2Ij5BY2NvdW50Tm90Rm91bmRFeGNlcHRpb248L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iOCIgeDI9IjIzMS42OTYzIiB5MT0iMjE2Ljg4NjkiIHkyPSIyMTYuODg2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjgiIHgyPSIyMzEuNjk2MyIgeTE9IjIyNC44ODY5IiB5Mj0iMjI0Ljg4NjkiLz48L2c+PCEtLWNsYXNzIEFjY291bnRBbHJlYWR5RXhpc3RzRXhjZXB0aW9uLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iQWNjb3VudEFscmVhZHlFeGlzdHNFeGNlcHRpb24iIGRhdGEtc291cmNlLWxpbmU9IjkiIGlkPSJlbnQwMDA1Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjQ4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIyNTIuNjAyNSIgeD0iMjY3LjU1IiB5PSIxODQuODg2OSIvPjxlbGxpcHNlIGN4PSIyODIuNTUiIGN5PSIyMDAuODg2OSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMjg1LjUxODgsMjA2LjUyNzUgUTI4NC45NDA2LDIwNi44MjQ0IDI4NC4zLDIwNi45NjUgUTI4My42NTk0LDIwNy4xMjEzIDI4Mi45NTYzLDIwNy4xMjEzIFEyODAuNDU2MywyMDcuMTIxMyAyNzkuMTI4MSwyMDUuNDgwNiBRMjc3LjgxNTYsMjAzLjgyNDQgMjc3LjgxNTYsMjAwLjY5OTQgUTI3Ny44MTU2LDE5Ny41NzQ0IDI3OS4xMjgxLDE5NS45MTgxIFEyODAuNDU2MywxOTQuMjYxOSAyODIuOTU2MywxOTQuMjYxOSBRMjgzLjY1OTQsMTk0LjI2MTkgMjg0LjMsMTk0LjQxODEgUTI4NC45NTYzLDE5NC41NzQ0IDI4NS41MTg4LDE5NC44NzEzIEwyODUuNTE4OCwxOTcuNTkgUTI4NC44OTM4LDE5Ny4wMTE5IDI4NC4zLDE5Ni43NDYzIFEyODMuNzA2MywxOTYuNDY1IDI4My4wODEzLDE5Ni40NjUgUTI4MS43Mzc1LDE5Ni40NjUgMjgxLjA1LDE5Ny41NDMxIFEyODAuMzYyNSwxOTguNjA1NiAyODAuMzYyNSwyMDAuNjk5NCBRMjgwLjM2MjUsMjAyLjc5MzEgMjgxLjA1LDIwMy44NzEzIFEyODEuNzM3NSwyMDQuOTMzOCAyODMuMDgxMywyMDQuOTMzOCBRMjgzLjcwNjMsMjA0LjkzMzggMjg0LjMsMjA0LjY2ODEgUTI4NC44OTM4LDIwNC4zODY5IDI4NS41MTg4LDIwMy44MDg4IEwyODUuNTE4OCwyMDYuNTI3NSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIyMC42MDI1IiB4PSIyOTYuNTUiIHk9IjIwNS43MzM2Ij5BY2NvdW50QWxyZWFkeUV4aXN0c0V4Y2VwdGlvbjwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyNjguNTUiIHgyPSI1MTkuMTUyNSIgeTE9IjIxNi44ODY5IiB5Mj0iMjE2Ljg4NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyNjguNTUiIHgyPSI1MTkuMTUyNSIgeTE9IjIyNC44ODY5IiB5Mj0iMjI0Ljg4NjkiLz48L2c+PCEtLWNsYXNzIEpvdXJuYWxOb3RGb3VuZEV4Y2VwdGlvbi0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkpvdXJuYWxOb3RGb3VuZEV4Y2VwdGlvbiIgZGF0YS1zb3VyY2UtbGluZT0iMTAiIGlkPSJlbnQwMDA3Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjQ4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIyMTcuNTg4OSIgeD0iNTU1LjA1IiB5PSIxODQuODg2OSIvPjxlbGxpcHNlIGN4PSI1NzAuMDUiIGN5PSIyMDAuODg2OSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNNTczLjAxODgsMjA2LjUyNzUgUTU3Mi40NDA2LDIwNi44MjQ0IDU3MS44LDIwNi45NjUgUTU3MS4xNTk0LDIwNy4xMjEzIDU3MC40NTYzLDIwNy4xMjEzIFE1NjcuOTU2MywyMDcuMTIxMyA1NjYuNjI4MSwyMDUuNDgwNiBRNTY1LjMxNTYsMjAzLjgyNDQgNTY1LjMxNTYsMjAwLjY5OTQgUTU2NS4zMTU2LDE5Ny41NzQ0IDU2Ni42MjgxLDE5NS45MTgxIFE1NjcuOTU2MywxOTQuMjYxOSA1NzAuNDU2MywxOTQuMjYxOSBRNTcxLjE1OTQsMTk0LjI2MTkgNTcxLjgsMTk0LjQxODEgUTU3Mi40NTYzLDE5NC41NzQ0IDU3My4wMTg4LDE5NC44NzEzIEw1NzMuMDE4OCwxOTcuNTkgUTU3Mi4zOTM4LDE5Ny4wMTE5IDU3MS44LDE5Ni43NDYzIFE1NzEuMjA2MywxOTYuNDY1IDU3MC41ODEzLDE5Ni40NjUgUTU2OS4yMzc1LDE5Ni40NjUgNTY4LjU1LDE5Ny41NDMxIFE1NjcuODYyNSwxOTguNjA1NiA1NjcuODYyNSwyMDAuNjk5NCBRNTY3Ljg2MjUsMjAyLjc5MzEgNTY4LjU1LDIwMy44NzEzIFE1NjkuMjM3NSwyMDQuOTMzOCA1NzAuNTgxMywyMDQuOTMzOCBRNTcxLjIwNjMsMjA0LjkzMzggNTcxLjgsMjA0LjY2ODEgUTU3Mi4zOTM4LDIwNC4zODY5IDU3My4wMTg4LDIwMy44MDg4IEw1NzMuMDE4OCwyMDYuNTI3NSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE4NS41ODg5IiB4PSI1ODQuMDUiIHk9IjIwNS43MzM2Ij5Kb3VybmFsTm90Rm91bmRFeGNlcHRpb248L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iNTU2LjA1IiB4Mj0iNzcxLjYzODkiIHkxPSIyMTYuODg2OSIgeTI9IjIxNi44ODY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iNTU2LjA1IiB4Mj0iNzcxLjYzODkiIHkxPSIyMjQuODg2OSIgeTI9IjIyNC44ODY5Ii8+PC9nPjwhLS1jbGFzcyBKb3VybmFsQmFsYW5jZUV4Y2VwdGlvbi0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkpvdXJuYWxCYWxhbmNlRXhjZXB0aW9uIiBkYXRhLXNvdXJjZS1saW5lPSIxMSIgaWQ9ImVudDAwMDkiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNDgiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjIwNS42NDY1IiB4PSI4MDguMDIiIHk9IjE4NC44ODY5Ii8+PGVsbGlwc2UgY3g9IjgyMy4wMiIgY3k9IjIwMC44ODY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik04MjUuOTg4OCwyMDYuNTI3NSBRODI1LjQxMDYsMjA2LjgyNDQgODI0Ljc3LDIwNi45NjUgUTgyNC4xMjk0LDIwNy4xMjEzIDgyMy40MjYzLDIwNy4xMjEzIFE4MjAuOTI2MywyMDcuMTIxMyA4MTkuNTk4MSwyMDUuNDgwNiBRODE4LjI4NTYsMjAzLjgyNDQgODE4LjI4NTYsMjAwLjY5OTQgUTgxOC4yODU2LDE5Ny41NzQ0IDgxOS41OTgxLDE5NS45MTgxIFE4MjAuOTI2MywxOTQuMjYxOSA4MjMuNDI2MywxOTQuMjYxOSBRODI0LjEyOTQsMTk0LjI2MTkgODI0Ljc3LDE5NC40MTgxIFE4MjUuNDI2MywxOTQuNTc0NCA4MjUuOTg4OCwxOTQuODcxMyBMODI1Ljk4ODgsMTk3LjU5IFE4MjUuMzYzOCwxOTcuMDExOSA4MjQuNzcsMTk2Ljc0NjMgUTgyNC4xNzYzLDE5Ni40NjUgODIzLjU1MTMsMTk2LjQ2NSBRODIyLjIwNzUsMTk2LjQ2NSA4MjEuNTIsMTk3LjU0MzEgUTgyMC44MzI1LDE5OC42MDU2IDgyMC44MzI1LDIwMC42OTk0IFE4MjAuODMyNSwyMDIuNzkzMSA4MjEuNTIsMjAzLjg3MTMgUTgyMi4yMDc1LDIwNC45MzM4IDgyMy41NTEzLDIwNC45MzM4IFE4MjQuMTc2MywyMDQuOTMzOCA4MjQuNzcsMjA0LjY2ODEgUTgyNS4zNjM4LDIwNC4zODY5IDgyNS45ODg4LDIwMy44MDg4IEw4MjUuOTg4OCwyMDYuNTI3NSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE3My42NDY1IiB4PSI4MzcuMDIiIHk9IjIwNS43MzM2Ij5Kb3VybmFsQmFsYW5jZUV4Y2VwdGlvbjwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI4MDkuMDIiIHgyPSIxMDEyLjY2NjUiIHkxPSIyMTYuODg2OSIgeTI9IjIxNi44ODY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iODA5LjAyIiB4Mj0iMTAxMi42NjY1IiB5MT0iMjI0Ljg4NjkiIHkyPSIyMjQuODg2OSIvPjwvZz48IS0tY2xhc3MgSm91cm5hbEFscmVhZHlDYW5jZWxsZWRFeGNlcHRpb24tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJKb3VybmFsQWxyZWFkeUNhbmNlbGxlZEV4Y2VwdGlvbiIgZGF0YS1zb3VyY2UtbGluZT0iMTIiIGlkPSJlbnQwMDExIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjQ4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIyNzIuMjE0OCIgeD0iMTA0OC43NCIgeT0iMTg0Ljg4NjkiLz48ZWxsaXBzZSBjeD0iMTA2My43NCIgY3k9IjIwMC44ODY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0xMDY2LjcwODgsMjA2LjUyNzUgUTEwNjYuMTMwNiwyMDYuODI0NCAxMDY1LjQ5LDIwNi45NjUgUTEwNjQuODQ5NCwyMDcuMTIxMyAxMDY0LjE0NjMsMjA3LjEyMTMgUTEwNjEuNjQ2MywyMDcuMTIxMyAxMDYwLjMxODEsMjA1LjQ4MDYgUTEwNTkuMDA1NiwyMDMuODI0NCAxMDU5LjAwNTYsMjAwLjY5OTQgUTEwNTkuMDA1NiwxOTcuNTc0NCAxMDYwLjMxODEsMTk1LjkxODEgUTEwNjEuNjQ2MywxOTQuMjYxOSAxMDY0LjE0NjMsMTk0LjI2MTkgUTEwNjQuODQ5NCwxOTQuMjYxOSAxMDY1LjQ5LDE5NC40MTgxIFExMDY2LjE0NjMsMTk0LjU3NDQgMTA2Ni43MDg4LDE5NC44NzEzIEwxMDY2LjcwODgsMTk3LjU5IFExMDY2LjA4MzgsMTk3LjAxMTkgMTA2NS40OSwxOTYuNzQ2MyBRMTA2NC44OTYzLDE5Ni40NjUgMTA2NC4yNzEzLDE5Ni40NjUgUTEwNjIuOTI3NSwxOTYuNDY1IDEwNjIuMjQsMTk3LjU0MzEgUTEwNjEuNTUyNSwxOTguNjA1NiAxMDYxLjU1MjUsMjAwLjY5OTQgUTEwNjEuNTUyNSwyMDIuNzkzMSAxMDYyLjI0LDIwMy44NzEzIFExMDYyLjkyNzUsMjA0LjkzMzggMTA2NC4yNzEzLDIwNC45MzM4IFExMDY0Ljg5NjMsMjA0LjkzMzggMTA2NS40OSwyMDQuNjY4MSBRMTA2Ni4wODM4LDIwNC4zODY5IDEwNjYuNzA4OCwyMDMuODA4OCBMMTA2Ni43MDg4LDIwNi41Mjc1IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjQwLjIxNDgiIHg9IjEwNzcuNzQiIHk9IjIwNS43MzM2Ij5Kb3VybmFsQWxyZWFkeUNhbmNlbGxlZEV4Y2VwdGlvbjwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxMDQ5Ljc0IiB4Mj0iMTMxOS45NTQ4IiB5MT0iMjE2Ljg4NjkiIHkyPSIyMTYuODg2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjEwNDkuNzQiIHgyPSIxMzE5Ljk1NDgiIHkxPSIyMjQuODg2OSIgeTI9IjIyNC44ODY5Ii8+PC9nPjwhLS1jbGFzcyBWYWxpZGF0aW9uRXhjZXB0aW9uLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iVmFsaWRhdGlvbkV4Y2VwdGlvbiIgZGF0YS1zb3VyY2UtbGluZT0iMTMiIGlkPSJlbnQwMDEzIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjQ4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNzEuMzY0MyIgeD0iMTM1Ni4xNyIgeT0iMTg0Ljg4NjkiLz48ZWxsaXBzZSBjeD0iMTM3MS4xNyIgY3k9IjIwMC44ODY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0xMzc0LjEzODgsMjA2LjUyNzUgUTEzNzMuNTYwNiwyMDYuODI0NCAxMzcyLjkyLDIwNi45NjUgUTEzNzIuMjc5NCwyMDcuMTIxMyAxMzcxLjU3NjMsMjA3LjEyMTMgUTEzNjkuMDc2MywyMDcuMTIxMyAxMzY3Ljc0ODEsMjA1LjQ4MDYgUTEzNjYuNDM1NiwyMDMuODI0NCAxMzY2LjQzNTYsMjAwLjY5OTQgUTEzNjYuNDM1NiwxOTcuNTc0NCAxMzY3Ljc0ODEsMTk1LjkxODEgUTEzNjkuMDc2MywxOTQuMjYxOSAxMzcxLjU3NjMsMTk0LjI2MTkgUTEzNzIuMjc5NCwxOTQuMjYxOSAxMzcyLjkyLDE5NC40MTgxIFExMzczLjU3NjMsMTk0LjU3NDQgMTM3NC4xMzg4LDE5NC44NzEzIEwxMzc0LjEzODgsMTk3LjU5IFExMzczLjUxMzgsMTk3LjAxMTkgMTM3Mi45MiwxOTYuNzQ2MyBRMTM3Mi4zMjYzLDE5Ni40NjUgMTM3MS43MDEzLDE5Ni40NjUgUTEzNzAuMzU3NSwxOTYuNDY1IDEzNjkuNjcsMTk3LjU0MzEgUTEzNjguOTgyNSwxOTguNjA1NiAxMzY4Ljk4MjUsMjAwLjY5OTQgUTEzNjguOTgyNSwyMDIuNzkzMSAxMzY5LjY3LDIwMy44NzEzIFExMzcwLjM1NzUsMjA0LjkzMzggMTM3MS43MDEzLDIwNC45MzM4IFExMzcyLjMyNjMsMjA0LjkzMzggMTM3Mi45MiwyMDQuNjY4MSBRMTM3My41MTM4LDIwNC4zODY5IDEzNzQuMTM4OCwyMDMuODA4OCBMMTM3NC4xMzg4LDIwNi41Mjc1IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM5LjM2NDMiIHg9IjEzODUuMTciIHk9IjIwNS43MzM2Ij5WYWxpZGF0aW9uRXhjZXB0aW9uPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjEzNTcuMTciIHgyPSIxNTI2LjUzNDMiIHkxPSIyMTYuODg2OSIgeTI9IjIxNi44ODY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMTM1Ny4xNyIgeDI9IjE1MjYuNTM0MyIgeTE9IjIyNC44ODY5IiB5Mj0iMjI0Ljg4NjkiLz48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iR01OMTUiIGRhdGEtc291cmNlLWxpbmU9IjE2IiBpZD0iZW50MDAxNiI+PHBhdGggZD0iTTkxMS4zNSw1Ni44ODY5IEw5MTEuMzUsODAuNTg2OSBMODc3LjEyLDg0LjU4NjkgTDkxMS4zNSw4OC41ODY5IEw5MTEuMzUsMTEyLjI4NTMgQTAsMCAwIDAgMCA5MTEuMzUsMTEyLjI4NTMgTDEwODguMzUwMiwxMTIuMjg1MyBBMCwwIDAgMCAwIDEwODguMzUwMiwxMTIuMjg1MyBMMTA4OC4zNTAyLDY2Ljg4NjkgTDEwNzguMzUwMiw1Ni44ODY5IEw5MTEuMzUsNTYuODg2OSBBMCwwIDAgMCAwIDkxMS4zNSw1Ni44ODY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNMTA3OC4zNTAyLDU2Ljg4NjkgTDEwNzguMzUwMiw2Ni44ODY5IEwxMDg4LjM1MDIsNjYuODg2OSBMMTA3OC4zNTAyLDU2Ljg4NjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1Ni4wMDAyIiB4PSI5MTcuMzUiIHk9IjczLjk1MzgiPiYjMTI0ODk7JiMxMjUxMzsmIzEyNDUyOyYjMTI1MzE7JiMyMDM2MzsmIzIyODA2OyYjMTIzOTg7JiMyMjUyMjsmIzI0MjEzOyYjMTI0NjM7JiMxMjUyMTsmIzEyNDczOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTEuNDk2NyIgeD0iOTE3LjM1IiB5PSI4OS4wODY2Ij5IVFRQJiMxMjQ3MzsmIzEyNDg2OyYjMTI1NDA7JiMxMjQ3OTsmIzEyNDczOyYjMTIzOTk7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNi4yMzIiIHg9IjkxNy4zNSIgeT0iMTA0LjIxOTQiPkNvbnRyb2xsZXImIzIzNjUyOyYjMTIzOTE7JiMyNzc3MDsmIzIzNDUwOzwvdGV4dD48L2c+PCEtLXJldmVyc2UgbGluayBBY2NvdW50aW5nRXhjZXB0aW9uIHRvIEFjY291bnROb3RGb3VuZEV4Y2VwdGlvbi0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDAyIiBkYXRhLWVudGl0eS0yPSJlbnQwMDAzIiBkYXRhLWxpbmstdHlwZT0iZXh0ZW5zaW9uIiBkYXRhLXNvdXJjZS1saW5lPSI4IiBpZD0ibG5rNCI+PHBhdGggZD0iTTY3OS4xODUxLDEwNS4zMzMgQzU1OS4wODUxLDEyNy4zNTMgMzY0LjA0LDE2My4xMTY5IDIzMy4xMywxODcuMTE2OSIgZmlsbD0ibm9uZSIgaWQ9IkFjY291bnRpbmdFeGNlcHRpb24tYmFja3RvLUFjY291bnROb3RGb3VuZEV4Y2VwdGlvbiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9Im5vbmUiIHBvaW50cz0iNjk2Ljg5LDEwMi4wODY5LDY3OC4xMDMxLDk5LjQzMTQsNjgwLjI2NzIsMTExLjIzNDYsNjk2Ljg5LDEwMi4wODY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1yZXZlcnNlIGxpbmsgQWNjb3VudGluZ0V4Y2VwdGlvbiB0byBBY2NvdW50QWxyZWFkeUV4aXN0c0V4Y2VwdGlvbi0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDAyIiBkYXRhLWVudGl0eS0yPSJlbnQwMDA1IiBkYXRhLWxpbmstdHlwZT0iZXh0ZW5zaW9uIiBkYXRhLXNvdXJjZS1saW5lPSI5IiBpZD0ibG5rNiI+PHBhdGggZD0iTTY3OS41MDI5LDExOC45OTUxIEM2MTAuNjAyOSwxNDAuNDM1MSA1MzMuOTUsMTY0LjI4NjkgNDY5LjA3LDE4NC40NzY5IiBmaWxsPSJub25lIiBpZD0iQWNjb3VudGluZ0V4Y2VwdGlvbi1iYWNrdG8tQWNjb3VudEFscmVhZHlFeGlzdHNFeGNlcHRpb24iIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSJub25lIiBwb2ludHM9IjY5Ni42OSwxMTMuNjQ2OSw2NzcuNzIwMiwxMTMuMjY2LDY4MS4yODU2LDEyNC43MjQxLDY5Ni42OSwxMTMuNjQ2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tcmV2ZXJzZSBsaW5rIEFjY291bnRpbmdFeGNlcHRpb24gdG8gSm91cm5hbE5vdEZvdW5kRXhjZXB0aW9uLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDIiIGRhdGEtZW50aXR5LTI9ImVudDAwMDciIGRhdGEtbGluay10eXBlPSJleHRlbnNpb24iIGRhdGEtc291cmNlLWxpbmU9IjEwIiBpZD0ibG5rOCI+PHBhdGggZD0iTTczNC4xNDY0LDEzNy45ODkgQzcxNC41MDY0LDE1Ny41MTkgNzA0LjI3LDE2Ny42OTY5IDY4Ny40NiwxODQuNDA2OSIgZmlsbD0ibm9uZSIgaWQ9IkFjY291bnRpbmdFeGNlcHRpb24tYmFja3RvLUpvdXJuYWxOb3RGb3VuZEV4Y2VwdGlvbiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9Im5vbmUiIHBvaW50cz0iNzQ2LjkxLDEyNS4yOTY5LDcyOS45MTU3LDEzMy43MzQ1LDczOC4zNzcxLDE0Mi4yNDM1LDc0Ni45MSwxMjUuMjk2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tcmV2ZXJzZSBsaW5rIEFjY291bnRpbmdFeGNlcHRpb24gdG8gSm91cm5hbEJhbGFuY2VFeGNlcHRpb24tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwMiIgZGF0YS1lbnRpdHktMj0iZW50MDAwOSIgZGF0YS1saW5rLXR5cGU9ImV4dGVuc2lvbiIgZGF0YS1zb3VyY2UtbGluZT0iMTEiIGlkPSJsbmsxMCI+PHBhdGggZD0iTTgzOS45MjUsMTM3LjkzNzEgQzg1OS43MjUsMTU3LjQ2NzEgODcwLjEsMTY3LjY5NjkgODg3LjA1LDE4NC40MDY5IiBmaWxsPSJub25lIiBpZD0iQWNjb3VudGluZ0V4Y2VwdGlvbi1iYWNrdG8tSm91cm5hbEJhbGFuY2VFeGNlcHRpb24iIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSJub25lIiBwb2ludHM9IjgyNy4xMSwxMjUuMjk2OSw4MzUuNzExNiwxNDIuMjA4OCw4NDQuMTM4NCwxMzMuNjY1NSw4MjcuMTEsMTI1LjI5NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLXJldmVyc2UgbGluayBBY2NvdW50aW5nRXhjZXB0aW9uIHRvIEpvdXJuYWxBbHJlYWR5Q2FuY2VsbGVkRXhjZXB0aW9uLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDIiIGRhdGEtZW50aXR5LTI9ImVudDAwMTEiIGRhdGEtbGluay10eXBlPSJleHRlbnNpb24iIGRhdGEtc291cmNlLWxpbmU9IjEyIiBpZD0ibG5rMTIiPjxwYXRoIGQ9Ik04OTMuODk4OSwxMjUuMDU4MyBDOTYxLjIwODksMTQ2Ljk4ODMgMTAzOC4yMywxNjguNjU2OSAxMDk2LjE1LDE4NC40MjY5IiBmaWxsPSJub25lIiBpZD0iQWNjb3VudGluZ0V4Y2VwdGlvbi1iYWNrdG8tSm91cm5hbEFscmVhZHlDYW5jZWxsZWRFeGNlcHRpb24iIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSJub25lIiBwb2ludHM9Ijg3Ni44OCwxMTkuMTk2OSw4OTEuOTQ1MSwxMzAuNzMxMyw4OTUuODUyNywxMTkuMzg1Myw4NzYuODgsMTE5LjE5NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLXJldmVyc2UgbGluayBBY2NvdW50aW5nRXhjZXB0aW9uIHRvIFZhbGlkYXRpb25FeGNlcHRpb24tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwMiIgZGF0YS1lbnRpdHktMj0iZW50MDAxMyIgZGF0YS1saW5rLXR5cGU9ImV4dGVuc2lvbiIgZGF0YS1zb3VyY2UtbGluZT0iMTMiIGlkPSJsbmsxNCI+PHBhdGggZD0iTTg5NC4xNDA5LDEyNS4zOTkxIEMxMDg3Ljg0MDksMTczLjQxOTEgMTE0Mi4zOSwxNDkuNzc2OSAxMzM4Ljg1LDE4NC44ODY5IEMxMzQ0LjM1LDE4NS44NjY5IDEzNTAsMTg2Ljk0NjkgMTM1NS42OSwxODguMDc2OSIgZmlsbD0ibm9uZSIgaWQ9IkFjY291bnRpbmdFeGNlcHRpb24tYmFja3RvLVZhbGlkYXRpb25FeGNlcHRpb24iIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSJub25lIiBwb2ludHM9Ijg3Ni45LDEyMC4yMjY5LDg5Mi40MTY4LDEzMS4xNDYxLDg5NS44NjUsMTE5LjY1MjIsODc2LjksMTIwLjIyNjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PD9wbGFudHVtbC1zcmMgZFBCMUlXQ240OFJsVU9neVcyX1doSXVMeUkyMm5ObENaY2lXOWY5Q09LS3l4ME80NFJwZmVIU0g1akhCSV83YThsZW1xbVktWExhZWI0OEZqZ1NQX2ltdF9tSC1MQVkxS19yQXVPdDJ2LV9lRmF1Um5pSTlIb1NhU2djNXp4bWRmSHFRTEFSZWJuOGtLNWQzaHpXTTEtVWlvc21Fc19tOE5OZkVzWmJ1QnVnNVNpdE9xZjgzWXhrZnZlakRLMkFPVkFOQkNqaEozYUgtc0ktTEh4eUVscy03cFdZellWS1N0SDVRNjBhUmFGRVppbXhONmpPb0ZuUFF2UThKX2FTbk9uNnVLeUtQU2Rrd1NlSjJCT0xkZ1hpQXh4RWxreld5S1pNRUpzcmk3d1lVVDJjZUZ6WlVPNzJPQWVNUmIwY2dseGstY2gzQzZkR3NWU0FiYTUzcnlaRGp1dFo0cVpjeUNfdTM/PjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<details>
<summary>ドメイン例外クラス</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/accounting/domain/exception/AccountingException.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.domain.exception</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Getter</span><span class="p">;</span>

<span class="nd">@Getter</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AccountingException</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">RuntimeException</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">errorCode</span><span class="p">;</span>

<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="nf">AccountingException</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">errorCode</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">message</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">errorCode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">errorCode</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// AccountNotFoundException.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.domain.exception</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AccountNotFoundException</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">AccountingException</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">AccountNotFoundException</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">accountCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="s">&quot;ACC001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;勘定科目が見つかりません: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">accountCode</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// JournalBalanceException.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.domain.exception</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">JournalBalanceException</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">AccountingException</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">JournalBalanceException</span><span class="p">(</span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">debit</span><span class="p">,</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">credit</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="s">&quot;JNL001&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;貸借が一致しません。借方合計: %s, 貸方合計: %s&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">debit</span><span class="p">,</span><span class="w"> </span><span class="n">credit</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="2152">21.5.2 グローバル例外ハンドラー<a class="headerlink" href="#2152" title="Permanent link">&para;</a></h3>
<details>
<summary>GlobalExceptionHandler</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/accounting/infrastructure/adapter/in/web/GlobalExceptionHandler.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.infrastructure.adapter.in.web</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.domain.exception.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Builder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.extern.slf4j.Slf4j</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.http.HttpStatus</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.http.ResponseEntity</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.validation.FieldError</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.web.bind.MethodArgumentNotValidException</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.web.bind.annotation.ExceptionHandler</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.web.bind.annotation.RestControllerAdvice</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.HashMap</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Map</span><span class="p">;</span>

<span class="nd">@RestControllerAdvice</span>
<span class="nd">@Slf4j</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">GlobalExceptionHandler</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@ExceptionHandler</span><span class="p">(</span><span class="n">AccountNotFoundException</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">ErrorResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">handleAccountNotFoundException</span><span class="p">(</span><span class="n">AccountNotFoundException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">log</span><span class="p">.</span><span class="na">warn</span><span class="p">(</span><span class="s">&quot;Account not found: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">status</span><span class="p">(</span><span class="n">HttpStatus</span><span class="p">.</span><span class="na">NOT_FOUND</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">body</span><span class="p">(</span><span class="n">createErrorResponse</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="na">getErrorCode</span><span class="p">(),</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">()));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@ExceptionHandler</span><span class="p">(</span><span class="n">JournalNotFoundException</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">ErrorResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">handleJournalNotFoundException</span><span class="p">(</span><span class="n">JournalNotFoundException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">log</span><span class="p">.</span><span class="na">warn</span><span class="p">(</span><span class="s">&quot;Journal not found: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">status</span><span class="p">(</span><span class="n">HttpStatus</span><span class="p">.</span><span class="na">NOT_FOUND</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">body</span><span class="p">(</span><span class="n">createErrorResponse</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="na">getErrorCode</span><span class="p">(),</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">()));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@ExceptionHandler</span><span class="p">(</span><span class="n">JournalBalanceException</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">ErrorResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">handleJournalBalanceException</span><span class="p">(</span><span class="n">JournalBalanceException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">log</span><span class="p">.</span><span class="na">warn</span><span class="p">(</span><span class="s">&quot;Journal balance error: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">status</span><span class="p">(</span><span class="n">HttpStatus</span><span class="p">.</span><span class="na">BAD_REQUEST</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">body</span><span class="p">(</span><span class="n">createErrorResponse</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="na">getErrorCode</span><span class="p">(),</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">()));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@ExceptionHandler</span><span class="p">(</span><span class="n">MethodArgumentNotValidException</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">ValidationErrorResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">handleValidationException</span><span class="p">(</span><span class="n">MethodArgumentNotValidException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">log</span><span class="p">.</span><span class="na">warn</span><span class="p">(</span><span class="s">&quot;Validation error: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span>

<span class="w">        </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">errors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<span class="w">        </span><span class="n">e</span><span class="p">.</span><span class="na">getBindingResult</span><span class="p">().</span><span class="na">getAllErrors</span><span class="p">().</span><span class="na">forEach</span><span class="p">(</span><span class="n">error</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">fieldName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">FieldError</span><span class="p">)</span><span class="w"> </span><span class="n">error</span><span class="p">).</span><span class="na">getField</span><span class="p">();</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">errorMessage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">error</span><span class="p">.</span><span class="na">getDefaultMessage</span><span class="p">();</span>
<span class="w">            </span><span class="n">errors</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">fieldName</span><span class="p">,</span><span class="w"> </span><span class="n">errorMessage</span><span class="p">);</span>
<span class="w">        </span><span class="p">});</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">status</span><span class="p">(</span><span class="n">HttpStatus</span><span class="p">.</span><span class="na">BAD_REQUEST</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">body</span><span class="p">(</span><span class="n">ValidationErrorResponse</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                        </span><span class="p">.</span><span class="na">errorCode</span><span class="p">(</span><span class="s">&quot;VAL001&quot;</span><span class="p">)</span>
<span class="w">                        </span><span class="p">.</span><span class="na">message</span><span class="p">(</span><span class="s">&quot;入力値が不正です&quot;</span><span class="p">)</span>
<span class="w">                        </span><span class="p">.</span><span class="na">timestamp</span><span class="p">(</span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">now</span><span class="p">())</span>
<span class="w">                        </span><span class="p">.</span><span class="na">errors</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
<span class="w">                        </span><span class="p">.</span><span class="na">build</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@ExceptionHandler</span><span class="p">(</span><span class="n">Exception</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">ErrorResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">handleGenericException</span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">log</span><span class="p">.</span><span class="na">error</span><span class="p">(</span><span class="s">&quot;Unexpected error&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">status</span><span class="p">(</span><span class="n">HttpStatus</span><span class="p">.</span><span class="na">INTERNAL_SERVER_ERROR</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">body</span><span class="p">(</span><span class="n">createErrorResponse</span><span class="p">(</span><span class="s">&quot;SYS001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;システムエラーが発生しました&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ErrorResponse</span><span class="w"> </span><span class="nf">createErrorResponse</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">errorCode</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">message</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ErrorResponse</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">errorCode</span><span class="p">(</span><span class="n">errorCode</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">message</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">timestamp</span><span class="p">(</span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">now</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Data</span>
<span class="w">    </span><span class="nd">@Builder</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ErrorResponse</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">errorCode</span><span class="p">;</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">message</span><span class="p">;</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">timestamp</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Data</span>
<span class="w">    </span><span class="nd">@Builder</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ValidationErrorResponse</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">errorCode</span><span class="p">;</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">message</span><span class="p">;</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">timestamp</span><span class="p">;</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">errors</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h2 id="216-api">21.6 API ドキュメント<a class="headerlink" href="#216-api" title="Permanent link">&para;</a></h2>
<h3 id="2161-openapi-swagger">21.6.1 OpenAPI / Swagger の設定<a class="headerlink" href="#2161-openapi-swagger" title="Permanent link">&para;</a></h3>
<details>
<summary>OpenAPI 設定</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/accounting/infrastructure/config/OpenApiConfig.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.infrastructure.config</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">io.swagger.v3.oas.models.OpenAPI</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">io.swagger.v3.oas.models.info.Contact</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">io.swagger.v3.oas.models.info.Info</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">io.swagger.v3.oas.models.info.License</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">io.swagger.v3.oas.models.servers.Server</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.context.annotation.Bean</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.context.annotation.Configuration</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="nd">@Configuration</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">OpenApiConfig</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Bean</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">OpenAPI</span><span class="w"> </span><span class="nf">customOpenAPI</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">OpenAPI</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Info</span><span class="p">()</span>
<span class="w">                        </span><span class="p">.</span><span class="na">title</span><span class="p">(</span><span class="s">&quot;財務会計システム API&quot;</span><span class="p">)</span>
<span class="w">                        </span><span class="p">.</span><span class="na">description</span><span class="p">(</span><span class="s">&quot;財務会計システムのREST API仕様書&quot;</span><span class="p">)</span>
<span class="w">                        </span><span class="p">.</span><span class="na">version</span><span class="p">(</span><span class="s">&quot;1.0.0&quot;</span><span class="p">)</span>
<span class="w">                        </span><span class="p">.</span><span class="na">contact</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Contact</span><span class="p">()</span>
<span class="w">                                </span><span class="p">.</span><span class="na">name</span><span class="p">(</span><span class="s">&quot;開発チーム&quot;</span><span class="p">)</span>
<span class="w">                                </span><span class="p">.</span><span class="na">email</span><span class="p">(</span><span class="s">&quot;dev@example.com&quot;</span><span class="p">))</span>
<span class="w">                        </span><span class="p">.</span><span class="na">license</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">License</span><span class="p">()</span>
<span class="w">                                </span><span class="p">.</span><span class="na">name</span><span class="p">(</span><span class="s">&quot;MIT License&quot;</span><span class="p">)</span>
<span class="w">                                </span><span class="p">.</span><span class="na">url</span><span class="p">(</span><span class="s">&quot;https://opensource.org/licenses/MIT&quot;</span><span class="p">)))</span>
<span class="w">                </span><span class="p">.</span><span class="na">servers</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">                        </span><span class="k">new</span><span class="w"> </span><span class="n">Server</span><span class="p">().</span><span class="na">url</span><span class="p">(</span><span class="s">&quot;http://localhost:8080&quot;</span><span class="p">).</span><span class="na">description</span><span class="p">(</span><span class="s">&quot;開発環境&quot;</span><span class="p">),</span>
<span class="w">                        </span><span class="k">new</span><span class="w"> </span><span class="n">Server</span><span class="p">().</span><span class="na">url</span><span class="p">(</span><span class="s">&quot;https://api.example.com&quot;</span><span class="p">).</span><span class="na">description</span><span class="p">(</span><span class="s">&quot;本番環境&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="2162-api">21.6.2 API ドキュメントへのアクセス<a class="headerlink" href="#2162-api" title="Permanent link">&para;</a></h3>
<p>アプリケーション起動後、以下の URL で API 仕様書を確認できます：</p>
<ul>
<li><strong>Swagger UI</strong>: http://localhost:8080/swagger-ui.html</li>
<li><strong>OpenAPI JSON</strong>: http://localhost:8080/api-docs</li>
</ul>
<h2 id="217-api">21.7 API インテグレーションテスト<a class="headerlink" href="#217-api" title="Permanent link">&para;</a></h2>
<h3 id="2171">21.7.1 テストコンテナによる統合テスト環境<a class="headerlink" href="#2171" title="Permanent link">&para;</a></h3>
<p>Testcontainers を使用して、実際の PostgreSQL データベースを使用した統合テストを実行します。</p>
<details>
<summary>統合テストの設定</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/test/java/com/example/accounting/infrastructure/adapter/in/web/AccountControllerIntegrationTest.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.accounting.infrastructure.adapter.in.web</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.accounting.application.port.in.dto.CreateAccountCommand</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.fasterxml.jackson.databind.ObjectMapper</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.boot.test.context.SpringBootTest</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.http.MediaType</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.test.context.DynamicPropertyRegistry</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.test.context.DynamicPropertySource</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.test.web.servlet.MockMvc</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.containers.PostgreSQLContainer</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.junit.jupiter.Container</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.junit.jupiter.Testcontainers</span><span class="p">;</span>

<span class="kn">import static</span><span class="w"> </span><span class="nn">org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*</span><span class="p">;</span>
<span class="kn">import static</span><span class="w"> </span><span class="nn">org.springframework.test.web.servlet.result.MockMvcResultMatchers.*</span><span class="p">;</span>

<span class="nd">@SpringBootTest</span>
<span class="nd">@AutoConfigureMockMvc</span>
<span class="nd">@Testcontainers</span>
<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;勘定科目 API 統合テスト&quot;</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">AccountControllerIntegrationTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Container</span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="n">PostgreSQLContainer</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PostgreSQLContainer</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="s">&quot;postgres:16&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withDatabaseName</span><span class="p">(</span><span class="s">&quot;testdb&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withUsername</span><span class="p">(</span><span class="s">&quot;testuser&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withPassword</span><span class="p">(</span><span class="s">&quot;testpass&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="nd">@DynamicPropertySource</span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configureProperties</span><span class="p">(</span><span class="n">DynamicPropertyRegistry</span><span class="w"> </span><span class="n">registry</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.datasource.url&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">postgres</span><span class="p">::</span><span class="n">getJdbcUrl</span><span class="p">);</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.datasource.username&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">postgres</span><span class="p">::</span><span class="n">getUsername</span><span class="p">);</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.datasource.password&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">postgres</span><span class="p">::</span><span class="n">getPassword</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">MockMvc</span><span class="w"> </span><span class="n">mockMvc</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ObjectMapper</span><span class="w"> </span><span class="n">objectMapper</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;勘定科目 CRUD&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">AccountCrud</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;勘定科目の登録・取得・更新・削除が正常に動作する&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">crudOperationsWork</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Create</span>
<span class="w">            </span><span class="n">CreateAccountCommand</span><span class="w"> </span><span class="n">createCommand</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CreateAccountCommand</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">accountCode</span><span class="p">(</span><span class="s">&quot;99999&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">accountName</span><span class="p">(</span><span class="s">&quot;テスト科目&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">accountShortName</span><span class="p">(</span><span class="s">&quot;テスト&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">bsPlType</span><span class="p">(</span><span class="s">&quot;BS&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">dcType</span><span class="p">(</span><span class="s">&quot;借方&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">elementType</span><span class="p">(</span><span class="s">&quot;資産&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">summaryType</span><span class="p">(</span><span class="s">&quot;計上科目&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">            </span><span class="n">mockMvc</span><span class="p">.</span><span class="na">perform</span><span class="p">(</span><span class="n">post</span><span class="p">(</span><span class="s">&quot;/api/accounts&quot;</span><span class="p">)</span>
<span class="w">                            </span><span class="p">.</span><span class="na">contentType</span><span class="p">(</span><span class="n">MediaType</span><span class="p">.</span><span class="na">APPLICATION_JSON</span><span class="p">)</span>
<span class="w">                            </span><span class="p">.</span><span class="na">content</span><span class="p">(</span><span class="n">objectMapper</span><span class="p">.</span><span class="na">writeValueAsString</span><span class="p">(</span><span class="n">createCommand</span><span class="p">)))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">status</span><span class="p">().</span><span class="na">isCreated</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">jsonPath</span><span class="p">(</span><span class="s">&quot;$.accountCode&quot;</span><span class="p">).</span><span class="na">value</span><span class="p">(</span><span class="s">&quot;99999&quot;</span><span class="p">))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">jsonPath</span><span class="p">(</span><span class="s">&quot;$.accountName&quot;</span><span class="p">).</span><span class="na">value</span><span class="p">(</span><span class="s">&quot;テスト科目&quot;</span><span class="p">));</span>

<span class="w">            </span><span class="c1">// Read</span>
<span class="w">            </span><span class="n">mockMvc</span><span class="p">.</span><span class="na">perform</span><span class="p">(</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;/api/accounts/{accountCode}&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;99999&quot;</span><span class="p">))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">status</span><span class="p">().</span><span class="na">isOk</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">jsonPath</span><span class="p">(</span><span class="s">&quot;$.accountCode&quot;</span><span class="p">).</span><span class="na">value</span><span class="p">(</span><span class="s">&quot;99999&quot;</span><span class="p">));</span>

<span class="w">            </span><span class="c1">// Delete</span>
<span class="w">            </span><span class="n">mockMvc</span><span class="p">.</span><span class="na">perform</span><span class="p">(</span><span class="n">delete</span><span class="p">(</span><span class="s">&quot;/api/accounts/{accountCode}&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;99999&quot;</span><span class="p">))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">status</span><span class="p">().</span><span class="na">isNoContent</span><span class="p">());</span>

<span class="w">            </span><span class="c1">// Verify deleted</span>
<span class="w">            </span><span class="n">mockMvc</span><span class="p">.</span><span class="na">perform</span><span class="p">(</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;/api/accounts/{accountCode}&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;99999&quot;</span><span class="p">))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">status</span><span class="p">().</span><span class="na">isNotFound</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="2172-api">21.7.2 API エンドポイント一覧<a class="headerlink" href="#2172-api" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>メソッド</th>
<th>パス</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>/api/accounts</td>
<td>勘定科目一覧取得</td>
</tr>
<tr>
<td>GET</td>
<td>/api/accounts/{accountCode}</td>
<td>勘定科目取得</td>
</tr>
<tr>
<td>POST</td>
<td>/api/accounts</td>
<td>勘定科目登録</td>
</tr>
<tr>
<td>PUT</td>
<td>/api/accounts/{accountCode}</td>
<td>勘定科目更新</td>
</tr>
<tr>
<td>DELETE</td>
<td>/api/accounts/{accountCode}</td>
<td>勘定科目削除</td>
</tr>
<tr>
<td>GET</td>
<td>/api/journals</td>
<td>仕訳一覧取得</td>
</tr>
<tr>
<td>GET</td>
<td>/api/journals/{journalNumber}</td>
<td>仕訳取得</td>
</tr>
<tr>
<td>POST</td>
<td>/api/journals</td>
<td>仕訳登録</td>
</tr>
<tr>
<td>POST</td>
<td>/api/journals/{journalNumber}/cancel</td>
<td>仕訳取消</td>
</tr>
<tr>
<td>POST</td>
<td>/api/journals/{journalNumber}/correct</td>
<td>仕訳訂正</td>
</tr>
<tr>
<td>GET</td>
<td>/api/balances/daily</td>
<td>日次残高取得</td>
</tr>
<tr>
<td>GET</td>
<td>/api/balances/monthly</td>
<td>月次残高取得</td>
</tr>
<tr>
<td>GET</td>
<td>/api/reports/daily-report</td>
<td>日計表取得</td>
</tr>
<tr>
<td>GET</td>
<td>/api/reports/trial-balance</td>
<td>合計残高試算表取得</td>
</tr>
</tbody>
</table>
<h2 id="_1">まとめ<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>本章では、財務会計システムの API サービスを実装しました。</p>
<h3 id="_2">設計のポイント<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>ヘキサゴナルアーキテクチャ</strong></li>
<li>ドメインロジックの独立性</li>
<li>Ports and Adapters パターンによる責務分離</li>
<li>
<p>テスト容易性の確保</p>
</li>
<li>
<p><strong>マスタ API の設計</strong></p>
</li>
<li>CRUD 操作の標準化</li>
<li>階層構造（チルダ連結）への対応</li>
<li>
<p>バリデーションとエラーハンドリング</p>
</li>
<li>
<p><strong>トランザクション API の設計</strong></p>
</li>
<li>仕訳の登録・照会・訂正・取消</li>
<li>貸借バランスチェック</li>
<li>
<p>赤黒処理との連携</p>
</li>
<li>
<p><strong>帳票 API の設計</strong></p>
</li>
<li>日計表・合計残高試算表</li>
<li>部門別・科目別残高照会</li>
</ol>
<p>これで財務会計システムの第3部は完了です。次の第4部では、生産管理システムについて解説します。</p>
<hr />
<p><a href="../chapter20/">← 第20章：財務会計データ設計 D社事例</a> | <a href="../../part4/chapter22/">第22章：生産管理システムの全体像 →</a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://github.com/k2works/practical-database-design" target="_blank" rel="noopener" title="GitHub Repository" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "search.suggest", "search.highlight"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
      
        <script src="../../../docs/assets/js/extra.js"></script>
      
    
  </body>
</html>