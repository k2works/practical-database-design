
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="基幹業務システム（販売管理・財務会計・生産管理）のデータベース設計を体系的に解説">
      
      
        <meta name="author" content="k2works">
      
      
      
        <link rel="prev" href="../chapter18/">
      
      
        <link rel="next" href="../chapter20/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>第19章 赤黒とログの設計 - 実践データベース設計：基幹業務システム編</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../docs/mkdocs/assets/css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#19" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="実践データベース設計：基幹業務システム編" class="md-header__button md-logo" aria-label="実践データベース設計：基幹業務システム編" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            実践データベース設計：基幹業務システム編
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              第19章 赤黒とログの設計
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/k2works/practical-database-design" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    practical-database-design
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
  実践データベース設計

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="実践データベース設計：基幹業務システム編" class="md-nav__button md-logo" aria-label="実践データベース設計：基幹業務システム編" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    実践データベース設計：基幹業務システム編
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/k2works/practical-database-design" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    practical-database-design
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    実践データベース設計
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    実践データベース設計
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../techstack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    技術スタック
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../outline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    アウトライン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    執筆ワークフロー
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ops/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    運用ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6" >
        
          
          <label class="md-nav__link" for="__nav_1_6" id="__nav_1_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    デプロイ
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    デプロイ
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy-sms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SMS デモデプロイ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy-fas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FAS デモデプロイ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_7" >
        
          
          <label class="md-nav__link" for="__nav_1_7" id="__nav_1_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第1部 基幹業務システムの全体像
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    第1部 基幹業務システムの全体像
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1/chapter01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第1章 基幹業務システムとは
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1/chapter02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第2章 基幹業務システムの業務領域
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1/chapter03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第3章 業務フローの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_8" >
        
          
          <label class="md-nav__link" for="__nav_1_8" id="__nav_1_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第2部 販売管理システム
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    第2部 販売管理システム
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第4章 販売管理システムの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第5章 マスタ情報の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第6章 受注・出荷・売上の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter07/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第7章 債権管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter08/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第8章 調達管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter09/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第9章 在庫管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第10章 債務管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第11章 共通処理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第12章 販売管理データ設計（B社事例）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第13章 APIサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_9" checked>
        
          
          <label class="md-nav__link" for="__nav_1_9" id="__nav_1_9_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第3部 財務会計システム
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_9_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    第3部 財務会計システム
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第14章 財務会計システムの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第15章 勘定科目の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter16/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第16章 仕訳の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter17/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第17章 自動仕訳の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter18/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第18章 勘定科目残高の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    第19章 赤黒とログの設計
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    第19章 赤黒とログの設計
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        概要
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#191-3" class="md-nav__link">
    <span class="md-ellipsis">
      
        19.1 3つのアプローチ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="19.1 3つのアプローチ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1911" class="md-nav__link">
    <span class="md-ellipsis">
      
        19.1.1 データ自体にログ情報を持つ方式
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1912" class="md-nav__link">
    <span class="md-ellipsis">
      
        19.1.2 赤黒処理・論理削除方式
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1913" class="md-nav__link">
    <span class="md-ellipsis">
      
        19.1.3 ログテーブルにログ情報を保存する方式
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1914-3" class="md-nav__link">
    <span class="md-ellipsis">
      
        19.1.4 3つの方式の比較
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#192" class="md-nav__link">
    <span class="md-ellipsis">
      
        19.2 業務システムでの使い分け
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="19.2 業務システムでの使い分け">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1921" class="md-nav__link">
    <span class="md-ellipsis">
      
        19.2.1 推奨される組み合わせ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1922" class="md-nav__link">
    <span class="md-ellipsis">
      
        19.2.2 赤黒処理の実装
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1923" class="md-nav__link">
    <span class="md-ellipsis">
      
        19.2.3 ログテーブルの実装
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1924" class="md-nav__link">
    <span class="md-ellipsis">
      
        19.2.4 ドメインモデル
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1925" class="md-nav__link">
    <span class="md-ellipsis">
      
        19.2.5 リポジトリインターフェース
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1926-mybatis-mapper" class="md-nav__link">
    <span class="md-ellipsis">
      
        19.2.6 MyBatis Mapper
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1927-tdd" class="md-nav__link">
    <span class="md-ellipsis">
      
        19.2.7 TDD によるテスト実装
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#193-er" class="md-nav__link">
    <span class="md-ellipsis">
      
        19.3 ER図
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#194" class="md-nav__link">
    <span class="md-ellipsis">
      
        19.4 まとめ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="19.4 まとめ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        設計のポイント
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        次章の予告
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter20/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第20章 財務会計データ設計（D社事例）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter21/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第21章 APIサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_10" >
        
          
          <label class="md-nav__link" for="__nav_1_10" id="__nav_1_10_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第4部 生産管理システム
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    第4部 生産管理システム
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter22/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第22章 生産管理システムの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter23/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第23章 マスタ情報の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter24/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第24章 生産計画の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter25/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第25章 購買管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter26/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第26章 外注委託管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter27/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第27章 工程管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter28/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第28章 在庫管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第29章 品質管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter30/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第30章 製造原価管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter31/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第31章 生産管理データ設計（E社事例）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter32/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第32章 APIサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_11" >
        
          
          <label class="md-nav__link" for="__nav_1_11" id="__nav_1_11_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第5部 エンタープライズインテグレーション
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    第5部 エンタープライズインテグレーション
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter33.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第33章 システム統合の概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter34.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第34章 メッセージングパターン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter35.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第35章 システム間連携パターン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter36.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第36章 マスタデータ管理（MDM）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter37.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第37章 イベント駆動アーキテクチャ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter38.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第38章 API設計とサービス連携
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter39.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第39章 データ連携の実装パターン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_12" >
        
          
          <label class="md-nav__link" for="__nav_1_12" id="__nav_1_12_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 販売管理システム実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 販売管理システム実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study2-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究1 モノリスサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study2-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究2 JavaFXデスクトップアプリケーションの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study2-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究3 gRPCサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study2-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究4 GraphQLサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_13" >
        
          
          <label class="md-nav__link" for="__nav_1_13" id="__nav_1_13_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 財務会計システム実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_13">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 財務会計システム実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study3-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究1 モノリスサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study3-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究2 JavaFXデスクトップアプリケーションの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study3-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究3 gRPCサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study3-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究4 GraphQLサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_14" >
        
          
          <label class="md-nav__link" for="__nav_1_14" id="__nav_1_14_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 生産管理システム実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_14">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 生産管理システム実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study4-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究1 モノリスサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study4-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究2 JavaFXデスクトップアプリケーションの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study4-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究3 gRPCサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study4-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究4 GraphQLサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_15" >
        
          
          <label class="md-nav__link" for="__nav_1_15" id="__nav_1_15_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 財務会計システムORM実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_15">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 財務会計システムORM実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter14-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第14章 財務会計システムの全体像【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter15-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第15章 勘定科目の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter16-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第16章 仕訳の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter17-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第17章 自動仕訳の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter18-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第18章 勘定科目残高の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter19-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第19章 赤黒とログの設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter20-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第20章 財務会計データ設計（D社事例）【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter21-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第21章 APIサービスの実装【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_16" >
        
          
          <label class="md-nav__link" for="__nav_1_16" id="__nav_1_16_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    付録
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_16">
            <span class="md-nav__icon md-icon"></span>
            
  
    付録
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/er-diagrams.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    A 全体ER図
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/table-definitions.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    B テーブル定義一覧
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/glossary.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    C 用語集
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_17" >
        
          
          <label class="md-nav__link" for="__nav_1_17" id="__nav_1_17_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    データベース
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_17">
            <span class="md-nav__icon md-icon"></span>
            
  
    データベース
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../assets/schemaspy-output/sms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SchemaSpy ER図（SMS）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="19">第19章 赤黒とログの設計<a class="headerlink" href="#19" title="Permanent link">&para;</a></h1>
<h2 id="_1">概要<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>本章では、財務会計システムにおけるデータ訂正方式とログ管理の設計を行います。会計システムでは、一度登録したデータの「削除」や「更新」を安易に行うことはできません。監査証跡を確保しつつ、データ訂正を行う方式が必要です。</p>
<h2 id="191-3">19.1 3つのアプローチ<a class="headerlink" href="#191-3" title="Permanent link">&para;</a></h2>
<p>業務システムにおけるログ管理・変更管理には、3つの代表的なアプローチがあります。</p>
<h3 id="1911">19.1.1 データ自体にログ情報を持つ方式<a class="headerlink" href="#1911" title="Permanent link">&para;</a></h3>
<p>最もシンプルな方式で、各テーブルに作成日時・更新日時・更新者名などのカラムを持たせます。</p>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjIzN3B4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NDI0cHg7aGVpZ2h0OjIzN3B4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDQyNCAyMzciIHdpZHRoPSI0MjRweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjYwNDE7JiMyNDMzNTtBOiAmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsmIzMzMjU4OyYjMjAzMDc7JiMxMjM5NTsmIzEyNTI1OyYjMTI0NjQ7JiMyNDc3MzsmIzIyNTc3OyYjMTI0MzQ7JiMyNTM0NTsmIzEyMzg4OzwvdGl0bGU+PGRlZnMvPjxnPjxnIGNsYXNzPSJ0aXRsZSIgZGF0YS1zb3VyY2UtbGluZT0iMSI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIzMS4zMDY3IiB4PSI4OS42MDM0IiB5PSIyMi45OTUxIj4mIzI2MDQxOyYjMjQzMzU7QTogJiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7JiMzMzI1ODsmIzIwMzA3OyYjMTIzOTU7JiMxMjUyNTsmIzEyNDY0OyYjMjQ3NzM7JiMyMjU3NzsmIzEyNDM0OyYjMjUzNDU7JiMxMjM4ODs8L3RleHQ+PC9nPjwhLS1jbGFzcyBBY2NvdW50LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iQWNjb3VudCIgZGF0YS1zb3VyY2UtbGluZT0iMyIgaWQ9ImVudDAwMDIiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTg2LjM3NSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTYzLjIwMzciIHg9IjciIHk9IjQ0LjI5NjkiLz48ZWxsaXBzZSBjeD0iMzYuOTQxOCIgY3k9IjYwLjI5NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTQxLjA1MTIsNjYuMjk2OSBMMzMuMzMyNSw2Ni4yOTY5IEwzMy4zMzI1LDUzLjkwNjMgTDQxLjA1MTIsNTMuOTA2MyBMNDEuMDUxMiw1Ni4wNjI1IEwzNS43ODU2LDU2LjA2MjUgTDM1Ljc4NTYsNTguNzM0NCBMNDAuNTUxMiw1OC43MzQ0IEw0MC41NTEyLDYwLjg5MDYgTDM1Ljc4NTYsNjAuODkwNiBMMzUuNzg1Niw2NC4xNDA2IEw0MS4wNTEyLDY0LjE0MDYgTDQxLjA1MTIsNjYuMjk2OSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk3Ljk5OTYiIHg9IjU0LjI2MjMiIHk9IjY1LjE0MzYiPiYjMjEyMDg7JiMyMzQ1MDsmIzMxMTg1OyYjMzA0NDY7JiMxMjUxMDsmIzEyNDczOyYjMTI0Nzk7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjgiIHgyPSIxNjkuMjAzNyIgeTE9Ijc2LjI5NjkiIHkyPSI3Ni4yOTY5Ii8+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJJRV9NQU5EQVRPUlkiPjxlbGxpcHNlIGN4PSIxOCIgY3k9Ijg5Ljk0NTMiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTcuOTk5NiIgeD0iMjciIHk9IjkzLjI5MiI+JiMyMTIwODsmIzIzNDUwOyYjMzExODU7JiMzMDQ0NjsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzQuNzUzOSIgeD0iMTI5LjQ0OTgiIHk9IjkzLjI5MiI+JiMxNzE7UEsmIzE4Nzs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjgiIHgyPSIxNjkuMjAzNyIgeTE9IjEwMC41OTM4IiB5Mj0iMTAwLjU5MzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSIxMyIgeT0iMTE3LjU4ODkiPiYjMjEyMDg7JiMyMzQ1MDsmIzMxMTg1OyYjMzA0NDY7JiMyMTUxNzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjIuNzMzMyIgeD0iMTMiIHk9IjEzMy44ODU3Ij5CU1BMJiMyMTMwNjsmIzIwOTk4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSIxMyIgeT0iMTUwLjE4MjYiPiYjMzYwMjQ7JiMyMDUxMTsmIzIxMzA2OyYjMjA5OTg7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzLjM1MDYiIHg9IjEzIiB5PSIxNjYuNDc5NSI+Li4uPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI4IiB4Mj0iMTY5LjIwMzciIHkxPSIxNzMuNzgxMyIgeTI9IjE3My43ODEzIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iMTMiIHk9IjE5MC43NzY0Ij4mIzIwMzE2OyYjMjUxMDQ7JiMyNjA4NTsmIzI2MTc4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSIxMyIgeT0iMjA3LjA3MzIiPiYjMjYzNTY7JiMyNjAzMjsmIzI2MDg1OyYjMjYxNzg7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjEzIiB5PSIyMjMuMzcwMSI+JiMyNjM1NjsmIzI2MDMyOyYjMzI3NzM7JiMyMTUxNzs8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkdNTjMiIGRhdGEtc291cmNlLWxpbmU9IjE3IiBpZD0iZW50MDAwNCI+PHBhdGggZD0iTTIwNS42OSwxMDIuMjI2OSBMMjA1LjY5LDEzMy40ODY5IEwxNzAuNDgsMTM3LjQ4NjkgTDIwNS42OSwxNDEuNDg2OSBMMjA1LjY5LDE3Mi43NTgxIEEwLDAgMCAwIDAgMjA1LjY5LDE3Mi43NTgxIEw0MTcuNTEzNSwxNzIuNzU4MSBBMCwwIDAgMCAwIDQxNy41MTM1LDE3Mi43NTgxIEw0MTcuNTEzNSwxMTIuMjI2OSBMNDA3LjUxMzUsMTAyLjIyNjkgTDIwNS42OSwxMDIuMjI2OSBBMCwwIDAgMCAwIDIwNS42OSwxMDIuMjI2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTQwNy41MTM1LDEwMi4yMjY5IEw0MDcuNTEzNSwxMTIuMjI2OSBMNDE3LjUxMzUsMTEyLjIyNjkgTDQwNy41MTM1LDEwMi4yMjY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTcuMDAwMSIgeD0iMjExLjY5IiB5PSIxMTkuMjkzOCI+JiMyNjM2ODsmIzEyNDE4OyYjMTI0NzE7JiMxMjUzMTsmIzEyNTAzOyYjMTI1MjM7JiMxMjM5NDsmIzI2MDQxOyYjMjQzMzU7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE5MC44MjM1IiB4PSIyMTEuNjkiIHk9IjEzNC40MjY2Ij4tICYjMjAzMTY7JiMyNTEwNDsmIzEyNTM5OyYjMjYzNTY7JiMyNjAzMjsmIzEyMzk4OyYjMjYzNjg7JiMyNjAzMjsmIzI5MzY2OyYjMjQ5MDc7JiMxMjM5ODsmIzEyNDE1OyYjMjA0NDU7JiMyNTM0NTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM4LjgyMzQiIHg9IjIxMS42OSIgeT0iMTQ5LjU1OTQiPi0gJiMyNjM1NjsmIzI2MDMyOyYjMjM2NTM7JiMyNzUwODsmIzEyMzk5OyYjMjA0NDU7JiMyNTM0NTsmIzEyMzc1OyYjMTIzOTQ7JiMxMjM1Njs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzMuODIzMyIgeD0iMjExLjY5IiB5PSIxNjQuNjkyMiI+LSAmIzIzNDU1OyYjMzUwMTM7JiMxMjM2NDsmIzIzNDgxOyYjMjYxMzE7PC90ZXh0PjwvZz48P3BsYW50dW1sLXNyYyBMUDNISVc5MTU4Umx2b2E2Qm5UczdvMTRpRGt3NDdnMmlBcU1HZzZjWXVYV1B3UERvdXFpbVJNcTM0bTJuS3JCZ1lyYjctUmlaRmlPcFI4NVVOVi1tdFYteV9DSlktb1BNM08zQ1JsQWhzM1c1VTBwTzY1UzZLSnAxajBYeTE2bWlVSUVVOW0wa3Y0azFWZzRhNWFZNVpkMjZMNWgyVnpreU5velFGbDA3dTA1d1pZM0Rtem1sYldpN3ZPOEZhT1FyaEdiWmhxYkpfWXZmazVpamgyTW9vNVRIX3k5S1J6NGduazVUVTUtWVVlUFlieV9YVHR6NU9QWDk3V3F4eVhnTk5melVTa0dSNHpiU3htYU9qajlONHVHQWZNOVlWVWpkTHMyb3pqX2lQM2lzQzBPaTBfV0FlcTdWMFhxYUZRMFQ5b3cwX3pFcE8zd1liVjN1azlURVpLYldPUEhVQV9RSzczQVk0YlZaZ1AwTno4eks0eVAwWnJMV0YyeFNTeTF3V2VfYUFzNkFjeUI5d2ItMDAwMD8+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<table>
<thead>
<tr>
<th>メリット</th>
<th>デメリット</th>
</tr>
</thead>
<tbody>
<tr>
<td>実装が簡単</td>
<td>変更履歴が追跡できない</td>
</tr>
<tr>
<td>パフォーマンスへの影響が少ない</td>
<td>誰がいつ何を変更したか不明</td>
</tr>
<tr>
<td>テーブル設計がシンプル</td>
<td>監査対応が困難</td>
</tr>
</tbody>
</table>
<h3 id="1912">19.1.2 赤黒処理・論理削除方式<a class="headerlink" href="#1912" title="Permanent link">&para;</a></h3>
<p>会計データに適した方式で、物理削除を行わず、赤伝（取消伝票）で打ち消します。</p>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjY3NHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NDU3cHg7aGVpZ2h0OjY3NHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDQ1NyA2NzQiIHdpZHRoPSI0NTdweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjYwNDE7JiMyNDMzNTtCOiAmIzM2MTk2OyYjNDA2NTg7JiMyMDk2NjsmIzI5NzAyOyYjMTI1Mzk7JiMzNTU0MjsmIzI5NzAyOyYjMjEwNjY7JiMzODUwMDs8L3RpdGxlPjxkZWZzLz48Zz48ZyBjbGFzcz0idGl0bGUiIGRhdGEtc291cmNlLWxpbmU9IjEiPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNzUuMTQyOSIgeD0iMTM0LjE3ODYiIHk9IjIyLjk5NTEiPiYjMjYwNDE7JiMyNDMzNTtCOiAmIzM2MTk2OyYjNDA2NTg7JiMyMDk2NjsmIzI5NzAyOyYjMTI1Mzk7JiMzNTU0MjsmIzI5NzAyOyYjMjEwNjY7JiMzODUwMDs8L3RleHQ+PC9nPjwhLS1jbHVzdGVyIG9yaWdpbmFsLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Im9yaWdpbmFsIiBkYXRhLXNvdXJjZS1saW5lPSIzIiBpZD0iZW50MDAwMiI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIxMjEuODkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIyMzQiIHg9IjI4LjUiIHk9IjQ0LjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTcuOTk5NiIgeD0iOTYuNTAwMiIgeT0iNTkuMjkyIj4mIzIwODAzOyYjMjAyNTM7JiMzMTA4MDsmIzY1Mjg4OyYjMzU0OTI7JiMxMjQyNjsmIzY1Mjg5OzwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgcmVkLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9InJlZCIgZGF0YS1zb3VyY2UtbGluZT0iNyIgaWQ9ImVudDAwMDQiPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMTM4LjE5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMjM0IiB4PSIyOC41IiB5PSIyMzEuMTg2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4My45OTk2IiB4PSIxMDMuNTAwMiIgeT0iMjQ2LjE4MiI+JiMzNjE5NjsmIzIwMjUzOyYjNjUyODg7JiMyMTQ2MjsmIzI4MDQwOyYjNjUyODk7PC90ZXh0PjwvZz48IS0tY2x1c3RlciBibGFjay0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLXF1YWxpZmllZC1uYW1lPSJibGFjayIgZGF0YS1zb3VyY2UtbGluZT0iMTEiIGlkPSJlbnQwMDA2Ij48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjEzOC4xOCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjIzNCIgeD0iMTU1LjUiIHk9IjQzNC4zNzY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgzLjk5OTYiIHg9IjIzMC41MDAyIiB5PSI0NDkuMzcyIj4mIzQwNjU4OyYjMjAyNTM7JiM2NTI4ODsmIzM1MzMwOyYjMjc0OTE7JiM2NTI4OTs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgajEtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJvcmlnaW5hbC5qMSIgZGF0YS1zb3VyY2UtbGluZT0iNCIgaWQ9ImVudDAwMDMiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNTQuODkwNiIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTY2LjM0MzQiIHg9IjUyLjMzIiB5PSI4Ny4yOTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA0LjkyNDYiIHg9IjYyLjMzIiB5PSIxMDMuMjkyIj4mIzIwMTgxOyYjMzUzNzk7JiMzMDA1ODsmIzIxNDk1OzogSjAwMDE8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQ2LjM0MzQiIHg9IjYyLjMzIiB5PSIxMTkuNTg4OSI+JiMxMjMwNDsmIzIwNTExOyYjMjYwNDE7JiMxMjMwNTsmIzI5Njk0OyYjMzczMjk7IDEwMCwwMDA8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQ2LjM0MzQiIHg9IjYyLjMzIiB5PSIxMzUuODg1NyI+JiMxMjMwNDsmIzM2MDI0OyYjMjYwNDE7JiMxMjMwNTsmIzIyNzcwOyYjMTk5Nzg7IDEwMCwwMDA8L3RleHQ+PC9nPjwhLS1lbnRpdHkgajItLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJyZWQuajIiIGRhdGEtc291cmNlLWxpbmU9IjgiIGlkPSJlbnQwMDA1Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjcxLjE4NzUiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE2Ni4zNDM0IiB4PSI1Mi4zMyIgeT0iMjc0LjE4NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTQuNjUyMSIgeD0iNjIuMzMiIHk9IjI5MC4xODIiPiYjMjAxODE7JiMzNTM3OTsmIzMwMDU4OyYjMjE0OTU7OiBKMDAwMVI8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQ2LjM0MzQiIHg9IjYyLjMzIiB5PSIzMDYuNDc4OSI+JiMxMjMwNDsmIzIwNTExOyYjMjYwNDE7JiMxMjMwNTsmIzIyNzcwOyYjMTk5Nzg7IDEwMCwwMDA8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQ2LjM0MzQiIHg9IjYyLjMzIiB5PSIzMjIuNzc1NyI+JiMxMjMwNDsmIzM2MDI0OyYjMjYwNDE7JiMxMjMwNTsmIzI5Njk0OyYjMzczMjk7IDEwMCwwMDA8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODEuNzMwMiIgeD0iNjIuMzMiIHk9IjMzOS4wNzI2Ij4mIzgyNTE7JiMzNjAyNDsmIzIwNTExOyYjMTI0MzQ7JiMyMTQ1MzsmIzM2NTc4OzwvdGV4dD48L2c+PCEtLWVudGl0eSBqMy0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9ImJsYWNrLmozIiBkYXRhLXNvdXJjZS1saW5lPSIxMiIgaWQ9ImVudDAwMDciPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNzEuMTg3NSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTY2LjM0MzQiIHg9IjE3OS4zMyIgeT0iNDc3LjM3NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDQuOTI0NiIgeD0iMTg5LjMzIiB5PSI0OTMuMzcyIj4mIzIwMTgxOyYjMzUzNzk7JiMzMDA1ODsmIzIxNDk1OzogSjAwMDI8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQ2LjM0MzQiIHg9IjE4OS4zMyIgeT0iNTA5LjY2ODkiPiYjMTIzMDQ7JiMyMDUxMTsmIzI2MDQxOyYjMTIzMDU7JiMyOTY5NDsmIzM3MzI5OyAxMjAsMDAwPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0Ni4zNDM0IiB4PSIxODkuMzMiIHk9IjUyNS45NjU3Ij4mIzEyMzA0OyYjMzYwMjQ7JiMyNjA0MTsmIzEyMzA1OyYjMjI3NzA7JiMxOTk3ODsgMTIwLDAwMDwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4MS43MzAyIiB4PSIxODkuMzMiIHk9IjU0Mi4yNjI2Ij4mIzgyNTE7JiMyNzQ5MTsmIzEyMzc1OyYjMTIzNTY7JiMzNzMyOTsmIzM4OTg5OzwvdGV4dD48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iR01OMTAiIGRhdGEtc291cmNlLWxpbmU9IjE5IiBpZD0iZW50MDAxMSI+PHBhdGggZD0iTTYsNDc3LjY5NjkgTDYsNTQ4LjIyODEgTDEzMS4wMDAxLDU0OC4yMjgxIEwxMzEuMDAwMSw0ODcuNjk2OSBMMTIxLjAwMDEsNDc3LjY5NjkgTDYsNDc3LjY5NjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0xMjEuMDAwMSw0NzcuNjk2OSBMMTIxLjAwMDEsNDg3LjY5NjkgTDEzMS4wMDAxLDQ4Ny42OTY5IEwxMjEuMDAwMSw0NzcuNjk2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjkxLjAwMDEiIHg9IjEyIiB5PSI0OTQuNzYzOCI+JiMzNjE5NjsmIzIwMjUzOyYjMTIzOTk7JiMyMDgwMzsmIzIwMjUzOyYjMzEwODA7JiMxMjM5ODs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA0LjAwMDEiIHg9IjEyIiB5PSI1MDkuODk2NiI+JiMzNjAyNDsmIzIwNTExOyYjMTI0MzQ7JiMyMzQzNjsmIzIwODQwOyYjMTIzOTU7JiMyMTQ1MzsmIzM2NTc4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDQuMDAwMSIgeD0iMTIiIHk9IjUyNS4wMjk0Ij4mIzIwMTgxOyYjMzUzNzk7JiMzNzMyOTsmIzM4OTg5OyYjMTIzOTg7JiMyMTUxMjsmIzM1MzM2OyYjMTIzNjQ7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY1LjAwMDEiIHg9IjEyIiB5PSI1NDAuMTYyMiI+JiMxMjQ3NjsmIzEyNTI1OyYjMTIzOTU7JiMxMjM5NDsmIzEyNDI3OzwvdGV4dD48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iR01OMTMiIGRhdGEtc291cmNlLWxpbmU9IjI2IiBpZD0iZW50MDAxNCI+PHBhdGggZD0iTTMxMi41LDYyNy41NTY5IEwzMTIuNSw2NjcuODIyNSBMNDUwLjUwMDEsNjY3LjgyMjUgTDQ1MC41MDAxLDYzNy41NTY5IEw0NDAuNTAwMSw2MjcuNTU2OSBMMzEyLjUsNjI3LjU1NjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik00NDAuNTAwMSw2MjcuNTU2OSBMNDQwLjUwMDEsNjM3LjU1NjkgTDQ1MC41MDAxLDYzNy41NTY5IEw0NDAuNTAwMSw2MjcuNTU2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNy4wMDAxIiB4PSIzMTguNSIgeT0iNjQ0LjYyMzgiPiYjNDA2NTg7JiMyMDI1MzsmIzEyMzk5OyYjMjc0OTE7JiMxMjM3NTsmIzEyMzU2OyYjMjA4Njk7JiMyMzQ4MTsmIzEyMzkxOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDQuMDAwMSIgeD0iMzE4LjUiIHk9IjY1OS43NTY2Ij4mIzI2MDMyOyYjMzUyMTU7JiMxMjM5NTsmIzIwMTgxOyYjMzUzNzk7JiMxMjQzNDsmIzM2MjE1OyYjMzEwODA7PC90ZXh0PjwvZz48IS0tbGluayBvcmlnaW5hbCB0byByZWQtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwMiIgZGF0YS1lbnRpdHktMj0iZW50MDAwNCIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjE1IiBpZD0ibG5rOCI+PHBhdGggZD0iTTI1NC41LDE2Ni44MjczIEMyNTQuNSwxNjcuMTU0IDI1NC41LDE2Ny40ODE2IDI1NC41LDE2Ny44MSBDMjU0LjUsMTY4LjQ2NyAyNTQuNSwxNjkuMTI3NCAyNTQuNSwxNjkuNzkxMiBDMjU0LjUsMTcyLjQ0NjQgMjU0LjUsMTc1LjE1NTIgMjU0LjUsMTc3LjkwNjcgQzI1NC41LDE4OC45MTMgMjU0LjUsMjAwLjYwNDcgMjU0LjUsMjEyLjI5NTYgQzI1NC41LDIxOC4xNDExIDI1NC41LDIyMy45ODY0IDI1NC41LDIyOS43NDU3IEMyNTQuNSwyMzAuMTA1NyAyNTQuNSwyMjQuNDY1MyAyNTQuNSwyMjQuODI0NiIgZmlsbD0ibm9uZSIgaWQ9Im9yaWdpbmFsLXRvLXJlZCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjU0LjUsMjMwLjgyNDYsMjU4LjUsMjIxLjgyNDYsMjU0LjUsMjI1LjgyNDYsMjUwLjUsMjIxLjgyNDYsMjU0LjUsMjMwLjgyNDYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1Mi4wMDAxIiB4PSIyNTUuNSIgeT0iMjAzLjI1MzgiPiYjMzYxOTY7JiMyMDI1MzsmIzMwMzMwOyYjMzQ4OTI7PC90ZXh0PjwvZz48IS0tbGluayByZWQgdG8gYmxhY2stLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwNCIgZGF0YS1lbnRpdHktMj0iZW50MDAwNiIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjE2IiBpZD0ibG5rOSI+PHBhdGggZD0iTTI2Mi41NTYxLDMxNi4yOTA3IEMyNjQuMTEwNSwzMTcuMzg4NiAyNjUuODU5MywzMTguNjQxIDI2Ny43NzQ4LDMyMC4wMzkyIEMyNzUuNDM3MiwzMjUuNjMyMiAyODUuNzY5NCwzMzMuNTU4OCAyOTcuMDE4OCwzNDMuMjYzMSBDMzE5LjUxNzUsMzYyLjY3MTkgMzQ1LjY4NSwzODkuMTkxOSAzNjEuNSw0MTguMzc2OSBDMzYzLjk1MzgsNDIyLjkwNTYgMzY2LjEwNjYsNDI3LjcxIDM2Ny45OTUzLDQzMi42NTY4IEMzNjguMTEzNCw0MzIuOTY2IDM2OC4yMzA0LDQzMy4yNzU3IDM2OC4zNDY0LDQzMy41ODYgQzM2OC40MDQ0LDQzMy43NDExIDM2Ni4zODAzLDQyOC4yNjkyIDM2Ni40Mzc4LDQyOC40MjQ1IiBmaWxsPSJub25lIiBpZD0icmVkLXRvLWJsYWNrIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIzNjguNTE5Niw0MzQuMDUxOCwzNjkuMTQ4Myw0MjQuMjIzLDM2Ni43ODQ3LDQyOS4zNjI0LDM2MS42NDUzLDQyNi45OTg4LDM2OC41MTk2LDQzNC4wNTE4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTIuMDAwMSIgeD0iMzU2LjI4IiB5PSI0MDYuNDQzOCI+JiM0MDY1ODsmIzIwMjUzOyYjMzAzMzA7JiMzNDg5Mjs8L3RleHQ+PC9nPjwhLS1saW5rIHJlZCB0byBHTU4xMC0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDA0IiBkYXRhLWVudGl0eS0yPSJlbnQwMDExIiBkYXRhLWxpbmstdHlwZT0iYXNzb2NpYXRpb24iIGRhdGEtc291cmNlLWxpbmU9IjE5IiBpZD0ibG5rMTIiPjxwYXRoIGQ9Ik0yNDQuMTM2NCwzNjkuNjU4NiBDMjQ0LjA4MjIsMzY5Ljc3OTMgMjQ0LjAyNzgsMzY5Ljg5OTkgMjQzLjk3MywzNzAuMDIwMyBDMjQzLjg2MzYsMzcwLjI2MTEgMjQzLjc1MywzNzAuNTAxNCAyNDMuNjQxMiwzNzAuNzQxMSBDMjQzLjQxNzgsMzcxLjIyMDUgMjQzLjE4OTgsMzcxLjY5NzQgMjQyLjk1NzEsMzcyLjE3MTggQzI0Mi40OTE5LDM3My4xMjA2IDI0Mi4wMDgxLDM3NC4wNTkgMjQxLjUwNTIsMzc0Ljk4NDkgQzIzOS40OTMzLDM3OC42ODg4IDIzNy4xNzM3LDM4Mi4xOTQ0IDIzNC41LDM4NS4zNzY5IEMyMTIuMTEsNDEyLjAxNjkgMTkyLjA5LDM5OC41MzY5IDE2My41LDQxOC4zNzY5IEMxMzkuMzQsNDM1LjEzNjkgMTE1Ljc3LDQ1OC4yOTY5IDk4LjE1LDQ3Ny4zODY5IiBmaWxsPSJub25lIiBpZD0icmVkLUdNTjEwIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheTo3LDc7Ii8+PC9nPjwhLS1saW5rIGJsYWNrIHRvIEdNTjEzLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDYiIGRhdGEtZW50aXR5LTI9ImVudDAwMTQiIGRhdGEtbGluay10eXBlPSJhc3NvY2lhdGlvbiIgZGF0YS1zb3VyY2UtbGluZT0iMjYiIGlkPSJsbmsxNSI+PHBhdGggZD0iTTM4MS41LDU3Mi43OTEzIEMzODEuNSw1NzMuMTczOCAzODEuNSw1NzMuNTU2NyAzODEuNSw1NzMuOTM5OCBDMzgxLjUsNTc0LjcwNjEgMzgxLjUsNTc1LjQ3MzYgMzgxLjUsNTc2LjI0MTggQzM4MS41LDU4Mi4zODcyIDM4MS41LDU4OC41Nzk2IDM4MS41LDU5NC42MDcgQzM4MS41LDYwNi42NjE5IDM4MS41LDYxOC4wNTY5IDM4MS41LDYyNy4wOTY5IiBmaWxsPSJub25lIiBpZD0iYmxhY2stR01OMTMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjcsNzsiLz48L2c+PD9wbGFudHVtbC1zcmMgVlBCREppOTA1OE50eW5HSnJmQUtrY0ZYbWdMQnJzdUFMODlZY3MxdG5lR00tSExJODA3M21YV0thSzEwV3E3MERad0NteTJtdVhNeXhHVzRERW1jUy13VHl6cnBIdWplS0hiRmdzRGdjdVQtcDBRRGtMTWN3VVFpYzI4OVl0TWdTQTNQdEJwTUcyV2MxcEw5MktFelhvT0o0X2otempuUXMxZE1SWDBaangycDdZblRPWktNMktTS0FPZ2xLNTJBWFIxZE9iTE93dHJNUUxEcHdDVDdXWTN1SlhHSUJ6QnUwellJVTZiY1ZpdEo5VW1KWDNxR05PdHJIcm9aSl90OUFCVktOOENwN3hoVU8wNWNPMDRHUWJRZDd2YWJJNG1FeE04dXRlSk9ERGc0czBSeVpia1dHSWlub2pHaUNFa0hXdWJSTzkwYTFzQ2pPemZ6TWU4NWViQm1WMFVRLTd5eXVldnVuM0tQNjE3elprV3RxM0lsNXBaUGxhRXNzZXBOVS0yY3V3eFJNTUZqYXpOcG9CYm85Q3hkbm5wX0xxSUFnaWF1ZTZnUVVlN0xLd1NWeU13WWx3di0wejV4UTFyREJxLUpTRE5YNkk0LUFTVTJHYmc0TjM5NHBvRFlzMkpIWEtBWWp1Ym5Zc0diWDFzeEZ3T2s2VTlTT0JpUWJRUUlqM1NjLVdrUUxqek9xdUlkazFiR2lDNEdtNVBsX1cwMD8+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<table>
<thead>
<tr>
<th>メリット</th>
<th>デメリット</th>
</tr>
</thead>
<tbody>
<tr>
<td>監査証跡が確保される</td>
<td>データ量が増加する</td>
</tr>
<tr>
<td>会計基準に準拠</td>
<td>複雑な処理が必要</td>
</tr>
<tr>
<td>残高が自動的に訂正される</td>
<td>元伝票と赤伝の紐付け管理が必要</td>
</tr>
</tbody>
</table>
<h3 id="1913">19.1.3 ログテーブルにログ情報を保存する方式<a class="headerlink" href="#1913" title="Permanent link">&para;</a></h3>
<p>変更前後のデータを別テーブルに保存する方式です。</p>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjQ1MXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NDM0cHg7aGVpZ2h0OjQ1MXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDQzNCA0NTEiIHdpZHRoPSI0MzRweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjYwNDE7JiMyNDMzNTtDOiAmIzEyNTI1OyYjMTI0NjQ7JiMxMjQ4NjsmIzEyNTQwOyYjMTI1MDI7JiMxMjUyMzsmIzEyMzk1OyYjMjA0NDU7JiMyMzM4NDs8L3RpdGxlPjxkZWZzLz48Zz48ZyBjbGFzcz0idGl0bGUiIGRhdGEtc291cmNlLWxpbmU9IjEiPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNzQuNzQ2NCIgeD0iMTIyLjY2NzUiIHk9IjIyLjk5NTEiPiYjMjYwNDE7JiMyNDMzNTtDOiAmIzEyNTI1OyYjMTI0NjQ7JiMxMjQ4NjsmIzEyNTQwOyYjMTI1MDI7JiMxMjUyMzsmIzEyMzk1OyYjMjA0NDU7JiMyMzM4NDs8L3RleHQ+PC9nPjwhLS1jbGFzcyBBY2NvdW50LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iQWNjb3VudCIgZGF0YS1zb3VyY2UtbGluZT0iMyIgaWQ9ImVudDAwMDIiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTEzLjE4NzUiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE2My4yMDM3IiB4PSI3IiB5PSI0NC4yOTY5Ii8+PGVsbGlwc2UgY3g9IjM2Ljk0MTgiIGN5PSI2MC4yOTY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik00MS4wNTEyLDY2LjI5NjkgTDMzLjMzMjUsNjYuMjk2OSBMMzMuMzMyNSw1My45MDYzIEw0MS4wNTEyLDUzLjkwNjMgTDQxLjA1MTIsNTYuMDYyNSBMMzUuNzg1Niw1Ni4wNjI1IEwzNS43ODU2LDU4LjczNDQgTDQwLjU1MTIsNTguNzM0NCBMNDAuNTUxMiw2MC44OTA2IEwzNS43ODU2LDYwLjg5MDYgTDM1Ljc4NTYsNjQuMTQwNiBMNDEuMDUxMiw2NC4xNDA2IEw0MS4wNTEyLDY2LjI5NjkgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ny45OTk2IiB4PSI1NC4yNjIzIiB5PSI2NS4xNDM2Ij4mIzIxMjA4OyYjMjM0NTA7JiMzMTE4NTsmIzMwNDQ2OyYjMTI1MTA7JiMxMjQ3MzsmIzEyNDc5OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI4IiB4Mj0iMTY5LjIwMzciIHkxPSI3Ni4yOTY5IiB5Mj0iNzYuMjk2OSIvPjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iSUVfTUFOREFUT1JZIj48ZWxsaXBzZSBjeD0iMTgiIGN5PSI4OS45NDUzIiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk3Ljk5OTYiIHg9IjI3IiB5PSI5My4yOTIiPiYjMjEyMDg7JiMyMzQ1MDsmIzMxMTg1OyYjMzA0NDY7JiMxMjQ2NzsmIzEyNTQwOyYjMTI0ODk7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjM0Ljc1MzkiIHg9IjEyOS40NDk4IiB5PSI5My4yOTIiPiYjMTcxO1BLJiMxODc7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI4IiB4Mj0iMTY5LjIwMzciIHkxPSIxMDAuNTkzOCIgeTI9IjEwMC41OTM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iMTMiIHk9IjExNy41ODg5Ij4mIzIxMjA4OyYjMjM0NTA7JiMzMTE4NTsmIzMwNDQ2OyYjMjE1MTc7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYyLjczMzMiIHg9IjEzIiB5PSIxMzMuODg1NyI+QlNQTCYjMjEzMDY7JiMyMDk5ODs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMuMzUwNiIgeD0iMTMiIHk9IjE1MC4xODI2Ij4uLi48L3RleHQ+PC9nPjwhLS1jbGFzcyBDaGFuZ2VMb2ctLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJDaGFuZ2VMb2ciIGRhdGEtc291cmNlLWxpbmU9IjExIiBpZD0iZW50MDAwMyI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxOTQuNjcxOSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTQ1Ljg4MTUiIHg9IjE1LjY2IiB5PSIyNDkuNDg2OSIvPjxlbGxpcHNlIGN4PSI1Ni43MDY4IiBjeT0iMjY1LjQ4NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTYwLjgxNjEsMjcxLjQ4NjkgTDUzLjA5NzQsMjcxLjQ4NjkgTDUzLjA5NzQsMjU5LjA5NjMgTDYwLjgxNjEsMjU5LjA5NjMgTDYwLjgxNjEsMjYxLjI1MjUgTDU1LjU1MDUsMjYxLjI1MjUgTDU1LjU1MDUsMjYzLjkyNDQgTDYwLjMxNjEsMjYzLjkyNDQgTDYwLjMxNjEsMjY2LjA4MDYgTDU1LjU1MDUsMjY2LjA4MDYgTDU1LjU1MDUsMjY5LjMzMDYgTDYwLjgxNjEsMjY5LjMzMDYgTDYwLjgxNjEsMjcxLjQ4NjkgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSI3Ni40OTQ5IiB5PSIyNzAuMzMzNiI+JiMyMjc5MzsmIzI2MzU2OyYjMTI1MjU7JiMxMjQ2NDs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMTYuNjYiIHgyPSIxNjAuNTQxNSIgeTE9IjI4MS40ODY5IiB5Mj0iMjgxLjQ4NjkiLz48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IklFX01BTkRBVE9SWSI+PGVsbGlwc2UgY3g9IjI2LjY2IiBjeT0iMjk1LjEzNTMiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDQuODMiIHg9IjM1LjY2IiB5PSIyOTguNDgyIj4mIzEyNTI1OyYjMTI0NjQ7SUQ8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzQuNzUzOSIgeD0iODQuOTQwMiIgeT0iMjk4LjQ4MiI+JiMxNzE7UEsmIzE4Nzs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE2LjY2IiB4Mj0iMTYwLjU0MTUiIHkxPSIzMDUuNzgzOCIgeTI9IjMwNS43ODM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iMjEuNjYiIHk9IjMyMi43Nzg5Ij4mIzEyNDg2OyYjMTI1NDA7JiMxMjUwMjsmIzEyNTIzOyYjMjE1MTc7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgzLjk5OTYiIHg9IjIxLjY2IiB5PSIzMzkuMDc1NyI+JiMxMjUyNDsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsmIzEyNDYxOyYjMTI1NDA7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjIxLjY2IiB5PSIzNTUuMzcyNiI+JiMyNTgwNTsmIzIwMzE2OyYjMzEyNzg7JiMyMTAyOTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMzLjg4MTUiIHg9IjIxLjY2IiB5PSIzNzEuNjY5NSI+JiMyNTgwNTsmIzIwMzE2OyYjMjEwNjk7JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7IChKU09OKTwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzMuODgxNSIgeD0iMjEuNjYiIHk9IjM4Ny45NjY0Ij4mIzI1ODA1OyYjMjAzMTY7JiMyNDQ2MDsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsgKEpTT04pPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjIxLjY2IiB5PSI0MDQuMjYzMiI+JiMyNTgwNTsmIzIwMzE2OyYjMjYwODU7JiMyNjE3ODs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDEuOTk5OCIgeD0iMjEuNjYiIHk9IjQyMC41NjAxIj4mIzI1ODA1OyYjMjAzMTY7JiMzMjc3Mzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iMjEuNjYiIHk9IjQzNi44NTciPiYjMjU4MDU7JiMyMDMxNjsmIzMxNDcxOyYjMjY0MTE7PC90ZXh0PjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJHTU41IiBkYXRhLXNvdXJjZS1saW5lPSIyNyIgaWQ9ImVudDAwMDYiPjxwYXRoIGQ9Ik0xOTYuMTIsMzExLjU1NjkgTDE5Ni4xMiwzNDIuODE2OSBMMTYxLjc3LDM0Ni44MTY5IEwxOTYuMTIsMzUwLjgxNjkgTDE5Ni4xMiwzODIuMDg4MSBBMCwwIDAgMCAwIDE5Ni4xMiwzODIuMDg4MSBMNDI3LjA4MTUsMzgyLjA4ODEgQTAsMCAwIDAgMCA0MjcuMDgxNSwzODIuMDg4MSBMNDI3LjA4MTUsMzIxLjU1NjkgTDQxNy4wODE1LDMxMS41NTY5IEwxOTYuMTIsMzExLjU1NjkgQTAsMCAwIDAgMCAxOTYuMTIsMzExLjU1NjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik00MTcuMDgxNSwzMTEuNTU2OSBMNDE3LjA4MTUsMzIxLjU1NjkgTDQyNy4wODE1LDMyMS41NTY5IEw0MTcuMDgxNSwzMTEuNTU2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTEuMDAwMSIgeD0iMjAyLjEyIiB5PSIzMjguNjIzOCI+JiMyMzQzNjsmIzIwODQwOyYjMTIzOTQ7JiMyMzY1MzsmIzI3NTA4OyYjMzE2NDk7JiMyOTcwMjs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjA5Ljk2MTUiIHg9IjIwMi4xMiIgeT0iMzQzLjc1NjYiPi0gSU5TRVJUL1VQREFURS9ERUxFVEUgJiMxMjQzNDsmIzM1MzUyOyYjMzc2ODI7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1MS44MjM0IiB4PSIyMDIuMTIiIHk9IjM1OC44ODk0Ij4tICYjMjI3OTM7JiMyNjM1NjsmIzIxMDY5OyYjMjQ0NjA7JiMxMjM5ODsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsmIzEyNDM0OyYjMjA0NDU7JiMyNTM0NTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTc3LjgyMzQiIHg9IjIwMi4xMiIgeT0iMzc0LjAyMjIiPi0gJiMyMDIxOTsmIzI0ODQ3OyYjMTIzOTg7JiMyNjE3ODsmIzI4ODU3OyYjMTIzOTg7JiMyOTM2NjsmIzI0OTA3OyYjMTI0MzQ7JiMyNDQ4OTsmIzIwODAzOyYjMjE0ODc7JiMzMzAyMTs8L3RleHQ+PC9nPjwhLS1saW5rIEFjY291bnQgdG8gQ2hhbmdlTG9nLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDIiIGRhdGEtZW50aXR5LTI9ImVudDAwMDMiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSIyNCIgaWQ9ImxuazQiPjxwYXRoIGNvZGVMaW5lPSIyNCIgZD0iTTg4LjYsMTU3Ljg1NjkgQzg4LjYsMTg0Ljk5NjkgODguNiwyMTIuMzg2OSA4OC42LDI0My40NTY5IiBmaWxsPSJub25lIiBpZD0iQWNjb3VudC10by1DaGFuZ2VMb2ciIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjcsNzsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9Ijg4LjYsMjQ5LjQ1NjksOTIuNiwyNDAuNDU2OSw4OC42LDI0NC40NTY5LDg0LjYsMjQwLjQ1NjksODguNiwyNDkuNDU2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY1LjAwMDEiIHg9Ijg5LjYiIHk9IjIwMC41NTM4Ij4mIzEyNDg4OyYjMTI1MjI7JiMxMjQ2MDsmIzEyNTQwOyYjMTIzOTE7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjUyLjAwMDEiIHg9Ijk2LjEiIHk9IjIxNS42ODY2Ij4mIzMzMjU4OyYjMjEyMDU7JiMzNTM1MjsmIzM3NjgyOzwvdGV4dD48L2c+PD9wbGFudHVtbC1zcmMgVEw1VEltOTE1N3NWTnA3cUwwamt4bzUyd0p2T0tmQnNyZWtPY0gwaHJGT0c0UkdwUVBlaE1mNVBNSDBhY1VSc0lNMVZfZlpocERnX1FEUWx4QTZ0a1BtcHZ2dnBablJKTFlFTzVuaGk4LVVVbTQzaEcxdzA5ZTUtMDJxMGhPNVVRcEtsTUJzOEs0SkxPamVjN2M2UDhaRkZoOWkzd3ptNFVXY2EwUUd2V2FGaFUzOFNaYy1lNmp2MjRmUWFGcHBvdDk1Q0luOXNFbHFwQlhUb0VEMG1XLU1wUTJoV3pwN1paUU1JSTlQYmozc3F5cGhEcHItd3paZ2h0MmlYREhobm5RRXpQTHQ4d19jWkZucDRyV1R3RHAwMmYydVVZMXpiTXZ5YmdzQW9MQmF0aTdHTXc5eEQ4YXF5RVhzT2NudGg4cl82Rm1XX0FWREpxWGxRRXVjLVJrc1Vic2ZzYUZ2ZlBEYXJ2RHMtVTBmZTVTWVRoUWhWQkFoamxJaEI3QlNobk1fWjJJNHJoYU5tTVlvd2VrN3V5a3o3bjRvMzlJZ1dMemJaY1RUVkJGRkFvWVVIMHRqZDB5ZnlTN3AxeHZhQ0FrQ1VuUVM0NUdwYWlBVmRtRHIzWWVYczVqcVNuMTRTcUpDdFRDNWZsUl9wdFBuMEhJSEJqQWtScmx1aEpzRzRYdHRUaVdIYmtWaXNfSEpiQjY3UnUweTA/PjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<table>
<thead>
<tr>
<th>メリット</th>
<th>デメリット</th>
</tr>
</thead>
<tbody>
<tr>
<td>完全な変更履歴を追跡可能</td>
<td>ログテーブルが肥大化する</td>
</tr>
<tr>
<td>任意の時点の状態を復元可能</td>
<td>トリガー設定が必要</td>
</tr>
<tr>
<td>監査対応が容易</td>
<td>パフォーマンスへの影響</td>
</tr>
</tbody>
</table>
<h3 id="1914-3">19.1.4 3つの方式の比較<a class="headerlink" href="#1914-3" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjMzM3B4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NzU3cHg7aGVpZ2h0OjMzM3B4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDc1NyAzMzMiIHdpZHRoPSI3NTdweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMTI1MjU7JiMxMjQ2NDsmIzMxNjQ5OyYjMjk3MDI7JiMyNjA0MTsmIzI0MzM1OyYjMTIzOTg7JiMyNzYwNDsmIzM2NjExOzwvdGl0bGU+PGRlZnMvPjxnPjxnIGNsYXNzPSJ0aXRsZSIgZGF0YS1zb3VyY2UtbGluZT0iMSI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyNS45OTk1IiB4PSIzMDguNzUwMyIgeT0iMjIuOTk1MSI+JiMxMjUyNTsmIzEyNDY0OyYjMzE2NDk7JiMyOTcwMjsmIzI2MDQxOyYjMjQzMzU7JiMxMjM5ODsmIzI3NjA0OyYjMzY2MTE7PC90ZXh0PjwvZz48IS0tY2x1c3RlciBhLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9ImEiIGRhdGEtc291cmNlLWxpbmU9IjMiIGlkPSJlbnQwMDAyIj48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjEyMS44OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjI0NyIgeD0iNyIgeT0iMTE5LjgwNjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjMxLjMwNjciIHg9IjE0Ljg0NjYiIHk9IjEzNC44MDIiPiYjMjYwNDE7JiMyNDMzNTtBOiAmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsmIzMzMjU4OyYjMjAzMDc7JiMxMjM5NTsmIzEyNTI1OyYjMTI0NjQ7JiMyNDc3MzsmIzIyNTc3OyYjMTI0MzQ7JiMyNTM0NTsmIzEyMzg4OzwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgYi0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLXF1YWxpZmllZC1uYW1lPSJiIiBkYXRhLXNvdXJjZS1saW5lPSI3IiBpZD0iZW50MDAwNCI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIxMjEuODkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxOTEiIHg9IjI5NCIgeT0iMTE5LjgwNjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTc1LjE0MjkiIHg9IjMwMS45Mjg2IiB5PSIxMzQuODAyIj4mIzI2MDQxOyYjMjQzMzU7QjogJiMzNjE5NjsmIzQwNjU4OyYjMjA5NjY7JiMyOTcwMjsmIzEyNTM5OyYjMzU1NDI7JiMyOTcwMjsmIzIxMDY2OyYjMzg1MDA7PC90ZXh0PjwvZz48IS0tY2x1c3RlciBjLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9ImMiIGRhdGEtc291cmNlLWxpbmU9IjExIiBpZD0iZW50MDAwNiI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIxMzguMTgiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxOTAiIHg9IjUyNSIgeT0iMTExLjY1NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTc0Ljc0NjQiIHg9IjUzMi42MjY4IiB5PSIxMjYuNjUyIj4mIzI2MDQxOyYjMjQzMzU7QzogJiMxMjUyNTsmIzEyNDY0OyYjMTI0ODY7JiMxMjU0MDsmIzEyNTAyOyYjMTI1MjM7JiMxMjM5NTsmIzIwNDQ1OyYjMjMzODQ7PC90ZXh0PjwvZz48IS0tZW50aXR5IGExLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iYS5hMSIgZGF0YS1zb3VyY2UtbGluZT0iNCIgaWQ9ImVudDAwMDMiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNTQuODkwNiIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNzUuOTk5OCIgeD0iODMiIHk9IjE2Mi44MDY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iOTMiIHk9IjE3OC44MDIiPiYjMjAzMTY7JiMyNTEwNDsmIzI2MDg1OyYjMjYxNzg7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjkzIiB5PSIxOTUuMDk4OSI+JiMyNjM1NjsmIzI2MDMyOyYjMjYwODU7JiMyNjE3ODs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iOTMiIHk9IjIxMS4zOTU3Ij4mIzI2MzU2OyYjMjYwMzI7JiMzMjc3MzsmIzIxNTE3OzwvdGV4dD48L2c+PCEtLWVudGl0eSBiMS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9ImIuYjEiIGRhdGEtc291cmNlLWxpbmU9IjgiIGlkPSJlbnQwMDA1Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjU0Ljg5MDYiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEwMy45OTk2IiB4PSIzMjMiIHk9IjE2Mi44MDY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iMzMzIiB5PSIxNzguODAyIj4mIzM2MTk2OyYjMjAyNTM7JiMxMjUwMTsmIzEyNTIxOyYjMTI0NjQ7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgzLjk5OTYiIHg9IjMzMyIgeT0iMTk1LjA5ODkiPiYjMzYxOTY7JiM0MDY1ODsmIzIwMjUzOyYjMzEwODA7JiMzMDA1ODsmIzIxNDk1OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSIzMzMiIHk9IjIxMS4zOTU3Ij4mIzIxMDY2OyYjMzg1MDA7JiMxMjUwMTsmIzEyNTIxOyYjMTI0NjQ7PC90ZXh0PjwvZz48IS0tZW50aXR5IGMxLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iYy5jMSIgZGF0YS1zb3VyY2UtbGluZT0iMTIiIGlkPSJlbnQwMDA3Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjcxLjE4NzUiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEwMy45OTk2IiB4PSI1NDkiIHk9IjE1NC42NTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iNTU5IiB5PSIxNzAuNjUyIj4mIzI1ODA1OyYjMjAzMTY7JiMzMTI3ODsmIzIxMDI5OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4My45OTk2IiB4PSI1NTkiIHk9IjE4Ni45NDg5Ij4mIzI1ODA1OyYjMjAzMTY7JiMyMTA2OTsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iNTU5IiB5PSIyMDMuMjQ1NyI+JiMyNTgwNTsmIzIwMzE2OyYjMjQ0NjA7JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQxLjk5OTgiIHg9IjU1OSIgeT0iMjE5LjU0MjYiPiYjMjU4MDU7JiMyMDMxNjsmIzMyNzczOzwvdGV4dD48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iR01OMTAiIGRhdGEtc291cmNlLWxpbmU9IjE5IiBpZD0iZW50MDAxMSI+PHBhdGggZD0iTTE3MC41LDI4NS44MzY5IEwxNzAuNSwzMjYuMTAyNSBMMzIxLjUwMDIsMzI2LjEwMjUgTDMyMS41MDAyLDI5NS44MzY5IEwzMTEuNTAwMiwyODUuODM2OSBMMTcwLjUsMjg1LjgzNjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0zMTEuNTAwMiwyODUuODM2OSBMMzExLjUwMDIsMjk1LjgzNjkgTDMyMS41MDAyLDI5NS44MzY5IEwzMTEuNTAwMiwyODUuODM2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc4LjAwMDEiIHg9IjE3Ni41IiB5PSIzMDIuOTAzOCI+JiMyNjM2ODsmIzEyNDE4OyYjMTI0NzE7JiMxMjUzMTsmIzEyNTAzOyYjMTI1MjM7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzMC4wMDAyIiB4PSIxNzYuNSIgeT0iMzE4LjAzNjYiPiYjMjYzNTY7JiMyNjAzMjsmIzIzNjUzOyYjMjc1MDg7JiMxMjM5OTsmIzIwNDQ1OyYjMjUzNDU7JiMxMjM3NTsmIzEyMzk0OyYjMTIzNTY7PC90ZXh0PjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJHTU4xMyIgZGF0YS1zb3VyY2UtbGluZT0iMjQiIGlkPSJlbnQwMDE0Ij48cGF0aCBkPSJNNDA0LjUsMjg1LjgzNjkgTDQwNC41LDMyNi4xMDI1IEw1MjkuNTAwMSwzMjYuMTAyNSBMNTI5LjUwMDEsMjk1LjgzNjkgTDUxOS41MDAxLDI4NS44MzY5IEw0MDQuNSwyODUuODM2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTUxOS41MDAxLDI4NS44MzY5IEw1MTkuNTAwMSwyOTUuODM2OSBMNTI5LjUwMDEsMjk1LjgzNjkgTDUxOS41MDAxLDI4NS44MzY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA0LjAwMDEiIHg9IjQxMC41IiB5PSIzMDIuOTAzOCI+JiMyMDI1MDsmIzM1MzM2OyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OyYjMTIzOTU7JiMyNjM2ODsmIzM2OTY5OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5MS4wMDAxIiB4PSI0MTAuNSIgeT0iMzE4LjAzNjYiPiYjMzA0MzU7JiMyNjYxOTsmIzM1Mzg4OyYjMzYzMjE7JiMxMjQzNDsmIzMwOTA2OyYjMjA0NDU7PC90ZXh0PjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJHTU4xNiIgZGF0YS1zb3VyY2UtbGluZT0iMjkiIGlkPSJlbnQwMDE3Ij48cGF0aCBkPSJNNjI1LjUsMjg1LjgzNjkgTDYyNS41LDMyNi4xMDI1IEw3NTAuNTAwMSwzMjYuMTAyNSBMNzUwLjUwMDEsMjk1LjgzNjkgTDc0MC41MDAxLDI4NS44MzY5IEw2MjUuNSwyODUuODM2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTc0MC41MDAxLDI4NS44MzY5IEw3NDAuNTAwMSwyOTUuODM2OSBMNzUwLjUwMDEsMjk1LjgzNjkgTDc0MC41MDAxLDI4NS44MzY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTEuMDAwMSIgeD0iNjMxLjUiIHk9IjMwMi45MDM4Ij4mIzIzNDM2OyYjMjA4NDA7JiMxMjM5NDsmIzIzNjUzOyYjMjc1MDg7JiMzMTY0OTsmIzI5NzAyOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDQuMDAwMSIgeD0iNjMxLjUiIHk9IjMxOC4wMzY2Ij4mIzEyNTEwOyYjMTI0NzM7JiMxMjQ3OTsmIzI2MzU2OyYjMjYwMzI7JiMxMjM5NTsmIzI2MzY4OyYjMzY5Njk7PC90ZXh0PjwvZz48IS0tbGluayBhIHRvIGItLT48IS0tbGluayBiIHRvIGMtLT48IS0tbGluayBhIHRvIEdNTjEwLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDIiIGRhdGEtZW50aXR5LTI9ImVudDAwMTEiIGRhdGEtbGluay10eXBlPSJhc3NvY2lhdGlvbiIgZGF0YS1zb3VyY2UtbGluZT0iMTkiIGlkPSJsbmsxMiI+PHBhdGggZD0iTTI0NiwyNDEuODgzNiBDMjQ2LDI0Mi4wNDI5IDI0NiwyNDIuMjAyMiAyNDYsMjQyLjM2MTYgQzI0NiwyNDcuNDYyNyAyNDYsMjUyLjYyNTkgMjQ2LDI1Ny42ODUgQzI0NiwyNjcuODAzMSAyNDYsMjc3LjUwNDQgMjQ2LDI4NS40NTY5IiBmaWxsPSJub25lIiBpZD0iYS1HTU4xMCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6Nyw3OyIvPjwvZz48IS0tbGluayBiIHRvIEdNTjEzLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDQiIGRhdGEtZW50aXR5LTI9ImVudDAwMTQiIGRhdGEtbGluay10eXBlPSJhc3NvY2lhdGlvbiIgZGF0YS1zb3VyY2UtbGluZT0iMjQiIGlkPSJsbmsxNSI+PHBhdGggZD0iTTQ2NywyNDEuODgzNiBDNDY3LDI0Mi4wNDI5IDQ2NywyNDIuMjAyMiA0NjcsMjQyLjM2MTYgQzQ2NywyNDcuNDYyNyA0NjcsMjUyLjYyNTkgNDY3LDI1Ny42ODUgQzQ2NywyNjcuODAzMSA0NjcsMjc3LjUwNDQgNDY3LDI4NS40NTY5IiBmaWxsPSJub25lIiBpZD0iYi1HTU4xMyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6Nyw3OyIvPjwvZz48IS0tbGluayBjIHRvIEdNTjE2LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDYiIGRhdGEtZW50aXR5LTI9ImVudDAwMTciIGRhdGEtbGluay10eXBlPSJhc3NvY2lhdGlvbiIgZGF0YS1zb3VyY2UtbGluZT0iMjkiIGlkPSJsbmsxOCI+PHBhdGggZD0iTTY4OCwyNTAuMDM5MSBDNjg4LDI1Mi41OTk5IDY4OCwyNTUuMTU1NSA2ODgsMjU3LjY4NSBDNjg4LDI2Ny44MDMxIDY4OCwyNzcuNTA0NCA2ODgsMjg1LjQ1NjkiIGZpbGw9Im5vbmUiIGlkPSJjLUdNTjE2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheTo3LDc7Ii8+PC9nPjw/cGxhbnR1bWwtc3JjIFRQQkRKaTkwNThOdHluR0p6WXBTaWJDVkdyb3FmSUE5YldJeENvUXM4dTg2OFc0MV90LWZnSDBHZWVPZUxIX2NUZ1JiQlJtbU1jRkdOVVZFbFR5dnZxeERaQmNjS3MxVGlGajF4cGdleDhoNjJfU0VtRWc5WHlGR091SmFUQ3JLWjNJc25VSlRWMDg3MmkweWkzXzJHampfZ3U3TGFHWjF5bG5nMDdQTGIyb21NWjZnUjUyNVJYOURvUUxlcDd5eDR5TUFRM2hZczR1UXVsSDlERmdfSi01c2RiVkFTY29FUkZxWGxmMld1TkRoRkFob21Yc3cxSk9BRW10eXU3bHh1c0NmZzRRMnNFYnh2eTNnbUV4SE5UQUdlcldCNzNVZWpfZDFDNmQ4b1FYOThsdU1OcW55aEdoT3hZR19RbTNoTzdaX3V2bnRad1FKTVlHa1FjS0M3Qld6TmRHbXRfSjR6eWhId2dCUVVzY2NYZGtHakFhRlhTUU5MWkVmYjZ1aXZwQmZMSkRFTFFCRXIzSDJaQW9mS3BMaGNqYnJjYnNYMlg1ZHNzM1JPMC0xRkc5aGViaVk1eXE3WmtXLVdWTTByZ1RsckdJaDNUT0VxT3FLZE0xY08yaG5sUEZHQktQVUNKVlluek96Mkt2bG5VS2VUQnJtVThybDd6b3k4bExfYWFQdWh5SnBCWWZBNl9CNzh5MGttN3YxaWhKdW1feWNWRzgwPz48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<h2 id="192">19.2 業務システムでの使い分け<a class="headerlink" href="#192" title="Permanent link">&para;</a></h2>
<h3 id="1921">19.2.1 推奨される組み合わせ<a class="headerlink" href="#1921" title="Permanent link">&para;</a></h3>
<p>業務システムでは、データの特性に応じて3つの方式を組み合わせて使用します。</p>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjI5M3B4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6Nzg1cHg7aGVpZ2h0OjI5M3B4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDc4NSAyOTMiIHdpZHRoPSI3ODVweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjAyNTA7JiMzNTMzNjsmIzEyNDcxOyYjMTI0NzM7JiMxMjQ4NjsmIzEyNTEyOyYjMTIzOTU7JiMxMjM2MjsmIzEyMzY5OyYjMTI0Mjc7JiMxMjUyNTsmIzEyNDY0OyYjMzE2NDk7JiMyOTcwMjsmIzI2MDQxOyYjMjQzMzU7JiMxMjM5ODsmIzMyMDY4OyYjMTI0MTU7JiMyMTUxMjsmIzEyNDMxOyYjMTIzNzk7PC90aXRsZT48ZGVmcy8+PGc+PGcgY2xhc3M9InRpdGxlIiBkYXRhLXNvdXJjZS1saW5lPSIxIj48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzA3Ljk5ODciIHg9IjIzMS45OTY1IiB5PSIyMi45OTUxIj4mIzIwMjUwOyYjMzUzMzY7JiMxMjQ3MTsmIzEyNDczOyYjMTI0ODY7JiMxMjUxMjsmIzEyMzk1OyYjMTIzNjI7JiMxMjM2OTsmIzEyNDI3OyYjMTI1MjU7JiMxMjQ2NDsmIzMxNjQ5OyYjMjk3MDI7JiMyNjA0MTsmIzI0MzM1OyYjMTIzOTg7JiMzMjA2ODsmIzEyNDE1OyYjMjE1MTI7JiMxMjQzMTsmIzEyMzc5OzwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgPz8/Pz8/LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Ii4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMyIgaWQ9ImVudDAwMDIiPjxwYXRoIGQ9Ik0xMjMuNDkxNiw0My4yOTY5IEwyMDguNDkxMiw0My4yOTY5IEEzLjc1LDMuNzUgMCAwIDEgMjEwLjk5MTIsNDUuNzk2OSBMMjE3Ljk5MTIsNjUuNTkzOCBMMjY4LjQ5MTYsNjUuNTkzOCBBMi41LDIuNSAwIDAgMSAyNzAuOTkxNiw2OC4wOTM4IEwyNzAuOTkxNiwxNjAuNjg2OSBBMi41LDIuNSAwIDAgMSAyNjguNDkxNiwxNjMuMTg2OSBMMTIzLjQ5MTYsMTYzLjE4NjkgQTIuNSwyLjUgMCAwIDEgMTIwLjk5MTYsMTYwLjY4NjkgTDEyMC45OTE2LDQ1Ljc5NjkgQTIuNSwyLjUgMCAwIDEgMTIzLjQ5MTYsNDMuMjk2OSIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB4MT0iMTIwLjk5MTYiIHgyPSIyMTcuOTkxMiIgeTE9IjY1LjU5MzgiIHkyPSI2NS41OTM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgzLjk5OTYiIHg9IjEyNC45OTE2IiB5PSI1OC4yOTIiPiYjMTI1MTA7JiMxMjQ3MzsmIzEyNDc5OyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OzwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgPz8/Pz8/Pz8/Pz8tLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uLi4uLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjciIGlkPSJlbnQwMDA0Ij48cGF0aCBkPSJNMzc3LjQ5MTYsNDMuMjk2OSBMNTMyLjQ5MDksNDMuMjk2OSBBMy43NSwzLjc1IDAgMCAxIDUzNC45OTA5LDQ1Ljc5NjkgTDU0MS45OTA5LDY1LjU5MzggTDU0MS40OTE2LDY1LjU5MzggQTIuNSwyLjUgMCAwIDEgNTQzLjk5MTYsNjguMDkzOCBMNTQzLjk5MTYsMTYwLjY4NjkgQTIuNSwyLjUgMCAwIDEgNTQxLjQ5MTYsMTYzLjE4NjkgTDM3Ny40OTE2LDE2My4xODY5IEEyLjUsMi41IDAgMCAxIDM3NC45OTE2LDE2MC42ODY5IEwzNzQuOTkxNiw0NS43OTY5IEEyLjUsMi41IDAgMCAxIDM3Ny40OTE2LDQzLjI5NjkiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjM3NC45OTE2IiB4Mj0iNTQxLjk5MDkiIHkxPSI2NS41OTM4IiB5Mj0iNjUuNTkzOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTMuOTk5MyIgeD0iMzc4Ljk5MTYiIHk9IjU4LjI5MiI+JiMxMjQ4ODsmIzEyNTIxOyYjMTI1MzE7JiMxMjQ3MDsmIzEyNDYzOyYjMTI0NzE7JiMxMjUxOTsmIzEyNTMxOyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OzwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgPz8/Pz8/LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Ii4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMTEiIGlkPSJlbnQwMDA2Ij48cGF0aCBkPSJNNjE3LjQ5MTYsNTEuNDQ2OSBMNzAyLjQ5MTIsNTEuNDQ2OSBBMy43NSwzLjc1IDAgMCAxIDcwNC45OTEyLDUzLjk0NjkgTDcxMS45OTEyLDczLjc0MzcgTDc3Ni40OTE2LDczLjc0MzcgQTIuNSwyLjUgMCAwIDEgNzc4Ljk5MTYsNzYuMjQzNyBMNzc4Ljk5MTYsMTUyLjUzNjkgQTIuNSwyLjUgMCAwIDEgNzc2LjQ5MTYsMTU1LjAzNjkgTDYxNy40OTE2LDE1NS4wMzY5IEEyLjUsMi41IDAgMCAxIDYxNC45OTE2LDE1Mi41MzY5IEw2MTQuOTkxNiw1My45NDY5IEEyLjUsMi41IDAgMCAxIDYxNy40OTE2LDUxLjQ0NjkiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjYxNC45OTE2IiB4Mj0iNzExLjk5MTIiIHkxPSI3My43NDM3IiB5Mj0iNzMuNzQzNyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4My45OTk2IiB4PSI2MTguOTkxNiIgeT0iNjYuNDQyIj4mIzEyNDY5OyYjMTI1MTA7JiMxMjUyMjsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgbWFzdGVyLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uLi4uLm1hc3RlciIgZGF0YS1zb3VyY2UtbGluZT0iNCIgaWQ9ImVudDAwMDMiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNjguODkwNiIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTE3Ljk5OTYiIHg9IjEzNi45OTE2IiB5PSI3OC4yOTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTcuOTk5NiIgeD0iMTQ2Ljk5MTYiIHk9IjEwMS4yOTIiPiYjMjEyMDg7JiMyMzQ1MDsmIzMxMTg1OyYjMzA0NDY7JiMxMjUxMDsmIzEyNDczOyYjMTI0Nzk7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjE0Ni45OTE2IiB5PSIxMTcuNTg4OSI+JiMzNzA5NjsmIzM4MjcyOyYjMTI1MTA7JiMxMjQ3MzsmIzEyNDc5OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ny45OTk2IiB4PSIxNDYuOTkxNiIgeT0iMTMzLjg4NTciPiYjMzU1MDY7JiMzMTI0NjsmIzIxNDYyOyYjMjQzNDE7JiMxMjUxMDsmIzEyNDczOyYjMTI0Nzk7PC90ZXh0PjwvZz48IS0tZW50aXR5IHRyYW5zYWN0aW9uLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uLi4uLi4uLi4udHJhbnNhY3Rpb24iIGRhdGEtc291cmNlLWxpbmU9IjgiIGlkPSJlbnQwMDA1Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjY4Ljg5MDYiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEwMy45OTk2IiB4PSI0MDYuOTkxNiIgeT0iNzguMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI3Ljk5OTkiIHg9IjQxNi45OTE2IiB5PSIxMDEuMjkyIj4mIzIwMTgxOyYjMzUzNzk7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjQxNi45OTE2IiB5PSIxMTcuNTg4OSI+JiMyMDE4MTsmIzM1Mzc5OyYjMjYxMjY7JiMzMjA0ODs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iNDE2Ljk5MTYiIHk9IjEzMy44ODU3Ij4mIzIwMTgxOyYjMzUzNzk7JiMzNjAyNDsmIzIwNTExOyYjMjYxMjY7JiMzMjA0ODs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgc3VtbWFyeS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Ii4uLi4uLi5zdW1tYXJ5IiBkYXRhLXNvdXJjZS1saW5lPSIxMiIgaWQ9ImVudDAwMDciPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNTIuNTkzOCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTMxLjk5OTUiIHg9IjYzMC45OTE2IiB5PSI4Ni40NDY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTExLjk5OTUiIHg9IjY0MC45OTE2IiB5PSIxMDkuNDQyIj4mIzI2MDg1OyYjMjc0MjU7JiMyMTIwODsmIzIzNDUwOyYjMzExODU7JiMzMDQ0NjsmIzI3NTMxOyYjMzk2NDA7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExMS45OTk1IiB4PSI2NDAuOTkxNiIgeT0iMTI1LjczODkiPiYjMjYzNzY7JiMyNzQyNTsmIzIxMjA4OyYjMjM0NTA7JiMzMTE4NTsmIzMwNDQ2OyYjMjc1MzE7JiMzOTY0MDs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgPz9BICsgPz9DLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi5BIC4gLi5DIiBkYXRhLXNvdXJjZS1saW5lPSIxNSIgaWQ9ImVudDAwMDgiPjxlbGxpcHNlIGN4PSI1My45OTE2IiBjeT0iMjU1LjE4NjkiIGZpbGw9IiNGMUYxRjEiIHJ4PSI4IiByeT0iOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTUuOTgzMiIgeD0iNiIgeT0iMjg1LjE4MiI+JiMyNjA0MTsmIzI0MzM1O0EgKyAmIzI2MDQxOyYjMjQzMzU7QzwvdGV4dD48L2c+PCEtLWVudGl0eSA/P0EgKyA/P0ItLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLkEgLiAuLkIiIGRhdGEtc291cmNlLWxpbmU9IjE2IiBpZD0iZW50MDAxMCI+PGVsbGlwc2UgY3g9IjQzMi45OTE2IiBjeT0iMjU1LjE4NjkiIGZpbGw9IiNGMUYxRjEiIHJ4PSI4IiByeT0iOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTUuODEyMyIgeD0iMzg1LjA4NTQiIHk9IjI4NS4xODIiPiYjMjYwNDE7JiMyNDMzNTtBICsgJiMyNjA0MTsmIzI0MzM1O0I8L3RleHQ+PC9nPjwhLS1lbnRpdHkgPz9BLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi5BIiBkYXRhLXNvdXJjZS1saW5lPSIxNyIgaWQ9ImVudDAwMTIiPjxlbGxpcHNlIGN4PSI2OTYuOTkxNiIgY3k9IjI1NS4xODY5IiBmaWxsPSIjRjFGMUYxIiByeD0iOCIgcnk9IjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjM3LjU3NyIgeD0iNjc4LjIwMzEiIHk9IjI4NS4xODIiPiYjMjYwNDE7JiMyNDMzNTtBPC90ZXh0PjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJHTU4xNCIgZGF0YS1zb3VyY2UtbGluZT0iMjAiIGlkPSJlbnQwMDE1Ij48cGF0aCBkPSJNMTUyLjk5MTYsMjM1LjA1NjkgTDE1Mi45OTE2LDI3NS4zMjI1IEEwLDAgMCAwIDAgMTUyLjk5MTYsMjc1LjMyMjUgTDI5MC45OTE3LDI3NS4zMjI1IEEwLDAgMCAwIDAgMjkwLjk5MTcsMjc1LjMyMjUgTDI5MC45OTE3LDI0NS4wNTY5IEwyODAuOTkxNywyMzUuMDU2OSBMMjIyLjM4MTYsMjM1LjA1NjkgTDIwMi4yMjE2LDE0Ny4zNzY5IEwyMTQuMzgxNiwyMzUuMDU2OSBMMTUyLjk5MTYsMjM1LjA1NjkgQTAsMCAwIDAgMCAxNTIuOTkxNiwyMzUuMDU2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTI4MC45OTE3LDIzNS4wNTY5IEwyODAuOTkxNywyNDUuMDU2OSBMMjkwLjk5MTcsMjQ1LjA1NjkgTDI4MC45OTE3LDIzNS4wNTY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDQuMDAwMSIgeD0iMTU4Ljk5MTYiIHk9IjI1Mi4xMjM4Ij4mIzEyNTEwOyYjMTI0NzM7JiMxMjQ3OTsmIzIyNzkzOyYjMjYzNTY7JiMyMzY1MzsmIzI3NTA4OyYjMTI0MzQ7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNy4wMDAxIiB4PSIxNTguOTkxNiIgeT0iMjY3LjI1NjYiPiYjMTI1MjU7JiMxMjQ2NDsmIzEyNDg2OyYjMTI1NDA7JiMxMjUwMjsmIzEyNTIzOyYjMTIzOTU7JiMyMDQ0NTsmIzIzMzg0OzwvdGV4dD48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iR01OMTciIGRhdGEtc291cmNlLWxpbmU9IjI1IiBpZD0iZW50MDAxOCI+PHBhdGggZD0iTTUyMi45OTE2LDIzNS4wNTY5IEw1MjIuOTkxNiwyNzUuMzIyNSBMNjM0Ljk5MTcsMjc1LjMyMjUgTDYzNC45OTE3LDI0NS4wNTY5IEw2MjQuOTkxNywyMzUuMDU2OSBMNTIyLjk5MTYsMjM1LjA1NjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik02MjQuOTkxNywyMzUuMDU2OSBMNjI0Ljk5MTcsMjQ1LjA1NjkgTDYzNC45OTE3LDI0NS4wNTY5IEw2MjQuOTkxNywyMzUuMDU2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjkxLjAwMDEiIHg9IjUyOC45OTE2IiB5PSIyNTIuMTIzOCI+JiMzNjE5NjsmIzQwNjU4OyYjMjA5NjY7JiMyOTcwMjsmIzEyMzk1OyYjMTI0MjQ7JiMxMjQyNjs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTEuMDAwMSIgeD0iNTI4Ljk5MTYiIHk9IjI2Ny4yNTY2Ij4mIzMwNDM1OyYjMjY2MTk7JiMzNTM4ODsmIzM2MzIxOyYjMTI0MzQ7JiMzMDkwNjsmIzIwNDQ1OzwvdGV4dD48L2c+PCEtLWxpbmsgbWFzdGVyIHRvID8/QSArID8/Qy0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDAzIiBkYXRhLWVudGl0eS0yPSJlbnQwMDA4IiBkYXRhLWxpbmstdHlwZT0iZGVwZW5kZW5jeSIgZGF0YS1zb3VyY2UtbGluZT0iMTUiIGlkPSJsbms5Ij48cGF0aCBkPSJNMTM2LjcwMTYsMTI1LjU5NjkgQzEwNi44MzE2LDEzNC44NjY5IDczLjE4MTYsMTUxLjA5NjkgNTQuOTkxNiwxNzkuMTg2OSBDNDEuNDAxNiwyMDAuMTY2OSA0Ni4wNTEyLDIyNi4wNzg4IDUwLjAyMTIsMjQwLjYxODgiIGZpbGw9Im5vbmUiIGlkPSJtYXN0ZXItdG8tJiMyNjA0MTsmIzI0MzM1O0EgKyAmIzI2MDQxOyYjMjQzMzU7QyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNTEuNjAxNiwyNDYuNDA2OSw1My4wODk3LDIzNi42NzExLDUwLjI4NDYsMjQxLjU4MzQsNDUuMzcyMiwyMzguNzc4Myw1MS42MDE2LDI0Ni40MDY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQzLjAwMDIiIHg9IjU1Ljk5MTYiIHk9IjE5Mi4yNTM4Ij4mIzEyNTI1OyYjMTI0NjQ7JiMxMjQ4NjsmIzEyNTQwOyYjMTI1MDI7JiMxMjUyMzsmIzEyMzkxOyYjMjM2NTM7JiMyNzUwODsmIzMxNjQ5OyYjMjk3MDI7PC90ZXh0PjwvZz48IS0tbGluayB0cmFuc2FjdGlvbiB0byA/P0EgKyA/P0ItLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwNSIgZGF0YS1lbnRpdHktMj0iZW50MDAxMCIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjE2IiBpZD0ibG5rMTEiPjxwYXRoIGQ9Ik00NTIuNzYxNiwxNDcuMzc2OSBDNDQ2LjY5MTYsMTgwLjE2NjkgNDM4Ljk4MzMsMjIxLjgxNyA0MzUuNTQzMywyNDAuNDA3IiBmaWxsPSJub25lIiBpZD0idHJhbnNhY3Rpb24tdG8tJiMyNjA0MTsmIzI0MzM1O0EgKyAmIzI2MDQxOyYjMjQzMzU7QiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNDM0LjQ1MTYsMjQ2LjMwNjksNDQwLjAyMjQsMjM4LjE4NDksNDM1LjM2MTQsMjQxLjM5MDMsNDMyLjE1NiwyMzYuNzI5Myw0MzQuNDUxNiwyNDYuMzA2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjkxLjAwMDEiIHg9IjQ0Ny43NzE2IiB5PSIxOTIuMjUzOCI+JiMzNjE5NjsmIzQwNjU4OyYjMjA5NjY7JiMyOTcwMjsmIzEyMzkxOyYjMzUzMzA7JiMyNzQ5MTs8L3RleHQ+PC9nPjwhLS1saW5rIHN1bW1hcnkgdG8gPz9BLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDciIGRhdGEtZW50aXR5LTI9ImVudDAwMTIiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSIxNyIgaWQ9ImxuazEzIj48cGF0aCBkPSJNNjk2Ljk5MTYsMTM5LjQ5NjkgQzY5Ni45OTE2LDE3MS45NjY5IDY5Ni45OTE2LDIxOS45NzY5IDY5Ni45OTE2LDI0MC4yMDY5IiBmaWxsPSJub25lIiBpZD0ic3VtbWFyeS10by0mIzI2MDQxOyYjMjQzMzU7QSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNjk2Ljk5MTYsMjQ2LjIwNjksNzAwLjk5MTYsMjM3LjIwNjksNjk2Ljk5MTYsMjQxLjIwNjksNjkyLjk5MTYsMjM3LjIwNjksNjk2Ljk5MTYsMjQ2LjIwNjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3OC4wMDAxIiB4PSI2OTcuOTkxNiIgeT0iMTkyLjI1MzgiPiYjMjYzNTY7JiMyNjAzMjsmIzI2MDg1OyYjMjYxNzg7JiMxMjM5ODsmIzEyNDE1OzwvdGV4dD48L2c+PCEtLWxpbmsgdHJhbnNhY3Rpb24gdG8gR01OMTctLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwNSIgZGF0YS1lbnRpdHktMj0iZW50MDAxOCIgZGF0YS1saW5rLXR5cGU9ImFzc29jaWF0aW9uIiBkYXRhLXNvdXJjZS1saW5lPSIyNSIgaWQ9ImxuazE5Ij48cGF0aCBkPSJNNTExLjE1MTYsMTQ0LjgxNjkgQzUyNC40NDE2LDE1NC41NTY5IDUzNy44MjE2LDE2Ni4xOTY5IDU0Ny45OTE2LDE3OS4xODY5IEM1NjEuMDIxNiwxOTUuODI2OSA1NjkuNDIxNiwyMTguNzE2OSA1NzQuMTUxNiwyMzQuODE2OSIgZmlsbD0ibm9uZSIgaWQ9InRyYW5zYWN0aW9uLUdNTjE3IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheTo3LDc7Ii8+PC9nPjw/cGxhbnR1bWwtc3JjIFRMQlJKVzhuNDd0bExwSnhRbG0xN3FwS3QtMWJuVEtPUFRUMFZKMzZuNnNEZVlKVTRiU0tSb1pBQWhBWVdaU3N1TUU2amlqVnNCOUE4RTlKUHdRVFN5eHEzOWFkWW5Qa1h3VUhkbU53M2xHSnMyUW1BdDBodUV3MFVtMHExd21BajJRM2VqcFY1RHVkM19WMDNNSFowem1NdHJUVEFZcVdqNkdjNXltdjJubDBCWkdDUkc3UjBYUWdtQzJoQTZxYllNZEZBSkEzdl84eUU5TmIwcmE4VWV5SlRlVnY3TS16aG4wemw0WF9iLXp2RjNwZ2JHcmlQZDNBcDEwaFpUTzZNQkYweGU2ejBkcTMtZ0hkT01NVF9ZRVl0Sm9BX0RVNDdQeVlsb2xoalR5aVVsZFd3dlRuaFNqN3FnUVRDUERhdGg0N0lNYjMyc0NGX3g2OHVybG5NRW1WTTBJdkpZTVZpQ0xQVGtYRGJvLXBkNGdQd0hORDVPLUFIcVY3NUxodHlvVm0yOHdaQUdFRnVUWVRoY2lYQzAtT0NneENkc3o1akh2UlhsaEszeVVQcjNYSGV6SGY3bEFqRXpNWTQyQVZZa2VELWI0b3FBVFZZcTlUVTNLenRXYkxzdzFNMEk3UjhIUVVUV1huS2pZUF9KTWZ2bm1sUlFra00xZEdHcEhDVUFOVEVrVkxGQkJpNlFwWF9lM3NFcDZlazA5S3hVOEVhZUtSU1RjQ18zMXdCb2VRVVZzYkM3azB0bTAwPz48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<table>
<thead>
<tr>
<th>データ種別</th>
<th>採用方式</th>
<th>理由</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>会計データ（仕訳）</strong></td>
<td>方式A + 方式B</td>
<td>会計基準に準拠した訂正方法が必要</td>
</tr>
<tr>
<td><strong>マスタデータ</strong></td>
<td>方式A + 方式C</td>
<td>変更履歴の追跡が必要、監査対応</td>
</tr>
<tr>
<td><strong>サマリデータ</strong></td>
<td>方式A</td>
<td>仕訳から再集計可能なため、履歴不要</td>
</tr>
</tbody>
</table>
<h3 id="1922">19.2.2 赤黒処理の実装<a class="headerlink" href="#1922" title="Permanent link">&para;</a></h3>
<p>仕訳テーブルには、赤黒処理に必要な項目が含まれています。</p>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjIwOHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NTIwcHg7aGVpZ2h0OjIwOHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDUyMCAyMDgiIHdpZHRoPSI1MjBweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbGFzcyBKb3VybmFsLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iSm91cm5hbCIgZGF0YS1zb3VyY2UtbGluZT0iMSIgaWQ9ImVudDAwMDIiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTk0LjY3MTkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjI1NS41OTgzIiB4PSI3IiB5PSI3Ii8+PGVsbGlwc2UgY3g9IjExNi41NDkyIiBjeT0iMjMiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTEyMC42NTg2LDI5IEwxMTIuOTM5OCwyOSBMMTEyLjkzOTgsMTYuNjA5NCBMMTIwLjY1ODYsMTYuNjA5NCBMMTIwLjY1ODYsMTguNzY1NiBMMTE1LjM5MjksMTguNzY1NiBMMTE1LjM5MjksMjEuNDM3NSBMMTIwLjE1ODYsMjEuNDM3NSBMMTIwLjE1ODYsMjMuNTkzOCBMMTE1LjM5MjksMjMuNTkzOCBMMTE1LjM5MjksMjYuODQzOCBMMTIwLjY1ODYsMjYuODQzOCBMMTIwLjY1ODYsMjkgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNy45OTk5IiB4PSIxMzcuMDQ5MiIgeT0iMjcuODQ2NyI+JiMyMDE4MTsmIzM1Mzc5OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI4IiB4Mj0iMjYxLjU5ODMiIHkxPSIzOSIgeTI9IjM5Ii8+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJJRV9NQU5EQVRPUlkiPjxlbGxpcHNlIGN4PSIxOCIgY3k9IjUyLjY0ODQiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iMjciIHk9IjU1Ljk5NTEiPiYjMjAxODE7JiMzNTM3OTsmIzIwMjUzOyYjMzEwODA7JiMzMDA1ODsmIzIxNDk1OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDUuNTk4NiIgeD0iMTEwLjk5OTYiIHk9IjU1Ljk5NTEiPjogVkFSQ0hBUigxMCkgJiMxNzE7UEsmIzE4Nzs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjgiIHgyPSIyNjEuNTk4MyIgeTE9IjYzLjI5NjkiIHkyPSI2My4yOTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDEuOTk5OCIgeD0iMTMiIHk9IjgwLjI5MiI+JiMzNjIxNTsmIzMxMDgwOyYjMjYwODU7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQxLjk5OTgiIHg9IjEzIiB5PSI5Ni41ODg5Ij4mIzIwODM3OyYjMjExNDc7JiMyNjA4NTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iMTMiIHk9IjExMi44ODU3Ij4mIzIwMTgxOyYjMzUzNzk7JiMyMDI1MzsmIzMxMDgwOyYjMjEzMDY7JiMyMDk5ODs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMuMzUwNiIgeD0iMTMiIHk9IjEyOS4xODI2Ij4uLi48L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjEzIiB5PSIxNDUuNDc5NSI+JiMzNjE5NjsmIzIwMjUzOyYjMTI1MDE7JiMxMjUyMTsmIzEyNDY0OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3OC40NjI5IiB4PSI4Mi45OTk3IiB5PSIxNDUuNDc5NSI+OiBTTUFMTElOVDwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iMTMiIHk9IjE2MS43NzY0Ij4mIzM2MTk2OyYjNDA2NTg7JiMyMDI1MzsmIzMxMDgwOyYjMzAwNTg7JiMyMTQ5NTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzAuNTg3OSIgeD0iOTYuOTk5NiIgeT0iMTYxLjc3NjQiPjogSU5URUdFUjwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSIxMyIgeT0iMTc4LjA3MzIiPiYjMjAzMTY7JiMyNTEwNDsmIzI2MDg1OyYjMjYxNzg7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjEzIiB5PSIxOTQuMzcwMSI+JiMyNjM1NjsmIzI2MDMyOyYjMjYwODU7JiMyNjE3ODs8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkdNTjMiIGRhdGEtc291cmNlLWxpbmU9IjE1IiBpZD0iZW50MDAwNCI+PHBhdGggZD0iTTI5Ny44LDQ2LjM3IEwyOTcuOCwxMDAuMzMgTDI2Mi44OSwxMDQuMzMgTDI5Ny44LDEwOC4zMyBMMjk3LjgsMTYyLjI5OTcgQTAsMCAwIDAgMCAyOTcuOCwxNjIuMjk5NyBMNTEzLjgwMDIsMTYyLjI5OTcgQTAsMCAwIDAgMCA1MTMuODAwMiwxNjIuMjk5NyBMNTEzLjgwMDIsNTYuMzcgTDUwMy44MDAyLDQ2LjM3IEwyOTcuOCw0Ni4zNyBBMCwwIDAgMCAwIDI5Ny44LDQ2LjM3IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNNTAzLjgwMDIsNDYuMzcgTDUwMy44MDAyLDU2LjM3IEw1MTMuODAwMiw1Ni4zNyBMNTAzLjgwMDIsNDYuMzciIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5LjM4IiB4PSIzMDMuOCIgeT0iNjMuNDM2OSI+JiMzNjE5NjsmIzIwMjUzOyYjMTI1MDE7JiMxMjUyMTsmIzEyNDY0Ozo8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA1LjQyODMiIHg9IjMwMy44IiB5PSI3OC41Njk3Ij4wID0gJiMzNjg5MDsmIzI0MTIwOyYjNjUyODg7JiM0MDY1ODsmIzIwMjUzOyYjNjUyODk7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwNS40MjgzIiB4PSIzMDMuOCIgeT0iOTMuNzAyNSI+MSA9ICYjMzYxOTY7JiMyMDI1MzsmIzY1Mjg4OyYjMjE0NjI7JiMyODA0MDsmIzY1Mjg5OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0LjEzMjMiIHg9IjMwMy44IiB5PSIxMDguODM1MyI+JiMxNjA7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgyLjM4IiB4PSIzMDMuOCIgeT0iMTIzLjk2ODEiPiYjMzYxOTY7JiM0MDY1ODsmIzIwMjUzOyYjMzEwODA7JiMzMDA1ODsmIzIxNDk1Ozo8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTk1LjAwMDIiIHg9IjMwMy44IiB5PSIxMzkuMTAxIj4mIzM2MTk2OyYjMjAyNTM7JiMxMjM5ODsmIzIyNTgwOyYjMjE1MTI7JiMxMjI4OTsmIzIwODAzOyYjMjAyNTM7JiMzMTA4MDsmIzEyMzk4OyYjMzAwNTg7JiMyMTQ5NTsmIzEyNDM0OyYjMjY2ODQ7JiMzMjAxMzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQzLjAwMDIiIHg9IjMwMy44IiB5PSIxNTQuMjMzOCI+JiMzMjAxNjsmIzIwMTg0OyYjMTIzNjk7JiMxMjM5NTsmIzEyNDI0OyYjMTI0MjY7JiMyMzY1MzsmIzI3NTA4OyYjMTI0MzQ7JiMzNjg2MTsmIzM2MzIxOzwvdGV4dD48L2c+PD9wbGFudHVtbC1zcmMgUE96Vkl5OUc2Q1JsdHF6bnlBZUVFRkhNSjkyR19iYzRIVlQyZ3VKT21EUDVIRTBzWjJNNTljWF9CMzFlTzRMWEQ1RlFmMHpwVGl4Y2JMLVhDdk9HVGxVVXRfRXlwX0NVS0w4QW9YNkFrN1IzeHRuNEtGdTBCU2s3SEljX1p1dTE4dW4zbU5Oa0ZSRlpEUHZmak96bjBjc2JTX0VCd1RuQ0YzUUJhaWRyYkxHQWViN21VdHRrT2JTY3FCOTlBd3JXLWhqRnB4LWVTR2cyODAzNlZrLUhLdzh0WUZ2NGo2d0draDZRcGNRTnJaUDNUTUpOZnNrdmJiZDh2QzBUdFo2Wm5rRlBaR1FpUFI1Y3pfVG4wWTM5WWVZQVhUcXoxU2F4YXpfMEw1cTJPY1dFWktndFQzME9FcVJPRE5SRThDdm53RU1PTGZsaXFtV21fM3llQ1NiS3RzWlJlWk0zYjVIUXJhQ0JYdzZCUTdOTVRacGgwWm9odmpoTkhCcWF3V2xIM0E5THdCbDlOWXRreUItN1ZseTFINmFSMVRWXzAwMDA/PjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<details>
<summary>JournalCorrectionService（赤黒処理サービス）</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/sms/application/service/JournalCorrectionService.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.fas.application.service</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.fas.application.port.out.JournalRepository</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.fas.domain.model.accounting.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.extern.slf4j.Slf4j</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Service</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.transaction.annotation.Transactional</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.ArrayList</span><span class="p">;</span>

<span class="nd">@Service</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="nd">@Slf4j</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">JournalCorrectionService</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">JournalRepository</span><span class="w"> </span><span class="n">journalRepository</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">BalanceUpdateService</span><span class="w"> </span><span class="n">balanceUpdateService</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 仕訳を赤黒訂正する</span>
<span class="cm">     * @param originalVoucherNumber 元伝票番号</span>
<span class="cm">     * @param correctedJournal 訂正後の仕訳（黒伝）</span>
<span class="cm">     * @return 赤伝と黒伝の仕訳伝票番号</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">CorrectionResult</span><span class="w"> </span><span class="nf">correctJournal</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">originalVoucherNumber</span><span class="p">,</span>
<span class="w">            </span><span class="n">Journal</span><span class="w"> </span><span class="n">correctedJournal</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 元伝票を取得</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="n">original</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">journalRepository</span><span class="p">.</span><span class="na">findByVoucherNumber</span><span class="p">(</span><span class="n">originalVoucherNumber</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">orElseThrow</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span>
<span class="w">                </span><span class="s">&quot;元伝票が見つかりません: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">originalVoucherNumber</span><span class="p">));</span>

<span class="w">        </span><span class="c1">// 赤伝を作成</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="n">redSlip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createRedSlip</span><span class="p">(</span><span class="n">original</span><span class="p">);</span>
<span class="w">        </span><span class="n">journalRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">redSlip</span><span class="p">);</span>
<span class="w">        </span><span class="n">balanceUpdateService</span><span class="p">.</span><span class="na">updateBalancesForJournal</span><span class="p">(</span><span class="n">redSlip</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// 黒伝（訂正伝票）を登録</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">correctedJournal</span><span class="p">.</span><span class="na">isBalanced</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;訂正仕訳の貸借が一致しません&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">journalRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">correctedJournal</span><span class="p">);</span>
<span class="w">        </span><span class="n">balanceUpdateService</span><span class="p">.</span><span class="na">updateBalancesForJournal</span><span class="p">(</span><span class="n">correctedJournal</span><span class="p">);</span>

<span class="w">        </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;赤黒訂正完了: 元伝票={}, 赤伝={}, 黒伝={}&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="n">originalVoucherNumber</span><span class="p">,</span>
<span class="w">            </span><span class="n">redSlip</span><span class="p">.</span><span class="na">getJournalVoucherNumber</span><span class="p">(),</span>
<span class="w">            </span><span class="n">correctedJournal</span><span class="p">.</span><span class="na">getJournalVoucherNumber</span><span class="p">());</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CorrectionResult</span><span class="p">(</span>
<span class="w">            </span><span class="n">redSlip</span><span class="p">.</span><span class="na">getJournalVoucherNumber</span><span class="p">(),</span>
<span class="w">            </span><span class="n">correctedJournal</span><span class="p">.</span><span class="na">getJournalVoucherNumber</span><span class="p">()</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 仕訳を取消する（赤伝のみ発行）</span>
<span class="cm">     * @param voucherNumber 取消対象の仕訳伝票番号</span>
<span class="cm">     * @return 赤伝の仕訳伝票番号</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">cancelJournal</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">voucherNumber</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="n">original</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">journalRepository</span><span class="p">.</span><span class="na">findByVoucherNumber</span><span class="p">(</span><span class="n">voucherNumber</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">orElseThrow</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span>
<span class="w">                </span><span class="s">&quot;仕訳が見つかりません: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">voucherNumber</span><span class="p">));</span>

<span class="w">        </span><span class="c1">// 既に赤伝が発行されているか確認</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">original</span><span class="p">.</span><span class="na">getRedSlipFlag</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">original</span><span class="p">.</span><span class="na">getRedSlipFlag</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalStateException</span><span class="p">(</span><span class="s">&quot;この仕訳は既に取消済みです&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// 赤伝を作成</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="n">redSlip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createRedSlip</span><span class="p">(</span><span class="n">original</span><span class="p">);</span>
<span class="w">        </span><span class="n">journalRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">redSlip</span><span class="p">);</span>
<span class="w">        </span><span class="n">balanceUpdateService</span><span class="p">.</span><span class="na">updateBalancesForJournal</span><span class="p">(</span><span class="n">redSlip</span><span class="p">);</span>

<span class="w">        </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;仕訳取消完了: 元伝票={}, 赤伝={}&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="n">voucherNumber</span><span class="p">,</span><span class="w"> </span><span class="n">redSlip</span><span class="p">.</span><span class="na">getJournalVoucherNumber</span><span class="p">());</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">redSlip</span><span class="p">.</span><span class="na">getJournalVoucherNumber</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 赤伝を作成する</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Journal</span><span class="w"> </span><span class="nf">createRedSlip</span><span class="p">(</span><span class="n">Journal</span><span class="w"> </span><span class="n">original</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 赤伝の仕訳伝票番号を生成（元伝票番号 + R）</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="n">redVoucherNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">original</span><span class="p">.</span><span class="na">getJournalVoucherNumber</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;R&quot;</span><span class="p">;</span>

<span class="w">        </span><span class="c1">// 貸借を反転した明細を作成</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="n">redDetails</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">JournalDetail</span><span class="o">&gt;</span><span class="p">();</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="n">detail</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">original</span><span class="p">.</span><span class="na">getDetails</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">var</span><span class="w"> </span><span class="n">reversedDCDetails</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">JournalDebitCreditDetail</span><span class="o">&gt;</span><span class="p">();</span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="n">dcDetail</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">detail</span><span class="p">.</span><span class="na">getDebitCreditDetails</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="kd">var</span><span class="w"> </span><span class="n">reversed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JournalDebitCreditDetail</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">journalVoucherNumber</span><span class="p">(</span><span class="n">redVoucherNumber</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">lineNumber</span><span class="p">(</span><span class="n">dcDetail</span><span class="p">.</span><span class="na">getLineNumber</span><span class="p">())</span>
<span class="w">                    </span><span class="c1">// 借方→貸方、貸方→借方に反転</span>
<span class="w">                    </span><span class="p">.</span><span class="na">debitCreditType</span><span class="p">(</span>
<span class="w">                        </span><span class="n">dcDetail</span><span class="p">.</span><span class="na">getDebitCreditType</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">DebitCreditType</span><span class="p">.</span><span class="na">DEBIT</span>
<span class="w">                            </span><span class="o">?</span><span class="w"> </span><span class="n">DebitCreditType</span><span class="p">.</span><span class="na">CREDIT</span>
<span class="w">                            </span><span class="p">:</span><span class="w"> </span><span class="n">DebitCreditType</span><span class="p">.</span><span class="na">DEBIT</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">accountCode</span><span class="p">(</span><span class="n">dcDetail</span><span class="p">.</span><span class="na">getAccountCode</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">subAccountCode</span><span class="p">(</span><span class="n">dcDetail</span><span class="p">.</span><span class="na">getSubAccountCode</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">departmentCode</span><span class="p">(</span><span class="n">dcDetail</span><span class="p">.</span><span class="na">getDepartmentCode</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">projectCode</span><span class="p">(</span><span class="n">dcDetail</span><span class="p">.</span><span class="na">getProjectCode</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">amount</span><span class="p">(</span><span class="n">dcDetail</span><span class="p">.</span><span class="na">getAmount</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">currencyCode</span><span class="p">(</span><span class="n">dcDetail</span><span class="p">.</span><span class="na">getCurrencyCode</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">exchangeRate</span><span class="p">(</span><span class="n">dcDetail</span><span class="p">.</span><span class="na">getExchangeRate</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">taxType</span><span class="p">(</span><span class="n">dcDetail</span><span class="p">.</span><span class="na">getTaxType</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">taxRate</span><span class="p">(</span><span class="n">dcDetail</span><span class="p">.</span><span class="na">getTaxRate</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">taxCalcType</span><span class="p">(</span><span class="n">dcDetail</span><span class="p">.</span><span class="na">getTaxCalcType</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">                </span><span class="n">reversedDCDetails</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">reversed</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="kd">var</span><span class="w"> </span><span class="n">redDetail</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JournalDetail</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">journalVoucherNumber</span><span class="p">(</span><span class="n">redVoucherNumber</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">lineNumber</span><span class="p">(</span><span class="n">detail</span><span class="p">.</span><span class="na">getLineNumber</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">lineSummary</span><span class="p">(</span><span class="n">detail</span><span class="p">.</span><span class="na">getLineSummary</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;（取消）&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">debitCreditDetails</span><span class="p">(</span><span class="n">reversedDCDetails</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">            </span><span class="n">redDetails</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">redDetail</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Journal</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">journalVoucherNumber</span><span class="p">(</span><span class="n">redVoucherNumber</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">postingDate</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">now</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">entryDate</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">now</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">closingJournalFlag</span><span class="p">(</span><span class="n">original</span><span class="p">.</span><span class="na">getClosingJournalFlag</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">singleEntryFlag</span><span class="p">(</span><span class="n">original</span><span class="p">.</span><span class="na">getSingleEntryFlag</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">voucherType</span><span class="p">(</span><span class="n">original</span><span class="p">.</span><span class="na">getVoucherType</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">periodicPostingFlag</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">employeeCode</span><span class="p">(</span><span class="n">original</span><span class="p">.</span><span class="na">getEmployeeCode</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">departmentCode</span><span class="p">(</span><span class="n">original</span><span class="p">.</span><span class="na">getDepartmentCode</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">redSlipFlag</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">redBlackVoucherNumber</span><span class="p">(</span><span class="n">extractNumericPart</span><span class="p">(</span><span class="n">original</span><span class="p">.</span><span class="na">getJournalVoucherNumber</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">details</span><span class="p">(</span><span class="n">redDetails</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="nf">extractNumericPart</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">voucherNumber</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Integer</span><span class="p">.</span><span class="na">parseInt</span><span class="p">(</span><span class="n">voucherNumber</span><span class="p">.</span><span class="na">replaceAll</span><span class="p">(</span><span class="s">&quot;[^0-9]&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 訂正結果</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">record</span> <span class="nc">CorrectionResult</span><span class="p">(</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">redSlipNumber</span><span class="p">,</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">blackSlipNumber</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="1923">19.2.3 ログテーブルの実装<a class="headerlink" href="#1923" title="Permanent link">&para;</a></h3>
<p>マスタデータの変更履歴を保存するログテーブルを設計します。</p>
<details>
<summary>V010__create_change_log_table.sql</summary>

<div class="highlight"><pre><span></span><code><span class="c1">-- V010__create_change_log_table.sql</span>

<span class="c1">-- 操作種別</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TYPE</span><span class="w"> </span><span class="err">操作種別</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">ENUM</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;INSERT&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;UPDATE&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;DELETE&#39;</span><span class="p">);</span>

<span class="c1">-- 変更ログテーブル</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;変更ログ&quot;</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="ss">&quot;ログID&quot;</span><span class="w"> </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;テーブル名&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;レコードキー&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;操作種別&quot;</span><span class="w"> </span><span class="err">操作種別</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;操作前データ&quot;</span><span class="w"> </span><span class="n">JSONB</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;操作後データ&quot;</span><span class="w"> </span><span class="n">JSONB</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;操作日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;操作者&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;操作端末&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;備考&quot;</span><span class="w"> </span><span class="nb">TEXT</span>
<span class="p">);</span>

<span class="c1">-- インデックス</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_変更ログ_テーブル名&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;変更ログ&quot;</span><span class="p">(</span><span class="ss">&quot;テーブル名&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_変更ログ_レコードキー&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;変更ログ&quot;</span><span class="p">(</span><span class="ss">&quot;レコードキー&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_変更ログ_操作日時&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;変更ログ&quot;</span><span class="p">(</span><span class="ss">&quot;操作日時&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_変更ログ_操作種別&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;変更ログ&quot;</span><span class="p">(</span><span class="ss">&quot;操作種別&quot;</span><span class="p">);</span>

<span class="c1">-- 勘定科目マスタの変更ログトリガー</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="k">REPLACE</span><span class="w"> </span><span class="k">FUNCTION</span><span class="w"> </span><span class="n">log_account_changes</span><span class="p">()</span>
<span class="k">RETURNS</span><span class="w"> </span><span class="k">TRIGGER</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="err">$$</span>
<span class="k">BEGIN</span>
<span class="w">    </span><span class="k">IF</span><span class="w"> </span><span class="n">TG_OP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;INSERT&#39;</span><span class="w"> </span><span class="k">THEN</span>
<span class="w">        </span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="ss">&quot;変更ログ&quot;</span><span class="w"> </span><span class="p">(</span>
<span class="w">            </span><span class="ss">&quot;テーブル名&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;レコードキー&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;操作種別&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="ss">&quot;操作前データ&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;操作後データ&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;操作者&quot;</span>
<span class="w">        </span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span>
<span class="w">            </span><span class="s1">&#39;勘定科目マスタ&#39;</span><span class="p">,</span>
<span class="w">            </span><span class="k">NEW</span><span class="p">.</span><span class="ss">&quot;勘定科目コード&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s1">&#39;INSERT&#39;</span><span class="p">,</span>
<span class="w">            </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">            </span><span class="n">row_to_json</span><span class="p">(</span><span class="k">NEW</span><span class="p">),</span>
<span class="w">            </span><span class="k">NEW</span><span class="p">.</span><span class="ss">&quot;更新者名&quot;</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">        </span><span class="k">RETURN</span><span class="w"> </span><span class="k">NEW</span><span class="p">;</span>
<span class="w">    </span><span class="k">ELSIF</span><span class="w"> </span><span class="n">TG_OP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;UPDATE&#39;</span><span class="w"> </span><span class="k">THEN</span>
<span class="w">        </span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="ss">&quot;変更ログ&quot;</span><span class="w"> </span><span class="p">(</span>
<span class="w">            </span><span class="ss">&quot;テーブル名&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;レコードキー&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;操作種別&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="ss">&quot;操作前データ&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;操作後データ&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;操作者&quot;</span>
<span class="w">        </span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span>
<span class="w">            </span><span class="s1">&#39;勘定科目マスタ&#39;</span><span class="p">,</span>
<span class="w">            </span><span class="k">NEW</span><span class="p">.</span><span class="ss">&quot;勘定科目コード&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s1">&#39;UPDATE&#39;</span><span class="p">,</span>
<span class="w">            </span><span class="n">row_to_json</span><span class="p">(</span><span class="k">OLD</span><span class="p">),</span>
<span class="w">            </span><span class="n">row_to_json</span><span class="p">(</span><span class="k">NEW</span><span class="p">),</span>
<span class="w">            </span><span class="k">NEW</span><span class="p">.</span><span class="ss">&quot;更新者名&quot;</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">        </span><span class="k">RETURN</span><span class="w"> </span><span class="k">NEW</span><span class="p">;</span>
<span class="w">    </span><span class="k">ELSIF</span><span class="w"> </span><span class="n">TG_OP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;DELETE&#39;</span><span class="w"> </span><span class="k">THEN</span>
<span class="w">        </span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="ss">&quot;変更ログ&quot;</span><span class="w"> </span><span class="p">(</span>
<span class="w">            </span><span class="ss">&quot;テーブル名&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;レコードキー&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;操作種別&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="ss">&quot;操作前データ&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;操作後データ&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;操作者&quot;</span>
<span class="w">        </span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span>
<span class="w">            </span><span class="s1">&#39;勘定科目マスタ&#39;</span><span class="p">,</span>
<span class="w">            </span><span class="k">OLD</span><span class="p">.</span><span class="ss">&quot;勘定科目コード&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s1">&#39;DELETE&#39;</span><span class="p">,</span>
<span class="w">            </span><span class="n">row_to_json</span><span class="p">(</span><span class="k">OLD</span><span class="p">),</span>
<span class="w">            </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">            </span><span class="k">OLD</span><span class="p">.</span><span class="ss">&quot;更新者名&quot;</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">        </span><span class="k">RETURN</span><span class="w"> </span><span class="k">OLD</span><span class="p">;</span>
<span class="w">    </span><span class="k">END</span><span class="w"> </span><span class="k">IF</span><span class="p">;</span>
<span class="k">END</span><span class="p">;</span>
<span class="err">$$</span><span class="w"> </span><span class="k">LANGUAGE</span><span class="w"> </span><span class="n">plpgsql</span><span class="p">;</span>

<span class="k">CREATE</span><span class="w"> </span><span class="k">TRIGGER</span><span class="w"> </span><span class="ss">&quot;trg_勘定科目マスタ_変更ログ&quot;</span>
<span class="k">AFTER</span><span class="w"> </span><span class="k">INSERT</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="k">UPDATE</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="k">DELETE</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;勘定科目マスタ&quot;</span>
<span class="k">FOR</span><span class="w"> </span><span class="k">EACH</span><span class="w"> </span><span class="k">ROW</span>
<span class="k">EXECUTE</span><span class="w"> </span><span class="k">FUNCTION</span><span class="w"> </span><span class="n">log_account_changes</span><span class="p">();</span>

<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;変更ログ&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;マスタデータの変更履歴を保存するテーブル&#39;</span><span class="p">;</span>
</code></pre></div>

</details>

<h3 id="1924">19.2.4 ドメインモデル<a class="headerlink" href="#1924" title="Permanent link">&para;</a></h3>
<details>
<summary>ChangeLog エンティティ</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/sms/domain/model/audit/ChangeLog.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.fas.domain.model.audit</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.AllArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Builder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.NoArgsConstructor</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 変更ログエンティティ</span>
<span class="cm"> */</span>
<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ChangeLog</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">logId</span><span class="p">;</span><span class="w">               </span><span class="c1">// ログID</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">tableName</span><span class="p">;</span><span class="w">         </span><span class="c1">// テーブル名</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">recordKey</span><span class="p">;</span><span class="w">         </span><span class="c1">// レコードキー</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">OperationType</span><span class="w"> </span><span class="n">operationType</span><span class="p">;</span><span class="w"> </span><span class="c1">// 操作種別</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">beforeData</span><span class="p">;</span><span class="w">        </span><span class="c1">// 操作前データ（JSON）</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">afterData</span><span class="p">;</span><span class="w">         </span><span class="c1">// 操作後データ（JSON）</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">operatedAt</span><span class="p">;</span><span class="w"> </span><span class="c1">// 操作日時</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">operatedBy</span><span class="p">;</span><span class="w">        </span><span class="c1">// 操作者</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">operatedFrom</span><span class="p">;</span><span class="w">      </span><span class="c1">// 操作端末</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">remarks</span><span class="p">;</span><span class="w">           </span><span class="c1">// 備考</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 操作種別</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">enum</span><span class="w"> </span><span class="n">OperationType</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">INSERT</span><span class="p">,</span><span class="w"> </span><span class="n">UPDATE</span><span class="p">,</span><span class="w"> </span><span class="n">DELETE</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="1925">19.2.5 リポジトリインターフェース<a class="headerlink" href="#1925" title="Permanent link">&para;</a></h3>
<details>
<summary>ChangeLogRepository（Output Port）</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/sms/application/port/out/ChangeLogRepository.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.fas.application.port.out</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.fas.domain.model.audit.ChangeLog</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.fas.domain.model.audit.ChangeLog.OperationType</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Optional</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 変更ログリポジトリ（Output Port）</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">ChangeLogRepository</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 変更ログを保存する</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">save</span><span class="p">(</span><span class="n">ChangeLog</span><span class="w"> </span><span class="n">changeLog</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * ログIDで検索する</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">ChangeLog</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findById</span><span class="p">(</span><span class="n">Long</span><span class="w"> </span><span class="n">logId</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * テーブル名とレコードキーで検索する</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">ChangeLog</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByTableNameAndRecordKey</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">tableName</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">recordKey</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * テーブル名で検索する</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">ChangeLog</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByTableName</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">tableName</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 操作種別で検索する</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">ChangeLog</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByOperationType</span><span class="p">(</span><span class="n">OperationType</span><span class="w"> </span><span class="n">operationType</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 期間指定で検索する</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">ChangeLog</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByDateRange</span><span class="p">(</span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">from</span><span class="p">,</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">to</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 操作者で検索する</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">ChangeLog</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByOperatedBy</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">operatedBy</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 複合条件で検索する</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">ChangeLog</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByConditions</span><span class="p">(</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">tableName</span><span class="p">,</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">recordKey</span><span class="p">,</span>
<span class="w">            </span><span class="n">OperationType</span><span class="w"> </span><span class="n">operationType</span><span class="p">,</span>
<span class="w">            </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">from</span><span class="p">,</span>
<span class="w">            </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">to</span><span class="p">,</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">operatedBy</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 全件削除（テスト用）</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">deleteAll</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="1926-mybatis-mapper">19.2.6 MyBatis Mapper<a class="headerlink" href="#1926-mybatis-mapper" title="Permanent link">&para;</a></h3>
<details>
<summary>ChangeLogMapper.xml</summary>

<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="cp">&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
<span class="cp">        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span>

<span class="nt">&lt;mapper</span><span class="w"> </span><span class="na">namespace=</span><span class="s">&quot;com.example.fas.infrastructure.persistence.mapper.ChangeLogMapper&quot;</span><span class="nt">&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- ResultMap: 日本語カラム名 → 英語プロパティ名 --&gt;</span>
<span class="w">    </span><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;ChangeLogResultMap&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;com.example.fas.domain.model.audit.ChangeLog&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;logId&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;ログID&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;tableName&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;テーブル名&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;recordKey&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;レコードキー&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;operationType&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;操作種別&quot;</span>
<span class="w">                </span><span class="na">typeHandler=</span><span class="s">&quot;com.example.fas.infrastructure.persistence.typehandler.OperationTypeHandler&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;beforeData&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;操作前データ&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;afterData&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;操作後データ&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;operatedAt&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;操作日時&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;operatedBy&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;操作者&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;operatedFrom&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;操作端末&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;remarks&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;備考&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/resultMap&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- 登録 --&gt;</span>
<span class="w">    </span><span class="nt">&lt;insert</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;insert&quot;</span><span class="w"> </span><span class="na">parameterType=</span><span class="s">&quot;com.example.fas.domain.model.audit.ChangeLog&quot;</span>
<span class="w">            </span><span class="na">useGeneratedKeys=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="na">keyProperty=</span><span class="s">&quot;logId&quot;</span><span class="w"> </span><span class="na">keyColumn=</span><span class="s">&quot;ログID&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>INSERT<span class="w"> </span>INTO<span class="w"> </span>&quot;変更ログ&quot;<span class="w"> </span>(
<span class="w">            </span>&quot;テーブル名&quot;,
<span class="w">            </span>&quot;レコードキー&quot;,
<span class="w">            </span>&quot;操作種別&quot;,
<span class="w">            </span>&quot;操作前データ&quot;,
<span class="w">            </span>&quot;操作後データ&quot;,
<span class="w">            </span>&quot;操作日時&quot;,
<span class="w">            </span>&quot;操作者&quot;,
<span class="w">            </span>&quot;操作端末&quot;,
<span class="w">            </span>&quot;備考&quot;
<span class="w">        </span>)<span class="w"> </span>VALUES<span class="w"> </span>(
<span class="w">            </span>#{tableName},
<span class="w">            </span>#{recordKey},
<span class="w">            </span>#{operationType,<span class="w"> </span>typeHandler=com.example.fas.infrastructure.persistence.typehandler.OperationTypeHandler},
<span class="w">            </span>#{beforeData}::jsonb,
<span class="w">            </span>#{afterData}::jsonb,
<span class="w">            </span>COALESCE(#{operatedAt},<span class="w"> </span>CURRENT_TIMESTAMP),
<span class="w">            </span>#{operatedBy},
<span class="w">            </span>#{operatedFrom},
<span class="w">            </span>#{remarks}
<span class="w">        </span>)
<span class="w">    </span><span class="nt">&lt;/insert&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- ログIDで検索 --&gt;</span>
<span class="w">    </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;findById&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;ChangeLogResultMap&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>SELECT
<span class="w">            </span>&quot;ログID&quot;,
<span class="w">            </span>&quot;テーブル名&quot;,
<span class="w">            </span>&quot;レコードキー&quot;,
<span class="w">            </span>&quot;操作種別&quot;,
<span class="w">            </span>&quot;操作前データ&quot;,
<span class="w">            </span>&quot;操作後データ&quot;,
<span class="w">            </span>&quot;操作日時&quot;,
<span class="w">            </span>&quot;操作者&quot;,
<span class="w">            </span>&quot;操作端末&quot;,
<span class="w">            </span>&quot;備考&quot;
<span class="w">        </span>FROM<span class="w"> </span>&quot;変更ログ&quot;
<span class="w">        </span>WHERE<span class="w"> </span>&quot;ログID&quot;<span class="w"> </span>=<span class="w"> </span>#{logId}
<span class="w">    </span><span class="nt">&lt;/select&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- テーブル名とレコードキーで検索 --&gt;</span>
<span class="w">    </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;findByTableNameAndRecordKey&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;ChangeLogResultMap&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>SELECT
<span class="w">            </span>&quot;ログID&quot;,
<span class="w">            </span>&quot;テーブル名&quot;,
<span class="w">            </span>&quot;レコードキー&quot;,
<span class="w">            </span>&quot;操作種別&quot;,
<span class="w">            </span>&quot;操作前データ&quot;,
<span class="w">            </span>&quot;操作後データ&quot;,
<span class="w">            </span>&quot;操作日時&quot;,
<span class="w">            </span>&quot;操作者&quot;,
<span class="w">            </span>&quot;操作端末&quot;,
<span class="w">            </span>&quot;備考&quot;
<span class="w">        </span>FROM<span class="w"> </span>&quot;変更ログ&quot;
<span class="w">        </span>WHERE<span class="w"> </span>&quot;テーブル名&quot;<span class="w"> </span>=<span class="w"> </span>#{tableName}
<span class="w">          </span>AND<span class="w"> </span>&quot;レコードキー&quot;<span class="w"> </span>=<span class="w"> </span>#{recordKey}
<span class="w">        </span>ORDER<span class="w"> </span>BY<span class="w"> </span>&quot;操作日時&quot;<span class="w"> </span>DESC
<span class="w">    </span><span class="nt">&lt;/select&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- テーブル名で検索 --&gt;</span>
<span class="w">    </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;findByTableName&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;ChangeLogResultMap&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>SELECT
<span class="w">            </span>&quot;ログID&quot;,
<span class="w">            </span>&quot;テーブル名&quot;,
<span class="w">            </span>&quot;レコードキー&quot;,
<span class="w">            </span>&quot;操作種別&quot;,
<span class="w">            </span>&quot;操作前データ&quot;,
<span class="w">            </span>&quot;操作後データ&quot;,
<span class="w">            </span>&quot;操作日時&quot;,
<span class="w">            </span>&quot;操作者&quot;,
<span class="w">            </span>&quot;操作端末&quot;,
<span class="w">            </span>&quot;備考&quot;
<span class="w">        </span>FROM<span class="w"> </span>&quot;変更ログ&quot;
<span class="w">        </span>WHERE<span class="w"> </span>&quot;テーブル名&quot;<span class="w"> </span>=<span class="w"> </span>#{tableName}
<span class="w">        </span>ORDER<span class="w"> </span>BY<span class="w"> </span>&quot;操作日時&quot;<span class="w"> </span>DESC
<span class="w">    </span><span class="nt">&lt;/select&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- 複合条件で検索 --&gt;</span>
<span class="w">    </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;findByConditions&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;ChangeLogResultMap&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>SELECT
<span class="w">            </span>&quot;ログID&quot;,
<span class="w">            </span>&quot;テーブル名&quot;,
<span class="w">            </span>&quot;レコードキー&quot;,
<span class="w">            </span>&quot;操作種別&quot;,
<span class="w">            </span>&quot;操作前データ&quot;,
<span class="w">            </span>&quot;操作後データ&quot;,
<span class="w">            </span>&quot;操作日時&quot;,
<span class="w">            </span>&quot;操作者&quot;,
<span class="w">            </span>&quot;操作端末&quot;,
<span class="w">            </span>&quot;備考&quot;
<span class="w">        </span>FROM<span class="w"> </span>&quot;変更ログ&quot;
<span class="w">        </span><span class="nt">&lt;where&gt;</span>
<span class="w">            </span><span class="nt">&lt;if</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;tableName != null&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span>AND<span class="w"> </span>&quot;テーブル名&quot;<span class="w"> </span>=<span class="w"> </span>#{tableName}
<span class="w">            </span><span class="nt">&lt;/if&gt;</span>
<span class="w">            </span><span class="nt">&lt;if</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;recordKey != null&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span>AND<span class="w"> </span>&quot;レコードキー&quot;<span class="w"> </span>=<span class="w"> </span>#{recordKey}
<span class="w">            </span><span class="nt">&lt;/if&gt;</span>
<span class="w">            </span><span class="nt">&lt;if</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;operationType != null&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span>AND<span class="w"> </span>&quot;操作種別&quot;<span class="w"> </span>=<span class="w"> </span>#{operationType,<span class="w"> </span>typeHandler=com.example.fas.infrastructure.persistence.typehandler.OperationTypeHandler}
<span class="w">            </span><span class="nt">&lt;/if&gt;</span>
<span class="w">            </span><span class="nt">&lt;if</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;from != null&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span>AND<span class="w"> </span>&quot;操作日時&quot;<span class="w"> </span><span class="ni">&amp;gt;</span>=<span class="w"> </span>#{from}
<span class="w">            </span><span class="nt">&lt;/if&gt;</span>
<span class="w">            </span><span class="nt">&lt;if</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;to != null&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span>AND<span class="w"> </span>&quot;操作日時&quot;<span class="w"> </span><span class="ni">&amp;lt;</span>=<span class="w"> </span>#{to}
<span class="w">            </span><span class="nt">&lt;/if&gt;</span>
<span class="w">            </span><span class="nt">&lt;if</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;operatedBy != null&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span>AND<span class="w"> </span>&quot;操作者&quot;<span class="w"> </span>=<span class="w"> </span>#{operatedBy}
<span class="w">            </span><span class="nt">&lt;/if&gt;</span>
<span class="w">        </span><span class="nt">&lt;/where&gt;</span>
<span class="w">        </span>ORDER<span class="w"> </span>BY<span class="w"> </span>&quot;操作日時&quot;<span class="w"> </span>DESC
<span class="w">    </span><span class="nt">&lt;/select&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- 全件削除（テスト用） --&gt;</span>
<span class="w">    </span><span class="nt">&lt;delete</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;deleteAll&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>DELETE<span class="w"> </span>FROM<span class="w"> </span>&quot;変更ログ&quot;
<span class="w">    </span><span class="nt">&lt;/delete&gt;</span>

<span class="nt">&lt;/mapper&gt;</span>
</code></pre></div>

</details>

<details>
<summary>OperationTypeHandler（TypeHandler）</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/sms/infrastructure/persistence/typehandler/OperationTypeHandler.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.fas.infrastructure.persistence.typehandler</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.fas.domain.model.audit.ChangeLog.OperationType</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.ibatis.type.BaseTypeHandler</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.ibatis.type.JdbcType</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.ibatis.type.MappedTypes</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.sql.CallableStatement</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.sql.PreparedStatement</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.sql.ResultSet</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.sql.SQLException</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 操作種別 TypeHandler</span>
<span class="cm"> * PostgreSQL ENUM（操作種別） ↔ Java Enum（OperationType）の変換</span>
<span class="cm"> */</span>
<span class="nd">@MappedTypes</span><span class="p">(</span><span class="n">OperationType</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">OperationTypeHandler</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">BaseTypeHandler</span><span class="o">&lt;</span><span class="n">OperationType</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setNonNullParameter</span><span class="p">(</span><span class="n">PreparedStatement</span><span class="w"> </span><span class="n">ps</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">,</span>
<span class="w">            </span><span class="n">OperationType</span><span class="w"> </span><span class="n">parameter</span><span class="p">,</span><span class="w"> </span><span class="n">JdbcType</span><span class="w"> </span><span class="n">jdbcType</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">SQLException</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Java Enum → PostgreSQL ENUM</span>
<span class="w">        </span><span class="n">ps</span><span class="p">.</span><span class="na">setObject</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">parameter</span><span class="p">.</span><span class="na">name</span><span class="p">(),</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">sql</span><span class="p">.</span><span class="na">Types</span><span class="p">.</span><span class="na">OTHER</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">OperationType</span><span class="w"> </span><span class="nf">getNullableResult</span><span class="p">(</span><span class="n">ResultSet</span><span class="w"> </span><span class="n">rs</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">columnName</span><span class="p">)</span>
<span class="w">            </span><span class="kd">throws</span><span class="w"> </span><span class="n">SQLException</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rs</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="n">columnName</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">OperationType</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">OperationType</span><span class="w"> </span><span class="nf">getNullableResult</span><span class="p">(</span><span class="n">ResultSet</span><span class="w"> </span><span class="n">rs</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">columnIndex</span><span class="p">)</span>
<span class="w">            </span><span class="kd">throws</span><span class="w"> </span><span class="n">SQLException</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rs</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="n">columnIndex</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">OperationType</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">OperationType</span><span class="w"> </span><span class="nf">getNullableResult</span><span class="p">(</span><span class="n">CallableStatement</span><span class="w"> </span><span class="n">cs</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">columnIndex</span><span class="p">)</span>
<span class="w">            </span><span class="kd">throws</span><span class="w"> </span><span class="n">SQLException</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cs</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="n">columnIndex</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">OperationType</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="1927-tdd">19.2.7 TDD によるテスト実装<a class="headerlink" href="#1927-tdd" title="Permanent link">&para;</a></h3>
<details>
<summary>変更ログリポジトリのテスト</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/test/java/com/example/sms/infrastructure/persistence/ChangeLogRepositoryTest.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.fas.infrastructure.persistence</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.fas.application.port.out.ChangeLogRepository</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.fas.domain.model.audit.ChangeLog</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.fas.domain.model.audit.ChangeLog.OperationType</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.mybatis.spring.boot.test.autoconfigure.MybatisTest</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.boot.test.autoconfigure.jdbc.AutoConfigureTestDatabase</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.context.annotation.Import</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.test.context.DynamicPropertyRegistry</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.test.context.DynamicPropertySource</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.containers.PostgreSQLContainer</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.junit.jupiter.Container</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.junit.jupiter.Testcontainers</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>

<span class="kn">import static</span><span class="w"> </span><span class="nn">org.assertj.core.api.Assertions.*</span><span class="p">;</span>

<span class="nd">@MybatisTest</span>
<span class="nd">@AutoConfigureTestDatabase</span><span class="p">(</span><span class="n">replace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AutoConfigureTestDatabase</span><span class="p">.</span><span class="na">Replace</span><span class="p">.</span><span class="na">NONE</span><span class="p">)</span>
<span class="nd">@Testcontainers</span>
<span class="nd">@Import</span><span class="p">(</span><span class="n">ChangeLogRepositoryImpl</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;変更ログリポジトリ&quot;</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">ChangeLogRepositoryTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Container</span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="n">PostgreSQLContainer</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PostgreSQLContainer</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="s">&quot;postgres:16&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withDatabaseName</span><span class="p">(</span><span class="s">&quot;testdb&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withUsername</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withPassword</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="nd">@DynamicPropertySource</span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configureProperties</span><span class="p">(</span><span class="n">DynamicPropertyRegistry</span><span class="w"> </span><span class="n">registry</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.datasource.url&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">postgres</span><span class="p">::</span><span class="n">getJdbcUrl</span><span class="p">);</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.datasource.username&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">postgres</span><span class="p">::</span><span class="n">getUsername</span><span class="p">);</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.datasource.password&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">postgres</span><span class="p">::</span><span class="n">getPassword</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ChangeLogRepository</span><span class="w"> </span><span class="n">changeLogRepository</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@BeforeEach</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setUp</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">changeLogRepository</span><span class="p">.</span><span class="na">deleteAll</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;登録&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">Insert</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;変更ログを登録できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">canInsertChangeLog</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Arrange</span>
<span class="w">            </span><span class="kd">var</span><span class="w"> </span><span class="n">changeLog</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ChangeLog</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">tableName</span><span class="p">(</span><span class="s">&quot;勘定科目マスタ&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">recordKey</span><span class="p">(</span><span class="s">&quot;11100&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">operationType</span><span class="p">(</span><span class="n">OperationType</span><span class="p">.</span><span class="na">INSERT</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">afterData</span><span class="p">(</span><span class="s">&quot;{\&quot;勘定科目コード\&quot;:\&quot;11100\&quot;,\&quot;勘定科目名\&quot;:\&quot;現金\&quot;}&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">operatedBy</span><span class="p">(</span><span class="s">&quot;admin&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">            </span><span class="c1">// Act</span>
<span class="w">            </span><span class="n">changeLogRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">changeLog</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Assert</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">changeLog</span><span class="p">.</span><span class="na">getLogId</span><span class="p">()).</span><span class="na">isNotNull</span><span class="p">();</span>
<span class="w">            </span><span class="kd">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">changeLogRepository</span><span class="p">.</span><span class="na">findById</span><span class="p">(</span><span class="n">changeLog</span><span class="p">.</span><span class="na">getLogId</span><span class="p">());</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">).</span><span class="na">isPresent</span><span class="p">();</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">get</span><span class="p">().</span><span class="na">getTableName</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;勘定科目マスタ&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">get</span><span class="p">().</span><span class="na">getOperationType</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">OperationType</span><span class="p">.</span><span class="na">INSERT</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;UPDATE操作のログを登録できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">canInsertUpdateLog</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Arrange</span>
<span class="w">            </span><span class="kd">var</span><span class="w"> </span><span class="n">changeLog</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ChangeLog</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">tableName</span><span class="p">(</span><span class="s">&quot;勘定科目マスタ&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">recordKey</span><span class="p">(</span><span class="s">&quot;11100&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">operationType</span><span class="p">(</span><span class="n">OperationType</span><span class="p">.</span><span class="na">UPDATE</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">beforeData</span><span class="p">(</span><span class="s">&quot;{\&quot;勘定科目名\&quot;:\&quot;現金\&quot;}&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">afterData</span><span class="p">(</span><span class="s">&quot;{\&quot;勘定科目名\&quot;:\&quot;現金及び預金\&quot;}&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">operatedBy</span><span class="p">(</span><span class="s">&quot;admin&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">remarks</span><span class="p">(</span><span class="s">&quot;科目名変更&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">            </span><span class="c1">// Act</span>
<span class="w">            </span><span class="n">changeLogRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">changeLog</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Assert</span>
<span class="w">            </span><span class="kd">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">changeLogRepository</span><span class="p">.</span><span class="na">findById</span><span class="p">(</span><span class="n">changeLog</span><span class="p">.</span><span class="na">getLogId</span><span class="p">());</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">).</span><span class="na">isPresent</span><span class="p">();</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">get</span><span class="p">().</span><span class="na">getOperationType</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">OperationType</span><span class="p">.</span><span class="na">UPDATE</span><span class="p">);</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">get</span><span class="p">().</span><span class="na">getBeforeData</span><span class="p">()).</span><span class="na">contains</span><span class="p">(</span><span class="s">&quot;現金&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">get</span><span class="p">().</span><span class="na">getAfterData</span><span class="p">()).</span><span class="na">contains</span><span class="p">(</span><span class="s">&quot;現金及び預金&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;検索&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">Search</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@BeforeEach</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">setUpTestData</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// テストデータを登録</span>
<span class="w">            </span><span class="n">changeLogRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">ChangeLog</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">tableName</span><span class="p">(</span><span class="s">&quot;勘定科目マスタ&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">recordKey</span><span class="p">(</span><span class="s">&quot;11100&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">operationType</span><span class="p">(</span><span class="n">OperationType</span><span class="p">.</span><span class="na">INSERT</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">afterData</span><span class="p">(</span><span class="s">&quot;{\&quot;勘定科目コード\&quot;:\&quot;11100\&quot;}&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">operatedAt</span><span class="p">(</span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2025</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">operatedBy</span><span class="p">(</span><span class="s">&quot;user1&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">());</span>

<span class="w">            </span><span class="n">changeLogRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">ChangeLog</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">tableName</span><span class="p">(</span><span class="s">&quot;勘定科目マスタ&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">recordKey</span><span class="p">(</span><span class="s">&quot;11100&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">operationType</span><span class="p">(</span><span class="n">OperationType</span><span class="p">.</span><span class="na">UPDATE</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">beforeData</span><span class="p">(</span><span class="s">&quot;{\&quot;勘定科目名\&quot;:\&quot;現金\&quot;}&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">afterData</span><span class="p">(</span><span class="s">&quot;{\&quot;勘定科目名\&quot;:\&quot;現金及び預金\&quot;}&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">operatedAt</span><span class="p">(</span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2025</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">operatedBy</span><span class="p">(</span><span class="s">&quot;user2&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;テーブル名とレコードキーで検索できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">canFindByTableNameAndRecordKey</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Act</span>
<span class="w">            </span><span class="kd">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">changeLogRepository</span><span class="p">.</span><span class="na">findByTableNameAndRecordKey</span><span class="p">(</span>
<span class="w">                    </span><span class="s">&quot;勘定科目マスタ&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;11100&quot;</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Assert</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">).</span><span class="na">hasSize</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">).</span><span class="na">allMatch</span><span class="p">(</span><span class="n">log</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                    </span><span class="n">log</span><span class="p">.</span><span class="na">getTableName</span><span class="p">().</span><span class="na">equals</span><span class="p">(</span><span class="s">&quot;勘定科目マスタ&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="w">                    </span><span class="n">log</span><span class="p">.</span><span class="na">getRecordKey</span><span class="p">().</span><span class="na">equals</span><span class="p">(</span><span class="s">&quot;11100&quot;</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;操作種別で検索できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">canFindByOperationType</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Act</span>
<span class="w">            </span><span class="kd">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">changeLogRepository</span><span class="p">.</span><span class="na">findByOperationType</span><span class="p">(</span><span class="n">OperationType</span><span class="p">.</span><span class="na">INSERT</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Assert</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">).</span><span class="na">hasSize</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">).</span><span class="na">allMatch</span><span class="p">(</span><span class="n">log</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                    </span><span class="n">log</span><span class="p">.</span><span class="na">getOperationType</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">OperationType</span><span class="p">.</span><span class="na">INSERT</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h2 id="193-er">19.3 ER図<a class="headerlink" href="#193-er" title="Permanent link">&para;</a></h2>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9Ijc3MnB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MTAwNHB4O2hlaWdodDo3NzJweDtiYWNrZ3JvdW5kOiNGRkZGRkY7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxMDA0IDc3MiIgd2lkdGg9IjEwMDRweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMzYxOTY7JiM0MDY1ODsmIzIwOTY2OyYjMjk3MDI7JiMxMjM5MjsmIzEyNTI1OyYjMTI0NjQ7JiMzMTY0OTsmIzI5NzAyOyYjMTIzOTg7RVImIzIyMjU5OzwvdGl0bGU+PGRlZnMvPjxnPjxnIGNsYXNzPSJ0aXRsZSIgZGF0YS1zb3VyY2UtbGluZT0iMSI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE3NC4zNDMxIiB4PSI0MDguMjI4OCIgeT0iMjIuOTk1MSI+JiMzNjE5NjsmIzQwNjU4OyYjMjA5NjY7JiMyOTcwMjsmIzEyMzkyOyYjMTI1MjU7JiMxMjQ2NDsmIzMxNjQ5OyYjMjk3MDI7JiMxMjM5ODtFUiYjMjIyNTk7PC90ZXh0PjwvZz48IS0tY2xhc3MgSm91cm5hbC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkpvdXJuYWwiIGRhdGEtc291cmNlLWxpbmU9IjMiIGlkPSJlbnQwMDAyIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIxMC45Njg4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNDkuMjAzNyIgeD0iMjAuMDciIHk9IjQ0LjI5NjkiLz48ZWxsaXBzZSBjeD0iNzYuNDIxOSIgY3k9IjYwLjI5NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTgwLjUzMTMsNjYuMjk2OSBMNzIuODEyNiw2Ni4yOTY5IEw3Mi44MTI2LDUzLjkwNjMgTDgwLjUzMTMsNTMuOTA2MyBMODAuNTMxMyw1Ni4wNjI1IEw3NS4yNjU3LDU2LjA2MjUgTDc1LjI2NTcsNTguNzM0NCBMODAuMDMxMyw1OC43MzQ0IEw4MC4wMzEzLDYwLjg5MDYgTDc1LjI2NTcsNjAuODkwNiBMNzUuMjY1Nyw2NC4xNDA2IEw4MC41MzEzLDY0LjE0MDYgTDgwLjUzMTMsNjYuMjk2OSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI3Ljk5OTkiIHg9Ijk2LjkyMTkiIHk9IjY1LjE0MzYiPiYjMjAxODE7JiMzNTM3OTs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMjEuMDciIHgyPSIxNjguMjczNyIgeTE9Ijc2LjI5NjkiIHkyPSI3Ni4yOTY5Ii8+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJJRV9NQU5EQVRPUlkiPjxlbGxpcHNlIGN4PSIzMS4wNyIgY3k9Ijg5Ljk0NTMiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iNDAuMDciIHk9IjkzLjI5MiI+JiMyMDE4MTsmIzM1Mzc5OyYjMjAyNTM7JiMzMTA4MDsmIzMwMDU4OyYjMjE0OTU7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjM0Ljc1MzkiIHg9IjEyOC41MTk4IiB5PSI5My4yOTIiPiYjMTcxO1BLJiMxODc7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyMS4wNyIgeDI9IjE2OC4yNzM3IiB5MT0iMTAwLjU5MzgiIHkyPSIxMDAuNTkzOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQxLjk5OTgiIHg9IjI2LjA3IiB5PSIxMTcuNTg4OSI+JiMzNjIxNTsmIzMxMDgwOyYjMjYwODU7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQxLjk5OTgiIHg9IjI2LjA3IiB5PSIxMzMuODg1NyI+JiMyMDgzNzsmIzIxMTQ3OyYjMjYwODU7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgzLjk5OTYiIHg9IjI2LjA3IiB5PSIxNTAuMTgyNiI+JiMyMDE4MTsmIzM1Mzc5OyYjMjAyNTM7JiMzMTA4MDsmIzIxMzA2OyYjMjA5OTg7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwOC44MTQxIiB4PSIyNi4wNyIgeT0iMTY2LjQ3OTUiPiYjMzcwOTY7JiMzODI3MjsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsgJiMxNzE7RksmIzE4Nzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iMjYuMDciIHk9IjE4Mi43NzY0Ij4mIzMxMDM4OyYjMjE3Mjk7JiMxMjQ2NzsmIzEyNTQwOyYjMTI0ODk7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSIyNi4wNyIgeT0iMTk5LjA3MzIiPiYjMzYxOTY7JiMyMDI1MzsmIzEyNTAxOyYjMTI1MjE7JiMxMjQ2NDs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgzLjk5OTYiIHg9IjI2LjA3IiB5PSIyMTUuMzcwMSI+JiMzNjE5NjsmIzQwNjU4OyYjMjAyNTM7JiMzMTA4MDsmIzMwMDU4OyYjMjE0OTU7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjI2LjA3IiB5PSIyMzEuNjY3Ij4mIzIwMzE2OyYjMjUxMDQ7JiMyNjA4NTsmIzI2MTc4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSIyNi4wNyIgeT0iMjQ3Ljk2MzkiPiYjMjYzNTY7JiMyNjAzMjsmIzI2MDg1OyYjMjYxNzg7PC90ZXh0PjwvZz48IS0tY2xhc3MgSm91cm5hbERldGFpbC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkpvdXJuYWxEZXRhaWwiIGRhdGEtc291cmNlLWxpbmU9IjE3IiBpZD0iZW50MDAwMyI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI5Ni44OTA2IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNzUuMzM3NSIgeD0iNyIgeT0iNDA0LjMwNjkiLz48ZWxsaXBzZSBjeD0iNjIuNDE4OSIgY3k9IjQyMC4zMDY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik02Ni41MjgzLDQyNi4zMDY5IEw1OC44MDk1LDQyNi4zMDY5IEw1OC44MDk1LDQxMy45MTYzIEw2Ni41MjgzLDQxMy45MTYzIEw2Ni41MjgzLDQxNi4wNzI1IEw2MS4yNjI2LDQxNi4wNzI1IEw2MS4yNjI2LDQxOC43NDQ0IEw2Ni4wMjgzLDQxOC43NDQ0IEw2Ni4wMjgzLDQyMC45MDA2IEw2MS4yNjI2LDQyMC45MDA2IEw2MS4yNjI2LDQyNC4xNTA2IEw2Ni41MjgzLDQyNC4xNTA2IEw2Ni41MjgzLDQyNi4zMDY5IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iODIuOTE4OSIgeT0iNDI1LjE1MzYiPiYjMjAxODE7JiMzNTM3OTsmIzI2MTI2OyYjMzIwNDg7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjgiIHgyPSIxODEuMzM3NSIgeTE9IjQzNi4zMDY5IiB5Mj0iNDM2LjMwNjkiLz48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IklFX01BTkRBVE9SWSI+PGVsbGlwc2UgY3g9IjE4IiBjeT0iNDQ5Ljk1NTMiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iMjciIHk9IjQ1My4zMDIiPiYjMjAxODE7JiMzNTM3OTsmIzIwMjUzOyYjMzEwODA7JiMzMDA1ODsmIzIxNDk1OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2MC44ODc3IiB4PSIxMTUuNDQ5OCIgeT0iNDUzLjMwMiI+JiMxNzE7UEssIEZLJiMxODc7PC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iSUVfTUFOREFUT1JZIj48ZWxsaXBzZSBjeD0iMTgiIGN5PSI0NjYuMjUyMiIgZmlsbD0iIzAwMDAwMCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSIyNyIgeT0iNDY5LjU5ODkiPiYjMjAxODE7JiMzNTM3OTsmIzM0ODkyOyYjMzAwNTg7JiMyMTQ5NTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzQuNzUzOSIgeD0iMTAxLjQ0OTkiIHk9IjQ2OS41OTg5Ij4mIzE3MTtQSyYjMTg3OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iOCIgeDI9IjE4MS4zMzc1IiB5MT0iNDc2LjkwMDYiIHkyPSI0NzYuOTAwNiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQxLjk5OTgiIHg9IjEzIiB5PSI0OTMuODk1NyI+JiMzNDg5MjsmIzI1Njg4OyYjMzUyMDE7PC90ZXh0PjwvZz48IS0tY2xhc3MgSm91cm5hbERDLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iSm91cm5hbERDIiBkYXRhLXNvdXJjZS1saW5lPSIyNCIgaWQ9ImVudDAwMDQiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTQ1Ljc4MTMiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE3NS4zMzc1IiB4PSI3IiB5PSI2MTkuMjM2OSIvPjxlbGxpcHNlIGN4PSI0OC43MDIxIiBjeT0iNjM1LjIzNjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTUyLjgxMTQsNjQxLjIzNjkgTDQ1LjA5MjcsNjQxLjIzNjkgTDQ1LjA5MjcsNjI4Ljg0NjMgTDUyLjgxMTQsNjI4Ljg0NjMgTDUyLjgxMTQsNjMxLjAwMjUgTDQ3LjU0NTgsNjMxLjAwMjUgTDQ3LjU0NTgsNjMzLjY3NDQgTDUyLjMxMTQsNjMzLjY3NDQgTDUyLjMxMTQsNjM1LjgzMDYgTDQ3LjU0NTgsNjM1LjgzMDYgTDQ3LjU0NTgsNjM5LjA4MDYgTDUyLjgxMTQsNjM5LjA4MDYgTDUyLjgxMTQsNjQxLjIzNjkgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4My45OTk2IiB4PSI2OC42MzU4IiB5PSI2NDAuMDgzNiI+JiMyMDE4MTsmIzM1Mzc5OyYjMzYwMjQ7JiMyMDUxMTsmIzI2MTI2OyYjMzIwNDg7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjgiIHgyPSIxODEuMzM3NSIgeTE9IjY1MS4yMzY5IiB5Mj0iNjUxLjIzNjkiLz48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IklFX01BTkRBVE9SWSI+PGVsbGlwc2UgY3g9IjE4IiBjeT0iNjY0Ljg4NTMiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iMjciIHk9IjY2OC4yMzIiPiYjMjAxODE7JiMzNTM3OTsmIzIwMjUzOyYjMzEwODA7JiMzMDA1ODsmIzIxNDk1OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2MC44ODc3IiB4PSIxMTUuNDQ5OCIgeT0iNjY4LjIzMiI+JiMxNzE7UEssIEZLJiMxODc7PC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iSUVfTUFOREFUT1JZIj48ZWxsaXBzZSBjeD0iMTgiIGN5PSI2ODEuMTgyMiIgZmlsbD0iIzAwMDAwMCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSIyNyIgeT0iNjg0LjUyODkiPiYjMjAxODE7JiMzNTM3OTsmIzM0ODkyOyYjMzAwNTg7JiMyMTQ5NTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjAuODg3NyIgeD0iMTAxLjQ0OTkiIHk9IjY4NC41Mjg5Ij4mIzE3MTtQSywgRksmIzE4Nzs8L3RleHQ+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJJRV9NQU5EQVRPUlkiPjxlbGxpcHNlIGN4PSIxOCIgY3k9IjY5Ny40NzkxIiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk3Ljk5OTYiIHg9IjI3IiB5PSI3MDAuODI1NyI+JiMyMDE4MTsmIzM1Mzc5OyYjMzQ4OTI7JiMzNjAyNDsmIzIwNTExOyYjMjEzMDY7JiMyMDk5ODs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzQuNzUzOSIgeD0iMTI5LjQ0OTgiIHk9IjcwMC44MjU3Ij4mIzE3MTtQSyYjMTg3OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iOCIgeDI9IjE4MS4zMzc1IiB5MT0iNzA4LjEyNzUiIHkyPSI3MDguMTI3NSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzNi44MTQiIHg9IjEzIiB5PSI3MjUuMTIyNiI+JiMyMTIwODsmIzIzNDUwOyYjMzExODU7JiMzMDQ0NjsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsgJiMxNzE7RksmIzE4Nzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iMTMiIHk9Ijc0MS40MTk1Ij4mIzIwMTgxOyYjMzUzNzk7JiMzNzMyOTsmIzM4OTg5OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMy4zNTA2IiB4PSIxMyIgeT0iNzU3LjcxNjQiPi4uLjwvdGV4dD48L2c+PCEtLWNsYXNzIENoYW5nZUxvZy0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkNoYW5nZUxvZyIgZGF0YS1zb3VyY2UtbGluZT0iMzQiIGlkPSJlbnQwMDA1Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIxMC45Njg4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNTUuNDg2IiB4PSI1NTQuOTMiIHk9IjM0Ny4yNjY5Ii8+PGVsbGlwc2UgY3g9IjYwMC40MjMxIiBjeT0iMzYzLjI2NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTYwNC41MzI1LDM2OS4yNjY5IEw1OTYuODEzNywzNjkuMjY2OSBMNTk2LjgxMzcsMzU2Ljg3NjMgTDYwNC41MzI1LDM1Ni44NzYzIEw2MDQuNTMyNSwzNTkuMDMyNSBMNTk5LjI2NjksMzU5LjAzMjUgTDU5OS4yNjY5LDM2MS43MDQ0IEw2MDQuMDMyNSwzNjEuNzA0NCBMNjA0LjAzMjUsMzYzLjg2MDYgTDU5OS4yNjY5LDM2My44NjA2IEw1OTkuMjY2OSwzNjcuMTEwNiBMNjA0LjUzMjUsMzY3LjExMDYgTDYwNC41MzI1LDM2OS4yNjY5IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iNjIwLjkyMzEiIHk9IjM2OC4xMTM2Ij4mIzIyNzkzOyYjMjYzNTY7JiMxMjUyNTsmIzEyNDY0OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI1NTUuOTMiIHgyPSI3MDkuNDE2IiB5MT0iMzc5LjI2NjkiIHkyPSIzNzkuMjY2OSIvPjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iSUVfTUFOREFUT1JZIj48ZWxsaXBzZSBjeD0iNTY1LjkzIiBjeT0iMzkyLjkxNTMiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDQuODMiIHg9IjU3NC45MyIgeT0iMzk2LjI2MiI+JiMxMjUyNTsmIzEyNDY0O0lEPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjM0Ljc1MzkiIHg9IjYyNC4yMTAyIiB5PSIzOTYuMjYyIj4mIzE3MTtQSyYjMTg3OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNTU1LjkzIiB4Mj0iNzA5LjQxNiIgeTE9IjQwMy41NjM4IiB5Mj0iNDAzLjU2MzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSI1NjAuOTMiIHk9IjQyMC41NTg5Ij4mIzEyNDg2OyYjMTI1NDA7JiMxMjUwMjsmIzEyNTIzOyYjMjE1MTc7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgzLjk5OTYiIHg9IjU2MC45MyIgeT0iNDM2Ljg1NTciPiYjMTI1MjQ7JiMxMjQ2NzsmIzEyNTQwOyYjMTI0ODk7JiMxMjQ2MTsmIzEyNTQwOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSI1NjAuOTMiIHk9IjQ1My4xNTI2Ij4mIzI1ODA1OyYjMjAzMTY7JiMzMTI3ODsmIzIxMDI5OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDMuNDg2IiB4PSI1NjAuOTMiIHk9IjQ2OS40NDk1Ij4mIzI1ODA1OyYjMjAzMTY7JiMyMTA2OTsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsgKEpTT05CKTwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDMuNDg2IiB4PSI1NjAuOTMiIHk9IjQ4NS43NDY0Ij4mIzI1ODA1OyYjMjAzMTY7JiMyNDQ2MDsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsgKEpTT05CKTwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSI1NjAuOTMiIHk9IjUwMi4wNDMyIj4mIzI1ODA1OyYjMjAzMTY7JiMyNjA4NTsmIzI2MTc4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MS45OTk4IiB4PSI1NjAuOTMiIHk9IjUxOC4zNDAxIj4mIzI1ODA1OyYjMjAzMTY7JiMzMjc3Mzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iNTYwLjkzIiB5PSI1MzQuNjM3Ij4mIzI1ODA1OyYjMjAzMTY7JiMzMTQ3MTsmIzI2NDExOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNy45OTk5IiB4PSI1NjAuOTMiIHk9IjU1MC45MzM5Ij4mIzIwNjMzOyYjMzI3NzE7PC90ZXh0PjwvZz48IS0tY2xhc3MgQWNjb3VudC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkFjY291bnQiIGRhdGEtc291cmNlLWxpbmU9IjQ4IiBpZD0iZW50MDAwNiI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMjkuNDg0NCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTYzLjIwMzciIHg9IjU1MS4wNyIgeT0iODUuMDM2OSIvPjxlbGxpcHNlIGN4PSI1ODEuMDExOCIgY3k9IjEwMS4wMzY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik01ODUuMTIxMiwxMDcuMDM2OSBMNTc3LjQwMjUsMTA3LjAzNjkgTDU3Ny40MDI1LDk0LjY0NjMgTDU4NS4xMjEyLDk0LjY0NjMgTDU4NS4xMjEyLDk2LjgwMjUgTDU3OS44NTU2LDk2LjgwMjUgTDU3OS44NTU2LDk5LjQ3NDQgTDU4NC42MjEyLDk5LjQ3NDQgTDU4NC42MjEyLDEwMS42MzA2IEw1NzkuODU1NiwxMDEuNjMwNiBMNTc5Ljg1NTYsMTA0Ljg4MDYgTDU4NS4xMjEyLDEwNC44ODA2IEw1ODUuMTIxMiwxMDcuMDM2OSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk3Ljk5OTYiIHg9IjU5OC4zMzIzIiB5PSIxMDUuODgzNiI+JiMyMTIwODsmIzIzNDUwOyYjMzExODU7JiMzMDQ0NjsmIzEyNTEwOyYjMTI0NzM7JiMxMjQ3OTs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iNTUyLjA3IiB4Mj0iNzEzLjI3MzciIHkxPSIxMTcuMDM2OSIgeTI9IjExNy4wMzY5Ii8+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJJRV9NQU5EQVRPUlkiPjxlbGxpcHNlIGN4PSI1NjIuMDciIGN5PSIxMzAuNjg1MyIgZmlsbD0iIzAwMDAwMCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ny45OTk2IiB4PSI1NzEuMDciIHk9IjEzNC4wMzIiPiYjMjEyMDg7JiMyMzQ1MDsmIzMxMTg1OyYjMzA0NDY7JiMxMjQ2NzsmIzEyNTQwOyYjMTI0ODk7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjM0Ljc1MzkiIHg9IjY3My41MTk4IiB5PSIxMzQuMDMyIj4mIzE3MTtQSyYjMTg3OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNTUyLjA3IiB4Mj0iNzEzLjI3MzciIHkxPSIxNDEuMzMzOCIgeTI9IjE0MS4zMzM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iNTU3LjA3IiB5PSIxNTguMzI4OSI+JiMyMTIwODsmIzIzNDUwOyYjMzExODU7JiMzMDQ0NjsmIzIxNTE3OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSI1NTcuMDciIHk9IjE3NC42MjU3Ij4mIzIwMzE2OyYjMjUxMDQ7JiMyNjA4NTsmIzI2MTc4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSI1NTcuMDciIHk9IjE5MC45MjI2Ij4mIzI2MzU2OyYjMjYwMzI7JiMyNjA4NTsmIzI2MTc4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSI1NTcuMDciIHk9IjIwNy4yMTk1Ij4mIzI2MzU2OyYjMjYwMzI7JiMzMjc3MzsmIzIxNTE3OzwvdGV4dD48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iR01OMTEiIGRhdGEtc291cmNlLWxpbmU9IjY1IiBpZD0iZW50MDAxMiI+PHBhdGggZD0iTTMyNS42NywxMjkuNjQ2OSBMMzI1LjY3LDE0NS43ODY5IEwxNjkuNDgsMTQ5Ljc4NjkgTDMyNS42NywxNTMuNzg2OSBMMzI1LjY3LDE2OS45MTI1IEEwLDAgMCAwIDAgMzI1LjY3LDE2OS45MTI1IEw1MTUuNjcwMiwxNjkuOTEyNSBBMCwwIDAgMCAwIDUxNS42NzAyLDE2OS45MTI1IEw1MTUuNjcwMiwxMzkuNjQ2OSBMNTA1LjY3MDIsMTI5LjY0NjkgTDMyNS42NywxMjkuNjQ2OSBBMCwwIDAgMCAwIDMyNS42NywxMjkuNjQ2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTUwNS42NzAyLDEyOS42NDY5IEw1MDUuNjcwMiwxMzkuNjQ2OSBMNTE1LjY3MDIsMTM5LjY0NjkgTDUwNS42NzAyLDEyOS42NDY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzUuNTYwNyIgeD0iMzMxLjY3IiB5PSIxNDYuNzEzOCI+JiMzNjE5NjsmIzIwMjUzOyYjMTI1MDE7JiMxMjUyMTsmIzEyNDY0OyA9IDEgJiMxMjM5ODsmIzIyNTgwOyYjMjE1MTI7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE2OS4wMDAyIiB4PSIzMzEuNjciIHk9IjE2MS44NDY2Ij4mIzM2MTk2OyYjNDA2NTg7JiMyMDI1MzsmIzMxMDgwOyYjMzAwNTg7JiMyMTQ5NTsmIzEyMzkxOyYjMjA4MDM7JiMyMDI1MzsmIzMxMDgwOyYjMTI0MzQ7JiMyMTQ0MjsmIzI5MDMxOzwvdGV4dD48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iR01OMTQiIGRhdGEtc291cmNlLWxpbmU9IjcwIiBpZD0iZW50MDAxNSI+PHBhdGggZD0iTTc0NS41Myw0MzIuNjE2OSBMNzQ1LjUzLDQ0OC43NDY5IEw3MTAuNjIsNDUyLjc0NjkgTDc0NS41Myw0NTYuNzQ2OSBMNzQ1LjUzLDQ3Mi44ODI1IEEwLDAgMCAwIDAgNzQ1LjUzLDQ3Mi44ODI1IEw5OTcuODAwNiw0NzIuODgyNSBBMCwwIDAgMCAwIDk5Ny44MDA2LDQ3Mi44ODI1IEw5OTcuODAwNiw0NDIuNjE2OSBMOTg3LjgwMDYsNDMyLjYxNjkgTDc0NS41Myw0MzIuNjE2OSBBMCwwIDAgMCAwIDc0NS41Myw0MzIuNjE2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTk4Ny44MDA2LDQzMi42MTY5IEw5ODcuODAwNiw0NDIuNjE2OSBMOTk3LjgwMDYsNDQyLjYxNjkgTDk4Ny44MDA2LDQzMi42MTY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMzEuMjcwNiIgeD0iNzUxLjUzIiB5PSI0NDkuNjgzOCI+JiMxMjUxMDsmIzEyNDczOyYjMTI0Nzk7JiMxMjM5ODsgSU5TRVJUL1VQREFURS9ERUxFVEUgJiMxMjQzNDs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTE3LjAwMDEiIHg9Ijc1MS41MyIgeT0iNDY0LjgxNjYiPiYjMTI0ODg7JiMxMjUyMjsmIzEyNDYwOyYjMTI1NDA7JiMxMjM5MTsmIzMzMjU4OyYjMjEyMDU7JiMzNTM1MjsmIzM3NjgyOzwvdGV4dD48L2c+PCEtLWxpbmsgSm91cm5hbCB0byBKb3VybmFsRGV0YWlsLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDIiIGRhdGEtZW50aXR5LTI9ImVudDAwMDMiIGRhdGEtbGluay10eXBlPSJjcm93Zm9vdCIgZGF0YS1zb3VyY2UtbGluZT0iNTciIGlkPSJsbms3Ij48cGF0aCBjb2RlTGluZT0iNTciIGQ9Ik05NC42NywyNjMuNjI2OSBDOTQuNjcsMzE0LjE3NjkgOTQuNjcsMzQ2LjMyNjkgOTQuNjcsMzg2LjA5NjkiIGZpbGw9Im5vbmUiIGlkPSJKb3VybmFsLUpvdXJuYWxEZXRhaWwiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iOTAuNjciIHgyPSI5OC42NyIgeTE9IjI1OS42MjY5IiB5Mj0iMjU5LjYyNjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iOTAuNjciIHgyPSI5OC42NyIgeTE9IjI2Mi42MjY5IiB5Mj0iMjYyLjYyNjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iOTQuNjciIHgyPSI5NC42NyIgeTE9IjI2My42MjY5IiB5Mj0iMjU1LjYyNjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iOTQuNjciIHgyPSIxMDAuNjciIHkxPSIzOTYuMDk2OSIgeTI9IjQwNC4wOTY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9Ijk0LjY3IiB4Mj0iODguNjciIHkxPSIzOTYuMDk2OSIgeTI9IjQwNC4wOTY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9Ijk0LjY3IiB4Mj0iOTQuNjciIHkxPSIzOTYuMDk2OSIgeTI9IjQwNC4wOTY5Ii8+PGVsbGlwc2UgY3g9Ijk0LjY3IiBjeT0iMzkwLjA5NjkiIGZpbGw9Im5vbmUiIHJ4PSI0IiByeT0iNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayBKb3VybmFsRGV0YWlsIHRvIEpvdXJuYWxEQy0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDAzIiBkYXRhLWVudGl0eS0yPSJlbnQwMDA0IiBkYXRhLWxpbmstdHlwZT0iY3Jvd2Zvb3QiIGRhdGEtc291cmNlLWxpbmU9IjU4IiBpZD0ibG5rOCI+PHBhdGggY29kZUxpbmU9IjU4IiBkPSJNOTQuNjcsNTA5LjUwNjkgQzk0LjY3LDU0My4yMTY5IDk0LjY3LDU2Mi45ODY5IDk0LjY3LDYwMS4xMDY5IiBmaWxsPSJub25lIiBpZD0iSm91cm5hbERldGFpbC1Kb3VybmFsREMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iOTAuNjciIHgyPSI5OC42NyIgeTE9IjUwNS41MDY5IiB5Mj0iNTA1LjUwNjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iOTAuNjciIHgyPSI5OC42NyIgeTE9IjUwOC41MDY5IiB5Mj0iNTA4LjUwNjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iOTQuNjciIHgyPSI5NC42NyIgeTE9IjUwOS41MDY5IiB5Mj0iNTAxLjUwNjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iOTQuNjciIHgyPSIxMDAuNjciIHkxPSI2MTEuMTA2OSIgeTI9IjYxOS4xMDY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9Ijk0LjY3IiB4Mj0iODguNjciIHkxPSI2MTEuMTA2OSIgeTI9IjYxOS4xMDY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9Ijk0LjY3IiB4Mj0iOTQuNjciIHkxPSI2MTEuMTA2OSIgeTI9IjYxOS4xMDY5Ii8+PGVsbGlwc2UgY3g9Ijk0LjY3IiBjeT0iNjA1LjEwNjkiIGZpbGw9Im5vbmUiIHJ4PSI0IiByeT0iNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayBKb3VybmFsIHRvIEpvdXJuYWwtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwMiIgZGF0YS1lbnRpdHktMj0iZW50MDAwMiIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjYwIiBpZD0ibG5rOSI+PHBhdGggY29kZUxpbmU9IjYwIiBkPSJNMTY5LjcyLDEyMS42NDY5IEMxODkuNCwxMjMuMzE2OSAyMDQuMjcsMTMyLjY5NjkgMjA0LjI3LDE0OS43ODY5IEMyMDQuMjcsMTY2Ljg2NjkgMTk1LjM3ODUsMTc1LjczOTYgMTc1LjY5ODUsMTc3LjQwOTYiIGZpbGw9Im5vbmUiIGlkPSJKb3VybmFsLXRvLUpvdXJuYWwiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjcsNzsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE2OS43MiwxNzcuOTE2OSwxNzkuMDI2LDE4MS4xNDE2LDE3NC43MDIxLDE3Ny40OTQxLDE3OC4zNDk2LDE3My4xNzAyLDE2OS43MiwxNzcuOTE2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjkxLjAwMDEiIHg9IjIxMC4yNyIgeT0iMTQ2Ljg1MzgiPiYjMzYxOTY7JiM0MDY1ODsmIzIwMjUzOyYjMzEwODA7JiMzMDA1ODsmIzIxNDk1OyYjMTIzOTE7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc4LjAwMDEiIHg9IjIxNi43NyIgeT0iMTYxLjk4NjYiPiYjMjA4MDM7JiMyMDI1MzsmIzMxMDgwOyYjMTI0MzQ7JiMyMTQ0MjsmIzI5MDMxOzwvdGV4dD48L2c+PCEtLWxpbmsgQWNjb3VudCB0byBDaGFuZ2VMb2ctLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwNiIgZGF0YS1lbnRpdHktMj0iZW50MDAwNSIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjYyIiBpZD0ibG5rMTAiPjxwYXRoIGNvZGVMaW5lPSI2MiIgZD0iTTYzMi42NywyMTQuOTc2OSBDNjMyLjY3LDI1My4zMDY5IDYzMi42NywyOTYuOTA2OSA2MzIuNjcsMzQwLjgwNjkiIGZpbGw9Im5vbmUiIGlkPSJBY2NvdW50LXRvLUNoYW5nZUxvZyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6Nyw3OyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNjMyLjY3LDM0Ni44MDY5LDYzNi42NywzMzcuODA2OSw2MzIuNjcsMzQxLjgwNjksNjI4LjY3LDMzNy44MDY5LDYzMi42NywzNDYuODA2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY1LjAwMDEiIHg9IjYzMy42NyIgeT0iMjk4LjMzMzgiPiYjMTI0ODg7JiMxMjUyMjsmIzEyNDYwOyYjMTI1NDA7JiMxMjM5MTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTIuMDAwMSIgeD0iNjQwLjE3IiB5PSIzMTMuNDY2NiI+JiMzMzI1ODsmIzIxMjA1OyYjMzUzNTI7JiMzNzY4Mjs8L3RleHQ+PC9nPjw/cGxhbnR1bWwtc3JjIGZMSFRKemZHNkJ1X2wtQjRnd3FQY0RxUUgtQVdJdEo2Nk1MdGtvNmtHbkJKOWd2VUJCZTRVaUJOQjFDcTg4aHg4MDVYZThtOG5jcXd6c0NFZm5fX09nU2oxR2Via3pYVHRfRC1GQ19wVmJJQ1k1aVNyQXVoLWtxWElQd2hzR0lFcko2d241OVJSUExEaXlNa2FMODcwOHVOOC04eEVERXhwTWxycFdtQ2xPTEJtaXVzN3pnMmt1MjEzNkN2VWRVVnI2ZlRwSlY4bUd0M21GZHZyVVMtN18xdVc3UHpHbnRBU0hNR1U5THlBMWJWZW9iNF9hTEkyUTJaa2J3OE9nYzNxSHI2UUxoV2NMNTBoVG9KZV9CVzZKMEM5S3FKQ1NmWno4dElQSFpoWkdmbktXMnp0c1RBQWFsWGIxQzlBQU1rS2NadFpWVlpnZkpZSHhOUjdqS011Q0hHdjl5QTdxNkp2MzE2QXlqa0JJWkJJZ3dlZFNTY2FSTWg3b0p3bkdOVl96X09SVzRNZERMbzFxTW9Ob0lqS3hNTUtxa2pZSTVPd05lb2Z2U3BtRWxyWmllV2JKSmpoUkt3ZlczX1BlV0ZTeWoyazJfMFNZcTY3NzBPOUtvODBhUERhaXJHLXNBMFlnTEItVzZLZW1vVGU1ZmxhTElyUnYxcTFnRWE0SU56V0ctTXJiLWlGN3Jlay14YlFJdngwcW4zWXlSam9pdGxvYmFKNEViNFlvQTdlajVNZUN6Ty1hYmhjajhNRFpRNDdMeGkydERqc1RJYzZZZ2RSd0hiSzc5NjZFTFlOelpVZGlTWngzZ040WlhOVDJwNEZxcHNVZHMzS3ZzM2FwVTJPeExORjhhWndtckJYLUgwS2tDcjA2b1RIZTdYRUVTV0hZY0M2Yll3Q0JHUW9MZ29HVlJmUlhIci1HZTBOWDB2azFxOVJ1ZkdVNkNaV3g1eFhLX1dPcVpfQmtIaGJzSEptOU1MMm9VRVZtc0Qta0NlMHRmV0MyZlE3MndraEJEaG1UY05ndTY1ODNpUk85VlA4MGpmREowY21JNzBubFdCPz48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<h2 id="194">19.4 まとめ<a class="headerlink" href="#194" title="Permanent link">&para;</a></h2>
<p>本章では、財務会計システムにおける赤黒処理とログ管理の設計について解説しました。</p>
<h3 id="_2">設計のポイント<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>3つのログ管理アプローチ</strong></li>
<li>方式A: データ自体にログ情報（シンプルだが履歴追跡不可）</li>
<li>方式B: 赤黒処理・論理削除（会計データに最適）</li>
<li>
<p>方式C: ログテーブル（マスタデータに最適）</p>
</li>
<li>
<p><strong>業務システムでの使い分け</strong></p>
</li>
<li>会計データ: 赤黒処理で監査証跡を確保</li>
<li>マスタデータ: ログテーブルで変更履歴を管理</li>
<li>
<p>サマリデータ: 更新日時のみ</p>
</li>
<li>
<p><strong>赤黒処理のメリット</strong></p>
</li>
<li>監査証跡の確保</li>
<li>会計基準への準拠</li>
<li>
<p>残高の自動調整</p>
</li>
<li>
<p><strong>ログテーブルのメリット</strong></p>
</li>
<li>完全な変更履歴の追跡</li>
<li>任意の時点の状態を復元可能</li>
<li>トリガーによる自動記録</li>
</ol>
<h3 id="_3">次章の予告<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p>第20章では、具体的な企業（D社：化粧品製造販売）の事例に基づいて、財務会計システムのデータ設計を行います。勘定科目体系、組織構成、Seedデータの実装など、実際の業務に即した設計を行います。</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://github.com/k2works/practical-database-design" target="_blank" rel="noopener" title="GitHub Repository" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "search.suggest", "search.highlight"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
      
        <script src="../../../docs/assets/js/extra.js"></script>
      
    
  </body>
</html>