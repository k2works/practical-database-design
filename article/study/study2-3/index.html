
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="基幹業務システム（販売管理・財務会計・生産管理）のデータベース設計を体系的に解説">
      
      
        <meta name="author" content="k2works">
      
      
      
        <link rel="prev" href="../study2-2/">
      
      
        <link rel="next" href="../study2-4/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>研究3 gRPCサービスの実装 - 実践データベース設計：基幹業務システム編</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../docs/mkdocs/assets/css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#3-grpc" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="実践データベース設計：基幹業務システム編" class="md-header__button md-logo" aria-label="実践データベース設計：基幹業務システム編" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            実践データベース設計：基幹業務システム編
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              研究3 gRPCサービスの実装
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/k2works/practical-database-design" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    practical-database-design
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
  実践データベース設計

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="実践データベース設計：基幹業務システム編" class="md-nav__button md-logo" aria-label="実践データベース設計：基幹業務システム編" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    実践データベース設計：基幹業務システム編
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/k2works/practical-database-design" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    practical-database-design
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    実践データベース設計
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    実践データベース設計
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../techstack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    技術スタック
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../outline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    アウトライン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    執筆ワークフロー
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ops/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    運用ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../project-setup-instruction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    プロジェクトセットアップ手順書
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_7" >
        
          
          <label class="md-nav__link" for="__nav_1_7" id="__nav_1_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    デプロイ
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    デプロイ
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy-sms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SMS デモデプロイ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy-fas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FAS デモデプロイ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy-pms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PMS デモデプロイ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_8" >
        
          
          <label class="md-nav__link" for="__nav_1_8" id="__nav_1_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第1部 基幹業務システムの全体像
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    第1部 基幹業務システムの全体像
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1/chapter01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第1章 基幹業務システムとは
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1/chapter02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第2章 基幹業務システムの業務領域
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1/chapter03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第3章 業務フローの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_9" >
        
          
          <label class="md-nav__link" for="__nav_1_9" id="__nav_1_9_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第2部 販売管理システム
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    第2部 販売管理システム
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第4章 販売管理システムの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第5章 マスタ情報の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第6章 受注・出荷・売上の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter07/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第7章 債権管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter08/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第8章 調達管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter09/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第9章 在庫管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第10章 債務管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第11章 共通処理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第12章 販売管理データ設計（B社事例）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第13章 APIサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_10" >
        
          
          <label class="md-nav__link" for="__nav_1_10" id="__nav_1_10_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第3部 財務会計システム
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    第3部 財務会計システム
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第14章 財務会計システムの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第15章 勘定科目の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter16/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第16章 仕訳の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter17/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第17章 自動仕訳の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter18/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第18章 勘定科目残高の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter19/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第19章 赤黒とログの設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter20/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第20章 財務会計データ設計（D社事例）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter21/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第21章 APIサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_11" >
        
          
          <label class="md-nav__link" for="__nav_1_11" id="__nav_1_11_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第4部 生産管理システム
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    第4部 生産管理システム
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter22/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第22章 生産管理システムの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter23/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第23章 マスタ情報の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter24/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第24章 生産計画の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter25/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第25章 購買管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter26/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第26章 外注委託管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter27/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第27章 工程管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter28/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第28章 在庫管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第29章 品質管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter30/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第30章 製造原価管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter31/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第31章 生産管理データ設計（E社事例）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter32/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第32章 APIサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_12" >
        
          
          <label class="md-nav__link" for="__nav_1_12" id="__nav_1_12_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第5部 エンタープライズインテグレーション
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    第5部 エンタープライズインテグレーション
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter33/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第33章 システム統合の概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter34/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第34章 メッセージングパターン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter35/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第35章 システム間連携パターン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter36/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第36章 マスタデータ管理（MDM）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter37/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第37章 イベント駆動アーキテクチャ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter38/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第38章 API設計とサービス連携
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter39/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第39章 データ連携の実装パターン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_13" checked>
        
          
          <label class="md-nav__link" for="__nav_1_13" id="__nav_1_13_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 販売管理システム実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_13_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1_13">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 販売管理システム実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study2-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究1 モノリスサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study2-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究2 JavaFXデスクトップアプリケーションの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    研究3 gRPCサービスの実装
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    研究3 gRPCサービスの実装
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        はじめに
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#14grpc" class="md-nav__link">
    <span class="md-ellipsis">
      
        第14章：gRPC サーバーの基礎
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第14章：gRPC サーバーの基礎">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#141-grpc" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.1 gRPC とは
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#142-rest-api-graphql" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.2 REST API / GraphQL との比較
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#143-4-rpc" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.3 4つの RPC パターン
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#144-grpc" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.4 gRPC におけるヘキサゴナルアーキテクチャ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#145" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.5 ディレクトリ構成
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#146" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.6 技術スタックの追加
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14.6 技術スタックの追加">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#buildgradlekts" class="md-nav__link">
    <span class="md-ellipsis">
      
        build.gradle.kts（差分）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#applicationyml" class="md-nav__link">
    <span class="md-ellipsis">
      
        application.yml（差分）
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#147-protocol-buffers" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.7 Protocol Buffers 定義
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14.7 Protocol Buffers 定義">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#srcmainprotocommonproto" class="md-nav__link">
    <span class="md-ellipsis">
      
        src/main/proto/common.proto
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#srcmainprotoproductproto" class="md-nav__link">
    <span class="md-ellipsis">
      
        src/main/proto/product.proto
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#148-grpc" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.8 gRPC サービス実装
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14.8 gRPC サービス実装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#grpcproductservicejava" class="md-nav__link">
    <span class="md-ellipsis">
      
        GrpcProductService.java
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#149-productconverter-proto" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.9 ProductConverter（ドメイン ⇔ Proto 変換）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1410-grpc" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.10 gRPC インターセプター
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14.10 gRPC インターセプター">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#logginginterceptorjava" class="md-nav__link">
    <span class="md-ellipsis">
      
        LoggingInterceptor.java
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1411-grpcurl" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.11 grpcurl による動作確認
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#15-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        第15章：マスタ API の実装
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第15章：マスタ API の実装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#151-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        15.1 商品マスタ API の詳細設計
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#152-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        15.2 取引先マスタ API の実装
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="15.2 取引先マスタ API の実装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#srcmainprotopartnerproto" class="md-nav__link">
    <span class="md-ellipsis">
      
        src/main/proto/partner.proto
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#153" class="md-nav__link">
    <span class="md-ellipsis">
      
        15.3 テスト実装
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#16-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        第16章：トランザクション API の実装
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第16章：トランザクション API の実装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#161-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        16.1 トランザクション API の設計方針
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="16.1 トランザクション API の設計方針">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rpc" class="md-nav__link">
    <span class="md-ellipsis">
      
        RPC パターンの使い分け
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#162-api-protocol-buffers" class="md-nav__link">
    <span class="md-ellipsis">
      
        16.2 受注 API の Protocol Buffers 定義
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="16.2 受注 API の Protocol Buffers 定義">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#srcmainprotoorderproto" class="md-nav__link">
    <span class="md-ellipsis">
      
        src/main/proto/order.proto
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#163" class="md-nav__link">
    <span class="md-ellipsis">
      
        16.3 受注サービス実装（ステータス監視）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#164" class="md-nav__link">
    <span class="md-ellipsis">
      
        16.4 請求サービス実装（双方向ストリーミング）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#165-grpcurl" class="md-nav__link">
    <span class="md-ellipsis">
      
        16.5 grpcurl による動作確認
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#17" class="md-nav__link">
    <span class="md-ellipsis">
      
        第17章：エラーハンドリングとストリーミング
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第17章：エラーハンドリングとストリーミング">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#171-grpc" class="md-nav__link">
    <span class="md-ellipsis">
      
        17.1 gRPC エラーハンドリングの概要
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#172-grpc" class="md-nav__link">
    <span class="md-ellipsis">
      
        17.2 gRPC ステータスコード
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#173" class="md-nav__link">
    <span class="md-ellipsis">
      
        17.3 カスタム例外クラス
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#174" class="md-nav__link">
    <span class="md-ellipsis">
      
        17.4 例外変換インターセプター
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#175" class="md-nav__link">
    <span class="md-ellipsis">
      
        17.5 リトライ設定
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#176" class="md-nav__link">
    <span class="md-ellipsis">
      
        17.6 回路ブレーカー
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#177" class="md-nav__link">
    <span class="md-ellipsis">
      
        17.7 ヘルスチェックサービス
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#178" class="md-nav__link">
    <span class="md-ellipsis">
      
        17.8 フロー制御付きストリームオブザーバー
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-10-d" class="md-nav__link">
    <span class="md-ellipsis">
      
        Part 10-D のまとめ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Part 10-D のまとめ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        実装した機能一覧
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grpc" class="md-nav__link">
    <span class="md-ellipsis">
      
        実装した gRPC サービス
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        アーキテクチャの特徴
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        技術スタック
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      
        API 形式の比較と選択基準
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grpc_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        gRPC を選択する場面
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study2-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究4 GraphQLサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study2-5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究5 AxonCQRS/ESの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_14" >
        
          
          <label class="md-nav__link" for="__nav_1_14" id="__nav_1_14_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 財務会計システム実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_14">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 財務会計システム実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study3-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究1 モノリスサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study3-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究2 JavaFXデスクトップアプリケーションの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study3-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究3 gRPCサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study3-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究4 GraphQLサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study3-5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究5 AxonCQRS/ESの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_15" >
        
          
          <label class="md-nav__link" for="__nav_1_15" id="__nav_1_15_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 生産管理システム実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_15">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 生産管理システム実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study4-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究1 モノリスサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study4-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究2 JavaFXデスクトップアプリケーションの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study4-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究3 gRPCサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study4-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究4 GraphQLサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study4-5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究5 AxonCQRS/ESの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_16" >
        
          
          <label class="md-nav__link" for="__nav_1_16" id="__nav_1_16_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 財務会計システムORM実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_16">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 財務会計システムORM実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter14-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第14章 財務会計システムの全体像【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter15-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第15章 勘定科目の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter16-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第16章 仕訳の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter17-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第17章 自動仕訳の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter18-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第18章 勘定科目残高の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter19-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第19章 赤黒とログの設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter20-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第20章 財務会計データ設計（D社事例）【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter21-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第21章 APIサービスの実装【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter22-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第22章 Axon CQRS/ESの実装【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_17" >
        
          
          <label class="md-nav__link" for="__nav_1_17" id="__nav_1_17_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    付録
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_17">
            <span class="md-nav__icon md-icon"></span>
            
  
    付録
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/er-diagrams.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    A 全体ER図
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/table-definitions.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    B テーブル定義一覧
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/glossary.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    C 用語集
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_18" >
        
          
          <label class="md-nav__link" for="__nav_1_18" id="__nav_1_18_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    データベース
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_18_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_18">
            <span class="md-nav__icon md-icon"></span>
            
  
    データベース
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../assets/schemaspy-output/sms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SchemaSpy ER図（SMS）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../assets/schemaspy-output/fas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SchemaSpy ER図（FAS）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../assets/schemaspy-output/pms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SchemaSpy ER図（PMS）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="3-grpc">実践データベース設計：販売管理システム 研究 3 - gRPC サービスの実装<a class="headerlink" href="#3-grpc" title="Permanent link">&para;</a></h1>
<h2 id="_1">はじめに<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>本研究では、API サーバー構成（第13章）やモノリスサービス（研究 1）とは異なるアプローチとして、<strong>gRPC</strong> による販売管理システムを実装します。Protocol Buffers による高効率なバイナリシリアライゼーションと、HTTP/2 によるストリーミング通信を活用し、高性能なマイクロサービス間通信を実現します。</p>
<p>研究 1 で構築したヘキサゴナルアーキテクチャ（ドメイン層・アプリケーション層）はそのまま共有し、<strong>Input Adapter として gRPC サービス層のみを追加</strong>します。</p>
<hr />
<h2 id="14grpc">第14章：gRPC サーバーの基礎<a class="headerlink" href="#14grpc" title="Permanent link">&para;</a></h2>
<h3 id="141-grpc">14.1 gRPC とは<a class="headerlink" href="#141-grpc" title="Permanent link">&para;</a></h3>
<p>gRPC は Google が開発したオープンソースの高性能 RPC（Remote Procedure Call）フレームワークです。HTTP/2 プロトコルと Protocol Buffers を基盤とし、マイクロサービス間通信に最適化されています。</p>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjgxOXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NDg5cHg7aGVpZ2h0OjgxOXB4O2JhY2tncm91bmQ6I0ZFRkVGRTsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDQ4OSA4MTkiIHdpZHRoPSI0ODlweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjxyZWN0IGZpbGw9IiNGRUZFRkUiIGhlaWdodD0iODE5IiBzdHlsZT0ic3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNDg5IiB4PSIwIiB5PSIwIi8+PCEtLWNsdXN0ZXIgZ1JQQyBBcmNoaXRlY3R1cmUgKD8/Pz8/Pz8/KS0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLXF1YWxpZmllZC1uYW1lPSJnUlBDIEFyY2hpdGVjdHVyZSAuLi4uLi4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSI1IiBpZD0iZW50MDAwMiI+PHBhdGggZD0iTTguNSw2IEwyODMuNzMsNiBBMy43NSwzLjc1IDAgMCAxIDI4Ni4yMyw4LjUgTDI5My4yMywyOC4yOTY5IEw0NzYuNSwyOC4yOTY5IEEyLjUsMi41IDAgMCAxIDQ3OSwzMC43OTY5IEw0NzksNzA3Ljg0IEEyLjUsMi41IDAgMCAxIDQ3Ni41LDcxMC4zNCBMOC41LDcxMC4zNCBBMi41LDIuNSAwIDAgMSA2LDcwNy44NCBMNiw4LjUgQTIuNSwyLjUgMCAwIDEgOC41LDYiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjYiIHgyPSIyOTMuMjMiIHkxPSIyOC4yOTY5IiB5Mj0iMjguMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNzQuMjMiIHg9IjEwIiB5PSIyMC45OTUxIj5nUlBDIEFyY2hpdGVjdHVyZSAoJiMzNjAwOTsmIzIyNzcwOyYjMzE2NDk7JiMyOTcwMjsmIzEyNDcxOyYjMTI0NzM7JiMxMjQ4NjsmIzEyNTEyOyk8L3RleHQ+PC9nPjwhLS1jbHVzdGVyIENsaWVudCBTaWRlLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9ImdSUEMgQXJjaGl0ZWN0dXJlIC4uLi4uLi4uLi4uQ2xpZW50IFNpZGUiIGRhdGEtc291cmNlLWxpbmU9IjciIGlkPSJlbnQwMDAzIj48cGF0aCBkPSJNMTUyLjUsNDkgTDIzOC43OTg4LDQ5IEEzLjc1LDMuNzUgMCAwIDEgMjQxLjI5ODgsNTEuNSBMMjQ4LjI5ODgsNzEuMjk2OSBMMzg3LjUsNzEuMjk2OSBBMi41LDIuNSAwIDAgMSAzOTAsNzMuNzk2OSBMMzkwLDIyMS4yOCBBMi41LDIuNSAwIDAgMSAzODcuNSwyMjMuNzggTDE1Mi41LDIyMy43OCBBMi41LDIuNSAwIDAgMSAxNTAsMjIxLjI4IEwxNTAsNTEuNSBBMi41LDIuNSAwIDAgMSAxNTIuNSw0OSIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB4MT0iMTUwIiB4Mj0iMjQ4LjI5ODgiIHkxPSI3MS4yOTY5IiB5Mj0iNzEuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4NS4yOTg4IiB4PSIxNTQiIHk9IjYzLjk5NTEiPkNsaWVudCBTaWRlPC90ZXh0PjwvZz48IS0tY2x1c3RlciBTZXJ2ZXIgU2lkZS0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLXF1YWxpZmllZC1uYW1lPSJnUlBDIEFyY2hpdGVjdHVyZSAuLi4uLi4uLi4uLlNlcnZlciBTaWRlIiBkYXRhLXNvdXJjZS1saW5lPSIxNiIgaWQ9ImVudDAwMDUiPjxwYXRoIGQ9Ik0zMi41LDI4Ny43OCBMMTI0Ljc4MDMsMjg3Ljc4IEEzLjc1LDMuNzUgMCAwIDEgMTI3LjI4MDMsMjkwLjI4IEwxMzQuMjgwMywzMTAuMDc2OSBMMjcxLjUsMzEwLjA3NjkgQTIuNSwyLjUgMCAwIDEgMjc0LDMxMi41NzY5IEwyNzQsNDYwLjA2IEEyLjUsMi41IDAgMCAxIDI3MS41LDQ2Mi41NiBMMzIuNSw0NjIuNTYgQTIuNSwyLjUgMCAwIDEgMzAsNDYwLjA2IEwzMCwyOTAuMjggQTIuNSwyLjUgMCAwIDEgMzIuNSwyODcuNzgiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjMwIiB4Mj0iMTM0LjI4MDMiIHkxPSIzMTAuMDc2OSIgeTI9IjMxMC4wNzY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjkxLjI4MDMiIHg9IjM0IiB5PSIzMDIuNzc1MSI+U2VydmVyIFNpZGU8L3RleHQ+PC9nPjwhLS1jbHVzdGVyIFNoYXJlZC0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLXF1YWxpZmllZC1uYW1lPSJnUlBDIEFyY2hpdGVjdHVyZSAuLi4uLi4uLi4uLlNoYXJlZCIgZGF0YS1zb3VyY2UtbGluZT0iMjUiIGlkPSJlbnQwMDA3Ij48cGF0aCBkPSJNMTU4LjUsNTExLjU2IEwyMTUuNDE4LDUxMS41NiBBMy43NSwzLjc1IDAgMCAxIDIxNy45MTgsNTE0LjA2IEwyMjQuOTE4LDUzMy44NTY5IEwzMjkuNSw1MzMuODU2OSBBMi41LDIuNSAwIDAgMSAzMzIsNTM2LjM1NjkgTDMzMiw2ODMuODQgQTIuNSwyLjUgMCAwIDEgMzI5LjUsNjg2LjM0IEwxNTguNSw2ODYuMzQgQTIuNSwyLjUgMCAwIDEgMTU2LDY4My44NCBMMTU2LDUxNC4wNiBBMi41LDIuNSAwIDAgMSAxNTguNSw1MTEuNTYiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjE1NiIgeDI9IjIyNC45MTgiIHkxPSI1MzMuODU2OSIgeTI9IjUzMy44NTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1LjkxOCIgeD0iMTYwIiB5PSI1MjYuNTU1MSI+U2hhcmVkPC90ZXh0PjwvZz48IS0tY2xhc3MgY2xpZW50LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iZ1JQQyBBcmNoaXRlY3R1cmUgLi4uLi4uLi4uLi5DbGllbnQgU2lkZS5jbGllbnQiIGRhdGEtc291cmNlLWxpbmU9IjgiIGlkPSJlbnQwMDA0Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjEyMy43ODEzIiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIyMDcuOTk5MiIgeD0iMTY2IiB5PSI4NCIvPjxlbGxpcHNlIGN4PSIyMDUuMzk3NiIgY3k9IjEwNS4yOTY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0yMDguMzY2NCwxMTAuOTM3NSBRMjA3Ljc4ODMsMTExLjIzNDQgMjA3LjE0NzYsMTExLjM3NSBRMjA2LjUwNywxMTEuNTMxMyAyMDUuODAzOSwxMTEuNTMxMyBRMjAzLjMwMzksMTExLjUzMTMgMjAxLjk3NTgsMTA5Ljg5MDYgUTIwMC42NjMzLDEwOC4yMzQ0IDIwMC42NjMzLDEwNS4xMDk0IFEyMDAuNjYzMywxMDEuOTg0NCAyMDEuOTc1OCwxMDAuMzI4MSBRMjAzLjMwMzksOTguNjcxOSAyMDUuODAzOSw5OC42NzE5IFEyMDYuNTA3LDk4LjY3MTkgMjA3LjE0NzYsOTguODI4MSBRMjA3LjgwMzksOTguOTg0NCAyMDguMzY2NCw5OS4yODEzIEwyMDguMzY2NCwxMDIgUTIwNy43NDE0LDEwMS40MjE5IDIwNy4xNDc2LDEwMS4xNTYzIFEyMDYuNTUzOSwxMDAuODc1IDIwNS45Mjg5LDEwMC44NzUgUTIwNC41ODUxLDEwMC44NzUgMjAzLjg5NzYsMTAxLjk1MzEgUTIwMy4yMTAxLDEwMy4wMTU2IDIwMy4yMTAxLDEwNS4xMDk0IFEyMDMuMjEwMSwxMDcuMjAzMSAyMDMuODk3NiwxMDguMjgxMyBRMjA0LjU4NTEsMTA5LjM0MzggMjA1LjkyODksMTA5LjM0MzggUTIwNi41NTM5LDEwOS4zNDM4IDIwNy4xNDc2LDEwOS4wNzgxIFEyMDcuNzQxNCwxMDguNzk2OSAyMDguMzY2NCwxMDguMjE4OCBMMjA4LjM2NjQsMTEwLjkzNzUgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4MS44MTI1IiB4PSIyNDQuODA0MiIgeT0iMTAxLjk5NTEiPmdSUEMgQ2xpZW50PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyMS43ODIyIiB4PSIyMjQuODE5MyIgeT0iMTE4LjI5MiI+KEdlbmVyYXRlZCBTdHViKTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxNjciIHgyPSIzNzIuOTk5MiIgeTE9IjEyNi41OTM4IiB5Mj0iMTI2LjU5MzgiLz48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IlBSSVZBVEVfRklFTEQiPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjE3NCIgeT0iMTM3LjI0MjIiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjAuMzk1NCIgeD0iMTg2IiB5PSIxNDMuNTg4OSI+JiMyMTMzNjsmIzM4OTE3OyBSUEM8L3RleHQ+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJQUklWQVRFX0ZJRUxEIj48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIxNzQiIHk9IjE1My41MzkxIi8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1My45OTkzIiB4PSIxODYiIHk9IjE1OS44ODU3Ij4mIzEyNDY5OyYjMTI1NDA7JiMxMjQ5NjsmIzEyNTQwOyYjMTI0NzM7JiMxMjQ4ODsmIzEyNTIyOyYjMTI1NDA7JiMxMjUxMTsmIzEyNTMxOyYjMTI0NjQ7PC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFJJVkFURV9GSUVMRCI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMTc0IiB5PSIxNjkuODM1OSIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxODEuOTk5MiIgeD0iMTg2IiB5PSIxNzYuMTgyNiI+JiMxMjQ2MzsmIzEyNTIxOyYjMTI0NTI7JiMxMjQ1MDsmIzEyNTMxOyYjMTI0ODg7JiMxMjQ3MzsmIzEyNDg4OyYjMTI1MjI7JiMxMjU0MDsmIzEyNTExOyYjMTI1MzE7JiMxMjQ2NDs8L3RleHQ+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJQUklWQVRFX0ZJRUxEIj48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIxNzQiIHk9IjE4Ni4xMzI4Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzOS45OTk0IiB4PSIxODYiIHk9IjE5Mi40Nzk1Ij4mIzIxNDUyOyYjMjYwNDE7JiMyMTUyMTsmIzEyNDczOyYjMTI0ODg7JiMxMjUyMjsmIzEyNTQwOyYjMTI1MTE7JiMxMjUzMTsmIzEyNDY0OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxNjciIHgyPSIzNzIuOTk5MiIgeTE9IjE5OS43ODEzIiB5Mj0iMTk5Ljc4MTMiLz48L2c+PCEtLWNsYXNzIHNlcnZlci0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9ImdSUEMgQXJjaGl0ZWN0dXJlIC4uLi4uLi4uLi4uU2VydmVyIFNpZGUuc2VydmVyIiBkYXRhLXNvdXJjZS1saW5lPSIxNyIgaWQ9ImVudDAwMDYiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTIzLjc4MTMiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjIxMS4zNzUiIHg9IjQ2LjMxIiB5PSIzMjIuNzgiLz48ZWxsaXBzZSBjeD0iNjEuMzEiIGN5PSIzNDQuMDc2OSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNNjQuMjc4OCwzNDkuNzE3NSBRNjMuNzAwNiwzNTAuMDE0NCA2My4wNiwzNTAuMTU1IFE2Mi40MTk0LDM1MC4zMTEzIDYxLjcxNjMsMzUwLjMxMTMgUTU5LjIxNjMsMzUwLjMxMTMgNTcuODg4MSwzNDguNjcwNiBRNTYuNTc1NiwzNDcuMDE0NCA1Ni41NzU2LDM0My44ODk0IFE1Ni41NzU2LDM0MC43NjQ0IDU3Ljg4ODEsMzM5LjEwODEgUTU5LjIxNjMsMzM3LjQ1MTkgNjEuNzE2MywzMzcuNDUxOSBRNjIuNDE5NCwzMzcuNDUxOSA2My4wNiwzMzcuNjA4MSBRNjMuNzE2MywzMzcuNzY0NCA2NC4yNzg4LDMzOC4wNjEzIEw2NC4yNzg4LDM0MC43OCBRNjMuNjUzOCwzNDAuMjAxOSA2My4wNiwzMzkuOTM2MyBRNjIuNDY2MywzMzkuNjU1IDYxLjg0MTMsMzM5LjY1NSBRNjAuNDk3NSwzMzkuNjU1IDU5LjgxLDM0MC43MzMxIFE1OS4xMjI1LDM0MS43OTU2IDU5LjEyMjUsMzQzLjg4OTQgUTU5LjEyMjUsMzQ1Ljk4MzEgNTkuODEsMzQ3LjA2MTMgUTYwLjQ5NzUsMzQ4LjEyMzggNjEuODQxMywzNDguMTIzOCBRNjIuNDY2MywzNDguMTIzOCA2My4wNiwzNDcuODU4MSBRNjMuNjUzOCwzNDcuNTc2OSA2NC4yNzg4LDM0Ni45OTg4IEw2NC4yNzg4LDM0OS43MTc1IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODcuMTkyNCIgeD0iMTIxLjQwMTMiIHk9IjM0MC43NzUxIj5nUlBDIFNlcnZlcjwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNzkuMzc1IiB4PSI3NS4zMSIgeT0iMzU3LjA3MiI+KGdycGMtc3ByaW5nLWJvb3Qtc3RhcnRlcik8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iNDcuMzEiIHgyPSIyNTYuNjg1IiB5MT0iMzY1LjM3MzgiIHkyPSIzNjUuMzczOCIvPjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFJJVkFURV9GSUVMRCI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iNTQuMzEiIHk9IjM3Ni4wMjIyIi8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwNS40NTEyIiB4PSI2Ni4zMSIgeT0iMzgyLjM2ODkiPlByb2R1Y3RTZXJ2aWNlPC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFJJVkFURV9GSUVMRCI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iNTQuMzEiIHk9IjM5Mi4zMTkxIi8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwMy4yNSIgeD0iNjYuMzEiIHk9IjM5OC42NjU3Ij5QYXJ0bmVyU2VydmljZTwvdGV4dD48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IlBSSVZBVEVfRklFTEQiPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjU0LjMxIiB5PSI0MDguNjE1OSIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5MS43NzI1IiB4PSI2Ni4zMSIgeT0iNDE0Ljk2MjYiPk9yZGVyU2VydmljZTwvdGV4dD48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IlBSSVZBVEVfRklFTEQiPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjU0LjMxIiB5PSI0MjQuOTEyOCIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTguODkwNiIgeD0iNjYuMzEiIHk9IjQzMS4yNTk1Ij5TaGlwbWVudFNlcnZpY2U8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iNDcuMzEiIHgyPSIyNTYuNjg1IiB5MT0iNDM4LjU2MTMiIHkyPSI0MzguNTYxMyIvPjwvZz48IS0tY2xhc3MgcHJvdG8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJnUlBDIEFyY2hpdGVjdHVyZSAuLi4uLi4uLi4uLlNoYXJlZC5wcm90byIgZGF0YS1zb3VyY2UtbGluZT0iMjYiIGlkPSJlbnQwMDA4Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjEyMy43ODEzIiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNDMuNDE4OSIgeD0iMTcyLjI5IiB5PSI1NDYuNTYiLz48ZWxsaXBzZSBjeD0iMTg3LjI5IiBjeT0iNTY3Ljg1NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTE5MC4yNTg4LDU3My40OTc1IFExODkuNjgwNiw1NzMuNzk0NCAxODkuMDQsNTczLjkzNSBRMTg4LjM5OTQsNTc0LjA5MTMgMTg3LjY5NjMsNTc0LjA5MTMgUTE4NS4xOTYzLDU3NC4wOTEzIDE4My44NjgxLDU3Mi40NTA2IFExODIuNTU1Niw1NzAuNzk0NCAxODIuNTU1Niw1NjcuNjY5NCBRMTgyLjU1NTYsNTY0LjU0NDQgMTgzLjg2ODEsNTYyLjg4ODEgUTE4NS4xOTYzLDU2MS4yMzE5IDE4Ny42OTYzLDU2MS4yMzE5IFExODguMzk5NCw1NjEuMjMxOSAxODkuMDQsNTYxLjM4ODEgUTE4OS42OTYzLDU2MS41NDQ0IDE5MC4yNTg4LDU2MS44NDEzIEwxOTAuMjU4OCw1NjQuNTYgUTE4OS42MzM4LDU2My45ODE5IDE4OS4wNCw1NjMuNzE2MyBRMTg4LjQ0NjMsNTYzLjQzNSAxODcuODIxMyw1NjMuNDM1IFExODYuNDc3NSw1NjMuNDM1IDE4NS43OSw1NjQuNTEzMSBRMTg1LjEwMjUsNTY1LjU3NTYgMTg1LjEwMjUsNTY3LjY2OTQgUTE4NS4xMDI1LDU2OS43NjMxIDE4NS43OSw1NzAuODQxMyBRMTg2LjQ3NzUsNTcxLjkwMzggMTg3LjgyMTMsNTcxLjkwMzggUTE4OC40NDYzLDU3MS45MDM4IDE4OS4wNCw1NzEuNjM4MSBRMTg5LjYzMzgsNTcxLjM1NjkgMTkwLjI1ODgsNTcwLjc3ODggTDE5MC4yNTg4LDU3My40OTc1IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTExLjQxODkiIHg9IjIwMS4yOSIgeT0iNTY0LjU1NTEiPlByb3RvY29sIEJ1ZmZlcnM8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODUuNzAyMSIgeD0iMjE0LjE0ODQiIHk9IjU4MC44NTIiPigucHJvdG8gZmlsZXMpPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjE3My4yOSIgeDI9IjMxNC43MDg5IiB5MT0iNTg5LjE1MzgiIHkyPSI1ODkuMTUzOCIvPjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFJJVkFURV9GSUVMRCI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMTgwLjI5IiB5PSI1OTkuODAyMiIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5NS44NjcyIiB4PSIxOTIuMjkiIHk9IjYwNi4xNDg5Ij5wcm9kdWN0LnByb3RvPC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFJJVkFURV9GSUVMRCI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMTgwLjI5IiB5PSI2MTYuMDk5MSIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5My42NjYiIHg9IjE5Mi4yOSIgeT0iNjIyLjQ0NTciPnBhcnRuZXIucHJvdG88L3RleHQ+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJQUklWQVRFX0ZJRUxEIj48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIxODAuMjkiIHk9IjYzMi4zOTU5Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc5LjI5IiB4PSIxOTIuMjkiIHk9IjYzOC43NDI2Ij5vcmRlci5wcm90bzwvdGV4dD48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IlBSSVZBVEVfRklFTEQiPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjE4MC4yOSIgeT0iNjQ4LjY5MjgiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAyLjY4OTUiIHg9IjE5Mi4yOSIgeT0iNjU1LjAzOTUiPmNvbW1vbi5wcm90bzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxNzMuMjkiIHgyPSIzMTQuNzA4OSIgeTE9IjY2Mi4zNDEzIiB5Mj0iNjYyLjM0MTMiLz48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iR01OMTIiIGRhdGEtc291cmNlLWxpbmU9IjQwIiBpZD0iZW50MDAxMyI+PHBhdGggZD0iTTExNi41LDc1Ny4zNCBMMTE2LjUsODEyLjczODQgQTAsMCAwIDAgMCAxMTYuNSw4MTIuNzM4NCBMMzcxLjUwMDMsODEyLjczODQgQTAsMCAwIDAgMCAzNzEuNTAwMyw4MTIuNzM4NCBMMzcxLjUwMDMsNzY3LjM0IEwzNjEuNTAwMyw3NTcuMzQgTDI0OCw3NTcuMzQgTDI0NCw2NzAuNTEgTDI0MCw3NTcuMzQgTDExNi41LDc1Ny4zNCBBMCwwIDAgMCAwIDExNi41LDc1Ny4zNCIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTM2MS41MDAzLDc1Ny4zNCBMMzYxLjUwMDMsNzY3LjM0IEwzNzEuNTAwMyw3NjcuMzQgTDM2MS41MDAzLDc1Ny4zNCIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA0LjAwMDEiIHg9IjEyMi41IiB5PSI3NzQuNDA2OSI+JiMxMjQ3MzsmIzEyNDYxOyYjMTI1NDA7JiMxMjUxMDsmIzM5MzY2OyYjMjEyMDU7JiMzODI4MzsmIzMwMzMwOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxOTUuMDAwMiIgeD0iMTIyLjUiIHk9Ijc4OS41Mzk3Ij4mIzM1MzI4OyYjMzU0ODY7JiMyMDAxMzsmIzMxNDM1OyYjMTIzOTQ7JiMxMjQ1MjsmIzEyNTMxOyYjMTI0Nzk7JiMxMjU0MDsmIzEyNTAxOyYjMTI0NTU7JiMxMjU0MDsmIzEyNDczOyYjMjM0NTA7JiMzMjY4MTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjM0LjAwMDMiIHg9IjEyMi41IiB5PSI4MDQuNjcyNSI+JiMzOTY0MDsmIzIxMTc3OyYjMjk1NzU7JiMxMjM5NDsmIzEyNDk2OyYjMTI0NTI7JiMxMjQ5MDsmIzEyNTIyOyYjMTI0NzE7JiMxMjUyMjsmIzEyNDUwOyYjMTI1MjE7JiMxMjQ1MjsmIzEyNDc2OyYjMTI1NDA7JiMxMjQ3MTsmIzEyNTE5OyYjMTI1MzE7PC90ZXh0PjwvZz48IS0tbGluayBjbGllbnQgdG8gcHJvdG8tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwNCIgZGF0YS1lbnRpdHktMj0iZW50MDAwOCIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjM1IiBpZD0ibG5rOSI+PHBhdGggY29kZUxpbmU9IjM1IiBkPSJNMzEwLjc0LDIwOC4xOCBDMzE1Ljc5LDIxOC4zNyAzMjAuMTcsMjI5LjEgMzIzLDIzOS43OCBDMzUyLjE0LDM0OS42NiAzNTcuNCwzODcuMjEgMzIzLDQ5NS41NiBDMzE3LjM1LDUxMy4zNSAzMTEuMTE3Myw1MjUuNzkwOCAzMDAuNTA3Myw1NDEuMzcwOCIgZmlsbD0ibm9uZSIgaWQ9ImNsaWVudC10by1wcm90byIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjk3LjEzLDU0Ni4zMywzMDUuNTAyLDU0MS4xNDI2LDI5OS45NDQ0LDU0Mi4xOTczLDI5OC44ODk3LDUzNi42Mzk2LDI5Ny4xMyw1NDYuMzMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzMuODY1OCIgeD0iMzQ3Ljg3IiB5PSIzODkuMjM2OSI+LnByb3RvICYjMTIzNjM7JiMxMjQyNTsmIzEyNDczOyYjMTI0Nzk7JiMxMjUwMjsmIzI5OTgzOyYjMjUxMDQ7PC90ZXh0PjwvZz48IS0tbGluayBzZXJ2ZXIgdG8gcHJvdG8tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwNiIgZGF0YS1lbnRpdHktMj0iZW50MDAwOCIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjM2IiBpZD0ibG5rMTAiPjxwYXRoIGNvZGVMaW5lPSIzNiIgZD0iTTE0OC45LDQ0Ni44OCBDMTQ5LjgsNDYzLjEgMTUyLjM2LDQ4MC4zMyAxNTgsNDk1LjU2IEMxNjQuNiw1MTMuMzYgMTcxLjUxMjEsNTI1LjgxNjEgMTgyLjkzMjEsNTQxLjI1NjEiIGZpbGw9Im5vbmUiIGlkPSJzZXJ2ZXItdG8tcHJvdG8iIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE4Ni41LDU0Ni4wOCwxODQuMzY0LDUzNi40NjU1LDE4My41MjY3LDU0Mi4wNjAxLDE3Ny45MzIyLDU0MS4yMjI4LDE4Ni41LDU0Ni4wOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1OS44NjU5IiB4PSIxNTkiIHk9IjQ5MS42MjY5Ij4ucHJvdG8gJiMxMjM2MzsmIzEyNDI1OyYjMTI0NzM7JiMxMjQ2NTsmIzEyNTIzOyYjMTI0ODg7JiMxMjUzMTsmIzI5OTgzOyYjMjUxMDQ7PC90ZXh0PjwvZz48IS0tbGluayBjbGllbnQgdG8gc2VydmVyLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDQiIGRhdGEtZW50aXR5LTI9ImVudDAwMDYiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSIzNyIgaWQ9ImxuazExIj48cGF0aCBjb2RlTGluZT0iMzciIGQ9Ik0yMjQuMTUyMSwyMTMuMTIzIEMyMTcuNjQyMSwyMjMuNTAzIDIxNC40NywyMjkuMjUgMjA5LDIzOS43OCBDMTk1LjMxLDI2Ni4xMyAxODQuOTI4MiwyOTAuOTIyNiAxNzUuMTQ4MiwzMTYuOTgyNiIgZmlsbD0ibm9uZSIgaWQ9ImNsaWVudC1zZXJ2ZXIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjIyNy4zNCwyMDguMDQsMjE5LjE2OTQsMjEzLjUzOTMsMjI0LjY4MzQsMjEyLjI3NTksMjI1Ljk0NjgsMjE3Ljc4OTgsMjI3LjM0LDIwOC4wNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTczLjA0LDMyMi42LDE3OS45NDcyLDMxNS41NzkzLDE3NC43OTY4LDMxNy45MTg4LDE3Mi40NTczLDMxMi43Njg0LDE3My4wNCwzMjIuNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ2LjE0NzUiIHg9IjI0MS40MDE5IiB5PSIyNTIuODQ2OSI+SFRUUC8yPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwOC45NTEyIiB4PSIyMTAiIHk9IjI2Ny45Nzk3Ij4oQmluYXJ5IFByb3RvY29sKTwvdGV4dD48L2c+PD9wbGFudHVtbC1zcmMgWExEVFFuRDE1N3NWTnA2a0ItdDNBbFdlOGhHWHJXVkhxRUpIYnl0a1BCQ3FjTGJjOXVBS1dqdDVNMWlfOGpaR3pnNmpMUVg5UURLNnFLWW5Gc1JTUmw4bGRCa3BRS2dub0NCMEZORkVsVVZVa05sRDhITUY0aG9PcHZOYzdZdXlvNkV4UFdLMUdpNklIdHNCTXRMU2prbWJieEM2VE5BaW5aWS1WWXlGN3FBLWtoMVNXV3J0aVAzM1N6b2tVZUJPZWk0OWRYYVRULUVGbnlkSFh3SlRiRTRGNkd2YnI5Skh0Z28xYm95ZVNwTUZLODZCZGFGV09rZjJ2ekpOWi1kQzBnNjRNdTh1azJXUVBQTjQyZkpITEJrQ0oxb190WHBsRlNUQWVXOFBWZlZIWU9wUVM0QlRESGRyS2NITkhXQ1BWYXF2TnNKS2JVNGQ2VXUzZzNYTkNFRXRoeXV3bXhaenhqLTQ1VkxEc29hSV9lSm1BemxIcndlVGJfa3M2VlpTZXd2UFBhb09XUjJ1ODVtdDVrV2lxNVkxQ3dUWDJuMXdEVzUweVRHZWZpMFp4Ym1DWXJORmh3a25KOTFCX2dlTTl5dWJRd2c2TzNRaHVWYjZmSzl1ZUZwVHkwNzM1UXo2MGtyOTBzMzlydk9xMU1CanczbmNPRVd5aWJjenBjV01oY1d4c1NFUHZqcWl4TXJpUDFOYlFhazZCczdLdVFjQ0VpZHh0UkVyamU2b1lWbjd5S3I2X1ZJOTFYRFRMa2FFMkJDU0lkY19MMmhTbEFOUWRGVWVuUF9Zb0cxYzNPR2U0bUlOY0gyaVpiYjVMcURmemlGcXROVjYxeXN1ako3a2o5QWpOc1pxLVRjZWpfRmR2czdJUnlkTDdrbUpoQ0xmSWpzR3VPNVVtVlhlRV9kVEhVRi1QaG0tSkR3eTBBZlFKczJsbXFBZl9tRkVfU2JBZGdHbzFJaHowMTdnT0IzcjVtMDA/PjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<p><strong>gRPC の主な特徴：</strong></p>
<table>
<thead>
<tr>
<th>特徴</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>HTTP/2</td>
<td>多重化、ヘッダー圧縮、バイナリフレーミング</td>
</tr>
<tr>
<td>Protocol Buffers</td>
<td>高速なバイナリシリアライゼーション</td>
</tr>
<tr>
<td>多言語サポート</td>
<td>Java, Go, Python, C#, Node.js 等</td>
</tr>
<tr>
<td>ストリーミング</td>
<td>4つの RPC パターンをサポート</td>
</tr>
<tr>
<td>デッドライン</td>
<td>タイムアウト管理の組み込みサポート</td>
</tr>
<tr>
<td>認証</td>
<td>TLS/SSL、トークンベース認証のサポート</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="142-rest-api-graphql">14.2 REST API / GraphQL との比較<a class="headerlink" href="#142-rest-api-graphql" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjIxNXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MTI1NnB4O2hlaWdodDoyMTVweDtiYWNrZ3JvdW5kOiNGRUZFRkU7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxMjU2IDIxNSIgd2lkdGg9IjEyNTZweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjxyZWN0IGZpbGw9IiNGRUZFRkUiIGhlaWdodD0iMjE1IiBzdHlsZT0ic3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTI1NiIgeD0iMCIgeT0iMCIvPjwhLS1jbHVzdGVyIHJlc3QtLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1xdWFsaWZpZWQtbmFtZT0icmVzdCIgZGF0YS1zb3VyY2UtbGluZT0iMyIgaWQ9ImVudDAwMDIiPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMjAxLjU2IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMzM3IiB4PSI3IiB5PSI4LjI3Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjcxLjE1NTMiIHg9IjEzOS45MjI0IiB5PSIyMy4yNjUxIj5SRVNUIEFQSTwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgZ3JwYy0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLXF1YWxpZmllZC1uYW1lPSJncnBjIiBkYXRhLXNvdXJjZS1saW5lPSI5IiBpZD0iZW50MDAwNiI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIyMDIuODMiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIzMjIiIHg9IjU3MCIgeT0iNyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MS4zMzY5IiB4PSI3MTAuMzMxNSIgeT0iMjEuOTk1MSI+Z1JQQzwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgZ3JhcGhxbC0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLXF1YWxpZmllZC1uYW1lPSJncmFwaHFsIiBkYXRhLXNvdXJjZS1saW5lPSIxNSIgaWQ9ImVudDAwMTAiPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iOTYuMDUiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIyNTYiIHg9IjkzMiIgeT0iOS4yOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OC42NTMzIiB4PSIxMDI1LjY3MzMiIHk9IjI0LjI3NTEiPkdyYXBoUUw8L3RleHQ+PC9nPjwhLS1lbnRpdHkgSFRUUC8xLjEgb3IgMi0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9InJlc3QuSFRUUC4xLjEgb3IgMiIgZGF0YS1zb3VyY2UtbGluZT0iNCIgaWQ9ImVudDAwMDMiPjxlbGxpcHNlIGN4PSI5Ni45OTkxIiBjeT0iNjYuNzk5OCIgZmlsbD0iI0YxRjFGMSIgcng9IjY1LjY0OTEiIHJ5PSIxNS41Mjk4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5NS4xODM2IiB4PSI0OS40MDczIiB5PSI3MS40NDgyIj5IVFRQLzEuMSBvciAyPC90ZXh0PjwvZz48IS0tZW50aXR5IEpTT04vWE1MLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0icmVzdC5KU09OLlhNTCIgZGF0YS1zb3VyY2UtbGluZT0iNSIgaWQ9ImVudDAwMDQiPjxlbGxpcHNlIGN4PSIyNDkuMDA0MiIgY3k9IjY2LjgwMzYiIGZpbGw9IiNGMUYxRjEiIHJ4PSI1MS41NzQyIiByeT0iMTQuNTIzNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjguNjk0MyIgeD0iMjE0LjY1NzEiIHk9IjcxLjQ1MjEiPkpTT04vWE1MPC90ZXh0PjwvZz48IS0tZW50aXR5IE9wZW5BUEktLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJyZXN0Lk9wZW5BUEkiIGRhdGEtc291cmNlLWxpbmU9IjYiIGlkPSJlbnQwMDA1Ij48ZWxsaXBzZSBjeD0iOTcuMDAxOSIgY3k9IjE3MS4zMTM2IiBmaWxsPSIjRjFGMUYxIiByeD0iNDUuMTAxOSIgcnk9IjE0LjUyMzYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU5LjU0MSIgeD0iNjcuMjMxMyIgeT0iMTc1Ljk2MjEiPk9wZW5BUEk8L3RleHQ+PC9nPjwhLS1lbnRpdHkgSFRUUC8yLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iZ3JwYy5IVFRQLjIiIGRhdGEtc291cmNlLWxpbmU9IjEwIiBpZD0iZW50MDAwNyI+PGVsbGlwc2UgY3g9IjYzMi4wMDEzIiBjeT0iNjYuODAzNiIgZmlsbD0iI0YxRjFGMSIgcng9IjM4LjE0MTMiIHJ5PSIxNC41MjM2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0OS42OTczIiB4PSI2MDcuMTUyNiIgeT0iNzEuNDUyMSI+SFRUUC8yPC90ZXh0PjwvZz48IS0tZW50aXR5IFByb3RvY29sIEJ1ZmZlcnMtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJncnBjLlByb3RvY29sIEJ1ZmZlcnMiIGRhdGEtc291cmNlLWxpbmU9IjExIiBpZD0iZW50MDAwOCI+PGVsbGlwc2UgY3g9Ijc3Ni45OTc5IiBjeT0iNjYuODAzNiIgZmlsbD0iI0YxRjFGMSIgcng9IjcyLjAxNzkiIHJ5PSIxNi44MDM2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTEuNDE4OSIgeD0iNzIxLjI4ODQiIHk9IjcxLjQ1MiI+UHJvdG9jb2wgQnVmZmVyczwvdGV4dD48L2c+PCEtLWVudGl0eSAucHJvdG8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJncnBjLi5wcm90byIgZGF0YS1zb3VyY2UtbGluZT0iMTIiIGlkPSJlbnQwMDA5Ij48ZWxsaXBzZSBjeD0iNjMxLjk5NTUiIGN5PSIxNzEuMzEzNiIgZmlsbD0iI0YxRjFGMSIgcng9IjMyLjQ5NTUiIHJ5PSIxNC41MjM2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MS43MTI5IiB4PSI2MTEuMTM5IiB5PSIxNzUuOTYyMSI+LnByb3RvPC90ZXh0PjwvZz48IS0tZW50aXR5IEpTT04tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJncmFwaHFsLkpTT04iIGRhdGEtc291cmNlLWxpbmU9IjE3IiBpZD0iZW50MDAxMSI+PGVsbGlwc2UgY3g9Ijk4My4wMDA3IiBjeT0iNjYuODAzNiIgZmlsbD0iI0YxRjFGMSIgcng9IjI3LjQwMDciIHJ5PSIxNC41MjM2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIzNC41MDc4IiB4PSI5NjUuNzQ2OCIgeT0iNzEuNDUyMSI+SlNPTjwvdGV4dD48L2c+PCEtLWVudGl0eSAuZ3JhcGhxbHMtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJncmFwaHFsLi5ncmFwaHFscyIgZGF0YS1zb3VyY2UtbGluZT0iMTgiIGlkPSJlbnQwMDEyIj48ZWxsaXBzZSBjeD0iMTA5NC45OTY5IiBjeT0iNjYuODAzNiIgZmlsbD0iI0YxRjFGMSIgcng9IjQ5LjMxNjkiIHJ5PSIxNC41MjM2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2NS41MDIiIHg9IjEwNjIuMjQ1OSIgeT0iNzEuNDUyMSI+LmdyYXBocWxzPC90ZXh0PjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJHTU4xMyIgZGF0YS1zb3VyY2UtbGluZT0iMjIiIGlkPSJlbnQwMDE0Ij48cGF0aCBkPSJNMzY4LjUsMTQzLjYxIEwzNjguNSwxOTkuMDA4NCBMNTQ1LjUwMDIsMTk5LjAwODQgTDU0NS41MDAyLDE1My42MSBMNTM1LjUwMDIsMTQzLjYxIEwzNjguNSwxNDMuNjEiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik01MzUuNTAwMiwxNDMuNjEgTDUzNS41MDAyLDE1My42MSBMNTQ1LjUwMDIsMTUzLjYxIEw1MzUuNTAwMiwxNDMuNjEiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3OC4wMDAxIiB4PSIzNzQuNSIgeT0iMTYwLjY3NjkiPiYjMjc3MjY7JiMyOTk5MjsmIzI0NjE1OyYjMTIzNjQ7JiMzOTY0MDsmIzEyMzU2OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTYuMDAwMiIgeD0iMzc0LjUiIHk9IjE3NS44MDk3Ij4mIzEyNTAyOyYjMTI1MjE7JiMxMjQ1NDsmIzEyNDcwOyYjMzA0NTI7JiMyNTUwOTsmIzEyNDUwOyYjMTI0NjM7JiMxMjQ3NTsmIzEyNDczOyYjMjE0ODc7JiMzMzAyMTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA0LjAwMDEiIHg9IjM3NC41IiB5PSIxOTAuOTQyNSI+JiMyMDE1NDsmIzM4MjkxOyYjMTIzNjQ7JiMzNTUwMTsmIzEyNDE1OyYjMTI0MjA7JiMxMjM3NzsmIzEyMzU2OzwvdGV4dD48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iR01OMTYiIGRhdGEtc291cmNlLWxpbmU9IjI4IiBpZD0iZW50MDAxNyI+PHBhdGggZD0iTTkxNi41LDE0My42MSBMOTE2LjUsMTk5LjAwODQgTDEwNjcuNTAwMiwxOTkuMDA4NCBMMTA2Ny41MDAyLDE1My42MSBMMTA1Ny41MDAyLDE0My42MSBMOTE2LjUsMTQzLjYxIiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNMTA1Ny41MDAyLDE0My42MSBMMTA1Ny41MDAyLDE1My42MSBMMTA2Ny41MDAyLDE1My42MSBMMTA1Ny41MDAyLDE0My42MSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjM5IiB4PSI5MjIuNSIgeT0iMTYwLjY3NjkiPiYjMzk2NDA7JiMyNDYxNTsmIzMzMDIxOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzAuMDAwMiIgeD0iOTIyLjUiIHk9IjE3NS44MDk3Ij4mIzEyNTEwOyYjMTI0NTI7JiMxMjQ2MzsmIzEyNTI1OyYjMTI0Njk7JiMxMjU0MDsmIzEyNDk5OyYjMTI0NzM7JiMyMTUyMTsmIzEyMzY5OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIzOSIgeD0iOTIyLjUiIHk9IjE5MC45NDI1Ij4mIzIyNDExOyYjMjM0MzM7JiMyMDg0MDs8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkdNTjE5IiBkYXRhLXNvdXJjZS1saW5lPSIzNCIgaWQ9ImVudDAwMjAiPjxwYXRoIGQ9Ik0xMTExLDE0My42MSBMMTExMSwxOTkuMDA4NCBMMTI0OS4wMDAxLDE5OS4wMDg0IEwxMjQ5LjAwMDEsMTUzLjYxIEwxMjM5LjAwMDEsMTQzLjYxIEwxMTExLDE0My42MSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTEyMzkuMDAwMSwxNDMuNjEgTDEyMzkuMDAwMSwxNTMuNjEgTDEyNDkuMDAwMSwxNTMuNjEgTDEyMzkuMDAwMSwxNDMuNjEiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3OC4wMDAxIiB4PSIxMTE3IiB5PSIxNjAuNjc2OSI+JiMyNjU4MDsmIzM2NTc1OyYjMTIzOTQ7JiMxMjQ2MzsmIzEyNDU2OyYjMTI1MjI7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNy4wMDAxIiB4PSIxMTE3IiB5PSIxNzUuODA5NyI+JiMxMjUwMTsmIzEyNTI1OyYjMTI1MzE7JiMxMjQ4ODsmIzEyNDU2OyYjMTI1MzE7JiMxMjQ4OTsmIzIxNTIxOyYjMTIzNjk7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNy4wMDAxIiB4PSIxMTE3IiB5PSIxOTAuOTQyNSI+JiMyMTMzNjsmIzE5OTY4OyYjMTI0NTY7JiMxMjUzMTsmIzEyNDg5OyYjMTI1MDk7JiMxMjQ1MjsmIzEyNTMxOyYjMTI0ODg7PC90ZXh0PjwvZz48IS0tbGluayByZXN0IHRvIEdNTjEzLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDIiIGRhdGEtZW50aXR5LTI9ImVudDAwMTQiIGRhdGEtbGluay10eXBlPSJhc3NvY2lhdGlvbiIgZGF0YS1zb3VyY2UtbGluZT0iMjIiIGlkPSJsbmsxNSI+PHBhdGggZD0iTTM0NC4wNDY4LDc0LjYxOTggQzM0NC42OTY1LDc1LjE3MDEgMzQ1LjM4MDEsNzUuNzQ5MiAzNDYuMDk1OCw3Ni4zNTU1IEMzNTEuODIwOSw4MS4yMDUzIDM1OS41OTMxLDg3Ljc4OTQgMzY4LjM4MzgsOTUuMjM2MyBDMzg1Ljk2NSwxMTAuMTMgNDA3LjYyLDEyOC40NzUgNDI1LjEyLDE0My4zIiBmaWxsPSJub25lIiBpZD0icmVzdC1HTU4xMyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6Nyw3OyIvPjwvZz48IS0tbGluayBncnBjIHRvIEdNTjE2LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDYiIGRhdGEtZW50aXR5LTI9ImVudDAwMTciIGRhdGEtbGluay10eXBlPSJhc3NvY2lhdGlvbiIgZGF0YS1zb3VyY2UtbGluZT0iMjgiIGlkPSJsbmsxOCI+PHBhdGggZD0iTTg5Mi4wNzczLDc1LjU2MDUgQzg5Mi4xMzczLDc1LjYxODEgODkyLjE5NzYsNzUuNjc2IDg5Mi4yNTgyLDc1LjczNDEgQzg5Mi41MDA2LDc1Ljk2NjcgODkyLjc0NzQsNzYuMjAzNSA4OTIuOTk4NSw3Ni40NDQzIEM4OTQuMDAyNyw3Ny40MDc4IDg5NS4wNzUzLDc4LjQzNjYgODk2LjIwOCw3OS41MjI3IEM4OTguNDczNCw4MS42OTQ5IDkwMC45Nzk0LDg0LjA5NjYgOTAzLjY2LDg2LjY2MzggQzkxNC4zODI1LDk2LjkzMjUgOTI3LjksMTA5Ljg1IDk0MCwxMjEuMzMgQzk0Ny40NywxMjguNDEgOTU1LjU2LDEzNi4wNSA5NjMuMDgsMTQzLjE0IiBmaWxsPSJub25lIiBpZD0iZ3JwYy1HTU4xNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6Nyw3OyIvPjwvZz48IS0tbGluayBncmFwaHFsIHRvIEdNTjE5LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMTAiIGRhdGEtZW50aXR5LTI9ImVudDAwMjAiIGRhdGEtbGluay10eXBlPSJhc3NvY2lhdGlvbiIgZGF0YS1zb3VyY2UtbGluZT0iMzQiIGlkPSJsbmsyMSI+PHBhdGggZD0iTTExODAsMTA1LjQzMjcgQzExODAsMTA1LjkzNDkgMTE4MCwxMDYuNDM5IDExODAsMTA2Ljk0NDcgQzExODAsMTEwLjk5MDcgMTE4MCwxMTUuMTQzNCAxMTgwLDExOS4yOTM5IEMxMTgwLDEyNy41OTUgMTE4MCwxMzUuODg3NSAxMTgwLDE0My4zIiBmaWxsPSJub25lIiBpZD0iZ3JhcGhxbC1HTU4xOSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6Nyw3OyIvPjwvZz48P3BsYW50dW1sLXNyYyBWT19SSVc5SDU4Umx6ckRpd2FQbGI3ZzNhZXZPY2RoSHhRWVpISmZ4c1pEVEhVM2lSUDFLYmNYWUgwaEhtR29KdzQxZnFTRWlGQnI1VW15Y0wxSmhQbDZwX2tfX2J4NnNna2FBTFA4dWg0Sk11ZkhpUTU0RklIMkFId1VkdjIxNHJPWWZRRjY0WWFTMkt5NEdkbDNGWk0zNW01R3JKQm85N0JFWGFEeXp2WGgzbVpKa0g4eHZlNl9IbFJwVzVRakZMcExueGFIUnRwM25XRHpaOC05S1ptbUhxa2tkbjJHSGFpMko2eDZPSVdxWGtOSWZfS0pDSzRMVk1WOEVBNjlWSl9wTEhKODY5dVFEcU9ZZnVaMG5KUEI0OTZSX1dKZnRzTXdYc2FiVFdSTk5sb2MxYktSMFl5MmxXTHEyVS1nVUY3SW81eTNFVzNNMGpPMnpqMHlRRlZ3NkZmaERWWjRsSkJyUTdRbnRPNmNtWmdMUnJROU8xbHNBYXB5WjRJNm85MDF1NlRZdm5GOHdpNFZXaHkzcGFkLU8wb2s3c2tOVHpjc2NsTHR6M3NaX1haZ0xHZ3pMMFFqY1R3bTJobWR1YVNKb1UtMHhqWUlNcDFUdmxfSm5kMWdnbTR6YjNfanFjRks5Pz48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<p><strong>詳細比較表：</strong></p>
<table>
<thead>
<tr>
<th>特徴</th>
<th>REST API</th>
<th>gRPC</th>
<th>GraphQL</th>
</tr>
</thead>
<tbody>
<tr>
<td>プロトコル</td>
<td>HTTP/1.1</td>
<td>HTTP/2</td>
<td>HTTP/1.1 or HTTP/2</td>
</tr>
<tr>
<td>データ形式</td>
<td>JSON</td>
<td>Protocol Buffers</td>
<td>JSON</td>
</tr>
<tr>
<td>スキーマ</td>
<td>OpenAPI (任意)</td>
<td>.proto (必須)</td>
<td>.graphqls (必須)</td>
</tr>
<tr>
<td>シリアライゼーション</td>
<td>テキスト</td>
<td>バイナリ</td>
<td>テキスト</td>
</tr>
<tr>
<td>パフォーマンス</td>
<td>中</td>
<td>高</td>
<td>中</td>
</tr>
<tr>
<td>ストリーミング</td>
<td>WebSocket 別実装</td>
<td>ネイティブサポート</td>
<td>Subscription</td>
</tr>
<tr>
<td>ブラウザ対応</td>
<td>◎</td>
<td>△ (gRPC-Web)</td>
<td>◎</td>
</tr>
<tr>
<td>学習コスト</td>
<td>低</td>
<td>中</td>
<td>中</td>
</tr>
<tr>
<td>主な用途</td>
<td>汎用 API</td>
<td>マイクロサービス</td>
<td>フロントエンド向け</td>
</tr>
</tbody>
</table>
<p><strong>gRPC を選択する場面：</strong></p>
<ol>
<li><strong>マイクロサービス間通信</strong>: 高性能な内部通信が必要な場合</li>
<li><strong>リアルタイム処理</strong>: ストリーミングによる進捗通知が必要な場合</li>
<li><strong>多言語環境</strong>: 異なる言語で実装されたサービス間の連携</li>
<li><strong>低レイテンシ</strong>: バイナリプロトコルによる高速通信が必要な場合</li>
</ol>
<hr />
<h3 id="143-4-rpc">14.3 4つの RPC パターン<a class="headerlink" href="#143-4-rpc" title="Permanent link">&para;</a></h3>
<p>gRPC は 4 つの RPC パターンをサポートします。</p>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9Ijg2cHgiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiIHN0eWxlPSJ3aWR0aDoxMzE4cHg7aGVpZ2h0Ojg2cHg7YmFja2dyb3VuZDojRkVGRUZFOyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgMTMxOCA4NiIgd2lkdGg9IjEzMThweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjxyZWN0IGZpbGw9IiNGRUZFRkUiIGhlaWdodD0iODYiIHN0eWxlPSJzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMzE4IiB4PSIwIiB5PSIwIi8+PCEtLWNsdXN0ZXIgMS4gPz8gUlBDIChVbmFyeSktLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iMS4gLi4gUlBDIC5VbmFyeS4iIGRhdGEtc291cmNlLWxpbmU9IjMiIGlkPSJlbnQwMDAyIj48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjczLjMiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIyNTgiIHg9IjciIHk9IjciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQ4LjYwNjMiIHg9IjYxLjY5NjgiIHk9IjIxLjk5NTEiPjEuICYjMjEzMzY7JiMzODkxNzsgUlBDIChVbmFyeSk8L3RleHQ+PC9nPjwhLS1jbHVzdGVyIDIuID8/Pz8/Pz8/Pz8/IFJQQy0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLXF1YWxpZmllZC1uYW1lPSIyLiAuLi4uLi4uLi4uLiBSUEMiIGRhdGEtc291cmNlLWxpbmU9IjEwIiBpZD0iZW50MDAwOCI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI3My4zIiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMzA5IiB4PSIyODkiIHk9IjciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjEwLjEyMjQiIHg9IjMzOC40Mzg4IiB5PSIyMS45OTUxIj4yLiAmIzEyNDY5OyYjMTI1NDA7JiMxMjQ5NjsmIzEyNTQwOyYjMTI0NzM7JiMxMjQ4ODsmIzEyNTIyOyYjMTI1NDA7JiMxMjUxMTsmIzEyNTMxOyYjMTI0NjQ7IFJQQzwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgMy4gPz8/Pz8/Pz8/Pz8/PyBSUEMtLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iMy4gLi4uLi4uLi4uLi4uLiBSUEMiIGRhdGEtc291cmNlLWxpbmU9IjE3IiBpZD0iZW50MDAxNCI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI3My4zIiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMjk5IiB4PSI2MjIiIHk9IjciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjM4LjEyMjMiIHg9IjY1Mi40Mzg5IiB5PSIyMS45OTUxIj4zLiAmIzEyNDYzOyYjMTI1MjE7JiMxMjQ1MjsmIzEyNDUwOyYjMTI1MzE7JiMxMjQ4ODsmIzEyNDczOyYjMTI0ODg7JiMxMjUyMjsmIzEyNTQwOyYjMTI1MTE7JiMxMjUzMTsmIzEyNDY0OyBSUEM8L3RleHQ+PC9nPjwhLS1jbHVzdGVyIDQuID8/Pz8/Pz8/Pz8gUlBDLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IjQuIC4uLi4uLi4uLi4gUlBDIiBkYXRhLXNvdXJjZS1saW5lPSIyNCIgaWQ9ImVudDAwMjAiPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNzMuMyIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjM2NyIgeD0iOTQ1IiB5PSI3Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE5Ni4xMjI0IiB4PSIxMDMwLjQzODgiIHk9IjIxLjk5NTEiPjQuICYjMjE0NTI7JiMyNjA0MTsmIzIxNTIxOyYjMTI0NzM7JiMxMjQ4ODsmIzEyNTIyOyYjMTI1NDA7JiMxMjUxMTsmIzEyNTMxOyYjMTI0NjQ7IFJQQzwvdGV4dD48L2c+PCEtLWVudGl0eSBjMS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IjEuIC4uIFJQQyAuVW5hcnkuLmMxIiBkYXRhLXNvdXJjZS1saW5lPSI0IiBpZD0iZW50MDAwMyI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI2MC41MzAzIiB4PSIyMi43MyIgeT0iNDIiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MC41MzAzIiB4PSIzMi43MyIgeT0iNTcuOTk1MSI+Q2xpZW50PC90ZXh0PjwvZz48IS0tZW50aXR5IHMxLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iMS4gLi4gUlBDIC5VbmFyeS4uczEiIGRhdGEtc291cmNlLWxpbmU9IjUiIGlkPSJlbnQwMDA0Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjY1LjkxMDIiIHg9IjE4My4wNCIgeT0iNDIiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0NS45MTAyIiB4PSIxOTMuMDQiIHk9IjU3Ljk5NTEiPlNlcnZlcjwvdGV4dD48L2c+PCEtLWVudGl0eSBjMi0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IjIuIC4uLi4uLi4uLi4uIFJQQy5jMiIgZGF0YS1zb3VyY2UtbGluZT0iMTEiIGlkPSJlbnQwMDA5Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjYwLjUzMDMiIHg9IjMwNC43MyIgeT0iNDIiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MC41MzAzIiB4PSIzMTQuNzMiIHk9IjU3Ljk5NTEiPkNsaWVudDwvdGV4dD48L2c+PCEtLWVudGl0eSBzMi0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IjIuIC4uLi4uLi4uLi4uIFJQQy5zMiIgZGF0YS1zb3VyY2UtbGluZT0iMTIiIGlkPSJlbnQwMDEwIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjY1LjkxMDIiIHg9IjUxNi4wNCIgeT0iNDIiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0NS45MTAyIiB4PSI1MjYuMDQiIHk9IjU3Ljk5NTEiPlNlcnZlcjwvdGV4dD48L2c+PCEtLWVudGl0eSBjMy0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IjMuIC4uLi4uLi4uLi4uLi4gUlBDLmMzIiBkYXRhLXNvdXJjZS1saW5lPSIxOCIgaWQ9ImVudDAwMTUiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNjAuNTMwMyIgeD0iNjM3LjczIiB5PSI0MiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQwLjUzMDMiIHg9IjY0Ny43MyIgeT0iNTcuOTk1MSI+Q2xpZW50PC90ZXh0PjwvZz48IS0tZW50aXR5IHMzLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iMy4gLi4uLi4uLi4uLi4uLiBSUEMuczMiIGRhdGEtc291cmNlLWxpbmU9IjE5IiBpZD0iZW50MDAxNiI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI2NS45MTAyIiB4PSI4MzkuMDQiIHk9IjQyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDUuOTEwMiIgeD0iODQ5LjA0IiB5PSI1Ny45OTUxIj5TZXJ2ZXI8L3RleHQ+PC9nPjwhLS1lbnRpdHkgYzQtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSI0LiAuLi4uLi4uLi4uIFJQQy5jNCIgZGF0YS1zb3VyY2UtbGluZT0iMjUiIGlkPSJlbnQwMDIxIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjYwLjUzMDMiIHg9Ijk2MC43MyIgeT0iNDIiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MC41MzAzIiB4PSI5NzAuNzMiIHk9IjU3Ljk5NTEiPkNsaWVudDwvdGV4dD48L2c+PCEtLWVudGl0eSBzNC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IjQuIC4uLi4uLi4uLi4gUlBDLnM0IiBkYXRhLXNvdXJjZS1saW5lPSIyNiIgaWQ9ImVudDAwMjIiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNjUuOTEwMiIgeD0iMTIzMC4wNCIgeT0iNDIiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0NS45MTAyIiB4PSIxMjQwLjA0IiB5PSI1Ny45OTUxIj5TZXJ2ZXI8L3RleHQ+PC9nPjwhLS1saW5rIGMxIHRvIHMxLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDMiIGRhdGEtZW50aXR5LTI9ImVudDAwMDQiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSI2IiBpZD0ibG5rNSI+PHBhdGggZD0iTTc3LjkxLDY0LjczIEM4Ni41MSw2OC4xNSA5Ni4zMyw3MS40NCAxMDUuNjYsNzMuMTUgQzEyOS43LDc3LjU2IDEzNi41OCw3Ny4zNyAxNjAuNjYsNzMuMTUgQzE3MC40Miw3MS40NCAxNzUuMTIwMiw3MC4yODg1IDE4NC4xNjAyLDY2Ljg1ODUiIGZpbGw9Im5vbmUiIGlkPSJjMS10by1zMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTg5Ljc3LDY0LjczLDE3OS45MzY0LDY0LjE4MjksMTg1LjA5NTIsNjYuNTAzNywxODIuNzc0Myw3MS42NjI2LDE4OS43Nyw2NC43MyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjUzLjM5MDEiIHg9IjEwNi42NiIgeT0iNjkuMjE2OSI+UmVxdWVzdDwvdGV4dD48L2c+PCEtLXJldmVyc2UgbGluayBjMSB0byBzMS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDAzIiBkYXRhLWVudGl0eS0yPSJlbnQwMDA0IiBkYXRhLWxpbmstdHlwZT0iZGVwZW5kZW5jeSIgZGF0YS1zb3VyY2UtbGluZT0iNyIgaWQ9ImxuazciPjxwYXRoIGQ9Ik04OS42Niw1My4xNSBDMTE3Ljg4LDUzLjE1IDE1My42NCw1My4xNSAxODIuNjcsNTMuMTUiIGZpbGw9Im5vbmUiIGlkPSJjMS1iYWNrdG8tczEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjgzLjY2LDUzLjE1LDkyLjY2LDU3LjE1LDg4LjY2LDUzLjE1LDkyLjY2LDQ5LjE1LDgzLjY2LDUzLjE1IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjMuMDE5NSIgeD0iMTAxLjY2IiB5PSI0Ni4yMTY5Ij5SZXNwb25zZTwvdGV4dD48L2c+PCEtLWxpbmsgYzIgdG8gczItLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwOSIgZGF0YS1lbnRpdHktMj0iZW50MDAxMCIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjEzIiBpZD0ibG5rMTEiPjxwYXRoIGQ9Ik0zNjUuNDcsNjIuODQgQzM3OS43OCw2Ni45IDM5Ny4xNyw3MS4xNCA0MTMuMTYsNzMuMTUgQzQzNy40MSw3Ni4yMSA0NDMuODksNzYuMTEgNDY4LjE2LDczLjE1IEM0ODQuMDksNzEuMjEgNDk1LjYwODcsNjguNzU4NiA1MTAuMTE4Nyw2NC44Mjg2IiBmaWxsPSJub25lIiBpZD0iYzItdG8tczIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjUxNS45MSw2My4yNiw1MDYuMTc3Myw2MS43NTIsNTExLjA4MzksNjQuNTY3MSw1MDguMjY4Nyw2OS40NzM3LDUxNS45MSw2My4yNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjUzLjM5MDEiIHg9IjQxNC4xNiIgeT0iNjkuMjE2OSI+UmVxdWVzdDwvdGV4dD48L2c+PCEtLXJldmVyc2UgbGluayBjMiB0byBzMi0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDA5IiBkYXRhLWVudGl0eS0yPSJlbnQwMDEwIiBkYXRhLWxpbmstdHlwZT0iZGVwZW5kZW5jeSIgZGF0YS1zb3VyY2UtbGluZT0iMTQiIGlkPSJsbmsxMyI+PHBhdGggZD0iTTM3MS42Niw1My4xNSBDNDExLjQyLDUzLjE1IDQ3NC41MSw1My4xNSA1MTUuNTgsNTMuMTUiIGZpbGw9Im5vbmUiIGlkPSJjMi1iYWNrdG8tczIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjM2NS42Niw1My4xNSwzNzQuNjYsNTcuMTUsMzcwLjY2LDUzLjE1LDM3NC42Niw0OS4xNSwzNjUuNjYsNTMuMTUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTQuMDgwMSIgeD0iMzgzLjY2IiB5PSI0Ni4yMTY5Ij5SZXNwb25zZSAxLDIsLi4uTjwvdGV4dD48L2c+PCEtLWxpbmsgYzMgdG8gczMtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAxNSIgZGF0YS1lbnRpdHktMj0iZW50MDAxNiIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjIwIiBpZD0ibG5rMTciPjxwYXRoIGQ9Ik02OTguNTQsNTMuMTUgQzczNi4yMiw1My4xNSA3OTQuMDUsNTMuMTUgODMyLjg4LDUzLjE1IiBmaWxsPSJub25lIiBpZD0iYzMtdG8tczMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjgzOC44OCw1My4xNSw4MjkuODgsNDkuMTUsODMzLjg4LDUzLjE1LDgyOS44OCw1Ny4xNSw4MzguODgsNTMuMTUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDQuNDUwNyIgeD0iNzE2LjY2IiB5PSI0Ni4yMTY5Ij5SZXF1ZXN0IDEsMiwuLi5OPC90ZXh0PjwvZz48IS0tcmV2ZXJzZSBsaW5rIGMzIHRvIHMzLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMTUiIGRhdGEtZW50aXR5LTI9ImVudDAwMTYiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSIyMSIgaWQ9ImxuazE5Ij48cGF0aCBkPSJNNzA0LjE4NjEsNjUuOTAyMiBDNzE1LjgxNjEsNjkuNTQyMiA3MjMuNTgsNzEuMzQgNzM2LjE2LDczLjE1IEM3NjQuNzUsNzcuMjYgNzcyLjU0LDc3LjExIDgwMS4xNiw3My4xNSBDODEzLjY5LDcxLjQyIDgyNy4xMiw2OC4wMyA4MzguODksNjQuNTMiIGZpbGw9Im5vbmUiIGlkPSJjMy1iYWNrdG8tczMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjY5OC40Niw2NC4xMSw3MDUuODU0NCw3MC42MTU3LDcwMy4yMzE3LDY1LjYwMzUsNzA4LjI0MzksNjIuOTgwOSw2OTguNDYsNjQuMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2My4wMTk1IiB4PSI3MzcuMTYiIHk9IjY5LjIxNjkiPlJlc3BvbnNlPC90ZXh0PjwvZz48IS0tbGluayBjNCB0byBzNC0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDIxIiBkYXRhLWVudGl0eS0yPSJlbnQwMDIyIiBkYXRhLWxpbmstdHlwZT0iZGVwZW5kZW5jeSIgZGF0YS1zb3VyY2UtbGluZT0iMjciIGlkPSJsbmsyMyI+PHBhdGggZD0iTTEwMjcuNjcsNTMuMTUgQzEwNzkuMjIsNTMuMTUgMTE3MC43Nyw1My4xNSAxMjIzLjksNTMuMTUiIGZpbGw9Im5vbmUiIGlkPSJjNC1zNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTAyMS42Nyw1My4xNSwxMDMwLjY3LDU3LjE1LDEwMjYuNjcsNTMuMTUsMTAzMC42Nyw0OS4xNSwxMDIxLjY3LDUzLjE1IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMjI5LjksNTMuMTUsMTIyMC45LDQ5LjE1LDEyMjQuOSw1My4xNSwxMjIwLjksNTcuMTUsMTIyOS45LDUzLjE1IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTcyLjI0MzciIHg9IjEwMzkuNjYiIHk9IjQ2LjIxNjkiPlJlcXVlc3QvUmVzcG9uc2UgU3RyZWFtPC90ZXh0PjwvZz48P3BsYW50dW1sLXNyYyBiVDcxSWlDbTZDM25Vdl9ZOHJ1S3JhWkpkYUl5NTNzQVJGVzBpT2tyaDRqZHFXYVlOWGU0M3VocDhqdUt5UThOMVY0bXNEazQzTm1CYXA2c0o4ZW0wZTdsX3JyLTlCQUp5SHVMajBqN0RFY2Fla1pwVGJwYVhPMnJsTHJ4RjQtbWZBR3lwSGNXMENGdXpsN2QtR2dRMXA2aTd0OGdwWlNHTjdXOTVNcjBTUHVuTllBVzRmOVdyYmZDZDM0blJUQXEwN29IZklVYmxzRDZzMEJLUEFUejlhbGFjVDdGc1I3VDlCRUR4MUxTQ2tIVEJZNDgxYnJ6UXBOSVFjM2xRZ1pMakxSbHFfQWFyUFVrRmdzbHRhTGdOQU9IbnFNTU5NSlg4Z3VCV1dQZk84cHRfbTkzMl9wR3dhck5oeGZ3aUk4M044cVByWjFEMm5yY3czMFRZLWJwUl9aVkVxUmNDLXprOVdfM3lVMS1ITHJLZXBDaldrcTVCdDl1Y19DdFF2TTJxUXdYXzA4MD8+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<p><strong>各パターンの用途：</strong></p>
<table>
<thead>
<tr>
<th>パターン</th>
<th>用途例（販売管理システム）</th>
</tr>
</thead>
<tbody>
<tr>
<td>単項 RPC</td>
<td>商品情報取得、受注登録</td>
</tr>
<tr>
<td>サーバーストリーミング</td>
<td>商品一覧取得、出荷進捗通知</td>
</tr>
<tr>
<td>クライアントストリーミング</td>
<td>受注明細の一括登録</td>
</tr>
<tr>
<td>双方向ストリーミング</td>
<td>リアルタイム在庫同期</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="144-grpc">14.4 gRPC におけるヘキサゴナルアーキテクチャ<a class="headerlink" href="#144-grpc" title="Permanent link">&para;</a></h3>
<p>gRPC を導入しても、既存のヘキサゴナルアーキテクチャ（ドメイン層・アプリケーション層）はそのまま共有し、<strong>Input Adapter として gRPC サービス層のみを追加</strong>します。</p>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjY2OHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NzAycHg7aGVpZ2h0OjY2OHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDcwMiA2NjgiIHdpZHRoPSI3MDJweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyIEhleGFnb25hbCBBcmNoaXRlY3R1cmUgKGdSUEM/KS0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLXF1YWxpZmllZC1uYW1lPSJIZXhhZ29uYWwgQXJjaGl0ZWN0dXJlIC5nUlBDLi4iIGRhdGEtc291cmNlLWxpbmU9IjMiIGlkPSJlbnQwMDAyIj48cGF0aCBkPSJNMjA0LjM2LDYgTDQ2NS4xMzI0LDYgQTMuNzUsMy43NSAwIDAgMSA0NjcuNjMyNCw4LjUgTDQ3NC42MzI0LDI4LjI5NjkgTDQ3NC4zNiwyOC4yOTY5IEEyLjUsMi41IDAgMCAxIDQ3Ni44NiwzMC43OTY5IEw0NzYuODYsNjU4LjczIEEyLjUsMi41IDAgMCAxIDQ3NC4zNiw2NjEuMjMgTDIwNC4zNiw2NjEuMjMgQTIuNSwyLjUgMCAwIDEgMjAxLjg2LDY1OC43MyBMMjAxLjg2LDguNSBBMi41LDIuNSAwIDAgMSAyMDQuMzYsNiIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB4MT0iMjAxLjg2IiB4Mj0iNDc0LjYzMjQiIHkxPSIyOC4yOTY5IiB5Mj0iMjguMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNTkuNzcyNCIgeD0iMjA1Ljg2IiB5PSIyMC45OTUxIj5IZXhhZ29uYWwgQXJjaGl0ZWN0dXJlIChnUlBDJiMyOTI1NjspPC90ZXh0PjwvZz48IS0tY2xhc3MgY29yZS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkhleGFnb25hbCBBcmNoaXRlY3R1cmUgLmdSUEMuLi5jb3JlIiBkYXRhLXNvdXJjZS1saW5lPSI1IiBpZD0iZW50MDAwMyI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxODguOTY4OCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTkwLjA0IiB4PSIyNDMuODQiIHk9IjI1Ni43OCIvPjxlbGxpcHNlIGN4PSIyNTguODQiIGN5PSIyNzguMDc2OSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMjYxLjgwODgsMjgzLjcxNzUgUTI2MS4yMzA2LDI4NC4wMTQ0IDI2MC41OSwyODQuMTU1IFEyNTkuOTQ5NCwyODQuMzExMyAyNTkuMjQ2MywyODQuMzExMyBRMjU2Ljc0NjMsMjg0LjMxMTMgMjU1LjQxODEsMjgyLjY3MDYgUTI1NC4xMDU2LDI4MS4wMTQ0IDI1NC4xMDU2LDI3Ny44ODk0IFEyNTQuMTA1NiwyNzQuNzY0NCAyNTUuNDE4MSwyNzMuMTA4MSBRMjU2Ljc0NjMsMjcxLjQ1MTkgMjU5LjI0NjMsMjcxLjQ1MTkgUTI1OS45NDk0LDI3MS40NTE5IDI2MC41OSwyNzEuNjA4MSBRMjYxLjI0NjMsMjcxLjc2NDQgMjYxLjgwODgsMjcyLjA2MTMgTDI2MS44MDg4LDI3NC43OCBRMjYxLjE4MzgsMjc0LjIwMTkgMjYwLjU5LDI3My45MzYzIFEyNTkuOTk2MywyNzMuNjU1IDI1OS4zNzEzLDI3My42NTUgUTI1OC4wMjc1LDI3My42NTUgMjU3LjM0LDI3NC43MzMxIFEyNTYuNjUyNSwyNzUuNzk1NiAyNTYuNjUyNSwyNzcuODg5NCBRMjU2LjY1MjUsMjc5Ljk4MzEgMjU3LjM0LDI4MS4wNjEzIFEyNTguMDI3NSwyODIuMTIzOCAyNTkuMzcxMywyODIuMTIzOCBRMjU5Ljk5NjMsMjgyLjEyMzggMjYwLjU5LDI4MS44NTgxIFEyNjEuMTgzOCwyODEuNTc2OSAyNjEuODA4OCwyODAuOTk4OCBMMjYxLjgwODgsMjgzLjcxNzUgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTUuMzgzOCIgeD0iMjk0LjE2ODEiIHk9IjI3NC43NzUxIj5BcHBsaWNhdGlvbiBDb3JlPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1OC4wNCIgeD0iMjcyLjg0IiB5PSIyOTEuMDcyIj4oRG9tYWluICsgVXNlIENhc2VzKTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyNDQuODQiIHgyPSI0MzIuODgiIHkxPSIyOTkuMzczOCIgeTI9IjI5OS4zNzM4Ii8+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJQUklWQVRFX0ZJRUxEIj48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIyNTEuODQiIHk9IjMxMC4wMjIyIi8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNC4xMjYiIHg9IjI2My44NCIgeT0iMzE2LjM2ODkiPlByb2R1Y3RVc2VDYXNlPC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFJJVkFURV9GSUVMRCI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMjUxLjg0IiB5PSIzMjYuMzE5MSIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDAuNDQ3MyIgeD0iMjYzLjg0IiB5PSIzMzIuNjY1NyI+T3JkZXJVc2VDYXNlPC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFJJVkFURV9GSUVMRCI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMjUxLjg0IiB5PSIzNDIuNjE1OSIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjcuNTY1NCIgeD0iMjYzLjg0IiB5PSIzNDguOTYyNiI+U2hpcG1lbnRVc2VDYXNlPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjI0NC44NCIgeDI9IjQzMi44OCIgeTE9IjM1Ni4yNjQ0IiB5Mj0iMzU2LjI2NDQiLz48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IlBSSVZBVEVfTUVUSE9EIj48cmVjdCBmaWxsPSIjRjI0RDVDIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIyNTEuODQiIHk9IjM2Ni45MTI4Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk3LjA4MzkiIHg9IjI2My44NCIgeT0iMzczLjI1OTUiPlByb2R1Y3QgKCYjMjE4MzA7JiMyMTY5NzspPC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFJJVkFURV9NRVRIT0QiPjxyZWN0IGZpbGw9IiNGMjRENUMiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjI1MS44NCIgeT0iMzgzLjIwOTciLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA4Ljg4MjYiIHg9IjI2My44NCIgeT0iMzg5LjU1NjQiPlBhcnRuZXIgKCYjMjE0NjI7JiMyNDM0MTsmIzIwODA4Oyk8L3RleHQ+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJQUklWQVRFX01FVEhPRCI+PHJlY3QgZmlsbD0iI0YyNEQ1QyIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMjUxLjg0IiB5PSIzOTkuNTA2NiIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4My40MDUyIiB4PSIyNjMuODQiIHk9IjQwNS44NTMyIj5PcmRlciAoJiMyMTQ2MzsmIzI3ODgwOyk8L3RleHQ+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJQUklWQVRFX01FVEhPRCI+PHJlY3QgZmlsbD0iI0YyNEQ1QyIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMjUxLjg0IiB5PSI0MTUuODAzNCIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTAuNTIzMyIgeD0iMjYzLjg0IiB5PSI0MjIuMTUwMSI+U2hpcG1lbnQgKCYjMjA5ODY7JiMzMzY1NTspPC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFJJVkFURV9NRVRIT0QiPjxyZWN0IGZpbGw9IiNGMjRENUMiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjI1MS44NCIgeT0iNDMyLjEwMDMiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTMuNDI2NiIgeD0iMjYzLjg0IiB5PSI0MzguNDQ3Ij5JbnZvaWNlICgmIzM1NTMxOyYjMjc3MTQ7KTwvdGV4dD48L2c+PCEtLWNsYXNzIGlucHV0LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iSGV4YWdvbmFsIEFyY2hpdGVjdHVyZSAuZ1JQQy4uLmlucHV0IiBkYXRhLXNvdXJjZS1saW5lPSIxNiIgaWQ9ImVudDAwMDQiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTIzLjc4MTMiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjIwMy4wMjMxIiB4PSIyMzcuMzUiIHk9IjQxIi8+PGVsbGlwc2UgY3g9IjI4Mi43MTk5IiBjeT0iNjIuMjk2OSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMjg1LjY4ODcsNjcuOTM3NSBRMjg1LjExMDYsNjguMjM0NCAyODQuNDY5OSw2OC4zNzUgUTI4My44MjkzLDY4LjUzMTMgMjgzLjEyNjIsNjguNTMxMyBRMjgwLjYyNjIsNjguNTMxMyAyNzkuMjk4MSw2Ni44OTA2IFEyNzcuOTg1Niw2NS4yMzQ0IDI3Ny45ODU2LDYyLjEwOTQgUTI3Ny45ODU2LDU4Ljk4NDQgMjc5LjI5ODEsNTcuMzI4MSBRMjgwLjYyNjIsNTUuNjcxOSAyODMuMTI2Miw1NS42NzE5IFEyODMuODI5Myw1NS42NzE5IDI4NC40Njk5LDU1LjgyODEgUTI4NS4xMjYyLDU1Ljk4NDQgMjg1LjY4ODcsNTYuMjgxMyBMMjg1LjY4ODcsNTkgUTI4NS4wNjM3LDU4LjQyMTkgMjg0LjQ2OTksNTguMTU2MyBRMjgzLjg3NjIsNTcuODc1IDI4My4yNTEyLDU3Ljg3NSBRMjgxLjkwNzQsNTcuODc1IDI4MS4yMTk5LDU4Ljk1MzEgUTI4MC41MzI0LDYwLjAxNTYgMjgwLjUzMjQsNjIuMTA5NCBRMjgwLjUzMjQsNjQuMjAzMSAyODEuMjE5OSw2NS4yODEzIFEyODEuOTA3NCw2Ni4zNDM4IDI4My4yNTEyLDY2LjM0MzggUTI4My44NzYyLDY2LjM0MzggMjg0LjQ2OTksNjYuMDc4MSBRMjg1LjA2MzcsNjUuNzk2OSAyODUuNjg4Nyw2NS4yMTg4IEwyODUuNjg4Nyw2Ny45Mzc1IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAzLjc4MzIiIHg9IjMwMy4yMTk5IiB5PSI1OC45OTUxIj5JbnB1dCBBZGFwdGVyczwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ni4wMTA3IiB4PSIzMDcuMTA2MiIgeT0iNzUuMjkyIj4oRHJpdmluZyBTaWRlKTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyMzguMzUiIHgyPSI0MzkuMzczMSIgeTE9IjgzLjU5MzgiIHkyPSI4My41OTM4Ii8+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJQUklWQVRFX0ZJRUxEIj48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIyNDUuMzUiIHk9Ijk0LjI0MjIiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTY1LjYzNDUiIHg9IjI1Ny4zNSIgeT0iMTAwLjU4ODkiPlJFU1QgQ29udHJvbGxlciYjNjUyODg7JiMyNjA4MjsmIzIzMzg0OyYjNjUyODk7PC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFJJVkFURV9GSUVMRCI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMjQ1LjM1IiB5PSIxMTAuNTM5MSIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNzcuMDIzMSIgeD0iMjU3LjM1IiB5PSIxMTYuODg1NyI+Z1JQQyBTZXJ2aWNlJiM2NTI4ODsmIzI2MDMyOyYjMzUyMTU7JiMzNjg2MTsmIzIxMTUyOyYjNjUyODk7PC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFJJVkFURV9GSUVMRCI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMjQ1LjM1IiB5PSIxMjYuODM1OSIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTUuMTg1NSIgeD0iMjU3LjM1IiB5PSIxMzMuMTgyNiI+U3RyZWFtT2JzZXJ2ZXI8L3RleHQ+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJQUklWQVRFX0ZJRUxEIj48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIyNDUuMzUiIHk9IjE0My4xMzI4Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyMy43NzgzIiB4PSIyNTcuMzUiIHk9IjE0OS40Nzk1Ij5TZXJ2ZXJJbnRlcmNlcHRvcjwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyMzguMzUiIHgyPSI0MzkuMzczMSIgeTE9IjE1Ni43ODEzIiB5Mj0iMTU2Ljc4MTMiLz48L2c+PCEtLWNsYXNzIG91dHB1dC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkhleGFnb25hbCBBcmNoaXRlY3R1cmUgLmdSUEMuLi5vdXRwdXQiIGRhdGEtc291cmNlLWxpbmU9IjIzIiBpZD0iZW50MDAwNSI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMDcuNDg0NCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTYwLjc0MzIiIHg9IjIzNi40OSIgeT0iNTM3Ljc1Ii8+PGVsbGlwc2UgY3g9IjI1Ny4xNTEiIGN5PSI1NTkuMDQ2OSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMjYwLjExOTgsNTY0LjY4NzUgUTI1OS41NDE3LDU2NC45ODQ0IDI1OC45MDEsNTY1LjEyNSBRMjU4LjI2MDQsNTY1LjI4MTMgMjU3LjU1NzMsNTY1LjI4MTMgUTI1NS4wNTczLDU2NS4yODEzIDI1My43MjkyLDU2My42NDA2IFEyNTIuNDE2Nyw1NjEuOTg0NCAyNTIuNDE2Nyw1NTguODU5NCBRMjUyLjQxNjcsNTU1LjczNDQgMjUzLjcyOTIsNTU0LjA3ODEgUTI1NS4wNTczLDU1Mi40MjE5IDI1Ny41NTczLDU1Mi40MjE5IFEyNTguMjYwNCw1NTIuNDIxOSAyNTguOTAxLDU1Mi41NzgxIFEyNTkuNTU3Myw1NTIuNzM0NCAyNjAuMTE5OCw1NTMuMDMxMyBMMjYwLjExOTgsNTU1Ljc1IFEyNTkuNDk0OCw1NTUuMTcxOSAyNTguOTAxLDU1NC45MDYzIFEyNTguMzA3Myw1NTQuNjI1IDI1Ny42ODIzLDU1NC42MjUgUTI1Ni4zMzg1LDU1NC42MjUgMjU1LjY1MSw1NTUuNzAzMSBRMjU0Ljk2MzUsNTU2Ljc2NTYgMjU0Ljk2MzUsNTU4Ljg1OTQgUTI1NC45NjM1LDU2MC45NTMxIDI1NS42NTEsNTYyLjAzMTMgUTI1Ni4zMzg1LDU2My4wOTM4IDI1Ny42ODIzLDU2My4wOTM4IFEyNTguMzA3Myw1NjMuMDkzOCAyNTguOTAxLDU2Mi44MjgxIFEyNTkuNDk0OCw1NjIuNTQ2OSAyNjAuMTE5OCw1NjEuOTY4OCBMMjYwLjExOTgsNTY0LjY4NzUgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTYuMTYzMSIgeD0iMjcyLjQwOSIgeT0iNTU1Ljc0NTEiPk91dHB1dCBBZGFwdGVyczwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5MS44NDc3IiB4PSIyODQuNTY2OCIgeT0iNTcyLjA0MiI+KERyaXZlbiBTaWRlKTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyMzcuNDkiIHgyPSIzOTYuMjMzMiIgeTE9IjU4MC4zNDM4IiB5Mj0iNTgwLjM0MzgiLz48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IlBSSVZBVEVfRklFTEQiPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjI0NC40OSIgeT0iNTkwLjk5MjIiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM0Ljc0MzIiIHg9IjI1Ni40OSIgeT0iNTk3LjMzODkiPk15QmF0aXMgUmVwb3NpdG9yeTwvdGV4dD48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IlBSSVZBVEVfRklFTEQiPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjI0NC40OSIgeT0iNjA3LjI4OTEiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTE5LjQyMzgiIHg9IjI1Ni40OSIgeT0iNjEzLjYzNTciPkRhdGFiYXNlIEFjY2VzczwvdGV4dD48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IlBSSVZBVEVfRklFTEQiPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjI0NC40OSIgeT0iNjIzLjU4NTkiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA1LjQwMzMiIHg9IjI1Ni40OSIgeT0iNjI5LjkzMjYiPkVudGl0eSBNYXBwaW5nPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjIzNy40OSIgeDI9IjM5Ni4yMzMyIiB5MT0iNjM3LjIzNDQiIHkyPSI2MzcuMjM0NCIvPjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJHTU44IiBkYXRhLXNvdXJjZS1saW5lPSIzNCIgaWQ9ImVudDAwMDkiPjxwYXRoIGQ9Ik00OTIuNyw3NS4xOSBMNDkyLjcsMTMwLjU4ODQgQTAsMCAwIDAgMCA0OTIuNywxMzAuNTg4NCBMNTYyLjA5LDEzMC41ODg0IEw0MzQuMjgsMjU4LjA3IEw1NzAuMDksMTMwLjU4ODQgTDY5NS4wMzM3LDEzMC41ODg0IEEwLDAgMCAwIDAgNjk1LjAzMzcsMTMwLjU4ODQgTDY5NS4wMzM3LDg1LjE5IEw2ODUuMDMzNyw3NS4xOSBMNDkyLjcsNzUuMTkgQTAsMCAwIDAgMCA0OTIuNyw3NS4xOSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTY4NS4wMzM3LDc1LjE5IEw2ODUuMDMzNyw4NS4xOSBMNjk1LjAzMzcsODUuMTkgTDY4NS4wMzM3LDc1LjE5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDMuMDAwMiIgeD0iNDk4LjciIHk9IjkyLjI1NjkiPiYjMjYwODI7JiMyMzM4NDsmIzEyMzk4OyYjMTI0OTk7JiMxMjQ3MjsmIzEyNDkzOyYjMTI0NzM7JiMxMjUyNTsmIzEyNDcyOyYjMTI0ODM7JiMxMjQ2Mzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTUzLjI3MDYiIHg9IjQ5OC43IiB5PSIxMDcuMzg5NyI+UkVTVCBBUEkgJiMyOTI1NjsmIzEyMzkyOyYjMjM0MzY7JiMyMDg0MDsmIzEyMzk1OyYjMjA4NDk7JiMyNjM3Nzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTgxLjMzMzciIHg9IjQ5OC43IiB5PSIxMjIuNTIyNSI+Z1JQQyAmIzIyMjY2OyYjMjYzNzc7JiMxMjM5ODsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsmIzEyMzk5OyYjMjE1NDc7JiMxMjQxNDsmIzEyMzk0OyYjMTIzNTY7PC90ZXh0PjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJHTU4xMSIgZGF0YS1zb3VyY2UtbGluZT0iNDAiIGlkPSJlbnQwMDEyIj48cGF0aCBkPSJNNiw3NS4xOSBMNiwxMzAuNTg4NCBBMCwwIDAgMCAwIDYsMTMwLjU4ODQgTDE4NS43Mjk2LDEzMC41ODg0IEEwLDAgMCAwIDAgMTg1LjcyOTYsMTMwLjU4ODQgTDE4NS43Mjk2LDEwNi44OSBMMjM3LjA4LDEwMi44OSBMMTg1LjcyOTYsOTguODkgTDE4NS43Mjk2LDg1LjE5IEwxNzUuNzI5Niw3NS4xOSBMNiw3NS4xOSBBMCwwIDAgMCAwIDYsNzUuMTkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0xNzUuNzI5Niw3NS4xOSBMMTc1LjcyOTYsODUuMTkgTDE4NS43Mjk2LDg1LjE5IEwxNzUuNzI5Niw3NS4xOSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAzLjMzMzYiIHg9IjEyIiB5PSI5Mi4yNTY5Ij5nUlBDICYjMTI0Njk7JiMxMjU0MDsmIzEyNDk5OyYjMTI0NzM7JiMxMjQzNDs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTU4LjcyOTYiIHg9IjEyIiB5PSIxMDcuMzg5NyI+SW5wdXQgQWRhcHRlciAmIzEyMzkyOyYjMTIzNzU7JiMxMjM5MDsmIzM2ODYxOyYjMjExNTI7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0NS43MDQyIiB4PSIxMiIgeT0iMTIyLjUyMjUiPiYjMjYwODI7JiMyMzM4NDsmIzEyMzk4OyBSRVNUICYjMTIzOTI7JiMyMDg0OTsmIzIzMzg0OyYjMjE0ODc7JiMzMzAyMTs8L3RleHQ+PC9nPjwhLS1saW5rIGlucHV0IHRvIGNvcmUtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwNCIgZGF0YS1lbnRpdHktMj0iZW50MDAwMyIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjMwIiBpZD0ibG5rNiI+PHBhdGggY29kZUxpbmU9IjMwIiBkPSJNMzM4Ljg2LDE2NS4xIEMzMzguODYsMTkyLjc1IDMzOC44NiwyMjAuMDMgMzM4Ljg2LDI1MC43IiBmaWxsPSJub25lIiBpZD0iaW5wdXQtdG8tY29yZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzM4Ljg2LDI1Ni43LDM0Mi44NiwyNDcuNywzMzguODYsMjUxLjcsMzM0Ljg2LDI0Ny43LDMzOC44NiwyNTYuNyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjcwLjgwMTgiIHg9IjM0My4wMzM4IiB5PSIyMDcuODQ2OSI+SW5wdXQgUG9ydHM8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzcuMTQ5NCIgeD0iMzM5Ljg2IiB5PSIyMjIuOTc5NyI+KFVzZSBDYXNlcyk8L3RleHQ+PC9nPjwhLS1saW5rIGNvcmUgdG8gb3V0cHV0LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDMiIGRhdGEtZW50aXR5LTI9ImVudDAwMDUiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSIzMSIgaWQ9ImxuazciPjxwYXRoIGNvZGVMaW5lPSIzMSIgZD0iTTMzMC4yLDQ0Ni4wNyBDMzI3LjM0LDQ3Ny4wNiAzMjQuODExOCw1MDQuNDc1NCAzMjIuMzMxOCw1MzEuMzI1NCIgZmlsbD0ibm9uZSIgaWQ9ImNvcmUtdG8tb3V0cHV0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIzMjEuNzgsNTM3LjMsMzI2LjU5MDgsNTI4LjcwNiwzMjIuMjM5OSw1MzIuMzIxMiwzMTguNjI0Nyw1MjcuOTcwMywzMjEuNzgsNTM3LjMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4Mi4yOTc0IiB4PSIzNjEuNTQxNSIgeT0iNDg4LjgxNjkiPk91dHB1dCBQb3J0czwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDguOTYwNCIgeD0iMzI4LjIxIiB5PSI1MDMuOTQ5NyI+KFJlcG9zaXRvcnkgSW50ZXJmYWNlcyk8L3RleHQ+PC9nPjw/cGxhbnR1bWwtc3JjIFJMOURSbjkxNkJ4bGh0WmIxMzd5V0h2Q0xhZ0tuMGcxVWxDb2RIdGVuNkxjQ3BpR1lWNm1rd0FXUkoySTVYQ3o2MHlEYVJIODZnQ3NMN19DUDk1Ul91OHBrd01xbmppeHBfbG5GQ194cFlzN3IyYVpLMnFNamtzN3pudUswUmw4em90QkdfVzlRWDM4dDJURktPQ3B2ODhqeTJ3TDFDa004OTFqTDJrNUZfclVCV0ZGQjZsVGRoNHpwd0tPSVNlUDVCV1dacmJzYXBTSFBOMFI3bGE0MmlXZGxrdjJGYzJUcmpydmcwWmtqQjI0UjdwbUNYdTZFR0NYOEhhSDZYZVNubEUza0RpcFE1YXVBSlBRZDh1REtEa2JOZkNtcV9oZ1JCZF90TTBicmtPS1F1ZEJvUGw1QkNvajJKSV9lTHlETVp6Tk9yUjh5bmtNSWluaElSMFR2NGFZVjZEOHEzUGIzUVhIWHdITVE1OVlsNUlCak1yamQ0ZDFOUFU4WXRibENWZVM3eC1fY0ZUcnJjbURRYUlxaksySkVsb3dGMWVpVnZfN2hwLWIxSktmMjZnTVR0blRHdUcxYWczNEQzS2Nka0pZN3Q3YmJsb0ZFaUFrWVVEZllMNnRyUmNoSi1EM2JOWlNmdGZRSHVFUklBOFRSSGppWjhhLVZYd0FKNUJQV0l0YVVUZ2RQaklTZ1NMeV9hdndqdXRMTllmU0k0RHh4UlhNS2M1QUJ3YXRoZElrZ2pTMjhGNU1IcFpmajFZTjEySnRXRFNKOFlqVGRtZkVMM0hLdUd5THhRbG1mdWdFYXBYSXVUSEFMY3ZOSWczX2VtaDZ5U2JVdDFzaE8xOXRQdWtGVklsUFVWcFhKQ1RjSWRZZ2VoY0FUM29EdHF2S3k0aTVOckptbVlCQzBLRC1BUzRiVE1hcTlCUko2SWh5YmhHRVpPM21kTk5aTnUxY0xpNTgxS1ZmRVRVd3FvelhYN0xkNmVhN3FzTHFWYU50NW0wMD8+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<p><strong>gRPC でもヘキサゴナルアーキテクチャを維持する理由：</strong></p>
<ol>
<li><strong>再利用性</strong>: 既存の UseCase/Repository をそのまま活用</li>
<li><strong>並行運用</strong>: REST API と gRPC を同時提供可能</li>
<li><strong>テスト容易性</strong>: ドメインロジックは通信プロトコルに依存しない</li>
<li><strong>移行容易性</strong>: 段階的に API 形式を追加・変更可能</li>
</ol>
<hr />
<h3 id="145">14.5 ディレクトリ構成<a class="headerlink" href="#145" title="Permanent link">&para;</a></h3>
<p>既存の構成に <code>infrastructure/grpc/</code> を追加するだけです。</p>
<div class="highlight"><pre><span></span><code>src/main/java/com/example/sales/
├── domain/                     # ドメイン層（API版と共通）
│   ├── model/
│   │   ├── product/           # 商品ドメイン
│   │   ├── partner/           # 取引先ドメイン
│   │   ├── order/             # 受注ドメイン
│   │   ├── shipment/          # 出荷ドメイン
│   │   └── invoice/           # 請求ドメイン
│   └── exception/
│
├── application/               # アプリケーション層（API版と共通）
│   ├── port/
│   │   ├── in/               # Input Port（ユースケース）
│   │   └── out/              # Output Port（リポジトリ）
│   └── service/
│
├── infrastructure/
│   ├── persistence/          # Output Adapter（DB実装）- 既存
│   │   ├── mapper/
│   │   └── repository/
│   ├── rest/                 # Input Adapter（REST実装）- 既存
│   └── grpc/                 # Input Adapter（gRPC実装）- 新規追加
│       ├── service/          # gRPC サービス実装
│       ├── interceptor/      # インターセプター
│       └── converter/        # ドメイン ↔ Proto 変換
│
├── config/
│
└── src/main/proto/           # Protocol Buffers 定義
    ├── common.proto
    ├── product.proto
    ├── partner.proto
    ├── order.proto
    ├── shipment.proto
    └── invoice.proto
</code></pre></div>
<hr />
<h3 id="146">14.6 技術スタックの追加<a class="headerlink" href="#146" title="Permanent link">&para;</a></h3>
<p>既存の <code>build.gradle.kts</code> に gRPC 関連の依存関係を追加します。</p>
<h4 id="buildgradlekts">build.gradle.kts（差分）<a class="headerlink" href="#buildgradlekts" title="Permanent link">&para;</a></h4>
<details>
<summary>コード例: build.gradle.kts</summary>

<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nn">com.google.protobuf.gradle.*</span>

<span class="n">plugins</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 既存のプラグイン</span>
<span class="w">    </span><span class="n">id</span><span class="p">(</span><span class="s">&quot;java&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">id</span><span class="p">(</span><span class="s">&quot;org.springframework.boot&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="s">&quot;4.0.0&quot;</span>
<span class="w">    </span><span class="n">id</span><span class="p">(</span><span class="s">&quot;io.spring.dependency-management&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="s">&quot;1.1.0&quot;</span>

<span class="w">    </span><span class="c1">// gRPC 関連を追加</span>
<span class="w">    </span><span class="n">id</span><span class="p">(</span><span class="s">&quot;com.google.protobuf&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="s">&quot;0.9.4&quot;</span>
<span class="p">}</span>

<span class="n">dependencies</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 既存の依存関係（Spring Boot, MyBatis, PostgreSQL等）はそのまま</span>

<span class="w">    </span><span class="c1">// gRPC 関連を追加</span>
<span class="w">    </span><span class="n">implementation</span><span class="p">(</span><span class="s">&quot;net.devh:grpc-spring-boot-starter:3.1.0.RELEASE&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">implementation</span><span class="p">(</span><span class="s">&quot;io.grpc:grpc-protobuf:1.62.2&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">implementation</span><span class="p">(</span><span class="s">&quot;io.grpc:grpc-stub:1.62.2&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">implementation</span><span class="p">(</span><span class="s">&quot;io.grpc:grpc-services:1.62.2&quot;</span><span class="p">)</span><span class="w">  </span><span class="c1">// ヘルスチェック、リフレクション</span>

<span class="w">    </span><span class="c1">// Protocol Buffers</span>
<span class="w">    </span><span class="n">implementation</span><span class="p">(</span><span class="s">&quot;com.google.protobuf:protobuf-java:3.25.3&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">implementation</span><span class="p">(</span><span class="s">&quot;com.google.protobuf:protobuf-java-util:3.25.3&quot;</span><span class="p">)</span><span class="w">  </span><span class="c1">// JSON 変換</span>

<span class="w">    </span><span class="c1">// Jakarta Annotation (gRPC generated code で必要)</span>
<span class="w">    </span><span class="n">compileOnly</span><span class="p">(</span><span class="s">&quot;jakarta.annotation:jakarta.annotation-api:2.1.1&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="c1">// Test</span>
<span class="w">    </span><span class="n">testImplementation</span><span class="p">(</span><span class="s">&quot;io.grpc:grpc-testing:1.62.2&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">testImplementation</span><span class="p">(</span><span class="s">&quot;net.devh:grpc-client-spring-boot-starter:3.1.0.RELEASE&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">protobuf</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">protoc</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">artifact</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;com.google.protobuf:protoc:3.25.3&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">plugins</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">create</span><span class="p">(</span><span class="s">&quot;grpc&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">artifact</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;io.grpc:protoc-gen-grpc-java:1.62.2&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">generateProtoTasks</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">all</span><span class="p">().</span><span class="na">forEach</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">            </span><span class="n">task</span><span class="p">.</span><span class="na">plugins</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">create</span><span class="p">(</span><span class="s">&quot;grpc&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 生成コードのソースパス追加</span>
<span class="n">sourceSets</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">main</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">java</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">srcDirs</span><span class="p">(</span>
<span class="w">                </span><span class="s">&quot;build/generated/source/proto/main/java&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s">&quot;build/generated/source/proto/main/grpc&quot;</span>
<span class="w">            </span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<p><strong>追加パッケージの説明：</strong></p>
<table>
<thead>
<tr>
<th>パッケージ</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>grpc-spring-boot-starter</td>
<td>Spring Boot gRPC 統合</td>
</tr>
<tr>
<td>grpc-protobuf</td>
<td>gRPC + Protocol Buffers 統合</td>
</tr>
<tr>
<td>grpc-stub</td>
<td>gRPC クライアントスタブ</td>
</tr>
<tr>
<td>grpc-services</td>
<td>ヘルスチェック、リフレクションサービス</td>
</tr>
<tr>
<td>protobuf-java</td>
<td>Protocol Buffers Java ランタイム</td>
</tr>
<tr>
<td>protobuf-java-util</td>
<td>JSON ⇔ Protobuf 変換ユーティリティ</td>
</tr>
<tr>
<td>grpc-testing</td>
<td>gRPC テストサポート</td>
</tr>
</tbody>
</table>
<h4 id="applicationyml">application.yml（差分）<a class="headerlink" href="#applicationyml" title="Permanent link">&para;</a></h4>
<details>
<summary>コード例: application.yml</summary>

<div class="highlight"><pre><span></span><code><span class="c1"># 既存の設定はそのまま</span>

<span class="c1"># gRPC サーバー設定</span>
<span class="nt">grpc</span><span class="p">:</span>
<span class="w">  </span><span class="nt">server</span><span class="p">:</span>
<span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">9090</span>
<span class="w">    </span><span class="nt">reflection-service-enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">  </span><span class="c1"># gRPC リフレクション有効化</span>
<span class="w">    </span><span class="nt">health-service-enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">      </span><span class="c1"># ヘルスチェック有効化</span>
<span class="w">    </span><span class="nt">max-inbound-message-size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4194304</span><span class="w">  </span><span class="c1"># 4MB</span>
<span class="w">    </span><span class="nt">max-inbound-metadata-size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8192</span><span class="w">    </span><span class="c1"># 8KB</span>

<span class="c1"># ログ設定</span>
<span class="nt">logging</span><span class="p">:</span>
<span class="w">  </span><span class="nt">level</span><span class="p">:</span>
<span class="w">    </span><span class="nt">net.devh.boot.grpc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DEBUG</span>
<span class="w">    </span><span class="nt">io.grpc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">INFO</span>
</code></pre></div>

</details>

<hr />
<h3 id="147-protocol-buffers">14.7 Protocol Buffers 定義<a class="headerlink" href="#147-protocol-buffers" title="Permanent link">&para;</a></h3>
<h4 id="srcmainprotocommonproto">src/main/proto/common.proto<a class="headerlink" href="#srcmainprotocommonproto" title="Permanent link">&para;</a></h4>
<details>
<summary>コード例: common.proto</summary>

<div class="highlight"><pre><span></span><code><span class="k">syntax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;proto3&quot;</span><span class="p">;</span>

<span class="kn">package</span><span class="w"> </span><span class="nn">com</span><span class="o">.</span><span class="n">example.sales</span><span class="p">;</span>

<span class="k">option</span><span class="w"> </span><span class="na">java_package</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;com.example.sales.infrastructure.grpc.proto&quot;</span><span class="p">;</span>
<span class="k">option</span><span class="w"> </span><span class="na">java_outer_classname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;CommonProto&quot;</span><span class="p">;</span>
<span class="k">option</span><span class="w"> </span><span class="na">java_multiple_files</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>

<span class="k">import</span><span class="w"> </span><span class="s">&quot;google/protobuf/timestamp.proto&quot;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="s">&quot;google/protobuf/wrappers.proto&quot;</span><span class="p">;</span>

<span class="c1">// 共通のページネーション</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">PageRequest</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int32</span><span class="w"> </span><span class="na">page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int32</span><span class="w"> </span><span class="na">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">message</span><span class="w"> </span><span class="nc">PageInfo</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int32</span><span class="w"> </span><span class="na">page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int32</span><span class="w"> </span><span class="na">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int32</span><span class="w"> </span><span class="na">total_elements</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int32</span><span class="w"> </span><span class="na">total_pages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="na">has_next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="na">has_previous</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 共通のエラー応答</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">ErrorDetail</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="kd">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">message</span><span class="w"> </span><span class="nc">ErrorResponse</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="kd">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="k">repeated</span><span class="w"> </span><span class="n">ErrorDetail</span><span class="w"> </span><span class="na">details</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 金額型（Decimal 相当）</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">Money</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int64</span><span class="w"> </span><span class="na">units</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">      </span><span class="c1">// 整数部</span>
<span class="w">    </span><span class="kt">int32</span><span class="w"> </span><span class="na">nanos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w">      </span><span class="c1">// 小数部（10億分の1単位）</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">currency</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w">  </span><span class="c1">// 通貨コード（JPY等）</span>
<span class="p">}</span>

<span class="c1">// 日付型（Date 相当）</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">Date</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int32</span><span class="w"> </span><span class="na">year</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int32</span><span class="w"> </span><span class="na">month</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int32</span><span class="w"> </span><span class="na">day</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 監査情報</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">AuditInfo</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">google.protobuf.Timestamp</span><span class="w"> </span><span class="na">created_at</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">created_by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="n">google.protobuf.Timestamp</span><span class="w"> </span><span class="na">updated_at</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">updated_by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h4 id="srcmainprotoproductproto">src/main/proto/product.proto<a class="headerlink" href="#srcmainprotoproductproto" title="Permanent link">&para;</a></h4>
<details>
<summary>コード例: product.proto</summary>

<div class="highlight"><pre><span></span><code><span class="k">syntax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;proto3&quot;</span><span class="p">;</span>

<span class="kn">package</span><span class="w"> </span><span class="nn">com</span><span class="o">.</span><span class="n">example.sales</span><span class="p">;</span>

<span class="k">option</span><span class="w"> </span><span class="na">java_package</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;com.example.sales.infrastructure.grpc.proto&quot;</span><span class="p">;</span>
<span class="k">option</span><span class="w"> </span><span class="na">java_outer_classname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ProductProto&quot;</span><span class="p">;</span>
<span class="k">option</span><span class="w"> </span><span class="na">java_multiple_files</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>

<span class="k">import</span><span class="w"> </span><span class="s">&quot;common.proto&quot;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="s">&quot;google/protobuf/empty.proto&quot;</span><span class="p">;</span>

<span class="c1">// 商品区分</span>
<span class="kd">enum</span><span class="w"> </span><span class="n">ProductCategory</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">PRODUCT_CATEGORY_UNSPECIFIED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="na">PRODUCT_CATEGORY_GOODS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">       </span><span class="c1">// 商品</span>
<span class="w">    </span><span class="na">PRODUCT_CATEGORY_SERVICE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w">     </span><span class="c1">// サービス</span>
<span class="w">    </span><span class="na">PRODUCT_CATEGORY_SUPPLY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w">      </span><span class="c1">// 消耗品</span>
<span class="p">}</span>

<span class="c1">// 税区分</span>
<span class="kd">enum</span><span class="w"> </span><span class="n">TaxCategory</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">TAX_CATEGORY_UNSPECIFIED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="na">TAX_CATEGORY_TAXABLE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">         </span><span class="c1">// 課税</span>
<span class="w">    </span><span class="na">TAX_CATEGORY_EXEMPT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w">          </span><span class="c1">// 非課税</span>
<span class="w">    </span><span class="na">TAX_CATEGORY_REDUCED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w">         </span><span class="c1">// 軽減税率</span>
<span class="p">}</span>

<span class="c1">// 商品メッセージ</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">Product</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">product_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">           </span><span class="c1">// 商品コード</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">product_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w">           </span><span class="c1">// 商品名</span>
<span class="w">    </span><span class="n">ProductCategory</span><span class="w"> </span><span class="na">category</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w">      </span><span class="c1">// 商品区分</span>
<span class="w">    </span><span class="n">TaxCategory</span><span class="w"> </span><span class="na">tax_category</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span><span class="w">      </span><span class="c1">// 税区分</span>
<span class="w">    </span><span class="n">Money</span><span class="w"> </span><span class="na">standard_price</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w">          </span><span class="c1">// 標準単価</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">product_group_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span><span class="w">     </span><span class="c1">// 商品分類コード</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">unit_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="p">;</span><span class="w">              </span><span class="c1">// 単位コード</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="na">is_active</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span><span class="w">                </span><span class="c1">// 有効フラグ</span>
<span class="w">    </span><span class="n">AuditInfo</span><span class="w"> </span><span class="na">audit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">9</span><span class="p">;</span><span class="w">               </span><span class="c1">// 監査情報</span>
<span class="p">}</span>

<span class="c1">// === リクエスト/レスポンス ===</span>

<span class="c1">// 商品取得</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">GetProductRequest</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">product_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">message</span><span class="w"> </span><span class="nc">GetProductResponse</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Product</span><span class="w"> </span><span class="na">product</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 商品一覧取得（サーバーストリーミング）</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">ListProductsRequest</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">PageRequest</span><span class="w"> </span><span class="na">page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="n">ProductCategory</span><span class="w"> </span><span class="na">category</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w">      </span><span class="c1">// フィルタ（オプション）</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">product_group_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w">     </span><span class="c1">// フィルタ（オプション）</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">keyword</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span><span class="w">                </span><span class="c1">// 検索キーワード</span>
<span class="p">}</span>

<span class="c1">// 商品登録</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">CreateProductRequest</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">product_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">product_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="n">ProductCategory</span><span class="w"> </span><span class="na">category</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">    </span><span class="n">TaxCategory</span><span class="w"> </span><span class="na">tax_category</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="w">    </span><span class="n">Money</span><span class="w"> </span><span class="na">standard_price</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">product_group_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">unit_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">message</span><span class="w"> </span><span class="nc">CreateProductResponse</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Product</span><span class="w"> </span><span class="na">product</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 商品一括登録（クライアントストリーミング）</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">BulkCreateProductRequest</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">CreateProductRequest</span><span class="w"> </span><span class="na">product</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">message</span><span class="w"> </span><span class="nc">BulkCreateProductResponse</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int32</span><span class="w"> </span><span class="na">success_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int32</span><span class="w"> </span><span class="na">failure_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="k">repeated</span><span class="w"> </span><span class="n">ErrorDetail</span><span class="w"> </span><span class="na">errors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// === サービス定義 ===</span>

<span class="kd">service</span><span class="w"> </span><span class="n">ProductService</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 単項 RPC</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">GetProduct</span><span class="p">(</span><span class="n">GetProductRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">GetProductResponse</span><span class="p">);</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">CreateProduct</span><span class="p">(</span><span class="n">CreateProductRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">CreateProductResponse</span><span class="p">);</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">UpdateProduct</span><span class="p">(</span><span class="n">UpdateProductRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">UpdateProductResponse</span><span class="p">);</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">DeleteProduct</span><span class="p">(</span><span class="n">DeleteProductRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">DeleteProductResponse</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// サーバーストリーミング RPC（大量データ取得）</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">ListProducts</span><span class="p">(</span><span class="n">ListProductsRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">stream</span><span class="w"> </span><span class="n">Product</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// クライアントストリーミング RPC（一括登録）</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">BulkCreateProducts</span><span class="p">(</span><span class="n">stream</span><span class="w"> </span><span class="n">BulkCreateProductRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">BulkCreateProductResponse</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h3 id="148-grpc">14.8 gRPC サービス実装<a class="headerlink" href="#148-grpc" title="Permanent link">&para;</a></h3>
<h4 id="grpcproductservicejava">GrpcProductService.java<a class="headerlink" href="#grpcproductservicejava" title="Permanent link">&para;</a></h4>
<details>
<summary>コード例: GrpcProductService.java</summary>

<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.sales.infrastructure.grpc.service</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sales.application.port.in.ProductUseCase</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sales.domain.model.product.Product</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sales.domain.model.product.ProductCode</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sales.infrastructure.grpc.converter.ProductConverter</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sales.infrastructure.grpc.proto.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">io.grpc.stub.StreamObserver</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">net.devh.boot.grpc.server.service.GrpcService</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.slf4j.Logger</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.slf4j.LoggerFactory</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.concurrent.atomic.AtomicInteger</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 商品 gRPC サービス実装</span>
<span class="cm"> */</span>
<span class="nd">@GrpcService</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">GrpcProductService</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">ProductServiceGrpc</span><span class="p">.</span><span class="na">ProductServiceImplBase</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Logger</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LoggerFactory</span><span class="p">.</span><span class="na">getLogger</span><span class="p">(</span><span class="n">GrpcProductService</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">ProductUseCase</span><span class="w"> </span><span class="n">productUseCase</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">ProductConverter</span><span class="w"> </span><span class="n">converter</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">GrpcProductService</span><span class="p">(</span><span class="n">ProductUseCase</span><span class="w"> </span><span class="n">productUseCase</span><span class="p">,</span><span class="w"> </span><span class="n">ProductConverter</span><span class="w"> </span><span class="n">converter</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">productUseCase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">productUseCase</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">converter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">converter</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 単項 RPC: 商品取得</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">getProduct</span><span class="p">(</span><span class="n">GetProductRequest</span><span class="w"> </span><span class="n">request</span><span class="p">,</span>
<span class="w">                           </span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">GetProductResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="n">responseObserver</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;getProduct: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getProductCode</span><span class="p">());</span>

<span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">ProductCode</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ProductCode</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getProductCode</span><span class="p">());</span>
<span class="w">            </span><span class="n">Product</span><span class="w"> </span><span class="n">product</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">productUseCase</span><span class="p">.</span><span class="na">findByCode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">orElseThrow</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ProductNotFoundException</span><span class="p">(</span><span class="n">code</span><span class="p">));</span>

<span class="w">            </span><span class="n">GetProductResponse</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetProductResponse</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">setProduct</span><span class="p">(</span><span class="n">converter</span><span class="p">.</span><span class="na">toProto</span><span class="p">(</span><span class="n">product</span><span class="p">))</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">            </span><span class="n">responseObserver</span><span class="p">.</span><span class="na">onNext</span><span class="p">(</span><span class="n">response</span><span class="p">);</span>
<span class="w">            </span><span class="n">responseObserver</span><span class="p">.</span><span class="na">onCompleted</span><span class="p">();</span>

<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">ProductNotFoundException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">log</span><span class="p">.</span><span class="na">warn</span><span class="p">(</span><span class="s">&quot;Product not found: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getProductCode</span><span class="p">());</span>
<span class="w">            </span><span class="n">responseObserver</span><span class="p">.</span><span class="na">onError</span><span class="p">(</span>
<span class="w">                </span><span class="n">io</span><span class="p">.</span><span class="na">grpc</span><span class="p">.</span><span class="na">Status</span><span class="p">.</span><span class="na">NOT_FOUND</span>
<span class="w">                    </span><span class="p">.</span><span class="na">withDescription</span><span class="p">(</span><span class="s">&quot;商品が見つかりません: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getProductCode</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">asRuntimeException</span><span class="p">()</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">log</span><span class="p">.</span><span class="na">error</span><span class="p">(</span><span class="s">&quot;Error getting product&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">);</span>
<span class="w">            </span><span class="n">responseObserver</span><span class="p">.</span><span class="na">onError</span><span class="p">(</span>
<span class="w">                </span><span class="n">io</span><span class="p">.</span><span class="na">grpc</span><span class="p">.</span><span class="na">Status</span><span class="p">.</span><span class="na">INTERNAL</span>
<span class="w">                    </span><span class="p">.</span><span class="na">withDescription</span><span class="p">(</span><span class="s">&quot;内部エラーが発生しました&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">withCause</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">asRuntimeException</span><span class="p">()</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * サーバーストリーミング RPC: 商品一覧取得</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">listProducts</span><span class="p">(</span><span class="n">ListProductsRequest</span><span class="w"> </span><span class="n">request</span><span class="p">,</span>
<span class="w">                             </span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">Product</span><span class="o">&gt;</span><span class="w"> </span><span class="n">responseObserver</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;listProducts: category={}, keyword={}&quot;</span><span class="p">,</span>
<span class="w">                 </span><span class="n">request</span><span class="p">.</span><span class="na">getCategory</span><span class="p">(),</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getKeyword</span><span class="p">());</span>

<span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Product</span><span class="o">&gt;</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">productUseCase</span><span class="p">.</span><span class="na">findAll</span><span class="p">(</span>
<span class="w">                </span><span class="n">converter</span><span class="p">.</span><span class="na">toCriteria</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="w">            </span><span class="p">);</span>

<span class="w">            </span><span class="c1">// ストリーミングで商品を1件ずつ送信</span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Product</span><span class="w"> </span><span class="n">product</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">products</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">responseObserver</span><span class="p">.</span><span class="na">onNext</span><span class="p">(</span><span class="n">converter</span><span class="p">.</span><span class="na">toProto</span><span class="p">(</span><span class="n">product</span><span class="p">));</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="n">responseObserver</span><span class="p">.</span><span class="na">onCompleted</span><span class="p">();</span>
<span class="w">            </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;listProducts completed: {} items&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">products</span><span class="p">.</span><span class="na">size</span><span class="p">());</span>

<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">log</span><span class="p">.</span><span class="na">error</span><span class="p">(</span><span class="s">&quot;Error listing products&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">);</span>
<span class="w">            </span><span class="n">responseObserver</span><span class="p">.</span><span class="na">onError</span><span class="p">(</span>
<span class="w">                </span><span class="n">io</span><span class="p">.</span><span class="na">grpc</span><span class="p">.</span><span class="na">Status</span><span class="p">.</span><span class="na">INTERNAL</span>
<span class="w">                    </span><span class="p">.</span><span class="na">withDescription</span><span class="p">(</span><span class="s">&quot;内部エラーが発生しました&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">asRuntimeException</span><span class="p">()</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * クライアントストリーミング RPC: 商品一括登録</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">BulkCreateProductRequest</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">bulkCreateProducts</span><span class="p">(</span>
<span class="w">            </span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">BulkCreateProductResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="n">responseObserver</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;bulkCreateProducts: started&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="n">AtomicInteger</span><span class="w"> </span><span class="n">successCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AtomicInteger</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">        </span><span class="n">AtomicInteger</span><span class="w"> </span><span class="n">failureCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AtomicInteger</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">ErrorDetail</span><span class="o">&gt;</span><span class="w"> </span><span class="n">errors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">BulkCreateProductRequest</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nd">@Override</span>
<span class="w">            </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onNext</span><span class="p">(</span><span class="n">BulkCreateProductRequest</span><span class="w"> </span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">CreateProductRequest</span><span class="w"> </span><span class="n">productRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getProduct</span><span class="p">();</span>
<span class="w">                    </span><span class="n">Product</span><span class="w"> </span><span class="n">product</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">converter</span><span class="p">.</span><span class="na">toDomain</span><span class="p">(</span><span class="n">productRequest</span><span class="p">);</span>
<span class="w">                    </span><span class="n">productUseCase</span><span class="p">.</span><span class="na">create</span><span class="p">(</span><span class="n">product</span><span class="p">);</span>
<span class="w">                    </span><span class="n">successCount</span><span class="p">.</span><span class="na">incrementAndGet</span><span class="p">();</span>
<span class="w">                    </span><span class="n">log</span><span class="p">.</span><span class="na">debug</span><span class="p">(</span><span class="s">&quot;Created product: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">productRequest</span><span class="p">.</span><span class="na">getProductCode</span><span class="p">());</span>

<span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">failureCount</span><span class="p">.</span><span class="na">incrementAndGet</span><span class="p">();</span>
<span class="w">                    </span><span class="n">errors</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">ErrorDetail</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">                        </span><span class="p">.</span><span class="na">setField</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getProduct</span><span class="p">().</span><span class="na">getProductCode</span><span class="p">())</span>
<span class="w">                        </span><span class="p">.</span><span class="na">setMessage</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">())</span>
<span class="w">                        </span><span class="p">.</span><span class="na">build</span><span class="p">());</span>
<span class="w">                    </span><span class="n">log</span><span class="p">.</span><span class="na">warn</span><span class="p">(</span><span class="s">&quot;Failed to create product: {}&quot;</span><span class="p">,</span>
<span class="w">                             </span><span class="n">request</span><span class="p">.</span><span class="na">getProduct</span><span class="p">().</span><span class="na">getProductCode</span><span class="p">(),</span><span class="w"> </span><span class="n">e</span><span class="p">);</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="nd">@Override</span>
<span class="w">            </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onError</span><span class="p">(</span><span class="n">Throwable</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">log</span><span class="p">.</span><span class="na">error</span><span class="p">(</span><span class="s">&quot;bulkCreateProducts error&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">t</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="nd">@Override</span>
<span class="w">            </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onCompleted</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">BulkCreateProductResponse</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BulkCreateProductResponse</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">setSuccessCount</span><span class="p">(</span><span class="n">successCount</span><span class="p">.</span><span class="na">get</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">setFailureCount</span><span class="p">(</span><span class="n">failureCount</span><span class="p">.</span><span class="na">get</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">addAllErrors</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">                </span><span class="n">responseObserver</span><span class="p">.</span><span class="na">onNext</span><span class="p">(</span><span class="n">response</span><span class="p">);</span>
<span class="w">                </span><span class="n">responseObserver</span><span class="p">.</span><span class="na">onCompleted</span><span class="p">();</span>

<span class="w">                </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;bulkCreateProducts completed: success={}, failure={}&quot;</span><span class="p">,</span>
<span class="w">                         </span><span class="n">successCount</span><span class="p">.</span><span class="na">get</span><span class="p">(),</span><span class="w"> </span><span class="n">failureCount</span><span class="p">.</span><span class="na">get</span><span class="p">());</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h3 id="149-productconverter-proto">14.9 ProductConverter（ドメイン ⇔ Proto 変換）<a class="headerlink" href="#149-productconverter-proto" title="Permanent link">&para;</a></h3>
<details>
<summary>コード例: ProductConverter.java</summary>

<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.sales.infrastructure.grpc.converter</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sales.domain.model.product.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sales.infrastructure.grpc.proto.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Component</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 商品ドメインモデル ⇔ Protocol Buffers 変換</span>
<span class="cm"> */</span>
<span class="nd">@Component</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ProductConverter</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * ドメインモデル → Proto</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">com</span><span class="p">.</span><span class="na">example</span><span class="p">.</span><span class="na">sales</span><span class="p">.</span><span class="na">infrastructure</span><span class="p">.</span><span class="na">grpc</span><span class="p">.</span><span class="na">proto</span><span class="p">.</span><span class="na">Product</span><span class="w"> </span><span class="nf">toProto</span><span class="p">(</span><span class="n">Product</span><span class="w"> </span><span class="n">domain</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">com</span><span class="p">.</span><span class="na">example</span><span class="p">.</span><span class="na">sales</span><span class="p">.</span><span class="na">infrastructure</span><span class="p">.</span><span class="na">grpc</span><span class="p">.</span><span class="na">proto</span><span class="p">.</span><span class="na">Product</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">setProductCode</span><span class="p">(</span><span class="n">domain</span><span class="p">.</span><span class="na">getProductCode</span><span class="p">().</span><span class="na">getValue</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">setProductName</span><span class="p">(</span><span class="n">domain</span><span class="p">.</span><span class="na">getProductName</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">setCategory</span><span class="p">(</span><span class="n">toProtoCategory</span><span class="p">(</span><span class="n">domain</span><span class="p">.</span><span class="na">getCategory</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">setTaxCategory</span><span class="p">(</span><span class="n">toProtoTaxCategory</span><span class="p">(</span><span class="n">domain</span><span class="p">.</span><span class="na">getTaxCategory</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">setStandardPrice</span><span class="p">(</span><span class="n">toProtoMoney</span><span class="p">(</span><span class="n">domain</span><span class="p">.</span><span class="na">getStandardPrice</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">setProductGroupCode</span><span class="p">(</span><span class="n">nullToEmpty</span><span class="p">(</span><span class="n">domain</span><span class="p">.</span><span class="na">getProductGroupCode</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">setUnitCode</span><span class="p">(</span><span class="n">nullToEmpty</span><span class="p">(</span><span class="n">domain</span><span class="p">.</span><span class="na">getUnitCode</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">setIsActive</span><span class="p">(</span><span class="n">domain</span><span class="p">.</span><span class="na">isActive</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * CreateProductRequest → ドメインモデル</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Product</span><span class="w"> </span><span class="nf">toDomain</span><span class="p">(</span><span class="n">CreateProductRequest</span><span class="w"> </span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Product</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">productCode</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ProductCode</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getProductCode</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">productName</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getProductName</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">category</span><span class="p">(</span><span class="n">toDomainCategory</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getCategory</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">taxCategory</span><span class="p">(</span><span class="n">toDomainTaxCategory</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getTaxCategory</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">standardPrice</span><span class="p">(</span><span class="n">fromProtoMoney</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getStandardPrice</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">productGroupCode</span><span class="p">(</span><span class="n">emptyToNull</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getProductGroupCode</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">unitCode</span><span class="p">(</span><span class="n">emptyToNull</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getUnitCode</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">isActive</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// === 区分変換 ===</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ProductCategory</span><span class="w"> </span><span class="nf">toProtoCategory</span><span class="p">(</span>
<span class="w">            </span><span class="n">com</span><span class="p">.</span><span class="na">example</span><span class="p">.</span><span class="na">sales</span><span class="p">.</span><span class="na">domain</span><span class="p">.</span><span class="na">model</span><span class="p">.</span><span class="na">product</span><span class="p">.</span><span class="na">ProductCategory</span><span class="w"> </span><span class="n">domain</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">domain</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">GOODS</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">ProductCategory</span><span class="p">.</span><span class="na">PRODUCT_CATEGORY_GOODS</span><span class="p">;</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">SERVICE</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">ProductCategory</span><span class="p">.</span><span class="na">PRODUCT_CATEGORY_SERVICE</span><span class="p">;</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">SUPPLY</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">ProductCategory</span><span class="p">.</span><span class="na">PRODUCT_CATEGORY_SUPPLY</span><span class="p">;</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// === Money 変換 ===</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Money</span><span class="w"> </span><span class="nf">toProtoMoney</span><span class="p">(</span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">amount</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">amount</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">Money</span><span class="p">.</span><span class="na">getDefaultInstance</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="kt">long</span><span class="w"> </span><span class="n">units</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">amount</span><span class="p">.</span><span class="na">longValue</span><span class="p">();</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">nanos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">amount</span><span class="p">.</span><span class="na">remainder</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ONE</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">multiply</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="mi">1_000_000_000</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">intValue</span><span class="p">();</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Money</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">setUnits</span><span class="p">(</span><span class="n">units</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">setNanos</span><span class="p">(</span><span class="n">nanos</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">setCurrency</span><span class="p">(</span><span class="s">&quot;JPY&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="nf">fromProtoMoney</span><span class="p">(</span><span class="n">Money</span><span class="w"> </span><span class="n">money</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">money</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">money</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">Money</span><span class="p">.</span><span class="na">getDefaultInstance</span><span class="p">()))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">money</span><span class="p">.</span><span class="na">getUnits</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">money</span><span class="p">.</span><span class="na">getNanos</span><span class="p">(),</span><span class="w"> </span><span class="mi">9</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// === ユーティリティ ===</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">nullToEmpty</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">emptyToNull</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">()</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h3 id="1410-grpc">14.10 gRPC インターセプター<a class="headerlink" href="#1410-grpc" title="Permanent link">&para;</a></h3>
<h4 id="logginginterceptorjava">LoggingInterceptor.java<a class="headerlink" href="#logginginterceptorjava" title="Permanent link">&para;</a></h4>
<details>
<summary>コード例: LoggingInterceptor.java</summary>

<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.sales.infrastructure.grpc.interceptor</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">io.grpc.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">net.devh.boot.grpc.server.interceptor.GrpcGlobalServerInterceptor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.slf4j.Logger</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.slf4j.LoggerFactory</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.slf4j.MDC</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.UUID</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * gRPC ログインターセプター</span>
<span class="cm"> */</span>
<span class="nd">@GrpcGlobalServerInterceptor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">LoggingInterceptor</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">ServerInterceptor</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Logger</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LoggerFactory</span><span class="p">.</span><span class="na">getLogger</span><span class="p">(</span><span class="n">LoggingInterceptor</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="o">&lt;</span><span class="n">ReqT</span><span class="p">,</span><span class="w"> </span><span class="n">RespT</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ServerCall</span><span class="p">.</span><span class="na">Listener</span><span class="o">&lt;</span><span class="n">ReqT</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">interceptCall</span><span class="p">(</span>
<span class="w">            </span><span class="n">ServerCall</span><span class="o">&lt;</span><span class="n">ReqT</span><span class="p">,</span><span class="w"> </span><span class="n">RespT</span><span class="o">&gt;</span><span class="w"> </span><span class="n">call</span><span class="p">,</span>
<span class="w">            </span><span class="n">Metadata</span><span class="w"> </span><span class="n">headers</span><span class="p">,</span>
<span class="w">            </span><span class="n">ServerCallHandler</span><span class="o">&lt;</span><span class="n">ReqT</span><span class="p">,</span><span class="w"> </span><span class="n">RespT</span><span class="o">&gt;</span><span class="w"> </span><span class="n">next</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">requestId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UUID</span><span class="p">.</span><span class="na">randomUUID</span><span class="p">().</span><span class="na">toString</span><span class="p">().</span><span class="na">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">);</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">methodName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">call</span><span class="p">.</span><span class="na">getMethodDescriptor</span><span class="p">().</span><span class="na">getFullMethodName</span><span class="p">();</span>
<span class="w">        </span><span class="kt">long</span><span class="w"> </span><span class="n">startTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">currentTimeMillis</span><span class="p">();</span>

<span class="w">        </span><span class="n">MDC</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;requestId&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">requestId</span><span class="p">);</span>
<span class="w">        </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;gRPC Request started: method={}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">methodName</span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ForwardingServerCallListener</span><span class="p">.</span><span class="na">SimpleForwardingServerCallListener</span><span class="o">&lt;&gt;</span><span class="p">(</span>
<span class="w">                </span><span class="n">next</span><span class="p">.</span><span class="na">startCall</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ForwardingServerCall</span><span class="p">.</span><span class="na">SimpleForwardingServerCall</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="n">call</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nd">@Override</span>
<span class="w">                    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="n">Status</span><span class="w"> </span><span class="n">status</span><span class="p">,</span><span class="w"> </span><span class="n">Metadata</span><span class="w"> </span><span class="n">trailers</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="kt">long</span><span class="w"> </span><span class="n">duration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">currentTimeMillis</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">startTime</span><span class="p">;</span>
<span class="w">                        </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;gRPC Request completed: method={}, status={}, duration={}ms&quot;</span><span class="p">,</span>
<span class="w">                                 </span><span class="n">methodName</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="p">.</span><span class="na">getCode</span><span class="p">(),</span><span class="w"> </span><span class="n">duration</span><span class="p">);</span>
<span class="w">                        </span><span class="n">MDC</span><span class="p">.</span><span class="na">remove</span><span class="p">(</span><span class="s">&quot;requestId&quot;</span><span class="p">);</span>
<span class="w">                        </span><span class="kd">super</span><span class="p">.</span><span class="na">close</span><span class="p">(</span><span class="n">status</span><span class="p">,</span><span class="w"> </span><span class="n">trailers</span><span class="p">);</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">},</span><span class="w"> </span><span class="n">headers</span><span class="p">))</span><span class="w"> </span><span class="p">{};</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h3 id="1411-grpcurl">14.11 grpcurl による動作確認<a class="headerlink" href="#1411-grpcurl" title="Permanent link">&para;</a></h3>
<details>
<summary>コード例: grpcurl コマンド</summary>

<div class="highlight"><pre><span></span><code><span class="c1"># サービス一覧取得</span>
grpcurl<span class="w"> </span>-plaintext<span class="w"> </span>localhost:9090<span class="w"> </span>list

<span class="c1"># メソッド一覧取得</span>
grpcurl<span class="w"> </span>-plaintext<span class="w"> </span>localhost:9090<span class="w"> </span>list<span class="w"> </span>com.example.sales.ProductService

<span class="c1"># 商品取得（単項 RPC）</span>
grpcurl<span class="w"> </span>-plaintext<span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;product_code&quot;: &quot;PRD001&quot;}&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>localhost:9090<span class="w"> </span>com.example.sales.ProductService/GetProduct

<span class="c1"># 商品一覧取得（サーバーストリーミング）</span>
grpcurl<span class="w"> </span>-plaintext<span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;page&quot;: {&quot;page&quot;: 0, &quot;size&quot;: 10}}&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>localhost:9090<span class="w"> </span>com.example.sales.ProductService/ListProducts

<span class="c1"># 商品登録</span>
grpcurl<span class="w"> </span>-plaintext<span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">  &quot;product_code&quot;: &quot;PRD100&quot;,</span>
<span class="s1">  &quot;product_name&quot;: &quot;新商品&quot;,</span>
<span class="s1">  &quot;category&quot;: &quot;PRODUCT_CATEGORY_GOODS&quot;,</span>
<span class="s1">  &quot;tax_category&quot;: &quot;TAX_CATEGORY_TAXABLE&quot;,</span>
<span class="s1">  &quot;standard_price&quot;: {&quot;units&quot;: 1000, &quot;currency&quot;: &quot;JPY&quot;}</span>
<span class="s1">}&#39;</span><span class="w"> </span>localhost:9090<span class="w"> </span>com.example.sales.ProductService/CreateProduct
</code></pre></div>

</details>

<hr />
<h2 id="15-api">第15章：マスタ API の実装<a class="headerlink" href="#15-api" title="Permanent link">&para;</a></h2>
<h3 id="151-api">15.1 商品マスタ API の詳細設計<a class="headerlink" href="#151-api" title="Permanent link">&para;</a></h3>
<p>第14章で基礎を学んだ gRPC サービスを、商品・取引先・倉庫マスタに対して拡張します。</p>
<p><strong>商品マスタ API の機能一覧：</strong></p>
<table>
<thead>
<tr>
<th>メソッド</th>
<th>RPC パターン</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>GetProduct</td>
<td>単項</td>
<td>商品コードで取得</td>
</tr>
<tr>
<td>CreateProduct</td>
<td>単項</td>
<td>商品登録</td>
</tr>
<tr>
<td>UpdateProduct</td>
<td>単項</td>
<td>商品更新</td>
</tr>
<tr>
<td>DeleteProduct</td>
<td>単項</td>
<td>商品削除（論理削除）</td>
</tr>
<tr>
<td>ListProducts</td>
<td>サーバーストリーミング</td>
<td>商品一覧取得</td>
</tr>
<tr>
<td>BulkCreateProducts</td>
<td>クライアントストリーミング</td>
<td>一括登録</td>
</tr>
<tr>
<td>BulkUpdateProducts</td>
<td>クライアントストリーミング</td>
<td>一括更新</td>
</tr>
<tr>
<td>CheckProductExists</td>
<td>単項</td>
<td>存在チェック</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="152-api">15.2 取引先マスタ API の実装<a class="headerlink" href="#152-api" title="Permanent link">&para;</a></h3>
<h4 id="srcmainprotopartnerproto">src/main/proto/partner.proto<a class="headerlink" href="#srcmainprotopartnerproto" title="Permanent link">&para;</a></h4>
<details>
<summary>コード例: partner.proto</summary>

<div class="highlight"><pre><span></span><code><span class="k">syntax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;proto3&quot;</span><span class="p">;</span>

<span class="kn">package</span><span class="w"> </span><span class="nn">com</span><span class="o">.</span><span class="n">example.sales</span><span class="p">;</span>

<span class="k">option</span><span class="w"> </span><span class="na">java_package</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;com.example.sales.infrastructure.grpc.proto&quot;</span><span class="p">;</span>
<span class="k">option</span><span class="w"> </span><span class="na">java_outer_classname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;PartnerProto&quot;</span><span class="p">;</span>
<span class="k">option</span><span class="w"> </span><span class="na">java_multiple_files</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>

<span class="k">import</span><span class="w"> </span><span class="s">&quot;common.proto&quot;</span><span class="p">;</span>

<span class="c1">// 取引先区分</span>
<span class="kd">enum</span><span class="w"> </span><span class="n">PartnerType</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">PARTNER_TYPE_UNSPECIFIED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="na">PARTNER_TYPE_CUSTOMER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">        </span><span class="c1">// 顧客</span>
<span class="w">    </span><span class="na">PARTNER_TYPE_SUPPLIER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w">        </span><span class="c1">// 仕入先</span>
<span class="w">    </span><span class="na">PARTNER_TYPE_BOTH</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w">            </span><span class="c1">// 顧客兼仕入先</span>
<span class="p">}</span>

<span class="c1">// 取引先ステータス</span>
<span class="kd">enum</span><span class="w"> </span><span class="n">PartnerStatus</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">PARTNER_STATUS_UNSPECIFIED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="na">PARTNER_STATUS_ACTIVE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">        </span><span class="c1">// 取引中</span>
<span class="w">    </span><span class="na">PARTNER_STATUS_SUSPENDED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w">     </span><span class="c1">// 取引停止</span>
<span class="w">    </span><span class="na">PARTNER_STATUS_CLOSED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w">        </span><span class="c1">// 取引終了</span>
<span class="p">}</span>

<span class="c1">// 取引先メッセージ</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">Partner</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">partner_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">partner_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">partner_name_kana</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">    </span><span class="n">PartnerType</span><span class="w"> </span><span class="na">partner_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="w">    </span><span class="n">PartnerStatus</span><span class="w"> </span><span class="na">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="w">    </span><span class="n">Address</span><span class="w"> </span><span class="na">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span>
<span class="w">    </span><span class="n">Contact</span><span class="w"> </span><span class="na">contact</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="p">;</span>
<span class="w">    </span><span class="n">CustomerInfo</span><span class="w"> </span><span class="na">customer_info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span><span class="w">    </span><span class="c1">// 顧客情報（顧客の場合）</span>
<span class="w">    </span><span class="n">SupplierInfo</span><span class="w"> </span><span class="na">supplier_info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">9</span><span class="p">;</span><span class="w">    </span><span class="c1">// 仕入先情報（仕入先の場合）</span>
<span class="w">    </span><span class="n">AuditInfo</span><span class="w"> </span><span class="na">audit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 与信チェック</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">CheckCreditRequest</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">partner_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="n">Money</span><span class="w"> </span><span class="na">amount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w">                  </span><span class="c1">// チェック金額</span>
<span class="p">}</span>

<span class="kd">message</span><span class="w"> </span><span class="nc">CheckCreditResponse</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="na">is_within_limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">          </span><span class="c1">// 限度内か</span>
<span class="w">    </span><span class="n">Money</span><span class="w"> </span><span class="na">credit_limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w">            </span><span class="c1">// 与信限度額</span>
<span class="w">    </span><span class="n">Money</span><span class="w"> </span><span class="na">current_receivable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w">      </span><span class="c1">// 現在売掛金残高</span>
<span class="w">    </span><span class="n">Money</span><span class="w"> </span><span class="na">available_credit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span><span class="w">        </span><span class="c1">// 利用可能与信額</span>
<span class="p">}</span>

<span class="c1">// === サービス定義 ===</span>

<span class="kd">service</span><span class="w"> </span><span class="n">PartnerService</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 単項 RPC</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">GetPartner</span><span class="p">(</span><span class="n">GetPartnerRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">GetPartnerResponse</span><span class="p">);</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">CreatePartner</span><span class="p">(</span><span class="n">CreatePartnerRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">CreatePartnerResponse</span><span class="p">);</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">CheckCredit</span><span class="p">(</span><span class="n">CheckCreditRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">CheckCreditResponse</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// サーバーストリーミング RPC</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">ListPartners</span><span class="p">(</span><span class="n">ListPartnersRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">stream</span><span class="w"> </span><span class="n">Partner</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h3 id="153">15.3 テスト実装<a class="headerlink" href="#153" title="Permanent link">&para;</a></h3>
<details>
<summary>コード例: GrpcProductServiceTest.java</summary>

<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span><span class="p">(</span><span class="n">webEnvironment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SpringBootTest</span><span class="p">.</span><span class="na">WebEnvironment</span><span class="p">.</span><span class="na">DEFINED_PORT</span><span class="p">)</span>
<span class="nd">@ActiveProfiles</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">GrpcProductServiceTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ManagedChannel</span><span class="w"> </span><span class="n">channel</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ProductServiceGrpc</span><span class="p">.</span><span class="na">ProductServiceBlockingStub</span><span class="w"> </span><span class="n">blockingStub</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ProductServiceGrpc</span><span class="p">.</span><span class="na">ProductServiceStub</span><span class="w"> </span><span class="n">asyncStub</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@BeforeEach</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setUp</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">channel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ManagedChannelBuilder</span><span class="p">.</span><span class="na">forAddress</span><span class="p">(</span><span class="s">&quot;localhost&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">9999</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">usePlaintext</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">        </span><span class="n">blockingStub</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ProductServiceGrpc</span><span class="p">.</span><span class="na">newBlockingStub</span><span class="p">(</span><span class="n">channel</span><span class="p">);</span>
<span class="w">        </span><span class="n">asyncStub</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ProductServiceGrpc</span><span class="p">.</span><span class="na">newStub</span><span class="p">(</span><span class="n">channel</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@AfterEach</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">tearDown</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">channel</span><span class="p">.</span><span class="na">shutdownNow</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;商品の CRUD 操作が正常に動作すること&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">productCrud</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 登録</span>
<span class="w">        </span><span class="n">CreateProductResponse</span><span class="w"> </span><span class="n">createResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">blockingStub</span><span class="p">.</span><span class="na">createProduct</span><span class="p">(</span>
<span class="w">            </span><span class="n">CreateProductRequest</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">setProductCode</span><span class="p">(</span><span class="s">&quot;PRD999&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">setProductName</span><span class="p">(</span><span class="s">&quot;テスト商品&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">setCategory</span><span class="p">(</span><span class="n">ProductCategory</span><span class="p">.</span><span class="na">PRODUCT_CATEGORY_GOODS</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">setTaxCategory</span><span class="p">(</span><span class="n">TaxCategory</span><span class="p">.</span><span class="na">TAX_CATEGORY_TAXABLE</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">setStandardPrice</span><span class="p">(</span><span class="n">Money</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">().</span><span class="na">setUnits</span><span class="p">(</span><span class="mi">1000</span><span class="p">).</span><span class="na">setCurrency</span><span class="p">(</span><span class="s">&quot;JPY&quot;</span><span class="p">))</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">createResponse</span><span class="p">.</span><span class="na">getProduct</span><span class="p">().</span><span class="na">getProductCode</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;PRD999&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// 取得</span>
<span class="w">        </span><span class="n">GetProductResponse</span><span class="w"> </span><span class="n">getResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">blockingStub</span><span class="p">.</span><span class="na">getProduct</span><span class="p">(</span>
<span class="w">            </span><span class="n">GetProductRequest</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">setProductCode</span><span class="p">(</span><span class="s">&quot;PRD999&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">getResponse</span><span class="p">.</span><span class="na">getProduct</span><span class="p">().</span><span class="na">getProductName</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;テスト商品&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;サーバーストリーミングで商品一覧を取得できること&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">listProductsStreaming</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">InterruptedException</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">CountDownLatch</span><span class="w"> </span><span class="n">latch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CountDownLatch</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Product</span><span class="o">&gt;</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>

<span class="w">        </span><span class="n">asyncStub</span><span class="p">.</span><span class="na">listProducts</span><span class="p">(</span>
<span class="w">            </span><span class="n">ListProductsRequest</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">setPage</span><span class="p">(</span><span class="n">PageRequest</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">().</span><span class="na">setPage</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="na">setSize</span><span class="p">(</span><span class="mi">100</span><span class="p">).</span><span class="na">build</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">(),</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">StreamObserver</span><span class="o">&lt;&gt;</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nd">@Override</span>
<span class="w">                </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onNext</span><span class="p">(</span><span class="n">Product</span><span class="w"> </span><span class="n">product</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">products</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">product</span><span class="p">);</span>
<span class="w">                </span><span class="p">}</span>

<span class="w">                </span><span class="nd">@Override</span>
<span class="w">                </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onError</span><span class="p">(</span><span class="n">Throwable</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">latch</span><span class="p">.</span><span class="na">countDown</span><span class="p">();</span>
<span class="w">                </span><span class="p">}</span>

<span class="w">                </span><span class="nd">@Override</span>
<span class="w">                </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onCompleted</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">latch</span><span class="p">.</span><span class="na">countDown</span><span class="p">();</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="n">latch</span><span class="p">.</span><span class="na">await</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">TimeUnit</span><span class="p">.</span><span class="na">SECONDS</span><span class="p">);</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">products</span><span class="p">).</span><span class="na">isNotEmpty</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h2 id="16-api">第16章：トランザクション API の実装<a class="headerlink" href="#16-api" title="Permanent link">&para;</a></h2>
<h3 id="161-api">16.1 トランザクション API の設計方針<a class="headerlink" href="#161-api" title="Permanent link">&para;</a></h3>
<h4 id="rpc">RPC パターンの使い分け<a class="headerlink" href="#rpc" title="Permanent link">&para;</a></h4>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjI2MXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MTIwMXB4O2hlaWdodDoyNjFweDtiYWNrZ3JvdW5kOiNGRUZFRkU7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxMjAxIDI2MSIgd2lkdGg9IjEyMDFweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjxyZWN0IGZpbGw9IiNGRUZFRkUiIGhlaWdodD0iMjYxIiBzdHlsZT0ic3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTIwMSIgeD0iMCIgeT0iMCIvPjwhLS1jbHVzdGVyIFRyYW5zYWN0aW9uIEFQSSAtIFJQQyBQYXR0ZXJucy0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLXF1YWxpZmllZC1uYW1lPSJUcmFuc2FjdGlvbiBBUEkgLSBSUEMgUGF0dGVybnMiIGRhdGEtc291cmNlLWxpbmU9IjUiIGlkPSJlbnQwMDAyIj48cGF0aCBkPSJNOC41LDYgTDI1My4yNDIyLDYgQTMuNzUsMy43NSAwIDAgMSAyNTUuNzQyMiw4LjUgTDI2Mi43NDIyLDI4LjI5NjkgTDExOTEuNSwyOC4yOTY5IEEyLjUsMi41IDAgMCAxIDExOTQsMzAuNzk2OSBMMTE5NCwxNjcuNjggQTIuNSwyLjUgMCAwIDEgMTE5MS41LDE3MC4xOCBMOC41LDE3MC4xOCBBMi41LDIuNSAwIDAgMSA2LDE2Ny42OCBMNiw4LjUgQTIuNSwyLjUgMCAwIDEgOC41LDYiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjYiIHgyPSIyNjIuNzQyMiIgeTE9IjI4LjI5NjkiIHkyPSIyOC4yOTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI0My43NDIyIiB4PSIxMCIgeT0iMjAuOTk1MSI+VHJhbnNhY3Rpb24gQVBJIC0gUlBDIFBhdHRlcm5zPC90ZXh0PjwvZz48IS0tY2xhc3MgdW5hcnktLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJUcmFuc2FjdGlvbiBBUEkgLSBSUEMgUGF0dGVybnMudW5hcnkiIGRhdGEtc291cmNlLWxpbmU9IjciIGlkPSJlbnQwMDAzIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjExMy4xODc1IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIyMzkuNDU4NCIgeD0iMjIuMjciIHk9IjQxIi8+PGVsbGlwc2UgY3g9IjEwNy41NTE1IiBjeT0iNTciIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTExMC41MjAzLDYyLjY0MDYgUTEwOS45NDIxLDYyLjkzNzUgMTA5LjMwMTUsNjMuMDc4MSBRMTA4LjY2MDksNjMuMjM0NCAxMDcuOTU3OCw2My4yMzQ0IFExMDUuNDU3OCw2My4yMzQ0IDEwNC4xMjk2LDYxLjU5MzggUTEwMi44MTcxLDU5LjkzNzUgMTAyLjgxNzEsNTYuODEyNSBRMTAyLjgxNzEsNTMuNjg3NSAxMDQuMTI5Niw1Mi4wMzEzIFExMDUuNDU3OCw1MC4zNzUgMTA3Ljk1NzgsNTAuMzc1IFExMDguNjYwOSw1MC4zNzUgMTA5LjMwMTUsNTAuNTMxMyBRMTA5Ljk1NzgsNTAuNjg3NSAxMTAuNTIwMyw1MC45ODQ0IEwxMTAuNTIwMyw1My43MDMxIFExMDkuODk1Myw1My4xMjUgMTA5LjMwMTUsNTIuODU5NCBRMTA4LjcwNzgsNTIuNTc4MSAxMDguMDgyOCw1Mi41NzgxIFExMDYuNzM5LDUyLjU3ODEgMTA2LjA1MTUsNTMuNjU2MyBRMTA1LjM2NCw1NC43MTg4IDEwNS4zNjQsNTYuODEyNSBRMTA1LjM2NCw1OC45MDYzIDEwNi4wNTE1LDU5Ljk4NDQgUTEwNi43MzksNjEuMDQ2OSAxMDguMDgyOCw2MS4wNDY5IFExMDguNzA3OCw2MS4wNDY5IDEwOS4zMDE1LDYwLjc4MTMgUTEwOS44OTUzLDYwLjUgMTEwLjUyMDMsNTkuOTIxOSBMMTEwLjUyMDMsNjIuNjQwNiBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYwLjM5NTQiIHg9IjEyOC4wNTE1IiB5PSI2MS44NDY3Ij4mIzIxMzM2OyYjMzg5MTc7IFJQQzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyMy4yNyIgeDI9IjI2MC43Mjg0IiB5MT0iNzMiIHkyPSI3MyIvPjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFVCTElDX0ZJRUxEIj48ZWxsaXBzZSBjeD0iMzMuMjciIGN5PSI4Ni42NDg0IiBmaWxsPSJub25lIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTcwLjg1NzEiIHg9IjQyLjI3IiB5PSI4OS45OTUxIj5DcmVhdGVPcmRlciYjNjUyODg7JiMyMTQ2MzsmIzI3ODgwOyYjMzAzMzE7JiMzNzY4MjsmIzY1Mjg5OzwvdGV4dD48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IlBVQkxJQ19GSUVMRCI+PGVsbGlwc2UgY3g9IjMzLjI3IiBjeT0iMTAyLjk0NTMiIGZpbGw9Im5vbmUiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDguOTgyMSIgeD0iNDIuMjciIHk9IjEwNi4yOTIiPkdldE9yZGVyJiM2NTI4ODsmIzIxNDYzOyYjMjc4ODA7JiMyMTQ2MjsmIzI0NDcxOyYjNjUyODk7PC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFVCTElDX0ZJRUxEIj48ZWxsaXBzZSBjeD0iMzMuMjciIGN5PSIxMTkuMjQyMiIgZmlsbD0ibm9uZSIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE3OS40NTY3IiB4PSI0Mi4yNyIgeT0iMTIyLjU4ODkiPkNvbmZpcm1PcmRlciYjNjUyODg7JiMyMTQ2MzsmIzI3ODgwOyYjMzA5MDY7JiMyMzQ1MDsmIzY1Mjg5OzwvdGV4dD48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IlBVQkxJQ19GSUVMRCI+PGVsbGlwc2UgY3g9IjMzLjI3IiBjeT0iMTM1LjUzOTEiIGZpbGw9Im5vbmUiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMTMuNDU4NCIgeD0iNDIuMjciIHk9IjEzOC44ODU3Ij5DYW5jZWxPcmRlciYjNjUyODg7JiMyMTQ2MzsmIzI3ODgwOyYjMTI0NjE7JiMxMjUxNTsmIzEyNTMxOyYjMTI0NzU7JiMxMjUyMzsmIzY1Mjg5OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyMy4yNyIgeDI9IjI2MC43Mjg0IiB5MT0iMTQ2LjE4NzUiIHkyPSIxNDYuMTg3NSIvPjwvZz48IS0tY2xhc3Mgc2VydmVyX3N0cmVhbS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IlRyYW5zYWN0aW9uIEFQSSAtIFJQQyBQYXR0ZXJucy5zZXJ2ZXJfc3RyZWFtIiBkYXRhLXNvdXJjZS1saW5lPSIxNCIgaWQ9ImVudDAwMDQiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iOTYuODkwNiIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMjg4LjcxODQiIHg9IjI5Ni42NCIgeT0iNDkuMTUiLz48ZWxsaXBzZSBjeD0iMzU5Ljc0OTUiIGN5PSI2NS4xNSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMzYyLjcxODMsNzAuNzkwNiBRMzYyLjE0MDIsNzEuMDg3NSAzNjEuNDk5NSw3MS4yMjgxIFEzNjAuODU4OSw3MS4zODQ0IDM2MC4xNTU4LDcxLjM4NDQgUTM1Ny42NTU4LDcxLjM4NDQgMzU2LjMyNzcsNjkuNzQzNyBRMzU1LjAxNTIsNjguMDg3NSAzNTUuMDE1Miw2NC45NjI1IFEzNTUuMDE1Miw2MS44Mzc1IDM1Ni4zMjc3LDYwLjE4MTIgUTM1Ny42NTU4LDU4LjUyNSAzNjAuMTU1OCw1OC41MjUgUTM2MC44NTg5LDU4LjUyNSAzNjEuNDk5NSw1OC42ODEyIFEzNjIuMTU1OCw1OC44Mzc1IDM2Mi43MTgzLDU5LjEzNDQgTDM2Mi43MTgzLDYxLjg1MzEgUTM2Mi4wOTMzLDYxLjI3NSAzNjEuNDk5NSw2MS4wMDk0IFEzNjAuOTA1OCw2MC43MjgxIDM2MC4yODA4LDYwLjcyODEgUTM1OC45MzcsNjAuNzI4MSAzNTguMjQ5NSw2MS44MDYyIFEzNTcuNTYyLDYyLjg2ODcgMzU3LjU2Miw2NC45NjI1IFEzNTcuNTYyLDY3LjA1NjIgMzU4LjI0OTUsNjguMTM0NCBRMzU4LjkzNyw2OS4xOTY5IDM2MC4yODA4LDY5LjE5NjkgUTM2MC45MDU4LDY5LjE5NjkgMzYxLjQ5OTUsNjguOTMxMiBRMzYyLjA5MzMsNjguNjUgMzYyLjcxODMsNjguMDcxOSBMMzYyLjcxODMsNzAuNzkwNiBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1My45OTkzIiB4PSIzODAuMjQ5NSIgeT0iNjkuOTk2NyI+JiMxMjQ2OTsmIzEyNTQwOyYjMTI0OTY7JiMxMjU0MDsmIzEyNDczOyYjMTI0ODg7JiMxMjUyMjsmIzEyNTQwOyYjMTI1MTE7JiMxMjUzMTsmIzEyNDY0OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyOTcuNjQiIHgyPSI1ODQuMzU4NCIgeTE9IjgxLjE1IiB5Mj0iODEuMTUiLz48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IlBVQkxJQ19GSUVMRCI+PGVsbGlwc2UgY3g9IjMwNy42NCIgY3k9Ijk0Ljc5ODQiIGZpbGw9Im5vbmUiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTUuNzk3NSIgeD0iMzE2LjY0IiB5PSI5OC4xNDUxIj5MaXN0T3JkZXJzJiM2NTI4ODsmIzIxNDYzOyYjMjc4ODA7JiMxOTk2ODsmIzM1MjM5OyYjNjUyODk7PC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFVCTElDX0ZJRUxEIj48ZWxsaXBzZSBjeD0iMzA3LjY0IiBjeT0iMTExLjA5NTMiIGZpbGw9Im5vbmUiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNTUuMTIzNSIgeD0iMzE2LjY0IiB5PSIxMTQuNDQyIj5XYXRjaE9yZGVyU3RhdHVzJiM2NTI4ODsmIzEyNDczOyYjMTI0ODY7JiMxMjU0MDsmIzEyNDc5OyYjMTI0NzM7JiMzMDQzNTsmIzM1MjIyOyYjNjUyODk7PC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFVCTElDX0ZJRUxEIj48ZWxsaXBzZSBjeD0iMzA3LjY0IiBjeT0iMTI3LjM5MjIiIGZpbGw9Im5vbmUiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNjIuNzE4NCIgeD0iMzE2LjY0IiB5PSIxMzAuNzM4OSI+U3RyZWFtU2hpcG1lbnRQcm9ncmVzcyYjNjUyODg7JiMyMDk4NjsmIzMzNjU1OyYjMzY5MTQ7JiMyNTQzMTsmIzY1Mjg5OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyOTcuNjQiIHgyPSI1ODQuMzU4NCIgeTE9IjEzOC4wNDA2IiB5Mj0iMTM4LjA0MDYiLz48L2c+PCEtLWNsYXNzIGNsaWVudF9zdHJlYW0tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJUcmFuc2FjdGlvbiBBUEkgLSBSUEMgUGF0dGVybnMuY2xpZW50X3N0cmVhbSIgZGF0YS1zb3VyY2UtbGluZT0iMjAiIGlkPSJlbnQwMDA1Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjgwLjU5MzgiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjMwMC44MTc5IiB4PSI2MjAuNTkiIHk9IjU3LjI5Ii8+PGVsbGlwc2UgY3g9IjY3NS43NDkzIiBjeT0iNzMuMjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTY3OC43MTgxLDc4LjkzMDYgUTY3OC4xNCw3OS4yMjc1IDY3Ny40OTkzLDc5LjM2ODEgUTY3Ni44NTg3LDc5LjUyNDQgNjc2LjE1NTYsNzkuNTI0NCBRNjczLjY1NTYsNzkuNTI0NCA2NzIuMzI3NSw3Ny44ODM3IFE2NzEuMDE1LDc2LjIyNzUgNjcxLjAxNSw3My4xMDI1IFE2NzEuMDE1LDY5Ljk3NzUgNjcyLjMyNzUsNjguMzIxMiBRNjczLjY1NTYsNjYuNjY1IDY3Ni4xNTU2LDY2LjY2NSBRNjc2Ljg1ODcsNjYuNjY1IDY3Ny40OTkzLDY2LjgyMTIgUTY3OC4xNTU2LDY2Ljk3NzUgNjc4LjcxODEsNjcuMjc0NCBMNjc4LjcxODEsNjkuOTkzMSBRNjc4LjA5MzEsNjkuNDE1IDY3Ny40OTkzLDY5LjE0OTQgUTY3Ni45MDU2LDY4Ljg2ODEgNjc2LjI4MDYsNjguODY4MSBRNjc0LjkzNjgsNjguODY4MSA2NzQuMjQ5Myw2OS45NDYyIFE2NzMuNTYxOCw3MS4wMDg3IDY3My41NjE4LDczLjEwMjUgUTY3My41NjE4LDc1LjE5NjIgNjc0LjI0OTMsNzYuMjc0NCBRNjc0LjkzNjgsNzcuMzM2OSA2NzYuMjgwNiw3Ny4zMzY5IFE2NzYuOTA1Niw3Ny4zMzY5IDY3Ny40OTkzLDc3LjA3MTIgUTY3OC4wOTMxLDc2Ljc5IDY3OC43MTgxLDc2LjIxMTkgTDY3OC43MTgxLDc4LjkzMDYgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxODEuOTk5MiIgeD0iNjk2LjI0OTMiIHk9Ijc4LjEzNjciPiYjMTI0NjM7JiMxMjUyMTsmIzEyNDUyOyYjMTI0NTA7JiMxMjUzMTsmIzEyNDg4OyYjMTI0NzM7JiMxMjQ4ODsmIzEyNTIyOyYjMTI1NDA7JiMxMjUxMTsmIzEyNTMxOyYjMTI0NjQ7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjYyMS41OSIgeDI9IjkyMC40MDc5IiB5MT0iODkuMjkiIHkyPSI4OS4yOSIvPjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFVCTElDX0ZJRUxEIj48ZWxsaXBzZSBjeD0iNjMxLjU5IiBjeT0iMTAyLjkzODQiIGZpbGw9Im5vbmUiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNTguMzkxMSIgeD0iNjQwLjU5IiB5PSIxMDYuMjg1MSI+QnVsa0FkZE9yZGVyRGV0YWlscyYjNjUyODg7JiMyNjEyNjsmIzMyMDQ4OyYjMTk5Njg7JiMyNTMyNDsmIzMwMzMxOyYjMzc2ODI7JiM2NTI4OTs8L3RleHQ+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJQVUJMSUNfRklFTEQiPjxlbGxpcHNlIGN4PSI2MzEuNTkiIGN5PSIxMTkuMjM1MyIgZmlsbD0ibm9uZSIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI3NC44MTc5IiB4PSI2NDAuNTkiIHk9IjEyMi41ODIiPkJhdGNoU2hpcG1lbnRDb25maXJtJiM2NTI4ODsmIzIwOTg2OyYjMzM2NTU7JiMxOTk2ODsmIzI1MzI0OyYjMzA5MDY7JiMyMzQ1MDsmIzY1Mjg5OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI2MjEuNTkiIHgyPSI5MjAuNDA3OSIgeTE9IjEyOS44ODM4IiB5Mj0iMTI5Ljg4MzgiLz48L2c+PCEtLWNsYXNzIGJpZGlyZWN0aW9uYWwtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJUcmFuc2FjdGlvbiBBUEkgLSBSUEMgUGF0dGVybnMuYmlkaXJlY3Rpb25hbCIgZGF0YS1zb3VyY2UtbGluZT0iMjUiIGlkPSJlbnQwMDA2Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjgwLjU5MzgiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjIyMS4wMDg0IiB4PSI5NTYuNSIgeT0iNTcuMjkiLz48ZWxsaXBzZSBjeD0iOTkzLjU1NDEiIGN5PSI3My4yOSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNOTk2LjUyMjgsNzguOTMwNiBROTk1Ljk0NDcsNzkuMjI3NSA5OTUuMzA0MSw3OS4zNjgxIFE5OTQuNjYzNCw3OS41MjQ0IDk5My45NjAzLDc5LjUyNDQgUTk5MS40NjAzLDc5LjUyNDQgOTkwLjEzMjIsNzcuODgzNyBROTg4LjgxOTcsNzYuMjI3NSA5ODguODE5Nyw3My4xMDI1IFE5ODguODE5Nyw2OS45Nzc1IDk5MC4xMzIyLDY4LjMyMTIgUTk5MS40NjAzLDY2LjY2NSA5OTMuOTYwMyw2Ni42NjUgUTk5NC42NjM0LDY2LjY2NSA5OTUuMzA0MSw2Ni44MjEyIFE5OTUuOTYwMyw2Ni45Nzc1IDk5Ni41MjI4LDY3LjI3NDQgTDk5Ni41MjI4LDY5Ljk5MzEgUTk5NS44OTc4LDY5LjQxNSA5OTUuMzA0MSw2OS4xNDk0IFE5OTQuNzEwMyw2OC44NjgxIDk5NC4wODUzLDY4Ljg2ODEgUTk5Mi43NDE2LDY4Ljg2ODEgOTkyLjA1NDEsNjkuOTQ2MiBROTkxLjM2NjYsNzEuMDA4NyA5OTEuMzY2Niw3My4xMDI1IFE5OTEuMzY2Niw3NS4xOTYyIDk5Mi4wNTQxLDc2LjI3NDQgUTk5Mi43NDE2LDc3LjMzNjkgOTk0LjA4NTMsNzcuMzM2OSBROTk0LjcxMDMsNzcuMzM2OSA5OTUuMzA0MSw3Ny4wNzEyIFE5OTUuODk3OCw3Ni43OSA5OTYuNTIyOCw3Ni4yMTE5IEw5OTYuNTIyOCw3OC45MzA2IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM5Ljk5OTQiIHg9IjEwMTIuNDU1IiB5PSI3OC4xMzY3Ij4mIzIxNDUyOyYjMjYwNDE7JiMyMTUyMTsmIzEyNDczOyYjMTI0ODg7JiMxMjUyMjsmIzEyNTQwOyYjMTI1MTE7JiMxMjUzMTsmIzEyNDY0OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI5NTcuNSIgeDI9IjExNzYuNTA4NCIgeTE9Ijg5LjI5IiB5Mj0iODkuMjkiLz48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IlBVQkxJQ19GSUVMRCI+PGVsbGlwc2UgY3g9Ijk2Ny41IiBjeT0iMTAyLjkzODQiIGZpbGw9Im5vbmUiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxODQuNjExIiB4PSI5NzYuNSIgeT0iMTA2LjI4NTEiPlN5bmNJbnZlbnRvcnkmIzY1Mjg4OyYjMjIzMTI7JiMyNDIzNTsmIzIxNTE2OyYjMjYzOTk7JiM2NTI4OTs8L3RleHQ+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJQVUJMSUNfRklFTEQiPjxlbGxpcHNlIGN4PSI5NjcuNSIgY3k9IjExOS4yMzUzIiBmaWxsPSJub25lIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTk1LjAwODQiIHg9Ijk3Ni41IiB5PSIxMjIuNTgyIj5Qcm9jZXNzSW52b2ljZXMmIzY1Mjg4OyYjMzU1MzE7JiMyNzcxNDsmIzIwOTY2OyYjMjk3MDI7JiM2NTI4OTs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iOTU3LjUiIHgyPSIxMTc2LjUwODQiIHkxPSIxMjkuODgzOCIgeTI9IjEyOS44ODM4Ii8+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkdNTjciIGRhdGEtc291cmNlLWxpbmU9IjMyIiBpZD0iZW50MDAwOCI+PHBhdGggZD0iTTY2LjUsMjE0LjE4IEw2Ni41LDI1NC40NDU2IEEwLDAgMCAwIDAgNjYuNSwyNTQuNDQ1NiBMMjE3LjUwMDIsMjU0LjQ0NTYgQTAsMCAwIDAgMCAyMTcuNTAwMiwyNTQuNDQ1NiBMMjE3LjUwMDIsMjI0LjE4IEwyMDcuNTAwMiwyMTQuMTggTDE0NiwyMTQuMTggTDE0MiwxNTQuNTYgTDEzOCwyMTQuMTggTDY2LjUsMjE0LjE4IEEwLDAgMCAwIDAgNjYuNSwyMTQuMTgiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0yMDcuNTAwMiwyMTQuMTggTDIwNy41MDAyLDIyNC4xOCBMMjE3LjUwMDIsMjI0LjE4IEwyMDcuNTAwMiwyMTQuMTgiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzMC4wMDAyIiB4PSI3Mi41IiB5PSIyMzEuMjQ2OSI+JiMyMDQ5MTsmIzIxMDI5OyYjMTI0ODg7JiMxMjUyMTsmIzEyNTMxOyYjMTI0NzA7JiMxMjQ2MzsmIzEyNDcxOyYjMTI1MTk7JiMxMjUzMTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMwLjAwMDIiIHg9IjcyLjUiIHk9IjI0Ni4zNzk3Ij4mIzIxMzYzOyYjMjYxNzg7JiMyNDU0MDsmIzMxNTcyOyYjMTIzNjQ7JiMyNDUxNzsmIzM1MjAxOyYjMTIzOTQ7JiMyMDk2NjsmIzI5NzAyOzwvdGV4dD48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iR01OMTAiIGRhdGEtc291cmNlLWxpbmU9IjM3IiBpZD0iZW50MDAxMSI+PHBhdGggZD0iTTM3OC41LDIxNC4xOCBMMzc4LjUsMjU0LjQ0NTYgQTAsMCAwIDAgMCAzNzguNSwyNTQuNDQ1NiBMNTAzLjUwMDEsMjU0LjQ0NTYgQTAsMCAwIDAgMCA1MDMuNTAwMSwyNTQuNDQ1NiBMNTAzLjUwMDEsMjI0LjE4IEw0OTMuNTAwMSwyMTQuMTggTDQ0NSwyMTQuMTggTDQ0MSwxNDYuNDcgTDQzNywyMTQuMTggTDM3OC41LDIxNC4xOCBBMCwwIDAgMCAwIDM3OC41LDIxNC4xOCIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTQ5My41MDAxLDIxNC4xOCBMNDkzLjUwMDEsMjI0LjE4IEw1MDMuNTAwMSwyMjQuMTggTDQ5My41MDAxLDIxNC4xOCIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA0LjAwMDEiIHg9IjM4NC41IiB5PSIyMzEuMjQ2OSI+JiMxMjUyMjsmIzEyNDUwOyYjMTI1MjM7JiMxMjQ3OTsmIzEyNDUyOyYjMTI1MTI7JiMzNjg5MDsmIzMwNjkzOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDQuMDAwMSIgeD0iMzg0LjUiIHk9IjI0Ni4zNzk3Ij4mIzM2OTE0OyYjMjU0MzE7JiMxMjUxNDsmIzEyNDkxOyYjMTI0Nzk7JiMxMjUyMjsmIzEyNTMxOyYjMTI0NjQ7PC90ZXh0PjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJHTU4xMyIgZGF0YS1zb3VyY2UtbGluZT0iNDIiIGlkPSJlbnQwMDE0Ij48cGF0aCBkPSJNNzE1LDIxNC4xOCBMNzE1LDI1NC40NDU2IEEwLDAgMCAwIDAgNzE1LDI1NC40NDU2IEw4MjcuMDAwMSwyNTQuNDQ1NiBBMCwwIDAgMCAwIDgyNy4wMDAxLDI1NC40NDU2IEw4MjcuMDAwMSwyMjQuMTggTDgxNy4wMDAxLDIxNC4xOCBMNzc1LDIxNC4xOCBMNzcxLDEzOC4yOCBMNzY3LDIxNC4xOCBMNzE1LDIxNC4xOCBBMCwwIDAgMCAwIDcxNSwyMTQuMTgiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik04MTcuMDAwMSwyMTQuMTggTDgxNy4wMDAxLDIyNC4xOCBMODI3LjAwMDEsMjI0LjE4IEw4MTcuMDAwMSwyMTQuMTgiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjkxLjAwMDEiIHg9IjcyMSIgeT0iMjMxLjI0NjkiPiYjMjI4MjM7JiMzNzMyNzsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsmIzM2ODY1OyYjMjA0NDk7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY1LjAwMDEiIHg9IjcyMSIgeT0iMjQ2LjM3OTciPiYjMTI0OTY7JiMxMjQ4MzsmIzEyNDgxOyYjMjA5NjY7JiMyOTcwMjs8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkdNTjE2IiBkYXRhLXNvdXJjZS1saW5lPSI0NyIgaWQ9ImVudDAwMTciPjxwYXRoIGQ9Ik0xMDI0LDIxNC4xOCBMMTAyNCwyNTQuNDQ1NiBBMCwwIDAgMCAwIDEwMjQsMjU0LjQ0NTYgTDExMTAuMDAwMSwyNTQuNDQ1NiBBMCwwIDAgMCAwIDExMTAuMDAwMSwyNTQuNDQ1NiBMMTExMC4wMDAxLDIyNC4xOCBMMTEwMC4wMDAxLDIxNC4xOCBMMTA3MSwyMTQuMTggTDEwNjcsMTM4LjI4IEwxMDYzLDIxNC4xOCBMMTAyNCwyMTQuMTggQTAsMCAwIDAgMCAxMDI0LDIxNC4xOCIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTExMDAuMDAwMSwyMTQuMTggTDExMDAuMDAwMSwyMjQuMTggTDExMTAuMDAwMSwyMjQuMTggTDExMDAuMDAwMSwyMTQuMTgiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY1LjAwMDEiIHg9IjEwMzAiIHk9IjIzMS4yNDY5Ij4mIzIxNDUyOyYjMjYwNDE7JiMyMTUyMTsmIzIxNTE2OyYjMjYzOTk7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY1LjAwMDEiIHg9IjEwMzAiIHk9IjI0Ni4zNzk3Ij4mIzIzNTUwOyYjMzU0NDE7JiMzMDM0MDsmIzIwOTY2OyYjMjk3MDI7PC90ZXh0PjwvZz48P3BsYW50dW1sLXNyYyBYUEJSSlhEMTZDVmx2b2Q2VWNieTJBWDhJOFdzYkNIQkNzbTdzQjJUOVJESjRjOUNzWHNYRE1yakpHbWRJSzBFdkwySGF1ZVNHWHpjY0R0c1liVG1QWE9oWW5Bb29NUHNsX195bHp6dFU5SjFlcFIxU0FXbEVUcHBlZC1tM3JlRXlabTBsMGNSSjJBQWlkMDRNSERackNzSEpEOXJOMGVWRi1fSjNtMkpBZTM2QzRtQ0txR3lQMzdSOVIwZERHMlZtZzVLNGdPR092V0lCbTdWMEYzTkZvNmgydnRMNklyOUdFSjE3NDVxTWFjVW0ySjVZRTZORDhGZnpLTDlya1EzdS1ybXlSbkpFUmctVUFfWV9QWjVXeDhzOW9fZGVzM0k5UUNzcFR3dmxOT2Nsb3RUMjEybmkxRUYydHpGeTdOMVp1TF9CZFhKMnpfNk04Tl9HXzBCbVVsd3hQeUFOWDl5cl9uUENSU0VKMGFVZmJFT2xsUU9BWTFoSVhjcWxPWkx3LVF3LWZMbER4T1liYlU4TVVDY2RjUTh2Uko4a0MtUUQycnIzWi1sam5qcGFKZmpWREZaemNHTTR2UVl4WFo1ZFo0a2RoTWg5dnR5S0wyVF9uX3hsazB4bWp5R19mZzZ2UU54QXgwU01yZFZoZzB0dnFwcVAzODZ5WGJjbzdQcW5jM1hHX1p6RzlLSWJCX1U3YXNsQmtXRnVTcWVrZTB0eWt1aXVmWW9MV2RjSmNOenVfcnE4dFI2ZmpaaTV0OENOTmdRTTBEYUlZTHB3UkhFakJtanB2Z29OV2NNTG84WXJJUEJUS2M5TjVpVGJBUlRCMFU3bFltc21sZmlYQTUwWUNpbTc3NFBTeEZHN09zTTRTWHlNUE9zM1NvRW1WWWZVLWNWMkJ3YkZlNmk3V1VCbGNtalh0a1ZIQTRZTXBGakhhNEtUWURoVzRhNlFqal9wNkRoMGRJWFVaMURDXzBEbUxTeC1RTG1QSEQ0eW5IU25TZXdmWGtZTXQ2X1NNbndHNnZpVE9lcm1PbEhDZE5vWFFsTTVzMXNjMGpVVThXb3JjcEdkS3hLTW8zdEJ6aXhYLTdJa3Bpc2xtNDA/PjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<hr />
<h3 id="162-api-protocol-buffers">16.2 受注 API の Protocol Buffers 定義<a class="headerlink" href="#162-api-protocol-buffers" title="Permanent link">&para;</a></h3>
<h4 id="srcmainprotoorderproto">src/main/proto/order.proto<a class="headerlink" href="#srcmainprotoorderproto" title="Permanent link">&para;</a></h4>
<details>
<summary>コード例: order.proto</summary>

<div class="highlight"><pre><span></span><code><span class="k">syntax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;proto3&quot;</span><span class="p">;</span>

<span class="kn">package</span><span class="w"> </span><span class="nn">com</span><span class="o">.</span><span class="n">example.sales</span><span class="p">;</span>

<span class="k">option</span><span class="w"> </span><span class="na">java_package</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;com.example.sales.infrastructure.grpc.proto&quot;</span><span class="p">;</span>
<span class="k">option</span><span class="w"> </span><span class="na">java_outer_classname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;OrderProto&quot;</span><span class="p">;</span>
<span class="k">option</span><span class="w"> </span><span class="na">java_multiple_files</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>

<span class="k">import</span><span class="w"> </span><span class="s">&quot;common.proto&quot;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="s">&quot;google/protobuf/timestamp.proto&quot;</span><span class="p">;</span>

<span class="c1">// 受注ステータス</span>
<span class="kd">enum</span><span class="w"> </span><span class="n">OrderStatus</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">ORDER_STATUS_UNSPECIFIED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="na">ORDER_STATUS_DRAFT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">           </span><span class="c1">// 下書き</span>
<span class="w">    </span><span class="na">ORDER_STATUS_CONFIRMED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w">       </span><span class="c1">// 確定</span>
<span class="w">    </span><span class="na">ORDER_STATUS_PROCESSING</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w">      </span><span class="c1">// 処理中</span>
<span class="w">    </span><span class="na">ORDER_STATUS_SHIPPED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span><span class="w">         </span><span class="c1">// 出荷済</span>
<span class="w">    </span><span class="na">ORDER_STATUS_COMPLETED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w">       </span><span class="c1">// 完了</span>
<span class="w">    </span><span class="na">ORDER_STATUS_CANCELLED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span><span class="w">       </span><span class="c1">// キャンセル</span>
<span class="p">}</span>

<span class="c1">// 受注ヘッダ</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">Order</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">order_number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">partner_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">partner_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">    </span><span class="n">Date</span><span class="w"> </span><span class="na">order_date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="w">    </span><span class="n">Date</span><span class="w"> </span><span class="na">delivery_date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="w">    </span><span class="n">OrderStatus</span><span class="w"> </span><span class="na">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span>
<span class="w">    </span><span class="n">Money</span><span class="w"> </span><span class="na">total_amount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="p">;</span>
<span class="w">    </span><span class="n">Money</span><span class="w"> </span><span class="na">tax_amount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">warehouse_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">9</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">sales_rep_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">notes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">11</span><span class="p">;</span>
<span class="w">    </span><span class="k">repeated</span><span class="w"> </span><span class="n">OrderDetail</span><span class="w"> </span><span class="na">details</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="p">;</span>
<span class="w">    </span><span class="n">AuditInfo</span><span class="w"> </span><span class="na">audit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">13</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 受注明細</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">OrderDetail</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int32</span><span class="w"> </span><span class="na">line_number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">product_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">product_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int32</span><span class="w"> </span><span class="na">quantity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="w">    </span><span class="n">Money</span><span class="w"> </span><span class="na">unit_price</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="w">    </span><span class="n">Money</span><span class="w"> </span><span class="na">amount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">tax_category</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="p">;</span>
<span class="w">    </span><span class="n">Date</span><span class="w"> </span><span class="na">delivery_date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">notes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">9</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 受注ステータス監視（サーバーストリーミング）</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">WatchOrderStatusRequest</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">repeated</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="na">order_numbers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="k">repeated</span><span class="w"> </span><span class="n">OrderStatus</span><span class="w"> </span><span class="na">statuses</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">message</span><span class="w"> </span><span class="nc">OrderStatusChange</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">order_number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="n">OrderStatus</span><span class="w"> </span><span class="na">previous_status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="n">OrderStatus</span><span class="w"> </span><span class="na">current_status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">    </span><span class="n">google.protobuf.Timestamp</span><span class="w"> </span><span class="na">changed_at</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">changed_by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// === サービス定義 ===</span>

<span class="kd">service</span><span class="w"> </span><span class="n">OrderService</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 単項 RPC</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">GetOrder</span><span class="p">(</span><span class="n">GetOrderRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">GetOrderResponse</span><span class="p">);</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">CreateOrder</span><span class="p">(</span><span class="n">CreateOrderRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">CreateOrderResponse</span><span class="p">);</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">UpdateOrder</span><span class="p">(</span><span class="n">UpdateOrderRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">UpdateOrderResponse</span><span class="p">);</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">ConfirmOrder</span><span class="p">(</span><span class="n">ConfirmOrderRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">ConfirmOrderResponse</span><span class="p">);</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">CancelOrder</span><span class="p">(</span><span class="n">CancelOrderRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">CancelOrderResponse</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// サーバーストリーミング RPC</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">ListOrders</span><span class="p">(</span><span class="n">ListOrdersRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">stream</span><span class="w"> </span><span class="n">Order</span><span class="p">);</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">WatchOrderStatus</span><span class="p">(</span><span class="n">WatchOrderStatusRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">stream</span><span class="w"> </span><span class="n">OrderStatusChange</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// クライアントストリーミング RPC</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">BulkAddOrderDetails</span><span class="p">(</span><span class="n">stream</span><span class="w"> </span><span class="n">BulkAddOrderDetailRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">BulkAddOrderDetailResponse</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h3 id="163">16.3 受注サービス実装（ステータス監視）<a class="headerlink" href="#163" title="Permanent link">&para;</a></h3>
<details>
<summary>コード例: GrpcOrderService.java</summary>

<div class="highlight"><pre><span></span><code><span class="nd">@GrpcService</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">GrpcOrderService</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">OrderServiceGrpc</span><span class="p">.</span><span class="na">OrderServiceImplBase</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Logger</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LoggerFactory</span><span class="p">.</span><span class="na">getLogger</span><span class="p">(</span><span class="n">GrpcOrderService</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">OrderUseCase</span><span class="w"> </span><span class="n">orderUseCase</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">CreditUseCase</span><span class="w"> </span><span class="n">creditUseCase</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">OrderConverter</span><span class="w"> </span><span class="n">converter</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// ステータス監視用のオブザーバー管理</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Set</span><span class="o">&lt;</span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">OrderStatusChange</span><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">statusWatchers</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">ConcurrentHashMap</span><span class="o">&lt;&gt;</span><span class="p">();</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * サーバーストリーミング RPC: 受注ステータス監視</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">watchOrderStatus</span><span class="p">(</span><span class="n">WatchOrderStatusRequest</span><span class="w"> </span><span class="n">request</span><span class="p">,</span>
<span class="w">                                 </span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">OrderStatusChange</span><span class="o">&gt;</span><span class="w"> </span><span class="n">responseObserver</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;watchOrderStatus: orders={}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getOrderNumbersList</span><span class="p">());</span>

<span class="w">        </span><span class="c1">// オブザーバー登録</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">orderNumber</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getOrderNumbersList</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">statusWatchers</span>
<span class="w">                </span><span class="p">.</span><span class="na">computeIfAbsent</span><span class="p">(</span><span class="n">orderNumber</span><span class="p">,</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">ConcurrentHashMap</span><span class="p">.</span><span class="na">newKeySet</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">responseObserver</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// コンテキストキャンセル時にオブザーバー削除</span>
<span class="w">        </span><span class="n">Context</span><span class="p">.</span><span class="na">current</span><span class="p">().</span><span class="na">addListener</span><span class="p">(</span><span class="n">context</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">orderNumber</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getOrderNumbersList</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">Set</span><span class="o">&lt;</span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">OrderStatusChange</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">watchers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">statusWatchers</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">orderNumber</span><span class="p">);</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">watchers</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">watchers</span><span class="p">.</span><span class="na">remove</span><span class="p">(</span><span class="n">responseObserver</span><span class="p">);</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span><span class="w"> </span><span class="n">Runnable</span><span class="p">::</span><span class="n">run</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Spring Events でステータス変更を受信し、ウォッチャーに通知</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@EventListener</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onOrderStatusChanged</span><span class="p">(</span><span class="n">OrderStatusChangedEvent</span><span class="w"> </span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Set</span><span class="o">&lt;</span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">OrderStatusChange</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">watchers</span><span class="w"> </span><span class="o">=</span>
<span class="w">            </span><span class="n">statusWatchers</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="na">getOrderNumber</span><span class="p">());</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">watchers</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">watchers</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">OrderStatusChange</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OrderStatusChange</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">setOrderNumber</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="na">getOrderNumber</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">setPreviousStatus</span><span class="p">(</span><span class="n">converter</span><span class="p">.</span><span class="na">toProtoStatus</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="na">getPreviousStatus</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">setCurrentStatus</span><span class="p">(</span><span class="n">converter</span><span class="p">.</span><span class="na">toProtoStatus</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="na">getCurrentStatus</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">setChangedAt</span><span class="p">(</span><span class="n">converter</span><span class="p">.</span><span class="na">toProtoTimestamp</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="na">getChangedAt</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">setChangedBy</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="na">getChangedBy</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">OrderStatusChange</span><span class="o">&gt;</span><span class="w"> </span><span class="n">watcher</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">watchers</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">watcher</span><span class="p">.</span><span class="na">onNext</span><span class="p">(</span><span class="n">change</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">log</span><span class="p">.</span><span class="na">warn</span><span class="p">(</span><span class="s">&quot;Failed to notify watcher&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">);</span>
<span class="w">                </span><span class="n">watchers</span><span class="p">.</span><span class="na">remove</span><span class="p">(</span><span class="n">watcher</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h3 id="164">16.4 請求サービス実装（双方向ストリーミング）<a class="headerlink" href="#164" title="Permanent link">&para;</a></h3>
<details>
<summary>コード例: processInvoices メソッド</summary>

<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * 双方向ストリーミング RPC: 請求処理</span>
<span class="cm"> */</span>
<span class="nd">@Override</span>
<span class="kd">public</span><span class="w"> </span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">ProcessInvoiceRequest</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">processInvoices</span><span class="p">(</span>
<span class="w">        </span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">ProcessInvoiceResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="n">responseObserver</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;processInvoices: started&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">ProcessInvoiceRequest</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nd">@Override</span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onNext</span><span class="p">(</span><span class="n">ProcessInvoiceRequest</span><span class="w"> </span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">ProcessInvoiceResponse</span><span class="w"> </span><span class="n">response</span><span class="p">;</span>

<span class="w">            </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getCommandCase</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="k">case</span><span class="w"> </span><span class="n">CREATE</span><span class="p">:</span>
<span class="w">                        </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">handleCreateInvoice</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getCreate</span><span class="p">());</span>
<span class="w">                        </span><span class="k">break</span><span class="p">;</span>
<span class="w">                    </span><span class="k">case</span><span class="w"> </span><span class="n">ISSUE</span><span class="p">:</span>
<span class="w">                        </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">handleIssueInvoice</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getIssue</span><span class="p">());</span>
<span class="w">                        </span><span class="k">break</span><span class="p">;</span>
<span class="w">                    </span><span class="k">case</span><span class="w"> </span><span class="n">RECEIPT</span><span class="p">:</span>
<span class="w">                        </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">handleRecordReceipt</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getReceipt</span><span class="p">());</span>
<span class="w">                        </span><span class="k">break</span><span class="p">;</span>
<span class="w">                    </span><span class="k">default</span><span class="p">:</span>
<span class="w">                        </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ProcessInvoiceResponse</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">                            </span><span class="p">.</span><span class="na">setSuccess</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
<span class="w">                            </span><span class="p">.</span><span class="na">setMessage</span><span class="p">(</span><span class="s">&quot;不明なコマンド&quot;</span><span class="p">)</span>
<span class="w">                            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">log</span><span class="p">.</span><span class="na">error</span><span class="p">(</span><span class="s">&quot;processInvoices: error&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">);</span>
<span class="w">                </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ProcessInvoiceResponse</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">setSuccess</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">setMessage</span><span class="p">(</span><span class="s">&quot;エラー: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="c1">// 即座に結果を返す</span>
<span class="w">            </span><span class="n">responseObserver</span><span class="p">.</span><span class="na">onNext</span><span class="p">(</span><span class="n">response</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Override</span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onError</span><span class="p">(</span><span class="n">Throwable</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">log</span><span class="p">.</span><span class="na">error</span><span class="p">(</span><span class="s">&quot;processInvoices: client error&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">t</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Override</span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onCompleted</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;processInvoices: client completed&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="n">responseObserver</span><span class="p">.</span><span class="na">onCompleted</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">};</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h3 id="165-grpcurl">16.5 grpcurl による動作確認<a class="headerlink" href="#165-grpcurl" title="Permanent link">&para;</a></h3>
<details>
<summary>コード例: grpcurl コマンド</summary>

<div class="highlight"><pre><span></span><code><span class="c1"># 受注登録</span>
grpcurl<span class="w"> </span>-plaintext<span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">  &quot;partner_code&quot;: &quot;CUS001&quot;,</span>
<span class="s1">  &quot;order_date&quot;: {&quot;year&quot;: 2025, &quot;month&quot;: 12, &quot;day&quot;: 29},</span>
<span class="s1">  &quot;delivery_date&quot;: {&quot;year&quot;: 2026, &quot;month&quot;: 1, &quot;day&quot;: 5},</span>
<span class="s1">  &quot;warehouse_code&quot;: &quot;WH001&quot;,</span>
<span class="s1">  &quot;details&quot;: [</span>
<span class="s1">    {&quot;product_code&quot;: &quot;PRD001&quot;, &quot;quantity&quot;: 10},</span>
<span class="s1">    {&quot;product_code&quot;: &quot;PRD002&quot;, &quot;quantity&quot;: 5}</span>
<span class="s1">  ]</span>
<span class="s1">}&#39;</span><span class="w"> </span>localhost:9090<span class="w"> </span>com.example.sales.OrderService/CreateOrder

<span class="c1"># 受注確定</span>
grpcurl<span class="w"> </span>-plaintext<span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">  &quot;order_number&quot;: &quot;ORD20251229001&quot;</span>
<span class="s1">}&#39;</span><span class="w"> </span>localhost:9090<span class="w"> </span>com.example.sales.OrderService/ConfirmOrder

<span class="c1"># 受注ステータス監視（サーバーストリーミング）</span>
grpcurl<span class="w"> </span>-plaintext<span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">  &quot;order_numbers&quot;: [&quot;ORD20251229001&quot;]</span>
<span class="s1">}&#39;</span><span class="w"> </span>localhost:9090<span class="w"> </span>com.example.sales.OrderService/WatchOrderStatus

<span class="c1"># 出荷進捗監視（サーバーストリーミング）</span>
grpcurl<span class="w"> </span>-plaintext<span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">  &quot;shipment_number&quot;: &quot;SHP20251230001&quot;</span>
<span class="s1">}&#39;</span><span class="w"> </span>localhost:9090<span class="w"> </span>com.example.sales.ShipmentService/StreamShipmentProgress
</code></pre></div>

</details>

<hr />
<h2 id="17">第17章：エラーハンドリングとストリーミング<a class="headerlink" href="#17" title="Permanent link">&para;</a></h2>
<h3 id="171-grpc">17.1 gRPC エラーハンドリングの概要<a class="headerlink" href="#171-grpc" title="Permanent link">&para;</a></h3>
<p>gRPC では、エラーは <strong>Status</strong> オブジェクトで表現されます。Status には <strong>コード</strong>（StatusCode）と <strong>メッセージ</strong>、オプションで <strong>詳細情報</strong> を含めることができます。</p>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjkzNHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NTE2cHg7aGVpZ2h0OjkzNHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDUxNiA5MzQiIHdpZHRoPSI1MTZweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPmdSUEMgJiMxMjQ1NjsmIzEyNTIxOyYjMTI1NDA7JiMxMjQ5NTsmIzEyNTMxOyYjMTI0ODk7JiMxMjUyMjsmIzEyNTMxOyYjMTI0NjQ7JiMxMjQ1MDsmIzEyNTQwOyYjMTI0NjE7JiMxMjQ4NjsmIzEyNDYzOyYjMTI0ODE7JiMxMjUxNTs8L3RpdGxlPjxkZWZzLz48Zz48ZyBjbGFzcz0idGl0bGUiIGRhdGEtc291cmNlLWxpbmU9IjEiPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNzAuMjEiIHg9IjExNi4yNTI1IiB5PSIyMi45OTUxIj5nUlBDICYjMTI0NTY7JiMxMjUyMTsmIzEyNTQwOyYjMTI0OTU7JiMxMjUzMTsmIzEyNDg5OyYjMTI1MjI7JiMxMjUzMTsmIzEyNDY0OyYjMTI0NTA7JiMxMjU0MDsmIzEyNDYxOyYjMTI0ODY7JiMxMjQ2MzsmIzEyNDgxOyYjMTI1MTU7PC90ZXh0PjwvZz48IS0tY2x1c3RlciA/Pz8/Pz8tLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIzIiBpZD0iZW50MDAwMiI+PHBhdGggZD0iTTguNSw0My4yOTY5IEw5My40OTk2LDQzLjI5NjkgQTMuNzUsMy43NSAwIDAgMSA5NS45OTk2LDQ1Ljc5NjkgTDEwMi45OTk2LDY1LjU5MzggTDM2MC41LDY1LjU5MzggQTIuNSwyLjUgMCAwIDEgMzYzLDY4LjA5MzggTDM2MywyOTMuOTg2OSBBMi41LDIuNSAwIDAgMSAzNjAuNSwyOTYuNDg2OSBMOC41LDI5Ni40ODY5IEEyLjUsMi41IDAgMCAxIDYsMjkzLjk4NjkgTDYsNDUuNzk2OSBBMi41LDIuNSAwIDAgMSA4LjUsNDMuMjk2OSIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB4MT0iNiIgeDI9IjEwMi45OTk2IiB5MT0iNjUuNTkzOCIgeTI9IjY1LjU5MzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iMTAiIHk9IjU4LjI5MiI+JiMxMjQ2MzsmIzEyNTIxOyYjMTI0NTI7JiMxMjQ1MDsmIzEyNTMxOyYjMTI0ODg7PC90ZXh0PjwvZz48IS0tY2x1c3RlciBnUlBDID8/Pz8tLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iZ1JQQyAuLi4uIiBkYXRhLXNvdXJjZS1saW5lPSI5IiBpZD0iZW50MDAwNiI+PHBhdGggZD0iTTE1LjUsMzI5LjQ4NjkgTDExOC43MTA3LDMyOS40ODY5IEEzLjc1LDMuNzUgMCAwIDEgMTIxLjIxMDcsMzMxLjk4NjkgTDEyOC4yMTA3LDM1MS43ODM3IEwxODAuNSwzNTEuNzgzNyBBMi41LDIuNSAwIDAgMSAxODMsMzU0LjI4MzcgTDE4Myw2NzEuMTc2OSBBMi41LDIuNSAwIDAgMSAxODAuNSw2NzMuNjc2OSBMMTUuNSw2NzMuNjc2OSBBMi41LDIuNSAwIDAgMSAxMyw2NzEuMTc2OSBMMTMsMzMxLjk4NjkgQTIuNSwyLjUgMCAwIDEgMTUuNSwzMjkuNDg2OSIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB4MT0iMTMiIHgyPSIxMjguMjEwNyIgeTE9IjM1MS43ODM3IiB5Mj0iMzUxLjc4MzciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAyLjIxMDciIHg9IjE3IiB5PSIzNDQuNDgyIj5nUlBDICYjMTI0ODE7JiMxMjUxNTsmIzEyNDkzOyYjMTI1MjM7PC90ZXh0PjwvZz48IS0tY2x1c3RlciA/Pz8/LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Ii4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjE1IiBpZD0iZW50MDAxMCI+PHBhdGggZD0iTTguNSw3MDYuNjc2OSBMNjUuNDk5OCw3MDYuNjc2OSBBMy43NSwzLjc1IDAgMCAxIDY3Ljk5OTgsNzA5LjE3NjkgTDc0Ljk5OTgsNzI4Ljk3MzggTDM2MC41LDcyOC45NzM4IEEyLjUsMi41IDAgMCAxIDM2Myw3MzEuNDczOCBMMzYzLDkyNS4wNjY5IEEyLjUsMi41IDAgMCAxIDM2MC41LDkyNy41NjY5IEw4LjUsOTI3LjU2NjkgQTIuNSwyLjUgMCAwIDEgNiw5MjUuMDY2OSBMNiw3MDkuMTc2OSBBMi41LDIuNSAwIDAgMSA4LjUsNzA2LjY3NjkiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjYiIHgyPSI3NC45OTk4IiB5MT0iNzI4Ljk3MzgiIHkyPSI3MjguOTczOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSIxMCIgeT0iNzIxLjY3MiI+JiMxMjQ2OTsmIzEyNTQwOyYjMTI0OTY7JiMxMjU0MDs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgY2xpZW50LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uLi4uLmNsaWVudCIgZGF0YS1zb3VyY2UtbGluZT0iNCIgaWQ9ImVudDAwMDMiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNjIuNTkzOCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTUxLjk5OTUiIHg9IjIyIiB5PSI3OC4yOTY5Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTUiIHg9IjE1My45OTk1IiB5PSI4My4yOTY5Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0IiB4PSIxNTEuOTk5NSIgeT0iODUuMjk2OSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iMTUxLjk5OTUiIHk9Ijg5LjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4My45OTk2IiB4PSIzNyIgeT0iMTExLjI5MiI+JiMxMjQ2MzsmIzEyNTIxOyYjMTI0NTI7JiMxMjQ1MDsmIzEyNTMxOyYjMTI0ODg7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExMS45OTk1IiB4PSIzNyIgeT0iMTI3LjU4ODkiPiYjMTI0NTA7JiMxMjUwMzsmIzEyNTIyOyYjMTI0NjU7JiMxMjU0MDsmIzEyNDcxOyYjMTI1MTk7JiMxMjUzMTs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgcmV0cnktLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uLi4ucmV0cnkiIGRhdGEtc291cmNlLWxpbmU9IjUiIGlkPSJlbnQwMDA0Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjYyLjU5MzgiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE1MS45OTk1IiB4PSIyMiIgeT0iMjE3Ljg5NjkiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjEwIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNSIgeD0iMTUzLjk5OTUiIHk9IjIyMi44OTY5Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0IiB4PSIxNTEuOTk5NSIgeT0iMjI0Ljg5NjkiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjE1MS45OTk1IiB5PSIyMjguODk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjM3IiB5PSIyNTAuODkyIj4mIzEyNTIyOyYjMTI0ODg7JiMxMjUyMTsmIzEyNDUyOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTEuOTk5NSIgeD0iMzciIHk9IjI2Ny4xODg5Ij4mIzEyNDUyOyYjMTI1MzE7JiMxMjQ3OTsmIzEyNTQwOyYjMTI0NzU7JiMxMjUwMzsmIzEyNDc5OyYjMTI1NDA7PC90ZXh0PjwvZz48IS0tZW50aXR5IGhlYWx0aF9jbGllbnQtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uLi4uaGVhbHRoX2NsaWVudCIgZGF0YS1zb3VyY2UtbGluZT0iNiIgaWQ9ImVudDAwMDUiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNjIuNTkzOCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTM3Ljk5OTYiIHg9IjIwOSIgeT0iNzguMjk2OSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTAiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE1IiB4PSIzMjYuOTk5NiIgeT0iODMuMjk2OSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iMzI0Ljk5OTYiIHk9Ijg1LjI5NjkiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjMyNC45OTk2IiB5PSI4OS4yOTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTcuOTk5NiIgeD0iMjI0IiB5PSIxMTEuMjkyIj4mIzEyNTA0OyYjMTI1MjM7JiMxMjQ3MzsmIzEyNDgxOyYjMTI0NTU7JiMxMjQ4MzsmIzEyNDYzOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4My45OTk2IiB4PSIyMjQiIHk9IjEyNy41ODg5Ij4mIzEyNDYzOyYjMTI1MjE7JiMxMjQ1MjsmIzEyNDUwOyYjMTI1MzE7JiMxMjQ4ODs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgY2hhbm5lbC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9ImdSUEMgLi4uLi5jaGFubmVsIiBkYXRhLXNvdXJjZS1saW5lPSIxMCIgaWQ9ImVudDAwMDciPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNDYuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iOTUuOTk5OCIgeD0iNTAiIHk9IjM2NC40ODY5Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTUiIHg9IjEyNS45OTk4IiB5PSIzNjkuNDg2OSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iMTIzLjk5OTgiIHk9IjM3MS40ODY5Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0IiB4PSIxMjMuOTk5OCIgeT0iMzc1LjQ4NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSI2NSIgeT0iMzk3LjQ4MiI+JiMxMjQ4MTsmIzEyNTE1OyYjMTI0OTM7JiMxMjUyMzs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgY2lyY3VpdC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9ImdSUEMgLi4uLi5jaXJjdWl0IiBkYXRhLXNvdXJjZS1saW5lPSIxMSIgaWQ9ImVudDAwMDgiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNDYuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTM3Ljk5OTYiIHg9IjI5IiB5PSI0ODcuNzg2OSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTAiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE1IiB4PSIxNDYuOTk5NiIgeT0iNDkyLjc4NjkiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjE0NC45OTk2IiB5PSI0OTQuNzg2OSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iMTQ0Ljk5OTYiIHk9IjQ5OC43ODY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTcuOTk5NiIgeD0iNDQiIHk9IjUyMC43ODIiPiYjMjIyMzg7JiMzNjMzNTsmIzEyNTAyOyYjMTI1MjQ7JiMxMjU0MDsmIzEyNDU5OyYjMTI1NDA7PC90ZXh0PjwvZz48IS0tZW50aXR5IGRlYWRsaW5lLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iZ1JQQyAuLi4uLmRlYWRsaW5lIiBkYXRhLXNvdXJjZS1saW5lPSIxMiIgaWQ9ImVudDAwMDkiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNjIuNTkzOCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTIzLjk5OTYiIHg9IjM2IiB5PSI1OTUuMDg2OSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTAiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE1IiB4PSIxMzkuOTk5NiIgeT0iNjAwLjA4NjkiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjEzNy45OTk2IiB5PSI2MDIuMDg2OSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iMTM3Ljk5OTYiIHk9IjYwNi4wODY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iNTEiIHk9IjYyOC4wODIiPiYjMTI0ODc7JiMxMjQ4MzsmIzEyNDg5OyYjMTI1MjE7JiMxMjQ1MjsmIzEyNTMxOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNy45OTk5IiB4PSI1MSIgeT0iNjQ0LjM3ODkiPiYjMzE2NDk7JiMyOTcwMjs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgZXJyb3JfaW50ZXJjZXB0b3ItLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uLmVycm9yX2ludGVyY2VwdG9yIiBkYXRhLXNvdXJjZS1saW5lPSIxNiIgaWQ9ImVudDAwMTEiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNjIuNTkzOCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTUxLjk5OTUiIHg9IjIyIiB5PSI3NDEuNjc2OSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTAiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE1IiB4PSIxNTMuOTk5NSIgeT0iNzQ2LjY3NjkiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjE1MS45OTk1IiB5PSI3NDguNjc2OSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iMTUxLjk5OTUiIHk9Ijc1Mi42NzY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDEuOTk5OCIgeD0iMzciIHk9Ijc3NC42NzIiPiYjMTI0NTY7JiMxMjUyMTsmIzEyNTQwOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTEuOTk5NSIgeD0iMzciIHk9Ijc5MC45Njg5Ij4mIzEyNDUyOyYjMTI1MzE7JiMxMjQ3OTsmIzEyNTQwOyYjMTI0NzU7JiMxMjUwMzsmIzEyNDc5OyYjMTI1NDA7PC90ZXh0PjwvZz48IS0tZW50aXR5IHNlcnZpY2UtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uLnNlcnZpY2UiIGRhdGEtc291cmNlLWxpbmU9IjE3IiBpZD0iZW50MDAxMiI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI0Ni4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMzcuMjgyIiB4PSIyOS4zNiIgeT0iODY1LjI2NjkiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjEwIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNSIgeD0iMTQ2LjY0MiIgeT0iODcwLjI2NjkiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjE0NC42NDIiIHk9Ijg3Mi4yNjY5Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0IiB4PSIxNDQuNjQyIiB5PSI4NzYuMjY2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk3LjI4MiIgeD0iNDQuMzYiIHk9Ijg5OC4yNjIiPmdSUEMgJiMxMjQ2OTsmIzEyNTQwOyYjMTI0OTk7JiMxMjQ3Mzs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgaGVhbHRoX3NlcnZpY2UtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uLmhlYWx0aF9zZXJ2aWNlIiBkYXRhLXNvdXJjZS1saW5lPSIxOCIgaWQ9ImVudDAwMTMiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNDYuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTM3Ljk5OTYiIHg9IjIwOSIgeT0iNzQ5LjgyNjkiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjEwIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNSIgeD0iMzI2Ljk5OTYiIHk9Ijc1NC44MjY5Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0IiB4PSIzMjQuOTk5NiIgeT0iNzU2LjgyNjkiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjMyNC45OTk2IiB5PSI3NjAuODI2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk3Ljk5OTYiIHg9IjIyNCIgeT0iNzgyLjgyMiI+JiMxMjUwNDsmIzEyNTIzOyYjMTI0NzM7JiMxMjQ2OTsmIzEyNTQwOyYjMTI0OTk7JiMxMjQ3Mzs8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkdNTjIxIiBkYXRhLXNvdXJjZS1saW5lPSIzMSIgaWQ9ImVudDAwMjIiPjxwYXRoIGQ9Ik0zODIuMjksNzUyLjgzNjkgTDM4Mi4yOSw3OTMuMTAyNSBMNTA5LjcxNDksNzkzLjEwMjUgTDUwOS43MTQ5LDc2Mi44MzY5IEw0OTkuNzE0OSw3NTIuODM2OSBMMzgyLjI5LDc1Mi44MzY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNNDk5LjcxNDksNzUyLjgzNjkgTDQ5OS43MTQ5LDc2Mi44MzY5IEw1MDkuNzE0OSw3NjIuODM2OSBMNDk5LjcxNDksNzUyLjgzNjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDYuNDI0OSIgeD0iMzg4LjI5IiB5PSI3NjkuOTAzOCI+JiMyMDM2MzsmIzIyODA2OyYjMTI0MzQ7U3RhdHVzJiMyMjc5MzsmIzI1NTYzOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3OC4wMDAxIiB4PSIzODguMjkiIHk9Ijc4NS4wMzY2Ij4mIzM1NDQzOyYjMzIwNDg7JiMyNDc3MzsmIzIyNTc3OyYjMzY4NjE7JiMyMTE1Mjs8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkdNTjI0IiBkYXRhLXNvdXJjZS1saW5lPSIzNiIgaWQ9ImVudDAwMjUiPjxwYXRoIGQ9Ik0zMzEsNDkwLjc5NjkgTDMzMSw1MDYuOTM2OSBMMTY3LjQzLDUxMC45MzY5IEwzMzEsNTE0LjkzNjkgTDMzMSw1MzEuMDYyNSBBMCwwIDAgMCAwIDMzMSw1MzEuMDYyNSBMNDQzLjAwMDEsNTMxLjA2MjUgQTAsMCAwIDAgMCA0NDMuMDAwMSw1MzEuMDYyNSBMNDQzLjAwMDEsNTAwLjc5NjkgTDQzMy4wMDAxLDQ5MC43OTY5IEwzMzEsNDkwLjc5NjkgQTAsMCAwIDAgMCAzMzEsNDkwLjc5NjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik00MzMuMDAwMSw0OTAuNzk2OSBMNDMzLjAwMDEsNTAwLjc5NjkgTDQ0My4wMDAxLDUwMC43OTY5IEw0MzMuMDAwMSw0OTAuNzk2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTEuMDAwMSIgeD0iMzM3IiB5PSI1MDcuODYzOCI+JiMzNjg5OTsmIzMyMTU0OyYjMTI0NTY7JiMxMjUyMTsmIzEyNTQwOyYjMjYxNzg7JiMxMjM5NTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTEuMDAwMSIgeD0iMzM3IiB5PSI1MjIuOTk2NiI+JiMyMjIzODsmIzM2MzM1OyYjMTI0MzQ7JiMxMjQ1ODsmIzEyNTQwOyYjMTI1MDM7JiMxMjUzMTs8L3RleHQ+PC9nPjwhLS1saW5rIGNsaWVudCB0byByZXRyeS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDAzIiBkYXRhLWVudGl0eS0yPSJlbnQwMDA0IiBkYXRhLWxpbmstdHlwZT0iZGVwZW5kZW5jeSIgZGF0YS1zb3VyY2UtbGluZT0iMjEiIGlkPSJsbmsxNCI+PHBhdGggZD0iTTk4LDE0MS4xMzY5IEM5OCwxNjMuOTM2OSA5OCwxODguOTU2OSA5OCwyMTEuNzM2OSIgZmlsbD0ibm9uZSIgaWQ9ImNsaWVudC10by1yZXRyeSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iOTgsMjE3LjczNjksMTAyLDIwOC43MzY5LDk4LDIxMi43MzY5LDk0LDIwOC43MzY5LDk4LDIxNy43MzY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjUuMDAwMSIgeD0iOTkiIHk9IjE4My45NjM4Ij4mIzEyNTIyOyYjMTI0NjM7JiMxMjQ1NjsmIzEyNDczOyYjMTI0ODg7PC90ZXh0PjwvZz48IS0tbGluayByZXRyeSB0byBjaGFubmVsLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDQiIGRhdGEtZW50aXR5LTI9ImVudDAwMDciIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSIyMiIgaWQ9ImxuazE1Ij48cGF0aCBkPSJNOTgsMjgwLjgxNjkgQzk4LDMwNi4xMTY5IDk4LDMzNS40NDY5IDk4LDM1OC4xODY5IiBmaWxsPSJub25lIiBpZD0icmV0cnktdG8tY2hhbm5lbCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iOTgsMzY0LjE4NjksMTAyLDM1NS4xODY5LDk4LDM1OS4xODY5LDk0LDM1NS4xODY5LDk4LDM2NC4xODY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rIGNoYW5uZWwgdG8gY2lyY3VpdC0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDA3IiBkYXRhLWVudGl0eS0yPSJlbnQwMDA4IiBkYXRhLWxpbmstdHlwZT0iZGVwZW5kZW5jeSIgZGF0YS1zb3VyY2UtbGluZT0iMjMiIGlkPSJsbmsxNiI+PHBhdGggZD0iTTk4LDQxMS4xNjY5IEM5OCw0MzIuOTU2OSA5OCw0NTkuNzc2OSA5OCw0ODEuNTI2OSIgZmlsbD0ibm9uZSIgaWQ9ImNoYW5uZWwtdG8tY2lyY3VpdCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iOTgsNDg3LjUyNjksMTAyLDQ3OC41MjY5LDk4LDQ4Mi41MjY5LDk0LDQ3OC41MjY5LDk4LDQ4Ny41MjY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rIGNpcmN1aXQgdG8gZGVhZGxpbmUtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwOCIgZGF0YS1lbnRpdHktMj0iZW50MDAwOSIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjI0IiBpZD0ibG5rMTciPjxwYXRoIGQ9Ik05OCw1MzQuMzQ2OSBDOTgsNTUxLjY1NjkgOTgsNTY5Ljc4NjkgOTgsNTg4Ljg1NjkiIGZpbGw9Im5vbmUiIGlkPSJjaXJjdWl0LXRvLWRlYWRsaW5lIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI5OCw1OTQuODU2OSwxMDIsNTg1Ljg1NjksOTgsNTg5Ljg1NjksOTQsNTg1Ljg1NjksOTgsNTk0Ljg1NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLWxpbmsgZGVhZGxpbmUgdG8gZXJyb3JfaW50ZXJjZXB0b3ItLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwOSIgZGF0YS1lbnRpdHktMj0iZW50MDAxMSIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjI1IiBpZD0ibG5rMTgiPjxwYXRoIGQ9Ik05OCw2NTguMDQ2OSBDOTgsNjgyLjU4NjkgOTgsNzEwLjgyNjkgOTgsNzM1LjM1NjkiIGZpbGw9Im5vbmUiIGlkPSJkZWFkbGluZS10by1lcnJvcl9pbnRlcmNlcHRvciIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iOTgsNzQxLjM1NjksMTAyLDczMi4zNTY5LDk4LDczNi4zNTY5LDk0LDczMi4zNTY5LDk4LDc0MS4zNTY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rIGVycm9yX2ludGVyY2VwdG9yIHRvIHNlcnZpY2UtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAxMSIgZGF0YS1lbnRpdHktMj0iZW50MDAxMiIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjI2IiBpZD0ibG5rMTkiPjxwYXRoIGQ9Ik05OCw4MDQuNjc2OSBDOTgsODIzLjcwNjkgOTgsODQxLjcxNjkgOTgsODU4Ljk3NjkiIGZpbGw9Im5vbmUiIGlkPSJlcnJvcl9pbnRlcmNlcHRvci10by1zZXJ2aWNlIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI5OCw4NjQuOTc2OSwxMDIsODU1Ljk3NjksOTgsODU5Ljk3NjksOTQsODU1Ljk3NjksOTgsODY0Ljk3NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLWxpbmsgaGVhbHRoX2NsaWVudCB0byBoZWFsdGhfc2VydmljZS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDA1IiBkYXRhLWVudGl0eS0yPSJlbnQwMDEzIiBkYXRhLWxpbmstdHlwZT0iZGVwZW5kZW5jeSIgZGF0YS1zb3VyY2UtbGluZT0iMjgiIGlkPSJsbmsyMCI+PHBhdGggZD0iTTI3OCwxNDEuMTk2OSBDMjc4LDE2OS4wODY5IDI3OCwyMTEuNDA2OSAyNzgsMjQ4LjE4NjkgQzI3OCwyNDguMTg2OSAyNzgsMjQ4LjE4NjkgMjc4LDYyNy4zNzY5IEMyNzgsNjcwLjU1NjkgMjc4LDcxNC45ODY5IDI3OCw3NDMuNDM2OSIgZmlsbD0ibm9uZSIgaWQ9ImhlYWx0aF9jbGllbnQtdG8taGVhbHRoX3NlcnZpY2UiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjI3OCw3NDkuNDM2OSwyODIsNzQwLjQzNjksMjc4LDc0NC40MzY5LDI3NCw3NDAuNDM2OSwyNzgsNzQ5LjQzNjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5MS4wMDAxIiB4PSIyNzkiIHk9IjQ1My44NTM4Ij4mIzEyNTA0OyYjMTI1MjM7JiMxMjQ3MzsmIzEyNDgxOyYjMTI0NTU7JiMxMjQ4MzsmIzEyNDYzOzwvdGV4dD48L2c+PCEtLWxpbmsgZXJyb3JfaW50ZXJjZXB0b3IgdG8gR01OMjEtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAxMSIgZGF0YS1lbnRpdHktMj0iZW50MDAyMiIgZGF0YS1saW5rLXR5cGU9ImFzc29jaWF0aW9uIiBkYXRhLXNvdXJjZS1saW5lPSIzMSIgaWQ9ImxuazIzIj48cGF0aCBkPSJNMTI2LjExLDc0MS42MDY5IEMxNDYuNzcsNzIxLjQ1NjkgMTc2Ljg0LDY5Ny42ODY5IDIwOS41LDY5MC4xNzY5IEMyMzguOTUsNjgzLjM5NjkgMzE2LjA1LDY4My4zOTY5IDM0NS41LDY5MC4xNzY5IEMzNTMuOTMsNjkyLjExNjkgMzU1LjgyLDY5My44NTY5IDM2Myw2OTguNjc2OSBDMzg2LjYsNzE0LjUxNjkgNDEwLjQ3LDczNi42NjY5IDQyNi41MSw3NTIuNjU2OSIgZmlsbD0ibm9uZSIgaWQ9ImVycm9yX2ludGVyY2VwdG9yLUdNTjIxIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheTo3LDc7Ii8+PC9nPjw/cGxhbnR1bWwtc3JjIFhMRlJJWUQxNDd0bGhzWm9kWF9tbUhUX081YVZleVdtd0txNlh1dnFzZUw1NWhHUk9ySDRLVjBBdVlNV0NMdzk1dlJyeVo3YjlGNGx4QXhrMlJhOGxhbU5yTkxFZEpoTDhvQ1BDcmh1LU1FQ1daZTdOR1Z6MzdlVFQxRnFDa1dCNndYUksyU3Nod3YwTHEzVFc1dTBWS2g4SjExRTFtTDZDdlloV3dmWGVPNU1DdElFdjhSSjRucDM3U2tpeGYzcDJWSVBrUG9hR1BjNlNTSXVENDNSa0VnbTViOTM2TXpPX3pfMkNLUThPNUJ5aU9YVHEwckdfd21zUEdZclFNd1hXbWVHTDZIMUI4akpsanRWZGFjUzRwV1Z3M0wzd0dSZklKWVhuTzFwNWZEU1NkM09VSjh6amE1VmVobjZBWW9DSDNXUnVKMUJMZXdyaS12NmNVM2p3LUZzSFdOaHlZcDhubjVkVko5MEZVMFlEaXBOTS1jTnl1cVRKOFlJYzhndVAyOWFDeDhhSUN1bHJuNWs2T2ttaUNwNHhvWGFsU3VEYmRZTnFhZ1pwbmI2aXpiSHZwaVRDTEJqQWMtaUZjai1ES0ZTWlFyOU5WQWRvdGJSXzhjdmhXTGZXRGRYS09Pb005Vmc4dHJSblFsLTJQcFFCenY5WFgxVWFlb0FnNTJLakZKaFl6Umxod2o5UkhsS3ZoV0N2Nm12Z0lzdHJXejhmenZpdHotc3o2OW9URFR2VXFiTVpXWlpVTWg5MVlkSmtKX2NKemtGLXpycmpsT0tCM0k4VnFQZzR6RzVCaTd5OFNxa3JvUzA/PjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<hr />
<h3 id="172-grpc">17.2 gRPC ステータスコード<a class="headerlink" href="#172-grpc" title="Permanent link">&para;</a></h3>
<details>
<summary>コード例: GrpcStatusCode.java</summary>

<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * gRPC ステータスコードとビジネス例外のマッピング</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">enum</span><span class="w"> </span><span class="n">GrpcStatusCode</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// 成功</span>
<span class="w">    </span><span class="n">OK</span><span class="p">(</span><span class="n">Status</span><span class="p">.</span><span class="na">OK</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;正常終了&quot;</span><span class="p">),</span>

<span class="w">    </span><span class="c1">// クライアントエラー</span>
<span class="w">    </span><span class="n">INVALID_ARGUMENT</span><span class="p">(</span><span class="n">Status</span><span class="p">.</span><span class="na">INVALID_ARGUMENT</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;不正な引数&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">NOT_FOUND</span><span class="p">(</span><span class="n">Status</span><span class="p">.</span><span class="na">NOT_FOUND</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;リソースが見つかりません&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">ALREADY_EXISTS</span><span class="p">(</span><span class="n">Status</span><span class="p">.</span><span class="na">ALREADY_EXISTS</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;リソースが既に存在します&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">PERMISSION_DENIED</span><span class="p">(</span><span class="n">Status</span><span class="p">.</span><span class="na">PERMISSION_DENIED</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;権限がありません&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">FAILED_PRECONDITION</span><span class="p">(</span><span class="n">Status</span><span class="p">.</span><span class="na">FAILED_PRECONDITION</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;前提条件が満たされていません&quot;</span><span class="p">),</span>

<span class="w">    </span><span class="c1">// サーバーエラー</span>
<span class="w">    </span><span class="n">INTERNAL</span><span class="p">(</span><span class="n">Status</span><span class="p">.</span><span class="na">INTERNAL</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;内部エラー&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">UNAVAILABLE</span><span class="p">(</span><span class="n">Status</span><span class="p">.</span><span class="na">UNAVAILABLE</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;サービス利用不可&quot;</span><span class="p">),</span>

<span class="w">    </span><span class="c1">// タイムアウト</span>
<span class="w">    </span><span class="n">DEADLINE_EXCEEDED</span><span class="p">(</span><span class="n">Status</span><span class="p">.</span><span class="na">DEADLINE_EXCEEDED</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;タイムアウト&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">CANCELLED</span><span class="p">(</span><span class="n">Status</span><span class="p">.</span><span class="na">CANCELLED</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;キャンセルされました&quot;</span><span class="p">),</span>

<span class="w">    </span><span class="c1">// 認証</span>
<span class="w">    </span><span class="n">UNAUTHENTICATED</span><span class="p">(</span><span class="n">Status</span><span class="p">.</span><span class="na">UNAUTHENTICATED</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;認証が必要です&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * リトライ可能なステータスかどうか</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isRetryable</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">UNAVAILABLE</span><span class="w"> </span><span class="o">||</span>
<span class="w">               </span><span class="k">this</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">DEADLINE_EXCEEDED</span><span class="w"> </span><span class="o">||</span>
<span class="w">               </span><span class="k">this</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">INTERNAL</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h3 id="173">17.3 カスタム例外クラス<a class="headerlink" href="#173" title="Permanent link">&para;</a></h3>
<details>
<summary>コード例: GrpcException.java</summary>

<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * gRPC 用カスタム例外</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">GrpcException</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">RuntimeException</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">GrpcStatusCode</span><span class="w"> </span><span class="n">statusCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">details</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">retryable</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">retryDelayMillis</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// 便利なファクトリメソッド</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">GrpcException</span><span class="w"> </span><span class="nf">notFound</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">resource</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">identifier</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">builder</span><span class="p">(</span><span class="n">GrpcStatusCode</span><span class="p">.</span><span class="na">NOT_FOUND</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">message</span><span class="p">(</span><span class="n">resource</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; が見つかりません: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">identifier</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">detail</span><span class="p">(</span><span class="s">&quot;resource&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">resource</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">detail</span><span class="p">(</span><span class="s">&quot;identifier&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">identifier</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">GrpcException</span><span class="w"> </span><span class="nf">invalidArgument</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">field</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">reason</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">builder</span><span class="p">(</span><span class="n">GrpcStatusCode</span><span class="p">.</span><span class="na">INVALID_ARGUMENT</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">message</span><span class="p">(</span><span class="s">&quot;不正な引数: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">field</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; - &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">reason</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">detail</span><span class="p">(</span><span class="s">&quot;field&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">field</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">detail</span><span class="p">(</span><span class="s">&quot;reason&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">reason</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">GrpcException</span><span class="w"> </span><span class="nf">failedPrecondition</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">condition</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">builder</span><span class="p">(</span><span class="n">GrpcStatusCode</span><span class="p">.</span><span class="na">FAILED_PRECONDITION</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">message</span><span class="p">(</span><span class="s">&quot;前提条件が満たされていません: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">condition</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">detail</span><span class="p">(</span><span class="s">&quot;condition&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">condition</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">GrpcException</span><span class="w"> </span><span class="nf">unavailable</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">service</span><span class="p">,</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">retryDelayMillis</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">builder</span><span class="p">(</span><span class="n">GrpcStatusCode</span><span class="p">.</span><span class="na">UNAVAILABLE</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">message</span><span class="p">(</span><span class="s">&quot;サービス利用不可: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">service</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">retryable</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">retryDelayMillis</span><span class="p">(</span><span class="n">retryDelayMillis</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Status</span><span class="w"> </span><span class="nf">toStatus</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">statusCode</span><span class="p">.</span><span class="na">getStatus</span><span class="p">().</span><span class="na">withDescription</span><span class="p">(</span><span class="n">getMessage</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h3 id="174">17.4 例外変換インターセプター<a class="headerlink" href="#174" title="Permanent link">&para;</a></h3>
<details>
<summary>コード例: ExceptionTranslationInterceptor.java</summary>

<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * 例外を gRPC Status に変換するインターセプター</span>
<span class="cm"> */</span>
<span class="nd">@GrpcGlobalServerInterceptor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ExceptionTranslationInterceptor</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">ServerInterceptor</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">StatusRuntimeException</span><span class="w"> </span><span class="nf">translateException</span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// GrpcException の場合</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="w"> </span><span class="k">instanceof</span><span class="w"> </span><span class="n">GrpcException</span><span class="w"> </span><span class="n">grpcEx</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">createStatusException</span><span class="p">(</span><span class="n">grpcEx</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// ドメイン例外の変換</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="w"> </span><span class="k">instanceof</span><span class="w"> </span><span class="n">EntityNotFoundException</span><span class="w"> </span><span class="n">notFound</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">createNotFoundStatus</span><span class="p">(</span><span class="n">notFound</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="w"> </span><span class="k">instanceof</span><span class="w"> </span><span class="n">ValidationException</span><span class="w"> </span><span class="n">validation</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">createValidationStatus</span><span class="p">(</span><span class="n">validation</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="w"> </span><span class="k">instanceof</span><span class="w"> </span><span class="n">BusinessException</span><span class="w"> </span><span class="n">business</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">createBusinessStatus</span><span class="p">(</span><span class="n">business</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// その他は内部エラー</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">createInternalStatus</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">StatusRuntimeException</span><span class="w"> </span><span class="nf">createValidationStatus</span><span class="p">(</span><span class="n">ValidationException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">BadRequest</span><span class="p">.</span><span class="na">Builder</span><span class="w"> </span><span class="n">badRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BadRequest</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">();</span>

<span class="w">        </span><span class="n">e</span><span class="p">.</span><span class="na">getViolations</span><span class="p">().</span><span class="na">forEach</span><span class="p">(</span><span class="n">violation</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">            </span><span class="n">badRequest</span><span class="p">.</span><span class="na">addFieldViolations</span><span class="p">(</span>
<span class="w">                </span><span class="n">BadRequest</span><span class="p">.</span><span class="na">FieldViolation</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">setField</span><span class="p">(</span><span class="n">violation</span><span class="p">.</span><span class="na">field</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">setDescription</span><span class="p">(</span><span class="n">violation</span><span class="p">.</span><span class="na">message</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
<span class="w">            </span><span class="p">)</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="n">com</span><span class="p">.</span><span class="na">google</span><span class="p">.</span><span class="na">rpc</span><span class="p">.</span><span class="na">Status</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">com</span><span class="p">.</span><span class="na">google</span><span class="p">.</span><span class="na">rpc</span><span class="p">.</span><span class="na">Status</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">setCode</span><span class="p">(</span><span class="n">Status</span><span class="p">.</span><span class="na">INVALID_ARGUMENT</span><span class="p">.</span><span class="na">getCode</span><span class="p">().</span><span class="na">value</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">setMessage</span><span class="p">(</span><span class="s">&quot;バリデーションエラー&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">addDetails</span><span class="p">(</span><span class="n">Any</span><span class="p">.</span><span class="na">pack</span><span class="p">(</span><span class="n">badRequest</span><span class="p">.</span><span class="na">build</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">StatusProto</span><span class="p">.</span><span class="na">toStatusRuntimeException</span><span class="p">(</span><span class="n">status</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h3 id="175">17.5 リトライ設定<a class="headerlink" href="#175" title="Permanent link">&para;</a></h3>
<details>
<summary>コード例: GrpcRetryConfig.java</summary>

<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * リトライポリシー設定</span>
<span class="cm"> */</span>
<span class="nd">@Configuration</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">GrpcRetryConfig</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Bean</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">RetryPolicy</span><span class="w"> </span><span class="nf">retryPolicy</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">RetryPolicy</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">maxAttempts</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">initialBackoff</span><span class="p">(</span><span class="n">Duration</span><span class="p">.</span><span class="na">ofMillis</span><span class="p">(</span><span class="mi">500</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">maxBackoff</span><span class="p">(</span><span class="n">Duration</span><span class="p">.</span><span class="na">ofSeconds</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">backoffMultiplier</span><span class="p">(</span><span class="mf">2.0</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">retryableStatusCodes</span><span class="p">(</span><span class="n">Set</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">                </span><span class="n">Status</span><span class="p">.</span><span class="na">Code</span><span class="p">.</span><span class="na">UNAVAILABLE</span><span class="p">,</span>
<span class="w">                </span><span class="n">Status</span><span class="p">.</span><span class="na">Code</span><span class="p">.</span><span class="na">DEADLINE_EXCEEDED</span><span class="p">,</span>
<span class="w">                </span><span class="n">Status</span><span class="p">.</span><span class="na">Code</span><span class="p">.</span><span class="na">INTERNAL</span>
<span class="w">            </span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h3 id="176">17.6 回路ブレーカー<a class="headerlink" href="#176" title="Permanent link">&para;</a></h3>
<details>
<summary>コード例: GrpcCircuitBreaker.java</summary>

<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * gRPC 回路ブレーカー</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">GrpcCircuitBreaker</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">enum</span><span class="w"> </span><span class="n">State</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">CLOSED</span><span class="p">,</span><span class="w">      </span><span class="c1">// 正常（リクエスト許可）</span>
<span class="w">        </span><span class="n">OPEN</span><span class="p">,</span><span class="w">        </span><span class="c1">// 遮断（リクエスト拒否）</span>
<span class="w">        </span><span class="n">HALF_OPEN</span><span class="w">    </span><span class="c1">// 試行中</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">failureThreshold</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">successThreshold</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Duration</span><span class="w"> </span><span class="n">openStateTimeout</span><span class="p">;</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">volatile</span><span class="w"> </span><span class="n">State</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">State</span><span class="p">.</span><span class="na">CLOSED</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">AtomicInteger</span><span class="w"> </span><span class="n">failureCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AtomicInteger</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">AtomicInteger</span><span class="w"> </span><span class="n">successCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AtomicInteger</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">volatile</span><span class="w"> </span><span class="n">Instant</span><span class="w"> </span><span class="n">lastFailureTime</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">allowRequest</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">CLOSED</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">OPEN</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">shouldAttemptReset</span><span class="p">();</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">HALF_OPEN</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">shouldAttemptReset</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">lastFailureTime</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Duration</span><span class="p">.</span><span class="na">between</span><span class="p">(</span><span class="n">lastFailureTime</span><span class="p">,</span><span class="w"> </span><span class="n">Instant</span><span class="p">.</span><span class="na">now</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">compareTo</span><span class="p">(</span><span class="n">openStateTimeout</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">State</span><span class="p">.</span><span class="na">HALF_OPEN</span><span class="p">;</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">recordSuccess</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">State</span><span class="p">.</span><span class="na">HALF_OPEN</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">successCount</span><span class="p">.</span><span class="na">incrementAndGet</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">successThreshold</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">reset</span><span class="p">();</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">failureCount</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">recordFailure</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">lastFailureTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Instant</span><span class="p">.</span><span class="na">now</span><span class="p">();</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">State</span><span class="p">.</span><span class="na">HALF_OPEN</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">trip</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">failureCount</span><span class="p">.</span><span class="na">incrementAndGet</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">failureThreshold</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">trip</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">trip</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">State</span><span class="p">.</span><span class="na">OPEN</span><span class="p">;</span>
<span class="w">        </span><span class="n">failureCount</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">        </span><span class="n">successCount</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">reset</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">State</span><span class="p">.</span><span class="na">CLOSED</span><span class="p">;</span>
<span class="w">        </span><span class="n">failureCount</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">        </span><span class="n">successCount</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h3 id="177">17.7 ヘルスチェックサービス<a class="headerlink" href="#177" title="Permanent link">&para;</a></h3>
<details>
<summary>コード例: HealthCheckService.java</summary>

<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * gRPC ヘルスチェックサービス</span>
<span class="cm"> */</span>
<span class="nd">@GrpcService</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">HealthCheckService</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">HealthGrpc</span><span class="p">.</span><span class="na">HealthImplBase</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">HealthCheckResponse</span><span class="p">.</span><span class="na">ServingStatus</span><span class="o">&gt;</span><span class="w"> </span><span class="n">serviceStatuses</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">ConcurrentHashMap</span><span class="o">&lt;&gt;</span><span class="p">();</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">HealthCheckService</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// デフォルトで全サービスを SERVING に設定</span>
<span class="w">        </span><span class="n">setServiceStatus</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">HealthCheckResponse</span><span class="p">.</span><span class="na">ServingStatus</span><span class="p">.</span><span class="na">SERVING</span><span class="p">);</span>
<span class="w">        </span><span class="n">setServiceStatus</span><span class="p">(</span><span class="s">&quot;com.example.sales.ProductService&quot;</span><span class="p">,</span>
<span class="w">                         </span><span class="n">HealthCheckResponse</span><span class="p">.</span><span class="na">ServingStatus</span><span class="p">.</span><span class="na">SERVING</span><span class="p">);</span>
<span class="w">        </span><span class="n">setServiceStatus</span><span class="p">(</span><span class="s">&quot;com.example.sales.OrderService&quot;</span><span class="p">,</span>
<span class="w">                         </span><span class="n">HealthCheckResponse</span><span class="p">.</span><span class="na">ServingStatus</span><span class="p">.</span><span class="na">SERVING</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">check</span><span class="p">(</span><span class="n">HealthCheckRequest</span><span class="w"> </span><span class="n">request</span><span class="p">,</span>
<span class="w">                      </span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">HealthCheckResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="n">responseObserver</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">service</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getService</span><span class="p">();</span>
<span class="w">        </span><span class="n">HealthCheckResponse</span><span class="p">.</span><span class="na">ServingStatus</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">serviceStatuses</span><span class="p">.</span><span class="na">getOrDefault</span><span class="p">(</span>
<span class="w">            </span><span class="n">service</span><span class="p">,</span>
<span class="w">            </span><span class="n">HealthCheckResponse</span><span class="p">.</span><span class="na">ServingStatus</span><span class="p">.</span><span class="na">SERVICE_UNKNOWN</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="n">HealthCheckResponse</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HealthCheckResponse</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">setStatus</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">        </span><span class="n">responseObserver</span><span class="p">.</span><span class="na">onNext</span><span class="p">(</span><span class="n">response</span><span class="p">);</span>
<span class="w">        </span><span class="n">responseObserver</span><span class="p">.</span><span class="na">onCompleted</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">watch</span><span class="p">(</span><span class="n">HealthCheckRequest</span><span class="w"> </span><span class="n">request</span><span class="p">,</span>
<span class="w">                      </span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">HealthCheckResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="n">responseObserver</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 継続的なヘルスチェック監視</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">service</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getService</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// 初期状態を送信</span>
<span class="w">        </span><span class="n">HealthCheckResponse</span><span class="p">.</span><span class="na">ServingStatus</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">serviceStatuses</span><span class="p">.</span><span class="na">getOrDefault</span><span class="p">(</span>
<span class="w">            </span><span class="n">service</span><span class="p">,</span>
<span class="w">            </span><span class="n">HealthCheckResponse</span><span class="p">.</span><span class="na">ServingStatus</span><span class="p">.</span><span class="na">SERVICE_UNKNOWN</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="n">responseObserver</span><span class="p">.</span><span class="na">onNext</span><span class="p">(</span><span class="n">HealthCheckResponse</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">setStatus</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">());</span>

<span class="w">        </span><span class="c1">// 状態変更時に通知（実装省略）</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h3 id="178">17.8 フロー制御付きストリームオブザーバー<a class="headerlink" href="#178" title="Permanent link">&para;</a></h3>
<details>
<summary>コード例: FlowControlledStreamObserver.java</summary>

<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * フロー制御付きストリームオブザーバー</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">FlowControlledStreamObserver</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">CallStreamObserver</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">delegate</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Queue</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">buffer</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">maxBufferSize</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">AtomicBoolean</span><span class="w"> </span><span class="n">completed</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">FlowControlledStreamObserver</span><span class="p">(</span><span class="n">CallStreamObserver</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">delegate</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">maxBufferSize</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">delegate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">delegate</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">buffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ConcurrentLinkedQueue</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">maxBufferSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">maxBufferSize</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">completed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AtomicBoolean</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// バックプレッシャー設定</span>
<span class="w">        </span><span class="n">delegate</span><span class="p">.</span><span class="na">setOnReadyHandler</span><span class="p">(</span><span class="k">this</span><span class="p">::</span><span class="n">drainBuffer</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onNext</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">completed</span><span class="p">.</span><span class="na">get</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">delegate</span><span class="p">.</span><span class="na">isReady</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">delegate</span><span class="p">.</span><span class="na">onNext</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">buffer</span><span class="p">.</span><span class="na">size</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">maxBufferSize</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="p">;</span><span class="w"> </span><span class="c1">// バッファ満杯時は破棄</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="n">buffer</span><span class="p">.</span><span class="na">offer</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">drainBuffer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">delegate</span><span class="p">.</span><span class="na">isReady</span><span class="p">()</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="n">buffer</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">T</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">buffer</span><span class="p">.</span><span class="na">poll</span><span class="p">();</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">delegate</span><span class="p">.</span><span class="na">onNext</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">completed</span><span class="p">.</span><span class="na">get</span><span class="p">()</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">buffer</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">delegate</span><span class="p">.</span><span class="na">onCompleted</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h2 id="part-10-d">Part 10-D のまとめ<a class="headerlink" href="#part-10-d" title="Permanent link">&para;</a></h2>
<h3 id="_2">実装した機能一覧<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>章</th>
<th>内容</th>
<th>主要技術</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>第14章: 基礎</strong></td>
<td>gRPC サーバーの基礎</td>
<td>Protocol Buffers, HTTP/2, grpc-spring-boot-starter</td>
</tr>
<tr>
<td><strong>第15章: マスタ API</strong></td>
<td>商品・取引先・倉庫マスタ</td>
<td>単項 RPC, サーバーストリーミング</td>
</tr>
<tr>
<td><strong>第16章: トランザクション API</strong></td>
<td>受注・出荷・請求処理</td>
<td>クライアントストリーミング, 双方向ストリーミング</td>
</tr>
<tr>
<td><strong>第17章: エラーハンドリング</strong></td>
<td>リトライ, 回路ブレーカー, ヘルスチェック</td>
<td>gRPC Status, インターセプター</td>
</tr>
</tbody>
</table>
<h3 id="grpc">実装した gRPC サービス<a class="headerlink" href="#grpc" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>ProductService</strong>: 商品マスタの CRUD、一覧ストリーミング、一括登録</li>
<li><strong>PartnerService</strong>: 取引先マスタの CRUD、一覧ストリーミング、与信チェック</li>
<li><strong>WarehouseService</strong>: 倉庫マスタの CRUD、在庫ストリーミング</li>
<li><strong>OrderService</strong>: 受注の CRUD、確定、キャンセル、ステータス監視、明細一括登録</li>
<li><strong>ShipmentService</strong>: 出荷指示、ピッキング、出荷確定、進捗監視、一括確定</li>
<li><strong>InvoiceService</strong>: 締処理、発行、入金記録、双方向ストリーミング処理</li>
</ul>
<h3 id="_3">アーキテクチャの特徴<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>                    ┌─────────────────────────────────────┐
                    │         プレゼンテーション層          │
                    │  ┌─────────┐  ┌─────────┐  ┌──────┐ │
                    │  │ REST API │  │ GraphQL │  │ gRPC │ │
                    │  └─────────┘  └─────────┘  └──────┘ │
                    └─────────────────────────────────────┘
                                      │
                    ┌─────────────────────────────────────┐
                    │         アプリケーション層           │
                    │  ┌──────────────────────────────┐  │
                    │  │      ユースケース / サービス     │  │
                    │  └──────────────────────────────┘  │
                    └─────────────────────────────────────┘
                                      │
                    ┌─────────────────────────────────────┐
                    │            ドメイン層               │
                    │  ┌────────┐  ┌────────┐  ┌──────┐  │
                    │  │ エンティティ │  │ 値オブジェクト │  │ リポジトリ │  │
                    │  └────────┘  └────────┘  └──────┘  │
                    └─────────────────────────────────────┘
</code></pre></div>
<p>gRPC は REST API、GraphQL と並ぶプレゼンテーション層のエンドポイントとして機能し、高性能なバイナリ通信と双方向ストリーミングにより、リアルタイム性が求められるシステム間連携に適しています。</p>
<h3 id="_4">技術スタック<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>カテゴリ</th>
<th>技術</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>言語</strong></td>
<td>Java 21</td>
</tr>
<tr>
<td><strong>フレームワーク</strong></td>
<td>Spring Boot 4.0, grpc-spring-boot-starter 3.1</td>
</tr>
<tr>
<td><strong>プロトコル</strong></td>
<td>gRPC 1.62, Protocol Buffers 3.25</td>
</tr>
<tr>
<td><strong>ORM</strong></td>
<td>MyBatis 3.0</td>
</tr>
<tr>
<td><strong>データベース</strong></td>
<td>PostgreSQL 16</td>
</tr>
<tr>
<td><strong>テスト</strong></td>
<td>JUnit 5, grpc-testing, TestContainers</td>
</tr>
</tbody>
</table>
<h3 id="api">API 形式の比較と選択基準<a class="headerlink" href="#api" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>観点</th>
<th>REST API</th>
<th>gRPC</th>
<th>GraphQL</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>用途</strong></td>
<td>汎用 Web API</td>
<td>マイクロサービス間</td>
<td>フロントエンド向け</td>
</tr>
<tr>
<td><strong>パフォーマンス</strong></td>
<td>中</td>
<td>高</td>
<td>中</td>
</tr>
<tr>
<td><strong>ストリーミング</strong></td>
<td>WebSocket 別実装</td>
<td>ネイティブ</td>
<td>Subscription</td>
</tr>
<tr>
<td><strong>スキーマ</strong></td>
<td>OpenAPI (任意)</td>
<td>.proto (必須)</td>
<td>.graphqls (必須)</td>
</tr>
<tr>
<td><strong>ブラウザ対応</strong></td>
<td>◎</td>
<td>△ (gRPC-Web)</td>
<td>◎</td>
</tr>
<tr>
<td><strong>学習コスト</strong></td>
<td>低</td>
<td>中</td>
<td>中</td>
</tr>
</tbody>
</table>
<h3 id="grpc_1">gRPC を選択する場面<a class="headerlink" href="#grpc_1" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>マイクロサービス間通信</strong>: 高性能な内部通信が必要</li>
<li><strong>リアルタイム処理</strong>: ストリーミングによる進捗通知が必要</li>
<li><strong>多言語環境</strong>: 異なる言語で実装されたサービス間の連携</li>
<li><strong>低レイテンシ</strong>: バイナリプロトコルによる高速通信が必要</li>
<li><strong>双方向通信</strong>: 対話的な処理フローが必要</li>
</ol>
<p>gRPC サービスは、既存のヘキサゴナルアーキテクチャを活かしながら、Input Adapter として追加することで、REST API と並行運用が可能です。用途に応じて適切な API 形式を選択し、システム全体の効率と柔軟性を高めることができます。</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://github.com/k2works/practical-database-design" target="_blank" rel="noopener" title="GitHub Repository" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "search.suggest", "search.highlight"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
      
        <script src="../../../docs/assets/js/extra.js"></script>
      
    
  </body>
</html>