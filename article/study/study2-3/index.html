
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="基幹業務システム（販売管理・財務会計・生産管理）のデータベース設計を体系的に解説">
      
      
        <meta name="author" content="k2works">
      
      
      
        <link rel="prev" href="../study2-2/">
      
      
        <link rel="next" href="../study2-4/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>研究3 gRPCサービスの実装 - 実践データベース設計：基幹業務システム編</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../docs/mkdocs/assets/css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#3-grpc" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="実践データベース設計：基幹業務システム編" class="md-header__button md-logo" aria-label="実践データベース設計：基幹業務システム編" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            実践データベース設計：基幹業務システム編
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              研究3 gRPCサービスの実装
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/k2works/practical-database-design" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    practical-database-design
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
  実践データベース設計

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="実践データベース設計：基幹業務システム編" class="md-nav__button md-logo" aria-label="実践データベース設計：基幹業務システム編" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    実践データベース設計：基幹業務システム編
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/k2works/practical-database-design" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    practical-database-design
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    実践データベース設計
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    実践データベース設計
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../techstack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    技術スタック
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../outline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    アウトライン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    執筆ワークフロー
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5" >
        
          
          <label class="md-nav__link" for="__nav_1_5" id="__nav_1_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第1部 基幹業務システムの全体像
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    第1部 基幹業務システムの全体像
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1/chapter01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第1章 基幹業務システムとは
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1/chapter02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第2章 基幹業務システムの業務領域
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1/chapter03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第3章 業務フローの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6" >
        
          
          <label class="md-nav__link" for="__nav_1_6" id="__nav_1_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第2部 販売管理システム
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    第2部 販売管理システム
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第4章 販売管理システムの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第5章 マスタ情報の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第6章 受注・出荷・売上の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter07/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第7章 債権管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter08/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第8章 調達管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter09/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第9章 在庫管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第10章 債務管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第11章 共通処理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第12章 販売管理データ設計（B社事例）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第13章 APIサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_7" >
        
          
          <label class="md-nav__link" for="__nav_1_7" id="__nav_1_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第3部 財務会計システム
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    第3部 財務会計システム
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第14章 財務会計システムの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第15章 勘定科目の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter16/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第16章 仕訳の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter17/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第17章 自動仕訳の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter18/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第18章 勘定科目残高の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter19/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第19章 赤黒とログの設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter20/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第20章 財務会計データ設計（D社事例）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter21/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第21章 APIサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_8" >
        
          
          <label class="md-nav__link" for="__nav_1_8" id="__nav_1_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第4部 生産管理システム
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    第4部 生産管理システム
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter22/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第22章 生産管理システムの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter23/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第23章 マスタ情報の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter24/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第24章 生産計画の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter25/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第25章 購買管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter26/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第26章 外注委託管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter27/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第27章 工程管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter28/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第28章 在庫管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第29章 品質管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter30/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第30章 製造原価管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter31/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第31章 生産管理データ設計（E社事例）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter32/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第32章 APIサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_9" >
        
          
          <label class="md-nav__link" for="__nav_1_9" id="__nav_1_9_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第5部 エンタープライズインテグレーション
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    第5部 エンタープライズインテグレーション
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter33.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第33章 システム統合の概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter34.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第34章 メッセージングパターン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter35.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第35章 システム間連携パターン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter36.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第36章 マスタデータ管理（MDM）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter37.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第37章 イベント駆動アーキテクチャ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter38.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第38章 API設計とサービス連携
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter39.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第39章 データ連携の実装パターン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_10" checked>
        
          
          <label class="md-nav__link" for="__nav_1_10" id="__nav_1_10_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 販売管理システム実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_10_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 販売管理システム実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study2-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究1 モノリスサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study2-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究2 JavaFXデスクトップアプリケーションの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    研究3 gRPCサービスの実装
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    研究3 gRPCサービスの実装
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        はじめに
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#14grpc" class="md-nav__link">
    <span class="md-ellipsis">
      
        第14章：gRPC サーバーの基礎
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第14章：gRPC サーバーの基礎">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#141-grpc" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.1 gRPC とは
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#142-rest-api-graphql" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.2 REST API / GraphQL との比較
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#143-4-rpc" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.3 4つの RPC パターン
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#144-grpc" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.4 gRPC におけるヘキサゴナルアーキテクチャ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#145" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.5 ディレクトリ構成
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#146" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.6 技術スタックの追加
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14.6 技術スタックの追加">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#buildgradlekts" class="md-nav__link">
    <span class="md-ellipsis">
      
        build.gradle.kts（差分）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#applicationyml" class="md-nav__link">
    <span class="md-ellipsis">
      
        application.yml（差分）
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#147-protocol-buffers" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.7 Protocol Buffers 定義
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14.7 Protocol Buffers 定義">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#srcmainprotocommonproto" class="md-nav__link">
    <span class="md-ellipsis">
      
        src/main/proto/common.proto
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#srcmainprotoproductproto" class="md-nav__link">
    <span class="md-ellipsis">
      
        src/main/proto/product.proto
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#148-grpc" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.8 gRPC サービス実装
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14.8 gRPC サービス実装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#grpcproductservicejava" class="md-nav__link">
    <span class="md-ellipsis">
      
        GrpcProductService.java
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#149-productconverter-proto" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.9 ProductConverter（ドメイン ⇔ Proto 変換）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1410-grpc" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.10 gRPC インターセプター
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14.10 gRPC インターセプター">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#logginginterceptorjava" class="md-nav__link">
    <span class="md-ellipsis">
      
        LoggingInterceptor.java
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1411-grpcurl" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.11 grpcurl による動作確認
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#15-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        第15章：マスタ API の実装
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第15章：マスタ API の実装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#151-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        15.1 商品マスタ API の詳細設計
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#152-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        15.2 取引先マスタ API の実装
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="15.2 取引先マスタ API の実装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#srcmainprotopartnerproto" class="md-nav__link">
    <span class="md-ellipsis">
      
        src/main/proto/partner.proto
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#153" class="md-nav__link">
    <span class="md-ellipsis">
      
        15.3 テスト実装
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#16-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        第16章：トランザクション API の実装
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第16章：トランザクション API の実装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#161-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        16.1 トランザクション API の設計方針
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="16.1 トランザクション API の設計方針">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rpc" class="md-nav__link">
    <span class="md-ellipsis">
      
        RPC パターンの使い分け
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#162-api-protocol-buffers" class="md-nav__link">
    <span class="md-ellipsis">
      
        16.2 受注 API の Protocol Buffers 定義
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="16.2 受注 API の Protocol Buffers 定義">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#srcmainprotoorderproto" class="md-nav__link">
    <span class="md-ellipsis">
      
        src/main/proto/order.proto
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#163" class="md-nav__link">
    <span class="md-ellipsis">
      
        16.3 受注サービス実装（ステータス監視）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#164" class="md-nav__link">
    <span class="md-ellipsis">
      
        16.4 請求サービス実装（双方向ストリーミング）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#165-grpcurl" class="md-nav__link">
    <span class="md-ellipsis">
      
        16.5 grpcurl による動作確認
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#17" class="md-nav__link">
    <span class="md-ellipsis">
      
        第17章：エラーハンドリングとストリーミング
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第17章：エラーハンドリングとストリーミング">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#171-grpc" class="md-nav__link">
    <span class="md-ellipsis">
      
        17.1 gRPC エラーハンドリングの概要
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#172-grpc" class="md-nav__link">
    <span class="md-ellipsis">
      
        17.2 gRPC ステータスコード
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#173" class="md-nav__link">
    <span class="md-ellipsis">
      
        17.3 カスタム例外クラス
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#174" class="md-nav__link">
    <span class="md-ellipsis">
      
        17.4 例外変換インターセプター
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#175" class="md-nav__link">
    <span class="md-ellipsis">
      
        17.5 リトライ設定
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#176" class="md-nav__link">
    <span class="md-ellipsis">
      
        17.6 回路ブレーカー
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#177" class="md-nav__link">
    <span class="md-ellipsis">
      
        17.7 ヘルスチェックサービス
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#178" class="md-nav__link">
    <span class="md-ellipsis">
      
        17.8 フロー制御付きストリームオブザーバー
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-10-d" class="md-nav__link">
    <span class="md-ellipsis">
      
        Part 10-D のまとめ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Part 10-D のまとめ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        実装した機能一覧
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grpc" class="md-nav__link">
    <span class="md-ellipsis">
      
        実装した gRPC サービス
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        アーキテクチャの特徴
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        技術スタック
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      
        API 形式の比較と選択基準
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grpc_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        gRPC を選択する場面
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study2-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究4 GraphQLサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_11" >
        
          
          <label class="md-nav__link" for="__nav_1_11" id="__nav_1_11_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 財務会計システム実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 財務会計システム実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study3-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究1 モノリスサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study3-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究2 JavaFXデスクトップアプリケーションの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study3-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究3 gRPCサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study3-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究4 GraphQLサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_12" >
        
          
          <label class="md-nav__link" for="__nav_1_12" id="__nav_1_12_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 生産管理システム実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 生産管理システム実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study4-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究1 モノリスサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study4-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究2 JavaFXデスクトップアプリケーションの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study4-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究3 gRPCサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study4-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究4 GraphQLサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_13" >
        
          
          <label class="md-nav__link" for="__nav_1_13" id="__nav_1_13_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 財務会計システムORM実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_13">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 財務会計システムORM実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter14-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第14章 財務会計システムの全体像【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter15-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第15章 勘定科目の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter16-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第16章 仕訳の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter17-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第17章 自動仕訳の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter18-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第18章 勘定科目残高の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter19-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第19章 赤黒とログの設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter20-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第20章 財務会計データ設計（D社事例）【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter21-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第21章 APIサービスの実装【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_14" >
        
          
          <label class="md-nav__link" for="__nav_1_14" id="__nav_1_14_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    付録
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_14">
            <span class="md-nav__icon md-icon"></span>
            
  
    付録
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/er-diagrams.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    A 全体ER図
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/table-definitions.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    B テーブル定義一覧
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/glossary.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    C 用語集
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_15" >
        
          
          <label class="md-nav__link" for="__nav_1_15" id="__nav_1_15_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    データベース
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_15">
            <span class="md-nav__icon md-icon"></span>
            
  
    データベース
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../assets/schemaspy-output/sms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SchemaSpy ER図（SMS）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="3-grpc">実践データベース設計：販売管理システム 研究 3 - gRPC サービスの実装<a class="headerlink" href="#3-grpc" title="Permanent link">&para;</a></h1>
<h2 id="_1">はじめに<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>本研究では、API サーバー構成（第13章）やモノリスサービス（研究 1）とは異なるアプローチとして、<strong>gRPC</strong> による販売管理システムを実装します。Protocol Buffers による高効率なバイナリシリアライゼーションと、HTTP/2 によるストリーミング通信を活用し、高性能なマイクロサービス間通信を実現します。</p>
<p>研究 1 で構築したヘキサゴナルアーキテクチャ（ドメイン層・アプリケーション層）はそのまま共有し、<strong>Input Adapter として gRPC サービス層のみを追加</strong>します。</p>
<hr />
<h2 id="14grpc">第14章：gRPC サーバーの基礎<a class="headerlink" href="#14grpc" title="Permanent link">&para;</a></h2>
<h3 id="141-grpc">14.1 gRPC とは<a class="headerlink" href="#141-grpc" title="Permanent link">&para;</a></h3>
<p>gRPC は Google が開発したオープンソースの高性能 RPC（Remote Procedure Call）フレームワークです。HTTP/2 プロトコルと Protocol Buffers を基盤とし、マイクロサービス間通信に最適化されています。</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjgxOXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NDg5cHg7aGVpZ2h0OjgxOXB4O2JhY2tncm91bmQ6I0ZFRkVGRTsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDQ4OSA4MTkiIHdpZHRoPSI0ODlweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjxyZWN0IGZpbGw9IiNGRUZFRkUiIGhlaWdodD0iODE5IiBzdHlsZT0ic3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNDg5IiB4PSIwIiB5PSIwIi8+PCEtLWNsdXN0ZXIgZ1JQQyBBcmNoaXRlY3R1cmUgKD8/Pz8/Pz8/KS0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0iZ1JQQyBBcmNoaXRlY3R1cmUgLi4uLi4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iNSIgZGF0YS11aWQ9ImVudDAwMDIiIGlkPSJjbHVzdGVyX2dSUEMgQXJjaGl0ZWN0dXJlIC4uLi4uLi4uLi4iPjxwYXRoIGQ9Ik04LjUsNiBMMjgzLjczLDYgQTMuNzUsMy43NSAwIDAgMSAyODYuMjMsOC41IEwyOTMuMjMsMjguMjk2OSBMNDc2LjUsMjguMjk2OSBBMi41LDIuNSAwIDAgMSA0NzksMzAuNzk2OSBMNDc5LDcwNy44NCBBMi41LDIuNSAwIDAgMSA0NzYuNSw3MTAuMzQgTDguNSw3MTAuMzQgQTIuNSwyLjUgMCAwIDEgNiw3MDcuODQgTDYsOC41IEEyLjUsMi41IDAgMCAxIDguNSw2IiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHgxPSI2IiB4Mj0iMjkzLjIzIiB5MT0iMjguMjk2OSIgeTI9IjI4LjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjc0LjIzIiB4PSIxMCIgeT0iMjAuOTk1MSI+Z1JQQyBBcmNoaXRlY3R1cmUgKCYjMzYwMDk7JiMyMjc3MDsmIzMxNjQ5OyYjMjk3MDI7JiMxMjQ3MTsmIzEyNDczOyYjMTI0ODY7JiMxMjUxMjspPC90ZXh0PjwvZz48IS0tY2x1c3RlciBDbGllbnQgU2lkZS0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0iQ2xpZW50IFNpZGUiIGRhdGEtc291cmNlLWxpbmU9IjciIGRhdGEtdWlkPSJlbnQwMDAzIiBpZD0iY2x1c3Rlcl9DbGllbnQgU2lkZSI+PHBhdGggZD0iTTE1Mi41LDQ5IEwyMzguNzk4OCw0OSBBMy43NSwzLjc1IDAgMCAxIDI0MS4yOTg4LDUxLjUgTDI0OC4yOTg4LDcxLjI5NjkgTDM4Ny41LDcxLjI5NjkgQTIuNSwyLjUgMCAwIDEgMzkwLDczLjc5NjkgTDM5MCwyMjEuMjggQTIuNSwyLjUgMCAwIDEgMzg3LjUsMjIzLjc4IEwxNTIuNSwyMjMuNzggQTIuNSwyLjUgMCAwIDEgMTUwLDIyMS4yOCBMMTUwLDUxLjUgQTIuNSwyLjUgMCAwIDEgMTUyLjUsNDkiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjE1MCIgeDI9IjI0OC4yOTg4IiB5MT0iNzEuMjk2OSIgeTI9IjcxLjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODUuMjk4OCIgeD0iMTU0IiB5PSI2My45OTUxIj5DbGllbnQgU2lkZTwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgU2VydmVyIFNpZGUtLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1lbnRpdHk9IlNlcnZlciBTaWRlIiBkYXRhLXNvdXJjZS1saW5lPSIxNiIgZGF0YS11aWQ9ImVudDAwMDUiIGlkPSJjbHVzdGVyX1NlcnZlciBTaWRlIj48cGF0aCBkPSJNMzIuNSwyODcuNzggTDEyNC43ODAzLDI4Ny43OCBBMy43NSwzLjc1IDAgMCAxIDEyNy4yODAzLDI5MC4yOCBMMTM0LjI4MDMsMzEwLjA3NjkgTDI3MS41LDMxMC4wNzY5IEEyLjUsMi41IDAgMCAxIDI3NCwzMTIuNTc2OSBMMjc0LDQ2MC4wNiBBMi41LDIuNSAwIDAgMSAyNzEuNSw0NjIuNTYgTDMyLjUsNDYyLjU2IEEyLjUsMi41IDAgMCAxIDMwLDQ2MC4wNiBMMzAsMjkwLjI4IEEyLjUsMi41IDAgMCAxIDMyLjUsMjg3Ljc4IiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHgxPSIzMCIgeDI9IjEzNC4yODAzIiB5MT0iMzEwLjA3NjkiIHkyPSIzMTAuMDc2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5MS4yODAzIiB4PSIzNCIgeT0iMzAyLjc3NTEiPlNlcnZlciBTaWRlPC90ZXh0PjwvZz48IS0tY2x1c3RlciBTaGFyZWQtLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1lbnRpdHk9IlNoYXJlZCIgZGF0YS1zb3VyY2UtbGluZT0iMjUiIGRhdGEtdWlkPSJlbnQwMDA3IiBpZD0iY2x1c3Rlcl9TaGFyZWQiPjxwYXRoIGQ9Ik0xNTguNSw1MTEuNTYgTDIxNS40MTgsNTExLjU2IEEzLjc1LDMuNzUgMCAwIDEgMjE3LjkxOCw1MTQuMDYgTDIyNC45MTgsNTMzLjg1NjkgTDMyOS41LDUzMy44NTY5IEEyLjUsMi41IDAgMCAxIDMzMiw1MzYuMzU2OSBMMzMyLDY4My44NCBBMi41LDIuNSAwIDAgMSAzMjkuNSw2ODYuMzQgTDE1OC41LDY4Ni4zNCBBMi41LDIuNSAwIDAgMSAxNTYsNjgzLjg0IEwxNTYsNTE0LjA2IEEyLjUsMi41IDAgMCAxIDE1OC41LDUxMS41NiIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB4MT0iMTU2IiB4Mj0iMjI0LjkxOCIgeTE9IjUzMy44NTY5IiB5Mj0iNTMzLjg1NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTE4IiB4PSIxNjAiIHk9IjUyNi41NTUxIj5TaGFyZWQ8L3RleHQ+PC9nPjwhLS1jbGFzcyBjbGllbnQtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iY2xpZW50IiBkYXRhLXNvdXJjZS1saW5lPSI4IiBkYXRhLXVpZD0iZW50MDAwNCIgaWQ9ImVudGl0eV9jbGllbnQiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTIzLjc4MTMiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjIwNy45OTkyIiB4PSIxNjYiIHk9Ijg0Ii8+PGVsbGlwc2UgY3g9IjIwNS4zOTc2IiBjeT0iMTA1LjI5NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTIwOC4zNjY0LDExMC45Mzc1IFEyMDcuNzg4MywxMTEuMjM0NCAyMDcuMTQ3NiwxMTEuMzc1IFEyMDYuNTA3LDExMS41MzEzIDIwNS44MDM5LDExMS41MzEzIFEyMDMuMzAzOSwxMTEuNTMxMyAyMDEuOTc1OCwxMDkuODkwNiBRMjAwLjY2MzMsMTA4LjIzNDQgMjAwLjY2MzMsMTA1LjEwOTQgUTIwMC42NjMzLDEwMS45ODQ0IDIwMS45NzU4LDEwMC4zMjgxIFEyMDMuMzAzOSw5OC42NzE5IDIwNS44MDM5LDk4LjY3MTkgUTIwNi41MDcsOTguNjcxOSAyMDcuMTQ3Niw5OC44MjgxIFEyMDcuODAzOSw5OC45ODQ0IDIwOC4zNjY0LDk5LjI4MTMgTDIwOC4zNjY0LDEwMiBRMjA3Ljc0MTQsMTAxLjQyMTkgMjA3LjE0NzYsMTAxLjE1NjMgUTIwNi41NTM5LDEwMC44NzUgMjA1LjkyODksMTAwLjg3NSBRMjA0LjU4NTEsMTAwLjg3NSAyMDMuODk3NiwxMDEuOTUzMSBRMjAzLjIxMDEsMTAzLjAxNTYgMjAzLjIxMDEsMTA1LjEwOTQgUTIwMy4yMTAxLDEwNy4yMDMxIDIwMy44OTc2LDEwOC4yODEzIFEyMDQuNTg1MSwxMDkuMzQzOCAyMDUuOTI4OSwxMDkuMzQzOCBRMjA2LjU1MzksMTA5LjM0MzggMjA3LjE0NzYsMTA5LjA3ODEgUTIwNy43NDE0LDEwOC43OTY5IDIwOC4zNjY0LDEwOC4yMTg4IEwyMDguMzY2NCwxMTAuOTM3NSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgxLjgxMjUiIHg9IjI0NC44MDQyIiB5PSIxMDEuOTk1MSI+Z1JQQyBDbGllbnQ8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTIxLjc4MjIiIHg9IjIyNC44MTkzIiB5PSIxMTguMjkyIj4oR2VuZXJhdGVkIFN0dWIpPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjE2NyIgeDI9IjM3Mi45OTkyIiB5MT0iMTI2LjU5MzgiIHkyPSIxMjYuNTkzOCIvPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjE3NCIgeT0iMTM3LjI0MjIiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2MC4zOTU0IiB4PSIxODYiIHk9IjE0My41ODg5Ij4mIzIxMzM2OyYjMzg5MTc7IFJQQzwvdGV4dD48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIxNzQiIHk9IjE1My41MzkxIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTUzLjk5OTMiIHg9IjE4NiIgeT0iMTU5Ljg4NTciPiYjMTI0Njk7JiMxMjU0MDsmIzEyNDk2OyYjMTI1NDA7JiMxMjQ3MzsmIzEyNDg4OyYjMTI1MjI7JiMxMjU0MDsmIzEyNTExOyYjMTI1MzE7JiMxMjQ2NDs8L3RleHQ+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMTc0IiB5PSIxNjkuODM1OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE4MS45OTkyIiB4PSIxODYiIHk9IjE3Ni4xODI2Ij4mIzEyNDYzOyYjMTI1MjE7JiMxMjQ1MjsmIzEyNDUwOyYjMTI1MzE7JiMxMjQ4ODsmIzEyNDczOyYjMTI0ODg7JiMxMjUyMjsmIzEyNTQwOyYjMTI1MTE7JiMxMjUzMTsmIzEyNDY0OzwvdGV4dD48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIxNzQiIHk9IjE4Ni4xMzI4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM5Ljk5OTQiIHg9IjE4NiIgeT0iMTkyLjQ3OTUiPiYjMjE0NTI7JiMyNjA0MTsmIzIxNTIxOyYjMTI0NzM7JiMxMjQ4ODsmIzEyNTIyOyYjMTI1NDA7JiMxMjUxMTsmIzEyNTMxOyYjMTI0NjQ7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjE2NyIgeDI9IjM3Mi45OTkyIiB5MT0iMTk5Ljc4MTMiIHkyPSIxOTkuNzgxMyIvPjwvZz48IS0tY2xhc3Mgc2VydmVyLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9InNlcnZlciIgZGF0YS1zb3VyY2UtbGluZT0iMTciIGRhdGEtdWlkPSJlbnQwMDA2IiBpZD0iZW50aXR5X3NlcnZlciI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMjMuNzgxMyIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMjExLjM3NSIgeD0iNDYuMzEiIHk9IjMyMi43OCIvPjxlbGxpcHNlIGN4PSI2MS4zMSIgY3k9IjM0NC4wNzY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik02NC4yNzg4LDM0OS43MTc1IFE2My43MDA2LDM1MC4wMTQ0IDYzLjA2LDM1MC4xNTUgUTYyLjQxOTQsMzUwLjMxMTMgNjEuNzE2MywzNTAuMzExMyBRNTkuMjE2MywzNTAuMzExMyA1Ny44ODgxLDM0OC42NzA2IFE1Ni41NzU2LDM0Ny4wMTQ0IDU2LjU3NTYsMzQzLjg4OTQgUTU2LjU3NTYsMzQwLjc2NDQgNTcuODg4MSwzMzkuMTA4MSBRNTkuMjE2MywzMzcuNDUxOSA2MS43MTYzLDMzNy40NTE5IFE2Mi40MTk0LDMzNy40NTE5IDYzLjA2LDMzNy42MDgxIFE2My43MTYzLDMzNy43NjQ0IDY0LjI3ODgsMzM4LjA2MTMgTDY0LjI3ODgsMzQwLjc4IFE2My42NTM4LDM0MC4yMDE5IDYzLjA2LDMzOS45MzYzIFE2Mi40NjYzLDMzOS42NTUgNjEuODQxMywzMzkuNjU1IFE2MC40OTc1LDMzOS42NTUgNTkuODEsMzQwLjczMzEgUTU5LjEyMjUsMzQxLjc5NTYgNTkuMTIyNSwzNDMuODg5NCBRNTkuMTIyNSwzNDUuOTgzMSA1OS44MSwzNDcuMDYxMyBRNjAuNDk3NSwzNDguMTIzOCA2MS44NDEzLDM0OC4xMjM4IFE2Mi40NjYzLDM0OC4xMjM4IDYzLjA2LDM0Ny44NTgxIFE2My42NTM4LDM0Ny41NzY5IDY0LjI3ODgsMzQ2Ljk5ODggTDY0LjI3ODgsMzQ5LjcxNzUgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4Ny4xOTI0IiB4PSIxMjEuNDAxMyIgeT0iMzQwLjc3NTEiPmdSUEMgU2VydmVyPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE3OS4zNzUiIHg9Ijc1LjMxIiB5PSIzNTcuMDcyIj4oZ3JwYy1zcHJpbmctYm9vdC1zdGFydGVyKTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI0Ny4zMSIgeDI9IjI1Ni42ODUiIHkxPSIzNjUuMzczOCIgeTI9IjM2NS4zNzM4Ii8+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iNTQuMzEiIHk9IjM3Ni4wMjIyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA1LjQ1MTIiIHg9IjY2LjMxIiB5PSIzODIuMzY4OSI+UHJvZHVjdFNlcnZpY2U8L3RleHQ+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iNTQuMzEiIHk9IjM5Mi4zMTkxIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAzLjI1IiB4PSI2Ni4zMSIgeT0iMzk4LjY2NTciPlBhcnRuZXJTZXJ2aWNlPC90ZXh0PjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjU0LjMxIiB5PSI0MDguNjE1OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjkxLjc3MjUiIHg9IjY2LjMxIiB5PSI0MTQuOTYyNiI+T3JkZXJTZXJ2aWNlPC90ZXh0PjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjU0LjMxIiB5PSI0MjQuOTEyOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExOC44OTA2IiB4PSI2Ni4zMSIgeT0iNDMxLjI1OTUiPlNoaXBtZW50U2VydmljZTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI0Ny4zMSIgeDI9IjI1Ni42ODUiIHkxPSI0MzguNTYxMyIgeTI9IjQzOC41NjEzIi8+PC9nPjwhLS1jbGFzcyBwcm90by0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJwcm90byIgZGF0YS1zb3VyY2UtbGluZT0iMjYiIGRhdGEtdWlkPSJlbnQwMDA4IiBpZD0iZW50aXR5X3Byb3RvIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjEyMy43ODEzIiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNDMuNDE4OSIgeD0iMTcyLjI5IiB5PSI1NDYuNTYiLz48ZWxsaXBzZSBjeD0iMTg3LjI5IiBjeT0iNTY3Ljg1NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTE5MC4yNTg4LDU3My40OTc1IFExODkuNjgwNiw1NzMuNzk0NCAxODkuMDQsNTczLjkzNSBRMTg4LjM5OTQsNTc0LjA5MTMgMTg3LjY5NjMsNTc0LjA5MTMgUTE4NS4xOTYzLDU3NC4wOTEzIDE4My44NjgxLDU3Mi40NTA2IFExODIuNTU1Niw1NzAuNzk0NCAxODIuNTU1Niw1NjcuNjY5NCBRMTgyLjU1NTYsNTY0LjU0NDQgMTgzLjg2ODEsNTYyLjg4ODEgUTE4NS4xOTYzLDU2MS4yMzE5IDE4Ny42OTYzLDU2MS4yMzE5IFExODguMzk5NCw1NjEuMjMxOSAxODkuMDQsNTYxLjM4ODEgUTE4OS42OTYzLDU2MS41NDQ0IDE5MC4yNTg4LDU2MS44NDEzIEwxOTAuMjU4OCw1NjQuNTYgUTE4OS42MzM4LDU2My45ODE5IDE4OS4wNCw1NjMuNzE2MyBRMTg4LjQ0NjMsNTYzLjQzNSAxODcuODIxMyw1NjMuNDM1IFExODYuNDc3NSw1NjMuNDM1IDE4NS43OSw1NjQuNTEzMSBRMTg1LjEwMjUsNTY1LjU3NTYgMTg1LjEwMjUsNTY3LjY2OTQgUTE4NS4xMDI1LDU2OS43NjMxIDE4NS43OSw1NzAuODQxMyBRMTg2LjQ3NzUsNTcxLjkwMzggMTg3LjgyMTMsNTcxLjkwMzggUTE4OC40NDYzLDU3MS45MDM4IDE4OS4wNCw1NzEuNjM4MSBRMTg5LjYzMzgsNTcxLjM1NjkgMTkwLjI1ODgsNTcwLjc3ODggTDE5MC4yNTg4LDU3My40OTc1IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTExLjQxODkiIHg9IjIwMS4yOSIgeT0iNTY0LjU1NTEiPlByb3RvY29sIEJ1ZmZlcnM8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODUuNzAyMSIgeD0iMjE0LjE0ODQiIHk9IjU4MC44NTIiPigucHJvdG8gZmlsZXMpPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjE3My4yOSIgeDI9IjMxNC43MDg5IiB5MT0iNTg5LjE1MzgiIHkyPSI1ODkuMTUzOCIvPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjE4MC4yOSIgeT0iNTk5LjgwMjIiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5NS44NjcyIiB4PSIxOTIuMjkiIHk9IjYwNi4xNDg5Ij5wcm9kdWN0LnByb3RvPC90ZXh0PjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjE4MC4yOSIgeT0iNjE2LjA5OTEiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5My42NjYiIHg9IjE5Mi4yOSIgeT0iNjIyLjQ0NTciPnBhcnRuZXIucHJvdG88L3RleHQ+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMTgwLjI5IiB5PSI2MzIuMzk1OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc5LjI5IiB4PSIxOTIuMjkiIHk9IjYzOC43NDI2Ij5vcmRlci5wcm90bzwvdGV4dD48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIxODAuMjkiIHk9IjY0OC42OTI4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAyLjY4OTUiIHg9IjE5Mi4yOSIgeT0iNjU1LjAzOTUiPmNvbW1vbi5wcm90bzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxNzMuMjkiIHgyPSIzMTQuNzA4OSIgeTE9IjY2Mi4zNDEzIiB5Mj0iNjYyLjM0MTMiLz48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkdNTjEyIiBkYXRhLXNvdXJjZS1saW5lPSI0MCIgZGF0YS11aWQ9ImVudDAwMTMiIGlkPSJlbnRpdHlfR01OMTIiPjxwYXRoIGQ9Ik0xMTYuNSw3NTcuMzQgTDExNi41LDgxMi43Mzg0IEEwLDAgMCAwIDAgMTE2LjUsODEyLjczODQgTDM3MS41MDAzLDgxMi43Mzg0IEEwLDAgMCAwIDAgMzcxLjUwMDMsODEyLjczODQgTDM3MS41MDAzLDc2Ny4zNCBMMzYxLjUwMDMsNzU3LjM0IEwyNDgsNzU3LjM0IEwyNDQsNjcwLjUxIEwyNDAsNzU3LjM0IEwxMTYuNSw3NTcuMzQgQTAsMCAwIDAgMCAxMTYuNSw3NTcuMzQiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0zNjEuNTAwMyw3NTcuMzQgTDM2MS41MDAzLDc2Ny4zNCBMMzcxLjUwMDMsNzY3LjM0IEwzNjEuNTAwMyw3NTcuMzQiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwNC4wMDAxIiB4PSIxMjIuNSIgeT0iNzc0LjQwNjkiPiYjMTI0NzM7JiMxMjQ2MTsmIzEyNTQwOyYjMTI1MTA7JiMzOTM2NjsmIzIxMjA1OyYjMzgyODM7JiMzMDMzMDs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTk1LjAwMDIiIHg9IjEyMi41IiB5PSI3ODkuNTM5NyI+JiMzNTMyODsmIzM1NDg2OyYjMjAwMTM7JiMzMTQzNTsmIzEyMzk0OyYjMTI0NTI7JiMxMjUzMTsmIzEyNDc5OyYjMTI1NDA7JiMxMjUwMTsmIzEyNDU1OyYjMTI1NDA7JiMxMjQ3MzsmIzIzNDUwOyYjMzI2ODE7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIzNC4wMDAzIiB4PSIxMjIuNSIgeT0iODA0LjY3MjUiPiYjMzk2NDA7JiMyMTE3NzsmIzI5NTc1OyYjMTIzOTQ7JiMxMjQ5NjsmIzEyNDUyOyYjMTI0OTA7JiMxMjUyMjsmIzEyNDcxOyYjMTI1MjI7JiMxMjQ1MDsmIzEyNTIxOyYjMTI0NTI7JiMxMjQ3NjsmIzEyNTQwOyYjMTI0NzE7JiMxMjUxOTsmIzEyNTMxOzwvdGV4dD48L2c+PCEtLWxpbmsgY2xpZW50IHRvIHByb3RvLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImNsaWVudCIgZGF0YS1lbnRpdHktMj0icHJvdG8iIGRhdGEtc291cmNlLWxpbmU9IjM1IiBkYXRhLXVpZD0ibG5rOSIgaWQ9ImxpbmtfY2xpZW50X3Byb3RvIj48cGF0aCBjb2RlTGluZT0iMzUiIGQ9Ik0zMTAuNzQsMjA4LjE4IEMzMTUuNzksMjE4LjM3IDMyMC4xNywyMjkuMSAzMjMsMjM5Ljc4IEMzNTIuMTQsMzQ5LjY2IDM1Ny40LDM4Ny4yMSAzMjMsNDk1LjU2IEMzMTcuMzUsNTEzLjM1IDMxMS4xMTczLDUyNS43OTA4IDMwMC41MDczLDU0MS4zNzA4IiBmaWxsPSJub25lIiBpZD0iY2xpZW50LXRvLXByb3RvIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyOTcuMTMsNTQ2LjMzLDMwNS41MDIsNTQxLjE0MjYsMjk5Ljk0NDQsNTQyLjE5NzMsMjk4Ljg4OTcsNTM2LjYzOTYsMjk3LjEzLDU0Ni4zMyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzMy44NjU4IiB4PSIzNDcuODciIHk9IjM4OS4yMzY5Ij4ucHJvdG8gJiMxMjM2MzsmIzEyNDI1OyYjMTI0NzM7JiMxMjQ3OTsmIzEyNTAyOyYjMjk5ODM7JiMyNTEwNDs8L3RleHQ+PC9nPjwhLS1saW5rIHNlcnZlciB0byBwcm90by0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJzZXJ2ZXIiIGRhdGEtZW50aXR5LTI9InByb3RvIiBkYXRhLXNvdXJjZS1saW5lPSIzNiIgZGF0YS11aWQ9ImxuazEwIiBpZD0ibGlua19zZXJ2ZXJfcHJvdG8iPjxwYXRoIGNvZGVMaW5lPSIzNiIgZD0iTTE0OC45LDQ0Ni44OCBDMTQ5LjgsNDYzLjEgMTUyLjM2LDQ4MC4zMyAxNTgsNDk1LjU2IEMxNjQuNiw1MTMuMzYgMTcxLjUxMjEsNTI1LjgxNjEgMTgyLjkzMjEsNTQxLjI1NjEiIGZpbGw9Im5vbmUiIGlkPSJzZXJ2ZXItdG8tcHJvdG8iIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE4Ni41LDU0Ni4wOCwxODQuMzY0LDUzNi40NjU1LDE4My41MjY3LDU0Mi4wNjAxLDE3Ny45MzIyLDU0MS4yMjI4LDE4Ni41LDU0Ni4wOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1OS44NjU5IiB4PSIxNTkiIHk9IjQ5MS42MjY5Ij4ucHJvdG8gJiMxMjM2MzsmIzEyNDI1OyYjMTI0NzM7JiMxMjQ2NTsmIzEyNTIzOyYjMTI0ODg7JiMxMjUzMTsmIzI5OTgzOyYjMjUxMDQ7PC90ZXh0PjwvZz48IS0tbGluayBjbGllbnQgdG8gc2VydmVyLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImNsaWVudCIgZGF0YS1lbnRpdHktMj0ic2VydmVyIiBkYXRhLXNvdXJjZS1saW5lPSIzNyIgZGF0YS11aWQ9ImxuazExIiBpZD0ibGlua19jbGllbnRfc2VydmVyIj48cGF0aCBjb2RlTGluZT0iMzciIGQ9Ik0yMjQuMTUyMSwyMTMuMTIzIEMyMTcuNjQyMSwyMjMuNTAzIDIxNC40NywyMjkuMjUgMjA5LDIzOS43OCBDMTk1LjMxLDI2Ni4xMyAxODQuOTI4MiwyOTAuOTIyNiAxNzUuMTQ4MiwzMTYuOTgyNiIgZmlsbD0ibm9uZSIgaWQ9ImNsaWVudC1zZXJ2ZXIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjIyNy4zNCwyMDguMDQsMjE5LjE2OTQsMjEzLjUzOTMsMjI0LjY4MzQsMjEyLjI3NTksMjI1Ljk0NjgsMjE3Ljc4OTgsMjI3LjM0LDIwOC4wNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTczLjA0LDMyMi42LDE3OS45NDcyLDMxNS41NzkzLDE3NC43OTY4LDMxNy45MTg4LDE3Mi40NTczLDMxMi43Njg0LDE3My4wNCwzMjIuNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ2LjE0NzUiIHg9IjI0MS40MDE5IiB5PSIyNTIuODQ2OSI+SFRUUC8yPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwOC45NTEyIiB4PSIyMTAiIHk9IjI2Ny45Nzk3Ij4oQmluYXJ5IFByb3RvY29sKTwvdGV4dD48L2c+PCEtLVNSQz1bWExEVFFuRDE1N3NWTnA2a0ItdDNBbFdlOGhHWHJXVkhxRUpIYnl0a1BCQ3FjTGJjOXVBS1dqdDVNMWlfOGpaR3pnNmpMUVg5UURLNnFLWW5Gc1JTUmw4bGRCa3BRS2dub0NCMEZORkVsVVZVa05sRDhITUY0aG9PcHZOYzdZdXlvNkV4UFdLMUdpNklIdHNCTXRMU2prbWJieEM2VE5BaW5aWS1WWXlGN3FBLWtoMVNXV3J0aVAzM1N6b2tVZUJPZWk0OWRYYVRULUVGbnlkSFh3SlRiRTRGNkd2YnI5Skh0Z28xYm95ZVNwTUZLODZCZGFGV09rZjJ2ekpOWi1kQzBnNjRNdTh1azJXUVBQTjQyZkpITEJrQ0oxb190WHBsRlNUQWVXOFBWZlZIWU9wUVM0QlRESGRyS2NITkhXQ1BWYXF2TnNKS2JVNGQ2VXUzZzNYTkNFRXRoeXV3bXhaenhqLTQ1VkxEc29hSV9lSm1BemxIcndlVGJfa3M2VlpTZXd2UFBhb09XUjJ1ODVtdDVrV2lxNVkxQ3dUWDJuMXdEVzUweVRHZWZpMFp4Ym1DWXJORmh3a25KOTFCX2dlTTl5dWJRd2c2TzNRaHVWYjZmSzl1ZUZwVHkwNzM1UXo2MGtyOTBzMzlydk9xMU1CanczbmNPRVd5aWJjenBjV01oY1d4c1NFUHZqcWl4TXJpUDFOYlFhazZCczdLdVFjQ0VpZHh0UkVyamU2b1lWbjd5S3I2X1ZJOTFYRFRMa2FFMkJDU0lkY19MMmhTbEFOUWRGVWVuUF9Zb0cxYzNPR2U0bUlOY0gyaVpiYjVMcURmemlGcXROVjYxeXN1ako3a2o5QWpOc1pxLVRjZWpfRmR2czdJUnlkTDdrbUpoQ0xmSWpzR3VPNVVtVlhlRV9kVEhVRi1QaG0tSkR3eTBBZlFKczJsbXFBZl9tRkVfU2JBZGdHbzFJaHowMTdnT0IzcjVtMDBdLS0+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<p><strong>gRPC の主な特徴：</strong></p>
<table>
<thead>
<tr>
<th>特徴</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>HTTP/2</td>
<td>多重化、ヘッダー圧縮、バイナリフレーミング</td>
</tr>
<tr>
<td>Protocol Buffers</td>
<td>高速なバイナリシリアライゼーション</td>
</tr>
<tr>
<td>多言語サポート</td>
<td>Java, Go, Python, C#, Node.js 等</td>
</tr>
<tr>
<td>ストリーミング</td>
<td>4つの RPC パターンをサポート</td>
</tr>
<tr>
<td>デッドライン</td>
<td>タイムアウト管理の組み込みサポート</td>
</tr>
<tr>
<td>認証</td>
<td>TLS/SSL、トークンベース認証のサポート</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="142-rest-api-graphql">14.2 REST API / GraphQL との比較<a class="headerlink" href="#142-rest-api-graphql" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjIxNXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MTI1NnB4O2hlaWdodDoyMTVweDtiYWNrZ3JvdW5kOiNGRUZFRkU7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxMjU2IDIxNSIgd2lkdGg9IjEyNTZweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjxyZWN0IGZpbGw9IiNGRUZFRkUiIGhlaWdodD0iMjE1IiBzdHlsZT0ic3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTI1NiIgeD0iMCIgeT0iMCIvPjwhLS1jbHVzdGVyIHJlc3QtLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1lbnRpdHk9InJlc3QiIGRhdGEtc291cmNlLWxpbmU9IjMiIGRhdGEtdWlkPSJlbnQwMDAyIiBpZD0iY2x1c3Rlcl9yZXN0Ij48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjIwMS41NiIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjMzNyIgeD0iNyIgeT0iOC4yNyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3MS4xNTUzIiB4PSIxMzkuOTIyNCIgeT0iMjMuMjY1MSI+UkVTVCBBUEk8L3RleHQ+PC9nPjwhLS1jbHVzdGVyIGdycGMtLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1lbnRpdHk9ImdycGMiIGRhdGEtc291cmNlLWxpbmU9IjkiIGRhdGEtdWlkPSJlbnQwMDA2IiBpZD0iY2x1c3Rlcl9ncnBjIj48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjIwMi44MyIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjMyMiIgeD0iNTcwIiB5PSI3Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQxLjMzNjkiIHg9IjcxMC4zMzE1IiB5PSIyMS45OTUxIj5nUlBDPC90ZXh0PjwvZz48IS0tY2x1c3RlciBncmFwaHFsLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSJncmFwaHFsIiBkYXRhLXNvdXJjZS1saW5lPSIxNSIgZGF0YS11aWQ9ImVudDAwMTAiIGlkPSJjbHVzdGVyX2dyYXBocWwiPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iOTYuMDUiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIyNTYiIHg9IjkzMiIgeT0iOS4yOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OC42NTMzIiB4PSIxMDI1LjY3MzMiIHk9IjI0LjI3NTEiPkdyYXBoUUw8L3RleHQ+PC9nPjwhLS1lbnRpdHkgSFRUUC8xLjEgb3IgMi0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJIVFRQLjEuMSBvciAyIiBkYXRhLXNvdXJjZS1saW5lPSI0IiBkYXRhLXVpZD0iZW50MDAwMyIgaWQ9ImVudGl0eV9IVFRQLjEuMSBvciAyIj48ZWxsaXBzZSBjeD0iOTYuOTk5MSIgY3k9IjY2Ljc5OTgiIGZpbGw9IiNGMUYxRjEiIHJ4PSI2NS42NDkxIiByeT0iMTUuNTI5OCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTUuMTgzNiIgeD0iNDkuNDA3MyIgeT0iNzEuNDQ4MiI+SFRUUC8xLjEgb3IgMjwvdGV4dD48L2c+PCEtLWVudGl0eSBKU09OL1hNTC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJKU09OLlhNTCIgZGF0YS1zb3VyY2UtbGluZT0iNSIgZGF0YS11aWQ9ImVudDAwMDQiIGlkPSJlbnRpdHlfSlNPTi5YTUwiPjxlbGxpcHNlIGN4PSIyNDkuMDA0MiIgY3k9IjY2LjgwMzYiIGZpbGw9IiNGMUYxRjEiIHJ4PSI1MS41NzQyIiByeT0iMTQuNTIzNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjguNjk0MyIgeD0iMjE0LjY1NzEiIHk9IjcxLjQ1MjEiPkpTT04vWE1MPC90ZXh0PjwvZz48IS0tZW50aXR5IE9wZW5BUEktLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iT3BlbkFQSSIgZGF0YS1zb3VyY2UtbGluZT0iNiIgZGF0YS11aWQ9ImVudDAwMDUiIGlkPSJlbnRpdHlfT3BlbkFQSSI+PGVsbGlwc2UgY3g9Ijk3LjAwMTkiIGN5PSIxNzEuMzEzNiIgZmlsbD0iI0YxRjFGMSIgcng9IjQ1LjEwMTkiIHJ5PSIxNC41MjM2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1OS41NDEiIHg9IjY3LjIzMTMiIHk9IjE3NS45NjIxIj5PcGVuQVBJPC90ZXh0PjwvZz48IS0tZW50aXR5IEhUVFAvMi0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJIVFRQLjIiIGRhdGEtc291cmNlLWxpbmU9IjEwIiBkYXRhLXVpZD0iZW50MDAwNyIgaWQ9ImVudGl0eV9IVFRQLjIiPjxlbGxpcHNlIGN4PSI2MzIuMDAxMyIgY3k9IjY2LjgwMzYiIGZpbGw9IiNGMUYxRjEiIHJ4PSIzOC4xNDEzIiByeT0iMTQuNTIzNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDkuNjk3MyIgeD0iNjA3LjE1MjYiIHk9IjcxLjQ1MjEiPkhUVFAvMjwvdGV4dD48L2c+PCEtLWVudGl0eSBQcm90b2NvbCBCdWZmZXJzLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IlByb3RvY29sIEJ1ZmZlcnMiIGRhdGEtc291cmNlLWxpbmU9IjExIiBkYXRhLXVpZD0iZW50MDAwOCIgaWQ9ImVudGl0eV9Qcm90b2NvbCBCdWZmZXJzIj48ZWxsaXBzZSBjeD0iNzc2Ljk5NzkiIGN5PSI2Ni44MDM2IiBmaWxsPSIjRjFGMUYxIiByeD0iNzIuMDE3OSIgcnk9IjE2LjgwMzYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExMS40MTg5IiB4PSI3MjEuMjg4NCIgeT0iNzEuNDUyIj5Qcm90b2NvbCBCdWZmZXJzPC90ZXh0PjwvZz48IS0tZW50aXR5IC5wcm90by0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSIucHJvdG8iIGRhdGEtc291cmNlLWxpbmU9IjEyIiBkYXRhLXVpZD0iZW50MDAwOSIgaWQ9ImVudGl0eV8ucHJvdG8iPjxlbGxpcHNlIGN4PSI2MzEuOTk1NSIgY3k9IjE3MS4zMTM2IiBmaWxsPSIjRjFGMUYxIiByeD0iMzIuNDk1NSIgcnk9IjE0LjUyMzYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQxLjcxMjkiIHg9IjYxMS4xMzkiIHk9IjE3NS45NjIxIj4ucHJvdG88L3RleHQ+PC9nPjwhLS1lbnRpdHkgSlNPTi0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJKU09OIiBkYXRhLXNvdXJjZS1saW5lPSIxNyIgZGF0YS11aWQ9ImVudDAwMTEiIGlkPSJlbnRpdHlfSlNPTiI+PGVsbGlwc2UgY3g9Ijk4My4wMDA3IiBjeT0iNjYuODAzNiIgZmlsbD0iI0YxRjFGMSIgcng9IjI3LjQwMDciIHJ5PSIxNC41MjM2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIzNC41MDc4IiB4PSI5NjUuNzQ2OCIgeT0iNzEuNDUyMSI+SlNPTjwvdGV4dD48L2c+PCEtLWVudGl0eSAuZ3JhcGhxbHMtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iLmdyYXBocWxzIiBkYXRhLXNvdXJjZS1saW5lPSIxOCIgZGF0YS11aWQ9ImVudDAwMTIiIGlkPSJlbnRpdHlfLmdyYXBocWxzIj48ZWxsaXBzZSBjeD0iMTA5NC45OTY5IiBjeT0iNjYuODAzNiIgZmlsbD0iI0YxRjFGMSIgcng9IjQ5LjMxNjkiIHJ5PSIxNC41MjM2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2NS41MDIiIHg9IjEwNjIuMjQ1OSIgeT0iNzEuNDUyMSI+LmdyYXBocWxzPC90ZXh0PjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iR01OMTMiIGRhdGEtc291cmNlLWxpbmU9IjIyIiBkYXRhLXVpZD0iZW50MDAxNCIgaWQ9ImVudGl0eV9HTU4xMyI+PHBhdGggZD0iTTM2OC41LDE0My42MSBMMzY4LjUsMTk5LjAwODQgTDU0NS41MDAyLDE5OS4wMDg0IEw1NDUuNTAwMiwxNTMuNjEgTDUzNS41MDAyLDE0My42MSBMMzY4LjUsMTQzLjYxIiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNNTM1LjUwMDIsMTQzLjYxIEw1MzUuNTAwMiwxNTMuNjEgTDU0NS41MDAyLDE1My42MSBMNTM1LjUwMDIsMTQzLjYxIiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzguMDAwMSIgeD0iMzc0LjUiIHk9IjE2MC42NzY5Ij4mIzI3NzI2OyYjMjk5OTI7JiMyNDYxNTsmIzEyMzY0OyYjMzk2NDA7JiMxMjM1Njs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTU2LjAwMDIiIHg9IjM3NC41IiB5PSIxNzUuODA5NyI+JiMxMjUwMjsmIzEyNTIxOyYjMTI0NTQ7JiMxMjQ3MDsmIzMwNDUyOyYjMjU1MDk7JiMxMjQ1MDsmIzEyNDYzOyYjMTI0NzU7JiMxMjQ3MzsmIzIxNDg3OyYjMzMwMjE7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwNC4wMDAxIiB4PSIzNzQuNSIgeT0iMTkwLjk0MjUiPiYjMjAxNTQ7JiMzODI5MTsmIzEyMzY0OyYjMzU1MDE7JiMxMjQxNTsmIzEyNDIwOyYjMTIzNzc7JiMxMjM1Njs8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJHTU4xNiIgZGF0YS1zb3VyY2UtbGluZT0iMjgiIGRhdGEtdWlkPSJlbnQwMDE3IiBpZD0iZW50aXR5X0dNTjE2Ij48cGF0aCBkPSJNOTE2LjUsMTQzLjYxIEw5MTYuNSwxOTkuMDA4NCBMMTA2Ny41MDAyLDE5OS4wMDg0IEwxMDY3LjUwMDIsMTUzLjYxIEwxMDU3LjUwMDIsMTQzLjYxIEw5MTYuNSwxNDMuNjEiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0xMDU3LjUwMDIsMTQzLjYxIEwxMDU3LjUwMDIsMTUzLjYxIEwxMDY3LjUwMDIsMTUzLjYxIEwxMDU3LjUwMDIsMTQzLjYxIiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzkiIHg9IjkyMi41IiB5PSIxNjAuNjc2OSI+JiMzOTY0MDsmIzI0NjE1OyYjMzMwMjE7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzMC4wMDAyIiB4PSI5MjIuNSIgeT0iMTc1LjgwOTciPiYjMTI1MTA7JiMxMjQ1MjsmIzEyNDYzOyYjMTI1MjU7JiMxMjQ2OTsmIzEyNTQwOyYjMTI0OTk7JiMxMjQ3MzsmIzIxNTIxOyYjMTIzNjk7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjM5IiB4PSI5MjIuNSIgeT0iMTkwLjk0MjUiPiYjMjI0MTE7JiMyMzQzMzsmIzIwODQwOzwvdGV4dD48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkdNTjE5IiBkYXRhLXNvdXJjZS1saW5lPSIzNCIgZGF0YS11aWQ9ImVudDAwMjAiIGlkPSJlbnRpdHlfR01OMTkiPjxwYXRoIGQ9Ik0xMTExLDE0My42MSBMMTExMSwxOTkuMDA4NCBMMTI0OS4wMDAxLDE5OS4wMDg0IEwxMjQ5LjAwMDEsMTUzLjYxIEwxMjM5LjAwMDEsMTQzLjYxIEwxMTExLDE0My42MSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTEyMzkuMDAwMSwxNDMuNjEgTDEyMzkuMDAwMSwxNTMuNjEgTDEyNDkuMDAwMSwxNTMuNjEgTDEyMzkuMDAwMSwxNDMuNjEiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3OC4wMDAxIiB4PSIxMTE3IiB5PSIxNjAuNjc2OSI+JiMyNjU4MDsmIzM2NTc1OyYjMTIzOTQ7JiMxMjQ2MzsmIzEyNDU2OyYjMTI1MjI7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNy4wMDAxIiB4PSIxMTE3IiB5PSIxNzUuODA5NyI+JiMxMjUwMTsmIzEyNTI1OyYjMTI1MzE7JiMxMjQ4ODsmIzEyNDU2OyYjMTI1MzE7JiMxMjQ4OTsmIzIxNTIxOyYjMTIzNjk7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNy4wMDAxIiB4PSIxMTE3IiB5PSIxOTAuOTQyNSI+JiMyMTMzNjsmIzE5OTY4OyYjMTI0NTY7JiMxMjUzMTsmIzEyNDg5OyYjMTI1MDk7JiMxMjQ1MjsmIzEyNTMxOyYjMTI0ODg7PC90ZXh0PjwvZz48IS0tbGluayByZXN0IHRvIEdNTjEzLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9InJlc3QiIGRhdGEtZW50aXR5LTI9IkdNTjEzIiBkYXRhLXNvdXJjZS1saW5lPSIyMiIgZGF0YS11aWQ9ImxuazE1IiBpZD0ibGlua19yZXN0X0dNTjEzIj48cGF0aCBkPSJNMzQ0LjA0NjgsNzQuNjE5OCBDMzQ0LjY5NjUsNzUuMTcwMSAzNDUuMzgwMSw3NS43NDkyIDM0Ni4wOTU4LDc2LjM1NTUgQzM1MS44MjA5LDgxLjIwNTMgMzU5LjU5MzEsODcuNzg5NCAzNjguMzgzOCw5NS4yMzYzIEMzODUuOTY1LDExMC4xMyA0MDcuNjIsMTI4LjQ3NSA0MjUuMTIsMTQzLjMiIGZpbGw9Im5vbmUiIGlkPSJyZXN0LUdNTjEzIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheTo3LDc7Ii8+PC9nPjwhLS1saW5rIGdycGMgdG8gR01OMTYtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZ3JwYyIgZGF0YS1lbnRpdHktMj0iR01OMTYiIGRhdGEtc291cmNlLWxpbmU9IjI4IiBkYXRhLXVpZD0ibG5rMTgiIGlkPSJsaW5rX2dycGNfR01OMTYiPjxwYXRoIGQ9Ik04OTIuMDc3Myw3NS41NjA1IEM4OTIuMTM3Myw3NS42MTgxIDg5Mi4xOTc2LDc1LjY3NiA4OTIuMjU4Miw3NS43MzQxIEM4OTIuNTAwNiw3NS45NjY3IDg5Mi43NDc0LDc2LjIwMzUgODkyLjk5ODUsNzYuNDQ0MyBDODk0LjAwMjcsNzcuNDA3OCA4OTUuMDc1Myw3OC40MzY2IDg5Ni4yMDgsNzkuNTIyNyBDODk4LjQ3MzQsODEuNjk0OSA5MDAuOTc5NCw4NC4wOTY2IDkwMy42Niw4Ni42NjM4IEM5MTQuMzgyNSw5Ni45MzI1IDkyNy45LDEwOS44NSA5NDAsMTIxLjMzIEM5NDcuNDcsMTI4LjQxIDk1NS41NiwxMzYuMDUgOTYzLjA4LDE0My4xNCIgZmlsbD0ibm9uZSIgaWQ9ImdycGMtR01OMTYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjcsNzsiLz48L2c+PCEtLWxpbmsgZ3JhcGhxbCB0byBHTU4xOS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJncmFwaHFsIiBkYXRhLWVudGl0eS0yPSJHTU4xOSIgZGF0YS1zb3VyY2UtbGluZT0iMzQiIGRhdGEtdWlkPSJsbmsyMSIgaWQ9ImxpbmtfZ3JhcGhxbF9HTU4xOSI+PHBhdGggZD0iTTExODAsMTA1LjQzMjcgQzExODAsMTA1LjkzNDkgMTE4MCwxMDYuNDM5IDExODAsMTA2Ljk0NDcgQzExODAsMTEwLjk5MDcgMTE4MCwxMTUuMTQzNCAxMTgwLDExOS4yOTM5IEMxMTgwLDEyNy41OTUgMTE4MCwxMzUuODg3NSAxMTgwLDE0My4zIiBmaWxsPSJub25lIiBpZD0iZ3JhcGhxbC1HTU4xOSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6Nyw3OyIvPjwvZz48IS0tU1JDPVtWT19SSVc5SDU4Umx6ckRpd2FQbGI3ZzNhZXZPY2RoSHhRWVpISmZ4c1pEVEhVM2lSUDFLYmNYWUgwaEhtR29KdzQxZnFTRWlGQnI1VW15Y0wxSmhQbDZwX2tfX2J4NnNna2FBTFA4dWg0Sk11ZkhpUTU0RklIMkFId1VkdjIxNHJPWWZRRjY0WWFTMkt5NEdkbDNGWk0zNW01R3JKQm85N0JFWGFEeXp2WGgzbVpKa0g4eHZlNl9IbFJwVzVRakZMcExueGFIUnRwM25XRHpaOC05S1ptbUhxa2tkbjJHSGFpMko2eDZPSVdxWGtOSWZfS0pDSzRMVk1WOEVBNjlWSl9wTEhKODY5dVFEcU9ZZnVaMG5KUEI0OTZSX1dKZnRzTXdYc2FiVFdSTk5sb2MxYktSMFl5MmxXTHEyVS1nVUY3SW81eTNFVzNNMGpPMnpqMHlRRlZ3NkZmaERWWjRsSkJyUTdRbnRPNmNtWmdMUnJROU8xbHNBYXB5WjRJNm85MDF1NlRZdm5GOHdpNFZXaHkzcGFkLU8wb2s3c2tOVHpjc2NsTHR6M3NaX1haZ0xHZ3pMMFFqY1R3bTJobWR1YVNKb1UtMHhqWUlNcDFUdmxfSm5kMWdnbTR6YjNfanFjRks5XS0tPjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<p><strong>詳細比較表：</strong></p>
<table>
<thead>
<tr>
<th>特徴</th>
<th>REST API</th>
<th>gRPC</th>
<th>GraphQL</th>
</tr>
</thead>
<tbody>
<tr>
<td>プロトコル</td>
<td>HTTP/1.1</td>
<td>HTTP/2</td>
<td>HTTP/1.1 or HTTP/2</td>
</tr>
<tr>
<td>データ形式</td>
<td>JSON</td>
<td>Protocol Buffers</td>
<td>JSON</td>
</tr>
<tr>
<td>スキーマ</td>
<td>OpenAPI (任意)</td>
<td>.proto (必須)</td>
<td>.graphqls (必須)</td>
</tr>
<tr>
<td>シリアライゼーション</td>
<td>テキスト</td>
<td>バイナリ</td>
<td>テキスト</td>
</tr>
<tr>
<td>パフォーマンス</td>
<td>中</td>
<td>高</td>
<td>中</td>
</tr>
<tr>
<td>ストリーミング</td>
<td>WebSocket 別実装</td>
<td>ネイティブサポート</td>
<td>Subscription</td>
</tr>
<tr>
<td>ブラウザ対応</td>
<td>◎</td>
<td>△ (gRPC-Web)</td>
<td>◎</td>
</tr>
<tr>
<td>学習コスト</td>
<td>低</td>
<td>中</td>
<td>中</td>
</tr>
<tr>
<td>主な用途</td>
<td>汎用 API</td>
<td>マイクロサービス</td>
<td>フロントエンド向け</td>
</tr>
</tbody>
</table>
<p><strong>gRPC を選択する場面：</strong></p>
<ol>
<li><strong>マイクロサービス間通信</strong>: 高性能な内部通信が必要な場合</li>
<li><strong>リアルタイム処理</strong>: ストリーミングによる進捗通知が必要な場合</li>
<li><strong>多言語環境</strong>: 異なる言語で実装されたサービス間の連携</li>
<li><strong>低レイテンシ</strong>: バイナリプロトコルによる高速通信が必要な場合</li>
</ol>
<hr />
<h3 id="143-4-rpc">14.3 4つの RPC パターン<a class="headerlink" href="#143-4-rpc" title="Permanent link">&para;</a></h3>
<p>gRPC は 4 つの RPC パターンをサポートします。</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9Ijg2cHgiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiIHN0eWxlPSJ3aWR0aDoxMzE4cHg7aGVpZ2h0Ojg2cHg7YmFja2dyb3VuZDojRkVGRUZFOyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgMTMxOCA4NiIgd2lkdGg9IjEzMThweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjxyZWN0IGZpbGw9IiNGRUZFRkUiIGhlaWdodD0iODYiIHN0eWxlPSJzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMzE4IiB4PSIwIiB5PSIwIi8+PCEtLWNsdXN0ZXIgMS4gPz8gUlBDIChVbmFyeSktLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1lbnRpdHk9IjEuIC4uIFJQQyAuVW5hcnkuIiBkYXRhLXNvdXJjZS1saW5lPSIzIiBkYXRhLXVpZD0iZW50MDAwMiIgaWQ9ImNsdXN0ZXJfMS4gLi4gUlBDIC5VbmFyeS4iPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNzMuMyIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjI1OCIgeD0iNyIgeT0iNyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDguNjA2MyIgeD0iNjEuNjk2OCIgeT0iMjEuOTk1MSI+MS4gJiMyMTMzNjsmIzM4OTE3OyBSUEMgKFVuYXJ5KTwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgMi4gPz8/Pz8/Pz8/Pz8gUlBDLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSIyLiAuLi4uLi4uLi4uLiBSUEMiIGRhdGEtc291cmNlLWxpbmU9IjEwIiBkYXRhLXVpZD0iZW50MDAwOCIgaWQ9ImNsdXN0ZXJfMi4gLi4uLi4uLi4uLi4gUlBDIj48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjczLjMiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIzMDkiIHg9IjI4OSIgeT0iNyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMTAuMTIyNCIgeD0iMzM4LjQzODgiIHk9IjIxLjk5NTEiPjIuICYjMTI0Njk7JiMxMjU0MDsmIzEyNDk2OyYjMTI1NDA7JiMxMjQ3MzsmIzEyNDg4OyYjMTI1MjI7JiMxMjU0MDsmIzEyNTExOyYjMTI1MzE7JiMxMjQ2NDsgUlBDPC90ZXh0PjwvZz48IS0tY2x1c3RlciAzLiA/Pz8/Pz8/Pz8/Pz8/IFJQQy0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0iMy4gLi4uLi4uLi4uLi4uLiBSUEMiIGRhdGEtc291cmNlLWxpbmU9IjE3IiBkYXRhLXVpZD0iZW50MDAxNCIgaWQ9ImNsdXN0ZXJfMy4gLi4uLi4uLi4uLi4uLiBSUEMiPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNzMuMyIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjI5OSIgeD0iNjIyIiB5PSI3Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIzOC4xMjIzIiB4PSI2NTIuNDM4OSIgeT0iMjEuOTk1MSI+My4gJiMxMjQ2MzsmIzEyNTIxOyYjMTI0NTI7JiMxMjQ1MDsmIzEyNTMxOyYjMTI0ODg7JiMxMjQ3MzsmIzEyNDg4OyYjMTI1MjI7JiMxMjU0MDsmIzEyNTExOyYjMTI1MzE7JiMxMjQ2NDsgUlBDPC90ZXh0PjwvZz48IS0tY2x1c3RlciA0LiA/Pz8/Pz8/Pz8/IFJQQy0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0iNC4gLi4uLi4uLi4uLiBSUEMiIGRhdGEtc291cmNlLWxpbmU9IjI0IiBkYXRhLXVpZD0iZW50MDAyMCIgaWQ9ImNsdXN0ZXJfNC4gLi4uLi4uLi4uLiBSUEMiPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNzMuMyIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjM2NyIgeD0iOTQ1IiB5PSI3Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE5Ni4xMjI0IiB4PSIxMDMwLjQzODgiIHk9IjIxLjk5NTEiPjQuICYjMjE0NTI7JiMyNjA0MTsmIzIxNTIxOyYjMTI0NzM7JiMxMjQ4ODsmIzEyNTIyOyYjMTI1NDA7JiMxMjUxMTsmIzEyNTMxOyYjMTI0NjQ7IFJQQzwvdGV4dD48L2c+PCEtLWVudGl0eSBjMS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJjMSIgZGF0YS1zb3VyY2UtbGluZT0iNCIgZGF0YS11aWQ9ImVudDAwMDMiIGlkPSJlbnRpdHlfYzEiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNjAuNTMwMyIgeD0iMjIuNzMiIHk9IjQyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDAuNTMwMyIgeD0iMzIuNzMiIHk9IjU3Ljk5NTEiPkNsaWVudDwvdGV4dD48L2c+PCEtLWVudGl0eSBzMS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJzMSIgZGF0YS1zb3VyY2UtbGluZT0iNSIgZGF0YS11aWQ9ImVudDAwMDQiIGlkPSJlbnRpdHlfczEiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNjUuOTEwMiIgeD0iMTgzLjA0IiB5PSI0MiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ1LjkxMDIiIHg9IjE5My4wNCIgeT0iNTcuOTk1MSI+U2VydmVyPC90ZXh0PjwvZz48IS0tZW50aXR5IGMyLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9ImMyIiBkYXRhLXNvdXJjZS1saW5lPSIxMSIgZGF0YS11aWQ9ImVudDAwMDkiIGlkPSJlbnRpdHlfYzIiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNjAuNTMwMyIgeD0iMzA0LjczIiB5PSI0MiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQwLjUzMDMiIHg9IjMxNC43MyIgeT0iNTcuOTk1MSI+Q2xpZW50PC90ZXh0PjwvZz48IS0tZW50aXR5IHMyLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9InMyIiBkYXRhLXNvdXJjZS1saW5lPSIxMiIgZGF0YS11aWQ9ImVudDAwMTAiIGlkPSJlbnRpdHlfczIiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNjUuOTEwMiIgeD0iNTE2LjA0IiB5PSI0MiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ1LjkxMDIiIHg9IjUyNi4wNCIgeT0iNTcuOTk1MSI+U2VydmVyPC90ZXh0PjwvZz48IS0tZW50aXR5IGMzLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9ImMzIiBkYXRhLXNvdXJjZS1saW5lPSIxOCIgZGF0YS11aWQ9ImVudDAwMTUiIGlkPSJlbnRpdHlfYzMiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNjAuNTMwMyIgeD0iNjM3LjczIiB5PSI0MiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQwLjUzMDMiIHg9IjY0Ny43MyIgeT0iNTcuOTk1MSI+Q2xpZW50PC90ZXh0PjwvZz48IS0tZW50aXR5IHMzLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9InMzIiBkYXRhLXNvdXJjZS1saW5lPSIxOSIgZGF0YS11aWQ9ImVudDAwMTYiIGlkPSJlbnRpdHlfczMiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNjUuOTEwMiIgeD0iODM5LjA0IiB5PSI0MiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ1LjkxMDIiIHg9Ijg0OS4wNCIgeT0iNTcuOTk1MSI+U2VydmVyPC90ZXh0PjwvZz48IS0tZW50aXR5IGM0LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9ImM0IiBkYXRhLXNvdXJjZS1saW5lPSIyNSIgZGF0YS11aWQ9ImVudDAwMjEiIGlkPSJlbnRpdHlfYzQiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNjAuNTMwMyIgeD0iOTYwLjczIiB5PSI0MiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQwLjUzMDMiIHg9Ijk3MC43MyIgeT0iNTcuOTk1MSI+Q2xpZW50PC90ZXh0PjwvZz48IS0tZW50aXR5IHM0LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9InM0IiBkYXRhLXNvdXJjZS1saW5lPSIyNiIgZGF0YS11aWQ9ImVudDAwMjIiIGlkPSJlbnRpdHlfczQiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNjUuOTEwMiIgeD0iMTIzMC4wNCIgeT0iNDIiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0NS45MTAyIiB4PSIxMjQwLjA0IiB5PSI1Ny45OTUxIj5TZXJ2ZXI8L3RleHQ+PC9nPjwhLS1saW5rIGMxIHRvIHMxLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImMxIiBkYXRhLWVudGl0eS0yPSJzMSIgZGF0YS1zb3VyY2UtbGluZT0iNiIgZGF0YS11aWQ9ImxuazUiIGlkPSJsaW5rX2MxX3MxIj48cGF0aCBkPSJNNzcuOTEsNjQuNzMgQzg2LjUxLDY4LjE1IDk2LjMzLDcxLjQ0IDEwNS42Niw3My4xNSBDMTI5LjcsNzcuNTYgMTM2LjU4LDc3LjM3IDE2MC42Niw3My4xNSBDMTcwLjQyLDcxLjQ0IDE3NS4xMjAyLDcwLjI4ODUgMTg0LjE2MDIsNjYuODU4NSIgZmlsbD0ibm9uZSIgaWQ9ImMxLXRvLXMxIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxODkuNzcsNjQuNzMsMTc5LjkzNjQsNjQuMTgyOSwxODUuMDk1Miw2Ni41MDM3LDE4Mi43NzQzLDcxLjY2MjYsMTg5Ljc3LDY0LjczIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTMuMzkwMSIgeD0iMTA2LjY2IiB5PSI2OS4yMTY5Ij5SZXF1ZXN0PC90ZXh0PjwvZz48IS0tcmV2ZXJzZSBsaW5rIGMxIHRvIHMxLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImMxIiBkYXRhLWVudGl0eS0yPSJzMSIgZGF0YS1zb3VyY2UtbGluZT0iNyIgZGF0YS11aWQ9ImxuazciIGlkPSJsaW5rX2MxX3MxIj48cGF0aCBkPSJNODkuNjYsNTMuMTUgQzExNy44OCw1My4xNSAxNTMuNjQsNTMuMTUgMTgyLjY3LDUzLjE1IiBmaWxsPSJub25lIiBpZD0iYzEtYmFja3RvLXMxIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI4My42Niw1My4xNSw5Mi42Niw1Ny4xNSw4OC42Niw1My4xNSw5Mi42Niw0OS4xNSw4My42Niw1My4xNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYzLjAxOTUiIHg9IjEwMS42NiIgeT0iNDYuMjE2OSI+UmVzcG9uc2U8L3RleHQ+PC9nPjwhLS1saW5rIGMyIHRvIHMyLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImMyIiBkYXRhLWVudGl0eS0yPSJzMiIgZGF0YS1zb3VyY2UtbGluZT0iMTMiIGRhdGEtdWlkPSJsbmsxMSIgaWQ9ImxpbmtfYzJfczIiPjxwYXRoIGQ9Ik0zNjUuNDcsNjIuODQgQzM3OS43OCw2Ni45IDM5Ny4xNyw3MS4xNCA0MTMuMTYsNzMuMTUgQzQzNy40MSw3Ni4yMSA0NDMuODksNzYuMTEgNDY4LjE2LDczLjE1IEM0ODQuMDksNzEuMjEgNDk1LjYwODcsNjguNzU4NiA1MTAuMTE4Nyw2NC44Mjg2IiBmaWxsPSJub25lIiBpZD0iYzItdG8tczIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjUxNS45MSw2My4yNiw1MDYuMTc3Myw2MS43NTIsNTExLjA4MzksNjQuNTY3MSw1MDguMjY4Nyw2OS40NzM3LDUxNS45MSw2My4yNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjUzLjM5MDEiIHg9IjQxNC4xNiIgeT0iNjkuMjE2OSI+UmVxdWVzdDwvdGV4dD48L2c+PCEtLXJldmVyc2UgbGluayBjMiB0byBzMi0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJjMiIgZGF0YS1lbnRpdHktMj0iczIiIGRhdGEtc291cmNlLWxpbmU9IjE0IiBkYXRhLXVpZD0ibG5rMTMiIGlkPSJsaW5rX2MyX3MyIj48cGF0aCBkPSJNMzcxLjY2LDUzLjE1IEM0MTEuNDIsNTMuMTUgNDc0LjUxLDUzLjE1IDUxNS41OCw1My4xNSIgZmlsbD0ibm9uZSIgaWQ9ImMyLWJhY2t0by1zMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzY1LjY2LDUzLjE1LDM3NC42Niw1Ny4xNSwzNzAuNjYsNTMuMTUsMzc0LjY2LDQ5LjE1LDM2NS42Niw1My4xNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNC4wODAxIiB4PSIzODMuNjYiIHk9IjQ2LjIxNjkiPlJlc3BvbnNlIDEsMiwuLi5OPC90ZXh0PjwvZz48IS0tbGluayBjMyB0byBzMy0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJjMyIgZGF0YS1lbnRpdHktMj0iczMiIGRhdGEtc291cmNlLWxpbmU9IjIwIiBkYXRhLXVpZD0ibG5rMTciIGlkPSJsaW5rX2MzX3MzIj48cGF0aCBkPSJNNjk4LjU0LDUzLjE1IEM3MzYuMjIsNTMuMTUgNzk0LjA1LDUzLjE1IDgzMi44OCw1My4xNSIgZmlsbD0ibm9uZSIgaWQ9ImMzLXRvLXMzIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI4MzguODgsNTMuMTUsODI5Ljg4LDQ5LjE1LDgzMy44OCw1My4xNSw4MjkuODgsNTcuMTUsODM4Ljg4LDUzLjE1IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA0LjQ1MDciIHg9IjcxNi42NiIgeT0iNDYuMjE2OSI+UmVxdWVzdCAxLDIsLi4uTjwvdGV4dD48L2c+PCEtLXJldmVyc2UgbGluayBjMyB0byBzMy0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJjMyIgZGF0YS1lbnRpdHktMj0iczMiIGRhdGEtc291cmNlLWxpbmU9IjIxIiBkYXRhLXVpZD0ibG5rMTkiIGlkPSJsaW5rX2MzX3MzIj48cGF0aCBkPSJNNzA0LjE4NjEsNjUuOTAyMiBDNzE1LjgxNjEsNjkuNTQyMiA3MjMuNTgsNzEuMzQgNzM2LjE2LDczLjE1IEM3NjQuNzUsNzcuMjYgNzcyLjU0LDc3LjExIDgwMS4xNiw3My4xNSBDODEzLjY5LDcxLjQyIDgyNy4xMiw2OC4wMyA4MzguODksNjQuNTMiIGZpbGw9Im5vbmUiIGlkPSJjMy1iYWNrdG8tczMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjY5OC40Niw2NC4xMSw3MDUuODU0NCw3MC42MTU3LDcwMy4yMzE3LDY1LjYwMzUsNzA4LjI0MzksNjIuOTgwOSw2OTguNDYsNjQuMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2My4wMTk1IiB4PSI3MzcuMTYiIHk9IjY5LjIxNjkiPlJlc3BvbnNlPC90ZXh0PjwvZz48IS0tbGluayBjNCB0byBzNC0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJjNCIgZGF0YS1lbnRpdHktMj0iczQiIGRhdGEtc291cmNlLWxpbmU9IjI3IiBkYXRhLXVpZD0ibG5rMjMiIGlkPSJsaW5rX2M0X3M0Ij48cGF0aCBkPSJNMTAyNy42Nyw1My4xNSBDMTA3OS4yMiw1My4xNSAxMTcwLjc3LDUzLjE1IDEyMjMuOSw1My4xNSIgZmlsbD0ibm9uZSIgaWQ9ImM0LXM0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMDIxLjY3LDUzLjE1LDEwMzAuNjcsNTcuMTUsMTAyNi42Nyw1My4xNSwxMDMwLjY3LDQ5LjE1LDEwMjEuNjcsNTMuMTUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjEyMjkuOSw1My4xNSwxMjIwLjksNDkuMTUsMTIyNC45LDUzLjE1LDEyMjAuOSw1Ny4xNSwxMjI5LjksNTMuMTUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNzIuMjQzNyIgeD0iMTAzOS42NiIgeT0iNDYuMjE2OSI+UmVxdWVzdC9SZXNwb25zZSBTdHJlYW08L3RleHQ+PC9nPjwhLS1TUkM9W2JUNzFJaUNtNkMzblV2X1k4cnVLcmFaSmRhSXk1M3NBUkZXMGlPa3JoNGpkcVdhWU5YZTQzdWhwOGp1S3lROE4xVjRtc0RrNDNObUJhcDZzSjhlbTBlN2xfcnItOUJBSnlIdUxqMGo3REVjYWVrWnBUYnBhWE8ycmxMcnhGNC1tZkFHeXBIY1cwQ0Z1emw3ZC1HZ1ExcDZpN3Q4Z3BaU0dON1c5NU1yMFNQdW5OWUFXNGY5V3JiZkNkMzRuUlRBcTA3b0hmSVVibHNENnMwQktQQVR6OWFsYWNUN0ZzUjdUOUJFRHgxTFNDa0hUQlk0ODFicnpRcE5JUWMzbFFnWkxqTFJscV9BYXJQVWtGZ3NsdGFMZ05BT0hucU1NTk1KWDhndUJXV1BmTzhwdF9tOTMyX3BHd2FyTmh4ZndpSTgzTjhxUHJaMUQybnJjdzMwVFktYnBSX1pWRXFSY0Mtems5V18zeVUxLUhMcktlcENqV2txNUJ0OXVjX0N0UXZNMnFRd1hfMDgwXS0tPjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<p><strong>各パターンの用途：</strong></p>
<table>
<thead>
<tr>
<th>パターン</th>
<th>用途例（販売管理システム）</th>
</tr>
</thead>
<tbody>
<tr>
<td>単項 RPC</td>
<td>商品情報取得、受注登録</td>
</tr>
<tr>
<td>サーバーストリーミング</td>
<td>商品一覧取得、出荷進捗通知</td>
</tr>
<tr>
<td>クライアントストリーミング</td>
<td>受注明細の一括登録</td>
</tr>
<tr>
<td>双方向ストリーミング</td>
<td>リアルタイム在庫同期</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="144-grpc">14.4 gRPC におけるヘキサゴナルアーキテクチャ<a class="headerlink" href="#144-grpc" title="Permanent link">&para;</a></h3>
<p>gRPC を導入しても、既存のヘキサゴナルアーキテクチャ（ドメイン層・アプリケーション層）はそのまま共有し、<strong>Input Adapter として gRPC サービス層のみを追加</strong>します。</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjY2OHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NzAycHg7aGVpZ2h0OjY2OHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDcwMiA2NjgiIHdpZHRoPSI3MDJweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyIEhleGFnb25hbCBBcmNoaXRlY3R1cmUgKGdSUEM/KS0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0iSGV4YWdvbmFsIEFyY2hpdGVjdHVyZSAuZ1JQQy4uIiBkYXRhLXNvdXJjZS1saW5lPSIzIiBkYXRhLXVpZD0iZW50MDAwMiIgaWQ9ImNsdXN0ZXJfSGV4YWdvbmFsIEFyY2hpdGVjdHVyZSAuZ1JQQy4uIj48cGF0aCBkPSJNMjA0LjM2LDYgTDQ2NS4xMzI0LDYgQTMuNzUsMy43NSAwIDAgMSA0NjcuNjMyNCw4LjUgTDQ3NC42MzI0LDI4LjI5NjkgTDQ3NC4zNiwyOC4yOTY5IEEyLjUsMi41IDAgMCAxIDQ3Ni44NiwzMC43OTY5IEw0NzYuODYsNjU4LjczIEEyLjUsMi41IDAgMCAxIDQ3NC4zNiw2NjEuMjMgTDIwNC4zNiw2NjEuMjMgQTIuNSwyLjUgMCAwIDEgMjAxLjg2LDY1OC43MyBMMjAxLjg2LDguNSBBMi41LDIuNSAwIDAgMSAyMDQuMzYsNiIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB4MT0iMjAxLjg2IiB4Mj0iNDc0LjYzMjQiIHkxPSIyOC4yOTY5IiB5Mj0iMjguMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNTkuNzcyNCIgeD0iMjA1Ljg2IiB5PSIyMC45OTUxIj5IZXhhZ29uYWwgQXJjaGl0ZWN0dXJlIChnUlBDJiMyOTI1NjspPC90ZXh0PjwvZz48IS0tY2xhc3MgY29yZS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJjb3JlIiBkYXRhLXNvdXJjZS1saW5lPSI1IiBkYXRhLXVpZD0iZW50MDAwMyIgaWQ9ImVudGl0eV9jb3JlIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjE4OC45Njg4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxOTAuMDQiIHg9IjI0My44NCIgeT0iMjU2Ljc4Ii8+PGVsbGlwc2UgY3g9IjI1OC44NCIgY3k9IjI3OC4wNzY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0yNjEuODA4OCwyODMuNzE3NSBRMjYxLjIzMDYsMjg0LjAxNDQgMjYwLjU5LDI4NC4xNTUgUTI1OS45NDk0LDI4NC4zMTEzIDI1OS4yNDYzLDI4NC4zMTEzIFEyNTYuNzQ2MywyODQuMzExMyAyNTUuNDE4MSwyODIuNjcwNiBRMjU0LjEwNTYsMjgxLjAxNDQgMjU0LjEwNTYsMjc3Ljg4OTQgUTI1NC4xMDU2LDI3NC43NjQ0IDI1NS40MTgxLDI3My4xMDgxIFEyNTYuNzQ2MywyNzEuNDUxOSAyNTkuMjQ2MywyNzEuNDUxOSBRMjU5Ljk0OTQsMjcxLjQ1MTkgMjYwLjU5LDI3MS42MDgxIFEyNjEuMjQ2MywyNzEuNzY0NCAyNjEuODA4OCwyNzIuMDYxMyBMMjYxLjgwODgsMjc0Ljc4IFEyNjEuMTgzOCwyNzQuMjAxOSAyNjAuNTksMjczLjkzNjMgUTI1OS45OTYzLDI3My42NTUgMjU5LjM3MTMsMjczLjY1NSBRMjU4LjAyNzUsMjczLjY1NSAyNTcuMzQsMjc0LjczMzEgUTI1Ni42NTI1LDI3NS43OTU2IDI1Ni42NTI1LDI3Ny44ODk0IFEyNTYuNjUyNSwyNzkuOTgzMSAyNTcuMzQsMjgxLjA2MTMgUTI1OC4wMjc1LDI4Mi4xMjM4IDI1OS4zNzEzLDI4Mi4xMjM4IFEyNTkuOTk2MywyODIuMTIzOCAyNjAuNTksMjgxLjg1ODEgUTI2MS4xODM4LDI4MS41NzY5IDI2MS44MDg4LDI4MC45OTg4IEwyNjEuODA4OCwyODMuNzE3NSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNS4zODM4IiB4PSIyOTQuMTY4MSIgeT0iMjc0Ljc3NTEiPkFwcGxpY2F0aW9uIENvcmU8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTU4LjA0IiB4PSIyNzIuODQiIHk9IjI5MS4wNzIiPihEb21haW4gKyBVc2UgQ2FzZXMpPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjI0NC44NCIgeDI9IjQzMi44OCIgeTE9IjI5OS4zNzM4IiB5Mj0iMjk5LjM3MzgiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIyNTEuODQiIHk9IjMxMC4wMjIyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTE0LjEyNiIgeD0iMjYzLjg0IiB5PSIzMTYuMzY4OSI+UHJvZHVjdFVzZUNhc2U8L3RleHQ+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMjUxLjg0IiB5PSIzMjYuMzE5MSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwMC40NDczIiB4PSIyNjMuODQiIHk9IjMzMi42NjU3Ij5PcmRlclVzZUNhc2U8L3RleHQ+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMjUxLjg0IiB5PSIzNDIuNjE1OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyNy41NjU0IiB4PSIyNjMuODQiIHk9IjM0OC45NjI2Ij5TaGlwbWVudFVzZUNhc2U8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMjQ0Ljg0IiB4Mj0iNDMyLjg4IiB5MT0iMzU2LjI2NDQiIHkyPSIzNTYuMjY0NCIvPjxyZWN0IGZpbGw9IiNGMjRENUMiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjI1MS44NCIgeT0iMzY2LjkxMjgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ny4wODM5IiB4PSIyNjMuODQiIHk9IjM3My4yNTk1Ij5Qcm9kdWN0ICgmIzIxODMwOyYjMjE2OTc7KTwvdGV4dD48cmVjdCBmaWxsPSIjRjI0RDVDIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIyNTEuODQiIHk9IjM4My4yMDk3Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA4Ljg4MjYiIHg9IjI2My44NCIgeT0iMzg5LjU1NjQiPlBhcnRuZXIgKCYjMjE0NjI7JiMyNDM0MTsmIzIwODA4Oyk8L3RleHQ+PHJlY3QgZmlsbD0iI0YyNEQ1QyIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMjUxLjg0IiB5PSIzOTkuNTA2NiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgzLjQwNTIiIHg9IjI2My44NCIgeT0iNDA1Ljg1MzIiPk9yZGVyICgmIzIxNDYzOyYjMjc4ODA7KTwvdGV4dD48cmVjdCBmaWxsPSIjRjI0RDVDIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIyNTEuODQiIHk9IjQxNS44MDM0Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTEwLjUyMzMiIHg9IjI2My44NCIgeT0iNDIyLjE1MDEiPlNoaXBtZW50ICgmIzIwOTg2OyYjMzM2NTU7KTwvdGV4dD48cmVjdCBmaWxsPSIjRjI0RDVDIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIyNTEuODQiIHk9IjQzMi4xMDAzIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTMuNDI2NiIgeD0iMjYzLjg0IiB5PSI0MzguNDQ3Ij5JbnZvaWNlICgmIzM1NTMxOyYjMjc3MTQ7KTwvdGV4dD48L2c+PCEtLWNsYXNzIGlucHV0LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9ImlucHV0IiBkYXRhLXNvdXJjZS1saW5lPSIxNiIgZGF0YS11aWQ9ImVudDAwMDQiIGlkPSJlbnRpdHlfaW5wdXQiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTIzLjc4MTMiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjIwMy4wMjMxIiB4PSIyMzcuMzUiIHk9IjQxIi8+PGVsbGlwc2UgY3g9IjI4Mi43MTk5IiBjeT0iNjIuMjk2OSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMjg1LjY4ODcsNjcuOTM3NSBRMjg1LjExMDYsNjguMjM0NCAyODQuNDY5OSw2OC4zNzUgUTI4My44MjkzLDY4LjUzMTMgMjgzLjEyNjIsNjguNTMxMyBRMjgwLjYyNjIsNjguNTMxMyAyNzkuMjk4MSw2Ni44OTA2IFEyNzcuOTg1Niw2NS4yMzQ0IDI3Ny45ODU2LDYyLjEwOTQgUTI3Ny45ODU2LDU4Ljk4NDQgMjc5LjI5ODEsNTcuMzI4MSBRMjgwLjYyNjIsNTUuNjcxOSAyODMuMTI2Miw1NS42NzE5IFEyODMuODI5Myw1NS42NzE5IDI4NC40Njk5LDU1LjgyODEgUTI4NS4xMjYyLDU1Ljk4NDQgMjg1LjY4ODcsNTYuMjgxMyBMMjg1LjY4ODcsNTkgUTI4NS4wNjM3LDU4LjQyMTkgMjg0LjQ2OTksNTguMTU2MyBRMjgzLjg3NjIsNTcuODc1IDI4My4yNTEyLDU3Ljg3NSBRMjgxLjkwNzQsNTcuODc1IDI4MS4yMTk5LDU4Ljk1MzEgUTI4MC41MzI0LDYwLjAxNTYgMjgwLjUzMjQsNjIuMTA5NCBRMjgwLjUzMjQsNjQuMjAzMSAyODEuMjE5OSw2NS4yODEzIFEyODEuOTA3NCw2Ni4zNDM4IDI4My4yNTEyLDY2LjM0MzggUTI4My44NzYyLDY2LjM0MzggMjg0LjQ2OTksNjYuMDc4MSBRMjg1LjA2MzcsNjUuNzk2OSAyODUuNjg4Nyw2NS4yMTg4IEwyODUuNjg4Nyw2Ny45Mzc1IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAzLjc4MzIiIHg9IjMwMy4yMTk5IiB5PSI1OC45OTUxIj5JbnB1dCBBZGFwdGVyczwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ni4wMTA3IiB4PSIzMDcuMTA2MiIgeT0iNzUuMjkyIj4oRHJpdmluZyBTaWRlKTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyMzguMzUiIHgyPSI0MzkuMzczMSIgeTE9IjgzLjU5MzgiIHkyPSI4My41OTM4Ii8+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMjQ1LjM1IiB5PSI5NC4yNDIyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTY1LjYzNDUiIHg9IjI1Ny4zNSIgeT0iMTAwLjU4ODkiPlJFU1QgQ29udHJvbGxlciYjNjUyODg7JiMyNjA4MjsmIzIzMzg0OyYjNjUyODk7PC90ZXh0PjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjI0NS4zNSIgeT0iMTEwLjUzOTEiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNzcuMDIzMSIgeD0iMjU3LjM1IiB5PSIxMTYuODg1NyI+Z1JQQyBTZXJ2aWNlJiM2NTI4ODsmIzI2MDMyOyYjMzUyMTU7JiMzNjg2MTsmIzIxMTUyOyYjNjUyODk7PC90ZXh0PjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjI0NS4zNSIgeT0iMTI2LjgzNTkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTUuMTg1NSIgeD0iMjU3LjM1IiB5PSIxMzMuMTgyNiI+U3RyZWFtT2JzZXJ2ZXI8L3RleHQ+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMjQ1LjM1IiB5PSIxNDMuMTMyOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyMy43NzgzIiB4PSIyNTcuMzUiIHk9IjE0OS40Nzk1Ij5TZXJ2ZXJJbnRlcmNlcHRvcjwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyMzguMzUiIHgyPSI0MzkuMzczMSIgeTE9IjE1Ni43ODEzIiB5Mj0iMTU2Ljc4MTMiLz48L2c+PCEtLWNsYXNzIG91dHB1dC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJvdXRwdXQiIGRhdGEtc291cmNlLWxpbmU9IjIzIiBkYXRhLXVpZD0iZW50MDAwNSIgaWQ9ImVudGl0eV9vdXRwdXQiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTA3LjQ4NDQiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE2MC43NDMyIiB4PSIyMzYuNDkiIHk9IjUzNy43NSIvPjxlbGxpcHNlIGN4PSIyNTcuMTUxIiBjeT0iNTU5LjA0NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTI2MC4xMTk4LDU2NC42ODc1IFEyNTkuNTQxNyw1NjQuOTg0NCAyNTguOTAxLDU2NS4xMjUgUTI1OC4yNjA0LDU2NS4yODEzIDI1Ny41NTczLDU2NS4yODEzIFEyNTUuMDU3Myw1NjUuMjgxMyAyNTMuNzI5Miw1NjMuNjQwNiBRMjUyLjQxNjcsNTYxLjk4NDQgMjUyLjQxNjcsNTU4Ljg1OTQgUTI1Mi40MTY3LDU1NS43MzQ0IDI1My43MjkyLDU1NC4wNzgxIFEyNTUuMDU3Myw1NTIuNDIxOSAyNTcuNTU3Myw1NTIuNDIxOSBRMjU4LjI2MDQsNTUyLjQyMTkgMjU4LjkwMSw1NTIuNTc4MSBRMjU5LjU1NzMsNTUyLjczNDQgMjYwLjExOTgsNTUzLjAzMTMgTDI2MC4xMTk4LDU1NS43NSBRMjU5LjQ5NDgsNTU1LjE3MTkgMjU4LjkwMSw1NTQuOTA2MyBRMjU4LjMwNzMsNTU0LjYyNSAyNTcuNjgyMyw1NTQuNjI1IFEyNTYuMzM4NSw1NTQuNjI1IDI1NS42NTEsNTU1LjcwMzEgUTI1NC45NjM1LDU1Ni43NjU2IDI1NC45NjM1LDU1OC44NTk0IFEyNTQuOTYzNSw1NjAuOTUzMSAyNTUuNjUxLDU2Mi4wMzEzIFEyNTYuMzM4NSw1NjMuMDkzOCAyNTcuNjgyMyw1NjMuMDkzOCBRMjU4LjMwNzMsNTYzLjA5MzggMjU4LjkwMSw1NjIuODI4MSBRMjU5LjQ5NDgsNTYyLjU0NjkgMjYwLjExOTgsNTYxLjk2ODggTDI2MC4xMTk4LDU2NC42ODc1IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTE2LjE2MzEiIHg9IjI3Mi40MDkiIHk9IjU1NS43NDUxIj5PdXRwdXQgQWRhcHRlcnM8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTEuODQ3NyIgeD0iMjg0LjU2NjgiIHk9IjU3Mi4wNDIiPihEcml2ZW4gU2lkZSk8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMjM3LjQ5IiB4Mj0iMzk2LjIzMzIiIHkxPSI1ODAuMzQzOCIgeTI9IjU4MC4zNDM4Ii8+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMjQ0LjQ5IiB5PSI1OTAuOTkyMiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzNC43NDMyIiB4PSIyNTYuNDkiIHk9IjU5Ny4zMzg5Ij5NeUJhdGlzIFJlcG9zaXRvcnk8L3RleHQ+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMjQ0LjQ5IiB5PSI2MDcuMjg5MSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExOS40MjM4IiB4PSIyNTYuNDkiIHk9IjYxMy42MzU3Ij5EYXRhYmFzZSBBY2Nlc3M8L3RleHQ+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMjQ0LjQ5IiB5PSI2MjMuNTg1OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwNS40MDMzIiB4PSIyNTYuNDkiIHk9IjYyOS45MzI2Ij5FbnRpdHkgTWFwcGluZzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyMzcuNDkiIHgyPSIzOTYuMjMzMiIgeTE9IjYzNy4yMzQ0IiB5Mj0iNjM3LjIzNDQiLz48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkdNTjgiIGRhdGEtc291cmNlLWxpbmU9IjM0IiBkYXRhLXVpZD0iZW50MDAwOSIgaWQ9ImVudGl0eV9HTU44Ij48cGF0aCBkPSJNNDkyLjcsNzUuMTkgTDQ5Mi43LDEzMC41ODg0IEEwLDAgMCAwIDAgNDkyLjcsMTMwLjU4ODQgTDU2Mi4wOSwxMzAuNTg4NCBMNDM0LjI4LDI1OC4wNyBMNTcwLjA5LDEzMC41ODg0IEw2OTUuMDMzNywxMzAuNTg4NCBBMCwwIDAgMCAwIDY5NS4wMzM3LDEzMC41ODg0IEw2OTUuMDMzNyw4NS4xOSBMNjg1LjAzMzcsNzUuMTkgTDQ5Mi43LDc1LjE5IEEwLDAgMCAwIDAgNDkyLjcsNzUuMTkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik02ODUuMDMzNyw3NS4xOSBMNjg1LjAzMzcsODUuMTkgTDY5NS4wMzM3LDg1LjE5IEw2ODUuMDMzNyw3NS4xOSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQzLjAwMDIiIHg9IjQ5OC43IiB5PSI5Mi4yNTY5Ij4mIzI2MDgyOyYjMjMzODQ7JiMxMjM5ODsmIzEyNDk5OyYjMTI0NzI7JiMxMjQ5MzsmIzEyNDczOyYjMTI1MjU7JiMxMjQ3MjsmIzEyNDgzOyYjMTI0NjM7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1My4yNzA2IiB4PSI0OTguNyIgeT0iMTA3LjM4OTciPlJFU1QgQVBJICYjMjkyNTY7JiMxMjM5MjsmIzIzNDM2OyYjMjA4NDA7JiMxMjM5NTsmIzIwODQ5OyYjMjYzNzc7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE4MS4zMzM3IiB4PSI0OTguNyIgeT0iMTIyLjUyMjUiPmdSUEMgJiMyMjI2NjsmIzI2Mzc3OyYjMTIzOTg7JiMxMjQ2NzsmIzEyNTQwOyYjMTI0ODk7JiMxMjM5OTsmIzIxNTQ3OyYjMTI0MTQ7JiMxMjM5NDsmIzEyMzU2OzwvdGV4dD48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkdNTjExIiBkYXRhLXNvdXJjZS1saW5lPSI0MCIgZGF0YS11aWQ9ImVudDAwMTIiIGlkPSJlbnRpdHlfR01OMTEiPjxwYXRoIGQ9Ik02LDc1LjE5IEw2LDEzMC41ODg0IEEwLDAgMCAwIDAgNiwxMzAuNTg4NCBMMTg1LjcyOTYsMTMwLjU4ODQgQTAsMCAwIDAgMCAxODUuNzI5NiwxMzAuNTg4NCBMMTg1LjcyOTYsMTA2Ljg5IEwyMzcuMDgsMTAyLjg5IEwxODUuNzI5Niw5OC44OSBMMTg1LjcyOTYsODUuMTkgTDE3NS43Mjk2LDc1LjE5IEw2LDc1LjE5IEEwLDAgMCAwIDAgNiw3NS4xOSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTE3NS43Mjk2LDc1LjE5IEwxNzUuNzI5Niw4NS4xOSBMMTg1LjcyOTYsODUuMTkgTDE3NS43Mjk2LDc1LjE5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDMuMzMzNiIgeD0iMTIiIHk9IjkyLjI1NjkiPmdSUEMgJiMxMjQ2OTsmIzEyNTQwOyYjMTI0OTk7JiMxMjQ3MzsmIzEyNDM0OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTguNzI5NiIgeD0iMTIiIHk9IjEwNy4zODk3Ij5JbnB1dCBBZGFwdGVyICYjMTIzOTI7JiMxMjM3NTsmIzEyMzkwOyYjMzY4NjE7JiMyMTE1Mjs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQ1LjcwNDIiIHg9IjEyIiB5PSIxMjIuNTIyNSI+JiMyNjA4MjsmIzIzMzg0OyYjMTIzOTg7IFJFU1QgJiMxMjM5MjsmIzIwODQ5OyYjMjMzODQ7JiMyMTQ4NzsmIzMzMDIxOzwvdGV4dD48L2c+PCEtLWxpbmsgaW5wdXQgdG8gY29yZS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJpbnB1dCIgZGF0YS1lbnRpdHktMj0iY29yZSIgZGF0YS1zb3VyY2UtbGluZT0iMzAiIGRhdGEtdWlkPSJsbms2IiBpZD0ibGlua19pbnB1dF9jb3JlIj48cGF0aCBjb2RlTGluZT0iMzAiIGQ9Ik0zMzguODYsMTY1LjEgQzMzOC44NiwxOTIuNzUgMzM4Ljg2LDIyMC4wMyAzMzguODYsMjUwLjciIGZpbGw9Im5vbmUiIGlkPSJpbnB1dC10by1jb3JlIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIzMzguODYsMjU2LjcsMzQyLjg2LDI0Ny43LDMzOC44NiwyNTEuNywzMzQuODYsMjQ3LjcsMzM4Ljg2LDI1Ni43IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzAuODAxOCIgeD0iMzQzLjAzMzgiIHk9IjIwNy44NDY5Ij5JbnB1dCBQb3J0czwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3Ny4xNDk0IiB4PSIzMzkuODYiIHk9IjIyMi45Nzk3Ij4oVXNlIENhc2VzKTwvdGV4dD48L2c+PCEtLWxpbmsgY29yZSB0byBvdXRwdXQtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iY29yZSIgZGF0YS1lbnRpdHktMj0ib3V0cHV0IiBkYXRhLXNvdXJjZS1saW5lPSIzMSIgZGF0YS11aWQ9ImxuazciIGlkPSJsaW5rX2NvcmVfb3V0cHV0Ij48cGF0aCBjb2RlTGluZT0iMzEiIGQ9Ik0zMzAuMiw0NDYuMDcgQzMyNy4zNCw0NzcuMDYgMzI0LjgxMTgsNTA0LjQ3NTQgMzIyLjMzMTgsNTMxLjMyNTQiIGZpbGw9Im5vbmUiIGlkPSJjb3JlLXRvLW91dHB1dCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzIxLjc4LDUzNy4zLDMyNi41OTA4LDUyOC43MDYsMzIyLjIzOTksNTMyLjMyMTIsMzE4LjYyNDcsNTI3Ljk3MDMsMzIxLjc4LDUzNy4zIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODIuMjk3NCIgeD0iMzYxLjU0MTUiIHk9IjQ4OC44MTY5Ij5PdXRwdXQgUG9ydHM8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQ4Ljk2MDQiIHg9IjMyOC4yMSIgeT0iNTAzLjk0OTciPihSZXBvc2l0b3J5IEludGVyZmFjZXMpPC90ZXh0PjwvZz48IS0tU1JDPVtSTDlEUm45MTZCeGxodFpiMTM3eVdIdkNMYWdLbjBnMVVsQ29kSHRlbjZMY0NwaUdZVjZta3dBV1JKMkk1WEN6NjB5RGFSSDg2Z0NzTDdfQ1A5NVJfdThwa3dNcW5qaXhwX2xuRkNfeHBZczdyMmFaSzJxTWprczd6bnVLMFJsOHpvdEJHX1c5UVgzOHQyVEZLT0Nwdjg4ankyd0wxQ2tNODkxakwyazVGX3JVQldGRkI2bFRkaDR6cHdLT0lTZVA1QldXWnJic2FwU0hQTjBSN2xhNDJpV2Rsa3YyRmMyVHJqcnZnMFprakIyNFI3cG1DWHU2RUdDWDhIYUg2WGVTbmxFM2tEaXBRNWF1QUpQUWQ4dURLRGtiTmZDbXFfaGdSQmRfdE0wYnJrT0tRdWRCb1BsNUJDb2oySklfZUx5RE1aek5PclI4eW5rTUlpbmhJUjBUdjRhWVY2RDhxM1BiM1FYSFh3SE1RNTlZbDVJQmpNcmpkNGQxTlBVOFl0YmxDVmVTN3gtX2NGVHJyY21EUWFJcWpLMkpFbG93RjFlaVZ2XzdocC1iMUpLZjI2Z01UdG5UR3VHMWFnMzREM0tjZGtKWTd0N2JibG9GRWlBa1lVRGZZTDZ0clJjaEotRDNiTlpTZnRmUUh1RVJJQThUUkhqaVo4YS1WWHdBSjVCUFdJdGFVVGdkUGpJU2dTTHlfYXZ3anV0TE5ZZlNJNER4eFJYTUtjNUFCd2F0aGRJa2dqUzI4RjVNSHBaZmoxWU4xMkp0V0RTSjhZalRkbWZFTDNIS3VHeUx4UWxtZnVnRWFwWEl1VEhBTGN2TklnM19lbWg2eVNiVXQxc2hPMTl0UHVrRlZJbFBVVnBYSkNUY0lkWWdlaGNBVDNvRHRxdkt5NGk1TnJKbW1ZQkMwS0QtQVM0YlRNYXE5QlJKNkloeWJoR0VaTzNtZE5OWk51MWNMaTU4MUtWZkVUVXdxb3pYWDdMZDZlYTdxc0xxVmFOdDVtMDBdLS0+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<p><strong>gRPC でもヘキサゴナルアーキテクチャを維持する理由：</strong></p>
<ol>
<li><strong>再利用性</strong>: 既存の UseCase/Repository をそのまま活用</li>
<li><strong>並行運用</strong>: REST API と gRPC を同時提供可能</li>
<li><strong>テスト容易性</strong>: ドメインロジックは通信プロトコルに依存しない</li>
<li><strong>移行容易性</strong>: 段階的に API 形式を追加・変更可能</li>
</ol>
<hr />
<h3 id="145">14.5 ディレクトリ構成<a class="headerlink" href="#145" title="Permanent link">&para;</a></h3>
<p>既存の構成に <code>infrastructure/grpc/</code> を追加するだけです。</p>
<div class="highlight"><pre><span></span><code>src/main/java/com/example/sales/
├── domain/                     # ドメイン層（API版と共通）
│   ├── model/
│   │   ├── product/           # 商品ドメイン
│   │   ├── partner/           # 取引先ドメイン
│   │   ├── order/             # 受注ドメイン
│   │   ├── shipment/          # 出荷ドメイン
│   │   └── invoice/           # 請求ドメイン
│   └── exception/
│
├── application/               # アプリケーション層（API版と共通）
│   ├── port/
│   │   ├── in/               # Input Port（ユースケース）
│   │   └── out/              # Output Port（リポジトリ）
│   └── service/
│
├── infrastructure/
│   ├── persistence/          # Output Adapter（DB実装）- 既存
│   │   ├── mapper/
│   │   └── repository/
│   ├── rest/                 # Input Adapter（REST実装）- 既存
│   └── grpc/                 # Input Adapter（gRPC実装）- 新規追加
│       ├── service/          # gRPC サービス実装
│       ├── interceptor/      # インターセプター
│       └── converter/        # ドメイン ↔ Proto 変換
│
├── config/
│
└── src/main/proto/           # Protocol Buffers 定義
    ├── common.proto
    ├── product.proto
    ├── partner.proto
    ├── order.proto
    ├── shipment.proto
    └── invoice.proto
</code></pre></div>
<hr />
<h3 id="146">14.6 技術スタックの追加<a class="headerlink" href="#146" title="Permanent link">&para;</a></h3>
<p>既存の <code>build.gradle.kts</code> に gRPC 関連の依存関係を追加します。</p>
<h4 id="buildgradlekts">build.gradle.kts（差分）<a class="headerlink" href="#buildgradlekts" title="Permanent link">&para;</a></h4>
<details>
<summary>コード例: build.gradle.kts</summary>

<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nn">com.google.protobuf.gradle.*</span>

<span class="n">plugins</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 既存のプラグイン</span>
<span class="w">    </span><span class="n">id</span><span class="p">(</span><span class="s">&quot;java&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">id</span><span class="p">(</span><span class="s">&quot;org.springframework.boot&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="s">&quot;4.0.0&quot;</span>
<span class="w">    </span><span class="n">id</span><span class="p">(</span><span class="s">&quot;io.spring.dependency-management&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="s">&quot;1.1.0&quot;</span>

<span class="w">    </span><span class="c1">// gRPC 関連を追加</span>
<span class="w">    </span><span class="n">id</span><span class="p">(</span><span class="s">&quot;com.google.protobuf&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="s">&quot;0.9.4&quot;</span>
<span class="p">}</span>

<span class="n">dependencies</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 既存の依存関係（Spring Boot, MyBatis, PostgreSQL等）はそのまま</span>

<span class="w">    </span><span class="c1">// gRPC 関連を追加</span>
<span class="w">    </span><span class="n">implementation</span><span class="p">(</span><span class="s">&quot;net.devh:grpc-spring-boot-starter:3.1.0.RELEASE&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">implementation</span><span class="p">(</span><span class="s">&quot;io.grpc:grpc-protobuf:1.62.2&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">implementation</span><span class="p">(</span><span class="s">&quot;io.grpc:grpc-stub:1.62.2&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">implementation</span><span class="p">(</span><span class="s">&quot;io.grpc:grpc-services:1.62.2&quot;</span><span class="p">)</span><span class="w">  </span><span class="c1">// ヘルスチェック、リフレクション</span>

<span class="w">    </span><span class="c1">// Protocol Buffers</span>
<span class="w">    </span><span class="n">implementation</span><span class="p">(</span><span class="s">&quot;com.google.protobuf:protobuf-java:3.25.3&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">implementation</span><span class="p">(</span><span class="s">&quot;com.google.protobuf:protobuf-java-util:3.25.3&quot;</span><span class="p">)</span><span class="w">  </span><span class="c1">// JSON 変換</span>

<span class="w">    </span><span class="c1">// Jakarta Annotation (gRPC generated code で必要)</span>
<span class="w">    </span><span class="n">compileOnly</span><span class="p">(</span><span class="s">&quot;jakarta.annotation:jakarta.annotation-api:2.1.1&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="c1">// Test</span>
<span class="w">    </span><span class="n">testImplementation</span><span class="p">(</span><span class="s">&quot;io.grpc:grpc-testing:1.62.2&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">testImplementation</span><span class="p">(</span><span class="s">&quot;net.devh:grpc-client-spring-boot-starter:3.1.0.RELEASE&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">protobuf</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">protoc</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">artifact</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;com.google.protobuf:protoc:3.25.3&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">plugins</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">create</span><span class="p">(</span><span class="s">&quot;grpc&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">artifact</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;io.grpc:protoc-gen-grpc-java:1.62.2&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">generateProtoTasks</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">all</span><span class="p">().</span><span class="na">forEach</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">            </span><span class="n">task</span><span class="p">.</span><span class="na">plugins</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">create</span><span class="p">(</span><span class="s">&quot;grpc&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 生成コードのソースパス追加</span>
<span class="n">sourceSets</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">main</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">java</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">srcDirs</span><span class="p">(</span>
<span class="w">                </span><span class="s">&quot;build/generated/source/proto/main/java&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s">&quot;build/generated/source/proto/main/grpc&quot;</span>
<span class="w">            </span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<p><strong>追加パッケージの説明：</strong></p>
<table>
<thead>
<tr>
<th>パッケージ</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>grpc-spring-boot-starter</td>
<td>Spring Boot gRPC 統合</td>
</tr>
<tr>
<td>grpc-protobuf</td>
<td>gRPC + Protocol Buffers 統合</td>
</tr>
<tr>
<td>grpc-stub</td>
<td>gRPC クライアントスタブ</td>
</tr>
<tr>
<td>grpc-services</td>
<td>ヘルスチェック、リフレクションサービス</td>
</tr>
<tr>
<td>protobuf-java</td>
<td>Protocol Buffers Java ランタイム</td>
</tr>
<tr>
<td>protobuf-java-util</td>
<td>JSON ⇔ Protobuf 変換ユーティリティ</td>
</tr>
<tr>
<td>grpc-testing</td>
<td>gRPC テストサポート</td>
</tr>
</tbody>
</table>
<h4 id="applicationyml">application.yml（差分）<a class="headerlink" href="#applicationyml" title="Permanent link">&para;</a></h4>
<details>
<summary>コード例: application.yml</summary>

<div class="highlight"><pre><span></span><code><span class="c1"># 既存の設定はそのまま</span>

<span class="c1"># gRPC サーバー設定</span>
<span class="nt">grpc</span><span class="p">:</span>
<span class="w">  </span><span class="nt">server</span><span class="p">:</span>
<span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">9090</span>
<span class="w">    </span><span class="nt">reflection-service-enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">  </span><span class="c1"># gRPC リフレクション有効化</span>
<span class="w">    </span><span class="nt">health-service-enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">      </span><span class="c1"># ヘルスチェック有効化</span>
<span class="w">    </span><span class="nt">max-inbound-message-size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4194304</span><span class="w">  </span><span class="c1"># 4MB</span>
<span class="w">    </span><span class="nt">max-inbound-metadata-size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8192</span><span class="w">    </span><span class="c1"># 8KB</span>

<span class="c1"># ログ設定</span>
<span class="nt">logging</span><span class="p">:</span>
<span class="w">  </span><span class="nt">level</span><span class="p">:</span>
<span class="w">    </span><span class="nt">net.devh.boot.grpc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DEBUG</span>
<span class="w">    </span><span class="nt">io.grpc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">INFO</span>
</code></pre></div>

</details>

<hr />
<h3 id="147-protocol-buffers">14.7 Protocol Buffers 定義<a class="headerlink" href="#147-protocol-buffers" title="Permanent link">&para;</a></h3>
<h4 id="srcmainprotocommonproto">src/main/proto/common.proto<a class="headerlink" href="#srcmainprotocommonproto" title="Permanent link">&para;</a></h4>
<details>
<summary>コード例: common.proto</summary>

<div class="highlight"><pre><span></span><code><span class="k">syntax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;proto3&quot;</span><span class="p">;</span>

<span class="kn">package</span><span class="w"> </span><span class="nn">com</span><span class="o">.</span><span class="n">example.sales</span><span class="p">;</span>

<span class="k">option</span><span class="w"> </span><span class="na">java_package</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;com.example.sales.infrastructure.grpc.proto&quot;</span><span class="p">;</span>
<span class="k">option</span><span class="w"> </span><span class="na">java_outer_classname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;CommonProto&quot;</span><span class="p">;</span>
<span class="k">option</span><span class="w"> </span><span class="na">java_multiple_files</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>

<span class="k">import</span><span class="w"> </span><span class="s">&quot;google/protobuf/timestamp.proto&quot;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="s">&quot;google/protobuf/wrappers.proto&quot;</span><span class="p">;</span>

<span class="c1">// 共通のページネーション</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">PageRequest</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int32</span><span class="w"> </span><span class="na">page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int32</span><span class="w"> </span><span class="na">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">message</span><span class="w"> </span><span class="nc">PageInfo</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int32</span><span class="w"> </span><span class="na">page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int32</span><span class="w"> </span><span class="na">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int32</span><span class="w"> </span><span class="na">total_elements</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int32</span><span class="w"> </span><span class="na">total_pages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="na">has_next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="na">has_previous</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 共通のエラー応答</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">ErrorDetail</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="kd">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">message</span><span class="w"> </span><span class="nc">ErrorResponse</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="kd">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="k">repeated</span><span class="w"> </span><span class="n">ErrorDetail</span><span class="w"> </span><span class="na">details</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 金額型（Decimal 相当）</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">Money</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int64</span><span class="w"> </span><span class="na">units</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">      </span><span class="c1">// 整数部</span>
<span class="w">    </span><span class="kt">int32</span><span class="w"> </span><span class="na">nanos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w">      </span><span class="c1">// 小数部（10億分の1単位）</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">currency</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w">  </span><span class="c1">// 通貨コード（JPY等）</span>
<span class="p">}</span>

<span class="c1">// 日付型（Date 相当）</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">Date</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int32</span><span class="w"> </span><span class="na">year</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int32</span><span class="w"> </span><span class="na">month</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int32</span><span class="w"> </span><span class="na">day</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 監査情報</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">AuditInfo</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">google.protobuf.Timestamp</span><span class="w"> </span><span class="na">created_at</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">created_by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="n">google.protobuf.Timestamp</span><span class="w"> </span><span class="na">updated_at</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">updated_by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h4 id="srcmainprotoproductproto">src/main/proto/product.proto<a class="headerlink" href="#srcmainprotoproductproto" title="Permanent link">&para;</a></h4>
<details>
<summary>コード例: product.proto</summary>

<div class="highlight"><pre><span></span><code><span class="k">syntax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;proto3&quot;</span><span class="p">;</span>

<span class="kn">package</span><span class="w"> </span><span class="nn">com</span><span class="o">.</span><span class="n">example.sales</span><span class="p">;</span>

<span class="k">option</span><span class="w"> </span><span class="na">java_package</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;com.example.sales.infrastructure.grpc.proto&quot;</span><span class="p">;</span>
<span class="k">option</span><span class="w"> </span><span class="na">java_outer_classname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ProductProto&quot;</span><span class="p">;</span>
<span class="k">option</span><span class="w"> </span><span class="na">java_multiple_files</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>

<span class="k">import</span><span class="w"> </span><span class="s">&quot;common.proto&quot;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="s">&quot;google/protobuf/empty.proto&quot;</span><span class="p">;</span>

<span class="c1">// 商品区分</span>
<span class="kd">enum</span><span class="w"> </span><span class="n">ProductCategory</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">PRODUCT_CATEGORY_UNSPECIFIED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="na">PRODUCT_CATEGORY_GOODS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">       </span><span class="c1">// 商品</span>
<span class="w">    </span><span class="na">PRODUCT_CATEGORY_SERVICE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w">     </span><span class="c1">// サービス</span>
<span class="w">    </span><span class="na">PRODUCT_CATEGORY_SUPPLY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w">      </span><span class="c1">// 消耗品</span>
<span class="p">}</span>

<span class="c1">// 税区分</span>
<span class="kd">enum</span><span class="w"> </span><span class="n">TaxCategory</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">TAX_CATEGORY_UNSPECIFIED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="na">TAX_CATEGORY_TAXABLE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">         </span><span class="c1">// 課税</span>
<span class="w">    </span><span class="na">TAX_CATEGORY_EXEMPT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w">          </span><span class="c1">// 非課税</span>
<span class="w">    </span><span class="na">TAX_CATEGORY_REDUCED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w">         </span><span class="c1">// 軽減税率</span>
<span class="p">}</span>

<span class="c1">// 商品メッセージ</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">Product</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">product_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">           </span><span class="c1">// 商品コード</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">product_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w">           </span><span class="c1">// 商品名</span>
<span class="w">    </span><span class="n">ProductCategory</span><span class="w"> </span><span class="na">category</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w">      </span><span class="c1">// 商品区分</span>
<span class="w">    </span><span class="n">TaxCategory</span><span class="w"> </span><span class="na">tax_category</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span><span class="w">      </span><span class="c1">// 税区分</span>
<span class="w">    </span><span class="n">Money</span><span class="w"> </span><span class="na">standard_price</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w">          </span><span class="c1">// 標準単価</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">product_group_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span><span class="w">     </span><span class="c1">// 商品分類コード</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">unit_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="p">;</span><span class="w">              </span><span class="c1">// 単位コード</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="na">is_active</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span><span class="w">                </span><span class="c1">// 有効フラグ</span>
<span class="w">    </span><span class="n">AuditInfo</span><span class="w"> </span><span class="na">audit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">9</span><span class="p">;</span><span class="w">               </span><span class="c1">// 監査情報</span>
<span class="p">}</span>

<span class="c1">// === リクエスト/レスポンス ===</span>

<span class="c1">// 商品取得</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">GetProductRequest</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">product_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">message</span><span class="w"> </span><span class="nc">GetProductResponse</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Product</span><span class="w"> </span><span class="na">product</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 商品一覧取得（サーバーストリーミング）</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">ListProductsRequest</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">PageRequest</span><span class="w"> </span><span class="na">page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="n">ProductCategory</span><span class="w"> </span><span class="na">category</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w">      </span><span class="c1">// フィルタ（オプション）</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">product_group_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w">     </span><span class="c1">// フィルタ（オプション）</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">keyword</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span><span class="w">                </span><span class="c1">// 検索キーワード</span>
<span class="p">}</span>

<span class="c1">// 商品登録</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">CreateProductRequest</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">product_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">product_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="n">ProductCategory</span><span class="w"> </span><span class="na">category</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">    </span><span class="n">TaxCategory</span><span class="w"> </span><span class="na">tax_category</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="w">    </span><span class="n">Money</span><span class="w"> </span><span class="na">standard_price</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">product_group_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">unit_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">message</span><span class="w"> </span><span class="nc">CreateProductResponse</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Product</span><span class="w"> </span><span class="na">product</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 商品一括登録（クライアントストリーミング）</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">BulkCreateProductRequest</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">CreateProductRequest</span><span class="w"> </span><span class="na">product</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">message</span><span class="w"> </span><span class="nc">BulkCreateProductResponse</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int32</span><span class="w"> </span><span class="na">success_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int32</span><span class="w"> </span><span class="na">failure_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="k">repeated</span><span class="w"> </span><span class="n">ErrorDetail</span><span class="w"> </span><span class="na">errors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// === サービス定義 ===</span>

<span class="kd">service</span><span class="w"> </span><span class="n">ProductService</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 単項 RPC</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">GetProduct</span><span class="p">(</span><span class="n">GetProductRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">GetProductResponse</span><span class="p">);</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">CreateProduct</span><span class="p">(</span><span class="n">CreateProductRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">CreateProductResponse</span><span class="p">);</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">UpdateProduct</span><span class="p">(</span><span class="n">UpdateProductRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">UpdateProductResponse</span><span class="p">);</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">DeleteProduct</span><span class="p">(</span><span class="n">DeleteProductRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">DeleteProductResponse</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// サーバーストリーミング RPC（大量データ取得）</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">ListProducts</span><span class="p">(</span><span class="n">ListProductsRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">stream</span><span class="w"> </span><span class="n">Product</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// クライアントストリーミング RPC（一括登録）</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">BulkCreateProducts</span><span class="p">(</span><span class="n">stream</span><span class="w"> </span><span class="n">BulkCreateProductRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">BulkCreateProductResponse</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h3 id="148-grpc">14.8 gRPC サービス実装<a class="headerlink" href="#148-grpc" title="Permanent link">&para;</a></h3>
<h4 id="grpcproductservicejava">GrpcProductService.java<a class="headerlink" href="#grpcproductservicejava" title="Permanent link">&para;</a></h4>
<details>
<summary>コード例: GrpcProductService.java</summary>

<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.sales.infrastructure.grpc.service</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sales.application.port.in.ProductUseCase</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sales.domain.model.product.Product</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sales.domain.model.product.ProductCode</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sales.infrastructure.grpc.converter.ProductConverter</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sales.infrastructure.grpc.proto.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">io.grpc.stub.StreamObserver</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">net.devh.boot.grpc.server.service.GrpcService</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.slf4j.Logger</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.slf4j.LoggerFactory</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.concurrent.atomic.AtomicInteger</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 商品 gRPC サービス実装</span>
<span class="cm"> */</span>
<span class="nd">@GrpcService</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">GrpcProductService</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">ProductServiceGrpc</span><span class="p">.</span><span class="na">ProductServiceImplBase</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Logger</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LoggerFactory</span><span class="p">.</span><span class="na">getLogger</span><span class="p">(</span><span class="n">GrpcProductService</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">ProductUseCase</span><span class="w"> </span><span class="n">productUseCase</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">ProductConverter</span><span class="w"> </span><span class="n">converter</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">GrpcProductService</span><span class="p">(</span><span class="n">ProductUseCase</span><span class="w"> </span><span class="n">productUseCase</span><span class="p">,</span><span class="w"> </span><span class="n">ProductConverter</span><span class="w"> </span><span class="n">converter</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">productUseCase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">productUseCase</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">converter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">converter</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 単項 RPC: 商品取得</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">getProduct</span><span class="p">(</span><span class="n">GetProductRequest</span><span class="w"> </span><span class="n">request</span><span class="p">,</span>
<span class="w">                           </span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">GetProductResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="n">responseObserver</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;getProduct: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getProductCode</span><span class="p">());</span>

<span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">ProductCode</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ProductCode</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getProductCode</span><span class="p">());</span>
<span class="w">            </span><span class="n">Product</span><span class="w"> </span><span class="n">product</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">productUseCase</span><span class="p">.</span><span class="na">findByCode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">orElseThrow</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ProductNotFoundException</span><span class="p">(</span><span class="n">code</span><span class="p">));</span>

<span class="w">            </span><span class="n">GetProductResponse</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetProductResponse</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">setProduct</span><span class="p">(</span><span class="n">converter</span><span class="p">.</span><span class="na">toProto</span><span class="p">(</span><span class="n">product</span><span class="p">))</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">            </span><span class="n">responseObserver</span><span class="p">.</span><span class="na">onNext</span><span class="p">(</span><span class="n">response</span><span class="p">);</span>
<span class="w">            </span><span class="n">responseObserver</span><span class="p">.</span><span class="na">onCompleted</span><span class="p">();</span>

<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">ProductNotFoundException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">log</span><span class="p">.</span><span class="na">warn</span><span class="p">(</span><span class="s">&quot;Product not found: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getProductCode</span><span class="p">());</span>
<span class="w">            </span><span class="n">responseObserver</span><span class="p">.</span><span class="na">onError</span><span class="p">(</span>
<span class="w">                </span><span class="n">io</span><span class="p">.</span><span class="na">grpc</span><span class="p">.</span><span class="na">Status</span><span class="p">.</span><span class="na">NOT_FOUND</span>
<span class="w">                    </span><span class="p">.</span><span class="na">withDescription</span><span class="p">(</span><span class="s">&quot;商品が見つかりません: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getProductCode</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">asRuntimeException</span><span class="p">()</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">log</span><span class="p">.</span><span class="na">error</span><span class="p">(</span><span class="s">&quot;Error getting product&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">);</span>
<span class="w">            </span><span class="n">responseObserver</span><span class="p">.</span><span class="na">onError</span><span class="p">(</span>
<span class="w">                </span><span class="n">io</span><span class="p">.</span><span class="na">grpc</span><span class="p">.</span><span class="na">Status</span><span class="p">.</span><span class="na">INTERNAL</span>
<span class="w">                    </span><span class="p">.</span><span class="na">withDescription</span><span class="p">(</span><span class="s">&quot;内部エラーが発生しました&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">withCause</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">asRuntimeException</span><span class="p">()</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * サーバーストリーミング RPC: 商品一覧取得</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">listProducts</span><span class="p">(</span><span class="n">ListProductsRequest</span><span class="w"> </span><span class="n">request</span><span class="p">,</span>
<span class="w">                             </span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">Product</span><span class="o">&gt;</span><span class="w"> </span><span class="n">responseObserver</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;listProducts: category={}, keyword={}&quot;</span><span class="p">,</span>
<span class="w">                 </span><span class="n">request</span><span class="p">.</span><span class="na">getCategory</span><span class="p">(),</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getKeyword</span><span class="p">());</span>

<span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Product</span><span class="o">&gt;</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">productUseCase</span><span class="p">.</span><span class="na">findAll</span><span class="p">(</span>
<span class="w">                </span><span class="n">converter</span><span class="p">.</span><span class="na">toCriteria</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="w">            </span><span class="p">);</span>

<span class="w">            </span><span class="c1">// ストリーミングで商品を1件ずつ送信</span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Product</span><span class="w"> </span><span class="n">product</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">products</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">responseObserver</span><span class="p">.</span><span class="na">onNext</span><span class="p">(</span><span class="n">converter</span><span class="p">.</span><span class="na">toProto</span><span class="p">(</span><span class="n">product</span><span class="p">));</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="n">responseObserver</span><span class="p">.</span><span class="na">onCompleted</span><span class="p">();</span>
<span class="w">            </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;listProducts completed: {} items&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">products</span><span class="p">.</span><span class="na">size</span><span class="p">());</span>

<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">log</span><span class="p">.</span><span class="na">error</span><span class="p">(</span><span class="s">&quot;Error listing products&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">);</span>
<span class="w">            </span><span class="n">responseObserver</span><span class="p">.</span><span class="na">onError</span><span class="p">(</span>
<span class="w">                </span><span class="n">io</span><span class="p">.</span><span class="na">grpc</span><span class="p">.</span><span class="na">Status</span><span class="p">.</span><span class="na">INTERNAL</span>
<span class="w">                    </span><span class="p">.</span><span class="na">withDescription</span><span class="p">(</span><span class="s">&quot;内部エラーが発生しました&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">asRuntimeException</span><span class="p">()</span>
<span class="w">            </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * クライアントストリーミング RPC: 商品一括登録</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">BulkCreateProductRequest</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">bulkCreateProducts</span><span class="p">(</span>
<span class="w">            </span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">BulkCreateProductResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="n">responseObserver</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;bulkCreateProducts: started&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="n">AtomicInteger</span><span class="w"> </span><span class="n">successCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AtomicInteger</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">        </span><span class="n">AtomicInteger</span><span class="w"> </span><span class="n">failureCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AtomicInteger</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">ErrorDetail</span><span class="o">&gt;</span><span class="w"> </span><span class="n">errors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">BulkCreateProductRequest</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nd">@Override</span>
<span class="w">            </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onNext</span><span class="p">(</span><span class="n">BulkCreateProductRequest</span><span class="w"> </span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">CreateProductRequest</span><span class="w"> </span><span class="n">productRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getProduct</span><span class="p">();</span>
<span class="w">                    </span><span class="n">Product</span><span class="w"> </span><span class="n">product</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">converter</span><span class="p">.</span><span class="na">toDomain</span><span class="p">(</span><span class="n">productRequest</span><span class="p">);</span>
<span class="w">                    </span><span class="n">productUseCase</span><span class="p">.</span><span class="na">create</span><span class="p">(</span><span class="n">product</span><span class="p">);</span>
<span class="w">                    </span><span class="n">successCount</span><span class="p">.</span><span class="na">incrementAndGet</span><span class="p">();</span>
<span class="w">                    </span><span class="n">log</span><span class="p">.</span><span class="na">debug</span><span class="p">(</span><span class="s">&quot;Created product: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">productRequest</span><span class="p">.</span><span class="na">getProductCode</span><span class="p">());</span>

<span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">failureCount</span><span class="p">.</span><span class="na">incrementAndGet</span><span class="p">();</span>
<span class="w">                    </span><span class="n">errors</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">ErrorDetail</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">                        </span><span class="p">.</span><span class="na">setField</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getProduct</span><span class="p">().</span><span class="na">getProductCode</span><span class="p">())</span>
<span class="w">                        </span><span class="p">.</span><span class="na">setMessage</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">())</span>
<span class="w">                        </span><span class="p">.</span><span class="na">build</span><span class="p">());</span>
<span class="w">                    </span><span class="n">log</span><span class="p">.</span><span class="na">warn</span><span class="p">(</span><span class="s">&quot;Failed to create product: {}&quot;</span><span class="p">,</span>
<span class="w">                             </span><span class="n">request</span><span class="p">.</span><span class="na">getProduct</span><span class="p">().</span><span class="na">getProductCode</span><span class="p">(),</span><span class="w"> </span><span class="n">e</span><span class="p">);</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="nd">@Override</span>
<span class="w">            </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onError</span><span class="p">(</span><span class="n">Throwable</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">log</span><span class="p">.</span><span class="na">error</span><span class="p">(</span><span class="s">&quot;bulkCreateProducts error&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">t</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="nd">@Override</span>
<span class="w">            </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onCompleted</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">BulkCreateProductResponse</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BulkCreateProductResponse</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">setSuccessCount</span><span class="p">(</span><span class="n">successCount</span><span class="p">.</span><span class="na">get</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">setFailureCount</span><span class="p">(</span><span class="n">failureCount</span><span class="p">.</span><span class="na">get</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">addAllErrors</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">                </span><span class="n">responseObserver</span><span class="p">.</span><span class="na">onNext</span><span class="p">(</span><span class="n">response</span><span class="p">);</span>
<span class="w">                </span><span class="n">responseObserver</span><span class="p">.</span><span class="na">onCompleted</span><span class="p">();</span>

<span class="w">                </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;bulkCreateProducts completed: success={}, failure={}&quot;</span><span class="p">,</span>
<span class="w">                         </span><span class="n">successCount</span><span class="p">.</span><span class="na">get</span><span class="p">(),</span><span class="w"> </span><span class="n">failureCount</span><span class="p">.</span><span class="na">get</span><span class="p">());</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h3 id="149-productconverter-proto">14.9 ProductConverter（ドメイン ⇔ Proto 変換）<a class="headerlink" href="#149-productconverter-proto" title="Permanent link">&para;</a></h3>
<details>
<summary>コード例: ProductConverter.java</summary>

<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.sales.infrastructure.grpc.converter</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sales.domain.model.product.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sales.infrastructure.grpc.proto.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Component</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 商品ドメインモデル ⇔ Protocol Buffers 変換</span>
<span class="cm"> */</span>
<span class="nd">@Component</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ProductConverter</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * ドメインモデル → Proto</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">com</span><span class="p">.</span><span class="na">example</span><span class="p">.</span><span class="na">sales</span><span class="p">.</span><span class="na">infrastructure</span><span class="p">.</span><span class="na">grpc</span><span class="p">.</span><span class="na">proto</span><span class="p">.</span><span class="na">Product</span><span class="w"> </span><span class="nf">toProto</span><span class="p">(</span><span class="n">Product</span><span class="w"> </span><span class="n">domain</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">com</span><span class="p">.</span><span class="na">example</span><span class="p">.</span><span class="na">sales</span><span class="p">.</span><span class="na">infrastructure</span><span class="p">.</span><span class="na">grpc</span><span class="p">.</span><span class="na">proto</span><span class="p">.</span><span class="na">Product</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">setProductCode</span><span class="p">(</span><span class="n">domain</span><span class="p">.</span><span class="na">getProductCode</span><span class="p">().</span><span class="na">getValue</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">setProductName</span><span class="p">(</span><span class="n">domain</span><span class="p">.</span><span class="na">getProductName</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">setCategory</span><span class="p">(</span><span class="n">toProtoCategory</span><span class="p">(</span><span class="n">domain</span><span class="p">.</span><span class="na">getCategory</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">setTaxCategory</span><span class="p">(</span><span class="n">toProtoTaxCategory</span><span class="p">(</span><span class="n">domain</span><span class="p">.</span><span class="na">getTaxCategory</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">setStandardPrice</span><span class="p">(</span><span class="n">toProtoMoney</span><span class="p">(</span><span class="n">domain</span><span class="p">.</span><span class="na">getStandardPrice</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">setProductGroupCode</span><span class="p">(</span><span class="n">nullToEmpty</span><span class="p">(</span><span class="n">domain</span><span class="p">.</span><span class="na">getProductGroupCode</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">setUnitCode</span><span class="p">(</span><span class="n">nullToEmpty</span><span class="p">(</span><span class="n">domain</span><span class="p">.</span><span class="na">getUnitCode</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">setIsActive</span><span class="p">(</span><span class="n">domain</span><span class="p">.</span><span class="na">isActive</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * CreateProductRequest → ドメインモデル</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Product</span><span class="w"> </span><span class="nf">toDomain</span><span class="p">(</span><span class="n">CreateProductRequest</span><span class="w"> </span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Product</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">productCode</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ProductCode</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getProductCode</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">productName</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getProductName</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">category</span><span class="p">(</span><span class="n">toDomainCategory</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getCategory</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">taxCategory</span><span class="p">(</span><span class="n">toDomainTaxCategory</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getTaxCategory</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">standardPrice</span><span class="p">(</span><span class="n">fromProtoMoney</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getStandardPrice</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">productGroupCode</span><span class="p">(</span><span class="n">emptyToNull</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getProductGroupCode</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">unitCode</span><span class="p">(</span><span class="n">emptyToNull</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getUnitCode</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">isActive</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// === 区分変換 ===</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ProductCategory</span><span class="w"> </span><span class="nf">toProtoCategory</span><span class="p">(</span>
<span class="w">            </span><span class="n">com</span><span class="p">.</span><span class="na">example</span><span class="p">.</span><span class="na">sales</span><span class="p">.</span><span class="na">domain</span><span class="p">.</span><span class="na">model</span><span class="p">.</span><span class="na">product</span><span class="p">.</span><span class="na">ProductCategory</span><span class="w"> </span><span class="n">domain</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">domain</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">GOODS</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">ProductCategory</span><span class="p">.</span><span class="na">PRODUCT_CATEGORY_GOODS</span><span class="p">;</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">SERVICE</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">ProductCategory</span><span class="p">.</span><span class="na">PRODUCT_CATEGORY_SERVICE</span><span class="p">;</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">SUPPLY</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">ProductCategory</span><span class="p">.</span><span class="na">PRODUCT_CATEGORY_SUPPLY</span><span class="p">;</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// === Money 変換 ===</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Money</span><span class="w"> </span><span class="nf">toProtoMoney</span><span class="p">(</span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">amount</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">amount</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">Money</span><span class="p">.</span><span class="na">getDefaultInstance</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="kt">long</span><span class="w"> </span><span class="n">units</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">amount</span><span class="p">.</span><span class="na">longValue</span><span class="p">();</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">nanos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">amount</span><span class="p">.</span><span class="na">remainder</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ONE</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">multiply</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="mi">1_000_000_000</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">intValue</span><span class="p">();</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Money</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">setUnits</span><span class="p">(</span><span class="n">units</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">setNanos</span><span class="p">(</span><span class="n">nanos</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">setCurrency</span><span class="p">(</span><span class="s">&quot;JPY&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="nf">fromProtoMoney</span><span class="p">(</span><span class="n">Money</span><span class="w"> </span><span class="n">money</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">money</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">money</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">Money</span><span class="p">.</span><span class="na">getDefaultInstance</span><span class="p">()))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">money</span><span class="p">.</span><span class="na">getUnits</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">money</span><span class="p">.</span><span class="na">getNanos</span><span class="p">(),</span><span class="w"> </span><span class="mi">9</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// === ユーティリティ ===</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">nullToEmpty</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">emptyToNull</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">()</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h3 id="1410-grpc">14.10 gRPC インターセプター<a class="headerlink" href="#1410-grpc" title="Permanent link">&para;</a></h3>
<h4 id="logginginterceptorjava">LoggingInterceptor.java<a class="headerlink" href="#logginginterceptorjava" title="Permanent link">&para;</a></h4>
<details>
<summary>コード例: LoggingInterceptor.java</summary>

<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.sales.infrastructure.grpc.interceptor</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">io.grpc.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">net.devh.boot.grpc.server.interceptor.GrpcGlobalServerInterceptor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.slf4j.Logger</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.slf4j.LoggerFactory</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.slf4j.MDC</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.UUID</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * gRPC ログインターセプター</span>
<span class="cm"> */</span>
<span class="nd">@GrpcGlobalServerInterceptor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">LoggingInterceptor</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">ServerInterceptor</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Logger</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LoggerFactory</span><span class="p">.</span><span class="na">getLogger</span><span class="p">(</span><span class="n">LoggingInterceptor</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="o">&lt;</span><span class="n">ReqT</span><span class="p">,</span><span class="w"> </span><span class="n">RespT</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ServerCall</span><span class="p">.</span><span class="na">Listener</span><span class="o">&lt;</span><span class="n">ReqT</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">interceptCall</span><span class="p">(</span>
<span class="w">            </span><span class="n">ServerCall</span><span class="o">&lt;</span><span class="n">ReqT</span><span class="p">,</span><span class="w"> </span><span class="n">RespT</span><span class="o">&gt;</span><span class="w"> </span><span class="n">call</span><span class="p">,</span>
<span class="w">            </span><span class="n">Metadata</span><span class="w"> </span><span class="n">headers</span><span class="p">,</span>
<span class="w">            </span><span class="n">ServerCallHandler</span><span class="o">&lt;</span><span class="n">ReqT</span><span class="p">,</span><span class="w"> </span><span class="n">RespT</span><span class="o">&gt;</span><span class="w"> </span><span class="n">next</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">requestId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UUID</span><span class="p">.</span><span class="na">randomUUID</span><span class="p">().</span><span class="na">toString</span><span class="p">().</span><span class="na">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">);</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">methodName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">call</span><span class="p">.</span><span class="na">getMethodDescriptor</span><span class="p">().</span><span class="na">getFullMethodName</span><span class="p">();</span>
<span class="w">        </span><span class="kt">long</span><span class="w"> </span><span class="n">startTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">currentTimeMillis</span><span class="p">();</span>

<span class="w">        </span><span class="n">MDC</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;requestId&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">requestId</span><span class="p">);</span>
<span class="w">        </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;gRPC Request started: method={}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">methodName</span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ForwardingServerCallListener</span><span class="p">.</span><span class="na">SimpleForwardingServerCallListener</span><span class="o">&lt;&gt;</span><span class="p">(</span>
<span class="w">                </span><span class="n">next</span><span class="p">.</span><span class="na">startCall</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ForwardingServerCall</span><span class="p">.</span><span class="na">SimpleForwardingServerCall</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="n">call</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nd">@Override</span>
<span class="w">                    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="n">Status</span><span class="w"> </span><span class="n">status</span><span class="p">,</span><span class="w"> </span><span class="n">Metadata</span><span class="w"> </span><span class="n">trailers</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="kt">long</span><span class="w"> </span><span class="n">duration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">currentTimeMillis</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">startTime</span><span class="p">;</span>
<span class="w">                        </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;gRPC Request completed: method={}, status={}, duration={}ms&quot;</span><span class="p">,</span>
<span class="w">                                 </span><span class="n">methodName</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="p">.</span><span class="na">getCode</span><span class="p">(),</span><span class="w"> </span><span class="n">duration</span><span class="p">);</span>
<span class="w">                        </span><span class="n">MDC</span><span class="p">.</span><span class="na">remove</span><span class="p">(</span><span class="s">&quot;requestId&quot;</span><span class="p">);</span>
<span class="w">                        </span><span class="kd">super</span><span class="p">.</span><span class="na">close</span><span class="p">(</span><span class="n">status</span><span class="p">,</span><span class="w"> </span><span class="n">trailers</span><span class="p">);</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">},</span><span class="w"> </span><span class="n">headers</span><span class="p">))</span><span class="w"> </span><span class="p">{};</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h3 id="1411-grpcurl">14.11 grpcurl による動作確認<a class="headerlink" href="#1411-grpcurl" title="Permanent link">&para;</a></h3>
<details>
<summary>コード例: grpcurl コマンド</summary>

<div class="highlight"><pre><span></span><code><span class="c1"># サービス一覧取得</span>
grpcurl<span class="w"> </span>-plaintext<span class="w"> </span>localhost:9090<span class="w"> </span>list

<span class="c1"># メソッド一覧取得</span>
grpcurl<span class="w"> </span>-plaintext<span class="w"> </span>localhost:9090<span class="w"> </span>list<span class="w"> </span>com.example.sales.ProductService

<span class="c1"># 商品取得（単項 RPC）</span>
grpcurl<span class="w"> </span>-plaintext<span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;product_code&quot;: &quot;PRD001&quot;}&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>localhost:9090<span class="w"> </span>com.example.sales.ProductService/GetProduct

<span class="c1"># 商品一覧取得（サーバーストリーミング）</span>
grpcurl<span class="w"> </span>-plaintext<span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;page&quot;: {&quot;page&quot;: 0, &quot;size&quot;: 10}}&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>localhost:9090<span class="w"> </span>com.example.sales.ProductService/ListProducts

<span class="c1"># 商品登録</span>
grpcurl<span class="w"> </span>-plaintext<span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">  &quot;product_code&quot;: &quot;PRD100&quot;,</span>
<span class="s1">  &quot;product_name&quot;: &quot;新商品&quot;,</span>
<span class="s1">  &quot;category&quot;: &quot;PRODUCT_CATEGORY_GOODS&quot;,</span>
<span class="s1">  &quot;tax_category&quot;: &quot;TAX_CATEGORY_TAXABLE&quot;,</span>
<span class="s1">  &quot;standard_price&quot;: {&quot;units&quot;: 1000, &quot;currency&quot;: &quot;JPY&quot;}</span>
<span class="s1">}&#39;</span><span class="w"> </span>localhost:9090<span class="w"> </span>com.example.sales.ProductService/CreateProduct
</code></pre></div>

</details>

<hr />
<h2 id="15-api">第15章：マスタ API の実装<a class="headerlink" href="#15-api" title="Permanent link">&para;</a></h2>
<h3 id="151-api">15.1 商品マスタ API の詳細設計<a class="headerlink" href="#151-api" title="Permanent link">&para;</a></h3>
<p>第14章で基礎を学んだ gRPC サービスを、商品・取引先・倉庫マスタに対して拡張します。</p>
<p><strong>商品マスタ API の機能一覧：</strong></p>
<table>
<thead>
<tr>
<th>メソッド</th>
<th>RPC パターン</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>GetProduct</td>
<td>単項</td>
<td>商品コードで取得</td>
</tr>
<tr>
<td>CreateProduct</td>
<td>単項</td>
<td>商品登録</td>
</tr>
<tr>
<td>UpdateProduct</td>
<td>単項</td>
<td>商品更新</td>
</tr>
<tr>
<td>DeleteProduct</td>
<td>単項</td>
<td>商品削除（論理削除）</td>
</tr>
<tr>
<td>ListProducts</td>
<td>サーバーストリーミング</td>
<td>商品一覧取得</td>
</tr>
<tr>
<td>BulkCreateProducts</td>
<td>クライアントストリーミング</td>
<td>一括登録</td>
</tr>
<tr>
<td>BulkUpdateProducts</td>
<td>クライアントストリーミング</td>
<td>一括更新</td>
</tr>
<tr>
<td>CheckProductExists</td>
<td>単項</td>
<td>存在チェック</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="152-api">15.2 取引先マスタ API の実装<a class="headerlink" href="#152-api" title="Permanent link">&para;</a></h3>
<h4 id="srcmainprotopartnerproto">src/main/proto/partner.proto<a class="headerlink" href="#srcmainprotopartnerproto" title="Permanent link">&para;</a></h4>
<details>
<summary>コード例: partner.proto</summary>

<div class="highlight"><pre><span></span><code><span class="k">syntax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;proto3&quot;</span><span class="p">;</span>

<span class="kn">package</span><span class="w"> </span><span class="nn">com</span><span class="o">.</span><span class="n">example.sales</span><span class="p">;</span>

<span class="k">option</span><span class="w"> </span><span class="na">java_package</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;com.example.sales.infrastructure.grpc.proto&quot;</span><span class="p">;</span>
<span class="k">option</span><span class="w"> </span><span class="na">java_outer_classname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;PartnerProto&quot;</span><span class="p">;</span>
<span class="k">option</span><span class="w"> </span><span class="na">java_multiple_files</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>

<span class="k">import</span><span class="w"> </span><span class="s">&quot;common.proto&quot;</span><span class="p">;</span>

<span class="c1">// 取引先区分</span>
<span class="kd">enum</span><span class="w"> </span><span class="n">PartnerType</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">PARTNER_TYPE_UNSPECIFIED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="na">PARTNER_TYPE_CUSTOMER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">        </span><span class="c1">// 顧客</span>
<span class="w">    </span><span class="na">PARTNER_TYPE_SUPPLIER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w">        </span><span class="c1">// 仕入先</span>
<span class="w">    </span><span class="na">PARTNER_TYPE_BOTH</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w">            </span><span class="c1">// 顧客兼仕入先</span>
<span class="p">}</span>

<span class="c1">// 取引先ステータス</span>
<span class="kd">enum</span><span class="w"> </span><span class="n">PartnerStatus</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">PARTNER_STATUS_UNSPECIFIED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="na">PARTNER_STATUS_ACTIVE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">        </span><span class="c1">// 取引中</span>
<span class="w">    </span><span class="na">PARTNER_STATUS_SUSPENDED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w">     </span><span class="c1">// 取引停止</span>
<span class="w">    </span><span class="na">PARTNER_STATUS_CLOSED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w">        </span><span class="c1">// 取引終了</span>
<span class="p">}</span>

<span class="c1">// 取引先メッセージ</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">Partner</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">partner_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">partner_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">partner_name_kana</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">    </span><span class="n">PartnerType</span><span class="w"> </span><span class="na">partner_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="w">    </span><span class="n">PartnerStatus</span><span class="w"> </span><span class="na">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="w">    </span><span class="n">Address</span><span class="w"> </span><span class="na">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span>
<span class="w">    </span><span class="n">Contact</span><span class="w"> </span><span class="na">contact</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="p">;</span>
<span class="w">    </span><span class="n">CustomerInfo</span><span class="w"> </span><span class="na">customer_info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span><span class="w">    </span><span class="c1">// 顧客情報（顧客の場合）</span>
<span class="w">    </span><span class="n">SupplierInfo</span><span class="w"> </span><span class="na">supplier_info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">9</span><span class="p">;</span><span class="w">    </span><span class="c1">// 仕入先情報（仕入先の場合）</span>
<span class="w">    </span><span class="n">AuditInfo</span><span class="w"> </span><span class="na">audit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 与信チェック</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">CheckCreditRequest</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">partner_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="n">Money</span><span class="w"> </span><span class="na">amount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w">                  </span><span class="c1">// チェック金額</span>
<span class="p">}</span>

<span class="kd">message</span><span class="w"> </span><span class="nc">CheckCreditResponse</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="na">is_within_limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">          </span><span class="c1">// 限度内か</span>
<span class="w">    </span><span class="n">Money</span><span class="w"> </span><span class="na">credit_limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w">            </span><span class="c1">// 与信限度額</span>
<span class="w">    </span><span class="n">Money</span><span class="w"> </span><span class="na">current_receivable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w">      </span><span class="c1">// 現在売掛金残高</span>
<span class="w">    </span><span class="n">Money</span><span class="w"> </span><span class="na">available_credit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span><span class="w">        </span><span class="c1">// 利用可能与信額</span>
<span class="p">}</span>

<span class="c1">// === サービス定義 ===</span>

<span class="kd">service</span><span class="w"> </span><span class="n">PartnerService</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 単項 RPC</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">GetPartner</span><span class="p">(</span><span class="n">GetPartnerRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">GetPartnerResponse</span><span class="p">);</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">CreatePartner</span><span class="p">(</span><span class="n">CreatePartnerRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">CreatePartnerResponse</span><span class="p">);</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">CheckCredit</span><span class="p">(</span><span class="n">CheckCreditRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">CheckCreditResponse</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// サーバーストリーミング RPC</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">ListPartners</span><span class="p">(</span><span class="n">ListPartnersRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">stream</span><span class="w"> </span><span class="n">Partner</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h3 id="153">15.3 テスト実装<a class="headerlink" href="#153" title="Permanent link">&para;</a></h3>
<details>
<summary>コード例: GrpcProductServiceTest.java</summary>

<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span><span class="p">(</span><span class="n">webEnvironment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SpringBootTest</span><span class="p">.</span><span class="na">WebEnvironment</span><span class="p">.</span><span class="na">DEFINED_PORT</span><span class="p">)</span>
<span class="nd">@ActiveProfiles</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">GrpcProductServiceTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ManagedChannel</span><span class="w"> </span><span class="n">channel</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ProductServiceGrpc</span><span class="p">.</span><span class="na">ProductServiceBlockingStub</span><span class="w"> </span><span class="n">blockingStub</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ProductServiceGrpc</span><span class="p">.</span><span class="na">ProductServiceStub</span><span class="w"> </span><span class="n">asyncStub</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@BeforeEach</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setUp</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">channel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ManagedChannelBuilder</span><span class="p">.</span><span class="na">forAddress</span><span class="p">(</span><span class="s">&quot;localhost&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">9999</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">usePlaintext</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">        </span><span class="n">blockingStub</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ProductServiceGrpc</span><span class="p">.</span><span class="na">newBlockingStub</span><span class="p">(</span><span class="n">channel</span><span class="p">);</span>
<span class="w">        </span><span class="n">asyncStub</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ProductServiceGrpc</span><span class="p">.</span><span class="na">newStub</span><span class="p">(</span><span class="n">channel</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@AfterEach</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">tearDown</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">channel</span><span class="p">.</span><span class="na">shutdownNow</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;商品の CRUD 操作が正常に動作すること&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">productCrud</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 登録</span>
<span class="w">        </span><span class="n">CreateProductResponse</span><span class="w"> </span><span class="n">createResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">blockingStub</span><span class="p">.</span><span class="na">createProduct</span><span class="p">(</span>
<span class="w">            </span><span class="n">CreateProductRequest</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">setProductCode</span><span class="p">(</span><span class="s">&quot;PRD999&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">setProductName</span><span class="p">(</span><span class="s">&quot;テスト商品&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">setCategory</span><span class="p">(</span><span class="n">ProductCategory</span><span class="p">.</span><span class="na">PRODUCT_CATEGORY_GOODS</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">setTaxCategory</span><span class="p">(</span><span class="n">TaxCategory</span><span class="p">.</span><span class="na">TAX_CATEGORY_TAXABLE</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">setStandardPrice</span><span class="p">(</span><span class="n">Money</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">().</span><span class="na">setUnits</span><span class="p">(</span><span class="mi">1000</span><span class="p">).</span><span class="na">setCurrency</span><span class="p">(</span><span class="s">&quot;JPY&quot;</span><span class="p">))</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">createResponse</span><span class="p">.</span><span class="na">getProduct</span><span class="p">().</span><span class="na">getProductCode</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;PRD999&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// 取得</span>
<span class="w">        </span><span class="n">GetProductResponse</span><span class="w"> </span><span class="n">getResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">blockingStub</span><span class="p">.</span><span class="na">getProduct</span><span class="p">(</span>
<span class="w">            </span><span class="n">GetProductRequest</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">setProductCode</span><span class="p">(</span><span class="s">&quot;PRD999&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">getResponse</span><span class="p">.</span><span class="na">getProduct</span><span class="p">().</span><span class="na">getProductName</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;テスト商品&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;サーバーストリーミングで商品一覧を取得できること&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">listProductsStreaming</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">InterruptedException</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">CountDownLatch</span><span class="w"> </span><span class="n">latch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CountDownLatch</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Product</span><span class="o">&gt;</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>

<span class="w">        </span><span class="n">asyncStub</span><span class="p">.</span><span class="na">listProducts</span><span class="p">(</span>
<span class="w">            </span><span class="n">ListProductsRequest</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">setPage</span><span class="p">(</span><span class="n">PageRequest</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">().</span><span class="na">setPage</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="na">setSize</span><span class="p">(</span><span class="mi">100</span><span class="p">).</span><span class="na">build</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">(),</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">StreamObserver</span><span class="o">&lt;&gt;</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nd">@Override</span>
<span class="w">                </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onNext</span><span class="p">(</span><span class="n">Product</span><span class="w"> </span><span class="n">product</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">products</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">product</span><span class="p">);</span>
<span class="w">                </span><span class="p">}</span>

<span class="w">                </span><span class="nd">@Override</span>
<span class="w">                </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onError</span><span class="p">(</span><span class="n">Throwable</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">latch</span><span class="p">.</span><span class="na">countDown</span><span class="p">();</span>
<span class="w">                </span><span class="p">}</span>

<span class="w">                </span><span class="nd">@Override</span>
<span class="w">                </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onCompleted</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">latch</span><span class="p">.</span><span class="na">countDown</span><span class="p">();</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="n">latch</span><span class="p">.</span><span class="na">await</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">TimeUnit</span><span class="p">.</span><span class="na">SECONDS</span><span class="p">);</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">products</span><span class="p">).</span><span class="na">isNotEmpty</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h2 id="16-api">第16章：トランザクション API の実装<a class="headerlink" href="#16-api" title="Permanent link">&para;</a></h2>
<h3 id="161-api">16.1 トランザクション API の設計方針<a class="headerlink" href="#161-api" title="Permanent link">&para;</a></h3>
<h4 id="rpc">RPC パターンの使い分け<a class="headerlink" href="#rpc" title="Permanent link">&para;</a></h4>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjI2MXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MTIwMXB4O2hlaWdodDoyNjFweDtiYWNrZ3JvdW5kOiNGRUZFRkU7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxMjAxIDI2MSIgd2lkdGg9IjEyMDFweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjxyZWN0IGZpbGw9IiNGRUZFRkUiIGhlaWdodD0iMjYxIiBzdHlsZT0ic3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTIwMSIgeD0iMCIgeT0iMCIvPjwhLS1jbHVzdGVyIFRyYW5zYWN0aW9uIEFQSSAtIFJQQyBQYXR0ZXJucy0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0iVHJhbnNhY3Rpb24gQVBJIC0gUlBDIFBhdHRlcm5zIiBkYXRhLXNvdXJjZS1saW5lPSI1IiBkYXRhLXVpZD0iZW50MDAwMiIgaWQ9ImNsdXN0ZXJfVHJhbnNhY3Rpb24gQVBJIC0gUlBDIFBhdHRlcm5zIj48cGF0aCBkPSJNOC41LDYgTDI1My4yNDIyLDYgQTMuNzUsMy43NSAwIDAgMSAyNTUuNzQyMiw4LjUgTDI2Mi43NDIyLDI4LjI5NjkgTDExOTEuNSwyOC4yOTY5IEEyLjUsMi41IDAgMCAxIDExOTQsMzAuNzk2OSBMMTE5NCwxNjcuNjggQTIuNSwyLjUgMCAwIDEgMTE5MS41LDE3MC4xOCBMOC41LDE3MC4xOCBBMi41LDIuNSAwIDAgMSA2LDE2Ny42OCBMNiw4LjUgQTIuNSwyLjUgMCAwIDEgOC41LDYiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjYiIHgyPSIyNjIuNzQyMiIgeTE9IjI4LjI5NjkiIHkyPSIyOC4yOTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI0My43NDIyIiB4PSIxMCIgeT0iMjAuOTk1MSI+VHJhbnNhY3Rpb24gQVBJIC0gUlBDIFBhdHRlcm5zPC90ZXh0PjwvZz48IS0tY2xhc3MgdW5hcnktLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0idW5hcnkiIGRhdGEtc291cmNlLWxpbmU9IjciIGRhdGEtdWlkPSJlbnQwMDAzIiBpZD0iZW50aXR5X3VuYXJ5Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjExMy4xODc1IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIyMzkuNDU4NCIgeD0iMjIuMjciIHk9IjQxIi8+PGVsbGlwc2UgY3g9IjEwNy41NTE1IiBjeT0iNTciIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTExMC41MjAzLDYyLjY0MDYgUTEwOS45NDIxLDYyLjkzNzUgMTA5LjMwMTUsNjMuMDc4MSBRMTA4LjY2MDksNjMuMjM0NCAxMDcuOTU3OCw2My4yMzQ0IFExMDUuNDU3OCw2My4yMzQ0IDEwNC4xMjk2LDYxLjU5MzggUTEwMi44MTcxLDU5LjkzNzUgMTAyLjgxNzEsNTYuODEyNSBRMTAyLjgxNzEsNTMuNjg3NSAxMDQuMTI5Niw1Mi4wMzEzIFExMDUuNDU3OCw1MC4zNzUgMTA3Ljk1NzgsNTAuMzc1IFExMDguNjYwOSw1MC4zNzUgMTA5LjMwMTUsNTAuNTMxMyBRMTA5Ljk1NzgsNTAuNjg3NSAxMTAuNTIwMyw1MC45ODQ0IEwxMTAuNTIwMyw1My43MDMxIFExMDkuODk1Myw1My4xMjUgMTA5LjMwMTUsNTIuODU5NCBRMTA4LjcwNzgsNTIuNTc4MSAxMDguMDgyOCw1Mi41NzgxIFExMDYuNzM5LDUyLjU3ODEgMTA2LjA1MTUsNTMuNjU2MyBRMTA1LjM2NCw1NC43MTg4IDEwNS4zNjQsNTYuODEyNSBRMTA1LjM2NCw1OC45MDYzIDEwNi4wNTE1LDU5Ljk4NDQgUTEwNi43MzksNjEuMDQ2OSAxMDguMDgyOCw2MS4wNDY5IFExMDguNzA3OCw2MS4wNDY5IDEwOS4zMDE1LDYwLjc4MTMgUTEwOS44OTUzLDYwLjUgMTEwLjUyMDMsNTkuOTIxOSBMMTEwLjUyMDMsNjIuNjQwNiBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYwLjM5NTQiIHg9IjEyOC4wNTE1IiB5PSI2MS44NDY3Ij4mIzIxMzM2OyYjMzg5MTc7IFJQQzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyMy4yNyIgeDI9IjI2MC43Mjg0IiB5MT0iNzMiIHkyPSI3MyIvPjxlbGxpcHNlIGN4PSIzMy4yNyIgY3k9Ijg2LjY0ODQiIGZpbGw9Im5vbmUiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE3MC44NTcxIiB4PSI0Mi4yNyIgeT0iODkuOTk1MSI+Q3JlYXRlT3JkZXImIzY1Mjg4OyYjMjE0NjM7JiMyNzg4MDsmIzMwMzMxOyYjMzc2ODI7JiM2NTI4OTs8L3RleHQ+PGVsbGlwc2UgY3g9IjMzLjI3IiBjeT0iMTAyLjk0NTMiIGZpbGw9Im5vbmUiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0OC45ODIxIiB4PSI0Mi4yNyIgeT0iMTA2LjI5MiI+R2V0T3JkZXImIzY1Mjg4OyYjMjE0NjM7JiMyNzg4MDsmIzIxNDYyOyYjMjQ0NzE7JiM2NTI4OTs8L3RleHQ+PGVsbGlwc2UgY3g9IjMzLjI3IiBjeT0iMTE5LjI0MjIiIGZpbGw9Im5vbmUiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE3OS40NTY3IiB4PSI0Mi4yNyIgeT0iMTIyLjU4ODkiPkNvbmZpcm1PcmRlciYjNjUyODg7JiMyMTQ2MzsmIzI3ODgwOyYjMzA5MDY7JiMyMzQ1MDsmIzY1Mjg5OzwvdGV4dD48ZWxsaXBzZSBjeD0iMzMuMjciIGN5PSIxMzUuNTM5MSIgZmlsbD0ibm9uZSIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjEzLjQ1ODQiIHg9IjQyLjI3IiB5PSIxMzguODg1NyI+Q2FuY2VsT3JkZXImIzY1Mjg4OyYjMjE0NjM7JiMyNzg4MDsmIzEyNDYxOyYjMTI1MTU7JiMxMjUzMTsmIzEyNDc1OyYjMTI1MjM7JiM2NTI4OTs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMjMuMjciIHgyPSIyNjAuNzI4NCIgeTE9IjE0Ni4xODc1IiB5Mj0iMTQ2LjE4NzUiLz48L2c+PCEtLWNsYXNzIHNlcnZlcl9zdHJlYW0tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0ic2VydmVyX3N0cmVhbSIgZGF0YS1zb3VyY2UtbGluZT0iMTQiIGRhdGEtdWlkPSJlbnQwMDA0IiBpZD0iZW50aXR5X3NlcnZlcl9zdHJlYW0iPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iOTYuODkwNiIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMjg4LjcxODQiIHg9IjI5Ni42NCIgeT0iNDkuMTUiLz48ZWxsaXBzZSBjeD0iMzU5Ljc0OTUiIGN5PSI2NS4xNSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMzYyLjcxODMsNzAuNzkwNiBRMzYyLjE0MDIsNzEuMDg3NSAzNjEuNDk5NSw3MS4yMjgxIFEzNjAuODU4OSw3MS4zODQ0IDM2MC4xNTU4LDcxLjM4NDQgUTM1Ny42NTU4LDcxLjM4NDQgMzU2LjMyNzcsNjkuNzQzNyBRMzU1LjAxNTIsNjguMDg3NSAzNTUuMDE1Miw2NC45NjI1IFEzNTUuMDE1Miw2MS44Mzc1IDM1Ni4zMjc3LDYwLjE4MTIgUTM1Ny42NTU4LDU4LjUyNSAzNjAuMTU1OCw1OC41MjUgUTM2MC44NTg5LDU4LjUyNSAzNjEuNDk5NSw1OC42ODEyIFEzNjIuMTU1OCw1OC44Mzc1IDM2Mi43MTgzLDU5LjEzNDQgTDM2Mi43MTgzLDYxLjg1MzEgUTM2Mi4wOTMzLDYxLjI3NSAzNjEuNDk5NSw2MS4wMDk0IFEzNjAuOTA1OCw2MC43MjgxIDM2MC4yODA4LDYwLjcyODEgUTM1OC45MzcsNjAuNzI4MSAzNTguMjQ5NSw2MS44MDYyIFEzNTcuNTYyLDYyLjg2ODcgMzU3LjU2Miw2NC45NjI1IFEzNTcuNTYyLDY3LjA1NjIgMzU4LjI0OTUsNjguMTM0NCBRMzU4LjkzNyw2OS4xOTY5IDM2MC4yODA4LDY5LjE5NjkgUTM2MC45MDU4LDY5LjE5NjkgMzYxLjQ5OTUsNjguOTMxMiBRMzYyLjA5MzMsNjguNjUgMzYyLjcxODMsNjguMDcxOSBMMzYyLjcxODMsNzAuNzkwNiBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1My45OTkzIiB4PSIzODAuMjQ5NSIgeT0iNjkuOTk2NyI+JiMxMjQ2OTsmIzEyNTQwOyYjMTI0OTY7JiMxMjU0MDsmIzEyNDczOyYjMTI0ODg7JiMxMjUyMjsmIzEyNTQwOyYjMTI1MTE7JiMxMjUzMTsmIzEyNDY0OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyOTcuNjQiIHgyPSI1ODQuMzU4NCIgeTE9IjgxLjE1IiB5Mj0iODEuMTUiLz48ZWxsaXBzZSBjeD0iMzA3LjY0IiBjeT0iOTQuNzk4NCIgZmlsbD0ibm9uZSIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTU1Ljc5NzUiIHg9IjMxNi42NCIgeT0iOTguMTQ1MSI+TGlzdE9yZGVycyYjNjUyODg7JiMyMTQ2MzsmIzI3ODgwOyYjMTk5Njg7JiMzNTIzOTsmIzY1Mjg5OzwvdGV4dD48ZWxsaXBzZSBjeD0iMzA3LjY0IiBjeT0iMTExLjA5NTMiIGZpbGw9Im5vbmUiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI1NS4xMjM1IiB4PSIzMTYuNjQiIHk9IjExNC40NDIiPldhdGNoT3JkZXJTdGF0dXMmIzY1Mjg4OyYjMTI0NzM7JiMxMjQ4NjsmIzEyNTQwOyYjMTI0Nzk7JiMxMjQ3MzsmIzMwNDM1OyYjMzUyMjI7JiM2NTI4OTs8L3RleHQ+PGVsbGlwc2UgY3g9IjMwNy42NCIgY3k9IjEyNy4zOTIyIiBmaWxsPSJub25lIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNjIuNzE4NCIgeD0iMzE2LjY0IiB5PSIxMzAuNzM4OSI+U3RyZWFtU2hpcG1lbnRQcm9ncmVzcyYjNjUyODg7JiMyMDk4NjsmIzMzNjU1OyYjMzY5MTQ7JiMyNTQzMTsmIzY1Mjg5OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyOTcuNjQiIHgyPSI1ODQuMzU4NCIgeTE9IjEzOC4wNDA2IiB5Mj0iMTM4LjA0MDYiLz48L2c+PCEtLWNsYXNzIGNsaWVudF9zdHJlYW0tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iY2xpZW50X3N0cmVhbSIgZGF0YS1zb3VyY2UtbGluZT0iMjAiIGRhdGEtdWlkPSJlbnQwMDA1IiBpZD0iZW50aXR5X2NsaWVudF9zdHJlYW0iPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iODAuNTkzOCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMzAwLjgxNzkiIHg9IjYyMC41OSIgeT0iNTcuMjkiLz48ZWxsaXBzZSBjeD0iNjc1Ljc0OTMiIGN5PSI3My4yOSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNNjc4LjcxODEsNzguOTMwNiBRNjc4LjE0LDc5LjIyNzUgNjc3LjQ5OTMsNzkuMzY4MSBRNjc2Ljg1ODcsNzkuNTI0NCA2NzYuMTU1Niw3OS41MjQ0IFE2NzMuNjU1Niw3OS41MjQ0IDY3Mi4zMjc1LDc3Ljg4MzcgUTY3MS4wMTUsNzYuMjI3NSA2NzEuMDE1LDczLjEwMjUgUTY3MS4wMTUsNjkuOTc3NSA2NzIuMzI3NSw2OC4zMjEyIFE2NzMuNjU1Niw2Ni42NjUgNjc2LjE1NTYsNjYuNjY1IFE2NzYuODU4Nyw2Ni42NjUgNjc3LjQ5OTMsNjYuODIxMiBRNjc4LjE1NTYsNjYuOTc3NSA2NzguNzE4MSw2Ny4yNzQ0IEw2NzguNzE4MSw2OS45OTMxIFE2NzguMDkzMSw2OS40MTUgNjc3LjQ5OTMsNjkuMTQ5NCBRNjc2LjkwNTYsNjguODY4MSA2NzYuMjgwNiw2OC44NjgxIFE2NzQuOTM2OCw2OC44NjgxIDY3NC4yNDkzLDY5Ljk0NjIgUTY3My41NjE4LDcxLjAwODcgNjczLjU2MTgsNzMuMTAyNSBRNjczLjU2MTgsNzUuMTk2MiA2NzQuMjQ5Myw3Ni4yNzQ0IFE2NzQuOTM2OCw3Ny4zMzY5IDY3Ni4yODA2LDc3LjMzNjkgUTY3Ni45MDU2LDc3LjMzNjkgNjc3LjQ5OTMsNzcuMDcxMiBRNjc4LjA5MzEsNzYuNzkgNjc4LjcxODEsNzYuMjExOSBMNjc4LjcxODEsNzguOTMwNiBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE4MS45OTkyIiB4PSI2OTYuMjQ5MyIgeT0iNzguMTM2NyI+JiMxMjQ2MzsmIzEyNTIxOyYjMTI0NTI7JiMxMjQ1MDsmIzEyNTMxOyYjMTI0ODg7JiMxMjQ3MzsmIzEyNDg4OyYjMTI1MjI7JiMxMjU0MDsmIzEyNTExOyYjMTI1MzE7JiMxMjQ2NDs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iNjIxLjU5IiB4Mj0iOTIwLjQwNzkiIHkxPSI4OS4yOSIgeTI9Ijg5LjI5Ii8+PGVsbGlwc2UgY3g9IjYzMS41OSIgY3k9IjEwMi45Mzg0IiBmaWxsPSJub25lIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNTguMzkxMSIgeD0iNjQwLjU5IiB5PSIxMDYuMjg1MSI+QnVsa0FkZE9yZGVyRGV0YWlscyYjNjUyODg7JiMyNjEyNjsmIzMyMDQ4OyYjMTk5Njg7JiMyNTMyNDsmIzMwMzMxOyYjMzc2ODI7JiM2NTI4OTs8L3RleHQ+PGVsbGlwc2UgY3g9IjYzMS41OSIgY3k9IjExOS4yMzUzIiBmaWxsPSJub25lIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNzQuODE3OSIgeD0iNjQwLjU5IiB5PSIxMjIuNTgyIj5CYXRjaFNoaXBtZW50Q29uZmlybSYjNjUyODg7JiMyMDk4NjsmIzMzNjU1OyYjMTk5Njg7JiMyNTMyNDsmIzMwOTA2OyYjMjM0NTA7JiM2NTI4OTs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iNjIxLjU5IiB4Mj0iOTIwLjQwNzkiIHkxPSIxMjkuODgzOCIgeTI9IjEyOS44ODM4Ii8+PC9nPjwhLS1jbGFzcyBiaWRpcmVjdGlvbmFsLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9ImJpZGlyZWN0aW9uYWwiIGRhdGEtc291cmNlLWxpbmU9IjI1IiBkYXRhLXVpZD0iZW50MDAwNiIgaWQ9ImVudGl0eV9iaWRpcmVjdGlvbmFsIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjgwLjU5MzgiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjIyMS4wMDg0IiB4PSI5NTYuNSIgeT0iNTcuMjkiLz48ZWxsaXBzZSBjeD0iOTkzLjU1NDEiIGN5PSI3My4yOSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNOTk2LjUyMjgsNzguOTMwNiBROTk1Ljk0NDcsNzkuMjI3NSA5OTUuMzA0MSw3OS4zNjgxIFE5OTQuNjYzNCw3OS41MjQ0IDk5My45NjAzLDc5LjUyNDQgUTk5MS40NjAzLDc5LjUyNDQgOTkwLjEzMjIsNzcuODgzNyBROTg4LjgxOTcsNzYuMjI3NSA5ODguODE5Nyw3My4xMDI1IFE5ODguODE5Nyw2OS45Nzc1IDk5MC4xMzIyLDY4LjMyMTIgUTk5MS40NjAzLDY2LjY2NSA5OTMuOTYwMyw2Ni42NjUgUTk5NC42NjM0LDY2LjY2NSA5OTUuMzA0MSw2Ni44MjEyIFE5OTUuOTYwMyw2Ni45Nzc1IDk5Ni41MjI4LDY3LjI3NDQgTDk5Ni41MjI4LDY5Ljk5MzEgUTk5NS44OTc4LDY5LjQxNSA5OTUuMzA0MSw2OS4xNDk0IFE5OTQuNzEwMyw2OC44NjgxIDk5NC4wODUzLDY4Ljg2ODEgUTk5Mi43NDE2LDY4Ljg2ODEgOTkyLjA1NDEsNjkuOTQ2MiBROTkxLjM2NjYsNzEuMDA4NyA5OTEuMzY2Niw3My4xMDI1IFE5OTEuMzY2Niw3NS4xOTYyIDk5Mi4wNTQxLDc2LjI3NDQgUTk5Mi43NDE2LDc3LjMzNjkgOTk0LjA4NTMsNzcuMzM2OSBROTk0LjcxMDMsNzcuMzM2OSA5OTUuMzA0MSw3Ny4wNzEyIFE5OTUuODk3OCw3Ni43OSA5OTYuNTIyOCw3Ni4yMTE5IEw5OTYuNTIyOCw3OC45MzA2IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM5Ljk5OTQiIHg9IjEwMTIuNDU1IiB5PSI3OC4xMzY3Ij4mIzIxNDUyOyYjMjYwNDE7JiMyMTUyMTsmIzEyNDczOyYjMTI0ODg7JiMxMjUyMjsmIzEyNTQwOyYjMTI1MTE7JiMxMjUzMTsmIzEyNDY0OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI5NTcuNSIgeDI9IjExNzYuNTA4NCIgeTE9Ijg5LjI5IiB5Mj0iODkuMjkiLz48ZWxsaXBzZSBjeD0iOTY3LjUiIGN5PSIxMDIuOTM4NCIgZmlsbD0ibm9uZSIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTg0LjYxMSIgeD0iOTc2LjUiIHk9IjEwNi4yODUxIj5TeW5jSW52ZW50b3J5JiM2NTI4ODsmIzIyMzEyOyYjMjQyMzU7JiMyMTUxNjsmIzI2Mzk5OyYjNjUyODk7PC90ZXh0PjxlbGxpcHNlIGN4PSI5NjcuNSIgY3k9IjExOS4yMzUzIiBmaWxsPSJub25lIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxOTUuMDA4NCIgeD0iOTc2LjUiIHk9IjEyMi41ODIiPlByb2Nlc3NJbnZvaWNlcyYjNjUyODg7JiMzNTUzMTsmIzI3NzE0OyYjMjA5NjY7JiMyOTcwMjsmIzY1Mjg5OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI5NTcuNSIgeDI9IjExNzYuNTA4NCIgeTE9IjEyOS44ODM4IiB5Mj0iMTI5Ljg4MzgiLz48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkdNTjciIGRhdGEtc291cmNlLWxpbmU9IjMyIiBkYXRhLXVpZD0iZW50MDAwOCIgaWQ9ImVudGl0eV9HTU43Ij48cGF0aCBkPSJNNjYuNSwyMTQuMTggTDY2LjUsMjU0LjQ0NTYgQTAsMCAwIDAgMCA2Ni41LDI1NC40NDU2IEwyMTcuNTAwMiwyNTQuNDQ1NiBBMCwwIDAgMCAwIDIxNy41MDAyLDI1NC40NDU2IEwyMTcuNTAwMiwyMjQuMTggTDIwNy41MDAyLDIxNC4xOCBMMTQ2LDIxNC4xOCBMMTQyLDE1NC41NiBMMTM4LDIxNC4xOCBMNjYuNSwyMTQuMTggQTAsMCAwIDAgMCA2Ni41LDIxNC4xOCIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTIwNy41MDAyLDIxNC4xOCBMMjA3LjUwMDIsMjI0LjE4IEwyMTcuNTAwMiwyMjQuMTggTDIwNy41MDAyLDIxNC4xOCIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMwLjAwMDIiIHg9IjcyLjUiIHk9IjIzMS4yNDY5Ij4mIzIwNDkxOyYjMjEwMjk7JiMxMjQ4ODsmIzEyNTIxOyYjMTI1MzE7JiMxMjQ3MDsmIzEyNDYzOyYjMTI0NzE7JiMxMjUxOTsmIzEyNTMxOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzAuMDAwMiIgeD0iNzIuNSIgeT0iMjQ2LjM3OTciPiYjMjEzNjM7JiMyNjE3ODsmIzI0NTQwOyYjMzE1NzI7JiMxMjM2NDsmIzI0NTE3OyYjMzUyMDE7JiMxMjM5NDsmIzIwOTY2OyYjMjk3MDI7PC90ZXh0PjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iR01OMTAiIGRhdGEtc291cmNlLWxpbmU9IjM3IiBkYXRhLXVpZD0iZW50MDAxMSIgaWQ9ImVudGl0eV9HTU4xMCI+PHBhdGggZD0iTTM3OC41LDIxNC4xOCBMMzc4LjUsMjU0LjQ0NTYgQTAsMCAwIDAgMCAzNzguNSwyNTQuNDQ1NiBMNTAzLjUwMDEsMjU0LjQ0NTYgQTAsMCAwIDAgMCA1MDMuNTAwMSwyNTQuNDQ1NiBMNTAzLjUwMDEsMjI0LjE4IEw0OTMuNTAwMSwyMTQuMTggTDQ0NSwyMTQuMTggTDQ0MSwxNDYuNDcgTDQzNywyMTQuMTggTDM3OC41LDIxNC4xOCBBMCwwIDAgMCAwIDM3OC41LDIxNC4xOCIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTQ5My41MDAxLDIxNC4xOCBMNDkzLjUwMDEsMjI0LjE4IEw1MDMuNTAwMSwyMjQuMTggTDQ5My41MDAxLDIxNC4xOCIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA0LjAwMDEiIHg9IjM4NC41IiB5PSIyMzEuMjQ2OSI+JiMxMjUyMjsmIzEyNDUwOyYjMTI1MjM7JiMxMjQ3OTsmIzEyNDUyOyYjMTI1MTI7JiMzNjg5MDsmIzMwNjkzOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDQuMDAwMSIgeD0iMzg0LjUiIHk9IjI0Ni4zNzk3Ij4mIzM2OTE0OyYjMjU0MzE7JiMxMjUxNDsmIzEyNDkxOyYjMTI0Nzk7JiMxMjUyMjsmIzEyNTMxOyYjMTI0NjQ7PC90ZXh0PjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iR01OMTMiIGRhdGEtc291cmNlLWxpbmU9IjQyIiBkYXRhLXVpZD0iZW50MDAxNCIgaWQ9ImVudGl0eV9HTU4xMyI+PHBhdGggZD0iTTcxNSwyMTQuMTggTDcxNSwyNTQuNDQ1NiBBMCwwIDAgMCAwIDcxNSwyNTQuNDQ1NiBMODI3LjAwMDEsMjU0LjQ0NTYgQTAsMCAwIDAgMCA4MjcuMDAwMSwyNTQuNDQ1NiBMODI3LjAwMDEsMjI0LjE4IEw4MTcuMDAwMSwyMTQuMTggTDc3NSwyMTQuMTggTDc3MSwxMzguMjggTDc2NywyMTQuMTggTDcxNSwyMTQuMTggQTAsMCAwIDAgMCA3MTUsMjE0LjE4IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNODE3LjAwMDEsMjE0LjE4IEw4MTcuMDAwMSwyMjQuMTggTDgyNy4wMDAxLDIyNC4xOCBMODE3LjAwMDEsMjE0LjE4IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5MS4wMDAxIiB4PSI3MjEiIHk9IjIzMS4yNDY5Ij4mIzIyODIzOyYjMzczMjc7JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7JiMzNjg2NTsmIzIwNDQ5OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2NS4wMDAxIiB4PSI3MjEiIHk9IjI0Ni4zNzk3Ij4mIzEyNDk2OyYjMTI0ODM7JiMxMjQ4MTsmIzIwOTY2OyYjMjk3MDI7PC90ZXh0PjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iR01OMTYiIGRhdGEtc291cmNlLWxpbmU9IjQ3IiBkYXRhLXVpZD0iZW50MDAxNyIgaWQ9ImVudGl0eV9HTU4xNiI+PHBhdGggZD0iTTEwMjQsMjE0LjE4IEwxMDI0LDI1NC40NDU2IEEwLDAgMCAwIDAgMTAyNCwyNTQuNDQ1NiBMMTExMC4wMDAxLDI1NC40NDU2IEEwLDAgMCAwIDAgMTExMC4wMDAxLDI1NC40NDU2IEwxMTEwLjAwMDEsMjI0LjE4IEwxMTAwLjAwMDEsMjE0LjE4IEwxMDcxLDIxNC4xOCBMMTA2NywxMzguMjggTDEwNjMsMjE0LjE4IEwxMDI0LDIxNC4xOCBBMCwwIDAgMCAwIDEwMjQsMjE0LjE4IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNMTEwMC4wMDAxLDIxNC4xOCBMMTEwMC4wMDAxLDIyNC4xOCBMMTExMC4wMDAxLDIyNC4xOCBMMTEwMC4wMDAxLDIxNC4xOCIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjUuMDAwMSIgeD0iMTAzMCIgeT0iMjMxLjI0NjkiPiYjMjE0NTI7JiMyNjA0MTsmIzIxNTIxOyYjMjE1MTY7JiMyNjM5OTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjUuMDAwMSIgeD0iMTAzMCIgeT0iMjQ2LjM3OTciPiYjMjM1NTA7JiMzNTQ0MTsmIzMwMzQwOyYjMjA5NjY7JiMyOTcwMjs8L3RleHQ+PC9nPjwhLS1TUkM9W1hQQlJKWEQxNkNWbHZvZDZVY2J5MkFYOEk4V3NiQ0hCQ3NtN3NCMlQ5UkRKNGM5Q3NYc1hETXJqSkdtZElLMEV2TDJIYXVlU0dYemNjRHRzWWJUbVBYT2hZbkFvb01Qc2xfX3lsenp0VTlKMWVwUjFTQVdsRVRwcGVkLW0zcmVFeVptMGwwY1JKMkFBaWQwNE1IRFpyQ3NISkQ5ck4wZVZGLV9KM20ySkFlMzZDNG1DS3FHeVAzN1I5UjBkREcyVm1nNUs0Z09HT3ZXSUJtN1YwRjNORm82aDJ2dEw2SXI5R0VKMTc0NXFNYWNVbTJKNVlFNk5EOEZmektMOXJrUTN1LXJteVJuSkVSZy1VQV9ZX1BaNVd4OHM5b19kZXMzSTlRQ3NwVHd2bE5PY2xvdFQyMTJuaTFFRjJ0ekZ5N04xWnVMX0JkWEoyel82TThOX0dfMEJtVWx3eFB5QU5YOXlyX25QQ1JTRUowYVVmYkVPbGxRT0FZMWhJWGNxbE9aTHctUXctZkxsRHhPWWJiVThNVUNjZGNROHZSSjhrQy1RRDJycjNaLWxqbmpwYUpmalZERlp6Y0dNNHZRWXhYWjVkWjRrZGhNaDl2dHlLTDJUX25feGxrMHhtanlHX2ZnNnZRTnhBeDBTTXJkVmhnMHR2cXBxUDM4NnlYYmNvN1BxbmMzWEdfWnpHOUtJYkJfVTdhc2xCa1dGdVNxZWtlMHR5a3VpdWZZb0xXZGNKY056dV9ycTh0UjZmalppNXQ4Q05OZ1FNMERhSVlMcHdSSEVqQm1qcHZnb05XY01MbzhZcklQQlRLYzlONWlUYkFSVEIwVTdsWW1zbWxmaVhBNTBZQ2ltNzc0UFN4Rkc3T3NNNFNYeU1QT3MzU29FbVZZZlUtY1YyQndiRmU2aTdXVUJsY21qWHRrVkhBNFlNcEZqSGE0S1RZRGhXNGE2UWpqX3A2RGgwZElYVVoxRENfMERtTFN4LVFMbVBIRDR5bkhTblNld2ZYa1lNdDZfU01ud0c2dmlUT2VybU9sSENkTm9YUWxNNXMxc2MwalVVOFdvcmNwR2RLeEtNbzN0QnppeFgtN0lrcGlzbG00MF0tLT48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<hr />
<h3 id="162-api-protocol-buffers">16.2 受注 API の Protocol Buffers 定義<a class="headerlink" href="#162-api-protocol-buffers" title="Permanent link">&para;</a></h3>
<h4 id="srcmainprotoorderproto">src/main/proto/order.proto<a class="headerlink" href="#srcmainprotoorderproto" title="Permanent link">&para;</a></h4>
<details>
<summary>コード例: order.proto</summary>

<div class="highlight"><pre><span></span><code><span class="k">syntax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;proto3&quot;</span><span class="p">;</span>

<span class="kn">package</span><span class="w"> </span><span class="nn">com</span><span class="o">.</span><span class="n">example.sales</span><span class="p">;</span>

<span class="k">option</span><span class="w"> </span><span class="na">java_package</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;com.example.sales.infrastructure.grpc.proto&quot;</span><span class="p">;</span>
<span class="k">option</span><span class="w"> </span><span class="na">java_outer_classname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;OrderProto&quot;</span><span class="p">;</span>
<span class="k">option</span><span class="w"> </span><span class="na">java_multiple_files</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>

<span class="k">import</span><span class="w"> </span><span class="s">&quot;common.proto&quot;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="s">&quot;google/protobuf/timestamp.proto&quot;</span><span class="p">;</span>

<span class="c1">// 受注ステータス</span>
<span class="kd">enum</span><span class="w"> </span><span class="n">OrderStatus</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">ORDER_STATUS_UNSPECIFIED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="na">ORDER_STATUS_DRAFT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">           </span><span class="c1">// 下書き</span>
<span class="w">    </span><span class="na">ORDER_STATUS_CONFIRMED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w">       </span><span class="c1">// 確定</span>
<span class="w">    </span><span class="na">ORDER_STATUS_PROCESSING</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w">      </span><span class="c1">// 処理中</span>
<span class="w">    </span><span class="na">ORDER_STATUS_SHIPPED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span><span class="w">         </span><span class="c1">// 出荷済</span>
<span class="w">    </span><span class="na">ORDER_STATUS_COMPLETED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w">       </span><span class="c1">// 完了</span>
<span class="w">    </span><span class="na">ORDER_STATUS_CANCELLED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span><span class="w">       </span><span class="c1">// キャンセル</span>
<span class="p">}</span>

<span class="c1">// 受注ヘッダ</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">Order</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">order_number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">partner_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">partner_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">    </span><span class="n">Date</span><span class="w"> </span><span class="na">order_date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="w">    </span><span class="n">Date</span><span class="w"> </span><span class="na">delivery_date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="w">    </span><span class="n">OrderStatus</span><span class="w"> </span><span class="na">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span>
<span class="w">    </span><span class="n">Money</span><span class="w"> </span><span class="na">total_amount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="p">;</span>
<span class="w">    </span><span class="n">Money</span><span class="w"> </span><span class="na">tax_amount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">warehouse_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">9</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">sales_rep_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">notes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">11</span><span class="p">;</span>
<span class="w">    </span><span class="k">repeated</span><span class="w"> </span><span class="n">OrderDetail</span><span class="w"> </span><span class="na">details</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="p">;</span>
<span class="w">    </span><span class="n">AuditInfo</span><span class="w"> </span><span class="na">audit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">13</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 受注明細</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">OrderDetail</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int32</span><span class="w"> </span><span class="na">line_number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">product_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">product_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int32</span><span class="w"> </span><span class="na">quantity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="w">    </span><span class="n">Money</span><span class="w"> </span><span class="na">unit_price</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="w">    </span><span class="n">Money</span><span class="w"> </span><span class="na">amount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">tax_category</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="p">;</span>
<span class="w">    </span><span class="n">Date</span><span class="w"> </span><span class="na">delivery_date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">notes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">9</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 受注ステータス監視（サーバーストリーミング）</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">WatchOrderStatusRequest</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">repeated</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="na">order_numbers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="k">repeated</span><span class="w"> </span><span class="n">OrderStatus</span><span class="w"> </span><span class="na">statuses</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">message</span><span class="w"> </span><span class="nc">OrderStatusChange</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">order_number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="n">OrderStatus</span><span class="w"> </span><span class="na">previous_status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="n">OrderStatus</span><span class="w"> </span><span class="na">current_status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">    </span><span class="n">google.protobuf.Timestamp</span><span class="w"> </span><span class="na">changed_at</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="na">changed_by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// === サービス定義 ===</span>

<span class="kd">service</span><span class="w"> </span><span class="n">OrderService</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 単項 RPC</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">GetOrder</span><span class="p">(</span><span class="n">GetOrderRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">GetOrderResponse</span><span class="p">);</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">CreateOrder</span><span class="p">(</span><span class="n">CreateOrderRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">CreateOrderResponse</span><span class="p">);</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">UpdateOrder</span><span class="p">(</span><span class="n">UpdateOrderRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">UpdateOrderResponse</span><span class="p">);</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">ConfirmOrder</span><span class="p">(</span><span class="n">ConfirmOrderRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">ConfirmOrderResponse</span><span class="p">);</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">CancelOrder</span><span class="p">(</span><span class="n">CancelOrderRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">CancelOrderResponse</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// サーバーストリーミング RPC</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">ListOrders</span><span class="p">(</span><span class="n">ListOrdersRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">stream</span><span class="w"> </span><span class="n">Order</span><span class="p">);</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">WatchOrderStatus</span><span class="p">(</span><span class="n">WatchOrderStatusRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">stream</span><span class="w"> </span><span class="n">OrderStatusChange</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// クライアントストリーミング RPC</span>
<span class="w">    </span><span class="k">rpc</span><span class="w"> </span><span class="n">BulkAddOrderDetails</span><span class="p">(</span><span class="n">stream</span><span class="w"> </span><span class="n">BulkAddOrderDetailRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">BulkAddOrderDetailResponse</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h3 id="163">16.3 受注サービス実装（ステータス監視）<a class="headerlink" href="#163" title="Permanent link">&para;</a></h3>
<details>
<summary>コード例: GrpcOrderService.java</summary>

<div class="highlight"><pre><span></span><code><span class="nd">@GrpcService</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">GrpcOrderService</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">OrderServiceGrpc</span><span class="p">.</span><span class="na">OrderServiceImplBase</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Logger</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LoggerFactory</span><span class="p">.</span><span class="na">getLogger</span><span class="p">(</span><span class="n">GrpcOrderService</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">OrderUseCase</span><span class="w"> </span><span class="n">orderUseCase</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">CreditUseCase</span><span class="w"> </span><span class="n">creditUseCase</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">OrderConverter</span><span class="w"> </span><span class="n">converter</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// ステータス監視用のオブザーバー管理</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Set</span><span class="o">&lt;</span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">OrderStatusChange</span><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">statusWatchers</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">ConcurrentHashMap</span><span class="o">&lt;&gt;</span><span class="p">();</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * サーバーストリーミング RPC: 受注ステータス監視</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">watchOrderStatus</span><span class="p">(</span><span class="n">WatchOrderStatusRequest</span><span class="w"> </span><span class="n">request</span><span class="p">,</span>
<span class="w">                                 </span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">OrderStatusChange</span><span class="o">&gt;</span><span class="w"> </span><span class="n">responseObserver</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;watchOrderStatus: orders={}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getOrderNumbersList</span><span class="p">());</span>

<span class="w">        </span><span class="c1">// オブザーバー登録</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">orderNumber</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getOrderNumbersList</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">statusWatchers</span>
<span class="w">                </span><span class="p">.</span><span class="na">computeIfAbsent</span><span class="p">(</span><span class="n">orderNumber</span><span class="p">,</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">ConcurrentHashMap</span><span class="p">.</span><span class="na">newKeySet</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">responseObserver</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// コンテキストキャンセル時にオブザーバー削除</span>
<span class="w">        </span><span class="n">Context</span><span class="p">.</span><span class="na">current</span><span class="p">().</span><span class="na">addListener</span><span class="p">(</span><span class="n">context</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">orderNumber</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getOrderNumbersList</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">Set</span><span class="o">&lt;</span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">OrderStatusChange</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">watchers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">statusWatchers</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">orderNumber</span><span class="p">);</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">watchers</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">watchers</span><span class="p">.</span><span class="na">remove</span><span class="p">(</span><span class="n">responseObserver</span><span class="p">);</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span><span class="w"> </span><span class="n">Runnable</span><span class="p">::</span><span class="n">run</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Spring Events でステータス変更を受信し、ウォッチャーに通知</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@EventListener</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onOrderStatusChanged</span><span class="p">(</span><span class="n">OrderStatusChangedEvent</span><span class="w"> </span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Set</span><span class="o">&lt;</span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">OrderStatusChange</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">watchers</span><span class="w"> </span><span class="o">=</span>
<span class="w">            </span><span class="n">statusWatchers</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="na">getOrderNumber</span><span class="p">());</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">watchers</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">watchers</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">OrderStatusChange</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OrderStatusChange</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">setOrderNumber</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="na">getOrderNumber</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">setPreviousStatus</span><span class="p">(</span><span class="n">converter</span><span class="p">.</span><span class="na">toProtoStatus</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="na">getPreviousStatus</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">setCurrentStatus</span><span class="p">(</span><span class="n">converter</span><span class="p">.</span><span class="na">toProtoStatus</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="na">getCurrentStatus</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">setChangedAt</span><span class="p">(</span><span class="n">converter</span><span class="p">.</span><span class="na">toProtoTimestamp</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="na">getChangedAt</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">setChangedBy</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="na">getChangedBy</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">OrderStatusChange</span><span class="o">&gt;</span><span class="w"> </span><span class="n">watcher</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">watchers</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">watcher</span><span class="p">.</span><span class="na">onNext</span><span class="p">(</span><span class="n">change</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">log</span><span class="p">.</span><span class="na">warn</span><span class="p">(</span><span class="s">&quot;Failed to notify watcher&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">);</span>
<span class="w">                </span><span class="n">watchers</span><span class="p">.</span><span class="na">remove</span><span class="p">(</span><span class="n">watcher</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h3 id="164">16.4 請求サービス実装（双方向ストリーミング）<a class="headerlink" href="#164" title="Permanent link">&para;</a></h3>
<details>
<summary>コード例: processInvoices メソッド</summary>

<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * 双方向ストリーミング RPC: 請求処理</span>
<span class="cm"> */</span>
<span class="nd">@Override</span>
<span class="kd">public</span><span class="w"> </span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">ProcessInvoiceRequest</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">processInvoices</span><span class="p">(</span>
<span class="w">        </span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">ProcessInvoiceResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="n">responseObserver</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;processInvoices: started&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">ProcessInvoiceRequest</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nd">@Override</span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onNext</span><span class="p">(</span><span class="n">ProcessInvoiceRequest</span><span class="w"> </span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">ProcessInvoiceResponse</span><span class="w"> </span><span class="n">response</span><span class="p">;</span>

<span class="w">            </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getCommandCase</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="k">case</span><span class="w"> </span><span class="n">CREATE</span><span class="p">:</span>
<span class="w">                        </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">handleCreateInvoice</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getCreate</span><span class="p">());</span>
<span class="w">                        </span><span class="k">break</span><span class="p">;</span>
<span class="w">                    </span><span class="k">case</span><span class="w"> </span><span class="n">ISSUE</span><span class="p">:</span>
<span class="w">                        </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">handleIssueInvoice</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getIssue</span><span class="p">());</span>
<span class="w">                        </span><span class="k">break</span><span class="p">;</span>
<span class="w">                    </span><span class="k">case</span><span class="w"> </span><span class="n">RECEIPT</span><span class="p">:</span>
<span class="w">                        </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">handleRecordReceipt</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="na">getReceipt</span><span class="p">());</span>
<span class="w">                        </span><span class="k">break</span><span class="p">;</span>
<span class="w">                    </span><span class="k">default</span><span class="p">:</span>
<span class="w">                        </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ProcessInvoiceResponse</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">                            </span><span class="p">.</span><span class="na">setSuccess</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
<span class="w">                            </span><span class="p">.</span><span class="na">setMessage</span><span class="p">(</span><span class="s">&quot;不明なコマンド&quot;</span><span class="p">)</span>
<span class="w">                            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">log</span><span class="p">.</span><span class="na">error</span><span class="p">(</span><span class="s">&quot;processInvoices: error&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">);</span>
<span class="w">                </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ProcessInvoiceResponse</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">setSuccess</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">setMessage</span><span class="p">(</span><span class="s">&quot;エラー: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="c1">// 即座に結果を返す</span>
<span class="w">            </span><span class="n">responseObserver</span><span class="p">.</span><span class="na">onNext</span><span class="p">(</span><span class="n">response</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Override</span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onError</span><span class="p">(</span><span class="n">Throwable</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">log</span><span class="p">.</span><span class="na">error</span><span class="p">(</span><span class="s">&quot;processInvoices: client error&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">t</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Override</span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onCompleted</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;processInvoices: client completed&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="n">responseObserver</span><span class="p">.</span><span class="na">onCompleted</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">};</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h3 id="165-grpcurl">16.5 grpcurl による動作確認<a class="headerlink" href="#165-grpcurl" title="Permanent link">&para;</a></h3>
<details>
<summary>コード例: grpcurl コマンド</summary>

<div class="highlight"><pre><span></span><code><span class="c1"># 受注登録</span>
grpcurl<span class="w"> </span>-plaintext<span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">  &quot;partner_code&quot;: &quot;CUS001&quot;,</span>
<span class="s1">  &quot;order_date&quot;: {&quot;year&quot;: 2025, &quot;month&quot;: 12, &quot;day&quot;: 29},</span>
<span class="s1">  &quot;delivery_date&quot;: {&quot;year&quot;: 2026, &quot;month&quot;: 1, &quot;day&quot;: 5},</span>
<span class="s1">  &quot;warehouse_code&quot;: &quot;WH001&quot;,</span>
<span class="s1">  &quot;details&quot;: [</span>
<span class="s1">    {&quot;product_code&quot;: &quot;PRD001&quot;, &quot;quantity&quot;: 10},</span>
<span class="s1">    {&quot;product_code&quot;: &quot;PRD002&quot;, &quot;quantity&quot;: 5}</span>
<span class="s1">  ]</span>
<span class="s1">}&#39;</span><span class="w"> </span>localhost:9090<span class="w"> </span>com.example.sales.OrderService/CreateOrder

<span class="c1"># 受注確定</span>
grpcurl<span class="w"> </span>-plaintext<span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">  &quot;order_number&quot;: &quot;ORD20251229001&quot;</span>
<span class="s1">}&#39;</span><span class="w"> </span>localhost:9090<span class="w"> </span>com.example.sales.OrderService/ConfirmOrder

<span class="c1"># 受注ステータス監視（サーバーストリーミング）</span>
grpcurl<span class="w"> </span>-plaintext<span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">  &quot;order_numbers&quot;: [&quot;ORD20251229001&quot;]</span>
<span class="s1">}&#39;</span><span class="w"> </span>localhost:9090<span class="w"> </span>com.example.sales.OrderService/WatchOrderStatus

<span class="c1"># 出荷進捗監視（サーバーストリーミング）</span>
grpcurl<span class="w"> </span>-plaintext<span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">  &quot;shipment_number&quot;: &quot;SHP20251230001&quot;</span>
<span class="s1">}&#39;</span><span class="w"> </span>localhost:9090<span class="w"> </span>com.example.sales.ShipmentService/StreamShipmentProgress
</code></pre></div>

</details>

<hr />
<h2 id="17">第17章：エラーハンドリングとストリーミング<a class="headerlink" href="#17" title="Permanent link">&para;</a></h2>
<h3 id="171-grpc">17.1 gRPC エラーハンドリングの概要<a class="headerlink" href="#171-grpc" title="Permanent link">&para;</a></h3>
<p>gRPC では、エラーは <strong>Status</strong> オブジェクトで表現されます。Status には <strong>コード</strong>（StatusCode）と <strong>メッセージ</strong>、オプションで <strong>詳細情報</strong> を含めることができます。</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjkzNHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NTE2cHg7aGVpZ2h0OjkzNHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDUxNiA5MzQiIHdpZHRoPSI1MTZweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPmdSUEMgJiMxMjQ1NjsmIzEyNTIxOyYjMTI1NDA7JiMxMjQ5NTsmIzEyNTMxOyYjMTI0ODk7JiMxMjUyMjsmIzEyNTMxOyYjMTI0NjQ7JiMxMjQ1MDsmIzEyNTQwOyYjMTI0NjE7JiMxMjQ4NjsmIzEyNDYzOyYjMTI0ODE7JiMxMjUxNTs8L3RpdGxlPjxkZWZzLz48Zz48ZyBjbGFzcz0idGl0bGUiIGRhdGEtc291cmNlLWxpbmU9IjEiPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNzAuMjEiIHg9IjExNi4yNTI1IiB5PSIyMi45OTUxIj5nUlBDICYjMTI0NTY7JiMxMjUyMTsmIzEyNTQwOyYjMTI0OTU7JiMxMjUzMTsmIzEyNDg5OyYjMTI1MjI7JiMxMjUzMTsmIzEyNDY0OyYjMTI0NTA7JiMxMjU0MDsmIzEyNDYxOyYjMTI0ODY7JiMxMjQ2MzsmIzEyNDgxOyYjMTI1MTU7PC90ZXh0PjwvZz48IS0tY2x1c3RlciA/Pz8/Pz8tLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1lbnRpdHk9Ii4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMyIgZGF0YS11aWQ9ImVudDAwMDIiIGlkPSJjbHVzdGVyXy4uLi4uLiI+PHBhdGggZD0iTTguNSw0My4yOTY5IEw5My40OTk2LDQzLjI5NjkgQTMuNzUsMy43NSAwIDAgMSA5NS45OTk2LDQ1Ljc5NjkgTDEwMi45OTk2LDY1LjU5MzggTDM2MC41LDY1LjU5MzggQTIuNSwyLjUgMCAwIDEgMzYzLDY4LjA5MzggTDM2MywyOTMuOTg2OSBBMi41LDIuNSAwIDAgMSAzNjAuNSwyOTYuNDg2OSBMOC41LDI5Ni40ODY5IEEyLjUsMi41IDAgMCAxIDYsMjkzLjk4NjkgTDYsNDUuNzk2OSBBMi41LDIuNSAwIDAgMSA4LjUsNDMuMjk2OSIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB4MT0iNiIgeDI9IjEwMi45OTk2IiB5MT0iNjUuNTkzOCIgeTI9IjY1LjU5MzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iMTAiIHk9IjU4LjI5MiI+JiMxMjQ2MzsmIzEyNTIxOyYjMTI0NTI7JiMxMjQ1MDsmIzEyNTMxOyYjMTI0ODg7PC90ZXh0PjwvZz48IS0tY2x1c3RlciBnUlBDID8/Pz8tLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1lbnRpdHk9ImdSUEMgLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iOSIgZGF0YS11aWQ9ImVudDAwMDYiIGlkPSJjbHVzdGVyX2dSUEMgLi4uLiI+PHBhdGggZD0iTTE1LjUsMzI5LjQ4NjkgTDExOC43MTA3LDMyOS40ODY5IEEzLjc1LDMuNzUgMCAwIDEgMTIxLjIxMDcsMzMxLjk4NjkgTDEyOC4yMTA3LDM1MS43ODM3IEwxODAuNSwzNTEuNzgzNyBBMi41LDIuNSAwIDAgMSAxODMsMzU0LjI4MzcgTDE4Myw2NzEuMTc2OSBBMi41LDIuNSAwIDAgMSAxODAuNSw2NzMuNjc2OSBMMTUuNSw2NzMuNjc2OSBBMi41LDIuNSAwIDAgMSAxMyw2NzEuMTc2OSBMMTMsMzMxLjk4NjkgQTIuNSwyLjUgMCAwIDEgMTUuNSwzMjkuNDg2OSIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB4MT0iMTMiIHgyPSIxMjguMjEwNyIgeTE9IjM1MS43ODM3IiB5Mj0iMzUxLjc4MzciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAyLjIxMDciIHg9IjE3IiB5PSIzNDQuNDgyIj5nUlBDICYjMTI0ODE7JiMxMjUxNTsmIzEyNDkzOyYjMTI1MjM7PC90ZXh0PjwvZz48IS0tY2x1c3RlciA/Pz8/LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSIuLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIxNSIgZGF0YS11aWQ9ImVudDAwMTAiIGlkPSJjbHVzdGVyXy4uLi4iPjxwYXRoIGQ9Ik04LjUsNzA2LjY3NjkgTDY1LjQ5OTgsNzA2LjY3NjkgQTMuNzUsMy43NSAwIDAgMSA2Ny45OTk4LDcwOS4xNzY5IEw3NC45OTk4LDcyOC45NzM4IEwzNjAuNSw3MjguOTczOCBBMi41LDIuNSAwIDAgMSAzNjMsNzMxLjQ3MzggTDM2Myw5MjUuMDY2OSBBMi41LDIuNSAwIDAgMSAzNjAuNSw5MjcuNTY2OSBMOC41LDkyNy41NjY5IEEyLjUsMi41IDAgMCAxIDYsOTI1LjA2NjkgTDYsNzA5LjE3NjkgQTIuNSwyLjUgMCAwIDEgOC41LDcwNi42NzY5IiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHgxPSI2IiB4Mj0iNzQuOTk5OCIgeTE9IjcyOC45NzM4IiB5Mj0iNzI4Ljk3MzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iMTAiIHk9IjcyMS42NzIiPiYjMTI0Njk7JiMxMjU0MDsmIzEyNDk2OyYjMTI1NDA7PC90ZXh0PjwvZz48IS0tZW50aXR5IGNsaWVudC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJjbGllbnQiIGRhdGEtc291cmNlLWxpbmU9IjQiIGRhdGEtdWlkPSJlbnQwMDAzIiBpZD0iZW50aXR5X2NsaWVudCI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI2Mi41OTM4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNTEuOTk5NSIgeD0iMjIiIHk9Ijc4LjI5NjkiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjEwIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNSIgeD0iMTUzLjk5OTUiIHk9IjgzLjI5NjkiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjE1MS45OTk1IiB5PSI4NS4yOTY5Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0IiB4PSIxNTEuOTk5NSIgeT0iODkuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgzLjk5OTYiIHg9IjM3IiB5PSIxMTEuMjkyIj4mIzEyNDYzOyYjMTI1MjE7JiMxMjQ1MjsmIzEyNDUwOyYjMTI1MzE7JiMxMjQ4ODs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTExLjk5OTUiIHg9IjM3IiB5PSIxMjcuNTg4OSI+JiMxMjQ1MDsmIzEyNTAzOyYjMTI1MjI7JiMxMjQ2NTsmIzEyNTQwOyYjMTI0NzE7JiMxMjUxOTsmIzEyNTMxOzwvdGV4dD48L2c+PCEtLWVudGl0eSByZXRyeS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJyZXRyeSIgZGF0YS1zb3VyY2UtbGluZT0iNSIgZGF0YS11aWQ9ImVudDAwMDQiIGlkPSJlbnRpdHlfcmV0cnkiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNjIuNTkzOCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTUxLjk5OTUiIHg9IjIyIiB5PSIyMTcuODk2OSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTAiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE1IiB4PSIxNTMuOTk5NSIgeT0iMjIyLjg5NjkiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjE1MS45OTk1IiB5PSIyMjQuODk2OSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iMTUxLjk5OTUiIHk9IjIyOC44OTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iMzciIHk9IjI1MC44OTIiPiYjMTI1MjI7JiMxMjQ4ODsmIzEyNTIxOyYjMTI0NTI7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExMS45OTk1IiB4PSIzNyIgeT0iMjY3LjE4ODkiPiYjMTI0NTI7JiMxMjUzMTsmIzEyNDc5OyYjMTI1NDA7JiMxMjQ3NTsmIzEyNTAzOyYjMTI0Nzk7JiMxMjU0MDs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgaGVhbHRoX2NsaWVudC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJoZWFsdGhfY2xpZW50IiBkYXRhLXNvdXJjZS1saW5lPSI2IiBkYXRhLXVpZD0iZW50MDAwNSIgaWQ9ImVudGl0eV9oZWFsdGhfY2xpZW50Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjYyLjU5MzgiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEzNy45OTk2IiB4PSIyMDkiIHk9Ijc4LjI5NjkiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjEwIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNSIgeD0iMzI2Ljk5OTYiIHk9IjgzLjI5NjkiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjMyNC45OTk2IiB5PSI4NS4yOTY5Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0IiB4PSIzMjQuOTk5NiIgeT0iODkuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk3Ljk5OTYiIHg9IjIyNCIgeT0iMTExLjI5MiI+JiMxMjUwNDsmIzEyNTIzOyYjMTI0NzM7JiMxMjQ4MTsmIzEyNDU1OyYjMTI0ODM7JiMxMjQ2Mzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iMjI0IiB5PSIxMjcuNTg4OSI+JiMxMjQ2MzsmIzEyNTIxOyYjMTI0NTI7JiMxMjQ1MDsmIzEyNTMxOyYjMTI0ODg7PC90ZXh0PjwvZz48IS0tZW50aXR5IGNoYW5uZWwtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iY2hhbm5lbCIgZGF0YS1zb3VyY2UtbGluZT0iMTAiIGRhdGEtdWlkPSJlbnQwMDA3IiBpZD0iZW50aXR5X2NoYW5uZWwiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNDYuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iOTUuOTk5OCIgeD0iNTAiIHk9IjM2NC40ODY5Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTUiIHg9IjEyNS45OTk4IiB5PSIzNjkuNDg2OSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iMTIzLjk5OTgiIHk9IjM3MS40ODY5Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0IiB4PSIxMjMuOTk5OCIgeT0iMzc1LjQ4NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSI2NSIgeT0iMzk3LjQ4MiI+JiMxMjQ4MTsmIzEyNTE1OyYjMTI0OTM7JiMxMjUyMzs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgY2lyY3VpdC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJjaXJjdWl0IiBkYXRhLXNvdXJjZS1saW5lPSIxMSIgZGF0YS11aWQ9ImVudDAwMDgiIGlkPSJlbnRpdHlfY2lyY3VpdCI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI0Ni4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMzcuOTk5NiIgeD0iMjkiIHk9IjQ4Ny43ODY5Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTUiIHg9IjE0Ni45OTk2IiB5PSI0OTIuNzg2OSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iMTQ0Ljk5OTYiIHk9IjQ5NC43ODY5Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0IiB4PSIxNDQuOTk5NiIgeT0iNDk4Ljc4NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ny45OTk2IiB4PSI0NCIgeT0iNTIwLjc4MiI+JiMyMjIzODsmIzM2MzM1OyYjMTI1MDI7JiMxMjUyNDsmIzEyNTQwOyYjMTI0NTk7JiMxMjU0MDs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgZGVhZGxpbmUtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iZGVhZGxpbmUiIGRhdGEtc291cmNlLWxpbmU9IjEyIiBkYXRhLXVpZD0iZW50MDAwOSIgaWQ9ImVudGl0eV9kZWFkbGluZSI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI2Mi41OTM4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMjMuOTk5NiIgeD0iMzYiIHk9IjU5NS4wODY5Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTUiIHg9IjEzOS45OTk2IiB5PSI2MDAuMDg2OSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iMTM3Ljk5OTYiIHk9IjYwMi4wODY5Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0IiB4PSIxMzcuOTk5NiIgeT0iNjA2LjA4NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4My45OTk2IiB4PSI1MSIgeT0iNjI4LjA4MiI+JiMxMjQ4NzsmIzEyNDgzOyYjMTI0ODk7JiMxMjUyMTsmIzEyNDUyOyYjMTI1MzE7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI3Ljk5OTkiIHg9IjUxIiB5PSI2NDQuMzc4OSI+JiMzMTY0OTsmIzI5NzAyOzwvdGV4dD48L2c+PCEtLWVudGl0eSBlcnJvcl9pbnRlcmNlcHRvci0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJlcnJvcl9pbnRlcmNlcHRvciIgZGF0YS1zb3VyY2UtbGluZT0iMTYiIGRhdGEtdWlkPSJlbnQwMDExIiBpZD0iZW50aXR5X2Vycm9yX2ludGVyY2VwdG9yIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjYyLjU5MzgiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE1MS45OTk1IiB4PSIyMiIgeT0iNzQxLjY3NjkiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjEwIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNSIgeD0iMTUzLjk5OTUiIHk9Ijc0Ni42NzY5Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0IiB4PSIxNTEuOTk5NSIgeT0iNzQ4LjY3NjkiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjE1MS45OTk1IiB5PSI3NTIuNjc2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQxLjk5OTgiIHg9IjM3IiB5PSI3NzQuNjcyIj4mIzEyNDU2OyYjMTI1MjE7JiMxMjU0MDs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTExLjk5OTUiIHg9IjM3IiB5PSI3OTAuOTY4OSI+JiMxMjQ1MjsmIzEyNTMxOyYjMTI0Nzk7JiMxMjU0MDsmIzEyNDc1OyYjMTI1MDM7JiMxMjQ3OTsmIzEyNTQwOzwvdGV4dD48L2c+PCEtLWVudGl0eSBzZXJ2aWNlLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9InNlcnZpY2UiIGRhdGEtc291cmNlLWxpbmU9IjE3IiBkYXRhLXVpZD0iZW50MDAxMiIgaWQ9ImVudGl0eV9zZXJ2aWNlIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjQ2LjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEzNy4yODIiIHg9IjI5LjM2IiB5PSI4NjUuMjY2OSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTAiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE1IiB4PSIxNDYuNjQyIiB5PSI4NzAuMjY2OSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iMTQ0LjY0MiIgeT0iODcyLjI2NjkiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjE0NC42NDIiIHk9Ijg3Ni4yNjY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTcuMjgyIiB4PSI0NC4zNiIgeT0iODk4LjI2MiI+Z1JQQyAmIzEyNDY5OyYjMTI1NDA7JiMxMjQ5OTsmIzEyNDczOzwvdGV4dD48L2c+PCEtLWVudGl0eSBoZWFsdGhfc2VydmljZS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJoZWFsdGhfc2VydmljZSIgZGF0YS1zb3VyY2UtbGluZT0iMTgiIGRhdGEtdWlkPSJlbnQwMDEzIiBpZD0iZW50aXR5X2hlYWx0aF9zZXJ2aWNlIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjQ2LjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEzNy45OTk2IiB4PSIyMDkiIHk9Ijc0OS44MjY5Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTUiIHg9IjMyNi45OTk2IiB5PSI3NTQuODI2OSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iMzI0Ljk5OTYiIHk9Ijc1Ni44MjY5Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0IiB4PSIzMjQuOTk5NiIgeT0iNzYwLjgyNjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ny45OTk2IiB4PSIyMjQiIHk9Ijc4Mi44MjIiPiYjMTI1MDQ7JiMxMjUyMzsmIzEyNDczOyYjMTI0Njk7JiMxMjU0MDsmIzEyNDk5OyYjMTI0NzM7PC90ZXh0PjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iR01OMjEiIGRhdGEtc291cmNlLWxpbmU9IjMxIiBkYXRhLXVpZD0iZW50MDAyMiIgaWQ9ImVudGl0eV9HTU4yMSI+PHBhdGggZD0iTTM4Mi4yOSw3NTIuODM2OSBMMzgyLjI5LDc5My4xMDI1IEw1MDkuNzE0OSw3OTMuMTAyNSBMNTA5LjcxNDksNzYyLjgzNjkgTDQ5OS43MTQ5LDc1Mi44MzY5IEwzODIuMjksNzUyLjgzNjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik00OTkuNzE0OSw3NTIuODM2OSBMNDk5LjcxNDksNzYyLjgzNjkgTDUwOS43MTQ5LDc2Mi44MzY5IEw0OTkuNzE0OSw3NTIuODM2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwNi40MjQ5IiB4PSIzODguMjkiIHk9Ijc2OS45MDM4Ij4mIzIwMzYzOyYjMjI4MDY7JiMxMjQzNDtTdGF0dXMmIzIyNzkzOyYjMjU1NjM7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc4LjAwMDEiIHg9IjM4OC4yOSIgeT0iNzg1LjAzNjYiPiYjMzU0NDM7JiMzMjA0ODsmIzI0NzczOyYjMjI1Nzc7JiMzNjg2MTsmIzIxMTUyOzwvdGV4dD48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkdNTjI0IiBkYXRhLXNvdXJjZS1saW5lPSIzNiIgZGF0YS11aWQ9ImVudDAwMjUiIGlkPSJlbnRpdHlfR01OMjQiPjxwYXRoIGQ9Ik0zMzEsNDkwLjc5NjkgTDMzMSw1MDYuOTM2OSBMMTY3LjQzLDUxMC45MzY5IEwzMzEsNTE0LjkzNjkgTDMzMSw1MzEuMDYyNSBBMCwwIDAgMCAwIDMzMSw1MzEuMDYyNSBMNDQzLjAwMDEsNTMxLjA2MjUgQTAsMCAwIDAgMCA0NDMuMDAwMSw1MzEuMDYyNSBMNDQzLjAwMDEsNTAwLjc5NjkgTDQzMy4wMDAxLDQ5MC43OTY5IEwzMzEsNDkwLjc5NjkgQTAsMCAwIDAgMCAzMzEsNDkwLjc5NjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik00MzMuMDAwMSw0OTAuNzk2OSBMNDMzLjAwMDEsNTAwLjc5NjkgTDQ0My4wMDAxLDUwMC43OTY5IEw0MzMuMDAwMSw0OTAuNzk2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTEuMDAwMSIgeD0iMzM3IiB5PSI1MDcuODYzOCI+JiMzNjg5OTsmIzMyMTU0OyYjMTI0NTY7JiMxMjUyMTsmIzEyNTQwOyYjMjYxNzg7JiMxMjM5NTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTEuMDAwMSIgeD0iMzM3IiB5PSI1MjIuOTk2NiI+JiMyMjIzODsmIzM2MzM1OyYjMTI0MzQ7JiMxMjQ1ODsmIzEyNTQwOyYjMTI1MDM7JiMxMjUzMTs8L3RleHQ+PC9nPjwhLS1saW5rIGNsaWVudCB0byByZXRyeS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJjbGllbnQiIGRhdGEtZW50aXR5LTI9InJldHJ5IiBkYXRhLXNvdXJjZS1saW5lPSIyMSIgZGF0YS11aWQ9ImxuazE0IiBpZD0ibGlua19jbGllbnRfcmV0cnkiPjxwYXRoIGQ9Ik05OCwxNDEuMTM2OSBDOTgsMTYzLjkzNjkgOTgsMTg4Ljk1NjkgOTgsMjExLjczNjkiIGZpbGw9Im5vbmUiIGlkPSJjbGllbnQtdG8tcmV0cnkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9Ijk4LDIxNy43MzY5LDEwMiwyMDguNzM2OSw5OCwyMTIuNzM2OSw5NCwyMDguNzM2OSw5OCwyMTcuNzM2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY1LjAwMDEiIHg9Ijk5IiB5PSIxODMuOTYzOCI+JiMxMjUyMjsmIzEyNDYzOyYjMTI0NTY7JiMxMjQ3MzsmIzEyNDg4OzwvdGV4dD48L2c+PCEtLWxpbmsgcmV0cnkgdG8gY2hhbm5lbC0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJyZXRyeSIgZGF0YS1lbnRpdHktMj0iY2hhbm5lbCIgZGF0YS1zb3VyY2UtbGluZT0iMjIiIGRhdGEtdWlkPSJsbmsxNSIgaWQ9ImxpbmtfcmV0cnlfY2hhbm5lbCI+PHBhdGggZD0iTTk4LDI4MC44MTY5IEM5OCwzMDYuMTE2OSA5OCwzMzUuNDQ2OSA5OCwzNTguMTg2OSIgZmlsbD0ibm9uZSIgaWQ9InJldHJ5LXRvLWNoYW5uZWwiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9Ijk4LDM2NC4xODY5LDEwMiwzNTUuMTg2OSw5OCwzNTkuMTg2OSw5NCwzNTUuMTg2OSw5OCwzNjQuMTg2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayBjaGFubmVsIHRvIGNpcmN1aXQtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iY2hhbm5lbCIgZGF0YS1lbnRpdHktMj0iY2lyY3VpdCIgZGF0YS1zb3VyY2UtbGluZT0iMjMiIGRhdGEtdWlkPSJsbmsxNiIgaWQ9ImxpbmtfY2hhbm5lbF9jaXJjdWl0Ij48cGF0aCBkPSJNOTgsNDExLjE2NjkgQzk4LDQzMi45NTY5IDk4LDQ1OS43NzY5IDk4LDQ4MS41MjY5IiBmaWxsPSJub25lIiBpZD0iY2hhbm5lbC10by1jaXJjdWl0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI5OCw0ODcuNTI2OSwxMDIsNDc4LjUyNjksOTgsNDgyLjUyNjksOTQsNDc4LjUyNjksOTgsNDg3LjUyNjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLWxpbmsgY2lyY3VpdCB0byBkZWFkbGluZS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJjaXJjdWl0IiBkYXRhLWVudGl0eS0yPSJkZWFkbGluZSIgZGF0YS1zb3VyY2UtbGluZT0iMjQiIGRhdGEtdWlkPSJsbmsxNyIgaWQ9ImxpbmtfY2lyY3VpdF9kZWFkbGluZSI+PHBhdGggZD0iTTk4LDUzNC4zNDY5IEM5OCw1NTEuNjU2OSA5OCw1NjkuNzg2OSA5OCw1ODguODU2OSIgZmlsbD0ibm9uZSIgaWQ9ImNpcmN1aXQtdG8tZGVhZGxpbmUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9Ijk4LDU5NC44NTY5LDEwMiw1ODUuODU2OSw5OCw1ODkuODU2OSw5NCw1ODUuODU2OSw5OCw1OTQuODU2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayBkZWFkbGluZSB0byBlcnJvcl9pbnRlcmNlcHRvci0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJkZWFkbGluZSIgZGF0YS1lbnRpdHktMj0iZXJyb3JfaW50ZXJjZXB0b3IiIGRhdGEtc291cmNlLWxpbmU9IjI1IiBkYXRhLXVpZD0ibG5rMTgiIGlkPSJsaW5rX2RlYWRsaW5lX2Vycm9yX2ludGVyY2VwdG9yIj48cGF0aCBkPSJNOTgsNjU4LjA0NjkgQzk4LDY4Mi41ODY5IDk4LDcxMC44MjY5IDk4LDczNS4zNTY5IiBmaWxsPSJub25lIiBpZD0iZGVhZGxpbmUtdG8tZXJyb3JfaW50ZXJjZXB0b3IiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9Ijk4LDc0MS4zNTY5LDEwMiw3MzIuMzU2OSw5OCw3MzYuMzU2OSw5NCw3MzIuMzU2OSw5OCw3NDEuMzU2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayBlcnJvcl9pbnRlcmNlcHRvciB0byBzZXJ2aWNlLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVycm9yX2ludGVyY2VwdG9yIiBkYXRhLWVudGl0eS0yPSJzZXJ2aWNlIiBkYXRhLXNvdXJjZS1saW5lPSIyNiIgZGF0YS11aWQ9ImxuazE5IiBpZD0ibGlua19lcnJvcl9pbnRlcmNlcHRvcl9zZXJ2aWNlIj48cGF0aCBkPSJNOTgsODA0LjY3NjkgQzk4LDgyMy43MDY5IDk4LDg0MS43MTY5IDk4LDg1OC45NzY5IiBmaWxsPSJub25lIiBpZD0iZXJyb3JfaW50ZXJjZXB0b3ItdG8tc2VydmljZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iOTgsODY0Ljk3NjksMTAyLDg1NS45NzY5LDk4LDg1OS45NzY5LDk0LDg1NS45NzY5LDk4LDg2NC45NzY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rIGhlYWx0aF9jbGllbnQgdG8gaGVhbHRoX3NlcnZpY2UtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iaGVhbHRoX2NsaWVudCIgZGF0YS1lbnRpdHktMj0iaGVhbHRoX3NlcnZpY2UiIGRhdGEtc291cmNlLWxpbmU9IjI4IiBkYXRhLXVpZD0ibG5rMjAiIGlkPSJsaW5rX2hlYWx0aF9jbGllbnRfaGVhbHRoX3NlcnZpY2UiPjxwYXRoIGQ9Ik0yNzgsMTQxLjE5NjkgQzI3OCwxNjkuMDg2OSAyNzgsMjExLjQwNjkgMjc4LDI0OC4xODY5IEMyNzgsMjQ4LjE4NjkgMjc4LDI0OC4xODY5IDI3OCw2MjcuMzc2OSBDMjc4LDY3MC41NTY5IDI3OCw3MTQuOTg2OSAyNzgsNzQzLjQzNjkiIGZpbGw9Im5vbmUiIGlkPSJoZWFsdGhfY2xpZW50LXRvLWhlYWx0aF9zZXJ2aWNlIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyNzgsNzQ5LjQzNjksMjgyLDc0MC40MzY5LDI3OCw3NDQuNDM2OSwyNzQsNzQwLjQzNjksMjc4LDc0OS40MzY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTEuMDAwMSIgeD0iMjc5IiB5PSI0NTMuODUzOCI+JiMxMjUwNDsmIzEyNTIzOyYjMTI0NzM7JiMxMjQ4MTsmIzEyNDU1OyYjMTI0ODM7JiMxMjQ2Mzs8L3RleHQ+PC9nPjwhLS1saW5rIGVycm9yX2ludGVyY2VwdG9yIHRvIEdNTjIxLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVycm9yX2ludGVyY2VwdG9yIiBkYXRhLWVudGl0eS0yPSJHTU4yMSIgZGF0YS1zb3VyY2UtbGluZT0iMzEiIGRhdGEtdWlkPSJsbmsyMyIgaWQ9ImxpbmtfZXJyb3JfaW50ZXJjZXB0b3JfR01OMjEiPjxwYXRoIGQ9Ik0xMjYuMTEsNzQxLjYwNjkgQzE0Ni43Nyw3MjEuNDU2OSAxNzYuODQsNjk3LjY4NjkgMjA5LjUsNjkwLjE3NjkgQzIzOC45NSw2ODMuMzk2OSAzMTYuMDUsNjgzLjM5NjkgMzQ1LjUsNjkwLjE3NjkgQzM1My45Myw2OTIuMTE2OSAzNTUuODIsNjkzLjg1NjkgMzYzLDY5OC42NzY5IEMzODYuNiw3MTQuNTE2OSA0MTAuNDcsNzM2LjY2NjkgNDI2LjUxLDc1Mi42NTY5IiBmaWxsPSJub25lIiBpZD0iZXJyb3JfaW50ZXJjZXB0b3ItR01OMjEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjcsNzsiLz48L2c+PCEtLVNSQz1bWExGUklZRDE0N3RsaHNab2RYX21tSFRfTzVhVmV5V213S3E2WHV2cXNlTDU1aEdST3JINEtWMEF1WU1XQ0x3OTV2UnJ5WjdiOUY0bHhBeGsyUmE4bGFtTnJOTEVkSmhMOG9DUENyaHUtTUVDV1plN05HVnozN2VUVDFGcUNrV0I2d1hSSzJTc2h3djBMcTNUVzV1MFZLaDhKMTFFMW1MNkN2WWhXd2ZYZU81TUN0SUV2OFJKNG5wMzdTa2l4ZjNwMlZJUGtQb2FHUGM2U1NJdUQ0M1JrRWdtNWI5MzZNek9fel8yQ0tROE81QnlpT1hUcTByR193bXNQR1lyUU13WFdtZUdMNkgxQjhqSmxqdFZkYWNTNHBXVnczTDN3R1JmSUpZWG5PMXA1ZkRTU2QzT1VKOHpqYTVWZWhuNkFZb0NIM1dSdUoxQkxld3JpLXY2Y1UzanctRnNIV05oeVlwOG5uNWRWSjkwRlUwWURpcE5NLWNOeXVxVEo4WUljOGd1UDI5YUN4OGFJQ3Vscm41azZPa21pQ3A0eG9YYWxTdURiZFlOcWFnWnBuYjZpemJIdnBpVENMQmpBYy1pRmNqLURLRlNaUXI5TlZBZG90YlJfOGN2aFdMZldEZFhLT09vTTlWZzh0clJuUWwtMlBwUUJ6djlYWDFVYWVvQWc1MktqRkpoWXpSbGh3ajlSSGxLdmhXQ3Y2bXZnSXN0cld6OGZ6dml0ei1zejY5b1REVHZVcWJNWldaWlVNaDkxWWRKa0pfY0p6a0YtenJyamxPS0IzSThWcVBnNHpHNUJpN3k4U3Frcm9TMF0tLT48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<hr />
<h3 id="172-grpc">17.2 gRPC ステータスコード<a class="headerlink" href="#172-grpc" title="Permanent link">&para;</a></h3>
<details>
<summary>コード例: GrpcStatusCode.java</summary>

<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * gRPC ステータスコードとビジネス例外のマッピング</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">enum</span><span class="w"> </span><span class="n">GrpcStatusCode</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// 成功</span>
<span class="w">    </span><span class="n">OK</span><span class="p">(</span><span class="n">Status</span><span class="p">.</span><span class="na">OK</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;正常終了&quot;</span><span class="p">),</span>

<span class="w">    </span><span class="c1">// クライアントエラー</span>
<span class="w">    </span><span class="n">INVALID_ARGUMENT</span><span class="p">(</span><span class="n">Status</span><span class="p">.</span><span class="na">INVALID_ARGUMENT</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;不正な引数&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">NOT_FOUND</span><span class="p">(</span><span class="n">Status</span><span class="p">.</span><span class="na">NOT_FOUND</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;リソースが見つかりません&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">ALREADY_EXISTS</span><span class="p">(</span><span class="n">Status</span><span class="p">.</span><span class="na">ALREADY_EXISTS</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;リソースが既に存在します&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">PERMISSION_DENIED</span><span class="p">(</span><span class="n">Status</span><span class="p">.</span><span class="na">PERMISSION_DENIED</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;権限がありません&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">FAILED_PRECONDITION</span><span class="p">(</span><span class="n">Status</span><span class="p">.</span><span class="na">FAILED_PRECONDITION</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;前提条件が満たされていません&quot;</span><span class="p">),</span>

<span class="w">    </span><span class="c1">// サーバーエラー</span>
<span class="w">    </span><span class="n">INTERNAL</span><span class="p">(</span><span class="n">Status</span><span class="p">.</span><span class="na">INTERNAL</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;内部エラー&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">UNAVAILABLE</span><span class="p">(</span><span class="n">Status</span><span class="p">.</span><span class="na">UNAVAILABLE</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;サービス利用不可&quot;</span><span class="p">),</span>

<span class="w">    </span><span class="c1">// タイムアウト</span>
<span class="w">    </span><span class="n">DEADLINE_EXCEEDED</span><span class="p">(</span><span class="n">Status</span><span class="p">.</span><span class="na">DEADLINE_EXCEEDED</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;タイムアウト&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">CANCELLED</span><span class="p">(</span><span class="n">Status</span><span class="p">.</span><span class="na">CANCELLED</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;キャンセルされました&quot;</span><span class="p">),</span>

<span class="w">    </span><span class="c1">// 認証</span>
<span class="w">    </span><span class="n">UNAUTHENTICATED</span><span class="p">(</span><span class="n">Status</span><span class="p">.</span><span class="na">UNAUTHENTICATED</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;認証が必要です&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * リトライ可能なステータスかどうか</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isRetryable</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">UNAVAILABLE</span><span class="w"> </span><span class="o">||</span>
<span class="w">               </span><span class="k">this</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">DEADLINE_EXCEEDED</span><span class="w"> </span><span class="o">||</span>
<span class="w">               </span><span class="k">this</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">INTERNAL</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h3 id="173">17.3 カスタム例外クラス<a class="headerlink" href="#173" title="Permanent link">&para;</a></h3>
<details>
<summary>コード例: GrpcException.java</summary>

<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * gRPC 用カスタム例外</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">GrpcException</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">RuntimeException</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">GrpcStatusCode</span><span class="w"> </span><span class="n">statusCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">details</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">retryable</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">retryDelayMillis</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// 便利なファクトリメソッド</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">GrpcException</span><span class="w"> </span><span class="nf">notFound</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">resource</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">identifier</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">builder</span><span class="p">(</span><span class="n">GrpcStatusCode</span><span class="p">.</span><span class="na">NOT_FOUND</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">message</span><span class="p">(</span><span class="n">resource</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; が見つかりません: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">identifier</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">detail</span><span class="p">(</span><span class="s">&quot;resource&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">resource</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">detail</span><span class="p">(</span><span class="s">&quot;identifier&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">identifier</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">GrpcException</span><span class="w"> </span><span class="nf">invalidArgument</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">field</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">reason</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">builder</span><span class="p">(</span><span class="n">GrpcStatusCode</span><span class="p">.</span><span class="na">INVALID_ARGUMENT</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">message</span><span class="p">(</span><span class="s">&quot;不正な引数: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">field</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; - &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">reason</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">detail</span><span class="p">(</span><span class="s">&quot;field&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">field</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">detail</span><span class="p">(</span><span class="s">&quot;reason&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">reason</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">GrpcException</span><span class="w"> </span><span class="nf">failedPrecondition</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">condition</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">builder</span><span class="p">(</span><span class="n">GrpcStatusCode</span><span class="p">.</span><span class="na">FAILED_PRECONDITION</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">message</span><span class="p">(</span><span class="s">&quot;前提条件が満たされていません: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">condition</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">detail</span><span class="p">(</span><span class="s">&quot;condition&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">condition</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">GrpcException</span><span class="w"> </span><span class="nf">unavailable</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">service</span><span class="p">,</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">retryDelayMillis</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">builder</span><span class="p">(</span><span class="n">GrpcStatusCode</span><span class="p">.</span><span class="na">UNAVAILABLE</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">message</span><span class="p">(</span><span class="s">&quot;サービス利用不可: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">service</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">retryable</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">retryDelayMillis</span><span class="p">(</span><span class="n">retryDelayMillis</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Status</span><span class="w"> </span><span class="nf">toStatus</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">statusCode</span><span class="p">.</span><span class="na">getStatus</span><span class="p">().</span><span class="na">withDescription</span><span class="p">(</span><span class="n">getMessage</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h3 id="174">17.4 例外変換インターセプター<a class="headerlink" href="#174" title="Permanent link">&para;</a></h3>
<details>
<summary>コード例: ExceptionTranslationInterceptor.java</summary>

<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * 例外を gRPC Status に変換するインターセプター</span>
<span class="cm"> */</span>
<span class="nd">@GrpcGlobalServerInterceptor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ExceptionTranslationInterceptor</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">ServerInterceptor</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">StatusRuntimeException</span><span class="w"> </span><span class="nf">translateException</span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// GrpcException の場合</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="w"> </span><span class="k">instanceof</span><span class="w"> </span><span class="n">GrpcException</span><span class="w"> </span><span class="n">grpcEx</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">createStatusException</span><span class="p">(</span><span class="n">grpcEx</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// ドメイン例外の変換</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="w"> </span><span class="k">instanceof</span><span class="w"> </span><span class="n">EntityNotFoundException</span><span class="w"> </span><span class="n">notFound</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">createNotFoundStatus</span><span class="p">(</span><span class="n">notFound</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="w"> </span><span class="k">instanceof</span><span class="w"> </span><span class="n">ValidationException</span><span class="w"> </span><span class="n">validation</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">createValidationStatus</span><span class="p">(</span><span class="n">validation</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="w"> </span><span class="k">instanceof</span><span class="w"> </span><span class="n">BusinessException</span><span class="w"> </span><span class="n">business</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">createBusinessStatus</span><span class="p">(</span><span class="n">business</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// その他は内部エラー</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">createInternalStatus</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">StatusRuntimeException</span><span class="w"> </span><span class="nf">createValidationStatus</span><span class="p">(</span><span class="n">ValidationException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">BadRequest</span><span class="p">.</span><span class="na">Builder</span><span class="w"> </span><span class="n">badRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BadRequest</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">();</span>

<span class="w">        </span><span class="n">e</span><span class="p">.</span><span class="na">getViolations</span><span class="p">().</span><span class="na">forEach</span><span class="p">(</span><span class="n">violation</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">            </span><span class="n">badRequest</span><span class="p">.</span><span class="na">addFieldViolations</span><span class="p">(</span>
<span class="w">                </span><span class="n">BadRequest</span><span class="p">.</span><span class="na">FieldViolation</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">setField</span><span class="p">(</span><span class="n">violation</span><span class="p">.</span><span class="na">field</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">setDescription</span><span class="p">(</span><span class="n">violation</span><span class="p">.</span><span class="na">message</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
<span class="w">            </span><span class="p">)</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="n">com</span><span class="p">.</span><span class="na">google</span><span class="p">.</span><span class="na">rpc</span><span class="p">.</span><span class="na">Status</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">com</span><span class="p">.</span><span class="na">google</span><span class="p">.</span><span class="na">rpc</span><span class="p">.</span><span class="na">Status</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">setCode</span><span class="p">(</span><span class="n">Status</span><span class="p">.</span><span class="na">INVALID_ARGUMENT</span><span class="p">.</span><span class="na">getCode</span><span class="p">().</span><span class="na">value</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">setMessage</span><span class="p">(</span><span class="s">&quot;バリデーションエラー&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">addDetails</span><span class="p">(</span><span class="n">Any</span><span class="p">.</span><span class="na">pack</span><span class="p">(</span><span class="n">badRequest</span><span class="p">.</span><span class="na">build</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">StatusProto</span><span class="p">.</span><span class="na">toStatusRuntimeException</span><span class="p">(</span><span class="n">status</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h3 id="175">17.5 リトライ設定<a class="headerlink" href="#175" title="Permanent link">&para;</a></h3>
<details>
<summary>コード例: GrpcRetryConfig.java</summary>

<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * リトライポリシー設定</span>
<span class="cm"> */</span>
<span class="nd">@Configuration</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">GrpcRetryConfig</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Bean</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">RetryPolicy</span><span class="w"> </span><span class="nf">retryPolicy</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">RetryPolicy</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">maxAttempts</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">initialBackoff</span><span class="p">(</span><span class="n">Duration</span><span class="p">.</span><span class="na">ofMillis</span><span class="p">(</span><span class="mi">500</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">maxBackoff</span><span class="p">(</span><span class="n">Duration</span><span class="p">.</span><span class="na">ofSeconds</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">backoffMultiplier</span><span class="p">(</span><span class="mf">2.0</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">retryableStatusCodes</span><span class="p">(</span><span class="n">Set</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">                </span><span class="n">Status</span><span class="p">.</span><span class="na">Code</span><span class="p">.</span><span class="na">UNAVAILABLE</span><span class="p">,</span>
<span class="w">                </span><span class="n">Status</span><span class="p">.</span><span class="na">Code</span><span class="p">.</span><span class="na">DEADLINE_EXCEEDED</span><span class="p">,</span>
<span class="w">                </span><span class="n">Status</span><span class="p">.</span><span class="na">Code</span><span class="p">.</span><span class="na">INTERNAL</span>
<span class="w">            </span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h3 id="176">17.6 回路ブレーカー<a class="headerlink" href="#176" title="Permanent link">&para;</a></h3>
<details>
<summary>コード例: GrpcCircuitBreaker.java</summary>

<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * gRPC 回路ブレーカー</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">GrpcCircuitBreaker</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">enum</span><span class="w"> </span><span class="n">State</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">CLOSED</span><span class="p">,</span><span class="w">      </span><span class="c1">// 正常（リクエスト許可）</span>
<span class="w">        </span><span class="n">OPEN</span><span class="p">,</span><span class="w">        </span><span class="c1">// 遮断（リクエスト拒否）</span>
<span class="w">        </span><span class="n">HALF_OPEN</span><span class="w">    </span><span class="c1">// 試行中</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">failureThreshold</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">successThreshold</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Duration</span><span class="w"> </span><span class="n">openStateTimeout</span><span class="p">;</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">volatile</span><span class="w"> </span><span class="n">State</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">State</span><span class="p">.</span><span class="na">CLOSED</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">AtomicInteger</span><span class="w"> </span><span class="n">failureCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AtomicInteger</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">AtomicInteger</span><span class="w"> </span><span class="n">successCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AtomicInteger</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">volatile</span><span class="w"> </span><span class="n">Instant</span><span class="w"> </span><span class="n">lastFailureTime</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">allowRequest</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">CLOSED</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">OPEN</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">shouldAttemptReset</span><span class="p">();</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">HALF_OPEN</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">shouldAttemptReset</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">lastFailureTime</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Duration</span><span class="p">.</span><span class="na">between</span><span class="p">(</span><span class="n">lastFailureTime</span><span class="p">,</span><span class="w"> </span><span class="n">Instant</span><span class="p">.</span><span class="na">now</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">compareTo</span><span class="p">(</span><span class="n">openStateTimeout</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">State</span><span class="p">.</span><span class="na">HALF_OPEN</span><span class="p">;</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">recordSuccess</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">State</span><span class="p">.</span><span class="na">HALF_OPEN</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">successCount</span><span class="p">.</span><span class="na">incrementAndGet</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">successThreshold</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">reset</span><span class="p">();</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">failureCount</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">recordFailure</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">lastFailureTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Instant</span><span class="p">.</span><span class="na">now</span><span class="p">();</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">State</span><span class="p">.</span><span class="na">HALF_OPEN</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">trip</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">failureCount</span><span class="p">.</span><span class="na">incrementAndGet</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">failureThreshold</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">trip</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">trip</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">State</span><span class="p">.</span><span class="na">OPEN</span><span class="p">;</span>
<span class="w">        </span><span class="n">failureCount</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">        </span><span class="n">successCount</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">reset</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">State</span><span class="p">.</span><span class="na">CLOSED</span><span class="p">;</span>
<span class="w">        </span><span class="n">failureCount</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">        </span><span class="n">successCount</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h3 id="177">17.7 ヘルスチェックサービス<a class="headerlink" href="#177" title="Permanent link">&para;</a></h3>
<details>
<summary>コード例: HealthCheckService.java</summary>

<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * gRPC ヘルスチェックサービス</span>
<span class="cm"> */</span>
<span class="nd">@GrpcService</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">HealthCheckService</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">HealthGrpc</span><span class="p">.</span><span class="na">HealthImplBase</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">HealthCheckResponse</span><span class="p">.</span><span class="na">ServingStatus</span><span class="o">&gt;</span><span class="w"> </span><span class="n">serviceStatuses</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">ConcurrentHashMap</span><span class="o">&lt;&gt;</span><span class="p">();</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">HealthCheckService</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// デフォルトで全サービスを SERVING に設定</span>
<span class="w">        </span><span class="n">setServiceStatus</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">HealthCheckResponse</span><span class="p">.</span><span class="na">ServingStatus</span><span class="p">.</span><span class="na">SERVING</span><span class="p">);</span>
<span class="w">        </span><span class="n">setServiceStatus</span><span class="p">(</span><span class="s">&quot;com.example.sales.ProductService&quot;</span><span class="p">,</span>
<span class="w">                         </span><span class="n">HealthCheckResponse</span><span class="p">.</span><span class="na">ServingStatus</span><span class="p">.</span><span class="na">SERVING</span><span class="p">);</span>
<span class="w">        </span><span class="n">setServiceStatus</span><span class="p">(</span><span class="s">&quot;com.example.sales.OrderService&quot;</span><span class="p">,</span>
<span class="w">                         </span><span class="n">HealthCheckResponse</span><span class="p">.</span><span class="na">ServingStatus</span><span class="p">.</span><span class="na">SERVING</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">check</span><span class="p">(</span><span class="n">HealthCheckRequest</span><span class="w"> </span><span class="n">request</span><span class="p">,</span>
<span class="w">                      </span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">HealthCheckResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="n">responseObserver</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">service</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getService</span><span class="p">();</span>
<span class="w">        </span><span class="n">HealthCheckResponse</span><span class="p">.</span><span class="na">ServingStatus</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">serviceStatuses</span><span class="p">.</span><span class="na">getOrDefault</span><span class="p">(</span>
<span class="w">            </span><span class="n">service</span><span class="p">,</span>
<span class="w">            </span><span class="n">HealthCheckResponse</span><span class="p">.</span><span class="na">ServingStatus</span><span class="p">.</span><span class="na">SERVICE_UNKNOWN</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="n">HealthCheckResponse</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HealthCheckResponse</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">setStatus</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">        </span><span class="n">responseObserver</span><span class="p">.</span><span class="na">onNext</span><span class="p">(</span><span class="n">response</span><span class="p">);</span>
<span class="w">        </span><span class="n">responseObserver</span><span class="p">.</span><span class="na">onCompleted</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">watch</span><span class="p">(</span><span class="n">HealthCheckRequest</span><span class="w"> </span><span class="n">request</span><span class="p">,</span>
<span class="w">                      </span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">HealthCheckResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="n">responseObserver</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 継続的なヘルスチェック監視</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">service</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getService</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// 初期状態を送信</span>
<span class="w">        </span><span class="n">HealthCheckResponse</span><span class="p">.</span><span class="na">ServingStatus</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">serviceStatuses</span><span class="p">.</span><span class="na">getOrDefault</span><span class="p">(</span>
<span class="w">            </span><span class="n">service</span><span class="p">,</span>
<span class="w">            </span><span class="n">HealthCheckResponse</span><span class="p">.</span><span class="na">ServingStatus</span><span class="p">.</span><span class="na">SERVICE_UNKNOWN</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="n">responseObserver</span><span class="p">.</span><span class="na">onNext</span><span class="p">(</span><span class="n">HealthCheckResponse</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">setStatus</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">());</span>

<span class="w">        </span><span class="c1">// 状態変更時に通知（実装省略）</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h3 id="178">17.8 フロー制御付きストリームオブザーバー<a class="headerlink" href="#178" title="Permanent link">&para;</a></h3>
<details>
<summary>コード例: FlowControlledStreamObserver.java</summary>

<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * フロー制御付きストリームオブザーバー</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">FlowControlledStreamObserver</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">CallStreamObserver</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">delegate</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Queue</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">buffer</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">maxBufferSize</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">AtomicBoolean</span><span class="w"> </span><span class="n">completed</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">FlowControlledStreamObserver</span><span class="p">(</span><span class="n">CallStreamObserver</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">delegate</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">maxBufferSize</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">delegate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">delegate</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">buffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ConcurrentLinkedQueue</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">maxBufferSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">maxBufferSize</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">completed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AtomicBoolean</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// バックプレッシャー設定</span>
<span class="w">        </span><span class="n">delegate</span><span class="p">.</span><span class="na">setOnReadyHandler</span><span class="p">(</span><span class="k">this</span><span class="p">::</span><span class="n">drainBuffer</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onNext</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">completed</span><span class="p">.</span><span class="na">get</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">delegate</span><span class="p">.</span><span class="na">isReady</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">delegate</span><span class="p">.</span><span class="na">onNext</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">buffer</span><span class="p">.</span><span class="na">size</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">maxBufferSize</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="p">;</span><span class="w"> </span><span class="c1">// バッファ満杯時は破棄</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="n">buffer</span><span class="p">.</span><span class="na">offer</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">drainBuffer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">delegate</span><span class="p">.</span><span class="na">isReady</span><span class="p">()</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="n">buffer</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">T</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">buffer</span><span class="p">.</span><span class="na">poll</span><span class="p">();</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">delegate</span><span class="p">.</span><span class="na">onNext</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">completed</span><span class="p">.</span><span class="na">get</span><span class="p">()</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">buffer</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">delegate</span><span class="p">.</span><span class="na">onCompleted</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h2 id="part-10-d">Part 10-D のまとめ<a class="headerlink" href="#part-10-d" title="Permanent link">&para;</a></h2>
<h3 id="_2">実装した機能一覧<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>章</th>
<th>内容</th>
<th>主要技術</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>第14章: 基礎</strong></td>
<td>gRPC サーバーの基礎</td>
<td>Protocol Buffers, HTTP/2, grpc-spring-boot-starter</td>
</tr>
<tr>
<td><strong>第15章: マスタ API</strong></td>
<td>商品・取引先・倉庫マスタ</td>
<td>単項 RPC, サーバーストリーミング</td>
</tr>
<tr>
<td><strong>第16章: トランザクション API</strong></td>
<td>受注・出荷・請求処理</td>
<td>クライアントストリーミング, 双方向ストリーミング</td>
</tr>
<tr>
<td><strong>第17章: エラーハンドリング</strong></td>
<td>リトライ, 回路ブレーカー, ヘルスチェック</td>
<td>gRPC Status, インターセプター</td>
</tr>
</tbody>
</table>
<h3 id="grpc">実装した gRPC サービス<a class="headerlink" href="#grpc" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>ProductService</strong>: 商品マスタの CRUD、一覧ストリーミング、一括登録</li>
<li><strong>PartnerService</strong>: 取引先マスタの CRUD、一覧ストリーミング、与信チェック</li>
<li><strong>WarehouseService</strong>: 倉庫マスタの CRUD、在庫ストリーミング</li>
<li><strong>OrderService</strong>: 受注の CRUD、確定、キャンセル、ステータス監視、明細一括登録</li>
<li><strong>ShipmentService</strong>: 出荷指示、ピッキング、出荷確定、進捗監視、一括確定</li>
<li><strong>InvoiceService</strong>: 締処理、発行、入金記録、双方向ストリーミング処理</li>
</ul>
<h3 id="_3">アーキテクチャの特徴<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>                    ┌─────────────────────────────────────┐
                    │         プレゼンテーション層          │
                    │  ┌─────────┐  ┌─────────┐  ┌──────┐ │
                    │  │ REST API │  │ GraphQL │  │ gRPC │ │
                    │  └─────────┘  └─────────┘  └──────┘ │
                    └─────────────────────────────────────┘
                                      │
                    ┌─────────────────────────────────────┐
                    │         アプリケーション層           │
                    │  ┌──────────────────────────────┐  │
                    │  │      ユースケース / サービス     │  │
                    │  └──────────────────────────────┘  │
                    └─────────────────────────────────────┘
                                      │
                    ┌─────────────────────────────────────┐
                    │            ドメイン層               │
                    │  ┌────────┐  ┌────────┐  ┌──────┐  │
                    │  │ エンティティ │  │ 値オブジェクト │  │ リポジトリ │  │
                    │  └────────┘  └────────┘  └──────┘  │
                    └─────────────────────────────────────┘
</code></pre></div>
<p>gRPC は REST API、GraphQL と並ぶプレゼンテーション層のエンドポイントとして機能し、高性能なバイナリ通信と双方向ストリーミングにより、リアルタイム性が求められるシステム間連携に適しています。</p>
<h3 id="_4">技術スタック<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>カテゴリ</th>
<th>技術</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>言語</strong></td>
<td>Java 21</td>
</tr>
<tr>
<td><strong>フレームワーク</strong></td>
<td>Spring Boot 4.0, grpc-spring-boot-starter 3.1</td>
</tr>
<tr>
<td><strong>プロトコル</strong></td>
<td>gRPC 1.62, Protocol Buffers 3.25</td>
</tr>
<tr>
<td><strong>ORM</strong></td>
<td>MyBatis 3.0</td>
</tr>
<tr>
<td><strong>データベース</strong></td>
<td>PostgreSQL 16</td>
</tr>
<tr>
<td><strong>テスト</strong></td>
<td>JUnit 5, grpc-testing, TestContainers</td>
</tr>
</tbody>
</table>
<h3 id="api">API 形式の比較と選択基準<a class="headerlink" href="#api" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>観点</th>
<th>REST API</th>
<th>gRPC</th>
<th>GraphQL</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>用途</strong></td>
<td>汎用 Web API</td>
<td>マイクロサービス間</td>
<td>フロントエンド向け</td>
</tr>
<tr>
<td><strong>パフォーマンス</strong></td>
<td>中</td>
<td>高</td>
<td>中</td>
</tr>
<tr>
<td><strong>ストリーミング</strong></td>
<td>WebSocket 別実装</td>
<td>ネイティブ</td>
<td>Subscription</td>
</tr>
<tr>
<td><strong>スキーマ</strong></td>
<td>OpenAPI (任意)</td>
<td>.proto (必須)</td>
<td>.graphqls (必須)</td>
</tr>
<tr>
<td><strong>ブラウザ対応</strong></td>
<td>◎</td>
<td>△ (gRPC-Web)</td>
<td>◎</td>
</tr>
<tr>
<td><strong>学習コスト</strong></td>
<td>低</td>
<td>中</td>
<td>中</td>
</tr>
</tbody>
</table>
<h3 id="grpc_1">gRPC を選択する場面<a class="headerlink" href="#grpc_1" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>マイクロサービス間通信</strong>: 高性能な内部通信が必要</li>
<li><strong>リアルタイム処理</strong>: ストリーミングによる進捗通知が必要</li>
<li><strong>多言語環境</strong>: 異なる言語で実装されたサービス間の連携</li>
<li><strong>低レイテンシ</strong>: バイナリプロトコルによる高速通信が必要</li>
<li><strong>双方向通信</strong>: 対話的な処理フローが必要</li>
</ol>
<p>gRPC サービスは、既存のヘキサゴナルアーキテクチャを活かしながら、Input Adapter として追加することで、REST API と並行運用が可能です。用途に応じて適切な API 形式を選択し、システム全体の効率と柔軟性を高めることができます。</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://github.com/k2works/practical-database-design" target="_blank" rel="noopener" title="GitHub Repository" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "search.suggest", "search.highlight"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
      
        <script src="../../../docs/assets/js/extra.js"></script>
      
    
  </body>
</html>