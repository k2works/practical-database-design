
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="基幹業務システム（販売管理・財務会計・生産管理）のデータベース設計を体系的に解説">
      
      
        <meta name="author" content="k2works">
      
      
      
        <link rel="prev" href="../study4-3/">
      
      
        <link rel="next" href="../../part3-orm/chapter14-orm/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>研究4 GraphQLサービスの実装 - 実践データベース設計：基幹業務システム編</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../docs/mkdocs/assets/css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#4-graphql" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="実践データベース設計：基幹業務システム編" class="md-header__button md-logo" aria-label="実践データベース設計：基幹業務システム編" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            実践データベース設計：基幹業務システム編
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              研究4 GraphQLサービスの実装
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/k2works/practical-database-design" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    practical-database-design
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
  実践データベース設計

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="実践データベース設計：基幹業務システム編" class="md-nav__button md-logo" aria-label="実践データベース設計：基幹業務システム編" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    実践データベース設計：基幹業務システム編
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/k2works/practical-database-design" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    practical-database-design
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    実践データベース設計
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    実践データベース設計
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../techstack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    技術スタック
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../outline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    アウトライン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    執筆ワークフロー
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ops/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    運用ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6" >
        
          
          <label class="md-nav__link" for="__nav_1_6" id="__nav_1_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    デプロイ
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    デプロイ
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy-sms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SMS デモデプロイ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy-fas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FAS デモデプロイ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_7" >
        
          
          <label class="md-nav__link" for="__nav_1_7" id="__nav_1_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第1部 基幹業務システムの全体像
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    第1部 基幹業務システムの全体像
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1/chapter01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第1章 基幹業務システムとは
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1/chapter02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第2章 基幹業務システムの業務領域
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1/chapter03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第3章 業務フローの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_8" >
        
          
          <label class="md-nav__link" for="__nav_1_8" id="__nav_1_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第2部 販売管理システム
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    第2部 販売管理システム
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第4章 販売管理システムの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第5章 マスタ情報の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第6章 受注・出荷・売上の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter07/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第7章 債権管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter08/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第8章 調達管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter09/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第9章 在庫管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第10章 債務管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第11章 共通処理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第12章 販売管理データ設計（B社事例）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/chapter13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第13章 APIサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_9" >
        
          
          <label class="md-nav__link" for="__nav_1_9" id="__nav_1_9_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第3部 財務会計システム
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    第3部 財務会計システム
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第14章 財務会計システムの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第15章 勘定科目の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter16/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第16章 仕訳の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter17/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第17章 自動仕訳の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter18/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第18章 勘定科目残高の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter19/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第19章 赤黒とログの設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter20/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第20章 財務会計データ設計（D社事例）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter21/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第21章 APIサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_10" >
        
          
          <label class="md-nav__link" for="__nav_1_10" id="__nav_1_10_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第4部 生産管理システム
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    第4部 生産管理システム
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter22/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第22章 生産管理システムの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter23/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第23章 マスタ情報の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter24/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第24章 生産計画の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter25/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第25章 購買管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter26/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第26章 外注委託管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter27/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第27章 工程管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter28/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第28章 在庫管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第29章 品質管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter30/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第30章 製造原価管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter31/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第31章 生産管理データ設計（E社事例）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter32/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第32章 APIサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_11" >
        
          
          <label class="md-nav__link" for="__nav_1_11" id="__nav_1_11_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第5部 エンタープライズインテグレーション
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    第5部 エンタープライズインテグレーション
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter33.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第33章 システム統合の概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter34.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第34章 メッセージングパターン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter35.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第35章 システム間連携パターン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter36.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第36章 マスタデータ管理（MDM）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter37.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第37章 イベント駆動アーキテクチャ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter38.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第38章 API設計とサービス連携
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter39.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第39章 データ連携の実装パターン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_12" >
        
          
          <label class="md-nav__link" for="__nav_1_12" id="__nav_1_12_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 販売管理システム実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 販売管理システム実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study2-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究1 モノリスサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study2-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究2 JavaFXデスクトップアプリケーションの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study2-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究3 gRPCサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study2-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究4 GraphQLサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_13" >
        
          
          <label class="md-nav__link" for="__nav_1_13" id="__nav_1_13_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 財務会計システム実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_13">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 財務会計システム実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study3-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究1 モノリスサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study3-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究2 JavaFXデスクトップアプリケーションの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study3-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究3 gRPCサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study3-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究4 GraphQLサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_14" checked>
        
          
          <label class="md-nav__link" for="__nav_1_14" id="__nav_1_14_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 生産管理システム実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_14_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1_14">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 生産管理システム実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study4-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究1 モノリスサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study4-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究2 JavaFXデスクトップアプリケーションの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study4-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究3 gRPCサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    研究4 GraphQLサービスの実装
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    研究4 GraphQLサービスの実装
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        はじめに
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#46graphql" class="md-nav__link">
    <span class="md-ellipsis">
      
        第46章：GraphQL サーバーの基礎
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第46章：GraphQL サーバーの基礎">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#461-graphql" class="md-nav__link">
    <span class="md-ellipsis">
      
        46.1 GraphQL とは
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#462-3" class="md-nav__link">
    <span class="md-ellipsis">
      
        46.2 3つの操作タイプ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#463-graphql" class="md-nav__link">
    <span class="md-ellipsis">
      
        46.3 GraphQL におけるヘキサゴナルアーキテクチャ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#464" class="md-nav__link">
    <span class="md-ellipsis">
      
        46.4 ディレクトリ構成
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#465" class="md-nav__link">
    <span class="md-ellipsis">
      
        46.5 技術スタックの追加
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#426-graphql" class="md-nav__link">
    <span class="md-ellipsis">
      
        42.6 GraphQL スキーマ定義
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#427-api-controller" class="md-nav__link">
    <span class="md-ellipsis">
      
        42.7 API サーバー版との Controller の違い
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#47-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        第47章：マスタ API の実装
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第47章：マスタ API の実装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#471" class="md-nav__link">
    <span class="md-ellipsis">
      
        47.1 カスタムスカラーの実装
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#472-graphql-tdd" class="md-nav__link">
    <span class="md-ellipsis">
      
        47.2 品目 GraphQL リゾルバの TDD 実装
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="47.2 品目 GraphQL リゾルバの TDD 実装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#red" class="md-nav__link">
    <span class="md-ellipsis">
      
        Red: 失敗するテストを書く
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#green-graphql" class="md-nav__link">
    <span class="md-ellipsis">
      
        Green: GraphQL リゾルバの実装
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#473-n1-dataloader" class="md-nav__link">
    <span class="md-ellipsis">
      
        47.3 N+1 問題対策（DataLoader）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#474-bom-graphql" class="md-nav__link">
    <span class="md-ellipsis">
      
        47.4 BOM GraphQL リゾルバ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#48-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        第48章：トランザクション API の実装
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第48章：トランザクション API の実装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#481-graphql" class="md-nav__link">
    <span class="md-ellipsis">
      
        48.1 発注 GraphQL リゾルバ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#482-mrp-graphql" class="md-nav__link">
    <span class="md-ellipsis">
      
        48.2 MRP GraphQL リゾルバ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#483-subscription" class="md-nav__link">
    <span class="md-ellipsis">
      
        48.3 Subscription（リアルタイム更新）
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#49" class="md-nav__link">
    <span class="md-ellipsis">
      
        第49章：エラーハンドリングとベストプラクティス
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第49章：エラーハンドリングとベストプラクティス">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#491" class="md-nav__link">
    <span class="md-ellipsis">
      
        49.1 グローバル例外ハンドラ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#492" class="md-nav__link">
    <span class="md-ellipsis">
      
        49.2 入力バリデーション
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#493" class="md-nav__link">
    <span class="md-ellipsis">
      
        49.3 設定ファイル
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#494-graphql-playground" class="md-nav__link">
    <span class="md-ellipsis">
      
        49.4 GraphQL Playground からの呼び出し
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#495-graphql-vs-rest-vs-grpc" class="md-nav__link">
    <span class="md-ellipsis">
      
        49.5 GraphQL vs REST vs gRPC の使い分け
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        まとめ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="まとめ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      
        API サーバー版との比較
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#graphql" class="md-nav__link">
    <span class="md-ellipsis">
      
        実装した GraphQL 操作
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        技術スタック
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#graphql_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        GraphQL を選択すべき場面
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_15" >
        
          
          <label class="md-nav__link" for="__nav_1_15" id="__nav_1_15_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 財務会計システムORM実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_15">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 財務会計システムORM実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter14-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第14章 財務会計システムの全体像【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter15-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第15章 勘定科目の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter16-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第16章 仕訳の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter17-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第17章 自動仕訳の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter18-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第18章 勘定科目残高の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter19-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第19章 赤黒とログの設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter20-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第20章 財務会計データ設計（D社事例）【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter21-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第21章 APIサービスの実装【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_16" >
        
          
          <label class="md-nav__link" for="__nav_1_16" id="__nav_1_16_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    付録
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_16">
            <span class="md-nav__icon md-icon"></span>
            
  
    付録
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/er-diagrams.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    A 全体ER図
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/table-definitions.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    B テーブル定義一覧
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/glossary.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    C 用語集
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_17" >
        
          
          <label class="md-nav__link" for="__nav_1_17" id="__nav_1_17_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    データベース
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_17">
            <span class="md-nav__icon md-icon"></span>
            
  
    データベース
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../assets/schemaspy-output/sms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SchemaSpy ER図（SMS）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="4-graphql">実践データベース設計：生産管理システム 研究 4 - GraphQL サービスの実装<a class="headerlink" href="#4-graphql" title="Permanent link">&para;</a></h1>
<h2 id="_1">はじめに<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>本研究では、API サーバー構成（第32章）とは異なるアプローチとして、<strong>GraphQL</strong> による生産管理システムを実装します。クライアントが必要なデータを正確に指定できる柔軟なクエリと、リアルタイム更新を実現する Subscription を活用します。</p>
<p>第32章で構築したヘキサゴナルアーキテクチャ（ドメイン層・アプリケーション層）はそのまま共有し、<strong>Input Adapter として GraphQL リゾルバ層のみを追加</strong>します。</p>
<hr />
<h2 id="46graphql">第46章：GraphQL サーバーの基礎<a class="headerlink" href="#46graphql" title="Permanent link">&para;</a></h2>
<h3 id="461-graphql">46.1 GraphQL とは<a class="headerlink" href="#461-graphql" title="Permanent link">&para;</a></h3>
<p>GraphQL は Facebook が開発したクエリ言語および実行エンジンです。クライアントが必要なデータの形状を指定でき、Over-fetching や Under-fetching を防ぎます。</p>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjgwMnB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NDU1cHg7aGVpZ2h0OjgwMnB4O2JhY2tncm91bmQ6I0ZFRkVGRTsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDQ1NSA4MDIiIHdpZHRoPSI0NTVweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjxyZWN0IGZpbGw9IiNGRUZFRkUiIGhlaWdodD0iODAyIiBzdHlsZT0ic3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNDU1IiB4PSIwIiB5PSIwIi8+PCEtLWNsdXN0ZXIgR3JhcGhRTCBBcmNoaXRlY3R1cmUgKD8/Pz8/Pz8/KS0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLXF1YWxpZmllZC1uYW1lPSJHcmFwaFFMIEFyY2hpdGVjdHVyZSAuLi4uLi4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSI1IiBpZD0iZW50MDAwMiI+PHBhdGggZD0iTTguNSw2IEwzMTEuMDQ2NCw2IEEzLjc1LDMuNzUgMCAwIDEgMzEzLjU0NjQsOC41IEwzMjAuNTQ2NCwyOC4yOTY5IEw0MzguNSwyOC4yOTY5IEEyLjUsMi41IDAgMCAxIDQ0MSwzMC43OTY5IEw0NDEsNjkwLjI1IEEyLjUsMi41IDAgMCAxIDQzOC41LDY5Mi43NSBMOC41LDY5Mi43NSBBMi41LDIuNSAwIDAgMSA2LDY5MC4yNSBMNiw4LjUgQTIuNSwyLjUgMCAwIDEgOC41LDYiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjYiIHgyPSIzMjAuNTQ2NCIgeTE9IjI4LjI5NjkiIHkyPSIyOC4yOTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjMwMS41NDY0IiB4PSIxMCIgeT0iMjAuOTk1MSI+R3JhcGhRTCBBcmNoaXRlY3R1cmUgKCYjMjk5ODM7JiMyOTk4NzsmIzMxNjQ5OyYjMjk3MDI7JiMxMjQ3MTsmIzEyNDczOyYjMTI0ODY7JiMxMjUxMjspPC90ZXh0PjwvZz48IS0tY2x1c3RlciBDbGllbnQgU2lkZS0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLXF1YWxpZmllZC1uYW1lPSJHcmFwaFFMIEFyY2hpdGVjdHVyZSAuLi4uLi4uLi4uLkNsaWVudCBTaWRlIiBkYXRhLXNvdXJjZS1saW5lPSI3IiBpZD0iZW50MDAwMyI+PHBhdGggZD0iTTEwMy41LDQ5IEwxODkuNzk4OCw0OSBBMy43NSwzLjc1IDAgMCAxIDE5Mi4yOTg4LDUxLjUgTDE5OS4yOTg4LDcxLjI5NjkgTDM0Mi41LDcxLjI5NjkgQTIuNSwyLjUgMCAwIDEgMzQ1LDczLjc5NjkgTDM0NSwyMDQuOTkgQTIuNSwyLjUgMCAwIDEgMzQyLjUsMjA3LjQ5IEwxMDMuNSwyMDcuNDkgQTIuNSwyLjUgMCAwIDEgMTAxLDIwNC45OSBMMTAxLDUxLjUgQTIuNSwyLjUgMCAwIDEgMTAzLjUsNDkiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjEwMSIgeDI9IjE5OS4yOTg4IiB5MT0iNzEuMjk2OSIgeTI9IjcxLjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODUuMjk4OCIgeD0iMTA1IiB5PSI2My45OTUxIj5DbGllbnQgU2lkZTwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgU2VydmVyIFNpZGUtLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iR3JhcGhRTCBBcmNoaXRlY3R1cmUgLi4uLi4uLi4uLi5TZXJ2ZXIgU2lkZSIgZGF0YS1zb3VyY2UtbGluZT0iMTUiIGlkPSJlbnQwMDA1Ij48cGF0aCBkPSJNMzIuNSwyNzEuNDkgTDEyNC43ODAzLDI3MS40OSBBMy43NSwzLjc1IDAgMCAxIDEyNy4yODAzLDI3My45OSBMMTM0LjI4MDMsMjkzLjc4NjkgTDI0OS41LDI5My43ODY5IEEyLjUsMi41IDAgMCAxIDI1MiwyOTYuMjg2OSBMMjUyLDQyNy40NyBBMi41LDIuNSAwIDAgMSAyNDkuNSw0MjkuOTcgTDMyLjUsNDI5Ljk3IEEyLjUsMi41IDAgMCAxIDMwLDQyNy40NyBMMzAsMjczLjk5IEEyLjUsMi41IDAgMCAxIDMyLjUsMjcxLjQ5IiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHgxPSIzMCIgeDI9IjEzNC4yODAzIiB5MT0iMjkzLjc4NjkiIHkyPSIyOTMuNzg2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5MS4yODAzIiB4PSIzNCIgeT0iMjg2LjQ4NTEiPlNlcnZlciBTaWRlPC90ZXh0PjwvZz48IS0tY2x1c3RlciBTaGFyZWQtLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iR3JhcGhRTCBBcmNoaXRlY3R1cmUgLi4uLi4uLi4uLi5TaGFyZWQiIGRhdGEtc291cmNlLWxpbmU9IjIzIiBpZD0iZW50MDAwNyI+PHBhdGggZD0iTTEwOS41LDQ5My45NyBMMTY2LjQxOCw0OTMuOTcgQTMuNzUsMy43NSAwIDAgMSAxNjguOTE4LDQ5Ni40NyBMMTc1LjkxOCw1MTYuMjY2OSBMMzM2LjUsNTE2LjI2NjkgQTIuNSwyLjUgMCAwIDEgMzM5LDUxOC43NjY5IEwzMzksNjY2LjI1IEEyLjUsMi41IDAgMCAxIDMzNi41LDY2OC43NSBMMTA5LjUsNjY4Ljc1IEEyLjUsMi41IDAgMCAxIDEwNyw2NjYuMjUgTDEwNyw0OTYuNDcgQTIuNSwyLjUgMCAwIDEgMTA5LjUsNDkzLjk3IiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHgxPSIxMDciIHgyPSIxNzUuOTE4IiB5MT0iNTE2LjI2NjkiIHkyPSI1MTYuMjY2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45MTgiIHg9IjExMSIgeT0iNTA4Ljk2NTEiPlNoYXJlZDwvdGV4dD48L2c+PCEtLWNsYXNzIGNsaWVudC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkdyYXBoUUwgQXJjaGl0ZWN0dXJlIC4uLi4uLi4uLi4uQ2xpZW50IFNpZGUuY2xpZW50IiBkYXRhLXNvdXJjZS1saW5lPSI4IiBpZD0iZW50MDAwNCI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMDcuNDg0NCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMjEyLjM2MSIgeD0iMTE2LjgyIiB5PSI4NCIvPjxlbGxpcHNlIGN4PSIxNTQuMzc4MyIgY3k9IjEwNS4yOTY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0xNTcuMzQ3LDExMC45Mzc1IFExNTYuNzY4OSwxMTEuMjM0NCAxNTYuMTI4MywxMTEuMzc1IFExNTUuNDg3NywxMTEuNTMxMyAxNTQuNzg0NSwxMTEuNTMxMyBRMTUyLjI4NDUsMTExLjUzMTMgMTUwLjk1NjQsMTA5Ljg5MDYgUTE0OS42NDM5LDEwOC4yMzQ0IDE0OS42NDM5LDEwNS4xMDk0IFExNDkuNjQzOSwxMDEuOTg0NCAxNTAuOTU2NCwxMDAuMzI4MSBRMTUyLjI4NDUsOTguNjcxOSAxNTQuNzg0NSw5OC42NzE5IFExNTUuNDg3Nyw5OC42NzE5IDE1Ni4xMjgzLDk4LjgyODEgUTE1Ni43ODQ1LDk4Ljk4NDQgMTU3LjM0Nyw5OS4yODEzIEwxNTcuMzQ3LDEwMiBRMTU2LjcyMiwxMDEuNDIxOSAxNTYuMTI4MywxMDEuMTU2MyBRMTU1LjUzNDUsMTAwLjg3NSAxNTQuOTA5NSwxMDAuODc1IFExNTMuNTY1OCwxMDAuODc1IDE1Mi44NzgzLDEwMS45NTMxIFExNTIuMTkwOCwxMDMuMDE1NiAxNTIuMTkwOCwxMDUuMTA5NCBRMTUyLjE5MDgsMTA3LjIwMzEgMTUyLjg3ODMsMTA4LjI4MTMgUTE1My41NjU4LDEwOS4zNDM4IDE1NC45MDk1LDEwOS4zNDM4IFExNTUuNTM0NSwxMDkuMzQzOCAxNTYuMTI4MywxMDkuMDc4MSBRMTU2LjcyMiwxMDguNzk2OSAxNTcuMzQ3LDEwOC4yMTg4IEwxNTcuMzQ3LDExMC45Mzc1IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA2Ljc0MzIiIHg9IjE4NS4xMzU0IiB5PSIxMDEuOTk1MSI+R3JhcGhRTCBDbGllbnQ8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMwLjIzMTQiIHg9IjE3My4zOTEyIiB5PSIxMTguMjkyIj4oQXBvbGxvL1JlbGF5L3VycWwpPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjExNy44MiIgeDI9IjMyOC4xODEiIHkxPSIxMjYuNTkzOCIgeTI9IjEyNi41OTM4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMTE3LjgyIiB4Mj0iMzI4LjE4MSIgeTE9IjEzNC41OTM4IiB5Mj0iMTM0LjU5MzgiLz48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IlBSSVZBVEVfTUVUSE9EIj48cmVjdCBmaWxsPSIjRjI0RDVDIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIxMjQuODIiIHk9IjE0NS4yNDIyIi8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExMy45MjA3IiB4PSIxMzYuODIiIHk9IjE1MS41ODg5Ij5RdWVyeSAoJiMzNTUwMTsmIzEyNDE1OyYjMjE0NjI7JiMxMjQyNjspPC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFJJVkFURV9NRVRIT0QiPjxyZWN0IGZpbGw9IiNGMjRENUMiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjEyNC44MiIgeT0iMTYxLjUzOTEiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMzLjIxMTciIHg9IjEzNi44MiIgeT0iMTY3Ljg4NTciPk11dGF0aW9uICgmIzI2MzYwOyYjMTIzNjU7JiMzNjc5NjsmIzEyNDE1Oyk8L3RleHQ+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJQUklWQVRFX01FVEhPRCI+PHJlY3QgZmlsbD0iI0YyNEQ1QyIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMTI0LjgyIiB5PSIxNzcuODM1OSIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxODYuMzYxIiB4PSIxMzYuODIiIHk9IjE4NC4xODI2Ij5TdWJzY3JpcHRpb24gKCYjMTI1MjI7JiMxMjQ1MDsmIzEyNTIzOyYjMTI0Nzk7JiMxMjQ1MjsmIzEyNTEyOyk8L3RleHQ+PC9nPjwhLS1jbGFzcyBzZXJ2ZXItLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJHcmFwaFFMIEFyY2hpdGVjdHVyZSAuLi4uLi4uLi4uLlNlcnZlciBTaWRlLnNlcnZlciIgZGF0YS1zb3VyY2UtbGluZT0iMTYiIGlkPSJlbnQwMDA2Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjEwNy40ODQ0IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxOTAuOTAzMyIgeD0iNDUuNTUiIHk9IjMwNi40OSIvPjxlbGxpcHNlIGN4PSI2Ni4zNDk1IiBjeT0iMzI3Ljc4NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTY5LjMxODIsMzMzLjQyNzUgUTY4Ljc0MDEsMzMzLjcyNDQgNjguMDk5NSwzMzMuODY1IFE2Ny40NTg4LDMzNC4wMjEyIDY2Ljc1NTcsMzM0LjAyMTIgUTY0LjI1NTcsMzM0LjAyMTIgNjIuOTI3NiwzMzIuMzgwNiBRNjEuNjE1MSwzMzAuNzI0NCA2MS42MTUxLDMyNy41OTk0IFE2MS42MTUxLDMyNC40NzQ0IDYyLjkyNzYsMzIyLjgxODEgUTY0LjI1NTcsMzIxLjE2MTkgNjYuNzU1NywzMjEuMTYxOSBRNjcuNDU4OCwzMjEuMTYxOSA2OC4wOTk1LDMyMS4zMTgxIFE2OC43NTU3LDMyMS40NzQ0IDY5LjMxODIsMzIxLjc3MTIgTDY5LjMxODIsMzI0LjQ5IFE2OC42OTMyLDMyMy45MTE5IDY4LjA5OTUsMzIzLjY0NjIgUTY3LjUwNTcsMzIzLjM2NSA2Ni44ODA3LDMyMy4zNjUgUTY1LjUzNywzMjMuMzY1IDY0Ljg0OTUsMzI0LjQ0MzEgUTY0LjE2MiwzMjUuNTA1NiA2NC4xNjIsMzI3LjU5OTQgUTY0LjE2MiwzMjkuNjkzMSA2NC44NDk1LDMzMC43NzEyIFE2NS41MzcsMzMxLjgzMzcgNjYuODgwNywzMzEuODMzNyBRNjcuNTA1NywzMzEuODMzNyA2OC4wOTk1LDMzMS41NjgxIFE2OC42OTMyLDMzMS4yODY5IDY5LjMxODIsMzMwLjcwODcgTDY5LjMxODIsMzMzLjQyNzUgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTIuMTIzIiB4PSI5OC41ODQ1IiB5PSIzMjQuNDg1MSI+R3JhcGhRTCBTZXJ2ZXI8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQ2LjAxNTYiIHg9IjgxLjYzODIiIHk9IjM0MC43ODIiPihTcHJpbmcgZm9yIEdyYXBoUUwpPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjQ2LjU1IiB4Mj0iMjM1LjQ1MzMiIHkxPSIzNDkuMDgzNyIgeTI9IjM0OS4wODM3Ii8+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJQUklWQVRFX0ZJRUxEIj48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSI1My41NSIgeT0iMzU5LjczMjIiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTIuNjEzMyIgeD0iNjUuNTUiIHk9IjM2Ni4wNzg5Ij5JdGVtUmVzb2x2ZXI8L3RleHQ+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJQUklWQVRFX0ZJRUxEIj48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSI1My41NSIgeT0iMzc2LjAyOTEiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTY0LjkwMzMiIHg9IjY1LjU1IiB5PSIzODIuMzc1NyI+UHVyY2hhc2VPcmRlclJlc29sdmVyPC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFJJVkFURV9GSUVMRCI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iNTMuNTUiIHk9IjM5Mi4zMjU5Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg3LjQ2NTgiIHg9IjY1LjU1IiB5PSIzOTguNjcyNiI+TXJwUmVzb2x2ZXI8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iNDYuNTUiIHgyPSIyMzUuNDUzMyIgeTE9IjQwNS45NzQ0IiB5Mj0iNDA1Ljk3NDQiLz48L2c+PCEtLWNsYXNzIHNjaGVtYS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkdyYXBoUUwgQXJjaGl0ZWN0dXJlIC4uLi4uLi4uLi4uU2hhcmVkLnNjaGVtYSIgZGF0YS1zb3VyY2UtbGluZT0iMjQiIGlkPSJlbnQwMDA4Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjEyMy43ODEzIiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIyMDAuNjUxNCIgeD0iMTIyLjY3IiB5PSI1MjguOTciLz48ZWxsaXBzZSBjeD0iMTU4LjQzODEiIGN5PSI1NTAuMjY2OSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMTYxLjQwNjksNTU1LjkwNzUgUTE2MC44Mjg3LDU1Ni4yMDQ0IDE2MC4xODgxLDU1Ni4zNDUgUTE1OS41NDc1LDU1Ni41MDEyIDE1OC44NDQ0LDU1Ni41MDEyIFExNTYuMzQ0NCw1NTYuNTAxMiAxNTUuMDE2Miw1NTQuODYwNiBRMTUzLjcwMzcsNTUzLjIwNDQgMTUzLjcwMzcsNTUwLjA3OTQgUTE1My43MDM3LDU0Ni45NTQ0IDE1NS4wMTYyLDU0NS4yOTgxIFExNTYuMzQ0NCw1NDMuNjQxOSAxNTguODQ0NCw1NDMuNjQxOSBRMTU5LjU0NzUsNTQzLjY0MTkgMTYwLjE4ODEsNTQzLjc5ODEgUTE2MC44NDQ0LDU0My45NTQ0IDE2MS40MDY5LDU0NC4yNTEyIEwxNjEuNDA2OSw1NDYuOTcgUTE2MC43ODE5LDU0Ni4zOTE5IDE2MC4xODgxLDU0Ni4xMjYyIFExNTkuNTk0NCw1NDUuODQ1IDE1OC45Njk0LDU0NS44NDUgUTE1Ny42MjU2LDU0NS44NDUgMTU2LjkzODEsNTQ2LjkyMzEgUTE1Ni4yNTA2LDU0Ny45ODU2IDE1Ni4yNTA2LDU1MC4wNzk0IFExNTYuMjUwNiw1NTIuMTczMSAxNTYuOTM4MSw1NTMuMjUxMiBRMTU3LjYyNTYsNTU0LjMxMzcgMTU4Ljk2OTQsNTU0LjMxMzcgUTE1OS41OTQ0LDU1NC4zMTM3IDE2MC4xODgxLDU1NC4wNDgxIFExNjAuNzgxOSw1NTMuNzY2OSAxNjEuNDA2OSw1NTMuMTg4NyBMMTYxLjQwNjksNTU1LjkwNzUgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjIuNSIgeD0iMTc3LjA1MzMiIHk9IjU0Ni45NjUxIj5HcmFwaFFMIFNjaGVtYTwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDkuNDkxMiIgeD0iMTgzLjU1NzYiIHk9IjU2My4yNjIiPiguZ3JhcGhxbHMgZmlsZXMpPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjEyMy42NyIgeDI9IjMyMi4zMjE0IiB5MT0iNTcxLjU2MzciIHkyPSI1NzEuNTYzNyIvPjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFJJVkFURV9GSUVMRCI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMTMwLjY3IiB5PSI1ODIuMjEyMiIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjAuMTk2MyIgeD0iMTQyLjY3IiB5PSI1ODguNTU4OSI+c2NoZW1hLmdyYXBocWxzPC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFJJVkFURV9GSUVMRCI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMTMwLjY3IiB5PSI1OTguNTA5MSIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ny4xMzE4IiB4PSIxNDIuNjciIHk9IjYwNC44NTU3Ij5pdGVtLmdyYXBocWxzPC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFJJVkFURV9GSUVMRCI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMTMwLjY3IiB5PSI2MTQuODA1OSIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNzQuNjUxNCIgeD0iMTQyLjY3IiB5PSI2MjEuMTUyNiI+cHVyY2hhc2Vfb3JkZXIuZ3JhcGhxbHM8L3RleHQ+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJQUklWQVRFX0ZJRUxEIj48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIxMzAuNjciIHk9IjYzMS4xMDI4Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjkzLjc4MjIiIHg9IjE0Mi42NyIgeT0iNjM3LjQ0OTUiPm1ycC5ncmFwaHFsczwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxMjMuNjciIHgyPSIzMjIuMzIxNCIgeTE9IjY0NC43NTEyIiB5Mj0iNjQ0Ljc1MTIiLz48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iR01OMTIiIGRhdGEtc291cmNlLWxpbmU9IjM4IiBpZD0iZW50MDAxMyI+PHBhdGggZD0iTTEyMS41LDczOS43NSBMMTIxLjUsNzk1LjE0ODQgQTAsMCAwIDAgMCAxMjEuNSw3OTUuMTQ4NCBMMzI0LjUwMDIsNzk1LjE0ODQgQTAsMCAwIDAgMCAzMjQuNTAwMiw3OTUuMTQ4NCBMMzI0LjUwMDIsNzQ5Ljc1IEwzMTQuNTAwMiw3MzkuNzUgTDIyNyw3MzkuNzUgTDIyMyw2NTIuOTIgTDIxOSw3MzkuNzUgTDEyMS41LDczOS43NSBBMCwwIDAgMCAwIDEyMS41LDczOS43NSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTMxNC41MDAyLDczOS43NSBMMzE0LjUwMDIsNzQ5Ljc1IEwzMjQuNTAwMiw3NDkuNzUgTDMxNC41MDAyLDczOS43NSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA0LjAwMDEiIHg9IjEyNy41IiB5PSI3NTYuODE2OSI+JiMxMjQ3MzsmIzEyNDYxOyYjMTI1NDA7JiMxMjUxMDsmIzM5MzY2OyYjMjEyMDU7JiMzODI4MzsmIzMwMzMwOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxODIuMDAwMiIgeD0iMTI3LjUiIHk9Ijc3MS45NDk3Ij4mIzEyNDYzOyYjMTI1MjE7JiMxMjQ1MjsmIzEyNDUwOyYjMTI1MzE7JiMxMjQ4ODsmIzIwMDI3OyYjMjM1NjY7JiMxMjM5ODsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsmIzIxNDYyOyYjMjQ0NzE7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc2LjY5ODgiIHg9IjEyNy41IiB5PSI3ODcuMDgyNSI+JiMyMjQxMTsmIzIzNDMzOyYjMjA4NDA7JiMxMjM5NDsgQVBJPC90ZXh0PjwvZz48IS0tbGluayBjbGllbnQgdG8gc2NoZW1hLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDQiIGRhdGEtZW50aXR5LTI9ImVudDAwMDgiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSIzMyIgaWQ9ImxuazkiPjxwYXRoIGNvZGVMaW5lPSIzMyIgZD0iTTI4Mi4xMSwxOTEuNTcgQzI4OS44MiwyMDEuMzYgMjk2LjU3LDIxMi4xMiAzMDEsMjIzLjQ5IEMzNDIuMTEsMzI4Ljg1IDMzNC45LDM3MC4wNyAzMDEsNDc3Ljk3IEMyOTUuNDMsNDk1LjcgMjg5LjI4ODgsNTA4LjEwMTUgMjc4LjgwODgsNTIzLjY4MTUiIGZpbGw9Im5vbmUiIGlkPSJjbGllbnQtdG8tc2NoZW1hIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyNzUuNDYsNTI4LjY2LDI4My44MDIyLDUyMy40MjQ4LDI3OC4yNTA3LDUyNC41MTEzLDI3Ny4xNjQyLDUxOC45NTk3LDI3NS40Niw1MjguNjYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTcuMDAwMSIgeD0iMzMwLjE5IiB5PSIzNTcuMjk2OSI+JiMxMjQ3MzsmIzEyNDYxOyYjMTI1NDA7JiMxMjUxMDsmIzEyMzk1OyYjMjI1MjI7JiMxMjM4OTsmIzEyMzU2OyYjMTIzOTA7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc4LjAwMDEiIHg9IjM0OS42OSIgeT0iMzcyLjQyOTciPiYjMTI0NjM7JiMxMjQ1NjsmIzEyNTIyOyYjMTI0MzQ7JiMyNzA4MzsmIzMxNjg5OzwvdGV4dD48L2c+PCEtLWxpbmsgc2VydmVyIHRvIHNjaGVtYS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDA2IiBkYXRhLWVudGl0eS0yPSJlbnQwMDA4IiBkYXRhLWxpbmstdHlwZT0iZGVwZW5kZW5jeSIgZGF0YS1zb3VyY2UtbGluZT0iMzQiIGlkPSJsbmsxMCI+PHBhdGggY29kZUxpbmU9IjM0IiBkPSJNMTU2LjkyLDQxNC40IEMxNjMuMTcsNDM0LjQ0IDE3MC42LDQ1Ny4zNiAxNzgsNDc3Ljk3IEMxODMuOTQsNDk0LjUyIDE4OC41OTQsNTA2LjY5MjIgMTk1LjE2NCw1MjMuMDUyMiIgZmlsbD0ibm9uZSIgaWQ9InNlcnZlci10by1zY2hlbWEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE5Ny40LDUyOC42MiwxOTcuNzU3OSw1MTguNzc3NiwxOTUuNTM2Nyw1MjMuOTgwMiwxOTAuMzM0Miw1MjEuNzU4OSwxOTcuNCw1MjguNjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTcuMDAwMSIgeD0iMTc5IiB5PSI0NTkuMDM2OSI+JiMxMjQ3MzsmIzEyNDYxOyYjMTI1NDA7JiMxMjUxMDsmIzEyMzk1OyYjMjI1MjI7JiMxMjM4OTsmIzEyMzU2OyYjMTIzOTA7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjkxLjAwMDEiIHg9IjE5MiIgeT0iNDc0LjE2OTciPiYjMTI1MjI7JiMxMjQ3ODsmIzEyNTIzOyYjMTI0OTY7JiMxMjQzNDsmIzIzNDU1OyYjMzUwMTM7PC90ZXh0PjwvZz48IS0tbGluayBjbGllbnQgdG8gc2VydmVyLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDQiIGRhdGEtZW50aXR5LTI9ImVudDAwMDYiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSIzNSIgaWQ9ImxuazExIj48cGF0aCBjb2RlTGluZT0iMzUiIGQ9Ik0xOTUuNzc1MiwxOTcuMjEyNiBDMTkxLjE4NTIsMjA3LjY1MjYgMTg5LDIxMy4xIDE4NSwyMjMuNDkgQzE3NC42MywyNTAuNDIgMTY2LjM3MzUsMjc1LjIyMTIgMTU4LjUwMzUsMzAwLjUwMTIiIGZpbGw9Im5vbmUiIGlkPSJjbGllbnQtc2VydmVyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxOTguMTksMTkxLjcyLDE5MC45MDYsMTk4LjM0OSwxOTYuMTc3NiwxOTYuMjk3MiwxOTguMjI5NSwyMDEuNTY4OCwxOTguMTksMTkxLjcyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxNTYuNzIsMzA2LjIzLDE2My4yMTQ0LDI5OC44MjU4LDE1OC4yMDYyLDMwMS40NTYsMTU1LjU3NiwyOTYuNDQ3OCwxNTYuNzIsMzA2LjIzIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTEwLjk1NyIgeD0iMTg2IiB5PSIyMzYuNTU2OSI+SFRUUC9XZWJTb2NrZXQ8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDIuMTg2NSIgeD0iMjIwLjM4NTMiIHk9IjI1MS42ODk3Ij4oSlNPTik8L3RleHQ+PC9nPjw/cGxhbnR1bWwtc3JjIGJQQlZRekRHNUNWVnhyem5aSV9qRy1zeFk1MUFkUEZ6dzlnMkJtRDlhemlzRENkRFJYOVhaM3FhU1RMUHIyNXA4aUFnSmp0aU0yVnV1OW9aLXNFRU1SaF9tZGtSaDJzMldqb05VeXh0dGtfdlNDd3ZmZjZ3Ulg1U0FITWhYT01Qa0g5TTNTTG40NzlRa2NLaEozNW5KTDVSM0tPeklvaklXcDl5X0t2OTc4SGlCWVdEV2dLUGZqWkRmSmJTTzZmSlR1ZGdVZXBXSkJwVFpSVnR1bHh4VUFpRG1OUzhWYTNPWGwxVExpOWhLdi1CWGF1aTV5a3dIZUdtMEhkUjlZLU1oS3AxZmVQMXluTFlBQWp2WndxT3Q0Zm5FRjc4T0d0Ynk5OTdzMmhFMzdqN3U5ejdCdE9XVTloYndOZEZMTG9UTVpYcHlWTzRfNlYzbUhkTlhJOXhES1Ria2ZzZTRGT1ctMDNYOEdKZDQ3bUtpNllUZG1jakpEWDNtbHY1Y3hwV2pCQkRUQWsxd3huYmdQUldFZWM1bTlycllMYVgzWkx1V2VUYlpwVEdTU1dZcW1ZUm9peXBVbnB6V1RESzZENy1IZzhzWVFibWFYaURhTGFuNzVwTjNVQWE2MkRyWDk1U253enVYYV9IZDh4amJFbTE1TVpKWWlkaUlSWVV1QUszb1VMa05yTXZZSUtuXy0wOG1aQzhUeTRfWkJnZHU3eTJfbjd1ZHZTajI4dVhFMVlyXy1ONVZZUy10ZkhHc2dWX1NIN18xczl5dUhPdFlsaFR1VHc2VDhMcFEtSUtjN0Fka3pMZ0VOLVZyNklnamVaT2hkbG91YTlNR2lZWUJpNHJ3aGhLbkJJVXJhUkpYSV90c3I3ZHJVTEU5dHZwWVdIdy00TGlZellTUm4wLS1OTm9DX2h3N0ZtLVg4XzVYcTFpT1pIdVpRQlRKakpWWjNPRW1FX1hHZGFNNEtsM2Vqbmw/PjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<p><strong>REST API / gRPC との比較：</strong></p>
<table>
<thead>
<tr>
<th>特徴</th>
<th>REST API</th>
<th>gRPC</th>
<th>GraphQL</th>
</tr>
</thead>
<tbody>
<tr>
<td>プロトコル</td>
<td>HTTP/1.1</td>
<td>HTTP/2</td>
<td>HTTP/1.1 or HTTP/2</td>
</tr>
<tr>
<td>データ形式</td>
<td>JSON</td>
<td>Protocol Buffers</td>
<td>JSON</td>
</tr>
<tr>
<td>スキーマ</td>
<td>OpenAPI (任意)</td>
<td>.proto (必須)</td>
<td>.graphqls (必須)</td>
</tr>
<tr>
<td>データ取得</td>
<td>固定レスポンス</td>
<td>固定レスポンス</td>
<td>クライアント指定</td>
</tr>
<tr>
<td>エンドポイント</td>
<td>複数</td>
<td>複数</td>
<td>単一</td>
</tr>
<tr>
<td>リアルタイム</td>
<td>WebSocket 別実装</td>
<td>ストリーミング</td>
<td>Subscription</td>
</tr>
<tr>
<td>主な用途</td>
<td>汎用 API</td>
<td>マイクロサービス</td>
<td>フロントエンド向け</td>
</tr>
</tbody>
</table>
<h3 id="462-3">46.2 3つの操作タイプ<a class="headerlink" href="#462-3" title="Permanent link">&para;</a></h3>
<p>GraphQL は 3 つの操作タイプをサポートします：</p>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjIxNXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MTUwNnB4O2hlaWdodDoyMTVweDtiYWNrZ3JvdW5kOiNGRUZFRkU7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxNTA2IDIxNSIgd2lkdGg9IjE1MDZweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjxyZWN0IGZpbGw9IiNGRUZFRkUiIGhlaWdodD0iMjE1IiBzdHlsZT0ic3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTUwNiIgeD0iMCIgeT0iMCIvPjwhLS1jbHVzdGVyIHF1ZXJ5LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9InF1ZXJ5IiBkYXRhLXNvdXJjZS1saW5lPSIzIiBpZD0iZW50MDAwMiI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIyMDIuMDkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIzNjUiIHg9IjciIHk9IjciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjcuMzI3MSIgeD0iMTU1LjgzNjQiIHk9IjIxLjk5NTEiPjEuIFF1ZXJ5PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OC43OTY2IiB4PSIxNTUuMTAxNyIgeT0iMzguMjkyIj4oJiMzNTUwMTsmIzEyNDE1OyYjMjE0NjI7JiMxMjQyNjspPC90ZXh0PjwvZz48IS0tY2x1c3RlciBtdXRhdGlvbi0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLXF1YWxpZmllZC1uYW1lPSJtdXRhdGlvbiIgZGF0YS1zb3VyY2UtbGluZT0iOCIgaWQ9ImVudDAwMDciPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMjAyLjA5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNDI1IiB4PSIzOTYiIHk9IjciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTEuMDQ3OSIgeD0iNTYyLjk3NjEiIHk9IjIxLjk5NTEiPjIuIE11dGF0aW9uPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OC43OTY2IiB4PSI1NzQuMTAxNyIgeT0iMzguMjkyIj4oJiMyNjM2MDsmIzEyMzY1OyYjMzY3OTY7JiMxMjQxNTspPC90ZXh0PjwvZz48IS0tY2x1c3RlciBzdWJzY3JpcHRpb24tLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1xdWFsaWZpZWQtbmFtZT0ic3Vic2NyaXB0aW9uIiBkYXRhLXNvdXJjZS1saW5lPSIxMyIgaWQ9ImVudDAwMTIiPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMjAyLjA5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNjU1IiB4PSI4NDUiIHk9IjciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTE5LjQzNzUiIHg9IjExMTIuNzgxMyIgeT0iMjEuOTk1MSI+My4gU3Vic2NyaXB0aW9uPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ni43OTY1IiB4PSIxMTI0LjEwMTciIHk9IjM4LjI5MiI+KCYjMTI1MjI7JiMxMjQ1MDsmIzEyNTIzOyYjMTI0Nzk7JiMxMjQ1MjsmIzEyNTEyOyk8L3RleHQ+PC9nPjwhLS1lbnRpdHkgQ2xpZW50LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0icXVlcnkuQ2xpZW50IiBkYXRhLXNvdXJjZS1saW5lPSI0IiBpZD0iZW50MDAwMyI+PGVsbGlwc2UgY3g9IjE1OS45OTkyIiBjeT0iNzIuNTIzNiIgZmlsbD0iI0YxRjFGMSIgcng9IjMxLjY1OTIiIHJ5PSIxNC41MjM2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MC41MzAzIiB4PSIxMzkuNzM0MSIgeT0iNzcuMTcyMSI+Q2xpZW50PC90ZXh0PjwvZz48IS0tZW50aXR5IFNlcnZlci0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9InF1ZXJ5LlNlcnZlciIgZGF0YS1zb3VyY2UtbGluZT0iNCIgaWQ9ImVudDAwMDQiPjxlbGxpcHNlIGN4PSIxNjAuMDAzNCIgY3k9IjE3OC41NzM2IiBmaWxsPSIjRjFGMUYxIiByeD0iMzUuNDYzNCIgcnk9IjE0LjUyMzYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ1LjkxMDIiIHg9IjEzNy4wNDgzIiB5PSIxODMuMjIyMSI+U2VydmVyPC90ZXh0PjwvZz48IS0tZW50aXR5IENsaWVudDItLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJtdXRhdGlvbi5DbGllbnQyIiBkYXRhLXNvdXJjZS1saW5lPSI5IiBpZD0iZW50MDAwOCI+PGVsbGlwc2UgY3g9IjU1OS45OTc2IiBjeT0iNzIuNTIzNiIgZmlsbD0iI0YxRjFGMSIgcng9IjM3Ljk1NzYiIHJ5PSIxNC41MjM2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0OS40Mzc1IiB4PSI1MzUuMjc4OCIgeT0iNzcuMTcyMSI+Q2xpZW50MjwvdGV4dD48L2c+PCEtLWVudGl0eSBTZXJ2ZXIyLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0ibXV0YXRpb24uU2VydmVyMiIgZGF0YS1zb3VyY2UtbGluZT0iOSIgaWQ9ImVudDAwMDkiPjxlbGxpcHNlIGN4PSI1NjIuMDAxNyIgY3k9IjE3OC41NzM2IiBmaWxsPSIjRjFGMUYxIiByeD0iNDEuNzYxNyIgcnk9IjE0LjUyMzYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU0LjgxNzQiIHg9IjUzNC41OTMxIiB5PSIxODMuMjIyMSI+U2VydmVyMjwvdGV4dD48L2c+PCEtLWVudGl0eSBDbGllbnQzLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0ic3Vic2NyaXB0aW9uLkNsaWVudDMiIGRhdGEtc291cmNlLWxpbmU9IjE0IiBpZD0iZW50MDAxMyI+PGVsbGlwc2UgY3g9IjExMzUuOTk3NiIgY3k9IjcyLjUyMzYiIGZpbGw9IiNGMUYxRjEiIHJ4PSIzNy45NTc2IiByeT0iMTQuNTIzNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDkuNDM3NSIgeD0iMTExMS4yNzg4IiB5PSI3Ny4xNzIxIj5DbGllbnQzPC90ZXh0PjwvZz48IS0tZW50aXR5IFNlcnZlcjMtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJzdWJzY3JpcHRpb24uU2VydmVyMyIgZGF0YS1zb3VyY2UtbGluZT0iMTQiIGlkPSJlbnQwMDE0Ij48ZWxsaXBzZSBjeD0iMTEzNi4wMDE3IiBjeT0iMTc4LjU3MzYiIGZpbGw9IiNGMUYxRjEiIHJ4PSI0MS43NjE3IiByeT0iMTQuNTIzNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTQuODE3NCIgeD0iMTEwOC41OTMxIiB5PSIxODMuMjIyMSI+U2VydmVyMzwvdGV4dD48L2c+PCEtLWxpbmsgQ2xpZW50IHRvIFNlcnZlci0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDAzIiBkYXRhLWVudGl0eS0yPSJlbnQwMDA0IiBkYXRhLWxpbmstdHlwZT0iZGVwZW5kZW5jeSIgZGF0YS1zb3VyY2UtbGluZT0iNCIgaWQ9ImxuazUiPjxwYXRoIGQ9Ik0xMjkuMzYsNzcuMDcgQzEwNC42Niw4MS43MiA3MS40NCw5Mi40MyA1NSwxMTcuMDQgQzM0Ljc4LDE0Ny4zMSA4My45NjQ4LDE2My4wOTI0IDEyMS43OTQ4LDE3MC45MzI0IiBmaWxsPSJub25lIiBpZD0iQ2xpZW50LXRvLVNlcnZlciIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTI3LjY3LDE3Mi4xNSwxMTkuNjY5LDE2Ni40MDY5LDEyMi43NzQsMTcxLjEzNTMsMTE4LjA0NTUsMTc0LjI0MDQsMTI3LjY3LDE3Mi4xNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE2Mi4yMzk3IiB4PSI1NiIgeT0iMTMwLjEwNjkiPnsgaXRlbXMgeyBjb2RlIG5hbWUgfSB9PC90ZXh0PjwvZz48IS0tbGluayBTZXJ2ZXIgdG8gQ2xpZW50LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDQiIGRhdGEtZW50aXR5LTI9ImVudDAwMDMiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSI1IiBpZD0ibG5rNiI+PHBhdGggZD0iTTE4NC4yOSwxNjcuNzYgQzE5OC4zNSwxNjAuNjcgMjE0Ljg1LDE0OS41OCAyMjMsMTM0LjA0IEMyMzQuNTUsMTEyLjAyIDIxMC44Nzg1LDk1LjkyNTYgMTg4LjQ2ODUsODUuMzc1NiIgZmlsbD0ibm9uZSIgaWQ9IlNlcnZlci10by1DbGllbnQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE4My4wNCw4Mi44MiwxODkuNDc5MSw5MC4yNzI0LDE4Ny41NjM4LDg0Ljk0OTcsMTkyLjg4NjUsODMuMDM0NCwxODMuMDQsODIuODIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Mi4wMDI5IiB4PSIyMjYuNjIiIHk9IjEzMC4xMDY5Ij57IGl0ZW1zOiBbLi4uXSB9PC90ZXh0PjwvZz48IS0tbGluayBDbGllbnQyIHRvIFNlcnZlcjItLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwOCIgZGF0YS1lbnRpdHktMj0iZW50MDAwOSIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjkiIGlkPSJsbmsxMCI+PHBhdGggZD0iTTUyNC42LDc4LjI1IEM0ODIuNzYsODUuNCA0MjEuNDYsMTAxLjcxIDQ0NCwxMzQuMDQgQzQ2MS40MiwxNTkuMDMgNDg4Ljk3MzksMTY4LjcxIDUxNS44MzM5LDE3My4yNSIgZmlsbD0ibm9uZSIgaWQ9IkNsaWVudDItdG8tU2VydmVyMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNTIxLjc1LDE3NC4yNSw1MTMuNTQyNSwxNjguODA2LDUxNi44MTk5LDE3My40MTY3LDUxMi4yMDkyLDE3Ni42OTQxLDUyMS43NSwxNzQuMjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxODEuNDkyMiIgeD0iNDQ1IiB5PSIxMzAuMTA2OSI+bXV0YXRpb24geyBjcmVhdGVJdGVtKC4uLikgfTwvdGV4dD48L2c+PCEtLWxpbmsgU2VydmVyMiB0byBDbGllbnQyLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDkiIGRhdGEtZW50aXR5LTI9ImVudDAwMDgiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSIxMCIgaWQ9ImxuazExIj48cGF0aCBkPSJNNTkwLDE2Ny40MSBDNjE0LjEzLDE1Ni45MiA2NDMuMywxMzkuMDEgNjMxLDExNy4wNCBDNjIxLjc1LDEwMC41MiA2MDguODc2Nyw5MS44OTI1IDU5My4xMzY3LDg1LjA4MjUiIGZpbGw9Im5vbmUiIGlkPSJTZXJ2ZXIyLXRvLUNsaWVudDIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjU4Ny42Myw4Mi43LDU5NC4zMDE3LDg5Ljk0NDksNTkyLjIxODksODQuNjg1NCw1OTcuNDc4NCw4Mi42MDI2LDU4Ny42Myw4Mi43IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMzLjQwMjMiIHg9IjYzNC45MSIgeT0iMTMwLjEwNjkiPnsgY3JlYXRlSXRlbTogey4uLn0gfTwvdGV4dD48L2c+PCEtLWxpbmsgQ2xpZW50MyB0byBTZXJ2ZXIzLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMTMiIGRhdGEtZW50aXR5LTI9ImVudDAwMTQiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSIxNCIgaWQ9ImxuazE1Ij48cGF0aCBkPSJNMTA5OC4xNiw3NC42IEMxMDM2LjUyLDc3LjI1IDkxOC43Miw4Ni4zMSA4OTMsMTE3LjA0IEM4ODguMTUsMTIyLjg0IDg4OC4xNSwxMjguMjUgODkzLDEzNC4wNCBDOTE4LjIsMTY0LjE2IDEwMjUuODQ2MywxNzMuMTg1OSAxMDg4LjM5NjMsMTc2LjA0NTkiIGZpbGw9Im5vbmUiIGlkPSJDbGllbnQzLXRvLVNlcnZlcjMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjEwOTQuMzksMTc2LjMyLDEwODUuNTgyMSwxNzEuOTEzMSwxMDg5LjM5NTIsMTc2LjA5MTYsMTA4NS4yMTY3LDE3OS45MDQ3LDEwOTQuMzksMTc2LjMyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTk4LjQ1OTUiIHg9Ijg5NCIgeT0iMTMwLjEwNjkiPnN1YnNjcmlwdGlvbiB7IG9yZGVyVXBkYXRlZCB9PC90ZXh0PjwvZz48IS0tbGluayBTZXJ2ZXIzIHRvIENsaWVudDMtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAxNCIgZGF0YS1lbnRpdHktMj0iZW50MDAxMyIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjE1IiBpZD0ibG5rMTYiPjxwYXRoIGQ9Ik0xMTM0LjgxLDE2My44NiBDMTEzNC4xMywxNTUuMjkgMTEzMy4zNCwxNDQuMDMgMTEzMywxMzQuMDQgQzExMzIuNDUsMTE4LjA2IDExMzMuMTA3NywxMDUuNjk4OSAxMTM0LjEzNzcsOTMuNDM4OSIgZmlsbD0ibm9uZSIgaWQ9IlNlcnZlcjMtdG8tQ2xpZW50MyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTEzNC42NCw4Ny40NiwxMTI5LjkwMDYsOTYuMDkzNSwxMTM0LjIyMTQsOTIuNDQyNCwxMTM3Ljg3MjUsOTYuNzYzMywxMTM0LjY0LDg3LjQ2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTUyLjQ4MzQiIHg9IjExMzQiIHk9IjEzMC4xMDY5Ij57IG9yZGVyVXBkYXRlZDogey4uLn0gfTwvdGV4dD48L2c+PCEtLWxpbmsgU2VydmVyMyB0byBDbGllbnQzLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMTQiIGRhdGEtZW50aXR5LTI9ImVudDAwMTMiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSIxNiIgaWQ9ImxuazE3Ij48cGF0aCBkPSJNMTE3Ny4xOCwxNzUuNjkgQzEyMzMuMDIsMTcxLjU3IDEzMjIuNDEsMTU4LjQ4IDEyOTEsMTE3LjA0IEMxMjc2LjU3LDk4IDEyMTguMTg1Myw4NS45MjM4IDExNzcuMDY1Myw3OS4zNzM4IiBmaWxsPSJub25lIiBpZD0iU2VydmVyMy10by1DbGllbnQzLTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjExNzEuMTQsNzguNDMsMTE3OS4zOTg3LDgzLjc5NiwxMTc2LjA3NzcsNzkuMjE2NSwxMTgwLjY1NzIsNzUuODk1NiwxMTcxLjE0LDc4LjQzIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTUyLjQ4MzQiIHg9IjEyOTguNTEiIHk9IjEzMC4xMDY5Ij57IG9yZGVyVXBkYXRlZDogey4uLn0gfTwvdGV4dD48L2c+PD9wbGFudHVtbC1zcmMgZFN1bkl5RDA2MFJXRlJfWThveDlxMEVKQk9EQktOMW1hRUFhM2pWYWV1R3NUXzVvNElIYVFCODl1a1JZOGs5S1NOU0ctc0VFSWQtNmJwSVE3NnhvWlRfeHlaeFBGNk9mNUpJMUFHdGRDeTVwNWV0dldXbE9FcGZpcGg4NFhmQW9zR0IxdFlUbWNnRXVrTTNFVGxNY2JrbERfT0VnUmJxUlEwUE5wR1NBb25hbE9jSklYVDdlMDltOVljaUtCV0hXNW4xQkozOGU4RUdIMGdDOUdXY2JSVnM2c2lQRmxNeTRTNHU4a01vWWZVN24yOXBhYWlnT0NxdHdVZG5Ob3hsanZ1VTZ4S1g5ei1uTGRpN29zZkstMVE1MEFsNU9acGZ3cUh0V0Y0RmRUUm0tN3EyWDYtTFZlcXpXYWEtcEtDSGZ2ckpySWJORmdkdkxyTGZMQndmLXNjY3BHUW1OLXVST1J1VkQ5NzBIZUpYQjhxczkxY0pWOEZpVFVIV1VlRl9KQVJ5MT8+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<p><strong>用途：</strong></p>
<ol>
<li><strong>Query</strong>: データ取得（品目一覧、BOM 展開）</li>
<li><strong>Mutation</strong>: データ更新（品目登録、発注確定）</li>
<li><strong>Subscription</strong>: リアルタイム通知（MRP 進捗、在庫変動）</li>
</ol>
<h3 id="463-graphql">46.3 GraphQL におけるヘキサゴナルアーキテクチャ<a class="headerlink" href="#463-graphql" title="Permanent link">&para;</a></h3>
<p>GraphQL を導入しても、第32章で構築したヘキサゴナルアーキテクチャ（ドメイン層・アプリケーション層）はそのまま共有し、<strong>Input Adapter として GraphQL リゾルバ層のみを追加</strong>します。</p>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjY2OHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NzgwcHg7aGVpZ2h0OjY2OHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDc4MCA2NjgiIHdpZHRoPSI3ODBweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyIEhleGFnb25hbCBBcmNoaXRlY3R1cmUgKEdyYXBoUUw/KS0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLXF1YWxpZmllZC1uYW1lPSJIZXhhZ29uYWwgQXJjaGl0ZWN0dXJlIC5HcmFwaFFMLi4iIGRhdGEtc291cmNlLWxpbmU9IjMiIGlkPSJlbnQwMDAyIj48cGF0aCBkPSJNMjMwLjE0LDYgTDUxOC4yMjg4LDYgQTMuNzUsMy43NSAwIDAgMSA1MjAuNzI4OCw4LjUgTDUyNy43Mjg4LDI4LjI5NjkgTDUyOC4xNCwyOC4yOTY5IEEyLjUsMi41IDAgMCAxIDUzMC42NCwzMC43OTY5IEw1MzAuNjQsNjU4LjczIEEyLjUsMi41IDAgMCAxIDUyOC4xNCw2NjEuMjMgTDIzMC4xNCw2NjEuMjMgQTIuNSwyLjUgMCAwIDEgMjI3LjY0LDY1OC43MyBMMjI3LjY0LDguNSBBMi41LDIuNSAwIDAgMSAyMzAuMTQsNiIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB4MT0iMjI3LjY0IiB4Mj0iNTI3LjcyODgiIHkxPSIyOC4yOTY5IiB5Mj0iMjguMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyODcuMDg4OCIgeD0iMjMxLjY0IiB5PSIyMC45OTUxIj5IZXhhZ29uYWwgQXJjaGl0ZWN0dXJlIChHcmFwaFFMJiMyOTI1NjspPC90ZXh0PjwvZz48IS0tY2xhc3MgY29yZS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkhleGFnb25hbCBBcmNoaXRlY3R1cmUgLkdyYXBoUUwuLi5jb3JlIiBkYXRhLXNvdXJjZS1saW5lPSI1IiBpZD0iZW50MDAwMyI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxNzIuNjcxOSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTkwLjA0IiB4PSIyOTkuNjIiIHk9IjI3My4wNyIvPjxlbGxpcHNlIGN4PSIzMTQuNjIiIGN5PSIyOTQuMzY2OSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMzE3LjU4ODgsMzAwLjAwNzUgUTMxNy4wMTA2LDMwMC4zMDQ0IDMxNi4zNywzMDAuNDQ1IFEzMTUuNzI5NCwzMDAuNjAxMyAzMTUuMDI2MywzMDAuNjAxMyBRMzEyLjUyNjMsMzAwLjYwMTMgMzExLjE5ODEsMjk4Ljk2MDYgUTMwOS44ODU2LDI5Ny4zMDQ0IDMwOS44ODU2LDI5NC4xNzk0IFEzMDkuODg1NiwyOTEuMDU0NCAzMTEuMTk4MSwyODkuMzk4MSBRMzEyLjUyNjMsMjg3Ljc0MTkgMzE1LjAyNjMsMjg3Ljc0MTkgUTMxNS43Mjk0LDI4Ny43NDE5IDMxNi4zNywyODcuODk4MSBRMzE3LjAyNjMsMjg4LjA1NDQgMzE3LjU4ODgsMjg4LjM1MTMgTDMxNy41ODg4LDI5MS4wNyBRMzE2Ljk2MzgsMjkwLjQ5MTkgMzE2LjM3LDI5MC4yMjYzIFEzMTUuNzc2MywyODkuOTQ1IDMxNS4xNTEzLDI4OS45NDUgUTMxMy44MDc1LDI4OS45NDUgMzEzLjEyLDI5MS4wMjMxIFEzMTIuNDMyNSwyOTIuMDg1NiAzMTIuNDMyNSwyOTQuMTc5NCBRMzEyLjQzMjUsMjk2LjI3MzEgMzEzLjEyLDI5Ny4zNTEzIFEzMTMuODA3NSwyOTguNDEzOCAzMTUuMTUxMywyOTguNDEzOCBRMzE1Ljc3NjMsMjk4LjQxMzggMzE2LjM3LDI5OC4xNDgxIFEzMTYuOTYzOCwyOTcuODY2OSAzMTcuNTg4OCwyOTcuMjg4OCBMMzE3LjU4ODgsMzAwLjAwNzUgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTUuMzgzOCIgeD0iMzQ5Ljk0ODEiIHk9IjI5MS4wNjUxIj5BcHBsaWNhdGlvbiBDb3JlPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1OC4wNCIgeD0iMzI4LjYyIiB5PSIzMDcuMzYyIj4oRG9tYWluICsgVXNlIENhc2VzKTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIzMDAuNjIiIHgyPSI0ODguNjYiIHkxPSIzMTUuNjYzOCIgeTI9IjMxNS42NjM4Ii8+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJQUklWQVRFX0ZJRUxEIj48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIzMDcuNjIiIHk9IjMyNi4zMTIyIi8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjkyLjI4NTIiIHg9IjMxOS42MiIgeT0iMzMyLjY1ODkiPkl0ZW1Vc2VDYXNlPC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFJJVkFURV9GSUVMRCI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMzA3LjYyIiB5PSIzNDIuNjA5MSIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDAuNDQ3MyIgeD0iMzE5LjYyIiB5PSIzNDguOTU1NyI+T3JkZXJVc2VDYXNlPC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFJJVkFURV9GSUVMRCI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMzA3LjYyIiB5PSIzNTguOTA1OSIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjcuMjg1MiIgeD0iMzE5LjYyIiB5PSIzNjUuMjUyNiI+SW52ZW50b3J5VXNlQ2FzZTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIzMDAuNjIiIHgyPSI0ODguNjYiIHkxPSIzNzIuNTU0NCIgeTI9IjM3Mi41NTQ0Ii8+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJQUklWQVRFX01FVEhPRCI+PHJlY3QgZmlsbD0iI0YyNEQ1QyIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMzA3LjYyIiB5PSIzODMuMjAyOCIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3NS4yNDMiIHg9IjMxOS42MiIgeT0iMzg5LjU0OTUiPkl0ZW0gKCYjMjE2OTc7JiMzMDQ0NjspPC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFJJVkFURV9NRVRIT0QiPjxyZWN0IGZpbGw9IiNGMjRENUMiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjMwNy42MiIgeT0iMzk5LjQ5OTciLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTE3LjE4MTMiIHg9IjMxOS42MiIgeT0iNDA1Ljg0NjQiPkJvbSAoJiMzNzA5NjsmIzIxNjk3OyYjMjcwODM7JiMyNTEwNDsmIzM0OTIwOyk8L3RleHQ+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJQUklWQVRFX01FVEhPRCI+PHJlY3QgZmlsbD0iI0YyNEQ1QyIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMzA3LjYyIiB5PSI0MTUuNzk2NiIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ny40MDUxIiB4PSIzMTkuNjIiIHk9IjQyMi4xNDMyIj5PcmRlciAoJiMxMjQ1ODsmIzEyNTQwOyYjMTI0ODA7KTwvdGV4dD48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IlBSSVZBVEVfTUVUSE9EIj48cmVjdCBmaWxsPSIjRjI0RDVDIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIzMDcuNjIiIHk9IjQzMi4wOTM0Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgyLjEyIiB4PSIzMTkuNjIiIHk9IjQzOC40NDAxIj5TdG9jayAoJiMyMjMxMjsmIzI0MjM1Oyk8L3RleHQ+PC9nPjwhLS1jbGFzcyBpbnB1dC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkhleGFnb25hbCBBcmNoaXRlY3R1cmUgLkdyYXBoUUwuLi5pbnB1dCIgZGF0YS1zb3VyY2UtbGluZT0iMTUiIGlkPSJlbnQwMDA0Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjE0MC4wNzgxIiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIyMzYuOTU2NyIgeD0iMjc2LjE2IiB5PSI0MSIvPjxlbGxpcHNlIGN4PSIzMzguNDk2NyIgY3k9IjYyLjI5NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTM0MS40NjU1LDY3LjkzNzUgUTM0MC44ODc0LDY4LjIzNDQgMzQwLjI0NjcsNjguMzc1IFEzMzkuNjA2MSw2OC41MzEzIDMzOC45MDMsNjguNTMxMyBRMzM2LjQwMyw2OC41MzEzIDMzNS4wNzQ5LDY2Ljg5MDYgUTMzMy43NjI0LDY1LjIzNDQgMzMzLjc2MjQsNjIuMTA5NCBRMzMzLjc2MjQsNTguOTg0NCAzMzUuMDc0OSw1Ny4zMjgxIFEzMzYuNDAzLDU1LjY3MTkgMzM4LjkwMyw1NS42NzE5IFEzMzkuNjA2MSw1NS42NzE5IDM0MC4yNDY3LDU1LjgyODEgUTM0MC45MDMsNTUuOTg0NCAzNDEuNDY1NSw1Ni4yODEzIEwzNDEuNDY1NSw1OSBRMzQwLjg0MDUsNTguNDIxOSAzNDAuMjQ2Nyw1OC4xNTYzIFEzMzkuNjUzLDU3Ljg3NSAzMzkuMDI4LDU3Ljg3NSBRMzM3LjY4NDIsNTcuODc1IDMzNi45OTY3LDU4Ljk1MzEgUTMzNi4zMDkyLDYwLjAxNTYgMzM2LjMwOTIsNjIuMTA5NCBRMzM2LjMwOTIsNjQuMjAzMSAzMzYuOTk2Nyw2NS4yODEzIFEzMzcuNjg0Miw2Ni4zNDM4IDMzOS4wMjgsNjYuMzQzOCBRMzM5LjY1Myw2Ni4zNDM4IDM0MC4yNDY3LDY2LjA3ODEgUTM0MC44NDA1LDY1Ljc5NjkgMzQxLjQ2NTUsNjUuMjE4OCBMMzQxLjQ2NTUsNjcuOTM3NSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwMy43ODMyIiB4PSIzNTguOTk2NyIgeT0iNTguOTk1MSI+SW5wdXQgQWRhcHRlcnM8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTYuMDEwNyIgeD0iMzYyLjg4MyIgeT0iNzUuMjkyIj4oRHJpdmluZyBTaWRlKTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyNzcuMTYiIHgyPSI1MTIuMTE2NyIgeTE9IjgzLjU5MzgiIHkyPSI4My41OTM4Ii8+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJQUklWQVRFX0ZJRUxEIj48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIyODQuMTYiIHk9Ijk0LjI0MjIiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTY1LjYzNDUiIHg9IjI5Ni4xNiIgeT0iMTAwLjU4ODkiPlJFU1QgQ29udHJvbGxlciYjNjUyODg7JiMyNjA4MjsmIzIzMzg0OyYjNjUyODk7PC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFJJVkFURV9GSUVMRCI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMjg0LjE2IiB5PSIxMTAuNTM5MSIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDkuMDIzMiIgeD0iMjk2LjE2IiB5PSIxMTYuODg1NyI+Z1JQQyBTZXJ2aWNlJiM2NTI4ODsmIzI2MDgyOyYjMjMzODQ7JiM2NTI4OTs8L3RleHQ+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJQUklWQVRFX0ZJRUxEIj48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIyODQuMTYiIHk9IjEyNi44MzU5Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIxMC45NTY3IiB4PSIyOTYuMTYiIHk9IjEzMy4xODI2Ij5HcmFwaFFMIFJlc29sdmVyJiM2NTI4ODsmIzI2MDMyOyYjMzUyMTU7JiMzNjg2MTsmIzIxMTUyOyYjNjUyODk7PC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iUFJJVkFURV9GSUVMRCI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMjg0LjE2IiB5PSIxNDMuMTMyOCIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4Ni41MjI1IiB4PSIyOTYuMTYiIHk9IjE0OS40Nzk1Ij5EYXRhRmV0Y2hlcjwvdGV4dD48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IlBSSVZBVEVfRklFTEQiPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjI4NC4xNiIgeT0iMTU5LjQyOTciLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODEuNjI3OSIgeD0iMjk2LjE2IiB5PSIxNjUuNzc2NCI+RGF0YUxvYWRlcjwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyNzcuMTYiIHgyPSI1MTIuMTE2NyIgeTE9IjE3My4wNzgxIiB5Mj0iMTczLjA3ODEiLz48L2c+PCEtLWNsYXNzIG91dHB1dC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkhleGFnb25hbCBBcmNoaXRlY3R1cmUgLkdyYXBoUUwuLi5vdXRwdXQiIGRhdGEtc291cmNlLWxpbmU9IjIzIiBpZD0iZW50MDAwNSI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMDcuNDg0NCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTYwLjc0MzIiIHg9IjMxNi4yNyIgeT0iNTM3Ljc1Ii8+PGVsbGlwc2UgY3g9IjMzNi45MzEiIGN5PSI1NTkuMDQ2OSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMzM5Ljg5OTgsNTY0LjY4NzUgUTMzOS4zMjE3LDU2NC45ODQ0IDMzOC42ODEsNTY1LjEyNSBRMzM4LjA0MDQsNTY1LjI4MTMgMzM3LjMzNzMsNTY1LjI4MTMgUTMzNC44MzczLDU2NS4yODEzIDMzMy41MDkyLDU2My42NDA2IFEzMzIuMTk2Nyw1NjEuOTg0NCAzMzIuMTk2Nyw1NTguODU5NCBRMzMyLjE5NjcsNTU1LjczNDQgMzMzLjUwOTIsNTU0LjA3ODEgUTMzNC44MzczLDU1Mi40MjE5IDMzNy4zMzczLDU1Mi40MjE5IFEzMzguMDQwNCw1NTIuNDIxOSAzMzguNjgxLDU1Mi41NzgxIFEzMzkuMzM3Myw1NTIuNzM0NCAzMzkuODk5OCw1NTMuMDMxMyBMMzM5Ljg5OTgsNTU1Ljc1IFEzMzkuMjc0OCw1NTUuMTcxOSAzMzguNjgxLDU1NC45MDYzIFEzMzguMDg3Myw1NTQuNjI1IDMzNy40NjIzLDU1NC42MjUgUTMzNi4xMTg1LDU1NC42MjUgMzM1LjQzMSw1NTUuNzAzMSBRMzM0Ljc0MzUsNTU2Ljc2NTYgMzM0Ljc0MzUsNTU4Ljg1OTQgUTMzNC43NDM1LDU2MC45NTMxIDMzNS40MzEsNTYyLjAzMTMgUTMzNi4xMTg1LDU2My4wOTM4IDMzNy40NjIzLDU2My4wOTM4IFEzMzguMDg3Myw1NjMuMDkzOCAzMzguNjgxLDU2Mi44MjgxIFEzMzkuMjc0OCw1NjIuNTQ2OSAzMzkuODk5OCw1NjEuOTY4OCBMMzM5Ljg5OTgsNTY0LjY4NzUgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTYuMTYzMSIgeD0iMzUyLjE4OSIgeT0iNTU1Ljc0NTEiPk91dHB1dCBBZGFwdGVyczwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5MS44NDc3IiB4PSIzNjQuMzQ2OCIgeT0iNTcyLjA0MiI+KERyaXZlbiBTaWRlKTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIzMTcuMjciIHgyPSI0NzYuMDEzMiIgeTE9IjU4MC4zNDM4IiB5Mj0iNTgwLjM0MzgiLz48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IlBSSVZBVEVfRklFTEQiPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjMyNC4yNyIgeT0iNTkwLjk5MjIiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM0Ljc0MzIiIHg9IjMzNi4yNyIgeT0iNTk3LjMzODkiPk15QmF0aXMgUmVwb3NpdG9yeTwvdGV4dD48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IlBSSVZBVEVfRklFTEQiPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjMyNC4yNyIgeT0iNjA3LjI4OTEiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTE5LjQyMzgiIHg9IjMzNi4yNyIgeT0iNjEzLjYzNTciPkRhdGFiYXNlIEFjY2VzczwvdGV4dD48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IlBSSVZBVEVfRklFTEQiPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjMyNC4yNyIgeT0iNjIzLjU4NTkiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA1LjQwMzMiIHg9IjMzNi4yNyIgeT0iNjI5LjkzMjYiPkVudGl0eSBNYXBwaW5nPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjMxNy4yNyIgeDI9IjQ3Ni4wMTMyIiB5MT0iNjM3LjIzNDQiIHkyPSI2MzcuMjM0NCIvPjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJHTU44IiBkYXRhLXNvdXJjZS1saW5lPSIzNCIgaWQ9ImVudDAwMDkiPjxwYXRoIGQ9Ik01NDcuOSw4My4zNCBMNTQ3LjksMTM4LjczODQgQTAsMCAwIDAgMCA1NDcuOSwxMzguNzM4NCBMNjI3LjQyLDEzOC43Mzg0IEw0ODcuMTIsMjcyLjc2IEw2MzUuNDIsMTM4LjczODQgTDc3My4zODM2LDEzOC43Mzg0IEEwLDAgMCAwIDAgNzczLjM4MzYsMTM4LjczODQgTDc3My4zODM2LDkzLjM0IEw3NjMuMzgzNiw4My4zNCBMNTQ3LjksODMuMzQgQTAsMCAwIDAgMCA1NDcuOSw4My4zNCIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTc2My4zODM2LDgzLjM0IEw3NjMuMzgzNiw5My4zNCBMNzczLjM4MzYsOTMuMzQgTDc2My4zODM2LDgzLjM0IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDMuMDAwMiIgeD0iNTUzLjkiIHk9IjEwMC40MDY5Ij4mIzI2MDgyOyYjMjMzODQ7JiMxMjM5ODsmIzEyNDk5OyYjMTI0NzI7JiMxMjQ5MzsmIzEyNDczOyYjMTI1MjU7JiMxMjQ3MjsmIzEyNDgzOyYjMTI0NjM7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIwMC4xMTYzIiB4PSI1NTMuOSIgeT0iMTE1LjUzOTciPlJFU1QgQVBJIC8gZ1JQQyAmIzI5MjU2OyYjMTIzOTI7JiMyMzQzNjsmIzIwODQwOyYjMTIzOTU7JiMyMDg0OTsmIzI2Mzc3OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMDQuNDgzNiIgeD0iNTUzLjkiIHk9IjEzMC42NzI1Ij5HcmFwaFFMICYjMjIyNjY7JiMyNjM3NzsmIzEyMzk4OyYjMTI0Njc7JiMxMjU0MDsmIzEyNDg5OyYjMTIzOTk7JiMyMTU0NzsmIzEyNDE0OyYjMTIzOTQ7JiMxMjM1Njs8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkdNTjExIiBkYXRhLXNvdXJjZS1saW5lPSI0MCIgaWQ9ImVudDAwMTIiPjxwYXRoIGQ9Ik02LDgzLjM0IEw2LDEzOC43Mzg0IEEwLDAgMCAwIDAgNiwxMzguNzM4NCBMMjExLjI4NTMsMTM4LjczODQgQTAsMCAwIDAgMCAyMTEuMjg1MywxMzguNzM4NCBMMjExLjI4NTMsMTE1LjAzIEwyNzYuMDIsMTExLjAzIEwyMTEuMjg1MywxMDcuMDMgTDIxMS4yODUzLDkzLjM0IEwyMDEuMjg1Myw4My4zNCBMNiw4My4zNCBBMCwwIDAgMCAwIDYsODMuMzQiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0yMDEuMjg1Myw4My4zNCBMMjAxLjI4NTMsOTMuMzQgTDIxMS4yODUzLDkzLjM0IEwyMDEuMjg1Myw4My4zNCIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTI2LjQ4MzUiIHg9IjEyIiB5PSIxMDAuNDA2OSI+R3JhcGhRTCAmIzEyNTIyOyYjMTI0Nzg7JiMxMjUyMzsmIzEyNDk2OyYjMTI0MzQ7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1OC43Mjk2IiB4PSIxMiIgeT0iMTE1LjUzOTciPklucHV0IEFkYXB0ZXIgJiMxMjM5MjsmIzEyMzc1OyYjMTIzOTA7JiMzNjg2MTsmIzIxMTUyOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxODQuMjg1MyIgeD0iMTIiIHk9IjEzMC42NzI1Ij4mIzI2MDgyOyYjMjMzODQ7JiMxMjM5ODsgUkVTVC9nUlBDICYjMTIzOTI7JiMyMDg0OTsmIzIzMzg0OyYjMjE0ODc7JiMzMzAyMTs8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkdNTjE0IiBkYXRhLXNvdXJjZS1saW5lPSI0NiIgaWQ9ImVudDAwMTUiPjxwYXRoIGQ9Ik01NDYuMTYsNTYzLjc5IEw1NDYuMTYsNTg3LjQ5IEw0NzcuNSw1OTEuNDkgTDU0Ni4xNiw1OTUuNDkgTDU0Ni4xNiw2MTkuMTg4NCBBMCwwIDAgMCAwIDU0Ni4xNiw2MTkuMTg4NCBMNjk3LjEzNDcsNjE5LjE4ODQgQTAsMCAwIDAgMCA2OTcuMTM0Nyw2MTkuMTg4NCBMNjk3LjEzNDcsNTczLjc5IEw2ODcuMTM0Nyw1NjMuNzkgTDU0Ni4xNiw1NjMuNzkgQTAsMCAwIDAgMCA1NDYuMTYsNTYzLjc5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNNjg3LjEzNDcsNTYzLjc5IEw2ODcuMTM0Nyw1NzMuNzkgTDY5Ny4xMzQ3LDU3My43OSBMNjg3LjEzNDcsNTYzLjc5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjkuOTc0NyIgeD0iNTUyLjE2IiB5PSI1ODAuODU2OSI+JiMyNjA4MjsmIzIzMzg0OyYjMTIzOTg7IFJlcG9zaXRvcnkgJiMxMjQzNDs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzguMDAwMSIgeD0iNTUyLjE2IiB5PSI1OTUuOTg5NyI+JiMxMjM4MTsmIzEyMzk4OyYjMTI0MTQ7JiMxMjQxNDsmIzIwMzUxOyYjMjk5OTI7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjUyLjAwMDEiIHg9IjU1Mi4xNiIgeT0iNjExLjEyMjUiPiYjMjI3OTM7JiMyNjM1NjsmIzE5OTgxOyYjMzUyMDE7PC90ZXh0PjwvZz48IS0tbGluayBpbnB1dCB0byBjb3JlLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDQiIGRhdGEtZW50aXR5LTI9ImVudDAwMDMiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSIzMCIgaWQ9ImxuazYiPjxwYXRoIGNvZGVMaW5lPSIzMCIgZD0iTTM5NC42NCwxODEuMzIgQzM5NC42NCwyMDkuNzggMzk0LjY0LDIzNy4wMyAzOTQuNjQsMjY2Ljk5IiBmaWxsPSJub25lIiBpZD0iaW5wdXQtdG8tY29yZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzk0LjY0LDI3Mi45OSwzOTguNjQsMjYzLjk5LDM5NC42NCwyNjcuOTksMzkwLjY0LDI2My45OSwzOTQuNjQsMjcyLjk5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzAuODAxOCIgeD0iMzk4LjgxMzgiIHk9IjIyNC4xMzY5Ij5JbnB1dCBQb3J0czwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3Ny4xNDk0IiB4PSIzOTUuNjQiIHk9IjIzOS4yNjk3Ij4oVXNlIENhc2VzKTwvdGV4dD48L2c+PCEtLWxpbmsgY29yZSB0byBvdXRwdXQtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwMyIgZGF0YS1lbnRpdHktMj0iZW50MDAwNSIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjMxIiBpZD0ibG5rNyI+PHBhdGggY29kZUxpbmU9IjMxIiBkPSJNMzk1LjM5LDQ0Ni4wOCBDMzk1LjY1LDQ3Ni43NSAzOTUuODk5MSw1MDQuMzkwMiAzOTYuMTI5MSw1MzEuNDkwMiIgZmlsbD0ibm9uZSIgaWQ9ImNvcmUtdG8tb3V0cHV0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIzOTYuMTgsNTM3LjQ5LDQwMC4xMDM1LDUyOC40NTY0LDM5Ni4xMzc2LDUzMi40OTAyLDM5Mi4xMDM4LDUyOC41MjQzLDM5Ni4xOCw1MzcuNDkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4Mi4yOTc0IiB4PSI0MzAuMjExNSIgeT0iNDg4LjgxNjkiPk91dHB1dCBQb3J0czwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDguOTYwNCIgeD0iMzk2Ljg4IiB5PSI1MDMuOTQ5NyI+KFJlcG9zaXRvcnkgSW50ZXJmYWNlcyk8L3RleHQ+PC9nPjw/cGxhbnR1bWwtc3JjIFJQOTFKbkQxNUNWbC1vY1VkNGZDbXZzM0lJYUxjdTFXWXBTbHVfUXJkUjNDUjZRN0hjOUN0NXI5QTRlV09pRzRKREdPUjZYZTlOZjBxaUE3NlJSSzRyXzFjVHNNMGw0c1ItUXp6Xy16X3ZqeDlJbkpYYjM4UEhTcFpzVGNTczB4bkZDaW9vTnM0Z2FXWjN0MjV3SjI2TjRXOC1tZ2JNWkI1TzZHY1g3NGhKd1BsUW9sWnVfMUl5aVFUSFpCa0F2M1JJOGZQdjNiMGYtbnIzSFY5ZkoxVk5aZzhNSTlYdndrOFh4Ty1iYk5mbzRsU0hiSXFPdl9rVFNRcl80S3ItN1ZpQTVsVVpfVXpqUXQtcnlSdmR2VWI1MTBJV003QWtvZXlCTXZBcWZrQi1kWV9LUHFzWG1WREREMkhjVE9DV2hwaDhQQ1NoNHdsN2ZyMnB4RnQxSzljSDluOUdoRmUwalFld20ySExoMjE5aDZBT1F3YTJpa3dYNlA1RG5uSzVucnJka3h0d0FaSnJVVGtkd2o1MVFvSzRISGVwUlVVSGd1MW1OcWs1REJBWl8teDF6aXpTLXhxU1FOOTZjUUlGOEdmTHI1Q09YY0VUNnB0MjZVTnY3X0dLUHNXdldkQUdQdlJkTEFSeVJKb1l4dGdGNVhxRmt2elc4b2plcndfTWQ4Q0tkYkFpbUhyek4zUXFNamNTb1RKWno4clpPdkQ2azEyc2JhUi1wTVlaREN3YTF3eWZmcGMzcTJxMmxIdTZMWW52S011bjkxU1hUdUVIUW80a0VLdHJCWFpXZkVMQllmV1p5Z0Y4aEZlR2hRTGhvN3A0OFU5WEJKelF6S1ZZRGdsT2xNNmlmbEhjbDdsVnN3REpHenNabExlVWFOXzhmX2FKd3RlLXNjeWktS1Z3WnlEblFvNFhZQzBPbzNQTWJlT1dFa3N3Wm1LMExkQWNvZ1M1aTV4d3JSRm1VcWxsOXRiTi1HUjdHcUhGbmY5YzlDbXhYc2hBLVpoTk9feER3TDVSSElaTktKM3MtczY3YmRiOU5fc0tuWnlDeWtra1VON25mTXpCdFVzX2p6U1JCUEZfMmwtX3UzPz48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<p><strong>GraphQL でもヘキサゴナルアーキテクチャを維持する理由：</strong></p>
<ol>
<li><strong>再利用性</strong>: 既存の UseCase/Repository をそのまま活用</li>
<li><strong>並行運用</strong>: REST API、gRPC、GraphQL を同時提供可能</li>
<li><strong>テスト容易性</strong>: ドメインロジックは通信プロトコルに依存しない</li>
<li><strong>移行容易性</strong>: 段階的に API 形式を追加・変更可能</li>
</ol>
<h3 id="464">46.4 ディレクトリ構成<a class="headerlink" href="#464" title="Permanent link">&para;</a></h3>
<p>既存の構成に <code>infrastructure/graphql/</code> を追加するだけです。</p>
<div class="highlight"><pre><span></span><code>src/main/java/com/example/production/
├── domain/                     # ドメイン層（API版と共通）
│   ├── model/
│   │   ├── item/
│   │   ├── bom/
│   │   ├── order/
│   │   └── inventory/
│   └── exception/
│
├── application/               # アプリケーション層（API版と共通）
│   ├── port/
│   │   ├── in/               # Input Port（ユースケース）
│   │   └── out/              # Output Port（リポジトリ）
│   └── service/
│
├── infrastructure/
│   ├── persistence/          # Output Adapter（DB実装）- 既存
│   │   ├── mapper/
│   │   └── repository/
│   ├── rest/                 # Input Adapter（REST実装）- 既存
│   ├── grpc/                 # Input Adapter（gRPC実装）- 既存
│   └── graphql/              # Input Adapter（GraphQL実装）- 新規追加
│       ├── resolver/         # Query/Mutation リゾルバ
│       ├── dataloader/       # N+1 問題対策
│       ├── scalar/           # カスタムスカラー型
│       └── subscription/     # Subscription ハンドラ
│
├── config/
│
└── src/main/resources/
    └── graphql/              # GraphQL スキーマ定義
        ├── schema.graphqls
        ├── item.graphqls
        ├── bom.graphqls
        ├── purchase_order.graphqls
        └── mrp.graphqls
</code></pre></div>
<h3 id="465">46.5 技術スタックの追加<a class="headerlink" href="#465" title="Permanent link">&para;</a></h3>
<p>既存の <code>build.gradle.kts</code> に GraphQL 関連の依存関係を追加します。</p>
<details>
<summary>build.gradle.kts（差分）</summary>

<div class="highlight"><pre><span></span><code><span class="n">dependencies</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 既存の依存関係（Spring Boot, MyBatis, PostgreSQL等）はそのまま</span>

<span class="w">    </span><span class="c1">// GraphQL 関連を追加</span>
<span class="w">    </span><span class="n">implementation</span><span class="p">(</span><span class="s">&quot;org.springframework.boot:spring-boot-starter-graphql&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">implementation</span><span class="p">(</span><span class="s">&quot;org.springframework.boot:spring-boot-starter-websocket&quot;</span><span class="p">)</span><span class="w">  </span><span class="c1">// Subscription 用</span>

<span class="w">    </span><span class="c1">// GraphQL 拡張</span>
<span class="w">    </span><span class="n">implementation</span><span class="p">(</span><span class="s">&quot;com.graphql-java:graphql-java-extended-scalars:21.0&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="c1">// Test</span>
<span class="w">    </span><span class="n">testImplementation</span><span class="p">(</span><span class="s">&quot;org.springframework.graphql:spring-graphql-test&quot;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>

</details>

<p><strong>追加パッケージの説明：</strong></p>
<table>
<thead>
<tr>
<th>パッケージ</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>spring-boot-starter-graphql</td>
<td>Spring Boot GraphQL 統合</td>
</tr>
<tr>
<td>spring-boot-starter-websocket</td>
<td>Subscription (WebSocket)</td>
</tr>
<tr>
<td>graphql-java-extended-scalars</td>
<td>DateTime, BigDecimal 等のスカラー型</td>
</tr>
<tr>
<td>spring-graphql-test</td>
<td>GraphQL テストサポート</td>
</tr>
</tbody>
</table>
<h3 id="426-graphql">42.6 GraphQL スキーマ定義<a class="headerlink" href="#426-graphql" title="Permanent link">&para;</a></h3>
<details>
<summary>src/main/resources/graphql/schema.graphqls</summary>

<div class="highlight"><pre><span></span><code><span class="c"># ルートスキーマ</span>
<span class="k">type</span><span class="w"> </span><span class="err">Query</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c"># 品目</span>
<span class="w">    </span><span class="n">item</span><span class="p">(</span><span class="n">itemCode</span><span class="p">:</span><span class="w"> </span><span class="no">ID</span><span class="err">!</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">Item</span>
<span class="w">    </span><span class="n">items</span><span class="p">(</span><span class="n">category</span><span class="p">:</span><span class="w"> </span><span class="no">ItemCategory</span><span class="p">,</span><span class="w"> </span><span class="n">page</span><span class="p">:</span><span class="w"> </span><span class="no">Int</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="p">:</span><span class="w"> </span><span class="no">Int</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">ItemConnection</span><span class="err">!</span>

<span class="w">    </span><span class="c"># BOM</span>
<span class="w">    </span><span class="n">bomTree</span><span class="p">(</span><span class="n">itemCode</span><span class="p">:</span><span class="w"> </span><span class="no">ID</span><span class="err">!</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">BomNode</span>
<span class="w">    </span><span class="n">whereUsed</span><span class="p">(</span><span class="n">itemCode</span><span class="p">:</span><span class="w"> </span><span class="no">ID</span><span class="err">!</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="err">[</span><span class="n">WhereUsedResult</span><span class="err">!]!</span>

<span class="w">    </span><span class="c"># 発注</span>
<span class="w">    </span><span class="n">purchaseOrder</span><span class="p">(</span><span class="n">orderNumber</span><span class="p">:</span><span class="w"> </span><span class="no">ID</span><span class="err">!</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">PurchaseOrder</span>
<span class="w">    </span><span class="n">purchaseOrders</span><span class="p">(</span><span class="n">status</span><span class="p">:</span><span class="w"> </span><span class="no">OrderStatus</span><span class="p">,</span><span class="w"> </span><span class="n">page</span><span class="p">:</span><span class="w"> </span><span class="no">Int</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="p">:</span><span class="w"> </span><span class="no">Int</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">PurchaseOrderConnection</span><span class="err">!</span>
<span class="p">}</span>

<span class="k">type</span><span class="w"> </span><span class="err">Mutation</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c"># 品目</span>
<span class="w">    </span><span class="n">createItem</span><span class="p">(</span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="no">CreateItemInput</span><span class="err">!</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">Item</span><span class="err">!</span>
<span class="w">    </span><span class="n">updateItem</span><span class="p">(</span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="no">UpdateItemInput</span><span class="err">!</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">Item</span><span class="err">!</span>
<span class="w">    </span><span class="n">deleteItem</span><span class="p">(</span><span class="n">itemCode</span><span class="p">:</span><span class="w"> </span><span class="no">ID</span><span class="err">!</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">Boolean</span><span class="err">!</span>

<span class="w">    </span><span class="c"># 発注</span>
<span class="w">    </span><span class="n">createPurchaseOrder</span><span class="p">(</span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="no">CreatePurchaseOrderInput</span><span class="err">!</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">PurchaseOrder</span><span class="err">!</span>
<span class="w">    </span><span class="n">confirmPurchaseOrder</span><span class="p">(</span><span class="n">orderNumber</span><span class="p">:</span><span class="w"> </span><span class="no">ID</span><span class="err">!</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">PurchaseOrder</span><span class="err">!</span>
<span class="w">    </span><span class="n">cancelPurchaseOrder</span><span class="p">(</span><span class="n">orderNumber</span><span class="p">:</span><span class="w"> </span><span class="no">ID</span><span class="err">!</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">Boolean</span><span class="err">!</span>
<span class="w">    </span><span class="n">recordReceiving</span><span class="p">(</span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="no">RecordReceivingInput</span><span class="err">!</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">ReceivingResult</span><span class="err">!</span>

<span class="w">    </span><span class="c"># MRP</span>
<span class="w">    </span><span class="n">executeMrp</span><span class="p">(</span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="no">ExecuteMrpInput</span><span class="err">!</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">MrpResult</span><span class="err">!</span>
<span class="p">}</span>

<span class="k">type</span><span class="w"> </span><span class="err">Subscription</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c"># MRP 進捗</span>
<span class="w">    </span><span class="n">mrpProgress</span><span class="p">(</span><span class="n">executionId</span><span class="p">:</span><span class="w"> </span><span class="no">ID</span><span class="err">!</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">MrpProgress</span><span class="err">!</span>

<span class="w">    </span><span class="c"># 発注ステータス変更</span>
<span class="w">    </span><span class="n">orderStatusChanged</span><span class="p">(</span><span class="n">orderNumber</span><span class="p">:</span><span class="w"> </span><span class="no">ID</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">PurchaseOrder</span><span class="err">!</span>

<span class="w">    </span><span class="c"># 在庫変動</span>
<span class="w">    </span><span class="n">stockChanged</span><span class="p">(</span><span class="n">itemCode</span><span class="p">:</span><span class="w"> </span><span class="no">ID</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">StockChange</span><span class="err">!</span>
<span class="p">}</span>

<span class="c"># ページネーション</span>
<span class="k">type</span><span class="w"> </span><span class="err">PageInfo</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nl">hasNextPage</span><span class="p">:</span><span class="w"> </span><span class="n">Boolean</span><span class="err">!</span>
<span class="w">    </span><span class="nl">hasPreviousPage</span><span class="p">:</span><span class="w"> </span><span class="n">Boolean</span><span class="err">!</span>
<span class="w">    </span><span class="nl">totalElements</span><span class="p">:</span><span class="w"> </span><span class="n">Int</span><span class="err">!</span>
<span class="w">    </span><span class="nl">totalPages</span><span class="p">:</span><span class="w"> </span><span class="n">Int</span><span class="err">!</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>src/main/resources/graphql/item.graphqls</summary>

<div class="highlight"><pre><span></span><code><span class="c"># 品目区分</span>
<span class="k">enum</span><span class="w"> </span><span class="err">ItemCategory</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">PRODUCT</span><span class="w">      </span><span class="c"># 製品</span>
<span class="w">    </span><span class="n">SEMI_PRODUCT</span><span class="w"> </span><span class="c"># 半製品</span>
<span class="w">    </span><span class="n">PART</span><span class="w">         </span><span class="c"># 部品</span>
<span class="w">    </span><span class="n">MATERIAL</span><span class="w">     </span><span class="c"># 材料</span>
<span class="p">}</span>

<span class="c"># 品目</span>
<span class="k">type</span><span class="w"> </span><span class="err">Item</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nl">itemCode</span><span class="p">:</span><span class="w"> </span><span class="n">ID</span><span class="err">!</span>
<span class="w">    </span><span class="nl">effectiveDate</span><span class="p">:</span><span class="w"> </span><span class="n">Date</span><span class="err">!</span>
<span class="w">    </span><span class="nl">itemName</span><span class="p">:</span><span class="w"> </span><span class="n">String</span><span class="err">!</span>
<span class="w">    </span><span class="nl">category</span><span class="p">:</span><span class="w"> </span><span class="n">ItemCategory</span><span class="err">!</span>
<span class="w">    </span><span class="nl">itemGroupCode</span><span class="p">:</span><span class="w"> </span><span class="n">String</span>
<span class="w">    </span><span class="nl">unitCode</span><span class="p">:</span><span class="w"> </span><span class="n">String</span>
<span class="w">    </span><span class="nl">locationCode</span><span class="p">:</span><span class="w"> </span><span class="n">String</span>
<span class="w">    </span><span class="nl">leadTime</span><span class="p">:</span><span class="w"> </span><span class="n">Int</span>
<span class="w">    </span><span class="nl">safetyStock</span><span class="p">:</span><span class="w"> </span><span class="n">Int</span>

<span class="w">    </span><span class="c"># 関連データ（必要な場合のみ取得）</span>
<span class="w">    </span><span class="nl">bom</span><span class="p">:</span><span class="w"> </span><span class="err">[</span><span class="n">BomEntry</span><span class="err">!]!</span>
<span class="w">    </span><span class="nl">stock</span><span class="p">:</span><span class="w"> </span><span class="n">Stock</span>
<span class="w">    </span><span class="nl">purchaseOrders</span><span class="p">:</span><span class="w"> </span><span class="err">[</span><span class="n">PurchaseOrder</span><span class="err">!]!</span>
<span class="p">}</span>

<span class="c"># 品目一覧（ページネーション付き）</span>
<span class="k">type</span><span class="w"> </span><span class="err">ItemConnection</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nl">edges</span><span class="p">:</span><span class="w"> </span><span class="err">[</span><span class="n">ItemEdge</span><span class="err">!]!</span>
<span class="w">    </span><span class="nl">pageInfo</span><span class="p">:</span><span class="w"> </span><span class="n">PageInfo</span><span class="err">!</span>
<span class="p">}</span>

<span class="k">type</span><span class="w"> </span><span class="err">ItemEdge</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nl">node</span><span class="p">:</span><span class="w"> </span><span class="n">Item</span><span class="err">!</span>
<span class="w">    </span><span class="nl">cursor</span><span class="p">:</span><span class="w"> </span><span class="n">String</span><span class="err">!</span>
<span class="p">}</span>

<span class="c"># 入力型</span>
<span class="k">input</span><span class="w"> </span><span class="err">CreateItemInput</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nl">itemCode</span><span class="p">:</span><span class="w"> </span><span class="n">ID</span><span class="err">!</span>
<span class="w">    </span><span class="nl">itemName</span><span class="p">:</span><span class="w"> </span><span class="n">String</span><span class="err">!</span>
<span class="w">    </span><span class="nl">category</span><span class="p">:</span><span class="w"> </span><span class="n">ItemCategory</span><span class="err">!</span>
<span class="w">    </span><span class="nl">itemGroupCode</span><span class="p">:</span><span class="w"> </span><span class="n">String</span>
<span class="w">    </span><span class="nl">unitCode</span><span class="p">:</span><span class="w"> </span><span class="n">String</span>
<span class="w">    </span><span class="nl">locationCode</span><span class="p">:</span><span class="w"> </span><span class="n">String</span>
<span class="w">    </span><span class="nl">leadTime</span><span class="p">:</span><span class="w"> </span><span class="n">Int</span>
<span class="w">    </span><span class="nl">safetyStock</span><span class="p">:</span><span class="w"> </span><span class="n">Int</span>
<span class="p">}</span>

<span class="k">input</span><span class="w"> </span><span class="err">UpdateItemInput</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nl">itemCode</span><span class="p">:</span><span class="w"> </span><span class="n">ID</span><span class="err">!</span>
<span class="w">    </span><span class="nl">itemName</span><span class="p">:</span><span class="w"> </span><span class="n">String</span>
<span class="w">    </span><span class="nl">category</span><span class="p">:</span><span class="w"> </span><span class="n">ItemCategory</span>
<span class="w">    </span><span class="nl">leadTime</span><span class="p">:</span><span class="w"> </span><span class="n">Int</span>
<span class="w">    </span><span class="nl">safetyStock</span><span class="p">:</span><span class="w"> </span><span class="n">Int</span>
<span class="p">}</span>

<span class="c"># カスタムスカラー</span>
<span class="k">scalar</span><span class="w"> </span><span class="err">Date</span>
<span class="k">scalar</span><span class="w"> </span><span class="err">DateTime</span>
<span class="k">scalar</span><span class="w"> </span><span class="err">BigDecimal</span>
</code></pre></div>

</details>

<details>
<summary>src/main/resources/graphql/bom.graphqls</summary>

<div class="highlight"><pre><span></span><code><span class="c"># BOM エントリ</span>
<span class="k">type</span><span class="w"> </span><span class="err">BomEntry</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nl">parentItemCode</span><span class="p">:</span><span class="w"> </span><span class="n">ID</span><span class="err">!</span>
<span class="w">    </span><span class="nl">childItemCode</span><span class="p">:</span><span class="w"> </span><span class="n">ID</span><span class="err">!</span>
<span class="w">    </span><span class="nl">requiredQuantity</span><span class="p">:</span><span class="w"> </span><span class="n">BigDecimal</span><span class="err">!</span>
<span class="w">    </span><span class="nl">effectiveFrom</span><span class="p">:</span><span class="w"> </span><span class="n">Date</span><span class="err">!</span>
<span class="w">    </span><span class="nl">effectiveTo</span><span class="p">:</span><span class="w"> </span><span class="n">Date</span>

<span class="w">    </span><span class="c"># 子品目の詳細</span>
<span class="w">    </span><span class="nl">childItem</span><span class="p">:</span><span class="w"> </span><span class="n">Item</span><span class="err">!</span>
<span class="p">}</span>

<span class="c"># BOM ツリーノード</span>
<span class="k">type</span><span class="w"> </span><span class="err">BomNode</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nl">itemCode</span><span class="p">:</span><span class="w"> </span><span class="n">ID</span><span class="err">!</span>
<span class="w">    </span><span class="nl">itemName</span><span class="p">:</span><span class="w"> </span><span class="n">String</span><span class="err">!</span>
<span class="w">    </span><span class="nl">requiredQuantity</span><span class="p">:</span><span class="w"> </span><span class="n">BigDecimal</span><span class="err">!</span>
<span class="w">    </span><span class="nl">level</span><span class="p">:</span><span class="w"> </span><span class="n">Int</span><span class="err">!</span>
<span class="w">    </span><span class="nl">children</span><span class="p">:</span><span class="w"> </span><span class="err">[</span><span class="n">BomNode</span><span class="err">!]!</span>
<span class="p">}</span>

<span class="c"># 逆展開（使用先照会）</span>
<span class="k">type</span><span class="w"> </span><span class="err">WhereUsedResult</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nl">parentItemCode</span><span class="p">:</span><span class="w"> </span><span class="n">ID</span><span class="err">!</span>
<span class="w">    </span><span class="nl">itemName</span><span class="p">:</span><span class="w"> </span><span class="n">String</span><span class="err">!</span>
<span class="w">    </span><span class="nl">requiredQuantity</span><span class="p">:</span><span class="w"> </span><span class="n">BigDecimal</span><span class="err">!</span>
<span class="w">    </span><span class="nl">level</span><span class="p">:</span><span class="w"> </span><span class="n">Int</span><span class="err">!</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>src/main/resources/graphql/purchase_order.graphqls</summary>

<div class="highlight"><pre><span></span><code><span class="c"># 発注ステータス</span>
<span class="k">enum</span><span class="w"> </span><span class="err">OrderStatus</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">DRAFT</span>
<span class="w">    </span><span class="n">CONFIRMED</span>
<span class="w">    </span><span class="n">CANCELLED</span>
<span class="w">    </span><span class="n">COMPLETED</span>
<span class="p">}</span>

<span class="c"># 発注</span>
<span class="k">type</span><span class="w"> </span><span class="err">PurchaseOrder</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nl">orderNumber</span><span class="p">:</span><span class="w"> </span><span class="n">ID</span><span class="err">!</span>
<span class="w">    </span><span class="nl">supplierCode</span><span class="p">:</span><span class="w"> </span><span class="n">String</span><span class="err">!</span>
<span class="w">    </span><span class="nl">orderDate</span><span class="p">:</span><span class="w"> </span><span class="n">Date</span><span class="err">!</span>
<span class="w">    </span><span class="nl">status</span><span class="p">:</span><span class="w"> </span><span class="n">OrderStatus</span><span class="err">!</span>
<span class="w">    </span><span class="nl">totalAmount</span><span class="p">:</span><span class="w"> </span><span class="n">BigDecimal</span><span class="err">!</span>
<span class="w">    </span><span class="nl">details</span><span class="p">:</span><span class="w"> </span><span class="err">[</span><span class="n">PurchaseOrderDetail</span><span class="err">!]!</span>

<span class="w">    </span><span class="c"># 関連データ</span>
<span class="w">    </span><span class="nl">supplier</span><span class="p">:</span><span class="w"> </span><span class="n">Supplier</span>
<span class="p">}</span>

<span class="k">type</span><span class="w"> </span><span class="err">PurchaseOrderDetail</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nl">lineNumber</span><span class="p">:</span><span class="w"> </span><span class="n">Int</span><span class="err">!</span>
<span class="w">    </span><span class="nl">itemCode</span><span class="p">:</span><span class="w"> </span><span class="n">ID</span><span class="err">!</span>
<span class="w">    </span><span class="nl">orderQuantity</span><span class="p">:</span><span class="w"> </span><span class="n">BigDecimal</span><span class="err">!</span>
<span class="w">    </span><span class="nl">unitPrice</span><span class="p">:</span><span class="w"> </span><span class="n">BigDecimal</span><span class="err">!</span>
<span class="w">    </span><span class="nl">deliveryDate</span><span class="p">:</span><span class="w"> </span><span class="n">Date</span><span class="err">!</span>
<span class="w">    </span><span class="nl">receivedQuantity</span><span class="p">:</span><span class="w"> </span><span class="n">BigDecimal</span><span class="err">!</span>

<span class="w">    </span><span class="c"># 関連データ</span>
<span class="w">    </span><span class="nl">item</span><span class="p">:</span><span class="w"> </span><span class="n">Item</span><span class="err">!</span>
<span class="p">}</span>

<span class="k">type</span><span class="w"> </span><span class="err">PurchaseOrderConnection</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nl">edges</span><span class="p">:</span><span class="w"> </span><span class="err">[</span><span class="n">PurchaseOrderEdge</span><span class="err">!]!</span>
<span class="w">    </span><span class="nl">pageInfo</span><span class="p">:</span><span class="w"> </span><span class="n">PageInfo</span><span class="err">!</span>
<span class="p">}</span>

<span class="k">type</span><span class="w"> </span><span class="err">PurchaseOrderEdge</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nl">node</span><span class="p">:</span><span class="w"> </span><span class="n">PurchaseOrder</span><span class="err">!</span>
<span class="w">    </span><span class="nl">cursor</span><span class="p">:</span><span class="w"> </span><span class="n">String</span><span class="err">!</span>
<span class="p">}</span>

<span class="c"># 入力型</span>
<span class="k">input</span><span class="w"> </span><span class="err">CreatePurchaseOrderInput</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nl">supplierCode</span><span class="p">:</span><span class="w"> </span><span class="n">String</span><span class="err">!</span>
<span class="w">    </span><span class="nl">details</span><span class="p">:</span><span class="w"> </span><span class="err">[</span><span class="n">CreateOrderDetailInput</span><span class="err">!]!</span>
<span class="p">}</span>

<span class="k">input</span><span class="w"> </span><span class="err">CreateOrderDetailInput</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nl">itemCode</span><span class="p">:</span><span class="w"> </span><span class="n">ID</span><span class="err">!</span>
<span class="w">    </span><span class="nl">orderQuantity</span><span class="p">:</span><span class="w"> </span><span class="n">BigDecimal</span><span class="err">!</span>
<span class="w">    </span><span class="nl">unitPrice</span><span class="p">:</span><span class="w"> </span><span class="n">BigDecimal</span><span class="err">!</span>
<span class="w">    </span><span class="nl">deliveryDate</span><span class="p">:</span><span class="w"> </span><span class="n">Date</span><span class="err">!</span>
<span class="p">}</span>

<span class="k">input</span><span class="w"> </span><span class="err">RecordReceivingInput</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nl">orderNumber</span><span class="p">:</span><span class="w"> </span><span class="n">ID</span><span class="err">!</span>
<span class="w">    </span><span class="nl">lineNumber</span><span class="p">:</span><span class="w"> </span><span class="n">Int</span><span class="err">!</span>
<span class="w">    </span><span class="nl">receivedQuantity</span><span class="p">:</span><span class="w"> </span><span class="n">BigDecimal</span><span class="err">!</span>
<span class="w">    </span><span class="nl">receivingDate</span><span class="p">:</span><span class="w"> </span><span class="n">Date</span><span class="err">!</span>
<span class="p">}</span>

<span class="k">type</span><span class="w"> </span><span class="err">ReceivingResult</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nl">orderNumber</span><span class="p">:</span><span class="w"> </span><span class="n">ID</span><span class="err">!</span>
<span class="w">    </span><span class="nl">lineNumber</span><span class="p">:</span><span class="w"> </span><span class="n">Int</span><span class="err">!</span>
<span class="w">    </span><span class="nl">totalReceived</span><span class="p">:</span><span class="w"> </span><span class="n">BigDecimal</span><span class="err">!</span>
<span class="w">    </span><span class="nl">isCompleted</span><span class="p">:</span><span class="w"> </span><span class="n">Boolean</span><span class="err">!</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>src/main/resources/graphql/mrp.graphqls</summary>

<div class="highlight"><pre><span></span><code><span class="c"># MRP 入力</span>
<span class="k">input</span><span class="w"> </span><span class="err">ExecuteMrpInput</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nl">startDate</span><span class="p">:</span><span class="w"> </span><span class="n">Date</span><span class="err">!</span>
<span class="w">    </span><span class="nl">endDate</span><span class="p">:</span><span class="w"> </span><span class="n">Date</span><span class="err">!</span>
<span class="p">}</span>

<span class="c"># MRP 結果</span>
<span class="k">type</span><span class="w"> </span><span class="err">MrpResult</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nl">executionId</span><span class="p">:</span><span class="w"> </span><span class="n">ID</span><span class="err">!</span>
<span class="w">    </span><span class="nl">periodStart</span><span class="p">:</span><span class="w"> </span><span class="n">Date</span><span class="err">!</span>
<span class="w">    </span><span class="nl">periodEnd</span><span class="p">:</span><span class="w"> </span><span class="n">Date</span><span class="err">!</span>
<span class="w">    </span><span class="nl">plannedOrders</span><span class="p">:</span><span class="w"> </span><span class="err">[</span><span class="n">PlannedOrder</span><span class="err">!]!</span>
<span class="w">    </span><span class="nl">shortageItems</span><span class="p">:</span><span class="w"> </span><span class="err">[</span><span class="n">ShortageItem</span><span class="err">!]!</span>
<span class="w">    </span><span class="nl">statistics</span><span class="p">:</span><span class="w"> </span><span class="n">MrpStatistics</span><span class="err">!</span>
<span class="p">}</span>

<span class="k">type</span><span class="w"> </span><span class="err">PlannedOrder</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nl">itemCode</span><span class="p">:</span><span class="w"> </span><span class="n">ID</span><span class="err">!</span>
<span class="w">    </span><span class="nl">itemName</span><span class="p">:</span><span class="w"> </span><span class="n">String</span><span class="err">!</span>
<span class="w">    </span><span class="nl">quantity</span><span class="p">:</span><span class="w"> </span><span class="n">BigDecimal</span><span class="err">!</span>
<span class="w">    </span><span class="nl">dueDate</span><span class="p">:</span><span class="w"> </span><span class="n">Date</span><span class="err">!</span>
<span class="w">    </span><span class="nl">orderType</span><span class="p">:</span><span class="w"> </span><span class="n">String</span><span class="err">!</span>
<span class="p">}</span>

<span class="k">type</span><span class="w"> </span><span class="err">ShortageItem</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nl">itemCode</span><span class="p">:</span><span class="w"> </span><span class="n">ID</span><span class="err">!</span>
<span class="w">    </span><span class="nl">itemName</span><span class="p">:</span><span class="w"> </span><span class="n">String</span><span class="err">!</span>
<span class="w">    </span><span class="nl">shortageQuantity</span><span class="p">:</span><span class="w"> </span><span class="n">BigDecimal</span><span class="err">!</span>
<span class="w">    </span><span class="nl">recommendedOrderDate</span><span class="p">:</span><span class="w"> </span><span class="n">Date</span><span class="err">!</span>
<span class="p">}</span>

<span class="k">type</span><span class="w"> </span><span class="err">MrpStatistics</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nl">totalItemsProcessed</span><span class="p">:</span><span class="w"> </span><span class="n">Int</span><span class="err">!</span>
<span class="w">    </span><span class="nl">purchaseOrderCount</span><span class="p">:</span><span class="w"> </span><span class="n">Int</span><span class="err">!</span>
<span class="w">    </span><span class="nl">productionOrderCount</span><span class="p">:</span><span class="w"> </span><span class="n">Int</span><span class="err">!</span>
<span class="w">    </span><span class="nl">shortageItemCount</span><span class="p">:</span><span class="w"> </span><span class="n">Int</span><span class="err">!</span>
<span class="w">    </span><span class="nl">executionTimeMs</span><span class="p">:</span><span class="w"> </span><span class="n">Long</span><span class="err">!</span>
<span class="p">}</span>

<span class="c"># MRP 進捗（Subscription）</span>
<span class="k">type</span><span class="w"> </span><span class="err">MrpProgress</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nl">executionId</span><span class="p">:</span><span class="w"> </span><span class="n">ID</span><span class="err">!</span>
<span class="w">    </span><span class="nl">phase</span><span class="p">:</span><span class="w"> </span><span class="n">String</span><span class="err">!</span>
<span class="w">    </span><span class="nl">current</span><span class="p">:</span><span class="w"> </span><span class="n">Int</span><span class="err">!</span>
<span class="w">    </span><span class="nl">total</span><span class="p">:</span><span class="w"> </span><span class="n">Int</span><span class="err">!</span>
<span class="w">    </span><span class="nl">message</span><span class="p">:</span><span class="w"> </span><span class="n">String</span><span class="err">!</span>
<span class="p">}</span>

<span class="k">scalar</span><span class="w"> </span><span class="err">Long</span>
</code></pre></div>

</details>

<h3 id="427-api-controller">42.7 API サーバー版との Controller の違い<a class="headerlink" href="#427-api-controller" title="Permanent link">&para;</a></h3>
<p><strong>API サーバー版（REST Controller）</strong></p>
<div class="highlight"><pre><span></span><code><span class="nd">@RestController</span><span class="w">  </span><span class="c1">// JSON を返す</span>
<span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/api/items&quot;</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ItemApiController</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">ItemUseCase</span><span class="w"> </span><span class="n">itemUseCase</span><span class="p">;</span><span class="w">  </span><span class="c1">// 共有</span>

<span class="w">    </span><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/{itemCode}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">ItemResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getItem</span><span class="p">(</span><span class="nd">@PathVariable</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Item</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">itemUseCase</span><span class="p">.</span><span class="na">getItemByCode</span><span class="p">(</span><span class="n">itemCode</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="n">ItemResponse</span><span class="p">.</span><span class="na">from</span><span class="p">(</span><span class="n">item</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>GraphQL 版（QueryResolver）</strong></p>
<div class="highlight"><pre><span></span><code><span class="nd">@Controller</span><span class="w">  </span><span class="c1">// Spring for GraphQL</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ItemResolver</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">ItemUseCase</span><span class="w"> </span><span class="n">itemUseCase</span><span class="p">;</span><span class="w">  </span><span class="c1">// 共有（同じインスタンス）</span>

<span class="w">    </span><span class="nd">@QueryMapping</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Item</span><span class="w"> </span><span class="nf">item</span><span class="p">(</span><span class="nd">@Argument</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 同じ UseCase を呼び出し</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">itemUseCase</span><span class="p">.</span><span class="na">getItemByCode</span><span class="p">(</span><span class="n">itemCode</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>共通点と相違点：</strong></p>
<table>
<thead>
<tr>
<th>観点</th>
<th>REST Controller</th>
<th>GraphQL Resolver</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>UseCase</strong></td>
<td>共有（同一インスタンス）</td>
<td>共有（同一インスタンス）</td>
</tr>
<tr>
<td><strong>アノテーション</strong></td>
<td><code>@RestController</code></td>
<td><code>@Controller</code></td>
</tr>
<tr>
<td><strong>メソッド</strong></td>
<td><code>@GetMapping</code> 等</td>
<td><code>@QueryMapping</code> / <code>@MutationMapping</code></td>
</tr>
<tr>
<td><strong>引数</strong></td>
<td><code>@PathVariable</code> / <code>@RequestBody</code></td>
<td><code>@Argument</code></td>
</tr>
<tr>
<td><strong>レスポンス</strong></td>
<td>DTO に変換</td>
<td>ドメインモデル直接（推奨）</td>
</tr>
<tr>
<td><strong>データ形式</strong></td>
<td>固定 JSON</td>
<td>クライアント指定</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="47-api">第47章：マスタ API の実装<a class="headerlink" href="#47-api" title="Permanent link">&para;</a></h2>
<h3 id="471">47.1 カスタムスカラーの実装<a class="headerlink" href="#471" title="Permanent link">&para;</a></h3>
<details>
<summary>ScalarConfig.java</summary>

<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.graphql.scalar</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">graphql.scalars.ExtendedScalars</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.context.annotation.Bean</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.context.annotation.Configuration</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.graphql.execution.RuntimeWiringConfigurer</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * カスタムスカラー設定</span>
<span class="cm"> */</span>
<span class="nd">@Configuration</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ScalarConfig</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Bean</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">RuntimeWiringConfigurer</span><span class="w"> </span><span class="nf">runtimeWiringConfigurer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">wiringBuilder</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">wiringBuilder</span>
<span class="w">            </span><span class="p">.</span><span class="na">scalar</span><span class="p">(</span><span class="n">ExtendedScalars</span><span class="p">.</span><span class="na">Date</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">scalar</span><span class="p">(</span><span class="n">ExtendedScalars</span><span class="p">.</span><span class="na">DateTime</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">scalar</span><span class="p">(</span><span class="n">ExtendedScalars</span><span class="p">.</span><span class="na">GraphQLBigDecimal</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">scalar</span><span class="p">(</span><span class="n">ExtendedScalars</span><span class="p">.</span><span class="na">GraphQLLong</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="472-graphql-tdd">47.2 品目 GraphQL リゾルバの TDD 実装<a class="headerlink" href="#472-graphql-tdd" title="Permanent link">&para;</a></h3>
<h4 id="red">Red: 失敗するテストを書く<a class="headerlink" href="#red" title="Permanent link">&para;</a></h4>
<details>
<summary>ItemResolverTest.java</summary>

<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.graphql.resolver</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.item.Item</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.item.ItemCategory</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.persistence.mapper.ItemMapper</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.boot.test.autoconfigure.graphql.tester.AutoConfigureGraphQlTester</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.boot.test.context.SpringBootTest</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.graphql.test.tester.GraphQlTester</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.test.context.DynamicPropertyRegistry</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.test.context.DynamicPropertySource</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.containers.PostgreSQLContainer</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.junit.jupiter.Container</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.junit.jupiter.Testcontainers</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>

<span class="kn">import static</span><span class="w"> </span><span class="nn">org.assertj.core.api.Assertions.*</span><span class="p">;</span>

<span class="nd">@SpringBootTest</span>
<span class="nd">@AutoConfigureGraphQlTester</span>
<span class="nd">@Testcontainers</span>
<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;品目 GraphQL リゾルバ&quot;</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">ItemResolverTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Container</span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="n">PostgreSQLContainer</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PostgreSQLContainer</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="s">&quot;postgres:16&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="na">withDatabaseName</span><span class="p">(</span><span class="s">&quot;production_test&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="na">withUsername</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="na">withPassword</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="nd">@DynamicPropertySource</span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configureProperties</span><span class="p">(</span><span class="n">DynamicPropertyRegistry</span><span class="w"> </span><span class="n">registry</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.datasource.url&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">postgres</span><span class="p">::</span><span class="n">getJdbcUrl</span><span class="p">);</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.datasource.username&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">postgres</span><span class="p">::</span><span class="n">getUsername</span><span class="p">);</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.datasource.password&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">postgres</span><span class="p">::</span><span class="n">getPassword</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">GraphQlTester</span><span class="w"> </span><span class="n">graphQlTester</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ItemMapper</span><span class="w"> </span><span class="n">itemMapper</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@BeforeEach</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setUp</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">itemMapper</span><span class="p">.</span><span class="na">deleteAll</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;Query: item&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">ItemQueryTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;品目コードで品目を取得できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldGetItemByCode</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Arrange</span>
<span class="w">            </span><span class="n">insertTestItem</span><span class="p">(</span><span class="s">&quot;PROD-001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;テスト製品&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ItemCategory</span><span class="p">.</span><span class="na">PRODUCT</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Act &amp; Assert</span>
<span class="w">            </span><span class="n">graphQlTester</span><span class="p">.</span><span class="na">document</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">                    query {</span>
<span class="s">                        item(itemCode: &quot;PROD-001&quot;) {</span>
<span class="s">                            itemCode</span>
<span class="s">                            itemName</span>
<span class="s">                            category</span>
<span class="s">                        }</span>
<span class="s">                    }</span>
<span class="s">                    &quot;&quot;&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">execute</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">path</span><span class="p">(</span><span class="s">&quot;item.itemCode&quot;</span><span class="p">).</span><span class="na">entity</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;PROD-001&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">path</span><span class="p">(</span><span class="s">&quot;item.itemName&quot;</span><span class="p">).</span><span class="na">entity</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;テスト製品&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">path</span><span class="p">(</span><span class="s">&quot;item.category&quot;</span><span class="p">).</span><span class="na">entity</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;PRODUCT&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;存在しない品目は null を返す&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldReturnNullForNonExistentItem</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">graphQlTester</span><span class="p">.</span><span class="na">document</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">                    query {</span>
<span class="s">                        item(itemCode: &quot;NOT-EXIST&quot;) {</span>
<span class="s">                            itemCode</span>
<span class="s">                        }</span>
<span class="s">                    }</span>
<span class="s">                    &quot;&quot;&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">execute</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">path</span><span class="p">(</span><span class="s">&quot;item&quot;</span><span class="p">).</span><span class="na">valueIsNull</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;関連データを同時に取得できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldGetItemWithRelatedData</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">insertTestItem</span><span class="p">(</span><span class="s">&quot;PROD-001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;テスト製品&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ItemCategory</span><span class="p">.</span><span class="na">PRODUCT</span><span class="p">);</span>

<span class="w">            </span><span class="n">graphQlTester</span><span class="p">.</span><span class="na">document</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">                    query {</span>
<span class="s">                        item(itemCode: &quot;PROD-001&quot;) {</span>
<span class="s">                            itemCode</span>
<span class="s">                            itemName</span>
<span class="s">                            bom {</span>
<span class="s">                                childItemCode</span>
<span class="s">                                requiredQuantity</span>
<span class="s">                            }</span>
<span class="s">                            stock {</span>
<span class="s">                                quantity</span>
<span class="s">                            }</span>
<span class="s">                        }</span>
<span class="s">                    }</span>
<span class="s">                    &quot;&quot;&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">execute</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">path</span><span class="p">(</span><span class="s">&quot;item.itemCode&quot;</span><span class="p">).</span><span class="na">entity</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;PROD-001&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">path</span><span class="p">(</span><span class="s">&quot;item.bom&quot;</span><span class="p">).</span><span class="na">entityList</span><span class="p">(</span><span class="n">Object</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">hasSize</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;Query: items&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">ItemsQueryTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;品目一覧を取得できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldGetItems</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">insertTestItem</span><span class="p">(</span><span class="s">&quot;ITEM-&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;%03d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">),</span>
<span class="w">                    </span><span class="s">&quot;品目&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">ItemCategory</span><span class="p">.</span><span class="na">PRODUCT</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="n">graphQlTester</span><span class="p">.</span><span class="na">document</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">                    query {</span>
<span class="s">                        items(page: 0, size: 10) {</span>
<span class="s">                            edges {</span>
<span class="s">                                node {</span>
<span class="s">                                    itemCode</span>
<span class="s">                                    itemName</span>
<span class="s">                                }</span>
<span class="s">                            }</span>
<span class="s">                            pageInfo {</span>
<span class="s">                                totalElements</span>
<span class="s">                            }</span>
<span class="s">                        }</span>
<span class="s">                    }</span>
<span class="s">                    &quot;&quot;&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">execute</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">path</span><span class="p">(</span><span class="s">&quot;items.edges&quot;</span><span class="p">).</span><span class="na">entityList</span><span class="p">(</span><span class="n">Object</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">hasSize</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">path</span><span class="p">(</span><span class="s">&quot;items.pageInfo.totalElements&quot;</span><span class="p">).</span><span class="na">entity</span><span class="p">(</span><span class="n">Integer</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;カテゴリでフィルタリングできる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldFilterByCategory</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">insertTestItem</span><span class="p">(</span><span class="s">&quot;PROD-001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;製品1&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ItemCategory</span><span class="p">.</span><span class="na">PRODUCT</span><span class="p">);</span>
<span class="w">            </span><span class="n">insertTestItem</span><span class="p">(</span><span class="s">&quot;PART-001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;部品1&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ItemCategory</span><span class="p">.</span><span class="na">PART</span><span class="p">);</span>
<span class="w">            </span><span class="n">insertTestItem</span><span class="p">(</span><span class="s">&quot;PROD-002&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;製品2&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ItemCategory</span><span class="p">.</span><span class="na">PRODUCT</span><span class="p">);</span>

<span class="w">            </span><span class="n">graphQlTester</span><span class="p">.</span><span class="na">document</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">                    query {</span>
<span class="s">                        items(category: PRODUCT, page: 0, size: 10) {</span>
<span class="s">                            edges {</span>
<span class="s">                                node {</span>
<span class="s">                                    itemCode</span>
<span class="s">                                }</span>
<span class="s">                            }</span>
<span class="s">                            pageInfo {</span>
<span class="s">                                totalElements</span>
<span class="s">                            }</span>
<span class="s">                        }</span>
<span class="s">                    }</span>
<span class="s">                    &quot;&quot;&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">execute</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">path</span><span class="p">(</span><span class="s">&quot;items.pageInfo.totalElements&quot;</span><span class="p">).</span><span class="na">entity</span><span class="p">(</span><span class="n">Integer</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Nested</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;Mutation: createItem&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">CreateItemMutationTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;品目を登録できる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldCreateItem</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">graphQlTester</span><span class="p">.</span><span class="na">document</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">                    mutation {</span>
<span class="s">                        createItem(input: {</span>
<span class="s">                            itemCode: &quot;NEW-001&quot;</span>
<span class="s">                            itemName: &quot;新規品目&quot;</span>
<span class="s">                            category: PRODUCT</span>
<span class="s">                            leadTime: 5</span>
<span class="s">                        }) {</span>
<span class="s">                            itemCode</span>
<span class="s">                            itemName</span>
<span class="s">                            category</span>
<span class="s">                            leadTime</span>
<span class="s">                        }</span>
<span class="s">                    }</span>
<span class="s">                    &quot;&quot;&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">execute</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">path</span><span class="p">(</span><span class="s">&quot;createItem.itemCode&quot;</span><span class="p">).</span><span class="na">entity</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;NEW-001&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">path</span><span class="p">(</span><span class="s">&quot;createItem.itemName&quot;</span><span class="p">).</span><span class="na">entity</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;新規品目&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">path</span><span class="p">(</span><span class="s">&quot;createItem.category&quot;</span><span class="p">).</span><span class="na">entity</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;PRODUCT&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">path</span><span class="p">(</span><span class="s">&quot;createItem.leadTime&quot;</span><span class="p">).</span><span class="na">entity</span><span class="p">(</span><span class="n">Integer</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// DB に保存されていることを確認</span>
<span class="w">            </span><span class="kd">var</span><span class="w"> </span><span class="n">saved</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">itemMapper</span><span class="p">.</span><span class="na">findByCode</span><span class="p">(</span><span class="s">&quot;NEW-001&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">saved</span><span class="p">).</span><span class="na">isNotNull</span><span class="p">();</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">saved</span><span class="p">.</span><span class="na">getItemName</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;新規品目&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nd">@Test</span>
<span class="w">        </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;重複する品目コードはエラーになる&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldFailForDuplicateCode</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">insertTestItem</span><span class="p">(</span><span class="s">&quot;DUP-001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;既存品目&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ItemCategory</span><span class="p">.</span><span class="na">PRODUCT</span><span class="p">);</span>

<span class="w">            </span><span class="n">graphQlTester</span><span class="p">.</span><span class="na">document</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">                    mutation {</span>
<span class="s">                        createItem(input: {</span>
<span class="s">                            itemCode: &quot;DUP-001&quot;</span>
<span class="s">                            itemName: &quot;重複品目&quot;</span>
<span class="s">                            category: PRODUCT</span>
<span class="s">                        }) {</span>
<span class="s">                            itemCode</span>
<span class="s">                        }</span>
<span class="s">                    }</span>
<span class="s">                    &quot;&quot;&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">execute</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">errors</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">satisfy</span><span class="p">(</span><span class="n">errors</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">assertThat</span><span class="p">(</span><span class="n">errors</span><span class="p">).</span><span class="na">hasSize</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">insertTestItem</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">code</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">ItemCategory</span><span class="w"> </span><span class="n">category</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">itemMapper</span><span class="p">.</span><span class="na">insert</span><span class="p">(</span><span class="n">Item</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">itemCode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">effectiveDate</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2025</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">itemName</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">category</span><span class="p">(</span><span class="n">category</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h4 id="green-graphql">Green: GraphQL リゾルバの実装<a class="headerlink" href="#green-graphql" title="Permanent link">&para;</a></h4>
<details>
<summary>ItemResolver.java</summary>

<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.graphql.resolver</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.application.port.in.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.exception.DuplicateItemException</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.exception.ItemNotFoundException</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.item.Item</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.item.ItemCategory</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">graphql.GraphQLError</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">graphql.GraphqlErrorBuilder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">graphql.schema.DataFetchingEnvironment</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.graphql.data.method.annotation.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.graphql.execution.ErrorType</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Controller</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 品目 GraphQL リゾルバ実装</span>
<span class="cm"> * 既存の ItemUseCase を Input Adapter として呼び出す</span>
<span class="cm"> */</span>
<span class="nd">@Controller</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ItemResolver</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">ItemUseCase</span><span class="w"> </span><span class="n">itemUseCase</span><span class="p">;</span><span class="w">  </span><span class="c1">// 既存の UseCase を注入</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">ItemResolver</span><span class="p">(</span><span class="n">ItemUseCase</span><span class="w"> </span><span class="n">itemUseCase</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">itemUseCase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">itemUseCase</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// ========== Query ==========</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 品目取得</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@QueryMapping</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Item</span><span class="w"> </span><span class="nf">item</span><span class="p">(</span><span class="nd">@Argument</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">itemUseCase</span><span class="p">.</span><span class="na">getItemByCode</span><span class="p">(</span><span class="n">itemCode</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">ItemNotFoundException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span><span class="w">  </span><span class="c1">// GraphQL では null を返す</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 品目一覧（ページネーション付き）</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@QueryMapping</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ItemConnection</span><span class="w"> </span><span class="nf">items</span><span class="p">(</span>
<span class="w">            </span><span class="nd">@Argument</span><span class="w"> </span><span class="n">ItemCategory</span><span class="w"> </span><span class="n">category</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@Argument</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">page</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@Argument</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">size</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">pageNum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">pageSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">;</span>

<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span><span class="w"> </span><span class="n">items</span><span class="p">;</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">totalElements</span><span class="p">;</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">category</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">items</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">itemUseCase</span><span class="p">.</span><span class="na">getItemsByCategory</span><span class="p">(</span><span class="n">category</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">items</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">itemUseCase</span><span class="p">.</span><span class="na">getAllItems</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">totalElements</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">items</span><span class="p">.</span><span class="na">size</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// ページング処理</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pageNum</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">pageSize</span><span class="p">;</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="na">min</span><span class="p">(</span><span class="n">start</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">pageSize</span><span class="p">,</span><span class="w"> </span><span class="n">items</span><span class="p">.</span><span class="na">size</span><span class="p">());</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span><span class="w"> </span><span class="n">pagedItems</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">items</span><span class="p">.</span><span class="na">subList</span><span class="p">(</span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="n">end</span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ItemConnection</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">edges</span><span class="p">(</span><span class="n">pagedItems</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">item</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">ItemEdge</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">node</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">cursor</span><span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="na">getItemCode</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">toList</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">pageInfo</span><span class="p">(</span><span class="n">PageInfo</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">hasNextPage</span><span class="p">(</span><span class="n">end</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">totalElements</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">hasPreviousPage</span><span class="p">(</span><span class="n">pageNum</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">totalElements</span><span class="p">(</span><span class="n">totalElements</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">totalPages</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="na">ceil</span><span class="p">((</span><span class="kt">double</span><span class="p">)</span><span class="w"> </span><span class="n">totalElements</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">pageSize</span><span class="p">))</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// ========== Mutation ==========</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 品目登録</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@MutationMapping</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Item</span><span class="w"> </span><span class="nf">createItem</span><span class="p">(</span><span class="nd">@Argument</span><span class="w"> </span><span class="n">CreateItemInput</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">CreateItemCommand</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CreateItemCommand</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">itemCode</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="na">getItemCode</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">itemName</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="na">getItemName</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">category</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="na">getCategory</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">itemGroupCode</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="na">getItemGroupCode</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">unitCode</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="na">getUnitCode</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">locationCode</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="na">getLocationCode</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">leadTime</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="na">getLeadTime</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">safetyStock</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="na">getSafetyStock</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">itemUseCase</span><span class="p">.</span><span class="na">createItem</span><span class="p">(</span><span class="n">command</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 品目更新</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@MutationMapping</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Item</span><span class="w"> </span><span class="nf">updateItem</span><span class="p">(</span><span class="nd">@Argument</span><span class="w"> </span><span class="n">UpdateItemInput</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">UpdateItemCommand</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UpdateItemCommand</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">itemCode</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="na">getItemCode</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">itemName</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="na">getItemName</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">category</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="na">getCategory</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">leadTime</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="na">getLeadTime</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">safetyStock</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="na">getSafetyStock</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">itemUseCase</span><span class="p">.</span><span class="na">updateItem</span><span class="p">(</span><span class="n">command</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 品目削除</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@MutationMapping</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">deleteItem</span><span class="p">(</span><span class="nd">@Argument</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">itemUseCase</span><span class="p">.</span><span class="na">deleteItem</span><span class="p">(</span><span class="n">itemCode</span><span class="p">);</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">ItemNotFoundException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// ========== 例外ハンドリング ==========</span>

<span class="w">    </span><span class="nd">@GraphQlExceptionHandler</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">GraphQLError</span><span class="w"> </span><span class="nf">handleDuplicateItem</span><span class="p">(</span><span class="n">DuplicateItemException</span><span class="w"> </span><span class="n">ex</span><span class="p">,</span><span class="w"> </span><span class="n">DataFetchingEnvironment</span><span class="w"> </span><span class="n">env</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">GraphqlErrorBuilder</span><span class="p">.</span><span class="na">newError</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">errorType</span><span class="p">(</span><span class="n">ErrorType</span><span class="p">.</span><span class="na">BAD_REQUEST</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">message</span><span class="p">(</span><span class="n">ex</span><span class="p">.</span><span class="na">getMessage</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@GraphQlExceptionHandler</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">GraphQLError</span><span class="w"> </span><span class="nf">handleItemNotFound</span><span class="p">(</span><span class="n">ItemNotFoundException</span><span class="w"> </span><span class="n">ex</span><span class="p">,</span><span class="w"> </span><span class="n">DataFetchingEnvironment</span><span class="w"> </span><span class="n">env</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">GraphqlErrorBuilder</span><span class="p">.</span><span class="na">newError</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">errorType</span><span class="p">(</span><span class="n">ErrorType</span><span class="p">.</span><span class="na">NOT_FOUND</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">message</span><span class="p">(</span><span class="n">ex</span><span class="p">.</span><span class="na">getMessage</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>補助クラス（ItemConnection, PageInfo 等）</summary>

<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.graphql.resolver</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.item.Item</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.item.ItemCategory</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Builder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ItemConnection</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">ItemEdge</span><span class="o">&gt;</span><span class="w"> </span><span class="n">edges</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">PageInfo</span><span class="w"> </span><span class="n">pageInfo</span><span class="p">;</span>
<span class="p">}</span>

<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ItemEdge</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Item</span><span class="w"> </span><span class="n">node</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">cursor</span><span class="p">;</span>
<span class="p">}</span>

<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">PageInfo</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">hasNextPage</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">hasPreviousPage</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">totalElements</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">totalPages</span><span class="p">;</span>
<span class="p">}</span>

<span class="nd">@Data</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CreateItemInput</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemName</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ItemCategory</span><span class="w"> </span><span class="n">category</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemGroupCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">unitCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">locationCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">leadTime</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">safetyStock</span><span class="p">;</span>
<span class="p">}</span>

<span class="nd">@Data</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UpdateItemInput</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemName</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ItemCategory</span><span class="w"> </span><span class="n">category</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">leadTime</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">safetyStock</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="473-n1-dataloader">47.3 N+1 問題対策（DataLoader）<a class="headerlink" href="#473-n1-dataloader" title="Permanent link">&para;</a></h3>
<p>GraphQL では関連データの取得時に N+1 問題が発生しやすいため、DataLoader を使用します。</p>
<details>
<summary>DataLoaderConfig.java</summary>

<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.graphql.dataloader</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.application.port.in.ItemUseCase</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.item.Item</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.dataloader.DataLoader</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.dataloader.DataLoaderFactory</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.context.annotation.Bean</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.context.annotation.Configuration</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.graphql.execution.BatchLoaderRegistry</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Map</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.function.Function</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.stream.Collectors</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * DataLoader 設定</span>
<span class="cm"> * N+1 問題を解決するためのバッチローディング</span>
<span class="cm"> */</span>
<span class="nd">@Configuration</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DataLoaderConfig</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">ItemUseCase</span><span class="w"> </span><span class="n">itemUseCase</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">DataLoaderConfig</span><span class="p">(</span><span class="n">ItemUseCase</span><span class="w"> </span><span class="n">itemUseCase</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">itemUseCase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">itemUseCase</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Bean</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">BatchLoaderRegistry</span><span class="w"> </span><span class="nf">batchLoaderRegistry</span><span class="p">(</span><span class="n">BatchLoaderRegistry</span><span class="w"> </span><span class="n">registry</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 品目 DataLoader</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">forTypePair</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">Item</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">registerBatchLoader</span><span class="p">((</span><span class="n">itemCodes</span><span class="p">,</span><span class="w"> </span><span class="n">env</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="c1">// バッチで品目を取得（1回のクエリで複数取得）</span>
<span class="w">                </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span><span class="w"> </span><span class="n">items</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">itemUseCase</span><span class="p">.</span><span class="na">getItemsByCodes</span><span class="p">(</span><span class="n">itemCodes</span><span class="p">);</span>

<span class="w">                </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Item</span><span class="o">&gt;</span><span class="w"> </span><span class="n">itemMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">items</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">toMap</span><span class="p">(</span><span class="n">Item</span><span class="p">::</span><span class="n">getItemCode</span><span class="p">,</span><span class="w"> </span><span class="n">Function</span><span class="p">.</span><span class="na">identity</span><span class="p">()));</span>

<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">reactor</span><span class="p">.</span><span class="na">core</span><span class="p">.</span><span class="na">publisher</span><span class="p">.</span><span class="na">Flux</span><span class="p">.</span><span class="na">fromIterable</span><span class="p">(</span><span class="n">itemCodes</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">code</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">itemMap</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">code</span><span class="p">));</span>
<span class="w">            </span><span class="p">});</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">registry</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>PurchaseOrderDetailResolver.java（DataLoader 使用）</summary>

<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.graphql.resolver</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.item.Item</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.purchase.PurchaseOrderDetail</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.dataloader.DataLoader</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.graphql.data.method.annotation.SchemaMapping</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Controller</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.concurrent.CompletableFuture</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 発注明細リゾルバ</span>
<span class="cm"> * DataLoader を使って品目を効率的に取得</span>
<span class="cm"> */</span>
<span class="nd">@Controller</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">PurchaseOrderDetailResolver</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 発注明細から品目を取得（DataLoader 使用）</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@SchemaMapping</span><span class="p">(</span><span class="n">typeName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;PurchaseOrderDetail&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;item&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">CompletableFuture</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">item</span><span class="p">(</span>
<span class="w">            </span><span class="n">PurchaseOrderDetail</span><span class="w"> </span><span class="n">detail</span><span class="p">,</span>
<span class="w">            </span><span class="n">DataLoader</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Item</span><span class="o">&gt;</span><span class="w"> </span><span class="n">itemDataLoader</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="c1">// DataLoader 経由で取得（バッチ処理される）</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">itemDataLoader</span><span class="p">.</span><span class="na">load</span><span class="p">(</span><span class="n">detail</span><span class="p">.</span><span class="na">getItemCode</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="474-bom-graphql">47.4 BOM GraphQL リゾルバ<a class="headerlink" href="#474-bom-graphql" title="Permanent link">&para;</a></h3>
<details>
<summary>BomResolver.java</summary>

<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.graphql.resolver</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.application.service.BomNode</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.application.service.BomService</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.application.service.WhereUsedResult</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.graphql.data.method.annotation.Argument</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.graphql.data.method.annotation.QueryMapping</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Controller</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * BOM GraphQL リゾルバ実装</span>
<span class="cm"> * 既存の BomService を Input Adapter として呼び出す</span>
<span class="cm"> */</span>
<span class="nd">@Controller</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BomResolver</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">BomService</span><span class="w"> </span><span class="n">bomService</span><span class="p">;</span><span class="w">  </span><span class="c1">// 既存のサービスを注入</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">BomResolver</span><span class="p">(</span><span class="n">BomService</span><span class="w"> </span><span class="n">bomService</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">bomService</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bomService</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 部品展開（BOM ツリー）</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@QueryMapping</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">BomNode</span><span class="w"> </span><span class="nf">bomTree</span><span class="p">(</span><span class="nd">@Argument</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">bomService</span><span class="p">.</span><span class="na">explodeBom</span><span class="p">(</span><span class="n">itemCode</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 使用先照会</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@QueryMapping</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">WhereUsedResult</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">whereUsed</span><span class="p">(</span><span class="nd">@Argument</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">bomService</span><span class="p">.</span><span class="na">whereUsed</span><span class="p">(</span><span class="n">itemCode</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h2 id="48-api">第48章：トランザクション API の実装<a class="headerlink" href="#48-api" title="Permanent link">&para;</a></h2>
<h3 id="481-graphql">48.1 発注 GraphQL リゾルバ<a class="headerlink" href="#481-graphql" title="Permanent link">&para;</a></h3>
<details>
<summary>PurchaseOrderResolver.java</summary>

<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.graphql.resolver</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.application.port.in.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.purchase.PurchaseOrder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.graphql.data.method.annotation.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Controller</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 発注 GraphQL リゾルバ実装</span>
<span class="cm"> * 既存の PurchaseOrderUseCase を Input Adapter として呼び出す</span>
<span class="cm"> */</span>
<span class="nd">@Controller</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">PurchaseOrderResolver</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">PurchaseOrderUseCase</span><span class="w"> </span><span class="n">useCase</span><span class="p">;</span><span class="w">  </span><span class="c1">// 既存の UseCase</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">PurchaseOrderResolver</span><span class="p">(</span><span class="n">PurchaseOrderUseCase</span><span class="w"> </span><span class="n">useCase</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">useCase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">useCase</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// ========== Query ==========</span>

<span class="w">    </span><span class="nd">@QueryMapping</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">PurchaseOrder</span><span class="w"> </span><span class="nf">purchaseOrder</span><span class="p">(</span><span class="nd">@Argument</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">orderNumber</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">useCase</span><span class="p">.</span><span class="na">getOrder</span><span class="p">(</span><span class="n">orderNumber</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@QueryMapping</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">PurchaseOrderConnection</span><span class="w"> </span><span class="nf">purchaseOrders</span><span class="p">(</span>
<span class="w">            </span><span class="nd">@Argument</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">status</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@Argument</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">page</span><span class="p">,</span>
<span class="w">            </span><span class="nd">@Argument</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">size</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">PurchaseOrder</span><span class="o">&gt;</span><span class="w"> </span><span class="n">orders</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">useCase</span><span class="p">.</span><span class="na">getAllOrders</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// ページネーション処理（省略）</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">PurchaseOrderConnection</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">edges</span><span class="p">(</span><span class="n">orders</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">order</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">PurchaseOrderEdge</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">node</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">cursor</span><span class="p">(</span><span class="n">order</span><span class="p">.</span><span class="na">getOrderNumber</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">toList</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">pageInfo</span><span class="p">(</span><span class="n">PageInfo</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">totalElements</span><span class="p">(</span><span class="n">orders</span><span class="p">.</span><span class="na">size</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// ========== Mutation ==========</span>

<span class="w">    </span><span class="nd">@MutationMapping</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">PurchaseOrder</span><span class="w"> </span><span class="nf">createPurchaseOrder</span><span class="p">(</span><span class="nd">@Argument</span><span class="w"> </span><span class="n">CreatePurchaseOrderInput</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">CreatePurchaseOrderCommand</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CreatePurchaseOrderCommand</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">supplierCode</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="na">getSupplierCode</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">details</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="na">getDetails</span><span class="p">().</span><span class="na">stream</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">d</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">CreatePurchaseOrderCommand</span><span class="p">.</span><span class="na">PurchaseOrderDetailCommand</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">itemCode</span><span class="p">(</span><span class="n">d</span><span class="p">.</span><span class="na">getItemCode</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">orderQuantity</span><span class="p">(</span><span class="n">d</span><span class="p">.</span><span class="na">getOrderQuantity</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">unitPrice</span><span class="p">(</span><span class="n">d</span><span class="p">.</span><span class="na">getUnitPrice</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">deliveryDate</span><span class="p">(</span><span class="n">d</span><span class="p">.</span><span class="na">getDeliveryDate</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">toList</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">useCase</span><span class="p">.</span><span class="na">createOrder</span><span class="p">(</span><span class="n">command</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@MutationMapping</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">PurchaseOrder</span><span class="w"> </span><span class="nf">confirmPurchaseOrder</span><span class="p">(</span><span class="nd">@Argument</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">orderNumber</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">useCase</span><span class="p">.</span><span class="na">confirmOrder</span><span class="p">(</span><span class="n">orderNumber</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@MutationMapping</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">cancelPurchaseOrder</span><span class="p">(</span><span class="nd">@Argument</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">orderNumber</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">useCase</span><span class="p">.</span><span class="na">cancelOrder</span><span class="p">(</span><span class="n">orderNumber</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@MutationMapping</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ReceivingResult</span><span class="w"> </span><span class="nf">recordReceiving</span><span class="p">(</span><span class="nd">@Argument</span><span class="w"> </span><span class="n">RecordReceivingInput</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">useCase</span><span class="p">.</span><span class="na">recordReceiving</span><span class="p">(</span>
<span class="w">            </span><span class="n">input</span><span class="p">.</span><span class="na">getOrderNumber</span><span class="p">(),</span>
<span class="w">            </span><span class="n">input</span><span class="p">.</span><span class="na">getLineNumber</span><span class="p">(),</span>
<span class="w">            </span><span class="n">input</span><span class="p">.</span><span class="na">getReceivedQuantity</span><span class="p">(),</span>
<span class="w">            </span><span class="n">input</span><span class="p">.</span><span class="na">getReceivingDate</span><span class="p">()</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ReceivingResult</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">orderNumber</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="na">getOrderNumber</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">lineNumber</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="na">getLineNumber</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">totalReceived</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">getTotalReceived</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">isCompleted</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">isCompleted</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 入力型</span>
<span class="nd">@lombok.Data</span>
<span class="kd">class</span> <span class="nc">CreatePurchaseOrderInput</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">supplierCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">CreateOrderDetailInput</span><span class="o">&gt;</span><span class="w"> </span><span class="n">details</span><span class="p">;</span>
<span class="p">}</span>

<span class="nd">@lombok.Data</span>
<span class="kd">class</span> <span class="nc">CreateOrderDetailInput</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">orderQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">unitPrice</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">deliveryDate</span><span class="p">;</span>
<span class="p">}</span>

<span class="nd">@lombok.Data</span>
<span class="kd">class</span> <span class="nc">RecordReceivingInput</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">orderNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">lineNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">receivedQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">receivingDate</span><span class="p">;</span>
<span class="p">}</span>

<span class="nd">@lombok.Data</span>
<span class="nd">@lombok.Builder</span>
<span class="kd">class</span> <span class="nc">ReceivingResult</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">orderNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">lineNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">totalReceived</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">isCompleted</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="482-mrp-graphql">48.2 MRP GraphQL リゾルバ<a class="headerlink" href="#482-mrp-graphql" title="Permanent link">&para;</a></h3>
<details>
<summary>MrpResolver.java</summary>

<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.graphql.resolver</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.application.service.MrpService</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.graphql.data.method.annotation.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Controller</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.UUID</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * MRP GraphQL リゾルバ実装</span>
<span class="cm"> * 既存の MrpService を Input Adapter として呼び出す</span>
<span class="cm"> */</span>
<span class="nd">@Controller</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MrpResolver</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">MrpService</span><span class="w"> </span><span class="n">mrpService</span><span class="p">;</span><span class="w">  </span><span class="c1">// 既存のサービス</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">MrpResolver</span><span class="p">(</span><span class="n">MrpService</span><span class="w"> </span><span class="n">mrpService</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">mrpService</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mrpService</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * MRP 実行</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@MutationMapping</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">MrpResult</span><span class="w"> </span><span class="nf">executeMrp</span><span class="p">(</span><span class="nd">@Argument</span><span class="w"> </span><span class="n">ExecuteMrpInput</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">executionId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UUID</span><span class="p">.</span><span class="na">randomUUID</span><span class="p">().</span><span class="na">toString</span><span class="p">();</span>

<span class="w">        </span><span class="kt">long</span><span class="w"> </span><span class="n">startTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">currentTimeMillis</span><span class="p">();</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mrpService</span><span class="p">.</span><span class="na">execute</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="na">getStartDate</span><span class="p">(),</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="na">getEndDate</span><span class="p">());</span>
<span class="w">        </span><span class="kt">long</span><span class="w"> </span><span class="n">executionTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">currentTimeMillis</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">startTime</span><span class="p">;</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">MrpResult</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">executionId</span><span class="p">(</span><span class="n">executionId</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">periodStart</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="na">getStartDate</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">periodEnd</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="na">getEndDate</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">plannedOrders</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">getPlannedOrders</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">shortageItems</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">getShortageItems</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">statistics</span><span class="p">(</span><span class="n">MrpStatistics</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">totalItemsProcessed</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">getPlannedOrders</span><span class="p">().</span><span class="na">size</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">shortageItemCount</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">getShortageItems</span><span class="p">().</span><span class="na">size</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">executionTimeMs</span><span class="p">(</span><span class="n">executionTime</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="nd">@lombok.Data</span>
<span class="kd">class</span> <span class="nc">ExecuteMrpInput</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">startDate</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">endDate</span><span class="p">;</span>
<span class="p">}</span>

<span class="nd">@lombok.Data</span>
<span class="nd">@lombok.Builder</span>
<span class="kd">class</span> <span class="nc">MrpResult</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">executionId</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">periodStart</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">periodEnd</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">List</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">plannedOrders</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">List</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">shortageItems</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">MrpStatistics</span><span class="w"> </span><span class="n">statistics</span><span class="p">;</span>
<span class="p">}</span>

<span class="nd">@lombok.Data</span>
<span class="nd">@lombok.Builder</span>
<span class="kd">class</span> <span class="nc">MrpStatistics</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">totalItemsProcessed</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">purchaseOrderCount</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">productionOrderCount</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">shortageItemCount</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">executionTimeMs</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="483-subscription">48.3 Subscription（リアルタイム更新）<a class="headerlink" href="#483-subscription" title="Permanent link">&para;</a></h3>
<details>
<summary>SubscriptionResolver.java</summary>

<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.graphql.subscription</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.model.purchase.PurchaseOrder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.graphql.data.method.annotation.Argument</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.graphql.data.method.annotation.SubscriptionMapping</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Controller</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">reactor.core.publisher.Flux</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.Duration</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * GraphQL Subscription リゾルバ</span>
<span class="cm"> */</span>
<span class="nd">@Controller</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SubscriptionResolver</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">OrderEventPublisher</span><span class="w"> </span><span class="n">orderEventPublisher</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">MrpProgressPublisher</span><span class="w"> </span><span class="n">mrpProgressPublisher</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">SubscriptionResolver</span><span class="p">(</span>
<span class="w">            </span><span class="n">OrderEventPublisher</span><span class="w"> </span><span class="n">orderEventPublisher</span><span class="p">,</span>
<span class="w">            </span><span class="n">MrpProgressPublisher</span><span class="w"> </span><span class="n">mrpProgressPublisher</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">orderEventPublisher</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">orderEventPublisher</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">mrpProgressPublisher</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mrpProgressPublisher</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * MRP 進捗の購読</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@SubscriptionMapping</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Flux</span><span class="o">&lt;</span><span class="n">MrpProgress</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">mrpProgress</span><span class="p">(</span><span class="nd">@Argument</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">executionId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">mrpProgressPublisher</span><span class="p">.</span><span class="na">subscribe</span><span class="p">(</span><span class="n">executionId</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 発注ステータス変更の購読</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@SubscriptionMapping</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Flux</span><span class="o">&lt;</span><span class="n">PurchaseOrder</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">orderStatusChanged</span><span class="p">(</span><span class="nd">@Argument</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">orderNumber</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">orderEventPublisher</span><span class="p">.</span><span class="na">subscribe</span><span class="p">(</span><span class="n">orderNumber</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 在庫変動の購読</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@SubscriptionMapping</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Flux</span><span class="o">&lt;</span><span class="n">StockChange</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">stockChanged</span><span class="p">(</span><span class="nd">@Argument</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ダミー実装（5秒ごとに在庫変動をシミュレート）</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Flux</span><span class="p">.</span><span class="na">interval</span><span class="p">(</span><span class="n">Duration</span><span class="p">.</span><span class="na">ofSeconds</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">StockChange</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">itemCode</span><span class="p">(</span><span class="n">itemCode</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">itemCode</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ITEM-001&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">changeType</span><span class="p">(</span><span class="s">&quot;RECEIVE&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">quantity</span><span class="p">(</span><span class="n">java</span><span class="p">.</span><span class="na">math</span><span class="p">.</span><span class="na">BigDecimal</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="nd">@lombok.Data</span>
<span class="nd">@lombok.Builder</span>
<span class="kd">class</span> <span class="nc">StockChange</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">itemCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">changeType</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">math</span><span class="p">.</span><span class="na">BigDecimal</span><span class="w"> </span><span class="n">quantity</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>MrpProgressPublisher.java（イベントパブリッシャー）</summary>

<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.graphql.subscription</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Component</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">reactor.core.publisher.Flux</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">reactor.core.publisher.Sinks</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.concurrent.ConcurrentHashMap</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * MRP 進捗イベントパブリッシャー</span>
<span class="cm"> */</span>
<span class="nd">@Component</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MrpProgressPublisher</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">ConcurrentHashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Sinks</span><span class="p">.</span><span class="na">Many</span><span class="o">&lt;</span><span class="n">MrpProgress</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">sinks</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">ConcurrentHashMap</span><span class="o">&lt;&gt;</span><span class="p">();</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 進捗を購読</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Flux</span><span class="o">&lt;</span><span class="n">MrpProgress</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">subscribe</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">executionId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Sinks</span><span class="p">.</span><span class="na">Many</span><span class="o">&lt;</span><span class="n">MrpProgress</span><span class="o">&gt;</span><span class="w"> </span><span class="n">sink</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sinks</span><span class="p">.</span><span class="na">computeIfAbsent</span><span class="p">(</span>
<span class="w">            </span><span class="n">executionId</span><span class="p">,</span>
<span class="w">            </span><span class="n">k</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Sinks</span><span class="p">.</span><span class="na">many</span><span class="p">().</span><span class="na">multicast</span><span class="p">().</span><span class="na">onBackpressureBuffer</span><span class="p">()</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">sink</span><span class="p">.</span><span class="na">asFlux</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 進捗を発行</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">publish</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">executionId</span><span class="p">,</span><span class="w"> </span><span class="n">MrpProgress</span><span class="w"> </span><span class="n">progress</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Sinks</span><span class="p">.</span><span class="na">Many</span><span class="o">&lt;</span><span class="n">MrpProgress</span><span class="o">&gt;</span><span class="w"> </span><span class="n">sink</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sinks</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">executionId</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">sink</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">sink</span><span class="p">.</span><span class="na">tryEmitNext</span><span class="p">(</span><span class="n">progress</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 完了</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">complete</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">executionId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Sinks</span><span class="p">.</span><span class="na">Many</span><span class="o">&lt;</span><span class="n">MrpProgress</span><span class="o">&gt;</span><span class="w"> </span><span class="n">sink</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sinks</span><span class="p">.</span><span class="na">remove</span><span class="p">(</span><span class="n">executionId</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">sink</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">sink</span><span class="p">.</span><span class="na">tryEmitComplete</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="nd">@lombok.Data</span>
<span class="nd">@lombok.Builder</span>
<span class="kd">class</span> <span class="nc">MrpProgress</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">executionId</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">phase</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">current</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">total</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">message</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h2 id="49">第49章：エラーハンドリングとベストプラクティス<a class="headerlink" href="#49" title="Permanent link">&para;</a></h2>
<h3 id="491">49.1 グローバル例外ハンドラ<a class="headerlink" href="#491" title="Permanent link">&para;</a></h3>
<details>
<summary>GraphQLExceptionHandler.java</summary>

<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.graphql</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.production.domain.exception.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">graphql.GraphQLError</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">graphql.GraphqlErrorBuilder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">graphql.schema.DataFetchingEnvironment</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.graphql.execution.DataFetcherExceptionResolverAdapter</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.graphql.execution.ErrorType</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Component</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * GraphQL グローバル例外ハンドラ</span>
<span class="cm"> */</span>
<span class="nd">@Component</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">GraphQLExceptionHandler</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">DataFetcherExceptionResolverAdapter</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">GraphQLError</span><span class="w"> </span><span class="nf">resolveToSingleError</span><span class="p">(</span><span class="n">Throwable</span><span class="w"> </span><span class="n">ex</span><span class="p">,</span><span class="w"> </span><span class="n">DataFetchingEnvironment</span><span class="w"> </span><span class="n">env</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ex</span><span class="w"> </span><span class="k">instanceof</span><span class="w"> </span><span class="n">ItemNotFoundException</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">GraphqlErrorBuilder</span><span class="p">.</span><span class="na">newError</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">errorType</span><span class="p">(</span><span class="n">ErrorType</span><span class="p">.</span><span class="na">NOT_FOUND</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">message</span><span class="p">(</span><span class="n">ex</span><span class="p">.</span><span class="na">getMessage</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ex</span><span class="w"> </span><span class="k">instanceof</span><span class="w"> </span><span class="n">DuplicateItemException</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">GraphqlErrorBuilder</span><span class="p">.</span><span class="na">newError</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">errorType</span><span class="p">(</span><span class="n">ErrorType</span><span class="p">.</span><span class="na">BAD_REQUEST</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">message</span><span class="p">(</span><span class="n">ex</span><span class="p">.</span><span class="na">getMessage</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ex</span><span class="w"> </span><span class="k">instanceof</span><span class="w"> </span><span class="n">OrderAlreadyConfirmedException</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">GraphqlErrorBuilder</span><span class="p">.</span><span class="na">newError</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">errorType</span><span class="p">(</span><span class="n">ErrorType</span><span class="p">.</span><span class="na">BAD_REQUEST</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">message</span><span class="p">(</span><span class="n">ex</span><span class="p">.</span><span class="na">getMessage</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ex</span><span class="w"> </span><span class="k">instanceof</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">GraphqlErrorBuilder</span><span class="p">.</span><span class="na">newError</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">errorType</span><span class="p">(</span><span class="n">ErrorType</span><span class="p">.</span><span class="na">BAD_REQUEST</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">message</span><span class="p">(</span><span class="n">ex</span><span class="p">.</span><span class="na">getMessage</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// 未知のエラー</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">GraphqlErrorBuilder</span><span class="p">.</span><span class="na">newError</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">errorType</span><span class="p">(</span><span class="n">ErrorType</span><span class="p">.</span><span class="na">INTERNAL_ERROR</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">message</span><span class="p">(</span><span class="s">&quot;内部エラーが発生しました&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="492">49.2 入力バリデーション<a class="headerlink" href="#492" title="Permanent link">&para;</a></h3>
<details>
<summary>ValidationExceptionHandler.java</summary>

<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.production.infrastructure.graphql.validation</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">graphql.GraphQLError</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">graphql.GraphqlErrorBuilder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">graphql.schema.DataFetchingEnvironment</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.graphql.data.method.annotation.GraphQlExceptionHandler</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.graphql.execution.ErrorType</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Controller</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">jakarta.validation.ConstraintViolation</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">jakarta.validation.ConstraintViolationException</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.stream.Collectors</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * バリデーション例外ハンドラ</span>
<span class="cm"> */</span>
<span class="nd">@Controller</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ValidationExceptionHandler</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@GraphQlExceptionHandler</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">GraphQLError</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">handleValidation</span><span class="p">(</span>
<span class="w">            </span><span class="n">ConstraintViolationException</span><span class="w"> </span><span class="n">ex</span><span class="p">,</span>
<span class="w">            </span><span class="n">DataFetchingEnvironment</span><span class="w"> </span><span class="n">env</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ex</span><span class="p">.</span><span class="na">getConstraintViolations</span><span class="p">().</span><span class="na">stream</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">violation</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">toGraphQLError</span><span class="p">(</span><span class="n">violation</span><span class="p">,</span><span class="w"> </span><span class="n">env</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">toList</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">GraphQLError</span><span class="w"> </span><span class="nf">toGraphQLError</span><span class="p">(</span>
<span class="w">            </span><span class="n">ConstraintViolation</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">violation</span><span class="p">,</span>
<span class="w">            </span><span class="n">DataFetchingEnvironment</span><span class="w"> </span><span class="n">env</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">GraphqlErrorBuilder</span><span class="p">.</span><span class="na">newError</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">errorType</span><span class="p">(</span><span class="n">ErrorType</span><span class="p">.</span><span class="na">BAD_REQUEST</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">message</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;%s: %s&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="n">violation</span><span class="p">.</span><span class="na">getPropertyPath</span><span class="p">(),</span>
<span class="w">                </span><span class="n">violation</span><span class="p">.</span><span class="na">getMessage</span><span class="p">()))</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="493">49.3 設定ファイル<a class="headerlink" href="#493" title="Permanent link">&para;</a></h3>
<details>
<summary>application.yml（GraphQL 追加設定）</summary>

<div class="highlight"><pre><span></span><code><span class="nt">spring</span><span class="p">:</span>
<span class="w">  </span><span class="nt">graphql</span><span class="p">:</span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/graphql</span>
<span class="w">    </span><span class="nt">graphiql</span><span class="p">:</span>
<span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">              </span><span class="c1"># 開発時に GraphiQL UI を有効化</span>
<span class="w">      </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/graphiql</span>
<span class="w">    </span><span class="nt">websocket</span><span class="p">:</span>
<span class="w">      </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/graphql</span><span class="w">             </span><span class="c1"># Subscription 用 WebSocket</span>
<span class="w">    </span><span class="nt">schema</span><span class="p">:</span>
<span class="w">      </span><span class="nt">locations</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">classpath:graphql/</span>
<span class="w">      </span><span class="nt">printer</span><span class="p">:</span>
<span class="w">        </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">            </span><span class="c1"># スキーマ出力</span>

<span class="c1"># 既存の設定はそのまま</span>
<span class="w">  </span><span class="nt">datasource</span><span class="p">:</span>
<span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">jdbc:postgresql://localhost:5432/production</span>
<span class="w">    </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres</span>
<span class="w">    </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres</span>

<span class="nt">mybatis</span><span class="p">:</span>
<span class="w">  </span><span class="nt">mapper-locations</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">classpath:mapper/*.xml</span>
</code></pre></div>

</details>

<h3 id="494-graphql-playground">49.4 GraphQL Playground からの呼び出し<a class="headerlink" href="#494-graphql-playground" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c"># 品目取得</span>
<span class="k">query</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">item</span><span class="p">(</span><span class="n">itemCode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;PROD-001&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">itemCode</span>
<span class="w">    </span><span class="n">itemName</span>
<span class="w">    </span><span class="n">category</span>
<span class="w">    </span><span class="n">leadTime</span>
<span class="w">    </span><span class="n">bom</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">childItemCode</span>
<span class="w">      </span><span class="n">requiredQuantity</span>
<span class="w">      </span><span class="n">childItem</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">itemName</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c"># 品目一覧（ページネーション）</span>
<span class="k">query</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">items</span><span class="p">(</span><span class="n">category</span><span class="p">:</span><span class="w"> </span><span class="no">PRODUCT</span><span class="p">,</span><span class="w"> </span><span class="n">page</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">edges</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">node</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">itemCode</span>
<span class="w">        </span><span class="n">itemName</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">pageInfo</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">totalElements</span>
<span class="w">      </span><span class="n">hasNextPage</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c"># 品目登録</span>
<span class="k">mutation</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">createItem</span><span class="p">(</span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">itemCode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;NEW-001&quot;</span>
<span class="w">    </span><span class="n">itemName</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;新規製品&quot;</span>
<span class="w">    </span><span class="n">category</span><span class="p">:</span><span class="w"> </span><span class="no">PRODUCT</span>
<span class="w">    </span><span class="n">leadTime</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span>
<span class="w">  </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">itemCode</span>
<span class="w">    </span><span class="n">itemName</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c"># MRP 進捗購読</span>
<span class="k">subscription</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">mrpProgress</span><span class="p">(</span><span class="n">executionId</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;exec-123&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">phase</span>
<span class="w">    </span><span class="n">current</span>
<span class="w">    </span><span class="n">total</span>
<span class="w">    </span><span class="n">message</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="495-graphql-vs-rest-vs-grpc">49.5 GraphQL vs REST vs gRPC の使い分け<a class="headerlink" href="#495-graphql-vs-rest-vs-grpc" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>用途</th>
<th>推奨</th>
<th>理由</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>フロントエンド API</strong></td>
<td>GraphQL</td>
<td>柔軟なデータ取得、Over-fetching 防止</td>
</tr>
<tr>
<td><strong>モバイルアプリ</strong></td>
<td>GraphQL</td>
<td>帯域制限、必要なデータのみ取得</td>
</tr>
<tr>
<td><strong>マイクロサービス間</strong></td>
<td>gRPC</td>
<td>高パフォーマンス、型安全</td>
</tr>
<tr>
<td><strong>サードパーティ連携</strong></td>
<td>REST</td>
<td>広く普及、シンプル</td>
</tr>
<tr>
<td><strong>リアルタイム更新</strong></td>
<td>GraphQL Subscription / gRPC Streaming</td>
<td>ネイティブサポート</td>
</tr>
<tr>
<td><strong>バッチ処理</strong></td>
<td>gRPC</td>
<td>ストリーミング効率</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="_2">まとめ<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<p>本研究では、GraphQL による生産管理システム API を実装しました。</p>
<h3 id="api">API サーバー版との比較<a class="headerlink" href="#api" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>観点</th>
<th>REST API（第32章）</th>
<th>gRPC（研究2）</th>
<th>GraphQL（本研究）</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>プロトコル</strong></td>
<td>HTTP/1.1 + JSON</td>
<td>HTTP/2 + Protobuf</td>
<td>HTTP + JSON</td>
</tr>
<tr>
<td><strong>スキーマ</strong></td>
<td>OpenAPI（任意）</td>
<td>.proto（必須）</td>
<td>.graphqls（必須）</td>
</tr>
<tr>
<td><strong>データ取得</strong></td>
<td>固定レスポンス</td>
<td>固定レスポンス</td>
<td>クライアント指定</td>
</tr>
<tr>
<td><strong>エンドポイント</strong></td>
<td>複数</td>
<td>複数</td>
<td>単一</td>
</tr>
<tr>
<td><strong>リアルタイム</strong></td>
<td>WebSocket 別実装</td>
<td>ストリーミング</td>
<td>Subscription</td>
</tr>
<tr>
<td><strong>ドメイン層</strong></td>
<td>共有</td>
<td>共有</td>
<td>共有</td>
</tr>
<tr>
<td><strong>アプリケーション層</strong></td>
<td>共有</td>
<td>共有</td>
<td>共有</td>
</tr>
<tr>
<td><strong>Input Adapter</strong></td>
<td>REST Controller</td>
<td>gRPC Service</td>
<td>GraphQL Resolver</td>
</tr>
</tbody>
</table>
<h3 id="graphql">実装した GraphQL 操作<a class="headerlink" href="#graphql" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>操作タイプ</th>
<th>操作名</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Query</strong></td>
<td>item, items</td>
<td>品目取得</td>
</tr>
<tr>
<td></td>
<td>bomTree, whereUsed</td>
<td>BOM 展開・逆展開</td>
</tr>
<tr>
<td></td>
<td>purchaseOrder, purchaseOrders</td>
<td>発注取得</td>
</tr>
<tr>
<td><strong>Mutation</strong></td>
<td>createItem, updateItem, deleteItem</td>
<td>品目 CRUD</td>
</tr>
<tr>
<td></td>
<td>createPurchaseOrder, confirmPurchaseOrder</td>
<td>発注操作</td>
</tr>
<tr>
<td></td>
<td>recordReceiving</td>
<td>入荷登録</td>
</tr>
<tr>
<td></td>
<td>executeMrp</td>
<td>MRP 実行</td>
</tr>
<tr>
<td><strong>Subscription</strong></td>
<td>mrpProgress</td>
<td>MRP 進捗通知</td>
</tr>
<tr>
<td></td>
<td>orderStatusChanged</td>
<td>発注ステータス変更</td>
</tr>
<tr>
<td></td>
<td>stockChanged</td>
<td>在庫変動</td>
</tr>
</tbody>
</table>
<h3 id="_3">技術スタック<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Spring for GraphQL</strong>: Spring Boot 統合</li>
<li><strong>GraphQL Java</strong>: GraphQL 実行エンジン</li>
<li><strong>Extended Scalars</strong>: Date, BigDecimal 等のカスタム型</li>
<li><strong>DataLoader</strong>: N+1 問題対策</li>
<li><strong>WebSocket</strong>: Subscription サポート</li>
</ul>
<h3 id="graphql_1">GraphQL を選択すべき場面<a class="headerlink" href="#graphql_1" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>フロントエンド主導の開発</strong>: クライアントがデータ形状を決定</li>
<li><strong>モバイルアプリ</strong>: 帯域制限下での効率的なデータ取得</li>
<li><strong>複雑な関連データ</strong>: 1回のクエリで関連データを取得</li>
<li><strong>リアルタイム更新</strong>: Subscription でプッシュ通知</li>
<li><strong>API 統合</strong>: 複数のバックエンドを単一エンドポイントで提供</li>
</ol>
<hr />
<p><a href="../../">目次へ戻る</a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://github.com/k2works/practical-database-design" target="_blank" rel="noopener" title="GitHub Repository" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "search.suggest", "search.highlight"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
      
        <script src="../../../docs/assets/js/extra.js"></script>
      
    
  </body>
</html>