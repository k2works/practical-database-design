
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="基幹業務システム（販売管理・財務会計・生産管理）のデータベース設計を体系的に解説">
      
      
        <meta name="author" content="k2works">
      
      
      
        <link rel="prev" href="../chapter09/">
      
      
        <link rel="next" href="../chapter11/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>第10章 債務管理の設計 - 実践データベース設計：基幹業務システム編</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../docs/mkdocs/assets/css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#10" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="実践データベース設計：基幹業務システム編" class="md-header__button md-logo" aria-label="実践データベース設計：基幹業務システム編" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            実践データベース設計：基幹業務システム編
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              第10章 債務管理の設計
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/k2works/practical-database-design" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    practical-database-design
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
  実践データベース設計

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="実践データベース設計：基幹業務システム編" class="md-nav__button md-logo" aria-label="実践データベース設計：基幹業務システム編" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    実践データベース設計：基幹業務システム編
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/k2works/practical-database-design" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    practical-database-design
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    実践データベース設計
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    実践データベース設計
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../techstack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    技術スタック
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../outline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    アウトライン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    執筆ワークフロー
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ops/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    運用ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../project-setup-instruction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    プロジェクトセットアップ手順書
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_7" >
        
          
          <label class="md-nav__link" for="__nav_1_7" id="__nav_1_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    デプロイ
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    デプロイ
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy-sms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SMS デモデプロイ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy-fas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FAS デモデプロイ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy-pms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PMS デモデプロイ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_8" >
        
          
          <label class="md-nav__link" for="__nav_1_8" id="__nav_1_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第1部 基幹業務システムの全体像
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    第1部 基幹業務システムの全体像
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1/chapter01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第1章 基幹業務システムとは
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1/chapter02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第2章 基幹業務システムの業務領域
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1/chapter03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第3章 業務フローの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_9" checked>
        
          
          <label class="md-nav__link" for="__nav_1_9" id="__nav_1_9_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第2部 販売管理システム
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_9_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    第2部 販売管理システム
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第4章 販売管理システムの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第5章 マスタ情報の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第6章 受注・出荷・売上の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter07/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第7章 債権管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter08/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第8章 調達管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter09/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第9章 在庫管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    第10章 債務管理の設計
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    第10章 債務管理の設計
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        支払業務の全体像
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="支払業務の全体像">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        支払管理で扱うデータ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#101-db" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.1 支払業務の DB 設計
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="10.1 支払業務の DB 設計">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        支払締処理の仕組み
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        支払ステータスの遷移
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        支払方法の種類
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#er" class="md-nav__link">
    <span class="md-ellipsis">
      
        支払関連の ER 図
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        マイグレーション：支払関連テーブルの作成
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        支払関連エンティティの実装
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        支払サービスの実装（参考実装例）
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#102" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.2 リレーションと楽観ロックの設計
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="10.2 リレーションと楽観ロックの設計">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mybatis-resultmap" class="md-nav__link">
    <span class="md-ellipsis">
      
        MyBatis ネストした ResultMap による関連付け
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        リレーション設定のポイント
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimistic-locking" class="md-nav__link">
    <span class="md-ellipsis">
      
        楽観ロック（Optimistic Locking）の実装
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        バージョンカラムによる同時更新制御
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        楽観ロックのベストプラクティス
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        債権管理との対比
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        第10章のまとめ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第10章のまとめ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        学んだこと
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        テーブル一覧
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enum" class="md-nav__link">
    <span class="md-ellipsis">
      
        ENUM 一覧
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        次章の予告
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第11章 共通処理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第12章 販売管理データ設計（B社事例）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第13章 APIサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_10" >
        
          
          <label class="md-nav__link" for="__nav_1_10" id="__nav_1_10_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第3部 財務会計システム
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    第3部 財務会計システム
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第14章 財務会計システムの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第15章 勘定科目の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter16/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第16章 仕訳の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter17/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第17章 自動仕訳の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter18/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第18章 勘定科目残高の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter19/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第19章 赤黒とログの設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter20/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第20章 財務会計データ設計（D社事例）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter21/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第21章 APIサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_11" >
        
          
          <label class="md-nav__link" for="__nav_1_11" id="__nav_1_11_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第4部 生産管理システム
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    第4部 生産管理システム
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter22/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第22章 生産管理システムの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter23/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第23章 マスタ情報の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter24/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第24章 生産計画の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter25/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第25章 購買管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter26/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第26章 外注委託管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter27/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第27章 工程管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter28/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第28章 在庫管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第29章 品質管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter30/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第30章 製造原価管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter31/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第31章 生産管理データ設計（E社事例）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter32/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第32章 APIサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_12" >
        
          
          <label class="md-nav__link" for="__nav_1_12" id="__nav_1_12_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第5部 エンタープライズインテグレーション
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    第5部 エンタープライズインテグレーション
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter33.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第33章 システム統合の概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter34.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第34章 メッセージングパターン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter35.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第35章 システム間連携パターン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter36.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第36章 マスタデータ管理（MDM）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter37.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第37章 イベント駆動アーキテクチャ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter38.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第38章 API設計とサービス連携
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter39.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第39章 データ連携の実装パターン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_13" >
        
          
          <label class="md-nav__link" for="__nav_1_13" id="__nav_1_13_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 販売管理システム実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_13">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 販売管理システム実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study2-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究1 モノリスサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study2-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究2 JavaFXデスクトップアプリケーションの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study2-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究3 gRPCサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study2-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究4 GraphQLサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study2-5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究5 AxonCQRS/ESの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_14" >
        
          
          <label class="md-nav__link" for="__nav_1_14" id="__nav_1_14_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 財務会計システム実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_14">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 財務会計システム実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study3-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究1 モノリスサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study3-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究2 JavaFXデスクトップアプリケーションの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study3-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究3 gRPCサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study3-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究4 GraphQLサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study3-5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究5 AxonCQRS/ESの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_15" >
        
          
          <label class="md-nav__link" for="__nav_1_15" id="__nav_1_15_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 生産管理システム実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_15">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 生産管理システム実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study4-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究1 モノリスサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study4-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究2 JavaFXデスクトップアプリケーションの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study4-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究3 gRPCサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study4-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究4 GraphQLサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study4-5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究5 AxonCQRS/ESの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_16" >
        
          
          <label class="md-nav__link" for="__nav_1_16" id="__nav_1_16_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 財務会計システムORM実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_16">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 財務会計システムORM実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter14-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第14章 財務会計システムの全体像【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter15-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第15章 勘定科目の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter16-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第16章 仕訳の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter17-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第17章 自動仕訳の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter18-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第18章 勘定科目残高の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter19-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第19章 赤黒とログの設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter20-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第20章 財務会計データ設計（D社事例）【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter21-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第21章 APIサービスの実装【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter22-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第22章 Axon CQRS/ESの実装【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_17" >
        
          
          <label class="md-nav__link" for="__nav_1_17" id="__nav_1_17_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    付録
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_17">
            <span class="md-nav__icon md-icon"></span>
            
  
    付録
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/er-diagrams.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    A 全体ER図
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/table-definitions.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    B テーブル定義一覧
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/glossary.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    C 用語集
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_18" >
        
          
          <label class="md-nav__link" for="__nav_1_18" id="__nav_1_18_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    データベース
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_18_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_18">
            <span class="md-nav__icon md-icon"></span>
            
  
    データベース
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../assets/schemaspy-output/sms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SchemaSpy ER図（SMS）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../assets/schemaspy-output/fas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SchemaSpy ER図（FAS）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../assets/schemaspy-output/pms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SchemaSpy ER図（PMS）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="10">第10章：債務管理の設計<a class="headerlink" href="#10" title="Permanent link">&para;</a></h1>
<p>販売管理システムにおいて、債務管理は仕入先への支払を適切に管理するための重要な機能です。本章では、支払締処理、支払方法の管理、買掛金残高管理のデータベース設計と実装を行います。債権管理（第7章）と対をなす概念として、仕入側からの視点でデータ構造を設計します。</p>
<h2 id="_1">支払業務の全体像<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>支払業務は「仕入計上 → 支払締処理 → 支払承認 → 支払実行 → 買掛金消込」という一連のフローで構成されます。</p>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkFDVElWSVRZIiBoZWlnaHQ9Ijc5MnB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6ODAxcHg7aGVpZ2h0Ojc5MnB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDgwMSA3OTIiIHdpZHRoPSI4MDFweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjU5MDM7JiMyNTE3MzsmIzI2OTg5OyYjMjEyMDk7JiMxMjM5ODsmIzIwODQwOyYjMjAzMDc7JiMxMjUwMTsmIzEyNTI1OyYjMTI1NDA7PC90aXRsZT48ZGVmcy8+PGc+PGcgY2xhc3M9InRpdGxlIiBkYXRhLXNvdXJjZS1saW5lPSIxIj48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM5Ljk5OTQiIHg9IjMyOS4zNTA5IiB5PSIzMi45OTUxIj4mIzI1OTAzOyYjMjUxNzM7JiMyNjk4OTsmIzIxMjA5OyYjMTIzOTg7JiMyMDg0MDsmIzIwMzA3OyYjMTI1MDE7JiMxMjUyNTsmIzEyNTQwOzwvdGV4dD48L2c+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIyMC45NTMxIiBzdHlsZT0ic3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNzY4LjcwMTIiIHg9IjE1IiB5PSI1MC4wNDIiLz48ZWxsaXBzZSBjeD0iNjEuMDAwMiIgY3k9Ijg1Ljk5NTEiIGZpbGw9IiMyMjIyMjIiIHJ4PSIxMCIgcnk9IjEwIiBzdHlsZT0ic3Ryb2tlOiMyMjIyMjI7c3Ryb2tlLXdpZHRoOjE7Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQ0LjAwMDIiIHg9IjM5LjAwMDEiIHk9IjExNS45OTUxIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjQuMDAwMiIgeD0iNDkuMDAwMSIgeT0iMTM3LjEzMzgiPiYjMzAzMzA7JiMyNzg4MDs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjgwLjAwMDUiIHg9IjIxIiB5PSIxNjkuOTYzOSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYwLjAwMDUiIHg9IjMxIiB5PSIxOTEuMTAyNSI+JiMyMDgzNzsmIzMzNjU1OyYjMTI1Mzk7JiMyNjkwODsmIzIxNDU0OzwvdGV4dD48cGF0aCBkPSJNMTE1LjAwMDQsMjIwLjc4NDIgTDExNS4wMDA0LDIzNi45MTcgTDk1LjAwMDQsMjQwLjkxNyBMMTE1LjAwMDQsMjQ0LjkxNyBMMTE1LjAwMDQsMjYxLjA0OTggQTAsMCAwIDAgMCAxMTUuMDAwNCwyNjEuMDQ5OCBMMjI3LjAwMDUsMjYxLjA0OTggQTAsMCAwIDAgMCAyMjcuMDAwNSwyNjEuMDQ5OCBMMjI3LjAwMDUsMjMwLjc4NDIgTDIxNy4wMDA1LDIyMC43ODQyIEwxMTUuMDAwNCwyMjAuNzg0MiBBMCwwIDAgMCAwIDExNS4wMDA0LDIyMC43ODQyIiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNMjE3LjAwMDUsMjIwLjc4NDIgTDIxNy4wMDA1LDIzMC43ODQyIEwyMjcuMDAwNSwyMzAuNzg0MiBMMjE3LjAwMDUsMjIwLjc4NDIiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjkxLjAwMDEiIHg9IjEyMS4wMDA0IiB5PSIyMzcuODUxMSI+JiMyMDE4MTsmIzIwODM3OyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OyYjMTIzNjM7JiMxMjQyNTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzguMDAwMSIgeD0iMTIxLjAwMDQiIHk9IjI1Mi45ODM5Ij4mIzM2MDIzOyYjMjU0OTk7JiMzNzMyOTsmIzEyMzY0OyYjMzAzMzA7JiMyOTk4Mzs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjY4LjAwMDQiIHg9IjI3IiB5PSIyMjMuOTMyNiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ4LjAwMDQiIHg9IjM3IiB5PSIyNDUuMDcxMyI+JiMyMDE4MTsmIzIwODM3OyYjMzUzMzY7JiMxOTk3ODs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB4MT0iMTUiIHgyPSIxNSIgeTE9IjUwLjA0MiIgeTI9Ijc4MC45ODY4Ii8+PHBhdGggZD0iTTM1MC4wMDExLDI3Ny45MDE0IEwzNTAuMDAxMSwyOTQuMDM0MiBMMzMwLjAwMTEsMjk4LjAzNDIgTDM1MC4wMDExLDMwMi4wMzQyIEwzNTAuMDAxMSwzMTguMTY3IEEwLDAgMCAwIDAgMzUwLjAwMTEsMzE4LjE2NyBMNDYyLjAwMTIsMzE4LjE2NyBBMCwwIDAgMCAwIDQ2Mi4wMDEyLDMxOC4xNjcgTDQ2Mi4wMDEyLDI4Ny45MDE0IEw0NTIuMDAxMiwyNzcuOTAxNCBMMzUwLjAwMTEsMjc3LjkwMTQgQTAsMCAwIDAgMCAzNTAuMDAxMSwyNzcuOTAxNCIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTQ1Mi4wMDEyLDI3Ny45MDE0IEw0NTIuMDAxMiwyODcuOTAxNCBMNDYyLjAwMTIsMjg3LjkwMTQgTDQ1Mi4wMDEyLDI3Ny45MDE0IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2NS4wMDAxIiB4PSIzNTYuMDAxMSIgeT0iMjk0Ljk2ODMiPiYjMzIyMjQ7JiMyNjA4NTsmIzEyMzcyOyYjMTIzOTI7JiMxMjM5NTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTEuMDAwMSIgeD0iMzU2LjAwMTEiIHk9IjMxMC4xMDExIj4mIzIwMTgxOyYjMjA4Mzc7JiMzNzMyOTsmIzM4OTg5OyYjMTI0MzQ7JiMzODU5ODsmIzM1MzM2OzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iODAuMDAwNSIgeD0iMjUwLjAwMDYiIHk9IjI4MS4wNDk4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjAuMDAwNSIgeD0iMjYwLjAwMDYiIHk9IjMwMi4xODg1Ij4mIzI1OTAzOyYjMjUxNzM7JiMzMjIyNDsmIzIwOTY2OyYjMjk3MDI7PC90ZXh0PjxwYXRoIGQ9Ik0zNTYuMDAxMSwzMzUuMDE4NiBMMzU2LjAwMTEsMzUxLjE1MTQgTDMzNi4wMDExLDM1NS4xNTE0IEwzNTYuMDAxMSwzNTkuMTUxNCBMMzU2LjAwMTEsMzc1LjI4NDIgQTAsMCAwIDAgMCAzNTYuMDAxMSwzNzUuMjg0MiBMNDgxLjAwMTIsMzc1LjI4NDIgQTAsMCAwIDAgMCA0ODEuMDAxMiwzNzUuMjg0MiBMNDgxLjAwMTIsMzQ1LjAxODYgTDQ3MS4wMDEyLDMzNS4wMTg2IEwzNTYuMDAxMSwzMzUuMDE4NiBBMCwwIDAgMCAwIDM1Ni4wMDExLDMzNS4wMTg2IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNNDcxLjAwMTIsMzM1LjAxODYgTDQ3MS4wMDEyLDM0NS4wMTg2IEw0ODEuMDAxMiwzNDUuMDE4NiBMNDcxLjAwMTIsMzM1LjAxODYiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwNC4wMDAxIiB4PSIzNjIuMDAxMSIgeT0iMzUyLjA4NTQiPiYjMjU5MDM7JiMyNTE3MzsmIzI2MDg1OyYjMTI1Mzk7JiMyNTkwMzsmIzI1MTczOyYjMjYwNDE7JiMyNzg2MTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzkiIHg9IjM2Mi4wMDExIiB5PSIzNjcuMjE4MyI+JiMxMjQzNDsmIzI3NzcwOyYjMjM0NTA7PC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI5Mi4wMDA1IiB4PSIyNDQuMDAwNiIgeT0iMzM4LjE2NyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjcyLjAwMDUiIHg9IjI1NC4wMDA2IiB5PSIzNTkuMzA1NyI+JiMyNTkwMzsmIzI1MTczOyYjMjAxMDQ7JiMyMzQ1MDsmIzIwMzE2OyYjMjUxMDQ7PC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI2OC4wMDA0IiB4PSIyNTYuMDAwNyIgeT0iMzk1LjI4NDIiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0OC4wMDA0IiB4PSIyNjYuMDAwNyIgeT0iNDE2LjQyMjkiPiYjMjU5MDM7JiMyNTE3MzsmIzI1MjE1OyYjMzU0Njk7PC90ZXh0PjxwYXRoIGQ9Ik0zNDQuMDAxLDY0NC43NTI0IEwzNDQuMDAxLDY2MC44ODUzIEwzMjQuMDAxLDY2NC44ODUzIEwzNDQuMDAxLDY2OC44ODUzIEwzNDQuMDAxLDY4NS4wMTgxIEEwLDAgMCAwIDAgMzQ0LjAwMSw2ODUuMDE4MSBMNDU2LjAwMTEsNjg1LjAxODEgQTAsMCAwIDAgMCA0NTYuMDAxMSw2ODUuMDE4MSBMNDU2LjAwMTEsNjU0Ljc1MjQgTDQ0Ni4wMDExLDY0NC43NTI0IEwzNDQuMDAxLDY0NC43NTI0IEEwLDAgMCAwIDAgMzQ0LjAwMSw2NDQuNzUyNCIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTQ0Ni4wMDExLDY0NC43NTI0IEw0NDYuMDAxMSw2NTQuNzUyNCBMNDU2LjAwMTEsNjU0Ljc1MjQgTDQ0Ni4wMDExLDY0NC43NTI0IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5MS4wMDAxIiB4PSIzNTAuMDAxIiB5PSI2NjEuODE5MyI+JiMzNjAyMzsmIzI1NDk5OyYjMzczMjk7JiMyNzUzMTsmIzM5NjQwOyYjMTIzNjM7JiMxMjQyNTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzguMDAwMSIgeD0iMzUwLjAwMSIgeT0iNjc2Ljk1MjEiPiYjMjU5MDM7JiMyNTE3MzsmIzM4OTg5OyYjMTI0MzQ7JiMyODE4NzsmIzIzNTY5OzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNjguMDAwNCIgeD0iMjU2LjAwMDciIHk9IjY0Ny45MDA5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDguMDAwNCIgeD0iMjY2LjAwMDciIHk9IjY2OS4wMzk2Ij4mIzI1OTAzOyYjMjUxNzM7JiMyODA0MDsmIzM2Nzk2OzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTA0LjAwMDYiIHg9IjIzOC4wMDA1IiB5PSI3MDUuMDE4MSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg0LjAwMDYiIHg9IjI0OC4wMDA1IiB5PSI3MjYuMTU2NyI+JiMzNjAyMzsmIzI1NDk5OyYjMzczMjk7JiMyNzUzMTsmIzM5NjQwOyYjMjYzNTY7JiMyNjAzMjs8L3RleHQ+PGVsbGlwc2UgY3g9IjI5MC4wMDA4IiBjeT0iNzY5Ljk4NjgiIGZpbGw9Im5vbmUiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMyMjIyMjI7c3Ryb2tlLXdpZHRoOjE7Ii8+PGVsbGlwc2UgY3g9IjI5MC4wMDA4IiBjeT0iNzY5Ljk4NjgiIGZpbGw9IiMyMjIyMjIiIHJ4PSI2IiByeT0iNiIgc3R5bGU9InN0cm9rZTojMjIyMjIyO3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjIzMi4wMDA1IiB4Mj0iMjMyLjAwMDUiIHkxPSI1MC4wNDIiIHkyPSI3ODAuOTg2OCIvPjxwb2x5Z29uIGZpbGw9IiNGMUYxRjEiIHBvaW50cz0iNTE5LjA4MjUsNDQ5LjI1MjksNTY4LjkyMDYsNDQ5LjI1MjksNTgwLjkyMDYsNDYxLjI1MjksNTY4LjkyMDYsNDczLjI1MjksNTE5LjA4MjUsNDczLjI1MjksNTA3LjA4MjUsNDYxLjI1MjksNTE5LjA4MjUsNDQ5LjI1MjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIxLjk5OTgiIHg9IjU0OC4wMDE2IiB5PSI0ODMuNDYzNCI+JiMyNTM5MTsmIzM2Nzk2OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0OS44MzgxIiB4PSI1MTkuMDgyNSIgeT0iNDY1LjA2MSI+JiMyNTkwMzsmIzI1MTczOyYjMjYwNDE7JiMyNzg2MTs/PC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMDQuMDAwNiIgeD0iNDkyLjAwMTIiIHk9IjUwNC45NjM0Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODQuMDAwNiIgeD0iNTAyLjAwMTIiIHk9IjUyNi4xMDIxIj4mIzI1MzkxOyYjMzY3OTY7JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7JiMyMDMxNjsmIzI1MTA0OzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iOTIuMDAwNSIgeD0iNDk4LjAwMTMiIHk9IjU3My45MzIxIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzIuMDAwNSIgeD0iNTA4LjAwMTMiIHk9IjU5NS4wNzA4Ij4mIzM3NTA0OyYjMzQ4OTI7JiMyNTM5MTsmIzM2Nzk2OyYjMjM0NTU7JiMzNDg5Mjs8L3RleHQ+PHBvbHlnb24gZmlsbD0iI0YxRjFGMSIgcG9pbnRzPSI2MjguMDAxOSw0NDkuMjUyOSw2NzcuODQsNDQ5LjI1MjksNjg5Ljg0LDQ2MS4yNTI5LDY3Ny44NCw0NzMuMjUyOSw2MjguMDAxOSw0NzMuMjUyOSw2MTYuMDAxOSw0NjEuMjUyOSw2MjguMDAxOSw0NDkuMjUyOSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjEuOTk5OCIgeD0iNjU2LjkyMDkiIHk9IjQ4My40NjM0Ij4mIzI1MTYzOyYjMjQ0MTg7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ5LjgzODEiIHg9IjYyOC4wMDE5IiB5PSI0NjUuMDYxIj4mIzI1OTAzOyYjMjUxNzM7JiMyNjA0MTsmIzI3ODYxOz88L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjEuOTk5OCIgeD0iNjg5Ljg0IiB5PSI0NTguNjU4NyI+JiMyOTY5NDsmIzM3MzI5OzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNjguMDAwNCIgeD0iNjE4LjkyMDciIHk9IjUwNC45NjM0Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDguMDAwNCIgeD0iNjI4LjkyMDciIHk9IjUyNi4xMDIxIj4mIzI1MTYzOyYjMjQ0MTg7JiMzMDMzMDsmIzM0ODkyOzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNjguMDAwNCIgeD0iNjE4LjkyMDciIHk9IjU3My45MzIxIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDguMDAwNCIgeD0iNjI4LjkyMDciIHk9IjU5NS4wNzA4Ij4mIzI1MTYzOyYjMjQ0MTg7JiMyMDEzMjsmIzIwMTg0OzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNjguMDAwNCIgeD0iNzA5Ljg0IiB5PSI1MzYuMDQ1NCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ4LjAwMDQiIHg9IjcxOS44NCIgeT0iNTU3LjE4NDEiPiYjMjk2OTQ7JiMzNzMyOTsmIzI1OTAzOyYjMjUxNzM7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjQ4Ni4wMDEyIiB4Mj0iNDg2LjAwMTIiIHkxPSI1MC4wNDIiIHkyPSI3ODAuOTg2OCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9Ijc4MS44NDAzIiB4Mj0iNzgxLjg0MDMiIHkxPSI1MC4wNDIiIHkyPSI3ODAuOTg2OCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI2MS4wMDAyIiB4Mj0iNjEuMDAwMiIgeTE9Ijk1Ljk5NTEiIHkyPSIxMTUuOTk1MSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNTcuMDAwMiwxMDUuOTk1MSw2MS4wMDAyLDExNS45OTUxLDY1LjAwMDIsMTA1Ljk5NTEsNjEuMDAwMiwxMDkuOTk1MSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI2MS4wMDAyIiB4Mj0iNjEuMDAwMiIgeTE9IjE0OS45NjM5IiB5Mj0iMTY5Ljk2MzkiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjU3LjAwMDIsMTU5Ljk2MzksNjEuMDAwMiwxNjkuOTYzOSw2NS4wMDAyLDE1OS45NjM5LDYxLjAwMDIsMTYzLjk2MzkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNjEuMDAwMiIgeDI9IjYxLjAwMDIiIHkxPSIyMDMuOTMyNiIgeTI9IjIyMy45MzI2Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI1Ny4wMDAyLDIxMy45MzI2LDYxLjAwMDIsMjIzLjkzMjYsNjUuMDAwMiwyMTMuOTMyNiw2MS4wMDAyLDIxNy45MzI2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjI5MC4wMDA4IiB4Mj0iMjkwLjAwMDgiIHkxPSIzMTUuMDE4NiIgeTI9IjMzOC4xNjciLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjI4Ni4wMDA4LDMyOC4xNjcsMjkwLjAwMDgsMzM4LjE2NywyOTQuMDAwOCwzMjguMTY3LDI5MC4wMDA4LDMzMi4xNjciIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjkwLjAwMDgiIHgyPSIyOTAuMDAwOCIgeTE9IjM3Mi4xMzU3IiB5Mj0iMzk1LjI4NDIiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjI4Ni4wMDA4LDM4NS4yODQyLDI5MC4wMDA4LDM5NS4yODQyLDI5NC4wMDA4LDM4NS4yODQyLDI5MC4wMDA4LDM4OS4yODQyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjI5MC4wMDA4IiB4Mj0iMjkwLjAwMDgiIHkxPSI2ODEuODY5NiIgeTI9IjcwNS4wMTgxIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyODYuMDAwOCw2OTUuMDE4MSwyOTAuMDAwOCw3MDUuMDE4MSwyOTQuMDAwOCw2OTUuMDE4MSwyOTAuMDAwOCw2OTkuMDE4MSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyOTAuMDAwOCIgeDI9IjI5MC4wMDA4IiB5MT0iNzM4Ljk4NjgiIHkyPSI3NTguOTg2OCIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjg2LjAwMDgsNzQ4Ljk4NjgsMjkwLjAwMDgsNzU4Ljk4NjgsMjk0LjAwMDgsNzQ4Ljk4NjgsMjkwLjAwMDgsNzUyLjk4NjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNTQ0LjAwMTYiIHgyPSI1NDQuMDAxNiIgeTE9IjUzOC45MzIxIiB5Mj0iNTczLjkzMjEiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjU0MC4wMDE2LDU2My45MzIxLDU0NC4wMDE2LDU3My45MzIxLDU0OC4wMDE2LDU2My45MzIxLDU0NC4wMDE2LDU2Ny45MzIxIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjY1Mi45MjA5IiB4Mj0iNjUyLjkyMDkiIHkxPSI1MzguOTMyMSIgeTI9IjU3My45MzIxIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI2NDguOTIwOSw1NjMuOTMyMSw2NTIuOTIwOSw1NzMuOTMyMSw2NTYuOTIwOSw1NjMuOTMyMSw2NTIuOTIwOSw1NjcuOTMyMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI1NDQuMDAxNiIgeDI9IjU0NC4wMDE2IiB5MT0iNDczLjI1MjkiIHkyPSI1MDQuOTYzNCIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNTQwLjAwMTYsNDk0Ljk2MzQsNTQ0LjAwMTYsNTA0Ljk2MzQsNTQ4LjAwMTYsNDk0Ljk2MzQsNTQ0LjAwMTYsNDk4Ljk2MzQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNTQ0LjAwMTYiIHgyPSI1NDQuMDAxNiIgeTE9IjYwNy45MDA5IiB5Mj0iNjI3LjkwMDkiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjU0MC4wMDE2LDYxNy45MDA5LDU0NC4wMDE2LDYyNy45MDA5LDU0OC4wMDE2LDYxNy45MDA5LDU0NC4wMDE2LDYyMS45MDA5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjY1Mi45MjA5IiB4Mj0iNjUyLjkyMDkiIHkxPSI0NzMuMjUyOSIgeTI9IjUwNC45NjM0Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI2NDguOTIwOSw0OTQuOTYzNCw2NTIuOTIwOSw1MDQuOTYzNCw2NTYuOTIwOSw0OTQuOTYzNCw2NTIuOTIwOSw0OTguOTYzNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI2NTIuOTIwOSIgeDI9IjY1Mi45MjA5IiB5MT0iNjA3LjkwMDkiIHkyPSI2MjcuOTAwOSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNjQ4LjkyMDksNjE3LjkwMDksNjUyLjkyMDksNjI3LjkwMDksNjU2LjkyMDksNjE3LjkwMDksNjUyLjkyMDksNjIxLjkwMDkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNTgwLjkyMDYiIHgyPSI2MTYuMDAxOSIgeTE9IjQ2MS4yNTI5IiB5Mj0iNDYxLjI1MjkiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjYwNi4wMDE5LDQ1Ny4yNTI5LDYxNi4wMDE5LDQ2MS4yNTI5LDYwNi4wMDE5LDQ2NS4yNTI5LDYxMC4wMDE5LDQ2MS4yNTI5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjI5MC4wMDA4IiB4Mj0iMjkwLjAwMDgiIHkxPSI0MjkuMjUyOSIgeTI9IjQzNC4yNTI5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjI5MC4wMDA4IiB4Mj0iNTQ0LjAwMTYiIHkxPSI0MzQuMjUyOSIgeTI9IjQzNC4yNTI5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjU0NC4wMDE2IiB4Mj0iNTQ0LjAwMTYiIHkxPSI0MzQuMjUyOSIgeTI9IjQ0OS4yNTI5Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI1NDAuMDAxNiw0MzkuMjUyOSw1NDQuMDAxNiw0NDkuMjUyOSw1NDguMDAxNiw0MzkuMjUyOSw1NDQuMDAxNiw0NDMuMjUyOSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI2ODkuODQiIHgyPSI3NDMuODQwMSIgeTE9IjQ2MS4yNTI5IiB5Mj0iNDYxLjI1MjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNzQzLjg0MDEiIHgyPSI3NDMuODQwMSIgeTE9IjQ2MS4yNTI5IiB5Mj0iNTM2LjA0NTQiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjczOS44NDAxLDUyNi4wNDU0LDc0My44NDAxLDUzNi4wNDU0LDc0Ny44NDAxLDUyNi4wNDU0LDc0My44NDAxLDUzMC4wNDU0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9Ijc0My44NDAxIiB4Mj0iNzQzLjg0MDEiIHkxPSI1NzAuMDE0MiIgeTI9IjYyNy45MDA5Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI3MzkuODQwMSw2MTcuOTAwOSw3NDMuODQwMSw2MjcuOTAwOSw3NDcuODQwMSw2MTcuOTAwOSw3NDMuODQwMSw2MjEuOTAwOSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI1NDQuMDAxNiIgeDI9Ijc0My44NDAxIiB5MT0iNjI3LjkwMDkiIHkyPSI2MjcuOTAwOSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI2MS4wMDAyIiB4Mj0iNjEuMDAwMiIgeTE9IjI1Ny45MDE0IiB5Mj0iMjY2LjA0OTgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNjEuMDAwMiIgeDI9IjI5MC4wMDA4IiB5MT0iMjY2LjA0OTgiIHkyPSIyNjYuMDQ5OCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyOTAuMDAwOCIgeDI9IjI5MC4wMDA4IiB5MT0iMjY2LjA0OTgiIHkyPSIyODEuMDQ5OCIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjg2LjAwMDgsMjcxLjA0OTgsMjkwLjAwMDgsMjgxLjA0OTgsMjk0LjAwMDgsMjcxLjA0OTgsMjkwLjAwMDgsMjc1LjA0OTgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNjM0LjkyMDgiIHgyPSI2MzQuOTIwOCIgeTE9IjYyNy45MDA5IiB5Mj0iNjMyLjkwMDkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNjM0LjkyMDgiIHgyPSIyOTAuMDAwOCIgeTE9IjYzMi45MDA5IiB5Mj0iNjMyLjkwMDkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjkwLjAwMDgiIHgyPSIyOTAuMDAwOCIgeTE9IjYzMi45MDA5IiB5Mj0iNjQ3LjkwMDkiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjI4Ni4wMDA4LDYzNy45MDA5LDI5MC4wMDA4LDY0Ny45MDA5LDI5NC4wMDA4LDYzNy45MDA5LDI5MC4wMDA4LDY0MS45MDA5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTgiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzEuOTk5NiIgeD0iODcuNTAwNSIgeT0iNjYuNzUiPiYjMzU1MTk7JiMzNjk0ODsmIzM3MDk2OyYjMzgyNzI7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE4IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjcxLjk5OTYiIHg9IjMyMy4wMDExIiB5PSI2Ni43NSI+JiMzMjA3NjsmIzI5NzAyOyYjMzcwOTY7JiMzODI3Mjs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTgiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzEuOTk5NiIgeD0iNTk3LjkyMSIgeT0iNjYuNzUiPiYjMzYwMDE7JiMyMTIwOTsmIzM3MDk2OyYjMzgyNzI7PC90ZXh0Pjw/cGxhbnR1bWwtc3JjIFRQN0RSZTkwNDgzbEYwTDdWR0t1ejRNeUQyYk00dUVEU2xHVzRkeUdWcmttTWFvaVpKUDR1cS1yaFRSVlhyYnNXUlZldzhnZkpScERwa255Q19rajU5TFkwYWxxMkw0RHFYelhoT05hQ1N2UXpsTzlBR1BJSGFaUEM0cEE3VW16TVZTS29za2FLcW5Ja2FyODNFVXFMY0hreUdvN2l0c3RsNDNBY2xKUWs1ZzFaQnFzM2FjaE8yLUJGMkY2OU81REhFeVo0aVZJMmJCbzA0UVBGUDhyYjU1M2VaalJhOGhmdlVqOEJXN05xSmltclZhZ0VSTVNGdk1aTXBnQkx2bl9YX21iNXpCYWtPemE3U2FNYWVTWGFHdTJlalNqZXlvWlAtUFc3U1Fkc0FpMjdoX09zcE9mcjJ2MTluVjBXbFZHa0Y1M3ZhUDgxMGh2TTQ3UmNLQktsSmlleW1UMWlvd3V5clVEWGpkMHR6d1I4Mmo1MTE2SWZPY3hzbUlYX25ZU0RWWUJTNXVueE5QQmo4aDc3T1h2SGVXYlhVajRMU0ZSam1GbjY4MnhPeV9mUUF6d3poZjk0TXAwZ1V4MDF6b2IwVUwxS1JvQlhnX2Y5ank1TUVMSXFWY3BvNVpwWGF0XzNzYTNyS3NNOWZ4TUdUSV9reUp5OThxZjY0akF5T1RWPz48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_2">支払管理で扱うデータ<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>データ</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>支払データ</strong></td>
<td>支払締処理で作成されるヘッダ情報</td>
</tr>
<tr>
<td><strong>支払明細データ</strong></td>
<td>仕入データとの紐付け</td>
</tr>
<tr>
<td><strong>買掛金残高データ</strong></td>
<td>仕入先別・月次の残高管理</td>
</tr>
<tr>
<td><strong>支払予定データ</strong></td>
<td>支払スケジュールの管理</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="101-db">10.1 支払業務の DB 設計<a class="headerlink" href="#101-db" title="Permanent link">&para;</a></h2>
<h3 id="_3">支払締処理の仕組み<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p>支払締処理は、債権管理の請求締処理と対になる仕組みです。仕入先マスタに設定された締日に基づいて、仕入データを集計し支払データを作成します。</p>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkFDVElWSVRZIiBoZWlnaHQ9IjU2MnB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NDQzcHg7aGVpZ2h0OjU2MnB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDQ0MyA1NjIiIHdpZHRoPSI0NDNweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjU5MDM7JiMyNTE3MzsmIzMyMjI0OyYjMjA5NjY7JiMyOTcwMjsmIzEyMzk4OyYjMjc5Njk7JiMxMjQyODs8L3RpdGxlPjxkZWZzLz48Zz48ZyBjbGFzcz0idGl0bGUiIGRhdGEtc291cmNlLWxpbmU9IjEiPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTEuOTk5NSIgeD0iMTY0LjAwMDkiIHk9IjMyLjk5NTEiPiYjMjU5MDM7JiMyNTE3MzsmIzMyMjI0OyYjMjA5NjY7JiMyOTcwMjsmIzEyMzk4OyYjMjc5Njk7JiMxMjQyODs8L3RleHQ+PC9nPjxlbGxpcHNlIGN4PSIxODMuMDAwOCIgY3k9IjU3LjI5NjkiIGZpbGw9IiMyMjIyMjIiIHJ4PSIxMCIgcnk9IjEwIiBzdHlsZT0ic3Ryb2tlOiMyMjIyMjI7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTI0OS4wMDExLDg0LjE0ODQgTDI0OS4wMDExLDEwMC4yODEzIEwyMjkuMDAxMSwxMDQuMjgxMyBMMjQ5LjAwMTEsMTA4LjI4MTMgTDI0OS4wMDExLDEyNC40MTQxIEEwLDAgMCAwIDAgMjQ5LjAwMTEsMTI0LjQxNDEgTDM2MS4wMDEyLDEyNC40MTQxIEEwLDAgMCAwIDAgMzYxLjAwMTIsMTI0LjQxNDEgTDM2MS4wMDEyLDk0LjE0ODQgTDM1MS4wMDEyLDg0LjE0ODQgTDI0OS4wMDExLDg0LjE0ODQgQTAsMCAwIDAgMCAyNDkuMDAxMSw4NC4xNDg0IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNMzUxLjAwMTIsODQuMTQ4NCBMMzUxLjAwMTIsOTQuMTQ4NCBMMzYxLjAwMTIsOTQuMTQ4NCBMMzUxLjAwMTIsODQuMTQ4NCIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTEuMDAwMSIgeD0iMjU1LjAwMTEiIHk9IjEwMS4yMTUzIj4mIzIwMTgxOyYjMjA4Mzc7JiMyMDgwODsmIzEyNTEwOyYjMTI0NzM7JiMxMjQ3OTsmIzEyMzk4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2NS4wMDAxIiB4PSIyNTUuMDAxMSIgeT0iMTE2LjM0ODEiPiYjMzIyMjQ7JiMyNjA4NTsmIzEyNDM0OyYjMjE0NDI7JiMyOTAzMTs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjkyLjAwMDUiIHg9IjEzNy4wMDA1IiB5PSI4Ny4yOTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzIuMDAwNSIgeD0iMTQ3LjAwMDUiIHk9IjEwOC40MzU1Ij4mIzMyMjI0OyYjMjYwODU7JiMyMTA0MDsmIzI2NDY5OyYjMzA5MDY7JiMzNTQ2OTs8L3RleHQ+PHBhdGggZD0iTTI2Ny4wMDEyLDE0MS4yNjU2IEwyNjcuMDAxMiwxNTcuMzk4NCBMMjQ3LjAwMTIsMTYxLjM5ODQgTDI2Ny4wMDEyLDE2NS4zOTg0IEwyNjcuMDAxMiwxODEuNTMxMyBBMCwwIDAgMCAwIDI2Ny4wMDEyLDE4MS41MzEzIEw0MzEuMDAxNCwxODEuNTMxMyBBMCwwIDAgMCAwIDQzMS4wMDE0LDE4MS41MzEzIEw0MzEuMDAxNCwxNTEuMjY1NiBMNDIxLjAwMTQsMTQxLjI2NTYgTDI2Ny4wMDEyLDE0MS4yNjU2IEEwLDAgMCAwIDAgMjY3LjAwMTIsMTQxLjI2NTYiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik00MjEuMDAxNCwxNDEuMjY1NiBMNDIxLjAwMTQsMTUxLjI2NTYgTDQzMS4wMDE0LDE1MS4yNjU2IEw0MjEuMDAxNCwxNDEuMjY1NiIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQzLjAwMDIiIHg9IjI3My4wMDEyIiB5PSIxNTguMzMyNSI+JiMyMTA2OTsmIzIyMjM4OyYjMzIyMjQ7JiMyNjA4NTsmIzMyNzE2OyYjMjYwODU7JiM2NTM3NDsmIzIwMTcwOyYjMjIyMzg7JiMzMjIyNDsmIzI2MDg1OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3OC4wMDAxIiB4PSIyNzMuMDAxMiIgeT0iMTczLjQ2NTMiPiYjMTIzOTg7JiMyMDE4MTsmIzIwODM3OyYjMTI0MzQ7JiMyMzU1MDsmIzM1OTM3OzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTI4LjAwMDgiIHg9IjExOS4wMDA0IiB5PSIxNDQuNDE0MSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwOC4wMDA4IiB4PSIxMjkuMDAwNCIgeT0iMTY1LjU1MjciPiYjMjM1NTA7JiMzNTkzNzsmIzIwMTgxOyYjMjA4Mzc7JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7JiMyNTI3NzsmIzIwOTg2OzwvdGV4dD48cGF0aCBkPSJNMjU1LjAwMTEsMTk4LjM4MjggTDI1NS4wMDExLDIxNC41MTU2IEwyMzUuMDAxMSwyMTguNTE1NiBMMjU1LjAwMTEsMjIyLjUxNTYgTDI1NS4wMDExLDIzOC42NDg0IEEwLDAgMCAwIDAgMjU1LjAwMTEsMjM4LjY0ODQgTDM5My4wMDEyLDIzOC42NDg0IEEwLDAgMCAwIDAgMzkzLjAwMTIsMjM4LjY0ODQgTDM5My4wMDEyLDIwOC4zODI4IEwzODMuMDAxMiwxOTguMzgyOCBMMjU1LjAwMTEsMTk4LjM4MjggQTAsMCAwIDAgMCAyNTUuMDAxMSwxOTguMzgyOCIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTM4My4wMDEyLDE5OC4zODI4IEwzODMuMDAxMiwyMDguMzgyOCBMMzkzLjAwMTIsMjA4LjM4MjggTDM4My4wMDEyLDE5OC4zODI4IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTcuMDAwMSIgeD0iMjYxLjAwMTEiIHk9IjIxNS40NDk3Ij4mIzI1OTAzOyYjMjUxNzM7JiMxMjUwNDsmIzEyNDgzOyYjMTI0ODA7JiMxMjUzOTsmIzI2MTI2OyYjMzIwNDg7JiMxMjQzNDs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTIuMDAwMSIgeD0iMjYxLjAwMTEiIHk9IjIzMC41ODI1Ij4mIzMzMjU4OyYjMjEyMDU7JiMyOTk4MzsmIzI1MTA0OzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTA0LjAwMDYiIHg9IjEzMS4wMDA1IiB5PSIyMDEuNTMxMyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg0LjAwMDYiIHg9IjE0MS4wMDA1IiB5PSIyMjIuNjY5OSI+JiMyNTkwMzsmIzI1MTczOyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OyYjMjAzMTY7JiMyNTEwNDs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjkyLjAwMDUiIHg9IjEzNy4wMDA1IiB5PSIyNTguNjQ4NCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjcyLjAwMDUiIHg9IjE0Ny4wMDA1IiB5PSIyNzkuNzg3MSI+JiMyNTkwMzsmIzI1MTczOyYjMzczMjk7JiMzODk4OTsmIzM1MzM2OyYjMzE2Mzk7PC90ZXh0PjxyZWN0IGZpbGw9IiM1NTU1NTUiIGhlaWdodD0iNiIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojNTU1NTU1O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjM0Ni4wMDE2IiB4PSIxMSIgeT0iMzEyLjYxNzIiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iOTIuMDAwNSIgeD0iMjMiIHk9IjMzOC42MTcyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzIuMDAwNSIgeD0iMzMiIHk9IjM1OS43NTU5Ij4mIzIwMTgxOyYjMjA4Mzc7JiMzNzMyOTsmIzM4OTg5OyYjMjE1MTI7JiMzNTMzNjs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjgwLjAwMDUiIHg9IjE0My4wMDA1IiB5PSIzMzguNjE3MiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYwLjAwMDUiIHg9IjE1My4wMDA1IiB5PSIzNTkuNzU1OSI+JiMyODA0MDsmIzM2MDI3OyYjMzEyNDY7JiMzNTMzNjsmIzMxNjM5OzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iOTIuMDAwNSIgeD0iMjUxLjAwMSIgeT0iMzM4LjYxNzIiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3Mi4wMDA1IiB4PSIyNjEuMDAxIiB5PSIzNTkuNzU1OSI+JiMyODMwNDsmIzI3ODQ5OyYjMjQ1MDA7JiMyMTQ1NDsmIzM1MzM2OyYjMzE2Mzk7PC90ZXh0PjxyZWN0IGZpbGw9IiM1NTU1NTUiIGhlaWdodD0iNiIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojNTU1NTU1O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjM0Ni4wMDE2IiB4PSIxMSIgeT0iMzkyLjU4NTkiLz48cGF0aCBkPSJNMjU1LjAwMTEsNDE1LjQzNzUgTDI1NS4wMDExLDQzMS41NzAzIEwyMzUuMDAxMSw0MzUuNTcwMyBMMjU1LjAwMTEsNDM5LjU3MDMgTDI1NS4wMDExLDQ1NS43MDMxIEEwLDAgMCAwIDAgMjU1LjAwMTEsNDU1LjcwMzEgTDM5My4wMDEyLDQ1NS43MDMxIEEwLDAgMCAwIDAgMzkzLjAwMTIsNDU1LjcwMzEgTDM5My4wMDEyLDQyNS40Mzc1IEwzODMuMDAxMiw0MTUuNDM3NSBMMjU1LjAwMTEsNDE1LjQzNzUgQTAsMCAwIDAgMCAyNTUuMDAxMSw0MTUuNDM3NSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTM4My4wMDEyLDQxNS40Mzc1IEwzODMuMDAxMiw0MjUuNDM3NSBMMzkzLjAwMTIsNDI1LjQzNzUgTDM4My4wMDEyLDQxNS40Mzc1IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTcuMDAwMSIgeD0iMjYxLjAwMTEiIHk9IjQzMi41MDQ0Ij4mIzI1OTAzOyYjMjUxNzM7JiMxMjQ2OTsmIzEyNDUyOyYjMTI0ODg7JiM2NTI4ODsmIzI2Mzc2OyYjMjU5Njg7JiM2NTI4OTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTIuMDAwMSIgeD0iMjYxLjAwMTEiIHk9IjQ0Ny42MzcyIj4mIzEyMzYzOyYjMTI0MjU7JiMzNTMzNjsmIzMxNjM5OzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTA0LjAwMDYiIHg9IjEzMS4wMDA1IiB5PSI0MTguNTg1OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg0LjAwMDYiIHg9IjE0MS4wMDA1IiB5PSI0MzkuNzI0NiI+JiMyNTkwMzsmIzI1MTczOyYjMjAxMDQ7JiMyMzQ1MDsmIzI2MDg1OyYjMzE2Mzk7JiMyMDk4Njs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEwNC4wMDA2IiB4PSIxMzEuMDAwNSIgeT0iNDc1LjcwMzEiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4NC4wMDA2IiB4PSIxNDEuMDAwNSIgeT0iNDk2Ljg0MTgiPiYjMjU5MDM7JiMyNTE3MzsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsmIzMwOTA2OyYjMjM0NTA7PC90ZXh0PjxlbGxpcHNlIGN4PSIxODMuMDAwOCIgY3k9IjU0MC42NzE5IiBmaWxsPSJub25lIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMjIyMjIyO3N0cm9rZS13aWR0aDoxOyIvPjxlbGxpcHNlIGN4PSIxODMuMDAwOCIgY3k9IjU0MC42NzE5IiBmaWxsPSIjMjIyMjIyIiByeD0iNiIgcnk9IjYiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTgzLjAwMDgiIHgyPSIxODMuMDAwOCIgeTE9IjY3LjI5NjkiIHkyPSI4Ny4yOTY5Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxNzkuMDAwOCw3Ny4yOTY5LDE4My4wMDA4LDg3LjI5NjksMTg3LjAwMDgsNzcuMjk2OSwxODMuMDAwOCw4MS4yOTY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE4My4wMDA4IiB4Mj0iMTgzLjAwMDgiIHkxPSIxMjEuMjY1NiIgeTI9IjE0NC40MTQxIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxNzkuMDAwOCwxMzQuNDE0MSwxODMuMDAwOCwxNDQuNDE0MSwxODcuMDAwOCwxMzQuNDE0MSwxODMuMDAwOCwxMzguNDE0MSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxODMuMDAwOCIgeDI9IjE4My4wMDA4IiB5MT0iMTc4LjM4MjgiIHkyPSIyMDEuNTMxMyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTc5LjAwMDgsMTkxLjUzMTMsMTgzLjAwMDgsMjAxLjUzMTMsMTg3LjAwMDgsMTkxLjUzMTMsMTgzLjAwMDgsMTk1LjUzMTMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTgzLjAwMDgiIHgyPSIxODMuMDAwOCIgeTE9IjIzNS41IiB5Mj0iMjU4LjY0ODQiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE3OS4wMDA4LDI0OC42NDg0LDE4My4wMDA4LDI1OC42NDg0LDE4Ny4wMDA4LDI0OC42NDg0LDE4My4wMDA4LDI1Mi42NDg0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjY5LjAwMDMiIHgyPSI2OS4wMDAzIiB5MT0iMzE4LjYxNzIiIHkyPSIzMzguNjE3MiIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNjUuMDAwMywzMjguNjE3Miw2OS4wMDAzLDMzOC42MTcyLDczLjAwMDMsMzI4LjYxNzIsNjkuMDAwMywzMzIuNjE3MiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxODMuMDAwOCIgeDI9IjE4My4wMDA4IiB5MT0iMzE4LjYxNzIiIHkyPSIzMzguNjE3MiIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTc5LjAwMDgsMzI4LjYxNzIsMTgzLjAwMDgsMzM4LjYxNzIsMTg3LjAwMDgsMzI4LjYxNzIsMTgzLjAwMDgsMzMyLjYxNzIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjk3LjAwMTMiIHgyPSIyOTcuMDAxMyIgeTE9IjMxOC42MTcyIiB5Mj0iMzM4LjYxNzIiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjI5My4wMDEzLDMyOC42MTcyLDI5Ny4wMDEzLDMzOC42MTcyLDMwMS4wMDEzLDMyOC42MTcyLDI5Ny4wMDEzLDMzMi42MTcyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjY5LjAwMDMiIHgyPSI2OS4wMDAzIiB5MT0iMzcyLjU4NTkiIHkyPSIzOTIuNTg1OSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNjUuMDAwMywzODIuNTg1OSw2OS4wMDAzLDM5Mi41ODU5LDczLjAwMDMsMzgyLjU4NTksNjkuMDAwMywzODYuNTg1OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxODMuMDAwOCIgeDI9IjE4My4wMDA4IiB5MT0iMzcyLjU4NTkiIHkyPSIzOTIuNTg1OSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTc5LjAwMDgsMzgyLjU4NTksMTgzLjAwMDgsMzkyLjU4NTksMTg3LjAwMDgsMzgyLjU4NTksMTgzLjAwMDgsMzg2LjU4NTkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjk3LjAwMTMiIHgyPSIyOTcuMDAxMyIgeTE9IjM3Mi41ODU5IiB5Mj0iMzkyLjU4NTkiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjI5My4wMDEzLDM4Mi41ODU5LDI5Ny4wMDEzLDM5Mi41ODU5LDMwMS4wMDEzLDM4Mi41ODU5LDI5Ny4wMDEzLDM4Ni41ODU5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE4My4wMDA4IiB4Mj0iMTgzLjAwMDgiIHkxPSIyOTIuNjE3MiIgeTI9IjMxMi42MTcyIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxNzkuMDAwOCwzMDIuNjE3MiwxODMuMDAwOCwzMTIuNjE3MiwxODcuMDAwOCwzMDIuNjE3MiwxODMuMDAwOCwzMDYuNjE3MiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxODMuMDAwOCIgeDI9IjE4My4wMDA4IiB5MT0iMzk4LjU4NTkiIHkyPSI0MTguNTg1OSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTc5LjAwMDgsNDA4LjU4NTksMTgzLjAwMDgsNDE4LjU4NTksMTg3LjAwMDgsNDA4LjU4NTksMTgzLjAwMDgsNDEyLjU4NTkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTgzLjAwMDgiIHgyPSIxODMuMDAwOCIgeTE9IjQ1Mi41NTQ3IiB5Mj0iNDc1LjcwMzEiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE3OS4wMDA4LDQ2NS43MDMxLDE4My4wMDA4LDQ3NS43MDMxLDE4Ny4wMDA4LDQ2NS43MDMxLDE4My4wMDA4LDQ2OS43MDMxIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE4My4wMDA4IiB4Mj0iMTgzLjAwMDgiIHkxPSI1MDkuNjcxOSIgeTI9IjUyOS42NzE5Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxNzkuMDAwOCw1MTkuNjcxOSwxODMuMDAwOCw1MjkuNjcxOSwxODcuMDAwOCw1MTkuNjcxOSwxODMuMDAwOCw1MjMuNjcxOSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjw/cGxhbnR1bWwtc3JjIFBQN0RKaTkwNThOdHluSHozZFdMRFlHWTRhcW5zMktCYzBic29jeXJMOFdZWVg0YkIwZWdRNnB2VVBaZnBCR2hOaTZCV3VzNHBJcGNkRkVUdDdrRGQ3Nk1xS0h4OFluN1Zacm95cU5RYndwaVlkY1B1SmYySEpjbG1xejRIajVEZ09Xa1o3SjFHMGJtWWl3R3F3Y3U3eWVkQm5tdGFhWkY2bmNqYUNrVTYwYWp5MXJVNlY4QVBRSkZ5M1YzUXEyY1QxTFotOWd0aUFveThmSldhck51RGIxc0hhbjY1azBMcklLdGxOcVlqbmh5aGd5MFNiczdUeEZpMXR1cl9hcGZLQjQzR1M0bDVtaEtQMzR3TUZPNGpWVkhWdk9rOHVJSDRZRS13M1JiUjBnT2Ixd1FPcnZwUEZpMU9aNGtDZy1ZR0lDU0tVYnNha1d1TnBYNTJMTWo1NnZKNDlNWWZSRmZkMHg5Sm5nLS10QktfMS1CSFN5TTduUFZwTlhoTnlfZUh0NWh1NTdrdGN4ZFRwaTctemFEV1VTQ0ZwRDJEbWlnVWJHdXF5dDJzY3djbmgyYm04U3hXR0MyRHVkV2tGZHA3bTAwPz48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_4">支払ステータスの遷移<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p>支払データは承認ワークフローに従ってステータスが変化します。</p>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IlNUQVRFIiBoZWlnaHQ9IjY0NHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MTc4cHg7aGVpZ2h0OjY0NHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDE3OCA2NDQiIHdpZHRoPSIxNzhweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjU5MDM7JiMyNTE3MzsmIzEyNDczOyYjMTI0ODY7JiMxMjU0MDsmIzEyNDc5OyYjMTI0NzM7JiMxMjM5ODsmIzM2OTgzOyYjMzEyMjc7PC90aXRsZT48ZGVmcy8+PGc+PGcgY2xhc3M9InRpdGxlIiBkYXRhLXNvdXJjZS1saW5lPSIxIj48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM5Ljk5OTQiIHg9IjEyLjQ5MDMiIHk9IjIyLjk5NTEiPiYjMjU5MDM7JiMyNTE3MzsmIzEyNDczOyYjMTI0ODY7JiMxMjU0MDsmIzEyNDc5OyYjMTI0NzM7JiMxMjM5ODsmIzM2OTgzOyYjMzEyMjc7PC90ZXh0PjwvZz48ZWxsaXBzZSBjeD0iMTAzIiBjeT0iNTMuMjk2OSIgZmlsbD0iIzIyMjIyMiIgcng9IjEwIiByeT0iMTAiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MTsiLz48Zz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjUwIiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjYxLjk5OTgiIHg9IjcyIiB5PSIxMjQuMjk2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjcyIiB4Mj0iMTMzLjk5OTgiIHkxPSIxNTAuNTkzOCIgeTI9IjE1MC41OTM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDEuOTk5OCIgeD0iODIiIHk9IjE0Mi4yOTIiPiYjMjAzMTY7JiMyNTEwNDsmIzIwMDEzOzwvdGV4dD48L2c+PGc+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI1MCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI3NS45OTk4IiB4PSIxMSIgeT0iMjUxLjI5NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxMSIgeDI9Ijg2Ljk5OTgiIHkxPSIyNzcuNTkzOCIgeTI9IjI3Ny41OTM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iMjEiIHk9IjI2OS4yOTIiPiYjMjUyMTU7JiMzNTQ2OTsmIzI0NDUzOyYjMTIzODU7PC90ZXh0PjwvZz48Zz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjUwIiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjYxLjk5OTgiIHg9IjciIHk9IjM3OC4yOTY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iNyIgeDI9IjY4Ljk5OTgiIHkxPSI0MDQuNTkzOCIgeTI9IjQwNC41OTM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDEuOTk5OCIgeD0iMTciIHk9IjM5Ni4yOTIiPiYjMjUyMTU7JiMzNTQ2OTsmIzI4MTY4OzwvdGV4dD48L2c+PGc+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI1MCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI2MS45OTk4IiB4PSIxMiIgeT0iNTA1LjI5NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxMiIgeDI9IjczLjk5OTgiIHkxPSI1MzEuNTkzOCIgeTI9IjUzMS41OTM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDEuOTk5OCIgeD0iMjIiIHk9IjUyMy4yOTIiPiYjMjU5MDM7JiMyNTE3MzsmIzI4MTY4OzwvdGV4dD48L2c+PGc+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI1MCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI1MCIgeD0iMTA0IiB5PSIzNzguMjk2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjEwNCIgeDI9IjE1NCIgeTE9IjQwNC41OTM4IiB5Mj0iNDA0LjU5MzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNy45OTk5IiB4PSIxMTUuMDAwMSIgeT0iMzk2LjI5MiI+JiMyMTQ2MjsmIzI4MDQwOzwvdGV4dD48L2c+PGVsbGlwc2UgY3g9Ijg1IiBjeT0iNjI3LjI5NjkiIGZpbGw9Im5vbmUiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMyMjIyMjI7c3Ryb2tlLXdpZHRoOjE7Ii8+PGVsbGlwc2UgY3g9Ijg1IiBjeT0iNjI3LjI5NjkiIGZpbGw9IiMyMjIyMjIiIHJ4PSI2IiByeT0iNiIgc3R5bGU9InN0cm9rZTojMjIyMjIyO3N0cm9rZS13aWR0aDoxOyIvPjwhLS1saW5rICpzdGFydCogdG8gPz8/LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDIiIGRhdGEtZW50aXR5LTI9ImVudDAwMDMiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSIzIiBpZD0ibG5rNCI+PHBhdGggZD0iTTEwMyw2My42NTY5IEMxMDMsNzcuNTg2OSAxMDMsOTguMjQ2OSAxMDMsMTE3Ljk0NjkiIGZpbGw9Im5vbmUiIGlkPSIqc3RhcnQqLXRvLSYjMjAzMTY7JiMyNTEwNDsmIzIwMDEzOyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTAzLDEyMy45NDY5LDEwNywxMTQuOTQ2OSwxMDMsMTE4Ljk0NjksOTksMTE0Ljk0NjksMTAzLDEyMy45NDY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rID8/PyB0byA/Pz8/LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDMiIGRhdGEtZW50aXR5LTI9ImVudDAwMDUiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSI1IiBpZD0ibG5rNiI+PHBhdGggZD0iTTkwLjg0LDE3NC41ODY5IEM4Ni4zNCwxODMuODE2OSA4MS4yOSwxOTQuNDc2OSA3NywyMDQuMjk2OSBDNzAuMzEsMjE5LjU5NjkgNjUuNTY2LDIzMS40MzM4IDYwLjI5NiwyNDUuMTkzOCIgZmlsbD0ibm9uZSIgaWQ9IiYjMjAzMTY7JiMyNTEwNDsmIzIwMDEzOy10by0mIzI1MjE1OyYjMzU0Njk7JiMyNDQ1MzsmIzEyMzg1OyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNTguMTUsMjUwLjc5NjksNjUuMTA0MywyNDMuODIyOCw1OS45MzgzLDI0Ni4xMjc2LDU3LjYzMzUsMjQwLjk2MTYsNTguMTUsMjUwLjc5NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1Mi4wMDAxIiB4PSI3OCIgeT0iMjE3LjM2MzgiPiYjMjUyMTU7JiMzNTQ2OTsmIzMwMDAzOyYjMzU1MzE7PC90ZXh0PjwvZz48IS0tbGluayA/Pz8/IHRvID8/Py0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDA1IiBkYXRhLWVudGl0eS0yPSJlbnQwMDA3IiBkYXRhLWxpbmstdHlwZT0iZGVwZW5kZW5jeSIgZGF0YS1zb3VyY2UtbGluZT0iNyIgaWQ9ImxuazgiPjxwYXRoIGQ9Ik00MS4yNSwzMDEuNzc2OSBDMzguNzMsMzEwLjkzNjkgMzYuMjUsMzIxLjQ5NjkgMzUsMzMxLjI5NjkgQzMzLjAzLDM0Ni43MTY5IDMzLjIwMzcsMzU4LjE4IDM0LjQxMzcsMzcxLjkyIiBmaWxsPSJub25lIiBpZD0iJiMyNTIxNTsmIzM1NDY5OyYjMjQ0NTM7JiMxMjM4NTstdG8tJiMyNTIxNTsmIzM1NDY5OyYjMjgxNjg7IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIzNC45NCwzNzcuODk2OSwzOC4xMzUxLDM2OC41ODA3LDM0LjUwMTQsMzcyLjkxNjIsMzAuMTY1OSwzNjkuMjgyNSwzNC45NCwzNzcuODk2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI2IiB4PSIzNiIgeT0iMzQ0LjM2MzgiPiYjMjUyMTU7JiMzNTQ2OTs8L3RleHQ+PC9nPjwhLS1saW5rID8/PyB0byA/Pz8tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwNyIgZGF0YS1lbnRpdHktMj0iZW50MDAwOSIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjkiIGlkPSJsbmsxMCI+PHBhdGggZD0iTTM4Ljk4LDQyOC42OTY5IEMzOS44Niw0NTAuNzE2OSA0MC45MTAyLDQ3Ni45NjE3IDQxLjc5MDIsNDk4Ljk2MTciIGZpbGw9Im5vbmUiIGlkPSImIzI1MjE1OyYjMzU0Njk7JiMyODE2ODstdG8tJiMyNTkwMzsmIzI1MTczOyYjMjgxNjg7IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI0Mi4wMyw1MDQuOTU2OSw0NS42NjcxLDQ5NS44MDQyLDQxLjgzMDIsNDk5Ljk2MDksMzcuNjczNSw0OTYuMTIzOSw0Mi4wMyw1MDQuOTU2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjUyLjAwMDEiIHg9IjQxLjgiIHk9IjQ3MS4zNjM4Ij4mIzI1OTAzOyYjMjUxNzM7JiMyMzQ1NTsmIzM0ODkyOzwvdGV4dD48L2c+PCEtLWxpbmsgPz8/IHRvID8/LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDMiIGRhdGEtZW50aXR5LTI9ImVudDAwMTEiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSIxMSIgaWQ9ImxuazEyIj48cGF0aCBkPSJNMTIxLjEzLDE3NC41NzY5IEMxMjYuNzIsMTgzLjQ1NjkgMTMyLjE1LDE5My44OTY5IDEzNSwyMDQuMjk2OSBDMTUxLjYzLDI2NC45OTY5IDE0Mi41MzY4LDMzNC4xOTE3IDEzNS4zNTY4LDM3Mi4wOTE3IiBmaWxsPSJub25lIiBpZD0iJiMyMDMxNjsmIzI1MTA0OyYjMjAwMTM7LXRvLSYjMjE0NjI7JiMyODA0MDsiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjEzNC4yNCwzNzcuOTg2OSwxMzkuODQ1MywzNjkuODg4NywxMzUuMTcwNywzNzMuMDc0MywxMzEuOTg1MSwzNjguMzk5NiwxMzQuMjQsMzc3Ljk4NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNiIgeD0iMTQ0Ljk4IiB5PSIyODAuODYzOCI+JiMyMTQ2MjsmIzI4MDQwOzwvdGV4dD48L2c+PCEtLWxpbmsgPz8/PyB0byA/Py0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDA1IiBkYXRhLWVudGl0eS0yPSJlbnQwMDExIiBkYXRhLWxpbmstdHlwZT0iZGVwZW5kZW5jeSIgZGF0YS1zb3VyY2UtbGluZT0iMTIiIGlkPSJsbmsxMyI+PHBhdGggZD0iTTY0LjYxLDMwMS42OTY5IEM3OC43MSwzMjMuNzE2OSA5Ni4xMDU3LDM1MC45MDMyIDExMC4xODU3LDM3Mi45MDMyIiBmaWxsPSJub25lIiBpZD0iJiMyNTIxNTsmIzM1NDY5OyYjMjQ0NTM7JiMxMjM4NTstdG8tJiMyMTQ2MjsmIzI4MDQwOyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTEzLjQyLDM3Ny45NTY5LDExMS45Mzc2LDM2OC4yMjAyLDExMC43MjQ3LDM3My43NDU1LDEwNS4xOTk0LDM3Mi41MzI2LDExMy40MiwzNzcuOTU2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI2IiB4PSI5NC43OSIgeT0iMzQ0LjM2MzgiPiYjMjE0NjI7JiMyODA0MDs8L3RleHQ+PC9nPjwhLS1saW5rID8/IHRvICplbmQqLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMTEiIGRhdGEtZW50aXR5LTI9ImVudDAwMTQiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSIxNCIgaWQ9ImxuazE1Ij48cGF0aCBkPSJNMTI0LjE4LDQyOC43MzY5IEMxMTcuMjksNDYzLjY2NjkgMTA0LjIyLDUyOS45MDY5IDkzLDU4Ni4yOTY5IEM5MC45OCw1OTYuNDM2OSA4OS44Mzk1LDYwMi4xNDQgODguMjE5NSw2MTAuMjI0IiBmaWxsPSJub25lIiBpZD0iJiMyMTQ2MjsmIzI4MDQwOy10by0qZW5kKiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iODcuMDQsNjE2LjEwNjksOTIuNzMxMiw2MDguMDY4OCw4OC4wMjI5LDYxMS4yMDQ0LDg0Ljg4NzMsNjA2LjQ5NjIsODcuMDQsNjE2LjEwNjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLWxpbmsgPz8/IHRvICplbmQqLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDkiIGRhdGEtZW50aXR5LTI9ImVudDAwMTQiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSIxNSIgaWQ9ImxuazE2Ij48cGF0aCBkPSJNNTMuODIsNTU1Ljc1NjkgQzYyLjY2LDU3NS43NzY5IDcyLjI2MjYsNTk3LjQ4OTggNzguNDgyNiw2MTEuNTQ5OCIgZmlsbD0ibm9uZSIgaWQ9IiYjMjU5MDM7JiMyNTE3MzsmIzI4MTY4Oy10by0qZW5kKiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iODAuOTEsNjE3LjAzNjksODAuOTI2OSw2MDcuMTg4LDc4Ljg4NzIsNjEyLjQ2NDMsNzMuNjEwOSw2MTAuNDI0Niw4MC45MSw2MTcuMDM2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48P3BsYW50dW1sLXNyYyBBeWFpb0tiTFUzUGJfUkZFZ08tUlRadmtSZGxTbEVUbnF0dUdrdDdUb3lSanB2Vmx2a0FBcmVmTHFETXJLdFlvVHl3cFpXYkZUZ3BidWU4cG1IQkZFbFVfTUROeFQ1X2h1eVE1MmJQR3hsQ2Zjci1peGtSWUdmNTRnN3dzZW1FazVBTzg5MFBNME5PR0wwTU9fTkpUXzFTQlV6M2pWVGVfeFRhc2EyODgwekNnVDBMU0swNkc3RDFOTjBZQmUyODA/PjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<table>
<thead>
<tr>
<th>ステータス</th>
<th>説明</th>
<th>次のアクション</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>作成中</strong></td>
<td>支払データ作成直後</td>
<td>承認申請または取消</td>
</tr>
<tr>
<td><strong>承認待ち</strong></td>
<td>承認申請済み</td>
<td>承認または取消</td>
</tr>
<tr>
<td><strong>承認済</strong></td>
<td>管理者が承認</td>
<td>支払実行</td>
</tr>
<tr>
<td><strong>支払済</strong></td>
<td>支払処理完了</td>
<td>終了状態</td>
</tr>
<tr>
<td><strong>取消</strong></td>
<td>支払を取り消し</td>
<td>終了状態</td>
</tr>
</tbody>
</table>
<h3 id="_5">支払方法の種類<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>支払方法</th>
<th>説明</th>
<th>特徴</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>振込</strong></td>
<td>銀行振込</td>
<td>最も一般的、手数料発生</td>
</tr>
<tr>
<td><strong>手形</strong></td>
<td>約束手形</td>
<td>支払サイト延長、不渡りリスク</td>
</tr>
<tr>
<td><strong>現金</strong></td>
<td>現金払い</td>
<td>即時決済、少額向け</td>
</tr>
<tr>
<td><strong>相殺</strong></td>
<td>債権債務相殺</td>
<td>売掛金との相殺</td>
</tr>
<tr>
<td><strong>電子記録債権</strong></td>
<td>でんさい</td>
<td>手形の電子版</td>
</tr>
</tbody>
</table>
<h3 id="er">支払関連の ER 図<a class="headerlink" href="#er" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9Ijc1NXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NTY2cHg7aGVpZ2h0Ojc1NXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDU2NiA3NTUiIHdpZHRoPSI1NjZweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjA2NjE7JiMyMTIwOTsmIzMxNjQ5OyYjMjk3MDI7JiMxMjM5ODtFUiYjMjIyNTk7PC90aXRsZT48ZGVmcy8+PGc+PGcgY2xhc3M9InRpdGxlIiBkYXRhLXNvdXJjZS1saW5lPSIxIj48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA0LjM0MzQiIHg9IjIyMy44NjgzIiB5PSIyMi45OTUxIj4mIzIwNjYxOyYjMjEyMDk7JiMzMTY0OTsmIzI5NzAyOyYjMTIzOTg7RVImIzIyMjU5OzwvdGV4dD48L2c+PCEtLWNsYXNzID8/Pz8/Py0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Ii4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMyIgaWQ9ImVudDAwMDIiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTQ1Ljc4MTMiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEzNS4yMDM3IiB4PSIyNjMuODEiIHk9IjQ0LjI5NjkiLz48ZWxsaXBzZSBjeD0iMjg3LjQ1MTgiIGN5PSI2MC4yOTY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0yOTEuNTYxMiw2Ni4yOTY5IEwyODMuODQyNSw2Ni4yOTY5IEwyODMuODQyNSw1My45MDYzIEwyOTEuNTYxMiw1My45MDYzIEwyOTEuNTYxMiw1Ni4wNjI1IEwyODYuMjk1Niw1Ni4wNjI1IEwyODYuMjk1Niw1OC43MzQ0IEwyOTEuMDYxMiw1OC43MzQ0IEwyOTEuMDYxMiw2MC44OTA2IEwyODYuMjk1Niw2MC44OTA2IEwyODYuMjk1Niw2NC4xNDA2IEwyOTEuNTYxMiw2NC4xNDA2IEwyOTEuNTYxMiw2Ni4yOTY5IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iMzAzLjM3MjMiIHk9IjY1LjE0MzYiPiYjMjE0NjI7JiMyNDM0MTsmIzIwODA4OyYjMTI1MTA7JiMxMjQ3MzsmIzEyNDc5OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyNjQuODEiIHgyPSIzOTguMDEzNyIgeTE9Ijc2LjI5NjkiIHkyPSI3Ni4yOTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTIzLjIwMzciIHg9IjI2OS44MSIgeT0iOTMuMjkyIj4mIzIxNDYyOyYjMjQzNDE7JiMyMDgwODsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsgJiMxNzE7UEsmIzE4Nzs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjI2NC44MSIgeDI9IjM5OC4wMTM3IiB5MT0iMTAwLjU5MzgiIHkyPSIxMDAuNTkzOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjI2OS44MSIgeT0iMTE3LjU4ODkiPiYjMjE0NjI7JiMyNDM0MTsmIzIwODA4OyYjMjE1MTc7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjI2OS44MSIgeT0iMTMzLjg4NTciPiYjMjE0NjI7JiMyNDM0MTsmIzIwODA4OyYjMjEzMDY7JiMyMDk5ODs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjcuOTk5OSIgeD0iMjY5LjgxIiB5PSIxNTAuMTgyNiI+JiMzMjIyNDsmIzI2MDg1OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MS45OTk4IiB4PSIyNjkuODEiIHk9IjE2Ni40Nzk1Ij4mIzI1OTAzOyYjMjUxNzM7JiMyNjM3Njs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDEuOTk5OCIgeD0iMjY5LjgxIiB5PSIxODIuNzc2NCI+JiMyNTkwMzsmIzI1MTczOyYjMjYwODU7PC90ZXh0PjwvZz48IS0tY2xhc3MgPz8/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMTMiIGlkPSJlbnQwMDAzIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjE0NS43ODEzIiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMzQuODE0MSIgeD0iNyIgeT0iMzA3LjExNjkiLz48ZWxsaXBzZSBjeD0iMzYuNzY2NSIgY3k9IjMyMy4xMTY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik00MC44NzU5LDMyOS4xMTY5IEwzMy4xNTcxLDMyOS4xMTY5IEwzMy4xNTcxLDMxNi43MjYzIEw0MC44NzU5LDMxNi43MjYzIEw0MC44NzU5LDMxOC44ODI1IEwzNS42MTAyLDMxOC44ODI1IEwzNS42MTAyLDMyMS41NTQ0IEw0MC4zNzU5LDMyMS41NTQ0IEw0MC4zNzU5LDMyMy43MTA2IEwzNS42MTAyLDMyMy43MTA2IEwzNS42MTAyLDMyNi45NjA2IEw0MC44NzU5LDMyNi45NjA2IEw0MC44NzU5LDMyOS4xMTY5IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iNTQuMDQ3OSIgeT0iMzI3Ljk2MzYiPiYjMjAxODE7JiMyMDgzNzsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iOCIgeDI9IjE0MC44MTQxIiB5MT0iMzM5LjExNjkiIHkyPSIzMzkuMTE2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk1LjIwMzkiIHg9IjEzIiB5PSIzNTYuMTEyIj4mIzIwMTgxOyYjMjA4Mzc7JiMzMDA1ODsmIzIxNDk1OyAmIzE3MTtQSyYjMTg3OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iOCIgeDI9IjE0MC44MTQxIiB5MT0iMzYzLjQxMzgiIHkyPSIzNjMuNDEzOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyMi44MTQxIiB4PSIxMyIgeT0iMzgwLjQwODkiPiYjMjAxODE7JiMyMDgzNzsmIzIwODA4OyYjMTI0Njc7JiMxMjU0MDsmIzEyNDg5OyAmIzE3MTtGSyYjMTg3OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MS45OTk4IiB4PSIxMyIgeT0iMzk2LjcwNTciPiYjMjAxODE7JiMyMDgzNzsmIzI2MDg1OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSIxMyIgeT0iNDEzLjAwMjYiPiYjMjAxODE7JiMyMDgzNzsmIzM3MzI5OyYjMzg5ODk7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjEzIiB5PSI0MjkuMjk5NSI+JiMyODA0MDsmIzM2MDI3OyYjMzEyNDY7JiMzODk4OTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iMTMiIHk9IjQ0NS41OTY0Ij4mIzEyNDczOyYjMTI0ODY7JiMxMjU0MDsmIzEyNDc5OyYjMTI0NzM7PC90ZXh0PjwvZz48IS0tY2xhc3MgPz8/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMjMiIGlkPSJlbnQwMDA0Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjI1OS44NTk0IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMzQuODE0MSIgeD0iMTc3IiB5PSIyNTAuMDg2OSIvPjxlbGxpcHNlIGN4PSIyMDYuNzY2NSIgY3k9IjI2Ni4wODY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0yMTAuODc1OSwyNzIuMDg2OSBMMjAzLjE1NzEsMjcyLjA4NjkgTDIwMy4xNTcxLDI1OS42OTYyIEwyMTAuODc1OSwyNTkuNjk2MiBMMjEwLjg3NTksMjYxLjg1MjUgTDIwNS42MTAyLDI2MS44NTI1IEwyMDUuNjEwMiwyNjQuNTI0NCBMMjEwLjM3NTksMjY0LjUyNDQgTDIxMC4zNzU5LDI2Ni42ODA2IEwyMDUuNjEwMiwyNjYuNjgwNiBMMjA1LjYxMDIsMjY5LjkzMDYgTDIxMC44NzU5LDI2OS45MzA2IEwyMTAuODc1OSwyNzIuMDg2OSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjIyNC4wNDc5IiB5PSIyNzAuOTMzNiI+JiMyNTkwMzsmIzI1MTczOyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxNzgiIHgyPSIzMTAuODE0MSIgeTE9IjI4Mi4wODY5IiB5Mj0iMjgyLjA4NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NC4xMTMzIiB4PSIxODMiIHk9IjI5OS4wODIiPklEICYjMTcxO1BLJiMxODc7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxNzgiIHgyPSIzMTAuODE0MSIgeTE9IjMwNi4zODM3IiB5Mj0iMzA2LjM4MzciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ny4wMDg1IiB4PSIxODMiIHk9IjMyMy4zNzg5Ij4mIzI1OTAzOyYjMjUxNzM7JiMzMDA1ODsmIzIxNDk1OyAmIzE3MTtVSyYjMTg3OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjIuODE0MSIgeD0iMTgzIiB5PSIzMzkuNjc1NyI+JiMyMDE4MTsmIzIwODM3OyYjMjA4MDg7JiMxMjQ2NzsmIzEyNTQwOyYjMTI0ODk7ICYjMTcxO0ZLJiMxODc7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjE4MyIgeT0iMzU1Ljk3MjYiPiYjMjU5MDM7JiMyNTE3MzsmIzMyMjI0OyYjMjYwODU7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjE4MyIgeT0iMzcyLjI2OTUiPiYjMjU5MDM7JiMyNTE3MzsmIzIwMTA0OyYjMjM0NTA7JiMyNjA4NTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iMTgzIiB5PSIzODguNTY2NCI+JiMyNTkwMzsmIzI1MTczOyYjMjYwNDE7JiMyNzg2MTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iMTgzIiB5PSI0MDQuODYzMiI+JiMyNTkwMzsmIzI1MTczOyYjMzczMjk7JiMzODk4OTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iMTgzIiB5PSI0MjEuMTYwMSI+JiMyODA0MDsmIzM2MDI3OyYjMzEyNDY7JiMzODk4OTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iMTgzIiB5PSI0MzcuNDU3Ij4mIzI4MzA0OyYjMjc4NDk7JiMyNDUwMDsmIzIxNDU0OyYjMzg5ODk7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjE4MyIgeT0iNDUzLjc1MzkiPiYjMjQwNDY7JiMyNDM0MTsmIzI1OTAzOyYjMjUxNzM7JiMzODk4OTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iMTgzIiB5PSI0NzAuMDUwNyI+JiMyNTkwMzsmIzI1MTczOyYjMjM0NTU7JiMzNDg5MjsmIzI2MDg1OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSIxODMiIHk9IjQ4Ni4zNDc2Ij4mIzEyNDczOyYjMTI0ODY7JiMxMjU0MDsmIzEyNDc5OyYjMTI0NzM7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjE4MyIgeT0iNTAyLjY0NDUiPiYjMTI0OTY7JiMxMjU0MDsmIzEyNDcyOyYjMTI1MTk7JiMxMjUzMTs8L3RleHQ+PC9nPjwhLS1jbGFzcyA/Pz8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iNDAiIGlkPSJlbnQwMDA1Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjE3OC4zNzUiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEyOS45OTk2IiB4PSI5NS40MSIgeT0iNTY5LjkzNjkiLz48ZWxsaXBzZSBjeD0iMTEwLjQxIiBjeT0iNTg1LjkzNjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTExNC41MTk0LDU5MS45MzY5IEwxMDYuODAwNiw1OTEuOTM2OSBMMTA2LjgwMDYsNTc5LjU0NjMgTDExNC41MTk0LDU3OS41NDYzIEwxMTQuNTE5NCw1ODEuNzAyNSBMMTA5LjI1MzgsNTgxLjcwMjUgTDEwOS4yNTM4LDU4NC4zNzQ0IEwxMTQuMDE5NCw1ODQuMzc0NCBMMTE0LjAxOTQsNTg2LjUzMDYgTDEwOS4yNTM4LDU4Ni41MzA2IEwxMDkuMjUzOCw1ODkuNzgwNiBMMTE0LjUxOTQsNTg5Ljc4MDYgTDExNC41MTk0LDU5MS45MzY5IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTcuOTk5NiIgeD0iMTI0LjQxIiB5PSI1OTAuNzgzNiI+JiMyNTkwMzsmIzI1MTczOyYjMjYxMjY7JiMzMjA0ODsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iOTYuNDEiIHgyPSIyMjQuNDA5NiIgeTE9IjYwMS45MzY5IiB5Mj0iNjAxLjkzNjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NC4xMTMzIiB4PSIxMDEuNDEiIHk9IjYxOC45MzIiPklEICYjMTcxO1BLJiMxODc7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI5Ni40MSIgeDI9IjIyNC40MDk2IiB5MT0iNjI2LjIzMzgiIHkyPSI2MjYuMjMzOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgxLjcyMzUiIHg9IjEwMS40MSIgeT0iNjQzLjIyODkiPiYjMjU5MDM7JiMyNTE3MztJRCAmIzE3MTtGSyYjMTg3OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSIxMDEuNDEiIHk9IjY1OS41MjU3Ij4mIzI1OTAzOyYjMjUxNzM7JiMzNDg5MjsmIzMwMDU4OyYjMjE0OTU7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk0LjgxNDIiIHg9IjEwMS40MSIgeT0iNjc1LjgyMjYiPiYjMjAxODE7JiMyMDgzNzsmIzMwMDU4OyYjMjE0OTU7ICYjMTcxO0ZLJiMxODc7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQxLjk5OTgiIHg9IjEwMS40MSIgeT0iNjkyLjExOTUiPiYjMjAxODE7JiMyMDgzNzsmIzI2MDg1OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSIxMDEuNDEiIHk9IjcwOC40MTY0Ij4mIzIwMTgxOyYjMjA4Mzc7JiMzNzMyOTsmIzM4OTg5OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSIxMDEuNDEiIHk9IjcyNC43MTMyIj4mIzI4MDQwOyYjMzYwMjc7JiMzMTI0NjsmIzM4OTg5OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4My45OTk2IiB4PSIxMDEuNDEiIHk9Ijc0MS4wMTAxIj4mIzI1OTAzOyYjMjUxNzM7JiMyMzU1MDsmIzM1OTM3OyYjMzczMjk7JiMzODk4OTs8L3RleHQ+PC9nPjwhLS1jbGFzcyA/Pz8/Pz8/Py0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Ii4uLi4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSI1MiIgaWQ9ImVudDAwMDYiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTc4LjM3NSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTQzLjk5OTUiIHg9IjM0Ni40MSIgeT0iMjkwLjgyNjkiLz48ZWxsaXBzZSBjeD0iMzYxLjQxIiBjeT0iMzA2LjgyNjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTM2NS41MTk0LDMxMi44MjY5IEwzNTcuODAwNiwzMTIuODI2OSBMMzU3LjgwMDYsMzAwLjQzNjMgTDM2NS41MTk0LDMwMC40MzYzIEwzNjUuNTE5NCwzMDIuNTkyNSBMMzYwLjI1MzgsMzAyLjU5MjUgTDM2MC4yNTM4LDMwNS4yNjQ0IEwzNjUuMDE5NCwzMDUuMjY0NCBMMzY1LjAxOTQsMzA3LjQyMDYgTDM2MC4yNTM4LDMwNy40MjA2IEwzNjAuMjUzOCwzMTAuNjcwNiBMMzY1LjUxOTQsMzEwLjY3MDYgTDM2NS41MTk0LDMxMi44MjY5IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTExLjk5OTUiIHg9IjM3NS40MSIgeT0iMzExLjY3MzYiPiYjMzYwMjM7JiMyNTQ5OTsmIzM3MzI5OyYjMjc1MzE7JiMzOTY0MDsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMzQ3LjQxIiB4Mj0iNDg5LjQwOTUiIHkxPSIzMjIuODI2OSIgeTI9IjMyMi44MjY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTQuMTEzMyIgeD0iMzUyLjQxIiB5PSIzMzkuODIyIj5JRCAmIzE3MTtQSyYjMTg3OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzQ3LjQxIiB4Mj0iNDg5LjQwOTUiIHkxPSIzNDcuMTIzOCIgeTI9IjM0Ny4xMjM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTIyLjgxNDEiIHg9IjM1Mi40MSIgeT0iMzY0LjExODkiPiYjMjAxODE7JiMyMDgzNzsmIzIwODA4OyYjMTI0Njc7JiMxMjU0MDsmIzEyNDg5OyAmIzE3MTtGSyYjMTg3OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNy45OTk5IiB4PSIzNTIuNDEiIHk9IjM4MC40MTU3Ij4mIzI0MTgwOyYjMjYzNzY7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjM1Mi40MSIgeT0iMzk2LjcxMjYiPiYjMjEwNjk7JiMyNjM3NjsmIzI3NTMxOyYjMzk2NDA7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjM1Mi40MSIgeT0iNDEzLjAwOTUiPiYjMjQ0MDM7JiMyNjM3NjsmIzIwMTgxOyYjMjA4Mzc7JiMzOTY0MDs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iMzUyLjQxIiB5PSI0MjkuMzA2NCI+JiMyNDQwMzsmIzI2Mzc2OyYjMjU5MDM7JiMyNTE3MzsmIzM5NjQwOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSIzNTIuNDEiIHk9IjQ0NS42MDMyIj4mIzI0NDAzOyYjMjYzNzY7JiMyNzUzMTsmIzM5NjQwOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSIzNTIuNDEiIHk9IjQ2MS45MDAxIj4mIzEyNDk2OyYjMTI1NDA7JiMxMjQ3MjsmIzEyNTE5OyYjMTI1MzE7PC90ZXh0PjwvZz48IS0tY2xhc3MgPz8/Pz8/Py0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Ii4uLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjY0IiBpZD0iZW50MDAwNyI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxNjIuMDc4MSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTM0LjgxNDEiIHg9IjI2MSIgeT0iNTc4LjA4NjkiLz48ZWxsaXBzZSBjeD0iMjc4LjE2NjUiIGN5PSI1OTQuMDg2OSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMjgyLjI3NTksNjAwLjA4NjkgTDI3NC41NTcyLDYwMC4wODY5IEwyNzQuNTU3Miw1ODcuNjk2MyBMMjgyLjI3NTksNTg3LjY5NjMgTDI4Mi4yNzU5LDU4OS44NTI1IEwyNzcuMDEwMyw1ODkuODUyNSBMMjc3LjAxMDMsNTkyLjUyNDQgTDI4MS43NzU5LDU5Mi41MjQ0IEwyODEuNzc1OSw1OTQuNjgwNiBMMjc3LjAxMDMsNTk0LjY4MDYgTDI3Ny4wMTAzLDU5Ny45MzA2IEwyODIuMjc1OSw1OTcuOTMwNiBMMjgyLjI3NTksNjAwLjA4NjkgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ny45OTk2IiB4PSIyOTIuNjQ4IiB5PSI1OTguOTMzNiI+JiMyNTkwMzsmIzI1MTczOyYjMjAxMDQ7JiMyMzQ1MDsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMjYyIiB4Mj0iMzk0LjgxNDEiIHkxPSI2MTAuMDg2OSIgeTI9IjYxMC4wODY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTQuMTEzMyIgeD0iMjY3IiB5PSI2MjcuMDgyIj5JRCAmIzE3MTtQSyYjMTg3OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjYyIiB4Mj0iMzk0LjgxNDEiIHkxPSI2MzQuMzgzOCIgeTI9IjYzNC4zODM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTIyLjgxNDEiIHg9IjI2NyIgeT0iNjUxLjM3ODkiPiYjMjAxODE7JiMyMDgzNzsmIzIwODA4OyYjMTI0Njc7JiMxMjU0MDsmIzEyNDg5OyAmIzE3MTtGSyYjMTg3OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSIyNjciIHk9IjY2Ny42NzU3Ij4mIzI1OTAzOyYjMjUxNzM7JiMyMDEwNDsmIzIzNDUwOyYjMjYwODU7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjI2NyIgeT0iNjgzLjk3MjYiPiYjMjU5MDM7JiMyNTE3MzsmIzIwMTA0OyYjMjM0NTA7JiMzODk4OTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iMjY3IiB5PSI3MDAuMjY5NSI+JiMyNTkwMzsmIzI1MTczOyYjMjYwNDE7JiMyNzg2MTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iMjY3IiB5PSI3MTYuNTY2NCI+JiMyNTkwMzsmIzI1MTczOyYjMjgxNjg7JiMxMjUwMTsmIzEyNTIxOyYjMTI0NjQ7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgxLjcyMzUiIHg9IjI2NyIgeT0iNzMyLjg2MzIiPiYjMjU5MDM7JiMyNTE3MztJRCAmIzE3MTtGSyYjMTg3OzwvdGV4dD48L2c+PCEtLWxpbmsgPz8/Pz8/IHRvID8/Pz8/LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDIiIGRhdGEtZW50aXR5LTI9ImVudDAwMDMiIGRhdGEtbGluay10eXBlPSJjcm93Zm9vdCIgZGF0YS1zb3VyY2UtbGluZT0iNzUiIGlkPSJsbms4Ij48cGF0aCBjb2RlTGluZT0iNzUiIGQ9Ik0yNTYuODc0MSwxNjYuOTQwMiBDMjIzLjM1NDEsMTkwLjYwMDIgMTkwLjE4LDIxNy4wMzY5IDE1OS40MSwyNTAuMDg2OSBDMTQzLjUxLDI2Ny4xNTY5IDEzOC40NzE4LDI3Mi40NTUzIDEyNS43MjE4LDI5MS44OTUzIiBmaWxsPSJub25lIiBpZD0iJiMyMTQ2MjsmIzI0MzQxOyYjMjA4MDg7JiMxMjUxMDsmIzEyNDczOyYjMTI0Nzk7LSYjMjAxODE7JiMyMDgzNzsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjU3LjgzNTQiIHgyPSIyNjIuNDQ4NyIgeTE9IjE2MS4zNjU2IiB5Mj0iMTY3LjkwMTUiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjU1LjM4NDUiIHgyPSIyNTkuOTk3OCIgeTE9IjE2My4wOTU2IiB5Mj0iMTY5LjYzMTQiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjU2Ljg3NDEiIHgyPSIyNjMuNDEiIHkxPSIxNjYuOTQwMiIgeTI9IjE2Mi4zMjY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEyMC4yMzc0IiB4Mj0iMTIwLjg2NzIiIHkxPSIzMDAuMjU3MyIgeTI9IjMxMC4yMzc1Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEyMC4yMzc0IiB4Mj0iMTEwLjgzMjgiIHkxPSIzMDAuMjU3MyIgeTI9IjMwMy42NTYzIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEyMC4yMzc0IiB4Mj0iMTE1Ljg1IiB5MT0iMzAwLjI1NzMiIHkyPSIzMDYuOTQ2OSIvPjxlbGxpcHNlIGN4PSIxMjMuNTI4IiBjeT0iMjk1LjI0MDEiIGZpbGw9Im5vbmUiIHJ4PSI0IiByeT0iNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayA/Pz8/Pz8gdG8gPz8/Pz8tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwMiIgZGF0YS1lbnRpdHktMj0iZW50MDAwNCIgZGF0YS1saW5rLXR5cGU9ImNyb3dmb290IiBkYXRhLXNvdXJjZS1saW5lPSI3NiIgaWQ9ImxuazkiPjxwYXRoIGNvZGVMaW5lPSI3NiIgZD0iTTMwNC43NTY1LDE5OC4wODUxIEMyOTguNTY2NSwyMTYuNjI1MSAyOTkuOTU3MSwyMTIuNDgyMiAyOTMuMTI3MSwyMzIuOTUyMiIgZmlsbD0ibm9uZSIgaWQ9IiYjMjE0NjI7JiMyNDM0MTsmIzIwODA4OyYjMTI1MTA7JiMxMjQ3MzsmIzEyNDc5Oy0mIzI1OTAzOyYjMjUxNzM7JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjMwMi4yMjkxIiB4Mj0iMzA5LjgxNzQiIHkxPSIxOTMuMDI0MiIgeTI9IjE5NS41NTc3Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjMwMS4yNzkxIiB4Mj0iMzA4Ljg2NzMiIHkxPSIxOTUuODY5OCIgeTI9IjE5OC40MDMzIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjMwNC43NTY1IiB4Mj0iMzA3LjI5IiB5MT0iMTk4LjA4NTEiIHkyPSIxOTAuNDk2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyODkuOTYyIiB4Mj0iMjkzLjEyMTUiIHkxPSIyNDIuNDM4MiIgeTI9IjI1MS45MjU5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjI4OS45NjIiIHgyPSIyODEuNzM4NSIgeTE9IjI0Mi40MzgyIiB5Mj0iMjQ4LjEyNzgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjg5Ljk2MiIgeDI9IjI4Ny40MyIgeTE9IjI0Mi40MzgyIiB5Mj0iMjUwLjAyNjkiLz48ZWxsaXBzZSBjeD0iMjkxLjg2MTEiIGN5PSIyMzYuNzQ2NiIgZmlsbD0ibm9uZSIgcng9IjQiIHJ5PSI0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rID8/Pz8/PyB0byA/Pz8/Pz8/Py0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDAyIiBkYXRhLWVudGl0eS0yPSJlbnQwMDA2IiBkYXRhLWxpbmstdHlwZT0iY3Jvd2Zvb3QiIGRhdGEtc291cmNlLWxpbmU9Ijc3IiBpZD0ibG5rMTAiPjxwYXRoIGNvZGVMaW5lPSI3NyIgZD0iTTM1OC4wNjEzLDE5OC4wODU5IEMzNjguNDIxMywyMjkuMTQ1OSAzNzIuMzk2MywyNDEuMDYxMSAzODMuMjc2MywyNzMuNjkxMSIgZmlsbD0ibm9uZSIgaWQ9IiYjMjE0NjI7JiMyNDM0MTsmIzIwODA4OyYjMTI1MTA7JiMxMjQ3MzsmIzEyNDc5Oy0mIzM2MDIzOyYjMjU0OTk7JiMzNzMyOTsmIzI3NTMxOyYjMzk2NDA7JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjM1My4wMDEyIiB4Mj0iMzYwLjU5MDEiIHkxPSIxOTUuNTU3IiB5Mj0iMTkzLjAyNTciLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzUzLjk1MDQiIHgyPSIzNjEuNTM5NCIgeTE9IjE5OC40MDI5IiB5Mj0iMTk1Ljg3MTYiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzU4LjA2MTMiIHgyPSIzNTUuNTMiIHkxPSIxOTguMDg1OSIgeTI9IjE5MC40OTY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjM4Ni40Mzk1IiB4Mj0iMzk0LjY2MTkiIHkxPSIyODMuMTc3NiIgeTI9IjI4OC44NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzg2LjQzOTUiIHgyPSIzODMuMjc4MSIgeTE9IjI4My4xNzc2IiB5Mj0iMjkyLjY2NDgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzg2LjQzOTUiIHgyPSIzODguOTciIHkxPSIyODMuMTc3NiIgeTI9IjI5MC43NjY5Ii8+PGVsbGlwc2UgY3g9IjM4NC41NDE2IiBjeT0iMjc3LjQ4NTciIGZpbGw9Im5vbmUiIHJ4PSI0IiByeT0iNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayA/Pz8/Pz8gdG8gPz8/Pz8/Py0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDAyIiBkYXRhLWVudGl0eS0yPSJlbnQwMDA3IiBkYXRhLWxpbmstdHlwZT0iY3Jvd2Zvb3QiIGRhdGEtc291cmNlLWxpbmU9Ijc4IiBpZD0ibG5rMTEiPjxwYXRoIGNvZGVMaW5lPSI3OCIgZD0iTTQwNi4zOTA5LDE1My4yMjQxIEM0NDUuNzUwOSwxNzUuMjU0MSA0ODQuODYsMjA1LjAwNjkgNTA3LjQxLDI1MC4wODY5IEM1NTkuMDgsMzUzLjM3NjkgNTU2LjU2LDQwNS40MzY5IDUwNy40MSw1MDkuOTM2OSBDNDg0LjQsNTU4Ljg1NjkgNDUxLjY3NjQsNTg3LjU5ODggNDExLjE4NjQsNjEzLjAwODgiIGZpbGw9Im5vbmUiIGlkPSImIzIxNDYyOyYjMjQzNDE7JiMyMDgwODsmIzEyNTEwOyYjMTI0NzM7JiMxMjQ3OTstJiMyNTkwMzsmIzI1MTczOyYjMjAxMDQ7JiMyMzQ1MDsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDAwLjk0NjgiIHgyPSI0MDQuODU0MSIgeTE9IjE1NC43NjEiIHkyPSIxNDcuNzgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDAzLjU2NDciIHgyPSI0MDcuNDcxOSIgeTE9IjE1Ni4yMjYyIiB5Mj0iMTQ5LjI0NTMiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDA2LjM5MDkiIHgyPSIzOTkuNDEiIHkxPSIxNTMuMjI0MSIgeTI9IjE0OS4zMTY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjQwMi43MTYyIiB4Mj0iMzk5LjEyOTQiIHkxPSI2MTguMzI0NCIgeTI9IjYyNy42NTkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDAyLjcxNjIiIHgyPSIzOTIuNzUwNiIgeTE9IjYxOC4zMjQ0IiB5Mj0iNjE3LjQ5NDciLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDAyLjcxNjIiIHgyPSIzOTUuOTQiIHkxPSI2MTguMzI0NCIgeTI9IjYyMi41NzY5Ii8+PGVsbGlwc2UgY3g9IjQwNy43OTgzIiBjeT0iNjE1LjEzNTEiIGZpbGw9Im5vbmUiIHJ4PSI0IiByeT0iNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayA/Pz8/PyB0byA/Pz8/Pz8/LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDQiIGRhdGEtZW50aXR5LTI9ImVudDAwMDUiIGRhdGEtbGluay10eXBlPSJjcm93Zm9vdCIgZGF0YS1zb3VyY2UtbGluZT0iNzkiIGlkPSJsbmsxMiI+PHBhdGggY29kZUxpbmU9Ijc5IiBkPSJNMjAyLjkxNzQsNTE3Ljg5MjMgQzE5Ni44Mzc0LDUzNy45MzIzIDE5OC4yMzE3LDUzMy4zNTA5IDE5Mi41MTE3LDU1Mi4yMjA5IiBmaWxsPSJub25lIiBpZD0iJiMyNTkwMzsmIzI1MTczOyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5Oy0mIzI1OTAzOyYjMjUxNzM7JiMyNjEyNjsmIzMyMDQ4OyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyMDAuMjUxIiB4Mj0iMjA3LjkwNjQiIHkxPSI1MTIuOTAzMyIgeTI9IjUxNS4yMjU5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE5OS4zOCIgeDI9IjIwNy4wMzU0IiB5MT0iNTE1Ljc3NDEiIHkyPSI1MTguMDk2NyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyMDIuOTE3NCIgeDI9IjIwNS4yNCIgeTE9IjUxNy44OTIzIiB5Mj0iNTEwLjIzNjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTg5LjYxMDciIHgyPSIxOTMuMDMyIiB5MT0iNTYxLjc5MDkiIHkyPSI1NzEuMTg3NCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxODkuNjEwNyIgeDI9IjE4MS41NDgiIHkxPSI1NjEuNzkwOSIgeTI9IjU2Ny43MDYzIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE4OS42MTA3IiB4Mj0iMTg3LjI5IiB5MT0iNTYxLjc5MDkiIHkyPSI1NjkuNDQ2OSIvPjxlbGxpcHNlIGN4PSIxOTEuMzUxMyIgY3k9IjU1Ni4wNDg5IiBmaWxsPSJub25lIiByeD0iNCIgcnk9IjQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLWxpbmsgPz8/Pz8gdG8gPz8/Pz8/Py0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDAzIiBkYXRhLWVudGl0eS0yPSJlbnQwMDA1IiBkYXRhLWxpbmstdHlwZT0iY3Jvd2Zvb3QiIGRhdGEtc291cmNlLWxpbmU9IjgwIiBpZD0ibG5rMTMiPjxwYXRoIGNvZGVMaW5lPSI4MCIgZD0iTTk5LjE1MTUsNDYwLjczNzMgQzExMC4yMDE1LDQ5Ni4zMzczIDExNS45MjQ0LDUxNC43ODU5IDEyNy41OTQ0LDU1Mi4zODU5IiBmaWxsPSJub25lIiBpZD0iJiMyMDE4MTsmIzIwODM3OyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5Oy0mIzI1OTAzOyYjMjUxNzM7JiMyNjEyNjsmIzMyMDQ4OyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI5NC4xNDU2IiB4Mj0iMTAxLjc4NiIgeTE9IjQ1OC4xMDI4IiB5Mj0iNDU1LjczMTMiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iOTUuMDM0OSIgeDI9IjEwMi42NzUzIiB5MT0iNDYwLjk2OCIgeTI9IjQ1OC41OTY1Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9Ijk5LjE1MTUiIHgyPSI5Ni43OCIgeTE9IjQ2MC43MzczIiB5Mj0iNDUzLjA5NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTMwLjU1ODYiIHgyPSIxMzguNjYwMyIgeTE9IjU2MS45MzY0IiB5Mj0iNTY3Ljc5ODMiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTMwLjU1ODYiIHgyPSIxMjcuMTk5NyIgeTE9IjU2MS45MzY0IiB5Mj0iNTcxLjM1NTQiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTMwLjU1ODYiIHgyPSIxMzIuOTMiIHkxPSI1NjEuOTM2NCIgeTI9IjU2OS41NzY5Ii8+PGVsbGlwc2UgY3g9IjEyOC43ODAxIiBjeT0iNTU2LjIwNjEiIGZpbGw9Im5vbmUiIHJ4PSI0IiByeT0iNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayA/Pz8/PyB0byA/Pz8/Pz8/LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDQiIGRhdGEtZW50aXR5LTI9ImVudDAwMDciIGRhdGEtbGluay10eXBlPSJjcm93Zm9vdCIgZGF0YS1zb3VyY2UtbGluZT0iODEiIGlkPSJsbmsxNCI+PHBhdGggY29kZUxpbmU9IjgxIiBkPSJNMjg3LjkzMDMsNTI0LjU5MjIgQzI5NC45MDAzLDU0Ny41OTIyIDI5Mi40MTQ0LDUzOS4zNTkxIDI5OC44MTQ0LDU2MC40OTkxIiBmaWxsPSJub25lIiBpZD0iJiMyNTkwMzsmIzI1MTczOyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5Oy0mIzI1OTAzOyYjMjUxNzM7JiMyMDEwNDsmIzIzNDUwOyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyODYuNzcwMiIgeDI9IjI4My41OCIgeTE9IjUyMC43NjQxIiB5Mj0iNTEwLjIzNjkiLz48ZWxsaXBzZSBjeD0iMjg2Ljc3MDIiIGN5PSI1MjAuNzY0MSIgZmlsbD0ibm9uZSIgcng9IjQiIHJ5PSI0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjI4MC45MTIiIHgyPSIyODguNTY4MiIgeTE9IjUxNS4yMjUiIHkyPSI1MTIuOTA0OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMDEuNzEyIiB4Mj0iMzA5Ljc3MjYiIHkxPSI1NzAuMDcwMSIgeTI9IjU3NS45ODgzIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjMwMS43MTIiIHgyPSIyOTguMjg3NCIgeTE9IjU3MC4wNzAxIiB5Mj0iNTc5LjQ2NTQiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzAxLjcxMiIgeDI9IjMwNC4wMyIgeTE9IjU3MC4wNzAxIiB5Mj0iNTc3LjcyNjkiLz48ZWxsaXBzZSBjeD0iMjk5Ljk3MzQiIGN5PSI1NjQuMzI3NSIgZmlsbD0ibm9uZSIgcng9IjQiIHJ5PSI0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjw/cGxhbnR1bWwtc3JjIGRMSEJKVzkxNER0dEFSVzBEbzJpckNJdUNJT1VXR005YUdxUjBvd1NaWjI0dG5XVEgzNGcyLThsNlAxMVh2enVjQVB3dTFQc0p1ekNxX29DQS1mTDVMTWxOYkxGQ2Z1eVllTDAtdTN5Wk1sTE5JRDNwZ3BqMHdaUDJDTUVhXzdhSUdaQTVIWVFTQXVKVjQtcTdqNi1Hb2FLRTNNUnUyNzFrTDBhaWh5TlpROW1FMFkyS1BIMGVHencxaGRFOHhyazg3aExmM2NKdGtjXzVsRVRwZGdFMS1tVjNPQXBsQlJOSzdYU3luTkFaakhBazFLVUVwbWU4aG9paUFSUFlzY3pZRVlkRmNhRnRFU0kxdG1TZDE0emMycUg0QUhhMGhqUktiaUhkaDR2MzFla2UtOWRvdUVGLXBmT2p2OEdiSHdySkh5aWVxaHgxaExwQ0VmMHNTRldNNG5NRnZfN0ZHa2lYcWN6bUNrZ2VuNWlVQTFCeTFGMXppQWVqNWZvRXdxRDB0aWtRSUpNSXNZV2hrVkY2XzFmRHFVSnp4ZVYzdlhEc1d1anJQWVJNbGRmTXRLYmtUTkFHd18zSm1ub0hWT1pnWTN1a2NKMGZwSjNsZjgxNWljUlAxRHhfMFVwdk1TV1MyM0N0NWRHQmRrMngyUFZZRFBRTTBXWmprSVhmakZYUzJBYkZnU3JjU2hUaHliU2pQb0RuSE45YUZoS3ZmQUxpcUpnWHM1anlhQmJuNmVRRm0wMD8+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_6">マイグレーション：支払関連テーブルの作成<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<details>
<summary>V017__create_payment_tables.sql</summary>

<div class="highlight"><pre><span></span><code><span class="c1">-- src/main/resources/db/migration/V017__create_payment_tables.sql</span>

<span class="c1">-- 支払ステータス</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TYPE</span><span class="w"> </span><span class="err">支払ステータス</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">ENUM</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;作成中&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;承認待ち&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;承認済&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;支払済&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;取消&#39;</span><span class="p">);</span>

<span class="c1">-- 支払方法に不足している値を追加（既存のENUMはV001で定義済み）</span>
<span class="k">ALTER</span><span class="w"> </span><span class="k">TYPE</span><span class="w"> </span><span class="err">支払方法</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span><span class="n">VALUE</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="s1">&#39;相殺&#39;</span><span class="p">;</span>
<span class="k">ALTER</span><span class="w"> </span><span class="k">TYPE</span><span class="w"> </span><span class="err">支払方法</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span><span class="n">VALUE</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="s1">&#39;電子記録債権&#39;</span><span class="p">;</span>

<span class="c1">-- 支払データ（ヘッダ）</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;支払データ&quot;</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="ss">&quot;ID&quot;</span><span class="w"> </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;支払番号&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;仕入先コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;支払締日&quot;</span><span class="w"> </span><span class="nb">DATE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;支払予定日&quot;</span><span class="w"> </span><span class="nb">DATE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;支払方法&quot;</span><span class="w"> </span><span class="err">支払方法</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;支払金額&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;消費税額&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;源泉徴収額&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;差引支払額&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;支払実行日&quot;</span><span class="w"> </span><span class="nb">DATE</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;ステータス&quot;</span><span class="w"> </span><span class="err">支払ステータス</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="s1">&#39;作成中&#39;</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;振込先銀行コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;振込先支店コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;振込先口座種別&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;振込先口座番号&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;振込先口座名義&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;備考&quot;</span><span class="w"> </span><span class="nb">TEXT</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;バージョン&quot;</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;作成日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;作成者&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;更新日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;更新者&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;fk_支払_仕入先&quot;</span>
<span class="w">        </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;仕入先コード&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;取引先マスタ&quot;</span><span class="p">(</span><span class="ss">&quot;取引先コード&quot;</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">-- 支払明細データ</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;支払明細データ&quot;</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="ss">&quot;ID&quot;</span><span class="w"> </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;支払ID&quot;</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;支払行番号&quot;</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;仕入番号&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;仕入日&quot;</span><span class="w"> </span><span class="nb">DATE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;仕入金額&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;消費税額&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;支払対象金額&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;作成日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;更新日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;fk_支払明細_支払&quot;</span>
<span class="w">        </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;支払ID&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;支払データ&quot;</span><span class="p">(</span><span class="ss">&quot;ID&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">DELETE</span><span class="w"> </span><span class="k">CASCADE</span><span class="p">,</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;fk_支払明細_仕入&quot;</span>
<span class="w">        </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;仕入番号&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;仕入データ&quot;</span><span class="p">(</span><span class="ss">&quot;仕入番号&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;uk_支払明細_支払_行&quot;</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;支払ID&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;支払行番号&quot;</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">-- 買掛金残高データ</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;買掛金残高データ&quot;</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="ss">&quot;ID&quot;</span><span class="w"> </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;仕入先コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;年月&quot;</span><span class="w"> </span><span class="nb">DATE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;前月残高&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;当月仕入高&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;当月支払高&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;当月残高&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;バージョン&quot;</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;作成日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;更新日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;fk_買掛金残高_仕入先&quot;</span>
<span class="w">        </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;仕入先コード&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;取引先マスタ&quot;</span><span class="p">(</span><span class="ss">&quot;取引先コード&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="k">UNIQUE</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;仕入先コード&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;年月&quot;</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">-- 支払予定データ</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;支払予定データ&quot;</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="ss">&quot;ID&quot;</span><span class="w"> </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;仕入先コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;支払予定日&quot;</span><span class="w"> </span><span class="nb">DATE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;支払予定額&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;支払方法&quot;</span><span class="w"> </span><span class="err">支払方法</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;支払済フラグ&quot;</span><span class="w"> </span><span class="nb">BOOLEAN</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">FALSE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;支払ID&quot;</span><span class="w"> </span><span class="nb">INTEGER</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;作成日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;更新日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;fk_支払予定_仕入先&quot;</span>
<span class="w">        </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;仕入先コード&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;取引先マスタ&quot;</span><span class="p">(</span><span class="ss">&quot;取引先コード&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;fk_支払予定_支払&quot;</span>
<span class="w">        </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;支払ID&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;支払データ&quot;</span><span class="p">(</span><span class="ss">&quot;ID&quot;</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">-- 当月残高を自動計算するトリガー</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="k">REPLACE</span><span class="w"> </span><span class="k">FUNCTION</span><span class="w"> </span><span class="n">calculate_payable_balance</span><span class="p">()</span>
<span class="k">RETURNS</span><span class="w"> </span><span class="k">TRIGGER</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="err">$$</span>
<span class="k">BEGIN</span>
<span class="w">    </span><span class="k">NEW</span><span class="p">.</span><span class="ss">&quot;当月残高&quot;</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="k">NEW</span><span class="p">.</span><span class="ss">&quot;前月残高&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">NEW</span><span class="p">.</span><span class="ss">&quot;当月仕入高&quot;</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="k">NEW</span><span class="p">.</span><span class="ss">&quot;当月支払高&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="k">RETURN</span><span class="w"> </span><span class="k">NEW</span><span class="p">;</span>
<span class="k">END</span><span class="p">;</span>
<span class="err">$$</span><span class="w"> </span><span class="k">LANGUAGE</span><span class="w"> </span><span class="n">plpgsql</span><span class="p">;</span>

<span class="k">CREATE</span><span class="w"> </span><span class="k">TRIGGER</span><span class="w"> </span><span class="n">trg_買掛金残高_残高計算</span>
<span class="w">    </span><span class="k">BEFORE</span><span class="w"> </span><span class="k">INSERT</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="k">UPDATE</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;買掛金残高データ&quot;</span>
<span class="w">    </span><span class="k">FOR</span><span class="w"> </span><span class="k">EACH</span><span class="w"> </span><span class="k">ROW</span>
<span class="w">    </span><span class="k">EXECUTE</span><span class="w"> </span><span class="k">FUNCTION</span><span class="w"> </span><span class="n">calculate_payable_balance</span><span class="p">();</span>

<span class="c1">-- インデックス</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_支払_仕入先コード&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;支払データ&quot;</span><span class="p">(</span><span class="ss">&quot;仕入先コード&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_支払_支払締日&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;支払データ&quot;</span><span class="p">(</span><span class="ss">&quot;支払締日&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_支払_支払予定日&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;支払データ&quot;</span><span class="p">(</span><span class="ss">&quot;支払予定日&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_支払_ステータス&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;支払データ&quot;</span><span class="p">(</span><span class="ss">&quot;ステータス&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_支払明細_仕入番号&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;支払明細データ&quot;</span><span class="p">(</span><span class="ss">&quot;仕入番号&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_買掛金残高_年月&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;買掛金残高データ&quot;</span><span class="p">(</span><span class="ss">&quot;年月&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_支払予定_支払予定日&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;支払予定データ&quot;</span><span class="p">(</span><span class="ss">&quot;支払予定日&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_支払予定_支払済&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;支払予定データ&quot;</span><span class="p">(</span><span class="ss">&quot;支払済フラグ&quot;</span><span class="p">);</span>

<span class="c1">-- テーブルコメント</span>
<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;支払データ&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;支払締処理で作成される支払ヘッダ情報&#39;</span><span class="p">;</span>
<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;支払明細データ&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;支払データと仕入データの紐付け&#39;</span><span class="p">;</span>
<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;買掛金残高データ&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;仕入先別・月次の買掛金残高&#39;</span><span class="p">;</span>
<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;支払予定データ&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;支払スケジュールの管理&#39;</span><span class="p">;</span>
<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="ss">&quot;支払データ&quot;</span><span class="p">.</span><span class="ss">&quot;バージョン&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;楽観ロック用バージョン番号&#39;</span><span class="p">;</span>
<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="ss">&quot;買掛金残高データ&quot;</span><span class="p">.</span><span class="ss">&quot;バージョン&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;楽観ロック用バージョン番号&#39;</span><span class="p">;</span>
</code></pre></div>

</details>

<h3 id="_7">支払関連エンティティの実装<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<details>
<summary>支払ステータス ENUM</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/sms/domain/model/payment/PaymentStatus.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.sms.domain.model.payment</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Getter</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>

<span class="nd">@Getter</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">enum</span><span class="w"> </span><span class="n">PaymentStatus</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">DRAFT</span><span class="p">(</span><span class="s">&quot;作成中&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">PENDING_APPROVAL</span><span class="p">(</span><span class="s">&quot;承認待ち&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">APPROVED</span><span class="p">(</span><span class="s">&quot;承認済&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">PAID</span><span class="p">(</span><span class="s">&quot;支払済&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">CANCELLED</span><span class="p">(</span><span class="s">&quot;取消&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">displayName</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">PaymentStatus</span><span class="w"> </span><span class="nf">fromDisplayName</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">displayName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">PaymentStatus</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">values</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">status</span><span class="p">.</span><span class="na">displayName</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">displayName</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">status</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;Unknown payment status: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">displayName</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 承認可能なステータスかどうか.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">canApprove</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">PENDING_APPROVAL</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 支払実行可能なステータスかどうか.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">canExecute</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">APPROVED</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 取消可能なステータスかどうか.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">canCancel</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">DRAFT</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">PENDING_APPROVAL</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>支払方法 ENUM</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/sms/domain/model/payment/PaymentMethod.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.sms.domain.model.payment</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Getter</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>

<span class="nd">@Getter</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">enum</span><span class="w"> </span><span class="n">PaymentMethod</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">BANK_TRANSFER</span><span class="p">(</span><span class="s">&quot;振込&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">BILL</span><span class="p">(</span><span class="s">&quot;手形&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">CASH</span><span class="p">(</span><span class="s">&quot;現金&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">OFFSET</span><span class="p">(</span><span class="s">&quot;相殺&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">ELECTRONIC_RECORD</span><span class="p">(</span><span class="s">&quot;電子記録債権&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">displayName</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">PaymentMethod</span><span class="w"> </span><span class="nf">fromDisplayName</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">displayName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">PaymentMethod</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">values</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">method</span><span class="p">.</span><span class="na">displayName</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">displayName</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">method</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;Unknown payment method: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">displayName</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 振込先情報が必要かどうか.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">requiresBankInfo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">BANK_TRANSFER</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>支払データエンティティ</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/sms/domain/model/payment/Payment.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.sms.domain.model.payment</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.AllArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Builder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.NoArgsConstructor</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.ArrayList</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Payment</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">paymentNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">supplierCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">paymentClosingDate</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">paymentDueDate</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">PaymentMethod</span><span class="w"> </span><span class="n">paymentMethod</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">paymentAmount</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">taxAmount</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">withholdingAmount</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">netPaymentAmount</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">paymentExecutionDate</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">PaymentStatus</span><span class="w"> </span><span class="n">status</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">bankCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">branchCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">accountType</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">accountNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">accountName</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">remarks</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">createdAt</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">createdBy</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">updatedAt</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">updatedBy</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Builder.Default</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Builder.Default</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">PaymentDetail</span><span class="o">&gt;</span><span class="w"> </span><span class="n">details</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 明細の合計金額を計算.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="nf">calculateTotalAmount</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">details</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">details</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">details</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">PaymentDetail</span><span class="p">::</span><span class="n">getPaymentTargetAmount</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">reduce</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">,</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">::</span><span class="n">add</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 差引支払額を計算.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="nf">calculateNetAmount</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">wh</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">withholdingAmount</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">withholdingAmount</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">paymentAmount</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">taxAmount</span><span class="p">).</span><span class="na">subtract</span><span class="p">(</span><span class="n">wh</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 承認申請.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">submitForApproval</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">status</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">PaymentStatus</span><span class="p">.</span><span class="na">DRAFT</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalStateException</span><span class="p">(</span><span class="s">&quot;作成中ステータスのみ承認申請が可能です&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PaymentStatus</span><span class="p">.</span><span class="na">PENDING_APPROVAL</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 承認.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">approve</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="na">status</span><span class="p">.</span><span class="na">canApprove</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalStateException</span><span class="p">(</span>
<span class="w">                    </span><span class="s">&quot;このステータスでは承認できません: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">status</span><span class="p">.</span><span class="na">getDisplayName</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PaymentStatus</span><span class="p">.</span><span class="na">APPROVED</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 支払実行.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="n">LocalDate</span><span class="w"> </span><span class="n">executionDate</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="na">status</span><span class="p">.</span><span class="na">canExecute</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalStateException</span><span class="p">(</span>
<span class="w">                    </span><span class="s">&quot;このステータスでは支払実行できません: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">status</span><span class="p">.</span><span class="na">getDisplayName</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">paymentExecutionDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">executionDate</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PaymentStatus</span><span class="p">.</span><span class="na">PAID</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 取消.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">cancel</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="na">status</span><span class="p">.</span><span class="na">canCancel</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalStateException</span><span class="p">(</span>
<span class="w">                    </span><span class="s">&quot;このステータスでは取消できません: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">status</span><span class="p">.</span><span class="na">getDisplayName</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PaymentStatus</span><span class="p">.</span><span class="na">CANCELLED</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>支払明細データエンティティ</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/sms/domain/model/payment/PaymentDetail.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.sms.domain.model.payment</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.AllArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Builder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.NoArgsConstructor</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>

<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">PaymentDetail</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">paymentId</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">lineNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">purchaseNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">purchaseDate</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">purchaseAmount</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">taxAmount</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">paymentTargetAmount</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">createdAt</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">updatedAt</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>買掛金残高データエンティティ</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/sms/domain/model/payment/PayableBalance.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.sms.domain.model.payment</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.AllArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Builder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.NoArgsConstructor</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>

<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">PayableBalance</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">supplierCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">yearMonth</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">previousBalance</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">currentPurchaseAmount</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">currentPaymentAmount</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">currentBalance</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">createdAt</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">updatedAt</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Builder.Default</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 残高を計算.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="nf">calculateBalance</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">previousBalance</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">previousBalance</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">;</span>
<span class="w">        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">purchase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">currentPurchaseAmount</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">currentPurchaseAmount</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">;</span>
<span class="w">        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">payment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">currentPaymentAmount</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">currentPaymentAmount</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">prev</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">purchase</span><span class="p">).</span><span class="na">subtract</span><span class="p">(</span><span class="n">payment</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 仕入を加算.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">addPurchase</span><span class="p">(</span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">amount</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">currentPurchaseAmount</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">currentPurchaseAmount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">currentPurchaseAmount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">currentPurchaseAmount</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">amount</span><span class="p">);</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">currentBalance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculateBalance</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 支払を加算.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">addPayment</span><span class="p">(</span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">amount</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">currentPaymentAmount</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">currentPaymentAmount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">currentPaymentAmount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">currentPaymentAmount</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">amount</span><span class="p">);</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">currentBalance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculateBalance</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>支払予定データエンティティ</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/sms/domain/model/payment/PaymentSchedule.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.sms.domain.model.payment</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.AllArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Builder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.NoArgsConstructor</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>

<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">PaymentSchedule</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">supplierCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">paymentDueDate</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">scheduledAmount</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">PaymentMethod</span><span class="w"> </span><span class="n">paymentMethod</span><span class="p">;</span>
<span class="w">    </span><span class="nd">@Builder.Default</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Boolean</span><span class="w"> </span><span class="n">paidFlag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">paymentId</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">createdAt</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">updatedAt</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 支払済みとしてマーク.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">markAsPaid</span><span class="p">(</span><span class="n">Integer</span><span class="w"> </span><span class="n">paymentId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">paidFlag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">paymentId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">paymentId</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 支払期限が過ぎているかどうか.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isOverdue</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="o">!</span><span class="n">paidFlag</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">now</span><span class="p">().</span><span class="na">isAfter</span><span class="p">(</span><span class="n">paymentDueDate</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="_8">支払サービスの実装（参考実装例）<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<blockquote>
<p><strong>Note</strong>: 以下のサービス層のコードは参考実装例です。現在はリポジトリ層（永続化層）が実装済みで、アプリケーションサービス層は別途実装が必要です。</p>
</blockquote>
<details>
<summary>支払サービス</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/sms/application/service/PaymentService.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.sms.application.service</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sms.domain.model.partner.Partner</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sms.domain.model.payment.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sms.domain.model.purchase.Purchase</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sms.infrastructure.out.persistence.mapper.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Service</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.transaction.annotation.Transactional</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.format.DateTimeFormatter</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.ArrayList</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="nd">@Service</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">PaymentService</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">PaymentMapper</span><span class="w"> </span><span class="n">paymentMapper</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">PaymentDetailMapper</span><span class="w"> </span><span class="n">paymentDetailMapper</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">PayableBalanceMapper</span><span class="w"> </span><span class="n">payableBalanceMapper</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">PartnerMapper</span><span class="w"> </span><span class="n">partnerMapper</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">PurchaseMapper</span><span class="w"> </span><span class="n">purchaseMapper</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 支払番号を生成</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">generatePaymentNumber</span><span class="p">(</span><span class="n">LocalDate</span><span class="w"> </span><span class="n">closingDate</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;PAY-&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">closingDate</span><span class="p">.</span><span class="na">format</span><span class="p">(</span>
<span class="w">                </span><span class="n">DateTimeFormatter</span><span class="p">.</span><span class="na">ofPattern</span><span class="p">(</span><span class="s">&quot;yyyyMM&quot;</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;-&quot;</span><span class="p">;</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">latestNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">paymentMapper</span><span class="p">.</span><span class="na">findLatestPaymentNumber</span><span class="p">(</span><span class="n">prefix</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;%&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">sequence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">latestNumber</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">currentSequence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Integer</span><span class="p">.</span><span class="na">parseInt</span><span class="p">(</span>
<span class="w">                    </span><span class="n">latestNumber</span><span class="p">.</span><span class="na">substring</span><span class="p">(</span><span class="n">latestNumber</span><span class="p">.</span><span class="na">length</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">4</span><span class="p">));</span>
<span class="w">            </span><span class="n">sequence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">currentSequence</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">prefix</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;%04d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">sequence</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 支払予定日を計算</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="nf">calculatePaymentDueDate</span><span class="p">(</span><span class="n">LocalDate</span><span class="w"> </span><span class="n">closingDate</span><span class="p">,</span>
<span class="w">                                               </span><span class="n">Partner</span><span class="w"> </span><span class="n">supplier</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 締日の翌月から支払月数分を加算</span>
<span class="w">        </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">baseDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">closingDate</span><span class="p">.</span><span class="na">plusMonths</span><span class="p">(</span><span class="n">supplier</span><span class="p">.</span><span class="na">getPaymentMonth</span><span class="p">());</span>

<span class="w">        </span><span class="c1">// 支払日を設定</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">paymentDay</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">supplier</span><span class="p">.</span><span class="na">getPaymentDay</span><span class="p">();</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">maxDay</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">baseDate</span><span class="p">.</span><span class="na">lengthOfMonth</span><span class="p">();</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">paymentDay</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">maxDay</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">paymentDay</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">maxDay</span><span class="p">;</span><span class="w"> </span><span class="c1">// 月末処理</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">baseDate</span><span class="p">.</span><span class="na">getYear</span><span class="p">(),</span><span class="w"> </span><span class="n">baseDate</span><span class="p">.</span><span class="na">getMonth</span><span class="p">(),</span><span class="w"> </span><span class="n">paymentDay</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 支払締処理を実行</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Payment</span><span class="w"> </span><span class="nf">processPaymentClosing</span><span class="p">(</span><span class="n">PaymentClosingInput</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 仕入先情報を取得</span>
<span class="w">        </span><span class="n">Partner</span><span class="w"> </span><span class="n">supplier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">partnerMapper</span><span class="p">.</span><span class="na">findByPartnerCode</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="na">getSupplierCode</span><span class="p">());</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">supplier</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span>
<span class="w">                    </span><span class="s">&quot;仕入先が見つかりません: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="na">getSupplierCode</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// 対象仕入データを取得（前回締日翌日～今回締日）</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Purchase</span><span class="o">&gt;</span><span class="w"> </span><span class="n">purchases</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">purchaseMapper</span><span class="p">.</span><span class="na">findBySupplierAndDateRange</span><span class="p">(</span>
<span class="w">                </span><span class="n">input</span><span class="p">.</span><span class="na">getSupplierCode</span><span class="p">(),</span>
<span class="w">                </span><span class="n">input</span><span class="p">.</span><span class="na">getFromDate</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span>
<span class="w">                        </span><span class="o">?</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="na">getFromDate</span><span class="p">()</span>
<span class="w">                        </span><span class="p">:</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">1900</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span>
<span class="w">                </span><span class="n">input</span><span class="p">.</span><span class="na">getClosingDate</span><span class="p">()</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">purchases</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalStateException</span><span class="p">(</span>
<span class="w">                    </span><span class="s">&quot;対象となる仕入データがありません&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// 支払データを作成</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">paymentNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">generatePaymentNumber</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="na">getClosingDate</span><span class="p">());</span>
<span class="w">        </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">paymentDueDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculatePaymentDueDate</span><span class="p">(</span>
<span class="w">                </span><span class="n">input</span><span class="p">.</span><span class="na">getClosingDate</span><span class="p">(),</span><span class="w"> </span><span class="n">supplier</span><span class="p">);</span>

<span class="w">        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">totalAmount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">;</span>
<span class="w">        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">totalTax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">;</span>

<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">PaymentDetail</span><span class="o">&gt;</span><span class="w"> </span><span class="n">details</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">detailNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Purchase</span><span class="w"> </span><span class="n">purchase</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">purchases</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">totalAmount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">totalAmount</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">purchase</span><span class="p">.</span><span class="na">getPurchaseAmount</span><span class="p">());</span>
<span class="w">            </span><span class="n">totalTax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">totalTax</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">purchase</span><span class="p">.</span><span class="na">getTaxAmount</span><span class="p">());</span>

<span class="w">            </span><span class="n">PaymentDetail</span><span class="w"> </span><span class="n">detail</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PaymentDetail</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">paymentNumber</span><span class="p">(</span><span class="n">paymentNumber</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">detailNumber</span><span class="p">(</span><span class="n">detailNumber</span><span class="o">++</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">purchaseNumber</span><span class="p">(</span><span class="n">purchase</span><span class="p">.</span><span class="na">getPurchaseNumber</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">purchaseDate</span><span class="p">(</span><span class="n">purchase</span><span class="p">.</span><span class="na">getPurchaseDate</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">purchaseAmount</span><span class="p">(</span><span class="n">purchase</span><span class="p">.</span><span class="na">getPurchaseAmount</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">taxAmount</span><span class="p">(</span><span class="n">purchase</span><span class="p">.</span><span class="na">getTaxAmount</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">paymentTargetAmount</span><span class="p">(</span><span class="n">purchase</span><span class="p">.</span><span class="na">getTotalAmount</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">            </span><span class="n">details</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">detail</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">withholdingAmount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="na">getWithholdingAmount</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span>
<span class="w">                </span><span class="o">?</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="na">getWithholdingAmount</span><span class="p">()</span>
<span class="w">                </span><span class="p">:</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">;</span>
<span class="w">        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">netAmount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">totalAmount</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">totalTax</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">subtract</span><span class="p">(</span><span class="n">withholdingAmount</span><span class="p">);</span>

<span class="w">        </span><span class="n">Payment</span><span class="w"> </span><span class="n">payment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Payment</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">paymentNumber</span><span class="p">(</span><span class="n">paymentNumber</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">supplierCode</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="na">getSupplierCode</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">paymentClosingDate</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="na">getClosingDate</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">paymentDueDate</span><span class="p">(</span><span class="n">paymentDueDate</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">paymentMethod</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="na">getPaymentMethod</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">paymentAmount</span><span class="p">(</span><span class="n">totalAmount</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">taxAmount</span><span class="p">(</span><span class="n">totalTax</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">withholdingAmount</span><span class="p">(</span><span class="n">withholdingAmount</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">netPaymentAmount</span><span class="p">(</span><span class="n">netAmount</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">status</span><span class="p">(</span><span class="n">PaymentStatus</span><span class="p">.</span><span class="na">DRAFT</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">bankCode</span><span class="p">(</span><span class="n">supplier</span><span class="p">.</span><span class="na">getBankCode</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">branchCode</span><span class="p">(</span><span class="n">supplier</span><span class="p">.</span><span class="na">getBranchCode</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">accountType</span><span class="p">(</span><span class="n">supplier</span><span class="p">.</span><span class="na">getAccountType</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">accountNumber</span><span class="p">(</span><span class="n">supplier</span><span class="p">.</span><span class="na">getAccountNumber</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">accountName</span><span class="p">(</span><span class="n">supplier</span><span class="p">.</span><span class="na">getAccountName</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">        </span><span class="n">paymentMapper</span><span class="p">.</span><span class="na">insert</span><span class="p">(</span><span class="n">payment</span><span class="p">);</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">PaymentDetail</span><span class="w"> </span><span class="n">detail</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">details</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">paymentDetailMapper</span><span class="p">.</span><span class="na">insert</span><span class="p">(</span><span class="n">detail</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">payment</span><span class="p">.</span><span class="na">setDetails</span><span class="p">(</span><span class="n">details</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">payment</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 承認申請</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">submitForApproval</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">paymentNumber</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Payment</span><span class="w"> </span><span class="n">payment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">paymentMapper</span><span class="p">.</span><span class="na">findByPaymentNumber</span><span class="p">(</span><span class="n">paymentNumber</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">payment</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span>
<span class="w">                    </span><span class="s">&quot;支払データが見つかりません: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">paymentNumber</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">payment</span><span class="p">.</span><span class="na">submitForApproval</span><span class="p">();</span>
<span class="w">        </span><span class="n">paymentMapper</span><span class="p">.</span><span class="na">updateStatus</span><span class="p">(</span><span class="n">paymentNumber</span><span class="p">,</span><span class="w"> </span><span class="n">PaymentStatus</span><span class="p">.</span><span class="na">PENDING_APPROVAL</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 承認</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">approve</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">paymentNumber</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Payment</span><span class="w"> </span><span class="n">payment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">paymentMapper</span><span class="p">.</span><span class="na">findByPaymentNumber</span><span class="p">(</span><span class="n">paymentNumber</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">payment</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span>
<span class="w">                    </span><span class="s">&quot;支払データが見つかりません: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">paymentNumber</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">payment</span><span class="p">.</span><span class="na">approve</span><span class="p">();</span>
<span class="w">        </span><span class="n">paymentMapper</span><span class="p">.</span><span class="na">updateStatus</span><span class="p">(</span><span class="n">paymentNumber</span><span class="p">,</span><span class="w"> </span><span class="n">PaymentStatus</span><span class="p">.</span><span class="na">APPROVED</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 支払実行</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">executePayment</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">paymentNumber</span><span class="p">,</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">executionDate</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Payment</span><span class="w"> </span><span class="n">payment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">paymentMapper</span><span class="p">.</span><span class="na">findByPaymentNumber</span><span class="p">(</span><span class="n">paymentNumber</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">payment</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span>
<span class="w">                    </span><span class="s">&quot;支払データが見つかりません: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">paymentNumber</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">payment</span><span class="p">.</span><span class="na">execute</span><span class="p">(</span><span class="n">executionDate</span><span class="p">);</span>
<span class="w">        </span><span class="n">paymentMapper</span><span class="p">.</span><span class="na">executePayment</span><span class="p">(</span><span class="n">paymentNumber</span><span class="p">,</span><span class="w"> </span><span class="n">executionDate</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// 買掛金残高を更新</span>
<span class="w">        </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">yearMonth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">                </span><span class="n">executionDate</span><span class="p">.</span><span class="na">getYear</span><span class="p">(),</span><span class="w"> </span><span class="n">executionDate</span><span class="p">.</span><span class="na">getMonth</span><span class="p">(),</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="w">        </span><span class="n">payableBalanceMapper</span><span class="p">.</span><span class="na">addPayment</span><span class="p">(</span>
<span class="w">                </span><span class="n">payment</span><span class="p">.</span><span class="na">getSupplierCode</span><span class="p">(),</span><span class="w"> </span><span class="n">yearMonth</span><span class="p">,</span><span class="w"> </span><span class="n">payment</span><span class="p">.</span><span class="na">getNetPaymentAmount</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 支払取消</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">cancelPayment</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">paymentNumber</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Payment</span><span class="w"> </span><span class="n">payment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">paymentMapper</span><span class="p">.</span><span class="na">findByPaymentNumber</span><span class="p">(</span><span class="n">paymentNumber</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">payment</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span>
<span class="w">                    </span><span class="s">&quot;支払データが見つかりません: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">paymentNumber</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">payment</span><span class="p">.</span><span class="na">cancel</span><span class="p">();</span>
<span class="w">        </span><span class="n">paymentMapper</span><span class="p">.</span><span class="na">updateStatus</span><span class="p">(</span><span class="n">paymentNumber</span><span class="p">,</span><span class="w"> </span><span class="n">PaymentStatus</span><span class="p">.</span><span class="na">CANCELLED</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 買掛金残高を取得</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">PayableBalance</span><span class="w"> </span><span class="nf">getPayableBalance</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">supplierCode</span><span class="p">,</span>
<span class="w">                                             </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">yearMonth</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">payableBalanceMapper</span><span class="p">.</span><span class="na">findBySupplierAndYearMonth</span><span class="p">(</span>
<span class="w">                </span><span class="n">supplierCode</span><span class="p">,</span><span class="w"> </span><span class="n">yearMonth</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 月次の買掛金合計を取得</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="nf">getTotalPayableByMonth</span><span class="p">(</span><span class="n">LocalDate</span><span class="w"> </span><span class="n">yearMonth</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">payableBalanceMapper</span><span class="p">.</span><span class="na">sumCurrentBalanceByYearMonth</span><span class="p">(</span><span class="n">yearMonth</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 買掛金残高を初期化（月次繰越）</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">PayableBalance</span><span class="w"> </span><span class="nf">initializePayableBalance</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">supplierCode</span><span class="p">,</span>
<span class="w">                                                    </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">yearMonth</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 前月残高を取得</span>
<span class="w">        </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">previousMonth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">yearMonth</span><span class="p">.</span><span class="na">minusMonths</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">        </span><span class="n">PayableBalance</span><span class="w"> </span><span class="n">previousBalance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">payableBalanceMapper</span>
<span class="w">                </span><span class="p">.</span><span class="na">findBySupplierAndYearMonth</span><span class="p">(</span><span class="n">supplierCode</span><span class="p">,</span><span class="w"> </span><span class="n">previousMonth</span><span class="p">);</span>

<span class="w">        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">carryOver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">previousBalance</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">carryOver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">previousBalance</span><span class="p">.</span><span class="na">getCurrentBalance</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">PayableBalance</span><span class="w"> </span><span class="n">newBalance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PayableBalance</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">supplierCode</span><span class="p">(</span><span class="n">supplierCode</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">yearMonth</span><span class="p">(</span><span class="n">yearMonth</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">previousBalance</span><span class="p">(</span><span class="n">carryOver</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">currentPurchaseAmount</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">currentPaymentAmount</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">        </span><span class="n">payableBalanceMapper</span><span class="p">.</span><span class="na">insert</span><span class="p">(</span><span class="n">newBalance</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">newBalance</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>支払締処理の入力クラス</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/sms/application/service/PaymentClosingInput.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.sms.application.service</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sms.domain.model.payment.PaymentMethod</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Builder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>

<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">PaymentClosingInput</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">supplierCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">closingDate</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">fromDate</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">PaymentMethod</span><span class="w"> </span><span class="n">paymentMethod</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">withholdingAmount</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h2 id="102">10.2 リレーションと楽観ロックの設計<a class="headerlink" href="#102" title="Permanent link">&para;</a></h2>
<h3 id="mybatis-resultmap">MyBatis ネストした ResultMap による関連付け<a class="headerlink" href="#mybatis-resultmap" title="Permanent link">&para;</a></h3>
<p>支払データは、支払（ヘッダ）→ 支払明細の2層構造を持ちます。N+1 問題を回避するため、JOIN クエリで一括取得します。</p>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjMzOHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NjA1cHg7aGVpZ2h0OjMzOHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDYwNSAzMzgiIHdpZHRoPSI2MDVweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPk4rMSAmIzIxODM5OyYjMzg5ODg7JiMxMjM5ODsmIzIyMjM4OyYjMzY5OTE7PC90aXRsZT48ZGVmcy8+PGc+PGcgY2xhc3M9InRpdGxlIiBkYXRhLXNvdXJjZS1saW5lPSIxIj48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA4LjA2MjIiIHg9IjI0MS40Njg5IiB5PSIyMi45OTUxIj5OKzEgJiMyMTgzOTsmIzM4OTg4OyYjMTIzOTg7JiMyMjIzODsmIzM2OTkxOzwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgTisxID8/Pz8/Pz8tLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iTi4xIC4uLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjMiIGlkPSJlbnQwMDAyIj48cmVjdCBmaWxsPSIjRkZDQ0NDIiBoZWlnaHQ9IjI3Mi4zNyIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjI3MiIgeD0iNyIgeT0iNjAuNTk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzYuMDYyMSIgeD0iNzQuOTY5IiB5PSI3NS41OTIiPk4rMSAmIzIxODM5OyYjMzg5ODg7JiM2NTI4ODsmIzM4NzUwOyYjMjExNzc7JiMyOTU3NTsmIzY1Mjg5OzwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgPz8/P0pPSU4/Pz8/Pz8/LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Ii4uLi5KT0lOLi4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iOCIgaWQ9ImVudDAwMDUiPjxyZWN0IGZpbGw9IiNDQ0ZGQ0MiIGhlaWdodD0iMTM4LjQ4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMjk2IiB4PSIzMDMiIHk9IjQ0LjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTg4LjAzNTUiIHg9IjM1Ni45ODIzIiB5PSI1OS4yOTIiPiYjMzUyOTk7JiMyNzc3MDsmIzMxNTc0OyYjNjUzMDY7Sk9JTiYjMTIzOTU7JiMxMjQyNDsmIzEyNDI3OyYjMTk5Njg7JiMyNTMyNDsmIzIxNDYyOyYjMjQ0NzE7PC90ZXh0PjwvZz48IS0tZW50aXR5IHExLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iTi4xIC4uLi4uLi4ucTEiIGRhdGEtc291cmNlLWxpbmU9IjQiIGlkPSJlbnQwMDAzIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjU0Ljg5MDYiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjIxMi44MzQ3IiB4PSIzNi41OCIgeT0iOTUuNTk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNS44MDcyIiB4PSI0Ni41OCIgeT0iMTExLjU5MiI+MS4gJiMyNTkwMzsmIzI1MTczOyYjMTI1MDQ7JiMxMjQ4MzsmIzEyNDgwOyYjMjE0NjI7JiMyNDQ3MTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTgzLjkzNDMiIHg9IjU1LjQ4MDQiIHk9IjEyNy44ODg5Ij5TRUxFQ1QgKiBGUk9NICYjMjU5MDM7JiMyNTE3MzsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzMuODMxIiB4PSI1NS40ODA0IiB5PSIxNDQuMTg1NyI+KDEmIzIyMjM4Oyk8L3RleHQ+PC9nPjwhLS1lbnRpdHkgcTItLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJOLjEgLi4uLi4uLi5xMiIgZGF0YS1zb3VyY2UtbGluZT0iNSIgaWQ9ImVudDAwMDQiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNzEuMTg3NSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMjQwLjgzNDUiIHg9IjIyLjU4IiB5PSIyNDUuNzc2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyOS44MDcxIiB4PSIzMi41OCIgeT0iMjYxLjc3MiI+Mi4gJiMyMTUwODsmIzI1OTAzOyYjMjUxNzM7JiMxMjM5ODsmIzI2MTI2OyYjMzIwNDg7JiMyMTQ2MjsmIzI0NDcxOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMTEuOTM0MSIgeD0iNDEuNDgwNCIgeT0iMjc4LjA2ODkiPlNFTEVDVCAqIEZST00gJiMyNTkwMzsmIzI1MTczOyYjMjYxMjY7JiMzMjA0ODsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQwLjMwMDUiIHg9IjQxLjQ4MDQiIHk9IjI5NC4zNjU3Ij5XSEVSRSAmIzI1OTAzOyYjMjUxNzM7JiMzMDA1ODsmIzIxNDk1OyA9ID88L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzUuMzk2NCIgeD0iNDEuNDgwNCIgeT0iMzEwLjY2MjYiPihOJiMyMjIzODspPC90ZXh0PjwvZz48IS0tZW50aXR5IHNvbC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Ii4uLi5KT0lOLi4uLi4uLi5zb2wiIGRhdGEtc291cmNlLWxpbmU9IjkiIGlkPSJlbnQwMDA2Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9Ijg3LjQ4NDQiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjI2NC43NjcyIiB4PSIzMTguNjIiIHk9Ijc5LjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjIuNjU2OSIgeD0iMzI4LjYyIiB5PSI5NS4yOTIiPjEmIzIyMjM4OyYjMTIzOTg7Sk9JTiYjMTI0NjM7JiMxMjQ1NjsmIzEyNTIyOyYjMTIzOTE7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk3Ljk5OTYiIHg9IjMyOC42MiIgeT0iMTExLjU4ODkiPiYjMjA4NDA7JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7JiMxMjQzNDsmIzIxNDYyOyYjMjQ0NzE7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNS42MTYyIiB4PSIzMzcuNTIwNCIgeT0iMTI3Ljg4NTciPlNFTEVDVCBwLiosIHBkLio8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTI4LjY2NTciIHg9IjMzNy41MjA0IiB5PSIxNDQuMTgyNiI+RlJPTSAmIzI1OTAzOyYjMjUxNzM7JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7IHA8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjM1Ljg2NjgiIHg9IjMzNy41MjA0IiB5PSIxNjAuNDc5NSI+TEVGVCBKT0lOICYjMjU5MDM7JiMyNTE3MzsmIzI2MTI2OyYjMzIwNDg7JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7IHBkIE9OIC4uLjwvdGV4dD48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iR01OOCIgZGF0YS1zb3VyY2UtbGluZT0iMTQiIGlkPSJlbnQwMDA5Ij48cGF0aCBkPSJNMjk4LjczLDI2MS4yMzY5IEwyOTguNzMsMjc3LjM3NjkgTDI2My42LDI4MS4zNzY5IEwyOTguNzMsMjg1LjM3NjkgTDI5OC43MywzMDEuNTAyNSBBMCwwIDAgMCAwIDI5OC43MywzMDEuNTAyNSBMNDUzLjI3MjEsMzAxLjUwMjUgQTAsMCAwIDAgMCA0NTMuMjcyMSwzMDEuNTAyNSBMNDUzLjI3MjEsMjcxLjIzNjkgTDQ0My4yNzIxLDI2MS4yMzY5IEwyOTguNzMsMjYxLjIzNjkgQTAsMCAwIDAgMCAyOTguNzMsMjYxLjIzNjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik00NDMuMjcyMSwyNjEuMjM2OSBMNDQzLjI3MjEsMjcxLjIzNjkgTDQ1My4yNzIxLDI3MS4yMzY5IEw0NDMuMjcyMSwyNjEuMjM2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTIwLjU0MjEiIHg9IjMwNC43MyIgeT0iMjc4LjMwMzgiPjEwJiMyMDIxNDsmIzEyMzk4OyYjMjU5MDM7JiMyNTE3MzsmIzEyMzY0OyYjMTIzNTQ7JiMxMjQyODsmIzEyNDAwOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzMuNTQyMSIgeD0iMzA0LjczIiB5PSIyOTMuNDM2NiI+JiMyMTUxMjsmIzM1MzM2OzExJiMyMjIzODsmIzEyMzk4OyYjMTI0NjM7JiMxMjQ1NjsmIzEyNTIyOyYjMzAzMzA7JiMzNDg5Mjs8L3RleHQ+PC9nPjwhLS1saW5rIHExIHRvIHEyLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDMiIGRhdGEtZW50aXR5LTI9ImVudDAwMDQiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSIxMiIgaWQ9ImxuazciPjxwYXRoIGQ9Ik0xNDMsMTUwLjkxNjkgQzE0MywxNzcuMDE2OSAxNDMsMjEwLjc4NjkgMTQzLDIzOS4zNDY5IiBmaWxsPSJub25lIiBpZD0icTEtdG8tcTIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE0MywyNDUuMzQ2OSwxNDcsMjM2LjM0NjksMTQzLDI0MC4zNDY5LDEzOSwyMzYuMzQ2OSwxNDMsMjQ1LjM0NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMi43MjQ2IiB4PSIxNDQiIHk9IjIxMS44NDM4Ij5OJiMyMDIxNDs8L3RleHQ+PC9nPjw/cGxhbnR1bWwtc3JjIFZQOURJbTlINThSdHlvaUVqWWRCZU40UEwwaVBnUjBISjZaWkhqSENhRjVoVFg0dUNxTVFlWDlmTFlIODJ5TEEzUThGYV9tbnJwa1pBX3oyei1nV0lEOVR0Q0x2cHR0RlVMd2s1OUIyMEgxTUVTMzVfQjJRSE44SnRyVTZTZXpYdVc2VnYxTTNIM1JEejU0dEROb2V1Q2lsRk5TbndnUERpNkl0c3lZMTR5UmRaVmwxbkI2V05SVXFUMTZmUFFJZ0k0dFlWMGRfdDdYNFcwRlVtVGxTTzBReG94YV9SUmowUVhTZkZUZ21wOTdYQW9SbTlZMzY2T1BNNWQzWHA2WU1jcmV2Zngtcl9fVVN6Q212Ny14bUJqd0d6TTgzdnB6VzR4UjdDdU5QSjJqcEVpU3pnM3JnaG50emZKSmd0a3F2VG1LYUZvNGJYUEhDX3BFZlBQdWRNdjBDUjNRUW1ZbTN1YVhNN1J6R01hWWY4eE0xdjlmN25FVnJ3TFA4a1ZmMzRNTkRRbjNyaXNQUU1uR0lIQWRZdUVya2VFd0JVT2EzRTBMV01OUENiT1k0QUxRQzB1amJZcDMyMVdaenh0VDZaNFcxWThVMm5uOTRaWVd4anF4QUQ2OFpRXzhQNUFJR2t5dFdHY2ZHSnQ0NnMxSEFsLXFDZ2JhYzhGZzFrbHEyPz48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<details>
<summary>支払データのリレーション設定（PaymentMapper.xml）</summary>

<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="cp">&lt;!DOCTYPE mapper</span>
<span class="cp">        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
<span class="cp">        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span>
<span class="nt">&lt;mapper</span><span class="w"> </span><span class="na">namespace=</span><span class="s">&quot;com.example.sms.infrastructure.out.persistence.mapper.PaymentMapper&quot;</span><span class="nt">&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- 支払（ヘッダ）の ResultMap --&gt;</span>
<span class="w">    </span><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;PaymentWithDetailsResultMap&quot;</span>
<span class="w">               </span><span class="na">type=</span><span class="s">&quot;com.example.sms.domain.model.payment.Payment&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;p_id&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;paymentNumber&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;p_支払番号&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;supplierCode&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;p_仕入先コード&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;paymentClosingDate&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;p_支払締日&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;paymentDueDate&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;p_支払予定日&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;paymentMethod&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;p_支払方法&quot;</span>
<span class="w">                </span><span class="na">typeHandler=</span><span class="s">&quot;com.example.sms.infrastructure.out.persistence.typehandler.PaymentMethodTypeHandler&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;paymentAmount&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;p_支払金額&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;taxAmount&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;p_消費税額&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;withholdingAmount&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;p_源泉徴収額&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;netPaymentAmount&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;p_差引支払額&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;paymentExecutionDate&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;p_支払実行日&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;status&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;p_ステータス&quot;</span>
<span class="w">                </span><span class="na">typeHandler=</span><span class="s">&quot;com.example.sms.infrastructure.out.persistence.typehandler.PaymentStatusTypeHandler&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;version&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;p_バージョン&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;createdAt&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;p_作成日時&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;updatedAt&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;p_更新日時&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="cm">&lt;!-- 支払明細との1:N関連 --&gt;</span>
<span class="w">        </span><span class="nt">&lt;collection</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;details&quot;</span>
<span class="w">                    </span><span class="na">ofType=</span><span class="s">&quot;com.example.sms.domain.model.payment.PaymentDetail&quot;</span>
<span class="w">                    </span><span class="na">resultMap=</span><span class="s">&quot;PaymentDetailNestedResultMap&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/resultMap&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- 支払明細のネスト ResultMap --&gt;</span>
<span class="w">    </span><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;PaymentDetailNestedResultMap&quot;</span>
<span class="w">               </span><span class="na">type=</span><span class="s">&quot;com.example.sms.domain.model.payment.PaymentDetail&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;pd_id&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;paymentId&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;pd_支払ID&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;lineNumber&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;pd_支払行番号&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;purchaseNumber&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;pd_仕入番号&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;purchaseDate&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;pd_仕入日&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;purchaseAmount&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;pd_仕入金額&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;taxAmount&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;pd_消費税額&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;paymentTargetAmount&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;pd_支払対象金額&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/resultMap&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- JOIN による一括取得クエリ --&gt;</span>
<span class="w">    </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;findWithDetailsByPaymentNumber&quot;</span>
<span class="w">            </span><span class="na">resultMap=</span><span class="s">&quot;PaymentWithDetailsResultMap&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>SELECT
<span class="w">            </span>p.&quot;ID&quot;<span class="w"> </span>AS<span class="w"> </span>p_id,
<span class="w">            </span>p.&quot;支払番号&quot;<span class="w"> </span>AS<span class="w"> </span>p_支払番号,
<span class="w">            </span>p.&quot;仕入先コード&quot;<span class="w"> </span>AS<span class="w"> </span>p_仕入先コード,
<span class="w">            </span>p.&quot;支払締日&quot;<span class="w"> </span>AS<span class="w"> </span>p_支払締日,
<span class="w">            </span>p.&quot;支払予定日&quot;<span class="w"> </span>AS<span class="w"> </span>p_支払予定日,
<span class="w">            </span>p.&quot;支払方法&quot;<span class="w"> </span>AS<span class="w"> </span>p_支払方法,
<span class="w">            </span>p.&quot;支払金額&quot;<span class="w"> </span>AS<span class="w"> </span>p_支払金額,
<span class="w">            </span>p.&quot;消費税額&quot;<span class="w"> </span>AS<span class="w"> </span>p_消費税額,
<span class="w">            </span>p.&quot;源泉徴収額&quot;<span class="w"> </span>AS<span class="w"> </span>p_源泉徴収額,
<span class="w">            </span>p.&quot;差引支払額&quot;<span class="w"> </span>AS<span class="w"> </span>p_差引支払額,
<span class="w">            </span>p.&quot;支払実行日&quot;<span class="w"> </span>AS<span class="w"> </span>p_支払実行日,
<span class="w">            </span>p.&quot;ステータス&quot;<span class="w"> </span>AS<span class="w"> </span>p_ステータス,
<span class="w">            </span>p.&quot;バージョン&quot;<span class="w"> </span>AS<span class="w"> </span>p_バージョン,
<span class="w">            </span>p.&quot;作成日時&quot;<span class="w"> </span>AS<span class="w"> </span>p_作成日時,
<span class="w">            </span>p.&quot;更新日時&quot;<span class="w"> </span>AS<span class="w"> </span>p_更新日時,
<span class="w">            </span>pd.&quot;ID&quot;<span class="w"> </span>AS<span class="w"> </span>pd_id,
<span class="w">            </span>pd.&quot;支払ID&quot;<span class="w"> </span>AS<span class="w"> </span>pd_支払ID,
<span class="w">            </span>pd.&quot;支払行番号&quot;<span class="w"> </span>AS<span class="w"> </span>pd_支払行番号,
<span class="w">            </span>pd.&quot;仕入番号&quot;<span class="w"> </span>AS<span class="w"> </span>pd_仕入番号,
<span class="w">            </span>pd.&quot;仕入日&quot;<span class="w"> </span>AS<span class="w"> </span>pd_仕入日,
<span class="w">            </span>pd.&quot;仕入金額&quot;<span class="w"> </span>AS<span class="w"> </span>pd_仕入金額,
<span class="w">            </span>pd.&quot;消費税額&quot;<span class="w"> </span>AS<span class="w"> </span>pd_消費税額,
<span class="w">            </span>pd.&quot;支払対象金額&quot;<span class="w"> </span>AS<span class="w"> </span>pd_支払対象金額
<span class="w">        </span>FROM<span class="w"> </span>&quot;支払データ&quot;<span class="w"> </span>p
<span class="w">        </span>LEFT<span class="w"> </span>JOIN<span class="w"> </span>&quot;支払明細データ&quot;<span class="w"> </span>pd
<span class="w">            </span>ON<span class="w"> </span>p.&quot;ID&quot;<span class="w"> </span>=<span class="w"> </span>pd.&quot;支払ID&quot;
<span class="w">        </span>WHERE<span class="w"> </span>p.&quot;支払番号&quot;<span class="w"> </span>=<span class="w"> </span>#{paymentNumber}
<span class="w">        </span>ORDER<span class="w"> </span>BY<span class="w"> </span>pd.&quot;支払行番号&quot;
<span class="w">    </span><span class="nt">&lt;/select&gt;</span>

<span class="nt">&lt;/mapper&gt;</span>
</code></pre></div>

</details>

<h3 id="_9">リレーション設定のポイント<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>設定項目</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;collection&gt;</code></td>
<td>1:N 関連のマッピング</td>
</tr>
<tr>
<td><code>&lt;id&gt;</code></td>
<td>主キーの識別（MyBatis が重複排除に使用）</td>
</tr>
<tr>
<td><code>resultMap</code></td>
<td>ネストした ResultMap の参照</td>
</tr>
<tr>
<td>エイリアス（AS）</td>
<td>カラム名の重複を避けるためのプレフィックス</td>
</tr>
<tr>
<td><code>ORDER BY</code></td>
<td>コレクションの順序を保証</td>
</tr>
</tbody>
</table>
<h3 id="optimistic-locking">楽観ロック（Optimistic Locking）の実装<a class="headerlink" href="#optimistic-locking" title="Permanent link">&para;</a></h3>
<p>複数ユーザーが同時に支払データを編集する場合、データの整合性を保つために楽観ロックを実装します。</p>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IlNFUVVFTkNFIiBoZWlnaHQ9IjU1MHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6Mzg0cHg7aGVpZ2h0OjU1MHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDM4NCA1NTAiIHdpZHRoPSIzODRweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjcwMDU7JiMzNTI1MTsmIzEyNTI1OyYjMTI0ODM7JiMxMjQ2MzsmIzEyMzk4OyYjMjEyMDU7JiMyMDMxNjsmIzEyNDcxOyYjMTI1NDA7JiMxMjQ2NTsmIzEyNTMxOyYjMTI0NzM7PC90aXRsZT48ZGVmcy8+PGc+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE4MS45OTkyIiB4PSIxMDIuNjY2OCIgeT0iMjcuOTk1MSI+JiMyNzAwNTsmIzM1MjUxOyYjMTI1MjU7JiMxMjQ4MzsmIzEyNDYzOyYjMTIzOTg7JiMyMTIwNTsmIzIwMzE2OyYjMTI0NzE7JiMxMjU0MDsmIzEyNDY1OyYjMTI1MzE7JiMxMjQ3Mzs8L3RleHQ+PGcgY2xhc3M9InBhcnRpY2lwYW50LWxpZmVsaW5lIiBkYXRhLWVudGl0eS11aWQ9InBhcnQxIiBkYXRhLXF1YWxpZmllZC1uYW1lPSJ1c2VyQSIgaWQ9InBhcnQxLWxpZmVsaW5lIj48Zz48dGl0bGU+Li4uQTwvdGl0bGU+PHJlY3QgZmlsbD0iIzAwMDAwMCIgZmlsbC1vcGFjaXR5PSIwLjAwMDAwIiBoZWlnaHQ9IjM1MS40NjA5IiB3aWR0aD0iOCIgeD0iMjkuNzg4NSIgeT0iMTE4LjU5MzgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTtzdHJva2UtZGFzaGFycmF5OjUsNTsiIHgxPSIzMyIgeDI9IjMzIiB5MT0iMTE4LjU5MzgiIHkyPSI0NzAuMDU0NyIvPjwvZz48L2c+PGcgY2xhc3M9InBhcnRpY2lwYW50LWxpZmVsaW5lIiBkYXRhLWVudGl0eS11aWQ9InBhcnQyIiBkYXRhLXF1YWxpZmllZC1uYW1lPSJ1c2VyQiIgaWQ9InBhcnQyLWxpZmVsaW5lIj48Zz48dGl0bGU+Li4uQjwvdGl0bGU+PHJlY3QgZmlsbD0iIzAwMDAwMCIgZmlsbC1vcGFjaXR5PSIwLjAwMDAwIiBoZWlnaHQ9IjM1MS40NjA5IiB3aWR0aD0iOCIgeD0iMTM0Ljc4ODYiIHk9IjExOC41OTM4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7c3Ryb2tlLWRhc2hhcnJheTo1LDU7IiB4MT0iMTM3Ljk4NjQiIHgyPSIxMzcuOTg2NCIgeTE9IjExOC41OTM4IiB5Mj0iNDcwLjA1NDciLz48L2c+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudC1saWZlbGluZSIgZGF0YS1lbnRpdHktdWlkPSJwYXJ0MyIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iZGIiIGlkPSJwYXJ0My1saWZlbGluZSI+PGc+PHRpdGxlPi4uLi4uLjwvdGl0bGU+PHJlY3QgZmlsbD0iIzAwMDAwMCIgZmlsbC1vcGFjaXR5PSIwLjAwMDAwIiBoZWlnaHQ9IjM1MS40NjA5IiB3aWR0aD0iOCIgeD0iMzM0LjMzMyIgeT0iMTE4LjU5MzgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTtzdHJva2UtZGFzaGFycmF5OjUsNTsiIHgxPSIzMzcuMzMzMiIgeDI9IjMzNy4zMzMyIiB5MT0iMTE4LjU5MzgiIHkyPSI0NzAuMDU0NyIvPjwvZz48L2c+PGcgY2xhc3M9InBhcnRpY2lwYW50IHBhcnRpY2lwYW50LWhlYWQiIGRhdGEtZW50aXR5LXVpZD0icGFydDEiIGRhdGEtcXVhbGlmaWVkLW5hbWU9InVzZXJBIiBpZD0icGFydDEtaGVhZCI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTEuNTc3IiB4PSI1IiB5PSIxMTUuMjkyIj4mIzI1Mjg1OyYjMjQ0MDM7JiMzMjc3MztBPC90ZXh0PjxlbGxpcHNlIGN4PSIzMy43ODg1IiBjeT0iNTAuNzk2OSIgZmlsbD0iI0UyRTJGMCIgcng9IjgiIHJ5PSI4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNMzMuNzg4NSw1OC43OTY5IEwzMy43ODg1LDg1Ljc5NjkgTTIwLjc4ODUsNjYuNzk2OSBMNDYuNzg4NSw2Ni43OTY5IE0zMy43ODg1LDg1Ljc5NjkgTDIwLjc4ODUsMTAwLjc5NjkgTTMzLjc4ODUsODUuNzk2OSBMNDYuNzg4NSwxMDAuNzk2OSIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudCBwYXJ0aWNpcGFudC10YWlsIiBkYXRhLWVudGl0eS11aWQ9InBhcnQxIiBkYXRhLXF1YWxpZmllZC1uYW1lPSJ1c2VyQSIgaWQ9InBhcnQxLXRhaWwiPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjUxLjU3NyIgeD0iNSIgeT0iNDgyLjA0OTgiPiYjMjUyODU7JiMyNDQwMzsmIzMyNzczO0E8L3RleHQ+PGVsbGlwc2UgY3g9IjMzLjc4ODUiIGN5PSI0OTMuODUxNiIgZmlsbD0iI0UyRTJGMCIgcng9IjgiIHJ5PSI4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNMzMuNzg4NSw1MDEuODUxNiBMMzMuNzg4NSw1MjguODUxNiBNMjAuNzg4NSw1MDkuODUxNiBMNDYuNzg4NSw1MDkuODUxNiBNMzMuNzg4NSw1MjguODUxNiBMMjAuNzg4NSw1NDMuODUxNiBNMzMuNzg4NSw1MjguODUxNiBMNDYuNzg4NSw1NDMuODUxNiIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudCBwYXJ0aWNpcGFudC1oZWFkIiBkYXRhLWVudGl0eS11aWQ9InBhcnQyIiBkYXRhLXF1YWxpZmllZC1uYW1lPSJ1c2VyQiIgaWQ9InBhcnQyLWhlYWQiPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjUxLjYwNDMiIHg9IjEwOS45ODY0IiB5PSIxMTUuMjkyIj4mIzI1Mjg1OyYjMjQ0MDM7JiMzMjc3MztCPC90ZXh0PjxlbGxpcHNlIGN4PSIxMzguNzg4NiIgY3k9IjUwLjc5NjkiIGZpbGw9IiNFMkUyRjAiIHJ4PSI4IiByeT0iOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTEzOC43ODg2LDU4Ljc5NjkgTDEzOC43ODg2LDg1Ljc5NjkgTTEyNS43ODg2LDY2Ljc5NjkgTDE1MS43ODg2LDY2Ljc5NjkgTTEzOC43ODg2LDg1Ljc5NjkgTDEyNS43ODg2LDEwMC43OTY5IE0xMzguNzg4Niw4NS43OTY5IEwxNTEuNzg4NiwxMDAuNzk2OSIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudCBwYXJ0aWNpcGFudC10YWlsIiBkYXRhLWVudGl0eS11aWQ9InBhcnQyIiBkYXRhLXF1YWxpZmllZC1uYW1lPSJ1c2VyQiIgaWQ9InBhcnQyLXRhaWwiPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjUxLjYwNDMiIHg9IjEwOS45ODY0IiB5PSI0ODIuMDQ5OCI+JiMyNTI4NTsmIzI0NDAzOyYjMzI3NzM7QjwvdGV4dD48ZWxsaXBzZSBjeD0iMTM4Ljc4ODYiIGN5PSI0OTMuODUxNiIgZmlsbD0iI0UyRTJGMCIgcng9IjgiIHJ5PSI4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNMTM4Ljc4ODYsNTAxLjg1MTYgTDEzOC43ODg2LDUyOC44NTE2IE0xMjUuNzg4Niw1MDkuODUxNiBMMTUxLjc4ODYsNTA5Ljg1MTYgTTEzOC43ODg2LDUyOC44NTE2IEwxMjUuNzg4Niw1NDMuODUxNiBNMTM4Ljc4ODYsNTI4Ljg1MTYgTDE1MS43ODg2LDU0My44NTE2IiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48L2c+PGcgY2xhc3M9InBhcnRpY2lwYW50IHBhcnRpY2lwYW50LWhlYWQiIGRhdGEtZW50aXR5LXVpZD0icGFydDMiIGRhdGEtcXVhbGlmaWVkLW5hbWU9ImRiIiBpZD0icGFydDMtaGVhZCI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iMjkzLjMzMzIiIHk9IjExNS4yOTIiPiYjMjU5MDM7JiMyNTE3MzsmIzEyNDg2OyYjMTI1NDA7JiMxMjUwMjsmIzEyNTIzOzwvdGV4dD48cGF0aCBkPSJNMzIwLjMzMyw2Ni4yOTY5IEMzMjAuMzMzLDU2LjI5NjkgMzM4LjMzMyw1Ni4yOTY5IDMzOC4zMzMsNTYuMjk2OSBDMzM4LjMzMyw1Ni4yOTY5IDM1Ni4zMzMsNTYuMjk2OSAzNTYuMzMzLDY2LjI5NjkgTDM1Ni4zMzMsOTIuMjk2OSBDMzU2LjMzMywxMDIuMjk2OSAzMzguMzMzLDEwMi4yOTY5IDMzOC4zMzMsMTAyLjI5NjkgQzMzOC4zMzMsMTAyLjI5NjkgMzIwLjMzMywxMDIuMjk2OSAzMjAuMzMzLDkyLjI5NjkgTDMyMC4zMzMsNjYuMjk2OSIgZmlsbD0iI0UyRTJGMCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTMyMC4zMzMsNjYuMjk2OSBDMzIwLjMzMyw3Ni4yOTY5IDMzOC4zMzMsNzYuMjk2OSAzMzguMzMzLDc2LjI5NjkgQzMzOC4zMzMsNzYuMjk2OSAzNTYuMzMzLDc2LjI5NjkgMzU2LjMzMyw2Ni4yOTY5IiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48L2c+PGcgY2xhc3M9InBhcnRpY2lwYW50IHBhcnRpY2lwYW50LXRhaWwiIGRhdGEtZW50aXR5LXVpZD0icGFydDMiIGRhdGEtcXVhbGlmaWVkLW5hbWU9ImRiIiBpZD0icGFydDMtdGFpbCI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iMjkzLjMzMzIiIHk9IjQ4Mi4wNDk4Ij4mIzI1OTAzOyYjMjUxNzM7JiMxMjQ4NjsmIzEyNTQwOyYjMTI1MDI7JiMxMjUyMzs8L3RleHQ+PHBhdGggZD0iTTMyMC4zMzMsNDk1LjM1MTYgQzMyMC4zMzMsNDg1LjM1MTYgMzM4LjMzMyw0ODUuMzUxNiAzMzguMzMzLDQ4NS4zNTE2IEMzMzguMzMzLDQ4NS4zNTE2IDM1Ni4zMzMsNDg1LjM1MTYgMzU2LjMzMyw0OTUuMzUxNiBMMzU2LjMzMyw1MjEuMzUxNiBDMzU2LjMzMyw1MzEuMzUxNiAzMzguMzMzLDUzMS4zNTE2IDMzOC4zMzMsNTMxLjM1MTYgQzMzOC4zMzMsNTMxLjM1MTYgMzIwLjMzMyw1MzEuMzUxNiAzMjAuMzMzLDUyMS4zNTE2IEwzMjAuMzMzLDQ5NS4zNTE2IiBmaWxsPSIjRTJFMkYwIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNMzIwLjMzMyw0OTUuMzUxNiBDMzIwLjMzMyw1MDUuMzUxNiAzMzguMzMzLDUwNS4zNTE2IDMzOC4zMzMsNTA1LjM1MTYgQzMzOC4zMzMsNTA1LjM1MTYgMzU2LjMzMyw1MDUuMzUxNiAzNTYuMzMzLDQ5NS4zNTE2IiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtZW50aXR5LTE9InBhcnQxIiBkYXRhLWVudGl0eS0yPSJwYXJ0MyIgaWQ9Im1zZzEiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzI2LjMzMywxNDUuNzI2NiwzMzYuMzMzLDE0OS43MjY2LDMyNi4zMzMsMTUzLjcyNjYsMzMwLjMzMywxNDkuNzI2NiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMy43ODg1IiB4Mj0iMzMyLjMzMyIgeTE9IjE0OS43MjY2IiB5Mj0iMTQ5LjcyNjYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDEuNzE3OCIgeD0iNDAuNzg4NSIgeT0iMTQ0LjY2MDYiPlNFTEVDVCYjNjUyODg7dmVyc2lvbj0xJiM2NTI4OTs8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLWVudGl0eS0xPSJwYXJ0MiIgZGF0YS1lbnRpdHktMj0icGFydDMiIGlkPSJtc2cyIj48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjMyNi4zMzMsMTc0Ljg1OTQsMzM2LjMzMywxNzguODU5NCwzMjYuMzMzLDE4Mi44NTk0LDMzMC4zMzMsMTc4Ljg1OTQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTM4Ljc4ODYiIHgyPSIzMzIuMzMzIiB5MT0iMTc4Ljg1OTQiIHkyPSIxNzguODU5NCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0MS43MTc4IiB4PSIxNDUuNzg4NiIgeT0iMTczLjc5MzUiPlNFTEVDVCYjNjUyODg7dmVyc2lvbj0xJiM2NTI4OTs8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLWVudGl0eS0xPSJwYXJ0MSIgZGF0YS1lbnRpdHktMj0icGFydDEiIGlkPSJtc2czIj48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzMuNzg4NSIgeDI9Ijc1Ljc4ODUiIHkxPSIyMDcuOTkyMiIgeTI9IjIwNy45OTIyIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9Ijc1Ljc4ODUiIHgyPSI3NS43ODg1IiB5MT0iMjA3Ljk5MjIiIHkyPSIyMjAuOTkyMiIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzNC43ODg1IiB4Mj0iNzUuNzg4NSIgeTE9IjIyMC45OTIyIiB5Mj0iMjIwLjk5MjIiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjQ0Ljc4ODUsMjE2Ljk5MjIsMzQuNzg4NSwyMjAuOTkyMiw0NC43ODg1LDIyNC45OTIyLDQwLjc4ODUsMjIwLjk5MjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5MS4wMDAxIiB4PSI0MC43ODg1IiB5PSIyMDIuOTI2MyI+JiMyNTkwMzsmIzI1MTczOyYjMjA4Njk7JiMyMzQ4MTsmIzEyNDM0OyYjMzIyMzI7JiMzODU5ODs8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLWVudGl0eS0xPSJwYXJ0MiIgZGF0YS1lbnRpdHktMj0icGFydDIiIGlkPSJtc2c0Ij48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTM4Ljc4ODYiIHgyPSIxODAuNzg4NiIgeTE9IjI1MC4xMjUiIHkyPSIyNTAuMTI1Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE4MC43ODg2IiB4Mj0iMTgwLjc4ODYiIHkxPSIyNTAuMTI1IiB5Mj0iMjYzLjEyNSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMzkuNzg4NiIgeDI9IjE4MC43ODg2IiB5MT0iMjYzLjEyNSIgeTI9IjI2My4xMjUiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE0OS43ODg2LDI1OS4xMjUsMTM5Ljc4ODYsMjYzLjEyNSwxNDkuNzg4NiwyNjcuMTI1LDE0NS43ODg2LDI2My4xMjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5MS4wMDAxIiB4PSIxNDUuNzg4NiIgeT0iMjQ1LjA1OTEiPiYjMjU5MDM7JiMyNTE3MzsmIzIwODY5OyYjMjM0ODE7JiMxMjQzNDsmIzMyMjMyOyYjMzg1OTg7PC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1lbnRpdHktMT0icGFydDEiIGRhdGEtZW50aXR5LTI9InBhcnQzIiBpZD0ibXNnNSI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIzMjYuMzMzLDMwMy4zOTA2LDMzNi4zMzMsMzA3LjM5MDYsMzI2LjMzMywzMTEuMzkwNiwzMzAuMzMzLDMwNy4zOTA2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjMzLjc4ODUiIHgyPSIzMzIuMzMzIiB5MT0iMzA3LjM5MDYiIHkyPSIzMDcuMzkwNiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE3NS41NDQ0IiB4PSI0MC43ODg1IiB5PSIyODcuMTkxOSI+VVBEQVRFIFdIRVJFIHZlcnNpb249MTwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjQuOTM0NiIgeD0iNDAuNzg4NSIgeT0iMzAyLjMyNDciPiYjODU5NDsgdmVyc2lvbj0yICYjMTIzOTU7JiMyNjM1NjsmIzI2MDMyOzwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtZW50aXR5LTE9InBhcnQzIiBkYXRhLWVudGl0eS0yPSJwYXJ0MSIgaWQ9Im1zZzYiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNDQuNzg4NSwzMzIuNTIzNCwzNC43ODg1LDMzNi41MjM0LDQ0Ljc4ODUsMzQwLjUyMzQsNDAuNzg4NSwzMzYuNTIzNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzOC43ODg1IiB4Mj0iMzM3LjMzMyIgeTE9IjMzNi41MjM0IiB5Mj0iMzM2LjUyMzQiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5OS4yNzExIiB4PSI1MC43ODg1IiB5PSIzMzEuNDU3NSI+JiMyNjM1NjsmIzI2MDMyOyYjMjUxMDQ7JiMyMTE1MTsmIzY1Mjg4OzEmIzM0ODkyOyYjNjUyODk7PC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1lbnRpdHktMT0icGFydDIiIGRhdGEtZW50aXR5LTI9InBhcnQzIiBpZD0ibXNnNyI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIzMjYuMzMzLDM2MS42NTYzLDMzNi4zMzMsMzY1LjY1NjMsMzI2LjMzMywzNjkuNjU2MywzMzAuMzMzLDM2NS42NTYzIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEzOC43ODg2IiB4Mj0iMzMyLjMzMyIgeTE9IjM2NS42NTYzIiB5Mj0iMzY1LjY1NjMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNzUuNTQ0NCIgeD0iMTQ1Ljc4ODYiIHk9IjM2MC41OTAzIj5VUERBVEUgV0hFUkUgdmVyc2lvbj0xPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1lbnRpdHktMT0icGFydDMiIGRhdGEtZW50aXR5LTI9InBhcnQyIiBpZD0ibXNnOCI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxNDkuNzg4Niw0MDUuOTIxOSwxMzkuNzg4Niw0MDkuOTIxOSwxNDkuNzg4Niw0MTMuOTIxOSwxNDUuNzg4Niw0MDkuOTIxOSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxNDMuNzg4NiIgeDI9IjMzNy4zMzMiIHkxPSI0MDkuOTIxOSIgeTI9IjQwOS45MjE5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTkuMjcxMSIgeD0iMTU1Ljc4ODYiIHk9IjM4OS43MjMxIj4mIzI2MzU2OyYjMjYwMzI7JiMyMjgzMzsmIzI1OTQzOyYjNjUyODg7MCYjMzQ4OTI7JiM2NTI4OTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTEuMDAwMSIgeD0iMTU1Ljc4ODYiIHk9IjQwNC44NTYiPiYjMjcwMDU7JiMzNTI1MTsmIzEyNTI1OyYjMTI0ODM7JiMxMjQ2MzsmIzIwMzYzOyYjMjI4MDY7PC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1lbnRpdHktMT0icGFydDIiIGRhdGEtZW50aXR5LTI9InBhcnQyIiBpZD0ibXNnOSI+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEzOC43ODg2IiB4Mj0iMTgwLjc4ODYiIHkxPSI0MzkuMDU0NyIgeTI9IjQzOS4wNTQ3Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE4MC43ODg2IiB4Mj0iMTgwLjc4ODYiIHkxPSI0MzkuMDU0NyIgeTI9IjQ1Mi4wNTQ3Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEzOS43ODg2IiB4Mj0iMTgwLjc4ODYiIHkxPSI0NTIuMDU0NyIgeTI9IjQ1Mi4wNTQ3Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxNDkuNzg4Niw0NDguMDU0NywxMzkuNzg4Niw0NTIuMDU0NywxNDkuNzg4Niw0NTYuMDU0NywxNDUuNzg4Niw0NTIuMDU0NyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwNC4wMDAxIiB4PSIxNDUuNzg4NiIgeT0iNDMzLjk4ODgiPiYjMjA4Nzc7JiMzNTUwMTsmIzEyNDE1OyYjMzY3OTY7JiMxMjQxNTsmIzEyNDM0OyYjMjA0MTk7JiMxMjM3Nzs8L3RleHQ+PC9nPjw/cGxhbnR1bWwtc3JjIEF5YWlvS2JMVUJQcXh1amJjbnl0aHR0U3RGb3VRVnRabmRMRmt3Uy1zSmxkU1RGc255cng3WlRqVkRveS1ON0pKWXdrbkVJSV8yODVmTVZUaEtfdEpkeEhxRWdlZjkxT2g1MVFkNWhhWTI3ZDE5VHB1YWY5QjRiQ0lZbkUxS2ZGTVYtaVMtaFp2WlFHbVN0SjdaVWwxWWpCSVVCWTBYa1plNmk3djJYT0FHSXgtaFd3WHhwVnFyNk1NYklTY1B6ZFFfWC1Kb1RPWkhDSFFpM2NHMVhNMlgweGR4UXJGYnN0eXQ3SmZFVlJMeG9TdE9PbTJpQjBmbXBYZ2owMDV5U0dMdUxtM3pTV0xtTXVoSjV2WnplY21SYjYyZXlSTHAtUmxVTlBqMHJTRzR0ODNXNEJGa2tPeUJIaEZqM0xYWXlNemMxdzJoaUxJMk92bUtyd2tjSlppd2RKV0lPUEc0b0FvS0VCb0lWeGtmeWtjT1JmclFUamxJek1oTnRTa0ZfNWxacjA0a1pSOV9rUjdwVkUxMDAwPz48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_10">バージョンカラムによる同時更新制御<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<details>
<summary>楽観ロック対応の MyBatis Mapper</summary>

<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- 楽観ロック対応の支払更新 --&gt;</span>
<span class="nt">&lt;update</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;updateWithOptimisticLock&quot;</span>
<span class="w">        </span><span class="na">parameterType=</span><span class="s">&quot;com.example.sms.domain.model.payment.Payment&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span>UPDATE<span class="w"> </span>&quot;支払データ&quot;
<span class="w">    </span>SET
<span class="w">        </span>&quot;支払締日&quot;<span class="w"> </span>=<span class="w"> </span>#{paymentClosingDate},
<span class="w">        </span>&quot;支払予定日&quot;<span class="w"> </span>=<span class="w"> </span>#{paymentDueDate},
<span class="w">        </span>&quot;支払方法&quot;<span class="w"> </span>=<span class="w"> </span>#{paymentMethod,
<span class="w">            </span>typeHandler=com.example.sms.infrastructure.out.persistence.typehandler.PaymentMethodTypeHandler}::支払方法,
<span class="w">        </span>&quot;支払金額&quot;<span class="w"> </span>=<span class="w"> </span>#{paymentAmount},
<span class="w">        </span>&quot;消費税額&quot;<span class="w"> </span>=<span class="w"> </span>#{taxAmount},
<span class="w">        </span>&quot;源泉徴収額&quot;<span class="w"> </span>=<span class="w"> </span>#{withholdingAmount},
<span class="w">        </span>&quot;差引支払額&quot;<span class="w"> </span>=<span class="w"> </span>#{netPaymentAmount},
<span class="w">        </span>&quot;ステータス&quot;<span class="w"> </span>=<span class="w"> </span>#{status,
<span class="w">            </span>typeHandler=com.example.sms.infrastructure.out.persistence.typehandler.PaymentStatusTypeHandler}::支払ステータス,
<span class="w">        </span>&quot;備考&quot;<span class="w"> </span>=<span class="w"> </span>#{remarks},
<span class="w">        </span>&quot;更新日時&quot;<span class="w"> </span>=<span class="w"> </span>CURRENT_TIMESTAMP,
<span class="w">        </span>&quot;バージョン&quot;<span class="w"> </span>=<span class="w"> </span>&quot;バージョン&quot;<span class="w"> </span>+<span class="w"> </span>1
<span class="w">    </span>WHERE<span class="w"> </span>&quot;ID&quot;<span class="w"> </span>=<span class="w"> </span>#{id}
<span class="w">    </span>AND<span class="w"> </span>&quot;バージョン&quot;<span class="w"> </span>=<span class="w"> </span>#{version}
<span class="nt">&lt;/update&gt;</span>
</code></pre></div>

</details>

<details>
<summary>Repository 実装：楽観ロック対応</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/sms/infrastructure/persistence/repository/PaymentRepositoryImpl.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.sms.infrastructure.out.persistence.repository</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sms.application.port.out.PaymentRepository</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sms.domain.exception.OptimisticLockException</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sms.domain.model.payment.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sms.infrastructure.out.persistence.mapper.PaymentMapper</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Repository</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.transaction.annotation.Transactional</span><span class="p">;</span>

<span class="nd">@Repository</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">PaymentRepositoryImpl</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">PaymentRepository</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">PaymentMapper</span><span class="w"> </span><span class="n">paymentMapper</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 楽観ロック対応の更新</span>
<span class="cm">     * @throws OptimisticLockException 他のユーザーによって更新された場合</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="n">Payment</span><span class="w"> </span><span class="n">payment</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">updatedCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">paymentMapper</span><span class="p">.</span><span class="na">updateWithOptimisticLock</span><span class="p">(</span><span class="n">payment</span><span class="p">);</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">updatedCount</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Integer</span><span class="w"> </span><span class="n">currentVersion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">paymentMapper</span><span class="p">.</span><span class="na">findVersionById</span><span class="p">(</span><span class="n">payment</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>

<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">currentVersion</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">OptimisticLockException</span><span class="p">(</span>
<span class="w">                        </span><span class="s">&quot;支払&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">payment</span><span class="p">.</span><span class="na">getId</span><span class="p">().</span><span class="na">toString</span><span class="p">());</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">OptimisticLockException</span><span class="p">(</span>
<span class="w">                        </span><span class="s">&quot;支払&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="n">payment</span><span class="p">.</span><span class="na">getId</span><span class="p">().</span><span class="na">toString</span><span class="p">(),</span>
<span class="w">                        </span><span class="n">payment</span><span class="p">.</span><span class="na">getVersion</span><span class="p">(),</span>
<span class="w">                        </span><span class="n">currentVersion</span>
<span class="w">                </span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="_11">楽観ロックのベストプラクティス<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>ポイント</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>バージョンカラム</strong></td>
<td>INTEGER 型で十分（オーバーフローは現実的に発生しない）</td>
</tr>
<tr>
<td><strong>WHERE 条件</strong></td>
<td>必ず <code>AND "バージョン" = #{version}</code> を含める</td>
</tr>
<tr>
<td><strong>インクリメント</strong></td>
<td><code>"バージョン" = "バージョン" + 1</code> でアトミックに更新</td>
</tr>
<tr>
<td><strong>例外処理</strong></td>
<td>更新件数が0の場合は楽観ロック例外をスロー</td>
</tr>
<tr>
<td><strong>エラーメッセージ</strong></td>
<td>ユーザーにわかりやすいメッセージで再読み込みを促す</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="_12">債権管理との対比<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h2>
<p>債権管理（第7章）と債務管理（第10章）は、売り手と買い手の立場が逆転した対称的な関係にあります。</p>
<table>
<thead>
<tr>
<th>項目</th>
<th>債権管理（第7章）</th>
<th>債務管理（第10章）</th>
</tr>
</thead>
<tbody>
<tr>
<td>取引先</td>
<td>顧客</td>
<td>仕入先</td>
</tr>
<tr>
<td>締処理</td>
<td>請求締処理</td>
<td>支払締処理</td>
</tr>
<tr>
<td>データ</td>
<td>請求データ</td>
<td>支払データ</td>
</tr>
<tr>
<td>残高</td>
<td>売掛金残高</td>
<td>買掛金残高</td>
</tr>
<tr>
<td>消込</td>
<td>入金消込</td>
<td>支払消込</td>
</tr>
<tr>
<td>予定管理</td>
<td>回収予定</td>
<td>支払予定</td>
</tr>
</tbody>
</table>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjM0OXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MzcycHg7aGVpZ2h0OjM0OXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDM3MiAzNDkiIHdpZHRoPSIzNzJweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjA2NjE7JiMyNzE3NzsmIzMxNjQ5OyYjMjk3MDI7JiMxMjM5MjsmIzIwNjYxOyYjMjEyMDk7JiMzMTY0OTsmIzI5NzAyOyYjMTIzOTg7JiMzODMwNjsmIzIwNDE4OzwvdGl0bGU+PGRlZnMvPjxnPjxnIGNsYXNzPSJ0aXRsZSIgZGF0YS1zb3VyY2UtbGluZT0iMSI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE2Ny45OTkzIiB4PSI5NS41MDAzIiB5PSIyMi45OTUxIj4mIzIwNjYxOyYjMjcxNzc7JiMzMTY0OTsmIzI5NzAyOyYjMTIzOTI7JiMyMDY2MTsmIzIxMjA5OyYjMzE2NDk7JiMyOTcwMjsmIzEyMzk4OyYjMzgzMDY7JiMyMDQxODs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgY29tcGFueS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9ImNvbXBhbnkiIGRhdGEtc291cmNlLWxpbmU9IjMiIGlkPSJlbnQwMDAyIj48cmVjdCBmaWxsPSIjOTBFRTkwIiBoZWlnaHQ9IjM2LjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQ3Ljk5OTkiIHg9IjE3MCIgeT0iMTc0LjgyNjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNy45OTk5IiB4PSIxODAiIHk9IjE5Ny44MjIiPiYjMzMyNTg7JiMzMTAzODs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgY3VzdG9tZXItLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJjdXN0b21lciIgZGF0YS1zb3VyY2UtbGluZT0iNSIgaWQ9ImVudDAwMDMiPjxyZWN0IGZpbGw9IiNBREQ4RTYiIGhlaWdodD0iMzYuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNDcuOTk5OSIgeD0iMzE5IiB5PSIxNzQuODI2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI3Ljk5OTkiIHg9IjMyOSIgeT0iMTk3LjgyMiI+JiMzOTAxNTsmIzIzNDU4OzwvdGV4dD48L2c+PCEtLWVudGl0eSBzdXBwbGllci0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9InN1cHBsaWVyIiBkYXRhLXNvdXJjZS1saW5lPSI2IiBpZD0iZW50MDAwNCI+PHJlY3QgZmlsbD0iI0YwODA4MCIgaGVpZ2h0PSIzNi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI2MS45OTk4IiB4PSI3IiB5PSIxNzQuODI2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQxLjk5OTgiIHg9IjE3IiB5PSIxOTcuODIyIj4mIzIwMTgxOyYjMjA4Mzc7JiMyMDgwODs8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkdNTjExIiBkYXRhLXNvdXJjZS1saW5lPSIxNSIgaWQ9ImVudDAwMTIiPjxwYXRoIGQ9Ik0xNDYuNTksNDMuMjk2OSBMMTQ2LjU5LDExMy44MjgxIEEwLDAgMCAwIDAgMTQ2LjU5LDExMy44MjgxIEwxOTAsMTEzLjgyODEgTDE5NCwxNzQuNTU2OSBMMTk4LDExMy44MjgxIEwyNDEuNDEzMywxMTMuODI4MSBBMCwwIDAgMCAwIDI0MS40MTMzLDExMy44MjgxIEwyNDEuNDEzMyw1My4yOTY5IEwyMzEuNDEzMyw0My4yOTY5IEwxNDYuNTksNDMuMjk2OSBBMCwwIDAgMCAwIDE0Ni41OSw0My4yOTY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNMjMxLjQxMzMsNDMuMjk2OSBMMjMxLjQxMzMsNTMuMjk2OSBMMjQxLjQxMzMsNTMuMjk2OSBMMjMxLjQxMzMsNDMuMjk2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjUuMDAwMSIgeD0iMTUyLjU5IiB5PSI2MC4zNjM4Ij4mIzIwNjYxOyYjMjcxNzc7JiMzMTY0OTsmIzI5NzAyOyYjNjUzMDY7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjczLjgyMzMiIHg9IjE1Mi41OSIgeT0iNzUuNDk2NiI+LSAmIzM1NTMxOyYjMjc3MTQ7JiMzMjIyNDsmIzIwOTY2OyYjMjk3MDI7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjczLjgyMzMiIHg9IjE1Mi41OSIgeT0iOTAuNjI5NCI+LSAmIzIyNzcwOyYjMjU0OTk7JiMzNzMyOTsmIzI3NTMxOyYjMzk2NDA7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYwLjgyMzMiIHg9IjE1Mi41OSIgeT0iMTA1Ljc2MjIiPi0gJiMyMDgzNzsmIzM3MzI5OyYjMjgwNDA7JiMzNjc5Njs8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkdNTjE0IiBkYXRhLXNvdXJjZS1saW5lPSIyMiIgaWQ9ImVudDAwMTUiPjxwYXRoIGQ9Ik0xNDYuNTksMjcyLjEyNjkgTDE0Ni41OSwzNDIuNjU4MSBBMCwwIDAgMCAwIDE0Ni41OSwzNDIuNjU4MSBMMjQxLjQxMzMsMzQyLjY1ODEgQTAsMCAwIDAgMCAyNDEuNDEzMywzNDIuNjU4MSBMMjQxLjQxMzMsMjgyLjEyNjkgTDIzMS40MTMzLDI3Mi4xMjY5IEwxOTgsMjcyLjEyNjkgTDE5NCwyMTEuNTM2OSBMMTkwLDI3Mi4xMjY5IEwxNDYuNTksMjcyLjEyNjkgQTAsMCAwIDAgMCAxNDYuNTksMjcyLjEyNjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0yMzEuNDEzMywyNzIuMTI2OSBMMjMxLjQxMzMsMjgyLjEyNjkgTDI0MS40MTMzLDI4Mi4xMjY5IEwyMzEuNDEzMywyNzIuMTI2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjUuMDAwMSIgeD0iMTUyLjU5IiB5PSIyODkuMTkzOCI+JiMyMDY2MTsmIzIxMjA5OyYjMzE2NDk7JiMyOTcwMjsmIzY1MzA2OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3My44MjMzIiB4PSIxNTIuNTkiIHk9IjMwNC4zMjY2Ij4tICYjMjU5MDM7JiMyNTE3MzsmIzMyMjI0OyYjMjA5NjY7JiMyOTcwMjs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzMuODIzMyIgeD0iMTUyLjU5IiB5PSIzMTkuNDU5NCI+LSAmIzM2MDIzOyYjMjU0OTk7JiMzNzMyOTsmIzI3NTMxOyYjMzk2NDA7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYwLjgyMzMiIHg9IjE1Mi41OSIgeT0iMzM0LjU5MjIiPi0gJiMyNTkwMzsmIzI1MTczOyYjMjgwNDA7JiMzNjc5Njs8L3RleHQ+PC9nPjwhLS1saW5rIGNvbXBhbnkgdG8gY3VzdG9tZXItLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwMiIgZGF0YS1lbnRpdHktMj0iZW50MDAwMyIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjgiIGlkPSJsbms1Ij48cGF0aCBkPSJNMjE4LjI3LDE5Mi45NzY5IEMyNDUuOTgsMTkyLjk3NjkgMjg1LjA0LDE5Mi45NzY5IDMxMi43NCwxOTIuOTc2OSIgZmlsbD0ibm9uZSIgaWQ9ImNvbXBhbnktdG8tY3VzdG9tZXIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjMxOC43NCwxOTIuOTc2OSwzMDkuNzQsMTg4Ljk3NjksMzEzLjc0LDE5Mi45NzY5LDMwOS43NCwxOTYuOTc2OSwzMTguNzQsMTkyLjk3NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2NS4wMDAxIiB4PSIyMzYiIHk9IjE4Ni4wNDM4Ij4mIzIyNzcwOyYjMTk5Nzg7JiMxMjUzOTsmIzM1NTMxOyYjMjc3MTQ7PC90ZXh0PjwvZz48IS0tcmV2ZXJzZSBsaW5rIGNvbXBhbnkgdG8gY3VzdG9tZXItLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwMiIgZGF0YS1lbnRpdHktMj0iZW50MDAwMyIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjkiIGlkPSJsbms3Ij48cGF0aCBkPSJNMjIzLjkxODIsMjA1LjAyOSBDMjM0Ljc5ODIsMjA4Ljk4OSAyNDIuMjcsMjExLjAwNjkgMjU0LjUsMjEyLjk3NjkgQzI2Ni43OSwyMTQuOTU2OSAyNzAuMjEsMjE0Ljk1NjkgMjgyLjUsMjEyLjk3NjkgQzI5NC43MywyMTEuMDA2OSAzMDcuODQsMjA2LjkzNjkgMzE4LjcyLDIwMi45NzY5IiBmaWxsPSJub25lIiBpZD0iY29tcGFueS1iYWNrdG8tY3VzdG9tZXIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjIxOC4yOCwyMDIuOTc2OSwyMjUuMzY5MiwyMDkuODEzOCwyMjIuOTc4NSwyMDQuNjg3LDIyOC4xMDUzLDIwMi4yOTYzLDIxOC4yOCwyMDIuOTc2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI2IiB4PSIyNTUuNSIgeT0iMjA5LjA0MzgiPiYjMjA4Mzc7JiMzNzMyOTs8L3RleHQ+PC9nPjwhLS1saW5rIHN1cHBsaWVyIHRvIGNvbXBhbnktLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwNCIgZGF0YS1lbnRpdHktMj0iZW50MDAwMiIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjExIiBpZD0ibG5rOCI+PHBhdGggZD0iTTY5LjE5LDE5Mi45NzY5IEM5OC43MSwxOTIuOTc2OSAxMzYuNDMsMTkyLjk3NjkgMTYzLjUyLDE5Mi45NzY5IiBmaWxsPSJub25lIiBpZD0ic3VwcGxpZXItdG8tY29tcGFueSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTY5LjUyLDE5Mi45NzY5LDE2MC41MiwxODguOTc2OSwxNjQuNTIsMTkyLjk3NjksMTYwLjUyLDE5Ni45NzY5LDE2OS41MiwxOTIuOTc2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY1LjAwMDEiIHg9Ijg3IiB5PSIxODYuMDQzOCI+JiMyMDE4MTsmIzIwODM3OyYjMTI1Mzk7JiMzNTUzMTsmIzI3NzE0OzwvdGV4dD48L2c+PCEtLXJldmVyc2UgbGluayBzdXBwbGllciB0byBjb21wYW55LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDQiIGRhdGEtZW50aXR5LTI9ImVudDAwMDIiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSIxMiIgaWQ9ImxuazEwIj48cGF0aCBkPSJNNzQuOTc2OCwyMDcuMjQ4NCBDOTMuNTU2OCwyMTMuMTY4NCAxMTEuOTMsMjE2LjQ0NjkgMTMzLjUsMjEyLjk3NjkgQzE0NS43MywyMTEuMDA2OSAxNTguODQsMjA2LjkzNjkgMTY5LjcyLDIwMi45NzY5IiBmaWxsPSJub25lIiBpZD0ic3VwcGxpZXItYmFja3RvLWNvbXBhbnkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjY5LjI2LDIwNS40MjY5LDc2LjYyMDksMjExLjk3MDQsNzQuMDI0LDIwNi45NDQ4LDc5LjA0OTYsMjA0LjM0NzksNjkuMjYsMjA1LjQyNjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNiIgeD0iMTA2LjUiIHk9IjIwOS4wNDM4Ij4mIzI1OTAzOyYjMjUxNzM7PC90ZXh0PjwvZz48P3BsYW50dW1sLXNyYyBOUDdGSmVDbTdDVmxWT2ZjZGRjMTdKcGVtT2lsV1JFUjk4bUlBMFVGT2YwZllUNzQ2VnpTdDdHd05POW5ZU3Zhb3RvT3FHOGROeTUyZUtFRV9WTkp4LVZSYmNYNEh2Mndkc3B5NmVVMy1FOWFUSkpjSW5oU2JpaW1sSHY2Rm91MDVjZUhyVVhtbGY3dVJfN0ppVzVMNnhQbXJySURHeFluZ3RLRW84dzVhRjRGSkdTbEQxbUFyQjQ5eFlBaE9CVHExck45UUR3ZHRlWHdsSG9zN1RGS0RHYmxPcWxMMElYallmS0RiU3JyUFhGSW5zZHFWUk93ZFlVSlc3c3VHNnVmRWNoZFI3Nk9lenVlekl5MWE5OXJkY0g0ZEtmU2dJeEl2RGFjUDVWbHhCR0ZXODQ5V1dJUjRCVkI4NTF6c3pfNTdMMldvOGpkM3pIX3ZhQy11U3RQLUpybG5DOFdkVG5hYXhtVy0tZWJvbUwwblp4Q2VXbDE3WVJ5TlpNN18zM1g0OHNnWmNHd2dwYTRLdEZ5MEcwMD8+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<hr />
<h2 id="10_1">第10章のまとめ<a class="headerlink" href="#10_1" title="Permanent link">&para;</a></h2>
<p>本章では、債務管理（支払締処理・買掛金残高管理）の DB 設計と実装について学びました。</p>
<h3 id="_13">学んだこと<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>支払締処理の設計</strong></li>
<li>仕入データから支払データへの集計</li>
<li>支払予定日の自動計算（支払サイト）</li>
<li>
<p>承認ワークフロー（作成→承認待ち→承認済→支払済）</p>
</li>
<li>
<p><strong>支払方法の管理</strong></p>
</li>
<li>振込、手形、現金、相殺、電子記録債権</li>
<li>
<p>支払方法に応じた必要情報の管理</p>
</li>
<li>
<p><strong>買掛金残高管理の設計</strong></p>
</li>
<li>仕入先別の残高管理</li>
<li>月次繰越処理</li>
<li>
<p>当月残高の自動計算（トリガー）</p>
</li>
<li>
<p><strong>リレーションと楽観ロック</strong></p>
</li>
<li>N+1 問題の回避（JOIN による一括取得）</li>
<li>同時更新の競合制御</li>
</ol>
<h3 id="_14">テーブル一覧<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>テーブル名（日本語）</th>
<th>Java エンティティ</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>支払データ</td>
<td>Payment</td>
<td>支払ヘッダ情報</td>
</tr>
<tr>
<td>支払明細データ</td>
<td>PaymentDetail</td>
<td>仕入との紐付け</td>
</tr>
<tr>
<td>買掛金残高データ</td>
<td>PayableBalance</td>
<td>月次残高管理</td>
</tr>
<tr>
<td>支払予定データ</td>
<td>PaymentSchedule</td>
<td>支払スケジュール</td>
</tr>
</tbody>
</table>
<h3 id="enum">ENUM 一覧<a class="headerlink" href="#enum" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>DB ENUM 型（日本語）</th>
<th>Java Enum</th>
<th>値</th>
</tr>
</thead>
<tbody>
<tr>
<td>支払ステータス</td>
<td>PaymentStatus</td>
<td>作成中→DRAFT, 承認待ち→PENDING_APPROVAL, 承認済→APPROVED, 支払済→PAID, 取消→CANCELLED</td>
</tr>
<tr>
<td>支払方法</td>
<td>PaymentMethod</td>
<td>振込→BANK_TRANSFER, 手形→BILL, 現金→CASH, 相殺→OFFSET, 電子記録債権→ELECTRONIC_RECORD</td>
</tr>
</tbody>
</table>
<h3 id="_15">次章の予告<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<p>第11章では、財務会計システムの全体像に進みます。販売管理システムで発生した取引を財務会計の仕訳としてどのように記録するかを学びます。</p>
<hr />
<p><a href="../chapter09/">← 第9章：在庫管理の設計</a> | <a href="../chapter11/">第11章：財務会計システムの全体像 →</a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://github.com/k2works/practical-database-design" target="_blank" rel="noopener" title="GitHub Repository" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "search.suggest", "search.highlight"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
      
        <script src="../../../docs/assets/js/extra.js"></script>
      
    
  </body>
</html>