
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="基幹業務システム（販売管理・財務会計・生産管理）のデータベース設計を体系的に解説">
      
      
        <meta name="author" content="k2works">
      
      
      
        <link rel="prev" href="../chapter08/">
      
      
        <link rel="next" href="../chapter10/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>第9章 在庫管理の設計 - 実践データベース設計：基幹業務システム編</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../docs/mkdocs/assets/css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#9" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="実践データベース設計：基幹業務システム編" class="md-header__button md-logo" aria-label="実践データベース設計：基幹業務システム編" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            実践データベース設計：基幹業務システム編
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              第9章 在庫管理の設計
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/k2works/practical-database-design" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    practical-database-design
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
  実践データベース設計

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="実践データベース設計：基幹業務システム編" class="md-nav__button md-logo" aria-label="実践データベース設計：基幹業務システム編" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    実践データベース設計：基幹業務システム編
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/k2works/practical-database-design" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    practical-database-design
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    実践データベース設計
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    実践データベース設計
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../techstack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    技術スタック
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../outline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    アウトライン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    執筆ワークフロー
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ops/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    運用ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../project-setup-instruction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    プロジェクトセットアップ手順書
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_7" >
        
          
          <label class="md-nav__link" for="__nav_1_7" id="__nav_1_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    デプロイ
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    デプロイ
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy-sms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SMS デモデプロイ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy-fas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FAS デモデプロイ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy-pms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PMS デモデプロイ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_8" >
        
          
          <label class="md-nav__link" for="__nav_1_8" id="__nav_1_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第1部 基幹業務システムの全体像
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    第1部 基幹業務システムの全体像
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1/chapter01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第1章 基幹業務システムとは
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1/chapter02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第2章 基幹業務システムの業務領域
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1/chapter03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第3章 業務フローの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_9" checked>
        
          
          <label class="md-nav__link" for="__nav_1_9" id="__nav_1_9_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第2部 販売管理システム
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_9_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    第2部 販売管理システム
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第4章 販売管理システムの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第5章 マスタ情報の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第6章 受注・出荷・売上の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter07/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第7章 債権管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter08/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第8章 調達管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    第9章 在庫管理の設計
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    第9章 在庫管理の設計
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        在庫管理の全体像
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="在庫管理の全体像">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        在庫管理で扱うデータ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#91-db" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.1 在庫情報の DB 設計
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="9.1 在庫情報の DB 設計">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        在庫数量の種類
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        倉庫マスタの設計
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        倉庫区分の定義
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        マイグレーション：倉庫・在庫関連テーブルの作成
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        倉庫・在庫エンティティの実装
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        在庫サービスの実装
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#92-db" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.2 在庫移動・棚卸の DB 設計
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="9.2 在庫移動・棚卸の DB 設計">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        入出庫履歴の管理
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        移動区分の定義
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        棚卸業務の設計
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#er" class="md-nav__link">
    <span class="md-ellipsis">
      
        棚卸データの ER 図
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        マイグレーション：入出庫履歴・棚卸テーブルの作成
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        入出庫履歴・棚卸エンティティの実装
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        棚卸サービスの実装
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#93" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.3 リレーションと楽観ロックの設計
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="9.3 リレーションと楽観ロックの設計">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mybatis-resultmap" class="md-nav__link">
    <span class="md-ellipsis">
      
        MyBatis ネストした ResultMap による関連付け
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        リレーション設定のポイント
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimistic-locking" class="md-nav__link">
    <span class="md-ellipsis">
      
        楽観ロック（Optimistic Locking）の実装
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      
        バージョンカラムによる同時更新制御
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      
        楽観ロックのテスト
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      
        楽観ロックのベストプラクティス
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        第9章のまとめ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第9章のまとめ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      
        学んだこと
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#er_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        在庫管理の ER 図（全体像）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      
        次章の予告
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第10章 債務管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第11章 共通処理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第12章 販売管理データ設計（B社事例）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第13章 APIサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_10" >
        
          
          <label class="md-nav__link" for="__nav_1_10" id="__nav_1_10_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第3部 財務会計システム
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    第3部 財務会計システム
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第14章 財務会計システムの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第15章 勘定科目の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter16/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第16章 仕訳の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter17/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第17章 自動仕訳の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter18/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第18章 勘定科目残高の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter19/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第19章 赤黒とログの設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter20/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第20章 財務会計データ設計（D社事例）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3/chapter21/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第21章 APIサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_11" >
        
          
          <label class="md-nav__link" for="__nav_1_11" id="__nav_1_11_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第4部 生産管理システム
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    第4部 生産管理システム
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter22/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第22章 生産管理システムの全体像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter23/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第23章 マスタ情報の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter24/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第24章 生産計画の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter25/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第25章 購買管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter26/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第26章 外注委託管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter27/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第27章 工程管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter28/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第28章 在庫管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第29章 品質管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter30/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第30章 製造原価管理の設計
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter31/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第31章 生産管理データ設計（E社事例）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part4/chapter32/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第32章 APIサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_12" >
        
          
          <label class="md-nav__link" for="__nav_1_12" id="__nav_1_12_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    第5部 エンタープライズインテグレーション
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    第5部 エンタープライズインテグレーション
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter33.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第33章 システム統合の概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter34.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第34章 メッセージングパターン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter35.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第35章 システム間連携パターン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter36.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第36章 マスタデータ管理（MDM）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter37.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第37章 イベント駆動アーキテクチャ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter38.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第38章 API設計とサービス連携
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part5/chapter39.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第39章 データ連携の実装パターン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_13" >
        
          
          <label class="md-nav__link" for="__nav_1_13" id="__nav_1_13_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 販売管理システム実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_13">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 販売管理システム実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study2-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究1 モノリスサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study2-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究2 JavaFXデスクトップアプリケーションの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study2-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究3 gRPCサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study2-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究4 GraphQLサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study2-5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究5 AxonCQRS/ESの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_14" >
        
          
          <label class="md-nav__link" for="__nav_1_14" id="__nav_1_14_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 財務会計システム実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_14">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 財務会計システム実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study3-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究1 モノリスサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study3-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究2 JavaFXデスクトップアプリケーションの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study3-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究3 gRPCサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study3-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究4 GraphQLサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study3-5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究5 AxonCQRS/ESの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_15" >
        
          
          <label class="md-nav__link" for="__nav_1_15" id="__nav_1_15_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 生産管理システム実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_15">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 生産管理システム実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study4-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究1 モノリスサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study4-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究2 JavaFXデスクトップアプリケーションの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study4-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究3 gRPCサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study4-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究4 GraphQLサービスの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../study/study4-5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    研究5 AxonCQRS/ESの実装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_16" >
        
          
          <label class="md-nav__link" for="__nav_1_16" id="__nav_1_16_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    研究 財務会計システムORM実装編
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_16">
            <span class="md-nav__icon md-icon"></span>
            
  
    研究 財務会計システムORM実装編
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter14-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第14章 財務会計システムの全体像【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter15-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第15章 勘定科目の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter16-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第16章 仕訳の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter17-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第17章 自動仕訳の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter18-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第18章 勘定科目残高の設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter19-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第19章 赤黒とログの設計【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter20-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第20章 財務会計データ設計（D社事例）【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter21-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第21章 APIサービスの実装【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part3-orm/chapter22-orm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第22章 Axon CQRS/ESの実装【ORM版】
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_17" >
        
          
          <label class="md-nav__link" for="__nav_1_17" id="__nav_1_17_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    付録
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_17">
            <span class="md-nav__icon md-icon"></span>
            
  
    付録
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/er-diagrams.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    A 全体ER図
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/table-definitions.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    B テーブル定義一覧
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/glossary.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    C 用語集
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_18" >
        
          
          <label class="md-nav__link" for="__nav_1_18" id="__nav_1_18_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    データベース
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_18_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_18">
            <span class="md-nav__icon md-icon"></span>
            
  
    データベース
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../assets/schemaspy-output/sms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SchemaSpy ER図（SMS）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../assets/schemaspy-output/fas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SchemaSpy ER図（FAS）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../assets/schemaspy-output/pms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SchemaSpy ER図（PMS）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="9">第9章：在庫管理の設計<a class="headerlink" href="#9" title="Permanent link">&para;</a></h1>
<p>販売管理システムにおいて、在庫管理は商品の物理的な状態を追跡し、適正在庫を維持するための重要な機能です。本章では、倉庫別・商品別の在庫管理、引当処理、入出庫履歴、棚卸業務のデータベース設計と実装を行います。</p>
<h2 id="_1">在庫管理の全体像<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>在庫管理は「入庫 → 在庫保管 → 引当 → 出庫」という一連のフローで構成されます。</p>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkFDVElWSVRZIiBoZWlnaHQ9IjEzMDhweCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSIgc3R5bGU9IndpZHRoOjc5OHB4O2hlaWdodDoxMzA4cHg7YmFja2dyb3VuZDojRkZGRkZGOyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgNzk4IDEzMDgiIHdpZHRoPSI3OThweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjIzMTI7JiMyNDIzNTsmIzMxNjQ5OyYjMjk3MDI7JiMxMjM5ODsmIzI2OTg5OyYjMjEyMDk7JiMxMjUwMTsmIzEyNTI1OyYjMTI1NDA7PC90aXRsZT48ZGVmcy8+PGc+PGcgY2xhc3M9InRpdGxlIiBkYXRhLXNvdXJjZS1saW5lPSIxIj48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM5Ljk5OTQiIHg9IjMyNy43MTE1IiB5PSIzMi45OTUxIj4mIzIyMzEyOyYjMjQyMzU7JiMzMTY0OTsmIzI5NzAyOyYjMTIzOTg7JiMyNjk4OTsmIzIxMjA5OyYjMTI1MDE7JiMxMjUyNTsmIzEyNTQwOzwvdGV4dD48L2c+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIyMC45NTMxIiBzdHlsZT0ic3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNzY1LjQyMjQiIHg9IjE1IiB5PSI1MC4wNDIiLz48ZWxsaXBzZSBjeD0iMjA0LjcyMjUiIGN5PSI4NS45OTUxIiBmaWxsPSIjMjIyMjIyIiByeD0iMTAiIHJ5PSIxMCIgc3R5bGU9InN0cm9rZTojMjIyMjIyO3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0yNzYuNzIyOCwxMTIuODQ2NyBMMjc2LjcyMjgsMTI4Ljk3OTUgTDI1Ni43MjI4LDEzMi45Nzk1IEwyNzYuNzIyOCwxMzYuOTc5NSBMMjc2LjcyMjgsMTUzLjExMjMgQTAsMCAwIDAgMCAyNzYuNzIyOCwxNTMuMTEyMyBMNDI3LjcyMywxNTMuMTEyMyBBMCwwIDAgMCAwIDQyNy43MjMsMTUzLjExMjMgTDQyNy43MjMsMTIyLjg0NjcgTDQxNy43MjMsMTEyLjg0NjcgTDI3Ni43MjI4LDExMi44NDY3IEEwLDAgMCAwIDAgMjc2LjcyMjgsMTEyLjg0NjciIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik00MTcuNzIzLDExMi44NDY3IEw0MTcuNzIzLDEyMi44NDY3IEw0MjcuNzIzLDEyMi44NDY3IEw0MTcuNzIzLDExMi44NDY3IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzAuMDAwMiIgeD0iMjgyLjcyMjgiIHk9IjEyOS45MTM2Ij4mIzIwMTgxOyYjMjA4Mzc7JiMxMjUzOTsmIzIwNDg5OyYjMjQyMzU7JiMzMTIyNzsmIzIxMjA1OyYjMTIzOTQ7JiMxMjM5MzsmIzEyMzkxOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2NS4wMDAxIiB4PSIyODIuNzIyOCIgeT0iMTQ1LjA0NjQiPiYjMjIzMTI7JiMyNDIzNTsmIzEyMzY0OyYjMjI2Nzk7JiMyMTE1Mjs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEwNC4wMDA2IiB4PSIxNTIuNzIyMiIgeT0iMTE1Ljk5NTEiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4NC4wMDA2IiB4PSIxNjIuNzIyMiIgeT0iMTM3LjEzMzgiPiYjMjA4Mzc7JiMzMzY1NTsmIzEyNTM5OyYjMjA4Mzc7JiMyNDIzNTsmIzIwOTY2OyYjMjk3MDI7PC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI5Mi4wMDA1IiB4PSIxNTguNzIyMiIgeT0iMTczLjExMjMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3Mi4wMDA1IiB4PSIxNjguNzIyMiIgeT0iMTk0LjI1MSI+JiMyMjMxMjsmIzI0MjM1OyYjMjQ3NzM7JiMyMjU3NzsmIzI2MzU2OyYjMjYwMzI7PC90ZXh0PjxyZWN0IGZpbGw9IiM1NTU1NTUiIGhlaWdodD0iNiIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojNTU1NTU1O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjI1OS42MzAxIiB4PSI3NC45MDc1IiB5PSIyMjcuMDgxMSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI5NS44MTUiIHg9Ijg4LjkwNzUiIHk9IjI1My4wODExIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzUuODE1IiB4PSI5OC45MDc1IiB5PSIyNzQuMjE5NyI+JiMyOTY5NDsmIzIyMzEyOyYjMjQyMzU7JiMyNTk2ODsgJiMyMjY3OTsmIzIxMTUyOzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTA3LjgxNTEiIHg9IjIxMi43MjI1IiB5PSIyNTMuMDgxMSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg3LjgxNTEiIHg9IjIyMi43MjI1IiB5PSIyNzQuMjE5NyI+JiMyMDgzNzsmIzIwOTg2OyYjMjQyMzU7JiMyMzY1MzsmIzI3NTA4OyAmIzM1MzUyOyYjMzc2ODI7PC90ZXh0PjxyZWN0IGZpbGw9IiM1NTU1NTUiIGhlaWdodD0iNiIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojNTU1NTU1O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjI1OS42MzAxIiB4PSI3NC45MDc1IiB5PSIzMDcuMDQ5OCIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI5Mi4wMDA1IiB4PSIxNTguNzIyMiIgeT0iNDQ0LjEzNTciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3Mi4wMDA1IiB4PSIxNjguNzIyMiIgeT0iNDY1LjI3NDQiPiYjMjA5ODY7JiMzMzY1NTsmIzI1MzUxOyYjMzEwMzQ7JiMyMTQ2MzsmIzM4OTM2OzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iODAuMDAwNSIgeD0iMTY0LjcyMjMiIHk9IjQ5OC4xMDQ1Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjAuMDAwNSIgeD0iMTc0LjcyMjMiIHk9IjUxOS4yNDMyIj4mIzEyNTAwOyYjMTI0ODM7JiMxMjQ2MTsmIzEyNTMxOyYjMTI0NjQ7PC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI2OC4wMDA0IiB4PSIxNzAuNzIyMyIgeT0iNTUyLjA3MzIiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0OC4wMDA0IiB4PSIxODAuNzIyMyIgeT0iNTczLjIxMTkiPiYjMjA5ODY7JiMzMzY1NTsmIzIwOTY2OyYjMjk3MDI7PC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI5Mi4wMDA1IiB4PSIxNTguNzIyMiIgeT0iNjA2LjA0MiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjcyLjAwMDUiIHg9IjE2OC43MjIyIiB5PSI2MjcuMTgwNyI+JiMyMjMxMjsmIzI0MjM1OyYjMjQ3NzM7JiMyMjU3NzsmIzI2MzU2OyYjMjYwMzI7PC90ZXh0PjxyZWN0IGZpbGw9IiM1NTU1NTUiIGhlaWdodD0iNiIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojNTU1NTU1O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjM2OS40NDUiIHg9IjIxIiB5PSI2NjAuMDEwNyIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI5NS44MTUiIHg9IjMzIiB5PSI2ODYuMDEwNyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc1LjgxNSIgeD0iNDMiIHk9IjcwNy4xNDk0Ij4mIzI5Njk0OyYjMjIzMTI7JiMyNDIzNTsmIzI1OTY4OyAmIzI4MTg3OyYjMjM1Njk7PC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI4My44MTQ5IiB4PSIxNTYuODE1IiB5PSI2ODYuMDEwNyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYzLjgxNDkiIHg9IjE2Ni44MTUiIHk9IjcwNy4xNDk0Ij4mIzI0MzQxOyYjMjQ0MDM7JiMyNTk2ODsgJiMyODE4NzsmIzIzNTY5OzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTA3LjgxNTEiIHg9IjI2OC42Mjk5IiB5PSI2ODYuMDEwNyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg3LjgxNTEiIHg9IjI3OC42Mjk5IiB5PSI3MDcuMTQ5NCI+JiMyMDgzNzsmIzIwOTg2OyYjMjQyMzU7JiMyMzY1MzsmIzI3NTA4OyAmIzM1MzUyOyYjMzc2ODI7PC90ZXh0PjxyZWN0IGZpbGw9IiM1NTU1NTUiIGhlaWdodD0iNiIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojNTU1NTU1O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjM2OS40NDUiIHg9IjIxIiB5PSI3MzkuOTc5NSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI4MC4wMDA1IiB4PSIxNjQuNzIyMyIgeT0iODY4LjM1MDYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2MC4wMDA1IiB4PSIxNzQuNzIyMyIgeT0iODg5LjQ4OTMiPiYjMjY4NDI7JiMyMTM2ODsmIzM0OTIwOyYjMzAzMzA7JiMzNDg5Mjs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjkyLjAwMDUiIHg9IjE1OC43MjIyIiB5PSI5MjIuMzE5MyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjcyLjAwMDUiIHg9IjE2OC43MjIyIiB5PSI5NDMuNDU4Ij4mIzIzNDU1OyYjMjY4NDI7JiMxMjQ1OTsmIzEyNDU0OyYjMTI1MzE7JiMxMjQ4ODs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjY4LjAwMDQiIHg9IjE3MC43MjIzIiB5PSI5NzYuMjg4MSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ4LjAwMDQiIHg9IjE4MC43MjIzIiB5PSI5OTcuNDI2OCI+JiMyNDA0NjsmIzMwMDY0OyYjMjA4Mzc7JiMyMTE0Nzs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjkyLjAwMDUiIHg9IjE1OC43MjIyIiB5PSIxMDc4LjY1OTIiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3Mi4wMDA1IiB4PSIxNjguNzIyMiIgeT0iMTA5OS43OTc5Ij4mIzIyMzEyOyYjMjQyMzU7JiMzNTUxOTsmIzI1OTcyOyYjMjA5NjY7JiMyOTcwMjs8L3RleHQ+PHBvbHlnb24gZmlsbD0iI0YxRjFGMSIgcG9pbnRzPSIxNzkuODAzNSwxMDMwLjI1NjgsMjI5LjY0MTUsMTAzMC4yNTY4LDI0MS42NDE1LDEwNDIuMjU2OCwyMjkuNjQxNSwxMDU0LjI1NjgsMTc5LjgwMzUsMTA1NC4yNTY4LDE2Ny44MDM1LDEwNDIuMjU2OCwxNzkuODAzNSwxMDMwLjI1NjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE5LjAwODMiIHg9IjIwOC43MjI1IiB5PSIxMDY0LjQ2NzMiPnllczwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0OS44MzgxIiB4PSIxNzkuODAzNSIgeT0iMTA0Ni4wNjQ5Ij4mIzI0MDQ2OyYjMzAwNjQ7JiMxMjM1NDsmIzEyNDI2Oz88L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMuNzAxNyIgeD0iMjQxLjY0MTUiIHk9IjEwMzkuNjYyNiI+bm88L3RleHQ+PHBvbHlnb24gZmlsbD0iI0YxRjFGMSIgcG9pbnRzPSIyMDQuNzIyNSwxMTMyLjYyNzksMjE2LjcyMjUsMTE0NC42Mjc5LDIwNC43MjI1LDExNTYuNjI3OSwxOTIuNzIyNSwxMTQ0LjYyNzksMjA0LjcyMjUsMTEzMi42Mjc5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNjguMDAwNCIgeD0iMTcwLjcyMjMiIHk9IjExNzYuNjI3OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ4LjAwMDQiIHg9IjE4MC43MjIzIiB5PSIxMTk3Ljc2NjYiPiYjMjY4NDI7JiMyMTM2ODsmIzIzNDM2OyYjMjAxMDI7PC90ZXh0PjxlbGxpcHNlIGN4PSIyMDQuNzIyNSIgY3k9IjEyODUuNTk2NyIgZmlsbD0ibm9uZSIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MTsiLz48ZWxsaXBzZSBjeD0iMjA0LjcyMjUiIGN5PSIxMjg1LjU5NjciIGZpbGw9IiMyMjIyMjIiIHJ4PSI2IiByeT0iNiIgc3R5bGU9InN0cm9rZTojMjIyMjIyO3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjE1IiB4Mj0iMTUiIHkxPSI1MC4wNDIiIHkyPSIxMjk2LjU5NjciLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNjguMDAwNCIgeD0iNDM4LjcyMyIgeT0iMzMzLjA0OTgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0OC4wMDA0IiB4PSI0NDguNzIzIiB5PSIzNTQuMTg4NSI+JiMyMTQ2MzsmIzI3ODgwOyYjMzAzMzE7JiMzNzY4Mjs8L3RleHQ+PHBhdGggZD0iTTUyNi43MjMzLDM4My44NzAxIEw1MjYuNzIzMyw0MDAuMDAyOSBMNTA2LjcyMzMsNDA0LjAwMjkgTDUyNi43MjMzLDQwOC4wMDI5IEw1MjYuNzIzMyw0MjQuMTM1NyBBMCwwIDAgMCAwIDUyNi43MjMzLDQyNC4xMzU3IEw2NTEuNzIzNSw0MjQuMTM1NyBBMCwwIDAgMCAwIDY1MS43MjM1LDQyNC4xMzU3IEw2NTEuNzIzNSwzOTMuODcwMSBMNjQxLjcyMzUsMzgzLjg3MDEgTDUyNi43MjMzLDM4My44NzAxIEEwLDAgMCAwIDAgNTI2LjcyMzMsMzgzLjg3MDEiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik02NDEuNzIzNSwzODMuODcwMSBMNjQxLjcyMzUsMzkzLjg3MDEgTDY1MS43MjM1LDM5My44NzAxIEw2NDEuNzIzNSwzODMuODcwMSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA0LjAwMDEiIHg9IjUzMi43MjMzIiB5PSI0MDAuOTM3Ij4mIzIxNDYzOyYjMjc4ODA7JiMyNjE3ODsmIzEyMzk1OyYjMjQzNDE7JiMyNDQwMzsmIzI1OTY4OyYjMTI0MzQ7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc4LjAwMDEiIHg9IjUzMi43MjMzIiB5PSI0MTYuMDY5OCI+JiMzNTMzNjsmIzE5OTc4OyYjMTIzNzU7JiMxMjM5MDsmIzMwOTA2OyYjMjA0NDU7PC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI2OC4wMDA0IiB4PSI0MzguNzIzIiB5PSIzODcuMDE4NiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ4LjAwMDQiIHg9IjQ0OC43MjMiIHk9IjQwOC4xNTcyIj4mIzIyMzEyOyYjMjQyMzU7JiMyNDM0MTsmIzI0NDAzOzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHgxPSI0MzIuNzIzIiB4Mj0iNDMyLjcyMyIgeTE9IjUwLjA0MiIgeTI9IjEyOTYuNTk2NyIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI2OC4wMDA0IiB4PSI2NzQuNjQyMyIgeT0iODE0LjM4MTgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0OC4wMDA0IiB4PSI2ODQuNjQyMyIgeT0iODM1LjUyMDUiPiYjMjY4NDI7JiMyMTM2ODsmIzI1MzUxOyYjMzEwMzQ7PC90ZXh0Pjxwb2x5Z29uIGZpbGw9IiNGMUYxRjEiIHBvaW50cz0iNjgzLjcyMzUsNzY1Ljk3OTUsNzMzLjU2MTUsNzY1Ljk3OTUsNzQ1LjU2MTUsNzc3Ljk3OTUsNzMzLjU2MTUsNzg5Ljk3OTUsNjgzLjcyMzUsNzg5Ljk3OTUsNjcxLjcyMzUsNzc3Ljk3OTUsNjgzLjcyMzUsNzY1Ljk3OTUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE5LjAwODMiIHg9IjcxMi42NDI1IiB5PSI4MDAuMTg5OSI+eWVzPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ5LjgzODEiIHg9IjY4My43MjM1IiB5PSI3ODEuNzg3NiI+JiMyNjg0MjsmIzIxMzY4OyYjMjYxNzg7JiMyNjM5OTs/PC90ZXh0Pjxwb2x5Z29uIGZpbGw9IiNGMUYxRjEiIHBvaW50cz0iNzA4LjY0MjUsMTIzMC41OTY3LDcyMC42NDI1LDEyNDIuNTk2Nyw3MDguNjQyNSwxMjU0LjU5NjcsNjk2LjY0MjUsMTI0Mi41OTY3LDcwOC42NDI1LDEyMzAuNTk2NyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB4MT0iNjU2LjcyMzUiIHgyPSI2NTYuNzIzNSIgeTE9IjUwLjA0MiIgeTI9IjEyOTYuNTk2NyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9Ijc3OC41NjE1IiB4Mj0iNzc4LjU2MTUiIHkxPSI1MC4wNDIiIHkyPSIxMjk2LjU5NjciLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjA0LjcyMjUiIHgyPSIyMDQuNzIyNSIgeTE9Ijk1Ljk5NTEiIHkyPSIxMTUuOTk1MSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjAwLjcyMjUsMTA1Ljk5NTEsMjA0LjcyMjUsMTE1Ljk5NTEsMjA4LjcyMjUsMTA1Ljk5NTEsMjA0LjcyMjUsMTA5Ljk5NTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjA0LjcyMjUiIHgyPSIyMDQuNzIyNSIgeTE9IjE0OS45NjM5IiB5Mj0iMTczLjExMjMiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjIwMC43MjI1LDE2My4xMTIzLDIwNC43MjI1LDE3My4xMTIzLDIwOC43MjI1LDE2My4xMTIzLDIwNC43MjI1LDE2Ny4xMTIzIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEzNi44MTUiIHgyPSIxMzYuODE1IiB5MT0iMjMzLjA4MTEiIHkyPSIyNTMuMDgxMSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTMyLjgxNSwyNDMuMDgxMSwxMzYuODE1LDI1My4wODExLDE0MC44MTUsMjQzLjA4MTEsMTM2LjgxNSwyNDcuMDgxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyNjYuNjMiIHgyPSIyNjYuNjMiIHkxPSIyMzMuMDgxMSIgeTI9IjI1My4wODExIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyNjIuNjMsMjQzLjA4MTEsMjY2LjYzLDI1My4wODExLDI3MC42MywyNDMuMDgxMSwyNjYuNjMsMjQ3LjA4MTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTM2LjgxNSIgeDI9IjEzNi44MTUiIHkxPSIyODcuMDQ5OCIgeTI9IjMwNy4wNDk4Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMzIuODE1LDI5Ny4wNDk4LDEzNi44MTUsMzA3LjA0OTgsMTQwLjgxNSwyOTcuMDQ5OCwxMzYuODE1LDMwMS4wNDk4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjI2Ni42MyIgeDI9IjI2Ni42MyIgeTE9IjI4Ny4wNDk4IiB5Mj0iMzA3LjA0OTgiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjI2Mi42MywyOTcuMDQ5OCwyNjYuNjMsMzA3LjA0OTgsMjcwLjYzLDI5Ny4wNDk4LDI2Ni42MywzMDEuMDQ5OCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyMDQuNzIyNSIgeDI9IjIwNC43MjI1IiB5MT0iMjA3LjA4MTEiIHkyPSIyMjcuMDgxMSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjAwLjcyMjUsMjE3LjA4MTEsMjA0LjcyMjUsMjI3LjA4MTEsMjA4LjcyMjUsMjE3LjA4MTEsMjA0LjcyMjUsMjIxLjA4MTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjA0LjcyMjUiIHgyPSIyMDQuNzIyNSIgeTE9IjQ3OC4xMDQ1IiB5Mj0iNDk4LjEwNDUiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjIwMC43MjI1LDQ4OC4xMDQ1LDIwNC43MjI1LDQ5OC4xMDQ1LDIwOC43MjI1LDQ4OC4xMDQ1LDIwNC43MjI1LDQ5Mi4xMDQ1IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjIwNC43MjI1IiB4Mj0iMjA0LjcyMjUiIHkxPSI1MzIuMDczMiIgeTI9IjU1Mi4wNzMyIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyMDAuNzIyNSw1NDIuMDczMiwyMDQuNzIyNSw1NTIuMDczMiwyMDguNzIyNSw1NDIuMDczMiwyMDQuNzIyNSw1NDYuMDczMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyMDQuNzIyNSIgeDI9IjIwNC43MjI1IiB5MT0iNTg2LjA0MiIgeTI9IjYwNi4wNDIiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjIwMC43MjI1LDU5Ni4wNDIsMjA0LjcyMjUsNjA2LjA0MiwyMDguNzIyNSw1OTYuMDQyLDIwNC43MjI1LDYwMC4wNDIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iODAuOTA3NSIgeDI9IjgwLjkwNzUiIHkxPSI2NjYuMDEwNyIgeTI9IjY4Ni4wMTA3Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI3Ni45MDc1LDY3Ni4wMTA3LDgwLjkwNzUsNjg2LjAxMDcsODQuOTA3NSw2NzYuMDEwNyw4MC45MDc1LDY4MC4wMTA3IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE5OC43MjI1IiB4Mj0iMTk4LjcyMjUiIHkxPSI2NjYuMDEwNyIgeTI9IjY4Ni4wMTA3Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxOTQuNzIyNSw2NzYuMDEwNywxOTguNzIyNSw2ODYuMDEwNywyMDIuNzIyNSw2NzYuMDEwNywxOTguNzIyNSw2ODAuMDEwNyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMjIuNTM3NSIgeDI9IjMyMi41Mzc1IiB5MT0iNjY2LjAxMDciIHkyPSI2ODYuMDEwNyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzE4LjUzNzUsNjc2LjAxMDcsMzIyLjUzNzUsNjg2LjAxMDcsMzI2LjUzNzUsNjc2LjAxMDcsMzIyLjUzNzUsNjgwLjAxMDciIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iODAuOTA3NSIgeDI9IjgwLjkwNzUiIHkxPSI3MTkuOTc5NSIgeTI9IjczOS45Nzk1Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI3Ni45MDc1LDcyOS45Nzk1LDgwLjkwNzUsNzM5Ljk3OTUsODQuOTA3NSw3MjkuOTc5NSw4MC45MDc1LDczMy45Nzk1IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE5OC43MjI1IiB4Mj0iMTk4LjcyMjUiIHkxPSI3MTkuOTc5NSIgeTI9IjczOS45Nzk1Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxOTQuNzIyNSw3MjkuOTc5NSwxOTguNzIyNSw3MzkuOTc5NSwyMDIuNzIyNSw3MjkuOTc5NSwxOTguNzIyNSw3MzMuOTc5NSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMjIuNTM3NSIgeDI9IjMyMi41Mzc1IiB5MT0iNzE5Ljk3OTUiIHkyPSI3MzkuOTc5NSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzE4LjUzNzUsNzI5Ljk3OTUsMzIyLjUzNzUsNzM5Ljk3OTUsMzI2LjUzNzUsNzI5Ljk3OTUsMzIyLjUzNzUsNzMzLjk3OTUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjA0LjcyMjUiIHgyPSIyMDQuNzIyNSIgeTE9IjY0MC4wMTA3IiB5Mj0iNjYwLjAxMDciLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjIwMC43MjI1LDY1MC4wMTA3LDIwNC43MjI1LDY2MC4wMTA3LDIwOC43MjI1LDY1MC4wMTA3LDIwNC43MjI1LDY1NC4wMTA3IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjIwNC43MjI1IiB4Mj0iMjA0LjcyMjUiIHkxPSI5MDIuMzE5MyIgeTI9IjkyMi4zMTkzIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyMDAuNzIyNSw5MTIuMzE5MywyMDQuNzIyNSw5MjIuMzE5MywyMDguNzIyNSw5MTIuMzE5MywyMDQuNzIyNSw5MTYuMzE5MyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyMDQuNzIyNSIgeDI9IjIwNC43MjI1IiB5MT0iOTU2LjI4ODEiIHkyPSI5NzYuMjg4MSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjAwLjcyMjUsOTY2LjI4ODEsMjA0LjcyMjUsOTc2LjI4ODEsMjA4LjcyMjUsOTY2LjI4ODEsMjA0LjcyMjUsOTcwLjI4ODEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjA0LjcyMjUiIHgyPSIyMDQuNzIyNSIgeTE9IjEwNTQuMjU2OCIgeTI9IjEwNzguNjU5MiIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjAwLjcyMjUsMTA2OC42NTkyLDIwNC43MjI1LDEwNzguNjU5MiwyMDguNzIyNSwxMDY4LjY1OTIsMjA0LjcyMjUsMTA3Mi42NTkyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjI0MS42NDE1IiB4Mj0iMjYwLjcyMjgiIHkxPSIxMDQyLjI1NjgiIHkyPSIxMDQyLjI1NjgiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjI1Ni43MjI4LDEwODUuNjQzNiwyNjAuNzIyOCwxMDk1LjY0MzYsMjY0LjcyMjgsMTA4NS42NDM2LDI2MC43MjI4LDEwODkuNjQzNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyNjAuNzIyOCIgeDI9IjI2MC43MjI4IiB5MT0iMTA0Mi4yNTY4IiB5Mj0iMTE0NC42Mjc5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjI2MC43MjI4IiB4Mj0iMjE2LjcyMjUiIHkxPSIxMTQ0LjYyNzkiIHkyPSIxMTQ0LjYyNzkiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjIyNi43MjI1LDExNDAuNjI3OSwyMTYuNzIyNSwxMTQ0LjYyNzksMjI2LjcyMjUsMTE0OC42Mjc5LDIyMi43MjI1LDExNDQuNjI3OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyMDQuNzIyNSIgeDI9IjIwNC43MjI1IiB5MT0iMTExMi42Mjc5IiB5Mj0iMTEzMi42Mjc5Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyMDAuNzIyNSwxMTIyLjYyNzksMjA0LjcyMjUsMTEzMi42Mjc5LDIwOC43MjI1LDExMjIuNjI3OSwyMDQuNzIyNSwxMTI2LjYyNzkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjA0LjcyMjUiIHgyPSIyMDQuNzIyNSIgeTE9IjEwMTAuMjU2OCIgeTI9IjEwMzAuMjU2OCIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjAwLjcyMjUsMTAyMC4yNTY4LDIwNC43MjI1LDEwMzAuMjU2OCwyMDguNzIyNSwxMDIwLjI1NjgsMjA0LjcyMjUsMTAyNC4yNTY4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjIwNC43MjI1IiB4Mj0iMjA0LjcyMjUiIHkxPSIxMTU2LjYyNzkiIHkyPSIxMTc2LjYyNzkiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjIwMC43MjI1LDExNjYuNjI3OSwyMDQuNzIyNSwxMTc2LjYyNzksMjA4LjcyMjUsMTE2Ni42Mjc5LDIwNC43MjI1LDExNzAuNjI3OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0NzIuNzIzMiIgeDI9IjQ3Mi43MjMyIiB5MT0iMzY3LjAxODYiIHkyPSIzODcuMDE4NiIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNDY4LjcyMzIsMzc3LjAxODYsNDcyLjcyMzIsMzg3LjAxODYsNDc2LjcyMzIsMzc3LjAxODYsNDcyLjcyMzIsMzgxLjAxODYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNzA4LjY0MjUiIHgyPSI3MDguNjQyNSIgeTE9Ijc4OS45Nzk1IiB5Mj0iODE0LjM4MTgiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjcwNC42NDI1LDgwNC4zODE4LDcwOC42NDI1LDgxNC4zODE4LDcxMi42NDI1LDgwNC4zODE4LDcwOC42NDI1LDgwOC4zODE4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9Ijc0NS41NjE1IiB4Mj0iNzU5LjU2MTUiIHkxPSI3NzcuOTc5NSIgeTI9Ijc3Ny45Nzk1Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI3NTUuNTYxNSw5OTcuMTkwNCw3NTkuNTYxNSwxMDA3LjE5MDQsNzYzLjU2MTUsOTk3LjE5MDQsNzU5LjU2MTUsMTAwMS4xOTA0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9Ijc1OS41NjE1IiB4Mj0iNzU5LjU2MTUiIHkxPSI3NzcuOTc5NSIgeTI9IjEyNDIuNTk2NyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI3NTkuNTYxNSIgeDI9IjcyMC42NDI1IiB5MT0iMTI0Mi41OTY3IiB5Mj0iMTI0Mi41OTY3Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI3MzAuNjQyNSwxMjM4LjU5NjcsNzIwLjY0MjUsMTI0Mi41OTY3LDczMC42NDI1LDEyNDYuNTk2Nyw3MjYuNjQyNSwxMjQyLjU5NjciIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjA0LjcyMjUiIHgyPSIyMDQuNzIyNSIgeTE9IjMxMy4wNDk4IiB5Mj0iMzE4LjA0OTgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjA0LjcyMjUiIHgyPSI0NzIuNzIzMiIgeTE9IjMxOC4wNDk4IiB5Mj0iMzE4LjA0OTgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDcyLjcyMzIiIHgyPSI0NzIuNzIzMiIgeTE9IjMxOC4wNDk4IiB5Mj0iMzMzLjA0OTgiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjQ2OC43MjMyLDMyMy4wNDk4LDQ3Mi43MjMyLDMzMy4wNDk4LDQ3Ni43MjMyLDMyMy4wNDk4LDQ3Mi43MjMyLDMyNy4wNDk4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjQ3Mi43MjMyIiB4Mj0iNDcyLjcyMzIiIHkxPSI0MjAuOTg3MyIgeTI9IjQyOS4xMzU3Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjQ3Mi43MjMyIiB4Mj0iMjA0LjcyMjUiIHkxPSI0MjkuMTM1NyIgeTI9IjQyOS4xMzU3Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjIwNC43MjI1IiB4Mj0iMjA0LjcyMjUiIHkxPSI0MjkuMTM1NyIgeTI9IjQ0NC4xMzU3Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyMDAuNzIyNSw0MzQuMTM1NywyMDQuNzIyNSw0NDQuMTM1NywyMDguNzIyNSw0MzQuMTM1NywyMDQuNzIyNSw0MzguMTM1NyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI3MDguNjQyNSIgeDI9IjcwOC42NDI1IiB5MT0iODQ4LjM1MDYiIHkyPSI4NTMuMzUwNiIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI3MDguNjQyNSIgeDI9IjIwNC43MjI1IiB5MT0iODUzLjM1MDYiIHkyPSI4NTMuMzUwNiIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyMDQuNzIyNSIgeDI9IjIwNC43MjI1IiB5MT0iODUzLjM1MDYiIHkyPSI4NjguMzUwNiIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjAwLjcyMjUsODU4LjM1MDYsMjA0LjcyMjUsODY4LjM1MDYsMjA4LjcyMjUsODU4LjM1MDYsMjA0LjcyMjUsODYyLjM1MDYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjA0LjcyMjUiIHgyPSIyMDQuNzIyNSIgeTE9IjEyMTAuNTk2NyIgeTI9IjEyMTguMzk1NSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyMDQuNzIyNSIgeDI9IjcwOC42NDI1IiB5MT0iMTIxOC4zOTU1IiB5Mj0iMTIxOC4zOTU1Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjcwOC42NDI1IiB4Mj0iNzA4LjY0MjUiIHkxPSIxMjE4LjM5NTUiIHkyPSIxMjMwLjU5NjciLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjcwNC42NDI1LDEyMjAuNTk2Nyw3MDguNjQyNSwxMjMwLjU5NjcsNzEyLjY0MjUsMTIyMC41OTY3LDcwOC42NDI1LDEyMjQuNTk2NyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyMDQuNzIyNSIgeDI9IjIwNC43MjI1IiB5MT0iNzQ1Ljk3OTUiIHkyPSI3NTAuOTc5NSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyMDQuNzIyNSIgeDI9IjcwOC42NDI1IiB5MT0iNzUwLjk3OTUiIHkyPSI3NTAuOTc5NSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI3MDguNjQyNSIgeDI9IjcwOC42NDI1IiB5MT0iNzUwLjk3OTUiIHkyPSI3NjUuOTc5NSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNzA0LjY0MjUsNzU1Ljk3OTUsNzA4LjY0MjUsNzY1Ljk3OTUsNzEyLjY0MjUsNzU1Ljk3OTUsNzA4LjY0MjUsNzU5Ljk3OTUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNzA4LjY0MjUiIHgyPSI3MDguNjQyNSIgeTE9IjEyNTQuNTk2NyIgeTI9IjEyNTkuNTk2NyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI3MDguNjQyNSIgeDI9IjIwNC43MjI1IiB5MT0iMTI1OS41OTY3IiB5Mj0iMTI1OS41OTY3Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjIwNC43MjI1IiB4Mj0iMjA0LjcyMjUiIHkxPSIxMjU5LjU5NjciIHkyPSIxMjc0LjU5NjciLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjIwMC43MjI1LDEyNjQuNTk2NywyMDQuNzIyNSwxMjc0LjU5NjcsMjA4LjcyMjUsMTI2NC41OTY3LDIwNC43MjI1LDEyNjguNTk2NyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE4IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjcxLjk5OTYiIHg9IjE4Ny44NjE3IiB5PSI2Ni43NSI+JiMyMDQ4OTsmIzI0MjM1OyYjMzcwOTY7JiMzODI3Mjs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTgiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzEuOTk5NiIgeD0iNTA4LjcyMzQiIHk9IjY2Ljc1Ij4mIzIxOTQyOyYjMjY5ODk7JiMzNzA5NjsmIzM4MjcyOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3MS45OTk2IiB4PSI2ODEuNjQyNyIgeT0iNjYuNzUiPiYjMzIwNzY7JiMyOTcwMjsmIzM3MDk2OyYjMzgyNzI7PC90ZXh0Pjw/cGxhbnR1bWwtc3JjIFpMQkJKamowNUR0Rkx5bW8tR0x4bU8tbVlPRzNMZjVKOVR1V2lNMHlXajFXSDBpdThHcUwyTXMyMFNLbzQyMW9lN3BDcFNtdVZ5N3JReTUzUWRWTUVTVnRGM0lzUVF5Ukw5cHc4aGZNbUsxenRtNE1vRTVPeDdNMVV5MzdtOXk4c0hIUnRyMm11RndZbFJMOTZkUWJSWEREUjBfWl9LVldDX24wTFpINy1CakVoOWZqcUJndmtjUGhUM3hwYTRtYXdHNXJDSER4N2gwaE85VjBCZlFqcDFZT0F5dXhlaktkVTNINTlEeU1fSGxQY3lYc2c5RGdoVnc1UUVoV1Jxdnc4U3RxNktLaGduTkpJbEU4UGZHYWtIZEF5T0o2X2lkMmxTcXJYaE1JejZXX09CY1lYb09FRWxCRUx6clBnaWt6blBDZGRlX1V6aVk0aWtpMG90YUMwU3hYaVhOeGtfRGYyclc3czRZVEhfRU5Obl9jcVowTDNZTlRmbGVKdVFMNV9tSkRXMXkzdi0zV21kVldYN2VYQXNSeXhvZGFqMlYyNy0tY0EzOS1wbHZ4QTdObE9lZ1lXTGNiOVZkeGZ6WVZ1V0pvejZvZkpFcXJtd0FiM1FESDliZkVmVnRxMy1xcERYeFdwYjR5UzlFWW1IYzJ1NW8zQ3FoUXl6cTRWMG9LNW9SSE1acXpUU21HTzB1dWhOVUVNVmx1d2FMd2FzOG1PeHJYcTk5TEFuRWlPNU9CT242dXlvWVhLbjNWUmt0aEFtMDA/PjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_2">在庫管理で扱うデータ<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>データ</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>在庫データ</strong></td>
<td>倉庫×商品の現在の在庫状態</td>
</tr>
<tr>
<td><strong>入出庫履歴</strong></td>
<td>在庫の増減を時系列で記録</td>
</tr>
<tr>
<td><strong>棚卸データ</strong></td>
<td>棚卸作業の管理情報</td>
</tr>
<tr>
<td><strong>棚卸明細</strong></td>
<td>商品ごとの帳簿在庫と実棚数</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="91-db">9.1 在庫情報の DB 設計<a class="headerlink" href="#91-db" title="Permanent link">&para;</a></h2>
<h3 id="_3">在庫数量の種類<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p>在庫管理では「倉庫コード × 商品コード」の組み合わせで在庫を管理します。</p>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjQ2MXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NzU5cHg7aGVpZ2h0OjQ2MXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDc1OSA0NjEiIHdpZHRoPSI3NTlweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjIzMTI7JiMyNDIzNTsmIzI1OTY4OyYjMzczMjc7JiMxMjM5ODsmIzM4MzA2OyYjMjA0MTg7PC90aXRsZT48ZGVmcy8+PGc+PGcgY2xhc3M9InRpdGxlIiBkYXRhLXNvdXJjZS1saW5lPSIxIj48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTcuOTk5NiIgeD0iMzIzLjc1MDMiIHk9IjIyLjk5NTEiPiYjMjIzMTI7JiMyNDIzNTsmIzI1OTY4OyYjMzczMjc7JiMxMjM5ODsmIzM4MzA2OyYjMjA0MTg7PC90ZXh0PjwvZz48IS0tY2x1c3RlciA/Pz8/Pz8/LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Ii4uLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjMiIGlkPSJlbnQwMDAyIj48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjMyMy4yOCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjQ4NCIgeD0iNyIgeT0iNDQuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ny45OTk2IiB4PSIyMDAuMDAwMiIgeT0iNTkuMjkyIj4mIzIyMzEyOyYjMjQyMzU7JiMyNTk2ODsmIzM3MzI3OyYjMTIzOTg7JiMzMTI3ODsmIzM5MDA2OzwvdGV4dD48L2c+PCEtLWVudGl0eSBjdXJyZW50LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uLi4uLi5jdXJyZW50IiBkYXRhLXNvdXJjZS1saW5lPSI0IiBpZD0iZW50MDAwMyI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzOC41OTM4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMzEuOTk5NSIgeD0iMjMiIHk9Ijc5LjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSIzMyIgeT0iOTUuMjkyIj4mIzI5Njk0OyYjMjIzMTI7JiMyNDIzNTsmIzI1OTY4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTEuOTk5NSIgeD0iMzMiIHk9IjExMS41ODg5Ij4mIzY1Mjg4OyYjMjkyODk7JiMyOTcwMjsmIzMwMzQwOyYjMTIzOTQ7JiMyNTk2ODsmIzM3MzI3OyYjNjUyODk7PC90ZXh0PjwvZz48IS0tZW50aXR5IGFsbG9jYXRlZC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Ii4uLi4uLi4uYWxsb2NhdGVkIiBkYXRhLXNvdXJjZS1saW5lPSI1IiBpZD0iZW50MDAwNCI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzOC41OTM4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMzEuOTk5NSIgeD0iMTkwIiB5PSI3OS4yOTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDEuOTk5OCIgeD0iMjAwIiB5PSI5NS4yOTIiPiYjMjQzNDE7JiMyNDQwMzsmIzI1OTY4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTEuOTk5NSIgeD0iMjAwIiB5PSIxMTEuNTg4OSI+JiM2NTI4ODsmIzMwOTA2OyYjMjA0NDU7JiMyODE2ODsmIzEyNDE1OyYjMjU5Njg7JiMzNzMyNzsmIzY1Mjg5OzwvdGV4dD48L2c+PCEtLWVudGl0eSBhdmFpbGFibGUtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uLi4uLmF2YWlsYWJsZSIgZGF0YS1zb3VyY2UtbGluZT0iNiIgaWQ9ImVudDAwMDUiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzguNTkzOCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTMxLjk5OTUiIHg9IjE4MSIgeT0iMTk1LjcxNjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSIxOTEiIHk9IjIxMS43MTIiPiYjMjYzNzc7JiMyMTE3NzsmIzIyMzEyOyYjMjQyMzU7JiMyNTk2ODs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTExLjk5OTUiIHg9IjE5MSIgeT0iMjI4LjAwODkiPiYjNjUyODg7JiMyMTAzMzsmIzI5OTkyOyYjMjE0ODc7JiMzMzAyMTsmIzI1OTY4OyYjMzczMjc7JiM2NTI4OTs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgb3JkZXJlZC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Ii4uLi4uLi4ub3JkZXJlZCIgZGF0YS1zb3VyY2UtbGluZT0iNyIgaWQ9ImVudDAwMDYiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzguNTkzOCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTE3Ljk5OTYiIHg9IjM1NyIgeT0iNzkuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjM2NyIgeT0iOTUuMjkyIj4mIzMwMzMwOyYjMjc4ODA7JiMyNzUzMTsmIzI1OTY4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ny45OTk2IiB4PSIzNjciIHk9IjExMS41ODg5Ij4mIzY1Mjg4OyYjMjY0MTA7JiMyMDgzNzsmIzMzNjU1OyYjMjU5Njg7JiMzNzMyNzsmIzY1Mjg5OzwvdGV4dD48L2c+PCEtLWVudGl0eSBwcm9qZWN0ZWQtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uLi4uLnByb2plY3RlZCIgZGF0YS1zb3VyY2UtbGluZT0iOCIgaWQ9ImVudDAwMDciPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzguNTkzOCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTMxLjk5OTUiIHg9IjE4MSIgeT0iMzEyLjk4NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSIxOTEiIHk9IjMyOC45ODIiPiYjMjAxMDQ7JiMyMzQ1MDsmIzIyMzEyOyYjMjQyMzU7JiMyNTk2ODs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTExLjk5OTUiIHg9IjE5MSIgeT0iMzQ1LjI3ODkiPiYjNjUyODg7JiMyMzU1ODsmIzI2NDY5OyYjMTIzOTg7JiMzNTIxMTsmIzM2Nzk2OyYjMTI0MTU7JiM2NTI4OTs8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkdNTjEwIiBkYXRhLXNvdXJjZS1saW5lPSIxNSIgaWQ9ImVudDAwMTEiPjxwYXRoIGQ9Ik01MDcuMDIsMTk0Ljg4NjkgTDUwNy4wMiwyMzUuMTUyNSBMNjE4Ljk3NTcsMjM1LjE1MjUgTDYxOC45NzU3LDIwNC44ODY5IEw2MDguOTc1NywxOTQuODg2OSBMNTA3LjAyLDE5NC44ODY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNNjA4Ljk3NTcsMTk0Ljg4NjkgTDYwOC45NzU3LDIwNC44ODY5IEw2MTguOTc1NywyMDQuODg2OSBMNjA4Ljk3NTcsMTk0Ljg4NjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5MC45NTU3IiB4PSI1MTMuMDIiIHk9IjIxMS45NTM4Ij4mIzIwODM3OyYjMjQyMzU7JiMyNTk2ODsgLSAmIzIwOTg2OyYjMjQyMzU7JiMyNTk2ODs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzkiIHg9IjUxMy4wMiIgeT0iMjI3LjA4NjYiPiYjMTIzOTg7JiMzMjA0NzsmIzM1MzM2OzwvdGV4dD48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iR01OMTMiIGRhdGEtc291cmNlLWxpbmU9IjIwIiBpZD0iZW50MDAxNCI+PHBhdGggZD0iTTY1My41LDE5NC44ODY5IEw2NTMuNSwyMzUuMTUyNSBMNzUyLjUwMDEsMjM1LjE1MjUgTDc1Mi41MDAxLDIwNC44ODY5IEw3NDIuNTAwMSwxOTQuODg2OSBMNjUzLjUsMTk0Ljg4NjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik03NDIuNTAwMSwxOTQuODg2OSBMNzQyLjUwMDEsMjA0Ljg4NjkgTDc1Mi41MDAxLDIwNC44ODY5IEw3NDIuNTAwMSwxOTQuODg2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc4LjAwMDEiIHg9IjY1OS41IiB5PSIyMTEuOTUzOCI+JiMyMTQ2MzsmIzI3ODgwOyYjMjYxNzg7JiMxMjM5NTsmIzMwOTA2OyYjMjA0NDU7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY1LjAwMDEiIHg9IjY1OS41IiB5PSIyMjcuMDg2NiI+JiMyMDk4NjsmIzMzNjU1OyYjMTIzOTE7JiMzNTI5OTsmIzI4MDQwOzwvdGV4dD48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iR01OMTYiIGRhdGEtc291cmNlLWxpbmU9IjI1IiBpZD0iZW50MDAxNyI+PHBhdGggZD0iTTUwNy41LDMxMi4xNDY5IEw1MDcuNSwzNTIuNDEyNSBBMCwwIDAgMCAwIDUwNy41LDM1Mi40MTI1IEw2NTguNTAwMiwzNTIuNDEyNSBBMCwwIDAgMCAwIDY1OC41MDAyLDM1Mi40MTI1IEw2NTguNTAwMiwzMjIuMTQ2OSBMNjQ4LjUwMDIsMzEyLjE0NjkgTDUzMC4wNCwzMTIuMTQ2OSBMMzAxLjczLDIzNC43OTY5IEw1MjIuMDQsMzEyLjE0NjkgTDUwNy41LDMxMi4xNDY5IEEwLDAgMCAwIDAgNTA3LjUsMzEyLjE0NjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik02NDguNTAwMiwzMTIuMTQ2OSBMNjQ4LjUwMDIsMzIyLjE0NjkgTDY1OC41MDAyLDMyMi4xNDY5IEw2NDguNTAwMiwzMTIuMTQ2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAzLjk1NTciIHg9IjUxMy41IiB5PSIzMjkuMjEzOCI+JiMyOTY5NDsmIzIyMzEyOyYjMjQyMzU7JiMyNTk2ODsgLSAmIzI0MzQxOyYjMjQ0MDM7JiMyNTk2ODs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMwLjAwMDIiIHg9IjUxMy41IiB5PSIzNDQuMzQ2NiI+JiMyMzQ1NTsmIzM4NTU1OyYjMTIzOTU7JiMyMDk4NjsmIzMzNjU1OyYjMjE0ODc7JiMzMzAyMTsmIzEyMzk0OyYjMjU5Njg7JiMzNzMyNzs8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkdNTjE5IiBkYXRhLXNvdXJjZS1saW5lPSIzMCIgaWQ9ImVudDAwMjAiPjxwYXRoIGQ9Ik0xNTguNSw0MTQuNTc2OSBMMTU4LjUsNDU0Ljg0MjUgQTAsMCAwIDAgMCAxNTguNSw0NTQuODQyNSBMMzM1LjUwMDIsNDU0Ljg0MjUgQTAsMCAwIDAgMCAzMzUuNTAwMiw0NTQuODQyNSBMMzM1LjUwMDIsNDI0LjU3NjkgTDMyNS41MDAyLDQxNC41NzY5IEwyNTEsNDE0LjU3NjkgTDI0NywzNTEuNzA2OSBMMjQzLDQxNC41NzY5IEwxNTguNSw0MTQuNTc2OSBBMCwwIDAgMCAwIDE1OC41LDQxNC41NzY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNMzI1LjUwMDIsNDE0LjU3NjkgTDMyNS41MDAyLDQyNC41NzY5IEwzMzUuNTAwMiw0MjQuNTc2OSBMMzI1LjUwMDIsNDE0LjU3NjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzNi4xNTc0IiB4PSIxNjQuNSIgeT0iNDMxLjY0MzgiPiYjMjYzNzc7JiMyMTE3NzsmIzIyMzEyOyYjMjQyMzU7JiMyNTk2ODsgKyAmIzMwMzMwOyYjMjc4ODA7JiMyNzUzMTsmIzI1OTY4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTYuMDAwMiIgeD0iMTY0LjUiIHk9IjQ0Ni43NzY2Ij4mIzIzNTU4OyYjMjY0Njk7JiMzMDM0MDsmIzEyMzk1OyYjMjEwMzM7JiMyOTk5MjsmIzIxNDg3OyYjMzMwMjE7JiMxMjM5NDsmIzM1MjExOyYjMzY3OTY7JiMxMjQxNTs8L3RleHQ+PC9nPjwhLS1saW5rIGN1cnJlbnQgdG8gYXZhaWxhYmxlLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDMiIGRhdGEtZW50aXR5LTI9ImVudDAwMDUiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSIxMSIgaWQ9ImxuazgiPjxwYXRoIGQ9Ik0xMTQuNzQsMTE4LjIyNjkgQzE0NC4xMiwxMzkuNTA2OSAxODcuMDQxMywxNzAuNTg2NSAyMTYuNDExMywxOTEuODY2NSIgZmlsbD0ibm9uZSIgaWQ9ImN1cnJlbnQtdG8tYXZhaWxhYmxlIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyMjEuMjcsMTk1LjM4NjksMjE2LjMyODksMTg2Ljg2NzIsMjE3LjIyMTEsMTkyLjQ1MzIsMjExLjYzNSwxOTMuMzQ1NSwyMjEuMjcsMTk1LjM4NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IlBSSVZBVEVfTUVUSE9EIj48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIxODAuNDYiIHk9IjE1My45NTMzIi8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjM5IiB4PSIxOTAuNDYiIHk9IjE2MC45NTM4Ij4mIzI0MzQxOyYjMjQ0MDM7JiMyNTk2ODs8L3RleHQ+PC9nPjwhLS1saW5rIGF2YWlsYWJsZSB0byBwcm9qZWN0ZWQtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwNSIgZGF0YS1lbnRpdHktMj0iZW50MDAwNyIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjEyIiBpZD0ibG5rOSI+PHBhdGggZD0iTTI0NywyMzQuNzk2OSBDMjQ3LDI1Ni4yMjY5IDI0NywyODUuMDg2OSAyNDcsMzA2LjUxNjkiIGZpbGw9Im5vbmUiIGlkPSJhdmFpbGFibGUtdG8tcHJvamVjdGVkIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyNDcsMzEyLjUxNjksMjUxLDMwMy41MTY5LDI0NywzMDcuNTE2OSwyNDMsMzAzLjUxNjksMjQ3LDMxMi41MTY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJQVUJMSUNfTUVUSE9EIj48ZWxsaXBzZSBjeD0iMjUzIiBjeT0iMjc0LjIxMzMiIGZpbGw9Im5vbmUiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1Mi4wMDAxIiB4PSIyNjAiIHk9IjI3OC4yMTM4Ij4mIzMwMzMwOyYjMjc4ODA7JiMyNzUzMTsmIzI1OTY4OzwvdGV4dD48L2c+PCEtLWxpbmsgY3VycmVudCB0byBHTU4xMC0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDAzIiBkYXRhLWVudGl0eS0yPSJlbnQwMDExIiBkYXRhLWxpbmstdHlwZT0iYXNzb2NpYXRpb24iIGRhdGEtc291cmNlLWxpbmU9IjE1IiBpZD0ibG5rMTIiPjxwYXRoIGQ9Ik0xNTUuMjksMTE0LjcyNjkgQzIzNS4wOSwxMzMuMDc2OSAzNzMuMDksMTY1LjI0NjkgNDkxLDE5NC44ODY5IEM0OTYuMTQsMTk2LjE3NjkgNTAxLjQ5LDE5Ny41NDY5IDUwNi44MywxOTguOTM2OSIgZmlsbD0ibm9uZSIgaWQ9ImN1cnJlbnQtR01OMTAiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjcsNzsiLz48L2c+PCEtLWxpbmsgYWxsb2NhdGVkIHRvIEdNTjEzLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDQiIGRhdGEtZW50aXR5LTI9ImVudDAwMTQiIGRhdGEtbGluay10eXBlPSJhc3NvY2lhdGlvbiIgZGF0YS1zb3VyY2UtbGluZT0iMjAiIGlkPSJsbmsxNSI+PHBhdGggZD0iTTMyMi4zNywxMTQuNjU2OSBDMzI4LjMyLDExNS44MTY5IDMzNC4yNiwxMTYuOTE2OSAzNDAsMTE3Ljg4NjkgQzQ0OS45MSwxMzYuNDM2OSA0ODMuMjksMTEyLjUyNjkgNTg5LDE0Ny44ODY5IEM2MjEuMzMsMTU4LjY5NjkgNjU0LjY1LDE3OS4zMjY5IDY3Ni44NSwxOTQuNjg2OSIgZmlsbD0ibm9uZSIgaWQ9ImFsbG9jYXRlZC1HTU4xMyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6Nyw3OyIvPjwvZz48P3BsYW50dW1sLXNyYyBWUEJCSmk5MDY4TnR5bklKUldxbHVDOGRTTEZRcU0xZ1FzZnJPcnBLMm5JOWdPY1kwSzRaMVljRzUxQURid1IwbXZJUGpZalVtUWM1d1NOZWhhZF94dm5fcGxjcmFZT1hZNWlNVGVRYUZXdWhmZ1ZSdU1yZEZaaTFHNE0ybmlsUlQ4M0JKVllNN0p1elNGMDgyQm1nR2l1dGZzbllLcnd1WGJfai1yVGJsdGRjd09FT01oWEwzbEJ4SzNYR0xJSGhJbjJ4VEpvdlBiSjdjU19RdkRGbXo1Y011WUw5NE5XRFlLa0VqQWh1dVlsaFlPcy1Wc0RYU25JU0pkQnE4TC1JLUFBNExraXM3RjlnNFJrc0dhYmhXQy14bVVMN2JiREs0UWRDUy11T3M2eGNGQ1RicWt4SUg4QU5NWjFyd1R1aFRhekxUY1gtYjN1Nk9GYmVNMlhpOUNsMFRTV0w4NGswMHljVlE4dTlIN0RoQ0JxcDF1MmlRMFdNNUtySlRnNm9uTEFiaHVZdFdySXZ1aUpWODZoaVJISE8xYTJvMjJGcWJxMElDM1JsOGdGNllRU0Z1cTgwTFFCUFU3ZWx3M3NKel96S01EM2ZZdTJmTG05aUZ1UkRVd2VUWXlQcmlJbHZNcGg5Q3pTenA2TzN1YWYtSmMtT0ZXZGdtS2ZZRGp5MD8+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<table>
<thead>
<tr>
<th>数量種別</th>
<th>説明</th>
<th>計算式</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>現在庫数</strong></td>
<td>物理的に倉庫にある数量</td>
<td>入庫数 - 出庫数</td>
</tr>
<tr>
<td><strong>引当数</strong></td>
<td>受注等で確保済みの数量</td>
<td>受注引当の合計</td>
</tr>
<tr>
<td><strong>有効在庫数</strong></td>
<td>実際に利用可能な数量</td>
<td>現在庫数 - 引当数</td>
</tr>
<tr>
<td><strong>発注残数</strong></td>
<td>発注済みで未入荷の数量</td>
<td>発注数 - 入荷数</td>
</tr>
<tr>
<td><strong>予定在庫数</strong></td>
<td>将来的に利用可能な見込み</td>
<td>有効在庫数 + 発注残数</td>
</tr>
</tbody>
</table>
<h3 id="_4">倉庫マスタの設計<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjkxOXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NDg1cHg7aGVpZ2h0OjkxOXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDQ4NSA5MTkiIHdpZHRoPSI0ODVweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjA0ODk7JiMyNDIzNTsmIzEyNTM5OyYjMTI1MjU7JiMxMjQ2NTsmIzEyNTQwOyYjMTI0NzE7JiMxMjUxOTsmIzEyNTMxOyYjMzgzMDY7JiMzNjg5OTsmIzEyNDg2OyYjMTI1NDA7JiMxMjUwMjsmIzEyNTIzOzwvdGl0bGU+PGRlZnMvPjxnPjxnIGNsYXNzPSJ0aXRsZSIgZGF0YS1zb3VyY2UtbGluZT0iMSI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIwOS45OTkxIiB4PSIxMzAuNjAyNCIgeT0iMjIuOTk1MSI+JiMyMDQ4OTsmIzI0MjM1OyYjMTI1Mzk7JiMxMjUyNTsmIzEyNDY1OyYjMTI1NDA7JiMxMjQ3MTsmIzEyNTE5OyYjMTI1MzE7JiMzODMwNjsmIzM2ODk5OyYjMTI0ODY7JiMxMjU0MDsmIzEyNTAyOyYjMTI1MjM7PC90ZXh0PjwvZz48IS0tY2xhc3MgPz8/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMyIgaWQ9ImVudDAwMDIiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTk0LjY3MTkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEyMS4yMDM4IiB4PSIxMTUiIHk9IjQ0LjI5NjkiLz48ZWxsaXBzZSBjeD0iMTM4LjY0MTgiIGN5PSI2MC4yOTY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0xNDIuNzUxMiw2Ni4yOTY5IEwxMzUuMDMyNSw2Ni4yOTY5IEwxMzUuMDMyNSw1My45MDYzIEwxNDIuNzUxMiw1My45MDYzIEwxNDIuNzUxMiw1Ni4wNjI1IEwxMzcuNDg1Niw1Ni4wNjI1IEwxMzcuNDg1Niw1OC43MzQ0IEwxNDIuMjUxMiw1OC43MzQ0IEwxNDIuMjUxMiw2MC44OTA2IEwxMzcuNDg1Niw2MC44OTA2IEwxMzcuNDg1Niw2NC4xNDA2IEwxNDIuNzUxMiw2NC4xNDA2IEwxNDIuNzUxMiw2Ni4yOTY5IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iMTU0LjU2MjMiIHk9IjY1LjE0MzYiPiYjMjA0ODk7JiMyNDIzNTsmIzEyNTEwOyYjMTI0NzM7JiMxMjQ3OTs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMTE2IiB4Mj0iMjM1LjIwMzgiIHkxPSI3Ni4yOTY5IiB5Mj0iNzYuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwOS4yMDM4IiB4PSIxMjEiIHk9IjkzLjI5MiI+JiMyMDQ4OTsmIzI0MjM1OyYjMTI0Njc7JiMxMjU0MDsmIzEyNDg5OyAmIzE3MTtQSyYjMTg3OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTE2IiB4Mj0iMjM1LjIwMzgiIHkxPSIxMDAuNTkzOCIgeTI9IjEwMC41OTM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDEuOTk5OCIgeD0iMTIxIiB5PSIxMTcuNTg4OSI+JiMyMDQ4OTsmIzI0MjM1OyYjMjE1MTc7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjEyMSIgeT0iMTMzLjg4NTciPiYjMjA0ODk7JiMyNDIzNTsmIzIxMzA2OyYjMjA5OTg7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjEyMSIgeT0iMTUwLjE4MjYiPiYjMzcxMDk7JiMyMDQxNTsmIzMwMDU4OyYjMjE0OTU7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI3Ljk5OTkiIHg9IjEyMSIgeT0iMTY2LjQ3OTUiPiYjMjAzMDM7JiMyNTE1Mjs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iMTIxIiB5PSIxODIuNzc2NCI+JiMzODY1MTsmIzM1NDQxOyYjMzAwNTg7JiMyMTQ5NTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iMTIxIiB5PSIxOTkuMDczMiI+JiMyNjM3NzsmIzIxMTc3OyYjMTI1MDE7JiMxMjUyMTsmIzEyNDY0OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSIxMjEiIHk9IjIxNS4zNzAxIj4mIzIwMzE2OyYjMjUxMDQ7JiMyNjA4NTsmIzI2MTc4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSIxMjEiIHk9IjIzMS42NjciPiYjMjYzNTY7JiMyNjAzMjsmIzI2MDg1OyYjMjYxNzg7PC90ZXh0PjwvZz48IS0tY2xhc3MgPz8/Pz8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uLi4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIxNiIgaWQ9ImVudDAwMDMiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMjI3LjI2NTYiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE3Ny4yMDM2IiB4PSI3IiB5PSIzMTUuOTY2OSIvPjxlbGxpcHNlIGN4PSIzMC42NDE4IiBjeT0iMzMxLjk2NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTM0Ljc1MTIsMzM3Ljk2NjkgTDI3LjAzMjUsMzM3Ljk2NjkgTDI3LjAzMjUsMzI1LjU3NjIgTDM0Ljc1MTIsMzI1LjU3NjIgTDM0Ljc1MTIsMzI3LjczMjUgTDI5LjQ4NTYsMzI3LjczMjUgTDI5LjQ4NTYsMzMwLjQwNDQgTDM0LjI1MTIsMzMwLjQwNDQgTDM0LjI1MTIsMzMyLjU2MDYgTDI5LjQ4NTYsMzMyLjU2MDYgTDI5LjQ4NTYsMzM1LjgxMDYgTDM0Ljc1MTIsMzM1LjgxMDYgTDM0Ljc1MTIsMzM3Ljk2NjkgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjUuOTk5NSIgeD0iNDYuNTYyMyIgeT0iMzM2LjgxMzYiPiYjMTI1MjU7JiMxMjQ2NTsmIzEyNTQwOyYjMTI0NzE7JiMxMjUxOTsmIzEyNTMxOyYjMTI1MTA7JiMxMjQ3MzsmIzEyNDc5OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI4IiB4Mj0iMTgzLjIwMzYiIHkxPSIzNDcuOTY2OSIgeTI9IjM0Ny45NjY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTY1LjIwMzYiIHg9IjEzIiB5PSIzNjQuOTYyIj4mIzEyNTI1OyYjMTI0NjU7JiMxMjU0MDsmIzEyNDcxOyYjMTI1MTk7JiMxMjUzMTsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsgJiMxNzE7UEsmIzE4Nzs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjgiIHgyPSIxODMuMjAzNiIgeTE9IjM3Mi4yNjM3IiB5Mj0iMzcyLjI2MzciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDguODE0MSIgeD0iMTMiIHk9IjM4OS4yNTg5Ij4mIzIwNDg5OyYjMjQyMzU7JiMxMjQ2NzsmIzEyNTQwOyYjMTI0ODk7ICYjMTcxO0ZLJiMxODc7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI3Ljk5OTkiIHg9IjEzIiB5PSI0MDUuNTU1NyI+JiMyNjg0MjsmIzMwMDU4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MS45OTk4IiB4PSIxMyIgeT0iNDIxLjg1MjYiPiYjMTI0Nzg7JiMxMjU0MDsmIzEyNTMxOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNy45OTk5IiB4PSIxMyIgeT0iNDM4LjE0OTUiPiYjMzY4OTA7JiMzNjMzNTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDEuOTk5OCIgeD0iMTMiIHk9IjQ1NC40NDY0Ij4mIzEyNTIxOyYjMTI0ODM7JiMxMjQ2Mzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMuOTk5OSIgeD0iMTMiIHk9IjQ3MC43NDMyIj4mIzI3NTczOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNy45OTk5IiB4PSIxMyIgeT0iNDg3LjA0MDEiPiYjMzgyOTE7JiMyMTQ3NTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iMTMiIHk9IjUwMy4zMzciPiYjMjYzNzc7JiMyMTE3NzsmIzEyNTAxOyYjMTI1MjE7JiMxMjQ2NDs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iMTMiIHk9IjUxOS42MzM5Ij4mIzIwMzE2OyYjMjUxMDQ7JiMyNjA4NTsmIzI2MTc4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSIxMyIgeT0iNTM1LjkzMDciPiYjMjYzNTY7JiMyNjAzMjsmIzI2MDg1OyYjMjYxNzg7PC90ZXh0PjwvZz48IS0tY2xhc3MgPz8/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMzEiIGlkPSJlbnQwMDA0Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjI5Mi40NTMxIiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNzYuODEzOSIgeD0iMTY2LjE5IiB5PSI2MjAuMjM2OSIvPjxlbGxpcHNlIGN4PSIyMTUuMzQ3MSIgY3k9IjYzNi4yMzY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0yMTkuNDU2NSw2NDIuMjM2OSBMMjExLjczNzcsNjQyLjIzNjkgTDIxMS43Mzc3LDYyOS44NDYyIEwyMTkuNDU2NSw2MjkuODQ2MiBMMjE5LjQ1NjUsNjMyLjAwMjUgTDIxNC4xOTA5LDYzMi4wMDI1IEwyMTQuMTkwOSw2MzQuNjc0NCBMMjE4Ljk1NjUsNjM0LjY3NDQgTDIxOC45NTY1LDYzNi44MzA2IEwyMTQuMTkwOSw2MzYuODMwNiBMMjE0LjE5MDksNjQwLjA4MDYgTDIxOS40NTY1LDY0MC4wODA2IEwyMTkuNDU2NSw2NDIuMjM2OSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjIzNS44NDcxIiB5PSI2NDEuMDgzNiI+JiMyMjMxMjsmIzI0MjM1OyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxNjcuMTkiIHgyPSIzNDIuMDAzOSIgeTE9IjY1Mi4yMzY5IiB5Mj0iNjUyLjIzNjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NC4xMTMzIiB4PSIxNzIuMTkiIHk9IjY2OS4yMzIiPklEICYjMTcxO1BLJiMxODc7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxNjcuMTkiIHgyPSIzNDIuMDAzOSIgeTE9IjY3Ni41MzM3IiB5Mj0iNjc2LjUzMzciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDguODE0MSIgeD0iMTcyLjE5IiB5PSI2OTMuNTI4OSI+JiMyMDQ4OTsmIzI0MjM1OyYjMTI0Njc7JiMxMjU0MDsmIzEyNDg5OyAmIzE3MTtGSyYjMTg3OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDguODE0MSIgeD0iMTcyLjE5IiB5PSI3MDkuODI1NyI+JiMyMTgzMDsmIzIxNjk3OyYjMTI0Njc7JiMxMjU0MDsmIzEyNDg5OyAmIzE3MTtGSyYjMTg3OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNjQuODEzOSIgeD0iMTcyLjE5IiB5PSI3MjYuMTIyNiI+JiMxMjUyNTsmIzEyNDY1OyYjMTI1NDA7JiMxMjQ3MTsmIzEyNTE5OyYjMTI1MzE7JiMxMjQ2NzsmIzEyNTQwOyYjMTI0ODk7ICYjMTcxO0ZLJiMxODc7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjE3Mi4xOSIgeT0iNzQyLjQxOTUiPiYjMjk2OTQ7JiMyMjMxMjsmIzI0MjM1OyYjMjU5Njg7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQxLjk5OTgiIHg9IjE3Mi4xOSIgeT0iNzU4LjcxNjQiPiYjMjQzNDE7JiMyNDQwMzsmIzI1OTY4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSIxNzIuMTkiIHk9Ijc3NS4wMTMyIj4mIzMwMzMwOyYjMjc4ODA7JiMyNzUzMTsmIzI1OTY4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSIxNzIuMTkiIHk9Ijc5MS4zMTAxIj4mIzI2MzY4OyYjMzIwNjY7JiMyMDgzNzsmIzI0MjM1OyYjMjYwODU7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjE3Mi4xOSIgeT0iODA3LjYwNyI+JiMyNjM2ODsmIzMyMDY2OyYjMjA5ODY7JiMyNDIzNTsmIzI2MDg1OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSIxNzIuMTkiIHk9IjgyMy45MDM5Ij4mIzEyNTI1OyYjMTI0ODM7JiMxMjQ4ODsmIzMwMDU4OyYjMjE0OTU7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgzLjk5OTYiIHg9IjE3Mi4xOSIgeT0iODQwLjIwMDciPiYjMTI0NzE7JiMxMjUyMjsmIzEyNDUwOyYjMTI1MjM7JiMzMDA1ODsmIzIxNDk1OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSIxNzIuMTkiIHk9Ijg1Ni40OTc2Ij4mIzI2Mzc3OyYjMjExNzc7JiMyNjM5OTsmIzM4NDgwOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSIxNzIuMTkiIHk9Ijg3Mi43OTQ1Ij4mIzEyNDk2OyYjMTI1NDA7JiMxMjQ3MjsmIzEyNTE5OyYjMTI1MzE7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjE3Mi4xOSIgeT0iODg5LjA5MTQiPiYjMjAzMTY7JiMyNTEwNDsmIzI2MDg1OyYjMjYxNzg7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjE3Mi4xOSIgeT0iOTA1LjM4ODIiPiYjMjYzNTY7JiMyNjAzMjsmIzI2MDg1OyYjMjYxNzg7PC90ZXh0PjwvZz48IS0tY2xhc3MgPz8/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iNTAiIGlkPSJlbnQwMDA1Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9Ijk2Ljg5MDYiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEyMS4yMDM4IiB4PSIzNTciIHk9IjM4MS4xNTY5Ii8+PGVsbGlwc2UgY3g9IjM4MC42NDE4IiBjeT0iMzk3LjE1NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTM4NC43NTEyLDQwMy4xNTY5IEwzNzcuMDMyNSw0MDMuMTU2OSBMMzc3LjAzMjUsMzkwLjc2NjMgTDM4NC43NTEyLDM5MC43NjYzIEwzODQuNzUxMiwzOTIuOTIyNSBMMzc5LjQ4NTYsMzkyLjkyMjUgTDM3OS40ODU2LDM5NS41OTQ0IEwzODQuMjUxMiwzOTUuNTk0NCBMMzg0LjI1MTIsMzk3Ljc1MDYgTDM3OS40ODU2LDM5Ny43NTA2IEwzNzkuNDg1Niw0MDEuMDAwNiBMMzg0Ljc1MTIsNDAxLjAwMDYgTDM4NC43NTEyLDQwMy4xNTY5IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iMzk2LjU2MjMiIHk9IjQwMi4wMDM2Ij4mIzIxODMwOyYjMjE2OTc7JiMxMjUxMDsmIzEyNDczOyYjMTI0Nzk7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjM1OCIgeDI9IjQ3Ny4yMDM4IiB5MT0iNDEzLjE1NjkiIHkyPSI0MTMuMTU2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwOS4yMDM4IiB4PSIzNjMiIHk9IjQzMC4xNTIiPiYjMjE4MzA7JiMyMTY5NzsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsgJiMxNzE7UEsmIzE4Nzs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjM1OCIgeDI9IjQ3Ny4yMDM4IiB5MT0iNDM3LjQ1MzgiIHkyPSI0MzcuNDUzOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQxLjk5OTgiIHg9IjM2MyIgeT0iNDU0LjQ0ODkiPiYjMjE4MzA7JiMyMTY5NzsmIzIxNTE3OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNy45OTk5IiB4PSIzNjMiIHk9IjQ3MC43NDU3Ij4mIzIxMzM2OyYjMjAzODU7PC90ZXh0PjwvZz48IS0tbGluayA/Pz8/PyB0byA/Pz8/Pz8/Pz8tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwMiIgZGF0YS1lbnRpdHktMj0iZW50MDAwMyIgZGF0YS1saW5rLXR5cGU9ImNyb3dmb290IiBkYXRhLXNvdXJjZS1saW5lPSI1NyIgaWQ9ImxuazYiPjxwYXRoIGNvZGVMaW5lPSI1NyIgZD0iTTE0Ni4zNjM0LDI0Ny4xNTA3IEMxMzkuNTEzNCwyNzEuNjIwNyAxMzkuMTA2NywyNzMuMDcxNyAxMzIuMDY2NywyOTguMjUxNyIgZmlsbD0ibm9uZSIgaWQ9IiYjMjA0ODk7JiMyNDIzNTsmIzEyNTEwOyYjMTI0NzM7JiMxMjQ3OTstJiMxMjUyNTsmIzEyNDY1OyYjMTI1NDA7JiMxMjQ3MTsmIzEyNTE5OyYjMTI1MzE7JiMxMjUxMDsmIzEyNDczOyYjMTI0Nzk7IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE0My41ODk4IiB4Mj0iMTUxLjI5MzYiIHkxPSIyNDIuMjIwNSIgeTI9IjI0NC4zNzcxIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE0Mi43ODExIiB4Mj0iMTUwLjQ4NDkiIHkxPSIyNDUuMTA5NSIgeTI9IjI0Ny4yNjYiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTQ2LjM2MzQiIHgyPSIxNDguNTIiIHkxPSIyNDcuMTUwNyIgeTI9IjIzOS40NDY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEyOS4zNzQxIiB4Mj0iMTMyLjk5ODQiIHkxPSIzMDcuODgyMyIgeTI9IjMxNy4yMDI0Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEyOS4zNzQxIiB4Mj0iMTIxLjQ0MTYiIHkxPSIzMDcuODgyMyIgeTI9IjMxMy45NzEzIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEyOS4zNzQxIiB4Mj0iMTI3LjIyIiB5MT0iMzA3Ljg4MjMiIHkyPSIzMTUuNTg2OSIvPjxlbGxpcHNlIGN4PSIxMzAuOTg5NyIgY3k9IjMwMi4xMDM5IiBmaWxsPSJub25lIiByeD0iNCIgcnk9IjQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2NS4wMDAxIiB4PSIxMzkiIHk9IjI4Mi4wMzM4Ij4mIzIwNDg5OyYjMjQyMzU7JiMxMjQ2NzsmIzEyNTQwOyYjMTI0ODk7PC90ZXh0PjwvZz48IS0tbGluayA/Pz8/PyB0byA/Pz8/Py0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDAyIiBkYXRhLWVudGl0eS0yPSJlbnQwMDA0IiBkYXRhLWxpbmstdHlwZT0iY3Jvd2Zvb3QiIGRhdGEtc291cmNlLWxpbmU9IjU4IiBpZD0ibG5rNyI+PHBhdGggY29kZUxpbmU9IjU4IiBkPSJNMjA4LjAxNzYsMjQ3LjE2NjIgQzIxMC41MDc2LDI1Ny4wODYyIDIxMC44LDI1OS4zMDY5IDIxMi42LDI2OC45NjY5IEMyMzQuNDQsMzg1Ljg4NjkgMjQ0LjAzMTMsNTAyLjQ2OTggMjQ5LjA2MTMsNjAxLjk3OTgiIGZpbGw9Im5vbmUiIGlkPSImIzIwNDg5OyYjMjQyMzU7JiMxMjUxMDsmIzEyNDczOyYjMTI0Nzk7LSYjMjIzMTI7JiMyNDIzNTsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjAzLjE2NDIiIHgyPSIyMTAuOTIzNSIgeTE9IjI0NC4yNjAzIiB5Mj0iMjQyLjMxMjciLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjAzLjg5NDUiIHgyPSIyMTEuNjUzOCIgeTE9IjI0Ny4xNzAxIiB5Mj0iMjQ1LjIyMjQiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjA4LjAxNzYiIHgyPSIyMDYuMDciIHkxPSIyNDcuMTY2MiIgeTI9IjIzOS40MDY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjI0OS41NjYxIiB4Mj0iMjU1Ljk2MjMiIHkxPSI2MTEuOTY3MSIgeTI9IjYxOS42NTQiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjQ5LjU2NjEiIHgyPSIyNDMuOTc3NyIgeTE9IjYxMS45NjcxIiB5Mj0iNjIwLjI1OTgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjQ5LjU2NjEiIHgyPSIyNDkuOTciIHkxPSI2MTEuOTY3MSIgeTI9IjYxOS45NTY5Ii8+PGVsbGlwc2UgY3g9IjI0OS4yNjMyIiBjeT0iNjA1Ljk3NDciIGZpbGw9Im5vbmUiIHJ4PSI0IiByeT0iNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY1LjAwMDEiIHg9IjI0NS45NSIgeT0iNDM0LjE2MzgiPiYjMjA0ODk7JiMyNDIzNTsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTs8L3RleHQ+PC9nPjwhLS1saW5rID8/Pz8/IHRvID8/Pz8/LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDUiIGRhdGEtZW50aXR5LTI9ImVudDAwMDQiIGRhdGEtbGluay10eXBlPSJjcm93Zm9vdCIgZGF0YS1zb3VyY2UtbGluZT0iNTkiIGlkPSJsbms4Ij48cGF0aCBjb2RlTGluZT0iNTkiIGQ9Ik0zOTAuOTE4NSw0ODUuNDE5OSBDMzcyLjg1ODUsNTIyLjUxOTkgMzU4LjE0NzYsNTUyLjczMjIgMzMzLjM4NzYsNjAzLjYwMjIiIGZpbGw9Im5vbmUiIGlkPSImIzIxODMwOyYjMjE2OTc7JiMxMjUxMDsmIzEyNDczOyYjMTI0Nzk7LSYjMjIzMTI7JiMyNDIzNTsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzg5LjA3MjciIHgyPSIzOTYuMjY1OCIgeTE9IjQ4MC4wNzI2IiB5Mj0iNDgzLjU3NDEiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzg3Ljc1OTciIHgyPSIzOTQuOTUyNyIgeTE9IjQ4Mi43NyIgeTI9IjQ4Ni4yNzE1Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjM5MC45MTg1IiB4Mj0iMzk0LjQyIiB5MT0iNDg1LjQxOTkiIHkyPSI0NzguMjI2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMjkuMDExMSIgeDI9IjMzMC45MDQ5IiB5MT0iNjEyLjU5MzciIHkyPSI2MjIuNDEyNyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMjkuMDExMSIgeDI9IjMyMC4xMTUxIiB5MT0iNjEyLjU5MzciIHkyPSI2MTcuMTYxIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjMyOS4wMTExIiB4Mj0iMzI1LjUxIiB5MT0iNjEyLjU5MzciIHkyPSI2MTkuNzg2OSIvPjxlbGxpcHNlIGN4PSIzMzEuNjM3IiBjeT0iNjA3LjE5ODgiIGZpbGw9Im5vbmUiIHJ4PSI0IiByeT0iNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY1LjAwMDEiIHg9IjM0Ni44NiIgeT0iNTg2LjMwMzgiPiYjMjE4MzA7JiMyMTY5NzsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTs8L3RleHQ+PC9nPjwhLS1saW5rID8/Pz8/Pz8/PyB0byA/Pz8/Py0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDAzIiBkYXRhLWVudGl0eS0yPSJlbnQwMDA0IiBkYXRhLWxpbmstdHlwZT0iY3Jvd2Zvb3QiIGRhdGEtc291cmNlLWxpbmU9IjYwIiBpZD0ibG5rOSI+PHBhdGggY29kZUxpbmU9IjYwIiBkPSJNOTguMjEwNSw1NTEuMzEyMSBDMTAwLjg0MDUsNTY3LjQwMjEgMTAzLjU4LDU3NS41NjY5IDEwOS42LDU5MC4yMzY5IEMxMjIuNzIsNjIyLjE5NjkgMTMyLjI2NDYsNjM4Ljk3NzMgMTU0LjM0NDYsNjY1LjM4NzMiIGZpbGw9Im5vbmUiIGlkPSImIzEyNTI1OyYjMTI0NjU7JiMxMjU0MDsmIzEyNDcxOyYjMTI1MTk7JiMxMjUzMTsmIzEyNTEwOyYjMTI0NzM7JiMxMjQ3OTstJiMyMjMxMjsmIzI0MjM1OyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI5My42MTc2IiB4Mj0iMTAxLjUxMjkiIHkxPSI1NDguMDA5NyIgeTI9IjU0Ni43MTkyIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9Ijk0LjEwMTYiIHgyPSIxMDEuOTk2OCIgeTE9IjU1MC45NzA1IiB5Mj0iNTQ5LjY3OTkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iOTguMjEwNSIgeDI9Ijk2LjkyIiB5MT0iNTUxLjMxMjEiIHkyPSI1NDMuNDE2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxNjAuNzU4NyIgeDI9IjE3MC40OTMyIiB5MT0iNjczLjA1OTMiIHkyPSI2NzUuMzQ4NCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxNjAuNzU4NyIgeDI9IjE2MS4yODY4IiB5MT0iNjczLjA1OTMiIHkyPSI2ODMuMDQ1MyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxNjAuNzU4NyIgeDI9IjE2NS44OSIgeTE9IjY3My4wNTkzIiB5Mj0iNjc5LjE5NjkiLz48ZWxsaXBzZSBjeD0iMTU2LjkxMDIiIGN5PSI2NjguNDU2MSIgZmlsbD0ibm9uZSIgcng9IjQiIHJ5PSI0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTE3LjAwMDEiIHg9IjExMC42IiB5PSI1ODYuMzAzOCI+JiMxMjUyNTsmIzEyNDY1OyYjMTI1NDA7JiMxMjQ3MTsmIzEyNTE5OyYjMTI1MzE7JiMxMjQ2NzsmIzEyNTQwOyYjMTI0ODk7PC90ZXh0PjwvZz48P3BsYW50dW1sLXNyYyBkUEJCSmk5MDU4UnR5bkh6MEx4MDQ1UjZuQlpuOUxZRzZEc21DTTFJUG84TmJSRzlRSDVlRDRBOE4yQU44NDRBYjhTdnA5SS1YUHNYNDJZcTZkVHBSZEUtX3ZvSkoySWx1WEFMeXpKaTA5YTItR0d5MDM4M0YwUm8wTUpldzNMN2hXRjlTMlZIV05HR1lieWQ0eWRSUlRLaHUwZFdYUEgyZFdTRkhOOVVZYU9sQnM4bjU4YnU0UWVNRGd6ZGEtT29vMjZaZlJNbWpKUExuY1d2THJYVUhhdnJrY2VERjF5cHlsSG4wYUczcVdCU1R0Q0NiYkRQZ1M3QTZCN2c1ekZ4ZGQ2dHZKZUtpU2p1OTFoOGtuaXZ1bjVNaHhYVzJCMGJfNEZhbzlOTGs4U3U3STYwVXVYckh5WkhZcklmX3VrVDZhcW5xd20wdkJwZGZ4elpLSXIzWV9TN3hkMmY4aUxNaDdMQmZsS0hkTWJxTmtHbGtzb29PUERyZHhaMTNEYVVPVmhHdTZjYm5pUkVjZnhEc3haWUlTeFJjVVpNMWJucFpzTGxaU251U3lnZ2N3eUFma3lycXpfY2liUXVVc2k3Y2hUMzRYNW5RdU1OZlZORWxfN1ZRWmVUWVRvYUdhX2JIRjlERS1XSl95d0U1RmhlV21sdEhRNG1saTFGR2pSLTBtMDA/PjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_5">倉庫区分の定義<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjIyNXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NzM5cHg7aGVpZ2h0OjIyNXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDczOSAyMjUiIHdpZHRoPSI3MzlweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjA0ODk7JiMyNDIzNTsmIzIxMzA2OyYjMjA5OTg7PC90aXRsZT48ZGVmcy8+PGc+PGcgY2xhc3M9InRpdGxlIiBkYXRhLXNvdXJjZS1saW5lPSIxIj48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iMzM0Ljc1MDEiIHk9IjIyLjk5NTEiPiYjMjA0ODk7JiMyNDIzNTsmIzIxMzA2OyYjMjA5OTg7PC90ZXh0PjwvZz48IS0tY2x1c3RlciA/Pz8/LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Ii4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjMiIGlkPSJlbnQwMDAyIj48cmVjdCBmaWxsPSIjQ0NGRkNDIiBoZWlnaHQ9IjczLjMiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIyMTkiIHg9IjE0LjUiIHk9IjUyLjQ0NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iOTYuMDAwMSIgeT0iNjcuNDQyIj4mIzMzMjU4OyYjMzEwMzg7JiMyMDQ4OTsmIzI0MjM1OzwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgPz8/Py0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uIiBkYXRhLXNvdXJjZS1saW5lPSI4IiBpZD0iZW50MDAwNSI+PHJlY3QgZmlsbD0iI0NDQ0NGRiIgaGVpZ2h0PSI4OS41OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjIxOSIgeD0iMjU3LjUiIHk9IjQ0LjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iMzM5LjAwMDEiIHk9IjU5LjI5MiI+JiMyMjgwNjsmIzM3MDk2OyYjMjA0ODk7JiMyNDIzNTs8L3RleHQ+PC9nPjwhLS1jbHVzdGVyID8/Pz8tLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMTMiIGlkPSJlbnQwMDA4Ij48cmVjdCBmaWxsPSIjRkZGRkNDIiBoZWlnaHQ9IjczLjMiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIyMzMiIHg9IjUwMC41IiB5PSI1Mi40NDY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjU4OS4wMDAxIiB5PSI2Ny40NDIiPiYjMjAyMDY7JiMyNDgxOTsmIzIwNDg5OyYjMjQyMzU7PC90ZXh0PjwvZz48IS0tZW50aXR5IG93bjEtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uLm93bjEiIGRhdGEtc291cmNlLWxpbmU9IjQiIGlkPSJlbnQwMDAzIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9Ijc1Ljk5OTgiIHg9IjMwLjUiIHk9Ijg3LjQ0NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSI0MC41IiB5PSIxMDMuNDQyIj4mIzI2NDEyOyYjMzEwMzg7JiMyMDQ4OTsmIzI0MjM1OzwvdGV4dD48L2c+PCEtLWVudGl0eSBvd24yLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uLi5vd24yIiBkYXRhLXNvdXJjZS1saW5lPSI1IiBpZD0iZW50MDAwNCI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI3NS45OTk4IiB4PSIxNDEuNSIgeT0iODcuNDQ2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjE1MS41IiB5PSIxMDMuNDQyIj4mIzI1OTAzOyYjMjQyMTU7JiMyMDQ4OTsmIzI0MjM1OzwvdGV4dD48L2c+PCEtLWVudGl0eSBleHQxLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uLi5leHQxIiBkYXRhLXNvdXJjZS1saW5lPSI5IiBpZD0iZW50MDAwNiI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzOC41OTM4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI3NS45OTk4IiB4PSIyNzMuNSIgeT0iNzkuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjI4My41IiB5PSI5NS4yOTIiPiYjMjE5NDI7JiMyNjk4OTsmIzIwNDg5OyYjMjQyMzU7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjUzLjE0OTMiIHg9IjI4My41IiB5PSIxMTEuNTg4OSI+JiM2NTI4ODszUEwmIzY1Mjg5OzwvdGV4dD48L2c+PCEtLWVudGl0eSBleHQyLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uLi5leHQyIiBkYXRhLXNvdXJjZS1saW5lPSIxMCIgaWQ9ImVudDAwMDciPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNzUuOTk5OCIgeD0iMzg0LjUiIHk9Ijg3LjQ0NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSIzOTQuNSIgeT0iMTAzLjQ0MiI+JiMyMDQ0NTsmIzMxNjQ5OyYjMjA0ODk7JiMyNDIzNTs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgdmlydDEtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uLnZpcnQxIiBkYXRhLXNvdXJjZS1saW5lPSIxNCIgaWQ9ImVudDAwMDkiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNzUuOTk5OCIgeD0iNTE2LjUiIHk9Ijg3LjQ0NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSI1MjYuNSIgeT0iMTAzLjQ0MiI+JiMzODkyODsmIzEyMzY5OyYjMjIzMTI7JiMyNDIzNTs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgdmlydDItLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uLnZpcnQyIiBkYXRhLXNvdXJjZS1saW5lPSIxNSIgaWQ9ImVudDAwMTAiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iODkuOTk5NyIgeD0iNjI3LjUiIHk9Ijg3LjQ0NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSI2MzcuNSIgeT0iMTAzLjQ0MiI+JiMzNjY2NDsmIzM2ODY1OyYjMjAwMTM7JiMyMjMxMjsmIzI0MjM1OzwvdGV4dD48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iR01OMTEiIGRhdGEtc291cmNlLWxpbmU9IjE5IiBpZD0iZW50MDAxMiI+PHBhdGggZD0iTTYsMTc3Ljg4NjkgTDYsMjE4LjE1MjUgQTAsMCAwIDAgMCA2LDIxOC4xNTI1IEwxMzEuMDAwMSwyMTguMTUyNSBBMCwwIDAgMCAwIDEzMS4wMDAxLDIxOC4xNTI1IEwxMzEuMDAwMSwxODcuODg2OSBMMTIxLjAwMDEsMTc3Ljg4NjkgTDcyLjUsMTc3Ljg4NjkgTDY4LjUsMTEwLjAxNjkgTDY0LjUsMTc3Ljg4NjkgTDYsMTc3Ljg4NjkgQTAsMCAwIDAgMCA2LDE3Ny44ODY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNMTIxLjAwMDEsMTc3Ljg4NjkgTDEyMS4wMDAxLDE4Ny44ODY5IEwxMzEuMDAwMSwxODcuODg2OSBMMTIxLjAwMDEsMTc3Ljg4NjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY1LjAwMDEiIHg9IjEyIiB5PSIxOTQuOTUzOCI+JiMzMzI1ODsmIzMxMDM4OyYjMTIzOTE7JiMzMTY0OTsmIzI5NzAyOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDQuMDAwMSIgeD0iMTIiIHk9IjIxMC4wODY2Ij4mIzIwODM3OyYjMjA5ODY7JiMyNDIzNTsmIzEyNDM0OyYjMzA0NTI7JiMyNTUwOTsmIzIxMDQ2OyYjMjQ0ODE7PC90ZXh0PjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJHTU4xNCIgZGF0YS1zb3VyY2UtbGluZT0iMjQiIGlkPSJlbnQwMDE1Ij48cGF0aCBkPSJNMjQ5LDE3Ny44ODY5IEwyNDksMjE4LjE1MjUgQTAsMCAwIDAgMCAyNDksMjE4LjE1MjUgTDM3NC4wMDAxLDIxOC4xNTI1IEEwLDAgMCAwIDAgMzc0LjAwMDEsMjE4LjE1MjUgTDM3NC4wMDAxLDE4Ny44ODY5IEwzNjQuMDAwMSwxNzcuODg2OSBMMzE1LjUsMTc3Ljg4NjkgTDMxMS41LDExOC4zNzY5IEwzMDcuNSwxNzcuODg2OSBMMjQ5LDE3Ny44ODY5IEEwLDAgMCAwIDAgMjQ5LDE3Ny44ODY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNMzY0LjAwMDEsMTc3Ljg4NjkgTDM2NC4wMDAxLDE4Ny44ODY5IEwzNzQuMDAwMSwxODcuODg2OSBMMzY0LjAwMDEsMTc3Ljg4NjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjUyLjAwMDEiIHg9IjI1NSIgeT0iMTk0Ljk1MzgiPiYjMjI4MDY7JiMzNzA5NjsmIzIyOTk2OyYjMzUzNTE7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwNC4wMDAxIiB4PSIyNTUiIHk9IjIxMC4wODY2Ij4mIzIwODM3OyYjMjA5ODY7JiMyNDIzNTsmIzIwMzgxOyYjMzg5NzI7JiMxMjM2NDsmIzI0NTE3OyYjMzUyMDE7PC90ZXh0PjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJHTU4xNyIgZGF0YS1zb3VyY2UtbGluZT0iMjkiIGlkPSJlbnQwMDE4Ij48cGF0aCBkPSJNNDg1LjUsMTc3Ljg4NjkgTDQ4NS41LDIxOC4xNTI1IEEwLDAgMCAwIDAgNDg1LjUsMjE4LjE1MjUgTDYyMy41MDAxLDIxOC4xNTI1IEEwLDAgMCAwIDAgNjIzLjUwMDEsMjE4LjE1MjUgTDYyMy41MDAxLDE4Ny44ODY5IEw2MTMuNTAwMSwxNzcuODg2OSBMNTU4LjUsMTc3Ljg4NjkgTDU1NC41LDExMC4wMTY5IEw1NTAuNSwxNzcuODg2OSBMNDg1LjUsMTc3Ljg4NjkgQTAsMCAwIDAgMCA0ODUuNSwxNzcuODg2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTYxMy41MDAxLDE3Ny44ODY5IEw2MTMuNTAwMSwxODcuODg2OSBMNjIzLjUwMDEsMTg3Ljg4NjkgTDYxMy41MDAxLDE3Ny44ODY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTcuMDAwMSIgeD0iNDkxLjUiIHk9IjE5NC45NTM4Ij4mIzI5Mjg5OyYjMjk3MDI7JiMzMDM0MDsmIzEyMzk1OyYjMjMzODQ7JiMyMjMxMjsmIzEyMzc1OyYjMTIzOTQ7JiMxMjM1Njs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzguMDAwMSIgeD0iNDkxLjUiIHk9IjIxMC4wODY2Ij4mIzMxNjQ5OyYjMjk3MDI7JiMxOTk3ODsmIzEyMzk4OyYjMjEzMDY7JiMyMDk5ODs8L3RleHQ+PC9nPjw/cGxhbnR1bWwtc3JjIFRQN0JKaTkwNThSdHluSUotV0pnOHBKZm9lS0Z1MFFYNlg5amFwZkg0c0Yyb0JNNjYzRzRaNDgyMlBLMmpZdXFYREljRkNwcXpCQlk1SW9LOGMzU3BmVnZfbEVWR3hCYUpDSUdLeTRRR1RNMklXYVhIS29KYjdHUWxORDFVVVp0ZDFYcFU4VmQxTzdkeUdyQWZ2R0N2aHBNLW5mRE5NM3ZJamZETUZxM2hFT2NzcUV0NnRSZURTQXlsY1FWLXJUc1E4bXpwT1pmYUpJcEFfazcxcERSTlNaNFF2ODRrVEVzUnRSTldZQXM3VUgtY3J4LVNuS2EyMWlybWF3RHFLVGV3T2RYQ2draXo4NHoyTkZLZEhYUlYxNFhvS0o0bnA4WHlaY01KLUJ3eVNlT3hLVEotUktJV2c4NlBJbHdva3dVX0RTbHhxNjNvWFlTQlhBYjM5dUJfY1dNdlBReHdUUzNsVmRoUzlyc3NCNFBoU0FxNkJwSF9ucm4xTHlUSDJGdUJtTDZIczB5SG5LT1JKOHdQQkkwdWw3U29Kc1p2bEJvWVVxNz8+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<table>
<thead>
<tr>
<th>倉庫区分</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>自社</strong></td>
<td>自社所有・管理の倉庫</td>
</tr>
<tr>
<td><strong>外部</strong></td>
<td>外部委託（3PL）の倉庫</td>
</tr>
<tr>
<td><strong>仮想</strong></td>
<td>輸送中、預け在庫など</td>
</tr>
</tbody>
</table>
<h3 id="_6">マイグレーション：倉庫・在庫関連テーブルの作成<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<details>
<summary>V015__create_inventory_tables.sql</summary>

<div class="highlight"><pre><span></span><code><span class="c1">-- src/main/resources/db/migration/V015__create_inventory_tables.sql</span>

<span class="c1">-- 倉庫区分</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TYPE</span><span class="w"> </span><span class="err">倉庫区分</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">ENUM</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;自社&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;外部&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;仮想&#39;</span><span class="p">);</span>

<span class="c1">-- 倉庫マスタに倉庫区分カラムを追加</span>
<span class="c1">-- （V013で作成済みの倉庫マスタにカラム追加）</span>
<span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;倉庫マスタ&quot;</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="ss">&quot;倉庫区分&quot;</span><span class="w"> </span><span class="err">倉庫区分</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="s1">&#39;自社&#39;</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">;</span>

<span class="c1">-- ロケーションマスタ</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;ロケーションマスタ&quot;</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="ss">&quot;ロケーションコード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;倉庫コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;棚番&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;ゾーン&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;通路&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;ラック&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;段&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;間口&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;有効フラグ&quot;</span><span class="w"> </span><span class="nb">BOOLEAN</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">true</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;作成日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;作成者&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;更新日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;更新者&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;fk_ロケーション_倉庫&quot;</span>
<span class="w">        </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;倉庫コード&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;倉庫マスタ&quot;</span><span class="p">(</span><span class="ss">&quot;倉庫コード&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="k">UNIQUE</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;倉庫コード&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;棚番&quot;</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">-- 在庫データ（倉庫 × 商品）</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;在庫データ&quot;</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="ss">&quot;ID&quot;</span><span class="w"> </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;倉庫コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;商品コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;ロケーションコード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;現在庫数&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;引当数&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;発注残数&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;最終入庫日&quot;</span><span class="w"> </span><span class="nb">DATE</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;最終出庫日&quot;</span><span class="w"> </span><span class="nb">DATE</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;ロット番号&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;シリアル番号&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;有効期限&quot;</span><span class="w"> </span><span class="nb">DATE</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;バージョン&quot;</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;作成日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;作成者&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;更新日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;更新者&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;fk_在庫_倉庫&quot;</span>
<span class="w">        </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;倉庫コード&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;倉庫マスタ&quot;</span><span class="p">(</span><span class="ss">&quot;倉庫コード&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;fk_在庫_商品&quot;</span>
<span class="w">        </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;商品コード&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;商品マスタ&quot;</span><span class="p">(</span><span class="ss">&quot;商品コード&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;fk_在庫_ロケーション&quot;</span>
<span class="w">        </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;ロケーションコード&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;ロケーションマスタ&quot;</span><span class="p">(</span><span class="ss">&quot;ロケーションコード&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="k">UNIQUE</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;倉庫コード&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;商品コード&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;ロケーションコード&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;ロット番号&quot;</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">-- 有効在庫数を計算するビュー</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="ss">&quot;有効在庫ビュー&quot;</span><span class="w"> </span><span class="k">AS</span>
<span class="k">SELECT</span>
<span class="w">    </span><span class="ss">&quot;倉庫コード&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;商品コード&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;ロケーションコード&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;現在庫数&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;引当数&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;現在庫数&quot;</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="ss">&quot;引当数&quot;</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="ss">&quot;有効在庫数&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;発注残数&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;現在庫数&quot;</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="ss">&quot;引当数&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="ss">&quot;発注残数&quot;</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="ss">&quot;予定在庫数&quot;</span>
<span class="k">FROM</span><span class="w"> </span><span class="ss">&quot;在庫データ&quot;</span><span class="p">;</span>

<span class="c1">-- インデックス</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_ロケーション_倉庫&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;ロケーションマスタ&quot;</span><span class="p">(</span><span class="ss">&quot;倉庫コード&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_在庫_倉庫コード&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;在庫データ&quot;</span><span class="p">(</span><span class="ss">&quot;倉庫コード&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_在庫_商品コード&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;在庫データ&quot;</span><span class="p">(</span><span class="ss">&quot;商品コード&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_在庫_ロケーション&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;在庫データ&quot;</span><span class="p">(</span><span class="ss">&quot;ロケーションコード&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_在庫_ロット番号&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;在庫データ&quot;</span><span class="p">(</span><span class="ss">&quot;ロット番号&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_在庫_有効期限&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;在庫データ&quot;</span><span class="p">(</span><span class="ss">&quot;有効期限&quot;</span><span class="p">);</span>

<span class="c1">-- テーブルコメント</span>
<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;倉庫マスタ&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;倉庫情報を管理するマスタテーブル&#39;</span><span class="p">;</span>
<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;ロケーションマスタ&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;倉庫内の棚・ロケーション情報を管理するテーブル&#39;</span><span class="p">;</span>
<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;在庫データ&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;倉庫×商品の在庫情報を管理するテーブル&#39;</span><span class="p">;</span>
<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="ss">&quot;在庫データ&quot;</span><span class="p">.</span><span class="ss">&quot;バージョン&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;楽観ロック用バージョン番号&#39;</span><span class="p">;</span>
</code></pre></div>

</details>

<h3 id="_7">倉庫・在庫エンティティの実装<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<details>
<summary>倉庫区分 ENUM</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/sales/domain/model/inventory/WarehouseType.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.sms.domain.model.inventory</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Getter</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>

<span class="nd">@Getter</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">enum</span><span class="w"> </span><span class="n">WarehouseType</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">OWN</span><span class="p">(</span><span class="s">&quot;自社&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">EXTERNAL</span><span class="p">(</span><span class="s">&quot;外部&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">VIRTUAL</span><span class="p">(</span><span class="s">&quot;仮想&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">displayName</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">WarehouseType</span><span class="w"> </span><span class="nf">fromDisplayName</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">displayName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">WarehouseType</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">values</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">type</span><span class="p">.</span><span class="na">displayName</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">displayName</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">type</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;Unknown warehouse type: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">displayName</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>倉庫マスタエンティティ</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/sales/domain/model/inventory/Warehouse.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.sms.domain.model.inventory</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Builder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>

<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Warehouse</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">warehouseCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">warehouseName</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">WarehouseType</span><span class="w"> </span><span class="n">warehouseType</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">postalCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">address</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">phoneNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Boolean</span><span class="w"> </span><span class="n">activeFlag</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">createdAt</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">createdBy</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">updatedAt</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">updatedBy</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 自社倉庫かどうか</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isOwnWarehouse</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">warehouseType</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">WarehouseType</span><span class="p">.</span><span class="na">OWN</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 仮想倉庫かどうか</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isVirtualWarehouse</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">warehouseType</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">WarehouseType</span><span class="p">.</span><span class="na">VIRTUAL</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>ロケーションマスタエンティティ</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/sales/domain/model/inventory/Location.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.sms.domain.model.inventory</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Builder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>

<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Location</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">locationCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">warehouseCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">shelfNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">zone</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">aisle</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">rack</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">level</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">bay</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Boolean</span><span class="w"> </span><span class="n">activeFlag</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">createdAt</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">createdBy</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">updatedAt</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">updatedBy</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// リレーション</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Warehouse</span><span class="w"> </span><span class="n">warehouse</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * ロケーションの完全表記を取得</span>
<span class="cm">     * 例: A-01-02-03-04</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getFullAddress</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">StringBuilder</span><span class="w"> </span><span class="n">sb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">StringBuilder</span><span class="p">();</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">zone</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="n">sb</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="n">zone</span><span class="p">).</span><span class="na">append</span><span class="p">(</span><span class="s">&quot;-&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">aisle</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="n">sb</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="n">aisle</span><span class="p">).</span><span class="na">append</span><span class="p">(</span><span class="s">&quot;-&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rack</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="n">sb</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="n">rack</span><span class="p">).</span><span class="na">append</span><span class="p">(</span><span class="s">&quot;-&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">level</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="n">sb</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="n">level</span><span class="p">).</span><span class="na">append</span><span class="p">(</span><span class="s">&quot;-&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">bay</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="n">sb</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="n">bay</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">sb</span><span class="p">.</span><span class="na">toString</span><span class="p">().</span><span class="na">replaceAll</span><span class="p">(</span><span class="s">&quot;-$&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>在庫エンティティ</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/sales/domain/model/inventory/Inventory.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.sms.domain.model.inventory</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sms.domain.model.product.Product</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Builder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>

<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Inventory</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">warehouseCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">productCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">locationCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">currentQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">allocatedQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">orderedQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">lastReceiptDate</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">lastShipmentDate</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">lotNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">serialNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">expirationDate</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">createdAt</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">createdBy</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">updatedAt</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">updatedBy</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// 楽観ロック用バージョン</span>
<span class="w">    </span><span class="nd">@Builder.Default</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// リレーション</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Warehouse</span><span class="w"> </span><span class="n">warehouse</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Product</span><span class="w"> </span><span class="n">product</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Location</span><span class="w"> </span><span class="n">location</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 有効在庫数を計算</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="nf">getAvailableQuantity</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">currentQuantity</span><span class="p">.</span><span class="na">subtract</span><span class="p">(</span><span class="n">allocatedQuantity</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 予定在庫数を計算</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="nf">getProjectedQuantity</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">currentQuantity</span><span class="p">.</span><span class="na">subtract</span><span class="p">(</span><span class="n">allocatedQuantity</span><span class="p">).</span><span class="na">add</span><span class="p">(</span><span class="n">orderedQuantity</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 引当可能かどうかを判定</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">canAllocate</span><span class="p">(</span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">quantity</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">getAvailableQuantity</span><span class="p">().</span><span class="na">compareTo</span><span class="p">(</span><span class="n">quantity</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 在庫を引当</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">allocate</span><span class="p">(</span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">quantity</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">canAllocate</span><span class="p">(</span><span class="n">quantity</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalStateException</span><span class="p">(</span>
<span class="w">                </span><span class="s">&quot;有効在庫数が不足しています。有効在庫: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">getAvailableQuantity</span><span class="p">()</span><span class="w"> </span><span class="o">+</span>
<span class="w">                </span><span class="s">&quot;, 引当要求: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">quantity</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">allocatedQuantity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">allocatedQuantity</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">quantity</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 引当を解除</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">deallocate</span><span class="p">(</span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">quantity</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">allocatedQuantity</span><span class="p">.</span><span class="na">compareTo</span><span class="p">(</span><span class="n">quantity</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalStateException</span><span class="p">(</span>
<span class="w">                </span><span class="s">&quot;引当数を超える解除はできません。引当数: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">allocatedQuantity</span><span class="w"> </span><span class="o">+</span>
<span class="w">                </span><span class="s">&quot;, 解除要求: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">quantity</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">allocatedQuantity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">allocatedQuantity</span><span class="p">.</span><span class="na">subtract</span><span class="p">(</span><span class="n">quantity</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 入庫処理</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">receive</span><span class="p">(</span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">quantity</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">currentQuantity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">currentQuantity</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">quantity</span><span class="p">);</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">lastReceiptDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">now</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 出庫処理</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">ship</span><span class="p">(</span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">quantity</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">currentQuantity</span><span class="p">.</span><span class="na">compareTo</span><span class="p">(</span><span class="n">quantity</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalStateException</span><span class="p">(</span>
<span class="w">                </span><span class="s">&quot;現在庫数が不足しています。現在庫: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">currentQuantity</span><span class="w"> </span><span class="o">+</span>
<span class="w">                </span><span class="s">&quot;, 出庫要求: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">quantity</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">currentQuantity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">currentQuantity</span><span class="p">.</span><span class="na">subtract</span><span class="p">(</span><span class="n">quantity</span><span class="p">);</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">lastShipmentDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">now</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 有効期限切れかどうか</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isExpired</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">expirationDate</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">expirationDate</span><span class="p">.</span><span class="na">isBefore</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">now</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="_8">在庫サービスの実装<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<details>
<summary>在庫サービス</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/sales/application/service/InventoryService.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.sms.application.service</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sms.application.port.out.InventoryRepository</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sms.domain.model.inventory.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Service</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.transaction.annotation.Transactional</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Optional</span><span class="p">;</span>

<span class="nd">@Service</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">InventoryService</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">InventoryRepository</span><span class="w"> </span><span class="n">inventoryRepository</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 商品別の在庫サマリを取得</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">InventorySummary</span><span class="w"> </span><span class="nf">getProductInventorySummary</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">productCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Inventory</span><span class="o">&gt;</span><span class="w"> </span><span class="n">inventories</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventoryRepository</span><span class="p">.</span><span class="na">findByProductCode</span><span class="p">(</span><span class="n">productCode</span><span class="p">);</span>

<span class="w">        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">totalCurrent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">;</span>
<span class="w">        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">totalAllocated</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">;</span>
<span class="w">        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">totalOrdered</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">;</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Inventory</span><span class="w"> </span><span class="n">inv</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">inventories</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">totalCurrent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">totalCurrent</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">inv</span><span class="p">.</span><span class="na">getCurrentQuantity</span><span class="p">());</span>
<span class="w">            </span><span class="n">totalAllocated</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">totalAllocated</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">inv</span><span class="p">.</span><span class="na">getAllocatedQuantity</span><span class="p">());</span>
<span class="w">            </span><span class="n">totalOrdered</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">totalOrdered</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">inv</span><span class="p">.</span><span class="na">getOrderedQuantity</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">InventorySummary</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">productCode</span><span class="p">(</span><span class="n">productCode</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">totalCurrentQuantity</span><span class="p">(</span><span class="n">totalCurrent</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">totalAllocatedQuantity</span><span class="p">(</span><span class="n">totalAllocated</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">totalAvailableQuantity</span><span class="p">(</span><span class="n">totalCurrent</span><span class="p">.</span><span class="na">subtract</span><span class="p">(</span><span class="n">totalAllocated</span><span class="p">))</span>
<span class="w">                </span><span class="p">.</span><span class="na">totalOrderedQuantity</span><span class="p">(</span><span class="n">totalOrdered</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">warehouseDetails</span><span class="p">(</span><span class="n">inventories</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 倉庫別の在庫一覧を取得</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Inventory</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getInventoryByWarehouse</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">warehouseCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">inventoryRepository</span><span class="p">.</span><span class="na">findByWarehouseCode</span><span class="p">(</span><span class="n">warehouseCode</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 在庫を引当</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">AllocationResult</span><span class="w"> </span><span class="nf">allocate</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">warehouseCode</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">productCode</span><span class="p">,</span>
<span class="w">                                      </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">quantity</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Inventory</span><span class="o">&gt;</span><span class="w"> </span><span class="n">inventoryOpt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventoryRepository</span>
<span class="w">                </span><span class="p">.</span><span class="na">findByWarehouseAndProduct</span><span class="p">(</span><span class="n">warehouseCode</span><span class="p">,</span><span class="w"> </span><span class="n">productCode</span><span class="p">);</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">inventoryOpt</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">AllocationResult</span><span class="p">.</span><span class="na">failure</span><span class="p">(</span><span class="s">&quot;在庫が見つかりません&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">Inventory</span><span class="w"> </span><span class="n">inventory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventoryOpt</span><span class="p">.</span><span class="na">get</span><span class="p">();</span>
<span class="w">        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventory</span><span class="p">.</span><span class="na">getAvailableQuantity</span><span class="p">();</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">available</span><span class="p">.</span><span class="na">compareTo</span><span class="p">(</span><span class="n">quantity</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">AllocationResult</span><span class="p">.</span><span class="na">failure</span><span class="p">(</span>
<span class="w">                </span><span class="s">&quot;有効在庫数が不足しています。有効在庫: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">available</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">inventoryRepository</span><span class="p">.</span><span class="na">allocate</span><span class="p">(</span><span class="n">inventory</span><span class="p">.</span><span class="na">getId</span><span class="p">(),</span><span class="w"> </span><span class="n">quantity</span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">AllocationResult</span><span class="p">.</span><span class="na">success</span><span class="p">(</span><span class="n">quantity</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 引当を解除</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">deallocate</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">warehouseCode</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">productCode</span><span class="p">,</span>
<span class="w">                           </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">quantity</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Inventory</span><span class="o">&gt;</span><span class="w"> </span><span class="n">inventoryOpt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventoryRepository</span>
<span class="w">                </span><span class="p">.</span><span class="na">findByWarehouseAndProduct</span><span class="p">(</span><span class="n">warehouseCode</span><span class="p">,</span><span class="w"> </span><span class="n">productCode</span><span class="p">);</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">inventoryOpt</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;在庫が見つかりません&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">Inventory</span><span class="w"> </span><span class="n">inventory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventoryOpt</span><span class="p">.</span><span class="na">get</span><span class="p">();</span>
<span class="w">        </span><span class="n">inventoryRepository</span><span class="p">.</span><span class="na">deallocate</span><span class="p">(</span><span class="n">inventory</span><span class="p">.</span><span class="na">getId</span><span class="p">(),</span><span class="w"> </span><span class="n">quantity</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 入庫処理</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">receive</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">warehouseCode</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">productCode</span><span class="p">,</span>
<span class="w">                        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">quantity</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Inventory</span><span class="o">&gt;</span><span class="w"> </span><span class="n">inventoryOpt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventoryRepository</span>
<span class="w">                </span><span class="p">.</span><span class="na">findByWarehouseAndProduct</span><span class="p">(</span><span class="n">warehouseCode</span><span class="p">,</span><span class="w"> </span><span class="n">productCode</span><span class="p">);</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">inventoryOpt</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// 新規在庫レコード作成</span>
<span class="w">            </span><span class="n">Inventory</span><span class="w"> </span><span class="n">newInventory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Inventory</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">warehouseCode</span><span class="p">(</span><span class="n">warehouseCode</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">productCode</span><span class="p">(</span><span class="n">productCode</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">currentQuantity</span><span class="p">(</span><span class="n">quantity</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">allocatedQuantity</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">orderedQuantity</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">lastReceiptDate</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">now</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">            </span><span class="n">inventoryRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">newInventory</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Inventory</span><span class="w"> </span><span class="n">inventory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventoryOpt</span><span class="p">.</span><span class="na">get</span><span class="p">();</span>
<span class="w">            </span><span class="n">inventoryRepository</span><span class="p">.</span><span class="na">receive</span><span class="p">(</span><span class="n">inventory</span><span class="p">.</span><span class="na">getId</span><span class="p">(),</span><span class="w"> </span><span class="n">quantity</span><span class="p">,</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">now</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 出庫処理</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">ship</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">warehouseCode</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">productCode</span><span class="p">,</span>
<span class="w">                     </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">quantity</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Inventory</span><span class="o">&gt;</span><span class="w"> </span><span class="n">inventoryOpt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventoryRepository</span>
<span class="w">                </span><span class="p">.</span><span class="na">findByWarehouseAndProduct</span><span class="p">(</span><span class="n">warehouseCode</span><span class="p">,</span><span class="w"> </span><span class="n">productCode</span><span class="p">);</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">inventoryOpt</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;在庫が見つかりません&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">Inventory</span><span class="w"> </span><span class="n">inventory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventoryOpt</span><span class="p">.</span><span class="na">get</span><span class="p">();</span>
<span class="w">        </span><span class="n">inventoryRepository</span><span class="p">.</span><span class="na">ship</span><span class="p">(</span><span class="n">inventory</span><span class="p">.</span><span class="na">getId</span><span class="p">(),</span><span class="w"> </span><span class="n">quantity</span><span class="p">,</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">now</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 在庫数量を直接更新（棚卸調整用）</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">adjustQuantity</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">warehouseCode</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">productCode</span><span class="p">,</span>
<span class="w">                               </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">newQuantity</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">reason</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Inventory</span><span class="o">&gt;</span><span class="w"> </span><span class="n">inventoryOpt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventoryRepository</span>
<span class="w">                </span><span class="p">.</span><span class="na">findByWarehouseAndProduct</span><span class="p">(</span><span class="n">warehouseCode</span><span class="p">,</span><span class="w"> </span><span class="n">productCode</span><span class="p">);</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">inventoryOpt</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;在庫が見つかりません&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">Inventory</span><span class="w"> </span><span class="n">inventory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventoryOpt</span><span class="p">.</span><span class="na">get</span><span class="p">();</span>
<span class="w">        </span><span class="n">inventoryRepository</span><span class="p">.</span><span class="na">updateCurrentQuantity</span><span class="p">(</span>
<span class="w">                </span><span class="n">inventory</span><span class="p">.</span><span class="na">getId</span><span class="p">(),</span><span class="w"> </span><span class="n">newQuantity</span><span class="p">,</span><span class="w"> </span><span class="n">reason</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>在庫サマリ・引当結果クラス</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/sales/application/service/InventorySummary.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.sms.application.service</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sms.domain.model.inventory.Inventory</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Builder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">InventorySummary</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">productCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">totalCurrentQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">totalAllocatedQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">totalAvailableQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">totalOrderedQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Inventory</span><span class="o">&gt;</span><span class="w"> </span><span class="n">warehouseDetails</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/sales/application/service/AllocationResult.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.sms.application.service</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Builder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>

<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AllocationResult</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">success</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">allocatedQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">reason</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">AllocationResult</span><span class="w"> </span><span class="nf">success</span><span class="p">(</span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">quantity</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">AllocationResult</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">success</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">allocatedQuantity</span><span class="p">(</span><span class="n">quantity</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">AllocationResult</span><span class="w"> </span><span class="nf">failure</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">reason</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">AllocationResult</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">success</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">allocatedQuantity</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">ZERO</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">reason</span><span class="p">(</span><span class="n">reason</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h2 id="92-db">9.2 在庫移動・棚卸の DB 設計<a class="headerlink" href="#92-db" title="Permanent link">&para;</a></h2>
<h3 id="_9">入出庫履歴の管理<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<p>入出庫履歴は在庫の増減を時系列で記録し、トレーサビリティを確保します。</p>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjMxMXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MzM0cHg7aGVpZ2h0OjMxMXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDMzNCAzMTEiIHdpZHRoPSIzMzRweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjA4Mzc7JiMyMDk4NjsmIzI0MjM1OyYjMjM2NTM7JiMyNzUwODsmIzEyMzk4OyYjMjcwODM7JiMzNjg5Njs8L3RpdGxlPjxkZWZzLz48Zz48ZyBjbGFzcz0idGl0bGUiIGRhdGEtc291cmNlLWxpbmU9IjEiPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTEuOTk5NSIgeD0iMTA0LjQ1NjkiIHk9IjIyLjk5NTEiPiYjMjA4Mzc7JiMyMDk4NjsmIzI0MjM1OyYjMjM2NTM7JiMyNzUwODsmIzEyMzk4OyYjMjcwODM7JiMzNjg5Njs8L3RleHQ+PC9nPjwhLS1jbGFzcyBtb3ZlbWVudC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Im1vdmVtZW50IiBkYXRhLXNvdXJjZS1saW5lPSIzIiBpZD0iZW50MDAwMiI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyNTkuODU5NCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTUxLjk5OTUiIHg9IjciIHk9IjQ0LjI5NjkiLz48ZWxsaXBzZSBjeD0iMjUuNiIgY3k9IjYwLjI5NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTI5LjcwOTMsNjYuMjk2OSBMMjEuOTkwNiw2Ni4yOTY5IEwyMS45OTA2LDUzLjkwNjMgTDI5LjcwOTMsNTMuOTA2MyBMMjkuNzA5Myw1Ni4wNjI1IEwyNC40NDM3LDU2LjA2MjUgTDI0LjQ0MzcsNTguNzM0NCBMMjkuMjA5Myw1OC43MzQ0IEwyOS4yMDkzLDYwLjg5MDYgTDI0LjQ0MzcsNjAuODkwNiBMMjQuNDQzNyw2NC4xNDA2IEwyOS43MDkzLDY0LjE0MDYgTDI5LjcwOTMsNjYuMjk2OSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExMS45OTk1IiB4PSI0MC40IiB5PSI2NS4xNDM2Ij4mIzIwODM3OyYjMjA5ODY7JiMyNDIzNTsmIzIzNjUzOyYjMjc1MDg7JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjgiIHgyPSIxNTcuOTk5NSIgeTE9Ijc2LjI5NjkiIHkyPSI3Ni4yOTY5Ii8+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJJRV9NQU5EQVRPUlkiPjxlbGxpcHNlIGN4PSIxOCIgY3k9Ijg5Ljk0NTMiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4Mi4xMTMyIiB4PSIyNyIgeT0iOTMuMjkyIj4mIzIzNjUzOyYjMjc1MDg7SUQgJiMxNzE7UEsmIzE4Nzs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjgiIHgyPSIxNTcuOTk5NSIgeTE9IjEwMC41OTM4IiB5Mj0iMTAwLjU5MzgiLz48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IklFX01BTkRBVE9SWSI+PGVsbGlwc2UgY3g9IjE4IiBjeT0iMTE0LjI0MjIiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDguODE0MSIgeD0iMjciIHk9IjExNy41ODg5Ij4mIzIwNDg5OyYjMjQyMzU7JiMxMjQ2NzsmIzEyNTQwOyYjMTI0ODk7ICYjMTcxO0ZLJiMxODc7PC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iSUVfTUFOREFUT1JZIj48ZWxsaXBzZSBjeD0iMTgiIGN5PSIxMzAuNTM5MSIgZmlsbD0iIzAwMDAwMCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwOC44MTQxIiB4PSIyNyIgeT0iMTMzLjg4NTciPiYjMjE4MzA7JiMyMTY5NzsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsgJiMxNzE7RksmIzE4Nzs8L3RleHQ+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJJRV9NQU5EQVRPUlkiPjxlbGxpcHNlIGN4PSIxOCIgY3k9IjE0Ni44MzU5IiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iMjciIHk9IjE1MC4xODI2Ij4mIzMxMjI3OyYjMjEyMDU7JiMyNjA4NTsmIzI2MTc4OzwvdGV4dD48ZyBkYXRhLXZpc2liaWxpdHktbW9kaWZpZXI9IklFX01BTkRBVE9SWSI+PGVsbGlwc2UgY3g9IjE4IiBjeT0iMTYzLjEzMjgiIGZpbGw9IiMwMDAwMDAiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSIyNyIgeT0iMTY2LjQ3OTUiPiYjMzEyMjc7JiMyMTIwNTsmIzIxMzA2OyYjMjA5OTg7PC90ZXh0PjxnIGRhdGEtdmlzaWJpbGl0eS1tb2RpZmllcj0iSUVfTUFOREFUT1JZIj48ZWxsaXBzZSBjeD0iMTgiIGN5PSIxNzkuNDI5NyIgZmlsbD0iIzAwMDAwMCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjI3IiB5PSIxODIuNzc2NCI+JiMzMTIyNzsmIzIxMjA1OyYjMjU5Njg7JiMzNzMyNzs8L3RleHQ+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJJRV9NQU5EQVRPUlkiPjxlbGxpcHNlIGN4PSIxOCIgY3k9IjE5NS43MjY2IiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iMjciIHk9IjE5OS4wNzMyIj4mIzMxMjI3OyYjMjEyMDU7JiMyMTA2OTsmIzIyMzEyOyYjMjQyMzU7JiMyNTk2ODs8L3RleHQ+PGcgZGF0YS12aXNpYmlsaXR5LW1vZGlmaWVyPSJJRV9NQU5EQVRPUlkiPjxlbGxpcHNlIGN4PSIxOCIgY3k9IjIxMi4wMjM0IiBmaWxsPSIjMDAwMDAwIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iMjciIHk9IjIxNS4zNzAxIj4mIzMxMjI3OyYjMjEyMDU7JiMyNDQ2MDsmIzIyMzEyOyYjMjQyMzU7JiMyNTk2ODs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iMjciIHk9IjIzMS42NjciPiYjMjAyNTM7JiMzMTA4MDsmIzMwMDU4OyYjMjE0OTU7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjI3IiB5PSIyNDcuOTYzOSI+JiMyMDI1MzsmIzMxMDgwOyYjMzEyNzg7JiMyMTAyOTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iMjciIHk9IjI2NC4yNjA3Ij4mIzMxMjI3OyYjMjEyMDU7JiMyOTcwMjsmIzMwMDAxOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjUuOTk5NSIgeD0iMjciIHk9IjI4MC41NTc2Ij4mIzEyNTI1OyYjMTI0NjU7JiMxMjU0MDsmIzEyNDcxOyYjMTI1MTk7JiMxMjUzMTsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iMjciIHk9IjI5Ni44NTQ1Ij4mIzEyNTI1OyYjMTI0ODM7JiMxMjQ4ODsmIzMwMDU4OyYjMjE0OTU7PC90ZXh0PjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJHTU4zIiBkYXRhLXNvdXJjZS1saW5lPSIyMSIgaWQ9ImVudDAwMDQiPjxwYXRoIGQ9Ik0xOTQuMDksMTAxLjEyNjkgTDE5NC4wOSwxNzAuMjI2OSBMMTU5LjQ4LDE3NC4yMjY5IEwxOTQuMDksMTc4LjIyNjkgTDE5NC4wOSwyNDcuMzIyMiBBMCwwIDAgMCAwIDE5NC4wOSwyNDcuMzIyMiBMMzI3LjkxMzQsMjQ3LjMyMjIgQTAsMCAwIDAgMCAzMjcuOTEzNCwyNDcuMzIyMiBMMzI3LjkxMzQsMTExLjEyNjkgTDMxNy45MTM0LDEwMS4xMjY5IEwxOTQuMDksMTAxLjEyNjkgQTAsMCAwIDAgMCAxOTQuMDksMTAxLjEyNjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0zMTcuOTEzNCwxMDEuMTI2OSBMMzE3LjkxMzQsMTExLjEyNjkgTDMyNy45MTM0LDExMS4xMjY5IEwzMTcuOTEzNCwxMDEuMTI2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTYuMzc5OSIgeD0iMjAwLjA5IiB5PSIxMTguMTkzOCI+JiMzMTIyNzsmIzIxMjA1OyYjMjEzMDY7JiMyMDk5ODs6PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYwLjgyMzMiIHg9IjIwMC4wOSIgeT0iMTMzLjMyNjYiPi0gJiMyMDgzNzsmIzMzNjU1OyYjMjA4Mzc7JiMyNDIzNTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjAuODIzMyIgeD0iMjAwLjA5IiB5PSIxNDguNDU5NCI+LSAmIzIwOTg2OyYjMzM2NTU7JiMyMDk4NjsmIzI0MjM1OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTIuODIzNCIgeD0iMjAwLjA5IiB5PSIxNjMuNTkyMiI+LSAmIzIwNDg5OyYjMjQyMzU7JiMzODI5MTsmIzMxMjI3OyYjMjEyMDU7JiM2NTI4ODsmIzIwOTg2OyYjNjUyODk7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExMi44MjM0IiB4PSIyMDAuMDkiIHk9IjE3OC43MjUiPi0gJiMyMDQ4OTsmIzI0MjM1OyYjMzgyOTE7JiMzMTIyNzsmIzIxMjA1OyYjNjUyODg7JiMyMDgzNzsmIzY1Mjg5OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5OS44MjMzIiB4PSIyMDAuMDkiIHk9IjE5My44NTc4Ij4tICYjMjY4NDI7JiMyMTM2ODsmIzM1NTE5OyYjMjU5NzI7JiM2NTI4ODsmIzIyNjc5OyYjNjUyODk7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk5LjgyMzMiIHg9IjIwMC4wOSIgeT0iMjA4Ljk5MDYiPi0gJiMyNjg0MjsmIzIxMzY4OyYjMzU1MTk7JiMyNTk3MjsmIzY1Mjg4OyYjMjgxODc7JiM2NTI4OTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjAuODIzMyIgeD0iMjAwLjA5IiB5PSIyMjQuMTIzNSI+LSAmIzM2ODIwOyYjMjE2OTc7JiMyMDgzNzsmIzI0MjM1OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIzNC44MjMzIiB4PSIyMDAuMDkiIHk9IjIzOS4yNTYzIj4tICYjMjQyNTk7JiMyNjgyMDs8L3RleHQ+PC9nPjw/cGxhbnR1bWwtc3JjIFJQN1ZJaUNtNkNObHluSFhicTlWR0NRa0gxMWxWME4xZ1dNdFdIUDFIRFdRanhQaVBTOU1YX3owN0FMWk9zRGJXdXdrczhVOUlUa2hsTzk5Z3dyOEJ5X3ZkSV92U1k5QnllSzhJU2lZZ2FVeUFONGlFYmxYdmZwUWRSWm4zZTFPYW9OdjFmUi05djJBYU8tTGUwSUZoczJyVllyTU1IQlVXWHNPMVd4c09CYnlUNVlmMDQ3V1BhRGRpclhQeVljYUN4UkY2R0RjY19JUjFJMnFEd0hacWc1NWR2SENhZ3Y3ajdQRXBLTWl6ZEFnNi1IcnBFdlhWY3YtVGRGcG90eUJoTjVlSmFaRl9ITlpFVDRpYThSM1h0T3VTMDE2Q3dtdW9HRFRaNm9DYmpjMjJLQzg4LXRkYjNpMFFkTFBYOVZJc1JhQ3d3VFA2VTNsb2hqMHUyTDdYaWtCekFQU2dYd05JUWJTOVd0NVpfcnFSRWpoMzZyemxIWXJoMUpIcUpDbnJqNGFlRVFBLW5fM0dmLWtOcjhfMldRaXhkbzczUUFaVV9SOTl2MF91WGkwPz48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_10">移動区分の定義<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>移動区分</th>
<th>在庫影響</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>入荷入庫</strong></td>
<td>増加</td>
<td>仕入先からの入荷</td>
</tr>
<tr>
<td><strong>出荷出庫</strong></td>
<td>減少</td>
<td>顧客への出荷</td>
</tr>
<tr>
<td><strong>倉庫間移動（出）</strong></td>
<td>減少</td>
<td>他倉庫への移動（出庫側）</td>
</tr>
<tr>
<td><strong>倉庫間移動（入）</strong></td>
<td>増加</td>
<td>他倉庫からの移動（入庫側）</td>
</tr>
<tr>
<td><strong>棚卸調整（増）</strong></td>
<td>増加</td>
<td>棚卸による増加調整</td>
</tr>
<tr>
<td><strong>棚卸調整（減）</strong></td>
<td>減少</td>
<td>棚卸による減少調整</td>
</tr>
<tr>
<td><strong>返品入庫</strong></td>
<td>増加</td>
<td>顧客からの返品</td>
</tr>
<tr>
<td><strong>廃棄</strong></td>
<td>減少</td>
<td>廃棄処理</td>
</tr>
</tbody>
</table>
<h3 id="_11">棚卸業務の設計<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<p>棚卸業務は「棚卸表発行 → 実棚カウント → 差異確認 → 在庫調整」の流れで進みます。</p>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IlNUQVRFIiBoZWlnaHQ9IjUxN3B4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MTkwcHg7aGVpZ2h0OjUxN3B4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDE5MCA1MTciIHdpZHRoPSIxOTBweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjY4NDI7JiMyMTM2ODsmIzI2OTg5OyYjMjEyMDk7JiMxMjUwMTsmIzEyNTI1OyYjMTI1NDA7PC90aXRsZT48ZGVmcy8+PGc+PGcgY2xhc3M9InRpdGxlIiBkYXRhLXNvdXJjZS1saW5lPSIxIj48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTcuOTk5NiIgeD0iMzkuMjAwMiIgeT0iMjIuOTk1MSI+JiMyNjg0MjsmIzIxMzY4OyYjMjY5ODk7JiMyMTIwOTsmIzEyNTAxOyYjMTI1MjU7JiMxMjU0MDs8L3RleHQ+PC9nPjxlbGxpcHNlIGN4PSIxMjEiIGN5PSI1My4yOTY5IiBmaWxsPSIjMjIyMjIyIiByeD0iMTAiIHJ5PSIxMCIgc3R5bGU9InN0cm9rZTojMjIyMjIyO3N0cm9rZS13aWR0aDoxOyIvPjxnPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNTAiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNjEuOTk5OCIgeD0iOTAiIHk9IjEyNC4yOTY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iOTAiIHgyPSIxNTEuOTk5OCIgeTE9IjE1MC41OTM4IiB5Mj0iMTUwLjU5MzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MS45OTk4IiB4PSIxMDAiIHk9IjE0Mi4yOTIiPiYjMjAzMTY7JiMyNTEwNDsmIzIwMDEzOzwvdGV4dD48L2c+PGc+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI1MCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI2MS45OTk4IiB4PSI0MCIgeT0iMjUxLjI5NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI0MCIgeDI9IjEwMS45OTk4IiB5MT0iMjc3LjU5MzgiIHkyPSIyNzcuNTkzOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQxLjk5OTgiIHg9IjUwIiB5PSIyNjkuMjkyIj4mIzIzNDU1OyYjMjYwNDU7JiMyMDAxMzs8L3RleHQ+PC9nPjxnPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNTAiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNTAiIHg9IjciIHk9IjM3OC4yOTY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iNyIgeDI9IjU3IiB5MT0iNDA0LjU5MzgiIHkyPSI0MDQuNTkzOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI3Ljk5OTkiIHg9IjE4LjAwMDEiIHk9IjM5Ni4yOTIiPiYjMzA5MDY7JiMyMzQ1MDs8L3RleHQ+PC9nPjxlbGxpcHNlIGN4PSI3NCIgY3k9IjUwMC4yOTY5IiBmaWxsPSJub25lIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMjIyMjIyO3N0cm9rZS13aWR0aDoxOyIvPjxlbGxpcHNlIGN4PSI3NCIgY3k9IjUwMC4yOTY5IiBmaWxsPSIjMjIyMjIyIiByeD0iNiIgcnk9IjYiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MTsiLz48Zz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjUwIiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjUwIiB4PSI5NiIgeT0iMzc4LjI5NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI5NiIgeDI9IjE0NiIgeTE9IjQwNC41OTM4IiB5Mj0iNDA0LjU5MzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNy45OTk5IiB4PSIxMDcuMDAwMSIgeT0iMzk2LjI5MiI+JiMyMTQ2MjsmIzI4MDQwOzwvdGV4dD48L2c+PCEtLWxpbmsgKnN0YXJ0KiB0byA/Pz8tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwMiIgZGF0YS1lbnRpdHktMj0iZW50MDAwMyIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjMiIGlkPSJsbms0Ij48cGF0aCBkPSJNMTIxLDYzLjY1NjkgQzEyMSw3Ny41ODY5IDEyMSw5OC4yNDY5IDEyMSwxMTcuOTQ2OSIgZmlsbD0ibm9uZSIgaWQ9IipzdGFydCotdG8tJiMyMDMxNjsmIzI1MTA0OyYjMjAwMTM7IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMjEsMTIzLjk0NjksMTI1LDExNC45NDY5LDEyMSwxMTguOTQ2OSwxMTcsMTE0Ljk0NjksMTIxLDEyMy45NDY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rID8/PyB0byA/Pz8tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwMyIgZGF0YS1lbnRpdHktMj0iZW50MDAwNSIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjUiIGlkPSJsbms2Ij48cGF0aCBkPSJNMTA2LjQ4LDE3NC43NzY5IEMxMDEuNDYsMTgzLjg1NjkgOTYuMDksMTk0LjM1NjkgOTIsMjA0LjI5NjkgQzg1Ljc5LDIxOS4zOTY5IDgyLjEwNjYsMjMxLjE4NyA3OC40MjY2LDI0NS4wNzciIGZpbGw9Im5vbmUiIGlkPSImIzIwMzE2OyYjMjUxMDQ7JiMyMDAxMzstdG8tJiMyMzQ1NTsmIzI2MDQ1OyYjMjAwMTM7IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI3Ni44OSwyNTAuODc2OSw4My4wNjE1LDI0My4yMDE0LDc4LjE3MDUsMjQ2LjA0MzYsNzUuMzI4MywyNDEuMTUyNiw3Ni44OSwyNTAuODc2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjUyLjAwMDEiIHg9IjkzIiB5PSIyMTcuMzYzOCI+JiMyNjg0MjsmIzIxMzY4OyYjMzgyODM7JiMyMjk4Nzs8L3RleHQ+PC9nPjwhLS1saW5rID8/PyB0byA/Py0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDA1IiBkYXRhLWVudGl0eS0yPSJlbnQwMDA3IiBkYXRhLWxpbmstdHlwZT0iZGVwZW5kZW5jeSIgZGF0YS1zb3VyY2UtbGluZT0iNyIgaWQ9ImxuazgiPjxwYXRoIGQ9Ik00My4yOCwzMDEuNjU2OSBDMzUuNTIsMzEwLjE2NjkgMjguMDksMzIwLjM1NjkgMjQsMzMxLjI5NjkgQzE4LjQzLDM0Ni4xNjY5IDE5LjAxNjksMzU4LjA4NTcgMjIuNDE2OSwzNzIuMTE1NyIgZmlsbD0ibm9uZSIgaWQ9IiYjMjM0NTU7JiMyNjA0NTsmIzIwMDEzOy10by0mIzMwOTA2OyYjMjM0NTA7IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyMy44MywzNzcuOTQ2OSwyNS41OTc4LDM2OC4yNTgsMjIuNjUyNCwzNzMuMDg3NSwxNy44MjI4LDM3MC4xNDIxLDIzLjgzLDM3Ny45NDY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTIuMDAwMSIgeD0iMjUiIHk9IjM0NC4zNjM4Ij4mIzI2ODQyOyYjMjEzNjg7JiMyMzQzNjsmIzIwMTAyOzwvdGV4dD48L2c+PCEtLWxpbmsgPz8gdG8gKmVuZCotLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwNyIgZGF0YS1lbnRpdHktMj0iZW50MDAwOSIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjkiIGlkPSJsbmsxMCI+PHBhdGggZD0iTTQyLjgyLDQyOC43NTY5IEM1MS42Niw0NDguNzc2OSA2MS4yNjI2LDQ3MC40ODk4IDY3LjQ4MjYsNDg0LjU0OTgiIGZpbGw9Im5vbmUiIGlkPSImIzMwOTA2OyYjMjM0NTA7LXRvLSplbmQqIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI2OS45MSw0OTAuMDM2OSw2OS45MjY5LDQ4MC4xODgsNjcuODg3Miw0ODUuNDY0Myw2Mi42MTA5LDQ4My40MjQ2LDY5LjkxLDQ5MC4wMzY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rID8/PyB0byA/Py0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDAzIiBkYXRhLWVudGl0eS0yPSJlbnQwMDExIiBkYXRhLWxpbmstdHlwZT0iZGVwZW5kZW5jeSIgZGF0YS1zb3VyY2UtbGluZT0iMTEiIGlkPSJsbmsxMiI+PHBhdGggZD0iTTEzNy40NCwxNzQuNzg2OSBDMTQyLjUxLDE4My42ODY5IDE0Ny40MywxOTQuMDc2OSAxNTAsMjA0LjI5NjkgQzE2NS40NywyNjUuNzg2OSAxNDYuMTY2NCwzMzQuNTc5NCAxMzIuNjQ2NCwzNzIuMjU5NCIgZmlsbD0ibm9uZSIgaWQ9IiYjMjAzMTY7JiMyNTEwNDsmIzIwMDEzOy10by0mIzIxNDYyOyYjMjgwNDA7IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMzAuNjIsMzc3LjkwNjksMTM3LjQyNDUsMzcwLjc4NjYsMTMyLjMwODYsMzczLjIwMDcsMTI5Ljg5NDYsMzY4LjA4NDgsMTMwLjYyLDM3Ny45MDY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjYiIHg9IjE1Ni40IiB5PSIyODAuODYzOCI+JiMyMTQ2MjsmIzI4MDQwOzwvdGV4dD48L2c+PCEtLWxpbmsgPz8/IHRvID8/LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDUiIGRhdGEtZW50aXR5LTI9ImVudDAwMTEiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSIxMiIgaWQ9ImxuazEzIj48cGF0aCBkPSJNODAuNzYsMzAxLjY5NjkgQzg5LjU3LDMyMy43MTY5IDEwMC4yMjk1LDM1MC4zODY5IDEwOS4wMzk1LDM3Mi4zODY5IiBmaWxsPSJub25lIiBpZD0iJiMyMzQ1NTsmIzI2MDQ1OyYjMjAwMTM7LXRvLSYjMjE0NjI7JiMyODA0MDsiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjExMS4yNywzNzcuOTU2OSwxMTEuNjM3NSwzNjguMTE0OSwxMDkuNDExMiwzNzMuMzE1MiwxMDQuMjEwOSwzNzEuMDg4OSwxMTEuMjcsMzc3Ljk1NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNiIgeD0iOTkuOTkiIHk9IjM0NC4zNjM4Ij4mIzIxNDYyOyYjMjgwNDA7PC90ZXh0PjwvZz48IS0tbGluayA/PyB0byAqZW5kKi0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDExIiBkYXRhLWVudGl0eS0yPSJlbnQwMDA5IiBkYXRhLWxpbmstdHlwZT0iZGVwZW5kZW5jeSIgZGF0YS1zb3VyY2UtbGluZT0iMTQiIGlkPSJsbmsxNCI+PHBhdGggZD0iTTEwOC45LDQyOC43NTY5IEM5OSw0NDguNzc2OSA4OC4xODg4LDQ3MC41OTgxIDgxLjIzODgsNDg0LjY1ODEiIGZpbGw9Im5vbmUiIGlkPSImIzIxNDYyOyYjMjgwNDA7LXRvLSplbmQqIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI3OC41OCw0OTAuMDM2OSw4Ni4xNTQsNDgzLjc0MTMsODAuNzk1Niw0ODUuNTU0Niw3OC45ODIzLDQ4MC4xOTYyLDc4LjU4LDQ5MC4wMzY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjw/cGxhbnR1bWwtc3JjIEF5YWlvS2JMVUJQdXJqRlU3Uy1NaGR0UUZWRG55eko3cE1pVkQtX1h1ZWhNWWJOR3JSTEpVQjl0cGhFRTJLenNoRU5ZV1pGMTRhX05wTnlzUkktOFBtS3J1LU1xeGdWQmt4Y3U0MzhXVFN5TnhOZ3dSWFBTcVREckZLenNqTjVuR09MMUFlMU1PSFpVRi10UGpXd1c5V1czcEtYcU1Jd2UwREdtMDAwMD8+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<h3 id="er">棚卸データの ER 図<a class="headerlink" href="#er" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9Ijc1NnB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6Mjk3cHg7aGVpZ2h0Ojc1NnB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDI5NyA3NTYiIHdpZHRoPSIyOTdweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjY4NDI7JiMyMTM2ODsmIzM4MzA2OyYjMzY4OTk7JiMxMjQ4NjsmIzEyNTQwOyYjMTI1MDI7JiMxMjUyMzs8L3RpdGxlPjxkZWZzLz48Zz48ZyBjbGFzcz0idGl0bGUiIGRhdGEtc291cmNlLWxpbmU9IjEiPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTEuOTk5NSIgeD0iODUuODAwMyIgeT0iMjIuOTk1MSI+JiMyNjg0MjsmIzIxMzY4OyYjMzgzMDY7JiMzNjg5OTsmIzEyNDg2OyYjMTI1NDA7JiMxMjUwMjsmIzEyNTIzOzwvdGV4dD48L2c+PCEtLWNsYXNzID8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjMiIGlkPSJlbnQwMDAyIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIxMC45Njg4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMjAuODE0MSIgeD0iMTYzLjE5IiB5PSIyMDEuODg2OSIvPjxlbGxpcHNlIGN4PSIxODYuNjU2NSIgY3k9IjIxNy44ODY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0xOTAuNzY1OSwyMjMuODg2OSBMMTgzLjA0NzEsMjIzLjg4NjkgTDE4My4wNDcxLDIxMS40OTYyIEwxOTAuNzY1OSwyMTEuNDk2MiBMMTkwLjc2NTksMjEzLjY1MjUgTDE4NS41MDAzLDIxMy42NTI1IEwxODUuNTAwMywyMTYuMzI0NCBMMTkwLjI2NTksMjE2LjMyNDQgTDE5MC4yNjU5LDIxOC40ODA2IEwxODUuNTAwMywyMTguNDgwNiBMMTg1LjUwMDMsMjIxLjczMDYgTDE5MC43NjU5LDIyMS43MzA2IEwxOTAuNzY1OSwyMjMuODg2OSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjIwMi41Mzc5IiB5PSIyMjIuNzMzNiI+JiMyNjg0MjsmIzIxMzY4OyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxNjQuMTkiIHgyPSIyODMuMDA0MSIgeTE9IjIzMy44ODY5IiB5Mj0iMjMzLjg4NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NC4xMTMzIiB4PSIxNjkuMTkiIHk9IjI1MC44ODIiPklEICYjMTcxO1BLJiMxODc7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxNjQuMTkiIHgyPSIyODMuMDA0MSIgeTE9IjI1OC4xODM3IiB5Mj0iMjU4LjE4MzciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ny4wMDg1IiB4PSIxNjkuMTkiIHk9IjI3NS4xNzg5Ij4mIzI2ODQyOyYjMjEzNjg7JiMzMDA1ODsmIzIxNDk1OyAmIzE3MTtVSyYjMTg3OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDguODE0MSIgeD0iMTY5LjE5IiB5PSIyOTEuNDc1NyI+JiMyMDQ4OTsmIzI0MjM1OyYjMTI0Njc7JiMxMjU0MDsmIzEyNDg5OyAmIzE3MTtGSyYjMTg3OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MS45OTk4IiB4PSIxNjkuMTkiIHk9IjMwNy43NzI2Ij4mIzI2ODQyOyYjMjEzNjg7JiMyNjA4NTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iMTY5LjE5IiB5PSIzMjQuMDY5NSI+JiMyNjg0MjsmIzIxMzY4OyYjMzgyODM7JiMyMjk4NzsmIzI2MDg1OyYjMjYxNzg7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgzLjk5OTYiIHg9IjE2OS4xOSIgeT0iMzQwLjM2NjQiPiYjMjY4NDI7JiMyMTM2ODsmIzMyMDY2OyYjMjAxMDI7JiMyNjA4NTsmIzI2MTc4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSIxNjkuMTkiIHk9IjM1Ni42NjMyIj4mIzEyNDczOyYjMTI0ODY7JiMxMjU0MDsmIzEyNDc5OyYjMTI0NzM7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI3Ljk5OTkiIHg9IjE2OS4xOSIgeT0iMzcyLjk2MDEiPiYjMjA2MzM7JiMzMjc3MTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iMTY5LjE5IiB5PSIzODkuMjU3Ij4mIzIwMzE2OyYjMjUxMDQ7JiMyNjA4NTsmIzI2MTc4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSIxNjkuMTkiIHk9IjQwNS41NTM5Ij4mIzI2MzU2OyYjMjYwMzI7JiMyNjA4NTsmIzI2MTc4OzwvdGV4dD48L2c+PCEtLWNsYXNzID8/Pz8/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIxNyIgaWQ9ImVudDAwMDMiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMjU5Ljg1OTQiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEzNy45OTk1IiB4PSI1MS42IiB5PSI0ODkuODU2OSIvPjxlbGxpcHNlIGN4PSI3MC4xOTk5IiBjeT0iNTA1Ljg1NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTc0LjMwOTMsNTExLjg1NjkgTDY2LjU5MDYsNTExLjg1NjkgTDY2LjU5MDYsNDk5LjQ2NjIgTDc0LjMwOTMsNDk5LjQ2NjIgTDc0LjMwOTMsNTAxLjYyMjUgTDY5LjA0MzcsNTAxLjYyMjUgTDY5LjA0MzcsNTA0LjI5NDQgTDczLjgwOTMsNTA0LjI5NDQgTDczLjgwOTMsNTA2LjQ1MDYgTDY5LjA0MzcsNTA2LjQ1MDYgTDY5LjA0MzcsNTA5LjcwMDYgTDc0LjMwOTMsNTA5LjcwMDYgTDc0LjMwOTMsNTExLjg1NjkgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ny45OTk2IiB4PSI4NC45OTk5IiB5PSI1MTAuNzAzNiI+JiMyNjg0MjsmIzIxMzY4OyYjMjYxMjY7JiMzMjA0ODsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iNTIuNiIgeDI9IjE4OC41OTk1IiB5MT0iNTIxLjg1NjkiIHkyPSI1MjEuODU2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU0LjExMzMiIHg9IjU3LjYiIHk9IjUzOC44NTIiPklEICYjMTcxO1BLJiMxODc7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI1Mi42IiB4Mj0iMTg4LjU5OTUiIHkxPSI1NDYuMTUzOCIgeTI9IjU0Ni4xNTM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODEuNzIzNSIgeD0iNTcuNiIgeT0iNTYzLjE0ODkiPiYjMjY4NDI7JiMyMTM2ODtJRCAmIzE3MTtGSyYjMTg3OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSI1Ny42IiB5PSI1NzkuNDQ1NyI+JiMyNjg0MjsmIzIxMzY4OyYjMzQ4OTI7JiMzMDA1ODsmIzIxNDk1OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDguODE0MSIgeD0iNTcuNiIgeT0iNTk1Ljc0MjYiPiYjMjE4MzA7JiMyMTY5NzsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsgJiMxNzE7RksmIzE4Nzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTI1Ljk5OTUiIHg9IjU3LjYiIHk9IjYxMi4wMzk1Ij4mIzEyNTI1OyYjMTI0NjU7JiMxMjU0MDsmIzEyNDcxOyYjMTI1MTk7JiMxMjUzMTsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iNTcuNiIgeT0iNjI4LjMzNjQiPiYjMTI1MjU7JiMxMjQ4MzsmIzEyNDg4OyYjMzAwNTg7JiMyMTQ5NTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iNTcuNiIgeT0iNjQ0LjYzMzIiPiYjMjQxMTU7JiMzMTgwNzsmIzIyMzEyOyYjMjQyMzU7JiMyNTk2ODs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDEuOTk5OCIgeD0iNTcuNiIgeT0iNjYwLjkzMDEiPiYjMjM0NTU7JiMyNjg0MjsmIzI1OTY4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MS45OTk4IiB4PSI1Ny42IiB5PSI2NzcuMjI3Ij4mIzI0MDQ2OyYjMzAwNjQ7JiMyNTk2ODs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iNTcuNiIgeT0iNjkzLjUyMzkiPiYjMjQwNDY7JiMzMDA2NDsmIzI5NzAyOyYjMzAwMDE7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgzLjk5OTYiIHg9IjU3LjYiIHk9IjcwOS44MjA3Ij4mIzM1NTE5OyYjMjU5NzI7JiMyODE2ODsmIzEyNTAxOyYjMTI1MjE7JiMxMjQ2NDs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iNTcuNiIgeT0iNzI2LjExNzYiPiYjMjAzMTY7JiMyNTEwNDsmIzI2MDg1OyYjMjYxNzg7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjU3LjYiIHk9Ijc0Mi40MTQ1Ij4mIzI2MzU2OyYjMjYwMzI7JiMyNjA4NTsmIzI2MTc4OzwvdGV4dD48L2c+PCEtLWNsYXNzID8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjM0IiBpZD0iZW50MDAwNCI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI4MC41OTM4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMjEuMjAzOCIgeD0iMTYzIiB5PSI0NC4yOTY5Ii8+PGVsbGlwc2UgY3g9IjE4Ni42NDE4IiBjeT0iNjAuMjk2OSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMTkwLjc1MTIsNjYuMjk2OSBMMTgzLjAzMjUsNjYuMjk2OSBMMTgzLjAzMjUsNTMuOTA2MyBMMTkwLjc1MTIsNTMuOTA2MyBMMTkwLjc1MTIsNTYuMDYyNSBMMTg1LjQ4NTYsNTYuMDYyNSBMMTg1LjQ4NTYsNTguNzM0NCBMMTkwLjI1MTIsNTguNzM0NCBMMTkwLjI1MTIsNjAuODkwNiBMMTg1LjQ4NTYsNjAuODkwNiBMMTg1LjQ4NTYsNjQuMTQwNiBMMTkwLjc1MTIsNjQuMTQwNiBMMTkwLjc1MTIsNjYuMjk2OSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjIwMi41NjIzIiB5PSI2NS4xNDM2Ij4mIzIwNDg5OyYjMjQyMzU7JiMxMjUxMDsmIzEyNDczOyYjMTI0Nzk7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjE2NCIgeDI9IjI4My4yMDM4IiB5MT0iNzYuMjk2OSIgeTI9Ijc2LjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDkuMjAzOCIgeD0iMTY5IiB5PSI5My4yOTIiPiYjMjA0ODk7JiMyNDIzNTsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsgJiMxNzE7UEsmIzE4Nzs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE2NCIgeDI9IjI4My4yMDM4IiB5MT0iMTAwLjU5MzgiIHkyPSIxMDAuNTkzOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQxLjk5OTgiIHg9IjE2OSIgeT0iMTE3LjU4ODkiPiYjMjA0ODk7JiMyNDIzNTsmIzIxNTE3OzwvdGV4dD48L2c+PCEtLWNsYXNzID8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjQwIiBpZD0iZW50MDAwNSI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI4MC41OTM4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMjEuMjAzOCIgeD0iNyIgeT0iMjY3LjA3NjkiLz48ZWxsaXBzZSBjeD0iMzAuNjQxOCIgY3k9IjI4My4wNzY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0zNC43NTEyLDI4OS4wNzY5IEwyNy4wMzI1LDI4OS4wNzY5IEwyNy4wMzI1LDI3Ni42ODYzIEwzNC43NTEyLDI3Ni42ODYzIEwzNC43NTEyLDI3OC44NDI1IEwyOS40ODU2LDI3OC44NDI1IEwyOS40ODU2LDI4MS41MTQ0IEwzNC4yNTEyLDI4MS41MTQ0IEwzNC4yNTEyLDI4My42NzA2IEwyOS40ODU2LDI4My42NzA2IEwyOS40ODU2LDI4Ni45MjA2IEwzNC43NTEyLDI4Ni45MjA2IEwzNC43NTEyLDI4OS4wNzY5IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iNDYuNTYyMyIgeT0iMjg3LjkyMzYiPiYjMjE4MzA7JiMyMTY5NzsmIzEyNTEwOyYjMTI0NzM7JiMxMjQ3OTs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iOCIgeDI9IjEyNy4yMDM4IiB5MT0iMjk5LjA3NjkiIHkyPSIyOTkuMDc2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwOS4yMDM4IiB4PSIxMyIgeT0iMzE2LjA3MiI+JiMyMTgzMDsmIzIxNjk3OyYjMTI0Njc7JiMxMjU0MDsmIzEyNDg5OyAmIzE3MTtQSyYjMTg3OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iOCIgeDI9IjEyNy4yMDM4IiB5MT0iMzIzLjM3MzgiIHkyPSIzMjMuMzczOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQxLjk5OTgiIHg9IjEzIiB5PSIzNDAuMzY4OSI+JiMyMTgzMDsmIzIxNjk3OyYjMjE1MTc7PC90ZXh0PjwvZz48IS0tbGluayA/Pz8/PyB0byA/Pz8/Py0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDA0IiBkYXRhLWVudGl0eS0yPSJlbnQwMDAyIiBkYXRhLWxpbmstdHlwZT0iY3Jvd2Zvb3QiIGRhdGEtc291cmNlLWxpbmU9IjQ2IiBpZD0ibG5rNiI+PHBhdGggY29kZUxpbmU9IjQ2IiBkPSJNMjIzLjYsMTMzLjMxNjkgQzIyMy42LDE1NC43OTY5IDIyMy42LDE1Ni40MjY5IDIyMy42LDE4My42MDY5IiBmaWxsPSJub25lIiBpZD0iJiMyMDQ4OTsmIzI0MjM1OyYjMTI1MTA7JiMxMjQ3MzsmIzEyNDc5Oy0mIzI2ODQyOyYjMjEzNjg7JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjIxOS42IiB4Mj0iMjI3LjYiIHkxPSIxMjkuMzE2OSIgeTI9IjEyOS4zMTY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjIxOS42IiB4Mj0iMjI3LjYiIHkxPSIxMzIuMzE2OSIgeTI9IjEzMi4zMTY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjIyMy42IiB4Mj0iMjIzLjYiIHkxPSIxMzMuMzE2OSIgeTI9IjEyNS4zMTY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjIyMy42IiB4Mj0iMjI5LjYiIHkxPSIxOTMuNjA2OSIgeTI9IjIwMS42MDY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjIyMy42IiB4Mj0iMjE3LjYiIHkxPSIxOTMuNjA2OSIgeTI9IjIwMS42MDY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjIyMy42IiB4Mj0iMjIzLjYiIHkxPSIxOTMuNjA2OSIgeTI9IjIwMS42MDY5Ii8+PGVsbGlwc2UgY3g9IjIyMy42IiBjeT0iMTg3LjYwNjkiIGZpbGw9Im5vbmUiIHJ4PSI0IiByeT0iNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY1LjAwMDEiIHg9IjIyNC42IiB5PSIxNjcuOTUzOCI+JiMyMDQ4OTsmIzI0MjM1OyYjMTI0Njc7JiMxMjU0MDsmIzEyNDg5OzwvdGV4dD48L2c+PCEtLWxpbmsgPz8/Pz8gdG8gPz8/Pz8/Py0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDAyIiBkYXRhLWVudGl0eS0yPSJlbnQwMDAzIiBkYXRhLWxpbmstdHlwZT0iY3Jvd2Zvb3QiIGRhdGEtc291cmNlLWxpbmU9IjQ3IiBpZD0ibG5rNyI+PHBhdGggY29kZUxpbmU9IjQ3IiBkPSJNMTg2LjM1MjIsNDIwLjYzMDQgQzE3OC4yMTIyLDQ0NS4xODA0IDE3Ny42MjIsNDQ2Ljk1MzkgMTY5LjE2Miw0NzIuNDMzOSIgZmlsbD0ibm9uZSIgaWQ9IiYjMjY4NDI7JiMyMTM2ODsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTstJiMyNjg0MjsmIzIxMzY4OyYjMjYxMjY7JiMzMjA0ODsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTgzLjgxNDQiIHgyPSIxOTEuNDA3OSIgeTE9IjQxNS41NzQ3IiB5Mj0iNDE4LjA5MjUiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTgyLjg3MDIiIHgyPSIxOTAuNDYzNyIgeTE9IjQxOC40MjIzIiB5Mj0iNDIwLjk0Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE4Ni4zNTIyIiB4Mj0iMTg4Ljg3IiB5MT0iNDIwLjYzMDQiIHkyPSI0MTMuMDM2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxNjYuMDEwOSIgeDI9IjE2OS4xODQzIiB5MT0iNDgxLjkyNDQiIHkyPSI0OTEuNDA3NSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxNjYuMDEwOSIgeDI9IjE1Ny43OTU3IiB5MT0iNDgxLjkyNDQiIHkyPSI0ODcuNjI2MiIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxNjYuMDEwOSIgeDI9IjE2My40OSIgeTE9IjQ4MS45MjQ0IiB5Mj0iNDg5LjUxNjkiLz48ZWxsaXBzZSBjeD0iMTY3LjkwMTUiIGN5PSI0NzYuMjMwMSIgZmlsbD0ibm9uZSIgcng9IjQiIHJ5PSI0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzkuODQ0MyIgeD0iMTc5LjI3IiB5PSI0NTUuOTIzOCI+JiMyNjg0MjsmIzIxMzY4O0lEPC90ZXh0PjwvZz48IS0tbGluayA/Pz8/PyB0byA/Pz8/Pz8/LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDUiIGRhdGEtZW50aXR5LTI9ImVudDAwMDMiIGRhdGEtbGluay10eXBlPSJjcm93Zm9vdCIgZGF0YS1zb3VyY2UtbGluZT0iNDgiIGlkPSJsbms4Ij48cGF0aCBjb2RlTGluZT0iNDgiIGQ9Ik03My40MzgyLDM1NS45NjMxIEM3Ny4zMjgyLDM4Ni41ODMxIDgyLjE4LDQyMi4wMzY5IDg4LjYsNDU5Ljg1NjkgQzkwLjI1LDQ2OS41NjY5IDg4Ljc2MzYsNDYxLjg5OTQgOTAuNjMzNiw0NzEuOTY5NCIgZmlsbD0ibm9uZSIgaWQ9IiYjMjE4MzA7JiMyMTY5NzsmIzEyNTEwOyYjMTI0NzM7JiMxMjQ3OTstJiMyNjg0MjsmIzIxMzY4OyYjMjYxMjY7JiMzMjA0ODsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNjguOTY2IiB4Mj0iNzYuOTAyMiIgeTE9IjM1Mi40OTkxIiB5Mj0iMzUxLjQ5MDkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNjkuMzQ0MSIgeDI9Ijc3LjI4MDMiIHkxPSIzNTUuNDc1MiIgeTI9IjM1NC40NjY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjczLjQzODIiIHgyPSI3Mi40MyIgeTE9IjM1NS45NjMxIiB5Mj0iMzQ4LjAyNjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iOTIuNDU5NCIgeDI9Ijk5LjgxOTEiIHkxPSI0ODEuODAxMyIgeTI9IjQ4OC41NzE0Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjkyLjQ1OTQiIHgyPSI4OC4wMjA5IiB5MT0iNDgxLjgwMTMiIHkyPSI0OTAuNzYyMyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI5Mi40NTk0IiB4Mj0iOTMuOTIiIHkxPSI0ODEuODAxMyIgeTI9IjQ4OS42NjY5Ii8+PGVsbGlwc2UgY3g9IjkxLjM2MzkiIGN5PSI0NzUuOTAyMiIgZmlsbD0ibm9uZSIgcng9IjQiIHJ5PSI0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjUuMDAwMSIgeD0iODkuNiIgeT0iNDU1LjkyMzgiPiYjMjE4MzA7JiMyMTY5NzsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTs8L3RleHQ+PC9nPjw/cGxhbnR1bWwtc3JjIFpMQjFKaTkwNEJ0RkxfRzctV0U0UzM4Y25laU5GdTQzWVQ1QkJtUENTMlVmOU9Xc3FROGVxSVduQTRISTBnUUxRRmVubXN4WEJzb3RCVUJzV0JWUERfRGN0ZmpQZXM4U2IzTkhrLUNqVnpiLU5qUHhYMlJYNXM2UlMwWEdGWkdnbmQ1UUc3V01mcllXTE01ZElvaU16dFBCOVQxcklEQVhDLTJOTldKbG5wMmxEX1hpSTZtWWtwS1lVM2s2YXI5bnltQlBxMlJsRHdFdHdCMmlwbVVScHltSzhsUVBBYzkxNTBEZGRLS1RPVnhUNVBRVHFVd2Rla3NjWm5ENWpCWXoyQVZrMWthSU1qRXRVM2ZGdDAxdEo3dnJjaEQxLTR2aUI1andYN3Qyb1FmNHZYMDloUW81Rm1kVFc3VFZldHE4bm1LLVVlb2NvQ1dSWE94eDZ1TXM2THdGT0o0OFgzQ0xsYU5lNEJ1SFNfX2JEenF1RmlHeGFxeHBEeVhpOW5ia2p6UnZZVExyVml4eVlZeXBBTHlUTkFsZi1iNHJ6c2FBY2c4N3I4ZV9IRkxtMUlzeDVRWEFEXzBLNnB5MD8+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_12">マイグレーション：入出庫履歴・棚卸テーブルの作成<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h3>
<details>
<summary>V016__create_stock_movement_tables.sql</summary>

<div class="highlight"><pre><span></span><code><span class="c1">-- src/main/resources/db/migration/V016__create_stock_movement_tables.sql</span>

<span class="c1">-- 移動区分</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TYPE</span><span class="w"> </span><span class="err">移動区分</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">ENUM</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s1">&#39;入荷入庫&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="s1">&#39;出荷出庫&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="s1">&#39;倉庫間移動出&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="s1">&#39;倉庫間移動入&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="s1">&#39;棚卸調整増&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="s1">&#39;棚卸調整減&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="s1">&#39;返品入庫&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="s1">&#39;廃棄&#39;</span>
<span class="p">);</span>

<span class="c1">-- 棚卸ステータス</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TYPE</span><span class="w"> </span><span class="err">棚卸ステータス</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">ENUM</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;作成中&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;実施中&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;確定&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;取消&#39;</span><span class="p">);</span>

<span class="c1">-- 入出庫履歴データ</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;入出庫履歴データ&quot;</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="ss">&quot;ID&quot;</span><span class="w"> </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;倉庫コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;商品コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;移動日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;移動区分&quot;</span><span class="w"> </span><span class="err">移動区分</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;移動数量&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;移動前在庫数&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;移動後在庫数&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;伝票番号&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;伝票種別&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;移動理由&quot;</span><span class="w"> </span><span class="nb">TEXT</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;ロケーションコード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;ロット番号&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;作成日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;作成者&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;fk_入出庫履歴_倉庫&quot;</span>
<span class="w">        </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;倉庫コード&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;倉庫マスタ&quot;</span><span class="p">(</span><span class="ss">&quot;倉庫コード&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;fk_入出庫履歴_商品&quot;</span>
<span class="w">        </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;商品コード&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;商品マスタ&quot;</span><span class="p">(</span><span class="ss">&quot;商品コード&quot;</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">-- 棚卸データ（ヘッダ）</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;棚卸データ&quot;</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="ss">&quot;ID&quot;</span><span class="w"> </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;棚卸番号&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;倉庫コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;棚卸日&quot;</span><span class="w"> </span><span class="nb">DATE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;棚卸開始日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;棚卸終了日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;ステータス&quot;</span><span class="w"> </span><span class="err">棚卸ステータス</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="s1">&#39;作成中&#39;</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;備考&quot;</span><span class="w"> </span><span class="nb">TEXT</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;バージョン&quot;</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;作成日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;作成者&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;更新日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;更新者&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;fk_棚卸_倉庫&quot;</span>
<span class="w">        </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;倉庫コード&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;倉庫マスタ&quot;</span><span class="p">(</span><span class="ss">&quot;倉庫コード&quot;</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">-- 棚卸明細データ</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;棚卸明細データ&quot;</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="ss">&quot;ID&quot;</span><span class="w"> </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;棚卸ID&quot;</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;棚卸行番号&quot;</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;商品コード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;ロケーションコード&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;ロット番号&quot;</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;帳簿在庫数&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;実棚数&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;差異数&quot;</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span>
<span class="w">    </span><span class="ss">&quot;差異理由&quot;</span><span class="w"> </span><span class="nb">TEXT</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;調整済フラグ&quot;</span><span class="w"> </span><span class="nb">BOOLEAN</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">FALSE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;作成日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;更新日時&quot;</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;fk_棚卸明細_棚卸&quot;</span>
<span class="w">        </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;棚卸ID&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;棚卸データ&quot;</span><span class="p">(</span><span class="ss">&quot;ID&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">DELETE</span><span class="w"> </span><span class="k">CASCADE</span><span class="p">,</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;fk_棚卸明細_商品&quot;</span>
<span class="w">        </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;商品コード&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">&quot;商品マスタ&quot;</span><span class="p">(</span><span class="ss">&quot;商品コード&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="ss">&quot;uk_棚卸明細_棚卸_行&quot;</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;棚卸ID&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;棚卸行番号&quot;</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">-- 差異数を自動計算するトリガー</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="k">REPLACE</span><span class="w"> </span><span class="k">FUNCTION</span><span class="w"> </span><span class="n">calculate_stocktaking_difference</span><span class="p">()</span>
<span class="k">RETURNS</span><span class="w"> </span><span class="k">TRIGGER</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="err">$$</span>
<span class="k">BEGIN</span>
<span class="w">    </span><span class="k">IF</span><span class="w"> </span><span class="k">NEW</span><span class="p">.</span><span class="ss">&quot;実棚数&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">THEN</span>
<span class="w">        </span><span class="k">NEW</span><span class="p">.</span><span class="ss">&quot;差異数&quot;</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="k">NEW</span><span class="p">.</span><span class="ss">&quot;実棚数&quot;</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="k">NEW</span><span class="p">.</span><span class="ss">&quot;帳簿在庫数&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="k">END</span><span class="w"> </span><span class="k">IF</span><span class="p">;</span>
<span class="w">    </span><span class="k">RETURN</span><span class="w"> </span><span class="k">NEW</span><span class="p">;</span>
<span class="k">END</span><span class="p">;</span>
<span class="err">$$</span><span class="w"> </span><span class="k">LANGUAGE</span><span class="w"> </span><span class="n">plpgsql</span><span class="p">;</span>

<span class="k">CREATE</span><span class="w"> </span><span class="k">TRIGGER</span><span class="w"> </span><span class="n">trg_棚卸明細_差異計算</span>
<span class="w">    </span><span class="k">BEFORE</span><span class="w"> </span><span class="k">INSERT</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="k">UPDATE</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;棚卸明細データ&quot;</span>
<span class="w">    </span><span class="k">FOR</span><span class="w"> </span><span class="k">EACH</span><span class="w"> </span><span class="k">ROW</span>
<span class="w">    </span><span class="k">EXECUTE</span><span class="w"> </span><span class="k">FUNCTION</span><span class="w"> </span><span class="n">calculate_stocktaking_difference</span><span class="p">();</span>

<span class="c1">-- インデックス</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_入出庫履歴_倉庫コード&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;入出庫履歴データ&quot;</span><span class="p">(</span><span class="ss">&quot;倉庫コード&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_入出庫履歴_商品コード&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;入出庫履歴データ&quot;</span><span class="p">(</span><span class="ss">&quot;商品コード&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_入出庫履歴_移動日時&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;入出庫履歴データ&quot;</span><span class="p">(</span><span class="ss">&quot;移動日時&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_入出庫履歴_伝票番号&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;入出庫履歴データ&quot;</span><span class="p">(</span><span class="ss">&quot;伝票番号&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_棚卸_倉庫コード&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;棚卸データ&quot;</span><span class="p">(</span><span class="ss">&quot;倉庫コード&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_棚卸_棚卸日&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;棚卸データ&quot;</span><span class="p">(</span><span class="ss">&quot;棚卸日&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_棚卸_ステータス&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;棚卸データ&quot;</span><span class="p">(</span><span class="ss">&quot;ステータス&quot;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="ss">&quot;idx_棚卸明細_商品コード&quot;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="ss">&quot;棚卸明細データ&quot;</span><span class="p">(</span><span class="ss">&quot;商品コード&quot;</span><span class="p">);</span>

<span class="c1">-- テーブルコメント</span>
<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;入出庫履歴データ&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;在庫の入出庫履歴を記録するテーブル&#39;</span><span class="p">;</span>
<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;棚卸データ&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;棚卸作業のヘッダ情報を管理するテーブル&#39;</span><span class="p">;</span>
<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;棚卸明細データ&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;棚卸明細・差異情報を管理するテーブル&#39;</span><span class="p">;</span>
<span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="ss">&quot;棚卸データ&quot;</span><span class="p">.</span><span class="ss">&quot;バージョン&quot;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;楽観ロック用バージョン番号&#39;</span><span class="p">;</span>
</code></pre></div>

</details>

<h3 id="_13">入出庫履歴・棚卸エンティティの実装<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h3>
<details>
<summary>移動区分 ENUM</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/sales/domain/model/inventory/MovementType.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.sms.domain.model.inventory</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Getter</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>

<span class="nd">@Getter</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">enum</span><span class="w"> </span><span class="n">MovementType</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">RECEIPT</span><span class="p">(</span><span class="s">&quot;入荷入庫&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">SHIPMENT</span><span class="p">(</span><span class="s">&quot;出荷出庫&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">TRANSFER_OUT</span><span class="p">(</span><span class="s">&quot;倉庫間移動出&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">TRANSFER_IN</span><span class="p">(</span><span class="s">&quot;倉庫間移動入&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">ADJUSTMENT_PLUS</span><span class="p">(</span><span class="s">&quot;棚卸調整増&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">ADJUSTMENT_MINUS</span><span class="p">(</span><span class="s">&quot;棚卸調整減&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">RETURN_RECEIPT</span><span class="p">(</span><span class="s">&quot;返品入庫&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">DISPOSAL</span><span class="p">(</span><span class="s">&quot;廃棄&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">displayName</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">MovementType</span><span class="w"> </span><span class="nf">fromDisplayName</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">displayName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">MovementType</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">values</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">type</span><span class="p">.</span><span class="na">displayName</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">displayName</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">type</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;Unknown movement type: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">displayName</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 入庫系の移動かどうか</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isInbound</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">RECEIPT</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">TRANSFER_IN</span><span class="w"> </span><span class="o">||</span>
<span class="w">               </span><span class="k">this</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ADJUSTMENT_PLUS</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">RETURN_RECEIPT</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 出庫系の移動かどうか</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isOutbound</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">SHIPMENT</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">TRANSFER_OUT</span><span class="w"> </span><span class="o">||</span>
<span class="w">               </span><span class="k">this</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ADJUSTMENT_MINUS</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">DISPOSAL</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>棚卸ステータス ENUM</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/sales/domain/model/inventory/StocktakingStatus.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.sms.domain.model.inventory</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Getter</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>

<span class="nd">@Getter</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">enum</span><span class="w"> </span><span class="n">StocktakingStatus</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">DRAFT</span><span class="p">(</span><span class="s">&quot;作成中&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">IN_PROGRESS</span><span class="p">(</span><span class="s">&quot;実施中&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">CONFIRMED</span><span class="p">(</span><span class="s">&quot;確定&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">CANCELLED</span><span class="p">(</span><span class="s">&quot;取消&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">displayName</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">StocktakingStatus</span><span class="w"> </span><span class="nf">fromDisplayName</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">displayName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">StocktakingStatus</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">values</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">status</span><span class="p">.</span><span class="na">displayName</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">displayName</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">status</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;Unknown stocktaking status: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">displayName</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 実施開始可能かどうか</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">canStart</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">DRAFT</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 確定可能かどうか</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">canConfirm</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">IN_PROGRESS</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 取消可能かどうか</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">canCancel</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">DRAFT</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">IN_PROGRESS</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>入出庫履歴エンティティ</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/sales/domain/model/inventory/StockMovement.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.sms.domain.model.inventory</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Builder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>

<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">StockMovement</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">warehouseCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">productCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">movementDateTime</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">MovementType</span><span class="w"> </span><span class="n">movementType</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">movementQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">beforeQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">afterQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">documentNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">documentType</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">movementReason</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">locationCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">lotNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">createdAt</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">createdBy</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// リレーション</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Warehouse</span><span class="w"> </span><span class="n">warehouse</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Product</span><span class="w"> </span><span class="n">product</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

</details>

<details>
<summary>棚卸データ・棚卸明細エンティティ</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/sales/domain/model/inventory/Stocktaking.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.sms.domain.model.inventory</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.AllArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Builder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.NoArgsConstructor</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.ArrayList</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Stocktaking</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">stocktakingNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">warehouseCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">stocktakingDate</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">startDateTime</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">endDateTime</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">StocktakingStatus</span><span class="w"> </span><span class="n">status</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">remarks</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">createdAt</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">createdBy</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">updatedAt</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">updatedBy</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// 楽観ロック用バージョン</span>
<span class="w">    </span><span class="nd">@Builder.Default</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// リレーション</span>
<span class="w">    </span><span class="nd">@Builder.Default</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">StocktakingDetail</span><span class="o">&gt;</span><span class="w"> </span><span class="n">details</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 差異がある明細があるかどうか</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">hasDifference</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">details</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">anyMatch</span><span class="p">(</span><span class="n">d</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="na">getDifferenceQuantity</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="w">                         </span><span class="n">d</span><span class="p">.</span><span class="na">getDifferenceQuantity</span><span class="p">().</span><span class="na">signum</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 全明細が調整済みかどうか</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isAllAdjusted</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">details</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">allMatch</span><span class="p">(</span><span class="n">StocktakingDetail</span><span class="p">::</span><span class="n">getAdjustedFlag</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/sms/domain/model/inventory/StocktakingDetail.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.sms.domain.model.inventory</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.AllArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Builder</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.NoArgsConstructor</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>

<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">StocktakingDetail</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">stocktakingId</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">lineNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">productCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">locationCode</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">lotNumber</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">bookQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">actualQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">differenceQuantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">differenceReason</span><span class="p">;</span>
<span class="w">    </span><span class="nd">@Builder.Default</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Boolean</span><span class="w"> </span><span class="n">adjustedFlag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">createdAt</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">updatedAt</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 実棚数を入力</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setActualQuantityAndCalculateDifference</span><span class="p">(</span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">actualQty</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">actualQuantity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">actualQty</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">differenceQuantity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">actualQty</span><span class="p">.</span><span class="na">subtract</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">bookQuantity</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 差異があるかどうか</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">hasDifference</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">differenceQuantity</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">differenceQuantity</span><span class="p">.</span><span class="na">signum</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="_14">棚卸サービスの実装<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h3>
<details>
<summary>棚卸サービス</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/sales/application/service/StocktakingService.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.sms.application.service</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sms.application.port.out.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sms.domain.model.inventory.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Service</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.transaction.annotation.Transactional</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.format.DateTimeFormatter</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.ArrayList</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Optional</span><span class="p">;</span>

<span class="nd">@Service</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">StocktakingService</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">StocktakingRepository</span><span class="w"> </span><span class="n">stocktakingRepository</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">InventoryRepository</span><span class="w"> </span><span class="n">inventoryRepository</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">StockMovementRepository</span><span class="w"> </span><span class="n">stockMovementRepository</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 棚卸を作成する</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Stocktaking</span><span class="w"> </span><span class="nf">createStocktaking</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">warehouseCode</span><span class="p">,</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">stocktakingDate</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">stocktakingNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">generateStocktakingNumber</span><span class="p">(</span><span class="n">stocktakingDate</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// 倉庫の在庫から棚卸明細を作成</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Inventory</span><span class="o">&gt;</span><span class="w"> </span><span class="n">inventories</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventoryRepository</span><span class="p">.</span><span class="na">findByWarehouseCode</span><span class="p">(</span><span class="n">warehouseCode</span><span class="p">);</span>

<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">StocktakingDetail</span><span class="o">&gt;</span><span class="w"> </span><span class="n">details</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Inventory</span><span class="w"> </span><span class="n">inv</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">inventories</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">StocktakingDetail</span><span class="w"> </span><span class="n">detail</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StocktakingDetail</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">stocktakingNumber</span><span class="p">(</span><span class="n">stocktakingNumber</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">productCode</span><span class="p">(</span><span class="n">inv</span><span class="p">.</span><span class="na">getProductCode</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">locationCode</span><span class="p">(</span><span class="n">inv</span><span class="p">.</span><span class="na">getLocationCode</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">lotNumber</span><span class="p">(</span><span class="n">inv</span><span class="p">.</span><span class="na">getLotNumber</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">bookQuantity</span><span class="p">(</span><span class="n">inv</span><span class="p">.</span><span class="na">getCurrentQuantity</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">adjustedFlag</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="w">            </span><span class="n">details</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">detail</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">Stocktaking</span><span class="w"> </span><span class="n">stocktaking</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Stocktaking</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">stocktakingNumber</span><span class="p">(</span><span class="n">stocktakingNumber</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">warehouseCode</span><span class="p">(</span><span class="n">warehouseCode</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">stocktakingDate</span><span class="p">(</span><span class="n">stocktakingDate</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">status</span><span class="p">(</span><span class="n">StocktakingStatus</span><span class="p">.</span><span class="na">DRAFT</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">details</span><span class="p">(</span><span class="n">details</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">        </span><span class="n">stocktakingRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">stocktaking</span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">stocktaking</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 棚卸を開始する</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">startStocktaking</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">stocktakingNumber</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Stocktaking</span><span class="w"> </span><span class="n">stocktaking</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">findByStocktakingNumber</span><span class="p">(</span><span class="n">stocktakingNumber</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">orElseThrow</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span>
<span class="w">                        </span><span class="s">&quot;棚卸が見つかりません: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">stocktakingNumber</span><span class="p">));</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">stocktaking</span><span class="p">.</span><span class="na">getStatus</span><span class="p">().</span><span class="na">canStart</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalStateException</span><span class="p">(</span>
<span class="w">                    </span><span class="s">&quot;この棚卸は開始できません。現在のステータス: &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">                    </span><span class="n">stocktaking</span><span class="p">.</span><span class="na">getStatus</span><span class="p">().</span><span class="na">getDisplayName</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">stocktakingRepository</span><span class="p">.</span><span class="na">updateStatus</span><span class="p">(</span>
<span class="w">                </span><span class="n">stocktakingNumber</span><span class="p">,</span><span class="w"> </span><span class="n">StocktakingStatus</span><span class="p">.</span><span class="na">IN_PROGRESS</span><span class="p">);</span>
<span class="w">        </span><span class="n">stocktakingRepository</span><span class="p">.</span><span class="na">updateStartDateTime</span><span class="p">(</span>
<span class="w">                </span><span class="n">stocktakingNumber</span><span class="p">,</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">now</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 実棚数を入力する</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">inputActualQuantity</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">stocktakingNumber</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">productCode</span><span class="p">,</span>
<span class="w">                                     </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">actualQuantity</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">differenceReason</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">stocktakingRepository</span><span class="p">.</span><span class="na">updateActualQuantity</span><span class="p">(</span>
<span class="w">                </span><span class="n">stocktakingNumber</span><span class="p">,</span><span class="w"> </span><span class="n">productCode</span><span class="p">,</span><span class="w"> </span><span class="n">actualQuantity</span><span class="p">,</span><span class="w"> </span><span class="n">differenceReason</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 棚卸を確定する（在庫調整を実行）</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">confirmStocktaking</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">stocktakingNumber</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Stocktaking</span><span class="w"> </span><span class="n">stocktaking</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">findByStocktakingNumber</span><span class="p">(</span><span class="n">stocktakingNumber</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">orElseThrow</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span>
<span class="w">                        </span><span class="s">&quot;棚卸が見つかりません: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">stocktakingNumber</span><span class="p">));</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">stocktaking</span><span class="p">.</span><span class="na">getStatus</span><span class="p">().</span><span class="na">canConfirm</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalStateException</span><span class="p">(</span>
<span class="w">                    </span><span class="s">&quot;この棚卸は確定できません。現在のステータス: &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">                    </span><span class="n">stocktaking</span><span class="p">.</span><span class="na">getStatus</span><span class="p">().</span><span class="na">getDisplayName</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// 差異がある明細の在庫を調整</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">StocktakingDetail</span><span class="w"> </span><span class="n">detail</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">stocktaking</span><span class="p">.</span><span class="na">getDetails</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">detail</span><span class="p">.</span><span class="na">hasDifference</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">adjustInventory</span><span class="p">(</span><span class="n">stocktaking</span><span class="p">.</span><span class="na">getWarehouseCode</span><span class="p">(),</span><span class="w"> </span><span class="n">detail</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">stocktakingRepository</span><span class="p">.</span><span class="na">updateStatus</span><span class="p">(</span>
<span class="w">                </span><span class="n">stocktakingNumber</span><span class="p">,</span><span class="w"> </span><span class="n">StocktakingStatus</span><span class="p">.</span><span class="na">CONFIRMED</span><span class="p">);</span>
<span class="w">        </span><span class="n">stocktakingRepository</span><span class="p">.</span><span class="na">updateEndDateTime</span><span class="p">(</span>
<span class="w">                </span><span class="n">stocktakingNumber</span><span class="p">,</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">now</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 在庫を調整する</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">adjustInventory</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">warehouseCode</span><span class="p">,</span><span class="w"> </span><span class="n">StocktakingDetail</span><span class="w"> </span><span class="n">detail</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Inventory</span><span class="o">&gt;</span><span class="w"> </span><span class="n">inventoryOpt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventoryRepository</span>
<span class="w">                </span><span class="p">.</span><span class="na">findByWarehouseAndProduct</span><span class="p">(</span><span class="n">warehouseCode</span><span class="p">,</span><span class="w"> </span><span class="n">detail</span><span class="p">.</span><span class="na">getProductCode</span><span class="p">());</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">inventoryOpt</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">Inventory</span><span class="w"> </span><span class="n">inventory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventoryOpt</span><span class="p">.</span><span class="na">get</span><span class="p">();</span>
<span class="w">        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">detail</span><span class="p">.</span><span class="na">getDifferenceQuantity</span><span class="p">();</span>
<span class="w">        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">beforeQuantity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventory</span><span class="p">.</span><span class="na">getCurrentQuantity</span><span class="p">();</span>
<span class="w">        </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">afterQuantity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">beforeQuantity</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">difference</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// 在庫を更新</span>
<span class="w">        </span><span class="n">inventoryRepository</span><span class="p">.</span><span class="na">updateCurrentQuantity</span><span class="p">(</span>
<span class="w">                </span><span class="n">inventory</span><span class="p">.</span><span class="na">getId</span><span class="p">(),</span><span class="w"> </span><span class="n">afterQuantity</span><span class="p">,</span><span class="w"> </span><span class="n">detail</span><span class="p">.</span><span class="na">getDifferenceReason</span><span class="p">());</span>

<span class="w">        </span><span class="c1">// 入出庫履歴を記録</span>
<span class="w">        </span><span class="n">MovementType</span><span class="w"> </span><span class="n">movementType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">difference</span><span class="p">.</span><span class="na">signum</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                </span><span class="o">?</span><span class="w"> </span><span class="n">MovementType</span><span class="p">.</span><span class="na">ADJUSTMENT_PLUS</span>
<span class="w">                </span><span class="p">:</span><span class="w"> </span><span class="n">MovementType</span><span class="p">.</span><span class="na">ADJUSTMENT_MINUS</span><span class="p">;</span>

<span class="w">        </span><span class="n">StockMovement</span><span class="w"> </span><span class="n">movement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StockMovement</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">warehouseCode</span><span class="p">(</span><span class="n">warehouseCode</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">productCode</span><span class="p">(</span><span class="n">detail</span><span class="p">.</span><span class="na">getProductCode</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">movementDateTime</span><span class="p">(</span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">now</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">movementType</span><span class="p">(</span><span class="n">movementType</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">movementQuantity</span><span class="p">(</span><span class="n">difference</span><span class="p">.</span><span class="na">abs</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">beforeQuantity</span><span class="p">(</span><span class="n">beforeQuantity</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">afterQuantity</span><span class="p">(</span><span class="n">afterQuantity</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">movementReason</span><span class="p">(</span><span class="n">detail</span><span class="p">.</span><span class="na">getDifferenceReason</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">locationCode</span><span class="p">(</span><span class="n">detail</span><span class="p">.</span><span class="na">getLocationCode</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">lotNumber</span><span class="p">(</span><span class="n">detail</span><span class="p">.</span><span class="na">getLotNumber</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="w">        </span><span class="n">stockMovementRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">movement</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// 調整済みフラグを更新</span>
<span class="w">        </span><span class="n">stocktakingRepository</span><span class="p">.</span><span class="na">markAsAdjusted</span><span class="p">(</span>
<span class="w">                </span><span class="n">detail</span><span class="p">.</span><span class="na">getStocktakingNumber</span><span class="p">(),</span><span class="w"> </span><span class="n">detail</span><span class="p">.</span><span class="na">getProductCode</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Stocktaking</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByStocktakingNumber</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">stocktakingNumber</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">stocktakingRepository</span><span class="p">.</span><span class="na">findByStocktakingNumber</span><span class="p">(</span><span class="n">stocktakingNumber</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">generateStocktakingNumber</span><span class="p">(</span><span class="n">LocalDate</span><span class="w"> </span><span class="n">stocktakingDate</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ST-&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">stocktakingDate</span><span class="p">.</span><span class="na">format</span><span class="p">(</span>
<span class="w">                </span><span class="n">DateTimeFormatter</span><span class="p">.</span><span class="na">ofPattern</span><span class="p">(</span><span class="s">&quot;yyyyMM&quot;</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;-&quot;</span><span class="p">;</span>
<span class="w">        </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">latestNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stocktakingRepository</span>
<span class="w">                </span><span class="p">.</span><span class="na">findLatestStocktakingNumber</span><span class="p">(</span><span class="n">prefix</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;%&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">sequence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">latestNumber</span><span class="p">.</span><span class="na">isPresent</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">latest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">latestNumber</span><span class="p">.</span><span class="na">get</span><span class="p">();</span>
<span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">currentSequence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Integer</span><span class="p">.</span><span class="na">parseInt</span><span class="p">(</span>
<span class="w">                    </span><span class="n">latest</span><span class="p">.</span><span class="na">substring</span><span class="p">(</span><span class="n">latest</span><span class="p">.</span><span class="na">length</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">4</span><span class="p">));</span>
<span class="w">            </span><span class="n">sequence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">currentSequence</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">prefix</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;%04d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">sequence</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h2 id="93">9.3 リレーションと楽観ロックの設計<a class="headerlink" href="#93" title="Permanent link">&para;</a></h2>
<h3 id="mybatis-resultmap">MyBatis ネストした ResultMap による関連付け<a class="headerlink" href="#mybatis-resultmap" title="Permanent link">&para;</a></h3>
<p>棚卸データは、棚卸（ヘッダ）→ 棚卸明細の2層構造を持ちます。N+1 問題を回避するため、JOIN クエリで一括取得します。</p>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjMzOHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NjA5cHg7aGVpZ2h0OjMzOHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDYwOSAzMzgiIHdpZHRoPSI2MDlweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPk4rMSAmIzIxODM5OyYjMzg5ODg7JiMxMjM5ODsmIzIyMjM4OyYjMzY5OTE7PC90aXRsZT48ZGVmcy8+PGc+PGcgY2xhc3M9InRpdGxlIiBkYXRhLXNvdXJjZS1saW5lPSIxIj48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA4LjA2MjIiIHg9IjI0My40Njg5IiB5PSIyMi45OTUxIj5OKzEgJiMyMTgzOTsmIzM4OTg4OyYjMTIzOTg7JiMyMjIzODsmIzM2OTkxOzwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgTisxID8/Pz8/Pz8tLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iTi4xIC4uLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjMiIGlkPSJlbnQwMDAyIj48cmVjdCBmaWxsPSIjRkZDQ0NDIiBoZWlnaHQ9IjI3Mi4zNyIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjI3MiIgeD0iNyIgeT0iNjAuNTk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzYuMDYyMSIgeD0iNzQuOTY5IiB5PSI3NS41OTIiPk4rMSAmIzIxODM5OyYjMzg5ODg7JiM2NTI4ODsmIzM4NzUwOyYjMjExNzc7JiMyOTU3NTsmIzY1Mjg5OzwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgPz8/P0pPSU4/Pz8/Pz8/LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Ii4uLi5KT0lOLi4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iOCIgaWQ9ImVudDAwMDUiPjxyZWN0IGZpbGw9IiNDQ0ZGQ0MiIGhlaWdodD0iMTM4LjQ4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMzAwIiB4PSIzMDMiIHk9IjQ0LjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTg4LjAzNTUiIHg9IjM1OC45ODIzIiB5PSI1OS4yOTIiPiYjMzUyOTk7JiMyNzc3MDsmIzMxNTc0OyYjNjUzMDY7Sk9JTiYjMTIzOTU7JiMxMjQyNDsmIzEyNDI3OyYjMTk5Njg7JiMyNTMyNDsmIzIxNDYyOyYjMjQ0NzE7PC90ZXh0PjwvZz48IS0tZW50aXR5IHExLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iTi4xIC4uLi4uLi4ucTEiIGRhdGEtc291cmNlLWxpbmU9IjQiIGlkPSJlbnQwMDAzIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjU0Ljg5MDYiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjIxMi44MzQ3IiB4PSIzNi41OCIgeT0iOTUuNTk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNS44MDcyIiB4PSI0Ni41OCIgeT0iMTExLjU5MiI+MS4gJiMyNjg0MjsmIzIxMzY4OyYjMTI1MDQ7JiMxMjQ4MzsmIzEyNDgwOyYjMjE0NjI7JiMyNDQ3MTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTgzLjkzNDMiIHg9IjU1LjQ4MDQiIHk9IjEyNy44ODg5Ij5TRUxFQ1QgKiBGUk9NICYjMjY4NDI7JiMyMTM2ODsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzMuODMxIiB4PSI1NS40ODA0IiB5PSIxNDQuMTg1NyI+KDEmIzIyMjM4Oyk8L3RleHQ+PC9nPjwhLS1lbnRpdHkgcTItLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJOLjEgLi4uLi4uLi5xMiIgZGF0YS1zb3VyY2UtbGluZT0iNSIgaWQ9ImVudDAwMDQiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNzEuMTg3NSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMjQwLjgzNDUiIHg9IjIyLjU4IiB5PSIyNDUuNzc2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyOS44MDcxIiB4PSIzMi41OCIgeT0iMjYxLjc3MiI+Mi4gJiMyMTUwODsmIzI2ODQyOyYjMjEzNjg7JiMxMjM5ODsmIzI2MTI2OyYjMzIwNDg7JiMyMTQ2MjsmIzI0NDcxOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMTEuOTM0MSIgeD0iNDEuNDgwNCIgeT0iMjc4LjA2ODkiPlNFTEVDVCAqIEZST00gJiMyNjg0MjsmIzIxMzY4OyYjMjYxMjY7JiMzMjA0ODsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQwLjMwMDUiIHg9IjQxLjQ4MDQiIHk9IjI5NC4zNjU3Ij5XSEVSRSAmIzI2ODQyOyYjMjEzNjg7JiMzMDA1ODsmIzIxNDk1OyA9ID88L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzUuMzk2NCIgeD0iNDEuNDgwNCIgeT0iMzEwLjY2MjYiPihOJiMyMjIzODspPC90ZXh0PjwvZz48IS0tZW50aXR5IHNvbC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Ii4uLi5KT0lOLi4uLi4uLi5zb2wiIGRhdGEtc291cmNlLWxpbmU9IjkiIGlkPSJlbnQwMDA2Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9Ijg3LjQ4NDQiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjI2OC42NjM2IiB4PSIzMTguNjciIHk9Ijc5LjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjIuNjU2OSIgeD0iMzI4LjY3IiB5PSI5NS4yOTIiPjEmIzIyMjM4OyYjMTIzOTg7Sk9JTiYjMTI0NjM7JiMxMjQ1NjsmIzEyNTIyOyYjMTIzOTE7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk3Ljk5OTYiIHg9IjMyOC42NyIgeT0iMTExLjU4ODkiPiYjMjA4NDA7JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7JiMxMjQzNDsmIzIxNDYyOyYjMjQ0NzE7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyMy40MDkyIiB4PSIzMzcuNTcwNCIgeT0iMTI3Ljg4NTciPlNFTEVDVCBzdC4qLCBzdGQuKjwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzIuNTYyMiIgeD0iMzM3LjU3MDQiIHk9IjE0NC4xODI2Ij5GUk9NICYjMjY4NDI7JiMyMTM2ODsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsgc3Q8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjM5Ljc2MzIiIHg9IjMzNy41NzA0IiB5PSIxNjAuNDc5NSI+TEVGVCBKT0lOICYjMjY4NDI7JiMyMTM2ODsmIzI2MTI2OyYjMzIwNDg7JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7IHN0ZCBPTiAuLi48L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IkdNTjgiIGRhdGEtc291cmNlLWxpbmU9IjE0IiBpZD0iZW50MDAwOSI+PHBhdGggZD0iTTI5OC43MywyNjEuMjM2OSBMMjk4LjczLDI3Ny4zNzY5IEwyNjMuNiwyODEuMzc2OSBMMjk4LjczLDI4NS4zNzY5IEwyOTguNzMsMzAxLjUwMjUgQTAsMCAwIDAgMCAyOTguNzMsMzAxLjUwMjUgTDQ1My4yNzIxLDMwMS41MDI1IEEwLDAgMCAwIDAgNDUzLjI3MjEsMzAxLjUwMjUgTDQ1My4yNzIxLDI3MS4yMzY5IEw0NDMuMjcyMSwyNjEuMjM2OSBMMjk4LjczLDI2MS4yMzY5IEEwLDAgMCAwIDAgMjk4LjczLDI2MS4yMzY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNNDQzLjI3MjEsMjYxLjIzNjkgTDQ0My4yNzIxLDI3MS4yMzY5IEw0NTMuMjcyMSwyNzEuMjM2OSBMNDQzLjI3MjEsMjYxLjIzNjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyMC41NDIxIiB4PSIzMDQuNzMiIHk9IjI3OC4zMDM4Ij4xMCYjMjAyMTQ7JiMxMjM5ODsmIzI2ODQyOyYjMjEzNjg7JiMxMjM2NDsmIzEyMzU0OyYjMTI0Mjg7JiMxMjQwMDs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMzLjU0MjEiIHg9IjMwNC43MyIgeT0iMjkzLjQzNjYiPiYjMjE1MTI7JiMzNTMzNjsxMSYjMjIyMzg7JiMxMjM5ODsmIzEyNDYzOyYjMTI0NTY7JiMxMjUyMjsmIzMwMzMwOyYjMzQ4OTI7PC90ZXh0PjwvZz48IS0tbGluayBxMSB0byBxMi0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDAzIiBkYXRhLWVudGl0eS0yPSJlbnQwMDA0IiBkYXRhLWxpbmstdHlwZT0iZGVwZW5kZW5jeSIgZGF0YS1zb3VyY2UtbGluZT0iMTIiIGlkPSJsbms3Ij48cGF0aCBkPSJNMTQzLDE1MC45MTY5IEMxNDMsMTc3LjAxNjkgMTQzLDIxMC43ODY5IDE0MywyMzkuMzQ2OSIgZmlsbD0ibm9uZSIgaWQ9InExLXRvLXEyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxNDMsMjQ1LjM0NjksMTQ3LDIzNi4zNDY5LDE0MywyNDAuMzQ2OSwxMzksMjM2LjM0NjksMTQzLDI0NS4zNDY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjIuNzI0NiIgeD0iMTQ0IiB5PSIyMTEuODQzOCI+TiYjMjAyMTQ7PC90ZXh0PjwvZz48P3BsYW50dW1sLXNyYyBWUDkxSW05MTVDVmwtb2FVVFlkQmZWS09MMFRQZ1IwTEpFWllITkdwR0xSS2xLTld4WFBRY2FnV2NQNFc3WEdoQ3VXb2FfbW11eFh3eVlpcWV1aVlJTkR1WF9jXy1SX3QtcERvSzB3OThBbnBXRkZQS0lNRGIyUC1BOC1LN2lENEhQX2liRzk0RGl0clNKU3ZVWXBad295emFuWHRocW9tT2hWUm84NHBua1VELWk3NGlKMmVibDFENnNiNWY2YjhZLURpMFZfU1VJSTA4engxc3puVzFobEJVSlhoSW8yall6R1VSTFpib0YwcjR0WFo0RTRDR29pQkU3VFhEMmxER0o2Wmx4Vi16dnBzQjNXVnhfNGt0ZjNyVjBEZEZzNFJUWVNwWFZiQ0F0RS1tM3NpTEdUbDdWc2JDRXdNM2ZweDBiQVVhOWY0UWdoVlpXeklwekNqSTBPczZxclhkVzVuOUFqRU5nWWxJQXFaaE82S2NhVjJiX05QTGFZel9LQ0hhcmRwMWdiLXJhbmxieUw0TDJldlVCaVJ3ODNib0RHM2QwQW1CM2lYWXVMMzUydDJXU01vR3BYWDJ1Si16bVNaWE1LSGVpNzBnR3BYNHloRlJQOWg2aEVIRF9hR0FiOTlSSjR1Ym5wTWF2bTFEbUZKeHBsM0lmZUg5SnpHanJ5MD8+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<details>
<summary>棚卸データのリレーション設定（StocktakingMapper.xml）</summary>

<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="cp">&lt;!DOCTYPE mapper</span>
<span class="cp">        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
<span class="cp">        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span>
<span class="nt">&lt;mapper</span><span class="w"> </span><span class="na">namespace=</span><span class="s">&quot;com.example.sms.infrastructure.persistence.mapper.StocktakingMapper&quot;</span><span class="nt">&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- 棚卸（ヘッダ）の ResultMap --&gt;</span>
<span class="w">    </span><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;StocktakingWithDetailsResultMap&quot;</span>
<span class="w">               </span><span class="na">type=</span><span class="s">&quot;com.example.sms.domain.model.inventory.Stocktaking&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;st_id&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;stocktakingNumber&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;st_棚卸番号&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;warehouseCode&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;st_倉庫コード&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;stocktakingDate&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;st_棚卸日&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;startDateTime&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;st_棚卸開始日時&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;endDateTime&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;st_棚卸終了日時&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;status&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;st_ステータス&quot;</span>
<span class="w">                </span><span class="na">typeHandler=</span><span class="s">&quot;com.example.sms.infrastructure.persistence.typehandler.StocktakingStatusTypeHandler&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;remarks&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;st_備考&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;version&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;st_バージョン&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;createdAt&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;st_作成日時&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;updatedAt&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;st_更新日時&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="cm">&lt;!-- 棚卸明細との1:N関連 --&gt;</span>
<span class="w">        </span><span class="nt">&lt;collection</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;details&quot;</span>
<span class="w">                    </span><span class="na">ofType=</span><span class="s">&quot;com.example.sms.domain.model.inventory.StocktakingDetail&quot;</span>
<span class="w">                    </span><span class="na">resultMap=</span><span class="s">&quot;StocktakingDetailNestedResultMap&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/resultMap&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- 棚卸明細のネスト ResultMap --&gt;</span>
<span class="w">    </span><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;StocktakingDetailNestedResultMap&quot;</span>
<span class="w">               </span><span class="na">type=</span><span class="s">&quot;com.example.sms.domain.model.inventory.StocktakingDetail&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;std_id&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;stocktakingId&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;std_棚卸ID&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;lineNumber&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;std_棚卸行番号&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;productCode&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;std_商品コード&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;locationCode&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;std_ロケーションコード&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;lotNumber&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;std_ロット番号&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;bookQuantity&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;std_帳簿在庫数&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;actualQuantity&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;std_実棚数&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;differenceQuantity&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;std_差異数&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;differenceReason&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;std_差異理由&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;adjustedFlag&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;std_調整済フラグ&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/resultMap&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- JOIN による一括取得クエリ --&gt;</span>
<span class="w">    </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;findWithDetailsByStocktakingNumber&quot;</span>
<span class="w">            </span><span class="na">resultMap=</span><span class="s">&quot;StocktakingWithDetailsResultMap&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>SELECT
<span class="w">            </span>st.&quot;ID&quot;<span class="w"> </span>AS<span class="w"> </span>st_id,
<span class="w">            </span>st.&quot;棚卸番号&quot;<span class="w"> </span>AS<span class="w"> </span>st_棚卸番号,
<span class="w">            </span>st.&quot;倉庫コード&quot;<span class="w"> </span>AS<span class="w"> </span>st_倉庫コード,
<span class="w">            </span>st.&quot;棚卸日&quot;<span class="w"> </span>AS<span class="w"> </span>st_棚卸日,
<span class="w">            </span>st.&quot;棚卸開始日時&quot;<span class="w"> </span>AS<span class="w"> </span>st_棚卸開始日時,
<span class="w">            </span>st.&quot;棚卸終了日時&quot;<span class="w"> </span>AS<span class="w"> </span>st_棚卸終了日時,
<span class="w">            </span>st.&quot;ステータス&quot;<span class="w"> </span>AS<span class="w"> </span>st_ステータス,
<span class="w">            </span>st.&quot;備考&quot;<span class="w"> </span>AS<span class="w"> </span>st_備考,
<span class="w">            </span>st.&quot;バージョン&quot;<span class="w"> </span>AS<span class="w"> </span>st_バージョン,
<span class="w">            </span>st.&quot;作成日時&quot;<span class="w"> </span>AS<span class="w"> </span>st_作成日時,
<span class="w">            </span>st.&quot;更新日時&quot;<span class="w"> </span>AS<span class="w"> </span>st_更新日時,
<span class="w">            </span>std.&quot;ID&quot;<span class="w"> </span>AS<span class="w"> </span>std_id,
<span class="w">            </span>std.&quot;棚卸ID&quot;<span class="w"> </span>AS<span class="w"> </span>std_棚卸ID,
<span class="w">            </span>std.&quot;棚卸行番号&quot;<span class="w"> </span>AS<span class="w"> </span>std_棚卸行番号,
<span class="w">            </span>std.&quot;商品コード&quot;<span class="w"> </span>AS<span class="w"> </span>std_商品コード,
<span class="w">            </span>std.&quot;ロケーションコード&quot;<span class="w"> </span>AS<span class="w"> </span>std_ロケーションコード,
<span class="w">            </span>std.&quot;ロット番号&quot;<span class="w"> </span>AS<span class="w"> </span>std_ロット番号,
<span class="w">            </span>std.&quot;帳簿在庫数&quot;<span class="w"> </span>AS<span class="w"> </span>std_帳簿在庫数,
<span class="w">            </span>std.&quot;実棚数&quot;<span class="w"> </span>AS<span class="w"> </span>std_実棚数,
<span class="w">            </span>std.&quot;差異数&quot;<span class="w"> </span>AS<span class="w"> </span>std_差異数,
<span class="w">            </span>std.&quot;差異理由&quot;<span class="w"> </span>AS<span class="w"> </span>std_差異理由,
<span class="w">            </span>std.&quot;調整済フラグ&quot;<span class="w"> </span>AS<span class="w"> </span>std_調整済フラグ
<span class="w">        </span>FROM<span class="w"> </span>&quot;棚卸データ&quot;<span class="w"> </span>st
<span class="w">        </span>LEFT<span class="w"> </span>JOIN<span class="w"> </span>&quot;棚卸明細データ&quot;<span class="w"> </span>std
<span class="w">            </span>ON<span class="w"> </span>st.&quot;ID&quot;<span class="w"> </span>=<span class="w"> </span>std.&quot;棚卸ID&quot;
<span class="w">        </span>WHERE<span class="w"> </span>st.&quot;棚卸番号&quot;<span class="w"> </span>=<span class="w"> </span>#{stocktakingNumber}
<span class="w">        </span>ORDER<span class="w"> </span>BY<span class="w"> </span>std.&quot;棚卸行番号&quot;
<span class="w">    </span><span class="nt">&lt;/select&gt;</span>

<span class="nt">&lt;/mapper&gt;</span>
</code></pre></div>

</details>

<h3 id="_15">リレーション設定のポイント<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>設定項目</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;collection&gt;</code></td>
<td>1:N 関連のマッピング</td>
</tr>
<tr>
<td><code>&lt;id&gt;</code></td>
<td>主キーの識別（MyBatis が重複排除に使用）</td>
</tr>
<tr>
<td><code>resultMap</code></td>
<td>ネストした ResultMap の参照</td>
</tr>
<tr>
<td>エイリアス（AS）</td>
<td>カラム名の重複を避けるためのプレフィックス</td>
</tr>
<tr>
<td><code>ORDER BY</code></td>
<td>コレクションの順序を保証</td>
</tr>
</tbody>
</table>
<h3 id="optimistic-locking">楽観ロック（Optimistic Locking）の実装<a class="headerlink" href="#optimistic-locking" title="Permanent link">&para;</a></h3>
<p>複数ユーザーが同時に在庫データや棚卸データを編集する場合、データの整合性を保つために楽観ロックを実装します。</p>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IlNFUVVFTkNFIiBoZWlnaHQ9IjU1MHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MzcxcHg7aGVpZ2h0OjU1MHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDM3MSA1NTAiIHdpZHRoPSIzNzFweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjcwMDU7JiMzNTI1MTsmIzEyNTI1OyYjMTI0ODM7JiMxMjQ2MzsmIzEyMzk4OyYjMjEyMDU7JiMyMDMxNjsmIzEyNDcxOyYjMTI1NDA7JiMxMjQ2NTsmIzEyNTMxOyYjMTI0NzM7PC90aXRsZT48ZGVmcy8+PGc+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE4MS45OTkyIiB4PSI5Ni4xNjY4IiB5PSIyNy45OTUxIj4mIzI3MDA1OyYjMzUyNTE7JiMxMjUyNTsmIzEyNDgzOyYjMTI0NjM7JiMxMjM5ODsmIzIxMjA1OyYjMjAzMTY7JiMxMjQ3MTsmIzEyNTQwOyYjMTI0NjU7JiMxMjUzMTsmIzEyNDczOzwvdGV4dD48ZyBjbGFzcz0icGFydGljaXBhbnQtbGlmZWxpbmUiIGRhdGEtZW50aXR5LXVpZD0icGFydDEiIGRhdGEtcXVhbGlmaWVkLW5hbWU9InVzZXJBIiBpZD0icGFydDEtbGlmZWxpbmUiPjxnPjx0aXRsZT4uLi5BPC90aXRsZT48cmVjdCBmaWxsPSIjMDAwMDAwIiBmaWxsLW9wYWNpdHk9IjAuMDAwMDAiIGhlaWdodD0iMzUxLjQ2MDkiIHdpZHRoPSI4IiB4PSIyOS43ODg1IiB5PSIxMTguNTkzOCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41O3N0cm9rZS1kYXNoYXJyYXk6NSw1OyIgeDE9IjMzIiB4Mj0iMzMiIHkxPSIxMTguNTkzOCIgeTI9IjQ3MC4wNTQ3Ii8+PC9nPjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQtbGlmZWxpbmUiIGRhdGEtZW50aXR5LXVpZD0icGFydDIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9InVzZXJCIiBpZD0icGFydDItbGlmZWxpbmUiPjxnPjx0aXRsZT4uLi5CPC90aXRsZT48cmVjdCBmaWxsPSIjMDAwMDAwIiBmaWxsLW9wYWNpdHk9IjAuMDAwMDAiIGhlaWdodD0iMzUxLjQ2MDkiIHdpZHRoPSI4IiB4PSIxMjEuNzg4NiIgeT0iMTE4LjU5MzgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTtzdHJva2UtZGFzaGFycmF5OjUsNTsiIHgxPSIxMjQuOTg2NCIgeDI9IjEyNC45ODY0IiB5MT0iMTE4LjU5MzgiIHkyPSI0NzAuMDU0NyIvPjwvZz48L2c+PGcgY2xhc3M9InBhcnRpY2lwYW50LWxpZmVsaW5lIiBkYXRhLWVudGl0eS11aWQ9InBhcnQzIiBkYXRhLXF1YWxpZmllZC1uYW1lPSJkYiIgaWQ9InBhcnQzLWxpZmVsaW5lIj48Zz48dGl0bGU+Li4uLi4uPC90aXRsZT48cmVjdCBmaWxsPSIjMDAwMDAwIiBmaWxsLW9wYWNpdHk9IjAuMDAwMDAiIGhlaWdodD0iMzUxLjQ2MDkiIHdpZHRoPSI4IiB4PSIzMjEuMzMzIiB5PSIxMTguNTkzOCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41O3N0cm9rZS1kYXNoYXJyYXk6NSw1OyIgeDE9IjMyNC4zMzMyIiB4Mj0iMzI0LjMzMzIiIHkxPSIxMTguNTkzOCIgeTI9IjQ3MC4wNTQ3Ii8+PC9nPjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQgcGFydGljaXBhbnQtaGVhZCIgZGF0YS1lbnRpdHktdWlkPSJwYXJ0MSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0idXNlckEiIGlkPSJwYXJ0MS1oZWFkIj48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1MS41NzciIHg9IjUiIHk9IjExNS4yOTIiPiYjMjUyODU7JiMyNDQwMzsmIzMyNzczO0E8L3RleHQ+PGVsbGlwc2UgY3g9IjMzLjc4ODUiIGN5PSI1MC43OTY5IiBmaWxsPSIjRTJFMkYwIiByeD0iOCIgcnk9IjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0zMy43ODg1LDU4Ljc5NjkgTDMzLjc4ODUsODUuNzk2OSBNMjAuNzg4NSw2Ni43OTY5IEw0Ni43ODg1LDY2Ljc5NjkgTTMzLjc4ODUsODUuNzk2OSBMMjAuNzg4NSwxMDAuNzk2OSBNMzMuNzg4NSw4NS43OTY5IEw0Ni43ODg1LDEwMC43OTY5IiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48L2c+PGcgY2xhc3M9InBhcnRpY2lwYW50IHBhcnRpY2lwYW50LXRhaWwiIGRhdGEtZW50aXR5LXVpZD0icGFydDEiIGRhdGEtcXVhbGlmaWVkLW5hbWU9InVzZXJBIiBpZD0icGFydDEtdGFpbCI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTEuNTc3IiB4PSI1IiB5PSI0ODIuMDQ5OCI+JiMyNTI4NTsmIzI0NDAzOyYjMzI3NzM7QTwvdGV4dD48ZWxsaXBzZSBjeD0iMzMuNzg4NSIgY3k9IjQ5My44NTE2IiBmaWxsPSIjRTJFMkYwIiByeD0iOCIgcnk9IjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0zMy43ODg1LDUwMS44NTE2IEwzMy43ODg1LDUyOC44NTE2IE0yMC43ODg1LDUwOS44NTE2IEw0Ni43ODg1LDUwOS44NTE2IE0zMy43ODg1LDUyOC44NTE2IEwyMC43ODg1LDU0My44NTE2IE0zMy43ODg1LDUyOC44NTE2IEw0Ni43ODg1LDU0My44NTE2IiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48L2c+PGcgY2xhc3M9InBhcnRpY2lwYW50IHBhcnRpY2lwYW50LWhlYWQiIGRhdGEtZW50aXR5LXVpZD0icGFydDIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9InVzZXJCIiBpZD0icGFydDItaGVhZCI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTEuNjA0MyIgeD0iOTYuOTg2NCIgeT0iMTE1LjI5MiI+JiMyNTI4NTsmIzI0NDAzOyYjMzI3NzM7QjwvdGV4dD48ZWxsaXBzZSBjeD0iMTI1Ljc4ODYiIGN5PSI1MC43OTY5IiBmaWxsPSIjRTJFMkYwIiByeD0iOCIgcnk9IjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0xMjUuNzg4Niw1OC43OTY5IEwxMjUuNzg4Niw4NS43OTY5IE0xMTIuNzg4Niw2Ni43OTY5IEwxMzguNzg4Niw2Ni43OTY5IE0xMjUuNzg4Niw4NS43OTY5IEwxMTIuNzg4NiwxMDAuNzk2OSBNMTI1Ljc4ODYsODUuNzk2OSBMMTM4Ljc4ODYsMTAwLjc5NjkiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQgcGFydGljaXBhbnQtdGFpbCIgZGF0YS1lbnRpdHktdWlkPSJwYXJ0MiIgZGF0YS1xdWFsaWZpZWQtbmFtZT0idXNlckIiIGlkPSJwYXJ0Mi10YWlsIj48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1MS42MDQzIiB4PSI5Ni45ODY0IiB5PSI0ODIuMDQ5OCI+JiMyNTI4NTsmIzI0NDAzOyYjMzI3NzM7QjwvdGV4dD48ZWxsaXBzZSBjeD0iMTI1Ljc4ODYiIGN5PSI0OTMuODUxNiIgZmlsbD0iI0UyRTJGMCIgcng9IjgiIHJ5PSI4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNMTI1Ljc4ODYsNTAxLjg1MTYgTDEyNS43ODg2LDUyOC44NTE2IE0xMTIuNzg4Niw1MDkuODUxNiBMMTM4Ljc4ODYsNTA5Ljg1MTYgTTEyNS43ODg2LDUyOC44NTE2IEwxMTIuNzg4Niw1NDMuODUxNiBNMTI1Ljc4ODYsNTI4Ljg1MTYgTDEzOC43ODg2LDU0My44NTE2IiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48L2c+PGcgY2xhc3M9InBhcnRpY2lwYW50IHBhcnRpY2lwYW50LWhlYWQiIGRhdGEtZW50aXR5LXVpZD0icGFydDMiIGRhdGEtcXVhbGlmaWVkLW5hbWU9ImRiIiBpZD0icGFydDMtaGVhZCI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iMjgwLjMzMzIiIHk9IjExNS4yOTIiPiYjMjIzMTI7JiMyNDIzNTsmIzEyNDg2OyYjMTI1NDA7JiMxMjUwMjsmIzEyNTIzOzwvdGV4dD48cGF0aCBkPSJNMzA3LjMzMyw2Ni4yOTY5IEMzMDcuMzMzLDU2LjI5NjkgMzI1LjMzMyw1Ni4yOTY5IDMyNS4zMzMsNTYuMjk2OSBDMzI1LjMzMyw1Ni4yOTY5IDM0My4zMzMsNTYuMjk2OSAzNDMuMzMzLDY2LjI5NjkgTDM0My4zMzMsOTIuMjk2OSBDMzQzLjMzMywxMDIuMjk2OSAzMjUuMzMzLDEwMi4yOTY5IDMyNS4zMzMsMTAyLjI5NjkgQzMyNS4zMzMsMTAyLjI5NjkgMzA3LjMzMywxMDIuMjk2OSAzMDcuMzMzLDkyLjI5NjkgTDMwNy4zMzMsNjYuMjk2OSIgZmlsbD0iI0UyRTJGMCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTMwNy4zMzMsNjYuMjk2OSBDMzA3LjMzMyw3Ni4yOTY5IDMyNS4zMzMsNzYuMjk2OSAzMjUuMzMzLDc2LjI5NjkgQzMyNS4zMzMsNzYuMjk2OSAzNDMuMzMzLDc2LjI5NjkgMzQzLjMzMyw2Ni4yOTY5IiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48L2c+PGcgY2xhc3M9InBhcnRpY2lwYW50IHBhcnRpY2lwYW50LXRhaWwiIGRhdGEtZW50aXR5LXVpZD0icGFydDMiIGRhdGEtcXVhbGlmaWVkLW5hbWU9ImRiIiBpZD0icGFydDMtdGFpbCI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iMjgwLjMzMzIiIHk9IjQ4Mi4wNDk4Ij4mIzIyMzEyOyYjMjQyMzU7JiMxMjQ4NjsmIzEyNTQwOyYjMTI1MDI7JiMxMjUyMzs8L3RleHQ+PHBhdGggZD0iTTMwNy4zMzMsNDk1LjM1MTYgQzMwNy4zMzMsNDg1LjM1MTYgMzI1LjMzMyw0ODUuMzUxNiAzMjUuMzMzLDQ4NS4zNTE2IEMzMjUuMzMzLDQ4NS4zNTE2IDM0My4zMzMsNDg1LjM1MTYgMzQzLjMzMyw0OTUuMzUxNiBMMzQzLjMzMyw1MjEuMzUxNiBDMzQzLjMzMyw1MzEuMzUxNiAzMjUuMzMzLDUzMS4zNTE2IDMyNS4zMzMsNTMxLjM1MTYgQzMyNS4zMzMsNTMxLjM1MTYgMzA3LjMzMyw1MzEuMzUxNiAzMDcuMzMzLDUyMS4zNTE2IEwzMDcuMzMzLDQ5NS4zNTE2IiBmaWxsPSIjRTJFMkYwIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNMzA3LjMzMyw0OTUuMzUxNiBDMzA3LjMzMyw1MDUuMzUxNiAzMjUuMzMzLDUwNS4zNTE2IDMyNS4zMzMsNTA1LjM1MTYgQzMyNS4zMzMsNTA1LjM1MTYgMzQzLjMzMyw1MDUuMzUxNiAzNDMuMzMzLDQ5NS4zNTE2IiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtZW50aXR5LTE9InBhcnQxIiBkYXRhLWVudGl0eS0yPSJwYXJ0MyIgaWQ9Im1zZzEiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzEzLjMzMywxNDUuNzI2NiwzMjMuMzMzLDE0OS43MjY2LDMxMy4zMzMsMTUzLjcyNjYsMzE3LjMzMywxNDkuNzI2NiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMy43ODg1IiB4Mj0iMzE5LjMzMyIgeTE9IjE0OS43MjY2IiB5Mj0iMTQ5LjcyNjYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDEuNzE3OCIgeD0iNDAuNzg4NSIgeT0iMTQ0LjY2MDYiPlNFTEVDVCYjNjUyODg7dmVyc2lvbj0xJiM2NTI4OTs8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLWVudGl0eS0xPSJwYXJ0MiIgZGF0YS1lbnRpdHktMj0icGFydDMiIGlkPSJtc2cyIj48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjMxMy4zMzMsMTc0Ljg1OTQsMzIzLjMzMywxNzguODU5NCwzMTMuMzMzLDE4Mi44NTk0LDMxNy4zMzMsMTc4Ljg1OTQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTI1Ljc4ODYiIHgyPSIzMTkuMzMzIiB5MT0iMTc4Ljg1OTQiIHkyPSIxNzguODU5NCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0MS43MTc4IiB4PSIxMzIuNzg4NiIgeT0iMTczLjc5MzUiPlNFTEVDVCYjNjUyODg7dmVyc2lvbj0xJiM2NTI4OTs8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLWVudGl0eS0xPSJwYXJ0MSIgZGF0YS1lbnRpdHktMj0icGFydDEiIGlkPSJtc2czIj48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzMuNzg4NSIgeDI9Ijc1Ljc4ODUiIHkxPSIyMDcuOTkyMiIgeTI9IjIwNy45OTIyIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9Ijc1Ljc4ODUiIHgyPSI3NS43ODg1IiB5MT0iMjA3Ljk5MjIiIHkyPSIyMjAuOTkyMiIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzNC43ODg1IiB4Mj0iNzUuNzg4NSIgeTE9IjIyMC45OTIyIiB5Mj0iMjIwLjk5MjIiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjQ0Ljc4ODUsMjE2Ljk5MjIsMzQuNzg4NSwyMjAuOTkyMiw0NC43ODg1LDIyNC45OTIyLDQwLjc4ODUsMjIwLjk5MjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3OC4wMDAxIiB4PSI0MC43ODg1IiB5PSIyMDIuOTI2MyI+JiMyMjMxMjsmIzI0MjM1OyYjMjU5Njg7JiMxMjQzNDsmIzMyMjMyOyYjMzg1OTg7PC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1lbnRpdHktMT0icGFydDIiIGRhdGEtZW50aXR5LTI9InBhcnQyIiBpZD0ibXNnNCI+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEyNS43ODg2IiB4Mj0iMTY3Ljc4ODYiIHkxPSIyNTAuMTI1IiB5Mj0iMjUwLjEyNSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxNjcuNzg4NiIgeDI9IjE2Ny43ODg2IiB5MT0iMjUwLjEyNSIgeTI9IjI2My4xMjUiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTI2Ljc4ODYiIHgyPSIxNjcuNzg4NiIgeTE9IjI2My4xMjUiIHkyPSIyNjMuMTI1Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMzYuNzg4NiwyNTkuMTI1LDEyNi43ODg2LDI2My4xMjUsMTM2Ljc4ODYsMjY3LjEyNSwxMzIuNzg4NiwyNjMuMTI1IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzguMDAwMSIgeD0iMTMyLjc4ODYiIHk9IjI0NS4wNTkxIj4mIzIyMzEyOyYjMjQyMzU7JiMyNTk2ODsmIzEyNDM0OyYjMzIyMzI7JiMzODU5ODs8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLWVudGl0eS0xPSJwYXJ0MSIgZGF0YS1lbnRpdHktMj0icGFydDMiIGlkPSJtc2c1Ij48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjMxMy4zMzMsMzAzLjM5MDYsMzIzLjMzMywzMDcuMzkwNiwzMTMuMzMzLDMxMS4zOTA2LDMxNy4zMzMsMzA3LjM5MDYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzMuNzg4NSIgeDI9IjMxOS4zMzMiIHkxPSIzMDcuMzkwNiIgeTI9IjMwNy4zOTA2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTc1LjU0NDQiIHg9IjQwLjc4ODUiIHk9IjI4Ny4xOTE5Ij5VUERBVEUgV0hFUkUgdmVyc2lvbj0xPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyNC45MzQ2IiB4PSI0MC43ODg1IiB5PSIzMDIuMzI0NyI+JiM4NTk0OyB2ZXJzaW9uPTIgJiMxMjM5NTsmIzI2MzU2OyYjMjYwMzI7PC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1lbnRpdHktMT0icGFydDMiIGRhdGEtZW50aXR5LTI9InBhcnQxIiBpZD0ibXNnNiI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI0NC43ODg1LDMzMi41MjM0LDM0Ljc4ODUsMzM2LjUyMzQsNDQuNzg4NSwzNDAuNTIzNCw0MC43ODg1LDMzNi41MjM0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjM4Ljc4ODUiIHgyPSIzMjQuMzMzIiB5MT0iMzM2LjUyMzQiIHkyPSIzMzYuNTIzNCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk5LjI3MTEiIHg9IjUwLjc4ODUiIHk9IjMzMS40NTc1Ij4mIzI2MzU2OyYjMjYwMzI7JiMyNTEwNDsmIzIxMTUxOyYjNjUyODg7MSYjMzQ4OTI7JiM2NTI4OTs8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLWVudGl0eS0xPSJwYXJ0MiIgZGF0YS1lbnRpdHktMj0icGFydDMiIGlkPSJtc2c3Ij48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjMxMy4zMzMsMzYxLjY1NjMsMzIzLjMzMywzNjUuNjU2MywzMTMuMzMzLDM2OS42NTYzLDMxNy4zMzMsMzY1LjY1NjMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTI1Ljc4ODYiIHgyPSIzMTkuMzMzIiB5MT0iMzY1LjY1NjMiIHkyPSIzNjUuNjU2MyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE3NS41NDQ0IiB4PSIxMzIuNzg4NiIgeT0iMzYwLjU5MDMiPlVQREFURSBXSEVSRSB2ZXJzaW9uPTE8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLWVudGl0eS0xPSJwYXJ0MyIgZGF0YS1lbnRpdHktMj0icGFydDIiIGlkPSJtc2c4Ij48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjEzNi43ODg2LDQwNS45MjE5LDEyNi43ODg2LDQwOS45MjE5LDEzNi43ODg2LDQxMy45MjE5LDEzMi43ODg2LDQwOS45MjE5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEzMC43ODg2IiB4Mj0iMzI0LjMzMyIgeTE9IjQwOS45MjE5IiB5Mj0iNDA5LjkyMTkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5OS4yNzExIiB4PSIxNDIuNzg4NiIgeT0iMzg5LjcyMzEiPiYjMjYzNTY7JiMyNjAzMjsmIzIyODMzOyYjMjU5NDM7JiM2NTI4ODswJiMzNDg5MjsmIzY1Mjg5OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5MS4wMDAxIiB4PSIxNDIuNzg4NiIgeT0iNDA0Ljg1NiI+JiMyNzAwNTsmIzM1MjUxOyYjMTI1MjU7JiMxMjQ4MzsmIzEyNDYzOyYjMjAzNjM7JiMyMjgwNjs8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLWVudGl0eS0xPSJwYXJ0MiIgZGF0YS1lbnRpdHktMj0icGFydDIiIGlkPSJtc2c5Ij48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTI1Ljc4ODYiIHgyPSIxNjcuNzg4NiIgeTE9IjQzOS4wNTQ3IiB5Mj0iNDM5LjA1NDciLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTY3Ljc4ODYiIHgyPSIxNjcuNzg4NiIgeTE9IjQzOS4wNTQ3IiB5Mj0iNDUyLjA1NDciLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTI2Ljc4ODYiIHgyPSIxNjcuNzg4NiIgeTE9IjQ1Mi4wNTQ3IiB5Mj0iNDUyLjA1NDciLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjEzNi43ODg2LDQ0OC4wNTQ3LDEyNi43ODg2LDQ1Mi4wNTQ3LDEzNi43ODg2LDQ1Ni4wNTQ3LDEzMi43ODg2LDQ1Mi4wNTQ3IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA0LjAwMDEiIHg9IjEzMi43ODg2IiB5PSI0MzMuOTg4OCI+JiMyMDg3NzsmIzM1NTAxOyYjMTI0MTU7JiMzNjc5NjsmIzEyNDE1OyYjMTI0MzQ7JiMyMDQxOTsmIzEyMzc3OzwvdGV4dD48L2c+PD9wbGFudHVtbC1zcmMgQXlhaW9LYkxVQlBxeHVqYmNueXRodHRTdEZvdVFWdFpuZExGa3dTLXNKbGRTVEZzbnlyeDdaVGpWRG95LU43SkpZd2tuRUlJXzI4NWZNVlRoS190SmR4SHFFZ2VmOTFPaDUxUWQ1aGFZMjdkMTlUcHVhZjlCNGJDSVluRUxMMXdFY1Y1cXJzaDdwVXRXR25rZGxRdVVKTE9NS2VJNW5WTzYwTFRFbzE3bUtlWHNETjdySmRhX1B3RWlqSVl1aXB5RjVsM3p0aXdtTWdTWTUwM0RXVjJpNUEwc0ZiaXdlUjdKUEVVUnJfblNkT1JtWG04MHdTUVg3ajIwcm1TR3JtTG1aclNXcm1MdUZSNXYzcmdjbUpkNllheVJicHpSRlFNUHpDc1MwNHI4SmExOGxZaU95QkpobGIwem5nLU1EWTN3SHRpTFkyUHYwR3R3VWNJWlMtY0pXVVFQMDBuQUlPRkJHd1Z4RWota2NHUTVkLXN6UnZPalZQbnVfdU4tX08wSVExbGQtbmxWam11NG0wMD8+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_16">バージョンカラムによる同時更新制御<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h3>
<details>
<summary>楽観ロック対応の MyBatis Mapper</summary>

<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- 楽観ロック対応の在庫更新 --&gt;</span>
<span class="nt">&lt;update</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;updateWithOptimisticLock&quot;</span>
<span class="w">        </span><span class="na">parameterType=</span><span class="s">&quot;com.example.sms.domain.model.inventory.Inventory&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span>UPDATE<span class="w"> </span>&quot;在庫データ&quot;
<span class="w">    </span>SET
<span class="w">        </span>&quot;現在庫数&quot;<span class="w"> </span>=<span class="w"> </span>#{currentQuantity},
<span class="w">        </span>&quot;引当数&quot;<span class="w"> </span>=<span class="w"> </span>#{allocatedQuantity},
<span class="w">        </span>&quot;発注残数&quot;<span class="w"> </span>=<span class="w"> </span>#{orderedQuantity},
<span class="w">        </span>&quot;最終入庫日&quot;<span class="w"> </span>=<span class="w"> </span>#{lastReceiptDate},
<span class="w">        </span>&quot;最終出庫日&quot;<span class="w"> </span>=<span class="w"> </span>#{lastShipmentDate},
<span class="w">        </span>&quot;更新日時&quot;<span class="w"> </span>=<span class="w"> </span>CURRENT_TIMESTAMP,
<span class="w">        </span>&quot;バージョン&quot;<span class="w"> </span>=<span class="w"> </span>&quot;バージョン&quot;<span class="w"> </span>+<span class="w"> </span>1
<span class="w">    </span>WHERE<span class="w"> </span>&quot;ID&quot;<span class="w"> </span>=<span class="w"> </span>#{id}
<span class="w">    </span>AND<span class="w"> </span>&quot;バージョン&quot;<span class="w"> </span>=<span class="w"> </span>#{version}
<span class="nt">&lt;/update&gt;</span>

<span class="cm">&lt;!-- 楽観ロック対応の棚卸更新 --&gt;</span>
<span class="nt">&lt;update</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;updateStocktakingWithOptimisticLock&quot;</span>
<span class="w">        </span><span class="na">parameterType=</span><span class="s">&quot;com.example.sms.domain.model.inventory.Stocktaking&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span>UPDATE<span class="w"> </span>&quot;棚卸データ&quot;
<span class="w">    </span>SET
<span class="w">        </span>&quot;ステータス&quot;<span class="w"> </span>=<span class="w"> </span>#{status,
<span class="w">            </span>typeHandler=com.example.sms.infrastructure.persistence.typehandler.StocktakingStatusTypeHandler}::棚卸ステータス,
<span class="w">        </span>&quot;棚卸終了日時&quot;<span class="w"> </span>=<span class="w"> </span>#{endDateTime},
<span class="w">        </span>&quot;備考&quot;<span class="w"> </span>=<span class="w"> </span>#{remarks},
<span class="w">        </span>&quot;更新日時&quot;<span class="w"> </span>=<span class="w"> </span>CURRENT_TIMESTAMP,
<span class="w">        </span>&quot;バージョン&quot;<span class="w"> </span>=<span class="w"> </span>&quot;バージョン&quot;<span class="w"> </span>+<span class="w"> </span>1
<span class="w">    </span>WHERE<span class="w"> </span>&quot;棚卸番号&quot;<span class="w"> </span>=<span class="w"> </span>#{stocktakingNumber}
<span class="w">    </span>AND<span class="w"> </span>&quot;バージョン&quot;<span class="w"> </span>=<span class="w"> </span>#{version}
<span class="nt">&lt;/update&gt;</span>
</code></pre></div>

</details>

<details>
<summary>Repository 実装：楽観ロック対応</summary>

<div class="highlight"><pre><span></span><code><span class="c1">// src/main/java/com/example/sales/infrastructure/persistence/repository/InventoryRepositoryImpl.java</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">com.example.sms.infrastructure.persistence.repository</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sms.application.port.out.InventoryRepository</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sms.domain.exception.OptimisticLockException</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sms.domain.model.inventory.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.example.sms.infrastructure.persistence.mapper.InventoryMapper</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lombok.RequiredArgsConstructor</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Repository</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.transaction.annotation.Transactional</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Optional</span><span class="p">;</span>

<span class="nd">@Repository</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">InventoryRepositoryImpl</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">InventoryRepository</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">InventoryMapper</span><span class="w"> </span><span class="n">inventoryMapper</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">save</span><span class="p">(</span><span class="n">Inventory</span><span class="w"> </span><span class="n">inventory</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">inventoryMapper</span><span class="p">.</span><span class="na">insert</span><span class="p">(</span><span class="n">inventory</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Inventory</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByWarehouseAndProduct</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">warehouseCode</span><span class="p">,</span>
<span class="w">                                                          </span><span class="n">String</span><span class="w"> </span><span class="n">productCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Inventory</span><span class="o">&gt;</span><span class="w"> </span><span class="n">inventories</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventoryMapper</span>
<span class="w">                </span><span class="p">.</span><span class="na">findByWarehouseAndProduct</span><span class="p">(</span><span class="n">warehouseCode</span><span class="p">,</span><span class="w"> </span><span class="n">productCode</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">inventories</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">()</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">Optional</span><span class="p">.</span><span class="na">empty</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">inventories</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Inventory</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByWarehouseCode</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">warehouseCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">inventoryMapper</span><span class="p">.</span><span class="na">findByWarehouseCode</span><span class="p">(</span><span class="n">warehouseCode</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Inventory</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByProductCode</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">productCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">inventoryMapper</span><span class="p">.</span><span class="na">findByProductCode</span><span class="p">(</span><span class="n">productCode</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 楽観ロック対応の更新</span>
<span class="cm">     * @throws OptimisticLockException 他のユーザーによって更新された場合</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="n">Inventory</span><span class="w"> </span><span class="n">inventory</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">updatedCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventoryMapper</span><span class="p">.</span><span class="na">updateWithOptimisticLock</span><span class="p">(</span><span class="n">inventory</span><span class="p">);</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">updatedCount</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Integer</span><span class="w"> </span><span class="n">currentVersion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventoryMapper</span><span class="p">.</span><span class="na">findVersionById</span><span class="p">(</span><span class="n">inventory</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>

<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">currentVersion</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">OptimisticLockException</span><span class="p">(</span><span class="s">&quot;在庫&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">inventory</span><span class="p">.</span><span class="na">getId</span><span class="p">().</span><span class="na">toString</span><span class="p">());</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">OptimisticLockException</span><span class="p">(</span>
<span class="w">                        </span><span class="s">&quot;在庫&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="n">inventory</span><span class="p">.</span><span class="na">getId</span><span class="p">().</span><span class="na">toString</span><span class="p">(),</span>
<span class="w">                        </span><span class="n">inventory</span><span class="p">.</span><span class="na">getVersion</span><span class="p">(),</span>
<span class="w">                        </span><span class="n">currentVersion</span>
<span class="w">                </span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">allocate</span><span class="p">(</span><span class="n">Integer</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">quantity</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">updated</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventoryMapper</span><span class="p">.</span><span class="na">allocate</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">quantity</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">updated</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalStateException</span><span class="p">(</span><span class="s">&quot;引当に失敗しました。有効在庫不足の可能性があります。&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">deallocate</span><span class="p">(</span><span class="n">Integer</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">quantity</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">updated</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventoryMapper</span><span class="p">.</span><span class="na">deallocate</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">quantity</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">updated</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalStateException</span><span class="p">(</span><span class="s">&quot;引当解除に失敗しました。&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">receive</span><span class="p">(</span><span class="n">Integer</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">quantity</span><span class="p">,</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">receiptDate</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">inventoryMapper</span><span class="p">.</span><span class="na">receive</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">quantity</span><span class="p">,</span><span class="w"> </span><span class="n">receiptDate</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">ship</span><span class="p">(</span><span class="n">Integer</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">quantity</span><span class="p">,</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">shipmentDate</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">updated</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventoryMapper</span><span class="p">.</span><span class="na">ship</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">quantity</span><span class="p">,</span><span class="w"> </span><span class="n">shipmentDate</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">updated</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalStateException</span><span class="p">(</span><span class="s">&quot;出庫に失敗しました。在庫不足の可能性があります。&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">updateCurrentQuantity</span><span class="p">(</span><span class="n">Integer</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">newQuantity</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">reason</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">inventoryMapper</span><span class="p">.</span><span class="na">updateCurrentQuantity</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">newQuantity</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="_17">楽観ロックのテスト<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h3>
<details>
<summary>楽観ロックのテストコード</summary>

<div class="highlight"><pre><span></span><code><span class="nd">@Nested</span>
<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;楽観ロックの在庫更新テスト&quot;</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">OptimisticLockInventoryTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;正しいバージョンで更新できる&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldUpdateWithCorrectVersion</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Given: 在庫を登録</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="n">inventory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createTestInventory</span><span class="p">(</span><span class="s">&quot;WH001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;PROD-001&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">inventoryRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">inventory</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// When: バージョン1で更新</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="n">saved</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventoryRepository</span>
<span class="w">                </span><span class="p">.</span><span class="na">findByWarehouseAndProduct</span><span class="p">(</span><span class="s">&quot;WH001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;PROD-001&quot;</span><span class="p">).</span><span class="na">orElseThrow</span><span class="p">();</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">saved</span><span class="p">.</span><span class="na">getVersion</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">        </span><span class="n">saved</span><span class="p">.</span><span class="na">setCurrentQuantity</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;150&quot;</span><span class="p">));</span>
<span class="w">        </span><span class="n">inventoryRepository</span><span class="p">.</span><span class="na">update</span><span class="p">(</span><span class="n">saved</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Then: バージョンが2に増加</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="n">updated</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventoryRepository</span>
<span class="w">                </span><span class="p">.</span><span class="na">findByWarehouseAndProduct</span><span class="p">(</span><span class="s">&quot;WH001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;PROD-001&quot;</span><span class="p">).</span><span class="na">orElseThrow</span><span class="p">();</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">updated</span><span class="p">.</span><span class="na">getVersion</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">updated</span><span class="p">.</span><span class="na">getCurrentQuantity</span><span class="p">()).</span><span class="na">isEqualByComparingTo</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;150&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;古いバージョンで更新すると楽観ロック例外がスローされる&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldThrowOptimisticLockExceptionWithOldVersion</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Given: 在庫を登録して、別のセッションで更新</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="n">inventory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createTestInventory</span><span class="p">(</span><span class="s">&quot;WH001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;PROD-002&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">inventoryRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">inventory</span><span class="p">);</span>

<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="n">sessionA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventoryRepository</span>
<span class="w">                </span><span class="p">.</span><span class="na">findByWarehouseAndProduct</span><span class="p">(</span><span class="s">&quot;WH001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;PROD-002&quot;</span><span class="p">).</span><span class="na">orElseThrow</span><span class="p">();</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="n">sessionB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inventoryRepository</span>
<span class="w">                </span><span class="p">.</span><span class="na">findByWarehouseAndProduct</span><span class="p">(</span><span class="s">&quot;WH001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;PROD-002&quot;</span><span class="p">).</span><span class="na">orElseThrow</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// セッションAで更新</span>
<span class="w">        </span><span class="n">sessionA</span><span class="p">.</span><span class="na">setCurrentQuantity</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;200&quot;</span><span class="p">));</span>
<span class="w">        </span><span class="n">inventoryRepository</span><span class="p">.</span><span class="na">update</span><span class="p">(</span><span class="n">sessionA</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// When/Then: セッションBで更新すると例外</span>
<span class="w">        </span><span class="n">sessionB</span><span class="p">.</span><span class="na">setCurrentQuantity</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;300&quot;</span><span class="p">));</span>
<span class="w">        </span><span class="n">assertThatThrownBy</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">inventoryRepository</span><span class="p">.</span><span class="na">update</span><span class="p">(</span><span class="n">sessionB</span><span class="p">))</span>
<span class="w">                </span><span class="p">.</span><span class="na">isInstanceOf</span><span class="p">(</span><span class="n">OptimisticLockException</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">hasMessageContaining</span><span class="p">(</span><span class="s">&quot;他のユーザーによって更新されました&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h3 id="_18">楽観ロックのベストプラクティス<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>ポイント</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>バージョンカラム</strong></td>
<td>INTEGER 型で十分（オーバーフローは現実的に発生しない）</td>
</tr>
<tr>
<td><strong>WHERE 条件</strong></td>
<td>必ず <code>AND "バージョン" = #{version}</code> を含める</td>
</tr>
<tr>
<td><strong>インクリメント</strong></td>
<td><code>"バージョン" = "バージョン" + 1</code> でアトミックに更新</td>
</tr>
<tr>
<td><strong>例外処理</strong></td>
<td>更新件数が0の場合は楽観ロック例外をスロー</td>
</tr>
<tr>
<td><strong>エラーメッセージ</strong></td>
<td>ユーザーにわかりやすいメッセージで再読み込みを促す</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="9_1">第9章のまとめ<a class="headerlink" href="#9_1" title="Permanent link">&para;</a></h2>
<p>本章では、在庫管理の核心部分である在庫情報管理、入出庫履歴、棚卸処理について学びました。</p>
<h3 id="_19">学んだこと<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>在庫数量の種類</strong></li>
<li>
<p>現在庫数、引当数、有効在庫数、発注残数の関係</p>
</li>
<li>
<p><strong>倉庫・ロケーション管理</strong></p>
</li>
<li>倉庫マスタの設計</li>
<li>
<p>ロケーションによる細かな在庫管理</p>
</li>
<li>
<p><strong>入出庫履歴の設計</strong></p>
</li>
<li>移動区分による分類</li>
<li>
<p>トレーサビリティの確保</p>
</li>
<li>
<p><strong>棚卸業務の設計</strong></p>
</li>
<li>帳簿在庫と実棚の差異管理</li>
<li>
<p>在庫調整処理</p>
</li>
<li>
<p><strong>リレーションと楽観ロック</strong></p>
</li>
<li>N+1 問題の回避</li>
<li>同時更新の競合制御</li>
</ol>
<h3 id="er_1">在庫管理の ER 図（全体像）<a class="headerlink" href="#er_1" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMD8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjYwOHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NjkzcHg7aGVpZ2h0OjYwOHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDY5MyA2MDgiIHdpZHRoPSI2OTNweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMjIzMTI7JiMyNDIzNTsmIzMxNjQ5OyYjMjk3MDI7JiMxMjM5ODtFUiYjMjIyNTk7PC90aXRsZT48ZGVmcy8+PGc+PGcgY2xhc3M9InRpdGxlIiBkYXRhLXNvdXJjZS1saW5lPSIxIj48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA0LjM0MzQiIHg9IjI4Ny42MjgxIiB5PSIyMi45OTUxIj4mIzIyMzEyOyYjMjQyMzU7JiMzMTY0OTsmIzI5NzAyOyYjMTIzOTg7RVImIzIyMjU5OzwvdGV4dD48L2c+PCEtLWNsYXNzID8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjMiIGlkPSJlbnQwMDAyIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9Ijk2Ljg5MDYiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEyMS4yMDM4IiB4PSIyMzMiIHk9IjQ0LjI5NjkiLz48ZWxsaXBzZSBjeD0iMjU2LjY0MTgiIGN5PSI2MC4yOTY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0yNjAuNzUxMiw2Ni4yOTY5IEwyNTMuMDMyNSw2Ni4yOTY5IEwyNTMuMDMyNSw1My45MDYzIEwyNjAuNzUxMiw1My45MDYzIEwyNjAuNzUxMiw1Ni4wNjI1IEwyNTUuNDg1Niw1Ni4wNjI1IEwyNTUuNDg1Niw1OC43MzQ0IEwyNjAuMjUxMiw1OC43MzQ0IEwyNjAuMjUxMiw2MC44OTA2IEwyNTUuNDg1Niw2MC44OTA2IEwyNTUuNDg1Niw2NC4xNDA2IEwyNjAuNzUxMiw2NC4xNDA2IEwyNjAuNzUxMiw2Ni4yOTY5IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iMjcyLjU2MjMiIHk9IjY1LjE0MzYiPiYjMjA0ODk7JiMyNDIzNTsmIzEyNTEwOyYjMTI0NzM7JiMxMjQ3OTs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMjM0IiB4Mj0iMzUzLjIwMzgiIHkxPSI3Ni4yOTY5IiB5Mj0iNzYuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwOS4yMDM4IiB4PSIyMzkiIHk9IjkzLjI5MiI+JiMyMDQ4OTsmIzI0MjM1OyYjMTI0Njc7JiMxMjU0MDsmIzEyNDg5OyAmIzE3MTtQSyYjMTg3OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjM0IiB4Mj0iMzUzLjIwMzgiIHkxPSIxMDAuNTkzOCIgeTI9IjEwMC41OTM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDEuOTk5OCIgeD0iMjM5IiB5PSIxMTcuNTg4OSI+JiMyMDQ4OTsmIzI0MjM1OyYjMjE1MTc7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjIzOSIgeT0iMTMzLjg4NTciPiYjMjA0ODk7JiMyNDIzNTsmIzIxMzA2OyYjMjA5OTg7PC90ZXh0PjwvZz48IS0tY2xhc3MgPz8/Pz8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uLi4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIxMCIgaWQ9ImVudDAwMDMiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTEzLjE4NzUiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE3Ny4yMDM2IiB4PSI3IiB5PSIyMTcuNDc2OSIvPjxlbGxpcHNlIGN4PSIzMC42NDE4IiBjeT0iMjMzLjQ3NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTM0Ljc1MTIsMjM5LjQ3NjkgTDI3LjAzMjUsMjM5LjQ3NjkgTDI3LjAzMjUsMjI3LjA4NjMgTDM0Ljc1MTIsMjI3LjA4NjMgTDM0Ljc1MTIsMjI5LjI0MjUgTDI5LjQ4NTYsMjI5LjI0MjUgTDI5LjQ4NTYsMjMxLjkxNDQgTDM0LjI1MTIsMjMxLjkxNDQgTDM0LjI1MTIsMjM0LjA3MDYgTDI5LjQ4NTYsMjM0LjA3MDYgTDI5LjQ4NTYsMjM3LjMyMDYgTDM0Ljc1MTIsMjM3LjMyMDYgTDM0Ljc1MTIsMjM5LjQ3NjkgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjUuOTk5NSIgeD0iNDYuNTYyMyIgeT0iMjM4LjMyMzYiPiYjMTI1MjU7JiMxMjQ2NTsmIzEyNTQwOyYjMTI0NzE7JiMxMjUxOTsmIzEyNTMxOyYjMTI1MTA7JiMxMjQ3MzsmIzEyNDc5OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI4IiB4Mj0iMTgzLjIwMzYiIHkxPSIyNDkuNDc2OSIgeTI9IjI0OS40NzY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTY1LjIwMzYiIHg9IjEzIiB5PSIyNjYuNDcyIj4mIzEyNTI1OyYjMTI0NjU7JiMxMjU0MDsmIzEyNDcxOyYjMTI1MTk7JiMxMjUzMTsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsgJiMxNzE7UEsmIzE4Nzs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjgiIHgyPSIxODMuMjAzNiIgeTE9IjI3My43NzM4IiB5Mj0iMjczLjc3MzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDguODE0MSIgeD0iMTMiIHk9IjI5MC43Njg5Ij4mIzIwNDg5OyYjMjQyMzU7JiMxMjQ2NzsmIzEyNTQwOyYjMTI0ODk7ICYjMTcxO0ZLJiMxODc7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI3Ljk5OTkiIHg9IjEzIiB5PSIzMDcuMDY1NyI+JiMyNjg0MjsmIzMwMDU4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MS45OTk4IiB4PSIxMyIgeT0iMzIzLjM2MjYiPiYjMTI0Nzg7JiMxMjU0MDsmIzEyNTMxOzwvdGV4dD48L2c+PCEtLWNsYXNzID8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjE4IiBpZD0iZW50MDAwNCI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI4MC41OTM4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMjEuMjAzOCIgeD0iNDQ2IiB5PSIyMzMuNzc2OSIvPjxlbGxpcHNlIGN4PSI0NjkuNjQxOCIgY3k9IjI0OS43NzY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik00NzMuNzUxMiwyNTUuNzc2OSBMNDY2LjAzMjUsMjU1Ljc3NjkgTDQ2Ni4wMzI1LDI0My4zODYzIEw0NzMuNzUxMiwyNDMuMzg2MyBMNDczLjc1MTIsMjQ1LjU0MjUgTDQ2OC40ODU2LDI0NS41NDI1IEw0NjguNDg1NiwyNDguMjE0NCBMNDczLjI1MTIsMjQ4LjIxNDQgTDQ3My4yNTEyLDI1MC4zNzA2IEw0NjguNDg1NiwyNTAuMzcwNiBMNDY4LjQ4NTYsMjUzLjYyMDYgTDQ3My43NTEyLDI1My42MjA2IEw0NzMuNzUxMiwyNTUuNzc2OSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjQ4NS41NjIzIiB5PSIyNTQuNjIzNiI+JiMyMTgzMDsmIzIxNjk3OyYjMTI1MTA7JiMxMjQ3MzsmIzEyNDc5OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI0NDciIHgyPSI1NjYuMjAzOCIgeTE9IjI2NS43NzY5IiB5Mj0iMjY1Ljc3NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDkuMjAzOCIgeD0iNDUyIiB5PSIyODIuNzcyIj4mIzIxODMwOyYjMjE2OTc7JiMxMjQ2NzsmIzEyNTQwOyYjMTI0ODk7ICYjMTcxO1BLJiMxODc7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0NDciIHgyPSI1NjYuMjAzOCIgeTE9IjI5MC4wNzM4IiB5Mj0iMjkwLjA3MzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MS45OTk4IiB4PSI0NTIiIHk9IjMwNy4wNjg5Ij4mIzIxODMwOyYjMjE2OTc7JiMyMTUxNzs8L3RleHQ+PC9nPjwhLS1jbGFzcyA/Pz8/Py0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Ii4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIyNCIgaWQ9ImVudDAwMDUiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTk0LjY3MTkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE3Ni44MTM5IiB4PSIxNDkuMTkiIHk9IjQwNi45NjY5Ii8+PGVsbGlwc2UgY3g9IjE5OC4zNDcxIiBjeT0iNDIyLjk2NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTIwMi40NTY1LDQyOC45NjY5IEwxOTQuNzM3Nyw0MjguOTY2OSBMMTk0LjczNzcsNDE2LjU3NjMgTDIwMi40NTY1LDQxNi41NzYzIEwyMDIuNDU2NSw0MTguNzMyNSBMMTk3LjE5MDksNDE4LjczMjUgTDE5Ny4xOTA5LDQyMS40MDQ0IEwyMDEuOTU2NSw0MjEuNDA0NCBMMjAxLjk1NjUsNDIzLjU2MDYgTDE5Ny4xOTA5LDQyMy41NjA2IEwxOTcuMTkwOSw0MjYuODEwNiBMMjAyLjQ1NjUsNDI2LjgxMDYgTDIwMi40NTY1LDQyOC45NjY5IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iMjE4Ljg0NzEiIHk9IjQyNy44MTM2Ij4mIzIyMzEyOyYjMjQyMzU7JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjE1MC4xOSIgeDI9IjMyNS4wMDM5IiB5MT0iNDM4Ljk2NjkiIHkyPSI0MzguOTY2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU0LjExMzMiIHg9IjE1NS4xOSIgeT0iNDU1Ljk2MiI+SUQgJiMxNzE7UEsmIzE4Nzs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE1MC4xOSIgeDI9IjMyNS4wMDM5IiB5MT0iNDYzLjI2MzgiIHkyPSI0NjMuMjYzOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwOC44MTQxIiB4PSIxNTUuMTkiIHk9IjQ4MC4yNTg5Ij4mIzIwNDg5OyYjMjQyMzU7JiMxMjQ2NzsmIzEyNTQwOyYjMTI0ODk7ICYjMTcxO0ZLJiMxODc7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwOC44MTQxIiB4PSIxNTUuMTkiIHk9IjQ5Ni41NTU3Ij4mIzIxODMwOyYjMjE2OTc7JiMxMjQ2NzsmIzEyNTQwOyYjMTI0ODk7ICYjMTcxO0ZLJiMxODc7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE2NC44MTM5IiB4PSIxNTUuMTkiIHk9IjUxMi44NTI2Ij4mIzEyNTI1OyYjMTI0NjU7JiMxMjU0MDsmIzEyNDcxOyYjMTI1MTk7JiMxMjUzMTsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsgJiMxNzE7RksmIzE4Nzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iMTU1LjE5IiB5PSI1MjkuMTQ5NSI+JiMyOTY5NDsmIzIyMzEyOyYjMjQyMzU7JiMyNTk2ODs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDEuOTk5OCIgeD0iMTU1LjE5IiB5PSI1NDUuNDQ2NCI+JiMyNDM0MTsmIzI0NDAzOyYjMjU5Njg7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjE1NS4xOSIgeT0iNTYxLjc0MzIiPiYjMzAzMzA7JiMyNzg4MDsmIzI3NTMxOyYjMjU5Njg7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjE1NS4xOSIgeT0iNTc4LjA0MDEiPiYjMTI1MjU7JiMxMjQ4MzsmIzEyNDg4OyYjMzAwNTg7JiMyMTQ5NTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iMTU1LjE5IiB5PSI1OTQuMzM3Ij4mIzEyNDk2OyYjMTI1NDA7JiMxMjQ3MjsmIzEyNTE5OyYjMTI1MzE7PC90ZXh0PjwvZz48IS0tY2xhc3MgPz8/Pz8/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMzciIGlkPSJlbnQwMDA2Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjE5NC42NzE5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNDMuOTk5NSIgeD0iNTQyLjYiIHk9IjQwNi45NjY5Ii8+PGVsbGlwc2UgY3g9IjU1Ny42IiBjeT0iNDIyLjk2NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTU2MS43MDk0LDQyOC45NjY5IEw1NTMuOTkwNiw0MjguOTY2OSBMNTUzLjk5MDYsNDE2LjU3NjMgTDU2MS43MDk0LDQxNi41NzYzIEw1NjEuNzA5NCw0MTguNzMyNSBMNTU2LjQ0MzgsNDE4LjczMjUgTDU1Ni40NDM4LDQyMS40MDQ0IEw1NjEuMjA5NCw0MjEuNDA0NCBMNTYxLjIwOTQsNDIzLjU2MDYgTDU1Ni40NDM4LDQyMy41NjA2IEw1NTYuNDQzOCw0MjYuODEwNiBMNTYxLjcwOTQsNDI2LjgxMDYgTDU2MS43MDk0LDQyOC45NjY5IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTExLjk5OTUiIHg9IjU3MS42IiB5PSI0MjcuODEzNiI+JiMyMDgzNzsmIzIwOTg2OyYjMjQyMzU7JiMyMzY1MzsmIzI3NTA4OyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI1NDMuNiIgeDI9IjY4NS41OTk1IiB5MT0iNDM4Ljk2NjkiIHkyPSI0MzguOTY2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU0LjExMzMiIHg9IjU0OC42IiB5PSI0NTUuOTYyIj5JRCAmIzE3MTtQSyYjMTg3OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNTQzLjYiIHgyPSI2ODUuNTk5NSIgeTE9IjQ2My4yNjM4IiB5Mj0iNDYzLjI2MzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDguODE0MSIgeD0iNTQ4LjYiIHk9IjQ4MC4yNTg5Ij4mIzIwNDg5OyYjMjQyMzU7JiMxMjQ2NzsmIzEyNTQwOyYjMTI0ODk7ICYjMTcxO0ZLJiMxODc7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwOC44MTQxIiB4PSI1NDguNiIgeT0iNDk2LjU1NTciPiYjMjE4MzA7JiMyMTY5NzsmIzEyNDY3OyYjMTI1NDA7JiMxMjQ4OTsgJiMxNzE7RksmIzE4Nzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iNTQ4LjYiIHk9IjUxMi44NTI2Ij4mIzMxMjI3OyYjMjEyMDU7JiMyNjA4NTsmIzI2MTc4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSI1NDguNiIgeT0iNTI5LjE0OTUiPiYjMzEyMjc7JiMyMTIwNTsmIzIxMzA2OyYjMjA5OTg7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjU0OC42IiB5PSI1NDUuNDQ2NCI+JiMzMTIyNzsmIzIxMjA1OyYjMjU5Njg7JiMzNzMyNzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iNTQ4LjYiIHk9IjU2MS43NDMyIj4mIzMxMjI3OyYjMjEyMDU7JiMyMTA2OTsmIzIyMzEyOyYjMjQyMzU7JiMyNTk2ODs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iNTQ4LjYiIHk9IjU3OC4wNDAxIj4mIzMxMjI3OyYjMjEyMDU7JiMyNDQ2MDsmIzIyMzEyOyYjMjQyMzU7JiMyNTk2ODs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iNTQ4LjYiIHk9IjU5NC4zMzciPiYjMjAyNTM7JiMzMTA4MDsmIzMwMDU4OyYjMjE0OTU7PC90ZXh0PjwvZz48IS0tY2xhc3MgPz8/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iNTAiIGlkPSJlbnQwMDA3Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjE0NS43ODEzIiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMjAuODE0MSIgeD0iMjkwLjE5IiB5PSIyMDEuMTg2OSIvPjxlbGxpcHNlIGN4PSIzMTMuNjU2NSIgY3k9IjIxNy4xODY5IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0zMTcuNzY1OSwyMjMuMTg2OSBMMzEwLjA0NzEsMjIzLjE4NjkgTDMxMC4wNDcxLDIxMC43OTYzIEwzMTcuNzY1OSwyMTAuNzk2MyBMMzE3Ljc2NTksMjEyLjk1MjUgTDMxMi41MDAzLDIxMi45NTI1IEwzMTIuNTAwMywyMTUuNjI0NCBMMzE3LjI2NTksMjE1LjYyNDQgTDMxNy4yNjU5LDIxNy43ODA2IEwzMTIuNTAwMywyMTcuNzgwNiBMMzEyLjUwMDMsMjIxLjAzMDYgTDMxNy43NjU5LDIyMS4wMzA2IEwzMTcuNzY1OSwyMjMuMTg2OSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjMyOS41Mzc5IiB5PSIyMjIuMDMzNiI+JiMyNjg0MjsmIzIxMzY4OyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyOTEuMTkiIHgyPSI0MTAuMDA0MSIgeTE9IjIzMy4xODY5IiB5Mj0iMjMzLjE4NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NC4xMTMzIiB4PSIyOTYuMTkiIHk9IjI1MC4xODIiPklEICYjMTcxO1BLJiMxODc7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyOTEuMTkiIHgyPSI0MTAuMDA0MSIgeTE9IjI1Ny40ODM4IiB5Mj0iMjU3LjQ4MzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS45OTk4IiB4PSIyOTYuMTkiIHk9IjI3NC40Nzg5Ij4mIzI2ODQyOyYjMjEzNjg7JiMzMDA1ODsmIzIxNDk1OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDguODE0MSIgeD0iMjk2LjE5IiB5PSIyOTAuNzc1NyI+JiMyMDQ4OTsmIzI0MjM1OyYjMTI0Njc7JiMxMjU0MDsmIzEyNDg5OyAmIzE3MTtGSyYjMTg3OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MS45OTk4IiB4PSIyOTYuMTkiIHk9IjMwNy4wNzI2Ij4mIzI2ODQyOyYjMjEzNjg7JiMyNjA4NTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iMjk2LjE5IiB5PSIzMjMuMzY5NSI+JiMxMjQ3MzsmIzEyNDg2OyYjMTI1NDA7JiMxMjQ3OTsmIzEyNDczOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSIyOTYuMTkiIHk9IjMzOS42NjY0Ij4mIzEyNDk2OyYjMTI1NDA7JiMxMjQ3MjsmIzEyNTE5OyYjMTI1MzE7PC90ZXh0PjwvZz48IS0tY2xhc3MgPz8/Pz8/Py0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Ii4uLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjYwIiBpZD0iZW50MDAwOCI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxNzguMzc1IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMjkuOTk5NiIgeD0iMzcxLjYiIHk9IjQxNS4xMTY5Ii8+PGVsbGlwc2UgY3g9IjM4Ni42IiBjeT0iNDMxLjExNjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTM5MC43MDk0LDQzNy4xMTY5IEwzODIuOTkwNiw0MzcuMTE2OSBMMzgyLjk5MDYsNDI0LjcyNjMgTDM5MC43MDk0LDQyNC43MjYzIEwzOTAuNzA5NCw0MjYuODgyNSBMMzg1LjQ0MzgsNDI2Ljg4MjUgTDM4NS40NDM4LDQyOS41NTQ0IEwzOTAuMjA5NCw0MjkuNTU0NCBMMzkwLjIwOTQsNDMxLjcxMDYgTDM4NS40NDM4LDQzMS43MTA2IEwzODUuNDQzOCw0MzQuOTYwNiBMMzkwLjcwOTQsNDM0Ljk2MDYgTDM5MC43MDk0LDQzNy4xMTY5IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTcuOTk5NiIgeD0iNDAwLjYiIHk9IjQzNS45NjM2Ij4mIzI2ODQyOyYjMjEzNjg7JiMyNjEyNjsmIzMyMDQ4OyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIzNzIuNiIgeDI9IjUwMC41OTk2IiB5MT0iNDQ3LjExNjkiIHkyPSI0NDcuMTE2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU0LjExMzMiIHg9IjM3Ny42IiB5PSI0NjQuMTEyIj5JRCAmIzE3MTtQSyYjMTg3OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzcyLjYiIHgyPSI1MDAuNTk5NiIgeTE9IjQ3MS40MTM4IiB5Mj0iNDcxLjQxMzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4MS43MjM1IiB4PSIzNzcuNiIgeT0iNDg4LjQwODkiPiYjMjY4NDI7JiMyMTM2ODtJRCAmIzE3MTtGSyYjMTg3OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSIzNzcuNiIgeT0iNTA0LjcwNTciPiYjMjY4NDI7JiMyMTM2ODsmIzM0ODkyOyYjMzAwNTg7JiMyMTQ5NTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA4LjgxNDEiIHg9IjM3Ny42IiB5PSI1MjEuMDAyNiI+JiMyMTgzMDsmIzIxNjk3OyYjMTI0Njc7JiMxMjU0MDsmIzEyNDg5OyAmIzE3MTtGSyYjMTg3OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSIzNzcuNiIgeT0iNTM3LjI5OTUiPiYjMjQxMTU7JiMzMTgwNzsmIzIyMzEyOyYjMjQyMzU7JiMyNTk2ODs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDEuOTk5OCIgeD0iMzc3LjYiIHk9IjU1My41OTY0Ij4mIzIzNDU1OyYjMjY4NDI7JiMyNTk2ODs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDEuOTk5OCIgeD0iMzc3LjYiIHk9IjU2OS44OTMyIj4mIzI0MDQ2OyYjMzAwNjQ7JiMyNTk2ODs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iMzc3LjYiIHk9IjU4Ni4xOTAxIj4mIzM1NTE5OyYjMjU5NzI7JiMyODE2ODsmIzEyNTAxOyYjMTI1MjE7JiMxMjQ2NDs8L3RleHQ+PC9nPjwhLS1saW5rID8/Pz8/IHRvID8/Pz8/Pz8/Py0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDAyIiBkYXRhLWVudGl0eS0yPSJlbnQwMDAzIiBkYXRhLWxpbmstdHlwZT0iY3Jvd2Zvb3QiIGRhdGEtc291cmNlLWxpbmU9IjcyIiBpZD0ibG5rOSI+PHBhdGggY29kZUxpbmU9IjcyIiBkPSJNMjM0Ljg3MTYsMTQ2LjkyODUgQzIwOS4yMTE2LDE3MC4xNzg1IDE5Ny40ODA2LDE4MC43OTI2IDE3MC43MjA2LDIwNS4wMzI2IiBmaWxsPSJub25lIiBpZD0iJiMyMDQ4OTsmIzI0MjM1OyYjMTI1MTA7JiMxMjQ3MzsmIzEyNDc5Oy0mIzEyNTI1OyYjMTI0NjU7JiMxMjU0MDsmIzEyNDcxOyYjMTI1MTk7JiMxMjUzMTsmIzEyNTEwOyYjMTI0NzM7JiMxMjQ3OTsiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjM1LjE1IiB4Mj0iMjQwLjUyMTYiIHkxPSIxNDEuMjc4NSIgeTI9IjE0Ny4yMDY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjIzMi45MjY5IiB4Mj0iMjM4LjI5ODUiIHkxPSIxNDMuMjkyOCIgeTI9IjE0OS4yMjEyIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjIzNC44NzE2IiB4Mj0iMjQwLjgiIHkxPSIxNDYuOTI4NSIgeTI9IjE0MS41NTY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE2My4zMDkxIiB4Mj0iMTYxLjQwODEiIHkxPSIyMTEuNzQ2MSIgeTI9IjIyMS41NjM3Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE2My4zMDkxIiB4Mj0iMTUzLjM1MTkiIHkxPSIyMTEuNzQ2MSIgeTI9IjIxMi42NyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxNjMuMzA5MSIgeDI9IjE1Ny4zOCIgeTE9IjIxMS43NDYxIiB5Mj0iMjE3LjExNjkiLz48ZWxsaXBzZSBjeD0iMTY3Ljc1NiIgY3k9IjIwNy43MTgiIGZpbGw9Im5vbmUiIHJ4PSI0IiByeT0iNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayA/Pz8/PyB0byA/Pz8/Py0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDAyIiBkYXRhLWVudGl0eS0yPSJlbnQwMDA1IiBkYXRhLWxpbmstdHlwZT0iY3Jvd2Zvb3QiIGRhdGEtc291cmNlLWxpbmU9IjczIiBpZD0ibG5rMTAiPjxwYXRoIGNvZGVMaW5lPSI3MyIgZD0iTTI4MS44NzEzLDE0OS4zMDk2IEMyNzguMTMxMywxNjcuODg5NiAyNzUuNjUsMTgxLjU1NjkgMjcyLjYsMjAxLjE4NjkgQzI2MS45NiwyNjkuNjY2OSAyNTQuODkxNCwzMjkuNDMzNCAyNDguNzExNCwzODguODczNCIgZmlsbD0ibm9uZSIgaWQ9IiYjMjA0ODk7JiMyNDIzNTsmIzEyNTEwOyYjMTI0NzM7JiMxMjQ3OTstJiMyMjMxMjsmIzI0MjM1OyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyNzguNzM5MyIgeDI9IjI4Ni41ODIiIHkxPSIxNDQuNTk4OSIgeTI9IjE0Ni4xNzc2Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjI3OC4xNDczIiB4Mj0iMjg1Ljk5IiB5MT0iMTQ3LjUzOTkiIHkyPSIxNDkuMTE4NiIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyODEuODcxMyIgeDI9IjI4My40NSIgeTE9IjE0OS4zMDk2IiB5Mj0iMTQxLjQ2NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjQ3LjY3NzMiIHgyPSIyNTIuODE3OCIgeTE9IjM5OC44MTk4IiB5Mj0iNDA3LjM5NzQiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjQ3LjY3NzMiIHgyPSIyNDAuODgyMiIgeTE9IjM5OC44MTk4IiB5Mj0iNDA2LjE1NjQiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjQ3LjY3NzMiIHgyPSIyNDYuODUiIHkxPSIzOTguODE5OCIgeTI9IjQwNi43NzY5Ii8+PGVsbGlwc2UgY3g9IjI0OC4yOTc4IiBjeT0iMzkyLjg1MTkiIGZpbGw9Im5vbmUiIHJ4PSI0IiByeT0iNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayA/Pz8/PyB0byA/Pz8/Py0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDA0IiBkYXRhLWVudGl0eS0yPSJlbnQwMDA1IiBkYXRhLWxpbmstdHlwZT0iY3Jvd2Zvb3QiIGRhdGEtc291cmNlLWxpbmU9Ijc0IiBpZD0ibG5rMTEiPjxwYXRoIGNvZGVMaW5lPSI3NCIgZD0iTTQ1OC42NTU1LDMyMC4xNjY1IEM0NDcuMTM1NSwzMzAuNzc2NSA0NDAuNDQsMzM2LjcyNjkgNDI4LjYsMzQ2Ljk2NjkgQzM5Ni41NywzNzQuNjU2OSAzODcuMzksMzgwLjE3NjkgMzU0LjYsNDA2Ljk2NjkgQzM0NS40Myw0MTQuNDU2OSAzNDkuNzc3OCw0MTAuODYgMzQwLjI0NzgsNDE4LjY5IiBmaWxsPSJub25lIiBpZD0iJiMyMTgzMDsmIzIxNjk3OyYjMTI1MTA7JiMxMjQ3MzsmIzEyNDc5Oy0mIzIyMzEyOyYjMjQyMzU7JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjQ1OC44ODc5IiB4Mj0iNDY0LjMwNzYiIHkxPSIzMTQuNTE0NSIgeTI9IjMyMC4zOTkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDU2LjY4MTIiIHgyPSI0NjIuMTAwOSIgeTE9IjMxNi41NDY4IiB5Mj0iMzIyLjQzMTMiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDU4LjY1NTUiIHgyPSI0NjQuNTQiIHkxPSIzMjAuMTY2NSIgeTI9IjMxNC43NDY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjMzMi41MjEyIiB4Mj0iMzMwLjE0OSIgeTE9IjQyNS4wMzgzIiB5Mj0iNDM0Ljc1MjgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzMyLjUyMTIiIHgyPSIzMjIuNTMxIiB5MT0iNDI1LjAzODMiIHkyPSI0MjUuNDgwOSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMzIuNTIxMiIgeDI9IjMyNi4zNCIgeTE9IjQyNS4wMzgzIiB5Mj0iNDMwLjExNjkiLz48ZWxsaXBzZSBjeD0iMzM3LjE1NzIiIGN5PSI0MjEuMjI5MyIgZmlsbD0ibm9uZSIgcng9IjQiIHJ5PSI0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rID8/Pz8/Pz8/PyB0byA/Pz8/Py0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDAzIiBkYXRhLWVudGl0eS0yPSJlbnQwMDA1IiBkYXRhLWxpbmstdHlwZT0iY3Jvd2Zvb3QiIGRhdGEtc291cmNlLWxpbmU9Ijc1IiBpZD0ibG5rMTIiPjxwYXRoIGNvZGVMaW5lPSI3NSIgZD0iTTEzNC41NjUzLDMzNy43IEMxNDguNzY1MywzNjAuNTMgMTUxLjg5NTEsMzY1LjUzMSAxNjcuOTc1MSwzOTEuMzkxIiBmaWxsPSJub25lIiBpZD0iJiMxMjUyNTsmIzEyNDY1OyYjMTI1NDA7JiMxMjQ3MTsmIzEyNTE5OyYjMTI1MzE7JiMxMjUxMDsmIzEyNDczOyYjMTI0Nzk7LSYjMjIzMTI7JiMyNDIzNTsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTI5LjA1NjEiIHgyPSIxMzUuODQ5MiIgeTE9IjMzNi40MTYxIiB5Mj0iMzMyLjE5MDgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTMwLjY0MDUiIHgyPSIxMzcuNDMzNyIgeTE9IjMzOC45NjM1IiB5Mj0iMzM0LjczODMiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTM0LjU2NTMiIHgyPSIxMzAuMzQiIHkxPSIzMzcuNyIgeTI9IjMzMC45MDY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE3My4yNTU2IiB4Mj0iMTgyLjU3NTMiIHkxPSIzOTkuODgzMiIgeTI9IjQwMy41MDg2Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE3My4yNTU2IiB4Mj0iMTcyLjM4NDciIHkxPSIzOTkuODgzMiIgeTI9IjQwOS44NDUyIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE3My4yNTU2IiB4Mj0iMTc3LjQ4IiB5MT0iMzk5Ljg4MzIiIHkyPSI0MDYuNjc2OSIvPjxlbGxpcHNlIGN4PSIxNzAuMDg3MyIgY3k9IjM5NC43ODc5IiBmaWxsPSJub25lIiByeD0iNCIgcnk9IjQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLWxpbmsgPz8/Pz8gdG8gPz8/Pz8/Pz8tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwMiIgZGF0YS1lbnRpdHktMj0iZW50MDAwNiIgZGF0YS1saW5rLXR5cGU9ImNyb3dmb290IiBkYXRhLXNvdXJjZS1saW5lPSI3NiIgaWQ9ImxuazEzIj48cGF0aCBjb2RlTGluZT0iNzYiIGQ9Ik0zNjIuMzUzOCw5OC43NzM3IEM0MzAuMTQzOCwxMDYuODUzNyA1MjkuNTIsMTI5LjkxNjkgNTg0LjYsMjAxLjE4NjkgQzYyOS4wOSwyNTguNzM2OSA2MzUuNjE0OCwzMjQuMDcyOCA2MzAuOTk0OCwzODguNjMyOCIgZmlsbD0ibm9uZSIgaWQ9IiYjMjA0ODk7JiMyNDIzNTsmIzEyNTEwOyYjMTI0NzM7JiMxMjQ3OTstJiMyMDgzNzsmIzIwOTg2OyYjMjQyMzU7JiMyMzY1MzsmIzI3NTA4OyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzNTcuOTA4NSIgeDI9IjM1OC44NTUzIiB5MT0iMTAyLjI3MjIiIHkyPSI5NC4zMjg0Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjM2MC44ODc0IiB4Mj0iMzYxLjgzNDIiIHkxPSIxMDIuNjI3MiIgeTI9Ijk0LjY4MzUiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzYyLjM1MzgiIHgyPSIzNTQuNDEiIHkxPSI5OC43NzM3IiB5Mj0iOTcuODI2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI2MzAuMjgxIiB4Mj0iNjM1LjY5NDciIHkxPSIzOTguNjA3MyIgeTI9IjQwNy4wMTUxIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjYzMC4yODEiIHgyPSI2MjMuNzI1MyIgeTE9IjM5OC42MDczIiB5Mj0iNDA2LjE1ODYiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNjMwLjI4MSIgeDI9IjYyOS43MSIgeTE9IjM5OC42MDczIiB5Mj0iNDA2LjU4NjkiLz48ZWxsaXBzZSBjeD0iNjMwLjcwOTMiIGN5PSIzOTIuNjIyNiIgZmlsbD0ibm9uZSIgcng9IjQiIHJ5PSI0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rID8/Pz8/IHRvID8/Pz8/Pz8/LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDQiIGRhdGEtZW50aXR5LTI9ImVudDAwMDYiIGRhdGEtbGluay10eXBlPSJjcm93Zm9vdCIgZGF0YS1zb3VyY2UtbGluZT0iNzciIGlkPSJsbmsxNCI+PHBhdGggY29kZUxpbmU9Ijc3IiBkPSJNNTI4LjgzMjEsMzIyLjA1OCBDNTQwLjg2MjEsMzQ3LjQ3OCA1NDUuODkxNCwzNTguMTA2MyA1NjEuMTQxNCwzOTAuMzM2MyIgZmlsbD0ibm9uZSIgaWQ9IiYjMjE4MzA7JiMyMTY5NzsmIzEyNTEwOyYjMTI0NzM7JiMxMjQ3OTstJiMyMDgzNzsmIzIwOTg2OyYjMjQyMzU7JiMyMzY1MzsmIzI3NTA4OyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI1MjMuNTA1NSIgeDI9IjUzMC43MzY2IiB5MT0iMzIwLjE1MzUiIHkyPSIzMTYuNzMxNCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI1MjQuNzg4OCIgeDI9IjUzMi4wMTk5IiB5MT0iMzIyLjg2NTIiIHkyPSIzMTkuNDQzIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjUyOC44MzIxIiB4Mj0iNTI1LjQxIiB5MT0iMzIyLjA1OCIgeTI9IjMxNC44MjY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjU2NS40MTg0IiB4Mj0iNTc0LjI2MzUiIHkxPSIzOTkuMzc1NSIgeTI9IjQwNC4wNDA3Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjU2NS40MTg0IiB4Mj0iNTYzLjQxNjUiIHkxPSIzOTkuMzc1NSIgeTI9IjQwOS4xNzMxIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjU2NS40MTg0IiB4Mj0iNTY4Ljg0IiB5MT0iMzk5LjM3NTUiIHkyPSI0MDYuNjA2OSIvPjxlbGxpcHNlIGN4PSI1NjIuODUyMiIgY3k9IjM5My45NTIiIGZpbGw9Im5vbmUiIHJ4PSI0IiByeT0iNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayA/Pz8/PyB0byA/Pz8/Py0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlbnQwMDAyIiBkYXRhLWVudGl0eS0yPSJlbnQwMDA3IiBkYXRhLWxpbmstdHlwZT0iY3Jvd2Zvb3QiIGRhdGEtc291cmNlLWxpbmU9Ijc4IiBpZD0ibG5rMTUiPjxwYXRoIGNvZGVMaW5lPSI3OCIgZD0iTTMxMS4xNTE4LDE0OC45NTE1IEMzMTYuOTUxOCwxNjcuMjExNSAzMTUuODM0NSwxNjMuNzEzNSAzMjIuMjE0NSwxODMuNzczNSIgZmlsbD0ibm9uZSIgaWQ9IiYjMjA0ODk7JiMyNDIzNTsmIzEyNTEwOyYjMTI0NzM7JiMxMjQ3OTstJiMyNjg0MjsmIzIxMzY4OyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMDYuMTI4NiIgeDI9IjMxMy43NTMyIiB5MT0iMTQ2LjM1MDEiIHkyPSIxNDMuOTI4MyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMDcuMDM2OCIgeDI9IjMxNC42NjE0IiB5MT0iMTQ5LjIwOTMiIHkyPSIxNDYuNzg3NSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMTEuMTUxOCIgeDI9IjMwOC43MyIgeTE9IjE0OC45NTE1IiB5Mj0iMTQxLjMyNjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzI1LjI0NTMiIHgyPSIzMzMuMzg3OCIgeTE9IjE5My4zMDMyIiB5Mj0iMTk5LjEwODQiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzI1LjI0NTMiIHgyPSIzMjEuOTUyMiIgeTE9IjE5My4zMDMyIiB5Mj0iMjAyLjc0NTQiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzI1LjI0NTMiIHgyPSIzMjcuNjciIHkxPSIxOTMuMzAzMiIgeTI9IjIwMC45MjY5Ii8+PGVsbGlwc2UgY3g9IjMyMy40MjY4IiBjeT0iMTg3LjU4NTQiIGZpbGw9Im5vbmUiIHJ4PSI0IiByeT0iNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayA/Pz8/PyB0byA/Pz8/Pz8/LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDciIGRhdGEtZW50aXR5LTI9ImVudDAwMDgiIGRhdGEtbGluay10eXBlPSJjcm93Zm9vdCIgZGF0YS1zb3VyY2UtbGluZT0iNzkiIGlkPSJsbmsxNiI+PHBhdGggY29kZUxpbmU9Ijc5IiBkPSJNMzgwLjYzMDUsMzU0Ljc3MzIgQzM4OC43MDA1LDM3Ni4xOTMyIDM4OC40NzU4LDM3NS41NjIgMzk2Ljg4NTgsMzk3Ljg5MiIgZmlsbD0ibm9uZSIgaWQ9IiYjMjY4NDI7JiMyMTM2ODsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTstJiMyNjg0MjsmIzIxMzY4OyYjMjYxMjY7JiMzMjA0ODsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzc1LjQ3NzEiIHgyPSIzODIuOTYzNCIgeTE9IjM1Mi40NDAzIiB5Mj0iMzQ5LjYxOTgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzc2LjUzNDgiIHgyPSIzODQuMDIxMSIgeTE9IjM1NS4yNDc2IiB5Mj0iMzUyLjQyNzIiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzgwLjYzMDUiIHgyPSIzNzcuODEiIHkxPSIzNTQuNzczMiIgeTI9IjM0Ny4yODY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjQwMC40MTA0IiB4Mj0iNDA4Ljg0NSIgeTE9IjQwNy4yNTAyIiB5Mj0iNDEyLjYyMjEiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDAwLjQxMDQiIHgyPSIzOTcuNjE1IiB5MT0iNDA3LjI1MDIiIHkyPSI0MTYuODUxNiIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0MDAuNDEwNCIgeDI9IjQwMy4yMyIgeTE9IjQwNy4yNTAyIiB5Mj0iNDE0LjczNjkiLz48ZWxsaXBzZSBjeD0iMzk4LjI5NTYiIGN5PSI0MDEuNjM1MyIgZmlsbD0ibm9uZSIgcng9IjQiIHJ5PSI0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rID8/Pz8/IHRvID8/Pz8/Pz8tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwNCIgZGF0YS1lbnRpdHktMj0iZW50MDAwOCIgZGF0YS1saW5rLXR5cGU9ImNyb3dmb290IiBkYXRhLXNvdXJjZS1saW5lPSI4MCIgaWQ9ImxuazE3Ij48cGF0aCBjb2RlTGluZT0iODAiIGQ9Ik00OTIuMDY0NywzMjIuNDc1NCBDNDgzLjYwNDcsMzUwLjA2NTQgNDc5LjYxOTUsMzYzLjA1ODYgNDY5LjAxOTUsMzk3LjYwODYiIGZpbGw9Im5vbmUiIGlkPSImIzIxODMwOyYjMjE2OTc7JiMxMjUxMDsmIzEyNDczOyYjMTI0Nzk7LSYjMjY4NDI7JiMyMTM2ODsmIzI2MTI2OyYjMzIwNDg7JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjQ4OS40MTMxIiB4Mj0iNDk3LjA2MTYiIHkxPSIzMTcuNDc4NSIgeTI9IjMxOS44MjM4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjQ4OC41MzM2IiB4Mj0iNDk2LjE4MjEiIHkxPSIzMjAuMzQ2NyIgeTI9IjMyMi42OTIiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDkyLjA2NDciIHgyPSI0OTQuNDEiIHkxPSIzMjIuNDc1NCIgeTI9IjMxNC44MjY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjQ2Ni4wODY1IiB4Mj0iNDY5LjQ3NjEiIHkxPSI0MDcuMTY4NyIgeTI9IjQxNi41NzY3Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjQ2Ni4wODY1IiB4Mj0iNDU4LjAwMzkiIHkxPSI0MDcuMTY4NyIgeTI9IjQxMy4wNTciLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDY2LjA4NjUiIHgyPSI0NjMuNzQiIHkxPSI0MDcuMTY4NyIgeTI9IjQxNC44MTY5Ii8+PGVsbGlwc2UgY3g9IjQ2Ny44NDYzIiBjeT0iNDAxLjQzMjYiIGZpbGw9Im5vbmUiIHJ4PSI0IiByeT0iNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48P3BsYW50dW1sLXNyYyBoTEZESmk5MDRCeGxLX0c1LVdRNGF2ZU9CeVB0dTQxWXpEQUIwSEZqblc4MVg4SGk1N3ozSjBEWVE0ZkFHZ3E4M3hGa0JodzV0VXFZZk5SQm5UbGlWM0ZWVkJDcE9uSUR1dTk2N1dPYVU2REVaeEtqVkVkaTdmNXgzdTMyWUw0cXBaSG9LR2oxMzktbS1PeERYTE8ycWNEdzZDdW1oNmN2dEU1MUZXenFOSUFhdExuUFpPMUtCTjMtSXVSWDI5alpkY1RFQ1VuWndDTTlLcjFiYUpZb25uN3dTaVZHNDYxcEJsblVoMmYxNWtiU1JoR0dVVEJPMVM5UllFTUJfeTZtOGdKbl9Gc1R4T0Itclgza3gyUDUyNmxEZXY4S2tPM0M0RmRpUzhqcjAtZURnNUZkM3F1MzhPUkxpNmRJY2VSbGprM3E4eXd1LVlrUkwwOC1aUjVESHZEX1FlRnJGcVdUcUhrUlRhdHZhREVNMjdBX0F3cUxLY2trNnZBa1VNRmotZmV6Q2RpV0VyYWgzcVRBY2h2SVMwSkJCRkxNWDM2WEpDMWQzd3M4QVJHcEZhcGN0NXdwWVJrYms3MzUyWXJ4WlBNVXo2eVpsaVZTSE1vd3BkRU9BUW9mbXYzQmhVTG1HVDY0LWJLQzRPUWxzN0l2a0VHVGJpa3dWYmhBa1lYTEljQVRHVjh5NTY1UGp3allMV1hHUkFISVlKOC1kSi1uRG8ydkhualhZSmNoREFHNl9tMDA/PjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_20">次章の予告<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h3>
<p>第10章では、債務管理の設計に進みます。買掛金残高の管理、支払処理のデータベース設計と実装を行います。</p>
<hr />
<p><a href="../chapter08/">← 第8章：調達管理の設計</a> | <a href="../chapter10/">第10章：債務管理の設計 →</a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://github.com/k2works/practical-database-design" target="_blank" rel="noopener" title="GitHub Repository" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "search.suggest", "search.highlight"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
      
        <script src="../../../docs/assets/js/extra.js"></script>
      
    
  </body>
</html>