<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<!-- 売上明細行フラグメント -->
<tr th:fragment="detailRow" th:id="'row-' + ${index}">
    <td>
        <select th:name="'details[' + ${index} + '].productCode'"
                class="form-select product-select"
                onchange="updateProductInfo(this)">
            <option value="">選択</option>
            <option th:each="prod : ${products}"
                    th:value="${prod.productCode}"
                    th:text="${prod.productCode + ' - ' + prod.productName}"
                    th:data-name="${prod.productName}"
                    th:data-price="${prod.sellingPrice}">
            </option>
        </select>
    </td>
    <td>
        <input type="text" th:name="'details[' + ${index} + '].productName'"
               class="form-control product-name" readonly>
    </td>
    <td>
        <input type="number" th:name="'details[' + ${index} + '].salesQuantity'"
               value="1"
               class="form-control text-end quantity-input" min="1" step="1"
               onchange="calculateAmount(this)">
    </td>
    <td>
        <input type="text" th:name="'details[' + ${index} + '].unit'"
               value="個"
               class="form-control unit-input">
    </td>
    <td>
        <input type="number" th:name="'details[' + ${index} + '].unitPrice'"
               value="0"
               class="form-control text-end price-input" min="0" step="1"
               onchange="calculateAmount(this)">
    </td>
    <td>
        <input type="text" class="form-control text-end amount-display" readonly value="0">
    </td>
    <td>
        <button type="button" class="btn btn-sm btn-outline-danger"
                onclick="removeRow(this)">削除</button>
    </td>
</tr>
</body>
</html>
